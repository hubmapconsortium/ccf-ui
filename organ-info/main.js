(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[179],{822:ee=>{"use strict";ee.exports=g,ee.exports.default=g;var q=1e20;function g(R,_,v,T,j,O){this.fontSize=R||24,this.buffer=void 0===_?3:_,this.cutoff=T||.25,this.fontFamily=j||"sans-serif",this.fontWeight=O||"normal",this.radius=v||8;var B=this.size=this.fontSize+2*this.buffer,Q=B+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=B,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Uint16Array(Q),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(B/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function D(R,_,v,T,j,O){for(var B=0;B<_;B++)C(R,B,_,v,T,j,O);for(var Q=0;Q<v;Q++)C(R,Q*_,1,_,T,j,O)}function C(R,_,v,T,j,O,B){var Q,A,F,ce;for(O[0]=0,B[0]=-q,B[1]=q,Q=0;Q<T;Q++)j[Q]=R[_+Q*v];for(Q=1,A=0,F=0;Q<T;Q++){do{F=(j[Q]-j[ce=O[A]]+Q*Q-ce*ce)/(Q-ce)/2}while(F<=B[A]&&--A>-1);O[++A]=Q,B[A]=F,B[A+1]=q}for(Q=0,A=0;Q<T;Q++){for(;B[A+1]<Q;)A++;R[_+Q*v]=j[ce=O[A]]+(Q-ce)*(Q-ce)}}g.prototype._draw=function(R,_){var O,B,Q,A,F,ce,K,J,Z,v=this.ctx.measureText(R),T=v.width,j=2*this.buffer;_&&this.useMetrics?(F=Math.floor(v.actualBoundingBoxAscent),J=this.buffer+Math.ceil(v.actualBoundingBoxAscent),ce=this.buffer,K=this.buffer,O=(B=Math.min(this.size,Math.ceil(v.actualBoundingBoxRight-v.actualBoundingBoxLeft)))+j,Q=(A=Math.min(this.size-ce,Math.ceil(v.actualBoundingBoxAscent+v.actualBoundingBoxDescent)))+j,this.ctx.textBaseline="alphabetic"):(O=B=this.size,Q=A=this.size,F=19*this.fontSize/24,ce=K=0,J=this.middle,this.ctx.textBaseline="middle"),B&&A&&(this.ctx.clearRect(K,ce,B,A),this.ctx.fillText(R,this.buffer,J),Z=this.ctx.getImageData(K,ce,B,A));var $=new Uint8ClampedArray(O*Q);return function M(R,_,v,T,j,O,B){O.fill(q,0,_*v),B.fill(0,0,_*v);for(var Q=(_-T)/2,A=0;A<j;A++)for(var F=0;F<T;F++){var ce=(A+Q)*_+F+Q,K=R.data[4*(A*T+F)+3]/255;if(1===K)O[ce]=0,B[ce]=q;else if(0===K)O[ce]=q,B[ce]=0;else{var J=Math.max(0,.5-K),Z=Math.max(0,K-.5);O[ce]=J*J,B[ce]=Z*Z}}}(Z,O,Q,B,A,this.gridOuter,this.gridInner),D(this.gridOuter,O,Q,this.f,this.v,this.z),D(this.gridInner,O,Q,this.f,this.v,this.z),function y(R,_,v,T,j,O,B){for(var Q=0;Q<_*v;Q++){var A=Math.sqrt(T[Q])-Math.sqrt(j[Q]);R[Q]=Math.round(255-255*(A/O+B))}}($,O,Q,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:$,metrics:{width:B,height:A,sdfWidth:O,sdfHeight:Q,top:F,left:0,advance:T}}},g.prototype.draw=function(R){return this._draw(R,!1).data},g.prototype.drawWithMetrics=function(R){return this._draw(R,!0)}},2500:(ee,q,g)=>{"use strict";var M={};g.r(M),g.d(M,{decode:()=>C0e,name:()=>S0e});var y={};g.r(y),g.d(y,{name:()=>R0e,preprocess:()=>O0e});var D={};g.r(D),g.d(D,{name:()=>P0e,preprocess:()=>N0e});var C={};g.r(C),g.d(C,{decode:()=>yve,encode:()=>vve,name:()=>_ve,preprocess:()=>bve});var R={};g.r(R),g.d(R,{decode:()=>Sve,encode:()=>Cve,name:()=>Ave});var _={};g.r(_),g.d(_,{decode:()=>Tve,encode:()=>Ive,name:()=>Mve});var v={};g.r(v),g.d(v,{decode:()=>kve,encode:()=>Rve,name:()=>Dve});var T={};g.r(T),g.d(T,{delMany:()=>eLe,get:()=>ZNe,setMany:()=>QNe});let O=null,Q=1;function F(n){const e=O;return O=n,e}function w(n){if((!Qe(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Q)){if(!n.producerMustRecompute(n)&&!le(n))return n.dirty=!1,void(n.lastCleanEpoch=Q);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Q}}function le(n){qe(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(w(t),i!==t.version))return!0}return!1}function Le(n,e){if(function Te(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),qe(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Le(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];qe(r),r.producerIndexOfThis[i]=e}}function Qe(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function qe(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let gt=null;function ye(n){return"function"==typeof n}function ze(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const st=ze(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function bt(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class At{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ye(i))try{i()}catch(o){e=o instanceof st?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{_e(o)}catch(s){e=e??[],s instanceof st?e=[...e,...s.errors]:e.push(s)}}if(e)throw new st(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_e(e);else{if(e instanceof At){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&bt(t,e)}remove(e){const{_finalizers:t}=this;t&&bt(t,e),e instanceof At&&e._removeParent(this)}}At.EMPTY=(()=>{const n=new At;return n.closed=!0,n})();const xt=At.EMPTY;function Xt(n){return n instanceof At||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function _e(n){ye(n)?n():n.unsubscribe()}const X={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:i}=oe;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Be(n){oe.setTimeout(()=>{const{onUnhandledError:e}=X;if(!e)throw n;e(n)})}function tt(){}const dt=Fn("C",void 0,void 0);function Fn(n,e,t){return{kind:n,value:e,error:t}}let Gn=null;function kn(n){if(X.useDeprecatedSynchronousErrorHandling){const e=!Gn;if(e&&(Gn={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Gn;if(Gn=null,t)throw i}}else n()}class Wi extends At{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xt(e)&&e.add(this)):this.destination=al}static create(e,t,i){return new jo(e,t,i)}next(e){this.isStopped?js(function ln(n){return Fn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?js(function Et(n){return Fn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?js(dt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const aa=Function.prototype.bind;function pr(n,e){return aa.call(n,e)}class Bo{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Vi(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Vi(i)}else Vi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Vi(t)}}}class jo extends Wi{constructor(e,t,i){let r;if(super(),ye(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&X.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&pr(e.next,o),error:e.error&&pr(e.error,o),complete:e.complete&&pr(e.complete,o)}):r=e}this.destination=new Bo(r)}}function Vi(n){X.useDeprecatedSynchronousErrorHandling?function Bn(n){X.useDeprecatedSynchronousErrorHandling&&Gn&&(Gn.errorThrown=!0,Gn.error=n)}(n):Be(n)}function js(n,e){const{onStoppedNotification:t}=X;t&&oe.setTimeout(()=>t(n,e))}const al={closed:!0,next:tt,error:function Uo(n){throw n},complete:tt},Za="function"==typeof Symbol&&Symbol.observable||"@@observable";function Vo(n){return n}let Xe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function dn(n){return n&&n instanceof Wi||function $t(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}(n)&&Xt(n)}(t)?t:new jo(t,i,r);return kn(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Wt(i))((r,o)=>{const s=new jo({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Za](){return this}pipe(...t){return function $e(n){return 0===n.length?Vo:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=Wt(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Wt(n){var e;return null!==(e=n??X.Promise)&&void 0!==e?e:Promise}const mr=ze(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yt=(()=>{class n extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Ma(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new mr}next(t){kn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){kn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){kn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?xt:(this.currentObservers=null,o.push(t),new At(()=>{this.currentObservers=null,bt(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Xe;return t.source=this,t}}return n.create=(e,t)=>new Ma(e,t),n})();class Ma extends Yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:xt}}class Ni extends Yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Ta(n){return ye(n?.lift)}function Ti(n){return e=>{if(Ta(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function _i(n,e,t,i,r){return new Ei(n,e,t,i,r)}class Ei extends Wi{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function en(n,e){return Ti((t,i)=>{let r=0;t.subscribe(_i(i,o=>{i.next(n.call(e,o,r++))}))})}function qn(n){for(let e in n)if(n[e]===qn)return e;throw Error("Could not find renamed property on target object.")}function Io(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ai(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ai).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ro(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const we=qn({__forward_ref__:qn});function Ee(n){return n.__forward_ref__=Ee,n.toString=function(){return Ai(this())},n}function he(n){return V(n)?n():n}function V(n){return"function"==typeof n&&n.hasOwnProperty(we)&&n.__forward_ref__===Ee}function ne(n){return n&&!!n.\u0275providers}const Fe="https://g.co/ng/security#xss";class ke extends Error{constructor(e,t){super(function ct(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Dt=qn({\u0275cmp:qn}),Ft=qn({\u0275dir:qn}),Gt=qn({\u0275pipe:qn}),hn=qn({\u0275mod:qn}),gn=qn({\u0275fac:qn}),Xr=qn({__NG_ELEMENT_ID__:qn}),zr=qn({__NG_ENV_ID__:qn});function yn(n){return"string"==typeof n?n:null==n?"":String(n)}function xs(n,e){throw new ke(-201,!1)}function lr(n,e){null==n&&function jn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ct(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bp(n){return tw(n,zi)||tw(n,nw)}function tw(n,e){return n.hasOwnProperty(e)?n[e]:null}function $i(n){return n&&(n.hasOwnProperty(P_)||n.hasOwnProperty(CC))?n[P_]:null}const zi=qn({\u0275prov:qn}),P_=qn({\u0275inj:qn}),nw=qn({ngInjectableDef:qn}),CC=qn({ngInjectorDef:qn});var bi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(bi||{});let N_;function os(n){const e=N_;return N_=n,e}function rw(n,e,t){const i=Bp(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&bi.Optional?null:void 0!==e?e:void xs()}const Oi=globalThis;class _t{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ct({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const bu={},ec="__NG_DI_FLAG__",fd="ngTempTokenPath",_r=/\n/gm,Hp="__source";let yu;function dl(n){const e=yu;return yu=n,e}function IC(n,e=bi.Default){if(void 0===yu)throw new ke(-203,!1);return null===yu?rw(n,void 0,e):yu.get(n,e&bi.Optional?null:void 0,e)}function rt(n,e=bi.Default){return(function iw(){return N_}()||IC)(he(n),e)}function Rt(n,e=bi.Default){return rt(n,Sc(e))}function Sc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function U_(n){const e=[];for(let t=0;t<n.length;t++){const i=he(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ke(900,!1);let r,o=bi.Default;for(let s=0;s<i.length;s++){const a=i[s],c=sw(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(rt(r,o))}else e.push(rt(i))}return e}function vu(n,e){return n[ec]=e,n.prototype[ec]=e,n}function sw(n){return n[ec]}function tc(n){return{toString:n}.toString()}var Gp=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Gp||{}),Us=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Us||{});const la={},Ii=[];function H_(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function ss(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];wu(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function Wp(n){return 3===n||4===n||6===n}function wu(n){return 64===n.charCodeAt(0)}function xu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||G_(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function G_(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const aw="ng-template";function DC(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==H_(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function cw(n){return 4===n.type&&n.value!==aw}function kC(n,e,t){return e===(4!==n.type||t?n.value:aw)}function RC(n,e,t){let i=4;const r=n.attrs||[],o=function dw(n){for(let e=0;e<n.length;e++)if(Wp(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!kC(n,c,t)||""===c&&1===e.length){if(Go(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!DC(n.attrs,l,t)){if(Go(i))return!1;s=!0}continue}const h=OC(8&i?"class":c,r,cw(n),t);if(-1===h){if(Go(i))return!1;s=!0;continue}if(""!==l){let f;f=h>o?"":r[h+1].toLowerCase();const m=8&i?f:null;if(m&&-1!==H_(m,l,0)||2&i&&l!==f){if(Go(i))return!1;s=!0}}}}else{if(!s&&!Go(i)&&!Go(c))return!1;if(s&&Go(c))continue;s=!1,i=c|1&i}}return Go(i)||s}function Go(n){return 0==(1&n)}function OC(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function ul(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function lw(n,e,t=!1){for(let i=0;i<e.length;i++)if(RC(n,e[i],t))return!0;return!1}function $p(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function uw(n,e){return n?":not("+e.trim()+")":e}function PC(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Go(s)&&(e+=uw(o,r),r=""),i=s,o=o||!Go(i);t++}return""!==r&&(e+=uw(o,r)),e}function _n(n){return tc(()=>{const e=Xn(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Gp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Us.Emulated,styles:n.styles||Ii,_:null,schemas:n.schemas||null,tView:null,id:""};Di(t);const i=n.dependencies;return t.directiveDefs=Pr(i,!1),t.pipeDefs=Pr(i,!0),t.id=function $_(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function hw(n){return Qn(n)||lt(n)}function LC(n){return null!==n}function rn(n){return tc(()=>({type:n.type,bootstrap:n.bootstrap||Ii,declarations:n.declarations||Ii,imports:n.imports||Ii,exports:n.exports||Ii,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function fw(n,e){if(null==n)return la;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function Ht(n){return tc(()=>{const e=Xn(n);return Di(e),e})}function Wo(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qn(n){return n[Dt]||null}function lt(n){return n[Ft]||null}function St(n){return n[Gt]||null}function Xn(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||la,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ii,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fw(n.inputs,e),outputs:fw(n.outputs),debugInfo:null}}function Di(n){n.features?.forEach(e=>e(n))}function Pr(n,e){if(!n)return null;const t=e?St:hw;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(LC)}const Nr=0,zt=1,Sn=2,Gr=3,$o=4,so=5,As=6,Si=7,Qi=8,Yo=9,Vs=10,Jn=11,Fh=12,pw=13,Cc=14,Li=15,hl=16,pd=17,zs=18,Au=19,Y_=20,Da=21,Bh=22,ka=23,Ln=25,Su=1,nc=7,Mc=9,br=10;var Uh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Uh||{});function Xo(n){return Array.isArray(n)&&"object"==typeof n[Su]}function Do(n){return Array.isArray(n)&&!0===n[Su]}function X_(n){return 0!=(4&n.flags)}function md(n){return n.componentOffset>-1}function Lr(n){return 1==(1&n.flags)}function er(n){return!!n.template}function K_(n){return 0!=(512&n[Sn])}function gd(n,e){return n.hasOwnProperty(gn)?n[gn]:null}class gw{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Sr(){return fl}function fl(n){return n.type.prototype.ngOnChanges&&(n.setInput=jC),BC}function BC(){const n=bw(this),e=n?.current;if(e){const t=n.previous;if(t===la)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function jC(n,e,t,i){const r=this.declaredInputs[t],o=bw(n)||function UC(n,e){return n[_w]=e}(n,{previous:la,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new gw(c&&c.currentValue,e,a===la),n[i]=e}Sr.ngInherit=!0;const _w="__ngSimpleChanges__";function bw(n){return n[_w]||null}const ic=function(n,e,t){},yw="svg";let ww=!1;function tr(n){for(;Array.isArray(n);)n=n[Nr];return n}function $h(n,e){return tr(e[n])}function as(n,e){return tr(e[n.index])}function Yh(n,e){return n.data[e]}function Cu(n,e){return n[e]}function Cr(n,e){const t=e[n];return Xo(t)?t:t[Nr]}function nb(n){return 128==(128&n[Sn])}function rc(n,e){return null==e?null:n[e]}function xw(n){n[pd]=0}function Ew(n){1024&n[Sn]||(n[Sn]|=1024,nb(n)&&bd(n))}function Aw(n){return 9216&n[Sn]||n[ka]?.dirty}function rb(n){Aw(n)?bd(n):64&n[Sn]&&(function Tc(){return ww}()?(n[Sn]|=1024,bd(n)):n[Vs].changeDetectionScheduler?.notify())}function bd(n){n[Vs].changeDetectionScheduler?.notify();let e=yd(n);for(;null!==e&&!(8192&e[Sn])&&(e[Sn]|=8192,nb(e));)e=yd(e)}function yd(n){const e=n[Gr];return Do(e)?e[Gr]:e}const Un={lFrame:db(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Cw(){return Un.bindingsEnabled}function wd(){return null!==Un.skipHydrationRootTNode}function It(){return Un.lFrame.lView}function wi(){return Un.lFrame.tView}function nr(n){return Un.lFrame.contextLView=n,n[Qi]}function ii(n){return Un.lFrame.contextLView=null,n}function Fi(){let n=sb();for(;null!==n&&64===n.type;)n=n.parent;return n}function sb(){return Un.lFrame.currentTNode}function ua(n,e){const t=Un.lFrame;t.currentTNode=n,t.isParent=e}function Tu(){return Un.lFrame.isParent}function Ic(){Un.lFrame.isParent=!1}function cs(){const n=Un.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ha(){return Un.lFrame.bindingIndex++}function kc(n){const e=Un.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function WC(n,e){const t=Un.lFrame;t.bindingIndex=t.bindingRootIndex=n,xd(e)}function xd(n){Un.lFrame.currentDirectiveIndex=n}function kw(){return Un.lFrame.currentQueryIndex}function qh(n){Un.lFrame.currentQueryIndex=n}function Rw(n){const e=n[zt];return 2===e.type?e.declTNode:1===e.type?n[so]:null}function Ow(n,e,t){if(t&bi.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&bi.Host||(r=Rw(o),null===r||(o=o[Cc],10&r.type))););if(null===r)return!1;e=r,n=o}const i=Un.lFrame=Pw();return i.currentTNode=e,i.lView=n,!0}function lb(n){const e=Pw(),t=n[zt];Un.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Pw(){const n=Un.lFrame,e=null===n?null:n.child;return null===e?db(n):e}function db(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Qp(){const n=Un.lFrame;return Un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Nw=Qp;function Jh(){const n=Qp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ko(){return Un.lFrame.selectedIndex}function _l(n){Un.lFrame.selectedIndex=n}function Yi(){const n=Un.lFrame;return Yh(n.tView,n.selectedIndex)}let Bw=!0;function Iu(){return Bw}function Rc(n){Bw=n}function nm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function Du(n,e,t){jw(n,e,3,t)}function ei(n,e,t,i){(3&n[Sn])===t&&jw(n,e,t,i)}function fb(n,e){let t=n[Sn];(3&t)===e&&(t&=16383,t+=1,n[Sn]=t)}function jw(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&n[pd]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[pd]+=65536),(a<o||-1==o)&&(Uw(n,t,e,c),n[pd]=(4294901760&n[pd])+c+2),c++}function ku(n,e){ic(4,n,e);const t=F(null);try{e.call(n)}finally{F(t),ic(5,n,e)}}function Uw(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[Sn]>>14<n[pd]>>16&&(3&n[Sn])===e&&(n[Sn]+=16384,ku(a,o)):ku(a,o)}const Ru=-1;class Zh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function oc(n){return n!==Ru}function Ed(n){return 32767&n}function bl(n,e){let t=function zw(n){return n>>16}(n),i=e;for(;t>0;)i=i[Cc],t--;return i}let rm=!0;function Ou(n){const e=rm;return rm=n,e}const om=255,sm=5;let yl=0;const sc={};function Qh(n,e){const t=cm(n,e);if(-1!==t)return t;const i=e[zt];i.firstCreatePass&&(n.injectorIndex=e.length,am(i.data,n),am(e,null),am(i.blueprint,null));const r=lm(n,e),o=n.injectorIndex;if(oc(r)){const s=Ed(r),a=bl(r,e),c=a[zt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function am(n,e){n.push(0,0,0,0,0,0,0,0,e)}function cm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function lm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=$w(r),null===i)return Ru;if(t++,r=r[Cc],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Ru}function gb(n,e,t){!function vl(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Xr)&&(i=t[Xr]),null==i&&(i=t[Xr]=yl++);const r=i&om;e.data[n+(r>>sm)]|=1<<r}(n,e,t)}function _b(n,e,t){if(t&bi.Optional||void 0!==n)return n;xs()}function bb(n,e,t,i){if(t&bi.Optional&&void 0===i&&(i=null),!(t&(bi.Self|bi.Host))){const r=n[Yo],o=os(void 0);try{return r?r.get(e,i,t&bi.Optional):rw(e,i,t&bi.Optional)}finally{os(o)}}return _b(i,0,t)}function Hw(n,e,t,i=bi.Default,r){if(null!==n){if(2048&e[Sn]&&!(i&bi.Self)){const s=function tf(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Sn]&&!(512&s[Sn]);){const a=yb(o,s,t,i|bi.Self,sc);if(a!==sc)return a;let c=o.parent;if(!c){const l=s[Y_];if(l){const d=l.get(t,sc,i);if(d!==sc)return d}c=$w(s),s=s[Cc]}o=c}return r}(n,e,t,i,sc);if(s!==sc)return s}const o=yb(n,e,t,i,sc);if(o!==sc)return o}return bb(e,t,i,r)}function yb(n,e,t,i,r){const o=function JC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xr)?n[Xr]:void 0;return"number"==typeof e?e>=0?e&om:ZC:e}(t);if("function"==typeof o){if(!Ow(e,n,i))return i&bi.Host?_b(r,0,i):bb(e,t,i,r);try{let s;if(s=o(i),null!=s||i&bi.Optional)return s;xs()}finally{Nw()}}else if("number"==typeof o){let s=null,a=cm(n,e),c=Ru,l=i&bi.Host?e[Li][so]:null;for((-1===a||i&bi.SkipSelf)&&(c=-1===a?lm(n,e):e[a+8],c!==Ru&&ef(i,!1)?(s=e[zt],a=Ed(c),e=bl(c,e)):a=-1);-1!==a;){const d=e[zt];if(Ww(o,a,d.data)){const h=Gw(a,e,t,s,i,l);if(h!==sc)return h}c=e[a+8],c!==Ru&&ef(i,e[zt].data[a+8]===l)&&Ww(o,a,e)?(s=d,a=Ed(c),e=bl(c,e)):a=-1}}return r}function Gw(n,e,t,i,r,o){const s=e[zt],a=s.data[n+8],d=Ro(a,s,t,null==i?md(a)&&rm:i!=s&&0!=(3&a.type),r&bi.Host&&o===a);return null!==d?Ko(e,s,d,a):sc}function Ro(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,d=o>>20,f=r?a+d:n.directiveEnd;for(let m=i?a:a+d;m<f;m++){const b=s[m];if(m<c&&t===b||m>=c&&b.type===t)return m}if(r){const m=s[c];if(m&&er(m)&&m.type===t)return c}return null}function Ko(n,e,t,i){let r=n[t];const o=e.data;if(function fa(n){return n instanceof Zh}(r)){const s=r;s.resolving&&function rs(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${t}`)}(function hi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():yn(n)}(o[t]));const a=Ou(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?os(s.injectImpl):null;Ow(n,i,bi.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function hb(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=fl(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&os(l),Ou(a),s.resolving=!1,Nw()}}return r}function Ww(n,e,t){return!!(t[e+(n>>sm)]&1<<n)}function ef(n,e){return!(n&bi.Self||n&bi.Host&&e)}class Jr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Hw(this._tNode,this._lView,e,Sc(i),t)}}function ZC(){return new Jr(Fi(),It())}function Bi(n){return tc(()=>{const e=n.prototype.constructor,t=e[gn]||wl(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[gn]||wl(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function wl(n){return V(n)?()=>{const e=wl(he(n));return e&&e()}:gd(n)}function $w(n){const e=n[zt],t=e.type;return 2===t?e.declTNode:1===t?n[so]:null}function Oc(n){return function qC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(Wp(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(Fi(),n)}const Pc="__parameters__";function Nc(n,e,t){return tc(()=>{const i=function rf(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(Pc)?c[Pc]:Object.defineProperty(c,Pc,{value:[]})[Pc];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function El(n,e){n.forEach(t=>Array.isArray(t)?El(t,e):e(t))}function dm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Td(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Hs(n,e,t){let i=Id(n,e);return i>=0?n[1|i]=t:(i=~i,function um(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function af(n,e){const t=Id(n,e);if(t>=0)return n[1|t]}function Id(n,e){return function qw(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Al=vu(Nc("Optional"),8),Nu=vu(Nc("SkipSelf"),4),Sl=new _t("ENVIRONMENT_INITIALIZER"),kd=new _t("INJECTOR",-1),hm=new _t("INJECTOR_DEF_TYPES");class Gs{get(e,t=bu){if(t===bu){const i=new Error(`NullInjectorError: No provider for ${Ai(e)}!`);throw i.name="NullInjectorError",i}return t}}function fM(...n){return{\u0275providers:Cb(0,n),\u0275fromNgModule:!0}}function Cb(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return El(e,s=>{const a=s;fm(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&ix(r,o),t}function ix(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Mb(r,o=>{e(o,i)})}}function fm(n,e,t,i){if(!(n=he(n)))return!1;let r=null,o=$i(n);const s=!o&&Qn(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=$i(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)fm(l,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{El(o.imports,d=>{fm(d,e,t,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&ix(l,e)}if(!a){const l=gd(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ii},r),e({provide:hm,useValue:r,multi:!0},r),e({provide:Sl,useValue:()=>rt(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=n;Mb(c,d=>{e(d,l)})}}}return r!==n&&void 0!==n.providers}function Mb(n,e){for(let t of n)ne(t)&&(t=t.\u0275providers),Array.isArray(t)?Mb(t,e):e(t)}const pM=qn({provide:String,useValue:qn});function Tb(n){return null!==n&&"object"==typeof n&&pM in n}function Rd(n){return"function"==typeof n}const Ib=new _t("Set Injector scope."),uf={},sx={};let pm;function mm(){return void 0===pm&&(pm=new Gs),pm}class ga{}class Fu extends ga{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Db(e,s=>this.processProvider(s)),this.records.set(kd,Bu(void 0,this)),r.has("environment")&&this.records.set(ga,Bu(void 0,this));const o=this.records.get(Ib);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hm,Ii,bi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=dl(this),i=os(void 0);try{return e()}finally{dl(t),os(i)}}get(e,t=bu,i=bi.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zr))return e[zr](this);i=Sc(i);const o=dl(this),s=os(void 0);try{if(!(i&bi.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function _a(n){return"function"==typeof n||"object"==typeof n&&n instanceof _t}(e)&&Bp(e);c=l&&this.injectableDefInScope(l)?Bu(gm(e),uf):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&bi.Self?mm():this.parent).get(e,t=i&bi.Optional&&t===bu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[fd]=a[fd]||[]).unshift(Ai(e)),o)throw a;return function V_(n,e,t,i){const r=n[fd];throw e[Hp]&&r.unshift(e[Hp]),n.message=function z_(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ai(e);if(Array.isArray(e))r=e.map(Ai).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ai(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(_r,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[fd]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{os(s),dl(o)}}resolveInjectorInitializers(){const e=dl(this),t=os(void 0);try{const r=this.get(Sl,Ii,bi.Self);for(const o of r)o()}finally{dl(e),os(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ai(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(e){let t=Rd(e=he(e))?e:he(e&&e.provide);const i=function _M(n){return Tb(n)?Bu(void 0,n.useValue):Bu(ax(n),uf)}(e);if(!Rd(e)&&!0===e.multi){let r=this.records.get(t);r||(r=Bu(void 0,uf,!0),r.factory=()=>U_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===uf&&(t.value=sx,t.value=t.factory()),"object"==typeof t.value&&t.value&&function yM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=he(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function gm(n){const e=Bp(n),t=null!==e?e.factory:gd(n);if(null!==t)return t;if(n instanceof _t)throw new ke(204,!1);if(n instanceof Function)return function gM(n){if(n.length>0)throw new ke(204,!1);const t=function SC(n){return n&&(n[zi]||n[nw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ke(204,!1)}function ax(n,e,t){let i;if(Rd(n)){const r=he(n);return gd(r)||gm(r)}if(Tb(n))i=()=>he(n.useValue);else if(function ox(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...U_(n.deps||[]));else if(function rx(n){return!(!n||!n.useExisting)}(n))i=()=>rt(he(n.useExisting));else{const r=he(n&&(n.useClass||n.provide));if(!function bM(n){return!!n.deps}(n))return gd(r)||gm(r);i=()=>new r(...U_(n.deps))}return i}function Bu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Db(n,e){for(const t of n)Array.isArray(t)?Db(t,e):t&&ne(t)?Db(t.\u0275providers,e):e(t)}function lx(n,e=null,t=null,i){const r=dx(n,e,t,i);return r.resolveInjectorInitializers(),r}function dx(n,e=null,t=null,i,r=new Set){const o=[t||Ii,fM(n)];return i=i||("object"==typeof n?void 0:Ai(n)),new Fu(o,e||mm(),i||null,r)}let Pb,ir=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=bu;static#t=this.NULL=new Gs;static create(t,i){if(Array.isArray(t))return lx({name:""},i,t,"");{const r=t.name??"";return lx({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=Ct({token:n,providedIn:"any",factory:()=>rt(kd)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();const ff=new _t("AppId",{providedIn:"root",factory:()=>TM}),TM="ng",hx=new _t("Platform Initializer"),Na=new _t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ao=new _t("AnimationModuleType"),Nb=new _t("CSP nonce",{providedIn:"root",factory:()=>function Ml(){if(void 0!==Pb)return Pb;if(typeof document<"u")return document;throw new ke(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wm(n){return 128==(128&n.flags)}var Il=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Il||{});const _f=new Map;let Ex=0;const Hb="__ngContext__";function Jo(n,e){Xo(e)?(n[Hb]=e[Au],function Sx(n){_f.set(n[Au],n)}(e)):n[Hb]=e}let Wb;function $b(n,e){return Wb(n,e)}function Zo(n,e,t,i,r){if(null!=i){let o,s=!1;Do(i)?o=i:Xo(i)&&(s=!0,i=i[Nr]);const a=tr(i);0===n&&null!==t?null==r?yr(e,t,a):cc(e,t,a,r||null,!0):1===n&&null!==t?cc(e,t,a,r||null,!0):2===n?function Qo(n,e,t){const i=Cm(n,e);i&&function Rx(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function eT(n,e,t,i,r){const o=t[nc];o!==tr(t)&&Zo(e,n,i,o,r);for(let a=br;a<t.length;a++){const c=t[a];Tm(c[zt],c,n,e,i,o)}}(e,n,o,t,r)}}function $n(n,e,t){return n.createElement(e,t)}function Fr(n,e){e[Vs].changeDetectionScheduler?.notify(),Tm(n,e,e[Jn],2,null,null)}function kx(n,e){const t=n[Mc],i=t.indexOf(e);t.splice(i,1)}function yf(n,e){if(n.length<=br)return;const t=br+e,i=n[t];if(i){const r=i[hl];null!==r&&r!==n&&kx(r,i),e>0&&(n[t-1][$o]=i[$o]);const o=Td(n,br+e);!function XM(n,e){Fr(n,e),e[Nr]=null,e[so]=null}(i[zt],i);const s=o[zs];null!==s&&s.detachView(o[zt]),i[Gr]=null,i[$o]=null,i[Sn]&=-129}return i}function Sm(n,e){if(!(256&e[Sn])){const t=e[Jn];t.destroyNode&&Tm(n,e,t,3,null,null),function KM(n){let e=n[Fh];if(!e)return Yb(n[zt],n);for(;e;){let t=null;if(Xo(e))t=e[Fh];else{const i=e[br];i&&(t=i)}if(!t){for(;e&&!e[$o]&&e!==n;)Xo(e)&&Yb(e[zt],e),e=e[Gr];null===e&&(e=n),Xo(e)&&Yb(e[zt],e),t=e&&e[$o]}e=t}}(e)}}function Yb(n,e){if(!(256&e[Sn])){e[Sn]&=-129,e[Sn]|=256,e[ka]&&function ve(n){if(qe(n),Qe(n))for(let e=0;e<n.producerNode.length;e++)Le(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[ka]),function JM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Zh)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];ic(4,a,c);try{c.call(a)}finally{ic(5,a,c)}}else{ic(4,r,o);try{o.call(r)}finally{ic(5,r,o)}}}}}(n,e),function Xb(n,e){const t=n.cleanup,i=e[Si];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[Si]=null);const r=e[Da];if(null!==r){e[Da]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[zt].type&&e[Jn].destroy();const t=e[hl];if(null!==t&&Do(e[Gr])){t!==e[Gr]&&kx(t,e);const i=e[zs];null!==i&&i.detachView(n)}!function UM(n){_f.delete(n[Au])}(e)}}function La(n,e,t){return function Kb(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Nr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Us.None||o===Us.Emulated)return null}return as(i,t)}}(n,e.parent,t)}function cc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function yr(n,e,t){n.appendChild(e,t)}function Mr(n,e,t,i,r){null!==i?cc(n,e,t,i,r):yr(n,e,t)}function Cm(n,e){return n.parentNode(e)}function Ox(n,e,t){return Nx(n,e,t)}let Mm,us,Nx=function Px(n,e,t){return 40&n.type?as(n,t):null};function zu(n,e,t,i){const r=La(n,i,e),o=e[Jn],a=Ox(i.parent||e[so],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)Mr(o,r,t[c],a,!1);else Mr(o,r,t,a,!1);void 0!==Mm&&Mm(o,i,e,t,r)}function vf(n,e){if(null!==e){const t=e.type;if(3&t)return as(e,n);if(4&t)return Hu(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return vf(n,i);{const r=n[e.index];return Do(r)?Hu(-1,r):tr(r)}}if(32&t)return $b(e,n)()||tr(n[e.index]);{const i=qb(n,e);return null!==i?Array.isArray(i)?i[0]:vf(yd(n[Li]),i):vf(n,e.next)}}return null}function qb(n,e){return null!==e?n[Li][so].projection[e.projection]:null}function Hu(n,e){const t=br+n+1;if(t<e.length){const i=e[t],r=i[zt].firstChild;if(null!==r)return vf(i,r)}return e[nc]}function Jb(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],c=t.type;if(s&&0===e&&(a&&Jo(tr(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)Jb(n,e,t.child,i,r,o,!1),Zo(e,n,r,a,o);else if(32&c){const l=$b(t,i);let d;for(;d=l();)Zo(e,n,r,d,o);Zo(e,n,r,a,o)}else 16&c?Lx(n,e,i,t,r,o):Zo(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Tm(n,e,t,i,r,o){Jb(t,i,n.firstChild,e,r,o,!1)}function Lx(n,e,t,i,r,o){const s=t[Li],c=s[so].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Zo(e,n,r,c[l],o);else{let l=c;const d=s[Gr];wm(i)&&(l.flags|=128),Jb(n,e,l,d,r,o,!0)}}function ti(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Zb(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&ss(n,e,i),null!==r&&ti(n,e,r),null!==o&&function Uc(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Gu(n){return function Im(){if(void 0===us&&(us=null,Oi.trustedTypes))try{us=Oi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return us}()?.createHTML(n)||n}class Fd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fe})`}}class iT extends Fd{getTypeName(){return"HTML"}}class rT extends Fd{getTypeName(){return"Style"}}class oT extends Fd{getTypeName(){return"Script"}}class sT extends Fd{getTypeName(){return"URL"}}class aT extends Fd{getTypeName(){return"ResourceURL"}}function $s(n){return n instanceof Fd?n.changingThisBreaksApplicationSecurity:n}function lc(n,e){const t=function ey(n){return n instanceof Fd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Fe})`)}return t===e}class Is{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Gu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class hT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Gu(e),t}}const pT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wf(n){return(n=String(n)).match(pT)?n:"unsafe:"+n}function Vc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function xf(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Vx=Vc("area,br,col,hr,img,wbr"),ny=Vc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zx=Vc("rp,rt"),Rm=xf(Vx,xf(ny,Vc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xf(zx,Vc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xf(zx,ny)),iy=Vc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hx=xf(iy,Vc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wu=Vc("script,style,template");class gT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Rm.hasOwnProperty(t))return this.sanitizedSomething=!0,!Wu.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!Hx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;iy[a]&&(c=wf(c)),this.buf.push(" ",s,'="',Gx(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Rm.hasOwnProperty(t)&&!Vx.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Gx(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const _T=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bT=/([^\#-~ |!])/g;function Gx(n){return n.replace(/&/g,"&amp;").replace(_T,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(bT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Om;function ry(n,e){let t=null;try{Om=Om||function co(n){const e=new hT(n);return function fT(){try{return!!(new window.DOMParser).parseFromString(Gu(""),"text/html")}catch{return!1}}()?new Is(e):e}(n);let i=e?String(e):"";t=Om.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Om.getInertBodyElement(i)}while(i!==o);return Gu((new gT).sanitizeChildren(Pm(t)||t))}finally{if(t){const i=Pm(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Pm(n){return"content"in n&&function yT(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var _o=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(_o||{});function oy(n){const e=function Ef(){const n=It();return n&&n[Vs].sanitizer}();return e?e.sanitize(_o.URL,n)||"":lc(n,"URL")?$s(n):wf(yn(n))}class Yx{}let Xx=()=>null;function hy(n,e,t=!1){return Xx(n,e,t)}class RT{}class Zx{}class PT{resolveComponentFactory(e){throw function OT(n){const e=Error(`No component factory found for ${Ai(n)}.`);return e.ngComponent=n,e}(e)}}let kl=(()=>{class n{static#e=this.NULL=new PT}return n})();function NT(){return Ku(Fi(),It())}function Ku(n,e){return new vn(as(n,e))}let vn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=NT}return n})();function LT(n){return n instanceof vn?n.nativeElement:n}class e1{}let BT=(()=>{class n{static#e=this.\u0275prov=Ct({token:n,providedIn:"root",factory:()=>null})}return n})();const my={};function t1(n){const e=F(null);try{return n()}finally{F(e)}}function jm(n){return!!function gy(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}class u{constructor(){}supports(e){return jm(e)}create(e){return new E(e)}}const p=(n,e)=>e;class E{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||p}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<et(i,r,o)?t:i,a=et(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let f=0;f<l;f++){const m=f<o.length?o[f]:o[f]=0,b=m+f;d<=b&&b<l&&(o[f]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!jm(e))throw new ke(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function VT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new te(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new je),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new je),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class te{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ae{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class je{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Ae,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function et(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function Nt(){return new jt([new u])}let jt=(()=>{class n{static#e=this.\u0275prov=Ct({token:n,providedIn:"root",factory:Nt});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Nt()),deps:[[n,new Nu,new Al]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ke(901,!1)}}return n})();function Dn(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(tr(o)),Do(o)&&fi(o,i);const s=t.type;if(8&s)Dn(n,e,t.child,i);else if(32&s){const a=$b(t,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=qb(e,t);if(Array.isArray(a))i.push(...a);else{const c=yd(e[Li]);Dn(c[zt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function fi(n,e){for(let t=br;t<n.length;t++){const i=n[t],r=i[zt].firstChild;null!==r&&Dn(i[zt],i,r,e)}n[nc]!==n[Nr]&&e.push(n[nc])}let yi=[];const Wr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{bd(n.lView)},consumerOnSignalRead(){this.lView[ka]=this}};function _y(n){return LF(n[Fh])}function NF(n){return LF(n[$o])}function LF(n){for(;null!==n&&!Do(n);)n=n[$o];return n}function zT(n){return n.ngOriginalError}class Ba{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&zT(e);for(;t&&zT(t);)t=zT(t);return t||null}}const BF=new _t("",{providedIn:"root",factory:()=>Rt(Ba).handleError.bind(void 0)}),UF=new _t("",{providedIn:"root",factory:()=>!1}),ni={};function Ot(n=1){GF(wi(),It(),ko()+n,!1)}function GF(n,e,t,i){if(!i)if(3==(3&e[Sn])){const o=n.preOrderCheckHooks;null!==o&&Du(e,o,t)}else{const o=n.preOrderHooks;null!==o&&ei(e,o,0,t)}_l(t)}function We(n,e=bi.Default){const t=It();return null===t?rt(n,e):Hw(Fi(),t,he(n),e)}function r1(n,e,t,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[Nr]=r,h[Sn]=204|i,(null!==l||n&&2048&n[Sn])&&(h[Sn]|=2048),xw(h),h[Gr]=h[Cc]=n,h[Qi]=t,h[Vs]=s||n&&n[Vs],h[Jn]=a||n&&n[Jn],h[Yo]=c||n&&n[Yo]||null,h[so]=o,h[Au]=function Ax(){return Ex++}(),h[As]=d,h[Y_]=l,h[Li]=2==e.type?n[Li]:h,h}function Um(n,e,t,i,r){let o=n.data[e];if(null===o)o=function GT(n,e,t,i,r){const o=sb(),s=Tu(),c=n.data[e]=function vq(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return wd()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,i,r),function Kh(){return Un.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Ss(){const n=Un.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ua(o,!0),o}function by(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function WF(n,e,t,i,r){const o=ko(),s=2&i;try{_l(-1),s&&e.length>Ln&&GF(n,e,Ln,!1),ic(s?2:0,r),t(i,r)}finally{_l(o),ic(s?3:1,r)}}function WT(n,e,t){if(X_(e)){const i=F(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{F(i)}}}function $T(n,e,t){Cw()&&(function Mq(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;md(t)&&function Pq(n,e,t){const i=as(e,n),r=$F(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=o1(n,r1(n,r,null,s,i,e,null,n[Vs].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Qh(t,e),Jo(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],l=Ko(e,n,a,t);Jo(l,e),null!==s&&Nq(0,a-r,l,c,0,s),er(c)&&(Cr(t.index,e)[Qi]=Ko(e,n,a,t))}}(n,e,t,as(t,e)),64==(64&t.flags)&&JF(n,e,t))}function XT(n,e,t=as){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function $F(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=KT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function KT(n,e,t,i,r,o,s,a,c,l,d){const h=Ln+i,f=h+r,m=function pq(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:ni);return t}(h,f),b="function"==typeof l?l():l;return m[zt]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:d}}let YF=()=>null;function XF(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?KF(t,e,r,o):i.hasOwnProperty(r)&&KF(t,e,i[r],o)}return t}function KF(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function ja(n,e,t,i,r,o,s,a){const c=as(e,t);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(eI(n,t,d,i,r),md(e)&&function Eq(n,e){const t=Cr(e,n);16&t[Sn]||(t[Sn]|=64)}(t,e.index)):3&e.type&&(i=function xq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function qT(n,e,t,i){if(Cw()){const r=null===i?null:{"":-1},o=function Iq(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(lw(e,s.selectors,!1))if(i||(i=[]),er(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),JT(n,e,a.length)}else i.unshift(s),JT(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&qF(n,e,t,s,r,a),r&&function Dq(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new ke(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=xu(t.mergedAttrs,t.attrs)}function qF(n,e,t,i,r,o){for(let l=0;l<i.length;l++)gb(Qh(t,e),n,i[l].type);!function Rq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=by(n,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];t.mergedAttrs=xu(t.mergedAttrs,d.hostAttrs),Oq(n,t,e,c,d),kq(c,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function wq(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],f=t?t.get(h):null,b=f?f.outputs:null;c=XF(h.inputs,d,c,f?f.inputs:null),l=XF(h.outputs,d,l,b);const x=null===c||null===s||cw(e)?null:Lq(c,d,s);a.push(x)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function JF(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function $C(){return Un.lFrame.currentDirectiveIndex}();try{_l(o);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];xd(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Tq(c,l)}}finally{_l(-1),xd(s)}}function Tq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function JT(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function kq(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;er(e)&&(t[""]=n)}}function Oq(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=gd(r.type)),s=new Zh(o,er(r),We);n.blueprint[i]=s,t[i]=s,function Sq(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function Cq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,by(n,t,r.hostVars,ni),r)}function Rl(n,e,t,i,r,o){const s=as(n,e);!function ZT(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?yn(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[Jn],s,o,n.value,t,i,r)}function Nq(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)ZF(i,t,s[a++],s[a++],s[a++])}function ZF(n,e,t,i,r){const o=F(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{F(o)}}function Lq(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function QF(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function eB(n,e){const t=n.contentQueries;if(null!==t){const i=F(null);try{for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const a=n.data[s];qh(t[r]),a.contentQueries(2,e[s],s)}}}finally{F(i)}}}function o1(n,e){return n[Fh]?n[pw][$o]=e:n[Fh]=e,n[pw]=e,e}function QT(n,e,t){qh(0);const i=F(null);try{e(n,t)}finally{F(i)}}function tB(n){return n[Si]||(n[Si]=[])}function nB(n){return n.cleanup||(n.cleanup=[])}function s1(n,e){const t=n[Yo],i=t?t.get(Ba,null):null;i&&i.handleError(e)}function eI(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];ZF(n.data[s],e[s],i,a,r)}}function jq(n,e,t,i){const r=e[Sn];if(256==(256&r))return;e[Vs].inlineEffectRunner?.flush(),lb(e);let s=null,a=null;(function Uq(n){return 2!==n.type})(n)&&(a=function Ys(n){return n[ka]??function hs(n){const e=yi.pop()??Object.create(Wr);return e.lView=n,e}(n)}(e),s=function G(n){return n&&(n.nextProducerIndex=0),F(n)}(a));try{xw(e),function Dw(n){return Un.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&WF(n,e,t,2,i);const c=3==(3&r);if(c){const h=n.preOrderCheckHooks;null!==h&&Du(e,h,null)}else{const h=n.preOrderHooks;null!==h&&ei(e,h,0,null),fb(e,0)}if(function Vq(n){for(let e=_y(n);null!==e;e=NF(e)){if(!(e[Sn]&Uh.HasTransplantedViews))continue;const t=e[Mc];for(let i=0;i<t.length;i++){Ew(t[i])}}}(e),rB(e,0),null!==n.contentQueries&&eB(n,e),c){const h=n.contentCheckHooks;null!==h&&Du(e,h)}else{const h=n.contentHooks;null!==h&&ei(e,h,1),fb(e,1)}!function fq(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)_l(~r);else{const o=r,s=t[++i],a=t[++i];WC(s,o),a(2,e[o])}}}finally{_l(-1)}}(n,e);const l=n.components;null!==l&&sB(e,l,0);const d=n.viewQuery;if(null!==d&&QT(2,d,i),c){const h=n.viewCheckHooks;null!==h&&Du(e,h)}else{const h=n.viewHooks;null!==h&&ei(e,h,2),fb(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Bh]){for(const h of e[Bh])h();e[Bh]=null}e[Sn]&=-73}catch(c){throw bd(e),c}finally{null!==a&&(function Ie(n,e){if(F(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Qe(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Le(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,s),function Xs(n){n.lView[ka]!==n&&(n.lView=null,yi.push(n))}(a)),Jh()}}function rB(n,e){for(let t=_y(n);null!==t;t=NF(t))for(let i=br;i<t.length;i++)oB(t[i],e)}function zq(n,e,t){oB(Cr(e,n),t)}function oB(n,e){nb(n)&&nI(n,e)}function nI(n,e){const i=n[zt],r=n[Sn],o=n[ka];let s=!!(0===e&&16&r);if(s||=!!(64&r&&0===e),s||=!!(1024&r),s||=!(!o?.dirty||!le(o)),o&&(o.dirty=!1),n[Sn]&=-9217,s)jq(i,n,i.template,n[Qi]);else if(8192&r){rB(n,1);const a=i.components;null!==a&&sB(n,a,1)}}function sB(n,e,t){for(let i=0;i<e.length;i++)zq(n,e[i],t)}function yy(n){for(n[Vs].changeDetectionScheduler?.notify();n;){n[Sn]|=64;const e=yd(n);if(K_(n)&&!e)return n;n=e}return null}class vy{get rootNodes(){const e=this._lView,t=e[zt];return Dn(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qi]}set context(e){this._lView[Qi]=e}get destroyed(){return 256==(256&this._lView[Sn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Gr];if(Do(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(yf(e,i),Td(t,i))}this._attachedToViewContainer=!1}Sm(this._lView[zt],this._lView)}onDestroy(e){!function pl(n,e){if(256==(256&n[Sn]))throw new ke(911,!1);null===n[Da]&&(n[Da]=[]),n[Da].push(e)}(this._lView,e)}markForCheck(){yy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Sn]&=-129}reattach(){rb(this._lView),this._lView[Sn]|=128}detectChanges(){this._lView[Sn]|=1024,function tI(n,e=!0){const t=n[Vs],i=t.rendererFactory;i.begin?.();try{!function Bq(n){nI(n,0);let e=0;for(;Aw(n);){if(100===e)throw new ke(103,!1);e++,nI(n,1)}}(n)}catch(o){throw e&&s1(n,o),o}finally{i.end?.(),t.inlineEffectRunner?.flush()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Fr(this._lView[zt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=e,rb(this._lView)}}let Br=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Hq}return n})();function Hq(n){return function Gq(n,e,t){if(md(n)&&!t){const i=Cr(n.index,e);return new vy(i,i)}return 47&n.type?new vy(e[Li],e):null}(Fi(),It(),16==(16&n))}const aB=new Set;function Tf(n){aB.has(n)||(aB.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function rI(n){return e=>{setTimeout(n,void 0,e)}}const qt=class eJ extends Yt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=rI(o),r&&(r=rI(r)),s&&(s=rI(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof At&&e.add(a),a}};function cB(...n){}class nn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qt(!1),this.onMicrotaskEmpty=new qt(!1),this.onStable=new qt(!1),this.onError=new qt(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function tJ(){const n="function"==typeof Oi.requestAnimationFrame;let e=Oi[n?"requestAnimationFrame":"setTimeout"],t=Oi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function rJ(n){const e=()=>{!function iJ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Oi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,sI(n),n.isCheckStableRunning=!0,oI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),sI(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function oJ(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return lB(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),dB(n)}},onInvoke:(t,i,r,o,s,a,c)=>{try{return lB(n),t.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),dB(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,sI(n),oI(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nn.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(nn.isInAngularZone())throw new ke(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,nJ,cB,cB);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const nJ={};function oI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sI(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function lB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dB(n){n._nesting--,oI(n)}class uB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qt,this.onMicrotaskEmpty=new qt,this.onStable=new qt,this.onError=new qt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let wy=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r();return!!this.handler?.execute()||t.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ct({token:n,providedIn:"root",factory:()=>new n})}return n})();function lJ(n,e){const t=Cr(e,n),i=t[zt];!function dJ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Nr];null!==r&&null===t[As]&&(t[As]=hy(r,t[Yo])),aI(i,t,t[Qi])}function aI(n,e,t){lb(e);try{const i=n.viewQuery;null!==i&&QT(1,i,t);const r=n.template;null!==r&&WF(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&eB(n,e),n.staticViewQueries&&QT(2,n.viewQuery,t);const o=n.components;null!==o&&function uJ(n,e){for(let t=0;t<e.length;t++)lJ(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Sn]&=-5,Jh()}}function a1(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=ro(r,a):2==o&&(i=ro(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class gB extends kl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qn(e);return new xy(t,this.ngModule)}}function _B(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class fJ{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Sc(i);const r=this.injector.get(e,my,i);return r!==my||t===my?r:this.parentInjector.get(e,t,i)}}class xy extends Zx{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=_B(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return _B(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function NC(n){return n.map(PC).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof ga?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new fJ(e,o):e,a=s.get(e1,null);if(null===a)throw new ke(407,!1);const h={rendererFactory:a,sanitizer:s.get(BT,null),inlineEffectRunner:null,afterRenderEventManager:s.get(wy,null),changeDetectionScheduler:s.get(Yx,null)},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",b=i?function mq(n,e,t,i){const o=i.get(UF,!1)||t===Us.ShadowDom,s=n.selectRootElement(e,o);return function gq(n){YF(n)}(s),s}(f,i,this.componentDef.encapsulation,s):$n(f,m,function hJ(n){const e=n.toLowerCase();return"svg"===e?yw:"math"===e?"math":null}(m));let x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let S=null;null!==b&&(S=hy(b,s,!0));const z=KT(0,null,null,1,0,null,null,null,null,null,null),W=r1(null,z,null,x,null,null,h,f,s,null,S);let ue,se;lb(W);try{const De=this.componentDef;let Ne,ot=null;De.findHostDirectiveDefs?(Ne=[],ot=new Map,De.findHostDirectiveDefs(De,Ne,ot),Ne.push(De)):Ne=[De];const ut=function mJ(n,e){const t=n[zt],i=Ln;return n[i]=e,Um(t,i,2,"#host",null)}(W,b),Ke=function gJ(n,e,t,i,r,o,s){const a=r[zt];!function _J(n,e,t,i){for(const r of n)e.mergedAttrs=xu(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(a1(e,e.mergedAttrs,!0),null!==t&&Zb(i,t,e))}(i,n,e,s);let c=null;null!==e&&(c=hy(e,r[Yo]));const l=o.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const h=r1(r,$F(t),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&JT(a,n,i.length-1),o1(r,h),r[n.index]=h}(ut,b,De,Ne,W,h,f);se=Yh(z,Ln),b&&function yJ(n,e,t,i){if(i)ss(n,t,["ng-version","17.0.9"]);else{const{attrs:r,classes:o}=function Eu(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Go(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&ss(n,t,r),o&&o.length>0&&ti(n,t,o.join(" "))}}(f,De,b,i),void 0!==t&&function vJ(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(se,this.ngContentSelectors,t),ue=function bJ(n,e,t,i,r,o){const s=Fi(),a=r[zt],c=as(s,r);qF(a,r,s,t,null,i);for(let d=0;d<t.length;d++)Jo(Ko(r,a,s.directiveStart+d,s),r);JF(a,r,s),c&&Jo(c,r);const l=Ko(r,a,s.directiveStart+s.componentOffset,s);if(n[Qi]=r[Qi]=l,null!==o)for(const d of o)d(l,e);return WT(a,s,n),l}(Ke,De,Ne,ot,W,[wJ]),aI(z,W,null)}finally{Jh()}return new pJ(this.componentType,ue,Ku(se,W),W,se)}}class pJ extends RT{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vy(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;eI(o[zt],o,r,e,t),this.previousInputValues.set(e,t),yy(Cr(this._tNode.index,o))}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function wJ(){const n=Fi();nm(It()[zt],n)}function Wn(n){let e=function bB(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(er(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ke(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=c1(n.inputs),s.inputTransforms=c1(n.inputTransforms),s.declaredInputs=c1(n.declaredInputs),s.outputs=c1(n.outputs);const a=r.hostBindings;a&&SJ(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&EJ(n,c),l&&AJ(n,l),Io(n.inputs,r.inputs),Io(n.declaredInputs,r.declaredInputs),Io(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Io(s.inputTransforms,r.inputTransforms)),er(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Wn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function xJ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=xu(r.hostAttrs,t=xu(t,r.hostAttrs))}}(i)}function c1(n){return n===la?{}:n===Ii?[]:n}function EJ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function AJ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function SJ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Ol(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Pl(n,e,t){return n[e]=t}function bo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ci(n,e,t,i){const r=It();return bo(r,ha(),e)&&(wi(),Rl(Yi(),r,n,e,t,i)),Ci}function zm(n,e,t,i){return bo(n,ha(),t)?e+yn(t)+i:ni}function d1(n,e){return n<<17|e<<2}function qu(n){return n>>17&32767}function cI(n){return 2|n}function kf(n){return(131068&n)>>2}function lI(n,e){return-131069&n|e<<2}function dI(n){return 1|n}function kB(n,e,t,i){const r=n[t+1],o=null===e;let s=i?qu(r):kf(r),a=!1;for(;0!==s&&(!1===a||o);){const l=n[s+1];LJ(n[s],e)&&(a=!0,n[s+1]=i?dI(l):cI(l)),s=i?qu(l):kf(l)}a&&(n[t+1]=i?cI(r):dI(r))}function LJ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Id(n,e)>=0}const Oo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function RB(n){return n.substring(Oo.key,Oo.keyEnd)}function OB(n,e){const t=Oo.textEnd;return t===e?-1:(e=Oo.keyEnd=function UJ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Oo.key=e,t),qm(n,e,t))}function qm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Jt(n,e,t){const i=It();return bo(i,ha(),e)&&ja(wi(),Yi(),i,n,e,i[Jn],t,!1),Jt}function uI(n,e,t,i,r){const s=r?"class":"style";eI(n,t,e.inputs[s],s,i)}function Ay(n,e,t){return Wc(n,e,t,!1),Ay}function Cn(n,e){return Wc(n,e,null,!0),Cn}function yo(n){!function $c(n,e,t,i){const r=wi(),o=kc(2);r.firstUpdatePass&&jB(r,null,o,i);const s=It();if(t!==ni&&bo(s,o,t)){const a=r.data[ko()];if(HB(a,i)&&!BB(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=ro(c,t||"")),uI(r,a,s,t,i)}else!function qJ(n,e,t,i,r,o,s,a){r===ni&&(r=Ii);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const f=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let x,b=null;d===h?(c+=2,l+=2,f!==m&&(b=h,x=m)):null===h||null!==d&&d<h?(c+=2,b=d):(l+=2,b=h,x=m),null!==b&&VB(n,e,t,i,b,x,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Jn],s[o+1],s[o+1]=function XJ(n,e,t){if(null==t||""===t)return Ii;const i=[],r=$s(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(KJ,Nl,n,!0)}function Nl(n,e){for(let t=function BJ(n){return function NB(n){Oo.key=0,Oo.keyEnd=0,Oo.value=0,Oo.valueEnd=0,Oo.textEnd=n.length}(n),OB(n,qm(n,0,Oo.textEnd))}(e);t>=0;t=OB(e,t))Hs(n,RB(e),!0)}function Wc(n,e,t,i){const r=It(),o=wi(),s=kc(2);o.firstUpdatePass&&jB(o,n,s,i),e!==ni&&bo(r,s,e)&&VB(o,o.data[ko()],r,r[Jn],n,r[s+1]=function JJ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ai($s(n)))),n}(e,t),i,s)}function BB(n,e){return e>=n.expandoStartIndex}function jB(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[ko()],s=BB(n,t);HB(o,i)&&null===e&&!s&&(e=!1),e=function GJ(n,e,t,i){const r=function cb(n){const e=Un.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Sy(t=hI(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=hI(r,n,e,t,i),null===o){let c=function WJ(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==kf(i))return n[qu(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=hI(null,n,e,c[1],i),c=Sy(c,e.attrs,i),function $J(n,e,t,i){n[qu(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else o=function YJ(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Sy(i,n[o].hostAttrs,t);return Sy(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function PJ(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=qu(s),c=kf(s);n[i]=t;let d,l=!1;if(Array.isArray(t)?(d=t[1],(null===d||Id(t,d)>0)&&(l=!0)):d=t,r)if(0!==c){const f=qu(n[a+1]);n[i+1]=d1(f,a),0!==f&&(n[f+1]=lI(n[f+1],i)),n[a+1]=function RJ(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=d1(a,0),0!==a&&(n[a+1]=lI(n[a+1],i)),a=i;else n[i+1]=d1(c,0),0===a?a=i:n[c+1]=lI(n[c+1],i),c=i;l&&(n[i+1]=cI(n[i+1])),kB(n,d,i,!0),kB(n,d,i,!1),function NJ(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Id(o,e)>=0&&(t[i+1]=dI(t[i+1]))}(e,d,n,i,o),s=d1(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function hI(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=Sy(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Sy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Hs(n,s,!!t||e[++o]))}return void 0===n?null:n}function KJ(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Hs(n,i,t)}function VB(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],d=function OJ(n){return 1==(1&n)}(l)?zB(c,e,t,r,kf(l),s):void 0;u1(d)||(u1(o)||function kJ(n){return 2==(2&n)}(l)&&(o=zB(c,null,t,r,a,s)),function Fx(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Il.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Il.Important),n.setStyle(t,i,r,o))}}(i,s,$h(ko(),t),r,o))}function zB(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let f=t[r+1];f===ni&&(f=h?Ii:void 0);let m=h?af(f,i):d===i?f:void 0;if(l&&!u1(m)&&(m=af(c,i)),u1(m)&&(a=m,s))return a;const b=n[r+1];r=s?qu(b):kf(b)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=af(c,i))}return a}function u1(n){return void 0!==n}function HB(n,e){return 0!=(n.flags&(e?8:16))}let KB=()=>null;function Jm(n,e){return KB(n,e)}function Dy(n,e,t,i){const r=e.tView,a=r1(n,r,t,4096&n[Sn]?4096:16,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null);a[hl]=n[e.index];const l=n[zs];return null!==l&&(a[zs]=l.createEmbeddedView(r)),aI(r,a,t),a}function Zm(n,e){return!e||null===e.firstChild||wm(n)}function ky(n,e,t,i=!0){const r=e[zt];if(function Dl(n,e,t,i){const r=br+i,o=t.length;i>0&&(t[r-1][$o]=e),i<o-br?(e[$o]=t[r],dm(t,br+i,e)):(t.push(e),e[$o]=null),e[Gr]=t;const s=e[hl];null!==s&&t!==s&&function qM(n,e){const t=n[Mc];e[Li]!==e[Gr][Gr][Li]&&(n[Sn]|=Uh.HasTransplantedViews),null===t?n[Mc]=[e]:t.push(e)}(s,e);const a=e[zs];null!==a&&a.insertView(n),rb(e),e[Sn]|=128}(r,e,n,t),i){const s=Hu(t,n),a=e[Jn],c=Cm(a,n[nc]);null!==c&&function Ts(n,e,t,i,r,o){i[Nr]=r,i[so]=e,Tm(n,i,t,1,r,o)}(r,n[so],a,e,c,s)}const o=e[As];null!==o&&null!==o.firstChild&&(o.firstChild=null)}let fs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=kZ}return n})();function kZ(){return n3(Fi(),It())}const RZ=fs,e3=class extends RZ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ku(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){const e=lm(this._hostTNode,this._hostLView);if(oc(e)){const t=bl(e,this._hostLView),i=Ed(e);return new Jr(t[zt].data[i+8],t)}return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=t3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-br}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=Jm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Zm(this._hostTNode,s)),a}createComponent(e,t,i,r,o){const s=e&&!function sf(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const b=t||{};a=b.index,i=b.injector,r=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const c=s?e:new xy(Qn(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const x=(s?l:this.parentInjector).get(ga,null);x&&(o=x)}const d=Qn(c.componentType??{}),h=Jm(this._lContainer,d?.id??null),m=c.create(l,r,h?.firstChild??null,o);return this.insertImpl(m.hostView,a,Zm(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function HC(n){return Do(n[Gr])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Gr],l=new e3(c,c[so],c[Gr]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return ky(s,r,o,i),e.attachToViewContainerRef(),dm(wI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=t3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=yf(this._lContainer,t);i&&(Td(wI(this._lContainer),t),Sm(i[zt],i))}detach(e){const t=this._adjustIndex(e,-1),i=yf(this._lContainer,t);return i&&null!=Td(wI(this._lContainer),t)?new vy(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function t3(n){return n[8]}function wI(n){return n[8]||(n[8]=[])}function n3(n,e){let t;const i=e[n.index];return Do(i)?t=i:(t=QF(i,e,null,n),e[n.index]=t,o1(e,t)),i3(t,e,n,i),new e3(t,n,e)}let i3=function o3(n,e,t,i){if(n[nc])return;let r;r=8&t.type?tr(i):function OZ(n,e){const t=n[Jn],i=t.createComment(""),r=as(e,n);return cc(t,Cm(t,r),i,function ZM(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[nc]=r},xI=()=>!1;function xn(n,e,t,i,r,o,s,a){const c=It(),l=wi(),d=n+Ln,h=l.firstCreatePass?function FZ(n,e,t,i,r,o,s,a,c){const l=e.consts,d=Um(e,n,4,s||null,rc(l,a));qT(e,t,d,rc(l,c)),nm(e,d);const h=d.tView=KT(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,t,i,r,o,s):l.data[d];ua(h,!1);const f=s3(l,c,h,n);Iu()&&zu(l,c,f,h),Jo(f,c);const m=QF(f,c,f,h);return c[d]=m,o1(c,m),function r3(n,e,t){return xI(n,e,t)}(m,h,c),Lr(h)&&$T(l,c,h),null!=s&&XT(c,h,a),xn}let s3=function a3(n,e,t,i){return Rc(!0),e[Jn].createComment("")};function dr(n,e,t){Tf("NgControlFlow");const i=It(),r=ha(),o=function EI(n,e){return n[e]}(i,Ln+n);if(bo(i,r,e)){const a=F(null);try{if(function vI(n,e){const t=yf(n,e);return void 0!==t&&Sm(t[zt],t),t}(o,0),-1!==e){const c=function AI(n,e){return Yh(n,e)}(i[zt],Ln+e),l=Jm(o,c.tView.ssrId);ky(o,Dy(i,c,t,{dehydratedView:l}),0,Zm(c,l))}}finally{F(a)}}else{const a=function QB(n,e){const t=br+e;if(t<n.length)return n[t]}(o,0);void 0!==a&&(a[Qi]=t)}}function Mt(n,e,t,i){const r=It(),o=wi(),s=Ln+n,a=r[Jn],c=o.firstCreatePass?function xQ(n,e,t,i,r,o){const s=e.consts,c=Um(e,n,2,i,rc(s,r));return qT(e,t,c,rc(s,o)),null!==c.attrs&&a1(c,c.attrs,!1),null!==c.mergedAttrs&&a1(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,t,i):o.data[s],l=O3(o,r,c,a,e,n);r[s]=l;const d=Lr(c);return ua(c,!0),Zb(a,l,c),32!=(32&c.flags)&&Iu()&&zu(o,r,l,c),0===function ob(){return Un.lFrame.elementDepthCount}()&&Jo(l,r),function vd(){Un.lFrame.elementDepthCount++}(),d&&($T(o,r,c),WT(o,c,r)),null!==i&&XT(r,c),Mt}function kt(){let n=Fi();Tu()?Ic():(n=n.parent,ua(n,!1));const e=n;(function Mw(n){return Un.skipHydrationRootTNode===n})(e)&&function GC(){Un.skipHydrationRootTNode=null}(),function da(){Un.lFrame.elementDepthCount--}();const t=wi();return t.firstCreatePass&&(nm(t,n),X_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function mb(n){return 0!=(8&n.flags)}(e)&&uI(t,e,It(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Vw(n){return 0!=(16&n.flags)}(e)&&uI(t,e,It(),e.stylesWithoutHost,!1),kt}function Vn(n,e,t,i){return Mt(n,e,t,i),kt(),Vn}let O3=(n,e,t,i,r,o)=>(Rc(!0),$n(i,r,function ub(){return Un.lFrame.currentNamespace}()));function Ua(){return It()}function Ud(n,e,t){const i=It();return bo(i,ha(),e)&&ja(wi(),Yi(),i,n,e,i[Jn],t,!0),Ud}const sg="en-US";let B3=sg;function ag(n){return!!n&&"function"==typeof n.then}function l4(n){return!!n&&"function"==typeof n.subscribe}function un(n,e,t,i){const r=It(),o=wi(),s=Fi();return function d4(n,e,t,i,r,o,s){const a=Lr(i),l=n.firstCreatePass&&nB(n),d=e[Qi],h=tB(e);let f=!0;if(3&i.type||s){const x=as(i,e),S=s?s(x):x,z=h.length,W=s?se=>s(tr(se[i.index])):i.index;let ue=null;if(!s&&a&&(ue=function Aee(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Si],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==ue)(ue.__ngLastListenerFn__||ue).__ngNextListenerFn__=o,ue.__ngLastListenerFn__=o,f=!1;else{o=h4(i,e,d,o,!1);const se=t.listen(S,r,o);h.push(o,se),l&&l.push(r,W,z,z+1)}}else o=h4(i,e,d,o,!1);const m=i.outputs;let b;if(f&&null!==m&&(b=m[r])){const x=b.length;if(x)for(let S=0;S<x;S+=2){const De=e[b[S]][b[S+1]].subscribe(o),Ne=h.length;h.push(o,De),l&&l.push(r,i.index,Ne,-(Ne+1))}}}(o,r,r[Jn],s,n,e,i),un}function u4(n,e,t,i){try{return ic(6,e,t),!1!==t(i)}catch(r){return s1(n,r),!1}finally{ic(7,e,t)}}function h4(n,e,t,i,r){return function o(s){if(s===Function)return i;yy(n.componentOffset>-1?Cr(n.index,e):e);let c=u4(e,t,i,s),l=o.__ngNextListenerFn__;for(;l;)c=u4(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Mn(n=1){return function Lw(n){return(Un.lFrame.contextLView=function ib(n,e){for(;n>0;)e=e[Cc],n--;return e}(n,Un.lFrame.contextLView))[Qi]}(n)}function See(n,e){let t=null;const i=function W_(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?lw(n,o,!0):$p(i,o))return r}else t=r}return t}function Qr(n){const e=It()[Li][so];if(!e.projection){const i=e.projection=function Fc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?See(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function zn(n,e=0,t){const i=It(),r=wi(),o=Um(r,Ln+n,16,null,t||null);null===o.projection&&(o.projection=e),Ic(),(!i[As]||wd())&&32!=(32&o.flags)&&function QM(n,e,t){Lx(e[Jn],0,e,t,La(n,t,e),Ox(t.parent||e[so],t,e))}(r,i,o)}function S1(n,e,t){return FI(n,"",e,"",t),S1}function FI(n,e,t,i,r){const o=It(),s=zm(o,e,t,i);return s!==ni&&ja(wi(),Yi(),o,n,s,o[Jn],r,!1),FI}function qs(n){return Cu(function Iw(){return Un.lFrame.contextLView}(),Ln+n)}function Yn(n,e=""){const t=It(),i=wi(),r=n+Ln,o=i.firstCreatePass?Um(i,r,1,e,null):i.data[r],s=D4(i,t,o,e,n);t[r]=s,Iu()&&zu(i,t,s,o),ua(o,!1)}let D4=(n,e,t,i,r)=>(Rc(!0),function Am(n,e){return n.createText(e)}(e[Jn],i));function es(n){return ks("",n,""),es}function ks(n,e,t){const i=It(),r=zm(i,n,e,t);return r!==ni&&function jd(n,e,t){const i=$h(e,n);!function Dx(n,e,t){n.setValue(e,t)}(n[Jn],i,t)}(i,ko(),r),ks}function jI(n,e,t,i,r){if(n=he(n),Array.isArray(n))for(let o=0;o<n.length;o++)jI(n[o],e,t,i,r);else{const o=wi(),s=It(),a=Fi();let c=Rd(n)?n:he(n.provide);const l=ax(n),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(Rd(n)||!n.multi){const m=new Zh(l,r,We),b=VI(c,e,r?d:d+f,h);-1===b?(gb(Qh(a,s),o,c),UI(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[b]=m,s[b]=m)}else{const m=VI(c,e,d+f,h),b=VI(c,e,d,d+f),S=b>=0&&t[b];if(r&&!S||!r&&!(m>=0&&t[m])){gb(Qh(a,s),o,c);const z=function Vee(n,e,t,i,r){const o=new Zh(n,t,We);return o.multi=[],o.index=e,o.componentProviders=0,B4(o,r,i&&!t),o}(r?Uee:jee,t.length,r,i,l);!r&&S&&(t[b].providerFactory=z),UI(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(z),s.push(z)}else UI(o,n,m>-1?m:b,B4(t[r?b:m],l,!r&&i));!r&&i&&S&&t[b].componentProviders++}}}function UI(n,e,t,i){const r=Rd(e),o=function mM(n){return!!n.useClass}(e);if(r||o){const c=(o?he(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(t);-1===d?l.push(t,[i,c]):l[d+1].push(i,c)}else l.push(t,c)}}}function B4(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function VI(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function jee(n,e,t,i){return zI(this.multi,[])}function Uee(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ko(t,t[zt],this.providerFactory.index,i);o=a.slice(0,s),zI(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],zI(r,o);return o}function zI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ri(n,e=[]){return t=>{t.providersResolver=(i,r)=>function Bee(n,e,t){const i=wi();if(i.firstCreatePass){const r=er(n);jI(t,i.data,i.blueprint,r,!0),jI(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Pf{}class j4{}class HI extends Pf{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gB(this);const r=function Kt(n,e){const t=n[hn]||null;if(!t&&!0===e)throw new Error(`Type ${Ai(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function Ws(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=dx(e,t,[{provide:Pf,useValue:this},{provide:kl,useValue:this.componentFactoryResolver},...i],Ai(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class GI extends j4{constructor(e){super(),this.moduleType=e}create(e){return new HI(this.moduleType,e,[])}}class U4 extends Pf{constructor(e){super(),this.componentFactoryResolver=new gB(this),this.instance=null;const t=new Fu([...e.providers,{provide:Pf,useValue:this},{provide:kl,useValue:this.componentFactoryResolver}],e.parent||mm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let Gee=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=Cb(0,t.type),r=i.length>0?function V4(n,e,t=null){return new U4({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ct({token:n,providedIn:"environment",factory:()=>new n(rt(ga))})}return n})();function Nf(n){Tf("NgStandalone"),n.getStandaloneInjector=e=>e.get(Gee).getOrCreateStandaloneInjector(n)}function T1(n,e,t){const i=cs()+n,r=It();return r[i]===ni?Pl(r,i,t?e.call(t):e()):function Ey(n,e){return n[e]}(r,i)}function K4(n,e,t,i,r,o){const s=e+t;return bo(n,s,r)?Pl(n,s+1,o?i.call(o,r):i(r)):function zy(n,e){const t=n[e];return t===ni?void 0:t}(n,s+1)}function wo(n,e){const t=wi();let i;const r=n+Ln;t.firstCreatePass?(i=function dte(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const o=i.factory||(i.factory=gd(i.type)),a=os(We);try{const c=Ou(!1),l=o();return Ou(c),function Cee(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,It(),r,l),l}finally{os(a)}}function ps(n,e,t){const i=n+Ln,r=It(),o=Cu(r,i);return function Hy(n,e){return n[zt].data[e].pure}(r,i)?K4(r,cs(),e,o.transform,t,o):o.transform(t)}function pte(){return this._results[Symbol.iterator]()}class Gy{static#e=Symbol.iterator;get changes(){return this._changes??=new qt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Gy.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=pte)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function qo(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Lc(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}let hc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=_te}return n})();const mte=hc,gte=class extends mte{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=Dy(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new vy(r)}};function _te(){return D1(Fi(),It())}function D1(n,e){return 4&n.type?new gte(e,n,Ku(n,e)):null}class $I{constructor(e){this.queryList=e,this.matches=null}clone(){return new $I(this.queryList)}setDirty(){this.queryList.setDirty()}}class YI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new YI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==rj(e,t).matches&&this.queries[t].setDirty()}}class ej{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class XI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new XI(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class KI{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new KI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,bte(t,o)),this.matchTNodeWithReadOption(e,t,Ro(t,e,o,!1,!1))}else i===hc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ro(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===vn||r===fs||r===hc&&4&t.type)this.addMatch(t.index,-2);else{const o=Ro(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function bte(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function vte(n,e,t,i){return-1===t?function yte(n,e){return 11&n.type?Ku(n,e):4&n.type?D1(n,e):null}(e,n):-2===t?function wte(n,e,t){return t===vn?Ku(e,n):t===hc?D1(e,n):t===fs?n3(e,n):void 0}(n,e,i):Ko(n,n[zt],t,e)}function tj(n,e,t,i){const r=e[zs].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:vte(e,o[l],s[c+1],t.metadata.read))}r.matches=a}return r.matches}function qI(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=tj(n,e,r,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=br;h<d.length;h++){const f=d[h];f[hl]===f[Gr]&&qI(f[zt],f,l,i)}if(null!==d[Mc]){const h=d[Mc];for(let f=0;f<h.length;f++){const m=h[f];qI(m[zt],m,l,i)}}}}}return i}function Tn(n){const e=It(),t=wi(),i=kw();qh(i+1);const r=rj(t,i);if(n.dirty&&function zC(n){return 4==(4&n[Sn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?qI(t,e,i,[]):tj(t,e,r,i);n.reset(o,LT),n.notifyOnChanges()}return!0}return!1}function Mi(n,e,t){const i=wi();i.firstCreatePass&&(ij(i,new ej(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),nj(i,It(),e)}function In(){return function xte(n,e){return n[zs].queries[e].queryList}(It(),kw())}function nj(n,e,t){const i=new Gy(4==(4&t));(function yq(n,e,t,i){const r=tB(e);r.push(t),n.firstCreatePass&&nB(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[zs]&&(e[zs]=new YI),e[zs].queries.push(new $I(i))}function ij(n,e,t){null===n.queries&&(n.queries=new XI),n.queries.track(new KI(e,t))}function rj(n,e){return n.queries.getByIndex(e)}let dg=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ni(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Sj=new _t(""),O1=new _t("");let rD,nD=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rD||(function yne(n){rD=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(rt(nn),rt(iD),rt(O1))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})(),iD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return rD?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const oD=new _t("Application Initializer");let sD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Rt(oD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(ag(o))t.push(o);else if(l4(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const P1=new _t("appBootstrapListener");function Tj(n,e){return Array.isArray(e)?e.reduce(Tj,n):{...n,...e}}let Qu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Rt(BF),this.afterRenderEffectManager=Rt(wy),this.componentTypes=[],this.components=[],this.isStable=Rt(dg).hasPendingTasks.pipe(en(t=>!t)),this._injector=Rt(ga)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof Zx;if(!this._injector.get(sD).done)throw!r&&function wt(n){const e=Qn(n)||lt(n)||St(n);return null!==e&&e.standalone}(t),new ke(405,!1);let s;s=r?t:this._injector.get(kl).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function wne(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Pf),l=s.create(ir.NULL,[],i||s.selector,a),d=l.location.nativeElement,h=l.injector.get(Sj,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),N1(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{try{this.afterRenderEffectManager.execute()}catch(t){this.internalErrorHandler(t)}this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;N1(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(P1,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>N1(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ke(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ene=(()=>{class n{constructor(){this.zone=Rt(nn),this.applicationRef=Rt(Qu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ane(){const n=Rt(nn),e=Rt(Ba);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Cne=(()=>{class n{constructor(){this.subscription=new At,this.initialized=!1,this.zone=Rt(nn),this.pendingTasks=Rt(dg)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nn.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ll=new _t("LocaleId",{providedIn:"root",factory:()=>Rt(Ll,bi.Optional|bi.SkipSelf)||function Mne(){return typeof $localize<"u"&&$localize.locale||sg}()}),aD=new _t("PlatformDestroyListeners");let Rj=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function sJ(n="zone.js",e){return"noop"===n?new uB:"zone.js"===n?new nn(e):n}(i?.ngZone,function kj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function Hee(n,e,t){return new HI(n,e,t)}(t.moduleType,this.injector,function Dj(n){return[{provide:nn,useFactory:n},{provide:Sl,multi:!0,useFactory:()=>{const e=Rt(Ene,{optional:!0});return()=>e.initialize()}},{provide:Sl,multi:!0,useFactory:()=>{const e=Rt(Cne);return()=>{e.initialize()}}},{provide:BF,useFactory:Ane}]}(()=>r)),s=o.injector.get(Ba,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{N1(this._modules,o),a.unsubscribe()})}),function Mj(n,e,t){try{const i=t();return ag(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(sD);return a.runInitializers(),a.donePromise.then(()=>(function j3(n){lr(n,"Expected localeId to be defined"),"string"==typeof n&&(B3=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ll,sg)||sg),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=Tj({},i);return function vne(n,e,t){const i=new GI(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ke(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(aD,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ir))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),eh=null;const Oj=new _t("AllowMultipleToken");function Pj(n,e,t=[]){const i=`Platform: ${e}`,r=new _t(i);return(o=[])=>{let s=cD();if(!s||s.injector.get(Oj,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function Dne(n){if(eh&&!eh.get(Oj,!1))throw new ke(400,!1);(function Cj(){!function ge(n){gt=n}(()=>{throw new ke(600,!1)})})(),eh=n;const e=n.get(Rj);(function Lj(n){n.get(hx,null)?.forEach(t=>t())})(n)}(function Nj(n=[],e){return ir.create({name:e,providers:[{provide:Ib,useValue:"platform"},{provide:aD,useValue:new Set([()=>eh=null])},...n]})}(a,i))}return function kne(n){const e=cD();if(!e)throw new ke(401,!1);return e}()}}function cD(){return eh?.get(Rj)??null}const Fne=Pj(null,"core",[]);let Bne=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Qu))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({})}return n})();function rr(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let _D=null;function th(){return _D}class hie{}const Zn=new _t("DocumentToken");let sU=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:()=>Rt(fie),providedIn:"platform"})}return n})(),fie=(()=>{class n extends sU{constructor(){super(),this._doc=Rt(Zn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return th().getBaseHref(this._doc)}onPopState(t){const i=th().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=th().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function aU(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function cU(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ff(n){return n&&"?"!==n[0]?"?"+n:n}let G1=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:()=>Rt(mie),providedIn:"root"})}return n})();const pie=new _t("appBaseHref");let mie=(()=>{class n extends G1{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Rt(Zn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return aU(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ff(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+Ff(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+Ff(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(sU),rt(pie,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bf=(()=>{class n{constructor(t){this._subject=new qt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function bie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(cU(lU(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ff(i))}normalize(t){return n.stripTrailingSlash(function _ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ff(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ff(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Ff;static#t=this.joinWithSlash=aU;static#n=this.stripTrailingSlash=cU;static#i=this.\u0275fac=function(i){return new(i||n)(rt(G1))};static#r=this.\u0275prov=Ct({token:n,factory:()=>function gie(){return new Bf(rt(G1))}(),providedIn:"root"})}return n})();function lU(n){return n.replace(/\/index.html$/,"")}function bU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class ire{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ire(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),wU(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{wU(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(We(fs),We(hc),We(jt))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function wU(n,e){n.context.$implicit=e.item}let jf=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new rre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(We(fs),We(hc))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class rre{constructor(){this.$implicit=null,this.ngIf=null}}function xU(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ai(e)}'.`)}class dre{createSubscription(e,t){return t1(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){t1(()=>e.unsubscribe())}}class ure{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const hre=new ure,fre=new dre;let Zy=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(ag(t))return hre;if(l4(t))return fre;throw function Xc(n,e){return new ke(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(We(Br,16))};static#t=this.\u0275pipe=Wo({name:"async",type:n,pure:!1,standalone:!0})}return n})(),xr=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({})}return n})();const MU="browser";function nh(n){return n===MU}function PD(n){return"server"===n}class TU{}class toe extends hie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class FD extends toe{static makeCurrent(){!function uie(n){_D||(_D=n)}(new FD)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function noe(){return e0=e0||document.querySelector("base"),e0?e0.getAttribute("href"):null}();return null==t?null:function ioe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){e0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bU(document.cookie,e)}}let e0=null,ooe=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const BD=new _t("EventManagerPlugins");let RU=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ke(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(BD),rt(nn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();class OU{constructor(e){this._doc=e}}const jD="ng-app-id";let PU=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=PD(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${jD}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(jD),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(jD,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn),rt(ff),rt(Nb,8),rt(Na))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const UD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},VD=/%COMP%/g,loe=new _t("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function LU(n,e){return e.map(t=>t.replace(VD,n))}let FU=(()=>{class n{constructor(t,i,r,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=PD(a),this.defaultRenderer=new zD(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Us.ShadowDom&&(i={...i,encapsulation:Us.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof jU?r.applyToHost(t):r instanceof HD&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Us.Emulated:o=new jU(c,l,i,this.appId,d,s,a,h);break;case Us.ShadowDom:return new foe(c,l,t,i,s,a,this.nonce,h);default:o=new HD(c,l,i,d,s,a,h)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(RU),rt(PU),rt(ff),rt(loe),rt(Zn),rt(Na),rt(nn),rt(Nb))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();class zD{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(UD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BU(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(BU(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ke(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=UD[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=UD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Il.DashCase|Il.Important)?e.style.setProperty(t,i,r&Il.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Il.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=th().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function BU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class foe extends zD{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=LU(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class HD extends zD{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?LU(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class jU extends HD{constructor(e,t,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,t,i,o,s,a,c,l),this.contentAttr=function doe(n){return"_ngcontent-%COMP%".replace(VD,n)}(l),this.hostAttr=function uoe(n){return"_nghost-%COMP%".replace(VD,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let poe=(()=>{class n extends OU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const UU=["alt","control","meta","shift"],moe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},goe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _oe=(()=>{class n extends OU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>th().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),UU.forEach(l=>{const d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=moe[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),UU.forEach(s=>{s!==r&&(0,goe[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const zU=[{provide:Na,useValue:MU},{provide:hx,useValue:function boe(){FD.makeCurrent()},multi:!0},{provide:Zn,useFactory:function voe(){return function MM(n){Pb=n}(document),document},deps:[]}],woe=Pj(Fne,"browser",zU),xoe=new _t(""),HU=[{provide:O1,useClass:class roe{addToWindow(e){Oi.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new ke(5103,!1);return o},Oi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Oi.getAllAngularRootElements=()=>e.getAllRootElements(),Oi.frameworkStabilizers||(Oi.frameworkStabilizers=[]),Oi.frameworkStabilizers.push(i=>{const r=Oi.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?th().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Sj,useClass:nD,deps:[nn,iD,O1]},{provide:nD,useClass:nD,deps:[nn,iD,O1]}],GU=[{provide:Ib,useValue:"root"},{provide:Ba,useFactory:function yoe(){return new Ba},deps:[]},{provide:BD,useClass:poe,multi:!0,deps:[Zn,nn,Na]},{provide:BD,useClass:_oe,multi:!0,deps:[Zn]},FU,PU,RU,{provide:e1,useExisting:FU},{provide:TU,useClass:ooe,deps:[]},[]];let Eoe=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ff,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(xoe,12))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({providers:[...GU,...HU],imports:[xr,Bne]})}return n})();typeof window<"u"&&window;let t0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:function(i){let r=null;return r=i?new(i||n):rt(XU),r},providedIn:"root"})}return n})(),XU=(()=>{class n extends t0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case _o.NONE:return i;case _o.HTML:return lc(i,"HTML")?$s(i):ry(this._doc,String(i)).toString();case _o.STYLE:return lc(i,"Style")?$s(i):i;case _o.SCRIPT:if(lc(i,"Script"))return $s(i);throw new ke(5200,!1);case _o.URL:return lc(i,"URL")?$s(i):wf(String(i));case _o.RESOURCE_URL:if(lc(i,"ResourceURL"))return $s(i);throw new ke(5201,!1);default:throw new ke(5202,!1)}}bypassSecurityTrustHtml(t){return function cT(n){return new iT(n)}(t)}bypassSecurityTrustStyle(t){return function ty(n){return new rT(n)}(t)}bypassSecurityTrustScript(t){return function lT(n){return new oT(n)}(t)}bypassSecurityTrustUrl(t){return function dT(n){return new sT(n)}(t)}bypassSecurityTrustResourceUrl(t){return function uT(n){return new aT(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:function(i){let r=null;return r=i?new i:function Ioe(n){return new XU(n.get(Zn))}(rt(ir)),r},providedIn:"root"})}return n})();const WD={now:()=>(WD.delegate||Date).now(),delegate:void 0};class Uf extends Yt{constructor(e=1/0,t=1/0,i=WD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}function oi(n,e,t,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function XD(n,e){return function(t,i){e(t,i,n)}}function mc(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function rh(n){return this instanceof rh?(this.v=n,this):new rh(n)}function QU(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function qD(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const JD=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function eV(n){return ye(n?.then)}function tV(n){return ye(n[Za])}function nV(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function iV(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const rV=function Xoe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function oV(n){return ye(n?.[rV])}function sV(n){return function ZU(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(m){return new Promise(function(b,x){o.push([f,m,b,x])>1||a(f,m)})})}function a(f,m){try{!function c(f){f.value instanceof rh?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}(i[f](m))}catch(b){h(o[0][3],b)}}function l(f){a("next",f)}function d(f){a("throw",f)}function h(f,m){f(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield rh(t.read());if(r)return yield rh(void 0);yield yield rh(i)}}finally{t.releaseLock()}})}function aV(n){return ye(n?.getReader)}function Eo(n){if(n instanceof Xe)return n;if(null!=n){if(tV(n))return function Koe(n){return new Xe(e=>{const t=n[Za]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(JD(n))return function qoe(n){return new Xe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(eV(n))return function Joe(n){return new Xe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Be)})}(n);if(nV(n))return cV(n);if(oV(n))return function Zoe(n){return new Xe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(aV(n))return function Qoe(n){return cV(sV(n))}(n)}throw iV(n)}function cV(n){return new Xe(e=>{(function ese(n,e){var t,i,r,o;return function qU(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=QU(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Gd(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ao(n,e,t=1/0){return ye(e)?Ao((i,r)=>en((o,s)=>e(i,o,r,s))(Eo(n(i,r))),t):("number"==typeof e&&(t=e),Ti((i,r)=>function tse(n,e,t,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},m=x=>l<i?b(x):c.push(x),b=x=>{o&&e.next(x),l++;let S=!1;Eo(t(x,d++)).subscribe(_i(e,z=>{r?.(z),o?m(z):e.next(z)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<i;){const z=c.shift();s?Gd(e,s,()=>b(z)):b(z)}f()}catch(z){e.error(z)}}))};return n.subscribe(_i(e,m,()=>{h=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function iE(n=1/0){return Ao(Vo,n)}const Qs=new Xe(n=>n.complete());function lV(n){return n&&ye(n.schedule)}function ZD(n){return n[n.length-1]}function dV(n){return ye(ZD(n))?n.pop():void 0}function n0(n){return lV(ZD(n))?n.pop():void 0}function uV(n,e=0){return Ti((t,i)=>{t.subscribe(_i(i,r=>Gd(i,n,()=>i.next(r),e),()=>Gd(i,n,()=>i.complete(),e),r=>Gd(i,n,()=>i.error(r),e)))})}function hV(n,e=0){return Ti((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function fV(n,e){if(!n)throw new Error("Iterable cannot be null");return new Xe(t=>{Gd(t,e,()=>{const i=n[Symbol.asyncIterator]();Gd(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function ho(n,e){return e?function dse(n,e){if(null!=n){if(tV(n))return function ose(n,e){return Eo(n).pipe(hV(e),uV(e))}(n,e);if(JD(n))return function ase(n,e){return new Xe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(eV(n))return function sse(n,e){return Eo(n).pipe(hV(e),uV(e))}(n,e);if(nV(n))return fV(n,e);if(oV(n))return function cse(n,e){return new Xe(t=>{let i;return Gd(t,e,()=>{i=n[rV](),Gd(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>ye(i?.return)&&i.return()})}(n,e);if(aV(n))return function lse(n,e){return fV(sV(n),e)}(n,e)}throw iV(n)}(n,e):Eo(n)}function gc(...n){const e=n0(n),t=function rse(n,e){return"number"==typeof ZD(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Eo(i[0]):iE(t)(ho(i,e)):Qs}function Tr(n,e){return Ti((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(_i(i,c=>{r?.unsubscribe();let l=0;const d=o++;Eo(n(c,d)).subscribe(r=_i(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}const rE={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return rE.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return rE.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let QD;function yse(n,e,t){let i=t;return function hse(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,o)=>!("*"===r||!function pse(n,e){if(!QD){const t=Element.prototype;QD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&QD.call(n,e)}(n,r)||(i=o,0))),i}class wse{constructor(e,t){this.componentFactory=t.get(kl).resolveComponentFactory(e)}create(e){return new xse(this.componentFactory,e)}}class xse{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Uf(1),this.events=this.eventEmitters.pipe(Tr(i=>gc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(nn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=rE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function mse(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=ir.create({providers:[],parent:this.injector}),i=function bse(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=t.length;o<s;++o){const a=t[o],c=yse(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Br),this.implementsOnChanges=function fse(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Qu).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(en(s=>({name:r,value:s}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=rE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new gw(o,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Ese extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const Sse={initialConfig:{},parse:{},rename:{}};class Cse{constructor(e,t){this.configState=e,this.storedChanges={},this.options={...Sse,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,t,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=t.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[s]=a}}let Mse=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new Cse(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function HT(){throw new Error("invalid")}()};static#t=this.\u0275dir=Ht({type:n,features:[Sr]})}return n})();const e2={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,stringArray:n=>"string"==typeof n?Array.from(n).filter(e=>!"[], ".includes(e)):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}},Vf_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api--staging/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://apps.humanatlas.io/hra-api--staging/v1"};function pV(n,e,t,i,r,o,s){try{var a=n[o](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Ut(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(c){pV(o,i,r,s,a,"next",c)}function a(c){pV(o,i,r,s,a,"throw",c)}s(void 0)})}}function r0(n){return(r0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Se(n,e,t){return(e=function Ise(n){var e=function Tse(n,e){if("object"!==r0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==r0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===r0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mV(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function Bl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||mV()}const gV=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Bl();class kse{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Se(this,"storage",void 0),Se(this,"id",void 0),Se(this,"config",void 0),this.storage=function Dse(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function t2(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const o=n.width*t,s=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let oE;var n;function _V(n){return"string"==typeof n?oE[n.toUpperCase()]||oE.WHITE:n}function sE(n,e){if(!n)throw new Error(e||"Assertion failed")}(n=oE||(oE={}))[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE";const oh={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},aE=oh.window||oh.self||oh.global,o0=oh.process||{};function fg(){let n;var e,t;if(Bl&&"performance"in aE)n=null==aE||null===(e=aE.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in o0){var i;const r=null==o0||null===(i=o0.hrtime)||void 0===i?void 0:i.call(o0);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const pg={debug:Bl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Bse={enabled:!0,level:0};function _c(){}const bV={},yV={once:!0};class s0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};Se(this,"id",void 0),Se(this,"VERSION",gV),Se(this,"_startTs",fg()),Se(this,"_deltaTs",fg()),Se(this,"_storage",void 0),Se(this,"userData",{}),Se(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new kse("__probe-".concat(this.id,"__"),Bse),this.timeStamp("".concat(this.id," started")),function Fse(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(o=>r===o)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((fg()-this._startTs).toPrecision(10))}getDelta(){return Number((fg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){sE(e,t)}warn(e){return this._getLogFunction(0,e,pg.warn,arguments,yV)}error(e){return this._getLogFunction(0,e,pg.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,pg.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,pg.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,t,pg.debug||pg.info,arguments,yV)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||_c,i&&[i],{tag:zse(t)}):_c}image(e){let{logLevel:t,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(t||i)?Bl?function Vse(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=t2(o,t,i);console.log(...s)},o.src=e,_c}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...t2(e,t,i)),_c;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...t2(o,t,i)),o.src=e.toDataURL(),_c}return _c}({image:r,message:o,scale:s}):function Use(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),_c}({image:r,message:o,scale:s}):_c}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||_c)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=wV({logLevel:e,message:t,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||_c)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=vV(e)}_getLogFunction(e,t,i,r,o){if(this._shouldLog(e)){o=wV({logLevel:e,message:t,args:r,opts:o}),sE(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=fg();const s=o.tag||o.message;if(o.once){if(bV[s])return _c;bV[s]=fg()}return t=function jse(n,e,t){if("string"==typeof e){const i=t.time?function Ose(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function Rse(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function Lse(n,e,t){return!Bl&&"string"==typeof n&&(e&&(e=_V(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=_V(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),i.bind(console,t,...o.args)}return _c}}function vV(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return sE(Number.isFinite(e)&&e>=0),e}function wV(n){const{logLevel:e,message:t}=n;n.logLevel=vV(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return sE("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function zse(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}Se(s0,"VERSION",gV);const xi=new s0({id:"deck"}),ki={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ki,"IDENTITY",{get:()=>(xi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const jl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},cE={common:0,meters:1,pixels:2},xV={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},fn=new s0({id:"luma.gl"});function ea(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const Gse="Requires WebGL2";function lE(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function pi(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function dE(n){return ea(lE(n),"Invalid WebGLRenderingContext"),n}function Rs(n){return ea(pi(n),Gse),n}const c0={};const l0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(l0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const zf=function(e){const t=this;this.gl=e,function Kse(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(c0[i]=!0)}while(0!==i);for(i in c0)if(c0[i])return delete c0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:t.currentArrayBuffer=s;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=t.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const f=h.attribs[o];return f.buffer=t.currentArrayBuffer,f.size=s,f.type=a,f.normalized=c,f.stride=l,f.offset=d,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Yse(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};zf.prototype.VERTEX_ARRAY_BINDING_OES=34229,zf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new l0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},zf.prototype.createVertexArrayOES=function(){const e=new l0(this);return this.vertexArrayObjects.push(e),e},zf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},zf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof l0&&e.hasBeenBound&&e.ext===this)},zf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function Xse(n,e){c0[n]=!0,void 0!==e&&function $se(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const EV="OES_element_index",AV="WEBGL_draw_buffers",SV="WEBGL_debug_renderer_info",Er=n=>pi(n)?void 0:0,sae={3074:n=>pi(n)?void 0:36064,35723:n=>pi(n)?void 0:4352,35977:Er,32937:Er,36795:(n,e)=>{const t=pi(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(SV);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(SV);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Er,35071:Er,37447:Er,36063:(n,e)=>{if(!pi(n)){const t=n.getExtension(AV);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Er,35374:Er,35377:Er,34852:n=>{if(!pi(n)){const e=n.getExtension(AV);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(EV)?2147483647:65535,33001:n=>n.getExtension(EV)?16777216:65535,33e3:n=>16777216,37157:Er,35373:Er,35657:Er,36183:Er,37137:Er,34045:Er,35978:Er,35979:Er,35968:Er,35376:Er,35375:Er,35659:Er,37154:Er,35371:Er,35658:Er,35076:Er,35077:Er,35380:Er},CV="ANGLE_instanced_arrays",MV={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{ea(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[CV]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){ea(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{ea(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{ea(!1)},deleteQuery:()=>{ea(!1)},beginQuery:()=>{ea(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},n2={readBuffer:(n,e,t)=>{pi(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:o}=function fae(n,e){return{webgl2:pi(n),ext:n.getExtension(e)}}(n,CV);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!pi(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>pi(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function aae(n,e,t){const i=sae[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function bae(n,e){let{extension:t,target:i,target2:r}=e;const o=MV[t];ea(o);const{meta:s={}}=o,{suffix:a=""}=s,c=n.getExtension(t);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function pae(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function qse(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new zf(this)),this.__OESVertexArrayObject))}}(n),function mae(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function _ae(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&bae(n,{extension:t,target:n.luma,target2:n})}(n,MV),function gae(n,e){let{target:t,target2:i}=e;Object.keys(n2).forEach(r=>{if("function"==typeof n2[r]){const o=n[r]?n[r].bind(n):()=>{},s=n2[r].bind(null,n,o);t[r]=s,i[r]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const r2={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},sh=(n,e,t)=>e?n.enable(t):n.disable(t),TV=(n,e,t)=>n.hint(t,e),za=(n,e,t)=>n.pixelStorei(t,e);function d0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const wae={3042:sh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:sh,2885:(n,e)=>n.cullFace(e),2929:sh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:sh,35723:TV,36006:(n,e)=>{const t=pi(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:TV,2849:(n,e)=>n.lineWidth(e),32823:sh,32824:"polygonOffset",10752:"polygonOffset",35977:sh,32938:"sampleCoverage",32939:"sampleCoverage",3089:sh,3088:(n,e)=>n.scissor(...e),2960:sh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:za,3317:za,37440:za,37441:za,37443:za,3330:za,3332:za,3331:za,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:za,32878:za,3316:za,3315:za,32877:za,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=d0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=d0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=d0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=d0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,o,s,a)},stencilOp:(n,e)=>{e=d0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,o,s,a)},viewport:(n,e)=>n.viewport(...e)};function no(n,e,t){return void 0!==e[n]?e[n]:t[n]}const xae={blendEquation:(n,e,t)=>n.blendEquationSeparate(no(32777,e,t),no(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(no(32969,e,t),no(32968,e,t),no(32971,e,t),no(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(no(32824,e,t),no(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(no(32938,e,t),no(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,no(2962,e,t),no(2967,e,t),no(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,no(34816,e,t),no(36003,e,t),no(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,no(2964,e,t),no(2965,e,t),no(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,no(34817,e,t),no(34818,e,t),no(34819,e,t))},IV={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},Ul=(n,e)=>n.isEnabled(e),DV={3042:Ul,2884:Ul,2929:Ul,3024:Ul,32823:Ul,32926:Ul,32928:Ul,3089:Ul,2960:Ul,35977:Ul};function kV(n){for(const e in n)return!1;return!0}function Eae(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function RV(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Aae(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Cae{constructor(e){let{copyState:t=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function Tae(n,e){if("number"==typeof(e=e||r2)){const r=e,o=DV[r];return o?o(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const o=DV[r];i[r]=o?o(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},r2),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){ea(this.stateStack.length>0),Wd(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){ea(void 0!==o);const s=e[o],a=this.cache[o];Eae(s,a)||(t=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:t,oldValue:i}}}function OV(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(ea(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new Cae(n,{copyState:i}),function Sae(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const o in IV)Aae(n,o,IV[o]);RV(n,"getParameter"),RV(n,"isEnabled")}return n.state.enable=t,n}function PV(n){ea(n.state),n.state.pop()}function Wd(n,e){if(ea(lE(n),"setParameters requires a WebGL context"),kV(e))return;const t={};for(const r in e){const o=Number(r),s=wae[r];s&&("string"==typeof s?t[s]=!0:s(n,e[r],o))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,xae[r])(n,e,i)}function bc(n,e,t){if(kV(e))return t(n);const{nocatch:i=!0}=e;let r;if(function Mae(n){n.state||OV(n,{copyState:!1}),n.state.push()}(n),Wd(n,e),i)r=t(n),PV(n);else try{r=t(n)}finally{PV(n)}return r}function mg(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function o2(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function kae(n,e,t,i,r){const o=NV(n[0],e,t);let s=LV(n[1],e,i,r),a=NV(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=LV(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,mg(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function NV(n,e,t){return Math.min(Math.round(n*e),t-1)}function LV(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const s2=Bl(),Rae=s2&&typeof document<"u",FV={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function BV(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ea(s2,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},FV,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:o}=n,s=function Lae(n){let o,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(Rae&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:t,onError:i});return r=function Nae(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),o&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,n),r?(r=a2(r,n),function Fae(n){const e=pi(n)?"WebGL2":"WebGL1",t=function Oae(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";fn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function a2(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function Bae(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},FV,e);const{manageState:t,debug:i}=e;return t&&OV(n,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return fn.log(1,...o)()}}),s2&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),fn.level=Math.max(fn.level,1)):fn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function jV(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class UV{constructor(e,t){Se(this,"name",void 0),Se(this,"type",void 0),Se(this,"sampleSize",1),Se(this,"time",void 0),Se(this,"count",void 0),Se(this,"samples",void 0),Se(this,"lastTiming",void 0),Se(this,"lastSampleTime",void 0),Se(this,"lastSampleCount",void 0),Se(this,"_count",0),Se(this,"_time",0),Se(this,"_samples",0),Se(this,"_startTime",0),Se(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=jV(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(jV()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class c2{constructor(e){Se(this,"id",void 0),Se(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof UV?e:new UV(t,i)),this.stats[t]}}const u0="8.5.21",Hf=new class Vae{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new c2({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==u0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(u0));function Zt(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function l2(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return Zt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function ah(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(Bl()&&fn.log(1,"luma.gl ".concat(u0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:u0,version:u0,log:fn,stats:Hf,globals:{modules:{},nodeIO:{}}}),globalThis;const d2={};function ya(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";d2[n]=d2[n]||1;const e=d2[n]++;return"".concat(n,"-").concat(e)}function VV(n){return Zt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function gg(n){let e=!0;for(const t in n){e=!1;break}return e}function zV(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(n);i.forEach(s=>{o.methodName||(o[s]=()=>{throw fn.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const _g="Resource subclass must define virtual methods";class $d{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dE(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||ya(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zt(e=l2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=pi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},o=pi(this.gl),s={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?ah(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=ah(this.gl,s[h]))}}return s}setParameter(e,t){Zt(e=l2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=pi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=l2(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return zV(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(_g)}_deleteHandle(){throw new Error(_g)}_bindHandle(e){throw new Error(_g)}_getOptsFromHandle(){throw new Error(_g)}_getParameter(e,t){throw new Error(_g)}_setParameter(e,t){throw new Error(_g)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=Hf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Hf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Hf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Hf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const zae="Failed to deduce GL constant from typed array";function u2(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(zae)}}function h0(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Gae(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:s,width:r,height:o}}function h2(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";fn.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];fn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];fn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const Wae={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},$ae={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class va{static getBytesPerElement(e){return h0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Zt(e.size),h0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new va(Wae,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return va.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return va.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=h2("Accessor",e,$ae),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const GV={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Yae={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:GV},Xae={removedProps:GV};class or extends $d{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/va.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/va.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=h2("Buffer",e,Yae),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=h2("Buffer",e,Xae))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new va(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Zt(t);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(Rs(this.gl),this.gl.bufferSubData(this.target,i,t,r,o)):this.gl.bufferSubData(s,i,t),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return Rs(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rs(this.gl);const o=h0(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Zt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(Zt(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Zt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=u2(e);return Zt(o),this.setAccessor(new va(this.accessor,{type:o})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Zt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/h0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new va(this.accessor,{type:u2(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return fn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return fn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return fn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return fn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new va(this.accessor,e),this}}const f2={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},WV={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},$V={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Jae=[9729,9728],YV=globalThis.WebGLBuffer||function(){};class Gf extends $d{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let o=!0;return i&&(o=o&&function Kae(n,e){const t=f2[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=pi(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),o=o&&(!r||function qae(n,e){const t=f2[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,t){const{id:i=ya("texture"),handle:r,target:o}=t;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(W=>this.initialize(Object.assign({},e,{pixels:W,data:W}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;t||(t=r);let{width:h,height:f,dataFormat:m,type:b,compressed:x=!1,mipmaps:S=!0}=e;const{depth:z=0}=e;return({width:h,height:f,compressed:x,dataFormat:m,type:b}=this._deduceParameters({format:o,type:b,dataFormat:m,compressed:x,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=z,this.format=o,this.type=b,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),S&&this._isNPOT()&&(fn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),S=!1,this._updateForNPOT(c)),this.mipmaps=S,this.setImageData({data:t,width:h,height:f,depth:z,format:o,type:b,dataFormat:m,border:s,mipmaps:S,parameters:l,compressed:x}),S&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(fn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),bc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:f=this.height,dataFormat:m=this.dataFormat,compressed:b=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:b,width:h,height:f}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:b,data:l,width:h,height:f}));const{gl:x}=this;x.bindTexture(this.target,this.handle);let S=null;({data:l,dataType:S}=this._getDataType({data:l,compressed:b}));let z,W=0;return bc(this.gl,c,()=>{switch(S){case"null":x.texImage2D(t,r,o,h,f,s,m,d,l);break;case"typed-array":x.texImage2D(t,r,o,h,f,s,m,d,l,a);break;case"buffer":z=Rs(x),z.bindBuffer(35052,l.handle||l),z.texImage2D(t,r,o,h,f,s,m,d,a),z.bindBuffer(35052,null);break;case"browser-object":pi(x)?x.texImage2D(t,r,o,h,f,s,m,d,l):x.texImage2D(t,r,o,m,d,l);break;case"compressed":for(const[ue,se]of l.entries())x.compressedTexImage2D(t,ue,se.format,se.width,se.height,s,se.data),W+=se.levelSize;break;default:Zt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===S?W:l&&l.byteLength?l.byteLength:this.width*this.height*(WV[this.dataFormat]||4)*($V[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:m=!1,offset:b=0,border:x=this.border,parameters:S={}}=e;if(({type:h,dataFormat:f,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:f,compressed:m,data:r,width:a,height:c})),Zt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const z=r;r=z.data,a=z.shape[0],c=z.shape[1]}r instanceof or&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),bc(this.gl,S,()=>{if(m)this.gl.compressedTexSubImage2D(t,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(t,l,o,s,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,o,s,a,c,f,h,r,b);else if(r instanceof YV){const z=Rs(this.gl);z.bindBuffer(35052,r),z.texSubImage2D(t,l,o,s,a,c,f,h,b),z.bindBuffer(35052,null)}else pi(this.gl)?Rs(this.gl).texSubImage2D(t,l,o,s,a,c,f,h,r):this.gl.texSubImage2D(t,l,o,s,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return fn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof or?{data:t.handle,dataType:"buffer"}:t instanceof YV?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=f2[t];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},Zt(r,"Could not deduced texture size"),Zt(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Zt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Zt(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(pi(this.gl)||!this.width||!this.height||VV(this.width)&&VV(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Jae.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Zae(n,e){return Zt("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class ms extends Gf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Gf.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dE(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Zae(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Wf="EXT_color_buffer_float",XV={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Wf,bpp:2},33327:{gl2:Wf,bpp:4},34842:{gl2:Wf,bpp:8},33326:{gl2:Wf,bpp:4},33328:{gl2:Wf,bpp:8},34836:{gl2:Wf,bpp:16},35898:{gl2:Wf,bpp:4}};class bg extends $d{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function Qae(n,e,t){const i=t[e];if(!i)return!1;const r=pi(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,XV)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:o=0}=e;return Zt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&pi(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*XV[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const KV=6144,QV="clear: bad arguments";function m2(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;t&&(s|=16384,!0!==t&&(o.clearColor=t)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Zt(0!==s,QV),bc(n,o,()=>{n.clear(s)})}const g2=[34069,34070,34071,34072,34073,34074];let oce=(()=>{class n extends Gf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dE(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return Ut(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t;const{gl:h}=i,f=s||a,m=yield Promise.all(g2.map(b=>{const x=f[b];return Promise.all(Array.isArray(x)?x:[x])}));i.bind(),g2.forEach((b,x)=>{m[x].length>1&&!1!==i.opts.mipmaps&&fn.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[x].forEach((S,z)=>{r&&o?h.texImage2D(b,z,l,r,o,c,l,d,S):h.texImage2D(b,z,l,l,d,S)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t,{gl:h}=this,f=s||a;return this.bind(),f instanceof Promise?f.then(m=>this.setImageDataForFace(Object.assign({},t,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,f):h.texImage2D(i,0,l,l,d,f),this}}return n.FACES=g2,n})();class sce extends Gf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return pi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rs(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),bc(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,h),h instanceof or&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(WV[this.dataFormat]||4)*($V[this.type]||1),"Texture"),this.loaded=!0,this}}function cce(n,e){const{gl:t,width:i,height:r,id:o}=n;return new So(t,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:n}}))}function uE(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=f0(n);Zt(d);const{gl:f,handle:m,attachments:b}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Zt(b[o]),l=l||b[o].type,s=function dce(n,e,t,i,r){if(n)return n;const o=h0(e=e||5121,{clamped:!1}),s=function rce(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Zt(!1),0}}(t);return new o(i*r*s)}(s,l,r,a,c),l=l||u2(s);const x=f.bindFramebuffer(36160,m);return f.readPixels(t,i,a,c,r,l,s),f.bindFramebuffer(36160,x||null),h&&d.delete(),s}function _2(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=uE(n,{sourceAttachment:e}),{width:r,height:o}=n;for(;o>t;)({data:i,width:r,height:o}=Gae({data:i,width:r,height:o}));!function Hae(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:o}=n;const s=t*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function f0(n){return n instanceof So?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:cce(n),deleteFramebuffer:!0}}const e8="Multiple render targets not supported";class So extends $d{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new So(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Rs(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Rs(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Zt(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:t,height:i})}else r=this._createDefaultAttachments(o,s,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(t,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return Zt(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&fn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Zt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof bg)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,f=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function hce(n){return(So.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&m2(this.gl,{color:t,depth:i,stencil:r}),o.forEach((a,c)=>{!function ice(n){let{framebuffer:e=null,buffer:t=KV,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rs(n),bc(n,{framebuffer:e},()=>{switch(t){case KV:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;n.clearBufferfi(34041,0,o,s);break;default:Zt(!1,QV)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return fn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return fn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return fn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return fn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return fn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return fn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:o,height:s}=e;const a=Rs(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ah(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[t?ah(this.gl,o):o]=this.getAttachmentParameter(e,o,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const o=Number(r);i[e?ah(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(_2(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>fn.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=_2(this,{targetMaxHeight:100});return fn.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new ms(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),t&&i?(s=s||{},s[33306]=new bg(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):t?(s=s||{},s[36096]=new bg(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Zt(!1),s}_unattach(e){const t=this.attachments[e];t&&(t instanceof bg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:Rs(s).framebufferTextureLayer(36160,t,i.target,o,r);break;case 34067:const c=function uce(n){return n<34069?n+34069:n}(r);s.framebufferTexture2D(36160,t,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,t,3553,i.handle,o);break;default:Zt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function Wse(n){return pi(n)?n:null}(this.gl);t?t.readBuffer(e):Zt(36064===e||1029===e,e8),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=Rs(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Zt(1===e.length&&(36064===e[0]||1029===e[0]),e8)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function gce(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in t8)void 0===n.luma.caps[e]&&(n.luma.caps[e]=i8(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}So.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const t8={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function pce(n){const e=new ms(n,{format:6408,type:5126,dataFormat:6408}),t=new So(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},mce=2;function b2(n,e){return n8(n,e)}function n8(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>i8(n,t))}function i8(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function _ce(n,e){const t=t8[e];let i;Zt(t,e);const r=pi(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!n.getExtension(o)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:Zt(!1);return i}(n,e)),n.luma.caps[e]||fn.log(mce,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}class y2{constructor(e,t){Se(this,"opts",void 0),Se(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=t.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const p0=new class yce{constructor(e={}){Se(this,"_pool",[]),Se(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=t*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const f=this._allocate(l,d,a,h);return e&&s?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,o=t.findIndex(s=>s.byteLength>=r);o<0?t.push(i):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,i),t.length>this.opts.poolSize&&t.shift()}},vce=1/Math.PI*180,wce=1/180*Math.PI,fo={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function xce(n,{precision:e=fo.precision}={}){return n=function Mce(n){return Math.round(n/fo.EPSILON)*fo.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Yd(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function r8(n){return function Ace(n,e){return Xd(n,t=>t*wce,e)}(n)}function Ece(n){return function Sce(n,e){return Xd(n,t=>t*vce,e)}(n)}function $r(n,e,t){return Xd(n,i=>Math.max(e,Math.min(t,i)))}function hE(n,e,t){return Yd(n)?n.map((i,r)=>hE(i,e[r],t)):t*e+(1-t)*n}function yg(n,e,t){const i=fo.EPSILON;t&&(fo.EPSILON=t);try{if(n===e)return!0;if(Yd(n)&&Yd(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!yg(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=fo.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{fo.EPSILON=i}}function Xd(n,e,t){if(Yd(n)){const i=n;t=t||function Tce(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}class fE extends(function Ice(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Yd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(fo)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+xce(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!yg(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(fo.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function mi(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function pE(n,e,t=""){if(fo.debug&&!function Dce(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}function s8(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class a8 extends fE{get x(){return this[0]}set x(e){this[0]=mi(e)}get y(){return this[1]}set y(e){this[1]=mi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return mi(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return mi(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return s8(e>=0&&e<this.ELEMENTS,"index is out of range"),mi(this[e])}setComponent(e,t){return s8(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Vl=1e-6,wa=typeof Float32Array<"u"?Float32Array:Array;function c8(){var n=new wa(3);return wa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function l8(n,e,t){var i=new wa(3);return i[0]=n,i[1]=e,i[2]=t,i}function d8(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function mE(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function v2(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s,n}function u8(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,b=o*d-i*f,x=i*h-r*d,S=2*t[3];return h*=S,f*=S,b*=2,x*=2,n[0]=a+(d*=S)+(m*=2),n[1]=c+h+b,n[2]=l+f+x,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function h8(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;return n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s,n}c8();const w2=[0,0,0];let gE;class Os extends a8{static get ZERO(){return gE||(gE=new Os(0,0,0),Object.freeze(gE)),gE}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Yd(e)?this.copy(e):(fo.debug&&(mi(e),mi(t),mi(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return fo.debug&&(mi(e.x),mi(e.y),mi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=mi(e)}angle(e){return function Uce(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&d8(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return mE(this,this,e),this.check()}rotateX({radians:e,origin:t=w2}){return function Fce(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=w2}){return function Bce(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=w2}){return function jce(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return v2(this,this,e),this.check()}transformAsVector(e){return h8(this,this,e),this.check()}transformByMatrix3(e){return function Lce(n,e,t){var i=e[0],r=e[1],o=e[2];n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Gce(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return u8(this,this,e),this.check()}}const f8=new Os;function vg(n,e,t,i){f8.set(n,e,t);const r=f8.len();return{distance:i/r,normal:new Os(-n/r,-e/r,-t/r)}}function qce(n){return n-Math.fround(n)}let g0;function x2(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,o=(r-i)/t;g0=p0.allocate(g0,o,{type:Float32Array,size:2*t});let s=i,a=0;for(;s<r;){for(let c=0;c<t;c++){const l=n[s++];g0[a+c]=l,g0[a+c+t]=qce(l)}a+=2*t}return g0.subarray(0,o*t*2)}function _E(n){return n.stride||n.size*n.bytesPerElement}function p8(n,e){e.offset&&xi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=_E(n),o=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:o,stride:t}}class Zce{constructor(e,t,i){Se(this,"gl",void 0),Se(this,"id",void 0),Se(this,"size",void 0),Se(this,"settings",void 0),Se(this,"value",void 0),Se(this,"doublePrecision",void 0),Se(this,"_buffer",void 0),Se(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,o=5130===r;let a,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&t.isIndexed?e&&b2(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function bce(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new or(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*_E(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),p0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function Jce(n,e){const t=p8(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new y2(this,o.high),i["".concat(e,"64Low")]=r?new y2(this,o.low):new Float32Array(this.size),i}if(t){const i=p8(this.getAccessor(),t);return{[e]:new y2(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,o=i*r;if(t&&o&&t.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=t[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof or?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),t.constant&&this._areValuesEqual(o,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;t.externalBuffer=o,t.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=_E(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;t.externalBuffer=null,t.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=_E(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=x2(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?x2(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,o=p0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),t&&r&&s.subData({data:r instanceof Float64Array?x2(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&xi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(o){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)t[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}function gs(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const m8=[],g8=[];function bE(n,e=0,t=1/0){let i=m8;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(g8.length=n.length,i=g8):i=m8,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function _8(n){return n&&n[Symbol.asyncIterator]}function E2(n,e=(()=>!0)){return Array.isArray(n)?b8(n,e,[]):e(n)?[n]:[]}function b8(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?b8(r,e,t):e(r)&&t.push(r)}return t}function ele({target:n,source:e,start:t=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=t;s<r;s++)n[a++]=e[s];for(;s<o;)s<o-s?(n.copyWithin(t+s,t,t+s),s*=2):(n.copyWithin(t+s,t,t+o-s),s=o);return n}const tle=[],yE=[[0,1/0]];function A2(n){const{source:e,target:t,start:i=0,size:r,getData:o}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)t[i+l]=d[h]||0,l++}}const rle={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function y8(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...rle[t],...e,...n,type:t}}function v8(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function w8(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function x8(n){n.push(n.shift())}function S2(n,e){const{doublePrecision:t,settings:i,value:r,size:o}=n,s=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function E8({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*s,c=t.byteOffset,l=t.startIndices,d=r&&l,h=S2(t,e),f=t.isConstant;if(!d&&i>=h)return;const m=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const z=o;o=(W,ue)=>t.normalizeConstant(z(W,ue))}const b=f?(z,W)=>o(m,W):(z,W)=>o(m.subarray(z,z+a),W),x=n.getData({length:i}),S=new Float32Array(h);(function ile({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return A2({source:n,target:e,size:t,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*t,f=o[d]*t;A2({source:n.subarray(s,h),target:e,start:a,end:f,size:t,getData:c}),s=h,a=f}a<e.length&&A2({source:[],target:e,start:a,size:t,getData:c})})({source:x,target:S,sourceStartIndices:r,targetStartIndices:l,size:a,getData:b}),n.byteLength<S.byteLength+c&&n.reallocate(S.byteLength+c),n.subData({data:S,offset:c})}class C2 extends Zce{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:yE}),Se(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return y8(Array.isArray(t)?e[t.find(o=>e[o])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function nle(n,e){if(n===yE||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let o=0;o<i;o++){const s=n[o];s[1]<e[0]?(t.push(s),r=o+1):s[0]>e[1]?t.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=yE}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=tle}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==yE),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:t,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return gs(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Qce(n,e){const{size:t,stride:i,offset:r,startIndices:o,nested:s}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,d=Math.floor((n.length-l)/c);return(h,{index:f,target:m})=>{if(!o){const z=f*c+l;for(let W=0;W<t;W++)m[W]=n[z+W];return m}const b=o[f],x=o[f+1]||d;let S;if(s){S=new Array(x-b);for(let z=b;z<x;z++){const W=z*c+l;m=new Array(t);for(let ue=0;ue<t;ue++)m[ue]=n[W+ue];S[z-b]=m}}else if(c===t)S=n.subarray(b*t+l,x*t+l);else{S=new n.constructor((x-b)*t);let z=0;for(let W=b;W<x;W++){const ue=W*c+l;for(let se=0;se<t;se++)S[z++]=n[ue+se]}}return S}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:t,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:f,transform:m}=a,b=c.binaryAccessor||("function"==typeof f?f:o[f]);gs("function"==typeof b,'accessor "'.concat(f,'" is not a function'));let x=e.getVertexOffset(i);const{iterable:S,objectInfo:z}=bE(t,i,r);for(const W of S){z.index++;let ue=b(W,z);if(m&&(ue=m.call(this,ue)),h){const se=(z.index<h.length-1?h[z.index+1]:s)-h[z.index];if(ue&&Array.isArray(ue[0])){let De=x;for(const Ne of ue)e._normalizeValue(Ne,l,De),De+=d}else ue&&ue.length>d?l.set(ue,x):(e._normalizeValue(ue,z.target,0),ele({target:l,source:z.target,start:x,count:se}));x+=se*d}else e._normalizeValue(ue,l,x),x+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let M2={};function Ps(n,e,t,i){xi.level>0&&M2[n]&&M2[n].call(null,e,t,i)}function Ha(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const A8="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",ale="#version 300 es\n".concat(A8);function S8(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,o]=t;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function C8(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?ale:e>300?"#version ".concat(e,"\n").concat(A8):"void main() {gl_FragColor = vec4(0);}";const o=function dle(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return Ha(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class M8 extends $d{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return pi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rs(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,gg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(t);return i<0?(this.unused[e]=r,fn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof or?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const o=t&&t.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class ule{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof or?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Zt(pi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=t[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new M8(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];t[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Zt(i[o]instanceof or)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new or(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function T8(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const _0="vs",ple={[_0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},vE="__LUMA_INJECT_DECLARATIONS__",I8=/void\s+main\s*\([^)]*\)\s*\{\n?/,D8=/}\n?[^{}]*$/,I2=[];function k8(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===_0;for(const o in t){const s=t[o];s.sort((c,l)=>c.order-l.order),I2.length=s.length;for(let c=0,l=s.length;c<l;++c)I2[c]=s[c].injection;const a="".concat(I2.join("\n"),"\n");switch(o){case"vs:#decl":r&&(n=n.replace(vE,a));break;case"vs:#main-start":r&&(n=n.replace(I8,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(D8,c=>a+c));break;case"fs:#decl":r||(n=n.replace(vE,a));break;case"fs:#main-start":r||(n=n.replace(I8,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(D8,c=>a+c));break;default:n=n.replace(o,c=>c+a)}}return n=n.replace(vE,""),i&&(n=n.replace(/\}\s*$/,o=>o+ple[e])),n}function D2(n){const e={};return Ha(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}const mle={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},wE="transform_uSize_",R8="transform_position";const Ele={10241:9728,10240:9728,10242:33071,10243:33071};class Sle{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function ble(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let o,s;t&&(({width:o,height:s}=i),r["".concat(wE).concat(t)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(wE).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=uE(t);if(!e)return i;const r=i.constructor,o=function lle(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ha(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof ms)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new or(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new So(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(Ele)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function ace(n,e){Zt(n instanceof ms||n instanceof oce||n instanceof sce);const t=n.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=n;return new t(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function _le(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,s=Object.keys(t).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((m,b,x)=>{if(s>0){const S=function xle(n,e){const t={},i=function yle(n){return S8(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function vle(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(wE).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(o),d=function cle(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ha(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return t[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(m,t);if(S){const{updatedLine:z,inject:W}=S;f[b]=z,d=D2([d,W]),Object.assign(c,S.samplerTextureMap),s--}}i&&!a&&(a=function wle(n,e){const t=S8(n,["varying","out"]);return t&&t.name===e?t.type:null}(m,i))}),i){Zt(r);const m="".concat(wE).concat(i),b="uniform vec2 ".concat(m,";\n"),x="     vec2 ".concat(R8," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(R8,", 0, 1.);\n");d=D2([d,{"vs:#decl":b,"vs:#main-start":x}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=D2([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||C8({version:T8(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[mle].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const k2={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function Mle(n){let e=O8(n);return"object"===e?n?"type"in n?Object.assign({},n,k2[n.type]):"value"in n?(e=O8(n.value),Object.assign({type:e},n,k2[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},k2[e])}function O8(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class R2{constructor(e){let{name:t,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:f}=e;Ha("string"==typeof t),this.name=t,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Dle(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(d),s&&(this.uniforms=function Cle(n){const e={};for(const t in n){const r=Mle(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Ha(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&Ha(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=o.value}return t}}function kle(n){return function P8(n){const e={},t={};return O2({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(N8(n))}function O2(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<t)&&(r[o.name]=t);for(const o of e)o.dependencies&&O2({modules:o.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function N8(n,e){return n.map(t=>(t instanceof R2||(Ha("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Ha(t.name,"shader module has no name"),(t=new R2(t)).dependencies=N8(t.dependencies)),t))}const Ole=7936,Ple=7937,Nle=7938,Lle=35724,P2={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},$f={};function jle(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(P2).forEach(n=>{$f[n]=n});const N2={};function L8(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=P2[e];if(Ha(i,e),!function Rle(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in N2)return N2[e];const o=t.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,s),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),N2[e]=c,c}function xE(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function Ule(n,e){const t=P2[e];Ha(t,e);const i=function Fle(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return Ha(!1===r||!0===r),r}(n,t))}function wg(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const F8=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Hle=[...F8,[wg("attribute"),"in $1"],[wg("varying"),"out $1"]],Gle=[...F8,[wg("varying"),"in $1"]],B8=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Wle=[...B8,[wg("in"),"attribute $1"],[wg("out"),"varying $1"]],$le=[...B8,[wg("in"),"varying $1"]],L2="gl_FragColor",F2=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Yle=/void\s+main\s*\([^)]*\)\s*\{\n?/;function EE(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Jle="\n\n".concat(vE,"\n\n"),j8={[_0]:"vertex",fs:"fragment"};function U8(n,e){let{id:t,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;Ha("string"==typeof i,"shader source must be a string");const f=r===_0,m=i.split("\n");let b=100,x="",S=i;0===m[0].indexOf("#version ")?(b=300,x=m[0],S=m.slice(1).join("\n")):x="#version ".concat(b);const z={};o.forEach(ot=>{Object.assign(z,ot.getDefines())}),Object.assign(z,s);let W=d?"".concat(x,"\n").concat(function nde(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(j8[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function tde(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(j8[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Vle(n){switch(function Ble(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Ole),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Ple);return{gpuVendor:jle(t,i),vendor:t,renderer:i,version:n.getParameter(Nle),shadingLanguageVersion:n.getParameter(Lle)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function zle(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return xE(n,$f.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),xE(n,$f.GLSL_DERIVATIVES)&&L8(n,$f.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),xE(n,$f.GLSL_FRAG_DATA)&&L8(n,$f.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),xE(n,$f.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function ide(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(z),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(x,"\n");const ue=function ode(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,o]=t.split(":"),s=t.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),se={},De={},Ne={};for(const ot in c){const ut="string"==typeof c[ot]?{injection:c[ot],order:0}:c[ot],Ke=ot.match(/^(v|f)s:(#)?([\w-]+)$/);Ke?Ke[2]?"decl"===Ke[3]?De[ot]=[ut]:Ne[ot]=[ut]:se[ot]=[ut]:Ne[ot]=[ut]}for(const ot of o){h&&ot.checkDeprecations(S,h),W+=ot.getModuleSource(r,b);const Ke=ot.injections[r];for(const ht in Ke){const yt=ht.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ft="decl"===yt[2]?De:Ne;ft[ht]=ft[ht]||[],ft[ht].push(Ke[ht])}else se[ht]=se[ht]||[],se[ht].push(Ke[ht])}}return W+=Jle,W=k8(W,r,De),W+=function rde(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)t+="  ".concat(s.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(ue[r],se),W+=S,W=k8(W,r,Ne),W=function Xle(n,e,t){switch(e){case 300:return t?EE(n,Hle):function Kle(n){const e=(n=EE(n,Gle)).match(F2);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(L2,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(Yle,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(L2,"\\b"),"g"),t)}return n}(n);case 100:return t?EE(n,Wle):function qle(n){const e=(n=EE(n,$le)).match(F2);if(e){const t=e[1];n=n.replace(F2,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),L2)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}(W,l?100:b,f),W}function ede(n){return function(t){const i={};for(const r of n){const o=r.getUniforms(t,i);Object.assign(i,o)}return i}}const sde={5126:Ir.bind(null,"uniform1fv",Ga,1,Ns),35664:Ir.bind(null,"uniform2fv",Ga,2,Ns),35665:Ir.bind(null,"uniform3fv",Ga,3,Ns),35666:Ir.bind(null,"uniform4fv",Ga,4,Ns),5124:Ir.bind(null,"uniform1iv",ch,1,Ns),35667:Ir.bind(null,"uniform2iv",ch,2,Ns),35668:Ir.bind(null,"uniform3iv",ch,3,Ns),35669:Ir.bind(null,"uniform4iv",ch,4,Ns),35670:Ir.bind(null,"uniform1iv",ch,1,Ns),35671:Ir.bind(null,"uniform2iv",ch,2,Ns),35672:Ir.bind(null,"uniform3iv",ch,3,Ns),35673:Ir.bind(null,"uniform4iv",ch,4,Ns),35674:Ir.bind(null,"uniformMatrix2fv",Ga,4,Kd),35675:Ir.bind(null,"uniformMatrix3fv",Ga,9,Kd),35676:Ir.bind(null,"uniformMatrix4fv",Ga,16,Kd),35678:_s,35680:_s,5125:Ir.bind(null,"uniform1uiv",AE,1,Ns),36294:Ir.bind(null,"uniform2uiv",AE,2,Ns),36295:Ir.bind(null,"uniform3uiv",AE,3,Ns),36296:Ir.bind(null,"uniform4uiv",AE,4,Ns),35685:Ir.bind(null,"uniformMatrix2x3fv",Ga,6,Kd),35686:Ir.bind(null,"uniformMatrix2x4fv",Ga,8,Kd),35687:Ir.bind(null,"uniformMatrix3x2fv",Ga,6,Kd),35688:Ir.bind(null,"uniformMatrix3x4fv",Ga,12,Kd),35689:Ir.bind(null,"uniformMatrix4x2fv",Ga,8,Kd),35690:Ir.bind(null,"uniformMatrix4x3fv",Ga,12,Kd),35678:_s,35680:_s,35679:_s,35682:_s,36289:_s,36292:_s,36293:_s,36298:_s,36299:_s,36300:_s,36303:_s,36306:_s,36307:_s,36308:_s,36311:_s},ade={},cde={},lde={},V8=[0];function B2(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(V8[0]=n,n=V8);const r=n.length;if(r%e&&fn.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let o=i[r];o||(o=new t(r),i[r]=o);for(let s=0;s<r;s++)o[s]=n[s];return o}function Ga(n,e){return B2(n,e,Float32Array,ade)}function ch(n,e){return B2(n,e,Int32Array,cde)}function AE(n,e){return B2(n,e,Uint32Array,lde)}function z8(n,e,t){const i=sde[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function dde(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function hde(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function pde(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Gf||n instanceof bg)||n instanceof So&&!!n.texture}function fde(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,o=t.length;r<o;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function _s(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Ir(n,e,t,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,t),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Zt(o===d,"Uniform length cannot change.");for(let f=0;f<d;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(s,n,a,l),r.set(l)),h}}function Ns(n,e,t,i){n[e](t,i)}function Kd(n,e,t,i){n[e](t,!1,i)}function SE(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function G8(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const o=n[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();t+=W8("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function W8(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class b0 extends $d{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Zt(!1),"unknown"}}constructor(e,t){dE(e),Zt("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:SE(t.source,null)||t.id||ya("unnamed ".concat(b0.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=SE(t,null);i&&(this.id=ya(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(b0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return SE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function H8(n,e,t,i){const r=n.split(/\r?\n/),o={},s={},a=i||SE(e)||"(unnamed)",c="".concat(function _de(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const f=h.split(":"),m=f[0],b=parseInt(f[2],10);if(isNaN(b))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==m?o[b]=h:s[b]=h}const l=function bde(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return W8(a,r-a.length)+t+o})}(e);return{shaderName:c,errors:G8(o,l),warnings:G8(s,l)}}(i,this.source,this.shaderType,this.id);throw fn.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),fn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class j2 extends b0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class U2 extends b0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const vde=5120,wde=5121,xde=5122,Ede=5123,No=5126,y0=5124,v0=5125,V2={[No]:[No,1,"float"],35664:[No,2,"vec2"],35665:[No,3,"vec3"],35666:[No,4,"vec4"],[y0]:[y0,1,"int"],35667:[y0,2,"ivec2"],35668:[y0,3,"ivec3"],35669:[y0,4,"ivec4"],[v0]:[v0,1,"uint"],36294:[v0,2,"uvec2"],36295:[v0,3,"uvec3"],36296:[v0,4,"uvec4"],35670:[No,1,"bool"],35671:[No,2,"bvec2"],35672:[No,3,"bvec3"],35673:[No,4,"bvec4"],35674:[No,8,"mat2"],35685:[No,8,"mat2x3"],35686:[No,8,"mat2x4"],35675:[No,12,"mat3"],35687:[No,12,"mat3x2"],35688:[No,12,"mat3x4"],35676:[No,16,"mat4"],35689:[No,16,"mat4x2"],35690:[No,16,"mat4x3"]};function J8(n){const e=V2[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function Z8(n,e){switch(n){case vde:case wde:case xde:case Ede:n=No}for(const t in V2){const[i,r,o]=V2[t];if(i===n&&r===e)return{glType:t,name:o}}return null}class Yde{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!pi(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,t,i,r){const{type:o,components:s}=J8(i),a={type:o,size:r*s};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new va(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:o,components:s}=J8(i),c={location:e,name:t,accessor:new va({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Xde=35981,Kde=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class ez extends $d{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",Kde),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:o,bufferMode:s=Xde}=e;return this.hash=t||"",this.vs="string"==typeof i?new j2(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new U2(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Zt(this.vs instanceof j2),Zt(this.fs instanceof U2),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Rs(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Yde(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:f=null,transformFeedback:m,framebuffer:b,parameters:x={},uniforms:S,samplers:z}=e;if((S||z)&&(fn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(S||{})),fn.priority>=t){const W=b?b.id:"default",ue="mode=".concat(ah(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(ah(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(W);fn.log(t,ue)()}return Zt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(f.bindForDraw(r,d,()=>{if(void 0!==b&&(x=Object.assign({},x,{framebuffer:b})),m){const W=function q8(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Zt(!1),0}}(i);m.begin(W)}this._bindTextures(),bc(this.gl,x,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&pi(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fn.priority>=2&&function ude(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!hde(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let o=i,s=!1;if(o instanceof So&&(o=o.texture),o instanceof Gf)if(s=this.uniforms[t]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[t]=a}else o=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(o)||s)&&fde(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new j2({handle:r});break;case 35632:i.fs=new U2({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=ya(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),fn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),fn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||fn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=dde(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=z8(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=z8(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class w0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new w0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(t),h=this._getHash(i),f=l.map(ue=>this._getHash(ue.name)).sort(),m=s.map(ue=>this._getHash(ue)),b=Object.keys(r).sort(),x=Object.keys(o).sort(),S=[],z=[];for(const ue of b)S.push(this._getHash(ue)),S.push(this._getHash(r[ue]));for(const ue of x)z.push(this._getHash(ue)),z.push(this._getHash(o[ue]));const W="".concat(d,"/").concat(h,"D").concat(S.join("/"),"M").concat(f.join("/"),"I").concat(z.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[W]){const ue=function Qle(n,e){const{vs:t,fs:i}=e,r=kle(e.modules||[]);return{gl:n,vs:U8(n,Object.assign({},e,{source:t,type:_0,modules:r})),fs:U8(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:ede(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[W]=new ez(this.gl,{hash:W,vs:ue.vs,fs:ue.fs,varyings:s,bufferMode:a}),this._getUniforms[W]=ue.getUniforms||(se=>{}),this._useCounts[W]=0}return this._useCounts[W]++,this._programCache[W]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;t[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}let ME=null;const TE=globalThis;function tz(n){if(!n&&!Bl())return"Node";if(mV(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":TE.chrome?"Chrome":TE.safari?"Safari":TE.mozInnerScreenX?"Firefox":"Unknown"}class Wa extends $d{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||pi(e)||"Chrome"===tz()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Wa(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Wa.MAX_ATTRIBUTES=Wa.MAX_ATTRIBUTES||e.getParameter(34921),Wa.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Wa._setConstantFloatArray(e,t,i);break;case Int32Array:Wa._setConstantIntArray(e,t,i);break;case Uint32Array:Wa._setConstantUintArray(e,t,i);break;default:Zt(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Wa.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Zt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(Zt(pi(h)),f.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,d||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Wa.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new or(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function Jde(n,e){const t=function qde(n){return(!ME||ME.byteLength<n)&&(ME=new ArrayBuffer(n)),ME}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,o);(function Zde(n){let{target:e,source:t,start:i=0,count:r=1}=n;const o=t.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=t[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:Zt(!1)}}static _setConstantIntArray(e,t,i){switch(Zt(pi(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:Zt(!1)}}static _setConstantUintArray(e,t,i){switch(Zt(pi(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:Zt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return Zt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const tue=/^(.+)__LOCATION_([0-9]+)$/,nue=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class iue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Wa(e),zV(this,"VertexArray","v6.0",nue),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,o)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new or(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof or&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof or&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=t,fn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=va.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:f}=d;return Zt(Number.isFinite(h)&&Number.isFinite(f)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=tue.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof or)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof or)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof or))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,t){if(Wa.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Wa.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof or){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function x0(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function rue(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let s=0;s<n.length&&s<t;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=x0(n[s],e);const o=n.length>t?"...":"]";return"".concat(r).concat(o)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function nz(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(t&&(o=t.type,s=t.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof or){const f=e,{data:m,changed:b}=f.getDebugData();let x;return d=b?"*":"",h=m,c=f.byteLength,a=c/m.BYTES_PER_ELEMENT/s,t?x="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(ah(r,o),")"):(l=!0,x="".concat(c," bytes")),{[i]:"".concat(d).concat(x0(h,{size:s,isInteger:l})),"Format ":x}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(x0(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function sue(n,e){const{type:t,size:i}=e,r=Z8(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function iz(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;Zt(t);const s=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&z2({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&z2({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||z2({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const f={};if(!r)for(const m in i){const b=i[m];c[m]||(h++,f[m]={Type:"NOT USED: ".concat(b),[e]:x0(b)})}return{table:c,count:d,unusedTable:f,unusedCount:h}}function z2(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:o}=n;const s=i[r],a=function aue(n){return null!=n}(s);return!(o&&a||(e[r]={[t]:a?x0(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function rz(n){const{type:e,size:t}=n.accessor,i=Z8(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const lue={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function uue(n,e){const{attributeMap:t=lue}=e||{};return t&&t[n]||n}function hue(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Zt(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const oz=()=>{},mue={};class Sg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=ya("model")}=t;Zt(lE(e)),this.id=i,this.gl=e,this.id=t.id||ya("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||w0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Zt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Zt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Zt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function due(n,e,t){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=uue(o,t);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new or(n,c),l],hue(o,l)}}if(r){const o=r.value||r;Zt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new or(n,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(gg(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return m2(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(t),this.setUniforms(r),fn.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:f=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:b=d.isInstanced}=this.props;b&&!this.isInstanced&&fn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:x,instanceCount:S}=this,{onBeforeRender:z=oz,onAfterRender:W=oz}=this.props;z(),this.program.setUniforms(this.uniforms);const ue=this.program.draw(Object.assign(mue,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:f,isInstanced:x,instanceCount:S,offset:h?m:0}));return W(),fn.priority>=2&&this._logDrawCallEnd(l,c,i),ue}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),t&&(o=Object.assign({},o,{35977:t})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Zt(t instanceof ez,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new iue(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof or&&t.delete()}}_setAnimationProps(e){this.animated&&Zt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(gg(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new M8(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),fn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:fn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const o=function oue(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=nz(e,e.elements,null,t));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(sue(s.name,c))),i[a]=nz(e,r[o],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=iz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=iz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&fn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&fn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function cue(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=rz(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=rz(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);fn.table(e,o)(),fn.table(e,s)(),fn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),fn.groupEnd(2)()}}class H2{static isSupported(e){return pi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();Zt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new Sg(t,Object.assign({},e,{fs:e.fs||C8({version:T8(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function gue(n){return!(gg(n.feedbackBuffers)&&gg(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new ule(e,t)),function _ue(n){return!(gg(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new Sle(e,t)),Zt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}class E0{constructor(e){Se(this,"_inProgress",void 0),Se(this,"_handle",void 0),Se(this,"_timeline",void 0),Se(this,"time",void 0),Se(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Sue={interpolation:class bue{constructor({gl:e,attribute:t,timeline:i}){Se(this,"gl",void 0),Se(this,"type","interpolation"),Se(this,"attributeInTransition",void 0),Se(this,"settings",void 0),Se(this,"attribute",void 0),Se(this,"transition",void 0),Se(this,"currentStartIndices",void 0),Se(this,"currentLength",void 0),Se(this,"transform",void 0),Se(this,"buffers",void 0),this.gl=e,this.transition=new E0(i),this.attribute=t,this.attributeInTransition=new C2(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function vue(n,e){const t=w8(e.size);return new H2(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new or(e,r),new or(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;x8(r);const s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)E8({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=S2(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:v8(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let o=r/t;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class wue{constructor({gl:e,attribute:t,timeline:i}){Se(this,"gl",void 0),Se(this,"type","spring"),Se(this,"attributeInTransition",void 0),Se(this,"settings",void 0),Se(this,"attribute",void 0),Se(this,"transition",void 0),Se(this,"currentStartIndices",void 0),Se(this,"currentLength",void 0),Se(this,"texture",void 0),Se(this,"framebuffer",void 0),Se(this,"transform",void 0),Se(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new E0(i),this.attribute=t,this.attributeInTransition=new C2(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function Eue(n){return new ms(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function Aue(n,e){return new So(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function xue(n,e,t){const i=w8(e.size);return new H2(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new or(e,r),new or(e,r),new or(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:o}=this,s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)E8({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=S2(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:v8(0,o)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),x8(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),uE(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Cue{constructor(e,{id:t,timeline:i}){Se(this,"id",void 0),Se(this,"isSupported",void 0),Se(this,"gl",void 0),Se(this,"timeline",void 0),Se(this,"transitions",void 0),Se(this,"needsRedraw",void 0),Se(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=H2.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(t);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void xi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=Sue[i.type];s?this.transitions[e]=new s({attribute:t,timeline:this.timeline,gl:this.gl}):(xi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const sz="attributeManager.invalidate";class Rue{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){Se(this,"id",void 0),Se(this,"gl",void 0),Se(this,"attributes",void 0),Se(this,"updateTriggers",void 0),Se(this,"needsRedraw",void 0),Se(this,"userData",void 0),Se(this,"stats",void 0),Se(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new Cue(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);Ps(sz,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Ps(sz,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;Ps("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=t,o[l]&&xi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:t,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&Ps("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in t){const s=t[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new C2(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,t)}),o}_updateAttribute(e){const{attribute:t,numInstances:i}=e;Ps("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&Ps("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,Ps("attribute.updateEnd",t,i)))}}function cz(n,e,t,i,r){const o=e-n;return(t-e)*r+-o*i+o+e}function lz(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const Lue={interpolation:class Oue extends E0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=hE(t,i,s)}},spring:class Nue extends E0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function Pue(n,e,t,i,r){if(Array.isArray(t)){const o=[];for(let s=0;s<t.length;s++)o[s]=cz(n[s],e[s],t[s],i,r);return o}return cz(n,e,t,i,r)}(o,s,t,i,r);const c=lz(a,t),l=lz(a,s);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=s,this._currValue=a}}};class Fue{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=y8(r)))return;const s=Lue[r.type];if(!s)return void xi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:t,toValue:i}),o.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const IE=Symbol.for("component"),Mg=Symbol.for("asyncPropDefaults"),Yf=Symbol.for("asyncPropOriginal"),lh=Symbol.for("asyncPropResolved");function Uue(n,e){if(!n.transitions)return!1;const t={},i=W2(n);let r=!1;for(const o in n.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&G2(n[o],e[o],s)&&(t[o]=!0,r=!0)}return!!r&&t}function dz({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(n))if(!(o in t)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=G2(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in t)){if(!(o in n))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(n,o)){const s=G2(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function G2(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Hue(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function uz(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},dz({oldProps:r,newProps:i,triggerName:t})}function W2(n){const e=n[IE],t=e&&e.constructor;return t?t._propTypes:{}}function Kue(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function DE(n){let t,e={};return i=>{for(const r in i)if(!Kue(i[r],e[r])){t=n(i),e=i;break}return t}}function que(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function $2(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],f=e[10],m=e[11],b=e[12],x=e[13],S=e[14],z=e[15],W=t*a-i*s,ue=t*c-r*s,se=t*l-o*s,De=i*c-r*a,Ne=i*l-o*a,ot=r*l-o*c,ut=d*x-h*b,Ke=d*S-f*b,ht=d*z-m*b,yt=h*S-f*x,Tt=h*z-m*x,ft=f*z-m*S,mt=W*ft-ue*Tt+se*yt+De*ht-Ne*Ke+ot*ut;return mt?(n[0]=(a*ft-c*Tt+l*yt)*(mt=1/mt),n[1]=(r*Tt-i*ft-o*yt)*mt,n[2]=(x*ot-S*Ne+z*De)*mt,n[3]=(f*Ne-h*ot-m*De)*mt,n[4]=(c*ht-s*ft-l*Ke)*mt,n[5]=(t*ft-r*ht+o*Ke)*mt,n[6]=(S*se-b*ot-z*ue)*mt,n[7]=(d*ot-f*se+m*ue)*mt,n[8]=(s*Tt-a*ht+l*ut)*mt,n[9]=(i*ht-t*Tt-o*ut)*mt,n[10]=(b*Ne-x*se+z*W)*mt,n[11]=(h*se-d*Ne-m*W)*mt,n[12]=(a*Ke-s*yt-c*ut)*mt,n[13]=(t*yt-i*Ke+r*ut)*mt,n[14]=(x*ue-b*De-S*W)*mt,n[15]=(d*De-h*ue+f*W)*mt,n):null}function Xf(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=e[9],m=e[10],b=e[11],x=e[12],S=e[13],z=e[14],W=e[15],ue=t[0],se=t[1],De=t[2],Ne=t[3];return n[0]=ue*i+se*a+De*h+Ne*x,n[1]=ue*r+se*c+De*f+Ne*S,n[2]=ue*o+se*l+De*m+Ne*z,n[3]=ue*s+se*d+De*b+Ne*W,n[4]=(ue=t[4])*i+(se=t[5])*a+(De=t[6])*h+(Ne=t[7])*x,n[5]=ue*r+se*c+De*f+Ne*S,n[6]=ue*o+se*l+De*m+Ne*z,n[7]=ue*s+se*d+De*b+Ne*W,n[8]=(ue=t[8])*i+(se=t[9])*a+(De=t[10])*h+(Ne=t[11])*x,n[9]=ue*r+se*c+De*f+Ne*S,n[10]=ue*o+se*l+De*m+Ne*z,n[11]=ue*s+se*d+De*b+Ne*W,n[12]=(ue=t[12])*i+(se=t[13])*a+(De=t[14])*h+(Ne=t[15])*x,n[13]=ue*r+se*c+De*f+Ne*S,n[14]=ue*o+se*l+De*m+Ne*z,n[15]=ue*s+se*d+De*b+Ne*W,n}function kE(n,e,t){var s,a,c,l,d,h,f,m,b,x,S,z,i=t[0],r=t[1],o=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*o+e[12],n[13]=e[1]*i+e[5]*r+e[9]*o+e[13],n[14]=e[2]*i+e[6]*r+e[10]*o+e[14],n[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],f=e[6],m=e[7],b=e[8],x=e[9],S=e[10],z=e[11],n[0]=s=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=d,n[5]=h,n[6]=f,n[7]=m,n[8]=b,n[9]=x,n[10]=S,n[11]=z,n[12]=s*i+d*r+b*o+e[12],n[13]=a*i+h*r+x*o+e[13],n[14]=c*i+f*r+S*o+e[14],n[15]=l*i+m*r+z*o+e[15]),n}function Y2(n,e,t){var i=t[0],r=t[1],o=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,n[11]=e[11]*o,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function hz(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=o*r+l*i,n[5]=s*r+d*i,n[6]=a*r+h*i,n[7]=c*r+f*i,n[8]=l*r-o*i,n[9]=d*r-s*i,n[10]=h*r-a*i,n[11]=f*r-c*i,n}function fz(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r+l*i,n[1]=s*r+d*i,n[2]=a*r+h*i,n[3]=c*r+f*i,n[4]=l*r-o*i,n[5]=d*r-s*i,n[6]=h*r-a*i,n[7]=f*r-c*i,n}function pz(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function A0(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*o+t[12]*s,n[1]=t[1]*i+t[5]*r+t[9]*o+t[13]*s,n[2]=t[2]*i+t[6]*r+t[10]*o+t[14]*s,n[3]=t[3]*i+t[7]*r+t[11]*o+t[15]*s,n}!function uhe(){var n=new wa(4);wa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const mz=[0,0,0,0],She=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],gz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Che=[0,0,0],_z=[0,0,0],Mhe=DE(function Dhe({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function The(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:o,viewProjectionMatrix:s}=n,a=mz,c=mz,l=n.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:f}=bz(n,e,t);return f&&(c=n.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=A0([],c,s),o=i||o,s=Xf([],r,o),s=Xf([],s,She)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(n,t,i),d=n.getDistanceScales(),h=[n.width*e,n.height*e],f=A0([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,m={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Che,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:gz,project_uCameraPosition:a};if(l){const b=n.getDistanceScales(l);switch(t){case ki.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=b.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=b.unitsPerMeter2;break;case ki.LNGLAT:case ki.LNGLAT_OFFSETS:n._pseudoMeters||(m.project_uCommonUnitsPerMeter=b.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=b.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=b.unitsPerDegree2;break;case ki.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,b.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,b.unitsPerMeter2[2]]}}return m});function bz(n,e,t=_z){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,o=!0;switch(r=e===ki.LNGLAT_OFFSETS||e===ki.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case jl.WEB_MERCATOR:(e===ki.LNGLAT||e===ki.CARTESIAN)&&(r=[0,0,0],o=!1);break;case jl.WEB_MERCATOR_AUTO_OFFSET:e===ki.LNGLAT?i=r:e===ki.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case jl.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case jl.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class khe extends fE{toString(){let e="[";if(fo.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=mi(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function RE(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function yz(n,e){return n[0]=-e[0],n[1]=-e[1],n}function vz(n,e,t,i){var r=e[0],o=e[1];return n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n}!function Rhe(){var n=new wa(2);wa!=Float32Array&&(n[0]=0,n[1]=0)}();var wz=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(wz||{});const Phe=45*Math.PI/180,Nhe=1,X2=.1,K2=500,Lhe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Kn extends khe{static get IDENTITY(){return function Bhe(){return PE||(PE=new Kn,Object.freeze(PE)),PE}()}static get ZERO(){return function Fhe(){return OE||(OE=new Kn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(OE)),OE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return wz}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,o,s,a,c,l,d,h,f,m,b,x,S){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=f,this[12]=m,this[13]=b,this[14]=x,this[15]=S,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l,d,h,f,m,b,x,S){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=t,this[5]=s,this[6]=d,this[7]=b,this[8]=i,this[9]=a,this[10]=h,this[11]=x,this[12]=r,this[13]=c,this[14]=f,this[15]=S,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Lhe)}fromObject(e){return this.check()}fromQuaternion(e){return function rhe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,b=r*c,x=o*s,S=o*a,z=o*c;n[0]=1-h-b,n[1]=d+z,n[2]=f-S,n[3]=0,n[4]=d-z,n[5]=1-l-b,n[6]=m+x,n[7]=0,n[8]=f+S,n[9]=m-x,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:o,near:s=X2,far:a=K2}=e;return a===1/0?function jhe(n,e,t,i,r,o){const a=2*o/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),f=-2*o;n[0]=2*o/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=f,n[15]=0}(this,t,i,r,o,s):function ohe(n,e,t,i,r,o,s){var a=1/(t-e),c=1/(r-i),l=1/(o-s);n[0]=2*o*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*o*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(s+o)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=s*o*2*l,n[15]=0}(this,t,i,r,o,s,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function dhe(n,e,t,i){var r,o,s,a,c,l,d,h,f,m,b=e[0],x=e[1],S=e[2],z=i[0],W=i[1],ue=i[2],se=t[0],De=t[1],Ne=t[2];Math.abs(b-se)<Vl&&Math.abs(x-De)<Vl&&Math.abs(S-Ne)<Vl?function Jue(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(d=b-se,h=x-De,f=S-Ne,r=W*(f*=m=1/Math.hypot(d,h,f))-ue*(h*=m),o=ue*(d*=m)-z*f,s=z*h-W*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-f*o,c=f*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=d,n[3]=0,n[4]=o,n[5]=c,n[6]=h,n[7]=0,n[8]=s,n[9]=l,n[10]=f,n[11]=0,n[12]=-(r*b+o*x+s*S),n[13]=-(a*b+c*x+l*S),n[14]=-(d*b+h*x+f*S),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:o,near:s=X2,far:a=K2}=e;return function che(n,e,t,i,r,o,s){var a=1/(e-t),c=1/(i-r),l=1/(o-s);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(s+o)*l,n[15]=1}(this,t,i,r,o,s,a),this.check()}orthographic(e){const{fovy:t=Phe,aspect:i=Nhe,focalDistance:r=1,near:o=X2,far:s=K2}=e;xz(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return xz(t),function she(n,e,t,i,r){var s,o=1/Math.tan(e/2);n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(s=1/(i-r)),n[14]=2*r*i*s):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,o),this.check()}determinant(){return function Que(n){var e=n[0],t=n[1],i=n[2],r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8],d=n[9],h=n[10],f=n[11],m=n[12],b=n[13],x=n[14],S=n[15];return(e*s-t*o)*(h*S-f*x)-(e*a-i*o)*(d*S-f*b)+(e*c-r*o)*(d*x-h*b)+(t*a-i*s)*(l*S-f*m)-(t*c-r*s)*(l*x-h*m)+(i*c-r*a)*(l*b-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function Zue(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=o,n[11]=e[14],n[12]=r,n[13]=s,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return $2(this,this),this.check()}multiplyLeft(e){return Xf(this,e,this),this.check()}multiplyRight(e){return Xf(this,this,e),this.check()}rotateX(e){return hz(this,this,e),this.check()}rotateY(e){return function the(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r-l*i,n[1]=s*r-d*i,n[2]=a*r-h*i,n[3]=c*r-f*i,n[8]=o*i+l*r,n[9]=s*i+d*r,n[10]=a*i+h*r,n[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return fz(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function ehe(n,e,t,i){var c,l,d,h,f,m,b,x,S,z,W,ue,se,De,Ne,ot,ut,Ke,ht,yt,Tt,ft,mt,Lt,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<Vl||(r*=a=1/a,o*=a,s*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],m=e[2],b=e[3],S=e[5],z=e[6],W=e[7],se=e[9],De=e[10],Ne=e[11],ht=r*o*(d=1-l)-s*c,yt=o*o*d+l,Tt=s*o*d+r*c,ft=r*s*d+o*c,mt=o*s*d-r*c,Lt=s*s*d+l,n[0]=(h=e[0])*(ot=r*r*d+l)+(x=e[4])*(ut=o*r*d+s*c)+(ue=e[8])*(Ke=s*r*d-o*c),n[1]=f*ot+S*ut+se*Ke,n[2]=m*ot+z*ut+De*Ke,n[3]=b*ot+W*ut+Ne*Ke,n[4]=h*ht+x*yt+ue*Tt,n[5]=f*ht+S*yt+se*Tt,n[6]=m*ht+z*yt+De*Tt,n[7]=b*ht+W*yt+Ne*Tt,n[8]=h*ft+x*mt+ue*Lt,n[9]=f*ft+S*mt+se*Lt,n[10]=m*ft+z*mt+De*Lt,n[11]=b*ft+W*mt+Ne*Lt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Y2(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return kE(this,this,e),this.check()}transform(e,t){return 4===e.length?(pE(t=A0(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function Ohe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=v2(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return pE(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function Hce(n,e,t){const i=e[0],r=e[1],o=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/o,n[1]=(t[1]*i+t[5]*r)/o,n}(t||[-0,-0],e,this);break;case 3:i=h8(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return pE(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let OE,PE;function xz(n){if(n>2*Math.PI)throw Error("expected radians")}function Tg(n,e){const t=A0([],e,n);return pz(t,t,1/t[3]),t}function Ez(n,e){const t=n%e;return t<0?e+t:t}function q2(n,e,t){return n<e?e:n>t?t:n}const J2=Math.log2||function Vhe(n){return Math.log(n)*Math.LOG2E};function qd(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Kc=Math.PI,Az=Kc/4,yc=Kc/180,Z2=180/Kc,Ig=512,NE=4003e4,LE=85.051129,zhe=1.5;function FE(n){const[e,t]=n;return qd(Number.isFinite(e)),qd(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[Ig*(e*yc+Kc)/(2*Kc),Ig*(Kc+Math.log(Math.tan(Az+t*yc*.5)))/(2*Kc)]}function Dg(n){const[e,t]=n,i=e/Ig*(2*Kc)-Kc,r=2*(Math.atan(Math.exp(t/Ig*(2*Kc)-Kc))-Az);return[i*Z2,r*Z2]}function Q2(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;qd(Number.isFinite(e)&&Number.isFinite(t));const r=Ig,o=Math.cos(e*yc),s=r/360,a=s/o,c=r/NE/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=yc*Math.tan(e*yc)/o,f=r/NE*d,m=f/a*c;l.unitsPerDegree2=[0,s*d/2,f],l.unitsPerMeter2=[m,0,m]}return l}function Sz(n,e){const[t,i,r]=n,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=Q2({longitude:t,latitude:i,highPrecision:!0}),d=FE(n);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=Dg(d),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function BE(n){return 2*Math.atan(.5/n)*Z2}function ek(n){return.5/Math.tan(.5*n*yc)}function Mz(n,e){const[t,i,r=0]=n;return qd(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Tg(e,[t,i,r,1])}function S0(n,e,t=0){const[i,r,o]=n;if(qd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return Tg(e,[i,r,o,1]);const s=Tg(e,[i,r,0,1]),a=Tg(e,[i,r,1,1]),c=s[2],l=a[2];return vz([],s,a,c===l?0:((t||0)-c)/(l-c))}function Tz(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=n,[[a,c],[l,d]]=i,h=function $he(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(qd(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),f=FE([a,q2(d,-LE,LE)]),m=FE([l,q2(c,-LE,LE)]),b=[Math.max(Math.abs(m[0]-f[0]),r),Math.max(Math.abs(m[1]-f[1]),r)],x=[e-h.left-h.right-2*Math.abs(s[0]),t-h.top-h.bottom-2*Math.abs(s[1])];qd(x[0]>0&&x[1]>0);const S=x[0]/b[0],z=x[1]/b[1],De=Dg([(m[0]+f[0])/2+(h.right-h.left)/2/S,(m[1]+f[1])/2+(h.top-h.bottom)/2/z]),Ne=Math.min(o,J2(Math.abs(Math.min(S,z))));return qd(Number.isFinite(Ne)),{longitude:De[0],latitude:De[1],zoom:Ne}}const Iz=Math.PI/180;function Dz(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Tg(i,[e,0,1,1]),o=Tg(i,[e,n.height,1,1]),l=Dg(vz([],r,o,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(t),l}const qhe=Math.PI/180,Jhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Nz=[0,0,0],Zhe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class dh{constructor(e={}){Se(this,"id",void 0),Se(this,"x",void 0),Se(this,"y",void 0),Se(this,"width",void 0),Se(this,"height",void 0),Se(this,"padding",void 0),Se(this,"isGeospatial",void 0),Se(this,"zoom",void 0),Se(this,"focalDistance",void 0),Se(this,"position",void 0),Se(this,"modelMatrix",void 0),Se(this,"distanceScales",void 0),Se(this,"scale",void 0),Se(this,"center",void 0),Se(this,"cameraPosition",void 0),Se(this,"projectionMatrix",void 0),Se(this,"viewMatrix",void 0),Se(this,"viewMatrixUncentered",void 0),Se(this,"viewMatrixInverse",void 0),Se(this,"viewProjectionMatrix",void 0),Se(this,"pixelProjectionMatrix",void 0),Se(this,"pixelUnprojectionMatrix",void 0),Se(this,"resolution",void 0),Se(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Zhe,this.focalDistance=e.focalDistance||1,this.position=e.position||Nz,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?jl.WEB_MERCATOR:jl.WEB_MERCATOR_AUTO_OFFSET:jl.IDENTITY}equals(e){return e instanceof dh&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&yg(e.projectionMatrix,this.projectionMatrix)&&yg(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=Mz(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=t?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,o,s]=e,l=S0([r,t?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,f]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,f]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=FE(e);return t[1]=$r(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Dg(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),o=this.unproject([0,this.height],t),s=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?Q2({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Kce(n){return{left:vg(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:vg(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:vg(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:vg(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:vg(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:vg(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Ghe(n){const{latitude:e}=n;qd(Number.isFinite(e));const t=Math.cos(e*yc);return function Hhe(n){return J2(n)}(NE*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Q2({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=Nz;if(o&&(a=s?new Kn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new Os(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=Jhe,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Kn).multiplyRight(t).translate(new Os(this.center).negate()),this.projectionMatrix=i||function Qhe({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=n/e,l=t?(new Kn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new Kn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:f=0,bottom:m=0}=o,b=$r((d+n-h)/2,0,n)-n/2,x=$r((f+e-m)/2,0,e)-e/2;l[8]-=2*b/n,l[9]+=2*x/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*qhe,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Xf(h,h,this.projectionMatrix),Xf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=$2([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Xce(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Y2(f,f,[this.width/2,-this.height/2,1]),kE(f,f,[1,-1,0]),Xf(m,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=$2([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||xi.warn("Pixel project matrix not invertible")()}}Se(dh,"displayName","Viewport");const nfe=Math.PI/180;function Lz(n){return 512/4003e4/Math.cos(n*nfe)}class uh extends dh{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:m=!1}=e;let{width:b,height:x,altitude:S=1.5}=e;const z=Math.pow(2,r);b=b||1,x=x||1;let W,ue=null;d?(S=d[5]/2,W=BE(S)):(e.fovy?(W=e.fovy,S=ek(W)):W=BE(S),ue=function Cz(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:d=BE(zhe)}=n;void 0!==i&&(d=BE(i));const h=d*yc,f=r*yc,m=ek(d);let b=m;s&&(b+=s[2]*a/Math.cos(f)/t);const x=h*(.5+(o?o[1]:0)/t),S=Math.sin(x)*b/Math.sin(q2(Math.PI/2-f-x,.01,Math.PI-.01)),z=Math.sin(f)*S+b;return{fov:h,aspect:e/t,focalDistance:m,near:c,far:Math.min(z*l,10*b)}}({width:b,height:x,pitch:o,fovy:W,nearZMultiplier:a,farZMultiplier:c}));let se=function Whe(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:o,center:s}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];kE(a,a,[0,0,-r]),hz(a,a,-t*yc),fz(a,a,i*yc);const c=o/e;return Y2(a,a,[c,c,c]),s&&kE(a,a,function Pce(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),a}({height:x,pitch:o,bearing:s,scale:z,altitude:S});f&&(se=(new Kn).translate([512*f,0,0]).multiplyLeft(se)),super({...e,width:b,height:x,viewMatrix:se,longitude:i,latitude:t,zoom:r,...ue,fovy:W,focalDistance:S}),Se(this,"longitude",void 0),Se(this,"latitude",void 0),Se(this,"pitch",void 0),Se(this,"bearing",void 0),Se(this,"altitude",void 0),Se(this,"fovy",void 0),Se(this,"orthographic",void 0),Se(this,"_subViewports",void 0),Se(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=S,this.fovy=W,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const o=r?new uh({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*Lz(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/Lz(i)]}addMetersToLngLat(e,t){return Sz(e,t)}panByPosition(e,t){const i=S0(t,this.pixelUnprojectionMatrix),o=RE([],this.projectFlat(e),yz([],i)),s=RE([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const t=function Yhe(n,e=0){const{width:t,height:i,unproject:r}=n,o={targetZ:e},s=r([0,i],o),a=r([t,i],o);let c,l;return(n.fovy?.5*n.fovy*Iz:Math.atan(.5/n.altitude))>(90-n.pitch)*Iz-.01?(c=Dz(n,0,e),l=Dz(n,t,e)):(c=r([0,0],o),l=r([t,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=Tz({width:i,height:r,bounds:e,...t});return new uh({width:i,height:r,longitude:o,latitude:s,zoom:a})}}function nk(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof uh){const[r,o,s=0]=n,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function Fz(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=n;switch(t&&([s,a,c]=A0([],[s,a,c,1],t)),i){case ki.LNGLAT:return nk([s,a,c],e,o);case ki.LNGLAT_OFFSETS:return nk([s+r[0],a+r[1],c+(r[2]||0)],e,o);case ki.METER_OFFSETS:return nk(Sz(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}Se(uh,"displayName","WebMercatorViewport");const ofe={10241:9987,10240:9729,10242:33071,10243:33071},ik={};function kg(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&kg(i,r)))return!1}return!0}const cfe={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||M0(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>rk(n,e)},accessor:{validate(n,e){const t=jE(n);return"function"===t||t===jE(e.value)},equal:(n,e,t)=>"function"==typeof e||rk(n,e)},array:{validate:(n,e)=>e.optional&&!n||M0(n),equal:(n,e,t)=>t.compare?rk(n,e):n===e},object:{equal:(n,e,t)=>t.compare?kg(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function sfe(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof ms)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new ms(t,{...e,parameters:{...ofe,...i,...n.props.textureParameters}});return ik[r.id]=!0,r}(t,n),release:n=>{!function afe(n){!n||!(n instanceof ms)||ik[n.id]&&(n.delete(),delete ik[n.id])}(n)}}};function rk(n,e){if(n===e)return!0;if(!M0(n)||!M0(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function dfe(n,e){switch(jE(e)){case"object":return C0(n,e);case"array":return C0(n,{type:"array",value:e,compare:!1});case"boolean":return C0(n,{type:"boolean",value:e});case"number":return C0(n,{type:"number",value:e});case"function":return C0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function C0(n,e){return"type"in e?{name:n,...cfe[e.type],...e}:"value"in e?{name:n,type:jE(e.value),...e}:{name:n,type:"object",value:e}}function M0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function jE(n){return M0(n)?"array":null===n?"null":typeof n}function Bz(n){return UE(n,"_mergedDefaultProps")||(function hfe(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=Bz(t),o=function lfe(n){const e={},t={},i={};for(const[r,o]of Object.entries(n)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=dfe(r,o);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(UE(n,"defaultProps")||{}),s=function ffe(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function _fe(n){const e=UE(n,"layerName")||UE(n,"componentName");return e||xi.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(o.defaultProps,i,n),a={...t._propTypes,...o.propTypes};!function mfe(n,e){const t={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(t[s]=a,i[s]=gfe(s))}n[Mg]=t,n[Yf]={},Object.defineProperties(n,i)}(s,a);const c={...t._deprecatedProps,...o.deprecatedProps};(function pfe(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const o of e[t])jz(this,o)||(this[o]=i);xi.deprecated(r,e[t].join("/"))()}})})(s,c),n._mergedDefaultProps=s,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function gfe(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||_8(e)?this[Yf][n]=e:this[lh][n]=e},get(){if(this[lh]){if(n in this[lh])return this[lh][n]||this[Mg][n];if(n in this[Yf]){const e=this[IE]&&this[IE].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[Mg][n]}}return this[Mg][n]}}}function jz(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function UE(n,e){return jz(n,e)&&n[e]}let bfe=0;class ok{constructor(...e){Se(this,"id",void 0),Se(this,"props",void 0),Se(this,"count",void 0),this.props=function ufe(n,e){const t=Bz(n.constructor),i=Object.create(t);i[IE]=n,i[Yf]={},i[lh]={};for(let r=0;r<e.length;++r){const o=e[r];for(const s in o)i[s]=o[s]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=bfe++}clone(e){const{props:t}=this,i={};for(const r in t[Mg])r in t[lh]?i[r]=t[lh][r]:r in t[Yf]&&(i[r]=t[Yf][r]);return new this.constructor({...t,...i,...e})}}function sk(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new VE(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function VE(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(VE=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new VE(n)}Se(ok,"componentName","Component"),Se(ok,"defaultProps",{});const yfe=Object.freeze({});class vfe{constructor(e){Se(this,"component",void 0),Se(this,"onAsyncPropUpdated",void 0),Se(this,"asyncProps",void 0),Se(this,"oldProps",void 0),Se(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||yfe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[lh]||{},i=e[Yf]||e,r=e[Mg]||{};for(const o in t){const s=t[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),t[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(_8(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(o=>{o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,t){var i=this;return Ut(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var f,h=sk(t);c=!(f=yield h.next()).done;c=!1){const m=f.value;{const{dataTransform:b}=i.component.props;s=b?b(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class wfe extends vfe{constructor({attributeManager:e,layer:t}){super(t),Se(this,"attributeManager",void 0),Se(this,"needsRedraw",void 0),Se(this,"needsUpdate",void 0),Se(this,"subLayers",void 0),Se(this,"usesPickingColorCache",void 0),Se(this,"changeFlags",void 0),Se(this,"viewport",void 0),Se(this,"uniformTransitions",void 0),Se(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const qc=n=>"function"==typeof n,hh=n=>null!==n&&"object"==typeof n,Vz=n=>hh(n)&&n.constructor==={}.constructor,xfe=n=>n&&"function"==typeof n[Symbol.iterator],Efe=n=>n&&"function"==typeof n[Symbol.asyncIterator],Rg=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,Og=n=>typeof Blob<"u"&&n instanceof Blob,Afe=n=>n&&"object"==typeof n&&n.isBuffer,zz=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||hh(n)&&qc(n.tee)&&qc(n.cancel)&&qc(n.getReader))(n)||(n=>hh(n)&&qc(n.read)&&qc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function Hz(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function ak(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function ck(n){var e,t;let i;return Hz(n,"null loader"),Hz(ak(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let lk="";const dk={},Dfe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,kfe=/^([-\w.]+\/[-\w.+]+)/;function Rfe(n){const e=kfe.exec(n);return e?e[1]:n}function Gz(n){const e=Dfe.exec(n);return e?e[1]:""}const Ofe=/\?.*/;function zE(n){if(Rg(n)){const e=uk(n.url||"");return{url:e,type:Rfe(n.headers.get("content-type")||"")||Gz(e)}}return Og(n)?{url:uk(n.name||""),type:n.type||""}:"string"==typeof n?{url:uk(n),type:Gz(n)}:{url:"",type:""}}function uk(n){return n.replace(Ofe,"")}function Wz(n){return hk.apply(this,arguments)}function hk(){return hk=Ut(function*(n){if(Rg(n))return n;const e={},t=function Pfe(n){return Rg(n)?n.headers["content-length"]||-1:Og(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=zE(n);r&&(e["content-type"]=r);const o=yield function Ffe(n){return mk.apply(this,arguments)}(n);o&&(e["x-first-bytes"]=o),"string"==typeof n&&(n=(new TextEncoder).encode(n));const s=new Response(n,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),hk.apply(this,arguments)}function fk(){return fk=Ut(function*(n){if(!n.ok){const e=yield function Lfe(n){return pk.apply(this,arguments)}(n);throw new Error(e)}}),fk.apply(this,arguments)}function pk(){return pk=Ut(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),pk.apply(this,arguments)}function mk(){return mk=Ut(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function Bfe(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),mk.apply(this,arguments)}function $z(n,e){return gk.apply(this,arguments)}function gk(){return gk=Ut(function*(n,e){if("string"==typeof n){n=function Ife(n){for(const e in dk)n.startsWith(e)&&(n=n.replace(e,dk[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(lk).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield Wz(n)}),gk.apply(this,arguments)}const Yz=new s0({id:"loaders.gl"});class jfe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Xz=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),Kz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),qz=(Kz&&parseFloat(Kz[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class Ufe{constructor(){Se(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Xz,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Vfe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function _k(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const bk=()=>{const n=_k();return n.globalOptions=n.globalOptions||{...qz},n.globalOptions};function zfe(n,e,t,i){return t=t||[],function Hfe(n,e){Zz(n,null,qz,Vfe,e);for(const t of e)Zz(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function Qz(n,e,t){const r={...n.options||{}};return function Wfe(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new jfe),e6(r,bk()),e6(r,e),r}(e,n,i)}function Jz(n,e){const t=bk(),i=n||t;return"function"==typeof i.fetch?i.fetch:hh(i.fetch)?r=>$z(r,i):null!=e&&e.fetch?e?.fetch:$z}function Zz(n,e,t,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in n){const c=!e&&hh(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)Yz.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Gfe(a,r);Yz.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function Gfe(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(n===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(t.startsWith(s)||s.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function e6(n,e){for(const t in e)t in e&&(n[t]=Vz(e[t])&&Vz(n[t])?{...n[t],...e[t]}:e[t])}function Hl(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const $fe="3.2.13",Gl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Xfe=Gl.global||Gl.self||Gl.window||{},fh="object"!=typeof process||"[object process]"!==String(process)||process.browser,yk="function"==typeof importScripts,Kfe=typeof window<"u"&&typeof window.orientation<"u",t6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);t6&&parseFloat(t6[1]);class vk{}const wk=new Map;function n6(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function i6(n,e=!0,t){const i=t||new Set;if(n)if(r6(n))i.add(n);else if(r6(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)i6(n[r],e,i);return void 0===t?Array.from(i):[]}function r6(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const xk=()=>{};class Ek{static isSupported(){return typeof Worker<"u"&&fh||typeof vk<"u"&&!fh}constructor(e){Se(this,"name",void 0),Se(this,"source",void 0),Se(this,"url",void 0),Se(this,"terminated",!1),Se(this,"worker",void 0),Se(this,"onMessage",void 0),Se(this,"onError",void 0),Se(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Hl(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=xk,this.onError=o=>console.log(o),this.worker=fh?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=xk,this.onError=xk,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||i6(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function qfe(n){Hl(n.source&&!n.url||!n.source&&n.url);let e=wk.get(n.source||n.url);return e||(n.url&&(e=function Jfe(n){if(!n.startsWith("http"))return n;const e=function Zfe(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return n6(e)}(n.url),wk.set(n.url,e)),n.source&&(e=n6(n.source),wk.set(n.source,e))),Hl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new vk(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new vk(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class epe{constructor(e,t){Se(this,"name",void 0),Se(this,"workerThread",void 0),Se(this,"isRunning",!0),Se(this,"result",void 0),Se(this,"_resolve",()=>{}),Se(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Hl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Hl(this.isRunning),this.isRunning=!1,this._reject(e)}}class tpe{static isSupported(){return Ek.isSupported()}constructor(e){Se(this,"name","unnamed"),Se(this,"source",void 0),Se(this,"url",void 0),Se(this,"maxConcurrency",1),Se(this,"maxMobileConcurrency",1),Se(this,"onDebug",()=>{}),Se(this,"reuseWorkers",!0),Se(this,"props",{}),Se(this,"jobQueue",[]),Se(this,"idleQueue",[]),Se(this,"count",0),Se(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,o,s)=>r.done(s)),i=((r,o)=>r.error(o))){var r=this;return Ut(function*(){const o=new Promise(s=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:s}),r));return r._startQueuedJob(),yield o})()}_startQueuedJob(){var e=this;return Ut(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new epe(i.name,t);t.onMessage=o=>i.onMessage(r,o.type,o.payload),t.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Ek({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Kfe?this.maxMobileConcurrency:this.maxConcurrency}}const npe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Jd{static isSupported(){return Ek.isSupported()}static getWorkerFarm(e={}){return Jd._workerFarm=Jd._workerFarm||new Jd({}),Jd._workerFarm.setProps(e),Jd._workerFarm}constructor(e){Se(this,"props",void 0),Se(this,"workerPools",new Map),this.props={...npe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let o=this.workerPools.get(t);return o||(o=new tpe({name:t,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Se(Jd,"_workerFarm",void 0);const ipe="latest";function Ak(){return Ak=Ut(function*(n,e,t,i,r){const o=n.id,s=function rpe(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let o=n.version;"latest"===o&&(o=ipe);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(s,"/dist/").concat(i)}return Hl(r),r}(n,t),c=Jd.getWorkerFarm(t).getWorkerPool({name:o,url:s});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",ape.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),Ak.apply(this,arguments)}function ape(n,e,t,i){return Sk.apply(this,arguments)}function Sk(){return Sk=Ut(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield n(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),Sk.apply(this,arguments)}function s6(n){return n&&"object"==typeof n&&n.isBuffer}function a6(n){if(s6(n))return function cpe(n){return s6(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function Mk(){return Mk=Ut(function*(n){const e=[];var r,t=!1,i=!1;try{for(var s,o=sk(n);t=!(s=yield o.next()).done;t=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function dpe(...n){const e=n.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),t=e.reduce((o,s)=>o+s.byteLength,0),i=new Uint8Array(t);let r=0;for(const o of e)i.set(o,r),r+=o.byteLength;return i.buffer}(...e)}),Mk.apply(this,arguments)}g(643);const hpe=262144,ppe=262144;function c6(n,e){this.v=n,this.k=e}function HE(n){return new c6(n,0)}function T0(n){var e,t;function i(o,s){try{var a=n[o](s),c=a.value,l=c instanceof c6;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=n[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(o,s))})},"function"!=typeof n.return&&(this.return=void 0)}function Ik(n){return function(){return new T0(n.apply(this,arguments))}}T0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},T0.prototype.next=function(n){return this._invoke("next",n)},T0.prototype.throw=function(n){return this._invoke("throw",n)},T0.prototype.return=function(n){return this._invoke("return",n)};const gpe=1048576;function Dk(){return Dk=Ik(function*(n,e){const t=e?.chunkSize||gpe;let i=0;for(;i<n.size;){const r=i+t,o=yield HE(n.slice(i,r).arrayBuffer());i=r,yield o}}),Dk.apply(this,arguments)}function l6(n,e){return Xz?function bpe(n,e){return kk.apply(this,arguments)}(n,e):function ype(n,e){return Rk.apply(this,arguments)}(n,e)}function kk(){return kk=Ik(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:o,value:s}=yield HE(r);if(o)return;yield a6(s)}}catch{t.releaseLock()}}),kk.apply(this,arguments)}function Rk(){return Rk=Ik(function*(n,e){var r,t=!1,i=!1;try{for(var s,o=sk(n);t=!(s=yield HE(o.next())).done;t=!1){const a=s.value;yield a6(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield HE(o.return()))}finally{if(i)throw r}}}),Rk.apply(this,arguments)}const Ok="Cannot convert supplied data type";function Pk(){return Pk=Ut(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function wpe(n,e,t){if(e.text&&"string"==typeof n)return n;if(Afe(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(Ok)}(n,e);if(Og(n)&&(n=yield Wz(n)),Rg(n)){const r=n;return yield function Nfe(n){return fk.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(zz(n)&&(n=function vpe(n,e){if("string"==typeof n)return function*fpe(n,e){const t=e?.chunkSize||hpe;let i=0;const r=new TextEncoder;for(;i<n.length;){const o=Math.min(n.length-i,t),s=n.slice(i,i+o);i+=o,yield r.encode(s)}}(n,e);if(n instanceof ArrayBuffer)return function*mpe(n,e={}){const{chunkSize:t=ppe}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),o=new ArrayBuffer(r),s=new Uint8Array(n,i,r);new Uint8Array(o).set(s),i+=r,yield o}}(n,e);if(Og(n))return function _pe(n,e){return Dk.apply(this,arguments)}(n,e);if(zz(n))return l6(n,e);if(Rg(n))return l6(n.body,e);throw new Error("makeIterator")}(n,t)),xfe(n)||Efe(n))return function upe(n){return Mk.apply(this,arguments)}(n);throw new Error(Ok)}),Pk.apply(this,arguments)}const Mpe=new s0({id:"loaders.gl"}),d6=()=>{const n=_k();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function u6(n){const e=d6();n=Array.isArray(n)?n:[n];for(const t of n){const i=ck(t);e.find(r=>i===r)||e.unshift(i)}}const Ipe=/\.([^.]+)$/;function Fk(){return Fk=Ut(function*(n,e=[],t,i){if(!f6(n))return null;let r=h6(n,e,{...t,nothrow:!0},i);if(r)return r;if(Og(n)&&(r=h6(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(p6(n));return r}),Fk.apply(this,arguments)}function h6(n,e=[],t,i){if(!f6(n))return null;if(e&&!Array.isArray(e))return ck(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function Tpe(){return d6()}()),function Rpe(n){for(const e of n)ck(e)}(r);const o=function kpe(n,e,t,i){const{url:r,type:o}=zE(n),s=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=Bk(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function Ope(n,e){const t=e&&Ipe.exec(e),i=t&&t[1];return i?function Ppe(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||Bk(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function Npe(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(Lpe(e,t))return t}else if(ArrayBuffer.isView(e)){if(m6(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&m6(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(g6(n)):""),a=a||Bk(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&Mpe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(o||null!=t&&t.nothrow))throw new Error(p6(n));return o}function f6(n){return!(n instanceof Response&&204===n.status)}function p6(n){const{url:e,type:t}=zE(n);let i="No valid loader found (";i+=e?"".concat(function Cpe(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?g6(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function Bk(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function Lpe(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function m6(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function Fpe(n,e,t,i){if(i instanceof ArrayBuffer)return function lpe(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===jk(n,e,i.length);default:return!1}}(n,e,t,r))}function g6(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?jk(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?jk(n,0,e):""}function jk(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function GE(n,e,t,i){return Uk.apply(this,arguments)}function Uk(){return Uk=Ut(function*(n,e,t,i){Hl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!ak(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=zE(n),s=function Spe(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function Dpe(n){return Fk.apply(this,arguments)}(n,s,t);return a?(i=function Ape(n,e,t=null){if(t)return t;const i={fetch:Jz(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:GE,loaders:s},t=zfe(t,a,s,r),i),yield function Bpe(n,e,t,i){return Vk.apply(this,arguments)}(a,n,t,i)):null}),Uk.apply(this,arguments)}function Vk(){return Vk=Ut(function*(n,e,t,i){if(function Yfe(n,e=$fe){Hl(n,"no worker provided")}(n),Rg(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function xpe(n,e,t){return Pk.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function ope(n,e){return!(!Jd.isSupported()||!(fh||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function spe(n,e,t,i,r){return Ak.apply(this,arguments)}(n,e,t,i,GE);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Hl(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),Vk.apply(this,arguments)}function I0(n,e,t,i){return zk.apply(this,arguments)}function zk(){return zk=Ut(function*(n,e,t,i){!Array.isArray(e)&&!ak(e)&&(t=e,e=void 0);const r=Jz(t);let o=n;return"string"==typeof n&&(o=yield r(n)),Og(n)&&(o=yield r(n)),yield GE(o,e,t)}),zk.apply(this,arguments)}const Gpe=Object.freeze([]),Wpe=DE(({oldViewport:n,viewport:e})=>n.equals(e));let Wl=new Uint8ClampedArray(0);const $pe={data:{type:"data",value:Gpe,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(n);return!c&&!r&&(s.add({resourceId:n,data:I0(n,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:n,onChange:l=>{var d;return null===(d=t.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):I0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ki.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Kf extends ok{constructor(...e){super(...e),Se(this,"internalState",null),Se(this,"lifecycle","Awaiting state"),Se(this,"context",void 0),Se(this,"state",void 0),Se(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){gs(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=Fz(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=Mz(i,t.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return gs(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return gs(this.internalState),function rfe(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function ife(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=n;return r===ki.DEFAULT&&(r=e.isGeospatial?ki.LNGLAT:ki.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:d}=bz(t,i,r),h=Fz(n,{viewport:t,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});d&&function Oce(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ki.DEFAULT||e===ki.LNGLAT||e===ki.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){gs(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function $ue(n){if(!function Xue(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function Yue(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=que(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(s!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,d=c||l;d&&(a&&d.constant&&(d.constant=!1,t.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,o,s;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!Wpe({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(Wl.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>16777215&&xi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Wl=p0.allocate(Wl,t,{size:3,copy:!0,maxCount:Math.max(t,16777215)});const r=Math.floor(Wl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),Wl[3*s+0]=o[0],Wl[3*s+1]=o[1],Wl[3*s+2]=o[2]}e.value=Wl.subarray(0,3*t)}_setModelAttributes(e,t){const o=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Wl.buffer&&(i.value=Wl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){gs(!this.internalState),gs(Number.isFinite(this.props.coordinateSystem)),Ps("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new wfe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(xi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Fue(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ps("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Ps("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Ps("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];Wd(o.gl,{polygonOffset:c}),bc(o.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=t[r];s&&Array.isArray(a)&&(t.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}t[r]||(t[r]=e[r],o=!0),o&&Ps("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function jue(n,e){const t=dz({newProps:n,oldProps:e,propTypes:W2(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Vue(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function zue(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&uz(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&uz(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Hue(n,e),transitionsChanged:Uue(n,e)}}(e,t);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,t[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function Bue(n){const e=W2(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Rue(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Se(Kf,"defaultProps",$pe),Se(Kf,"layerName","Layer");class Hk extends Kf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:b,modelMatrix:x,extensions:S,fetch:z,operation:W,_subLayerProps:ue}=this.props,se={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:b,modelMatrix:x,extensions:S,fetch:z,operation:W},De=ue&&e.id&&ue[e.id],Ne=De&&De.updateTriggers,ot=e.id||"sublayer";if(De){const ut=this.constructor._propTypes,Ke=e.type?e.type._propTypes:{};for(const ht in De){const yt=Ke[ht]||ut[ht];yt&&"accessor"===yt.type&&(De[ht]=this.getSubLayerAccessor(De[ht]))}}Object.assign(se,e,De),se.id="".concat(this.props.id,"-").concat(ot),se.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...Ne};for(const ut of S){const Ke=ut.getSubLayerProps.call(this,ut);Ke&&Object.assign(se,Ke,{updateTriggers:Object.assign(se.updateTriggers,Ke.updateTriggers)})}return se}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=E2(this.renderLayers(),Boolean),this.internalState.subLayers=i),Ps("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}Se(Hk,"layerName","CompositeLayer");const Xpe=/([0-9]+\.?[0-9]*)(%|px)/;function ph(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=Xpe.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function mh(n,e){return n.relative?Math.round(n.position*e):n.position}class Gk{constructor(e){Se(this,"id",void 0),Se(this,"viewportInstance",void 0),Se(this,"_x",void 0),Se(this,"_y",void 0),Se(this,"_width",void 0),Se(this,"_height",void 0),Se(this,"_padding",void 0),Se(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};gs(!c||c instanceof dh),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=ph(i),this._y=ph(r),this._width=ph(o),this._height=ph(s),this._padding=a&&{left:ph(a.left||0),right:ph(a.right||0),top:ph(a.top||0),bottom:ph(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&kg(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:mh(this._x,e),y:mh(this._y,t),width:mh(this._width,e),height:mh(this._height,t)};return this._padding&&(i.padding={left:mh(this._padding.left,e),top:mh(this._padding.top,t),right:mh(this._padding.right,e),bottom:mh(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Kpe=(new Kn).lookAt({eye:[0,0,1]});function qpe({width:n,height:e,near:t,far:i,padding:r}){let o=-n/2,s=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:f=0}=r,m=$r((l+n-d)/2,0,n)-n/2,b=$r((h+e-f)/2,0,e)-e/2;o-=m,s-=m,a+=b,c+=b}return(new Kn).ortho({left:o,right:s,bottom:a,top:c,near:t,far:i})}class Jpe extends dh{constructor(e){const{width:t,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,f=Math.min(d,h),m=Math.pow(2,f);let b;if(d!==h){const x=Math.pow(2,d),S=Math.pow(2,h);b={unitsPerMeter:[x/m,S/m,1],metersPerUnit:[m/x,m/S,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Kpe.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:qpe({width:t||1,height:i||1,padding:c,near:r,far:o}),zoom:f,distanceScales:b})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=S0(t,this.pixelUnprojectionMatrix),o=RE([],this.projectFlat(e),yz([],i)),s=RE([],this.center,o);return{target:this.unprojectFlat(s)}}}const b6=()=>{},Zpe=n=>n;class eme{constructor(e){Se(this,"getControllerState",void 0),Se(this,"props",void 0),Se(this,"propsInTransition",void 0),Se(this,"transition",void 0),Se(this,"onViewStateChange",void 0),Se(this,"onStateChange",void 0),Se(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=t,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new E0(e.timeline),this.onViewStateChange=e.onViewStateChange||b6,this.onStateChange=e.onStateChange||b6}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),o=t.transitionInterpolator,s=o.getDuration?o.getDuration(e,t):t.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:t.transitionEasing||Zpe,interpolator:o,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class tme{constructor(e){Se(this,"_propsToCompare",void 0),Se(this,"_propsToExtract",void 0),Se(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!yg(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const o of this._propsToExtract)(o in e||o in t)&&(i[o]=e[o],r[o]=t[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];gs(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const nme=["longitude","latitude","zoom","bearing","pitch"],ime=["longitude","latitude","zoom"];class WE extends tme{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:nme,required:ime},super(i.transitionProps),Se(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(t),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const o of this._propsToExtract)r[o]=hE(e[o]||0,t[o]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...t,...r});Object.assign(r,o.panByPosition(t.aroundPosition,hE(e.around,t.around,i)))}return r}}const gh={transitionDuration:0},$E=n=>1-(1-n)*(1-n),Pg_WHEEL=["wheel"],Pg_PAN=["panstart","panmove","panend"],Pg_PINCH=["pinchstart","pinchmove","pinchend"],Pg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Pg_DOUBLE_TAP=["doubletap"],Pg_KEYBOARD=["keydown"],qf={};class $k{constructor(e){Se(this,"props",void 0),Se(this,"state",{}),Se(this,"transitionManager",void 0),Se(this,"eventManager",void 0),Se(this,"onViewStateChange",void 0),Se(this,"onStateChange",void 0),Se(this,"makeViewport",void 0),Se(this,"_controllerState",void 0),Se(this,"_events",{}),Se(this,"_interactionState",{isDragging:!1}),Se(this,"_customEvents",[]),Se(this,"_eventStartBlocked",null),Se(this,"_panMove",!1),Se(this,"invertPan",!1),Se(this,"dragMode","rotate"),Se(this,"inertia",0),Se(this,"scrollZoom",!0),Se(this,"dragPan",!0),Se(this,"dragRotate",!0),Se(this,"doubleClickZoom",!0),Se(this,"touchZoom",!0),Se(this,"touchRotate",!1),Se(this,"keyboard",!0),this.transitionManager=new eme({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&t&&t.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Pg_WHEEL,d&&i),this.toggleEvents(Pg_PAN,d&&(r||o)),this.toggleEvents(Pg_PINCH,d&&(a||c)),this.toggleEvents(Pg_TRIPLE_PAN,d&&c),this.toggleEvents(Pg_DOUBLE_TAP,d&&s),this.toggleEvents(Pg_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,gh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,gh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:$E},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,gh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:$E},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:t,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,gh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,gh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:$E},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return qf._startPinchRotation=e.rotation,qf._lastPinchEvent=e,this.updateViewport(i,gh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:qf._startPinchRotation-i})}return this.updateViewport(t,gh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),qf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=qf;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*t/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:$E},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return qf._startPinchRotation=null,qf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new WE({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:gh}}class y6{constructor(e,t){Se(this,"_viewportProps",void 0),Se(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class v6 extends y6{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:m,startRotationX:b,startRotationOrbit:x,startZoomPosition:S,startZoom:z}=e;super({width:t,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:f,startRotatePos:m,startRotationX:b,startRotationOrbit:x,startZoomPosition:S,startZoom:z}),Se(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),$r(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[$r(r[0],i,t),$r(r[1],i,t)]:$r(r,i,t),e.rotationX=$r(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function Yce(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class ome extends $k{constructor(...e){super(...e),Se(this,"ControllerState",v6),Se(this,"transition",{transitionDuration:300,transitionInterpolator:new WE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class sme extends v6{constructor(e){super(e),Se(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(t)){let[s,a]=t;switch(this.zoomAxis){case"X":s=$r(s+o,r,i);break;case"Y":a=$r(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return $r(t+o,r,i)}}class ame extends $k{constructor(...e){super(...e),Se(this,"ControllerState",sme),Se(this,"transition",{transitionDuration:300,transitionInterpolator:new WE(["target","zoom"])}),Se(this,"dragMode","pan")}_onPanRotate(){return!1}}class Yk extends Gk{get ViewportType(){return Jpe}get ControllerType(){return ame}}Se(Yk,"displayName","OrthographicView");const Xk=Math.PI/180;function cme({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new Kn).lookAt({eye:a,up:s});c.rotateX(i*Xk),"Z"===t?c.rotateZ(r*Xk):c.rotateY(r*Xk);const l=Math.pow(2,o)/n;return c.scale(l),c}class lme extends dh{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:ek(r);super({...e,longitude:void 0,viewMatrix:cme({height:t||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),Se(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=t?r:this.height-r,[a,c,l]=S0([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class w6 extends Gk{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return lme}get ControllerType(){return ome}}Se(w6,"displayName","OrbitView");const dme=[255,255,255],ume=1;let hme=0;class x6{constructor(e={}){Se(this,"id",void 0),Se(this,"color",void 0),Se(this,"intensity",void 0),Se(this,"type","ambient");const{color:t=dme}=e,{intensity:i=ume}=e;this.id=e.id||"ambient-".concat(hme++),this.color=t,this.intensity=i}}const fme=[255,255,255],pme=1,mme=[0,0,-1];let gme=0;class E6{constructor(e={}){Se(this,"id",void 0),Se(this,"color",void 0),Se(this,"intensity",void 0),Se(this,"type","directional"),Se(this,"direction",void 0),Se(this,"shadow",void 0);const{color:t=fme}=e,{intensity:i=pme}=e,{direction:r=mme}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(gme++),this.color=t,this.intensity=i,this.type="directional",this.direction=new Os(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class _me{constructor(e,t={id:"pass"}){Se(this,"id",void 0),Se(this,"gl",void 0),Se(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class YE extends _me{constructor(...e){super(...e),Se(this,"_lastRenderIndex",-1)}render(e){return Wd(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function yme(n){Wd(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const f=o&&o[h.id];s(h);const m=this._getDrawLayerParams(h,e),b=h.subViewports||[h];for(const x of b){const S=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:x,view:f,pass:e.pass,layers:e.layers},m);d.push(S)}}return d}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:o,effects:s,moduleParameters:a}){const c=[],l=A6(this._lastRenderIndex+1),d={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:o},h={};for(let f=0;f<t.length;f++){const m=t[f],b=this._shouldDrawLayer(m,d,r,h),x={shouldDrawLayer:b};b&&(x.layerRenderIndex=l(m,b),x.moduleParameters=this._getModuleParameters(m,s,i,a),x.layerParameters=this.getLayerParameters(m,f,e)),c[f]=x}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function bme(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,o=e&&e.devicePixelRatio||mg(n);return[i.x*o,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;bc(e,{scissorTest:!0,scissor:l},()=>m2(e,h))}const d={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Wd(e,{viewport:l});for(let h=0;h<t.length;h++){const f=t[h],{shouldDrawLayer:m,layerRenderIndex:b,moduleParameters:x,layerParameters:S}=c[h];if(m&&f.props.pickable&&d.pickableCount++,f.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,b),x.viewport=s;try{f._drawLayer({moduleParameters:x,uniforms:{layerIndex:b},parameters:S})}catch(z){f.raiseError(z,"drawing ".concat(f," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:mg(this.gl)});if(t)for(const c of t){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,t),r)}}function A6(n=0,e={}){const t={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const d=t[c]=t[c]||A6(e[c],e);l=d(r,o),t[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),t[a]=null):l=n;return o&&l>=n&&(n=l+1),e[a]=l,l};return i}class vme extends YE{constructor(e,t){super(e,t),Se(this,"shadowMap",void 0),Se(this,"depthBuffer",void 0),Se(this,"fbo",void 0),this.shadowMap=new ms(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new bg(e,{format:33189,width:1,height:1}),this.fbo=new So(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;bc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=mg(this.gl),o=i.width*r,s=i.height*r;(o!==t.width||s!==t.height)&&t.resize({width:o,height:s}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const S6="#define SMOOTH_EDGE_RADIUS 0.5",Ame={name:"geometry",vs:"\n".concat(S6,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(S6,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Sme=Object.keys(ki).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(ki[n],";")).join(""),Cme=Object.keys(jl).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(jl[n],";")).join(""),Mme=Object.keys(cE).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(cE[n],";")).join(""),Tme="".concat(Sme,"\n").concat(Cme,"\n").concat(Mme,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),Ime={},Kk={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Ame],vs:Tme,getUniforms:function Dme(n=Ime){return"viewport"in n?function Ihe({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=ki.DEFAULT,coordinateOrigin:r=_z,autoWrapLongitude:o=!1}){i===ki.DEFAULT&&(i=n.isGeospatial?ki.LNGLAT:ki.CARTESIAN);const s=Mhe({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=t||gz,s}(n):{}}},Ome=DE(function Bme({viewport:n,center:e}){return new Kn(n.viewProjectionMatrix).invert().transform(e)}),Pme=DE(function jme({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,o=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(s=>function Fme(n,e){const[t,i,r]=n,o=S0([t,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new Os(n.center).negate()),c=o.map(d=>a.transform(d)),l=(new Kn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});t.push(l.multiplyRight(s))}return t}),Nme=[0,0,0,1],Lme=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],qk={name:"shadow",dependencies:[Kk],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function Ume(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||Nme,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=Ome({viewport:n.viewport,center:e.project_uCenter}),o=[],s=Pme({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new Os(n.viewport.center).negate());e.project_uCoordinateSystem===ki.LNGLAT&&e.project_uProjectionMode===jl.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(Lme),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},Vme={color:[255,255,255],intensity:1},C6=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],zme=[0,0,0,200/255];class Jk{constructor(e={}){Se(this,"id","lighting-effect"),Se(this,"props",null),Se(this,"shadowColor",zme),Se(this,"shadow",void 0),Se(this,"ambientLight",null),Se(this,"directionalLights",[]),Se(this,"pointLights",[]),Se(this,"shadowPasses",[]),Se(this,"shadowMaps",[]),Se(this,"dummyShadowMap",null),Se(this,"programManager",void 0),Se(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=w0.getDefaultProgramManager(e),qk&&this.programManager.addDefaultModule(qk)),this.dummyShadowMap||(this.dummyShadowMap=new ms(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(qk),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new Kn).lookAt({eye:new Os(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new vme(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new x6(Vme),this.directionalLights.push(new E6(C6[0]),new E6(C6[1])))}}let Hme=1,Gme=1;class M6{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=Hme++,a={time:0,delay:t,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Gme++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Wme{constructor(e,t,i){Se(this,"id",void 0),Se(this,"context",void 0),Se(this,"isLoaded",void 0),Se(this,"persistent",void 0),Se(this,"_loadCount",0),Se(this,"_subscribers",new Set),Se(this,"_data",void 0),Se(this,"_loader",void 0),Se(this,"_error",void 0),Se(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=I0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class $me{constructor({gl:e,protocol:t}){Se(this,"protocol",void 0),Se(this,"_context",void 0),Se(this,"_resources",void 0),Se(this,"_consumers",void 0),Se(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(t,i):(o=new Wme(e,t,this._context),this._resources[e]=o),o.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Yme=[Kk],Xme=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Kme(n){const e=w0.getDefaultProgramManager(n);for(const t of Yme)e.addDefaultModule(t);for(const t of Xme)e.addShaderHook(t);return e}class Zme{constructor(e,{deck:t,stats:i,viewport:r,timeline:o}={}){Se(this,"layers",void 0),Se(this,"context",void 0),Se(this,"resourceManager",void 0),Se(this,"_lastRenderedLayers",[]),Se(this,"_needsRedraw",!1),Se(this,"_needsUpdate",!1),Se(this,"_nextLayers",null),Se(this,"_debug",!1),Se(this,"activateViewport",s=>{Ps("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new $me({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&Kme(e),stats:i||new c2({id:"deck.gl"}),viewport:r||new dh({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new M6,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Ps("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=E2(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const s of e)i[s.id]?xi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const o=t[r.id];null===o&&xi.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class Qme{constructor(e){Se(this,"width",void 0),Se(this,"height",void 0),Se(this,"views",void 0),Se(this,"viewState",void 0),Se(this,"controllers",void 0),Se(this,"timeline",void 0),Se(this,"_viewports",void 0),Se(this,"_viewportMap",void 0),Se(this,"_isUpdating",void 0),Se(this,"_needsRedraw",void 0),Se(this,"_needsUpdate",void 0),Se(this,"_eventManager",void 0),Se(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=E2(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!kg(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):xi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const o=e.controller;if(o){const s={...t,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=t[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),this._viewports.unshift(a)}for(const r in t){const o=t[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class tge extends y6{constructor(e){const{width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:m=60,minPitch:b=0,startPanLngLat:x,startZoomLngLat:S,startRotatePos:z,startBearing:W,startPitch:ue,startZoom:se,normalize:De=!0}=e;gs(Number.isFinite(o)),gs(Number.isFinite(r)),gs(Number.isFinite(s)),super({width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:m,minPitch:b,normalize:De,position:d},{startPanLngLat:x,startZoomLngLat:S,startRotatePos:z,startBearing:W,startPitch:ue,startZoom:se}),Se(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+t,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=$r(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-t.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=$r(r,i,t);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=$r(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function Xhe(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=n;(r<-180||r>180)&&(r=Ez(r+180,360)-180),(a<-180||a>180)&&(a=Ez(a+180,360)-180);const c=J2(t/512);if(s<=c)s=c,o=0;else{const l=t/2/Math.pow(2,s),d=Dg([0,l])[1];if(o<d)o=d;else{const h=Dg([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:t,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const o=e[0]-t[0],s=e[1]-t[1],a=e[1],c=t[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let f=0;s>0?Math.abs(d-c)>5&&(f=s/(c-d)*1.2):s<0&&c>5&&(f=1-a/c),f=$r(f,-1,1);const{minPitch:m,maxPitch:b}=this.getViewportProps();let S=i;return f>0?S=i+f*(b-i):f<0&&(S=i-f*(m-i)),{pitch:S,bearing:r+180*h}}}class nge extends $k{constructor(...e){super(...e),Se(this,"ControllerState",tge),Se(this,"transition",{transitionDuration:300,transitionInterpolator:new WE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),Se(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class I6 extends Gk{get ViewportType(){return uh}get ControllerType(){return nge}}Se(I6,"displayName","MapView");class ige extends YE{constructor(e,t){super(e,t),Se(this,"maskMap",void 0),Se(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new ms(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new So(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,bc(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class age{constructor(){Se(this,"id","mask-effect"),Se(this,"props",null),Se(this,"useInPicking",!0),Se(this,"dummyMaskMap",void 0),Se(this,"channels",[]),Se(this,"masks",null),Se(this,"maskPass",void 0),Se(this,"maskMap",void 0),Se(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new ms(e,{width:1,height:1}));const a=t.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new ige(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],d=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:o,views:s,viewport:l,viewportChanged:d})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:o,viewportChanged:s}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,d)=>l!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||s)&&(this.lastViewport=o,e.bounds=function rge({layers:n,viewport:e}){let t=null;for(const o of n){const s=o.getBounds();s&&(t?(t[0]=Math.min(t[0],s[0][0]),t[1]=Math.min(t[1],s[0][1]),t[2]=Math.max(t[2],s[1][0]),t[3]=Math.max(t[3],s[1][1])):t=[s[0][0],s[0][1],s[1][0],s[1][1]])}const i=e.getBounds();if(!t)return i;const r=function sge(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:o}),c||!yg(e.bounds,a.bounds))){const{maskPass:l,maskMap:d}=this,h=function oge({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof uh){const{longitude:a,latitude:c,zoom:l}=Tz({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new uh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const o=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],s=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new Yk({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:o,zoom:Math.log2(s)}})}({bounds:e.bounds,viewport:o,width:d.width,height:d.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:o}=r.root;let s=t[o];if(!s){if(++i>4){xi.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>a?.id===o),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[o]=s}s.layers.push(r),s.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const o=this.channels[r];(!o||!(o.id in t))&&(this.channels[r]=null)}for(const r in t){const o=t[r];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const cge=new Jk;class lge{constructor(){Se(this,"effects",void 0),Se(this,"_internalEffects",void 0),Se(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!kg(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new age),e.some(t=>t instanceof Jk)||this._internalEffects.push(cge)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class dge extends YE{shouldDrawLayer(e){return"draw"===e.props.operation}}const D6={blendFunc:[1,0,32771,0],blendEquation:32774};class k6 extends YE{constructor(...e){super(...e),Se(this,"pickZ",void 0),Se(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:f,pass:m="picking",pickZ:b}){const x=this.gl;this.pickZ=b;const S=b?null:{byLayer:new Map,byAlpha:[]};this._colors=S;const z=bc(x,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...D6,blend:!b},()=>super.render({target:s,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:f?.filter(ue=>ue.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:S&&hge.bind(null,S),stats:z}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,D6),r.blend=!0,r.blendColor=function uge(n,e,t){const{byLayer:i,byAlpha:r}=n;let o,s=i.get(e);return s?(s.viewports.push(t),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[t]},i.set(e,s),r[o]=s):(xi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colors,e,i)):r.blend=!1,r}}function hge(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class pge{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new dge(e),this.pickLayersPass=new k6(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||So.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,Ps("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new So(this.gl),new So(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o===this.lastPostProcessEffect){r.target=t.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const mge={pickedColor:null,pickedObjectIndex:-1};function gge({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,f=0;for(let m=0;m<l;m++){const b=m+a-i,x=b*b;if(x>d)f+=4*c;else for(let S=0;S<c;S++){if(n[f+3]-1>=0){const W=S+s-t,ue=W*W+x;ue<=d&&(d=ue,h=f)}f+=4}}if(h>=0){const m=n.slice(h,h+4),b=e(m);if(b){const x=Math.floor(h/4/c),S=h/4-x*c;return{...b,pickedColor:m,pickedX:s+S,pickedY:a+x}}xi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return mge}function R6({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function yge(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function bge(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const f=t.layerId,m=s?s.props.id:null;if(m!==f||a!==t.index){if(m!==f){const b=r.find(x=>x.props.id===f);b&&c.unshift(b)}t.layerId=m,t.index=a,t.info=null}}const l=R6(n),d=new Map;return d.set(null,l),c.forEach(h=>{let f={...l};h===s&&(f.color=o,f.index=a,f.picked=!0),f=O6({layer:h,info:f,mode:i});const m=f.layer;h===s&&"hover"===i&&(t.info=f),d.set(m.id,f),"hover"===i&&m.updateAutoHighlight(f)}),d}function O6({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class vge{constructor(e){Se(this,"gl",void 0),Se(this,"pickingFBO",void 0),Se(this,"depthFBO",void 0),Se(this,"pickLayersPass",void 0),Se(this,"layerFilter",void 0),Se(this,"lastPickedInfo",void 0),Se(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new k6(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(f=>f.id===s):null,l=a&&r.find(f=>f.id===a)||r[0],d=l&&l.unproject([e-l.x,t-l.y]);return{...o,x:e,y:t,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new So(i),So.isSupported(i,{colorBufferFloat:!0}))){const r=new So(i);r.attach({36064:new ms(i,{format:pi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const f=this._getPickable(e),m=mg(this.gl);if(!f)return{result:[],emptyInfo:R6({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const b=o2(this.gl,[r,o],!0),x=[b.x+Math.floor(b.width/2),b.y+Math.floor(b.height/2)],S=Math.round(s*m),{width:z,height:W}=this.pickingFBO,ue=this._getPickingRect({deviceX:x[0],deviceY:x[1],deviceRadius:S,deviceWidth:z,deviceHeight:W}),se={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let De;const Ne=[],ot=new Set;for(let ut=0;ut<a;ut++){let Ke,ht;Ke=ue?gge({...this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:ue,cullRect:se,effects:h,pass:"picking:".concat(c)}),deviceX:x[0],deviceY:x[1],deviceRadius:S,deviceRect:ue}):{pickedColor:null,pickedObjectIndex:-1},Ke.pickedLayer&&l&&this.depthFBO&&(ht=this._drawAndSample({layers:[Ke.pickedLayer],views:t,viewports:i,onViewportActive:d,deviceRect:{x:Ke.pickedX,y:Ke.pickedY,width:1,height:1},cullRect:se,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),Ke.pickedLayer&&ut+1<a&&(ot.add(Ke.pickedLayer),Ke.pickedLayer.disablePickingIndex(Ke.pickedObjectIndex)),De=bge({pickInfo:Ke,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:o,z:ht,pixelRatio:m});for(const yt of De.values())yt.layer&&Ne.push(yt);if(!Ke.pickedColor)break}for(const ut of ot)ut.restorePickingColors();return{result:Ne,emptyInfo:De.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const m=mg(this.gl),b=o2(this.gl,[r,o],!0),x=b.x,S=b.y+b.height,z=o2(this.gl,[r+s,o+a],!0),ue=z.y,Ne=function _ge({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const o=n.slice(i,i+4),s=o.join(",");if(!t.has(s)){const a=e(o);a?t.set(s,{...a,color:o}):xi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:{x,y:ue,width:z.x+z.width-x,height:S-ue},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),ot=new Map,ut=Number.isFinite(l);for(let Ke=0;Ke<Ne.length&&!(ut&&l&&ot.size>=l);Ke++){const ht=Ne[Ke];let yt={color:ht.pickedColor,layer:null,index:ht.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};yt=O6({layer:ht.pickedLayer,info:yt,mode:c}),ot.has(yt.object)||ot.set(yt.object,yt)}return Array.from(ot.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l}),{x:f,y:m,width:b,height:x}=o,S=new(l?Float32Array:Uint8Array)(b*x*4);return uE(d,{sourceX:f,sourceY:m,sourceWidth:b,sourceHeight:x,target:S}),{pickedColors:S,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,t+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const wge={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class xge{constructor(e){Se(this,"el",null),Se(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,wge),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function P6(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Age=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),N6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Sge}=(N6&&parseFloat(N6[1]),globalThis),Zk=typeof Image<"u",Qk=typeof ImageBitmap<"u",eR=!!Age||!!Sge;function L6(n){const e=function B6(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Tge=/^data:image\/svg\+xml/,Ige=/\.svg((\?|#).*)?$/;function tR(n){return n&&(Tge.test(n)||Ige.test(n))}function j6(n,e){if(tR(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function U6(n,e,t){return nR.apply(this,arguments)}function nR(){return nR=Ut(function*(n,e,t){const i=function Dge(n,e){if(tR(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return j6(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function kge(n,e){return iR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),nR.apply(this,arguments)}function iR(){return iR=Ut(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),iR.apply(this,arguments)}const Rge={};let V6=!0;function rR(){return rR=Ut(function*(n,e,t){let i;i=tR(t)?yield U6(n,e,t):j6(n,t);const r=e&&e.imagebitmap;return yield function Pge(n){return oR.apply(this,arguments)}(i,r)}),rR.apply(this,arguments)}function oR(){return oR=Ut(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function Nge(n){for(const e in n||Rge)return!1;return!0}(e)||!V6)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),V6=!1}return yield createImageBitmap(n)}),oR.apply(this,arguments)}const Yl=!1,D0=!0;function z6(n){const e=k0(n);return function zge(n){const e=k0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Yl)?{mimeType:"image/png",width:e.getUint32(16,Yl),height:e.getUint32(20,Yl)}:null}(e)||function Wge(n){const e=k0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Yl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function $ge(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,Yl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Yl),width:e.getUint16(o+7,Yl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,Yl)}return null}(e)||function Hge(n){const e=k0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Yl)?{mimeType:"image/gif",width:e.getUint16(6,D0),height:e.getUint16(8,D0)}:null}(e)||function Gge(n){const e=k0(n);return e.byteLength>=14&&16973===e.getUint16(0,Yl)&&e.getUint32(2,D0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,D0),height:e.getUint32(22,D0)}:null}(e)||function Vge(n){const t=function Lge(n){return function Uge(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function jge(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function Fge(n){switch(function Bge(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function k0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function sR(){return sR=Ut(function*(n,e){const{mimeType:t}=z6(n)||{},i=globalThis._parseImageNode;return P6(i),yield i(n,t)}),sR.apply(this,arguments)}function aR(){return aR=Ut(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function Kge(n){switch(n){case"auto":case"data":return function Mge(){if(Qk)return"imagebitmap";if(Zk)return"image";if(eR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Cge(n){switch(n){case"auto":return Qk||Zk||eR;case"imagebitmap":return Qk;case"image":return Zk;case"data":return eR;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function Oge(n,e,t){return rR.apply(this,arguments)}(n,e,o);break;case"image":a=yield U6(n,e,o);break;case"data":a=yield function Yge(n,e){return sR.apply(this,arguments)}(n,e);break;default:P6(!1)}return"data"===r&&(a=function F6(n){switch(L6(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),aR.apply(this,arguments)}const H6={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Xge(n,e,t){return aR.apply(this,arguments)},tests:[n=>!!z6(new DataView(n))],options:{image:{type:"auto",decode:!0}}},Jge={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function qge(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},R0="8.8.27",XE=globalThis.deck&&globalThis.deck.VERSION;if(XE&&XE!==R0)throw new Error("deck.gl - multiple versions detected: ".concat(XE," vs ").concat(R0));XE||(xi.log(1,"deck.gl ".concat(R0))(),globalThis.deck={...globalThis.deck,VERSION:R0,version:R0,log:xi,_registerLoggers:function ole(n){M2=n}},u6([Jge,[H6,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Zge=globalThis.deck;class KE extends $d{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=pi(e),r=n8(e,"TIMER_QUERY");let o=i||r;for(const s of t)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Zt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return KE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const G6=Bl()&&typeof document<"u";let c_e=0;class l_e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(S=>BV(S)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:m=!0,stats:b=Hf.get("animation-loop-".concat(c_e++))}=e;let{useDevicePixels:x=!0}=e;"useDevicePixelRatio"in e&&(fn.deprecated("useDevicePixelRatio","useDevicePixels")(),x=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=b,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:m,useDevicePixels:x}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Zt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=KE.isSupported(this.gl,["timers"])?new KE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return Ut(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return fn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=G6?new Promise((e,t)=>{G6&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function a_e(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function s_e(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?a2(this.props.gl,e):this.onCreateContext(e),!lE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Iae(n){Wd(n,r2)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Pae(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function Dae(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function jae(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(fn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const o=n.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(fn.warn("Device pixel ratio clamped")(),s=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*s),n.canvas.height=Math.floor(r*s)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new So(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var qE=g(7271);const d_e={mousedown:1,mousemove:2,mouseup:4};(function h_e(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function u_e(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(qE.PointerEventInput),function f_e(n){n.prototype.handler=function(t){let i=d_e[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(qE.MouseInput);const p_e=qE.Manager,Xl=qE;class JE{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const m_e=Xl?[[Xl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Xl.Rotate,{enable:!1}],[Xl.Pinch,{enable:!1}],[Xl.Swipe,{enable:!1}],[Xl.Pan,{threshold:0,enable:!1}],[Xl.Press,{enable:!1}],[Xl.Tap,{event:"doubletap",taps:2,enable:!1}],[Xl.Tap,{event:"anytap",enable:!1}],[Xl.Tap,{enable:!1}]]:null,Y6={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},g_e={doubletap:["tap"]},__e={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},lR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},b_e={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},X6={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},y_e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Ng=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let dR=!1;try{Ng.addEventListener("test",null,{get passive(){return dR=!0,!0}}),Ng.removeEventListener("test",null)}catch{dR=!1}const v_e=-1!==y_e.indexOf("firefox"),{WHEEL_EVENTS:w_e}=lR,q6=4.000244140625;class A_e extends JE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;Ng.WheelEvent&&(v_e&&r.deltaMode===Ng.WheelEvent.DOM_DELTA_PIXEL&&(o/=Ng.devicePixelRatio),r.deltaMode===Ng.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%q6==0&&(o=Math.floor(o/q6)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(w_e),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!dR&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:S_e}=lR,J6="pointermove",Z6="pointerover",Q6="pointerout",e5="pointerenter",t5="pointerleave";class C_e extends JE{constructor(e,t,i){super(e,t,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(S_e),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===J6&&(this.enableMoveEvent=t),e===Z6&&(this.enableOverEvent=t),e===Q6&&(this.enableOutEvent=t),e===e5&&(this.enableEnterEvent=t),e===t5&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(Z6,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(Q6,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(e5,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(t5,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(J6,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:M_e}=lR,n5="keydown";class T_e extends JE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:n5,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(M_e),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===n5&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const o5="contextmenu";class I_e extends JE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:o5,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===o5&&(this.options.enable=t)}}const D_e={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function U_e(n){const e=D_e[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&t),s=!!(4&t),a=!!(2&t)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function V_e(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const fR={srcElement:"root",priority:0};class z_e{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=fR;"string"==typeof i||i&&i.addEventListener?c={...fR,srcElement:i}:i&&(c={...fR,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===t){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...U_e(e),...V_e(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const H_e={events:null,recognizers:null,recognizerOptions:{},Manager:p_e,touchAction:"none",tabIndex:0};class G_e{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:o}=r,s=__e[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...H_e,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||m_e}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(Y6).forEach(r=>{const o=this.manager.get(r);o&&Y6[r].forEach(s=>{o.recognizeWith(s)})});for(const r in t.recognizerOptions){const o=this.manager.get(r);if(o){const s=t.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new A_e(e,this._onOtherEvent,{enable:!1}),this.moveInput=new C_e(e,this._onOtherEvent,{enable:!1}),this.keyInput=new T_e(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new I_e(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const o=g_e[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);t?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,o){if("string"!=typeof e){i=t;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=X6[e]||e;let l=a.get(c);l||(l=new z_e(this),a.set(c,l),l.recognizerName=b_e[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,t,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(X6[e]||e);if(o&&(o.remove(e,t),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Jf(){}const s5={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Jf,onResize:Jf,onViewStateChange:Jf,onInteractionStateChange:Jf,onBeforeRender:Jf,onAfterRender:Jf,onLoad:Jf,onError:n=>xi.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class pR{constructor(e){Se(this,"props",void 0),Se(this,"width",0),Se(this,"height",0),Se(this,"userData",{}),Se(this,"canvas",null),Se(this,"viewManager",null),Se(this,"layerManager",null),Se(this,"effectManager",null),Se(this,"deckRenderer",null),Se(this,"deckPicker",null),Se(this,"eventManager",null),Se(this,"tooltip",null),Se(this,"metrics",void 0),Se(this,"animationLoop",void 0),Se(this,"stats",void 0),Se(this,"viewState",void 0),Se(this,"cursorState",void 0),Se(this,"_needsRedraw",void 0),Se(this,"_pickRequest",void 0),Se(this,"_lastPointerDownInfo",null),Se(this,"_metricsCounter",void 0),Se(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),Se(this,"_onEvent",t=>{const i=xV[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,t)),!d&&l&&l(s,t)}),Se(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...s5,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&xi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===tz()&&xi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new c2({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&p0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,o,s,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&xi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&xi.removed("onLayerClick","onClick")(),e.initialViewState&&!kg(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return t=t||i||r||o||s,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return gs(this.viewManager),this.viewManager.views}getViewports(e){return gs(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){gs(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),o}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),gs(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const o=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new l_e({width:t,height:i,useDevicePixels:d,autoResizeViewport:!1,gl:r,onCreateContext:h=>BV({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new I6({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var t;o=a,s=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,a2(e,{enable:!0,copyState:!0})),this.tooltip=new xge(this.canvas),Wd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new M6;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new G_e(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in xV)this.eventManager.on(r,this._onEvent);this.viewManager=new Qme({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Zme(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new lge,this.deckRenderer=new pge(e),this.deckPicker=new vge(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Wd(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),xi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=Hf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}Se(pR,"defaultProps",s5),Se(pR,"VERSION",Zge.VERSION);const QE={name:"project32",dependencies:[Kk],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},W_e={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},eA={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function $_e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W_e;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},a5={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class _h{static get DRAW_MODE(){return a5}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ya("geometry"),drawMode:i=a5.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Zt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Zt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Zt(Number.isFinite(i)),i}}const c5=()=>{},l5={10241:9987,10240:9729,10242:33071,10243:33071};function J_e(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Z_e(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function O0(n){return n&&(n.id||n.url)}function d5(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];n[O0(r)]={...r,x:o,y:t}}}class nbe{constructor(e,{onUpdate:t=c5,onError:i=c5}){Se(this,"gl",void 0),Se(this,"onUpdate",void 0),Se(this,"onError",void 0),Se(this,"_loadOptions",null),Se(this,"_texture",null),Se(this,"_externalTexture",null),Se(this,"_mapping",{}),Se(this,"_textureParameters",null),Se(this,"_pendingCount",0),Se(this,"_autoPacking",!1),Se(this,"_xOffset",0),Se(this,"_yOffset",0),Se(this,"_rowHeight",0),Se(this,"_buffer",4),Se(this,"_canvasWidth",1024),Se(this,"_canvasHeight",0),Se(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?O0(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function tbe(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:o}=bE(n);for(const s of r){o.index++;const a=e(s,o),c=O0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function ebe({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[O0(l)]){const{height:h,width:f}=l;i+f+e>s&&(d5(t,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,o=Math.max(o,h)}}return a.length>0&&d5(t,a,r),{mapping:t,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:J_e(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new ms(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||l5})),this._texture.height!==this._canvasHeight&&(this._texture=function Q_e(n,e,t,i){const r=n.width,o=n.height,s=new ms(n.gl,{width:e,height:t,parameters:i});return function lce(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=t;const{framebuffer:f,deleteFramebuffer:m}=f0(n);Zt(f);const{gl:b,handle:x}=f,S=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const z=b.bindFramebuffer(36160,x);Zt(e);let W=null;if(e instanceof Gf&&(W=e,d=Number.isFinite(d)?d:W.width,h=Number.isFinite(h)?h:W.height,W.bind(0),e=W.target),S)switch(e){case 3553:case 34067:b.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:Rs(b).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else b.copyTexImage2D(e,o,s,i,r,d,h,0);W&&W.unbind(),b.bindFramebuffer(36160,z||null),m&&f.delete()}(n,s,{targetY:0,width:r,height:o}),n.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||l5)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,I0(i.url,H6,this._loadOptions).then(r=>{const o=O0(i),{x:s,y:a,width:c,height:l}=this._mapping[o],d=Z_e(t,r,c,l);this._texture.setSubImageData({data:d,x:s,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const u5=[0,0,0,255],ibe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:u5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class mR extends Kf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[QE,eA]})}initializeState(){this.state={iconManager:new nbe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:u5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=t,{iconManager:h}=this.state,f=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:t.loadOptions,autoPacking:!f,iconAtlas:s,iconMapping:f?a:null,textureParameters:d}),f?i.iconMapping!==t.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:b}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(b),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:cE[o],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new Sg(e,{...this.getShaders(),id:this.props.id,geometry:new _h({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):xi.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[t,i,r,o]}}Se(mR,"defaultProps",ibe),Se(mR,"layerName","IconLayer");const f5=[];class gR extends mR{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&xi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:o},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):f5}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):f5}}Se(gR,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),Se(gR,"layerName","MultiIconLayer");var sbe=g(822),abe=g.n(sbe);const cbe=32,lbe=[];function dbe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function p5(n,e,t,i){let r=0;for(let s=e;s<t;s++){var o;r+=(null===(o=i[n[s]])||void 0===o?void 0:o.width)||0}return r}function m5(n,e,t,i,r,o){let s=e,a=0;for(let c=e;c<t;c++){const l=p5(n,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function fbe(n,e,t,i,r=0,o){void 0===o&&(o=n.length);const s=[];return"break-all"===e?m5(n,r,o,t,i,s):function hbe(n,e,t,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<t;d++)if((" "===n[d]||" "===n[d+1]||d+1===t)&&(c=d+1),c>a){let h=p5(n,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=m5(n,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(n,r,o,t,i,s),s}function pbe(n,e,t,i,r,o){let s=0,a=0;for(let c=e;c<t;c++){const l=n[c],d=i[l];d?(a||(a=d.height),r[c]=s+d.width/2,s+=d.width):(xi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=cbe)}o[0]=s,o[1]=a}function g5(n,e,t,i,r){const o=Array.from(n),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let m=0,b=0,x=0;for(let S=0;S<=s;S++){const z=o[S];if(("\n"===z||S===s)&&(x=S),x>b){const W=d?fbe(o,t,i,r,b,x):lbe;for(let ue=0;ue<=W.length;ue++){const se=0===ue?b:W[ue-1],De=ue<W.length?W[ue]:x;pbe(o,se,De,r,a,f);for(let Ne=se;Ne<De;Ne++)c[Ne]=m+f[1]/2,l[Ne]=f[0];m+=f[1]*e,h[0]=Math.max(h[0],f[0])}b=x}"\n"===z&&(a[b]=0,c[b]=0,l[b]=0,b++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}class _5{constructor(e=5){Se(this,"limit",void 0),Se(this,"_cache",{}),Se(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const P0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function gbe(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let tA=new _5(3);function ybe(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function w5(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class wbe{constructor(){Se(this,"props",{...P0}),Se(this,"_key",void 0),Se(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function bbe(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=tA.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=tA.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const o=this._generateFontAtlas(this._key,i,r);this._atlas=o,tA.set(this._key,o)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:o,fontSize:s,buffer:a,sdf:c,radius:l,cutoff:d}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");w5(f,r,s,o);const{mapping:m,canvasHeight:b,xOffset:x,yOffset:S}=function ube({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;for(const h of n)if(!o[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*(t+2*i)+i,width:f,height:t},l+=f+2*i}const d=t+2*i;return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:dbe(a+(c+1)*d)}}({getFontWidth:z=>f.measureText(z).width,fontHeight:1.2*s,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==b){const z=f.getImageData(0,0,h.width,h.height);h.height=b,f.putImageData(z,0,0)}if(w5(f,r,s,o),c){const z=new(abe())(s,a,l,d,r,o),W=f.getImageData(0,0,z.size,z.size);for(const ue of t)ybe(z.draw(ue),W),f.putImageData(W,m[ue].x-a,m[ue].y+a)}else for(const z of t)f.fillText(z,m[z].x,m[z].y+.9*s);return{xOffset:x,yOffset:S,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const Abe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class _R extends Kf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[QE,eA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:cE[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new Sg(e,{...this.getShaders(),id:this.props.id,geometry:new _h({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}Se(_R,"defaultProps",Abe),Se(_R,"layerName","TextBackgroundLayer");const x5={start:1,middle:0,end:-1},E5={top:1,center:0,bottom:-1},bR=[0,0,0,255],Cbe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:bR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:P0.characterSet},fontFamily:P0.fontFamily,fontWeight:P0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:bR},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:bR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class yR extends Hk{constructor(...e){super(...e),Se(this,"state",void 0),Se(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{size:[f,m]}=g5(h,c,s,a,r);return[(x5["function"==typeof l?l(t,i):l]-1)*f/2,(E5["function"==typeof d?d(t,i):d]-1)*m/2,f,m]}),Se(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{x:f,y:m,rowWidth:b,size:[x,S]}=g5(h,c,s,a,r),z=x5["function"==typeof l?l(t,i):l],W=E5["function"==typeof d?d(t,i):d],ue=f.length,se=new Array(2*ue);let De=0;for(let Ne=0;Ne<ue;Ne++)se[De++]=(z-1)*x/2+(1-z)*(x-b[Ne])/2+f[Ne],se[De++]=(W-1)*S/2+m[Ne];return se})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new wbe}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=t.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function mbe({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:o}){const s=n.BYTES_PER_ELEMENT,a=t?t/s:1,c=i?i/s:0,l=r[e]||Math.ceil((n.length-c)/a),d=o&&new Set,h=new Array(e);let f=n;if(a>1||c>0){f=new(0,n.constructor)(l);for(let b=0;b<l;b++)f[b]=n[b*a+c]}for(let m=0;m<e;m++){const S=f.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,S),d&&S.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:s,characterSet:c});a=d,o=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:d}=bE(t);s=[0],a=0;for(const h of l){d.index++;const f=Array.from(o(h,d)||"");c&&f.forEach(c.add,c),a+=f.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:b,getBackgroundColor:x,getBorderColor:S,getBorderWidth:z,backgroundPadding:W,background:ue,billboard:se,fontSettings:De,outlineWidth:Ne,outlineColor:ot,sizeScale:ut,sizeUnits:Ke,sizeMinPixels:ht,sizeMaxPixels:yt,transitions:Tt,updateTriggers:ft}=this.props,mt=this.getSubLayerClass("characters",gR),Lt=this.getSubLayerClass("background",_R);return[ue&&new Lt({getFillColor:x,getLineColor:S,getLineWidth:z,padding:W,getPosition:d,getSize:f,getAngle:m,getPixelOffset:b,billboard:se,sizeScale:ut/this.state.fontAtlasManager.props.fontSize,sizeUnits:Ke,sizeMinPixels:ht,sizeMaxPixels:yt,transitions:Tt&&{getPosition:Tt.getPosition,getAngle:Tt.getAngle,getSize:Tt.getSize,getFillColor:Tt.getBackgroundColor,getLineColor:Tt.getBorderColor,getLineWidth:Tt.getBorderWidth,getPixelOffset:Tt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new mt({sdf:De.sdf,smoothing:Number.isFinite(De.smoothing)?De.smoothing:P0.smoothing,outlineWidth:Ne,outlineColor:ot,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:b,billboard:se,sizeScale:ut*r,sizeUnits:Ke,sizeMinPixels:ht*r,sizeMaxPixels:yt*r,transitions:Tt&&{getPosition:Tt.getPosition,getAngle:Tt.getAngle,getColor:Tt.getColor,getSize:Tt.getSize,getPixelOffset:Tt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function vbe(n){xi.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),tA=new _5(n)}(e)}}Se(yR,"defaultProps",Cbe),Se(yR,"layerName","TextLayer");const A5="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Mbe={lightSources:{}};function vR(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const wR={name:"lights",vs:A5,fs:A5,getUniforms:function S5(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mbe;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function Tbe(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?vR(e):[0,0,0],t.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=vR(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=vR(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return S5({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Ibe={};const kbe={name:"phong-lighting",dependencies:[wR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function M5(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ibe;if(!("material"in n))return{};const{material:e}=n;return e?function Dbe(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},xR=Math.PI/180,nA=new Float32Array(16),T5=new Float32Array(12);function I5(n,e,t){const i=e[0]*xR,r=e[1]*xR,o=e[2]*xR,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),f=t[0],m=t[1],b=t[2];n[0]=f*h*d,n[1]=f*c*d,n[2]=f*-a,n[3]=m*(-c*l+h*a*s),n[4]=m*(h*l+c*a*s),n[5]=m*d*s,n[6]=b*(c*s+h*a*l),n[7]=b*(-h*s+c*a*l),n[8]=b*d*l}function D5(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const k5={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),f=Array.isArray(s),m=l||!c&&!!a(i[0]);n.constant=m?l:h&&d&&f;const b=n.value;if(n.constant){let x;m?(nA.set(a),x=D5(nA)):(x=T5,I5(x,r,o),x.set(s,9)),n.value=new Float32Array(x)}else{let x=e*n.size;const{iterable:S,objectInfo:z}=bE(i,e,t);for(const W of S){let ue;z.index++,m?(nA.set(l?a:a(W,z)),ue=D5(nA)):(ue=T5,I5(ue,h?r:r(W,z),d?o:o(W,z)),ue.set(f?s:s(W,z),9)),b[x++]=ue[0],b[x++]=ue[1],b[x++]=ue[2],b[x++]=ue[3],b[x++]=ue[4],b[x++]=ue[5],b[x++]=ue[6],b[x++]=ue[7],b[x++]=ue[8],b[x++]=ue[9],b[x++]=ue[10],b[x++]=ue[11]}}}};function R5(n,e){return e===ki.CARTESIAN||e===ki.METER_OFFSETS||e===ki.DEFAULT&&!n.isGeospatial}function O5(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),xi.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Pbe(n,e){if(n.attributes)return O5(n.attributes,e),n instanceof _h?n:new _h(n);if(n.positions||n.POSITION)return O5(n,e),new _h({attributes:n});throw Error("Invalid mesh")}class ER extends Kf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){const e=!pi(this.context.gl),t={};return b2(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[QE,kbe,eA],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:k5}),this.setState({emptyTexture:new ms(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var o;if(null===(o=this.state.model)||void 0===o||o.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const s=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||R5(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new Sg(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Pbe(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}Se(ER,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),Se(ER,"layerName","SimpleMeshLayer");const P5={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[wR]};class Lg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||ya(this.constructor.name),this.display=!0,this.position=new Os,this.rotation=new Os,this.scale=new Os(1,1,1),this.matrix=new Kn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Zt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Zt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Zt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:o=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){Zt(e),t=t||this.matrix;const i=new Kn(e).multiplyRight(t),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class N0 extends Lg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;fn.assert(t.every(i=>i instanceof Lg),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const o=t.getBounds();if(!o)return;const[s,a]=o,c=new Os(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new Os(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new Os(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Kn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Kn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof N0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let iA;class AR extends a8{static get ZERO(){return iA||(iA=new AR(0,0,0,0),Object.freeze(iA)),iA}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),Yd(e)&&1===arguments.length?this.copy(e):(fo.debug&&(mi(e),mi(t),mi(i),mi(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return fo.debug&&(mi(e.x),mi(e.y),mi(e.z),mi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=mi(e)}get w(){return this[3]}set w(e){this[3]=mi(e)}transform(e){return v2(this,this,e),this.check()}transformByMatrix3(e){return function $ce(n,e,t){const i=e[0],r=e[1],o=e[2];n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Wce(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return u8(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function N5(){var n=new wa(4);return wa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function L5(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function F5(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}var j5=pz,qbe=function(){var n=c8(),e=l8(1,0,0),t=l8(0,1,0);return function(i,r,o){var s=d8(r,o);return s<-.999999?(mE(n,e,r),function Rce(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&mE(n,t,r),function Nce(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),L5(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(mE(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function yhe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();N5(),N5(),function Lbe(){var n=new wa(9);wa!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Jbe=[0,0,0,1];class SR extends fE{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function B5(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return L5(this,e,t),this.check()}identity(){return function Fbe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=mi(e)}get y(){return this[1]}set y(e){this[1]=mi(e)}get z(){return this[2]}set z(e){this[2]=mi(e)}get w(){return this[3]}set w(e){this[3]=mi(e)}len(){return function _he(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function bhe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function vhe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return qbe(this,e,t),this.check()}add(e){return function ghe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function Vbe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function Wbe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function Gbe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function whe(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return F5(this,this,e),this.check()}multiplyLeft(e){return F5(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function Bbe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function jbe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function Ube(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return j5(this,this,e),this.check()}slerp(e,t,i){let r,o,s;switch(arguments.length){case 1:({start:r=Jbe,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=t;break;default:r=e,o=t,s=i}return function rA(n,e,t,i){var f,m,b,x,S,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>Vl?(f=Math.acos(m),b=Math.sin(f),x=Math.sin((1-i)*f)/b,S=Math.sin(i*f)/b):(x=1-i,S=i),n[0]=x*r+S*c,n[1]=x*o+S*l,n[2]=x*s+S*d,n[3]=x*a+S*h,n}(this,r,o,s),this.check()}transformVector4(e,t=new AR){return function xhe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),pE(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Zbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Qbe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function z5(n){if(!n._animation){const e=Qbe[n.componentType],t=Zbe[n.type],i=t*n.count,{buffer:r,byteOffset:o}=n.bufferView.data,s=new e(r,o+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=t)a.push(Array.from(s.slice(c,c+t)));n._animation=a}}return n._animation}const eye=new Kn,CR=new SR;class sye{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function oye(n,e,t,i){let{input:r,interpolation:o,output:s}=e;const c=n%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:fn.warn("Bad animation path ".concat(i))()}Zt(t[i].length===s[d].length);const h=r[d],f=r[l];switch(o){case"STEP":!function rye(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,s[d]);break;case"LINEAR":f>h&&function nye(n,e,t,i,r){if("rotation"===e){CR.slerp({start:t,target:i,ratio:r});for(let o=0;o<CR.length;o++)n[e][o]=CR[o]}else for(let o=0;o<t.length;o++)n[e][o]=r*i[o]+(1-r)*t[o]}(t,i,s[d],s[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function iye(n,e,t){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const d=r[l]*a,h=o[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(t,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:fn.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function tye(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=eye.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class aye{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),o=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:z5(e.accessors[c]),interpolation:l,output:z5(e.accessors[d])}}),s=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new sye({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class cye extends Lg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof Sg?(this.model=e,this._setModelNodeProps(t)):this.model=new Sg(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class lye{constructor(e,t){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},b2(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new ms(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(fn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function H5(n,e){return pi(n)?"#version 300 es\n".concat(e):e}const fye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pye={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class mye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},pye,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new aye(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new N0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new N0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new Kn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new N0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){fn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function hye(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new lye(n,e);fn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new cye(n,{id:t,drawMode:i,vertexCount:r,modules:[P5],parameters:a.parameters,vs:H5(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:H5(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...s,defines:{...a.defines,...s.defines}});return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),fn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new or(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new va({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:fye[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var L0=g(9125);const yye="3.2.13",MR={};function Zf(n){return TR.apply(this,arguments)}function TR(){return TR=Ut(function*(n,e=null,t={}){return e&&(n=function vye(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:fh?t.CDN?(Hl(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(yye,"/dist/libs/").concat(n)):yk?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),MR[n]=MR[n]||function wye(n){return IR.apply(this,arguments)}(n),yield MR[n]}),TR.apply(this,arguments)}function IR(){return IR=Ut(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!fh)try{return L0&&L0.requireFromFile&&(yield L0.requireFromFile(n))}catch{return null}return yk?importScripts(n):function xye(n,e){if(!fh)return L0.requireFromString&&L0.requireFromString(n,e);if(yk)return eval.call(Xfe,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),IR.apply(this,arguments)}const Eye="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),Aye="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let DR,OR;function W5(n){return kR.apply(this,arguments)}function kR(){return kR=Ut(function*(n){const e=n.modules||{};return e.basis?e.basis:(DR=DR||function Sye(n){return RR.apply(this,arguments)}(n),yield DR)}),kR.apply(this,arguments)}function RR(){return RR=Ut(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Zf("basis_transcoder.js","textures",n),yield Zf("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function Cye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,t)}),RR.apply(this,arguments)}function $5(n){return PR.apply(this,arguments)}function PR(){return PR=Ut(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(OR=OR||function Mye(n){return NR.apply(this,arguments)}(n),yield OR)}),PR.apply(this,arguments)}function NR(){return NR=Ut(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Zf(Aye,"textures",n),yield Zf(Eye,"textures",n)]),e=e||globalThis.BASIS,yield function Tye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,t)}),NR.apply(this,arguments)}const Iye=["","WEBKIT_","MOZ_"],Y5={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let oA=null;var LR,sA,FR,aA,K5,BR,q5,J5;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(LR||(LR={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(sA||(sA={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(FR||(FR={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(aA||(aA={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}(K5||(K5={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(BR||(BR={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(q5||(q5={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(J5||(J5={}));const $a=[171,75,84,88,32,50,48,187,13,10,26,10],Nye={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function UR(){return UR=Ut(function*(n,e){if("auto"===e.basis.containerFormat){if(function Pye(n){const e=new Uint8Array(n);return!(e.byteLength<$a.length||e[0]!==$a[0]||e[1]!==$a[1]||e[2]!==$a[2]||e[3]!==$a[3]||e[4]!==$a[4]||e[5]!==$a[5]||e[6]!==$a[6]||e[7]!==$a[7]||e[8]!==$a[8]||e[9]!==$a[9]||e[10]!==$a[10]||e[11]!==$a[11])}(n))return eH((yield $5(e)).KTX2File,n,e);const{BasisFile:t}=yield W5(e);return VR(t,n,e)}if("encoder"===e.basis.module){const t=yield $5(e);return"ktx2"===e.basis.containerFormat?eH(t.KTX2File,n,e):VR(t.BasisFile,n,e)}{const{BasisFile:i}=yield W5(e);return VR(i,n,e)}}),UR.apply(this,arguments)}function VR(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(Fye(i,s,l,t));o.push(c)}return o}finally{i.close(),i.delete()}}function Fye(n,e,t,i){const r=n.getImageWidth(e,t),o=n.getImageHeight(e,t),s=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=tH(i,s),d=n.getImageTranscodedSizeInBytes(e,t,l),h=new Uint8Array(d);if(!n.transcodeImage(h,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function eH(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(Bye(i,s,t));break}return[o]}finally{i.close(),i.delete()}}function Bye(n,e,t){const{alphaFlag:i,height:r,width:o}=n.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=tH(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!n.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,hasAlpha:i,format:a}}function tH(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=nH()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),Nye[t]}function nH(){const n=function Dye(n){if(!oA){n=n||function kye(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,oA=new Set;for(const e of Iye)for(const t in Y5)n&&n.getExtension("".concat(e).concat(t))&&oA.add(Y5[t])}return oA}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const jye={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function Lye(n,e){return UR.apply(this,arguments)}};function Qf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const lA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),iH=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Vye}=(iH&&parseFloat(iH[1]),globalThis),zR=typeof Image<"u",HR=typeof ImageBitmap<"u",GR=!!lA||!!Vye;function rH(n){const e=function sH(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Gye=/^data:image\/svg\+xml/,Wye=/\.svg((\?|#).*)?$/;function WR(n){return n&&(Gye.test(n)||Wye.test(n))}function aH(n,e){if(WR(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function cH(n,e,t){return $R.apply(this,arguments)}function $R(){return $R=Ut(function*(n,e,t){const i=function $ye(n,e){if(WR(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return aH(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Yye(n,e){return YR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),$R.apply(this,arguments)}function YR(){return YR=Ut(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),YR.apply(this,arguments)}const Xye={};let lH=!0;function XR(){return XR=Ut(function*(n,e,t){let i;i=WR(t)?yield cH(n,e,t):aH(n,t);const r=e&&e.imagebitmap;return yield function qye(n){return KR.apply(this,arguments)}(i,r)}),XR.apply(this,arguments)}function KR(){return KR=Ut(function*(n,e=null){if((function Jye(n){for(const e in n||Xye)return!1;return!0}(e)||!lH)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),lH=!1}return yield createImageBitmap(n)}),KR.apply(this,arguments)}const ql=!1,B0=!0;function qR(n){const e=j0(n);return function Zye(n){const e=j0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,ql)?{mimeType:"image/png",width:e.getUint32(16,ql),height:e.getUint32(20,ql)}:null}(e)||function t0e(n){const e=j0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,ql)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function n0e(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,ql);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,ql),width:e.getUint16(o+7,ql)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,ql)}return null}(e)||function Qye(n){const e=j0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,ql)?{mimeType:"image/gif",width:e.getUint16(6,B0),height:e.getUint16(8,B0)}:null}(e)||function e0e(n){const e=j0(n);return e.byteLength>=14&&16973===e.getUint16(0,ql)&&e.getUint32(2,B0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,B0),height:e.getUint32(22,B0)}:null}(e)}function j0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function JR(){return JR=Ut(function*(n,e){const{mimeType:t}=qR(n)||{},i=globalThis._parseImageNode;return Qf(i),yield i(n,t)}),JR.apply(this,arguments)}function ZR(){return ZR=Ut(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function o0e(n){switch(n){case"auto":case"data":return function Hye(){if(HR)return"imagebitmap";if(zR)return"image";if(GR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function zye(n){switch(n){case"auto":return HR||zR||GR;case"imagebitmap":return HR;case"image":return zR;case"data":return GR;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function Kye(n,e,t){return XR.apply(this,arguments)}(n,e,o);break;case"image":a=yield cH(n,e,o);break;case"data":a=yield function i0e(n,e){return JR.apply(this,arguments)}(n,e);break;default:Qf(!1)}return"data"===r&&(a=function oH(n){switch(rH(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),ZR.apply(this,arguments)}const s0e={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function r0e(n,e,t){return ZR.apply(this,arguments)},tests:[n=>!!qR(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function dH(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function uH(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function Ya(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function hH(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function U0(n,e){return Qf(n>=0),Qf(e>0),n+(e-1)&~(e-1)}function l0e(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+U0(i.byteLength,4)}const pH=["SCALAR","VEC2","VEC3","VEC4"],d0e=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],u0e=new Map(d0e),h0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},f0e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},p0e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function mH(n){return pH[n-1]||pH[0]}function gH(n){const e=u0e.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function _H(n,e){const t=p0e[n.componentType],i=h0e[n.type],o=n.count*i,s=n.count*i*f0e[n.componentType];return Ya(s>=0&&s<=e.byteLength),{ArrayType:t,length:o,byteLength:s}}const m0e={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class vc{constructor(e){Se(this,"gltf",void 0),Se(this,"sourceBuffers",void 0),Se(this,"byteLength",void 0),this.gltf=e||{json:{...m0e},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Ya(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:o,length:s}=_H(e,t);return new o(r,t.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Ya(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Ya(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=qR(e),r=t||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Ya(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=U0(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:mH(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const o={size:t.size,componentType:gH(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=l0e(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);t[o]=s}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const o of r)i.min.push(o),i.max.push(o);for(let o=t;o<e.length;o+=t)for(let s=0;s<t;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const _0e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",b0e="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",y0e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),v0e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),bH={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},w0e={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function nO(){return nO=Ut(function*(n,e,t,i,r,o="NONE"){const s=yield function dA(){return rO.apply(this,arguments)}();!function uA(n,e,t,i,r,o,s){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,d);const f=e(l,i,r,d,o.length);if(0===f&&s&&s(l,c,r),t.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(s,s.exports[w0e[r]],n,e,t,i,s.exports[bH[o||"NONE"]])}),nO.apply(this,arguments)}let iO;function rO(){return rO=Ut(function*(){return iO||(iO=function E0e(){return oO.apply(this,arguments)}()),iO}),rO.apply(this,arguments)}function oO(){return oO=Ut(function*(){let n=_0e;WebAssembly.validate(y0e)&&(n=b0e,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function A0e(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?v0e[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),oO.apply(this,arguments)}const sO="EXT_meshopt_compression",S0e=sO;function C0e(n,e){return aO.apply(this,arguments)}function aO(){return aO=Ut(function*(n,e){var t;const i=new vc(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const o of n.json.bufferViews||[])r.push(M0e(i,o));yield Promise.all(r),i.removeExtension(sO)}),aO.apply(this,arguments)}function M0e(n,e){return cO.apply(this,arguments)}function cO(){return cO=Ut(function*(n,e){const t=n.getObjectExtension(e,sO);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=t,d=n.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),f=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function x0e(n,e,t,i,r){return nO.apply(this,arguments)}(f,s,o,h,a,c),f}return null}),cO.apply(this,arguments)}const T0e=["image/png","image/jpeg","image/gif"],lO={};const Bg="EXT_texture_webp",R0e=Bg;function O0e(n,e){const t=new vc(n);if(!function I0e(n){return void 0===lO[n]&&(lO[n]=function D0e(n){switch(n){case"image/webp":return function k0e(){if(!lA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return lA;default:if(!lA){const{_parseImageNode:e}=globalThis;return!!e&&T0e.includes(n)}return!0}}(n)),lO[n]}("image/webp")){if(t.getRequiredExtensions().includes(Bg))throw new Error("gltf: Required extension ".concat(Bg," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,Bg);o&&(r.source=o.source),t.removeObjectExtension(r,Bg)}t.removeExtension(Bg)}const hA="KHR_texture_basisu",P0e=hA;function N0e(n,e){const t=new vc(n),{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,hA);o&&(r.source=o.source),t.removeObjectExtension(r,hA)}t.removeExtension(hA)}const vH={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class fA{constructor(e,t,i=!1,r=new Map){Se(this,"name",void 0),Se(this,"type",void 0),Se(this,"nullable",void 0),Se(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new fA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let sr,wH,xH,EH,AH,SH,CH,MH,TH;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(sr||(sr={}));class ep{static isNull(e){return e&&e.typeId===sr.Null}static isInt(e){return e&&e.typeId===sr.Int}static isFloat(e){return e&&e.typeId===sr.Float}static isBinary(e){return e&&e.typeId===sr.Binary}static isUtf8(e){return e&&e.typeId===sr.Utf8}static isBool(e){return e&&e.typeId===sr.Bool}static isDecimal(e){return e&&e.typeId===sr.Decimal}static isDate(e){return e&&e.typeId===sr.Date}static isTime(e){return e&&e.typeId===sr.Time}static isTimestamp(e){return e&&e.typeId===sr.Timestamp}static isInterval(e){return e&&e.typeId===sr.Interval}static isList(e){return e&&e.typeId===sr.List}static isStruct(e){return e&&e.typeId===sr.Struct}static isUnion(e){return e&&e.typeId===sr.Union}static isFixedSizeBinary(e){return e&&e.typeId===sr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===sr.FixedSizeList}static isMap(e){return e&&e.typeId===sr.Map}static isDictionary(e){return e&&e.typeId===sr.Dictionary}get typeId(){return sr.NONE}compareTo(e){return this===e}}Symbol,Symbol,wH=Symbol.toStringTag;class jg extends ep{constructor(e,t){super(),Se(this,"isSigned",void 0),Se(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return sr.Int}get[wH](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class F0e extends jg{constructor(){super(!0,8)}}class B0e extends jg{constructor(){super(!0,16)}}class j0e extends jg{constructor(){super(!0,32)}}class U0e extends jg{constructor(){super(!1,8)}}class V0e extends jg{constructor(){super(!1,16)}}class z0e extends jg{constructor(){super(!1,32)}}xH=Symbol.toStringTag;class IH extends ep{constructor(e){super(),Se(this,"precision",void 0),this.precision=e}get typeId(){return sr.Float}get[xH](){return"Float"}toString(){return"Float".concat(this.precision)}}class H0e extends IH{constructor(){super(32)}}class G0e extends IH{constructor(){super(64)}}Symbol,Symbol,EH=Symbol.toStringTag,AH=Symbol.toStringTag,SH=Symbol.toStringTag,CH=Symbol.toStringTag,MH=Symbol.toStringTag;class W0e extends ep{constructor(e,t){super(),Se(this,"listSize",void 0),Se(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return sr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[MH](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}TH=Symbol.toStringTag;class Ug{constructor(e,t){Se(this,"fields",void 0),Se(this,"metadata",void 0),function K0e(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function q0e(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new Ug(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Ug(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof Ug){const s=e;t=s.fields,i=kH(kH(new Map,this.metadata),s.metadata)}else t=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of t)r[s.name]=s;const o=Object.values(r);return new Ug(o,i)}}function kH(n,e){return new Map([...n||new Map,...e||new Map])}function RH(n,e,t){return function DH(n,e,t){const i=function $0e(n){switch(n.constructor){case Int8Array:return new F0e;case Uint8Array:return new U0e;case Int16Array:return new B0e;case Uint16Array:return new V0e;case Int32Array:return new j0e;case Uint32Array:return new z0e;case Float32Array:return new H0e;case Float64Array:return new G0e;default:throw new Error("array type not supported")}}(e.value),r=t||function X0e(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new fA(n,new W0e(e.size,new fA("value",i)),!1,r)}(n,e,t?OH(t.metadata):void 0)}function OH(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const PH={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Q0e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class tve{constructor(e){Se(this,"draco",void 0),Se(this,"decoder",void 0),Se(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const f="DRACO decompression failed: ".concat(s.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(o,r,t),c=this._getMeshData(o,a,t),l=function L0e(n){let e=1/0,t=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],f=a[l+2];e=d<e?d:e,t=h<t?h:t,i=f<i?f:i,r=d>r?d:r,o=h>o?h:o,s=f>s?f:s}return[[e,t,i],[r,o,s]]}(c.attributes),d=function J0e(n,e,t){const i=OH(e.metadata),r=[],o=function Z0e(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in n){const c=RH(s,n[s],o[s]);r.push(c)}if(t){const s=RH("indices",t);r.push(s)}return new Ug(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,t);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,t);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(t,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function rve(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=Q0e[t.data_type],r=t.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function nve(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[s,a]of Object.entries(t.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in PH)if(this.draco[s]===r)return PH[s];const o=t.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);t[o]=this._getDracoMetadataField(e,o)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function ive(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const pA="1.4.1",ove="https://www.gstatic.com/draco/versioned/decoders/".concat(pA,"/draco_decoder.js"),sve="https://www.gstatic.com/draco/versioned/decoders/".concat(pA,"/draco_wasm_wrapper.js"),ave="https://www.gstatic.com/draco/versioned/decoders/".concat(pA,"/draco_decoder.wasm");let V0;function fO(){return fO=Ut(function*(n){const e=n.modules||{};return V0=e.draco3d?V0||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):V0||function dve(n){return mO.apply(this,arguments)}(n),yield V0}),fO.apply(this,arguments)}function mO(){return mO=Ut(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield Zf(ove,"draco",n):[e,t]=yield Promise.all([yield Zf(sve,"draco",n),yield Zf(ave,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function uve(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),mO.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(pA,"/javascript/draco_encoder.js");const _O={...vH,parse:function fve(n,e){return bO.apply(this,arguments)}};function bO(){return bO=Ut(function*(n,e){const{draco:t}=yield function lve(n){return fO.apply(this,arguments)}(e),i=new tve(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),bO.apply(this,arguments)}function NH(n){const{buffer:e,size:t,count:i}=function mve(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function gve(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:mH(t),componentType:gH(e)}}const tp="KHR_draco_mesh_compression",_ve=tp;function bve(n,e,t){const i=new vc(n);for(const r of LH(i))i.getObjectExtension(r,tp)}function yve(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=Ut(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new vc(n),o=[];for(const s of LH(r))r.getObjectExtension(s,tp)&&o.push(wve(r,s,e,t));yield Promise.all(o),r.removeExtension(tp)}),yO.apply(this,arguments)}function vve(n,e={}){const t=new vc(n);for(const i of t.json.meshes||[])xve(i),t.addRequiredExtension(tp)}function wve(n,e,t,i){return vO.apply(this,arguments)}function vO(){return vO=Ut(function*(n,e,t,i){const r=n.getObjectExtension(e,tp);if(!r)return;const o=n.getTypedArrayForBufferView(r.bufferView),s=uH(o.buffer,o.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(s,_O,c,i),d=function pve(n){const e={};for(const t in n)if("indices"!==t){const r=NH(n[t]);e[t]=r}return e}(l.attributes);for(const[h,f]of Object.entries(d))if(h in e.attributes){const b=n.getAccessor(e.attributes[h]);null!=b&&b.min&&null!=b&&b.max&&(f.min=b.min,f.max=b.max)}e.attributes=d,l.indices&&(e.indices=NH(l.indices)),function Eve(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),vO.apply(this,arguments)}function xve(n,e,t=4,i,r){var o;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(o=r.parseSync)||void 0===o?void 0:o.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(s);return{primitives:[{attributes:c,mode:t,extensions:{[tp]:{bufferView:l,attributes:c}}}]}}function*LH(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const np="KHR_lights_punctual",Ave=np;function Sve(n){return wO.apply(this,arguments)}function wO(){return wO=Ut(function*(n){const e=new vc(n),{json:t}=e,i=e.getExtension(np);i&&(e.json.lights=i.lights,e.removeExtension(np));for(const r of t.nodes||[]){const o=e.getObjectExtension(r,np);o&&(r.light=o.light),e.removeObjectExtension(r,np)}}),wO.apply(this,arguments)}function Cve(n){return xO.apply(this,arguments)}function xO(){return xO=Ut(function*(n){const e=new vc(n),{json:t}=e;if(t.lights){const i=e.addExtension(np);Ya(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,np,i);delete e.json.lights}}),xO.apply(this,arguments)}const H0="KHR_materials_unlit",Mve=H0;function Tve(n){return EO.apply(this,arguments)}function EO(){return EO=Ut(function*(n){const e=new vc(n),{json:t}=e;e.removeExtension(H0);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,H0)}),EO.apply(this,arguments)}function Ive(n){const e=new vc(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,H0,{}),e.addExtension(H0))}const G0="KHR_techniques_webgl",Dve=G0;function kve(n){return AO.apply(this,arguments)}function AO(){return AO=Ut(function*(n){const e=new vc(n),{json:t}=e,i=e.getExtension(G0);if(i){const r=function Ove(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),t.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=t[s.program]}),r}(i,e);for(const o of t.materials||[]){const s=e.getObjectExtension(o,G0);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=Pve(o.technique,e)),e.removeObjectExtension(o,G0)}e.removeExtension(G0)}}),AO.apply(this,arguments)}function Rve(n,e){return SO.apply(this,arguments)}function SO(){return(SO=Ut(function*(n,e){})).apply(this,arguments)}function Pve(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const FH=[M,y,D,C,R,_,v];function CO(){return CO=Ut(function*(n,e={},t){const i=FH.filter(o=>BH(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,n,e,t)}}),CO.apply(this,arguments)}function BH(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const MO="KHR_binary_glTF",jH={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Bve={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class jve{constructor(){Se(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),Se(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function Fve(n){const e=new vc(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,MO);r&&Object.assign(i,r),e.removeObjectExtension(i,MO)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(MO)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in jH)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[t].length;e[t].push(o),this.idToIndexMap[t][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const t in jH)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:o}=t;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),o&&(t.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,t){const i=Bve[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const o of e.materials){var t,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(t=o.values)||void 0===t?void 0:t.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const Vve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Hve={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},Gve={10240:9729,10241:9986,10242:10497,10243:10497};class Yve{constructor(){Se(this,"baseUri",""),Se(this,"json",{}),Se(this,"buffers",[]),Se(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Ya(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function Wve(n){return zve[n]}(e.componentType),e.components=function $ve(n){return Vve[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=_H(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=t+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):Gve,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return Hve[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const UH=1735152710,TO=12,mA=8,Kve=1313821514,qve=5130562,Jve=0,Zve=1,Qve=0,Vg=!0;function IO(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),s=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(s),U0(i,4)}function DO(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),U0(i,4)}function kO(){return kO=Ut(function*(n,e,t=0,i,r){var o,s,a,c;(function awe(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function twe(n,e=0,t={}){const i=new DataView(n),{magic:r=UH}=t,o=i.getUint32(e,!1);return o===r||o===UH}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function c0e(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function a0e(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?dH(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?dH(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};t=function nwe(n,e,t=0,i={}){const r=new DataView(e),o=function ewe(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),s=r.getUint32(t+4,Vg),a=r.getUint32(t+8,Vg);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),t+=TO,n.version){case 1:return function iwe(n,e,t){Qf(n.header.byteLength>TO+mA);const i=e.getUint32(t+0,Vg),r=e.getUint32(t+4,Vg);return t+=mA,Qf(r===Qve),IO(n,e,t,i),(t+=i)+DO(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function rwe(n,e,t,i){return Qf(n.header.byteLength>TO+mA),function owe(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,Vg),o=e.getUint32(t+4,Vg);switch(t+=mA,o){case Kve:IO(n,e,t,r);break;case qve:DO(n,e,t,r);break;case Jve:i.strict||IO(n,e,t,r);break;case Zve:i.strict||DO(n,e,t,r)}t+=U0(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(s,e,t,i.glb),Ya("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),n._glb=s,n.json=s.json}else Ya(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:s}=n._glb;n.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function Uve(n,e={}){(new jve).normalize(n,e)}(n,{normalize:null==i||null===(o=i.gltf)||void 0===o?void 0:o.normalize}),function Nve(n,e={},t){const i=FH.filter(o=>BH(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(s=i.gltf)&&void 0!==s&&s.loadBuffers&&n.json.buffers&&(yield function cwe(n,e,t){return RO.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function lwe(n,e,t){return OO.apply(this,arguments)}(n,i,r);l.push(h)}const d=function Lve(n){return CO.apply(this,arguments)}(n,i,r);return l.push(d),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function Xve(n,e){return(new Yve).postProcess(n,e)}(n,i):n}),kO.apply(this,arguments)}function RO(){return RO=Ut(function*(n,e,t){const i=n.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=t;Ya(c);const l=hH(a.uri,e),d=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);n.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===n.buffers[s]&&(n.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),RO.apply(this,arguments)}function OO(){return OO=Ut(function*(n,e,t){const i=function dwe(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],o=[];for(const s of i)o.push(uwe(n,r[s],s,e,t));return yield Promise.all(o)}),OO.apply(this,arguments)}function uwe(n,e,t,i,r){return PO.apply(this,arguments)}function PO(){return PO=Ut(function*(n,e,t,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=hH(e.uri,i);a=yield(yield o(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function fH(n,e,t){const i=n.bufferViews[t];Ya(i);const o=e[i.buffer];return Ya(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=uH(l.buffer,l.byteOffset,l.byteLength)}Ya(a,"glTF image has no data");let c=yield s(a,[s0e,jye],{mimeType:e.mimeType,basis:i.basis||{format:nH()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),PO.apply(this,arguments)}const zg={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function hwe(n){return NO.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function NO(){return NO=Ut(function*(n,e={},t){(e={...zg.options,...e}).gltf={...zg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function swe(n,e){return kO.apply(this,arguments)}({},n,i,e,t)}),NO.apply(this,arguments)}function LO(){return LO=Ut(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function pwe(n){return FO.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),LO.apply(this,arguments)}function FO(){return FO=Ut(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),FO.apply(this,arguments)}const VH=[255,255,255,255],_we={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:VH},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[zg]};class BO extends Kf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){const e=[QE,eA];return"pbr"===this.props._lighting&&e.push(P5),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:VH,transition:!0},instanceModelMatrix:k5})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof Lg)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function gye(n,e,t){const i=new mye(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function fwe(n){return LO.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(xi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof Lg?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&xi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):xi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):xi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Lg&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!pi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:t,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:R5(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}Se(BO,"defaultProps",_we),Se(BO,"layerName","ScenegraphLayer");class bwe extends _h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ya("sphere-geometry")}=e,{indices:i,attributes:r}=function ywe(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(t+1);if("number"==typeof i){const z=i;i=(W,ue,se,De,Ne)=>z}const h=new Float32Array(3*d),f=new Float32Array(3*d),m=new Float32Array(2*d),x=new(d>65535?Uint32Array:Uint16Array)(e*t*6);for(let z=0;z<=e;z++)for(let W=0;W<=t;W++){const ue=W/t,se=z/e,De=W+z*(t+1),Ne=2*De,ot=3*De,ut=l*ue,Ke=s*se,ht=Math.sin(ut),yt=Math.cos(ut),Tt=Math.sin(Ke),mt=yt*Tt,Lt=Math.cos(Ke),Bt=ht*Tt,wn=i(mt,Lt,Bt,ue,se);h[ot+0]=wn*mt,h[ot+1]=wn*Lt,h[ot+2]=wn*Bt,f[ot+0]=mt,f[ot+1]=Lt,f[ot+2]=Bt,m[Ne+0]=ue,m[Ne+1]=1-se}const S=t+1;for(let z=0;z<t;z++)for(let W=0;W<e;W++){const ue=6*(z*e+W);x[ue+0]=W*S+z,x[ue+1]=W*S+z+1,x[ue+2]=(W+1)*S+z,x[ue+3]=(W+1)*S+z,x[ue+4]=W*S+z+1,x[ue+5]=(W+1)*S+z+1}return{indices:{size:1,value:x},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const vwe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class zH extends _h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ya("truncated-code-geometry")}=e,{indices:i,attributes:r}=function wwe(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-t,i),f=Math.sin,m=Math.cos,b=Math.PI,x=m(h),S=f(h),z=a?-2:0,W=o+(c?2:0),ue=r+1,se=new Uint16Array(r*(o+l)*6),De=vwe[s],Ne=new Float32Array(3*d),ot=new Float32Array(3*d),ut=new Float32Array(2*d);let Ke=0,ht=0;for(let yt=z;yt<=W;yt++){let mt,Tt=yt/o,ft=i*Tt;yt<0?(ft=0,Tt=1,mt=e):yt>o?(ft=i,Tt=1,mt=t):mt=e+yt/o*(t-e),(-2===yt||yt===o+2)&&(mt=0,Tt=0),ft-=i/2;for(let Lt=0;Lt<ue;Lt++){const Bt=f(Lt*b*2/r),wn=m(Lt*b*2/r);Ne[Ke+De[0]]=Bt*mt,Ne[Ke+De[1]]=ft,Ne[Ke+De[2]]=wn*mt,ot[Ke+De[0]]=yt<0||yt>o?0:Bt*x,ot[Ke+De[1]]=yt<0?-1:yt>o?1:S,ot[Ke+De[2]]=yt<0||yt>o?0:wn*x,ut[ht+0]=Lt/r,ut[ht+1]=Tt,ht+=2,Ke+=3}}for(let yt=0;yt<o+l;yt++)for(let Tt=0;Tt<r;Tt++){const ft=6*(yt*r+Tt);se[ft+0]=ue*(yt+0)+0+Tt,se[ft+1]=ue*(yt+0)+1+Tt,se[ft+2]=ue*(yt+1)+1+Tt,se[ft+3]=ue*(yt+0)+0+Tt,se[ft+4]=ue*(yt+1)+1+Tt,se[ft+5]=ue*(yt+1)+0+Tt}return{indices:se,attributes:{POSITION:{size:3,value:Ne},NORMAL:{size:3,value:ot},TEXCOORD_0:{size:2,value:ut}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class xwe extends zH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ya("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Ewe extends zH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ya("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const Awe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Swe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Cwe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Mwe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Twe={POSITION:{size:3,value:new Float32Array(Swe)},NORMAL:{size:3,value:new Float32Array(Cwe)},TEXCOORD_0:{size:2,value:new Float32Array(Mwe)}};class Iwe extends _h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ya("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(Awe)},attributes:{...Twe,...e.attributes}})}}class Jc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new xe);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new xe);const i=this.elements,r=e.x,o=e.y,s=e.z;return t.x=i[0]*r+i[1]*o+i[2]*s,t.y=i[3]*r+i[4]*o+i[5]*s,t.z=i[6]*r+i[7]*o+i[8]*s,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new Jc);const i=this.elements,r=e.elements,o=t.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],f=i[6],m=i[7],b=i[8],x=r[0],S=r[1],z=r[2],W=r[3],ue=r[4],se=r[5],De=r[6],Ne=r[7],ot=r[8];return o[0]=s*x+a*W+c*De,o[1]=s*S+a*ue+c*Ne,o[2]=s*z+a*se+c*ot,o[3]=l*x+d*W+h*De,o[4]=l*S+d*ue+h*Ne,o[5]=l*z+d*se+h*ot,o[6]=f*x+m*W+b*De,o[7]=f*S+m*ue+b*Ne,o[8]=f*z+m*se+b*ot,t}scale(e,t){void 0===t&&(t=new Jc);const i=this.elements,r=t.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return t}solve(e,t){void 0===t&&(t=new xe);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,f;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{f=4-d,o[f+4*s]+=o[f+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{f=4-d,o[f+4*a]=f<=s?0:o[f+4*a]-o[f+4*s]*m}while(--d)}}while(--c);if(t.z=o[11]/o[10],t.y=(o[7]-o[6]*t.z)/o[5],t.x=(o[3]-o[2]*t.z-o[1]*t.y)/o[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Jc);const r=Dwe;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*f}while(--l)}}while(--a);o=2;do{s=o-1;do{const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*f}while(--l)}while(s--)}while(--o);o=2;do{const f=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*f}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,o=e.w,s=t+t,a=i+i,c=r+r,l=t*s,d=t*a,h=t*c,f=i*a,m=i*c,b=r*c,x=o*s,S=o*a,z=o*c,W=this.elements;return W[0]=1-(f+b),W[1]=d-z,W[2]=h+S,W[3]=d+z,W[4]=1-(l+b),W[5]=m-x,W[6]=h-S,W[7]=m+x,W[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new Jc);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const Dwe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class xe{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new xe);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return t.x=a*o-c*r,t.y=c*i-s*o,t.z=s*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new xe(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new xe(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Jc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new xe);const t=this.x,i=this.y,r=this.z;let o=Math.sqrt(t*t+i*i+r*r);return o>0?(o=1/o,e.x=t*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new xe);const r=this.y,o=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*o,t}vmul(e,t){return void 0===t&&(t=new xe),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new xe),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new xe),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=kwe,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=Rwe;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*t,i.y=o+(e.y-o)*t,i.z=s+(e.z-s)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(HH),HH.almostEquals(e,t)}clone(){return new xe(this.x,this.y,this.z)}}xe.ZERO=new xe(0,0,0),xe.UNIT_X=new xe(1,0,0),xe.UNIT_Y=new xe(0,1,0),xe.UNIT_Z=new xe(0,0,1);const kwe=new xe,Rwe=new xe,HH=new xe;class hr{constructor(e){void 0===e&&(e={}),this.lowerBound=new xe,this.upperBound=new xe,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,GH),l=GH),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return t&&(t.vadd(o,o),t.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new hr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||t.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||t.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||t.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return t.x<=r.x&&i.x>=o.x&&t.y<=r.y&&i.y>=o.y&&t.z<=r.z&&i.z>=o.z}getCorners(e,t,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),t.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,t){const i=WH;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToLocal(m,m)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=WH;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToWorld(m,m)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,o=1/t.y,s=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,f=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,f)),b=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,f));return!(b<0||m>b)}}const GH=new xe,WH=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe];class Owe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class io{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new xe),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=Pwe;e.tangents(i,Nwe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new io);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return t.x=i*d+s*a+r*l-o*c,t.y=r*d+s*c+o*a-i*l,t.z=o*d+s*l+i*c-r*a,t.w=s*d-i*a-r*c-o*l,t}inverse(e){void 0===e&&(e=new io);const t=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(t*t+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new io),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new xe);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;return t.x=d*l+m*-s+h*-c-f*-a,t.y=h*l+m*-a+f*-s-d*-c,t.z=f*l+m*-c+d*-a-h*-s,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,o;void 0===t&&(t="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new io(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new io);const r=this.x,o=this.y,s=this.z,a=this.w;let f,m,b,x,S,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),b=Math.sin(f),x=Math.sin((1-t)*f)/b,S=Math.sin(t*f)/b):(x=1-t,S=t),i.x=x*r+S*c,i.y=x*o+S*l,i.z=x*s+S*d,i.w=x*a+S*h,i}integrate(e,t,i,r){void 0===r&&(r=new io);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,f=.5*t;return r.x+=f*(o*h+s*d-a*l),r.y+=f*(s*h+a*c-o*d),r.z+=f*(a*h+o*l-s*c),r.w+=f*(-o*c-s*l-a*d),r}}const Pwe=new xe,Nwe=new xe,Lwe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let pn=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=Lwe,n})();class Pi{constructor(e){void 0===e&&(e={}),this.position=new xe,this.quaternion=new io,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Pi.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Pi.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new xe),i.vsub(e,r),t.conjugate(YH),YH.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new xe),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new xe),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new xe),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const YH=new io;class ip extends pn{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:pn.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new xe;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){t[s[c]].vsub(t[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new xe;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];ip.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const o=new xe,s=new xe;t.vsub(e,s),i.vsub(t,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,o,s,a,c,l){const d=new xe;let h=-1,f=-Number.MAX_VALUE;for(let b=0;b<i.faces.length;b++){d.copy(i.faceNormals[b]),o.vmult(d,d);const x=d.dot(s);x>f&&(f=x,h=b)}const m=[];for(let b=0;b<i.faces[h].length;b++){const x=i.vertices[i.faces[h][b]],S=new xe;S.copy(x),o.vmult(S,S),r.vadd(S,S),m.push(S)}h>=0&&this.clipFaceAgainstHull(s,e,t,m,a,c,l)}findSeparatingAxis(e,t,i,r,o,s,a,c){const l=new xe,d=new xe,h=new xe,f=new xe,m=new xe,b=new xe;let x=Number.MAX_VALUE;const S=this;if(S.uniqueAxes)for(let z=0;z!==S.uniqueAxes.length;z++){i.vmult(S.uniqueAxes[z],l);const W=S.testSepAxis(l,e,t,i,r,o);if(!1===W)return!1;W<x&&(x=W,s.copy(l))}else{const z=a?a.length:S.faces.length;for(let W=0;W<z;W++){l.copy(S.faceNormals[a?a[W]:W]),i.vmult(l,l);const se=S.testSepAxis(l,e,t,i,r,o);if(!1===se)return!1;se<x&&(x=se,s.copy(l))}}if(e.uniqueAxes)for(let z=0;z!==e.uniqueAxes.length;z++){o.vmult(e.uniqueAxes[z],d);const W=S.testSepAxis(d,e,t,i,r,o);if(!1===W)return!1;W<x&&(x=W,s.copy(d))}else{const z=c?c.length:e.faces.length;for(let W=0;W<z;W++){d.copy(e.faceNormals[c?c[W]:W]),o.vmult(d,d);const se=S.testSepAxis(d,e,t,i,r,o);if(!1===se)return!1;se<x&&(x=se,s.copy(d))}}for(let z=0;z!==S.uniqueEdges.length;z++){i.vmult(S.uniqueEdges[z],f);for(let W=0;W!==e.uniqueEdges.length;W++)if(o.vmult(e.uniqueEdges[W],m),f.cross(m,b),!b.almostZero()){b.normalize();const ue=S.testSepAxis(b,e,t,i,r,o);if(!1===ue)return!1;ue<x&&(x=ue,s.copy(b))}}return r.vsub(t,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,t,i,r,o,s){ip.project(this,e,i,r,jO),ip.project(t,e,o,s,UO);const c=jO[0],l=jO[1],d=UO[0],h=UO[1];if(c<h||d<l)return!1;const f=c-h,m=d-l;return f<m?f:m}calculateLocalInertia(e,t){const i=new xe,r=new xe;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*s*2*s+2*a*2*a),t.y=1/12*e*(2*o*2*o+2*a*2*a),t.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,o,s,a){const c=new xe,l=new xe,d=new xe,h=new xe,f=new xe,m=new xe,b=new xe,x=new xe,S=this,W=r,ue=[];let se=-1,De=Number.MAX_VALUE;for(let ht=0;ht<S.faces.length;ht++){c.copy(S.faceNormals[ht]),i.vmult(c,c);const yt=c.dot(e);yt<De&&(De=yt,se=ht)}if(se<0)return;const Ne=S.faces[se];Ne.connectedFaces=[];for(let ht=0;ht<S.faces.length;ht++)for(let yt=0;yt<S.faces[ht].length;yt++)-1!==Ne.indexOf(S.faces[ht][yt])&&ht!==se&&-1===Ne.connectedFaces.indexOf(ht)&&Ne.connectedFaces.push(ht);const ot=Ne.length;for(let ht=0;ht<ot;ht++){const yt=S.vertices[Ne[ht]];yt.vsub(S.vertices[Ne[(ht+1)%ot]],l),d.copy(l),i.vmult(d,d),t.vadd(d,d),h.copy(this.faceNormals[se]),i.vmult(h,h),t.vadd(h,h),d.cross(h,f),f.negate(f),m.copy(yt),i.vmult(m,m),t.vadd(m,m);const ft=Ne.connectedFaces[ht];b.copy(this.faceNormals[ft]);const mt=this.getPlaneConstantOfFace(ft);x.copy(b),i.vmult(x,x);const Lt=mt-x.dot(t);for(this.clipFaceAgainstPlane(W,ue,x,Lt);W.length;)W.shift();for(;ue.length;)W.push(ue.shift())}b.copy(this.faceNormals[se]);const ut=this.getPlaneConstantOfFace(se);x.copy(b),i.vmult(x,x);const Ke=ut-x.dot(t);for(let ht=0;ht<W.length;ht++){let yt=x.dot(W[ht])+Ke;yt<=o&&(console.log(`clamped: depth=${yt} to minDist=${o}`),yt=o),yt<=s&&yt<=1e-6&&a.push({point:W[ht],normal:x,depth:yt})}}clipFaceAgainstPlane(e,t,i,r){let o,s;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new xe;h.copy(l),t.push(h)}else{const h=new xe;c.lerp(l,o/(o-s),h),t.push(h)}else if(s<0){const h=new xe;c.lerp(l,o/(o-s),h),t.push(h),t.push(l)}c=l,o=s}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new xe);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)t.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>t.x&&(t.x=o.x),o.y<e.y?e.y=o.y:o.y>t.y&&(t.y=o.y),o.z<e.z?e.z=o.z:o.z>t.z&&(t.z=o.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new xe);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==t;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const o=this.vertices;let s,a,c,l,d,h,f=new xe;for(let m=0;m<o.length;m++)f.copy(o[m]),t.vmult(f,f),e.vadd(f,f),(void 0===s||f.x<s)&&(s=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===d||f.y>d)&&(d=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new xe);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let o=0;o<i;o++){const s=r[o];t.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];t.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new xe;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],d=new xe;e.vsub(l,d);const h=c.dot(d),f=new xe;s.vsub(l,f);const m=c.dot(f);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,t,i,r,o){const s=e.vertices.length,a=Bwe;let c=0,l=0;const d=jwe,h=e.vertices;d.setZero(),Pi.vectorToLocalFrame(i,r,t,a),Pi.pointToLocalFrame(i,r,d,d);const f=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const b=h[m].dot(a);b>c&&(c=b),b<l&&(l=b)}if(l-=f,c-=f,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const jO=[],UO=[],Bwe=(new xe,new xe),jwe=new xe;class gA extends pn{constructor(e){super({type:pn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=xe,o=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new ip({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new xe),gA.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let o=0;o!==i.length;o++)t.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)yh.set(o[s][0],o[s][1],o[s][2]),t.vmult(yh,yh),e.vadd(yh,yh),i(yh.x,yh.y,yh.z)}calculateWorldAABB(e,t,i,r){const o=this.halfExtents;Jl[0].set(o.x,o.y,o.z),Jl[1].set(-o.x,o.y,o.z),Jl[2].set(-o.x,-o.y,o.z),Jl[3].set(-o.x,-o.y,-o.z),Jl[4].set(o.x,-o.y,-o.z),Jl[5].set(o.x,o.y,-o.z),Jl[6].set(-o.x,o.y,-o.z),Jl[7].set(o.x,-o.y,o.z);const s=Jl[0];t.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=Jl[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const yh=new xe,Jl=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe];class mn extends Owe{constructor(e){void 0===e&&(e={}),super(),this.id=mn.idCounter++,this.index=-1,this.world=null,this.vlambda=new xe,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new xe,this.previousPosition=new xe,this.interpolatedPosition=new xe,this.initPosition=new xe,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new xe,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new xe,this.force=new xe;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?mn.STATIC:mn.DYNAMIC,typeof e.type==typeof mn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=mn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new xe,this.quaternion=new io,this.initQuaternion=new io,this.previousQuaternion=new io,this.interpolatedQuaternion=new io,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new xe,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new xe,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new xe,this.invInertia=new xe,this.invInertiaWorld=new Jc,this.invMassSolve=0,this.invInertiaSolve=new xe,this.invInertiaWorldSolve=new Jc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new xe(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new xe(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new hr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new xe,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=mn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===mn.SLEEPING&&this.dispatchEvent(mn.wakeupEvent)}sleep(){this.sleepState=mn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===mn.AWAKE&&i<r?(this.sleepState=mn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(mn.sleepyEvent)):t===mn.SLEEPY&&i>r?this.wakeUp():t===mn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(mn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===mn.SLEEPING||this.type===mn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new xe),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new xe,o=new io;return t&&r.copy(t),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=t[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=Uwe,s=Vwe,a=this.quaternion,c=this.aabb,l=zwe;for(let d=0;d!==r;d++){const h=e[d];a.vmult(t[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=Hwe,r=Gwe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new xe),this.type!==mn.DYNAMIC)return;this.sleepState===mn.SLEEPING&&this.wakeUp();const i=$we;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new xe),this.type!==mn.DYNAMIC)return;const i=Ywe,r=Xwe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===mn.DYNAMIC&&(this.sleepState===mn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new xe),this.type!==mn.DYNAMIC)return;this.sleepState===mn.SLEEPING&&this.wakeUp();const i=t,r=Kwe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=qwe;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new xe),this.type!==mn.DYNAMIC)return;const i=Jwe,r=Zwe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Qwe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),gA.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new xe;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==mn.DYNAMIC&&this.type!==mn.KINEMATIC||this.sleepState===mn.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*f.x,r.y+=a.y*m*f.y,r.z+=a.z*m*f.z;const b=h.elements,x=this.angularFactor,S=c.x*x.x,z=c.y*x.y,W=c.z*x.z;o.x+=e*(b[0]*S+b[1]*z+b[2]*W),o.y+=e*(b[3]*S+b[4]*z+b[5]*W),o.z+=e*(b[6]*S+b[7]*z+b[8]*W),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}mn.idCounter=0,mn.COLLIDE_EVENT_NAME="collide",mn.DYNAMIC=1,mn.STATIC=2,mn.KINEMATIC=4,mn.AWAKE=0,mn.SLEEPY=1,mn.SLEEPING=2,mn.wakeupEvent={type:"wakeup"},mn.sleepyEvent={type:"sleepy"},mn.sleepEvent={type:"sleep"};const Uwe=new xe,Vwe=new io,zwe=new hr,Hwe=new Jc,Gwe=new Jc,$we=(new Jc,new xe),Ywe=new xe,Xwe=new xe,Kwe=new xe,qwe=new xe,Jwe=new xe,Zwe=new xe,Qwe=new xe;new xe,new xe,new io,new xe,new xe,new xe,new xe;class W0{constructor(){this.rayFromWorld=new xe,this.rayToWorld=new xe,this.hitNormalWorld=new xe,this.hitPointWorld=new xe,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let XH,KH,qH,JH,ZH,QH,eG;XH=pn.types.SPHERE,KH=pn.types.PLANE,qH=pn.types.BOX,JH=pn.types.CYLINDER,ZH=pn.types.CONVEXPOLYHEDRON,QH=pn.types.HEIGHTFIELD,eG=pn.types.TRIMESH;class Co{get[XH](){return this._intersectSphere}get[KH](){return this._intersectPlane}get[qH](){return this._intersectBox}get[JH](){return this._intersectConvex}get[ZH](){return this._intersectConvex}get[QH](){return this._intersectHeightfield}get[eG](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new xe),void 0===t&&(t=new xe),this.from=e.clone(),this.to=t.clone(),this.direction=new xe,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Co.ANY,this.result=new W0,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||Co.ANY,this.result=t.result||new W0,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(tG),GO.length=0,e.broadphase.aabbQuery(e,tG,GO),this.intersectBodies(GO),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=sxe,o=axe;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function Exe(n,e,t){t.vsub(n,rp);const i=rp.dot(e);return e.scale(i,bA),bA.vadd(n,bA),t.distanceTo(bA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,o)}_intersectPlane(e,t,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new xe(0,0,1);t.vmult(l,l);const d=new xe;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const b=new xe,x=new xe,S=new xe;s.vsub(i,b);const z=-l.dot(b)/m;c.scale(z,x),s.vadd(x,S),this.reportIntersection(l,S,o,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,o=this.from;t.x=Math.min(r.x,o.x),t.y=Math.min(r.y,o.y),t.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,t,i,r,o){const s=cxe;s.from.copy(this.from),s.to.copy(this.to),Pi.pointToLocalFrame(i,t,s.from,s.from),Pi.pointToLocalFrame(i,t,s.to,s.to),s.updateDirection();const a=lxe;let c,l,d,h;c=l=0,d=h=e.data.length-1;const f=new hr;s.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let b=l;b<h;b++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,b,f),f.overlapsRay(s)){if(e.getConvexTrianglePillar(m,b,!1),Pi.pointToWorldFrame(i,t,e.pillarOffset,_A),this._intersectConvex(e.pillarConvex,t,_A,r,o,nG),this.result.shouldStop)return;e.getConvexTrianglePillar(m,b,!0),Pi.pointToWorldFrame(i,t,e.pillarOffset,_A),this._intersectConvex(e.pillarConvex,t,_A,r,o,nG)}}}_intersectSphere(e,t,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),f=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=dxe,b=uxe;if(!(f<0))if(0===f)s.lerp(a,f,m),m.vsub(i,b),b.normalize(),this.reportIntersection(b,m,o,r,-1);else{const x=(-d-Math.sqrt(f))/(2*l),S=(-d+Math.sqrt(f))/(2*l);if(x>=0&&x<=1&&(s.lerp(a,x,m),m.vsub(i,b),b.normalize(),this.reportIntersection(b,m,o,r,-1)),this.result.shouldStop)return;S>=0&&S<=1&&(s.lerp(a,S,m),m.vsub(i,b),b.normalize(),this.reportIntersection(b,m,o,r,-1))}}_intersectConvex(e,t,i,r,o,s){const a=hxe,c=iG,l=s&&s.faceList||null,d=e.faces,h=e.vertices,f=e.faceNormals,m=this.direction,b=this.from,S=b.distanceTo(this.to),z=l?l.length:d.length,W=this.result;for(let ue=0;!W.shouldStop&&ue<z;ue++){const se=l?l[ue]:ue,De=d[se],Ne=f[se],ot=t,ut=i;c.copy(h[De[0]]),ot.vmult(c,c),c.vadd(ut,c),c.vsub(b,c),ot.vmult(Ne,a);const Ke=m.dot(a);if(Math.abs(Ke)<this.precision)continue;const ht=a.dot(c)/Ke;if(!(ht<0)){m.scale(ht,xa),xa.vadd(b,xa),Zc.copy(h[De[0]]),ot.vmult(Zc,Zc),ut.vadd(Zc,Zc);for(let yt=1;!W.shouldStop&&yt<De.length-1;yt++){Zl.copy(h[De[yt]]),Ql.copy(h[De[yt+1]]),ot.vmult(Zl,Zl),ot.vmult(Ql,Ql),ut.vadd(Zl,Zl),ut.vadd(Ql,Ql);const Tt=xa.distanceTo(b);!Co.pointInTriangle(xa,Zc,Zl,Ql)&&!Co.pointInTriangle(xa,Zl,Zc,Ql)||Tt>S||this.reportIntersection(a,xa,o,r,se)}}}}_intersectTrimesh(e,t,i,r,o,s){const a=mxe,c=wxe,l=xxe,d=iG,h=gxe,f=_xe,m=bxe,b=vxe,x=yxe,S=e.indices,z=this.from,W=this.to,ue=this.direction;l.position.copy(i),l.quaternion.copy(t),Pi.vectorToLocalFrame(i,t,ue,h),Pi.pointToLocalFrame(i,t,z,f),Pi.pointToLocalFrame(i,t,W,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,m.vsub(f,h),h.normalize();const se=f.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let De=0,Ne=c.length;!this.result.shouldStop&&De!==Ne;De++){const ot=c[De];e.getNormal(ot,a),e.getVertex(S[3*ot],Zc),Zc.vsub(f,d);const ut=h.dot(a),Ke=a.dot(d)/ut;if(Ke<0)continue;h.scale(Ke,xa),xa.vadd(f,xa),e.getVertex(S[3*ot+1],Zl),e.getVertex(S[3*ot+2],Ql);const ht=xa.distanceSquared(f);!Co.pointInTriangle(xa,Zl,Zc,Ql)&&!Co.pointInTriangle(xa,Zc,Zl,Ql)||ht>se||(Pi.vectorToWorldFrame(t,a,x),Pi.pointToWorldFrame(i,t,xa,b),this.reportIntersection(x,b,o,r,ot))}c.length=0}reportIntersection(e,t,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case Co.ALL:this.hasHit=!0,l.set(s,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case Co.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c));break;case Co.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,rp),i.vsub(t,$0),e.vsub(t,WO);const o=rp.dot(rp),s=rp.dot($0),a=rp.dot(WO),c=$0.dot($0),l=$0.dot(WO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}Co.CLOSEST=1,Co.ANY=2,Co.ALL=4;const tG=new hr,GO=[],$0=new xe,WO=new xe,sxe=new xe,axe=new io,xa=new xe,Zc=new xe,Zl=new xe,Ql=new xe;new xe,new W0;const nG={faceList:[0]},_A=new xe,cxe=new Co,lxe=[],dxe=new xe,uxe=new xe,hxe=new xe,iG=(new xe,new xe,new xe),mxe=new xe,gxe=new xe,_xe=new xe,bxe=new xe,yxe=new xe,vxe=new xe;new hr;const wxe=[],xxe=new Pi,rp=new xe,bA=new xe;new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new Co,new xe,new xe,new xe,new xe(1,0,0),new xe(0,1,0),new xe(0,0,1),new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new hr,new xe,new hr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new hr,new xe,new Pi,new hr,new xe,new xe,new xe,new xe,new xe,new io,new io,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new hr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new io,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new hr,new Co;const Lo=globalThis.performance||{};if(!Lo.now){let n=Date.now();Lo.timing&&Lo.timing.navigationStart&&(n=Lo.timing.navigationStart),Lo.now=()=>Date.now()-n}new xe;var cp=g(1979);function ru(n={}){const{connector:e=(()=>new Yt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),s=c=void 0,d=h=!1},b=()=>{const x=s;m(),x?.unsubscribe()};return Ti((x,S)=>{l++,!h&&!d&&f();const z=c=c??e();S.add(()=>{l--,0===l&&!h&&!d&&(a=KO(b,r))}),z.subscribe(S),!s&&l>0&&(s=new jo({next:W=>z.next(W),error:W=>{h=!0,f(),a=KO(m,t,W),z.error(W)},complete:()=>{d=!0,f(),a=KO(m,i),z.complete()}}),Eo(x).subscribe(s))})(o)}}function KO(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new jo({next:()=>{i.unsubscribe(),n()}});return Eo(e(...t)).subscribe(i)}function $g(n,e,t){e||(e=new Kn(Kn.IDENTITY));const i=new Kn(Kn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const o=new Kn(Kn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(o)}n.scale&&i.scale(n.scale)}const r=new Kn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const o of n.nodes||n.children||[])if(!1===$g(o,r,t))return!1;return!0}function IG(){u6([vH,zg])}function DG(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||$g(r,new Kn(Kn.IDENTITY),(o,s)=>o!==t||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function qO(n,e){return JO.apply(this,arguments)}function JO(){return JO=Ut(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(o=>o.blob())):fetch(t);const r=yield GE(i,zg,{DracoLoader:_O,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),DG(n.scenegraphNode,r)}),JO.apply(this,arguments)}function MAe(n,e){return ZO.apply(this,arguments)}function ZO(){return ZO=Ut(function*(n,e){return DG(n,yield e)}),ZO.apply(this,arguments)}function QO(){return QO=Ut(function*(n){console.log("Starting Collisioning");const e=n.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new Kn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new hr({lowerBound:new xe(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new xe(...l.map((d,h)=>Math.max(d,c[h])))})}}),t=[];for(const s of n.filter(a=>!!a.scenegraph)){const a=yield I0(s.scenegraph,zg,{DracoLoader:_O,decompress:!0,postProcess:!0});for(const c of a.scenes)$g(c,new Kn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new hr({lowerBound:new xe(...f.map((b,x)=>Math.min(b,m[x]))),upperBound:new xe(...m.map((b,x)=>Math.max(b,f[x])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of t)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),QO.apply(this,arguments)}function eP(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new bwe;break;case"cone":i=new xwe;break;case"cylinder":i=new Ewe;break;default:i=new Iwe}return new ER({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:ki.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function kG(n,e,t){if(e&&0!==e.length)return new yR({id:n,pickable:!0,data:e.map(i=>({...i,position:new Kn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}let IAe=(()=>{class n extends Hk{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),IG()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const s of t.data){const a=s.geometry??"cube";s.scenegraph?i.scenegraph.push(s):void 0!==i[a]&&i[a].push(s)}const r={};for(const s of i.scenegraph)s.scenegraph&&s.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,s.scenegraph)&&(r[s.scenegraph]=qO({scenegraph:s.scenegraph},n.gltfCache));const o=[];for(const[s,a]of Object.entries(i))if("scenegraph"===s)for(const c of a)o.push(new BO({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:ki.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?MAe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===s?(o.push(kG("text",a.filter(c=>c.unpickable),{pickable:!1})),o.push(kG("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===s?o.push(eP(s,a,{wireframe:!0,pickable:!1,geometry:s})):(o.push(eP(s,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:s})),o.push(eP(`${s}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:s})));return t.doCollisions&&function TAe(n){QO.apply(this,arguments)}(t.data),o.filter(s=>!!s)}getPickingInfo(t){return t.info}}return n})();function RG(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),RG(t,e);return e}function tP(){return tP=Ut(function*(n,e,t,i){IG();const r=yield qO({scenegraph:n,scenegraphNode:t},i),o={},s=[];for(const a of r.scenes)$g(a,e=new Kn(e||Kn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Kn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:d["@id"],transformMatrix:new Kn(e||Kn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new hr({lowerBound:new xe(...f.map((b,x)=>Math.min(b,m[x]))),upperBound:new xe(...m.map((b,x)=>Math.max(b,f[x])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of RG(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new xe(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new Kn(Kn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),tP.apply(this,arguments)}let kAe=(()=>{class n{constructor(t){this.deckProps=t,this.bodyUILayer=new IAe({}),this.nodeClickSubject=new Yt,this.nodeHoverStartSubject=new Yt,this.nodeHoverStopSubject=new Yt,this.sceneRotationSubject=new Ni([0,0]),this.nodeDragStartSubject=new Yt,this.nodeDragSubject=new Yt,this.nodeDragEndSubject=new Yt,this.nodeClick$=this.nodeClickSubject.pipe(ru()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(ru()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(ru()),this.sceneRotation$=this.sceneRotationSubject.pipe(ru()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(ru()),this.nodeDrag$=this.nodeDragSubject.pipe(ru()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(ru());const i={...t,views:["orthographic"===t.camera?new Yk({flipY:!1,near:-1e3}):new w6({orbitAxis:"Y"})],controller:t.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};t.legacyLighting&&(i.effects=[new Jk({ambientLight:new x6({color:[255,255,255],intensity:10})})]),this.deck=new pR(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:t.minRotationX??-15,maxRotationX:t.maxRotationX??15,target:t.target??[.5,.5,0],rotationX:0,rotationOrbit:t.rotation??0,zoom:t.zoom??9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){var t=this;return Ut(function*(){for(;!t.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(t){if(t?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of t)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new Kn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function DAe(n,e,t,i){return tP.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",t),(t=t.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new Kn(t.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:t}})}setRotationX(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:t}})}setZoom(t){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:t}})}setTarget(t){this.deck.setProps({viewState:{...this.deck.props.viewState,target:t}})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object?.["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){t.picked&&t.object?.["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(t){if(t.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...t.viewState}}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){t?.object?.["@id"]&&r.next({node:t.object,info:t,e:i})}}return oi([cp.ak],n.prototype,"_onHover",null),oi([cp.ak],n.prototype,"_onClick",null),oi([cp.ak],n.prototype,"_onViewStateChange",null),oi([cp.ak],n.prototype,"_onDragStart",null),oi([cp.ak],n.prototype,"_onDrag",null),oi([cp.ak],n.prototype,"_onDragEnd",null),n})();const Z0=ze(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:OAe}=Array,{getPrototypeOf:PAe,prototype:NAe,keys:LAe}=Object;function OG(n){if(1===n.length){const e=n[0];if(OAe(e))return{args:e,keys:null};if(function FAe(n){return n&&"object"==typeof n&&PAe(n)===NAe}(e)){const t=LAe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:BAe}=Array;function CA(n){return en(e=>function jAe(n,e){return BAe(e)?n(...e):n(e)}(n,e))}function PG(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function MA(...n){const e=n0(n),t=dV(n),{args:i,keys:r}=OG(n);if(0===i.length)return ho([],e);const o=new Xe(function UAe(n,e,t=Vo){return i=>{NG(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)NG(e,()=>{const l=ho(n[c],e);let d=!1;l.subscribe(_i(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>PG(r,s):Vo));return t?o.pipe(CA(t)):o}function NG(n,e,t){n?Gd(t,n,e):e()}let LG=(()=>{class n{constructor(){this.bootstrap$=new Uf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zAe(n,e){return n===e}function iP(n,e=zAe){let t=null,i=null;function r(){return function HAe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let GAe=(()=>{class n{static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n._value={},n})();const FG=new _t("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>GAe.pop()}),BG=new _t("\u0275NGXS_STATE_FACTORY"),jG=new _t("\u0275NGXS_STATE_CONTEXT_FACTORY");function sn(...n){return ho(n,n0(n))}function Q0(...n){const e=dV(n),{args:t,keys:i}=OG(n),r=new Xe(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;Eo(t[d]).subscribe(_i(o,f=>{h||(h=!0,l--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?PG(i,a):a),o.complete())}))}});return e?r.pipe(CA(e)):r}function vh(n,e){const t=ye(n)?n:()=>n,i=r=>r.error(t());return new Xe(e?r=>e.schedule(i,0,r):i)}function lp(n){return!!n&&(n instanceof Xe||ye(n.lift)&&ye(n.subscribe))}function Ri(n,e){return Ti((t,i)=>{let r=0;t.subscribe(_i(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ta(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,ru({connector:()=>new Uf(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function kr(n){return n<=0?()=>Qs:Ti((e,t)=>{let i=0;e.subscribe(_i(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function UG(n,e){return e?t=>t.pipe(UG((i,r)=>Eo(n(i,r)).pipe(en((o,s)=>e(i,o,r,s))))):Ti((t,i)=>{let r=0,o=null,s=!1;t.subscribe(_i(i,a=>{o||(o=_i(i,void 0,()=>{o=null,s&&i.complete()}),Eo(n(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function Yg(n){return Ti((e,t)=>{let i=!1;e.subscribe(_i(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Qc(n){return Ti((e,t)=>{let o,i=null,r=!1;i=e.subscribe(_i(t,void 0,void 0,s=>{o=Eo(n(s,Qc(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function jr(n){return Ti((e,t)=>{Eo(n).subscribe(_i(t,()=>t.complete(),tt)),!t.closed&&e.subscribe(t)})}function wh(n,e=Vo){return n=n??WAe,Ti((t,i)=>{let r,o=!0;t.subscribe(_i(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function WAe(n,e){return n===e}function Xi(n,e,t){const i=ye(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ti((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(_i(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Vo}function ev(...n){return function $Ae(){return iE(1)}()(ho(n,n0(n)))}function ed(...n){const e=n0(n);return Ti((t,i)=>{(e?ev(n,t,e):ev(n,t)).subscribe(i)})}function dp(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const WG=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?t:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),n),n},oP=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),sP=n=>n&&"object"==typeof n&&!Array.isArray(n),aP=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(sP(n)&&sP(t))for(const i in t)sP(t[i])?(n[i]||Object.assign(n,{[i]:{}}),aP(n[i],t[i])):Object.assign(n,{[i]:t[i]});return aP(n,...e)};let $G=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return PD(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return nn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return nn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}}return n.\u0275fac=function(t){return new(t||n)(rt(nn),rt(Na))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const YG=new _t("ROOT_OPTIONS"),XG=new _t("ROOT_STATE_TOKEN"),KG=new _t("FEATURE_STATE_TOKEN"),qG=new _t("NGXS_PLUGINS"),ou="NGXS_META",JG="NGXS_OPTIONS_META",cP="NGXS_SELECTOR_META";let IA=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=$G}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ct({token:n,factory:function(t){let i=null;return t?i=new t:(r=rt(YG),i=aP(new n,r)),i;var r},providedIn:"root"}),n})();class nSe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let iSe=(()=>{class n{enter(t){return t()}leave(t){return t()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZG=new _t("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),rSe=new _t("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=Rt(kd),e=n.get(ZG);return n.get(e||(typeof Oi.Zone<"u"?$G:iSe))}});function lP(n){if(!n.hasOwnProperty(ou)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,ou,{value:e})}return up(n)}function up(n){return n[ou]}function DA(n){return n[cP]}function QG(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function oSe(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function sSe(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let o=t;for(;++i<r;)o=o+" && "+(t=t+"."+e[i]);return new Function("store","return "+o+";")}(n)}function hSe(...n){return function Xg(n,e,t=mSe){const i=function gSe(n){return n.reduce((e,t)=>(e[dp(t)]=!0,e),{})}(n),r=e&&function _Se(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(o){return o.pipe(function fSe(n,e){return Ri(t=>{const i=dp(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function mSe(){return en(n=>n.action)}function kA(n){return e=>new Xe(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let e9=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(rt(rSe))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t9(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const o=e.pop();o&&n(...o)}t=!1}}}class bSe extends Yt{constructor(){super(...arguments),this._orderedNext=t9(e=>super.next(e))}next(e){this._orderedNext(e)}}class ySe extends Ni{constructor(e){super(e),this._orderedNext=t9(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let n9=(()=>{class n extends bSe{ngOnDestroy(){this.complete()}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Bi(n)))(i||n)}})(),n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const i9=n=>(...e)=>n.shift()(...e,(...i)=>i9(n)(...i));let r9=(()=>{class n{constructor(t){this._injector=t,this._errorHandler=null}reportErrorSafely(t){null===this._errorHandler&&(this._errorHandler=this._injector.get(Ba));try{this._errorHandler.handleError(t)}catch{}}}return n.\u0275fac=function(t){return new(t||n)(rt(ir))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uP=(()=>{class n extends ySe{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hP=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(rt(n,12),rt(qG,8))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),n})(),o9=(()=>{class n extends Yt{}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Bi(n)))(i||n)}})(),n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wSe=(()=>{class n{constructor(t,i,r,o,s,a){this._actions=t,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function vSe(n,e){return t=>{let i=!1;return t.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>n.reportErrorSafely(r))}))}}),new Xe(r=>(i=!0,t.pipe(kA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?sn(this._stateStream.getValue()):Q0(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return i9([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(ta())}getActionResultStream(t){return this._actionResults.pipe(Ri(i=>i.action===t&&"DISPATCHED"!==i.status),kr(1),ta())}createDispatchObservable(t){return t.pipe(UG(i=>{switch(i.status){case"SUCCESSFUL":return sn(this._stateStream.getValue());case"ERRORED":return vh(i.error);default:return Qs}})).pipe(ta())}}return n.\u0275fac=function(t){return new(t||n)(rt(n9),rt(o9),rt(hP),rt(uP),rt(e9),rt(r9))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tv=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(rt(uP),rt(wSe),rt(IA))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fP=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>l9(i.getState(),t.path),patchState(r){const o=i.getState(),s=function xSe(n){return e=>{const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(r);return c9(i,o,s,t.path)},setState(r){const o=i.getState();return function TA(n){return"function"==typeof n}(r)?c9(i,o,r,t.path):a9(i,o,r,t.path)},dispatch:r=>i.dispatch(r)}}}return n.\u0275fac=function(t){return new(t||n)(rt(tv))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a9(n,e,t,i){const r=WG(e,i,t);return n.setState(r),r}function c9(n,e,t,i){return a9(n,e,t(l9(e,i)),i)}function l9(n,e){return oP(n,e)}new RegExp("^[a-zA-Z0-9_]+$");let d9=(()=>{class n{}return n.type="@@INIT",n})(),u9=(()=>{class n{constructor(t){this.addedStates=t}}return n.type="@@UPDATE_STATE",n})();new _t("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Kg=(()=>{class n{constructor(t,i,r,o,s,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=iP(()=>{const l=this;function d(f){const m=l.statePaths[f];return m?QG(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let m=d(f);return m||((...b)=>(m||(m=d(f)),m?m(...b):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(t){let i=t;return Array.isArray(t)?i=t.slice():function uSe(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?i=Object.assign({},t):void 0===t&&(i={}),i}ngOnDestroy(){var t;null===(t=this._actionsSubscription)||void 0===t||t.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function aSe(n){const e=t=>n.find(r=>r===t)[ou].name;return n.reduce((t,i)=>{const{name:r,children:o}=i[ou];return t[r]=(o||[]).map(e),t},{})}(i),o=function dSe(n){const e=[],t={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),t[r]=!0,n[r].forEach(s=>{t[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),s=function lSe(n,e={}){const t=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=t(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function cSe(n){return n.reduce((e,t)=>(e[t[ou].name]=t,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],f=d[ou];this.addRuntimeInfoToMeta(f,h);const m={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(d),defaults:n._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((s,a)=>WG(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new Yt;this._actionsSubscription=this._actions.pipe(Ri(i=>"DISPATCHED"===i.status),Ao(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe(en(()=>({action:r,status:"SUCCESSFUL"})),Yg({action:r,status:"CANCELED"}),Qc(o=>sn({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=dp(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=ho(h)),lp(h)?(h=h.pipe(Ao(f=>f instanceof Promise?ho(f):lp(f)?f:sn(f)),Yg({})),l.options.cancelUncompleted&&(h=h.pipe(jr(t.pipe(hSe(i)))))):h=sn({}).pipe(ta()),o.push(h)}catch(h){o.push(vh(h))}s=!0}}return o.length||o.push(sn({})),Q0(o)}addToStatesMap(t){const i=[],r=this.statesByName;for(const o of t){const s=up(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==oP(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(rt(ir),rt(IA),rt(n,12),rt(n9),rt(o9),rt(fP),rt(FG,8))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),n})();function h9(n){const e=DA(n)||up(n);return e&&e.makeRootSelector||(()=>n)}let td=(()=>{class n{constructor(t,i,r,o,s,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(kA(this._internalExecutionStrategy),ta({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(en(i),Qc(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?sn(void 0):vh(r)}),wh(),kA(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(kr(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(kA(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return h9(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),t):t;this._stateStream.next(s)}}}return n.\u0275fac=function(t){return new(t||n)(rt(uP),rt(tv),rt(IA),rt(e9),rt(Kg),rt(FG,8))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OA=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.store=null,n.config=null,n.\u0275fac=function(t){return new(t||n)(rt(td),rt(IA))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f9=(()=>{class n{constructor(t,i,r,o,s){this._store=t,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new Yt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(Ri(()=>!!i),Xi(()=>this._invokeInitOnStates(i.states)),Ao(()=>this._bootstrapper.appBootstrapped$),Ri(r=>!!r),Qc(r=>(this._internalErrorReporter.reportErrorSafely(r),Qs)),jr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>oP(o,i.path)).pipe(ed(void 0),Ti((n,e)=>{let t,i=!1;n.subscribe(_i(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))}),jr(this._destroy$)).subscribe(([o,s])=>{const a=new nSe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(rt(td),rt(r9),rt(tv),rt(fP),rt(LG))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NSe=(()=>{class n{constructor(t,i,r,o,s=[],a){const c=t.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new d9,c)}}return n.\u0275fac=function(t){return new(t||n)(rt(Kg),rt(tv),rt(td),rt(OA),rt(XG,8),rt(f9))},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})(),LSe=(()=>{class n{constructor(t,i,r,o=[],s){const a=n.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new u9(c.defaults),c))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(rt(td),rt(tv),rt(Kg),rt(KG,8),rt(f9))},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})(),p9=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:NSe,providers:[Kg,hP,...t,...n.ngxsTokenProviders(t,i)]}}static forFeature(t=[]){return{ngModule:LSe,providers:[Kg,hP,...t,{provide:KG,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,i){return[{provide:ZG,useValue:i.executionStrategy},{provide:XG,useValue:t},{provide:YG,useValue:i},{provide:P1,useFactory:n.appBootstrapListenerFactory,multi:!0,deps:[LG]},{provide:jG,useExisting:fP},{provide:BG,useExisting:Kg}]}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})();function pP(n,e){return(t,i)=>{const r=lP(t.constructor);Array.isArray(n)||(n=[n]);for(const o of n){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function m9(n){return e=>{const t=e,i=lP(t),r=Object.getPrototypeOf(t),o=function FSe(n,e){return Object.assign(Object.assign({},n[JG]||{}),e)}(r,n);(function BSe(n){const{meta:e,inheritedStateClass:t,optionsWithInheritance:i}=n,{children:r,defaults:o,name:s}=i,a="string"==typeof s?s:s&&s.getName()||null;if(t.hasOwnProperty(ou)){const c=t[ou]||{};e.actions=Object.assign(Object.assign({},e.actions),c.actions)}e.children=r,e.defaults=o,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:o}),t[JG]=o}}const jSe=36;function PA(n,...e){return function(t,i){const r=i.toString(),o=`__${r}__selector`,s=function VSe(n,e,t=[]){return e=e||function zSe(n){const e=n.length-1;return n.charCodeAt(e)===jSe?n.slice(0,e):n}(n),"string"==typeof e?QG(t.length?[e,...t]:e.split("."),OA.config):e}(r,n,e);Object.defineProperties(t,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function USe(n){return OA.store||function tSe(){throw new Error("You have forgotten to import the NGXS module!")}(),OA.store.select(n)}(s))}}})}}const g9="NGXS_SELECTOR_OPTIONS_META",NA={getOptions:n=>n&&n[g9]||{},defineOptions:(n,e)=>{n&&(n[g9]=e)}};function HSe(n,e){const t=function dP(n){return n.hasOwnProperty(cP)||Object.defineProperty(n,cP,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),DA(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function GSe(n,e){return Object.assign(Object.assign(Object.assign(Object.assign({},NA.getOptions(n.containerClass)||{}),NA.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}(r,i()),t}function nv(n,e,t){const i=function RSe(n,e){const t=e&&e.containerClass,r=iP(function(...s){const a=n.apply(t,s);return a instanceof Function?iP.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=HSe(e,t);return r.makeRootSelector=function kSe(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function OSe(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),s=function PSe(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&up(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>h9(a)(n));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,n,e);return function(a){const c=r.map(l=>l(a));try{return t(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,n,i),i}function qg(n){return(e,t,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,t));const r=i?.value,o=nv(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}const Ls=new _t("NgValueAccessor");let NP;try{NP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{NP=!1}let lv,mp,LP,ar=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?nh(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!NP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Na))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qg(n){return function GCe(){if(null==lv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lv=!0}))}finally{lv=lv||!1}return lv}()?n:!!n.capture}function WCe(){if(null==mp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return mp=!1,mp;if("scrollBehavior"in document.documentElement.style)mp=!0;else{const n=Element.prototype.scrollTo;mp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return mp}function qA(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function au(n){return n.composedPath?n.composedPath()[0]:n.target}function FP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function nd(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class cMe extends At{constructor(e,t){super()}schedule(e,t=0){return this}}const ZA={setInterval(n,e,...t){const{delegate:i}=ZA;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=ZA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class UP extends cMe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return ZA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&ZA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,bt(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class uv{constructor(e,t=uv.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}uv.now=WD.now;class VP extends uv{constructor(e,t=uv.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const QA=new VP(UP),lMe=QA;function HP(n){return Ri((e,t)=>n<=t)}function Yr(n){return null!=n&&"false"!=`${n}`}function ns(n,e=0){return function dMe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function eS(n){return Array.isArray(n)?n:[n]}function Mo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function cu(n){return n instanceof vn?n.nativeElement:n}const T7=new Set;let gp,fMe=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):mMe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function pMe(n,e){if(!T7.has(n))try{gp||(gp=document.createElement("style"),e&&(gp.nonce=e),gp.setAttribute("type","text/css"),document.head.appendChild(gp)),gp.sheet&&(gp.sheet.insertRule(`@media ${n} {body{ }}`,0),T7.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ar),rt(Nb,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mMe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let gMe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Yt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return I7(eS(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=MA(I7(eS(t)).map(s=>this._registerQuery(s).observable));return o=ev(o.pipe(kr(1)),o.pipe(HP(1),function zP(n,e=QA){return Ti((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=o;o=null,i.next(l)}};function c(){const l=s+n,d=e.now();if(d<l)return r=this.schedule(void 0,l-d),void i.add(r);a()}t.subscribe(_i(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(en(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Xe(s=>{const a=c=>this._zone.run(()=>s.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(ed(i),en(({matches:s})=>({query:t,matches:s})),jr(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(rt(fMe),rt(nn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I7(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let XP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function wMe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function vMe(n){try{return n.frameElement}catch{return null}}(function IMe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===N7(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=N7(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function MMe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function TMe(n){return!function EMe(n){return function SMe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function xMe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function AMe(n){return function CMe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||P7(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ar))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P7(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function N7(n){if(!P7(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class DMe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(kr(1)).subscribe(e)}}let L7=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new DMe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(XP),rt(nn),rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function F7(n){return 0===n.buttons||0===n.detail}function B7(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const kMe=new _t("cdk-input-modality-detector-options"),RMe={ignoreKeys:[18,17,224,91,16]},e_=Qg({passive:!0,capture:!0});let OMe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Ni(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=au(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(F7(s)?"keyboard":"mouse"),this._mostRecentTarget=au(s))},this._onTouchstart=s=>{B7(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=au(s))},this._options={...RMe,...o},this.modalityDetected=this._modality.pipe(HP(1)),this.modalityChanged=this.modalityDetected.pipe(wh()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,e_),r.addEventListener("mousedown",this._onMousedown,e_),r.addEventListener("touchstart",this._onTouchstart,e_)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,e_),document.removeEventListener("mousedown",this._onMousedown,e_),document.removeEventListener("touchstart",this._onTouchstart,e_))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ar),rt(nn),rt(Zn),rt(kMe,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const NMe=new _t("cdk-focus-monitor-default-options"),rS=Qg({passive:!0,capture:!0});let t_=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Yt,this._rootNodeFocusAndBlurListener=a=>{for(let l=au(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=cu(t);if(!this._platform.isBrowser||1!==r.nodeType)return sn();const o=function YCe(n){if(function $Ce(){if(null==LP){const n=typeof document<"u"?document.head:null;LP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return LP}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new Yt,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=cu(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=cu(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=au(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,rS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,rS)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(jr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(rt(nn),rt(ar),rt(OMe),rt(Zn,8),rt(NMe,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const U7="cdk-high-contrast-black-on-white",V7="cdk-high-contrast-white-on-black",KP="cdk-high-contrast-active";let z7=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Rt(gMe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(KP,U7,V7),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(KP,U7):2===i&&t.add(KP,V7)}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ar),rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const LMe=new _t("cdk-dir-doc",{providedIn:"root",factory:function FMe(){return Rt(Zn)}}),BMe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _p=(()=>{class n{constructor(t){this.value="ltr",this.change=new qt,t&&(this.value=function jMe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?BMe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(LMe,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hv=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({})}return n})();const YMe=new _t("mat-sanity-checks",{providedIn:"root",factory:function $Me(){return!0}});let Ji=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!FP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(rt(z7),rt(YMe,8),rt(Zn))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[hv,hv]})}return n})();function $7(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function KMe(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?ns(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class QMe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Y7=Qg({passive:!0,capture:!0});class eTe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=au(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Y7)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Y7)))}}const X7={enterDuration:225,exitDuration:150},K7=Qg({passive:!0,capture:!0}),q7=["mousedown","touchstart"],J7=["mouseup","mouseleave","touchend","touchcancel"];class pv{static#e=this._eventManager=new eTe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=cu(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...X7,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function nTe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,b="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,x=new QMe(this,d,i,b);d.style.transform="scale3d(1, 1, 1)",x.state=0,i.persistent||(this._mostRecentTransientRipple=x);let S=null;return!b&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const z=()=>this._finishRippleTransition(x),W=()=>this._destroyRipple(x);d.addEventListener("transitionend",z),d.addEventListener("transitioncancel",W),S={onTransitionEnd:z,onTransitionCancel:W}}),this._activeRipples.set(x,S),(b||!l)&&this._finishRippleTransition(x),x}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...X7,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=cu(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,q7.forEach(i=>{pv._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{J7.forEach(t=>{this._triggerElement.addEventListener(t,this,K7)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=F7(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!B7(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(q7.forEach(t=>pv._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&J7.forEach(t=>e.removeEventListener(t,this,K7)))}}const n_=new _t("mat-ripple-global-options");let Ah=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new pv(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(We(vn),We(nn),We(ar),We(n_,8),We(ao,8))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Cn("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),bp=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[Ji,Ji]})}return n})();const cTe=["addListener","removeListener"],lTe=["addEventListener","removeEventListener"],dTe=["on","off"];function yp(n,e,t,i){if(ye(t)&&(i=t,t=void 0),i)return yp(n,e,t).pipe(CA(i));const[r,o]=function fTe(n){return ye(n.addEventListener)&&ye(n.removeEventListener)}(n)?lTe.map(s=>a=>n[s](e,a,t)):function uTe(n){return ye(n.addListener)&&ye(n.removeListener)}(n)?cTe.map(aW(n,e)):function hTe(n){return ye(n.on)&&ye(n.off)}(n)?dTe.map(aW(n,e)):[];if(!r&&JD(n))return Ao(s=>yp(s,e,t))(Eo(n));if(!r)throw new TypeError("Invalid event target");return new Xe(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function aW(n,e){return t=>i=>n[t](e,i)}const mv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=mv;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new At(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=mv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=mv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class mTe extends VP{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class pTe extends UP{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=mv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(mv.cancelAnimationFrame(t),e._scheduled=void 0)}});let ZP,_Te=1;const sS={};function cW(n){return n in sS&&(delete sS[n],!0)}const bTe={setImmediate(n){const e=_Te++;return sS[e]=!0,ZP||(ZP=Promise.resolve()),ZP.then(()=>cW(e)&&n()),e},clearImmediate(n){cW(n)}},{setImmediate:yTe,clearImmediate:vTe}=bTe,aS={setImmediate(...n){const{delegate:e}=aS;return(e?.setImmediate||yTe)(...n)},clearImmediate(n){const{delegate:e}=aS;return(e?.clearImmediate||vTe)(n)},delegate:void 0};new class xTe extends VP{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class wTe extends UP{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=aS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(aS.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function QP(n=0,e,t=lMe){let i=-1;return null!=e&&(lV(e)?t=e:i=e),new Xe(r=>{let o=function STe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function lW(n,e=QA){return function ATe(n){return Ti((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,t.next(l)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(_i(t,l=>{i=!0,r=l,o||Eo(n(l)).subscribe(o=_i(t,a,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>QP(n,e))}let dW=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Yt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Xe(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(lW(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):sn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ri(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=cu(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>yp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(nn),rt(ar),rt(Zn,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eN=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Yt,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(lW(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ar),rt(nn),rt(Zn,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class tN{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lS extends tN{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class dS extends tN{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class TTe extends tN{constructor(e){super(),this.element=e instanceof vn?e.nativeElement:e}}class uS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof lS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof dS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof TTe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ITe extends uS{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ir.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let i_=(()=>{class n extends uS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new qt,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(We(kl),We(fs),We(Zn))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Wn]})}return n})(),Sh=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({})}return n})();const hW=WCe();class DTe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Mo(-this._previousScrollPosition.left),e.style.top=Mo(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),hW&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hW&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class kTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Ri(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class fW{enable(){}disable(){}attach(){}}function nN(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function pW(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class RTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();nN(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let OTe=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new fW,this.close=s=>new kTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new DTe(this._viewportRuler,this._document),this.reposition=s=>new RTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(rt(dW),rt(eN),rt(nn),rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class iN{constructor(e){if(this.scrollStrategy=new fW,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class PTe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let mW=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NTe=(()=>{class n extends mW{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn),rt(nn,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LTe=(()=>{class n extends mW{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=au(o)},this._clickListener=o=>{const s=au(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const d=c[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn),rt(ar),rt(nn,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hS=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||FP()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),FP()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn),rt(ar))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class fS{constructor(e,t,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Yt,this._attachments=new Yt,this._detachments=new Yt,this._locationChanges=At.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Yt,this._outsidePointerEvents=new Yt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(kr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Mo(this._config.width),e.height=Mo(this._config.height),e.minWidth=Mo(this._config.minWidth),e.minHeight=Mo(this._config.minHeight),e.maxWidth=Mo(this._config.maxWidth),e.maxHeight=Mo(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=eS(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(jr(gc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const gW="cdk-overlay-connected-position-bounding-box",FTe=/([A-Za-z%]+)$/;class BTe{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Yt,this._resizeSubscription=At.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(gW),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),d=this._getOverlayFit(l,t,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&vp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(gW),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=bW(t);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let f=0-a,m=a+o.height-i.height,b=this._subtractOverflows(o.width,0-s,s+o.width-i.width),x=this._subtractOverflows(o.height,f,m),S=b*x;return{visibleArea:S,isCompletelyWithinViewport:o.width*o.height===S,fitsInViewportVertically:x===o.height,fitsInViewportHorizontally:b==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=_W(this._overlayRef.getConfig().minHeight),a=_W(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=bW(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new PTe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,f;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),b=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>b&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-b/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),b=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>b&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-b/2)}return{top:s,left:h,bottom:a,right:f,width:d,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Mo(i.height),r.top=Mo(i.top),r.bottom=Mo(i.bottom),r.width=Mo(i.width),r.left=Mo(i.left),r.right=Mo(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Mo(o)),s&&(r.maxWidth=Mo(s))}this._lastBoundingBoxSize=i,vp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){vp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){vp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();vp(i,this._getExactOverlayY(t,e,d)),vp(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Mo(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Mo(s.maxWidth):o&&(i.maxWidth="")),vp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Mo(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Mo(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pW(e,i),isOriginOutsideView:nN(e,i),isOverlayClipped:pW(t,i),isOverlayOutsideView:nN(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&eS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof vn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function vp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function _W(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(FTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function bW(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const yW="cdk-global-overlay-wrapper";class jTe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(yW),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let m="",b="",x="";c?x="flex-start":"center"===d?(x="center",f?b=h:m=h):f?"left"===d||"end"===d?(x="flex-end",m=h):("right"===d||"start"===d)&&(x="flex-start",b=h):"left"===d||"start"===d?(x="flex-start",m=h):("right"===d||"end"===d)&&(x="flex-end",b=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":b,t.justifyContent=x,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(yW),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let UTe=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new jTe}flexibleConnectedTo(t){return new BTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(eN),rt(Zn),rt(ar),rt(hS))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VTe=0,ia=(()=>{class n{constructor(t,i,r,o,s,a,c,l,d,h,f,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=l,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new iN(t);return s.direction=s.direction||this._directionality.value,new fS(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+VTe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Qu)),new ITe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(OTe),rt(hS),rt(kl),rt(UTe),rt(NTe),rt(ir),rt(nn),rt(Zn),rt(_p),rt(Bf),rt(LTe),rt(ao,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wp(n,e){return{type:7,name:n,definitions:e,options:{}}}function xc(n,e=null){return{type:4,styles:e,timings:n}}function Fo(n){return{type:6,styles:n,offset:null}}function Ec(n,e,t){return{type:0,name:n,styles:e,options:t}}function el(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function gv(n){return new Xe(e=>{Eo(n()).subscribe(e)})}function aN(n){return en(()=>n)}function NW(n,e){return e?t=>ev(e.pipe(kr(1),function kIe(){return Ti((n,e)=>{n.subscribe(_i(e,tt))})}()),t.pipe(NW(n))):Ao((t,i)=>Eo(n(t,i)).pipe(kr(1),aN(t)))}function LW(n,e=QA){const t=QP(n,e);return NW(()=>t)}function VW(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return en(t=>{let i=t;for(let r=0;r<e;r++){const o=i?.[n[r]];if(!(typeof o<"u"))return;i=o}return i})}function xp(n){return Ti((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}g(1563);class gS{}class _S{}class Xa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Xa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Xa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class QIe{encodeKey(e){return zW(e)}encodeValue(e){return zW(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tDe=/%(\d[a-f0-9])/gi,nDe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zW(n){return encodeURIComponent(n).replace(tDe,(e,t)=>nDe[t]??e)}function bS(n){return`${n}`}class fr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new QIe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eDe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(bS):[bS(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new fr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(bS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(bS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class po{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function HW(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function GW(n){return typeof Blob<"u"&&n instanceof Blob}function WW(n){return typeof FormData<"u"&&n instanceof FormData}class bv{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function iDe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new Xa),this.context||(this.context=new po),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new fr,this.urlWithParams=t}serializeBody(){return null===this.body?null:HW(this.body)||GW(this.body)||WW(this.body)||function rDe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof fr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||WW(this.body)?null:GW(this.body)?this.body.type||null:HW(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new bv(t,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var Ch=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ch||{});class cN{constructor(e,t=200,i="OK"){this.headers=e.headers||new Xa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class yS extends cN{constructor(e={}){super(e),this.type=Ch.ResponseHeader}clone(e={}){return new yS({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ep extends cN{constructor(e={}){super(e),this.type=Ch.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ep({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class r_ extends cN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function lN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let Mh=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof bv)o=t;else{let c,l;c=r.headers instanceof Xa?r.headers:new Xa(r.headers),r.params&&(l=r.params instanceof fr?r.params:new fr({fromObject:r.params})),o=new bv(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const s=sn(o).pipe(function _v(n,e){return ye(e)?Ao(n,e,1):Ao(n,1)}(c=>this.handler.handle(c)));if(t instanceof bv||"events"===r.observe)return s;const a=s.pipe(Ri(c=>c instanceof Ep));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(en(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(en(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(en(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(en(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new fr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,lN(r,i))}post(t,i,r={}){return this.request("POST",t,lN(r,i))}put(t,i,r={}){return this.request("PUT",t,lN(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(gS))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();function YW(n,e){return e(n)}function lDe(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const uDe=new _t(""),yv=new _t(""),XW=new _t(""),KW=new _t("");function hDe(){let n=null;return(e,t)=>{null===n&&(n=(Rt(uDe,{optional:!0})??[]).reduceRight(lDe,YW));const i=Rt(dg),r=i.add();return n(e,t).pipe(xp(()=>i.remove(r)))}}let qW=(()=>{class n extends gS{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Rt(dg);const r=Rt(KW,{optional:!0});this.backend=r??t}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(yv),...this.injector.get(XW,[])]));this.chain=r.reduceRight((o,s)=>function dDe(n,e,t){return(i,r)=>function Od(n,e){n instanceof Fu&&n.assertNotDestroyed();const i=dl(n),r=os(void 0);try{return e()}finally{dl(i),os(r)}}(t,()=>e(i,o=>n(o,r)))}(o,s,this.injector),YW)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(xp(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(_S),rt(ga))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const _De=/^\)\]\}',?\n/;let ZW=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ke(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?ho(i.\u0275loadImpl()):sn(null)).pipe(Tr(()=>new Xe(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,S)=>s.setRequestHeader(x,S.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const x=t.detectContentTypeHeader();null!==x&&s.setRequestHeader("Content-Type",x)}if(t.responseType){const x=t.responseType.toLowerCase();s.responseType="json"!==x?x:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const x=s.statusText||"OK",S=new Xa(s.getAllResponseHeaders()),z=function bDe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new yS({headers:S,status:s.status,statusText:x,url:z}),c},d=()=>{let{headers:x,status:S,statusText:z,url:W}=l(),ue=null;204!==S&&(ue=typeof s.response>"u"?s.responseText:s.response),0===S&&(S=ue?200:0);let se=S>=200&&S<300;if("json"===t.responseType&&"string"==typeof ue){const De=ue;ue=ue.replace(_De,"");try{ue=""!==ue?JSON.parse(ue):null}catch(Ne){ue=De,se&&(se=!1,ue={error:Ne,text:ue})}}se?(o.next(new Ep({body:ue,headers:x,status:S,statusText:z,url:W||void 0})),o.complete()):o.error(new r_({error:ue,headers:x,status:S,statusText:z,url:W||void 0}))},h=x=>{const{url:S}=l(),z=new r_({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});o.error(z)};let f=!1;const m=x=>{f||(o.next(l()),f=!0);let S={type:Ch.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(S.total=x.total),"text"===t.responseType&&s.responseText&&(S.partialText=s.responseText),o.next(S)},b=x=>{let S={type:Ch.UploadProgress,loaded:x.loaded};x.lengthComputable&&(S.total=x.total),o.next(S)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",m),null!==a&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:Ch.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",m),null!==a&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(TU))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const hN=new _t("XSRF_ENABLED"),QW=new _t("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),e$=new _t("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class t${}let wDe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Zn),rt(Na),rt(QW))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();function xDe(n,e){const t=n.url.toLowerCase();if(!Rt(hN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=Rt(t$).getToken(),r=Rt(e$);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Th=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Th||{});function EDe(...n){const e=[Mh,ZW,qW,{provide:gS,useExisting:qW},{provide:_S,useExisting:ZW},{provide:yv,useValue:xDe,multi:!0},{provide:hN,useValue:!0},{provide:t$,useClass:wDe}];for(const t of n)e.push(...t.\u0275providers);return function ac(n){return{\u0275providers:n}}(e)}const n$=new _t("LEGACY_INTERCEPTOR_FN");function ADe(){return function Ap(n,e){return{\u0275kind:n,\u0275providers:e}}(Th.LegacyInterceptors,[{provide:n$,useFactory:hDe},{provide:yv,useExisting:n$,multi:!0}])}let i$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({providers:[EDe(ADe())]})}return n})();const DDe=["*"];let wS;function vv(n){return function kDe(){if(void 0===wS&&(wS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(wS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return wS}()?.createHTML(n)||n}function d$(n){return Error(`Unable to find icon with the name "${n}"`)}function u$(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function h$(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Sp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let xS=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new Sp(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(_o.HTML,r);if(!s)throw h$(r);const a=vv(s);return this._addSvgIconConfig(t,i,new Sp("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Sp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(_o.HTML,i);if(!o)throw h$(i);const s=vv(o);return this._addSvgIconSetConfig(t,new Sp("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(_o.RESOURCE_URL,t);if(!i)throw u$(t);const r=this._cachedIconsByUrl.get(i);return r?sn(ES(r)):this._loadSvgIconFromConfig(new Sp(t,null)).pipe(Xi(o=>this._cachedIconsByUrl.set(i,o)),en(o=>ES(o)))}getNamedSvgIcon(t,i=""){const r=f$(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):vh(d$(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?sn(ES(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(en(i=>ES(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?sn(r):Q0(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Qc(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(_o.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),sn(null)})))).pipe(en(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw d$(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Xi(i=>t.svgText=i),en(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?sn(null):this._fetchIcon(t).pipe(Xi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(vv("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(vv("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function RDe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(_o.RESOURCE_URL,i);if(!s)throw u$(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(en(l=>vv(l)),xp(()=>this._inProgressUrlFetches.delete(s)),ru());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(f$(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return PDe(o)?new Sp(o.url,null,o.options):new Sp(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Mh,8),rt(t0),rt(Zn,8),rt(Ba))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ES(n){return n.cloneNode(!0)}function f$(n,e){return n+":"+e}function PDe(n){return!(!n.url||!n.options)}const NDe=$7(class{constructor(n){this._elementRef=n}}),LDe=new _t("MAT_ICON_DEFAULT_OPTIONS"),FDe=new _t("mat-icon-location",{providedIn:"root",factory:function BDe(){const n=Rt(Zn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),p$=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],jDe=p$.map(n=>`[${n}]`).join(", "),UDe=/^url\(['"]?#(.*?)['"]?\)$/;let Cp=(()=>{class n extends NDe{get inline(){return this._inline}set inline(t){this._inline=Yr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=At.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(jDe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)p$.forEach(s=>{const a=i[o],c=a.getAttribute(s),l=c?c.match(UDe):null;if(l){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(kr(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(We(vn),We(xS),Oc("aria-hidden"),We(FDe),We(Ba),We(LDe,8))};static#t=this.\u0275cmp=_n({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Ci("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Cn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Wn],ngContentSelectors:DDe,decls:1,vars:0,template:function(i,r){1&i&&(Qr(),zn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})();function _2e(n,e){}class SS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let pN=(()=>{class n extends uS{constructor(t,i,r,o,s,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._platform=Rt(ar),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=qA(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=qA();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=qA()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(We(vn),We(L7),We(Zn,8),We(SS),We(XP),We(nn),We(fS),We(t_))};static#t=this.\u0275cmp=_n({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Mi(i_,7),2&i){let o;Tn(o=In())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Ci("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Wn,Nf],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&xn(0,_2e,0,0,"ng-template",0)},dependencies:[Sh,i_],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class mN{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Yt,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!nd(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const x$=new _t("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=Rt(ia);return()=>n.scrollStrategies.block()}}),b2e=new _t("DialogData"),y2e=new _t("DefaultDialogConfig");let w2e=0,E$=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Yt,this._afterOpenedAtThisLevel=new Yt,this._ariaHiddenElements=new Map,this.afterAllClosed=gv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ed(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new SS,...i}).id=i.id||"cdk-dialog-"+w2e++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new mN(s,i),c=this._attachContainer(s,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){gN(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){gN(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),gN(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new iN({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:SS,useValue:r},{provide:mN,useValue:i},{provide:fS,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=pN;const c=new lS(a,r.viewContainerRef,ir.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,o){if(t instanceof hc){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new dS(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new lS(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:b2e,useValue:t.data},{provide:mN,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(_p,null,{optional:!0}))&&a.push({provide:_p,useValue:{value:t.direction,change:sn()}}),ir.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ia),rt(ir),rt(y2e,8),rt(n,12),rt(hS),rt(x$))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gN(n,e){let t=n.length;for(;t--;)e(n[t])}function E2e(n,e){}class _N{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const bN="mdc-dialog--open",A$="mdc-dialog--opening",S$="mdc-dialog--closing";let yN=(()=>{class n extends pN{constructor(t,i,r,o,s,a,c,l,d){super(t,i,r,o,s,a,c,d),this._animationMode=l,this._animationStateChanged=new qt,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?M$(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?M$(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(C$,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(A$,bN)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(bN),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(bN),this._animationsEnabled?(this._hostElement.style.setProperty(C$,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(S$)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(A$,S$)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||n)(We(vn),We(L7),We(Zn,8),We(_N),We(XP),We(nn),We(fS),We(ao,8),We(t_))};static#t=this.\u0275cmp=_n({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(Ud("id",r._config.id),Ci("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Cn("_mat-animation-noopable",!r._animationsEnabled))},standalone:!0,features:[Wn,Nf],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Mt(0,"div",0)(1,"div",1),xn(2,E2e,0,0,"ng-template",2),kt()())},dependencies:[Sh,i_],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();const C$="--mat-dialog-transition-duration";function M$(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?ns(n.substring(0,n.length-2)):n.endsWith("s")?1e3*ns(n.substring(0,n.length-1)):"0"===n?0:null}class CS{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Yt,this._beforeClosed=new Yt,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Ri(r=>"opened"===r.state),kr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ri(r=>"closed"===r.state),kr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),gc(this.backdropClick(),this.keydownEvents().pipe(Ri(r=>27===r.keyCode&&!this.disableClose&&!nd(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function T$(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ri(t=>"closing"===t.state),kr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const I$=new _t("MatMdcDialogData"),C2e=new _t("mat-mdc-dialog-default-options"),D$=new _t("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=Rt(ia);return()=>n.scrollStrategies.block()}});let T2e=0,wv=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,c,l){this._overlay=t,this._defaultOptions=o,this._scrollStrategy=s,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Yt,this._afterOpenedAtThisLevel=new Yt,this.dialogConfigClass=_N,this.afterAllClosed=gv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ed(void 0))),this._dialog=i.get(E$),this._dialogRefConstructor=CS,this._dialogContainerType=yN,this._dialogDataToken=I$}open(t,i){let r;(i={...this._defaultOptions||new _N,...i}).id=i.id||"mat-mdc-dialog-"+T2e++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:SS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,c)=>(r=new this._dialogRefConstructor(s,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ia),rt(ir),rt(Bf,8),rt(C2e,8),rt(D$),rt(n,12),rt(hS),rt(ao,8))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),I2e=0,vN=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+I2e++}ngOnInit(){this._dialogRef||(this._dialogRef=function k$(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||n)(We(CS,8),We(vn),We(wv))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Ud("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0})}return n})(),wN=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return n})();let P$=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N$=new _t("CdkAccordion");let R2e=0,O2e=(()=>{class n{get expanded(){return this._expanded}set expanded(t){this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=At.EMPTY,this.closed=new qt,this.opened=new qt,this.destroyed=new qt,this.expandedChange=new qt,this.id="cdk-accordion-child-"+R2e++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(We(N$,12),We(Br),We(P$))};static#t=this.\u0275dir=Ht({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:["expanded","expanded",rr],disabled:["disabled","disabled",rr]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[ri([{provide:N$,useValue:void 0}]),Ol]})}return n})();const N2e=["body"];function L2e(n,e){}const F2e=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],B2e=["mat-expansion-panel-header","*","mat-action-row"];function j2e(n,e){1&n&&Vn(0,"span",2),2&n&&Jt("@indicatorRotate",Mn()._getExpandedState())}const U2e=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],V2e=["mat-panel-title","mat-panel-description","*"],L$=new _t("MAT_ACCORDION"),F$="225ms cubic-bezier(0.4,0.0,0.2,1)",B$={indicatorRotate:wp("indicatorRotate",[Ec("collapsed, void",Fo({transform:"rotate(0deg)"})),Ec("expanded",Fo({transform:"rotate(180deg)"})),el("expanded <=> collapsed, void => collapsed",xc(F$))]),bodyExpansion:wp("bodyExpansion",[Ec("collapsed, void",Fo({height:"0px",visibility:"hidden"})),Ec("expanded",Fo({height:"*",visibility:""})),el("expanded <=> collapsed, void => collapsed",xc(F$))])},j$=new _t("MAT_EXPANSION_PANEL");let z2e=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(We(hc),We(j$,8))};static#t=this.\u0275dir=Ht({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),H2e=0;const U$=new _t("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let V$=(()=>{class n extends O2e{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Yr(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,o,s,a,c){super(t,i,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new qt,this.afterCollapse=new qt,this._inputChanges=new Yt,this._headerId="mat-expansion-panel-header-"+H2e++,this._bodyAnimationDone=new Yt,this.accordion=t,this._document=s,this._bodyAnimationDone.pipe(wh((l,d)=>l.fromState===d.fromState&&l.toState===d.toState)).subscribe(l=>{"void"!==l.fromState&&("expanded"===l.toState?this.afterExpand.emit():"collapsed"===l.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(ed(null),Ri(()=>this.expanded&&!this._portal),kr(1)).subscribe(()=>{this._portal=new dS(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#e=this.\u0275fac=function(i){return new(i||n)(We(L$,12),We(Br),We(P$),We(fs),We(Zn),We(ao,8),We(U$,8))};static#t=this.\u0275cmp=_n({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function eo(n,e,t,i){const r=wi();if(r.firstCreatePass){const o=Fi();ij(r,new ej(e,t,i),o.index),function Ete(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}nj(r,It(),t)}(o,z2e,5),2&i){let s;Tn(s=In())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Mi(N2e,5),2&i){let o;Tn(o=In())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Cn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[ri([{provide:L$,useValue:void 0},{provide:j$,useExisting:n}]),Wn,Sr],ngContentSelectors:B2e,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(Qr(F2e),zn(0),Mt(1,"div",0,1),un("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),Mt(3,"div",2),zn(4,1),xn(5,L2e,0,0,"ng-template",3),kt(),zn(6,2),kt()),2&i&&(Ot(),Jt("@bodyExpansion",r._getExpandedState())("id",r.id),Ci("aria-labelledby",r._headerId),Ot(4),Jt("cdkPortalOutlet",r._portal))},dependencies:[i_],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[B$.bodyExpansion]},changeDetection:0})}return n})();class G2e{}const W2e=KMe(G2e);let $2e=(()=>{class n extends W2e{constructor(t,i,r,o,s,a,c){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=At.EMPTY;const l=t.accordion?t.accordion._stateChanges.pipe(Ri(d=>!(!d.hideToggle&&!d.togglePosition))):Qs;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=gc(t.opened,t.closed,l,t._inputChanges.pipe(Ri(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ri(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:nd(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(We(V$,1),We(vn),We(t_),We(Br),We(U$,8),We(ao,8),Oc("tabindex"))};static#t=this.\u0275cmp=_n({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&un("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Ci("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Ay("height",r._getHeaderHeight()),Cn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Wn],ngContentSelectors:V2e,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(Qr(U2e),Mt(0,"span",0),zn(1),zn(2,1),zn(3,2),kt(),xn(4,j2e,1,1,"span",1)),2&i&&(Cn("mat-content-hide-toggle",!r._showToggle()),Ot(4),dr(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[B$.indicatorRotate]},changeDetection:0})}return n})();function z$(n,e,t){return t?z$(n,e).pipe(CA(t)):new Xe(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=n(r);return ye(e)?()=>e(r,o):void 0})}const X2e=["youtubeContainer"];let W$=(()=>{class n{get height(){return this._height}set height(t){this._height=t||390}get width(){return this._width}set width(t){this._width=t||640}constructor(t,i){this._ngZone=t,this._destroyed=new Yt,this._playerChanges=new Ni(void 0),this._height=390,this._width=640,this.disableCookies=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=nh(i)}ngAfterViewInit(){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer():(this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer())}))}ngOnChanges(t){this._shouldRecreatePlayer(t)?this._createPlayer():this._player&&((t.width||t.height)&&this._setSize(),t.suggestedQuality&&this._setQuality(),(t.startSeconds||t.endSeconds||t.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(t){const i=t.videoId||t.playerVars||t.disableCookies;return!!i&&!i.isFirstChange()}_createPlayer(){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const t=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:this.playerVars})),i=()=>{this._player=t,this._pendingPlayer=void 0,t.removeEventListener("onReady",i),this._playerChanges.next(t),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(t,this._pendingPlayerState),this._pendingPlayerState=void 0);const r=t.getPlayerState();(r===YT.PlayerState.UNSTARTED||r===YT.PlayerState.CUED||null==r)&&this._cuePlayer()};this._pendingPlayer=t,t.addEventListener("onReady",i)}_applyPendingPlayerState(t,i){const{playbackState:r,playbackRate:o,volume:s,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=o&&t.setPlaybackRate(o),null!=s&&t.setVolume(s),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(t){return this._playerChanges.pipe(Tr(i=>i?z$(r=>{i.addEventListener(t,r)},r=>{try{i?.removeEventListener?.(t,r)}catch{}}):sn()),i=>new Xe(r=>i.subscribe({next:o=>this._ngZone.run(()=>r.next(o)),error:o=>r.error(o),complete:()=>r.complete()})),jr(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(We(nn),We(Na))};static#t=this.\u0275cmp=_n({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Mi(X2e,7),2&i){let o;Tn(o=In())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},features:[Sr],decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&Vn(0,"div",null,0)},encapsulation:2,changeDetection:0})}return n})();function Y$(n=q2e){return Ti((e,t)=>{let i=!1;e.subscribe(_i(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function q2e(){return new Z0}let Mp={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function X$(n){Mp=n}const K$=/[&<>"']/,J2e=new RegExp(K$.source,"g"),q$=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Z2e=new RegExp(q$.source,"g"),Q2e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},J$=n=>Q2e[n];function Ka(n,e){if(e){if(K$.test(n))return n.replace(J2e,J$)}else if(q$.test(n))return n.replace(Z2e,J$);return n}const eke=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function tke(n){return n.replace(eke,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const nke=/(^|[^\[])\^/g;function Ki(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(nke,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}function Z$(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const MS={exec:()=>null};function Q$(n,e){const i=n.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function TS(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const o=n.charAt(i-r-1);if(o!==e||t){if(o===e||!t)break;r++}else r++}return n.slice(0,i-r)}function eY(n,e,t,i){const r=e.href,o=e.title?Ka(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:o,text:Ka(s)}}class IS{options;rules;lexer;constructor(e){this.options=e||Mp}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:TS(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function rke(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=TS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=TS(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,o={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const s=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let d=!1;if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split("\n",1)[0].replace(/^\t+/,z=>" ".repeat(3*z.length)),f=e.split("\n",1)[0],m=0;this.options.pedantic?(m=2,c=h.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=h.slice(m),m+=t[1].length);let b=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),d=!0),!d){const z=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),W=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ue=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),se=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const De=e.split("\n",1)[0];if(f=De,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ue.test(f)||se.test(f)||z.test(f)||W.test(e))break;if(f.search(/[^ ]/)>=m||!f.trim())c+="\n"+f.slice(m);else{if(b||h.search(/[^ ]/)>=4||ue.test(h)||se.test(h)||W.test(h))break;c+="\n"+f}!b&&!f.trim()&&(b=!0),a+=De+"\n",e=e.substring(De.length+1),h=f.slice(m)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let S,x=null;this.options.gfm&&(x=/^\[[ xX]\] /.exec(c),x&&(S="[ ] "!==x[0],c=c.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!x,checked:S,loose:!1,text:c,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=c.trimEnd(),o.raw=o.raw.trimEnd();for(let d=0;d<o.items.length;d++)if(this.lexer.state.top=!1,o.items[d].tokens=this.lexer.blockTokens(o.items[d].text,[]),!o.loose){const h=o.items[d].tokens.filter(m=>"space"===m.type),f=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));o.loose=f}if(o.loose)for(let d=0;d<o.items.length;d++)o.items[d].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const i={type:"table",raw:t[0],header:Q$(t[1]).map(r=>({text:r,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let o,s,a,c,r=i.align.length;for(o=0;o<r;o++){const l=i.align[o];l&&(i.align[o]=/^ *-+: *$/.test(l)?"right":/^ *:-+: *$/.test(l)?"center":/^ *:-+ *$/.test(l)?"left":null)}for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=Q$(i.rows[o],i.header.length).map(l=>({text:l,tokens:[]}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ka(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=TS(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function ike(n,e){if(-1===n.indexOf(e[1]))return-1;let t=0;for(let i=0;i<n.length;i++)if("\\"===n[i])i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}(t[2],"()");if(s>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),eY(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return eY(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const s=[...r[0]].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);null!=(r=h.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const f=[...r[0]][0].length,m=e.slice(0,s+r.index+f+c);if(Math.min(s,c)%2){const x=m.slice(1,-1);return{type:"em",raw:m,text:x,tokens:this.lexer.inlineTokens(x)}}const b=m.slice(2,-2);return{type:"strong",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=Ka(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return"@"===t[2]?(i=Ka(t[1]),r="mailto:"+i):(i=Ka(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if("@"===t[2])i=Ka(t[0]),r="mailto:"+i;else{let o;do{o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(o!==t[0]);i=Ka(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return i=this.lexer.state.inRawBlock?t[0]:Ka(t[0]),{type:"text",raw:t[0],text:i}}}}const Pn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:MS,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Pn.def=Ki(Pn.def).replace("label",Pn._label).replace("title",Pn._title).getRegex(),Pn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Pn.listItemStart=Ki(/^( *)(bull) */).replace("bull",Pn.bullet).getRegex(),Pn.list=Ki(Pn.list).replace(/bull/g,Pn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Pn.def.source+")").getRegex(),Pn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Pn.html=Ki(Pn.html,"i").replace("comment",Pn._comment).replace("tag",Pn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Pn.lheading=Ki(Pn.lheading).replace(/bull/g,Pn.bullet).getRegex(),Pn.paragraph=Ki(Pn._paragraph).replace("hr",Pn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn._tag).getRegex(),Pn.blockquote=Ki(Pn.blockquote).replace("paragraph",Pn.paragraph).getRegex(),Pn.normal={...Pn},Pn.gfm={...Pn.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Pn.gfm.table=Ki(Pn.gfm.table).replace("hr",Pn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn._tag).getRegex(),Pn.gfm.paragraph=Ki(Pn._paragraph).replace("hr",Pn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Pn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn._tag).getRegex(),Pn.pedantic={...Pn.normal,html:Ki("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Pn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:MS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ki(Pn.normal._paragraph).replace("hr",Pn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Pn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const cn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:MS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:MS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};cn.punctuation=Ki(cn.punctuation,"u").replace(/punctuation/g,cn._punctuation).getRegex(),cn.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,cn.anyPunctuation=/\\[punct]/g,cn._escapes=/\\([punct])/g,cn._comment=Ki(Pn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),cn.emStrong.lDelim=Ki(cn.emStrong.lDelim,"u").replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimAst=Ki(cn.emStrong.rDelimAst,"gu").replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimUnd=Ki(cn.emStrong.rDelimUnd,"gu").replace(/punct/g,cn._punctuation).getRegex(),cn.anyPunctuation=Ki(cn.anyPunctuation,"gu").replace(/punct/g,cn._punctuation).getRegex(),cn._escapes=Ki(cn._escapes,"gu").replace(/punct/g,cn._punctuation).getRegex(),cn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,cn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,cn.autolink=Ki(cn.autolink).replace("scheme",cn._scheme).replace("email",cn._email).getRegex(),cn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,cn.tag=Ki(cn.tag).replace("comment",cn._comment).replace("attribute",cn._attribute).getRegex(),cn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,cn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,cn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,cn.link=Ki(cn.link).replace("label",cn._label).replace("href",cn._href).replace("title",cn._title).getRegex(),cn.reflink=Ki(cn.reflink).replace("label",cn._label).replace("ref",Pn._label).getRegex(),cn.nolink=Ki(cn.nolink).replace("ref",Pn._label).getRegex(),cn.reflinkSearch=Ki(cn.reflinkSearch,"g").replace("reflink",cn.reflink).replace("nolink",cn.nolink).getRegex(),cn.normal={...cn},cn.pedantic={...cn.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ki(/^!?\[(label)\]\((.*?)\)/).replace("label",cn._label).getRegex(),reflink:Ki(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cn._label).getRegex()},cn.gfm={...cn.normal,escape:Ki(cn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},cn.gfm.url=Ki(cn.gfm.url,"i").replace("email",cn.gfm._extended_email).getRegex(),cn.breaks={...cn.gfm,br:Ki(cn.br).replace("{2,}","*").getRegex(),text:Ki(cn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class id{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Mp,this.options.tokenizer=this.options.tokenizer||new IS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Pn.normal,inline:cn.normal};this.options.pedantic?(t.block=Pn.pedantic,t.inline=cn.pedantic):this.options.gfm&&(t.block=Pn.gfm,t.inline=this.options.breaks?cn.breaks:cn.gfm),this.tokenizer.rules=t}static get rules(){return{block:Pn,inline:cn}}static lex(e,t){return new id(t).lex(e)}static lexInline(e,t){return new id(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=t[t.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},h),"number"==typeof f&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return t}}class o_{options;constructor(e){this.options=e||Mp}code(e,t,i){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Ka(r)+'">'+(i?e:Ka(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Ka(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const r=Z$(e);if(null===r)return i;let o='<a href="'+(e=r)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+i+"</a>",o}image(e,t,i){const r=Z$(e);if(null===r)return i;let o=`<img src="${e=r}" alt="${i}"`;return t&&(o+=` title="${t}"`),o+=">",o}text(e){return e}}class AN{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class rd{options;renderer;textRenderer;constructor(e){this.options=e||Mp,this.options.renderer=this.options.renderer||new o_,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new AN}static parse(e,t){return new rd(t).parse(e)}static parseInline(e,t){return new rd(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){const o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){i+=a||"";continue}}switch(o.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const s=o;i+=this.renderer.heading(this.parseInline(s.tokens),s.depth,tke(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(o.text,o.lang,!!o.escaped);continue;case"table":{const s=o;let a="",c="";for(let d=0;d<s.header.length;d++)c+=this.renderer.tablecell(this.parseInline(s.header[d].tokens),{header:!0,align:s.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<s.rows.length;d++){const h=s.rows[d];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:s.align[f]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(o.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const s=o,a=s.ordered,c=s.start,l=s.loose;let d="";for(let h=0;h<s.items.length;h++){const f=s.items[h],m=f.checked,b=f.task;let x="";if(f.task){const S=this.renderer.checkbox(!!m);l?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=S+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=S+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:S+" "}):x+=S+" "}x+=this.parse(f.tokens,l),d+=this.renderer.listitem(x,b,!!m)}i+=this.renderer.list(d,a,c);continue}case"html":i+=this.renderer.html(o.text,o.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(o.tokens));continue;case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;r+1<e.length&&"text"===e[r+1].type;)s=e[++r],a+="\n"+(s.tokens?this.parseInline(s.tokens):s.text);i+=t?this.renderer.paragraph(a):a;continue}default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let r=0;r<e.length;r++){const o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=s||"";continue}}switch(o.type){case"escape":case"text":i+=t.text(o.text);break;case"html":i+=t.html(o.text);break;case"link":i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break;case"image":i+=t.image(o.href,o.title,o.text);break;case"strong":i+=t.strong(this.parseInline(o.tokens,t));break;case"em":i+=t.em(this.parseInline(o.tokens,t));break;case"codespan":i+=t.codespan(o.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(o.tokens,t));break;default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return i}}class DS{options;constructor(e){this.options=e||Mp}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const Tp=new class oke{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(id.lex,rd.parse);parseInline=this.#e(id.lexInline,rd.parseInline);Parser=rd;Renderer=o_;TextRenderer=AN;Lexer=id;Tokenizer=IS;Hooks=DS;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const s of o.header)i=i.concat(this.walkTokens(s.tokens,t));for(const s of o.rows)for(const a of s)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":i=i.concat(this.walkTokens(r.items,t));break;default:{const o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{i=i.concat(this.walkTokens(o[s],t))}):o.tokens&&(i=i.concat(this.walkTokens(o.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=t.renderers[o.name];t.renderers[o.name]=s?function(...a){let c=o.renderer.apply(this,a);return!1===c&&(c=s.apply(this,a)),c}:o.renderer}if("tokenizer"in o){if(!o.level||"block"!==o.level&&"inline"!==o.level)throw new Error("extension level must be 'block' or 'inline'");const s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&("block"===o.level?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:"inline"===o.level&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),r.extensions=t),i.renderer){const o=this.defaults.renderer||new o_(this.defaults);for(const s in i.renderer){const a=i.renderer[s],l=o[s];o[s]=(...d)=>{let h=a.apply(o,d);return!1===h&&(h=l.apply(o,d)),h||""}}r.renderer=o}if(i.tokenizer){const o=this.defaults.tokenizer||new IS(this.defaults);for(const s in i.tokenizer){const a=i.tokenizer[s],l=o[s];o[s]=(...d)=>{let h=a.apply(o,d);return!1===h&&(h=l.apply(o,d)),h}}r.tokenizer=o}if(i.hooks){const o=this.defaults.hooks||new DS;for(const s in i.hooks){const a=i.hooks[s],l=o[s];o[s]=DS.passThroughHooks.has(s)?d=>{if(this.defaults.async)return Promise.resolve(a.call(o,d)).then(f=>l.call(o,f));const h=a.call(o,d);return l.call(o,h)}:(...d)=>{let h=a.apply(o,d);return!1===h&&(h=l.apply(o,d)),h}}r.hooks=o}if(i.walkTokens){const o=this.defaults.walkTokens,s=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(s.call(this,a)),o&&(c=c.concat(o.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return id.lex(e,t??this.defaults)}parser(e,t){return rd.parse(e,t??this.defaults)}#e(e,t){return(i,r)=>{const o={...r},s={...this.defaults,...o};!0===this.defaults.async&&!1===o.async&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const a=this.#t(!!s.silent,!!s.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(i):i).then(c=>e(c,s)).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>t(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(i=s.hooks.preprocess(i));const c=e(i,s);s.walkTokens&&this.walkTokens(c,s.walkTokens);let l=t(c,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+Ka(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}};function Ui(n,e){return Tp.parse(n,e)}Ui.options=Ui.setOptions=function(n){return Tp.setOptions(n),X$(Ui.defaults=Tp.defaults),Ui},Ui.getDefaults=function EN(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ui.defaults=Mp,Ui.use=function(...n){return Tp.use(...n),X$(Ui.defaults=Tp.defaults),Ui},Ui.walkTokens=function(n,e){return Tp.walkTokens(n,e)},Ui.parseInline=Tp.parseInline,Ui.Parser=rd,Ui.parser=rd.parse,Ui.Renderer=o_,Ui.TextRenderer=AN,Ui.Lexer=id,Ui.lexer=id.lex,Ui.Tokenizer=IS,Ui.Hooks=DS,Ui.parse=Ui;const ske=["*"];let tY=(()=>{class n{constructor(){this._buttonClick$=new Yt,this.copied$=this._buttonClick$.pipe(Tr(()=>gc(sn(!0),QP(3e3).pipe(aN(!1)))),wh(),ta(1)),this.copiedText$=this.copied$.pipe(ed(!1),en(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["markdown-clipboard"]],standalone:!0,features:[Nf],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Mt(0,"button",0),un("click",function(){return r.onCopyToClipboardClick()}),wo(1,"async"),Yn(2),wo(3,"async"),kt()),2&i&&(Cn("copied",ps(1,3,r.copied$)),Ot(2),es(ps(3,5,r.copiedText$)))},dependencies:[Zy],encapsulation:2,changeDetection:0})}return n})();const lke=new _t("CLIPBOARD_OPTIONS");var SN=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(SN||{});const nY=new _t("MARKED_EXTENSIONS"),uke=new _t("MARKED_OPTIONS"),iY=new _t("SECURITY_CONTEXT");let CN=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,o,s,a,c){this.clipboardOptions=t,this.extensions=i,this.platform=o,this.securityContext=s,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new o_},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Yt,this.reload$=this._reload$.asObservable(),this.options=r}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:o,emoji:s,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},d=l.renderer||this.renderer||new o_;this.extensions&&(this.renderer=this.extendsRendererForExtensions(d)),a&&(this.renderer=this.extendsRendererForMermaid(d));const h=this.trimIndentation(t),f=r?this.decodeHtml(h):h,m=s?this.parseEmoji(f):f,b=this.parseMarked(m,l,o);return(c?b:this.sanitizer.sanitize(this.securityContext,b))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:o,clipboardOptions:s,katex:a,katexOptions:c,mermaid:l,mermaidOptions:d}=i;o&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...s}),a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...d}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(en(i=>this.handleExtension(t,i)))}highlight(t){if(!nh(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!nh(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendsRendererForExtensions(t){const i=t;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Ui.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return t;const r=t.code;return t.code=function(o,s,a){return"mermaid"===s?`<div class="mermaid">${o}</div>`:r.call(this,o,s,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),o=r>-1?t.substring(r+4):t,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){return i.renderer&&(Ui.use({renderer:i.renderer}),delete i.renderer),r?Ui.parseInline(t,i):Ui.parse(t,i)}parseEmoji(t){if(!nh(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(nh(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!nh(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:s}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),d=document.createElement("div");d.style.position="relative",l.parentNode.insertBefore(d,l),d.appendChild(l);const h=document.createElement("div");let f,m;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",d.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=o?i.createComponent(o).hostView:s?i.createEmbeddedView(s):i.createComponent(tY).hostView,f.rootNodes.forEach(b=>{b.onmouseover=()=>h.style.opacity="1",h.appendChild(b),m=new ClipboardJS(b,{text:()=>l.innerText})}),f.onDestroy(()=>m.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!nh(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let o=i;return r.length>0&&(o=isNaN(o)?r.search(/\S|$/):Math.min(r.search(/\S|$/),o)),isNaN(i)&&(i=o),o?r.substring(o):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(rt(lke,8),rt(nY,8),rt(uke,8),rt(Na),rt(iY),rt(Mh,8),rt(t0))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})(),rY=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new qt,this.load=new qt,this.ready=new qt,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Yt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(jr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){var r=this;return Ut(function*(){const o={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},s={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(t,o);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,s,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,SN.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,SN.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++){const s=i instanceof Array?i:[i];r.item(o).classList.add(...s)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++)Object.keys(i).forEach(s=>{const a=i[s];if(a){const c=this.toLispCase(s);r.item(o).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let o=0,s=i.length;o<s;o++)r=r.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(We(vn),We(CN),We(fs))};static#t=this.\u0275cmp=_n({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Sr,Nf],ngContentSelectors:ske,decls:1,vars:0,template:function(i,r){1&i&&(Qr(),zn(0))},encapsulation:2})}return n})();var oY;!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(oY||(oY={}));let sY=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]})}return n})();function s_(n){return!0===n}function Ea(n){return null===n||typeof n>"u"}function Fs(n){return!Ea(n)}function MN(n){return!!n}function hY(n){return Ea(n)?n:JSON.parse(JSON.stringify(n))}function fY(n){return Fs(n)&&"object"==typeof n&&function TN(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const oRe="NGXS_COMPUTED_OPTION",gY="NGXS_DATA_META",IN="NGXS_META",_Y="NGXS_ARGUMENT_REGISTRY_META";let bY=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new Ni(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(rt(td,8))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),n})();function Ev(n){return n[gY]}let Ac=(()=>{class n{constructor(t,i,r){n.store=t.get(td),n.ngZone=t.get(nn),n.factory=i,n.context=r,n.computed=t.get(bY),n.injector=t}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(t){return new(t||n)(rt(ir),rt(BG),rt(jG))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),n})();class mo{constructor(){mo.statesCachedMeta.clear()}static createStateContext(e){return Ac.context.createStateContext(e)}static ensureMappedState(e){if(Ea(Ac.factory)||Ea(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Fs(e.name)?mo.statesCachedMeta.get(e.name):null)||mo.ensureMeta(e)}static getRepositoryByInstance(e){const i=Ev(mo.getStateClassByInstance(e))??null;if(Ea(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=mo.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=t?.getPayloadTypeByIndex(o);Fs(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=mo.createPayload(t,i),o=function lRe(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new o(r)}static ensureMeta(e){const t=Fs(e.name)?Ac.factory.states?.find(i=>i.name===e.name):null;return Fs(t)&&Fs(e.name)&&mo.statesCachedMeta.set(e.name,t),t}}mo.statesCachedMeta=new Map,mo.\u0275fac=function(e){return new(e||mo)},mo.\u0275prov=Ct({token:mo,factory:mo.\u0275fac}),new class dRe{constructor(){this.subject=new Uf(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function lu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ri((r,o)=>n(r,o,i)):Vo,kr(1),t?Yg(e):Y$(()=>new Z0))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Uf(1)}};class hRe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Fs(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function yY(n){return n.NGXS_OPTIONS_META??{name:""}}function vY(n){const e=yY(n),t=e.children??[],r=hY(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(fY(r))return function fRe(n,e){return e.reduce((t,i)=>{const r=yY(i);if(function xv(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=vY(i),t},n??{})}(r,t);throw new hRe(r)}return r}function wY(){return`__${oRe}__`}function xY(n){return n[wY()]??null}function EY(){return Ac?.computed?.sequenceValue??0}function gRe(n){let e=!1;return lp(n)&&(e=!0),e}function DN(n){return n[_Y]}class _Re extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class bRe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(MN(this.argumentMap.has(e))||MN(this.payloadMap.has(e)))throw new _Re(e,t)}}function ARe(n){return{enumerable:!0,configurable:!0,get(){const e=Ev(n),t=mo.ensureMappedState(e.stateMeta);return mo.createStateContext(t)}}}const DRe={dataActionSubscribeRequired:!0},kRe=new _t("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>DRe});let RRe=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[mo,Ac,bY,...t]}}}return n.\u0275fac=function(t){return new(t||n)(rt(mo,2),rt(Ac,2))},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})();function AY(){return(n,e,t)=>{!function cRe(n,e){if(!function Zke(n,e){let t=n,i=!1;if(fY(t))for(;null!==t;){if(s_(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const o=function mRe(n){return Ea(xY(n))&&Object.defineProperties(n,{[wY()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),xY(n)}(this),s=o?.get(i);if(s_(s?.isObservable))return s?.value;if(Ea(s)||s.sequenceId!==EY()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:EY(),isObservable:gRe(c)}),c}return s?.value},t}}const ORe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function kN(n={}){const e=function PRe(n){const e=Ac?.injector?.get(kRe,void 0,bi.Optional),t={...ORe};return Fs(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function aRe(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=mo.getRepositoryByInstance(c),h=d.operations;let f=h[s];const m=d.stateMeta,b=DN(o);if(Ea(f)){const ue=function IRe(n){return String(n).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),se=function uRe(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let o="";for(let s=0;s<t.length;s++)Fs(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):Fs(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==t.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:ue,argumentRegistry:b});f=h[s]={type:se,options:{cancelUncompleted:e.cancelUncompleted??!1}},Fs(f)&&(m.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}mo.ensureMappedState(m).instance[f.type]=()=>(s_(e.insideZone)?Ac.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),lp(l)&&s_(e.subscribeRequired)?sn(null).pipe(en(()=>l)):l);const z=mo.createAction(f,a,b),W=Ac.store.dispatch(z);return lp(l)?function pRe(n,e){return Q0([n,e]).pipe(en(t=>t.pop()))}(W,l):l},r}}function SY(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function yRe(n,e){const t=n[e];return Ea(DN(t))&&Object.defineProperties(t,{[_Y]:{enumerable:!0,configurable:!0,value:new bRe}}),DN(t)})(e,t).createPayloadType(r,t,i)}}function LRe(){return n=>{const e=function TRe(n){if(function Vke(n){return!MN(n)}(n.hasOwnProperty(IN))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,IN,{value:e})}return function MRe(n){return n?.[IN]}(n)}(n);if(Ea(e.name))throw new Error("@StateRepository should be add before decorator @State");!function xRe(n,e){(function wRe(n){const e=Ev(n)??null;return(Ea(e)||e?.stateClass!==n)&&function vRe(n){Object.defineProperty(n,gY,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Ev(n)}(n)).stateMeta=e}(n,e),function FRe(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>hY(t)},context:ARe(n)})}(n,e,vY(n)),function SRe(n){const t=Ev(n)?.stateMeta?.name??null;if(Fs(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Fs(this[i]))return this[i];if(Ea(Ac.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=Ac.store.select(n).pipe(en(r=>r),ta({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let BRe=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new Yt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),n})(),jRe=(()=>{class n extends BRe{get snapshot(){return this.getState()}get ctx(){return function CRe(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Bi(n)))(i||n)}})(),n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),oi([AY(),mc("design:type",Object),mc("design:paramtypes",[])],n.prototype,"snapshot",null),oi([kN(),XD(0,SY("patchValue")),mc("design:type",Function),mc("design:paramtypes",[Object]),mc("design:returntype",void 0)],n.prototype,"patchState",null),oi([kN(),XD(0,SY("stateValue")),mc("design:type",Function),mc("design:paramtypes",[Object]),mc("design:returntype",void 0)],n.prototype,"setState",null),oi([kN(),mc("design:type",Function),mc("design:paramtypes",[]),mc("design:returntype",void 0)],n.prototype,"reset",null),n})();function NS(){return Ti((n,e)=>{let t=null;n._refCount++;const i=_i(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class RN extends Xe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ta(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new At;const t=this.getSubject();e.add(this.source.subscribe(_i(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=At.EMPTY)}return e}refCount(){return NS()(this)}}Error;let xX=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ht({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const jv=new _t("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),aL=new _t("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Rt(Zn);if(!n)throw new Error("Window is not available");return n}}),rNe=new _t("ngx-data-layer",{providedIn:"root",factory:()=>function iNe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Rt(aL))}),EX=new _t("ngx-gtag-fn",{providedIn:"root",factory:()=>function oNe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Rt(aL),Rt(rNe))});let Uv=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,o){try{const s=new Map([["page_path",t]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(t,i,r,o,s){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(rt(jv),rt(Zn),rt(EX))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sNe=(()=>{class n{constructor(t,i,r,o){this.gaCategoryDirective=t,this.gaService=i,this.settings=r,this.el=o,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=yp(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){this.settings.enableTracing&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(We(xX,8),We(Uv),We(jv),We(vn))},n.\u0275dir=Ht({type:n,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),n})();const cNe={provide:oD,multi:!0,useFactory:function lNe(n,e,t){return Ut(function*(){if(!n.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");t||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[jv,EX,Zn]};new _t("ngx-google-analytics-routing-settings",{factory:()=>({})});let cL=(()=>{class n{static forRoot(t,i=[],r,o,s){return{ngModule:n,providers:[{provide:jv,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:o,nonce:s}},cNe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})(),KS=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new Uf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})(),ONe=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new At,this.token=r,this.subscriptions.add(t.consentChange.subscribe(o=>this.toggleGoogleAnalytics("rescinded"===o)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(KS),rt(aL),rt(jv))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const PNe=new _t("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),TX=[KS,ONe,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new At;try{this.storage=localStorage}catch{}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const t=this.storage?.getItem?.(this.key);if(null==t)return"not-set";const i=t.trim().toLowerCase();switch(i){case"given":case"rescinded":return i;default:return"not-set"}}saveConsent(t){this.storage?.setItem?.(this.key,t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(KS),rt(PNe))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})()];function NNe(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let FNe=(()=>{class n{static forRoot(t){const{providers:i=[]}=cL.forRoot(t.gaToken,function LNe(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[NNe({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({providers:[...TX,{provide:oD,multi:!0,useFactory:()=>()=>{},deps:TX}],imports:[cL]})}return n})();const jNe={connector:()=>new Yt};function zNe(n,e,t,i){t&&!ye(t)&&(i=t);const r=ye(t)?t:void 0;return o=>function VNe(n,e){const t=ye(n)?n:()=>n;return ye(e)?function UNe(n,e=jNe){const{connector:t}=e;return Ti((i,r)=>{const o=t();Eo(n(function BNe(n){return new Xe(e=>n.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}(e,{connector:t}):i=>new RN(i,t)}(new Uf(n,e,i),r)(o)}class HNe{}const WNe=(n,e)=>JSON.stringify(n)===JSON.stringify(e),$Ne=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),nl={storageStrategy:class GNe extends HNe{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},YNe=new Yt;function qa(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,o=i.value;if(i&&i.value){let s=n.storageStrategy?new n.storageStrategy:new nl.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(d=>s.addMany(d(s.getAll(r,this)),r,this)),gc(YNe.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:function nse(n){return n?function ise(n){return new Xe(e=>n.schedule(()=>e.complete()))}(n):Qs}()).subscribe(d=>{s.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||nl.cacheResolver||WNe,n.cacheHasher=n.cacheHasher||nl.cacheHasher||$Ne,i.value=function(...d){const h=s.getAll(r,this);let f=n.cacheHasher(d),m=h.find(x=>n.cacheResolver(x.parameters,f));const b=a.find(x=>n.cacheResolver(x.parameters,f));if((n.maxAge||nl.maxAge)&&m&&m.created&&((new Date).getTime()-new Date(m.created).getTime()>(n.maxAge||nl.maxAge)?(s.remove?s.remove(h.indexOf(m),m,r,this):s.removeAtIndex(h.indexOf(m),r,this),m=null):(n.slidingExpiration||nl.slidingExpiration)&&(m.created=new Date,s.update?s.update(h.indexOf(m),m,r,this):s.updateAtIndex(h.indexOf(m),m,r,this))),m){const x=sn(m.response);return n.async?x.pipe(LW(0)):x}if(b)return b.response;{const x=o.call(this,...d).pipe(xp(()=>{const S=a.find(z=>n.cacheResolver(z.parameters,f));a.splice(a.indexOf(S),1)}),Xi(S=>{(!n.shouldCacheDecider||n.shouldCacheDecider(S))&&((!(n.maxCacheCount||nl.maxCacheCount)||1===(n.maxCacheCount||nl.maxCacheCount)||(n.maxCacheCount||nl.maxCacheCount)&&(n.maxCacheCount||nl.maxCacheCount)<h.length+1)&&(s.remove?s.remove(0,h[0],r,this):s.removeAtIndex(0,r,this)),s.add({parameters:f,response:S,created:n.maxAge||nl.maxAge?new Date:null},r,this))}),zNe(1),NS());return a.push({parameters:f,response:x,created:new Date}),x}}}return i}}class XNe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const KNe=new _t("basePath");class qS{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:t=>this.defaultEncodeParam(t),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}defaultEncodeParam(e){const t="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(t))}}let lL,IX=(()=>{class n{constructor(t,i,r){this.httpClient=t,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new Xa,this.configuration=new qS,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new XNe}addToHttpParams(t,i,r){return this.addToHttpParamsRecursive(t,i,r)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(o=>t=this.addToHttpParamsRecursive(t,o,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(o=>t=this.addToHttpParamsRecursive(t,i[o],null!=r?`${r}.${o}`:o));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,x=t.providers,S=t.sex,z=t.spatial,W=t.technologies,ue=t.token;let se=new fr({encoder:this.encoder});null!=s&&(se=this.addToHttpParams(se,s,"age")),null!=a&&(se=this.addToHttpParams(se,a,"age-range")),null!=c&&(se=this.addToHttpParams(se,c,"bmi")),null!=l&&(se=this.addToHttpParams(se,l,"bmi-range")),null!=d&&(se=this.addToHttpParams(se,d,"cache")),h&&h.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"ontology-terms")}),f&&f.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"biomarker-terms")}),b&&b.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"consortiums")}),x&&x.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"providers")}),null!=S&&(se=this.addToHttpParams(se,S,"sex")),z&&z.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"spatial")}),W&&W.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"technologies")}),null!=ue&&(se=this.addToHttpParams(se,ue,"token"));let De=this.defaultHeaders,Ne=o&&o.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(De=De.set("Accept",Ne));let ot=o&&o.context;void 0===ot&&(ot=new po);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:ot,params:se,responseType:ut,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}biomarkerTermOccurences(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,x=t.providers,S=t.sex,z=t.spatial,W=t.technologies,ue=t.token;let se=new fr({encoder:this.encoder});null!=s&&(se=this.addToHttpParams(se,s,"age")),null!=a&&(se=this.addToHttpParams(se,a,"age-range")),null!=c&&(se=this.addToHttpParams(se,c,"bmi")),null!=l&&(se=this.addToHttpParams(se,l,"bmi-range")),null!=d&&(se=this.addToHttpParams(se,d,"cache")),h&&h.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"ontology-terms")}),f&&f.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"biomarker-terms")}),b&&b.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"consortiums")}),x&&x.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"providers")}),null!=S&&(se=this.addToHttpParams(se,S,"sex")),z&&z.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"spatial")}),W&&W.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"technologies")}),null!=ue&&(se=this.addToHttpParams(se,ue,"token"));let De=this.defaultHeaders,Ne=o&&o.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(De=De.set("Accept",Ne));let ot=o&&o.context;void 0===ot&&(ot=new po);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:ot,params:se,responseType:ut,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}biomarkerTreeModel(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,x=t.providers,S=t.sex,z=t.spatial,W=t.technologies,ue=t.token;let se=new fr({encoder:this.encoder});null!=s&&(se=this.addToHttpParams(se,s,"age")),null!=a&&(se=this.addToHttpParams(se,a,"age-range")),null!=c&&(se=this.addToHttpParams(se,c,"bmi")),null!=l&&(se=this.addToHttpParams(se,l,"bmi-range")),null!=d&&(se=this.addToHttpParams(se,d,"cache")),h&&h.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"ontology-terms")}),f&&f.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"biomarker-terms")}),b&&b.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"consortiums")}),x&&x.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"providers")}),null!=S&&(se=this.addToHttpParams(se,S,"sex")),z&&z.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"spatial")}),W&&W.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"technologies")}),null!=ue&&(se=this.addToHttpParams(se,ue,"token"));let De=this.defaultHeaders,Ne=o&&o.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(De=De.set("Accept",Ne));let ot=o&&o.context;void 0===ot&&(ot=new po);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:ot,params:se,responseType:ut,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}cellTypeTreeModel(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(t,i="body",r=!1,o){const s=t.token;let a=new fr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"token"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new po);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(t,i="body",r=!1,o){const s=t.getSpatialPlacementRequest;if(null==s)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=o&&o.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=o&&o.context;void 0===l&&(l=new po);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,s,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,o){const s=t.cache;let a=new fr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"cache"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new po);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,x=t.providers,S=t.sex,z=t.spatial,W=t.technologies,ue=t.token;let se=new fr({encoder:this.encoder});null!=s&&(se=this.addToHttpParams(se,s,"age")),null!=a&&(se=this.addToHttpParams(se,a,"age-range")),null!=c&&(se=this.addToHttpParams(se,c,"bmi")),null!=l&&(se=this.addToHttpParams(se,l,"bmi-range")),null!=d&&(se=this.addToHttpParams(se,d,"cache")),h&&h.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"ontology-terms")}),f&&f.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"biomarker-terms")}),b&&b.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"consortiums")}),x&&x.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"providers")}),null!=S&&(se=this.addToHttpParams(se,S,"sex")),z&&z.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"spatial")}),W&&W.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"technologies")}),null!=ue&&(se=this.addToHttpParams(se,ue,"token"));let De=this.defaultHeaders,Ne=o&&o.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(De=De.set("Accept",Ne));let ot=o&&o.context;void 0===ot&&(ot=new po);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:ot,params:se,responseType:ut,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,o){const s=t.organIri;if(null==s)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,c=t.ageRange,l=t.bmi,d=t.bmiRange,h=t.cache,f=t.ontologyTerms,m=t.cellTypeTerms,b=t.biomarkerTerms,x=t.consortiums,S=t.providers,z=t.sex,W=t.spatial,ue=t.technologies,se=t.token;let De=new fr({encoder:this.encoder});null!=a&&(De=this.addToHttpParams(De,a,"age")),null!=c&&(De=this.addToHttpParams(De,c,"age-range")),null!=l&&(De=this.addToHttpParams(De,l,"bmi")),null!=d&&(De=this.addToHttpParams(De,d,"bmi-range")),null!=h&&(De=this.addToHttpParams(De,h,"cache")),f&&f.forEach(ht=>{De=this.addToHttpParams(De,ht,"ontology-terms")}),m&&m.forEach(ht=>{De=this.addToHttpParams(De,ht,"cell-type-terms")}),b&&b.forEach(ht=>{De=this.addToHttpParams(De,ht,"biomarker-terms")}),null!=s&&(De=this.addToHttpParams(De,s,"organ-iri")),x&&x.forEach(ht=>{De=this.addToHttpParams(De,ht,"consortiums")}),S&&S.forEach(ht=>{De=this.addToHttpParams(De,ht,"providers")}),null!=z&&(De=this.addToHttpParams(De,z,"sex")),W&&W.forEach(ht=>{De=this.addToHttpParams(De,ht,"spatial")}),ue&&ue.forEach(ht=>{De=this.addToHttpParams(De,ht,"technologies")}),null!=se&&(De=this.addToHttpParams(De,se,"token"));let Ne=this.defaultHeaders,ot=o&&o.httpHeaderAccept;void 0===ot&&(ot=this.configuration.selectHeaderAccept(["application/json"])),void 0!==ot&&(Ne=Ne.set("Accept",ot));let ut=o&&o.context;void 0===ut&&(ut=new po);let Ke="json";return ot&&(Ke=ot.startsWith("text")?"text":this.configuration.isJsonMime(ot)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:ut,params:De,responseType:Ke,withCredentials:this.configuration.withCredentials,headers:Ne,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,x=t.providers,S=t.sex,z=t.spatial,W=t.technologies,ue=t.token;let se=new fr({encoder:this.encoder});null!=s&&(se=this.addToHttpParams(se,s,"age")),null!=a&&(se=this.addToHttpParams(se,a,"age-range")),null!=c&&(se=this.addToHttpParams(se,c,"bmi")),null!=l&&(se=this.addToHttpParams(se,l,"bmi-range")),null!=d&&(se=this.addToHttpParams(se,d,"cache")),h&&h.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"ontology-terms")}),f&&f.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"biomarker-terms")}),b&&b.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"consortiums")}),x&&x.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"providers")}),null!=S&&(se=this.addToHttpParams(se,S,"sex")),z&&z.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"spatial")}),W&&W.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"technologies")}),null!=ue&&(se=this.addToHttpParams(se,ue,"token"));let De=this.defaultHeaders,Ne=o&&o.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(De=De.set("Accept",Ne));let ot=o&&o.context;void 0===ot&&(ot=new po);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:ot,params:se,responseType:ut,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}sennetRuiLocations(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sennet/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}sparql(t,i="body",r=!1,o){const s=t.query;if(null==s)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=t.token,c=t.format;let l=new fr({encoder:this.encoder});null!=s&&(l=this.addToHttpParams(l,s,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let f=o&&o.context;void 0===f&&(f=new po);let m="json";return h&&(m=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}sparqlPost(t,i="body",r=!1,o){const s=t.sparqlQueryRequest;if(null==s)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=t.token,c=t.format;let l=new fr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let f=o&&o.context;void 0===f&&(f=new po);const b=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==b&&(d=d.set("Content-Type",b));let x="json";return h&&(x=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,s,{context:f,params:l,responseType:x,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new fr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new po);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,x=t.providers,S=t.sex,z=t.spatial,W=t.technologies,ue=t.token;let se=new fr({encoder:this.encoder});null!=s&&(se=this.addToHttpParams(se,s,"age")),null!=a&&(se=this.addToHttpParams(se,a,"age-range")),null!=c&&(se=this.addToHttpParams(se,c,"bmi")),null!=l&&(se=this.addToHttpParams(se,l,"bmi-range")),null!=d&&(se=this.addToHttpParams(se,d,"cache")),h&&h.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"ontology-terms")}),f&&f.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"biomarker-terms")}),b&&b.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"consortiums")}),x&&x.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"providers")}),null!=S&&(se=this.addToHttpParams(se,S,"sex")),z&&z.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"spatial")}),W&&W.forEach(Ke=>{se=this.addToHttpParams(se,Ke,"technologies")}),null!=ue&&(se=this.addToHttpParams(se,ue,"token"));let De=this.defaultHeaders,Ne=o&&o.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(De=De.set("Accept",Ne));let ot=o&&o.context;void 0===ot&&(ot=new po);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:ot,params:se,responseType:ut,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}}return n.\u0275fac=function(t){return new(t||n)(rt(Mh),rt(KNe,8),rt(qS,8))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qNe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:qS,useFactory:t}]}}constructor(t,i){if(t)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return n.\u0275fac=function(t){return new(t||n)(rt(n,12),rt(Mh,8))},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})();function Aa(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function il(){return lL||(lL=function JNe(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=Aa(t);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),lL}function ZNe(n,e=il()){return e("readonly",t=>Aa(t.get(n)))}function QNe(n,e=il()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),Aa(t.transaction)))}function eLe(n,e=il()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),Aa(t.transaction)))}var tLe=g(5020),nLe=g(7661);const Vv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",zv="http://www.w3.org/2001/XMLSchema#",uL="http://www.w3.org/2000/10/swap/",ra={xsd:{decimal:`${zv}decimal`,boolean:`${zv}boolean`,double:`${zv}double`,integer:`${zv}integer`,string:`${zv}string`},rdf:{type:`${Vv}type`,nil:`${Vv}nil`,first:`${Vv}first`,rest:`${Vv}rest`,langString:`${Vv}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${uL}reify#forSome`,forAll:`${uL}reify#forAll`},log:{implies:`${uL}log#implies`}};function JS(n){return!!n&&"DefaultGraph"===n.termType}const{rdf:iLe,xsd:kp}=ra;let Hv,rLe=0;const hL={namedNode:function lLe(n){return new RX(n)},blankNode:function dLe(n){return new oLe(n||"n3-"+rLe++)},variable:function hLe(n){return new sLe(n)},literal:function uLe(n,e){if("string"==typeof e)return new g_(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return""===t&&("boolean"==typeof n?t=kp.boolean:"number"==typeof n&&(Number.isFinite(n)?t=Number.isInteger(n)?kp.integer:kp.double:(t=kp.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new g_(""===t||t===kp.string?`"${n}"`:`"${n}"^^${t}`)},defaultGraph:function fLe(){return Hv},quad:OX,triple:OX},Ur=hL;class du{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof du?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class RX extends du{get termType(){return"NamedNode"}}class g_ extends du{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new RX(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?kp.string:iLe.langString}equals(e){return e instanceof g_?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class oLe extends du{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class sLe extends du{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Gv(n,e,t){if(e=e||hL,!n)return e.defaultGraph();switch(n[0]){case"?":return e.variable(n.substr(1));case"_":return e.blankNode(n.substr(2));case'"':if(e===hL)return new g_(n);if('"'===n[n.length-1])return e.literal(n.substr(1,n.length-2));const i=n.lastIndexOf('"',n.length-1);return e.literal(n.substr(1,i-1),"@"===n[i+1]?n.substr(i+2):e.namedNode(n.substr(i+3)));case"[":n=JSON.parse(n);break;default:if(!t||!Array.isArray(n))return e.namedNode(n)}return e.quad(Gv(n[0],e,!0),Gv(n[1],e,!0),Gv(n[2],e,!0),n[3]&&Gv(n[3],e,!0))}function Ja(n,e){if("string"==typeof n)return n;if(n instanceof du&&"Quad"!==n.termType)return n.id;if(!n)return Hv.id;switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return`_:${n.value}`;case"Variable":return`?${n.value}`;case"DefaultGraph":return"";case"Literal":return`"${n.value}"${n.language?`@${n.language}`:n.datatype&&n.datatype.value!==kp.string?`^^${n.datatype.value}`:""}`;case"Quad":const t=[Ja(n.subject,!0),Ja(n.predicate,!0),Ja(n.object,!0)];return JS(n.graph)||t.push(Ja(n.graph,!0)),e?t:JSON.stringify(t);default:throw new Error(`Unexpected termType: ${n.termType}`)}}Hv=new class aLe extends du{constructor(){return super(""),Hv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class cLe extends du{constructor(e,t,i,r){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=r||Hv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function OX(n,e,t,i){return new cLe(n,e,t,i)}var pLe=g(3410),mLe=g.n(pLe);const{xsd:ZS}=ra,gLe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,PX={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},_Le=/[\x00-\x20<>\\"\{\}\|\^\`]/,bLe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},yLe=/$0^/;class vLe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const t in this)!(t in bLe)&&this[t]instanceof RegExp&&(this[t]=yLe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",f="",m="",b=null,x=0,S=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(x=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){S=!0;break}case"<":if(b=this._unescapedIri.exec(i))h="IRI",f=b[1];else if(b=this._iri.exec(i)){if(f=this._unescape(b[1]),null===f||_Le.test(f))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",x=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",x=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",x=2);break;case"_":((b=this._blank.exec(i))||t&&(b=this._blank.exec(`${i} `)))&&(h="blank",m="_",f=b[1]);break;case'"':if(b=this._simpleQuotedString.exec(i))f=b[1];else if(({value:f,matchLength:x}=this._parseLiteral(i)),null===f)return s(this);(null!==b||0!==x)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(b=this._simpleApostropheString.exec(i))f=b[1];else if(({value:f,matchLength:x}=this._parseLiteral(i)),null===f)return s(this);(null!==b||0!==x)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(b=this._variable.exec(i))&&(h="var",f=b[0]);break;case"@":"literal"===this._previousMarker&&(b=this._langcode.exec(i))?(h="langcode",f=b[1]):(b=this._keyword.exec(i))&&(h=b[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){h=".",x=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(b=this._number.exec(i)||t&&(b=this._number.exec(`${i} `)))&&(h="literal",f=b[0],m="string"==typeof b[1]?ZS.double:"string"==typeof b[2]?ZS.decimal:ZS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(b=this._sparqlKeyword.exec(i))?h=b[0].toUpperCase():S=!0;break;case"f":case"t":(b=this._boolean.exec(i))?(h="literal",f=b[0],m=ZS.boolean):S=!0;break;case"a":(b=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):S=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(x=1,f="="):(x=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(x=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",x=2):(h=d,x=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",x=2);break;default:S=!0}if(S&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(b=this._prefix.exec(i))?((b=this._prefixed.exec(i))||t&&(b=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=b[1]||"",f=this._unescape(b[2])):(h="prefix",f=b[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const z=x||b[0].length,W=o(h,f,m,l,z);this.previousToken=W,this._previousMarker=h,i=i.substr(z,i.length)}function o(a,c,l,d,h){const f=i?r-i.length:r,b={type:a,value:c,prefix:l,line:d,start:f,end:f+h};return e(null,b),b}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(gLe,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in PX?PX[a]:(t=!0,"")});return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(t,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}mLe()(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}let NX=0;class LX{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&FX(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),r=/trig/.test(t),o=/triple/.test(t),s=/quad/.test(t),a=this._n3Mode=/n3/.test(t),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new vLe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){NX=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:t,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,i,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,r){this._callback(null,this._quad(e,t,i,r||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=fL}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<t;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<t&&"/"!==e[o];)r=o;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${NX++}_`,this._prefixCallback=i||fL,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=t,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=fL):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function fL(){}function FX(n,e){const t=e.namedNode;n._namedNode=t,n._blankNode=e.blankNode,n._literal=e.literal,n._variable=e.variable,n._quad=e.quad,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=t(ra.rdf.first),n.RDF_REST=t(ra.rdf.rest),n.RDF_NIL=t(ra.rdf.nil),n.N3_FORALL=t(ra.r.forAll),n.N3_FORSOME=t(ra.r.forSome),n.ABBREVIATIONS={a:t(ra.rdf.type),"=":t(ra.owl.sameAs),">":t(ra.log.implies)},n.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}FX(LX.prototype,Ur);var pL=g(8905);class mL{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||Ur,e&&this.addQuads(e)}_termFromId(e,t){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return Gv(e,t)}_termToNumericId(e){if("Quad"===e.termType){const t=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let o;return t&&i&&r&&(JS(e.graph)||(o=this._termToNumericId(e.graph)))&&this._ids[o?`.${t}.${i}.${r}.${o}`:`.${t}.${i}.${r}`]}return this._ids[Ja(e)]}_termToNewNumericId(e){const t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${JS(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Ja(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,r;for(const o in t)for(const s in i=t[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,t,i,r){const o=e[t]||(e[t]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,t,i,r){const o=e[t],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[t]}*_findInIndex(e,t,i,r,o,s,a,c){let l,d,h;const f=this._entities,m=this._termFromId(c,this._factory),b={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const x in e)if(d=e[x]){b[o]=this._termFromId(f[x],this._factory),i&&((l=d,d={})[i]=l[i]);for(const S in d)if(h=d[S]){b[s]=this._termFromId(f[S],this._factory);const z=r?r in h?[r]:[]:Object.keys(h);for(let W=0;W<z.length;W++)b[a]=this._termFromId(f[z[W]],this._factory),yield this._factory.quad(b.subject,b.predicate,b.object,m)}}}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let r,o;if(r=e[t])for(o in r)i(o)}_loopByKey1(e,t,i){let r,o;for(r in e)o=e[r],o[t]&&i(r)}_loopBy2Keys(e,t,i,r){let o,s,a;if((o=e[t])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,t,i,r){let s,a,c,o=0;t&&((s=e,e={})[t]=s[t]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!function wLe(n){return"string"==typeof n||n instanceof String}(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=Ja(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o)),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),i=this._termToNewNumericId(i);const s=this._addToIndex(o.subjects,e,t,i);return this._addToIndex(o.predicates,t,i,e),this._addToIndex(o.objects,i,e,t),this._size=null,s}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,i,r){return e&&e.subject&&({subject:e,predicate:t,object:i,graph:r}=e),!this.readQuads(e,t,i,r).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=Ja(r);const o=this._graphs;let s,a,c;if(!((e=e&&this._termToNumericId(e))&&(t=t&&this._termToNumericId(t))&&(i=i&&this._termToNumericId(i))&&(s=o[r])&&(a=s.subjects[e])&&(c=a[t])&&i in c))return!1;for(e in this._removeFromIndex(s.subjects,e,t,i),this._removeFromIndex(s.predicates,t,i,e),this._removeFromIndex(s.objects,i,e,t),null!==this._size&&this._size--,s.subjects)return!0;return delete o[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,i,r){const o=new pL.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,t,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,r){return[...this.readQuads(e,t,i,r)]}*readQuads(e,t,i,r){r=r&&Ja(r);const o=this._getGraphs(r);let s,a,c,l;if(!(e&&!(a=this._termToNumericId(e))||t&&!(c=this._termToNumericId(t))||i&&!(l=this._termToNumericId(i))))for(const d in o)(s=o[d])&&(a?l?yield*this._findInIndex(s.objects,l,a,c,"object","subject","predicate",d):yield*this._findInIndex(s.subjects,a,c,null,"subject","predicate","object",d):c?yield*this._findInIndex(s.predicates,c,l,null,"predicate","object","subject",d):l?yield*this._findInIndex(s.objects,l,null,null,"object","subject","predicate",d):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",d))}match(e,t,i,r){return new gL(this,e,t,i,r)}countQuads(e,t,i,r){r=r&&Ja(r);const o=this._getGraphs(r);let a,c,l,d,s=0;if(e&&!(c=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||i&&!(d=this._termToNumericId(i)))return 0;for(const h in o)(a=o[h])&&(s+=e?i?this._countInIndex(a.objects,d,c,l):this._countInIndex(a.subjects,c,l,d):t?this._countInIndex(a.predicates,l,d,c):this._countInIndex(a.objects,d,c,l));return s}forEach(e,t,i,r,o){this.some(s=>(e(s),!1),t,i,r,o)}every(e,t,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),t,i,r,o);return s&&a}some(e,t,i,r,o){for(const s of this.readQuads(t,i,r,o))if(e(s))return!0;return!1}getSubjects(e,t,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,t,i),r}forSubjects(e,t,i,r){r=r&&Ja(r);const o=this._getGraphs(r);let s,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in o)(s=o[r])&&(a?c?this._loopBy2Keys(s.predicates,a,c,e):this._loopByKey1(s.subjects,a,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,t,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,t,i),r}forPredicates(e,t,i,r){r=r&&Ja(r);const o=this._getGraphs(r);let s,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in o)(s=o[r])&&(a?c?this._loopBy2Keys(s.objects,c,a,e):this._loopByKey0(s.subjects,a,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,t,i){const r=[];return this.forObjects(o=>{r.push(o)},e,t,i),r}forObjects(e,t,i,r){r=r&&Ja(r);const o=this._getGraphs(r);let s,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in o)(s=o[r])&&(a?c?this._loopBy2Keys(s.subjects,a,c,e):this._loopByKey1(s.objects,a,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,t,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,t,i),r}forGraphs(e,t,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),t,i,r,o)}createBlankNode(e){let t,i;if(e)for(t=e=`_:${e}`,i=1;this._ids[t];)t=e+i++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},r=t?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,ra.rdf.rest,ra.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const f=a.graph;let m=a.subject;for(;m&&!l;){const b=this.getQuads(null,null,m,null),x=this.getQuads(m,null,null,null);let S,z=null,W=null,ue=null;for(let se=0;se<x.length&&!l;se++)S=x[se],S.graph.equals(f)?d?l=r(m,"has non-list arcs out"):S.predicate.value===ra.rdf.first?z?l=r(m,"has multiple rdf:first arcs"):s.push(z=S):S.predicate.value===ra.rdf.rest?W?l=r(m,"has multiple rdf:rest arcs"):s.push(W=S):b.length?l=r(m,"can't be subject and object"):(d=S,h="subject"):l=r(m,"not confined to single graph");for(let se=0;se<b.length&&!l;++se)S=b[se],d?l=r(m,"can't have coreferences"):S.predicate.value===ra.rdf.rest?ue?l=r(m,"has incoming rdf:rest arcs"):ue=S:(d=S,h="object");z?c.unshift(z.object):l=r(m,"has no list head"),m=ue&&ue.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}class gL extends pL.Readable{constructor(e,t,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:r,subject:o}=this,s=this._filtered=new mL({factory:e._factory});for(const a of e.readQuads(o,r,i,t))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,r){return new gL(this.filtered,e,t,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var xLe=g(2821);function Vr(n,e,t,i,r){return n.readQuads(e,t,i,r)}function BX(n){const e=n.length;let t=0;return new pL.Readable({objectMode:!0,read(){this.push(t<e?n[t++]:null)}})}function _L(n,e){return bL.apply(this,arguments)}function bL(){return bL=Ut(function*(n,e){let t;if("string"==typeof n){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.json())}else t=n;if(t){const i=yield nLe.toRDF(t);e.import(BX(i))}return e}),bL.apply(this,arguments)}function yL(){return yL=Ut(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new xLe.RdfXmlParser({dataFactory:Ur,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(t),i.end(),r}return e}),yL.apply(this,arguments)}function vL(){return vL=Ut(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new LX({format:"n3"}).parse(t);e.import(BX(i))}return e}),vL.apply(this,arguments)}function wL(n,e){const t=JSON.parse(n),i=new mL;return Object.assign(i,t,{_factory:e??Ur}),i}const QS="Unknown Euler angle order",__=.99999;var is=function(n){return n[n.ZYX=0]="ZYX",n[n.YXZ=1]="YXZ",n[n.XZY=2]="XZY",n[n.ZXY=3]="ZXY",n[n.YZX=4]="YZX",n[n.XYZ=5]="XYZ",n}(is||{});class go extends fE{static get ZYX(){return is.ZYX}static get YXZ(){return is.YXZ}static get XZY(){return is.XZY}static get ZXY(){return is.ZXY}static get YZX(){return is.YZX}static get XYZ(){return is.XYZ}static get RollPitchYaw(){return is.ZYX}static get DefaultOrder(){return is.ZYX}static get RotationOrders(){return is}static rotationOrder(e){return is[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=go.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(t*i+o*r);let l=-2*(t*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+o*t),-2*(t*t+s)+1),m=Math.asin(l),b=Math.atan2(c,a);return this.set(f,m,b,go.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function CLe(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=mi(e)}get y(){return this[1]}set y(e){this[1]=mi(e)}get z(){return this[2]}set z(e){this[2]=mi(e)}get alpha(){return this[0]}set alpha(e){this[0]=mi(e)}get beta(){return this[1]}set beta(e){this[1]=mi(e)}get gamma(){return this[2]}set gamma(e){this[2]=mi(e)}get phi(){return this[0]}set phi(e){this[0]=mi(e)}get theta(){return this[1]}set theta(e){this[1]=mi(e)}get psi(){return this[2]}set psi(e){this[2]=mi(e)}get roll(){return this[0]}set roll(e){this[0]=mi(e)}get pitch(){return this[1]}set pitch(e){this[1]=mi(e)}get yaw(){return this[2]}set yaw(e){this[2]=mi(e)}get order(){return this[3]}set order(e){this[3]=function MLe(n){if(n<0&&n>=6)throw new Error(QS);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,is.ZYX)}fromRotationMatrix(e,t=go.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new SR;switch(this[4]){case is.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case is.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case is.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case is.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case is.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case is.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(QS)}}_fromRotationMatrix(e,t=go.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(t=t||this[3]){case go.XYZ:this[1]=Math.asin($r(o,-1,1)),Math.abs(o)<__?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case go.YXZ:this[0]=Math.asin(-$r(c,-1,1)),Math.abs(c)<__?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case go.ZXY:this[0]=Math.asin($r(d,-1,1)),Math.abs(d)<__?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case go.ZYX:this[1]=Math.asin(-$r(l,-1,1)),Math.abs(l)<__?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case go.YZX:this[2]=Math.asin($r(s,-1,1)),Math.abs(s)<__?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case go.XZY:this[2]=Math.asin(-$r(r,-1,1)),Math.abs(r)<__?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(QS)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case go.XYZ:{const f=s*c,m=s*h,b=l*c,x=l*h;t[0]=a*c,t[4]=-a*h,t[8]=d,t[1]=m+b*d,t[5]=f-x*d,t[9]=-l*a,t[2]=x-f*d,t[6]=b+m*d,t[10]=s*a;break}case go.YXZ:{const f=a*c,m=a*h,b=d*c,x=d*h;t[0]=f+x*l,t[4]=b*l-m,t[8]=s*d,t[1]=s*h,t[5]=s*c,t[9]=-l,t[2]=m*l-b,t[6]=x+f*l,t[10]=s*a;break}case go.ZXY:{const f=a*c,m=a*h,b=d*c,x=d*h;t[0]=f-x*l,t[4]=-s*h,t[8]=b+m*l,t[1]=m+b*l,t[5]=s*c,t[9]=x-f*l,t[2]=-s*d,t[6]=l,t[10]=s*a;break}case go.ZYX:{const f=s*c,m=s*h,b=l*c,x=l*h;t[0]=a*c,t[4]=b*d-m,t[8]=f*d+x,t[1]=a*h,t[5]=x*d+f,t[9]=m*d-b,t[2]=-d,t[6]=l*a,t[10]=s*a;break}case go.YZX:{const f=s*a,m=s*d,b=l*a,x=l*d;t[0]=a*c,t[4]=x-f*h,t[8]=b*h+m,t[1]=h,t[5]=s*c,t[9]=-l*c,t[2]=-d*c,t[6]=m*h+b,t[10]=f-x*h;break}case go.XZY:{const f=s*a,m=s*d,b=l*a,x=l*d;t[0]=a*c,t[4]=-h,t[8]=d*c,t[1]=f*h+x,t[5]=s*c,t[9]=m*h-b,t[2]=b*h-m,t[6]=l*c,t[10]=x*h+f;break}default:throw new Error(QS)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new SR(e*r*o-t*i*s,e*i*s+t*r*o,t*i*o-e*r*s,e*i*o+t*r*s)}}var jX=g(4938),TLe=g.t(jX,2),ILe=g(7991),UX=g(5440);const VX={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let eC;const DLe=new Uint8Array(16);function kLe(){if(!eC&&(eC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eC(DLe)}const ys=[];for(let n=0;n<256;++n)ys.push((n+256).toString(16).slice(1));const OLe=function RLe(n,e,t){if(VX.randomUUID&&!e&&!n)return VX.randomUUID();const i=(n=n||{}).random||(n.rng||kLe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return function zX(n,e=0){return ys[n[e+0]]+ys[n[e+1]]+ys[n[e+2]]+ys[n[e+3]]+"-"+ys[n[e+4]]+ys[n[e+5]]+"-"+ys[n[e+6]]+ys[n[e+7]]+"-"+ys[n[e+8]]+ys[n[e+9]]+"-"+ys[n[e+10]]+ys[n[e+11]]+ys[n[e+12]]+ys[n[e+13]]+ys[n[e+14]]+ys[n[e+15]]}(i)};var tC=g(7184),nC=g(9689),PLe=g(6990),iC=g(6030);const b_=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Rr=(Math,Math,{});function BLe(n,{precision:e=Rr.precision||4}={}){return n=function FLe(n){return Math.round(n/Rr.EPSILON)*Rr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Rh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Wv(n,e,t){const i=Rr.EPSILON;t&&(Rr.EPSILON=t);try{if(n===e)return!0;if(Rh(n)&&Rh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Wv(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Rr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Rr.EPSILON=i}}function rl(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}Rr.EPSILON=1e-12,Rr.debug=!1,Rr.precision=4,Rr.printTypes=!1,Rr.printDegrees=!1,Rr.printRowMajor=!0;class xL extends(function GLe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return rl(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Rh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Rr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+BLe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Wv(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Rr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function vs(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function HX(n,e,t=""){if(Rr.debug&&!function WLe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const GX={};function EL(n,e){GX[n]||(GX[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class $Le extends xL{get ELEMENTS(){return rl(!1),0}copy(e){return rl(!1),this}get x(){return this[0]}set x(e){this[0]=vs(e)}get y(){return this[1]}set y(e){this[1]=vs(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return vs(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return vs(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return rl(e>=0&&e<this.ELEMENTS,"index is out of range"),vs(this[e])}setComponent(e,t){return rl(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Sa=typeof Float32Array<"u"?Float32Array:Array;function WX(){var n=new Sa(3);return Sa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function $X(n,e,t){var i=new Sa(3);return i[0]=n,i[1]=e,i[2]=t,i}function YX(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function rC(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function XX(n,e,t){var i=e[0],r=e[1],o=e[2];return n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8],n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});WX();const AL=[0,0,0],KX={};class Nn extends $Le{static get ZERO(){return KX.ZERO=KX.ZERO||Object.freeze(new Nn(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Rh(e)?this.copy(e):(Rr.debug&&(vs(e),vs(t),vs(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Rr.debug&&(vs(e.x),vs(e.y),vs(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=vs(e)}angle(e){return function tFe(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&YX(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return rC(this,this,e),this.check()}rotateX({radians:e,origin:t=AL}){return function ZLe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=AL}){return function QLe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=AL}){return function eFe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function qLe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s}(this,this,e),this.check()}transformAsVector(e){return function iFe(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s}(this,this,e),this.check()}transformByMatrix3(e){return XX(this,this,e),this.check()}transformByMatrix2(e){return function rFe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function JLe(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,b=o*d-i*f,x=i*h-r*d,S=2*t[3];h*=S,f*=S,b*=2,x*=2,n[0]=a+(d*=S)+(m*=2),n[1]=c+h+b,n[2]=l+f+x}(this,this,e),this.check()}}new Nn,new Nn;const $v=new Nn,QX=new Nn;class SL{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new Nn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=$v.from(t),this.center=(new Nn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new SL(this.center,this.radius)}union(e){const t=this.center,i=this.radius,o=e.radius,s=$v.copy(e.center).subtract(t),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return QX.copy(s).scale((-i+c)/a).add(t),this.center.copy(QX),this.radius=c,this}expand(e){const t=(e=$v.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function ZX(n,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(o,s,a),n[2]=Math.hypot(c,l,d),n}($v,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=$v.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?b_.OUTSIDE:o<i?b_.INTERSECTING:b_.INSIDE}}class lFe extends xL{get ELEMENTS(){return rl(!1),0}get RANK(){return rl(!1),0}toString(){let e="[";if(Rr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=vs(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function eK(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1],b=t[2],x=t[3],S=t[4],z=t[5],W=t[6],ue=t[7],se=t[8];return n[0]=f*i+m*s+b*l,n[1]=f*r+m*a+b*d,n[2]=f*o+m*c+b*h,n[3]=x*i+S*s+z*l,n[4]=x*r+S*a+z*d,n[5]=x*o+S*c+z*h,n[6]=W*i+ue*s+se*l,n[7]=W*r+ue*a+se*d,n[8]=W*o+ue*c+se*h,n}function tK(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}!function _Fe(){var n=new Sa(2);Sa!=Float32Array&&(n[0]=0,n[1]=0)}();const nK=Object.freeze([1,0,0,0,1,0,0,0,1]),yFe=Object.freeze([0,0,0,0,0,0,0,0,0]),vFe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),v_={};class oa extends lFe{static get IDENTITY(){return v_.IDENTITY=v_.IDENTITY||Object.freeze(new oa(nK)),v_.IDENTITY}static get ZERO(){return v_.ZERO=v_.ZERO||Object.freeze(new oa(yFe)),v_.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return vFe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function fFe(n){var r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8];return n[0]*(l*o-s*c)+n[1]*(-l*r+s*a)+n[2]*(c*r-o*a)}(this)}identity(){return this.copy(nK)}fromQuaternion(e){return function gFe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,b=r*c,x=o*s,S=o*a,z=o*c;n[0]=1-h-b,n[3]=d-z,n[6]=f+S,n[1]=d+z,n[4]=1-l-b,n[7]=m-x,n[2]=f-S,n[5]=m+x,n[8]=1-l-h}(this,e),this.check()}transpose(){return function uFe(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function hFe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,f=-d*o+a*c,m=l*o-s*c,b=t*h+i*f+r*m;b&&(n[0]=h*(b=1/b),n[1]=(-d*i+r*l)*b,n[2]=(a*i-r*s)*b,n[3]=f*b,n[4]=(d*t-r*c)*b,n[5]=(-a*t+r*o)*b,n[6]=m*b,n[7]=(-l*t+i*c)*b,n[8]=(s*t-i*o)*b)}(this,this),this.check()}multiplyLeft(e){return eK(this,e,this),this.check()}multiplyRight(e){return eK(this,this,e),this.check()}rotate(e){return function mFe(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=Math.sin(t),m=Math.cos(t);n[0]=m*i+f*s,n[1]=m*r+f*a,n[2]=m*o+f*c,n[3]=m*s-f*i,n[4]=m*a-f*r,n[5]=m*c-f*o,n[6]=l,n[7]=d,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?tK(this,this,e):tK(this,this,[e,e,e]),this.check()}translate(e){return function pFe(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1];n[0]=i,n[1]=r,n[2]=o,n[3]=s,n[4]=a,n[5]=c,n[6]=f*i+m*s+l,n[7]=f*r+m*a+d,n[8]=f*o+m*c+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function bFe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=XX(t||[-0,-0,-0],e,this);break;case 4:t=function oFe(n,e,t){const i=e[0],r=e[1],o=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return HX(t,e.length),t}transformVector(e,t){return EL("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return EL("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return EL("Matrix3.transformVector"),this.transform(e,t)}}function iK(){var n=new Sa(4);return Sa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function rK(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function oK(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}!function wFe(){var n=new Sa(4);Sa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var KFe=function(){var n=WX(),e=$X(1,0,0),t=$X(0,1,0);return function(i,r,o){var s=YX(r,o);return s<-.999999?(rC(n,e,r),function XLe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&rC(n,t,r),function KLe(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),rK(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(rC(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function DFe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();iK(),iK(),function dFe(){var n=new Sa(9);Sa!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const qFe=[0,0,0,1];class dK extends xL{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function sK(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}identity(){return function LFe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return rK(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=vs(e)}get y(){return this[1]}set y(e){this[1]=vs(e)}get z(){return this[2]}set z(e){this[2]=vs(e)}get w(){return this[3]}set w(e){this[3]=vs(e)}len(){return function TFe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function IFe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function kFe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return KFe(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function CFe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function UFe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function GFe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function HFe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return function RFe(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return rl(!t),oK(this,this,e),this.check()}multiplyLeft(e,t){return rl(!t),oK(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function FFe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function BFe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function jFe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return function MFe(n,e,t){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t}(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=qFe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function oC(n,e,t,i){var f,m,b,x,S,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),b=Math.sin(f),x=Math.sin((1-i)*f)/b,S=Math.sin(i*f)/b):(x=1-i,S=i),n[0]=x*r+S*c,n[1]=x*o+S*l,n[2]=x*s+S*d,n[3]=x*a+S*h,n}(this,e,t,i),this.check()}transformVector4(e,t=e){return function OFe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),HX(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const JFe=new Nn,ZFe=new Nn,sC=new Nn,aC=new Nn,cC=new Nn,QFe=new Nn,eBe=new Nn;class CL{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new Nn).from(e),this.halfAxes=new oa(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Nn(e).len(),new Nn(t).len(),new Nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Nn(e).normalize(),o=new Nn(t).normalize(),s=new Nn(i).normalize();return(new dK).fromMatrix3(new oa([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new dK(i),o=(new oa).fromQuaternion(r);return o[0]=o[0]*t[0],o[1]=o[1]*t[0],o[2]=o[2]*t[0],o[3]=o[3]*t[1],o[4]=o[4]*t[1],o[5]=o[5]*t[1],o[6]=o[6]*t[2],o[7]=o[7]*t[2],o[8]=o[8]*t[2],this.center=(new Nn).from(e),this.halfAxes=o,this}clone(){return new CL(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new SL){const t=this.halfAxes,i=t.getColumn(0,sC),r=t.getColumn(1,aC),o=t.getColumn(2,cC),s=JFe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(t)+e.distance;return l<=-c?b_.OUTSIDE:l>=c?b_.INSIDE:b_.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=ZFe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,sC),o=i.getColumn(1,aC),s=i.getColumn(2,cC),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(t.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(t.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(t.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,sC),l=a.getColumn(1,aC),d=a.getColumn(2,cC),h=QFe.copy(c).add(l).add(d).add(s),f=eBe.copy(h).subtract(e);let m=t.dot(f);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,sC);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,aC);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,cC);return r.transformAsPoint(e),this.halfAxes=new oa([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const uK=new Nn,hK=new Nn;class ML{constructor(e=[0,0,1],t=0){this.normal=new Nn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return rl(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=uK.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),rl(Wv(this.normal.len(),1)),this.distance=r,this}clone(e){return new ML(this.normal,this.distance)}equals(e){return Wv(this.distance,e.distance)&&Wv(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=hK.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=uK.from(e);const i=this.getPointDistance(e),r=hK.copy(this.normal).scale(i);return e.subtract(r).to(t)}}new Nn([1,0,0]),new Nn([0,1,0]),new Nn([0,0,1]),new Nn,new Nn,new ML(new Nn(1,0,0),0),new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,Math,new oa,new oa,new oa,new oa,new oa,new Nn,new Nn,new Nn,new Nn,new Nn,new oa,new oa,new oa;var DBe=g(7659);function*dC(n,e,t){for(const[i,r]of Object.entries(t))for(const o of Vr(n,e,i,null,null)){const s="Literal"===o.object.termType?(0,nC.fromRdf)(o.object):o.object.id;yield[r,s]}}function Rp(n,e,t,i){const r={"@id":e,"@type":t};for(const[o,s]of Object.entries(i))for(const a of Vr(n,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,nC.fromRdf)(a.object):a.object.id;r[s]=c}return r}const Zi=function DX(n,e){const t=Object.create(null);for(const r in n)i(r,n[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);t[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in t))throw new Error(`Unknown prefix: ${r}`);return t[r]}return e=e||Ur,i}({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Ur),gK={x:Zi("rdf"),type:Zi("rdf")("type")},kBe_label=(Zi("rdfs"),Zi("rdfs")("label")),on=(Zi("rdfs")("comment"),Zi("rdfs")("isDefinedBy"),Zi("rdfs")("seeAlso"),Zi("ccf")),ci={id:Zi("ccf")("has_registration_location"),label:Zi("rdfs")("label"),description:Zi("rdfs")("comment"),link:on("url"),sex:on("sex"),age:on("age"),bmi:on("bmi"),Male:Ur.literal("Male"),Female:Ur.literal("Female"),consortiumName:on("consortium_name"),providerName:on("tissue_provider_name"),providerUUID:on("tissue_provider_uuid"),donor:on("comes_from"),sections:on("subdivided_into_sections"),datasets:on("generates_dataset"),sampleType:on("sample_type"),TissueBlock:Ur.literal("Tissue Block"),TissueSection:Ur.literal("Tissue Section"),NonStandard:Ur.literal("Non-standard"),sectionCount:on("section_count"),sectionSize:on("section_size"),sectionUnits:on("section_size_unit"),sectionNumber:on("section_number"),spatialEntity:on("has_registration_location"),ontologyTerms:on("has_ontology_term"),cellTypeTerms:on("has_cell_type_term"),biomarkerTerms:on("has_biomarker_term"),technology:on("technology"),thumbnail:on("thumbnail")},gi={x:on,base:Zi("base"),ontologyNode:{label:on("ccf_pref_label"),parent:on("ccf_part_of"),children:on("ccf_part_of"),rui_rank:on("rui_rank"),synonymLabels:Ur.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:on("ccf_part_of"),ct_is_a:on("ccf_ct_isa"),located_in:on("ccf_located_in"),characterizes:on("ccf_characterizes"),bm_located_in:on("ccf_bm_located_in")},spatial:{Female:Zi("base")("VHFemale"),Male:Zi("base")("VHMale"),BothSexes:Zi("base")("VHBothSexes"),FemaleOrgans:Zi("base")("VHFemaleOrgans"),MaleOrgans:Zi("base")("VHMaleOrgans")},SpatialObjectReference:on("spatial_object_reference"),SpatialEntity:on("spatial_entity"),SpatialPlacement:on("spatial_placement"),spatialObjectReference:{file:on("file_url"),file_format:on("file_format"),file_subpath:on("file_subpath")},extractionSet:{label:Zi("rdfs")("label"),rui_rank:on("rui_rank")},spatialEntity:{label:Zi("rdfs")("label"),description:Zi("rdfs")("comment"),creator:Zi("dcterms")("creator"),creator_first_name:on("creator_first_name"),creator_last_name:on("creator_last_name"),creator_middle_name:on("creator_middle_name"),creator_orcid:on("creator_orcid"),creation_date:Zi("dcterms")("created"),updated_date:on("updated_date"),ccf_annotations:on("collides_with"),representation_of:on("representation_of"),reference_organ:on("has_reference_organ"),extraction_set_for:on("extraction_set_for"),extraction_set:on("has_extraction_set"),sex:on("organ_owner_sex"),side:on("organ_side"),rui_rank:on("rui_rank"),slice_thickness:on("slice_thickness"),slice_count:on("slice_count"),x_dimension:on("x_dimension"),y_dimension:on("y_dimension"),z_dimension:on("z_dimension"),dimension_units:on("dimension_unit"),object:on("has_object_reference")},spatialPlacement:{source:on("placement_for"),target:on("placement_relative_to"),placement_date:Zi("dcterms")("created"),x_scaling:on("x_scaling"),y_scaling:on("y_scaling"),z_scaling:on("z_scaling"),scaling_units:on("scaling_unit"),x_rotation:on("x_rotation"),y_rotation:on("y_rotation"),z_rotation:on("z_rotation"),w_rotation:on("theta_rotation"),rotation_order:on("rotation_order"),rotation_units:on("rotation_unit"),x_translation:on("x_translation"),y_translation:on("y_translation"),z_translation:on("z_translation"),translation_units:on("translation_unit")}},li={x:Zi("uberon"),body:Zi("uberon")("0013702")},RBe={x:Zi("cl"),cell:Zi("cl")("0000000")},Xv={x:Zi("fma")},ol=(Zi("lmha"),{body:li.body,cell:RBe.cell,respiratory_system:li.x("0001004"),colon:li.x("0001155"),left_lung:li.x("0002168"),right_lung:li.x("0002167"),left_bronchus:li.x("0002178"),right_bronchus:li.x("0002177"),kidney:li.x("0002113"),ureter:li.x("0000056"),eye:li.x("0000970"),fallopian_tube:li.x("0003889"),knee:li.x("0001465"),ovary:li.x("0000992"),trachea:li.x("0003126"),aorta:li.x("0000947"),blood:li.x("0000178"),bone_marrow:li.x("0002371"),male_reproductive_system:li.x("0000079"),lymph_node:li.x("0000029"),blood_vasculature:li.x("0004537"),brain:li.x("0000955"),eye_left:li.x("0004548"),eye_right:Xv.x("54449"),fallopian_tube_left:li.x("0001303"),fallopian_tube_right:li.x("0001302"),heart:li.x("0000948"),kidney_left:li.x("0004538"),kidney_right:li.x("0004539"),knee_left:Xv.x("24978"),knee_right:Xv.x("24977"),large_intestine:li.x("0000059"),liver:li.x("0002107"),lungs:li.x("0002048"),mesenteric_lymph_node:li.x("0002509"),ovary_left:Xv.x("7214"),ovary_right:Xv.x("7213"),pancreas:li.x("0001264"),pelvis:li.x("0001270"),prostate_gland:li.x("0002367"),skin:li.x("0002097"),small_intestine:li.x("0002108"),spleen:li.x("0002106"),thymus:li.x("0002370"),ureter_left:li.x("0001223"),ureter_right:li.x("0001222"),urinary_bladder:li.x("0001255"),uterus:li.x("0000995")});function OL(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const uC={spatialObjectReference:OL(gi.spatialObjectReference),spatialEntity:OL(gi.spatialEntity),spatialPlacement:OL(gi.spatialPlacement)};function _K(n,e){const t=Rp(n,e,"ExtractionSet",uC.spatialEntity);return t.extractionSites=tC(n.getSubjects(gi.spatialEntity.extraction_set,e,null).map(i=>Op(n,i.id)),["rui_rank"]),t}function Op(n,e){const t=Rp(n,e,"SpatialEntity",uC.spatialEntity);return t.object&&(t.object=function OBe(n,e){return Rp(n,e,"SpatialObjectReference",uC.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,gi.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,ci.spatialEntity,e,null),t}function FBe(n,e){const t=Rp(n,e,"SpatialPlacement",uC.spatialPlacement);return t.source&&(t.source=Op(n,t.source)),t.target&&(t.target=Op(n,t.target)),t}const jBe=(jX||TLe).DirectedGraph;function bK(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),o=[t.x_rotation,t.y_rotation,t.z_rotation].map(r8),s=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(o).scale(s)}class yK{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new jBe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},gK.type,gi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},gK.type,gi.SpatialEntity,null);const t={};for(const i of Vr(e,null,gi.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of Vr(e,null,gi.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new Kn(Kn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new Kn(Kn.IDENTITY),o=ILe(this.graph,e,t);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&bK(r,FBe(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=UX(e,"placement[0]",UX(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,t),o&&(o=bK(o,r))):i&&(o=this.getTransformationMatrix(i,t)),o){const s=(new go).fromRotationMatrix(o,go.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(Ece),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${OLe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class vK{constructor(e){this.db=e}getSpatialEntity(e){return Op(this.db.store,e)}getExtractionSets(e){return function PBe(n,e){return tC(n.getSubjects(gi.spatialEntity.extraction_set_for,e,null).map(t=>_K(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return _K(this.db.store,e)}getAnatomicalStructures(e){return function NBe(n,e){return tC(n.getSubjects(gi.spatialEntity.reference_organ,e,null).map(t=>Op(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function LBe(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(Op(n,t.subject.id))},null,gi.spatialEntity.reference_organ,null,null),tC(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(e?.sex){case"Male":t=gi.spatial.Male.id;break;case"Female":t=gi.spatial.Female.id;break;default:t=gi.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(e?.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return e?.debug&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,t,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(gi.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(gi.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(gi.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(gi.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(gi.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,t){const i=void 0!==t?.sex&&"both"!==t?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===t?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(t)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(s){if(r)s=new Kn(Kn.IDENTITY).rotateX(r8(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const UBe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function hC(n,e=UBe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:fu,omit:VBe,set:fC,toNumber:PL}=PLe,wK={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},zBe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},xK=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),HBe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},x_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},NL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class $Be{constructor(e,t){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=zBe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=wK}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const s=this.getRuiLocation(e,this.donor);s?this.rui_location=s:this.bad=!0,x_[e.group_uuid]||(x_[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=x_[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const d={},h=[];this.sections=h;const f=[];this.datasets=f;for(const z of r.filter(W=>"Sample"===W.entity_type)){const W=this.getSection(z,e);d[z.submission_id]=W,h.push(W),W.section_number=W.section_number??h.length}for(const z of r)if("Dataset"===z.entity_type){const W=this.getDataset(z,t),ue=fu(z,["ingest_metadata","metadata","tissue_id"]);d[ue]?d[ue].datasets?.push(W):f.push(W)}const m=s??{},b=`${m.x_dimension} x ${m.y_dimension} x ${m.z_dimension} ${m.dimension_units}`;this.section_count=m.slice_count||h.length;const x=parseFloat((m.slice_thickness||(m.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=x;const S=m.dimension_units||"millimeter";this.section_units=S,this.description=`${b}, ${x} ${S}, ${this.section_count} Sections`,h.forEach((z,W)=>{z.description=`${m.x_dimension} x ${m.y_dimension} x ${x} ${S}, ${x} ${S}, ${z.description}`,z.section_number=W+1})}getSection(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${x_[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=x_[e.group_uuid]||e.group_name,o=e.created_by_user_displayname,s=e.dataset_type??"",a=s.toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":s.split(/ \[/)[0],l=this.getDatasetThumbnail(e,t)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${o}, ${r}`,description:`Dataset Type: ${s}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,t){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(t?`?token=${t}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=fu(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>xK.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(t?`?token=${t}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(xK.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=HBe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const t=(e.description||"").toLowerCase();let i;t.includes("female")?i="Female":t.includes("male")&&(i="Male");const r=t.match(/age ([0-9]+)/)??t.match(/ ([0-9]+) years/);let o,s,a;r&&(o=PL(r[1]));const c=fu(e,"mapped_metadata",fu(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!o&&c.age_value?.length>0&&(o=c.age_value[0]),!s&&c.body_mass_index_value?.length>0&&(s=c.body_mass_index_value[0]);for(const m of fu(e,"metadata.organ_donor_data",fu(e,"metadata.living_donor_data",[])))"Feminine gender"===m.preferred_term||"Female"===m.preferred_term?i="Female":"Masculine gender"===m.preferred_term||"Male"===m.preferred_term?i="Male":"Current chronological age"===m.preferred_term||"Age"===m.preferred_term?o=PL(m.data_value):"Body mass index"===m.preferred_term?s=PL(m.data_value):"Race"===m.grouping_concept_preferred_term&&(a=m.preferred_term);let l="";i&&o?(l+=`${i}, Age ${o}`,s&&(l+=`, BMI ${s.toFixed(1)}`)):i&&(l=i);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=x_[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${d}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:o,sex:i,bmi:s,race:a,consortium_name:this.portal===wK?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=fu(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?fC(i,["placement","target"],o.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&fC(i,["placement","target"],"Male"===t.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return VBe({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const YBe=1e4,XBe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],KBe={exists:{field:"rui_location"}};function EK(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:t??KBe,_source:{includes:XBe}})}function LL(n,e){return FL.apply(this,arguments)}function FL(){return FL=Ut(function*(n,e){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),FL.apply(this,arguments)}function BL(){return BL=Ut(function*(n,e,t){const i=YBe,r=function qBe(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),o=EK(0,i,t),s=yield LL(n,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(LL(n,{method:"POST",headers:r,body:EK(h,i,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),BL.apply(this,arguments)}function jL(){return jL=Ut(function*(n,e,t,i,r="",o=""){let s;if("static"===e?s=yield LL(n):"search-api"===e&&(s=yield function JBe(n,e,t){return BL.apply(this,arguments)}(n,i,t)),s)return function GBe(n,e,t=!1){const r={},o=fu(n,"hits.hits",[]).map(a=>fu(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new $Be(a,e).toJsonLd());for(const a of o){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const s=Object.values(r);return t&&(function WBe(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,t++)}i.samples=r.filter(o=>!0!==o.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(s),console.log(s.map(a=>({"@context":NL,...a})))),hC(JSON.stringify({"@context":NL,"@graph":s}),NL)}(s,i);console.warn(`Unable to load ${n}`)}),jL.apply(this,arguments)}function Kv(n,e,t){const i=new Set;for(const r of e)for(const o of Vr(n,r,t,null,null))i.add(o.object.id);return i}const n3e={[gi.spatialEntity.x_dimension.id]:"x",[gi.spatialEntity.y_dimension.id]:"y",[gi.spatialEntity.z_dimension.id]:"z"};function r3e(n,e,t,i){const r=e.getTransformationMatrix(t,i);let o;if(r){const s=r.getTranslation(),a=function i3e(n,e){const t=Rp(n,e,"Dimensions",n3e);return[t.x,t.y,t.z]}(n,t).map(l=>l/1e3/2),c=(new go).fromRotationMatrix(r,go.XYZ).toQuaternion().normalize().calculateW();o=(new CL).fromCenterHalfSizeQuaternion(s,a,c)}return o}function o3e(n,e,t,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of t){const f=r3e(n,e,h,c);f&&f.distanceSquaredTo([r,o,s].map(b=>b/1e3))<=d&&l.add(h)}return l}function qv(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Vr(n,a,ci.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function pC(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Vr(n,a,ci.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function E_(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function UL(n,e,t){const i=new Set;for(const r of t){const o=Ur.namedNode(r);n.forSubjects(E_(e,i),gi.spatialEntity.ccf_annotations,o,null)}return i}function VL(n,e){const t=function y3e(n,e){const t=new Map;for(const i of n)for(const r of Vr(e,i,ci.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id).add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const o=t.get(r);for(const s of Vr(e,r,gi.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function E3e(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[gi.ontologyNode.label.id]:"label",[t]:"parent",[gi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of dC(n,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=n.getSubjects(t,e,null).map(o=>o.id),i}function AK(n,e,t,i){const r={root:e,nodes:{}},o=new Set;for(const a of Vr(n,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=E3e(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const s=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,SK(r),r}function SK(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)SK(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const CK=DBe(function A3e(n){const e=AK(n,ol.body.id,"body",gi.asctb.part_of.id);return e.nodes[ol.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");function zL(n,e,t,i){return{"@id":`http://purl.org/ccf/${n}`,id:n,label:e,parent:t??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const mC={[ci.label.id]:"label",[ci.description.id]:"description",[ci.link.id]:"link"},M3e={...mC,[ci.providerName.id]:"providerName"},T3e={...mC,[ci.technology.id]:"technology",[ci.thumbnail.id]:"thumbnail"},I3e={...mC,[ci.sampleType.id]:"sampleType",[ci.sectionNumber.id]:"sectionNumber",[ci.datasets.id]:"datasets"},D3e={...mC,[ci.sampleType.id]:"sampleType",[ci.sectionCount.id]:"sectionCount",[ci.sectionSize.id]:"sectionSize",[ci.sectionUnits.id]:"sectionUnits",[ci.donor.id]:"donor",[ci.spatialEntity.id]:"spatialEntityId",[ci.sections.id]:"sections",[ci.datasets.id]:"datasets"};function k3e(n,e){return Rp(n,e,"Donor",M3e)}function MK(n,e){return Rp(n,e,"Dataset",T3e)}function R3e(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of dC(n,e,I3e))if("datasets"===i){const o=MK(n,r);t[i].push(o)}else t[i]=r;return t}class P3e{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const t=Date.now();return this.database.connect().then(function(){var i=Ut(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-t})}}function HL(){return HL=Ut(function*(){const n=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(n,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),HL.apply(this,arguments)}const{delMany:j3e,get:TK,setMany:U3e}=T,V3e={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class z3e{constructor(e=V3e){this.options=e,this.store=new mL(void 0,{factory:Ur}),this.graph=new yK(this),this.scene=new vK(this)}connect(e,t=!1){var i=this;return Ut(function*(){return e&&(i.options=e),i.initializing||(i.initializing=t?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return Ut(function*(){const t=(new Date).getTime(),i=tLe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield TK(r).catch(()=>{});let a;s&&t-new Date(+s).getTime()>36e5?yield j3e([o,r]).catch(()=>{}):a=yield TK(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),U3e([[o,e.serialize()],[r,""+t]]).catch(()=>{}))})()}doConnect(){var e=this;return Ut(function*(){const t=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=wL(r,Ur);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=wL(o,Ur))}else r?.length>0&&i.push(r);i.push(yield function B3e(){return HL.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):t.push(function ZBe(n,e,t,i){return jL.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(o=>{if(o)return e.addDataSources([o])}))),t.push(e.addDataSources(i)),yield Promise.all(t),yield e.synchronize()})()}addDataSources(e,t){var i=this;return Ut(function*(){const r=t??i.store;return yield Promise.all(e.map(function(){var o=Ut(function*(s){if("string"==typeof s)if((s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")){const a=s;s=hC(s=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield _L(s,r)}else s.endsWith("n3")?yield function ALe(n,e){return vL.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function ELe(n,e){return yL.apply(this,arguments)}(s,r):(s=hC(s),yield _L(s,r));else s=hC(JSON.stringify(s)),yield _L(s,r)});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return Ut(function*(){return yield new Promise(t=>{setTimeout(t,500)}),e.graph.createGraph(),function N3e(n){const e=CK(n),t=new Map;for(const{subject:i,object:r}of Vr(n,null,gi.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;t.set(i.id,[...o].map(a=>Ur.namedNode(a)))}for(const{object:i}of Vr(n,null,ci.spatialEntity,null,null))for(const{subject:r}of Vr(n,null,gi.spatialPlacement.source,i,null))for(const{object:o}of Vr(n,r,gi.spatialPlacement.target,null,null))for(const s of t.get(o.id)??[])n.addQuad(Ur.namedNode(i.id),gi.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function SLe(n){const e=Object.assign({},n);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var t=this;return Ut(function*(){t.store=wL(e,Ur),t.graph=new yK(t),t.scene=new vK(t),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function a3e(n,e,t){let i=function c3e(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),ci.spatialEntity,null,null),e}(n);if(i.size>0&&(i=function _3e(n,e,t=!0){const i=new Set;if(n.forSubjects(E_(e,i),ci.spatialEntity,null,null),!t){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(n,i)),i.size>0&&("Male"===t.sex||"Female"===t.sex)){const r=t.sex;i=qv(n,i,o=>function l3e(n,e,t){const i=new Set;return n.forSubjects(E_(e,i),ci.sex,ci[t],null),i}(n,o,r))}if(i.size>0&&t.consortiums?.length>0&&(i=qv(n,i,r=>function d3e(n,e,t){const i=new Set;for(const r of t){const o=Ur.literal(r);n.forSubjects(E_(e,i),ci.consortiumName,o,null)}return i}(n,r,t.consortiums))),i.size>0&&t.tmc?.length>0&&(i=qv(n,i,r=>function u3e(n,e,t){const i=new Set;for(const r of t){const o=Ur.literal(r);n.forSubjects(E_(e,i),ci.providerName,o,null)}return i}(n,r,t.tmc))),i.size>0&&t.technologies?.length>0&&(i=function s3e(n,e,t){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of Vr(n,c,ci.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of Vr(n,c,ci.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=t(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(n,i,r=>function h3e(n,e,t){const i=new Set;for(const r of t){const o=Ur.literal(r);n.forSubjects(E_(e,i),ci.technology,o,null)}return i}(n,r,t.technologies))),i.size>0&&t.spatialSearches?.length>0&&(i=pC(n,i,r=>function b3e(n,e,t,i){const r=new Set;for(const o of i)o3e(n,e,t,o).forEach(a=>r.add(a));return r}(n,e,r,t.spatialSearches))),i.size>0&&t.ontologyTerms?.length>0){const r=t.ontologyTerms;-1===r.indexOf(ol.body.id)&&(i=pC(n,i,o=>UL(n,o,r)))}if(i.size>0&&t.cellTypeTerms?.length>0){const r=t.cellTypeTerms;-1===r.indexOf(ol.cell.id)&&(i=pC(n,i,o=>function f3e(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,gi.asctb.located_in,null),r===ol.cell.id&&i.add(ol.body.id);return UL(n,e,[...i])}(n,o,r)))}if(i.size>0&&t.biomarkerTerms?.length>0){const r=t.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=pC(n,i,o=>function p3e(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,gi.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(ol.body.id);return UL(n,e,[...i])}(n,o,r)))}if(i.size>0&&2===t.ageRange?.length&&iC(t.ageRange[0])&&iC(t.ageRange[1])){const r=Math.max(...t.ageRange),o=Math.min(...t.ageRange);1===o&&110===r||(i=qv(n,i,s=>function m3e(n,e,t,i){const r=new Set;for(const o of e)for(const s of Vr(n,o,ci.age,null,null)){const a=(0,nC.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}if(i.size>0&&2===t.bmiRange?.length&&iC(t.bmiRange[0])&&iC(t.bmiRange[1])){const r=Math.max(...t.bmiRange),o=Math.min(...t.bmiRange);13===o&&83===r||(i=qv(n,i,s=>function g3e(n,e,t,i){const r=new Set;for(const o of e)for(const s of Vr(n,o,ci.bmi,null,null)){const a=(0,nC.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Ur.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(t=>function BBe(n,e){const t=n.getObjects(Ur.namedNode(e),ci.spatialEntity,null);if(t.length>0)return Op(n,t[0].id)}(this.store,t))}getDatabaseStatus(){var e=this;return Ut(function*(){return e.status||(e.status=new P3e(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return Ut(function*(){return function e3e(n){const e=new Set;for(const t of Vr(n,null,ci.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return Ut(function*(){return function t3e(n){const e=new Set;for(const t of Vr(n,null,ci.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var t=this;return Ut(function*(){return e={...e,hasSpatialEntity:!0},[...t.getIds(e)].map(i=>function O3e(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of dC(n,e,D3e))if("sections"===i){const o=R3e(n,r);t[i].push(o)}else if("datasets"===i){const o=MK(n,r);t[i].push(o)}else t[i]="donor"===i?k3e(n,r):r;return t}(t.store,i))})()}getAggregateResults(e){var t=this;return Ut(function*(){return function QBe(n,e){const t=Kv(e,n,ci.donor.id),i=Kv(e,t,ci.providerUUID.id),r=new Set;for(const c of n)for(const l of Vr(e,c,ci.spatialEntity,null,null))r.add(l.subject.id);const o=Kv(e,r,ci.sections.id),s=new Set([...Kv(e,r,ci.datasets.id),...Kv(e,o,ci.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(t.getIds(e),t.store)})()}getOntologyTermOccurences(e){var t=this;return Ut(function*(){return function v3e(n,e){const t={};return VL(n,e).forEach((r,o)=>{t[o]=r.size}),t}(t.getIds(e),t.store)})()}getCellTypeTermOccurences(e){var t=this;return Ut(function*(){return function x3e(n,e){const t=VL(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of Vr(e,null,gi.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[ol.cell.id]=t.get(ol.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getBiomarkerTermOccurences(e){var t=this;return Ut(function*(){return function w3e(n,e){const t=VL(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of Vr(e,null,gi.asctb.bm_located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r.biomarkers=t.get(ol.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getOntologyTreeModel(){var e=this;return Ut(function*(){return CK(e.store)})()}getCellTypeTreeModel(){var e=this;return Ut(function*(){return function S3e(n){return AK(n,ol.cell.id,"cell",gi.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return Ut(function*(){return function C3e(n){const e=gi.x("ccf_biomarker_type"),t={biomarkers:zL("biomarkers","Biomarkers","",[])};for(const i of Vr(n,null,e,null,null)){const r=i.object.value,o=i.subject.id;t[r]||(t[r]=zL(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),t.biomarkers.children.push(r)),t[r].children.push(o);const s=zL(o,"",r,[]),a={[gi.ontologyNode.label.id]:"label",[kBe_label.id]:"synonymLabels"};for(const[c,l]of dC(n,o,a))"synonymLabels"===c?l&&l!==s.label&&s.synonymLabels.push(l):s[c]=l;for(const c of Object.values(t))c.children.length>1&&c.children.sort((l,d)=>t[l]?.label.localeCompare(t[d]?.label));t[o]=s}return{root:"biomarkers",nodes:t}}(e.store)})()}getReferenceOrgans(){var e=this;return Ut(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var t=this;return Ut(function*(){return t.graph.createGraph(),t.scene.getScene(e)})()}getReferenceOrganScene(e,t){var i=this;return Ut(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,t)})()}getSpatialPlacement(e,t){var i=this;return Ut(function*(){return i.graph.getSpatialPlacement(e,t)})()}}class IK extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class J3e{constructor(){this.cancelUncompleted$=new Yt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const GL="\u0275fac",DK=Symbol("InjectorInstance"),kK=Symbol("FactoryHasBeenDecorated");function RK(n,e){const t=n[DK];return t?t.get(e):null}const e4e={cancelUncompleted:!1};function OK(n=e4e){return(e,t,i)=>{let r;const o=function Z3e(n){return n?new J3e:null}(n.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=RK(this,td)||function K3e(){throw new IK}(),c=RK(this,nn)||function q3e(){throw new IK}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function X3e(n,e,t){return ag(e)?function Y3e(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):lp(e)?function $3e(n,e,t){return null!==t&&(e=e.pipe(jr(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,t,{set:a=>r=a,get:()=>s}),function Q3e(n){if(kK in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[GL]&&function WL(n){const e=n[GL];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[DK]=We(kd),r};t&&(t.factory=i),Object.defineProperty(n,GL,{get:()=>i})}(e),n.constructor.prototype[kK]=!0}(e)}}const H4e=["bodyCanvas"];let G4e=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new qt,this.nodeDrag=new qt,this.nodeClick=new qt,this.nodeHoverStart=new qt,this.nodeHoverStop=new qt,this.initialized=new qt,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:o}=this.bodyCanvas.nativeElement,s=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/s/t.x),Math.log2((o-i.y)/s/t.y));this.zoom=a}}setupBodyUI(){var t=this;return Ut(function*(){const i=t.bodyCanvas.nativeElement,r=new kAe({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",o=>o.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(o=>t.rotationChange.next(o)),t.bodyUI.nodeDrag$.subscribe(o=>t.nodeDrag.emit(o)),t.bodyUI.nodeClick$.subscribe(o=>t.nodeClick.emit(o)),t.bodyUI.nodeHoverStart$.subscribe(o=>t.nodeHoverStart.emit(o)),t.bodyUI.nodeHoverStop$.subscribe(o=>t.nodeHoverStop.emit(o))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Mi(H4e,5,vn),2&i){let o;Tn(o=In())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&yo(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&Vn(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})(),W4e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[xr]})}return n})();new _t("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const YK=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));function dje(n,e){if(1&n&&(Mt(0,"div",16),Vn(1,"youtube-player",17),kt()),2&n){const t=Mn(3);Ot(),S1("videoId",t.videoID)}}function uje(n,e){if(1&n&&(Mt(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Yn(3),kt()(),Mt(4,"div",13),Vn(5,"markdown",14),xn(6,dje,2,1,"div",15),kt()()),2&n){const t=Mn(),i=t.index,r=t.$implicit;Jt("expanded",0===i),Ot(3),es(r.title),Ot(2),Cn("first",0===i),Jt("data",r.content),Ot(),Jt("ngIf",0===i)}}function hje(n,e){if(1&n&&(Mt(0,"div",9),xn(1,uje,7,6,"mat-expansion-panel",10),kt()),2&n){const t=e.$implicit;Ot(),Jt("ngIf",t)}}YK.filter(n=>!0!==n.disabled);let XK=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(We(CS),We(I$))};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Mt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Yn(5),kt(),Mt(6,"div",5)(7,"mat-icon",6),un("click",function(){return r.close()}),Yn(8,"clear"),kt()()(),Mt(9,"mat-dialog-content",7),xn(10,hje,2,1,"div",8),kt()()()()),2&i&&(Ot(5),es(r.infoTitle),Ot(5),Jt("ngForOf",r.documentationContents))},dependencies:[Fl,jf,vN,wN,Cp,V$,$2e,W$,rY],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})(),KK=(()=>{class n{constructor(t){this.http=t,this.panelContent=new Ni({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(o=>{const s={content:this.parseMarkdown(o),infoTitle:r,videoID:i};this.panelContent.next(s)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const o of r)if(o.length){const s=o.includes("\n\n")?"\n\n":"\r\n\r\n",a=o.split(s);i.push({title:a[0],content:a.splice(1).join(s)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Mh))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pje=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new qt,this.closeClicked=new qt}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&yo(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Mt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Yn(5),kt(),Mt(6,"mat-icon",5),un("click",function(){return r.close()}),Yn(7,"clear"),kt()(),Vn(8,"img",6),Mt(9,"mat-dialog-content",7)(10,"div",8),Yn(11),kt(),Mt(12,"a",9),un("click",function(){return r.onDialogButtonClick()}),kt()()()()()),2&i&&(Ot(5),es(r.infoTitle),Ot(3),Jt("src",r.imageUrl,oy),Ot(3),ks(" ",r.message,""),Ot(),Jt("text",r.callToAction))},dependencies:[Cp,vN,wN,sY],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})(),T_=(()=>{let n=class Qv extends jRe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function URe(){return Ri(n=>null!=n)}(),ta(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(VW(...t),wh(),ta(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(VW(...t),wh(),ta(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(Qv)))(r||Qv)}})();static#t=this.\u0275prov=Ct({token:Qv,factory:Qv.\u0275fac})};return oi([AY()],n.prototype,"config$",null),n=oi([LRe(),m9({name:"globalConfig",defaults:null})],n),n})();!function _je(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();class vje{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getBiomarkerTreeModel(){return this.forwardCall("getBiomarkerTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getBiomarkerTermOccurences(e){return this.forwardCall("getBiomarkerTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,t){return this.forwardCall("getReferenceOrganScene",e,t)}}class qK extends vje{forwardCall(e,...t){return this.impl$.pipe(Tr(i=>i[e](...t)))}}let JK=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();const YL=new Yt,I_={cacheBusterObserver:YL},Fp={cacheBusterObserver:YL,maxCacheCount:4};function ZK(n,e,t){return n?{min:n[0]>e?n[0]:void 0,max:n[1]<t?n[1]:void 0}:void 0}function wje(n){return{age:ZK(n?.ageRange,1,110),bmi:ZK(n?.bmiRange,13,83),sex:n?.sex?.toLowerCase?.(),ontologyTerms:n?.ontologyTerms,cellTypeTerms:n?.cellTypeTerms,biomarkerTerms:n?.biomarkerTerms,consortiums:n?.consortiums,providers:n?.tmc,technologies:n?.technologies,spatial:n?.spatialSearches}}function QK(n){return n.map(e=>({...e,transformMatrix:new Kn(e.transformMatrix??[])}))}let xje=(()=>{class n{constructor(t,i){this.api=t,this.globalConfig=i,i.getOption("hubmapToken").subscribe(YL)}getDatabaseStatus(){return this.doRequest(t=>this.api.dbStatus(t))}getProviderNames(){return this.doRequest(t=>this.api.providerNames(t))}getDatasetTechnologyNames(){return this.doRequest(t=>this.api.technologyNames(t))}getOntologyTreeModel(){return this.doRequest(t=>this.api.ontologyTreeModel(t),void 0,{},n=>n)}getCellTypeTreeModel(){return this.doRequest(t=>this.api.cellTypeTreeModel(t),void 0,{},n=>n)}getBiomarkerTreeModel(){return this.doRequest(t=>this.api.biomarkerTreeModel(t),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(t=>this.api.referenceOrgans(t),void 0,{},n=>n)}getTissueBlockResults(t){return this.doRequest(i=>this.api.tissueBlocks(i),t,{},n=>n)}getAggregateResults(t){return this.doRequest(i=>this.api.aggregateResults(i),t)}getOntologyTermOccurences(t){return this.doRequest(i=>this.api.ontologyTermOccurences(i),t)}getCellTypeTermOccurences(t){return this.doRequest(i=>this.api.cellTypeTermOccurences(i),t)}getBiomarkerTermOccurences(t){return this.doRequest(i=>this.api.biomarkerTermOccurences(i),t)}getScene(t){return this.doRequest(i=>this.api.scene(i),t,{},QK)}getReferenceOrganScene(t,i){return this.doRequest(r=>this.api.referenceOrganScene(r),i,{organIri:t},QK)}doRequest(t,i,r,o){const{api:s,globalConfig:a}=this,c={...wje(i),...r};return MA([a.getOption("remoteApiEndpoint"),a.getOption("hubmapToken")]).pipe(kr(1),Xi(([l,d])=>{s.configuration.basePath=l,d&&(c.token=d)}),Tr(()=>t(c)),en(l=>o?o(l):l))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(IX),rt(T_))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return oi([qa(I_)],n.prototype,"getProviderNames",null),oi([qa(I_)],n.prototype,"getDatasetTechnologyNames",null),oi([qa(I_)],n.prototype,"getOntologyTreeModel",null),oi([qa(I_)],n.prototype,"getCellTypeTreeModel",null),oi([qa(I_)],n.prototype,"getBiomarkerTreeModel",null),oi([qa(I_)],n.prototype,"getReferenceOrgans",null),oi([qa(Fp)],n.prototype,"getTissueBlockResults",null),oi([qa(Fp)],n.prototype,"getAggregateResults",null),oi([qa(Fp)],n.prototype,"getOntologyTermOccurences",null),oi([qa(Fp)],n.prototype,"getCellTypeTermOccurences",null),oi([qa(Fp)],n.prototype,"getBiomarkerTermOccurences",null),oi([qa(Fp)],n.prototype,"getScene",null),oi([qa(Fp)],n.prototype,"getReferenceOrganScene",null),n})(),Eje=(()=>{class n extends qK{constructor(t){super(),this.impl$=this.database$=t.config$.pipe(i=>i,Ri(i=>Object.keys(i).length>0),Tr(i=>function VAe(n,e){return new Xe(t=>{const i=n(),r=e(i);return(r?Eo(r):Qs).subscribe(t),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(i),r=>this.connectDatabase(r,i))),en(i=>i.database),ta(1))}connectDatabase(t,i){return Ut(function*(){return yield t.database.connect(i,!0),t})()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(T_))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})(),Aje=(()=>{class n extends Eje{createDatabase(t){return{database:new z3e(t),unsubscribe:()=>{}}}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sje=(()=>{class n extends qK{constructor(t,i){super(),this.impl$=t.config$.pipe(r=>r,en(r=>this.selectToken(r)),wh(),en(r=>i.get(r)),ta(1))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(T_),rt(ir))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})(),XL=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),KL=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),qL=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();var JL;class sl{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return sl.storage?.length??0}key(e){return sl.storage?.key(e)??null}getItem(e,t){return sl.storage?.getItem(e)??t??null}setItem(e,t){try{return sl.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){sl.storage?.removeItem(e)}clear(){sl.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||sl)};static#n=this.\u0275prov=Ct({token:sl,factory:sl.\u0275fac,providedIn:"root"})}const eq="callToActionPopupShown";let Nh=(()=>{let n=class wC{static#e=JL=this;static ctaDatePassed(t,i=Date.now){return+i()>+new Date(t)}constructor(t,i,r,o,s){this.dialog=t,this.ga=i,this.storage=r,this.infoService=o,this.http=s}ngxsOnInit(t){const{expirationDate:i,popupShown:r}=t.getState(),o=this.storage.getItem(eq,`${r}`),s=JL.ctaDatePassed(i);"true"!==o&&!s&&t.dispatch(new KL)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(en(t=>this.infoService.parseMarkdown(t)))}launchLearnMore(t){this.dialog.open(XK,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:t,videoID:"UfxMpzatowE"}})}learnMore(t){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Xi(i=>this.launchLearnMore(i)))}open(t){this.dialog.open(Mje,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(eq,"true"),t.patchState({popupShown:!0})}close(t){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(i){return new(i||wC)(rt(wv),rt(Uv),rt(sl),rt(KK),rt(Mh))};static#n=this.\u0275prov=Ct({token:wC,factory:wC.\u0275fac})};return oi([pP(XL)],n.prototype,"learnMore",null),oi([pP(KL)],n.prototype,"open",null),oi([pP(qL)],n.prototype,"close",null),n})();Nh=JL=oi([m9({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Nh);let yC=(()=>{class n{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}}return oi([qg([Nh])],n,"title",null),oi([qg([Nh])],n,"message",null),oi([qg([Nh])],n,"callToAction",null),oi([qg([Nh])],n,"imageUrl",null),oi([qg([Nh])],n,"expirationDate",null),oi([qg([Nh])],n,"popupShown",null),n})(),Mje=(()=>{class n{constructor(){this.close=()=>new qL,this.learnMore=()=>new XL}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Mt(0,"ccf-call-to-action",0),un("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),wo(1,"async"),wo(2,"async"),wo(3,"async"),wo(4,"async"),kt()),2&i&&Jt("infoTitle",ps(1,4,r.title$))("message",ps(2,6,r.message$))("callToAction",ps(3,8,r.callToAction$))("imageUrl",ps(4,10,r.imageUrl$))},dependencies:[pje,Zy],changeDetection:0})}return oi([PA(yC.title)],n.prototype,"title$",void 0),oi([PA(yC.message)],n.prototype,"message$",void 0),oi([PA(yC.callToAction)],n.prototype,"callToAction$",void 0),oi([PA(yC.imageUrl)],n.prototype,"imageUrl$",void 0),oi([OK()],n.prototype,"close",void 0),oi([OK()],n.prototype,"learnMore",void 0),n})(),Pje=(()=>{class n{constructor(t){this.source=t,this.organs=YK}getOrganInfo(t,i,r="Female"){let o=this.organs.find(a=>a.id===t);if(!o)return sn(void 0);const s=o.organ;return o.disabled&&(o=this.organs.find(a=>!a.disabled&&a.organ===s)),o?.side&&i&&o.side!==i&&(o=this.organs.find(a=>!a.disabled&&a.organ===s&&a.side===i)),sn(o)}getOrgan(t,i="Both"){return this.source.getReferenceOrgans().pipe(en(r=>r.find(o=>o.representation_of===t.id&&("Both"===i||o.sex===i))))}getOrganScene(t,i="Female"){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:i}):sn([])}getOrganStats(t,i="Female"){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:i}):sn([])}getBlocks(t,i="Female"){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:i}):sn([])}static#e=this.\u0275fac=function(i){return new(i||n)(rt(JK))};static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nje(n,e){if(1&n){const t=Ua();Mt(0,"div",6)(1,"div",7)(2,"div",8),Yn(3),kt(),Mt(4,"div",9),un("click",function(){const o=nr(t).$implicit;return ii(Mn().goToURL(o.buttonUrl))}),Yn(5),kt()()()}if(2&n){const t=e.$implicit;Ot(3),es(t.body),Ot(),Jt("gaLabel",t.buttonUrl),Ot(),ks(" ",t.buttonTitle,"")}}function Lje(n,e){if(1&n){const t=Ua();Mt(0,"div",10),un("click",function(){const o=nr(t).$implicit;return ii(Mn().goToURL(o.buttonUrl))}),Yn(1),kt()}if(2&n){const t=e.$implicit;Jt("gaLabel",t.buttonUrl),Ot(),es(t.buttonTitle)}}let Fje=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}goToURL(t){window.open(t,"_blank")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(i,r){1&i&&(Mt(0,"div",0),xn(1,Nje,6,3,"div",1),kt(),Mt(2,"div",2)(3,"div",3),Yn(4,"Human Reference Atlas (HRA) Deep Dive"),kt(),Mt(5,"div",4),xn(6,Lje,2,2,"div",5),kt()()),2&i&&(Ot(),Jt("ngForOf",r.linkCards),Ot(5),Jt("ngForOf",r.deepDives))},dependencies:[Fl,sNe,xX],styles:['.link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,Helvetica,Arial,sans-serif}'],changeDetection:0})}return n})();function Bje(n,e){if(1&n&&(Mt(0,"div",3)(1,"div",4),Yn(2),kt(),Mt(3,"div",5),Yn(4),kt()()),2&n){const t=e.$implicit;Ot(2),es(t.count),Ot(2),es(t.label)}}let jje=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(Mt(0,"div",0)(1,"div",1),Yn(2),kt(),xn(3,Bje,5,2,"div",2),kt()),2&i&&(Ot(2),ks(" ",r.statsLabel," "),Ot(),Jt("ngForOf",r.stats))},dependencies:[Fl],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0})}return n})();const Uje=["switch"];function Vje(n,e){1&n&&(Mt(0,"div",12),function em(){Un.lFrame.currentNamespace=yw}(),Mt(1,"svg",13),Vn(2,"path",14),kt(),Mt(3,"svg",15),Vn(4,"path",16),kt()())}const zje=["*"],Hje=new _t("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),Gje={provide:Ls,useExisting:Ee(()=>nq),multi:!0};class tq{constructor(e,t){this.source=e,this.checked=t}}let Wje=0,nq=(()=>{class n{_createChangeEvent(t){return new tq(this,t)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,o,s,a){this._elementRef=t,this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=s,this._onChange=c=>{},this._onTouched=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new qt,this.toggleChange=new qt,this.tabIndex=parseInt(o)||0,this.color=s.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++Wje,this.hideIcon=s.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new tq(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||n)(We(vn),We(t_),We(Br),Oc("tabindex"),We(Hje),We(ao,8))};static#t=this.\u0275cmp=_n({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Mi(Uje,5),2&i){let o;Tn(o=In())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){2&i&&(Ud("id",r.id),Ci("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),yo(r.color?"mat-"+r.color:""),Cn("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:["disabled","disabled",rr],disableRipple:["disableRipple","disableRipple",rr],color:"color",tabIndex:["tabIndex","tabIndex",t=>null==t?0:function oU(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}(t)],name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:["required","required",rr],checked:["checked","checked",rr],hideIcon:["hideIcon","hideIcon",rr]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[ri([Gje]),Ol],ngContentSelectors:zje,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(Qr(),Mt(0,"div",0)(1,"button",1,2),un("click",function(){return r._handleClick()}),Vn(3,"div",3),Mt(4,"div",4)(5,"div",5)(6,"div",6),Vn(7,"div",7),kt(),Mt(8,"div",8),Vn(9,"div",9),kt(),xn(10,Vje,5,0,"div",10),kt()()(),Mt(11,"label",11),un("click",function(s){return s.stopPropagation()}),zn(12),kt()()),2&i){const o=qs(2);Cn("mdc-form-field--align-end","before"==r.labelPosition),Ot(),Cn("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),Jt("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled),Ci("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Ot(8),Jt("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Ot(),dr(10,r.hideIcon?-1:10),Ot(),Jt("for",r.buttonId),Ci("id",r._labelId)}},dependencies:[Ah],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0})}return n})(),iq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({})}return n})(),Xje=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[iq,Ji,bp,iq,Ji]})}return n})(),Kje=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new qt}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&yo(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(i,r){if(1&i){const o=Ua();Mt(0,"span",0),un("click",function(){nr(o);const a=qs(3);return r.left||a.toggle(),ii(r.updateToggle(!0))}),Yn(1),kt(),Mt(2,"mat-slide-toggle",1,2),un("change",function(a){return r.updateToggle(!a.checked)}),kt(),Mt(4,"span",0),un("click",function(){nr(o);const a=qs(3);return r.left&&a.toggle(),ii(r.updateToggle(!1))}),Yn(5),kt()}2&i&&(Cn("disabled",r.disabled)("highlighted",r.left),Ot(),es(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Ot(),Jt("disabled",r.disabled)("checked",!r.left),Ot(2),Cn("disabled",r.disabled)("highlighted",!r.left),Ot(),es(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},dependencies:[nq],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0})}return n})();const qje=["bodyUI"],Jje=()=>["Male","Female"],Zje=()=>["Left","Right"];let Qje=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new qt,this.sideChange=new qt,this.nodeClick=new qt}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const t=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(i=>t.has(i.donor.providerName)).map(i=>i["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(i=>({...i,color:i.entityId&&this.highlightedNodeId===i["@id"]?[30,136,229,255]:this.filteredBlocks.includes(i.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:i}=this;if(i){const{x_dimension:r,y_dimension:o,z_dimension:s}=i;t.rotation=t.rotationX=0,t.bounds={x:1.25*r/1e3,y:1.25*o/1e3,z:1.25*s/1e3},t.target=[r/1e3/2,o/1e3/2,s/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"],this.nodeClick.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)(We(Uv))};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Mi(qje,7),2&i){let o;Tn(o=In())&&(r.bodyUI=o.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClick:"nodeClick"},features:[Sr],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(i,r){1&i&&(Mt(0,"ccf-body-ui",0,1),un("nodeClick",function(s){return r.nodeClicked(s)})("initialized",function(){return r.zoomToFitOrgan()}),kt(),Mt(2,"div",2)(3,"ccf-slide-toggle",3),un("valueChange",function(s){return r.updateSex(s)}),kt(),Mt(4,"ccf-slide-toggle",3),un("valueChange",function(s){return r.updateSide(s)}),kt()()),2&i&&(Jt("scene",r.scene)("interactive",!0),Ot(3),Jt("labels",T1(8,Jje))("value",r.sex)("hidden",!r.sex),Ot(),Jt("labels",T1(9,Zje))("value",r.side)("hidden",!r.side))},dependencies:[G4e,Kje],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0})}return n})();const eUe=["left"],tUe=["right"],nUe=()=>[],iUe=[{color:[0,0,0,0],opacity:.001}];let rUe=(()=>{class n{constructor(t,i,r){this.ga=i,this.configState=r,this.sexChange=new qt,this.sideChange=new qt,this.nodeClicked=new qt,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(en(o=>({tmc:o}))),this.latestConfig={},this.organInfo$=r.config$.pipe(Xi(o=>this.latestConfig=o),Tr(o=>t.getOrganInfo(o.organIri??"",o.side?.toLowerCase?.(),o.sex)),Xi(o=>this.logOrganLookup(o)),Xi(o=>this.latestOrganInfo=o),ta(1)),this.organ$=this.organInfo$.pipe(Tr(o=>o?t.getOrgan(o,o.hasSex?this.latestConfig.sex:void 0):sn(void 0)),Xi(o=>{if(o&&this.latestOrganInfo){const s=this.latestOrganInfo?.hasSex?o.sex:void 0;s!==this.latestConfig.sex&&this.updateInput("sex",s),o.side!==this.latestConfig.side&&this.updateInput("side",o.side)}}),ta(1)),this.scene$=this.organ$.pipe(Tr(o=>o&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,o.sex):sn(iUe))),this.stats$=this.organ$.pipe(Tr(o=>o&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,o.sex):sn([]))),this.statsLabel$=this.organ$.pipe(en(o=>this.makeStatsLabel(this.latestOrganInfo,o?.sex)),ed("Loading...")),this.blocks$=this.organ$.pipe(Tr(o=>o&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,o.sex):sn([])))}ngAfterViewInit(){const{left:t,right:i}=this;t.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(t,i){this.configState.patchConfig({[t]:i})}makeStatsLabel(t,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const o=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;r=[i,t.organ,o]}return r.filter(o=>!!o).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}static#e=this.\u0275fac=function(i){return new(i||n)(We(Pje),We(Uv),We(T_))};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Mi(eUe,7,vn),Mi(tUe,7,vn)),2&i){let o;Tn(o=In())&&(r.left=o.first),Tn(o=In())&&(r.right=o.first)}},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","nodeClick","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(i,r){if(1&i&&(Mt(0,"div",0)(1,"div",1,2)(3,"ccf-organ",3),un("sexChange",function(s){return r.updateInput("sex",s),r.sexChange.emit(s)})("nodeClick",function(s){return r.nodeClicked.emit(s)})("sideChange",function(s){return r.updateInput("side",s),r.sideChange.emit(s)}),wo(4,"async"),wo(5,"async"),wo(6,"async"),wo(7,"async"),wo(8,"async"),wo(9,"async"),kt()(),Mt(10,"div",4,5),Vn(12,"ccf-stats-list",6),wo(13,"async"),wo(14,"async"),Vn(15,"ccf-link-cards"),kt()()),2&i){let o;Ot(3),Jt("blocks",ps(4,8,r.blocks$))("filter",ps(5,10,r.filter$))("sex",ps(6,12,r.sex$))("side",ps(7,14,r.side$))("organ",ps(8,16,r.organ$))("scene",null!==(o=ps(9,18,r.scene$))&&void 0!==o?o:T1(24,nUe)),Ot(9),Jt("statsLabel",ps(13,20,r.statsLabel$))("stats",ps(14,22,r.stats$))}},dependencies:[Fje,jje,Qje,Zy],styles:['.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,sans-serif;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}'],changeDetection:0})}return n})();function oUe(n,e){if(1&n){const t=Ua();Mt(0,"ccf-root",1),un("sexChange",function(r){return nr(t),ii(Mn().sexChange.emit(r))})("nodeClick",function(r){return nr(t),ii(Mn().nodeClicked.emit(r))})("sideChange",function(r){return nr(t),ii(Mn().sideChange.emit(r))}),kt()}}function sUe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){const i=e2.json(n);if(t(i))return i}else if(t(n))return n;throw new Error("Invalid data sources")}function aUe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){if(!n?.startsWith("["))return[n];{const i=e2.json(n);if(t(i))return i}}else if(t(n))return n;throw new Error("Invalid data sources")}let cUe=(()=>{class n extends Mse{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...Vf_dbOptions,...globalThis.dbOptions},parse:{dataSources:sUe,highlightProviders:aUe,useRemoteApi:e2.boolean}}),this.sex="Female",this.side="Left",this.sexChange=new qt,this.sideChange=new qt,this.nodeClicked=new qt}static#e=this.\u0275fac=function(i){return new(i||n)(We(T_),We(Br))};static#t=this.\u0275cmp=_n({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},features:[Wn],decls:1,vars:1,consts:[[3,"sexChange","nodeClick","sideChange",4,"ngIf"],[3,"sexChange","nodeClick","sideChange"]],template:function(i,r){1&i&&xn(0,oUe,1,0,"ccf-root",0),2&i&&Jt("ngIf",r.initialized)},dependencies:[jf,rUe],encapsulation:2,changeDetection:0})}return n})(),lUe=(()=>{class n extends Sje{selectToken(t){return t.useRemoteApi&&t.remoteApiEndpoint?xje:Aje}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static#t=this.\u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const vC=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class hUe{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=dp(this.action),i=function uUe(n){return vC(n.getHours(),2)+":"+vC(n.getMinutes(),2)+":"+vC(n.getSeconds(),2)+"."+vC(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class fUe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const rq=new _t("NGXS_LOGGER_PLUGIN_OPTIONS");let pUe=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new fUe(this._options),this._store=this._store||this._injector.get(td);const o=new hUe(i,this._store,this._logWriter);return o.dispatched(t),r(t,i).pipe(Xi(s=>{o.completed(s)}),Qc(s=>{throw o.errored(s),s}))}}return n.\u0275fac=function(t){return new(t||n)(rt(rq),rt(ir))},n.\u0275prov=Ct({token:n,factory:n.\u0275fac}),n})();const oq=new _t("LOGGER_USER_OPTIONS");function mUe(n){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),n)}let gUe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:qG,useClass:pUe,multi:!0},{provide:oq,useValue:t},{provide:rq,useFactory:mUe,deps:[oq]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rn({type:n}),n.\u0275inj=tn({}),n})();const _Ue=[T_];let bUe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[RRe.forRoot(),p9.forRoot(_Ue,{developmentMode:!1}),gUe.forRoot({disabled:true})]})}return n})(),yUe=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}static#e=this.\u0275fac=function(i){return new(i||n)(rt(n,12))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({providers:[{provide:JK,useExisting:lUe}],imports:[i$,FNe.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),qNe.forRoot(()=>new qS({basePath:Vf_dbOptions.remoteApiEndpoint})),bUe]})}return n})(),vUe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[xr,Xje]})}return n})(),wUe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[xr,W4e,vUe]})}return n})(),xUe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[xr,cL]})}return n})(),EUe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[xr]})}return n})(),AUe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function Ase(n,e){const t=function _se(n,e){return e.get(kl).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new wse(n,e.injector),r=function gse(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function use(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class o extends Ese{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const d=this[c];delete this[c],a.setInputValue(c,d,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,d){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(c){this.ngElementStrategy.setInputValue(s,c,a)},configurable:!0,enumerable:!0})}),o}(cUe,{injector:this.injector});customElements.define("ccf-organ-info",t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ir))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=tn({imports:[Eoe,yUe,xUe,EUe,wUe]})}return n})();woe().bootstrapModule(AUe).catch(n=>console.error(n))},2323:ee=>{ee.exports=function(g,M){var y=M.length;if(0!==y){var D=g.length;g.length+=y;for(var C=0;C<y;C++)g[D+C]=M[C]}}},3982:ee=>{"use strict";const{AbortController:q,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;ee.exports=q,ee.exports.AbortSignal=g,ee.exports.default=q},9919:(ee,q)=>{"use strict";q.byteLength=function v(A){var F=_(A),K=F[1];return 3*(F[0]+K)/4-K},q.toByteArray=function j(A){var F,w,ce=_(A),K=ce[0],J=ce[1],Z=new y(function T(A,F,ce){return 3*(F+ce)/4-ce}(0,K,J)),$=0,H=J>0?K-4:K;for(w=0;w<H;w+=4)F=M[A.charCodeAt(w)]<<18|M[A.charCodeAt(w+1)]<<12|M[A.charCodeAt(w+2)]<<6|M[A.charCodeAt(w+3)],Z[$++]=F>>16&255,Z[$++]=F>>8&255,Z[$++]=255&F;return 2===J&&(F=M[A.charCodeAt(w)]<<2|M[A.charCodeAt(w+1)]>>4,Z[$++]=255&F),1===J&&(F=M[A.charCodeAt(w)]<<10|M[A.charCodeAt(w+1)]<<4|M[A.charCodeAt(w+2)]>>2,Z[$++]=F>>8&255,Z[$++]=255&F),Z},q.fromByteArray=function Q(A){for(var F,ce=A.length,K=ce%3,J=[],Z=16383,$=0,H=ce-K;$<H;$+=Z)J.push(B(A,$,$+Z>H?H:$+Z));return 1===K?J.push(g[(F=A[ce-1])>>2]+g[F<<4&63]+"=="):2===K&&J.push(g[(F=(A[ce-2]<<8)+A[ce-1])>>10]+g[F>>4&63]+g[F<<2&63]+"="),J.join("")};for(var g=[],M=[],y=typeof Uint8Array<"u"?Uint8Array:Array,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0;C<64;++C)g[C]=D[C],M[D.charCodeAt(C)]=C;function _(A){var F=A.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ce=A.indexOf("=");return-1===ce&&(ce=F),[ce,ce===F?0:4-ce%4]}function O(A){return g[A>>18&63]+g[A>>12&63]+g[A>>6&63]+g[63&A]}function B(A,F,ce){for(var J=[],Z=F;Z<ce;Z+=3)J.push(O((A[Z]<<16&16711680)+(A[Z+1]<<8&65280)+(255&A[Z+2])));return J.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},1979:(ee,q)=>{"use strict";var M=function(D){return D.typeOfFunction="function",D.boolTrue=!0,D}(M||{});q.ak=function y(D,C,R){if(!R||typeof R.value!==M.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+C+"> is not a method!");return{configurable:M.boolTrue,get:function(){var _=R.value.bind(this);return Object.defineProperty(this,C,{value:_,configurable:M.boolTrue,writable:M.boolTrue}),_}}}},9007:(ee,q,g)=>{"use strict";var M=g(9919),y=g(2601);q.Buffer=_,q.SlowBuffer=function K(Y){return+Y!=Y&&(Y=0),_.alloc(+Y)},q.INSPECT_MAX_BYTES=50;var D=2147483647;function R(Y){if(Y>D)throw new RangeError('The value "'+Y+'" is invalid for option "size"');var N=new Uint8Array(Y);return N.__proto__=_.prototype,N}function _(Y,N,U){if("number"==typeof Y){if("string"==typeof N)throw new TypeError('The "string" argument must be of type string. Received type number');return O(Y)}return v(Y,N,U)}function v(Y,N,U){if("string"==typeof Y)return function B(Y,N){if(("string"!=typeof N||""===N)&&(N="utf8"),!_.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var U=0|J(Y,N),me=R(U),Ye=me.write(Y,N);return Ye!==U&&(me=me.slice(0,Ye)),me}(Y,N);if(ArrayBuffer.isView(Y))return Q(Y);if(null==Y)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(pe(Y,ArrayBuffer)||Y&&pe(Y.buffer,ArrayBuffer))return function A(Y,N,U){if(N<0||Y.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<N+(U||0))throw new RangeError('"length" is outside of buffer bounds');var me;return(me=void 0===N&&void 0===U?new Uint8Array(Y):void 0===U?new Uint8Array(Y,N):new Uint8Array(Y,N,U)).__proto__=_.prototype,me}(Y,N,U);if("number"==typeof Y)throw new TypeError('The "value" argument must not be of type number. Received type number');var me=Y.valueOf&&Y.valueOf();if(null!=me&&me!==Y)return _.from(me,N,U);var Ye=function F(Y){if(_.isBuffer(Y)){var N=0|ce(Y.length),U=R(N);return 0===U.length||Y.copy(U,0,0,N),U}return void 0!==Y.length?"number"!=typeof Y.length||re(Y.length)?R(0):Q(Y):"Buffer"===Y.type&&Array.isArray(Y.data)?Q(Y.data):void 0}(Y);if(Ye)return Ye;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Y[Symbol.toPrimitive])return _.from(Y[Symbol.toPrimitive]("string"),N,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}function T(Y){if("number"!=typeof Y)throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function O(Y){return T(Y),R(Y<0?0:0|ce(Y))}function Q(Y){for(var N=Y.length<0?0:0|ce(Y.length),U=R(N),me=0;me<N;me+=1)U[me]=255&Y[me];return U}function ce(Y){if(Y>=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");return 0|Y}function J(Y,N){if(_.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||pe(Y,ArrayBuffer))return Y.byteLength;if("string"!=typeof Y)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);var U=Y.length,me=arguments.length>2&&!0===arguments[2];if(!me&&0===U)return 0;for(var Ye=!1;;)switch(N){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return I(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return Ge(Y).length;default:if(Ye)return me?-1:I(Y).length;N=(""+N).toLowerCase(),Ye=!0}}function Z(Y,N,U){var me=!1;if((void 0===N||N<0)&&(N=0),N>this.length||((void 0===U||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(N>>>=0))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return He(this,N,U);case"utf8":case"utf-8":return Oe(this,N,U);case"ascii":return qe(this,N,U);case"latin1":case"binary":return Te(this,N,U);case"base64":return ve(this,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,N,U);default:if(me)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),me=!0}}function $(Y,N,U){var me=Y[N];Y[N]=Y[U],Y[U]=me}function H(Y,N,U,me,Ye){if(0===Y.length)return-1;if("string"==typeof U?(me=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),re(U=+U)&&(U=Ye?0:Y.length-1),U<0&&(U=Y.length+U),U>=Y.length){if(Ye)return-1;U=Y.length-1}else if(U<0){if(!Ye)return-1;U=0}if("string"==typeof N&&(N=_.from(N,me)),_.isBuffer(N))return 0===N.length?-1:w(Y,N,U,me,Ye);if("number"==typeof N)return N&=255,"function"==typeof Uint8Array.prototype.indexOf?Ye?Uint8Array.prototype.indexOf.call(Y,N,U):Uint8Array.prototype.lastIndexOf.call(Y,N,U):w(Y,[N],U,me,Ye);throw new TypeError("val must be string, number or Buffer")}function w(Y,N,U,me,Ye){var At,ye=1,ze=Y.length,st=N.length;if(void 0!==me&&("ucs2"===(me=String(me).toLowerCase())||"ucs-2"===me||"utf16le"===me||"utf-16le"===me)){if(Y.length<2||N.length<2)return-1;ye=2,ze/=2,st/=2,U/=2}function bt(X,oe){return 1===ye?X[oe]:X.readUInt16BE(oe*ye)}if(Ye){var xt=-1;for(At=U;At<ze;At++)if(bt(Y,At)===bt(N,-1===xt?0:At-xt)){if(-1===xt&&(xt=At),At-xt+1===st)return xt*ye}else-1!==xt&&(At-=At-xt),xt=-1}else for(U+st>ze&&(U=ze-st),At=U;At>=0;At--){for(var Xt=!0,_e=0;_e<st;_e++)if(bt(Y,At+_e)!==bt(N,_e)){Xt=!1;break}if(Xt)return At}return-1}function P(Y,N,U,me){U=Number(U)||0;var Ye=Y.length-U;me?(me=Number(me))>Ye&&(me=Ye):me=Ye;var ye=N.length;me>ye/2&&(me=ye/2);for(var ze=0;ze<me;++ze){var st=parseInt(N.substr(2*ze,2),16);if(re(st))return ze;Y[U+ze]=st}return ze}function k(Y,N,U,me){return Ze(I(N,Y.length-U),Y,U,me)}function de(Y,N,U,me){return Ze(function ae(Y){for(var N=[],U=0;U<Y.length;++U)N.push(255&Y.charCodeAt(U));return N}(N),Y,U,me)}function G(Y,N,U,me){return de(Y,N,U,me)}function Ie(Y,N,U,me){return Ze(Ge(N),Y,U,me)}function le(Y,N,U,me){return Ze(function ie(Y,N){for(var U,me,ye=[],ze=0;ze<Y.length&&!((N-=2)<0);++ze)me=(U=Y.charCodeAt(ze))>>8,ye.push(U%256),ye.push(me);return ye}(N,Y.length-U),Y,U,me)}function ve(Y,N,U){return M.fromByteArray(0===N&&U===Y.length?Y:Y.slice(N,U))}function Oe(Y,N,U){U=Math.min(Y.length,U);for(var me=[],Ye=N;Ye<U;){var bt,At,xt,Xt,ye=Y[Ye],ze=null,st=ye>239?4:ye>223?3:ye>191?2:1;if(Ye+st<=U)switch(st){case 1:ye<128&&(ze=ye);break;case 2:128==(192&(bt=Y[Ye+1]))&&(Xt=(31&ye)<<6|63&bt)>127&&(ze=Xt);break;case 3:At=Y[Ye+2],128==(192&(bt=Y[Ye+1]))&&128==(192&At)&&(Xt=(15&ye)<<12|(63&bt)<<6|63&At)>2047&&(Xt<55296||Xt>57343)&&(ze=Xt);break;case 4:At=Y[Ye+2],xt=Y[Ye+3],128==(192&(bt=Y[Ye+1]))&&128==(192&At)&&128==(192&xt)&&(Xt=(15&ye)<<18|(63&bt)<<12|(63&At)<<6|63&xt)>65535&&Xt<1114112&&(ze=Xt)}null===ze?(ze=65533,st=1):ze>65535&&(me.push((ze-=65536)>>>10&1023|55296),ze=56320|1023&ze),me.push(ze),Ye+=st}return function Qe(Y){var N=Y.length;if(N<=Le)return String.fromCharCode.apply(String,Y);for(var U="",me=0;me<N;)U+=String.fromCharCode.apply(String,Y.slice(me,me+=Le));return U}(me)}q.kMaxLength=D,!(_.TYPED_ARRAY_SUPPORT=function C(){try{var Y=new Uint8Array(1);return Y.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Y.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(Y,N,U){return v(Y,N,U)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(Y,N,U){return function j(Y,N,U){return T(Y),Y<=0?R(Y):void 0!==N?"string"==typeof U?R(Y).fill(N,U):R(Y).fill(N):R(Y)}(Y,N,U)},_.allocUnsafe=function(Y){return O(Y)},_.allocUnsafeSlow=function(Y){return O(Y)},_.isBuffer=function(N){return null!=N&&!0===N._isBuffer&&N!==_.prototype},_.compare=function(N,U){if(pe(N,Uint8Array)&&(N=_.from(N,N.offset,N.byteLength)),pe(U,Uint8Array)&&(U=_.from(U,U.offset,U.byteLength)),!_.isBuffer(N)||!_.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===U)return 0;for(var me=N.length,Ye=U.length,ye=0,ze=Math.min(me,Ye);ye<ze;++ye)if(N[ye]!==U[ye]){me=N[ye],Ye=U[ye];break}return me<Ye?-1:Ye<me?1:0},_.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(N,U){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(0===N.length)return _.alloc(0);var me;if(void 0===U)for(U=0,me=0;me<N.length;++me)U+=N[me].length;var Ye=_.allocUnsafe(U),ye=0;for(me=0;me<N.length;++me){var ze=N[me];if(pe(ze,Uint8Array)&&(ze=_.from(ze)),!_.isBuffer(ze))throw new TypeError('"list" argument must be an Array of Buffers');ze.copy(Ye,ye),ye+=ze.length}return Ye},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<N;U+=2)$(this,U,U+1);return this},_.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<N;U+=4)$(this,U,U+3),$(this,U+1,U+2);return this},_.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<N;U+=8)$(this,U,U+7),$(this,U+1,U+6),$(this,U+2,U+5),$(this,U+3,U+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var N=this.length;return 0===N?"":0===arguments.length?Oe(this,0,N):Z.apply(this,arguments)},_.prototype.equals=function(N){if(!_.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||0===_.compare(this,N)},_.prototype.inspect=function(){var N="",U=q.INSPECT_MAX_BYTES;return N=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(N+=" ... "),"<Buffer "+N+">"},_.prototype.compare=function(N,U,me,Ye,ye){if(pe(N,Uint8Array)&&(N=_.from(N,N.offset,N.byteLength)),!_.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(void 0===U&&(U=0),void 0===me&&(me=N?N.length:0),void 0===Ye&&(Ye=0),void 0===ye&&(ye=this.length),U<0||me>N.length||Ye<0||ye>this.length)throw new RangeError("out of range index");if(Ye>=ye&&U>=me)return 0;if(Ye>=ye)return-1;if(U>=me)return 1;if(this===N)return 0;for(var ze=(ye>>>=0)-(Ye>>>=0),st=(me>>>=0)-(U>>>=0),bt=Math.min(ze,st),At=this.slice(Ye,ye),xt=N.slice(U,me),Xt=0;Xt<bt;++Xt)if(At[Xt]!==xt[Xt]){ze=At[Xt],st=xt[Xt];break}return ze<st?-1:st<ze?1:0},_.prototype.includes=function(N,U,me){return-1!==this.indexOf(N,U,me)},_.prototype.indexOf=function(N,U,me){return H(this,N,U,me,!0)},_.prototype.lastIndexOf=function(N,U,me){return H(this,N,U,me,!1)},_.prototype.write=function(N,U,me,Ye){if(void 0===U)Ye="utf8",me=this.length,U=0;else if(void 0===me&&"string"==typeof U)Ye=U,me=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(me)?(me>>>=0,void 0===Ye&&(Ye="utf8")):(Ye=me,me=void 0)}var ye=this.length-U;if((void 0===me||me>ye)&&(me=ye),N.length>0&&(me<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ye||(Ye="utf8");for(var ze=!1;;)switch(Ye){case"hex":return P(this,N,U,me);case"utf8":case"utf-8":return k(this,N,U,me);case"ascii":return de(this,N,U,me);case"latin1":case"binary":return G(this,N,U,me);case"base64":return Ie(this,N,U,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,N,U,me);default:if(ze)throw new TypeError("Unknown encoding: "+Ye);Ye=(""+Ye).toLowerCase(),ze=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Le=4096;function qe(Y,N,U){var me="";U=Math.min(Y.length,U);for(var Ye=N;Ye<U;++Ye)me+=String.fromCharCode(127&Y[Ye]);return me}function Te(Y,N,U){var me="";U=Math.min(Y.length,U);for(var Ye=N;Ye<U;++Ye)me+=String.fromCharCode(Y[Ye]);return me}function He(Y,N,U){var me=Y.length;(!N||N<0)&&(N=0),(!U||U<0||U>me)&&(U=me);for(var Ye="",ye=N;ye<U;++ye)Ye+=L(Y[ye]);return Ye}function Me(Y,N,U){for(var me=Y.slice(N,U),Ye="",ye=0;ye<me.length;ye+=2)Ye+=String.fromCharCode(me[ye]+256*me[ye+1]);return Ye}function Ue(Y,N,U){if(Y%1!=0||Y<0)throw new RangeError("offset is not uint");if(Y+N>U)throw new RangeError("Trying to access beyond buffer length")}function fe(Y,N,U,me,Ye,ye){if(!_.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Ye||N<ye)throw new RangeError('"value" argument is out of bounds');if(U+me>Y.length)throw new RangeError("Index out of range")}function Ce(Y,N,U,me,Ye,ye){if(U+me>Y.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function nt(Y,N,U,me,Ye){return N=+N,U>>>=0,Ye||Ce(Y,0,U,4),y.write(Y,N,U,me,23,4),U+4}function gt(Y,N,U,me,Ye){return N=+N,U>>>=0,Ye||Ce(Y,0,U,8),y.write(Y,N,U,me,52,8),U+8}_.prototype.slice=function(N,U){var me=this.length;(N=~~N)<0?(N+=me)<0&&(N=0):N>me&&(N=me),(U=void 0===U?me:~~U)<0?(U+=me)<0&&(U=0):U>me&&(U=me),U<N&&(U=N);var Ye=this.subarray(N,U);return Ye.__proto__=_.prototype,Ye},_.prototype.readUIntLE=function(N,U,me){N>>>=0,U>>>=0,me||Ue(N,U,this.length);for(var Ye=this[N],ye=1,ze=0;++ze<U&&(ye*=256);)Ye+=this[N+ze]*ye;return Ye},_.prototype.readUIntBE=function(N,U,me){N>>>=0,U>>>=0,me||Ue(N,U,this.length);for(var Ye=this[N+--U],ye=1;U>0&&(ye*=256);)Ye+=this[N+--U]*ye;return Ye},_.prototype.readUInt8=function(N,U){return N>>>=0,U||Ue(N,1,this.length),this[N]},_.prototype.readUInt16LE=function(N,U){return N>>>=0,U||Ue(N,2,this.length),this[N]|this[N+1]<<8},_.prototype.readUInt16BE=function(N,U){return N>>>=0,U||Ue(N,2,this.length),this[N]<<8|this[N+1]},_.prototype.readUInt32LE=function(N,U){return N>>>=0,U||Ue(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},_.prototype.readUInt32BE=function(N,U){return N>>>=0,U||Ue(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},_.prototype.readIntLE=function(N,U,me){N>>>=0,U>>>=0,me||Ue(N,U,this.length);for(var Ye=this[N],ye=1,ze=0;++ze<U&&(ye*=256);)Ye+=this[N+ze]*ye;return Ye>=(ye*=128)&&(Ye-=Math.pow(2,8*U)),Ye},_.prototype.readIntBE=function(N,U,me){N>>>=0,U>>>=0,me||Ue(N,U,this.length);for(var Ye=U,ye=1,ze=this[N+--Ye];Ye>0&&(ye*=256);)ze+=this[N+--Ye]*ye;return ze>=(ye*=128)&&(ze-=Math.pow(2,8*U)),ze},_.prototype.readInt8=function(N,U){return N>>>=0,U||Ue(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},_.prototype.readInt16LE=function(N,U){N>>>=0,U||Ue(N,2,this.length);var me=this[N]|this[N+1]<<8;return 32768&me?4294901760|me:me},_.prototype.readInt16BE=function(N,U){N>>>=0,U||Ue(N,2,this.length);var me=this[N+1]|this[N]<<8;return 32768&me?4294901760|me:me},_.prototype.readInt32LE=function(N,U){return N>>>=0,U||Ue(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},_.prototype.readInt32BE=function(N,U){return N>>>=0,U||Ue(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},_.prototype.readFloatLE=function(N,U){return N>>>=0,U||Ue(N,4,this.length),y.read(this,N,!0,23,4)},_.prototype.readFloatBE=function(N,U){return N>>>=0,U||Ue(N,4,this.length),y.read(this,N,!1,23,4)},_.prototype.readDoubleLE=function(N,U){return N>>>=0,U||Ue(N,8,this.length),y.read(this,N,!0,52,8)},_.prototype.readDoubleBE=function(N,U){return N>>>=0,U||Ue(N,8,this.length),y.read(this,N,!1,52,8)},_.prototype.writeUIntLE=function(N,U,me,Ye){N=+N,U>>>=0,me>>>=0,Ye||fe(this,N,U,me,Math.pow(2,8*me)-1,0);var ze=1,st=0;for(this[U]=255&N;++st<me&&(ze*=256);)this[U+st]=N/ze&255;return U+me},_.prototype.writeUIntBE=function(N,U,me,Ye){N=+N,U>>>=0,me>>>=0,Ye||fe(this,N,U,me,Math.pow(2,8*me)-1,0);var ze=me-1,st=1;for(this[U+ze]=255&N;--ze>=0&&(st*=256);)this[U+ze]=N/st&255;return U+me},_.prototype.writeUInt8=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,1,255,0),this[U]=255&N,U+1},_.prototype.writeUInt16LE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,2,65535,0),this[U]=255&N,this[U+1]=N>>>8,U+2},_.prototype.writeUInt16BE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,2,65535,0),this[U]=N>>>8,this[U+1]=255&N,U+2},_.prototype.writeUInt32LE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,4,4294967295,0),this[U+3]=N>>>24,this[U+2]=N>>>16,this[U+1]=N>>>8,this[U]=255&N,U+4},_.prototype.writeUInt32BE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,4,4294967295,0),this[U]=N>>>24,this[U+1]=N>>>16,this[U+2]=N>>>8,this[U+3]=255&N,U+4},_.prototype.writeIntLE=function(N,U,me,Ye){if(N=+N,U>>>=0,!Ye){var ye=Math.pow(2,8*me-1);fe(this,N,U,me,ye-1,-ye)}var ze=0,st=1,bt=0;for(this[U]=255&N;++ze<me&&(st*=256);)N<0&&0===bt&&0!==this[U+ze-1]&&(bt=1),this[U+ze]=(N/st>>0)-bt&255;return U+me},_.prototype.writeIntBE=function(N,U,me,Ye){if(N=+N,U>>>=0,!Ye){var ye=Math.pow(2,8*me-1);fe(this,N,U,me,ye-1,-ye)}var ze=me-1,st=1,bt=0;for(this[U+ze]=255&N;--ze>=0&&(st*=256);)N<0&&0===bt&&0!==this[U+ze+1]&&(bt=1),this[U+ze]=(N/st>>0)-bt&255;return U+me},_.prototype.writeInt8=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,1,127,-128),N<0&&(N=255+N+1),this[U]=255&N,U+1},_.prototype.writeInt16LE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,2,32767,-32768),this[U]=255&N,this[U+1]=N>>>8,U+2},_.prototype.writeInt16BE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,2,32767,-32768),this[U]=N>>>8,this[U+1]=255&N,U+2},_.prototype.writeInt32LE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,4,2147483647,-2147483648),this[U]=255&N,this[U+1]=N>>>8,this[U+2]=N>>>16,this[U+3]=N>>>24,U+4},_.prototype.writeInt32BE=function(N,U,me){return N=+N,U>>>=0,me||fe(this,N,U,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[U]=N>>>24,this[U+1]=N>>>16,this[U+2]=N>>>8,this[U+3]=255&N,U+4},_.prototype.writeFloatLE=function(N,U,me){return nt(this,N,U,!0,me)},_.prototype.writeFloatBE=function(N,U,me){return nt(this,N,U,!1,me)},_.prototype.writeDoubleLE=function(N,U,me){return gt(this,N,U,!0,me)},_.prototype.writeDoubleBE=function(N,U,me){return gt(this,N,U,!1,me)},_.prototype.copy=function(N,U,me,Ye){if(!_.isBuffer(N))throw new TypeError("argument should be a Buffer");if(me||(me=0),!Ye&&0!==Ye&&(Ye=this.length),U>=N.length&&(U=N.length),U||(U=0),Ye>0&&Ye<me&&(Ye=me),Ye===me||0===N.length||0===this.length)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Ye<0)throw new RangeError("sourceEnd out of bounds");Ye>this.length&&(Ye=this.length),N.length-U<Ye-me&&(Ye=N.length-U+me);var ye=Ye-me;if(this===N&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(U,me,Ye);else if(this===N&&me<U&&U<Ye)for(var ze=ye-1;ze>=0;--ze)N[ze+U]=this[ze+me];else Uint8Array.prototype.set.call(N,this.subarray(me,Ye),U);return ye},_.prototype.fill=function(N,U,me,Ye){if("string"==typeof N){if("string"==typeof U?(Ye=U,U=0,me=this.length):"string"==typeof me&&(Ye=me,me=this.length),void 0!==Ye&&"string"!=typeof Ye)throw new TypeError("encoding must be a string");if("string"==typeof Ye&&!_.isEncoding(Ye))throw new TypeError("Unknown encoding: "+Ye);if(1===N.length){var ye=N.charCodeAt(0);("utf8"===Ye&&ye<128||"latin1"===Ye)&&(N=ye)}}else"number"==typeof N&&(N&=255);if(U<0||this.length<U||this.length<me)throw new RangeError("Out of range index");if(me<=U)return this;var ze;if(U>>>=0,me=void 0===me?this.length:me>>>0,N||(N=0),"number"==typeof N)for(ze=U;ze<me;++ze)this[ze]=N;else{var st=_.isBuffer(N)?N:_.from(N,Ye),bt=st.length;if(0===bt)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ze=0;ze<me-U;++ze)this[ze+U]=st[ze%bt]}return this};var Je=/[^+/0-9A-Za-z-_]/g;function L(Y){return Y<16?"0"+Y.toString(16):Y.toString(16)}function I(Y,N){N=N||1/0;for(var U,me=Y.length,Ye=null,ye=[],ze=0;ze<me;++ze){if((U=Y.charCodeAt(ze))>55295&&U<57344){if(!Ye){if(U>56319){(N-=3)>-1&&ye.push(239,191,189);continue}if(ze+1===me){(N-=3)>-1&&ye.push(239,191,189);continue}Ye=U;continue}if(U<56320){(N-=3)>-1&&ye.push(239,191,189),Ye=U;continue}U=65536+(Ye-55296<<10|U-56320)}else Ye&&(N-=3)>-1&&ye.push(239,191,189);if(Ye=null,U<128){if((N-=1)<0)break;ye.push(U)}else if(U<2048){if((N-=2)<0)break;ye.push(U>>6|192,63&U|128)}else if(U<65536){if((N-=3)<0)break;ye.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;ye.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return ye}function Ge(Y){return M.toByteArray(function ge(Y){if((Y=(Y=Y.split("=")[0]).trim().replace(Je,"")).length<2)return"";for(;Y.length%4!=0;)Y+="=";return Y}(Y))}function Ze(Y,N,U,me){for(var Ye=0;Ye<me&&!(Ye+U>=N.length||Ye>=Y.length);++Ye)N[Ye+U]=Y[Ye];return Ye}function pe(Y,N){return Y instanceof N||null!=Y&&null!=Y.constructor&&null!=Y.constructor.name&&Y.constructor.name===N.name}function re(Y){return Y!=Y}},1563:(ee,q,g)=>{ee.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(ee,q,g){"use strict";var M,y,D;typeof window<"u"&&window,y=[g(884)],void 0!==(D="function"==typeof(M=function(C){var R=function(){var v,T={},j=[];function O(G){G||(G=document.documentElement);var Ie=window.getComputedStyle(G,null).fontSize;return parseFloat(Ie)||16}function Q(G,Ie){var le=Ie.split(/\d/),ve=le[le.length-1];switch(Ie=parseFloat(Ie),ve){case"px":default:return Ie;case"em":return Ie*O(G);case"rem":return Ie*O();case"vw":return Ie*document.documentElement.clientWidth/100;case"vh":return Ie*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Oe=document.documentElement.clientWidth/100,Le=document.documentElement.clientHeight/100;return Ie*(0,Math["vmin"===ve?"min":"max"])(Oe,Le)}}function A(G,Ie){this.element=G;var le,ve,Oe,Le,Qe,qe,Te,He,Me=["min-width","min-height","max-width","max-height"];this.call=function(){for(le in Oe=function B(G){if(!G.getBoundingClientRect)return{width:G.offsetWidth,height:G.offsetHeight};var Ie=G.getBoundingClientRect();return{width:Math.round(Ie.width),height:Math.round(Ie.height)}}(this.element),qe={},T[Ie])T[Ie].hasOwnProperty(le)&&(Le=Q(this.element,(ve=T[Ie][le]).value),Qe="width"===ve.property?Oe.width:Oe.height,Te="","min"===ve.mode&&Qe>=Le&&(Te+=ve.value),"max"===ve.mode&&Qe<=Le&&(Te+=ve.value),qe[He=ve.mode+"-"+ve.property]||(qe[He]=""),Te&&-1===(" "+qe[He]+" ").indexOf(" "+Te+" ")&&(qe[He]+=" "+Te));for(var Ue in Me)Me.hasOwnProperty(Ue)&&(qe[Me[Ue]]?this.element.setAttribute(Me[Ue],qe[Me[Ue]].substr(1)):this.element.removeAttribute(Me[Ue]))}}function F(G,Ie){G.elementQueriesSetupInformation||(G.elementQueriesSetupInformation=new A(G,Ie)),G.elementQueriesSensor||(G.elementQueriesSensor=new C(G,function(){G.elementQueriesSetupInformation.call()}))}function ce(G,Ie,le,ve){if(typeof T[G]>"u"){T[G]=[];var Oe=j.length;v.innerHTML+="\n"+G+" {animation: 0.1s element-queries;}",v.innerHTML+="\n"+G+" > .resize-sensor {min-width: "+Oe+"px;}",j.push(G)}T[G].push({mode:Ie,property:le,value:ve})}function K(G){var Ie;if(document.querySelectorAll&&(Ie=G?G.querySelectorAll.bind(G):document.querySelectorAll.bind(document)),!Ie&&typeof $$<"u"&&(Ie=$$),!Ie&&typeof jQuery<"u"&&(Ie=jQuery),!Ie)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Ie}function Z(G){var Ie=[],le=[],ve=[],Oe=0,Le=-1,Qe=[];for(var qe in G.children)if(G.children.hasOwnProperty(qe)&&G.children[qe].tagName&&"img"===G.children[qe].tagName.toLowerCase()){Ie.push(G.children[qe]);var Te=G.children[qe].getAttribute("min-width")||G.children[qe].getAttribute("data-min-width"),He=G.children[qe].getAttribute("data-src")||G.children[qe].getAttribute("url");ve.push(He),le.push({minWidth:Te}),Te?G.children[qe].style.display="none":(Oe=Ie.length-1,G.children[qe].style.display="block")}function Ue(){var Ce,fe=!1;for(Ce in Ie)Ie.hasOwnProperty(Ce)&&le[Ce].minWidth&&G.offsetWidth>le[Ce].minWidth&&(fe=Ce);if(fe||(fe=Oe),Le!==fe)if(Qe[fe])Ie[Le].style.display="none",Ie[fe].style.display="block",Le=fe;else{var nt=new Image;nt.onload=function(){Ie[fe].src=ve[fe],Ie[Le].style.display="none",Ie[fe].style.display="block",Qe[fe]=!0,Le=fe},nt.src=ve[fe]}else Ie[fe].src=ve[fe]}Le=Oe,G.resizeSensorInstance=new C(G,Ue),Ue()}var H=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,w=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function P(G){var Ie,le,ve,Oe;for(G=G.replace(/'/g,'"');null!==(Ie=H.exec(G));)for(le=Ie[1]+Ie[3],ve=Ie[2];null!==(Oe=w.exec(ve));)ce(le,Oe[1],Oe[2],Oe[3])}function k(G){var Ie="";if(G)if("string"==typeof G)(-1!==(G=G.toLowerCase()).indexOf("min-width")||-1!==G.indexOf("max-width"))&&P(G);else for(var le=0,ve=G.length;le<ve;le++)1===G[le].type?(-1!==(Ie=G[le].selectorText||G[le].cssText).indexOf("min-height")||-1!==Ie.indexOf("max-height")||-1!==Ie.indexOf("min-width")||-1!==Ie.indexOf("max-width"))&&P(Ie):4===G[le].type?k(G[le].cssRules||G[le].rules):3===G[le].type&&G[le].styleSheet.hasOwnProperty("cssRules")&&k(G[le].styleSheet.cssRules)}var de=!1;this.init=function(){var G="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?G="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?G="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(G="oanimationstart"),document.body.addEventListener(G,function(ve){var Oe=ve.target,Le=Oe&&window.getComputedStyle(Oe,null),Qe=Le&&Le.getPropertyValue("animation-name");if(Qe&&-1!==Qe.indexOf("element-queries")){Oe.elementQueriesSensor=new C(Oe,function(){Oe.elementQueriesSetupInformation&&Oe.elementQueriesSetupInformation.call()});var He=window.getComputedStyle(Oe.resizeSensor,null).getPropertyValue("min-width");He=parseInt(He.replace("px","")),F(ve.target,j[He])}}),de||((v=document.createElement("style")).type="text/css",v.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",v.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(v),de=!0);for(var Ie=0,le=document.styleSheets.length;Ie<le;Ie++)try{document.styleSheets[Ie].href&&0===document.styleSheets[Ie].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Ie].href),k(document.styleSheets[Ie].cssRules||document.styleSheets[Ie].rules||document.styleSheets[Ie].cssText)}catch{}!function $(){for(var Ie=K()("[data-responsive-image],[responsive-image]"),le=0,ve=Ie.length;le<ve;le++)Z(Ie[le])}()},this.findElementQueriesElements=function(G){!function J(G){var Ie=K(G);for(var le in T)if(T.hasOwnProperty(le))for(var ve=Ie(le,G),Oe=0,Le=ve.length;Oe<Le;Oe++)F(ve[Oe],le)}(G)},this.update=function(){this.init()}};R.update=function(){R.instance.update()},R.detach=function(v){v.elementQueriesSetupInformation?(v.elementQueriesSensor.detach(),delete v.elementQueriesSetupInformation,delete v.elementQueriesSensor):v.resizeSensorInstance&&(v.resizeSensorInstance.detach(),delete v.resizeSensorInstance)},R.init=function(){R.instance||(R.instance=new R),R.instance.init()};return R.findElementQueriesElements=function(v){R.instance.findElementQueriesElements(v)},R.listen=function(){!function(v){if(document.addEventListener)document.addEventListener("DOMContentLoaded",v,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var T=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(v(),clearInterval(T))},10);else window.onload=v}(R.init)},R})?M.apply(q,y):M)&&(ee.exports=D)},884:function(ee,q,g){"use strict";var M,y;typeof window<"u"&&window,void 0!==(y="function"==typeof(M=function(){if(typeof window>"u")return null;var D=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),C=D.requestAnimationFrame||D.mozRequestAnimationFrame||D.webkitRequestAnimationFrame||function(B){return D.setTimeout(B,20)},R=D.cancelAnimationFrame||D.mozCancelAnimationFrame||D.webkitCancelAnimationFrame||function(B){D.clearTimeout(B)};function _(B,Q){var A=Object.prototype.toString.call(B),F="[object Array]"===A||"[object NodeList]"===A||"[object HTMLCollection]"===A||"[object Object]"===A||typeof jQuery<"u"&&B instanceof jQuery||typeof Elements<"u"&&B instanceof Elements,ce=0,K=B.length;if(F)for(;ce<K;ce++)Q(B[ce]);else Q(B)}function v(B){if(!B.getBoundingClientRect)return{width:B.offsetWidth,height:B.offsetHeight};var Q=B.getBoundingClientRect();return{width:Math.round(Q.width),height:Math.round(Q.height)}}function T(B,Q){Object.keys(Q).forEach(function(A){B.style[A]=Q[A]})}var j=function(B,Q){var A=0;function F(){var J,Z,K=[];this.add=function($){K.push($)},this.call=function($){for(J=0,Z=K.length;J<Z;J++)K[J].call(this,$)},this.remove=function($){var H=[];for(J=0,Z=K.length;J<Z;J++)K[J]!==$&&H.push(K[J]);K=H},this.length=function(){return K.length}}function ce(K,J){if(K){if(K.resizedAttached)return void K.resizedAttached.add(J);K.resizedAttached=new F,K.resizedAttached.add(J),K.resizeSensor=document.createElement("div"),K.resizeSensor.dir="ltr",K.resizeSensor.className="resize-sensor";var Z={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},$={position:"absolute",left:"0px",top:"0px",transition:"0s"};T(K.resizeSensor,Z);var H=document.createElement("div");H.className="resize-sensor-expand",T(H,Z);var w=document.createElement("div");T(w,$),H.appendChild(w);var P=document.createElement("div");P.className="resize-sensor-shrink",T(P,Z);var k=document.createElement("div");T(k,$),T(k,{width:"200%",height:"200%"}),P.appendChild(k),K.resizeSensor.appendChild(H),K.resizeSensor.appendChild(P),K.appendChild(K.resizeSensor);var de=window.getComputedStyle(K),G=de?de.getPropertyValue("position"):null;"absolute"!==G&&"relative"!==G&&"fixed"!==G&&"sticky"!==G&&(K.style.position="relative");var Ie=!1,le=0,ve=v(K),Oe=0,Le=0,Qe=!0;A=0;var Te=function(){if(Qe){if(0===K.offsetWidth&&0===K.offsetHeight)return void(A||(A=C(function(){A=0,Te()})));Qe=!1}var fe,Ce;Ce=K.offsetHeight,w.style.width=(fe=K.offsetWidth)+10+"px",w.style.height=Ce+10+"px",H.scrollLeft=fe+10,H.scrollTop=Ce+10,P.scrollLeft=fe+10,P.scrollTop=Ce+10};K.resizeSensor.resetSensor=Te;var He=function(){le=0,Ie&&(Oe=ve.width,Le=ve.height,K.resizedAttached&&K.resizedAttached.call(ve))},Me=function(){ve=v(K),(Ie=ve.width!==Oe||ve.height!==Le)&&!le&&(le=C(He)),Te()},Ue=function(fe,Ce,nt){fe.attachEvent?fe.attachEvent("on"+Ce,nt):fe.addEventListener(Ce,nt)};Ue(H,"scroll",Me),Ue(P,"scroll",Me),A=C(function(){A=0,Te()})}}_(B,function(K){ce(K,Q)}),this.detach=function(K){A||(R(A),A=0),j.detach(B,K)},this.reset=function(){B.resizeSensor.resetSensor()}};if(j.reset=function(B){_(B,function(Q){Q.resizeSensor.resetSensor()})},j.detach=function(B,Q){_(B,function(A){A&&(A.resizedAttached&&"function"==typeof Q&&(A.resizedAttached.remove(Q),A.resizedAttached.length())||A.resizeSensor&&(A.contains(A.resizeSensor)&&A.removeChild(A.resizeSensor),delete A.resizeSensor,delete A.resizedAttached))})},typeof MutationObserver<"u"){var O=new MutationObserver(function(B){for(var Q in B)if(B.hasOwnProperty(Q))for(var A=B[Q].addedNodes,F=0;F<A.length;F++)A[F].resizeSensor&&j.reset(A[F])});document.addEventListener("DOMContentLoaded",function(B){O.observe(document.body,{childList:!0,subtree:!0})})}return j})?M.call(q,g,q,ee):M)&&(ee.exports=y)},2016:ee=>{"use strict";var M,q="object"==typeof Reflect?Reflect:null,g=q&&"function"==typeof q.apply?q.apply:function(H,w,P){return Function.prototype.apply.call(H,w,P)};M=q&&"function"==typeof q.ownKeys?q.ownKeys:Object.getOwnPropertySymbols?function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:function(H){return Object.getOwnPropertyNames(H)};var D=Number.isNaN||function(H){return H!=H};function C(){C.init.call(this)}ee.exports=C,ee.exports.once=function K($,H){return new Promise(function(w,P){function k(G){$.removeListener(H,de),P(G)}function de(){"function"==typeof $.removeListener&&$.removeListener("error",k),w([].slice.call(arguments))}Z($,H,de,{once:!0}),"error"!==H&&function J($,H,w){"function"==typeof $.on&&Z($,"error",H,w)}($,k,{once:!0})})},C.EventEmitter=C,C.prototype._events=void 0,C.prototype._eventsCount=0,C.prototype._maxListeners=void 0;var R=10;function _($){if("function"!=typeof $)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}function v($){return void 0===$._maxListeners?C.defaultMaxListeners:$._maxListeners}function T($,H,w,P){var k,de,G;if(_(w),void 0===(de=$._events)?(de=$._events=Object.create(null),$._eventsCount=0):(void 0!==de.newListener&&($.emit("newListener",H,w.listener?w.listener:w),de=$._events),G=de[H]),void 0===G)G=de[H]=w,++$._eventsCount;else if("function"==typeof G?G=de[H]=P?[w,G]:[G,w]:P?G.unshift(w):G.push(w),(k=v($))>0&&G.length>k&&!G.warned){G.warned=!0;var Ie=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ie.name="MaxListenersExceededWarning",Ie.emitter=$,Ie.type=H,Ie.count=G.length,function y($){console&&console.warn&&console.warn($)}(Ie)}return $}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O($,H,w){var P={fired:!1,wrapFn:void 0,target:$,type:H,listener:w},k=j.bind(P);return k.listener=w,P.wrapFn=k,k}function B($,H,w){var P=$._events;if(void 0===P)return[];var k=P[H];return void 0===k?[]:"function"==typeof k?w?[k.listener||k]:[k]:w?function ce($){for(var H=new Array($.length),w=0;w<H.length;++w)H[w]=$[w].listener||$[w];return H}(k):A(k,k.length)}function Q($){var H=this._events;if(void 0!==H){var w=H[$];if("function"==typeof w)return 1;if(void 0!==w)return w.length}return 0}function A($,H){for(var w=new Array(H),P=0;P<H;++P)w[P]=$[P];return w}function Z($,H,w,P){if("function"==typeof $.on)P.once?$.once(H,w):$.on(H,w);else{if("function"!=typeof $.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $);$.addEventListener(H,function k(de){P.once&&$.removeEventListener(H,k),w(de)})}}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return R},set:function($){if("number"!=typeof $||$<0||D($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");R=$}}),C.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(H){if("number"!=typeof H||H<0||D(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this},C.prototype.getMaxListeners=function(){return v(this)},C.prototype.emit=function(H){for(var w=[],P=1;P<arguments.length;P++)w.push(arguments[P]);var k="error"===H,de=this._events;if(void 0!==de)k=k&&void 0===de.error;else if(!k)return!1;if(k){var G;if(w.length>0&&(G=w[0]),G instanceof Error)throw G;var Ie=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw Ie.context=G,Ie}var le=de[H];if(void 0===le)return!1;if("function"==typeof le)g(le,this,w);else{var ve=le.length,Oe=A(le,ve);for(P=0;P<ve;++P)g(Oe[P],this,w)}return!0},C.prototype.on=C.prototype.addListener=function(H,w){return T(this,H,w,!1)},C.prototype.prependListener=function(H,w){return T(this,H,w,!0)},C.prototype.once=function(H,w){return _(w),this.on(H,O(this,H,w)),this},C.prototype.prependOnceListener=function(H,w){return _(w),this.prependListener(H,O(this,H,w)),this},C.prototype.off=C.prototype.removeListener=function(H,w){var P,k,de,G,Ie;if(_(w),void 0===(k=this._events))return this;if(void 0===(P=k[H]))return this;if(P===w||P.listener===w)0==--this._eventsCount?this._events=Object.create(null):(delete k[H],k.removeListener&&this.emit("removeListener",H,P.listener||w));else if("function"!=typeof P){for(de=-1,G=P.length-1;G>=0;G--)if(P[G]===w||P[G].listener===w){Ie=P[G].listener,de=G;break}if(de<0)return this;0===de?P.shift():function F($,H){for(;H+1<$.length;H++)$[H]=$[H+1];$.pop()}(P,de),1===P.length&&(k[H]=P[0]),void 0!==k.removeListener&&this.emit("removeListener",H,Ie||w)}return this},C.prototype.removeAllListeners=function(H){var w,P,k;if(void 0===(P=this._events))return this;if(void 0===P.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==P[H]&&(0==--this._eventsCount?this._events=Object.create(null):delete P[H]),this;if(0===arguments.length){var G,de=Object.keys(P);for(k=0;k<de.length;++k)"removeListener"!==(G=de[k])&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(w=P[H]))this.removeListener(H,w);else if(void 0!==w)for(k=w.length-1;k>=0;k--)this.removeListener(H,w[k]);return this},C.prototype.listeners=function(H){return B(this,H,!0)},C.prototype.rawListeners=function(H){return B(this,H,!1)},C.listenerCount=function($,H){return"function"==typeof $.listenerCount?$.listenerCount(H):Q.call($,H)},C.prototype.listenerCount=Q,C.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},7991:(ee,q,g)=>{var M=g(6943),y=g(9151),D=g(2323);function C(B,Q,A){if(!M(B))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!B.hasNode(Q))throw new Error('graphology-shortest-path: the "'+Q+'" source node does not exist in the given graph.');if(!B.hasNode(A))throw new Error('graphology-shortest-path: the "'+A+'" target node does not exist in the given graph.');if((Q=""+Q)==(A=""+A))return[Q];var F=B.inboundNeighbors.bind(B),ce=B.outboundNeighbors.bind(B),K={},J={};K[Q]=null,J[A]=null;var H,w,P,k,de,G,Ie,le,Z=[Q],$=[A],ve=!1;e:for(;Z.length&&$.length;)if(Z.length<=$.length){for(H=Z,Z=[],de=0,Ie=H.length;de<Ie;de++)for(G=0,le=(P=ce(w=H[de])).length;G<le;G++)if((k=P[G])in K||(Z.push(k),K[k]=w),k in J){ve=!0;break e}}else for(H=$,$=[],de=0,Ie=H.length;de<Ie;de++)for(w=H[de],P=F(w),G=0,le=P.length;G<le;G++)if(k=P[G],k in J||($.push(k),J[k]=w),k in K){ve=!0;break e}if(!ve)return null;for(var Oe=[];k;)Oe.unshift(k),k=K[k];for(k=J[Oe[Oe.length-1]];k;)Oe.push(k),k=J[k];return Oe.length?Oe:null}function R(B,Q){if(!M(B))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!B.hasNode(Q))throw new Error('graphology-shortest-path: the "'+Q+'" source node does not exist in the given graph.');var ce,K,J,Z,$,H,A={},F={};for(A[Q=""+Q]=!0,F[Q]=[Q];Object.keys(A).length;)for(J in ce=A,A={},ce)for($=0,H=(K=B.outboundNeighbors(J)).length;$<H;$++)F[Z=K[$]]||(F[Z]=F[J].concat(Z),A[Z]=!0);return F}function _(B,Q,A){if(!M(Q))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!Q.hasNode(A))throw new Error('graphology-shortest-path: the "'+A+'" source node does not exist in the given graph.');A=""+A;var F=new Set,ce={},K=0;ce[A]=0;for(var Z,$,H,J=[A];0!==J.length;){var w=[];for(Z=0,$=J.length;Z<$;Z++)!F.has(H=J[Z])&&(F.add(H),D(w,Q[B](H)),ce[H]=K);K++,J=w}return ce}var v=_.bind(null,"outboundNeighbors"),T=_.bind(null,"neighbors");function j(B,Q,A){return arguments.length<3?R(B,Q):C(B,Q,A)}j.bidirectional=C,j.singleSource=R,j.singleSourceLength=v,j.undirectedSingleSourceLength=T,j.brandes=function O(B,Q){Q=""+Q;var J,Z,$,H,w,P,k,de,G,A=[],F={},ce={},K=B.nodes();for(P=0,de=K.length;P<de;P++)F[H=K[P]]=[],ce[H]=0;var Ie={};ce[Q]=1,Ie[Q]=0;for(var le=y.of(Q);le.size;)for(H=le.dequeue(),A.push(H),J=Ie[H],Z=ce[H],k=0,G=($=B.outboundNeighbors(H)).length;k<G;k++)(w=$[k])in Ie||(le.enqueue(w),Ie[w]=J+1),Ie[w]===J+1&&(ce[w]+=Z,F[w].push(H));return[A,F,ce]},ee.exports=j},6943:ee=>{ee.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(ee){ee.exports=function(){"use strict";function q(we){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ee){return typeof Ee}:function(Ee){return Ee&&"function"==typeof Symbol&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee})(we)}function g(we,Ee){we.prototype=Object.create(Ee.prototype),we.prototype.constructor=we,y(we,Ee)}function M(we){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(Ee){return Ee.__proto__||Object.getPrototypeOf(Ee)})(we)}function y(we,Ee){return(y=Object.setPrototypeOf||function(he,V){return he.__proto__=V,he})(we,Ee)}function C(we,Ee,he){return(C=function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(V,ne,be){var Fe=[null];Fe.push.apply(Fe,ne);var ke=new(Function.bind.apply(V,Fe));return be&&y(ke,be.prototype),ke}).apply(null,arguments)}function R(we){var Ee="function"==typeof Map?new Map:void 0;return(R=function(he){if(null===he||-1===Function.toString.call(he).indexOf("[native code]"))return he;if("function"!=typeof he)throw new TypeError("Super expression must either be null or a function");if(void 0!==Ee){if(Ee.has(he))return Ee.get(he);Ee.set(he,ne)}function ne(){return C(he,arguments,M(this).constructor)}return ne.prototype=Object.create(he.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),y(ne,he)})(we)}function _(we){if(void 0===we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return we}var v=function(){for(var we=arguments[0],Ee=1,he=arguments.length;Ee<he;Ee++)if(arguments[Ee])for(var V in arguments[Ee])we[V]=arguments[Ee][V];return we};function T(we,Ee,he,V){var ne=we._nodes.get(Ee),be=null;return ne?be="mixed"===V?ne.out&&ne.out[he]||ne.undirected&&ne.undirected[he]:"directed"===V?ne.out&&ne.out[he]:ne.undirected&&ne.undirected[he]:be}function O(we){return"object"===q(we)&&null!==we&&we.constructor===Object}function B(we){var Ee;for(Ee in we)return!1;return!0}function Q(we,Ee,he){Object.defineProperty(we,Ee,{enumerable:!1,configurable:!1,writable:!0,value:he})}function A(we,Ee,he){var V={enumerable:!0,configurable:!0};"function"==typeof he?V.get=he:(V.value=he,V.writable=!1),Object.defineProperty(we,Ee,V)}function F(we){return!(!O(we)||we.attributes&&!Array.isArray(we.attributes))}"function"==typeof Object.assign&&(v=Object.assign);var ce,K={exports:{}},J="object"==typeof Reflect?Reflect:null,Z=J&&"function"==typeof J.apply?J.apply:function(we,Ee,he){return Function.prototype.apply.call(we,Ee,he)};ce=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(we){return Object.getOwnPropertyNames(we).concat(Object.getOwnPropertySymbols(we))}:function(we){return Object.getOwnPropertyNames(we)};var $=Number.isNaN||function(we){return we!=we};function H(){H.init.call(this)}K.exports=H,K.exports.once=function(we,Ee){return new Promise(function(he,V){function ne(Fe){we.removeListener(Ee,be),V(Fe)}function be(){"function"==typeof we.removeListener&&we.removeListener("error",ne),he([].slice.call(arguments))}var Fe;Le(we,Ee,be,{once:!0}),"error"!==Ee&&("function"==typeof(Fe=we).on&&Le(Fe,"error",ne,{once:!0}))})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var w=10;function P(we){if("function"!=typeof we)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof we)}function k(we){return void 0===we._maxListeners?H.defaultMaxListeners:we._maxListeners}function de(we,Ee,he,V){var ne,be,Fe;if(P(he),void 0===(be=we._events)?(be=we._events=Object.create(null),we._eventsCount=0):(void 0!==be.newListener&&(we.emit("newListener",Ee,he.listener?he.listener:he),be=we._events),Fe=be[Ee]),void 0===Fe)Fe=be[Ee]=he,++we._eventsCount;else if("function"==typeof Fe?Fe=be[Ee]=V?[he,Fe]:[Fe,he]:V?Fe.unshift(he):Fe.push(he),(ne=k(we))>0&&Fe.length>ne&&!Fe.warned){Fe.warned=!0;var ct=new Error("Possible EventEmitter memory leak detected. "+Fe.length+" "+String(Ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");ct.name="MaxListenersExceededWarning",ct.emitter=we,ct.type=Ee,ct.count=Fe.length,console&&console.warn&&console.warn(ct)}return we}function G(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ie(we,Ee,he){var V={fired:!1,wrapFn:void 0,target:we,type:Ee,listener:he},ne=G.bind(V);return ne.listener=he,V.wrapFn=ne,ne}function le(we,Ee,he){var V=we._events;if(void 0===V)return[];var ne=V[Ee];return void 0===ne?[]:"function"==typeof ne?he?[ne.listener||ne]:[ne]:he?function(be){for(var Fe=new Array(be.length),ke=0;ke<Fe.length;++ke)Fe[ke]=be[ke].listener||be[ke];return Fe}(ne):Oe(ne,ne.length)}function ve(we){var Ee=this._events;if(void 0!==Ee){var he=Ee[we];if("function"==typeof he)return 1;if(void 0!==he)return he.length}return 0}function Oe(we,Ee){for(var he=new Array(Ee),V=0;V<Ee;++V)he[V]=we[V];return he}function Le(we,Ee,he,V){if("function"==typeof we.on)V.once?we.once(Ee,he):we.on(Ee,he);else{if("function"!=typeof we.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof we);we.addEventListener(Ee,function ne(be){V.once&&we.removeEventListener(Ee,ne),he(be)})}}function Qe(we){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:we}),this.done=!1}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(we){if("number"!=typeof we||we<0||$(we))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+we+".");w=we}}),H.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(we){if("number"!=typeof we||we<0||$(we))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+we+".");return this._maxListeners=we,this},H.prototype.getMaxListeners=function(){return k(this)},H.prototype.emit=function(we){for(var Ee=[],he=1;he<arguments.length;he++)Ee.push(arguments[he]);var V="error"===we,ne=this._events;if(void 0!==ne)V=V&&void 0===ne.error;else if(!V)return!1;if(V){var be;if(Ee.length>0&&(be=Ee[0]),be instanceof Error)throw be;var Fe=new Error("Unhandled error."+(be?" ("+be.message+")":""));throw Fe.context=be,Fe}var ke=ne[we];if(void 0===ke)return!1;if("function"==typeof ke)Z(ke,this,Ee);else{var ct=ke.length,Dt=Oe(ke,ct);for(he=0;he<ct;++he)Z(Dt[he],this,Ee)}return!0},H.prototype.addListener=function(we,Ee){return de(this,we,Ee,!1)},H.prototype.on=H.prototype.addListener,H.prototype.prependListener=function(we,Ee){return de(this,we,Ee,!0)},H.prototype.once=function(we,Ee){return P(Ee),this.on(we,Ie(this,we,Ee)),this},H.prototype.prependOnceListener=function(we,Ee){return P(Ee),this.prependListener(we,Ie(this,we,Ee)),this},H.prototype.removeListener=function(we,Ee){var he,V,ne,be,Fe;if(P(Ee),void 0===(V=this._events))return this;if(void 0===(he=V[we]))return this;if(he===Ee||he.listener===Ee)0==--this._eventsCount?this._events=Object.create(null):(delete V[we],V.removeListener&&this.emit("removeListener",we,he.listener||Ee));else if("function"!=typeof he){for(ne=-1,be=he.length-1;be>=0;be--)if(he[be]===Ee||he[be].listener===Ee){Fe=he[be].listener,ne=be;break}if(ne<0)return this;0===ne?he.shift():function(ke,ct){for(;ct+1<ke.length;ct++)ke[ct]=ke[ct+1];ke.pop()}(he,ne),1===he.length&&(V[we]=he[0]),void 0!==V.removeListener&&this.emit("removeListener",we,Fe||Ee)}return this},H.prototype.off=H.prototype.removeListener,H.prototype.removeAllListeners=function(we){var Ee,he,V;if(void 0===(he=this._events))return this;if(void 0===he.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==he[we]&&(0==--this._eventsCount?this._events=Object.create(null):delete he[we]),this;if(0===arguments.length){var ne,be=Object.keys(he);for(V=0;V<be.length;++V)"removeListener"!==(ne=be[V])&&this.removeAllListeners(ne);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Ee=he[we]))this.removeListener(we,Ee);else if(void 0!==Ee)for(V=Ee.length-1;V>=0;V--)this.removeListener(we,Ee[V]);return this},H.prototype.listeners=function(we){return le(this,we,!0)},H.prototype.rawListeners=function(we){return le(this,we,!1)},H.listenerCount=function(we,Ee){return"function"==typeof we.listenerCount?we.listenerCount(Ee):ve.call(we,Ee)},H.prototype.listenerCount=ve,H.prototype.eventNames=function(){return this._eventsCount>0?ce(this._events):[]},Qe.prototype.next=function(){if(this.done)return{done:!0};var we=this._next();return we.done&&(this.done=!0),we},typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this}),Qe.of=function(){var we=arguments,Ee=we.length,he=0;return new Qe(function(){return he>=Ee?{done:!0}:{done:!1,value:we[he++]}})},Qe.empty=function(){var we=new Qe(null);return we.done=!0,we},Qe.is=function(we){return we instanceof Qe||"object"==typeof we&&null!==we&&"function"==typeof we.next};var qe=Qe,Te=function(we,Ee){for(var he,V=arguments.length>1?Ee:1/0,ne=V!==1/0?new Array(V):[],be=0;;){if(be===V)return ne;if((he=we.next()).done)return be!==Ee?ne.slice(0,be):ne;ne[be++]=he.value}},He=function(we){function Ee(he,V){var ne;return(ne=we.call(this)||this).name="GraphError",ne.message=he||"",ne.data=V||{},ne}return g(Ee,we),Ee}(R(Error)),Me=function(we){function Ee(he,V){var ne;return(ne=we.call(this,he,V)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ne),Ee.prototype.constructor),ne}return g(Ee,we),Ee}(He),Ue=function(we){function Ee(he,V){var ne;return(ne=we.call(this,he,V)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ne),Ee.prototype.constructor),ne}return g(Ee,we),Ee}(He),fe=function(we){function Ee(he,V){var ne;return(ne=we.call(this,he,V)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ne),Ee.prototype.constructor),ne}return g(Ee,we),Ee}(He);function Ce(we,Ee){this.key=we,this.attributes=Ee,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function nt(we,Ee){this.key=we,this.attributes=Ee,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function gt(we,Ee){this.key=we,this.attributes=Ee,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Je(we,Ee,he,V,ne,be){this.key=Ee,this.attributes=be,this.undirected=we,this.source=V,this.target=ne,this.generatedKey=he}function ge(we,Ee,he,V,ne,be,Fe){var ke,ct,Dt="out",Ft="in";if(Ee&&(Dt=Ft="undirected"),we.multi){if(void 0===(ct=(ke=be[Dt])[ne])&&(ke[ne]=ct=new Set),ct.add(he),V===ne&&Ee)return;void 0===(ke=Fe[Ft])[V]&&(ke[V]=ct)}else{if(be[Dt][ne]=he,V===ne&&Ee)return;Fe[Ft][V]=he}}nt.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},gt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var I=[{name:function(we){return"get".concat(we,"Attribute")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne){var be;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+V,ke=""+ne;if(ne=arguments[2],!(be=T(this,Fe,ke,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(ke,'").'))}else if(!(be=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==he&&be.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return be.attributes[ne]}}},{name:function(we){return"get".concat(we,"Attributes")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V){var ne;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var be=""+V,Fe=""+arguments[1];if(!(ne=T(this,be,Fe,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(be,'" - "').concat(Fe,'").'))}else if(!(ne=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==he&&ne.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return ne.attributes}}},{name:function(we){return"has".concat(we,"Attribute")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne){var be;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+V,ke=""+ne;if(ne=arguments[2],!(be=T(this,Fe,ke,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(ke,'").'))}else if(!(be=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==he&&be.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return be.attributes.hasOwnProperty(ne)}}},{name:function(we){return"set".concat(we,"Attribute")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne,be){var Fe;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ke=""+V,ct=""+ne;if(ne=arguments[2],be=arguments[3],!(Fe=T(this,ke,ct,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(ke,'" - "').concat(ct,'").'))}else if(!(Fe=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==he&&Fe.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return Fe.attributes[ne]=be,this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:ne}),this}}},{name:function(we){return"update".concat(we,"Attribute")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne,be){var Fe;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ke=""+V,ct=""+ne;if(ne=arguments[2],be=arguments[3],!(Fe=T(this,ke,ct,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(ke,'" - "').concat(ct,'").'))}else if(!(Fe=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if("function"!=typeof be)throw new Me("Graph.".concat(Ee,": updater should be a function."));if("mixed"!==he&&Fe.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return Fe.attributes[ne]=be(Fe.attributes[ne]),this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:ne}),this}}},{name:function(we){return"remove".concat(we,"Attribute")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne){var be;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+V,ke=""+ne;if(ne=arguments[2],!(be=T(this,Fe,ke,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(ke,'").'))}else if(!(be=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==he&&be.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return delete be.attributes[ne],this.emit("edgeAttributesUpdated",{key:be.key,type:"remove",attributes:be.attributes,name:ne}),this}}},{name:function(we){return"replace".concat(we,"Attributes")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne){var be;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+V,ke=""+ne;if(ne=arguments[2],!(be=T(this,Fe,ke,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(ke,'").'))}else if(!(be=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if(!O(ne))throw new Me("Graph.".concat(Ee,": provided attributes are not a plain object."));if("mixed"!==he&&be.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return be.attributes=ne,this.emit("edgeAttributesUpdated",{key:be.key,type:"replace",attributes:be.attributes}),this}}},{name:function(we){return"merge".concat(we,"Attributes")},attacher:function(we,Ee,he){we.prototype[Ee]=function(V,ne){var be;if("mixed"!==this.type&&"mixed"!==he&&he!==this.type)throw new fe("Graph.".concat(Ee,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Ee,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+V,ke=""+ne;if(ne=arguments[2],!(be=T(this,Fe,ke,he)))throw new Ue("Graph.".concat(Ee,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(ke,'").'))}else if(!(be=this._edges.get(V=""+V)))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" edge in the graph.'));if(!O(ne))throw new Me("Graph.".concat(Ee,": provided attributes are not a plain object."));if("mixed"!==he&&be.undirected!==("undirected"===he))throw new Ue("Graph.".concat(Ee,': could not find the "').concat(V,'" ').concat(he," edge in the graph."));return v(be.attributes,ne),this.emit("edgeAttributesUpdated",{key:be.key,type:"merge",attributes:be.attributes,data:ne}),this}}}],ae=qe,ie=function(){var we,Ee=arguments,he=-1;return new ae(function V(){if(!we){if(++he>=Ee.length)return{done:!0};we=Ee[he]}var ne=we.next();return ne.done?(we=null,V()):ne})},Ge=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ze(we,Ee){for(var he in Ee)we.push(Ee[he].key)}function pe(we,Ee){for(var he in Ee)Ee[he].forEach(function(V){return we.push(V.key)})}function re(we,Ee,he){for(var V in we)if(V!==he){var ne=we[V];Ee(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey)}}function Y(we,Ee,he){for(var V in we)V!==he&&we[V].forEach(function(ne){return Ee(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey)})}function N(we,Ee,he){for(var V in we)if(V!==he){var ne=we[V];if(Ee(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey))return!0}return!1}function U(we,Ee,he){var V,ne,be,Fe,ke;for(var ct in we)if(ct!==he)for(V=we[ct].values();!0!==(ne=V.next()).done;)if(Fe=(be=ne.value).source,Ee(be.key,be.attributes,Fe.key,(ke=be.target).key,Fe.attributes,ke.attributes,be.undirected,be.generatedKey))return!0;return!1}function me(we,Ee){var he=Object.keys(we),V=he.length,ne=null,be=0;return new qe(function Fe(){var ke;if(ne){var ct=ne.next();if(ct.done)return ne=null,be++,Fe();ke=ct.value}else{if(be>=V)return{done:!0};var Dt=he[be];if(Dt===Ee)return be++,Fe();if((ke=we[Dt])instanceof Set)return ne=ke.values(),Fe();be++}return{done:!1,value:[ke.key,ke.attributes,ke.source.key,ke.target.key,ke.source.attributes,ke.target.attributes]}})}function Ye(we,Ee,he){var V=Ee[he];V&&we.push(V.key)}function ye(we,Ee,he){var V=Ee[he];V&&V.forEach(function(ne){return we.push(ne.key)})}function ze(we,Ee,he){var V=we[Ee];if(V){var ne=V.source,be=V.target;he(V.key,V.attributes,ne.key,be.key,ne.attributes,be.attributes,V.undirected,V.generatedKey)}}function st(we,Ee,he){var V=we[Ee];V&&V.forEach(function(ne){return he(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey)})}function bt(we,Ee,he){var V=we[Ee];if(V){var ne=V.source,be=V.target;return he(V.key,V.attributes,ne.key,be.key,ne.attributes,be.attributes,V.undirected,V.generatedKey)}}function At(we,Ee,he){var V=we[Ee];if(V){for(var ne,be,Fe=V.values();!0!==(ne=Fe.next()).done;)if(he((be=ne.value).key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes,be.undirected,be.generatedKey))return!0;return!1}}function xt(we,Ee){var he=we[Ee];if(he instanceof Set){var V=he.values();return new qe(function(){var ne=V.next();if(ne.done)return ne;var be=ne.value;return{done:!1,value:[be.key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes]}})}return qe.of([he.key,he.attributes,he.source.key,he.target.key,he.source.attributes,he.target.attributes])}var Bn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Wi(we,Ee){if(void 0!==Ee)for(var he in Ee)we.add(he)}function pr(we,Ee,he){for(var V in Ee){var ne=Ee[V];ne instanceof Set&&(ne=ne.values().next().value);var be=ne.source,ke=be===we?ne.target:be;he(ke.key,ke.attributes)}}function Bo(we,Ee,he,V){for(var ne in he){var be=he[ne];be instanceof Set&&(be=be.values().next().value);var Fe=be.source,ct=Fe===Ee?be.target:Fe;we.has(ct.key)||(we.add(ct.key),V(ct.key,ct.attributes))}}function jo(we,Ee,he){for(var V in Ee){var ne=Ee[V];ne instanceof Set&&(ne=ne.values().next().value);var be=ne.source,ke=be===we?ne.target:be;if(he(ke.key,ke.attributes))return!0}return!1}function Vi(we,Ee,he,V){for(var ne in he){var be=he[ne];be instanceof Set&&(be=be.values().next().value);var Fe=be.source,ct=Fe===Ee?be.target:Fe;if(!we.has(ct.key)&&(we.add(ct.key),V(ct.key,ct.attributes)))return!0}return!1}function Uo(we,Ee){var he=Object.keys(Ee),V=he.length,ne=0;return new qe(function(){if(ne>=V)return{done:!0};var be=Ee[he[ne++]];be instanceof Set&&(be=be.values().next().value);var Fe=be.source,ct=Fe===we?be.target:Fe;return{done:!1,value:[ct.key,ct.attributes]}})}function js(we,Ee,he){var V=Object.keys(he),ne=V.length,be=0;return new qe(function Fe(){if(be>=ne)return{done:!0};var ke=he[V[be++]];ke instanceof Set&&(ke=ke.values().next().value);var ct=ke.source,Ft=ct===Ee?ke.target:ct;return we.has(Ft.key)?Fe():(we.add(Ft.key),{done:!1,value:[Ft.key,Ft.attributes]})})}function $e(we,Ee,he){for(var V,ne,be,Fe,ke,ct,Dt,Ft=Ee._nodes.values(),Gt=Ee.type;!0!==(V=Ft.next()).done;){if(ne=V.value,"undirected"!==Gt)for(be in Fe=ne.out)if(ct=(ke=Fe[be]).target,Dt=he(ne.key,ct.key,ne.attributes,ct.attributes,ke.key,ke.attributes,ke.undirected,ke.generatedKey),we&&Dt)return;if("directed"!==Gt)for(be in Fe=ne.undirected)if((ct=(ke=Fe[be]).target).key!==be&&(ct=ke.source),Dt=he(ne.key,ct.key,ne.attributes,ct.attributes,ke.key,ke.attributes,ke.undirected,ke.generatedKey),we&&Dt)return}}function Xe(we,Ee,he){for(var V,ne,be,Fe,ke,ct,Dt,Ft,Gt,hn=Ee._nodes.values(),gn=Ee.type;!0!==(V=hn.next()).done;){if(ne=V.value,"undirected"!==gn)for(be in ct=ne.out)for(Fe=ct[be].values();!0!==(ke=Fe.next()).done;)if(Ft=(Dt=ke.value).target,Gt=he(ne.key,Ft.key,ne.attributes,Ft.attributes,Dt.key,Dt.attributes,Dt.undirected,Dt.generatedKey),we&&Gt)return;if("directed"!==gn)for(be in ct=ne.undirected)for(Fe=ct[be].values();!0!==(ke=Fe.next()).done;)if((Ft=(Dt=ke.value).target).key!==be&&(Ft=Dt.source),Gt=he(ne.key,Ft.key,ne.attributes,Ft.attributes,Dt.key,Dt.attributes,Dt.undirected,Dt.generatedKey),we&&Gt)return}}function Wt(we,Ee){var he={key:we};return B(Ee.attributes)||(he.attributes=v({},Ee.attributes)),he}function $t(we,Ee){var he={source:Ee.source.key,target:Ee.target.key};return Ee.generatedKey||(he.key=we),B(Ee.attributes)||(he.attributes=v({},Ee.attributes)),Ee.undirected&&(he.undirected=!0),he}var Yt=new Set(["directed","undirected","mixed"]),Ma=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ni={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ta(we,Ee,he){var V=new we.NodeDataClass(Ee,he);return we._nodes.set(Ee,V),we.emit("nodeAdded",{key:Ee,attributes:he}),V}function Ti(we,Ee,he,V,ne,be,Fe,ke){if(!V&&"undirected"===we.type)throw new fe("Graph.".concat(Ee,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===we.type)throw new fe("Graph.".concat(Ee,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(ke&&!O(ke))throw new Me("Graph.".concat(Ee,': invalid attributes. Expecting an object but got "').concat(ke,'"'));if(be=""+be,Fe=""+Fe,ke=ke||{},!we.allowSelfLoops&&be===Fe)throw new fe("Graph.".concat(Ee,': source & target are the same ("').concat(be,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ct=we._nodes.get(be),Dt=we._nodes.get(Fe);if(!ct)throw new Ue("Graph.".concat(Ee,': source node "').concat(be,'" not found.'));if(!Dt)throw new Ue("Graph.".concat(Ee,': target node "').concat(Fe,'" not found.'));var Ft={key:null,undirected:V,source:be,target:Fe,attributes:ke};if(he&&(ne=we._edgeKeyGenerator(Ft)),we._edges.has(ne=""+ne))throw new fe("Graph.".concat(Ee,': the "').concat(ne,'" edge already exists in the graph.'));if(!we.multi&&(V?void 0!==ct.undirected[Fe]:void 0!==ct.out[Fe]))throw new fe("Graph.".concat(Ee,': an edge linking "').concat(be,'" to "').concat(Fe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Gt=new Je(V,ne,he,ct,Dt,ke);return we._edges.set(ne,Gt),be===Fe?V?(ct.undirectedSelfLoops++,we._undirectedSelfLoopCount++):(ct.directedSelfLoops++,we._directedSelfLoopCount++):V?(ct.undirectedDegree++,Dt.undirectedDegree++):(ct.outDegree++,Dt.inDegree++),ge(we,V,Gt,be,Fe,ct,Dt),V?we._undirectedSize++:we._directedSize++,Ft.key=ne,we.emit("edgeAdded",Ft),ne}function _i(we,Ee,he,V,ne,be,Fe,ke,ct){if(!V&&"undirected"===we.type)throw new fe("Graph.".concat(Ee,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===we.type)throw new fe("Graph.".concat(Ee,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(ke)if(ct){if("function"!=typeof ke)throw new Me("Graph.".concat(Ee,': invalid updater function. Expecting a function but got "').concat(ke,'"'))}else if(!O(ke))throw new Me("Graph.".concat(Ee,': invalid attributes. Expecting an object but got "').concat(ke,'"'));var Dt;if(be=""+be,Fe=""+Fe,ct&&(Dt=ke,ke=void 0),!we.allowSelfLoops&&be===Fe)throw new fe("Graph.".concat(Ee,': source & target are the same ("').concat(be,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Ft,Gt,hn=we._nodes.get(be),gn=we._nodes.get(Fe);if(!he&&(Ft=we._edges.get(ne))){if(Ft.source.key!==be||Ft.target.key!==Fe||V&&(Ft.source.key!==Fe||Ft.target.key!==be))throw new fe("Graph.".concat(Ee,': inconsistency detected when attempting to merge the "').concat(ne,'" edge with "').concat(be,'" source & "').concat(Fe,'" target vs. ("').concat(Ft.source.key,'", "').concat(Ft.target.key,'").'));Gt=Ft}if(Gt||we.multi||!hn||(Gt=V?hn.undirected[Fe]:hn.out[Fe]),Gt)return(ct?Dt:ke)?(ct?(Gt.attributes=Dt(Gt.attributes),we.emit("edgeAttributesUpdated",{type:"replace",key:Gt.key,attributes:Gt.attributes})):(v(Gt.attributes,ke),we.emit("edgeAttributesUpdated",{type:"merge",key:Gt.key,attributes:Gt.attributes,data:ke})),Gt.key):Gt.key;ke=ke||{},ct&&Dt&&(ke=Dt(ke));var zr={key:null,undirected:V,source:be,target:Fe,attributes:ke};if(he&&(ne=we._edgeKeyGenerator(zr)),we._edges.has(ne=""+ne))throw new fe("Graph.".concat(Ee,': the "').concat(ne,'" edge already exists in the graph.'));return hn||(hn=Ta(we,be,{}),be===Fe&&(gn=hn)),gn||(gn=Ta(we,Fe,{})),Ft=new Je(V,ne,he,hn,gn,ke),we._edges.set(ne,Ft),be===Fe?V?(hn.undirectedSelfLoops++,we._undirectedSelfLoopCount++):(hn.directedSelfLoops++,we._directedSelfLoopCount++):V?(hn.undirectedDegree++,gn.undirectedDegree++):(hn.outDegree++,gn.inDegree++),ge(we,V,Ft,be,Fe,hn,gn),V?we._undirectedSize++:we._directedSize++,zr.key=ne,we.emit("edgeAdded",zr),ne}var we,Ei=function(we){function Ee(V){var ne;if(ne=we.call(this)||this,(V=v({},Ni,V)).edgeKeyGenerator&&"function"!=typeof V.edgeKeyGenerator)throw new Me("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(V.edgeKeyGenerator,'".'));if("boolean"!=typeof V.multi)throw new Me("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(V.multi,'".'));if(!Yt.has(V.type))throw new Me('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(V.type,'".'));if("boolean"!=typeof V.allowSelfLoops)throw new Me("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(V.allowSelfLoops,'".'));var be,Fe="mixed"===V.type?Ce:"directed"===V.type?nt:gt;return Q(_(ne),"NodeDataClass",Fe),Q(_(ne),"_attributes",{}),Q(_(ne),"_nodes",new Map),Q(_(ne),"_edges",new Map),Q(_(ne),"_directedSize",0),Q(_(ne),"_undirectedSize",0),Q(_(ne),"_directedSelfLoopCount",0),Q(_(ne),"_undirectedSelfLoopCount",0),Q(_(ne),"_edgeKeyGenerator",V.edgeKeyGenerator||(be=0,function(){return be++})),Q(_(ne),"_options",V),Ma.forEach(function(ke){return Q(_(ne),ke,ne[ke])}),A(_(ne),"order",function(){return ne._nodes.size}),A(_(ne),"size",function(){return ne._edges.size}),A(_(ne),"directedSize",function(){return ne._directedSize}),A(_(ne),"undirectedSize",function(){return ne._undirectedSize}),A(_(ne),"selfLoopCount",function(){return ne._directedSelfLoopCount+ne._undirectedSelfLoopCount}),A(_(ne),"directedSelfLoopCount",function(){return ne._directedSelfLoopCount}),A(_(ne),"undirectedSelfLoopCount",function(){return ne._undirectedSelfLoopCount}),A(_(ne),"multi",ne._options.multi),A(_(ne),"type",ne._options.type),A(_(ne),"allowSelfLoops",ne._options.allowSelfLoops),A(_(ne),"implementation",function(){return"graphology"}),ne}g(Ee,we);var he=Ee.prototype;return he.hasNode=function(V){return this._nodes.has(""+V)},he.hasDirectedEdge=function(V,ne){if("undirected"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+V);return!!Fe&&!Fe.undirected}if(2===arguments.length){ne=""+ne;var ke=this._nodes.get(V=""+V);if(!ke)return!1;var ct=ke.out[ne];return!(!ct||this.multi&&!ct.size)}throw new Me("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},he.hasUndirectedEdge=function(V,ne){if("directed"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+V);return!!Fe&&Fe.undirected}if(2===arguments.length){ne=""+ne;var ke=this._nodes.get(V=""+V);if(!ke)return!1;var ct=ke.undirected[ne];return!(!ct||this.multi&&!ct.size)}throw new Me("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},he.hasEdge=function(V,ne){if(1===arguments.length)return this._edges.has(""+V);if(2===arguments.length){ne=""+ne;var Fe=this._nodes.get(V=""+V);if(!Fe)return!1;var ke=void 0!==Fe.out&&Fe.out[ne];return ke||(ke=void 0!==Fe.undirected&&Fe.undirected[ne]),!(!ke||this.multi&&!ke.size)}throw new Me("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},he.directedEdge=function(V,ne){if("undirected"!==this.type){if(V=""+V,ne=""+ne,this.multi)throw new fe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var be=this._nodes.get(V);if(!be)throw new Ue('Graph.directedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new Ue('Graph.directedEdge: could not find the "'.concat(ne,'" target node in the graph.'));var Fe=be.out&&be.out[ne]||void 0;return Fe?Fe.key:void 0}},he.undirectedEdge=function(V,ne){if("directed"!==this.type){if(V=""+V,ne=""+ne,this.multi)throw new fe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var be=this._nodes.get(V);if(!be)throw new Ue('Graph.undirectedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new Ue('Graph.undirectedEdge: could not find the "'.concat(ne,'" target node in the graph.'));var Fe=be.undirected&&be.undirected[ne]||void 0;return Fe?Fe.key:void 0}},he.edge=function(V,ne){if(this.multi)throw new fe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");ne=""+ne;var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.edge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new Ue('Graph.edge: could not find the "'.concat(ne,'" target node in the graph.'));var Fe=be.out&&be.out[ne]||be.undirected&&be.undirected[ne]||void 0;if(Fe)return Fe.key},he.inDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Me('Graph.inDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.inDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:be.inDegree+(ne?be.directedSelfLoops:0)},he.outDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Me('Graph.outDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.outDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:be.outDegree+(ne?be.directedSelfLoops:0)},he.directedDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Me('Graph.directedDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.directedDegree: could not find the "'.concat(V,'" node in the graph.'));if("undirected"===this.type)return 0;var Fe=ne?be.directedSelfLoops:0;return be.inDegree+Fe+(be.outDegree+Fe)},he.undirectedDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Me('Graph.undirectedDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.undirectedDegree: could not find the "'.concat(V,'" node in the graph.'));return"directed"===this.type?0:be.undirectedDegree+2*(ne?be.undirectedSelfLoops:0)},he.degree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Me('Graph.degree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.degree: could not find the "'.concat(V,'" node in the graph.'));var Fe=0,ke=0;return"directed"!==this.type&&(ne&&(ke=be.undirectedSelfLoops),Fe+=be.undirectedDegree+2*ke),"undirected"!==this.type&&(ne&&(ke=be.directedSelfLoops),Fe+=be.inDegree+be.outDegree+2*ke),Fe},he.source=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.source: could not find the "'.concat(V,'" edge in the graph.'));return ne.source.key},he.target=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.target: could not find the "'.concat(V,'" edge in the graph.'));return ne.target.key},he.extremities=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.extremities: could not find the "'.concat(V,'" edge in the graph.'));return[ne.source.key,ne.target.key]},he.opposite=function(V,ne){V=""+V;var be=this._edges.get(ne=""+ne);if(!be)throw new Ue('Graph.opposite: could not find the "'.concat(ne,'" edge in the graph.'));var Fe=be.source.key,ke=be.target.key;if(V!==Fe&&V!==ke)throw new Ue('Graph.opposite: the "'.concat(V,'" node is not attached to the "').concat(ne,'" edge (').concat(Fe,", ").concat(ke,")."));return V===Fe?ke:Fe},he.hasExtremity=function(V,ne){ne=""+ne;var be=this._edges.get(V=""+V);if(!be)throw new Ue('Graph.hasExtremity: could not find the "'.concat(V,'" edge in the graph.'));return be.source.key===ne||be.target.key===ne},he.isUndirected=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.isUndirected: could not find the "'.concat(V,'" edge in the graph.'));return ne.undirected},he.isDirected=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.isDirected: could not find the "'.concat(V,'" edge in the graph.'));return!ne.undirected},he.isSelfLoop=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.isSelfLoop: could not find the "'.concat(V,'" edge in the graph.'));return ne.source===ne.target},he.hasGeneratedKey=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.hasGeneratedKey: could not find the "'.concat(V,'" edge in the graph.'));return ne.generatedKey},he.addNode=function(V,ne){return function(be,Fe,ke){if(ke&&!O(ke))throw new Me('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(ke,'"'));if(ke=ke||{},be._nodes.has(Fe=""+Fe))throw new fe('Graph.addNode: the "'.concat(Fe,'" node already exist in the graph.'));var ct=new be.NodeDataClass(Fe,ke);return be._nodes.set(Fe,ct),be.emit("nodeAdded",{key:Fe,attributes:ke}),ct}(this,V,ne).key},he.mergeNode=function(V,ne){if(ne&&!O(ne))throw new Me('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(ne,'"'));ne=ne||{};var be=this._nodes.get(V=""+V);return be?(ne&&(v(be.attributes,ne),this.emit("nodeAttributesUpdated",{type:"merge",key:V,attributes:be.attributes,data:ne})),V):(be=new this.NodeDataClass(V,ne),this._nodes.set(V,be),this.emit("nodeAdded",{key:V,attributes:ne}),V)},he.updateNode=function(V,ne){if(ne&&"function"!=typeof ne)throw new Me('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(ne,'"'));var be=this._nodes.get(V=""+V);if(be)return ne&&(be.attributes=ne(be.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:V,attributes:be.attributes})),V;var ke=ne?ne({}):{};return be=new this.NodeDataClass(V,ke),this._nodes.set(V,be),this.emit("nodeAdded",{key:V,attributes:ke}),V},he.dropNode=function(V){var ne=this,be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.dropNode: could not find the "'.concat(V,'" node in the graph.'));this.forEachEdge(V,function(Fe){ne.dropEdge(Fe)}),this._nodes.delete(V),this.emit("nodeDropped",{key:V,attributes:be.attributes})},he.dropEdge=function(V){var ne;if(arguments.length>1){var be=""+arguments[0],Fe=""+arguments[1];if(!(ne=T(this,be,Fe,this.type)))throw new Ue('Graph.dropEdge: could not find the "'.concat(be,'" -> "').concat(Fe,'" edge in the graph.'))}else if(!(ne=this._edges.get(V=""+V)))throw new Ue('Graph.dropEdge: could not find the "'.concat(V,'" edge in the graph.'));this._edges.delete(ne.key);var ct=ne.source,Dt=ne.target,Ft=ne.attributes,Gt=ne.undirected;return ct===Dt?Gt?(ct.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(ct.directedSelfLoops--,this._directedSelfLoopCount--):Gt?(ct.undirectedDegree--,Dt.undirectedDegree--):(ct.outDegree--,Dt.inDegree--),function L(we,Ee,he){var V=we.multi,ne=he.source,be=he.target,Fe=ne.key,ke=be.key,ct=ne[Ee?"undirected":"out"],Dt=Ee?"undirected":"in";if(ke in ct)if(V){var Ft=ct[ke];1===Ft.size?(delete ct[ke],delete be[Dt][Fe]):Ft.delete(he)}else delete ct[ke];V||delete be[Dt][Fe]}(this,Gt,ne),Gt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:V,attributes:Ft,source:ct.key,target:Dt.key,undirected:Gt}),this},he.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},he.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},he.getAttribute=function(V){return this._attributes[V]},he.getAttributes=function(){return this._attributes},he.hasAttribute=function(V){return this._attributes.hasOwnProperty(V)},he.setAttribute=function(V,ne){return this._attributes[V]=ne,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},he.updateAttribute=function(V,ne){if("function"!=typeof ne)throw new Me("Graph.updateAttribute: updater should be a function.");return this._attributes[V]=ne(this._attributes[V]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},he.removeAttribute=function(V){return delete this._attributes[V],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:V}),this},he.replaceAttributes=function(V){if(!O(V))throw new Me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=V,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},he.mergeAttributes=function(V){if(!O(V))throw new Me("Graph.mergeAttributes: provided attributes are not a plain object.");return v(this._attributes,V),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:V}),this},he.getNodeAttribute=function(V,ne){var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.getNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return be.attributes[ne]},he.getNodeAttributes=function(V){var ne=this._nodes.get(V=""+V);if(!ne)throw new Ue('Graph.getNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));return ne.attributes},he.hasNodeAttribute=function(V,ne){var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return be.attributes.hasOwnProperty(ne)},he.setNodeAttribute=function(V,ne,be){var Fe=this._nodes.get(V=""+V);if(!Fe)throw new Ue('Graph.setNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new Me("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Fe.attributes[ne]=be,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Fe.attributes,name:ne}),this},he.updateNodeAttribute=function(V,ne,be){var Fe=this._nodes.get(V=""+V);if(!Fe)throw new Ue('Graph.updateNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new Me("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof be)throw new Me("Graph.updateAttribute: updater should be a function.");var ke=Fe.attributes,ct=be(ke[ne]);return ke[ne]=ct,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Fe.attributes,name:ne}),this},he.removeNodeAttribute=function(V,ne){var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return delete be.attributes[ne],this.emit("nodeAttributesUpdated",{key:V,type:"remove",attributes:be.attributes,name:ne}),this},he.replaceNodeAttributes=function(V,ne){var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.replaceNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!O(ne))throw new Me("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return be.attributes=ne,this.emit("nodeAttributesUpdated",{key:V,type:"replace",attributes:be.attributes}),this},he.mergeNodeAttributes=function(V,ne){var be=this._nodes.get(V=""+V);if(!be)throw new Ue('Graph.mergeNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!O(ne))throw new Me("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return v(be.attributes,ne),this.emit("nodeAttributesUpdated",{key:V,type:"merge",attributes:be.attributes,data:ne}),this},he.updateEachNodeAttributes=function(V,ne){if("function"!=typeof V)throw new Me("Graph.updateEachNodeAttributes: expecting an updater function.");if(ne&&!F(ne))throw new Me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var be,Fe,ke=this._nodes.values();!0!==(be=ke.next()).done;)(Fe=be.value).attributes=V(Fe.key,Fe.attributes);this.emit("eachNodeAttributesUpdated",{hints:ne||null})},he.updateEachEdgeAttributes=function(V,ne){if("function"!=typeof V)throw new Me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(ne&&!F(ne))throw new Me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var be,Fe,ke=this._edges.values();!0!==(be=ke.next()).done;)(Fe=be.value).attributes=V(Fe.key,Fe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:ne||null})},he.forEach=function(V){if("function"!=typeof V)throw new Me("Graph.forEach: expecting a callback.");this.multi?Xe(!1,this,V):$e(!1,this,V)},he.forEachUntil=function(V){if("function"!=typeof V)throw new Me("Graph.forEach: expecting a callback.");this.multi?Xe(!0,this,V):$e(!0,this,V)},he.adjacency=function(){return this.multi?(ct=(V=this)._nodes.values(),Dt=V.type,Ft="outer",Gt=null,new qe(function hn(){var gn;if("outer"===Ft)return!0===(gn=ct.next()).done?gn:(ne=gn.value,Ft="directed",hn());if("directed"===Ft)return"undirected"===Dt?(Ft="undirected",hn()):(Fe=ne.out,be=Object.keys(ne.out),ke=0,Ft="inner-directed",hn());if("undirected"===Ft){if("directed"===Dt)return Ft="outer",hn();Fe=ne.undirected,be=Object.keys(ne.undirected),ke=0,Ft="inner-undirected"}if(!Gt&&ke>=be.length)return Ft="inner-undirected"===Ft?"outer":"undirected",hn();if(!Gt){var Xr=be[ke++];return Gt=Fe[Xr].values(),hn()}if((gn=Gt.next()).done)return Gt=null,hn();var zr=gn.value,yn=zr.target;return"inner-undirected"===Ft&&yn.key===ne.key&&(yn=zr.source),{done:!1,value:[ne.key,yn.key,ne.attributes,yn.attributes,zr.key,zr.attributes]}})):(hi=(hn=this)._nodes.values(),Qa=hn.type,oo="outer",new qe(function rs(){var ud;if("outer"===oo)return!0===(ud=hi.next()).done?ud:(gn=ud.value,oo="directed",rs());if("directed"===oo)return"undirected"===Qa?(oo="undirected",rs()):(zr=gn.out,Xr=Object.keys(gn.out),yn=0,oo="inner-directed",rs());if("undirected"===oo){if("directed"===Qa)return oo="outer",rs();zr=gn.undirected,Xr=Object.keys(gn.undirected),yn=0,oo="inner-undirected"}if(yn>=Xr.length)return oo="inner-undirected"===oo?"outer":"undirected",rs();var hd=Xr[yn++],xs=zr[hd],Hr=xs.target;return"inner-undirected"===oo&&Hr.key===gn.key&&(Hr=xs.source),{done:!1,value:[gn.key,Hr.key,gn.attributes,Hr.attributes,xs.key,xs.attributes]}}));var hn,gn,Xr,zr,yn,hi,Qa,oo,V,ne,be,Fe,ke,ct,Dt,Ft,Gt},he.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Te(this._nodes.keys(),this._nodes.size)},he.forEachNode=function(V){if("function"!=typeof V)throw new Me("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(ne,be){V(be,ne.attributes)})},he.forEachNodeUntil=function(V){if("function"!=typeof V)throw new Me("Graph.forEachNode: expecting a callback.");for(var ne,be,Fe=this._nodes.values();!0!==(ne=Fe.next())&&!V((be=ne.value).key,be.attributes););},he.nodeEntries=function(){var V=this._nodes.values();return new qe(function(){var ne=V.next();if(ne.done)return ne;var be=ne.value;return{value:[be.key,be.attributes],done:!1}})},he.exportNode=function(V){var ne=this._nodes.get(V=""+V);if(!ne)throw new Ue('Graph.exportNode: could not find the "'.concat(V,'" node in the graph.'));return Wt(V,ne)},he.exportEdge=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new Ue('Graph.exportEdge: could not find the "'.concat(V,'" edge in the graph.'));return $t(V,ne)},he.export=function(){var V=new Array(this._nodes.size),ne=0;this._nodes.forEach(function(Fe,ke){V[ne++]=Wt(ke,Fe)});var be=new Array(this._edges.size);return ne=0,this._edges.forEach(function(Fe,ke){be[ne++]=$t(ke,Fe)}),{attributes:this.getAttributes(),nodes:V,edges:be,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},he.importNode=function(V){var ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=function dn(we){return O(we)?"key"in we?!("attributes"in we)||O(we.attributes)&&null!==we.attributes?null:"invalid-attributes":"no-key":"not-object"}(V);if(be){if("not-object"===be)throw new Me('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===be)throw new Me("Graph.importNode: no key provided.");if("invalid-attributes"===be)throw new Me("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Fe=V.key,ke=V.attributes,ct=void 0===ke?{}:ke;return ne?this.mergeNode(Fe,ct):this.addNode(Fe,ct),this},he.importEdge=function(V){var ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=function mr(we){return O(we)?"source"in we?"target"in we?!("attributes"in we)||O(we.attributes)&&null!==we.attributes?"undirected"in we&&"boolean"!=typeof we.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(V);if(be){if("not-object"===be)throw new Me('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===be)throw new Me("Graph.importEdge: missing souce.");if("no-target"===be)throw new Me("Graph.importEdge: missing target.");if("invalid-attributes"===be)throw new Me("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===be)throw new Me("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Fe=V.source,ke=V.target,ct=V.attributes,Dt=void 0===ct?{}:ct,Ft=V.undirected,Gt=void 0!==Ft&&Ft;return"key"in V?(ne?Gt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Gt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,V.key,Fe,ke,Dt):(ne?Gt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Gt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Fe,ke,Dt),this},he.import=function(V){var ne,be,Fe,ke=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function j(we){return null!==we&&"object"===q(we)&&"function"==typeof we.addUndirectedEdgeWithKey&&"function"==typeof we.dropNode}(V))return this.import(V.export(),ke),this;if(!O(V))throw new Me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(V.attributes){if(!O(V.attributes))throw new Me("Graph.import: invalid attributes. Expecting a plain object.");ke?this.mergeAttributes(V.attributes):this.replaceAttributes(V.attributes)}if(V.nodes){if(Fe=V.nodes,!Array.isArray(Fe))throw new Me("Graph.import: invalid nodes. Expecting an array.");for(ne=0,be=Fe.length;ne<be;ne++)this.importNode(Fe[ne],ke)}if(V.edges){if(Fe=V.edges,!Array.isArray(Fe))throw new Me("Graph.import: invalid edges. Expecting an array.");for(ne=0,be=Fe.length;ne<be;ne++)this.importEdge(Fe[ne],ke)}return this},he.nullCopy=function(V){return new Ee(v({},this._options,V))},he.emptyCopy=function(V){var ne=this.nullCopy(V);return this._nodes.forEach(function(be,Fe){var ke=v({},be.attributes);be=new ne.NodeDataClass(Fe,ke),ne._nodes.set(Fe,be)}),ne},he.copy=function(){var V=new Ee(this._options);return V.import(this),V},he.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(V){return V.upgradeToMixed()}),this._options.type="mixed",A(this,"type",this._options.type),Q(this,"NodeDataClass",Ce)),this},he.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,A(this,"multi",!0),(V=this)._nodes.forEach(function(ne,be){if(ne.out)for(var Fe in ne.out){var ke=new Set;ke.add(ne.out[Fe]),ne.out[Fe]=ke,V._nodes.get(Fe).in[be]=ke}if(ne.undirected)for(var ct in ne.undirected)if(!(ct>be)){var Dt=new Set;Dt.add(ne.undirected[ct]),ne.undirected[ct]=Dt,V._nodes.get(ct).undirected[be]=Dt}})),this;var V},he.clearIndex=function(){return this._nodes.forEach(function(V){void 0!==V.in&&(V.in={},V.out={}),void 0!==V.undirected&&(V.undirected={})}),this},he.toJSON=function(){return this.export()},he.toString=function(){return"[object Graph]"},he.inspect=function(){var V=this,ne={};this._nodes.forEach(function(Dt,Ft){ne[Ft]=Dt.attributes});var be={},Fe={};this._edges.forEach(function(Dt,Ft){var Gt=Dt.undirected?"--":"->",hn="",gn="(".concat(Dt.source.key,")").concat(Gt,"(").concat(Dt.target.key,")");Dt.generatedKey?V.multi&&(void 0===Fe[gn]?Fe[gn]=0:Fe[gn]++,hn+="".concat(Fe[gn],". ")):hn+="[".concat(Ft,"]: "),be[hn+=gn]=Dt.attributes});var ke={};for(var ct in this)this.hasOwnProperty(ct)&&!Ma.has(ct)&&"function"!=typeof this[ct]&&(ke[ct]=this[ct]);return ke.attributes=this._attributes,ke.nodes=ne,ke.edges=be,Q(ke,"constructor",this.constructor),ke},Ee}(K.exports.EventEmitter);typeof Symbol<"u"&&(Ei.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ei.prototype.inspect),[{name:function(we){return"".concat(we,"Edge")},generateKey:!0},{name:function(we){return"".concat(we,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(we){return"".concat(we,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(we){return"".concat(we,"EdgeWithKey")}},{name:function(we){return"".concat(we,"DirectedEdgeWithKey")},type:"directed"},{name:function(we){return"".concat(we,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(we){["add","merge","update"].forEach(function(Ee){var he=we.name(Ee),V="add"===Ee?Ti:_i;Ei.prototype[he]=we.generateKey?function(ne,be,Fe){return V(this,he,!0,"undirected"===(we.type||this.type),null,ne,be,Fe,"update"===Ee)}:function(ne,be,Fe,ke){return V(this,he,!1,"undirected"===(we.type||this.type),ne,be,Fe,ke,"update"===Ee)}})}),typeof Symbol<"u"&&(Ei.prototype[Symbol.iterator]=Ei.prototype.adjacency),we=Ei,I.forEach(function(Ee){var he=Ee.name,V=Ee.attacher;V(we,he("Edge"),"mixed"),V(we,he("DirectedEdge"),"directed"),V(we,he("UndirectedEdge"),"undirected")}),function(we){Ge.forEach(function(Ee){var V,ne,be,Fe;be=(V=Ee).type,Fe=V.direction,we.prototype[ne=V.name]=function(ke,ct){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return[];if(!arguments.length)return function Xt(we,Ee){if(0===we.size)return[];if("mixed"===Ee||Ee===we.type)return"function"==typeof Array.from?Array.from(we._edges.keys()):Te(we._edges.keys(),we._edges.size);for(var he,V,be=new Array("undirected"===Ee?we.undirectedSize:we.directedSize),Fe="undirected"===Ee,ke=we._edges.values(),ct=0;!0!==(he=ke.next()).done;)(V=he.value).undirected===Fe&&(be[ct++]=V.key);return be}(this,be);if(1===arguments.length){var Dt=this._nodes.get(ke=""+ke);if(void 0===Dt)throw new Ue("Graph.".concat(ne,': could not find the "').concat(ke,'" node in the graph.'));return function Be(we,Ee,he,V){var ne=[],be=we?pe:Ze;return"undirected"!==Ee&&("out"!==he&&be(ne,V.in),"in"!==he&&be(ne,V.out),!he&&V.directedSelfLoops>0&&ne.splice(ne.lastIndexOf(V.key),1)),"directed"!==Ee&&be(ne,V.undirected),ne}(this.multi,"mixed"===be?this.type:be,Fe,Dt)}if(2===arguments.length){ct=""+ct;var Ft=this._nodes.get(ke=""+ke);if(!Ft)throw new Ue("Graph.".concat(ne,':  could not find the "').concat(ke,'" source node in the graph.'));if(!this._nodes.has(ct))throw new Ue("Graph.".concat(ne,':  could not find the "').concat(ct,'" target node in the graph.'));return function ln(we,Ee,he,V,ne){var be=Ee?ye:Ye,Fe=[];return"undirected"!==we&&(void 0!==V.in&&"out"!==he&&be(Fe,V.in,ne),void 0!==V.out&&"in"!==he&&be(Fe,V.out,ne),!he&&V.directedSelfLoops>0&&Fe.splice(Fe.lastIndexOf(V.key),1)),"directed"!==we&&void 0!==V.undirected&&be(Fe,V.undirected,ne),Fe}(be,this.multi,Fe,Ft,ct)}throw new Me("Graph.".concat(ne,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(he,V){var ne=V.name,be=V.type,Fe=V.direction,ke="forEach"+ne[0].toUpperCase()+ne.slice(1,-1);he.prototype[ke]=function(ct,Dt,Ft){if("mixed"===be||"mixed"===this.type||be===this.type){if(1===arguments.length)return function _e(we,Ee,he){if(0!==we.size)for(var V,ne,be="mixed"!==Ee&&Ee!==we.type,Fe="undirected"===Ee,ke=we._edges.values();!0!==(V=ke.next()).done;)if(ne=V.value,!be||ne.undirected===Fe){var Gt=ne.source,hn=ne.target;he(ne.key,ne.attributes,Gt.key,hn.key,Gt.attributes,hn.attributes,ne.undirected,ne.generatedKey)}}(this,be,Ft=ct);if(2===arguments.length){Ft=Dt;var Gt=this._nodes.get(ct=""+ct);if(void 0===Gt)throw new Ue("Graph.".concat(ke,': could not find the "').concat(ct,'" node in the graph.'));return function tt(we,Ee,he,V,ne){var be=we?Y:re;"undirected"!==Ee&&("out"!==he&&be(V.in,ne),"in"!==he&&be(V.out,ne,he?null:V.key)),"directed"!==Ee&&be(V.undirected,ne)}(this.multi,"mixed"===be?this.type:be,Fe,Gt,Ft)}if(3===arguments.length){Dt=""+Dt;var hn=this._nodes.get(ct=""+ct);if(!hn)throw new Ue("Graph.".concat(ke,':  could not find the "').concat(ct,'" source node in the graph.'));if(!this._nodes.has(Dt))throw new Ue("Graph.".concat(ke,':  could not find the "').concat(Dt,'" target node in the graph.'));return function Fn(we,Ee,he,V,ne,be){var Fe=Ee?st:ze;"undirected"!==we&&(void 0!==V.in&&"out"!==he&&Fe(V.in,ne,be),V.key!==ne&&void 0!==V.out&&"in"!==he&&Fe(V.out,ne,be)),"directed"!==we&&void 0!==V.undirected&&Fe(V.undirected,ne,be)}(be,this.multi,Fe,hn,Dt,Ft)}throw new Me("Graph.".concat(ke,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(we,Ee),function(he,V){var ne=V.name,be=V.type,Fe=V.direction,ke="forEach"+ne[0].toUpperCase()+ne.slice(1,-1)+"Until";he.prototype[ke]=function(ct,Dt,Ft){if("mixed"===be||"mixed"===this.type||be===this.type){if(1===arguments.length)return function X(we,Ee,he){if(0!==we.size)for(var V,ne,be="mixed"!==Ee&&Ee!==we.type,Fe="undirected"===Ee,ke=we._edges.values();!0!==(V=ke.next()).done;)if(ne=V.value,!be||ne.undirected===Fe){var Gt=ne.source,hn=ne.target;if(he(ne.key,ne.attributes,Gt.key,hn.key,Gt.attributes,hn.attributes,ne.undirected,ne.generatedKey))break}}(this,be,Ft=ct);if(2===arguments.length){Ft=Dt;var Gt=this._nodes.get(ct=""+ct);if(void 0===Gt)throw new Ue("Graph.".concat(ke,': could not find the "').concat(ct,'" node in the graph.'));return function dt(we,Ee,he,V,ne){var be=we?U:N;"undirected"!==Ee&&("out"!==he&&be(V.in,ne)||"in"!==he&&be(V.out,ne,he?null:V.key))||"directed"===Ee||be(V.undirected,ne)}(this.multi,"mixed"===be?this.type:be,Fe,Gt,Ft)}if(3===arguments.length){Dt=""+Dt;var hn=this._nodes.get(ct=""+ct);if(!hn)throw new Ue("Graph.".concat(ke,':  could not find the "').concat(ct,'" source node in the graph.'));if(!this._nodes.has(Dt))throw new Ue("Graph.".concat(ke,':  could not find the "').concat(Dt,'" target node in the graph.'));return function Gn(we,Ee,he,V,ne,be){var Fe=Ee?At:bt;"undirected"!==we&&(void 0!==V.in&&"out"!==he&&Fe(V.in,ne,be)||V.key!==ne&&void 0!==V.out&&"in"!==he&&Fe(V.out,ne,be,he?null:V.key))||"directed"===we||void 0===V.undirected||Fe(V.undirected,ne,be)}(be,this.multi,Fe,hn,Dt,Ft)}throw new Me("Graph.".concat(ke,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(we,Ee),function(he,V){var be=V.type,Fe=V.direction,ke=V.name.slice(0,-1)+"Entries";he.prototype[ke]=function(ct,Dt){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return qe.empty();if(!arguments.length)return function oe(we,Ee){if(0===we.size)return qe.empty();var he="mixed"!==Ee&&Ee!==we.type,V="undirected"===Ee,ne=we._edges.values();return new qe(function(){for(var be,Fe;;){if((be=ne.next()).done)return be;if(Fe=be.value,!he||Fe.undirected===V)break}return{value:[Fe.key,Fe.attributes,Fe.source.key,Fe.target.key,Fe.source.attributes,Fe.target.attributes],done:!1}})}(this,be);if(1===arguments.length){var Ft=this._nodes.get(ct=""+ct);if(!Ft)throw new Ue("Graph.".concat(ke,': could not find the "').concat(ct,'" node in the graph.'));return function Et(we,Ee,he){var V=qe.empty();return"undirected"!==we&&("out"!==Ee&&void 0!==he.in&&(V=ie(V,me(he.in))),"in"!==Ee&&void 0!==he.out&&(V=ie(V,me(he.out,Ee?null:he.key)))),"directed"!==we&&void 0!==he.undirected&&(V=ie(V,me(he.undirected))),V}(be,Fe,Ft)}if(2===arguments.length){Dt=""+Dt;var Gt=this._nodes.get(ct=""+ct);if(!Gt)throw new Ue("Graph.".concat(ke,':  could not find the "').concat(ct,'" source node in the graph.'));if(!this._nodes.has(Dt))throw new Ue("Graph.".concat(ke,':  could not find the "').concat(Dt,'" target node in the graph.'));return function kn(we,Ee,he,V){var ne=qe.empty();return"undirected"!==we&&(void 0!==he.in&&"out"!==Ee&&V in he.in&&(ne=ie(ne,xt(he.in,V))),void 0!==he.out&&"in"!==Ee&&V in he.out&&(ne=ie(ne,xt(he.out,V)))),"directed"!==we&&void 0!==he.undirected&&V in he.undirected&&(ne=ie(ne,xt(he.undirected,V))),ne}(be,Fe,Gt,Dt)}throw new Me("Graph.".concat(ke,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(we,Ee)})}(Ei),function(we){Bn.forEach(function(Ee){var V,ne,be,Fe;be=(V=Ee).type,Fe=V.direction,we.prototype[ne=V.name]=function(ke){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return[];if(2===arguments.length){var ct=""+arguments[0],Dt=""+arguments[1];if(!this._nodes.has(ct))throw new Ue("Graph.".concat(ne,': could not find the "').concat(ct,'" node in the graph.'));if(!this._nodes.has(Dt))throw new Ue("Graph.".concat(ne,': could not find the "').concat(Dt,'" node in the graph.'));return function al(we,Ee,he,V,ne){var be=we._nodes.get(V);if("undirected"!==Ee){if("out"!==he&&void 0!==be.in)for(var Fe in be.in)if(Fe===ne)return!0;if("in"!==he&&void 0!==be.out)for(var ke in be.out)if(ke===ne)return!0}if("directed"!==Ee&&void 0!==be.undirected)for(var ct in be.undirected)if(ct===ne)return!0;return!1}(this,be,Fe,ct,Dt)}if(1===arguments.length){var Ft=this._nodes.get(ke=""+ke);if(void 0===Ft)throw new Ue("Graph.".concat(ne,': could not find the "').concat(ke,'" node in the graph.'));return function aa(we,Ee,he){if("mixed"!==we){if("undirected"===we)return Object.keys(he.undirected);if("string"==typeof Ee)return Object.keys(he[Ee])}var V=new Set;return"undirected"!==we&&("out"!==Ee&&Wi(V,he.in),"in"!==Ee&&Wi(V,he.out)),"directed"!==we&&Wi(V,he.undirected),Te(V.values(),V.size)}("mixed"===be?this.type:be,Fe,Ft)}throw new Me("Graph.".concat(ne,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Za(we,Ee){var he=Ee.name,V=Ee.type,ne=Ee.direction,be="forEach"+he[0].toUpperCase()+he.slice(1,-1);we.prototype[be]=function(Fe,ke){if("mixed"===V||"mixed"===this.type||V===this.type){var ct=this._nodes.get(Fe=""+Fe);if(void 0===ct)throw new Ue("Graph.".concat(be,': could not find the "').concat(Fe,'" node in the graph.'));!function(Dt,Ft,Gt,hn){if("mixed"!==Dt){if("undirected"===Dt)return pr(Gt,Gt.undirected,hn);if("string"==typeof Ft)return pr(Gt,Gt[Ft],hn)}var gn=new Set;"undirected"!==Dt&&("out"!==Ft&&Bo(gn,Gt,Gt.in,hn),"in"!==Ft&&Bo(gn,Gt,Gt.out,hn)),"directed"!==Dt&&Bo(gn,Gt,Gt.undirected,hn)}("mixed"===V?this.type:V,ne,ct,ke)}}}(we,Ee),function Vo(we,Ee){var he=Ee.name,V=Ee.type,ne=Ee.direction,be="forEach"+he[0].toUpperCase()+he.slice(1,-1)+"Until";we.prototype[be]=function(Fe,ke){if("mixed"===V||"mixed"===this.type||V===this.type){var ct=this._nodes.get(Fe=""+Fe);if(void 0===ct)throw new Ue("Graph.".concat(be,': could not find the "').concat(Fe,'" node in the graph.'));!function(Dt,Ft,Gt,hn){if("mixed"!==Dt){if("undirected"===Dt)return jo(Gt,Gt.undirected,hn);if("string"==typeof Ft)return jo(Gt,Gt[Ft],hn)}var gn=new Set;"undirected"!==Dt&&("out"!==Ft&&Vi(gn,Gt,Gt.in,hn)||"in"!==Ft&&Vi(gn,Gt,Gt.out,hn))||"directed"===Dt||Vi(gn,Gt,Gt.undirected,hn)}("mixed"===V?this.type:V,ne,ct,ke)}}}(we,Ee),function cl(we,Ee){var V=Ee.type,ne=Ee.direction,be=Ee.name.slice(0,-1)+"Entries";we.prototype[be]=function(Fe){if("mixed"!==V&&"mixed"!==this.type&&V!==this.type)return qe.empty();var ke=this._nodes.get(Fe=""+Fe);if(void 0===ke)throw new Ue("Graph.".concat(be,': could not find the "').concat(Fe,'" node in the graph.'));return function(ct,Dt,Ft){if("mixed"!==ct){if("undirected"===ct)return Uo(Ft,Ft.undirected);if("string"==typeof Dt)return Uo(Ft,Ft[Dt])}var Gt=qe.empty(),hn=new Set;return"undirected"!==ct&&("out"!==Dt&&(Gt=ie(Gt,js(hn,Ft,Ft.in))),"in"!==Dt&&(Gt=ie(Gt,js(hn,Ft,Ft.out)))),"directed"!==ct&&(Gt=ie(Gt,js(hn,Ft,Ft.undirected))),Gt}("mixed"===V?this.type:V,ne,ke)}}(we,Ee)})}(Ei);var en=function(we){function Ee(he){var V=v({type:"directed"},he);if("multi"in V&&!1!==V.multi)throw new Me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==V.type)throw new Me('DirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return we.call(this,V)||this}return g(Ee,we),Ee}(Ei),qn=function(we){function Ee(he){var V=v({type:"undirected"},he);if("multi"in V&&!1!==V.multi)throw new Me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==V.type)throw new Me('UndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return we.call(this,V)||this}return g(Ee,we),Ee}(Ei),Io=function(we){function Ee(he){var V=v({multi:!0},he);if("multi"in V&&!0!==V.multi)throw new Me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return we.call(this,V)||this}return g(Ee,we),Ee}(Ei),Ai=function(we){function Ee(he){var V=v({type:"directed",multi:!0},he);if("multi"in V&&!0!==V.multi)throw new Me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==V.type)throw new Me('MultiDirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return we.call(this,V)||this}return g(Ee,we),Ee}(Ei),ro=function(we){function Ee(he){var V=v({type:"undirected",multi:!0},he);if("multi"in V&&!0!==V.multi)throw new Me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==V.type)throw new Me('MultiUndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return we.call(this,V)||this}return g(Ee,we),Ee}(Ei);function gr(we){we.from=function(Ee,he){var V=v({},Ee.options,he),ne=new we(V);return ne.import(Ee),ne}}return gr(Ei),gr(en),gr(qn),gr(Io),gr(Ai),gr(ro),Ei.Graph=Ei,Ei.DirectedGraph=en,Ei.UndirectedGraph=qn,Ei.MultiGraph=Io,Ei.MultiDirectedGraph=Ai,Ei.MultiUndirectedGraph=ro,Ei.InvalidArgumentsGraphError=Me,Ei.NotFoundGraphError=Ue,Ei.UsageGraphError=fe,Ei}()},7271:(ee,q,g)=>{var M;!function(y,D,C,R){"use strict";var K,_=["","webkit","Moz","MS","ms","o"],v=D.createElement("div"),T="function",j=Math.round,O=Math.abs,B=Date.now;function Q(Re,Ve,it){return setTimeout(H(Re,it),Ve)}function A(Re,Ve,it){return!!Array.isArray(Re)&&(F(Re,it[Ve],it),!0)}function F(Re,Ve,it){var vt;if(Re)if(Re.forEach)Re.forEach(Ve,it);else if(Re.length!==R)for(vt=0;vt<Re.length;)Ve.call(it,Re[vt],vt,Re),vt++;else for(vt in Re)Re.hasOwnProperty(vt)&&Ve.call(it,Re[vt],vt,Re)}function ce(Re,Ve,it){var vt="DEPRECATED METHOD: "+Ve+"\n"+it+" AT \n";return function(){var Vt=new Error("get-stack-trace"),an=Vt&&Vt.stack?Vt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",si=y.console&&(y.console.warn||y.console.log);return si&&si.call(y.console,vt,an),Re.apply(this,arguments)}}K="function"!=typeof Object.assign?function(Ve){if(Ve===R||null===Ve)throw new TypeError("Cannot convert undefined or null to object");for(var it=Object(Ve),vt=1;vt<arguments.length;vt++){var Vt=arguments[vt];if(Vt!==R&&null!==Vt)for(var an in Vt)Vt.hasOwnProperty(an)&&(it[an]=Vt[an])}return it}:Object.assign;var J=ce(function(Ve,it,vt){for(var Vt=Object.keys(it),an=0;an<Vt.length;)(!vt||vt&&Ve[Vt[an]]===R)&&(Ve[Vt[an]]=it[Vt[an]]),an++;return Ve},"extend","Use `assign`."),Z=ce(function(Ve,it){return J(Ve,it,!0)},"merge","Use `assign`.");function $(Re,Ve,it){var Vt,vt=Ve.prototype;(Vt=Re.prototype=Object.create(vt)).constructor=Re,Vt._super=vt,it&&K(Vt,it)}function H(Re,Ve){return function(){return Re.apply(Ve,arguments)}}function w(Re,Ve){return typeof Re==T?Re.apply(Ve&&Ve[0]||R,Ve):Re}function P(Re,Ve){return Re===R?Ve:Re}function k(Re,Ve,it){F(le(Ve),function(vt){Re.addEventListener(vt,it,!1)})}function de(Re,Ve,it){F(le(Ve),function(vt){Re.removeEventListener(vt,it,!1)})}function G(Re,Ve){for(;Re;){if(Re==Ve)return!0;Re=Re.parentNode}return!1}function Ie(Re,Ve){return Re.indexOf(Ve)>-1}function le(Re){return Re.trim().split(/\s+/g)}function ve(Re,Ve,it){if(Re.indexOf&&!it)return Re.indexOf(Ve);for(var vt=0;vt<Re.length;){if(it&&Re[vt][it]==Ve||!it&&Re[vt]===Ve)return vt;vt++}return-1}function Oe(Re){return Array.prototype.slice.call(Re,0)}function Le(Re,Ve,it){for(var vt=[],Vt=[],an=0;an<Re.length;){var si=Ve?Re[an][Ve]:Re[an];ve(Vt,si)<0&&vt.push(Re[an]),Vt[an]=si,an++}return it&&(vt=Ve?vt.sort(function(qr,zo){return qr[Ve]>zo[Ve]}):vt.sort()),vt}function Qe(Re,Ve){for(var it,vt,Vt=Ve[0].toUpperCase()+Ve.slice(1),an=0;an<_.length;){if((vt=(it=_[an])?it+Vt:Ve)in Re)return vt;an++}return R}var qe=1;function He(Re){var Ve=Re.ownerDocument||Re;return Ve.defaultView||Ve.parentWindow||y}var Ue="ontouchstart"in y,fe=Qe(y,"PointerEvent")!==R,Ce=Ue&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nt="touch",Je="mouse",L=25,I=1,ie=4,Ge=8,Ze=1,pe=2,re=4,Y=8,N=16,U=pe|re,me=Y|N,Ye=U|me,ye=["x","y"],ze=["clientX","clientY"];function st(Re,Ve){var it=this;this.manager=Re,this.callback=Ve,this.element=Re.element,this.target=Re.options.inputTarget,this.domHandler=function(vt){w(Re.options.enable,[Re])&&it.handler(vt)},this.init()}function At(Re,Ve,it){var vt=it.pointers.length,Vt=it.changedPointers.length,an=Ve&I&&vt-Vt==0,si=Ve&(ie|Ge)&&vt-Vt==0;it.isFirst=!!an,it.isFinal=!!si,an&&(Re.session={}),it.eventType=Ve,function xt(Re,Ve){var it=Re.session,vt=Ve.pointers,Vt=vt.length;it.firstInput||(it.firstInput=X(Ve)),Vt>1&&!it.firstMultiple?it.firstMultiple=X(Ve):1===Vt&&(it.firstMultiple=!1);var an=it.firstInput,si=it.firstMultiple,Kr=si?si.center:an.center,qr=Ve.center=oe(vt);Ve.timeStamp=B(),Ve.deltaTime=Ve.timeStamp-an.timeStamp,Ve.angle=Et(Kr,qr),Ve.distance=dt(Kr,qr),function Xt(Re,Ve){var it=Ve.center,vt=Re.offsetDelta||{},Vt=Re.prevDelta||{},an=Re.prevInput||{};(Ve.eventType===I||an.eventType===ie)&&(Vt=Re.prevDelta={x:an.deltaX||0,y:an.deltaY||0},vt=Re.offsetDelta={x:it.x,y:it.y}),Ve.deltaX=Vt.x+(it.x-vt.x),Ve.deltaY=Vt.y+(it.y-vt.y)}(it,Ve),Ve.offsetDirection=tt(Ve.deltaX,Ve.deltaY);var zo=Be(Ve.deltaTime,Ve.deltaX,Ve.deltaY);Ve.overallVelocityX=zo.x,Ve.overallVelocityY=zo.y,Ve.overallVelocity=O(zo.x)>O(zo.y)?zo.x:zo.y,Ve.scale=si?function Fn(Re,Ve){return dt(Ve[0],Ve[1],ze)/dt(Re[0],Re[1],ze)}(si.pointers,vt):1,Ve.rotation=si?function ln(Re,Ve){return Et(Ve[1],Ve[0],ze)+Et(Re[1],Re[0],ze)}(si.pointers,vt):0,Ve.maxPointers=it.prevInput?Ve.pointers.length>it.prevInput.maxPointers?Ve.pointers.length:it.prevInput.maxPointers:Ve.pointers.length,function _e(Re,Ve){var Vt,an,si,Kr,it=Re.lastInterval||Ve,vt=Ve.timeStamp-it.timeStamp;if(Ve.eventType!=Ge&&(vt>L||it.velocity===R)){var qr=Ve.deltaX-it.deltaX,zo=Ve.deltaY-it.deltaY,lr=Be(vt,qr,zo);an=lr.x,si=lr.y,Vt=O(lr.x)>O(lr.y)?lr.x:lr.y,Kr=tt(qr,zo),Re.lastInterval=Ve}else Vt=it.velocity,an=it.velocityX,si=it.velocityY,Kr=it.direction;Ve.velocity=Vt,Ve.velocityX=an,Ve.velocityY=si,Ve.direction=Kr}(it,Ve);var lr=Re.element;G(Ve.srcEvent.target,lr)&&(lr=Ve.srcEvent.target),Ve.target=lr}(Re,it),Re.emit("hammer.input",it),Re.recognize(it),Re.session.prevInput=it}function X(Re){for(var Ve=[],it=0;it<Re.pointers.length;)Ve[it]={clientX:j(Re.pointers[it].clientX),clientY:j(Re.pointers[it].clientY)},it++;return{timeStamp:B(),pointers:Ve,center:oe(Ve),deltaX:Re.deltaX,deltaY:Re.deltaY}}function oe(Re){var Ve=Re.length;if(1===Ve)return{x:j(Re[0].clientX),y:j(Re[0].clientY)};for(var it=0,vt=0,Vt=0;Vt<Ve;)it+=Re[Vt].clientX,vt+=Re[Vt].clientY,Vt++;return{x:j(it/Ve),y:j(vt/Ve)}}function Be(Re,Ve,it){return{x:Ve/Re||0,y:it/Re||0}}function tt(Re,Ve){return Re===Ve?Ze:O(Re)>=O(Ve)?Re<0?pe:re:Ve<0?Y:N}function dt(Re,Ve,it){it||(it=ye);var vt=Ve[it[0]]-Re[it[0]],Vt=Ve[it[1]]-Re[it[1]];return Math.sqrt(vt*vt+Vt*Vt)}function Et(Re,Ve,it){return it||(it=ye),180*Math.atan2(Ve[it[1]]-Re[it[1]],Ve[it[0]]-Re[it[0]])/Math.PI}st.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(He(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&de(this.element,this.evEl,this.domHandler),this.evTarget&&de(this.target,this.evTarget,this.domHandler),this.evWin&&de(He(this.element),this.evWin,this.domHandler)}};var Gn={mousedown:I,mousemove:2,mouseup:ie},kn="mousedown",Bn="mousemove mouseup";function Wi(){this.evEl=kn,this.evWin=Bn,this.pressed=!1,st.apply(this,arguments)}$(Wi,st,{handler:function(Ve){var it=Gn[Ve.type];it&I&&0===Ve.button&&(this.pressed=!0),2&it&&1!==Ve.which&&(it=ie),this.pressed&&(it&ie&&(this.pressed=!1),this.callback(this.manager,it,{pointers:[Ve],changedPointers:[Ve],pointerType:Je,srcEvent:Ve}))}});var aa={pointerdown:I,pointermove:2,pointerup:ie,pointercancel:Ge,pointerout:Ge},pr={2:nt,3:"pen",4:Je,5:"kinect"},Bo="pointerdown",jo="pointermove pointerup pointercancel";function Vi(){this.evEl=Bo,this.evWin=jo,st.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y.MSPointerEvent&&!y.PointerEvent&&(Bo="MSPointerDown",jo="MSPointerMove MSPointerUp MSPointerCancel"),$(Vi,st,{handler:function(Ve){var it=this.store,vt=!1,Vt=Ve.type.toLowerCase().replace("ms",""),an=aa[Vt],si=pr[Ve.pointerType]||Ve.pointerType,Kr=si==nt,qr=ve(it,Ve.pointerId,"pointerId");an&I&&(0===Ve.button||Kr)?qr<0&&(it.push(Ve),qr=it.length-1):an&(ie|Ge)&&(vt=!0),!(qr<0)&&(it[qr]=Ve,this.callback(this.manager,an,{pointers:it,changedPointers:[Ve],pointerType:si,srcEvent:Ve}),vt&&it.splice(qr,1))}});var Uo={touchstart:I,touchmove:2,touchend:ie,touchcancel:Ge};function Za(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,st.apply(this,arguments)}function Vo(Re,Ve){var it=Oe(Re.touches),vt=Oe(Re.changedTouches);return Ve&(ie|Ge)&&(it=Le(it.concat(vt),"identifier",!0)),[it,vt]}$(Za,st,{handler:function(Ve){var it=Uo[Ve.type];if(it===I&&(this.started=!0),this.started){var vt=Vo.call(this,Ve,it);it&(ie|Ge)&&vt[0].length-vt[1].length==0&&(this.started=!1),this.callback(this.manager,it,{pointers:vt[0],changedPointers:vt[1],pointerType:nt,srcEvent:Ve})}}});var cl={touchstart:I,touchmove:2,touchend:ie,touchcancel:Ge},$e="touchstart touchmove touchend touchcancel";function Xe(){this.evTarget=$e,this.targetIds={},st.apply(this,arguments)}function Wt(Re,Ve){var it=Oe(Re.touches),vt=this.targetIds;if(Ve&(2|I)&&1===it.length)return vt[it[0].identifier]=!0,[it,it];var Vt,an,si=Oe(Re.changedTouches),Kr=[],qr=this.target;if(an=it.filter(function(zo){return G(zo.target,qr)}),Ve===I)for(Vt=0;Vt<an.length;)vt[an[Vt].identifier]=!0,Vt++;for(Vt=0;Vt<si.length;)vt[si[Vt].identifier]&&Kr.push(si[Vt]),Ve&(ie|Ge)&&delete vt[si[Vt].identifier],Vt++;return Kr.length?[Le(an.concat(Kr),"identifier",!0),Kr]:void 0}$(Xe,st,{handler:function(Ve){var it=cl[Ve.type],vt=Wt.call(this,Ve,it);vt&&this.callback(this.manager,it,{pointers:vt[0],changedPointers:vt[1],pointerType:nt,srcEvent:Ve})}});var $t=2500;function mr(){st.apply(this,arguments);var Re=H(this.handler,this);this.touch=new Xe(this.manager,Re),this.mouse=new Wi(this.manager,Re),this.primaryTouch=null,this.lastTouches=[]}function Yt(Re,Ve){Re&I?(this.primaryTouch=Ve.changedPointers[0].identifier,Ma.call(this,Ve)):Re&(ie|Ge)&&Ma.call(this,Ve)}function Ma(Re){var Ve=Re.changedPointers[0];if(Ve.identifier===this.primaryTouch){var it={x:Ve.clientX,y:Ve.clientY};this.lastTouches.push(it);var vt=this.lastTouches;setTimeout(function(){var an=vt.indexOf(it);an>-1&&vt.splice(an,1)},$t)}}function Ni(Re){for(var Ve=Re.srcEvent.clientX,it=Re.srcEvent.clientY,vt=0;vt<this.lastTouches.length;vt++){var Vt=this.lastTouches[vt],an=Math.abs(Ve-Vt.x),si=Math.abs(it-Vt.y);if(an<=25&&si<=25)return!0}return!1}$(mr,st,{handler:function(Ve,it,vt){var an=vt.pointerType==Je;if(!(an&&vt.sourceCapabilities&&vt.sourceCapabilities.firesTouchEvents)){if(vt.pointerType==nt)Yt.call(this,it,vt);else if(an&&Ni.call(this,vt))return;this.callback(Ve,it,vt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ta=Qe(v.style,"touchAction"),Ti=Ta!==R,_i="compute",en="manipulation",qn="none",Io="pan-x",Ai="pan-y",ro=function Ee(){if(!Ti)return!1;var Re={},Ve=y.CSS&&y.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(it){Re[it]=!Ve||y.CSS.supports("touch-action",it)}),Re}();function gr(Re,Ve){this.manager=Re,this.set(Ve)}gr.prototype={set:function(Re){Re==_i&&(Re=this.compute()),Ti&&this.manager.element.style&&ro[Re]&&(this.manager.element.style[Ta]=Re),this.actions=Re.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Re=[];return F(this.manager.recognizers,function(Ve){w(Ve.options.enable,[Ve])&&(Re=Re.concat(Ve.getTouchAction()))}),function we(Re){if(Ie(Re,qn))return qn;var Ve=Ie(Re,Io),it=Ie(Re,Ai);return Ve&&it?qn:Ve||it?Ve?Io:Ai:Ie(Re,en)?en:"auto"}(Re.join(" "))},preventDefaults:function(Re){var Ve=Re.srcEvent,it=Re.offsetDirection;if(!this.manager.session.prevented){var vt=this.actions,Vt=Ie(vt,qn)&&!ro[qn],an=Ie(vt,Ai)&&!ro[Ai],si=Ie(vt,Io)&&!ro[Io];if(Vt&&1===Re.pointers.length&&Re.distance<2&&Re.deltaTime<250)return;return si&&an||!(Vt||an&&it&U||si&&it&me)?void 0:this.preventSrc(Ve)}Ve.preventDefault()},preventSrc:function(Re){this.manager.session.prevented=!0,Re.preventDefault()}};var he=1;function Dt(Re){this.options=K({},this.defaults,Re||{}),this.id=function Te(){return qe++}(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function Ft(Re){return 16&Re?"cancel":8&Re?"end":4&Re?"move":2&Re?"start":""}function Gt(Re){return Re==N?"down":Re==Y?"up":Re==pe?"left":Re==re?"right":""}function hn(Re,Ve){var it=Ve.manager;return it?it.get(Re):Re}function gn(){Dt.apply(this,arguments)}function Xr(){gn.apply(this,arguments),this.pX=null,this.pY=null}function zr(){gn.apply(this,arguments)}function yn(){Dt.apply(this,arguments),this._timer=null,this._input=null}function hi(){gn.apply(this,arguments)}function Qa(){gn.apply(this,arguments)}function oo(){Dt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rs(Re,Ve){return(Ve=Ve||{}).recognizers=P(Ve.recognizers,rs.defaults.preset),new xs(Re,Ve)}function xs(Re,Ve){this.options=K({},rs.defaults,Ve||{}),this.options.inputTarget=this.options.inputTarget||Re,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Re,this.input=function bt(Re){return new(Re.options.inputClass||(fe?Vi:Ce?Xe:Ue?mr:Wi))(Re,At)}(this),this.touchAction=new gr(this,this.options.touchAction),Hr(this,!0),F(this.options.recognizers,function(it){var vt=this.add(new it[0](it[1]));it[2]&&vt.recognizeWith(it[2]),it[3]&&vt.requireFailure(it[3])},this)}function Hr(Re,Ve){var vt,it=Re.element;it.style&&(F(Re.options.cssProps,function(Vt,an){vt=Qe(it.style,an),Ve?(Re.oldCssProps[vt]=it.style[vt],it.style[vt]=Vt):it.style[vt]=Re.oldCssProps[vt]||""}),Ve||(Re.oldCssProps={}))}Dt.prototype={defaults:{},set:function(Re){return K(this.options,Re),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Re){if(A(Re,"recognizeWith",this))return this;var Ve=this.simultaneous;return Ve[(Re=hn(Re,this)).id]||(Ve[Re.id]=Re,Re.recognizeWith(this)),this},dropRecognizeWith:function(Re){return A(Re,"dropRecognizeWith",this)||(Re=hn(Re,this),delete this.simultaneous[Re.id]),this},requireFailure:function(Re){if(A(Re,"requireFailure",this))return this;var Ve=this.requireFail;return-1===ve(Ve,Re=hn(Re,this))&&(Ve.push(Re),Re.requireFailure(this)),this},dropRequireFailure:function(Re){if(A(Re,"dropRequireFailure",this))return this;Re=hn(Re,this);var Ve=ve(this.requireFail,Re);return Ve>-1&&this.requireFail.splice(Ve,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Re){return!!this.simultaneous[Re.id]},emit:function(Re){var Ve=this,it=this.state;function vt(Vt){Ve.manager.emit(Vt,Re)}it<8&&vt(Ve.options.event+Ft(it)),vt(Ve.options.event),Re.additionalEvent&&vt(Re.additionalEvent),it>=8&&vt(Ve.options.event+Ft(it))},tryEmit:function(Re){if(this.canEmit())return this.emit(Re);this.state=32},canEmit:function(){for(var Re=0;Re<this.requireFail.length;){if(!(this.requireFail[Re].state&(32|he)))return!1;Re++}return!0},recognize:function(Re){var Ve=K({},Re);if(!w(this.options.enable,[this,Ve]))return this.reset(),void(this.state=32);56&this.state&&(this.state=he),this.state=this.process(Ve),30&this.state&&this.tryEmit(Ve)},process:function(Re){},getTouchAction:function(){},reset:function(){}},$(gn,Dt,{defaults:{pointers:1},attrTest:function(Re){var Ve=this.options.pointers;return 0===Ve||Re.pointers.length===Ve},process:function(Re){var Ve=this.state,it=Re.eventType,vt=6&Ve,Vt=this.attrTest(Re);return vt&&(it&Ge||!Vt)?16|Ve:vt||Vt?it&ie?8|Ve:2&Ve?4|Ve:2:32}}),$(Xr,gn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ye},getTouchAction:function(){var Re=this.options.direction,Ve=[];return Re&U&&Ve.push(Ai),Re&me&&Ve.push(Io),Ve},directionTest:function(Re){var Ve=this.options,it=!0,vt=Re.distance,Vt=Re.direction,an=Re.deltaX,si=Re.deltaY;return Vt&Ve.direction||(Ve.direction&U?(Vt=0===an?Ze:an<0?pe:re,it=an!=this.pX,vt=Math.abs(Re.deltaX)):(Vt=0===si?Ze:si<0?Y:N,it=si!=this.pY,vt=Math.abs(Re.deltaY))),Re.direction=Vt,it&&vt>Ve.threshold&&Vt&Ve.direction},attrTest:function(Re){return gn.prototype.attrTest.call(this,Re)&&(2&this.state||!(2&this.state)&&this.directionTest(Re))},emit:function(Re){this.pX=Re.deltaX,this.pY=Re.deltaY;var Ve=Gt(Re.direction);Ve&&(Re.additionalEvent=this.options.event+Ve),this._super.emit.call(this,Re)}}),$(zr,gn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qn]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.scale-1)>this.options.threshold||2&this.state)},emit:function(Re){1!==Re.scale&&(Re.additionalEvent=this.options.event+(Re.scale<1?"in":"out")),this._super.emit.call(this,Re)}}),$(yn,Dt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Re){var Ve=this.options,it=Re.pointers.length===Ve.pointers,vt=Re.distance<Ve.threshold,Vt=Re.deltaTime>Ve.time;if(this._input=Re,!vt||!it||Re.eventType&(ie|Ge)&&!Vt)this.reset();else if(Re.eventType&I)this.reset(),this._timer=Q(function(){this.state=8,this.tryEmit()},Ve.time,this);else if(Re.eventType&ie)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Re){8===this.state&&(Re&&Re.eventType&ie?this.manager.emit(this.options.event+"up",Re):(this._input.timeStamp=B(),this.manager.emit(this.options.event,this._input)))}}),$(hi,gn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qn]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.rotation)>this.options.threshold||2&this.state)}}),$(Qa,gn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|me,pointers:1},getTouchAction:function(){return Xr.prototype.getTouchAction.call(this)},attrTest:function(Re){var it,Ve=this.options.direction;return Ve&(U|me)?it=Re.overallVelocity:Ve&U?it=Re.overallVelocityX:Ve&me&&(it=Re.overallVelocityY),this._super.attrTest.call(this,Re)&&Ve&Re.offsetDirection&&Re.distance>this.options.threshold&&Re.maxPointers==this.options.pointers&&O(it)>this.options.velocity&&Re.eventType&ie},emit:function(Re){var Ve=Gt(Re.offsetDirection);Ve&&this.manager.emit(this.options.event+Ve,Re),this.manager.emit(this.options.event,Re)}}),$(oo,Dt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[en]},process:function(Re){var Ve=this.options,it=Re.pointers.length===Ve.pointers,vt=Re.distance<Ve.threshold,Vt=Re.deltaTime<Ve.time;if(this.reset(),Re.eventType&I&&0===this.count)return this.failTimeout();if(vt&&Vt&&it){if(Re.eventType!=ie)return this.failTimeout();var an=!this.pTime||Re.timeStamp-this.pTime<Ve.interval,si=!this.pCenter||dt(this.pCenter,Re.center)<Ve.posThreshold;if(this.pTime=Re.timeStamp,this.pCenter=Re.center,si&&an?this.count+=1:this.count=1,this._input=Re,0==this.count%Ve.taps)return this.hasRequireFailures()?(this._timer=Q(function(){this.state=8,this.tryEmit()},Ve.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Q(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rs.VERSION="2.0.7",rs.defaults={domEvents:!1,touchAction:_i,enable:!0,inputTarget:null,inputClass:null,preset:[[hi,{enable:!1}],[zr,{enable:!1},["rotate"]],[Qa,{direction:U}],[Xr,{direction:U},["swipe"]],[oo],[oo,{event:"doubletap",taps:2},["tap"]],[yn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},xs.prototype={set:function(Re){return K(this.options,Re),Re.touchAction&&this.touchAction.update(),Re.inputTarget&&(this.input.destroy(),this.input.target=Re.inputTarget,this.input.init()),this},stop:function(Re){this.session.stopped=Re?2:1},recognize:function(Re){var Ve=this.session;if(!Ve.stopped){this.touchAction.preventDefaults(Re);var it,vt=this.recognizers,Vt=Ve.curRecognizer;(!Vt||Vt&&8&Vt.state)&&(Vt=Ve.curRecognizer=null);for(var an=0;an<vt.length;)it=vt[an],2===Ve.stopped||Vt&&it!=Vt&&!it.canRecognizeWith(Vt)?it.reset():it.recognize(Re),!Vt&&14&it.state&&(Vt=Ve.curRecognizer=it),an++}},get:function(Re){if(Re instanceof Dt)return Re;for(var Ve=this.recognizers,it=0;it<Ve.length;it++)if(Ve[it].options.event==Re)return Ve[it];return null},add:function(Re){if(A(Re,"add",this))return this;var Ve=this.get(Re.options.event);return Ve&&this.remove(Ve),this.recognizers.push(Re),Re.manager=this,this.touchAction.update(),Re},remove:function(Re){if(A(Re,"remove",this))return this;if(Re=this.get(Re)){var Ve=this.recognizers,it=ve(Ve,Re);-1!==it&&(Ve.splice(it,1),this.touchAction.update())}return this},on:function(Re,Ve){if(Re!==R&&Ve!==R){var it=this.handlers;return F(le(Re),function(vt){it[vt]=it[vt]||[],it[vt].push(Ve)}),this}},off:function(Re,Ve){if(Re!==R){var it=this.handlers;return F(le(Re),function(vt){Ve?it[vt]&&it[vt].splice(ve(it[vt],Ve),1):delete it[vt]}),this}},emit:function(Re,Ve){this.options.domEvents&&function O_(Re,Ve){var it=D.createEvent("Event");it.initEvent(Re,!0,!0),it.gesture=Ve,Ve.target.dispatchEvent(it)}(Re,Ve);var it=this.handlers[Re]&&this.handlers[Re].slice();if(it&&it.length){Ve.type=Re,Ve.preventDefault=function(){Ve.srcEvent.preventDefault()};for(var vt=0;vt<it.length;)it[vt](Ve),vt++}},destroy:function(){this.element&&Hr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},K(rs,{INPUT_START:I,INPUT_MOVE:2,INPUT_END:ie,INPUT_CANCEL:Ge,STATE_POSSIBLE:he,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Ze,DIRECTION_LEFT:pe,DIRECTION_RIGHT:re,DIRECTION_UP:Y,DIRECTION_DOWN:N,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:me,DIRECTION_ALL:Ye,Manager:xs,Input:st,TouchAction:gr,TouchInput:Xe,MouseInput:Wi,PointerEventInput:Vi,TouchMouseInput:mr,SingleTouchInput:Za,Recognizer:Dt,AttrRecognizer:gn,Tap:oo,Pan:Xr,Swipe:Qa,Pinch:zr,Rotate:hi,Press:yn,on:k,off:de,each:F,merge:Z,extend:J,assign:K,inherit:$,bindFn:H,prefixed:Qe}),(typeof y<"u"?y:typeof self<"u"?self:{}).Hammer=rs,(M=function(){return rs}.call(q,g,q,ee))!==R&&(ee.exports=M)}(window,document)},2601:(ee,q)=>{q.read=function(g,M,y,D,C){var R,_,v=8*C-D-1,T=(1<<v)-1,j=T>>1,O=-7,B=y?C-1:0,Q=y?-1:1,A=g[M+B];for(B+=Q,R=A&(1<<-O)-1,A>>=-O,O+=v;O>0;R=256*R+g[M+B],B+=Q,O-=8);for(_=R&(1<<-O)-1,R>>=-O,O+=D;O>0;_=256*_+g[M+B],B+=Q,O-=8);if(0===R)R=1-j;else{if(R===T)return _?NaN:1/0*(A?-1:1);_+=Math.pow(2,D),R-=j}return(A?-1:1)*_*Math.pow(2,R-D)},q.write=function(g,M,y,D,C,R){var _,v,T,j=8*R-C-1,O=(1<<j)-1,B=O>>1,Q=23===C?Math.pow(2,-24)-Math.pow(2,-77):0,A=D?0:R-1,F=D?1:-1,ce=M<0||0===M&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(v=isNaN(M)?1:0,_=O):(_=Math.floor(Math.log(M)/Math.LN2),M*(T=Math.pow(2,-_))<1&&(_--,T*=2),(M+=_+B>=1?Q/T:Q*Math.pow(2,1-B))*T>=2&&(_++,T/=2),_+B>=O?(v=0,_=O):_+B>=1?(v=(M*T-1)*Math.pow(2,C),_+=B):(v=M*Math.pow(2,B-1)*Math.pow(2,C),_=0));C>=8;g[y+A]=255&v,A+=F,v/=256,C-=8);for(_=_<<C|v,j+=C;j>0;g[y+A]=255&_,A+=F,_/=256,j-=8);g[y+A-F]|=128*ce}},6698:ee=>{ee.exports="function"==typeof Object.create?function(g,M){M&&(g.super_=M,g.prototype=Object.create(M.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,M){if(M){g.super_=M;var y=function(){};y.prototype=M.prototype,g.prototype=new y,g.prototype.constructor=g}}},4198:(ee,q,g)=>{"use strict";var M=g(7156).default;const{isArray:y,isObject:D,isString:C}=g(8254),{asArray:R}=g(3521),{prependBase:_}=g(2651),v=g(1874),T=g(1252);function O(Q){throw new v("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Q})}function B({context:Q,base:A}){if(!Q)return;const F=Q["@context"];if(C(F))Q["@context"]=_(A,F);else if(y(F))for(let ce=0;ce<F.length;++ce){const K=F[ce];C(K)?F[ce]=_(A,K):D(K)&&B({context:{"@context":K},base:A})}else if(D(F))for(const ce in F)B({context:F[ce],base:A})}ee.exports=class{constructor({sharedCache:A}){this.perOpCache=new Map,this.sharedCache=A}resolve({activeCtx:A,context:F,documentLoader:ce,base:K,cycles:J=new Set}){var Z=this;return M(function*(){F&&D(F)&&F["@context"]&&(F=F["@context"]),F=R(F);const $=[];for(const H of F){if(C(H)){let k=Z._get(H);k||(k=yield Z._resolveRemoteContext({activeCtx:A,url:H,documentLoader:ce,base:K,cycles:J})),y(k)?$.push(...k):$.push(k);continue}if(null===H){$.push(new T({document:null}));continue}D(H)||O(F);const w=JSON.stringify(H);let P=Z._get(w);P||(P=new T({document:H}),Z._cacheResolvedContext({key:w,resolved:P,tag:"static"})),$.push(P)}return $})()}_get(A){let F=this.perOpCache.get(A);if(!F){const ce=this.sharedCache.get(A);ce&&(F=ce.get("static"),F&&this.perOpCache.set(A,F))}return F}_cacheResolvedContext({key:A,resolved:F,tag:ce}){if(this.perOpCache.set(A,F),void 0!==ce){let K=this.sharedCache.get(A);K||(K=new Map,this.sharedCache.set(A,K)),K.set(ce,F)}return F}_resolveRemoteContext({activeCtx:A,url:F,documentLoader:ce,base:K,cycles:J}){var Z=this;return M(function*(){F=_(K,F);const{context:$,remoteDoc:H}=yield Z._fetchContext({activeCtx:A,url:F,documentLoader:ce,cycles:J});B({context:$,base:K=H.documentUrl||F});const w=yield Z.resolve({activeCtx:A,context:$,documentLoader:ce,base:K,cycles:J});return Z._cacheResolvedContext({key:F,resolved:w,tag:H.tag}),w})()}_fetchContext({activeCtx:A,url:F,documentLoader:ce,cycles:K}){return M(function*(){if(K.size>10)throw new v("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===A.processingMode?"loading remote context failed":"context overflow",max:10});if(K.has(F))throw new v("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===A.processingMode?"recursive context inclusion":"context overflow",url:F});let J,Z;K.add(F);try{Z=yield ce(F),J=Z.document||null,C(J)&&(J=JSON.parse(J))}catch($){throw new v("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:F,cause:$})}if(!D(J))throw new v("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:F});return J="@context"in J?{"@context":J["@context"]}:{"@context":{}},Z.contextUrl&&(y(J["@context"])||(J["@context"]=[J["@context"]]),J["@context"].push(Z.contextUrl)),{context:J,remoteDoc:Z}})()}}},1874:ee=>{"use strict";ee.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",M="jsonld.Error",y={}){super(g),this.name=M,this.message=g,this.details=y}}},1828:ee=>{"use strict";ee.exports=q=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(M,y){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(M,y)},g.expand=function(M){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(M)},g.flatten=function(M){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(M)},g}},7260:(ee,q,g)=>{"use strict";ee.exports=g(1986).NQuads},4044:(ee,q,g)=>{"use strict";var M=g(7156).default;ee.exports=class{constructor(){this._requests={}}wrapLoader(D){const C=this;return C._loader=D,function(){return C.add.apply(C,arguments)}}add(D){var C=this;return M(function*(){let R=C._requests[D];if(R)return Promise.resolve(R);R=C._requests[D]=C._loader(D);try{return yield R}finally{delete C._requests[D]}})()}}},1252:(ee,q,g)=>{"use strict";const M=g(1072);ee.exports=class{constructor({document:C}){this.document=C,this.cache=new M({max:10})}getProcessed(C){return this.cache.get(C)}setProcessed(C,R){this.cache.set(C,R)}}},8809:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(1874),{isArray:D,isObject:C,isString:R,isUndefined:_}=g(8254),{isList:v,isValue:T,isGraph:j,isSimpleGraph:O,isSubjectReference:B}=g(543),{expandIri:Q,getContextValue:A,isKeyword:F,process:ce,processingMode:K}=g(9611),{removeBase:J,prependBase:Z}=g(2651),{REGEX_KEYWORD:$,addValue:H,asArray:w,compareShortestLeast:P}=g(3521),k={};function G(Ie,le,ve){if("@nest"!==Q(Ie,le,{vocab:!0},ve))throw new y("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ee.exports=k,k.compact=function(){var Ie=M(function*({activeCtx:le,activeProperty:ve=null,element:Oe,options:Le={}}){if(D(Oe)){let qe=[];for(let Te=0;Te<Oe.length;++Te){const He=yield k.compact({activeCtx:le,activeProperty:ve,element:Oe[Te],options:Le});null!==He&&qe.push(He)}return Le.compactArrays&&1===qe.length&&0===(A(le,ve,"@container")||[]).length&&(qe=qe[0]),qe}const Qe=A(le,ve,"@context");if(_(Qe)||(le=yield ce({activeCtx:le,localCtx:Qe,propagate:!0,overrideProtected:!0,options:Le})),C(Oe)){if(Le.link&&"@id"in Oe&&Le.link.hasOwnProperty(Oe["@id"])){const nt=Le.link[Oe["@id"]];for(let gt=0;gt<nt.length;++gt)if(nt[gt].expanded===Oe)return nt[gt].compacted}if(T(Oe)||B(Oe)){const nt=k.compactValue({activeCtx:le,activeProperty:ve,value:Oe,options:Le});return Le.link&&B(Oe)&&(Le.link.hasOwnProperty(Oe["@id"])||(Le.link[Oe["@id"]]=[]),Le.link[Oe["@id"]].push({expanded:Oe,compacted:nt})),nt}if(v(Oe)&&(A(le,ve,"@container")||[]).includes("@list"))return k.compact({activeCtx:le,activeProperty:ve,element:Oe["@list"],options:Le});const qe="@reverse"===ve,Te={},He=le;!T(Oe)&&!B(Oe)&&(le=le.revertToPreviousContext());const Me=A(He,ve,"@context");_(Me)||(le=yield ce({activeCtx:le,localCtx:Me,propagate:!0,overrideProtected:!0,options:Le})),Le.link&&"@id"in Oe&&(Le.link.hasOwnProperty(Oe["@id"])||(Le.link[Oe["@id"]]=[]),Le.link[Oe["@id"]].push({expanded:Oe,compacted:Te}));let Ue=Oe["@type"]||[];Ue.length>1&&(Ue=Array.from(Ue).sort());const fe=le;for(const nt of Ue){const gt=k.compactIri({activeCtx:fe,iri:nt,relativeTo:{vocab:!0}}),Je=A(He,gt,"@context");_(Je)||(le=yield ce({activeCtx:le,localCtx:Je,options:Le,propagate:!1}))}const Ce=Object.keys(Oe).sort();for(const nt of Ce){const gt=Oe[nt];if("@id"!==nt)if("@type"!==nt)if("@reverse"!==nt)if("@preserve"!==nt)if("@index"!==nt)if("@graph"!==nt&&"@list"!==nt&&"@included"!==nt&&F(nt)){const Je=k.compactIri({activeCtx:le,iri:nt,relativeTo:{vocab:!0}});H(Te,Je,gt)}else{if(!D(gt))throw new y("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===gt.length){const Je=k.compactIri({activeCtx:le,iri:nt,value:gt,relativeTo:{vocab:!0},reverse:qe}),ge=le.mappings.has(Je)?le.mappings.get(Je)["@nest"]:null;let L=Te;ge&&(G(le,ge,Le),C(Te[ge])||(Te[ge]={}),L=Te[ge]),H(L,Je,gt,{propertyIsArray:!0})}for(const Je of gt){const ge=k.compactIri({activeCtx:le,iri:nt,value:Je,relativeTo:{vocab:!0},reverse:qe}),L=le.mappings.has(ge)?le.mappings.get(ge)["@nest"]:null;let I=Te;L&&(G(le,L,Le),C(Te[L])||(Te[L]={}),I=Te[L]);const ae=A(le,ge,"@container")||[],ie=j(Je),Ge=v(Je);let Ze;Ge?Ze=Je["@list"]:ie&&(Ze=Je["@graph"]);let pe=yield k.compact({activeCtx:le,activeProperty:ge,element:Ge||ie?Ze:Je,options:Le});if(Ge){if(D(pe)||(pe=[pe]),ae.includes("@list")){H(I,ge,pe,{valueIsArray:!0,allowDuplicate:!0});continue}pe={[k.compactIri({activeCtx:le,iri:"@list",relativeTo:{vocab:!0}})]:pe},"@index"in Je&&(pe[k.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=Je["@index"])}if(ie)if(ae.includes("@graph")&&(ae.includes("@id")||ae.includes("@index")&&O(Je))){let re;I.hasOwnProperty(ge)?re=I[ge]:I[ge]=re={};const Y=(ae.includes("@id")?Je["@id"]:Je["@index"])||k.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}});H(re,Y,pe,{propertyIsArray:!Le.compactArrays||ae.includes("@set")})}else ae.includes("@graph")&&O(Je)?(D(pe)&&pe.length>1&&(pe={"@included":pe}),H(I,ge,pe,{propertyIsArray:!Le.compactArrays||ae.includes("@set")})):(D(pe)&&1===pe.length&&Le.compactArrays&&(pe=pe[0]),pe={[k.compactIri({activeCtx:le,iri:"@graph",relativeTo:{vocab:!0}})]:pe},"@id"in Je&&(pe[k.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=Je["@id"]),"@index"in Je&&(pe[k.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=Je["@index"]),H(I,ge,pe,{propertyIsArray:!Le.compactArrays||ae.includes("@set")}));else if(ae.includes("@language")||ae.includes("@index")||ae.includes("@id")||ae.includes("@type")){let re,Y;if(I.hasOwnProperty(ge)?re=I[ge]:I[ge]=re={},ae.includes("@language"))T(pe)&&(pe=pe["@value"]),Y=Je["@language"];else if(ae.includes("@index")){const N=A(le,ge,"@index")||"@index",U=k.compactIri({activeCtx:le,iri:N,relativeTo:{vocab:!0}});if("@index"===N)Y=Je["@index"],delete pe[U];else{let me;if([Y,...me]=w(pe[N]||[]),R(Y))switch(me.length){case 0:delete pe[N];break;case 1:pe[N]=me[0];break;default:pe[N]=me}else Y=null}}else if(ae.includes("@id")){const N=k.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}});Y=pe[N],delete pe[N]}else if(ae.includes("@type")){const N=k.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}});let U;switch([Y,...U]=w(pe[N]||[]),U.length){case 0:delete pe[N];break;case 1:pe[N]=U[0];break;default:pe[N]=U}1===Object.keys(pe).length&&"@id"in Je&&(pe=yield k.compact({activeCtx:le,activeProperty:ge,element:{"@id":Je["@id"]},options:Le}))}Y||(Y=k.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}})),H(re,Y,pe,{propertyIsArray:ae.includes("@set")})}else{const re=!Le.compactArrays||ae.includes("@set")||ae.includes("@list")||D(pe)&&0===pe.length||"@list"===nt||"@graph"===nt;H(I,ge,pe,{propertyIsArray:re})}}}else{if((A(le,ve,"@container")||[]).includes("@index"))continue;const ge=k.compactIri({activeCtx:le,iri:nt,relativeTo:{vocab:!0}});H(Te,ge,gt)}else{const Je=yield k.compact({activeCtx:le,activeProperty:ve,element:gt,options:Le});D(Je)&&0===Je.length||H(Te,nt,Je)}else{const Je=yield k.compact({activeCtx:le,activeProperty:"@reverse",element:gt,options:Le});for(const ge in Je)if(le.mappings.has(ge)&&le.mappings.get(ge).reverse){const L=Je[ge],ae=(A(le,ge,"@container")||[]).includes("@set")||!Le.compactArrays;H(Te,ge,L,{propertyIsArray:ae}),delete Je[ge]}if(Object.keys(Je).length>0){const ge=k.compactIri({activeCtx:le,iri:nt,relativeTo:{vocab:!0}});H(Te,ge,Je)}}else{let Je=w(gt).map(ie=>k.compactIri({activeCtx:He,iri:ie,relativeTo:{vocab:!0}}));1===Je.length&&(Je=Je[0]);const ge=k.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}}),ae=(A(le,ge,"@container")||[]).includes("@set")&&K(le,1.1)||D(Je)&&0===gt.length;H(Te,ge,Je,{propertyIsArray:ae})}else{let Je=w(gt).map(L=>k.compactIri({activeCtx:le,iri:L,relativeTo:{vocab:!1},base:Le.base}));1===Je.length&&(Je=Je[0]),Te[k.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=Je}}return Te}return Oe});return function(le){return Ie.apply(this,arguments)}}(),k.compactIri=({activeCtx:Ie,iri:le,value:ve=null,relativeTo:Oe={vocab:!1},reverse:Le=!1,base:Qe=null})=>{if(null===le)return le;Ie.isPropertyTermScoped&&Ie.previousContext&&(Ie=Ie.previousContext);const qe=Ie.getInverse();if(F(le)&&le in qe&&"@none"in qe[le]&&"@type"in qe[le]["@none"]&&"@none"in qe[le]["@none"]["@type"])return qe[le]["@none"]["@type"]["@none"];if(Oe.vocab&&le in qe){const fe=Ie["@language"]||"@none",Ce=[];C(ve)&&"@index"in ve&&!("@graph"in ve)&&Ce.push("@index","@index@set"),C(ve)&&"@preserve"in ve&&(ve=ve["@preserve"][0]),j(ve)?("@index"in ve&&Ce.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ve&&Ce.push("@graph@id","@graph@id@set"),Ce.push("@graph","@graph@set","@set"),"@index"in ve||Ce.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ve||Ce.push("@graph@id","@graph@id@set")):C(ve)&&!T(ve)&&Ce.push("@id","@id@set","@type","@set@type");let nt="@language",gt="@null";if(Le)nt="@type",gt="@reverse",Ce.push("@set");else if(v(ve)){"@index"in ve||Ce.push("@list");const ge=ve["@list"];if(0===ge.length)nt="@any",gt="@none";else{let L=0===ge.length?fe:null,I=null;for(let ae=0;ae<ge.length;++ae){const ie=ge[ae];let Ge="@none",Ze="@none";if(T(ie)?"@direction"in ie?Ge=`${(ie["@language"]||"").toLowerCase()}_${ie["@direction"]}`:"@language"in ie?Ge=ie["@language"].toLowerCase():"@type"in ie?Ze=ie["@type"]:Ge="@null":Ze="@id",null===L?L=Ge:Ge!==L&&T(ie)&&(L="@none"),null===I?I=Ze:Ze!==I&&(I="@none"),"@none"===L&&"@none"===I)break}L=L||"@none",I=I||"@none","@none"!==I?(nt="@type",gt=I):gt=L}}else{if(T(ve))if("@language"in ve&&!("@index"in ve)){Ce.push("@language","@language@set"),gt=ve["@language"];const ge=ve["@direction"];ge&&(gt=`${gt}_${ge}`)}else"@direction"in ve&&!("@index"in ve)?gt=`_${ve["@direction"]}`:"@type"in ve&&(nt="@type",gt=ve["@type"]);else nt="@type",gt="@id";Ce.push("@set")}Ce.push("@none"),C(ve)&&!("@index"in ve)&&Ce.push("@index","@index@set"),T(ve)&&1===Object.keys(ve).length&&Ce.push("@language","@language@set");const Je=function de(Ie,le,ve,Oe,Le,Qe){null===Qe&&(Qe="@null");const qe=[];if(("@id"===Qe||"@reverse"===Qe)&&C(ve)&&"@id"in ve){"@reverse"===Qe&&qe.push("@reverse");const He=k.compactIri({activeCtx:Ie,iri:ve["@id"],relativeTo:{vocab:!0}});Ie.mappings.has(He)&&Ie.mappings.get(He)&&Ie.mappings.get(He)["@id"]===ve["@id"]?qe.push.apply(qe,["@vocab","@id"]):qe.push.apply(qe,["@id","@vocab"])}else{qe.push(Qe);const He=qe.find(Me=>Me.includes("_"));He&&qe.push(He.replace(/^[^_]+_/,"_"))}qe.push("@none");const Te=Ie.inverse[le];for(const He of Oe){if(!(He in Te))continue;const Me=Te[He][Le];for(const Ue of qe)if(Ue in Me)return Me[Ue]}return null}(Ie,le,ve,Ce,nt,gt);if(null!==Je)return Je}if(Oe.vocab&&"@vocab"in Ie){const fe=Ie["@vocab"];if(0===le.indexOf(fe)&&le!==fe){const Ce=le.substr(fe.length);if(!Ie.mappings.has(Ce))return Ce}}let Te=null;const He=[];let Me=Ie.fastCurieMap;const Ue=le.length-1;for(let fe=0;fe<Ue&&le[fe]in Me;++fe)Me=Me[le[fe]],""in Me&&He.push(Me[""][0]);for(let fe=He.length-1;fe>=0;--fe){const Ce=He[fe],nt=Ce.terms;for(const gt of nt){const Je=gt+":"+le.substr(Ce.iri.length);Ie.mappings.get(gt)._prefix&&(!Ie.mappings.has(Je)||null===ve&&Ie.mappings.get(Je)["@id"]===le)&&(null===Te||P(Je,Te)<0)&&(Te=Je)}}if(null!==Te)return Te;for(const[fe,Ce]of Ie.mappings)if(Ce&&Ce._prefix&&le.startsWith(fe+":"))throw new y(`Absolute IRI "${le}" confused with prefix "${fe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Ie});if(!Oe.vocab){if("@base"in Ie){if(Ie["@base"]){const fe=J(Z(Qe,Ie["@base"]),le);return $.test(fe)?`./${fe}`:fe}return le}return J(Qe,le)}return le},k.compactValue=({activeCtx:Ie,activeProperty:le,value:ve,options:Oe})=>{if(T(ve)){const Te=A(Ie,le,"@type"),He=A(Ie,le,"@language"),Me=A(Ie,le,"@direction"),Ue=A(Ie,le,"@container")||[],fe="@index"in ve&&!Ue.includes("@index");if(!fe&&"@none"!==Te&&(ve["@type"]===Te||"@language"in ve&&ve["@language"]===He&&"@direction"in ve&&ve["@direction"]===Me||"@language"in ve&&ve["@language"]===He||"@direction"in ve&&ve["@direction"]===Me))return ve["@value"];const Ce=Object.keys(ve).length,nt=1===Ce||2===Ce&&"@index"in ve&&!fe,gt="@language"in Ie,Je=R(ve["@value"]),ge=Ie.mappings.has(le)&&null===Ie.mappings.get(le)["@language"];if(nt&&"@none"!==Te&&(!gt||!Je||ge))return ve["@value"];const L={};return fe&&(L[k.compactIri({activeCtx:Ie,iri:"@index",relativeTo:{vocab:!0}})]=ve["@index"]),"@type"in ve?L[k.compactIri({activeCtx:Ie,iri:"@type",relativeTo:{vocab:!0}})]=k.compactIri({activeCtx:Ie,iri:ve["@type"],relativeTo:{vocab:!0}}):"@language"in ve&&(L[k.compactIri({activeCtx:Ie,iri:"@language",relativeTo:{vocab:!0}})]=ve["@language"]),"@direction"in ve&&(L[k.compactIri({activeCtx:Ie,iri:"@direction",relativeTo:{vocab:!0}})]=ve["@direction"]),L[k.compactIri({activeCtx:Ie,iri:"@value",relativeTo:{vocab:!0}})]=ve["@value"],L}const Le=Q(Ie,le,{vocab:!0},Oe),Qe=A(Ie,le,"@type"),qe=k.compactIri({activeCtx:Ie,iri:ve["@id"],relativeTo:{vocab:"@vocab"===Qe},base:Oe.base});return"@id"===Qe||"@vocab"===Qe||"@graph"===Le?qe:{[k.compactIri({activeCtx:Ie,iri:"@id",relativeTo:{vocab:!0}})]:qe}}},6982:ee=>{"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";ee.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(3521),D=g(1874),{isArray:C,isObject:R,isString:_,isUndefined:v}=g(8254),{isAbsolute:T,isRelative:j,prependBase:O}=g(2651),{handleEvent:B}=g(3855),{REGEX_BCP47:Q,REGEX_KEYWORD:A,asArray:F,compareShortestLeast:ce}=g(3521),K=new Map,Z={};function $(w,P,k,de,G,Ie){if(null===P||!_(P)||Z.isKeyword(P))return P;if(P.match(A))return null;if(de&&de.hasOwnProperty(P)&&!0!==G.get(P)&&Z.createTermDefinition({activeCtx:w,localCtx:de,term:P,defined:G,options:Ie}),(k=k||{}).vocab){const ve=w.mappings.get(P);if(null===ve)return null;if(R(ve)&&"@id"in ve)return ve["@id"]}const le=P.indexOf(":");if(le>0){const ve=P.substr(0,le),Oe=P.substr(le+1);if("_"===ve||0===Oe.indexOf("//"))return P;de&&de.hasOwnProperty(ve)&&Z.createTermDefinition({activeCtx:w,localCtx:de,term:ve,defined:G,options:Ie});const Le=w.mappings.get(ve);if(Le&&Le._prefix)return Le["@id"]+Oe;if(T(P))return P}if(k.vocab&&"@vocab"in w)P=w["@vocab"]+P;else if(k.base){let ve,Oe;"@base"in w?w["@base"]?(Oe=O(Ie.base,w["@base"]),ve=O(Oe,P)):(Oe=w["@base"],ve=P):(Oe=Ie.base,ve=O(Ie.base,P)),P=ve}return P}function H(w,P){if(!w||"object"!=typeof w||!P||"object"!=typeof P)return w===P;const k=Array.isArray(w);if(k!==Array.isArray(P))return!1;if(k){if(w.length!==P.length)return!1;for(let Ie=0;Ie<w.length;++Ie)if(!H(w[Ie],P[Ie]))return!1;return!0}const de=Object.keys(w),G=Object.keys(P);if(de.length!==G.length)return!1;for(const Ie in w){let le=w[Ie],ve=P[Ie];if("@container"===Ie&&Array.isArray(le)&&Array.isArray(ve)&&(le=le.slice().sort(),ve=ve.slice().sort()),!H(le,ve))return!1}return!0}ee.exports=Z,Z.process=function(){var w=M(function*({activeCtx:P,localCtx:k,options:de,propagate:G=!0,overrideProtected:Ie=!1,cycles:le=new Set}){if(R(k)&&"@context"in k&&C(k["@context"])&&(k=k["@context"]),0===F(k).length)return P;const Oe=[],Le=[({event:He,next:Me})=>{Oe.push(He),Me()}];de.eventHandler&&Le.push(de.eventHandler);const Qe=de;de={...de,eventHandler:Le};const qe=yield de.contextResolver.resolve({activeCtx:P,context:k,documentLoader:de.documentLoader,base:de.base});R(qe[0].document)&&"boolean"==typeof qe[0].document["@propagate"]&&(G=qe[0].document["@propagate"]);let Te=P;!G&&!Te.previousContext&&(Te=Te.clone(),Te.previousContext=P);for(const He of qe){let{document:Me}=He;if(P=Te,null===Me){if(!Ie&&0!==Object.keys(P.protected).length)throw new D("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Te=P=Z.getInitialContext(de).clone();continue}const Ue=He.getProcessed(P);if(Ue){if(Qe.eventHandler)for(const Ce of Ue.events)B({event:Ce,options:Qe});Te=P=Ue.context;continue}if(R(Me)&&"@context"in Me&&(Me=Me["@context"]),!R(Me))throw new D("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Me});Te=Te.clone();const fe=new Map;if("@version"in Me){if(1.1!==Me["@version"])throw new D("Unsupported JSON-LD version: "+Me["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Me});if(P.processingMode&&"json-ld-1.0"===P.processingMode)throw new D("@version: "+Me["@version"]+" not compatible with "+P.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Me});Te.processingMode="json-ld-1.1",Te["@version"]=Me["@version"],fe.set("@version",!0)}if(Te.processingMode=Te.processingMode||P.processingMode,"@base"in Me){let Ce=Me["@base"];if(null!==Ce&&!T(Ce)){if(!j(Ce))throw new D('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Me});Ce=O(Te["@base"],Ce)}Te["@base"]=Ce,fe.set("@base",!0)}if("@vocab"in Me){const Ce=Me["@vocab"];if(null===Ce)delete Te["@vocab"];else{if(!_(Ce))throw new D('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Me});if(!T(Ce)&&Z.processingMode(Te,1))throw new D('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Me});{const nt=$(Te,Ce,{vocab:!0,base:!0},void 0,void 0,de);T(nt)||de.eventHandler&&B({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:nt}},options:de}),Te["@vocab"]=nt}}fe.set("@vocab",!0)}if("@language"in Me){const Ce=Me["@language"];if(null===Ce)delete Te["@language"];else{if(!_(Ce))throw new D('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Me});Ce.match(Q)||de.eventHandler&&B({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ce}},options:de}),Te["@language"]=Ce.toLowerCase()}fe.set("@language",!0)}if("@direction"in Me){const Ce=Me["@direction"];if("json-ld-1.0"===P.processingMode)throw new D("Invalid JSON-LD syntax; @direction not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Me});if(null===Ce)delete Te["@direction"];else{if("ltr"!==Ce&&"rtl"!==Ce)throw new D('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Me});Te["@direction"]=Ce}fe.set("@direction",!0)}if("@propagate"in Me){const Ce=Me["@propagate"];if("json-ld-1.0"===P.processingMode)throw new D("Invalid JSON-LD syntax; @propagate not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Me});if("boolean"!=typeof Ce)throw new D("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:k});fe.set("@propagate",!0)}if("@import"in Me){const Ce=Me["@import"];if("json-ld-1.0"===P.processingMode)throw new D("Invalid JSON-LD syntax; @import not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Me});if(!_(Ce))throw new D("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:k});const nt=yield de.contextResolver.resolve({activeCtx:P,context:Ce,documentLoader:de.documentLoader,base:de.base});if(1!==nt.length)throw new D("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:k});const gt=nt[0].getProcessed(P);if(gt)Me=gt;else{const Je=nt[0].document;if("@import"in Je)throw new D("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:k});for(const ge in Je)Me.hasOwnProperty(ge)||(Me[ge]=Je[ge]);nt[0].setProcessed(P,Me)}fe.set("@import",!0)}fe.set("@protected",Me["@protected"]||!1);for(const Ce in Me)if(Z.createTermDefinition({activeCtx:Te,localCtx:Me,term:Ce,defined:fe,options:de,overrideProtected:Ie}),R(Me[Ce])&&"@context"in Me[Ce]){const nt=Me[Ce]["@context"];let gt=!0;if(_(nt)){const Je=O(de.base,nt);le.has(Je)?gt=!1:le.add(Je)}if(gt)try{yield Z.process({activeCtx:Te.clone(),localCtx:Me[Ce]["@context"],overrideProtected:!0,options:de,cycles:le})}catch{throw new D("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Me[Ce]["@context"],term:Ce})}}He.setProcessed(P,{context:Te,events:Oe})}return Te});return function(P){return w.apply(this,arguments)}}(),Z.createTermDefinition=({activeCtx:w,localCtx:P,term:k,defined:de,options:G,overrideProtected:Ie=!1})=>{if(de.has(k)){if(de.get(k))return;throw new D("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:P,term:k})}let le;if(de.set(k,!1),P.hasOwnProperty(k)&&(le=P[k]),"@type"===k&&R(le)&&"@set"===(le["@container"]||"@set")&&Z.processingMode(w,1.1)){const He=["@container","@id","@protected"],Me=Object.keys(le);if(0===Me.length||Me.some(Ue=>!He.includes(Ue)))throw new D("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:k})}else{if(Z.isKeyword(k))throw new D("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:k});if(k.match(A))return void(G.eventHandler&&B({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:k}},options:G}));if(""===k)throw new D("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:P})}const ve=w.mappings.get(k);w.mappings.has(k)&&w.mappings.delete(k);let Oe=!1;if((_(le)||null===le)&&(Oe=!0,le={"@id":le}),!R(le))throw new D("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:P});const Le={};w.mappings.set(k,Le),Le.reverse=!1;const Qe=["@container","@id","@language","@reverse","@type"];Z.processingMode(w,1.1)&&Qe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const He in le)if(!Qe.includes(He))throw new D("Invalid JSON-LD syntax; a term definition must not contain "+He,"jsonld.SyntaxError",{code:"invalid term definition",context:P});const qe=k.indexOf(":");if(Le._termHasColon=qe>0,"@reverse"in le){if("@id"in le)throw new D("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});if("@nest"in le)throw new D("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});const He=le["@reverse"];if(!_(He))throw new D("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(He.match(A))return G.eventHandler&&B({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:He}},options:G}),void(ve?w.mappings.set(k,ve):w.mappings.delete(k));const Me=$(w,He,{vocab:!0,base:!1},P,de,G);if(!T(Me))throw new D("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});Le["@id"]=Me,Le.reverse=!0}else if("@id"in le){let He=le["@id"];if(He&&!_(He))throw new D("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(null===He)Le["@id"]=null;else{if(!Z.isKeyword(He)&&He.match(A))return G.eventHandler&&B({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:He}},options:G}),void(ve?w.mappings.set(k,ve):w.mappings.delete(k));if(He!==k){if(He=$(w,He,{vocab:!0,base:!1},P,de,G),!T(He)&&!Z.isKeyword(He))throw new D("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(k.match(/(?::[^:])|\//)&&$(w,k,{vocab:!0,base:!1},P,new Map(de).set(k,!0),G)!==He)throw new D("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});Le["@id"]=He,Le._prefix=Oe&&!Le._termHasColon&&null!==He.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Le))if(Le._termHasColon){const He=k.substr(0,qe);if(P.hasOwnProperty(He)&&Z.createTermDefinition({activeCtx:w,localCtx:P,term:He,defined:de,options:G}),w.mappings.has(He)){const Me=k.substr(qe+1);Le["@id"]=w.mappings.get(He)["@id"]+Me}else Le["@id"]=k}else if("@type"===k)Le["@id"]=k;else{if(!("@vocab"in w))throw new D("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P,term:k});Le["@id"]=w["@vocab"]+k}if((!0===le["@protected"]||!0===de.get("@protected")&&!1!==le["@protected"])&&(w.protected[k]=!0,Le.protected=!0),de.set(k,!0),"@type"in le){let He=le["@type"];if(!_(He))throw new D("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if("@json"===He||"@none"===He){if(Z.processingMode(w,1))throw new D(`Invalid JSON-LD syntax; an @context @type value must not be "${He}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else if("@id"!==He&&"@vocab"!==He){if(He=$(w,He,{vocab:!0,base:!1},P,de,G),!T(He))throw new D("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if(0===He.indexOf("_:"))throw new D("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}Le["@type"]=He}if("@container"in le){const He=_(le["@container"])?[le["@container"]]:le["@container"]||[],Me=["@list","@set","@index","@language"];let Ue=!0;const fe=He.includes("@set");if(Z.processingMode(w,1.1)){if(Me.push("@graph","@id","@type"),He.includes("@list")){if(1!==He.length)throw new D("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else if(He.includes("@graph")){if(He.some(Ce=>"@graph"!==Ce&&"@id"!==Ce&&"@index"!==Ce&&"@set"!==Ce))throw new D("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else Ue&=He.length<=(fe?2:1);if(He.includes("@type")&&(Le["@type"]=Le["@type"]||"@id",!["@id","@vocab"].includes(Le["@type"])))throw new D("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else Ue&=!C(le["@container"]),Ue&=He.length<=1;if(Ue&=He.every(Ce=>Me.includes(Ce)),Ue&=!(fe&&He.includes("@list")),!Ue)throw new D("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Me.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:P});if(Le.reverse&&!He.every(Ce=>["@index","@set"].includes(Ce)))throw new D("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});Le["@container"]=He}if("@index"in le){if(!("@container"in le)||!Le["@container"].includes("@index"))throw new D(`Invalid JSON-LD syntax; @index without @index in @container: "${le["@index"]}" on term "${k}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});if(!_(le["@index"])||0===le["@index"].indexOf("@"))throw new D(`Invalid JSON-LD syntax; @index must expand to an IRI: "${le["@index"]}" on term "${k}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});Le["@index"]=le["@index"]}if("@context"in le&&(Le["@context"]=le["@context"]),"@language"in le&&!("@type"in le)){let He=le["@language"];if(null!==He&&!_(He))throw new D("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:P});null!==He&&(He=He.toLowerCase()),Le["@language"]=He}if("@prefix"in le){if(k.match(/:|\//))throw new D("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:P});if(Z.isKeyword(Le["@id"]))throw new D("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:P});if("boolean"!=typeof le["@prefix"])throw new D("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:P});Le._prefix=!0===le["@prefix"]}if("@direction"in le){const He=le["@direction"];if(null!==He&&"ltr"!==He&&"rtl"!==He)throw new D('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:P});Le["@direction"]=He}if("@nest"in le){const He=le["@nest"];if(!_(He)||"@nest"!==He&&0===He.indexOf("@"))throw new D("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:P});Le["@nest"]=He}const Te=Le["@id"];if("@context"===Te||"@preserve"===Te)throw new D("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:P});if(ve&&ve.protected&&!Ie&&(w.protected[k]=!0,Le.protected=!0,!H(ve,Le)))throw new D("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:P,term:k})},Z.expandIri=(w,P,k,de)=>$(w,P,k,void 0,void 0,de),Z.getInitialContext=w=>{const P=JSON.stringify({processingMode:w.processingMode}),k=K.get(P);if(k)return k;const de={processingMode:w.processingMode,mappings:new Map,inverse:null,getInverse:function G(){const Le=this;if(Le.inverse)return Le.inverse;const Qe=Le.inverse={},qe=Le.fastCurieMap={},Te={},He=(Le["@language"]||"@none").toLowerCase(),Me=Le["@direction"],Ue=Le.mappings,fe=[...Ue.keys()].sort(ce);for(const Ce of fe){const nt=Ue.get(Ce);if(null===nt)continue;let gt=nt["@container"]||"@none";if(gt=[].concat(gt).sort().join(""),null===nt["@id"])continue;const Je=F(nt["@id"]);for(const ge of Je){let L=Qe[ge];const I=Z.isKeyword(ge);if(L)!I&&!nt._termHasColon&&Te[ge].push(Ce);else if(Qe[ge]=L={},!I&&!nt._termHasColon){Te[ge]=[Ce];const ae={iri:ge,terms:Te[ge]};ge[0]in qe?qe[ge[0]].push(ae):qe[ge[0]]=[ae]}if(L[gt]||(L[gt]={"@language":{},"@type":{},"@any":{}}),L=L[gt],le(Ce,L["@any"],"@none"),nt.reverse)le(Ce,L["@type"],"@reverse");else if("@none"===nt["@type"])le(Ce,L["@any"],"@none"),le(Ce,L["@language"],"@none"),le(Ce,L["@type"],"@none");else if("@type"in nt)le(Ce,L["@type"],nt["@type"]);else if("@language"in nt&&"@direction"in nt){const ae=nt["@language"],ie=nt["@direction"];le(Ce,L["@language"],ae&&ie?`${ae}_${ie}`.toLowerCase():ae?ae.toLowerCase():ie?`_${ie}`:"@null")}else"@language"in nt?le(Ce,L["@language"],(nt["@language"]||"@null").toLowerCase()):"@direction"in nt?le(Ce,L["@language"],nt["@direction"]?`_${nt["@direction"]}`:"@none"):Me?(le(Ce,L["@language"],`_${Me}`),le(Ce,L["@language"],"@none"),le(Ce,L["@type"],"@none")):(le(Ce,L["@language"],He),le(Ce,L["@language"],"@none"),le(Ce,L["@type"],"@none"))}}for(const Ce in qe)Ie(qe,Ce,1);return Qe},clone:function ve(){const Le={};return Le.mappings=y.clone(this.mappings),Le.clone=this.clone,Le.inverse=null,Le.getInverse=this.getInverse,Le.protected=y.clone(this.protected),this.previousContext&&(Le.previousContext=this.previousContext.clone()),Le.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Le["@base"]=this["@base"]),"@language"in this&&(Le["@language"]=this["@language"]),"@vocab"in this&&(Le["@vocab"]=this["@vocab"]),Le},revertToPreviousContext:function Oe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===K.size&&K.clear(),K.set(P,de),de;function Ie(Le,Qe,qe){const Te=Le[Qe],He=Le[Qe]={};let Me,Ue;for(const fe of Te)Me=fe.iri,Ue=qe>=Me.length?"":Me[qe],Ue in He?He[Ue].push(fe):He[Ue]=[fe];for(const fe in He)""!==fe&&Ie(He,fe,qe+1)}function le(Le,Qe,qe){Qe.hasOwnProperty(qe)||(Qe[qe]=Le)}},Z.getContextValue=(w,P,k)=>{if(null===P)return"@context"===k?void 0:null;if(w.mappings.has(P)){const de=w.mappings.get(P);if(v(k))return de;if(de.hasOwnProperty(k))return de[k]}return"@language"===k&&k in w||"@direction"===k&&k in w?w[k]:"@context"!==k?null:void 0},Z.processingMode=(w,P)=>P.toString()>="1.1"?!w.processingMode||w.processingMode>="json-ld-"+P.toString():"json-ld-1.0"===w.processingMode,Z.isKeyword=w=>{if(!_(w)||"@"!==w[0])return!1;switch(w){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(ee,q,g)=>{"use strict";var M=g(7156).default;const{parseLinkHeader:y,buildHeaders:D}=g(3521),{LINK_HEADER_CONTEXT:C}=g(6982),R=g(1874),_=g(4044),{prependBase:v}=g(2651),T=/(^|(\r\n))link:/i;ee.exports=({secure:O,headers:B={},xhr:Q}={headers:{}})=>{return B=D(B),(new _).wrapLoader(F);function F(K){return ce.apply(this,arguments)}function ce(){return ce=M(function*(K){if(0!==K.indexOf("http:")&&0!==K.indexOf("https:"))throw new R('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:K});if(O&&0!==K.indexOf("https"))throw new R('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:K});let J;try{J=yield function j(O,B,Q){const A=new(O=O||XMLHttpRequest);return new Promise((F,ce)=>{A.onload=()=>F(A),A.onerror=K=>ce(K),A.open("GET",B,!0);for(const K in Q)A.setRequestHeader(K,Q[K]);A.send()})}(Q,K,B)}catch(P){throw new R("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:K,cause:P})}if(J.status>=400)throw new R("URL could not be dereferenced: "+J.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:K,httpStatusCode:J.status});let Z={contextUrl:null,documentUrl:K,document:J.response},$=null;const H=J.getResponseHeader("Content-Type");let w;if(T.test(J.getAllResponseHeaders())&&(w=J.getResponseHeader("Link")),w&&"application/ld+json"!==H){const P=y(w),k=P[C];if(Array.isArray(k))throw new R("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:K});k&&(Z.contextUrl=k.target),$=P.alternate,$&&"application/ld+json"==$.type&&!(H||"").match(/^application\/(\w*\+)?json$/)&&(Z=yield F(v(K,$.target)))}return Z}),ce.apply(this,arguments)}}},3855:(ee,q,g)=>{"use strict";const M=g(1874),{isArray:y}=g(8254),{asArray:D}=g(3521),C={};function R({event:v,handlers:T}){let j=!0;for(let O=0;j&&O<T.length;++O){j=!1;const B=T[O];if(y(B))j=R({event:v,handlers:B});else if("function"==typeof B)B({event:v,next:()=>{j=!0}});else{if("object"!=typeof B)throw new M("Invalid event handler.","jsonld.InvalidEventHandler",{event:v});v.code in B?B[v.code]({event:v,next:()=>{j=!0}}):j=!0}}return j}ee.exports=C,C.defaultEventHandler=null,C.setupEventHandler=({options:v={}})=>{const T=[].concat(v.safe?C.safeEventHandler:[],v.eventHandler?D(v.eventHandler):[],C.defaultEventHandler?C.defaultEventHandler:[]);return 0===T.length?null:T},C.handleEvent=({event:v,options:T})=>{R({event:v,handlers:T.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);C.safeEventHandler=function({event:T,next:j}){if("warning"===T.level&&_.has(T.code))throw new M("Safe mode validation error.","jsonld.ValidationError",{event:T});j()},C.logEventHandler=function({event:T,next:j}){console.log(`EVENT: ${T.message}`,{event:T}),j()},C.logWarningEventHandler=function({event:T,next:j}){"warning"===T.level&&console.warn(`WARNING: ${T.message}`,{event:T}),j()},C.unhandledEventHandler=function({event:T}){throw new M("No handler for event.","jsonld.UnhandledEvent",{event:T})},C.setDefaultEventHandler=function({eventHandler:v}={}){C.defaultEventHandler=v?D(v):null}},3860:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(1874),{isArray:D,isObject:C,isEmptyObject:R,isString:_,isUndefined:v}=g(8254),{isList:T,isValue:j,isGraph:O,isSubject:B}=g(543),{expandIri:Q,getContextValue:A,isKeyword:F,process:ce,processingMode:K}=g(9611),{isAbsolute:J}=g(2651),{REGEX_BCP47:Z,REGEX_KEYWORD:$,addValue:H,asArray:w,getValues:P,validateTypeValue:k}=g(3521),{handleEvent:de}=g(3855),G={};function Ie({value:Te,count:He,options:Me}){if(0===He||"@value"in Te||"@list"in Te||1===He&&"@id"in Te){if(Me.eventHandler){let Ue,fe;0===He?(Ue="empty object",fe="Dropping empty object."):"@value"in Te?(Ue="object with only @value",fe="Dropping object with only @value."):"@list"in Te?(Ue="object with only @list",fe="Dropping object with only @list."):1===He&&"@id"in Te&&(Ue="object with only @id",fe="Dropping object with only @id."),de({event:{type:["JsonLdEvent"],code:Ue,level:"warning",message:fe,details:{value:Te}},options:Me})}return null}return Te}function le(Te){return ve.apply(this,arguments)}function ve(){return(ve=M(function*({activeCtx:Te,activeProperty:He,expandedActiveProperty:Me,element:Ue,expandedParent:fe,options:Ce={},insideList:nt,typeKey:gt,typeScopedContext:Je}){const ge=Object.keys(Ue).sort(),L=[];let I;const ae=Ue[gt]&&"@json"===Q(Te,D(Ue[gt])?Ue[gt][0]:Ue[gt],{vocab:!0},{...Ce,typeExpansion:!0});for(const ie of ge){let Ze,Ge=Ue[ie];if("@context"===ie)continue;const pe=Q(Te,ie,{vocab:!0},Ce);if(null===pe||!J(pe)&&!F(pe)){Ce.eventHandler&&de({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:ie,expandedProperty:pe}},options:Ce});continue}if(F(pe)){if("@reverse"===Me)throw new y("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ge});if(pe in fe&&"@included"!==pe&&"@type"!==pe)throw new y("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:pe})}if("@id"===pe){if(!_(Ge)){if(!Ce.isFrame)throw new y('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ge});if(C(Ge)){if(!R(Ge))throw new y('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ge})}else{if(!D(Ge))throw new y('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ge});if(!Ge.every(U=>_(U)))throw new y('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ge})}}H(fe,"@id",w(Ge).map(U=>{if(_(U)){const me=Q(Te,U,{base:!0},Ce);return Ce.eventHandler&&(null===me?de(null===U?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:U}},options:Ce}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:U}},options:Ce}):J(me)||de({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:U,expandedId:me}},options:Ce})),me}return U}),{propertyIsArray:Ce.isFrame});continue}if("@type"===pe){C(Ge)&&(Ge=Object.fromEntries(Object.entries(Ge).map(([U,me])=>[Q(Je,U,{vocab:!0}),w(me).map(Ye=>Q(Je,Ye,{base:!0,vocab:!0},{...Ce,typeExpansion:!0}))]))),k(Ge,Ce.isFrame),H(fe,"@type",w(Ge).map(U=>{if(_(U)){const me=Q(Je,U,{base:!0,vocab:!0},{...Ce,typeExpansion:!0});return"@json"!==me&&!J(me)&&Ce.eventHandler&&de({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:U}},options:Ce}),me}return U}),{propertyIsArray:!!Ce.isFrame});continue}if("@included"===pe&&K(Te,1.1)){const U=w(yield G.expand({activeCtx:Te,activeProperty:He,element:Ge,options:Ce}));if(!U.every(me=>B(me)))throw new y("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Ge});H(fe,"@included",U,{propertyIsArray:!0});continue}if("@graph"===pe&&!C(Ge)&&!D(Ge))throw new y('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ge});if("@value"===pe){I=Ge,ae&&K(Te,1.1)?fe["@value"]=Ge:H(fe,"@value",Ge,{propertyIsArray:Ce.isFrame});continue}if("@language"===pe){if(null===Ge)continue;if(!_(Ge)&&!Ce.isFrame)throw new y('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ge});Ge=w(Ge).map(U=>_(U)?U.toLowerCase():U);for(const U of Ge)_(U)&&!U.match(Z)&&Ce.eventHandler&&de({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:U}},options:Ce});H(fe,"@language",Ge,{propertyIsArray:Ce.isFrame});continue}if("@direction"===pe){if(!_(Ge)&&!Ce.isFrame)throw new y('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Ge});Ge=w(Ge);for(const U of Ge)if(_(U)&&"ltr"!==U&&"rtl"!==U)throw new y('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Ge});H(fe,"@direction",Ge,{propertyIsArray:Ce.isFrame});continue}if("@index"===pe){if(!_(Ge))throw new y('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ge});H(fe,"@index",Ge);continue}if("@reverse"===pe){if(!C(Ge))throw new y('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ge});if(Ze=yield G.expand({activeCtx:Te,activeProperty:"@reverse",element:Ge,options:Ce}),"@reverse"in Ze)for(const me in Ze["@reverse"])H(fe,me,Ze["@reverse"][me],{propertyIsArray:!0});let U=fe["@reverse"]||null;for(const me in Ze){if("@reverse"===me)continue;null===U&&(U=fe["@reverse"]={}),H(U,me,[],{propertyIsArray:!0});const Ye=Ze[me];for(let ye=0;ye<Ye.length;++ye){const ze=Ye[ye];if(j(ze)||T(ze))throw new y('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ze});H(U,me,ze,{propertyIsArray:!0})}}continue}if("@nest"===pe){L.push(ie);continue}let re=Te;const Y=A(Te,ie,"@context");v(Y)||(re=yield ce({activeCtx:Te,localCtx:Y,propagate:!0,overrideProtected:!0,options:Ce}));const N=A(Te,ie,"@container")||[];if(N.includes("@language")&&C(Ge))Ze=Le(re,Ge,A(re,ie,"@direction"),Ce);else if(N.includes("@index")&&C(Ge)){const U=N.includes("@graph"),me=A(re,ie,"@index")||"@index",Ye="@index"!==me&&Q(Te,me,{vocab:!0},Ce);Ze=yield Qe({activeCtx:re,options:Ce,activeProperty:ie,value:Ge,asGraph:U,indexKey:me,propertyIndex:Ye})}else if(N.includes("@id")&&C(Ge)){const U=N.includes("@graph");Ze=yield Qe({activeCtx:re,options:Ce,activeProperty:ie,value:Ge,asGraph:U,indexKey:"@id"})}else if(N.includes("@type")&&C(Ge))Ze=yield Qe({activeCtx:re.revertToPreviousContext(),options:Ce,activeProperty:ie,value:Ge,asGraph:!1,indexKey:"@type"});else{const U="@list"===pe;if(U||"@set"===pe){let me=He;U&&"@graph"===Me&&(me=null),Ze=yield G.expand({activeCtx:re,activeProperty:me,element:Ge,options:Ce,insideList:U})}else Ze="@json"===A(Te,ie,"@type")?{"@type":"@json","@value":Ge}:yield G.expand({activeCtx:re,activeProperty:ie,element:Ge,options:Ce,insideList:!1})}if(null!==Ze||"@value"===pe){if("@list"!==pe&&!T(Ze)&&N.includes("@list")&&(Ze={"@list":w(Ze)}),N.includes("@graph")&&!N.some(U=>"@id"===U||"@index"===U)){if(Ze=w(Ze),Ce.isFrame||(Ze=Ze.filter(U=>null!==Ie({value:U,count:Object.keys(U).length,options:Ce}))),0===Ze.length)continue;Ze=Ze.map(U=>({"@graph":w(U)}))}if(re.mappings.has(ie)&&re.mappings.get(ie).reverse){const U=fe["@reverse"]=fe["@reverse"]||{};Ze=w(Ze);for(let me=0;me<Ze.length;++me){const Ye=Ze[me];if(j(Ye)||T(Ye))throw new y('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ze});H(U,pe,Ye,{propertyIsArray:!0})}continue}H(fe,pe,Ze,{propertyIsArray:!0})}}if("@value"in fe&&("@json"!==fe["@type"]||!K(Te,1.1))&&(C(I)||D(I))&&!Ce.isFrame)throw new y('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:I});for(const ie of L){const Ge=D(Ue[ie])?Ue[ie]:[Ue[ie]];for(const Ze of Ge){if(!C(Ze)||Object.keys(Ze).some(pe=>"@value"===Q(Te,pe,{vocab:!0},Ce)))throw new y("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Ze});yield le({activeCtx:Te,activeProperty:He,expandedActiveProperty:Me,element:Ze,expandedParent:fe,options:Ce,insideList:nt,typeScopedContext:Je,typeKey:gt})}}})).apply(this,arguments)}function Oe({activeCtx:Te,activeProperty:He,value:Me,options:Ue}){if(null==Me)return null;const fe=Q(Te,He,{vocab:!0},Ue);if("@id"===fe)return Q(Te,Me,{base:!0},Ue);if("@type"===fe)return Q(Te,Me,{vocab:!0,base:!0},{...Ue,typeExpansion:!0});const Ce=A(Te,He,"@type");if(("@id"===Ce||"@graph"===fe)&&_(Me)){const gt=Q(Te,Me,{base:!0},Ue);return null===gt&&Me.match($)&&Ue.eventHandler&&de({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:He}},options:Ue}),{"@id":gt}}if("@vocab"===Ce&&_(Me))return{"@id":Q(Te,Me,{vocab:!0,base:!0},Ue)};if(F(fe))return Me;const nt={};if(Ce&&!["@id","@vocab","@none"].includes(Ce))nt["@type"]=Ce;else if(_(Me)){const gt=A(Te,He,"@language");null!==gt&&(nt["@language"]=gt);const Je=A(Te,He,"@direction");null!==Je&&(nt["@direction"]=Je)}return["boolean","number","string"].includes(typeof Me)||(Me=Me.toString()),nt["@value"]=Me,nt}function Le(Te,He,Me,Ue){const fe=[],Ce=Object.keys(He).sort();for(const nt of Ce){const gt=Q(Te,nt,{vocab:!0},Ue);let Je=He[nt];D(Je)||(Je=[Je]);for(const ge of Je){if(null===ge)continue;if(!_(ge))throw new y("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:He});const L={"@value":ge};"@none"!==gt&&(nt.match(Z)||Ue.eventHandler&&de({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt}},options:Ue}),L["@language"]=nt.toLowerCase()),Me&&(L["@direction"]=Me),fe.push(L)}}return fe}function Qe(Te){return qe.apply(this,arguments)}function qe(){return(qe=M(function*({activeCtx:Te,options:He,activeProperty:Me,value:Ue,asGraph:fe,indexKey:Ce,propertyIndex:nt}){const gt=[],Je=Object.keys(Ue).sort(),ge="@type"===Ce;for(let L of Je){if(ge){const ie=A(Te,L,"@context");v(ie)||(Te=yield ce({activeCtx:Te,localCtx:ie,propagate:!1,options:He}))}let ae,I=Ue[L];D(I)||(I=[I]),I=yield G.expand({activeCtx:Te,activeProperty:Me,element:I,options:He,insideList:!1,insideIndex:!0}),ae=nt?"@none"===L?"@none":Oe({activeCtx:Te,activeProperty:Ce,value:L,options:He}):Q(Te,L,{vocab:!0},He),"@id"===Ce?L=Q(Te,L,{base:!0},He):ge&&(L=ae);for(let ie of I){if(fe&&!O(ie)&&(ie={"@graph":[ie]}),"@type"===Ce)"@none"===ae||(ie["@type"]=ie["@type"]?[L].concat(ie["@type"]):[L]);else{if(j(ie)&&!["@language","@type","@index"].includes(Ce))throw new y(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ce}".`,"jsonld.SyntaxError",{code:"invalid value object",value:ie});nt?"@none"!==ae&&H(ie,nt,ae,{propertyIsArray:!0,prependValue:!0}):"@none"!==ae&&!(Ce in ie)&&(ie[Ce]=L)}gt.push(ie)}}return gt})).apply(this,arguments)}ee.exports=G,G.expand=function(){var Te=M(function*({activeCtx:He,activeProperty:Me=null,element:Ue,options:fe={},insideList:Ce=!1,insideIndex:nt=!1,typeScopedContext:gt=null}){if(null==Ue)return null;if("@default"===Me&&(fe=Object.assign({},fe,{isFrame:!1})),!D(Ue)&&!C(Ue))return Ce||null!==Me&&"@graph"!==Q(He,Me,{vocab:!0},fe)?Oe({activeCtx:He,activeProperty:Me,value:Ue,options:fe}):(fe.eventHandler&&de({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Ue}},options:fe}),null);if(D(Ue)){let Ze=[];const pe=A(He,Me,"@container")||[];Ce=Ce||pe.includes("@list");for(let re=0;re<Ue.length;++re){let Y=yield G.expand({activeCtx:He,activeProperty:Me,element:Ue[re],options:fe,insideIndex:nt,typeScopedContext:gt});Ce&&D(Y)&&(Y={"@list":Y}),null!==Y&&(D(Y)?Ze=Ze.concat(Y):Ze.push(Y))}return Ze}const Je=Q(He,Me,{vocab:!0},fe),ge=A(He,Me,"@context");gt=gt||(He.previousContext?He:null);let L=Object.keys(Ue).sort(),I=!nt;if(I&&gt&&L.length<=2&&!L.includes("@context"))for(const Ze of L){const pe=Q(gt,Ze,{vocab:!0},fe);if("@value"===pe){I=!1,He=gt;break}if("@id"===pe&&1===L.length){I=!1;break}}I&&(He=He.revertToPreviousContext()),v(ge)||(He=yield ce({activeCtx:He,localCtx:ge,propagate:!0,overrideProtected:!0,options:fe})),"@context"in Ue&&(He=yield ce({activeCtx:He,localCtx:Ue["@context"],options:fe})),gt=He;let ae=null;for(const Ze of L)if("@type"===Q(He,Ze,{vocab:!0},fe)){ae=ae||Ze;const re=Ue[Ze],Y=Array.isArray(re)?re.length>1?re.slice().sort():re:[re];for(const N of Y){const U=A(gt,N,"@context");v(U)||(He=yield ce({activeCtx:He,localCtx:U,options:fe,propagate:!1}))}}let ie={};yield le({activeCtx:He,activeProperty:Me,expandedActiveProperty:Je,element:Ue,expandedParent:ie,options:fe,insideList:Ce,typeKey:ae,typeScopedContext:gt}),L=Object.keys(ie);let Ge=L.length;if("@value"in ie){if("@type"in ie&&("@language"in ie||"@direction"in ie))throw new y('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ie});let Ze=Ge-1;if("@type"in ie&&(Ze-=1),"@index"in ie&&(Ze-=1),"@language"in ie&&(Ze-=1),"@direction"in ie&&(Ze-=1),0!==Ze)throw new y('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ie});const pe=null===ie["@value"]?[]:w(ie["@value"]),re=P(ie,"@type");if(!K(He,1.1)||!re.includes("@json")||1!==re.length)if(0===pe.length)fe.eventHandler&&de({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:ie}},options:fe}),ie=null;else{if(!pe.every(Y=>_(Y)||R(Y))&&"@language"in ie)throw new y("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:ie});if(!re.every(Y=>J(Y)&&!(_(Y)&&0===Y.indexOf("_:"))||R(Y)))throw new y('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:ie})}}else if("@type"in ie&&!D(ie["@type"]))ie["@type"]=[ie["@type"]];else if("@set"in ie||"@list"in ie){if(Ge>1&&(2!==Ge||!("@index"in ie)))throw new y('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:ie});"@set"in ie&&(ie=ie["@set"],L=Object.keys(ie),Ge=L.length)}else 1===Ge&&"@language"in ie&&(fe.eventHandler&&de({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:ie}},options:fe}),ie=null);return C(ie)&&!fe.keepFreeFloatingNodes&&!Ce&&(null===Me||"@graph"===Je||(A(He,Me,"@container")||[]).includes("@graph"))&&(ie=Ie({value:ie,count:Ge,options:fe})),ie});return function(He){return Te.apply(this,arguments)}}()},8295:(ee,q,g)=>{"use strict";const{isSubjectReference:M}=g(543),{createMergedNodeMap:y}=g(9783),D={};ee.exports=D,D.flatten=C=>{const R=y(C),_=[],v=Object.keys(R).sort();for(let T=0;T<v.length;++T){const j=R[v[T]];M(j)||_.push(j)}return _}},9193:(ee,q,g)=>{"use strict";const{isKeyword:M}=g(9611),y=g(543),D=g(8254),C=g(3521),R=g(2651),_=g(1874),{createNodeMap:v,mergeNodeMapGraphs:T}=g(9783),j={};function O(w){const P={};for(const k in w)void 0!==w[k]&&(P["@"+k]=[w[k]]);return[P]}function B(w,P,k){for(let de=k.length-1;de>=0;--de){const G=k[de];if(G.graph===P&&G.subject["@id"]===w["@id"])return!0}return!1}function Q(w,P,k){const de="@"+k;let G=de in w?w[de][0]:P[k];if("embed"===k)if(!0===G)G="@once";else if(!1===G)G="@never";else if("@always"!==G&&"@never"!==G&&"@link"!==G&&"@first"!==G&&"@last"!==G&&"@once"!==G)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:w});return G}function A(w){if(!D.isArray(w)||1!==w.length||!D.isObject(w[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:w});if("@id"in w[0])for(const P of C.asArray(w[0]["@id"]))if(!D.isObject(P)&&!R.isAbsolute(P)||D.isString(P)&&0===P.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:w});if("@type"in w[0])for(const P of C.asArray(w[0]["@type"]))if(!D.isObject(P)&&!R.isAbsolute(P)&&"@json"!==P||D.isString(P)&&0===P.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:w})}function ce(w,P,k,de){let G=!0,Ie=!1;for(const le in k){let ve=!1;const Oe=C.getValues(P,le),Le=0===C.getValues(k,le).length;if("@id"===le){if(D.isEmptyObject(k["@id"][0]||{})?ve=!0:k["@id"].length>=0&&(ve=k["@id"].includes(Oe[0])),!de.requireAll)return ve}else if("@type"===le){if(G=!1,Le){if(Oe.length>0)return!1;ve=!0}else if(1===k["@type"].length&&D.isEmptyObject(k["@type"][0]))ve=Oe.length>0;else for(const Qe of k["@type"])ve=!(!D.isObject(Qe)||!("@default"in Qe))||ve||Oe.some(qe=>qe===Qe);if(!de.requireAll)return ve}else{if(M(le))continue;{const Qe=C.getValues(k,le)[0];let qe=!1;if(Qe&&(A([Qe]),qe="@default"in Qe),G=!1,0===Oe.length&&qe)continue;if(Oe.length>0&&Le)return!1;if(void 0===Qe){if(Oe.length>0)return!1;ve=!0}else if(y.isList(Qe)){const Te=Qe["@list"][0];if(y.isList(Oe[0])){const He=Oe[0]["@list"];y.isValue(Te)?ve=He.some(Me=>H(Te,Me)):(y.isSubject(Te)||y.isSubjectReference(Te))&&(ve=He.some(Me=>$(w,Te,Me,de)))}}else ve=y.isValue(Qe)?Oe.some(Te=>H(Qe,Te)):y.isSubjectReference(Qe)?Oe.some(Te=>$(w,Qe,Te,de)):!!D.isObject(Qe)&&Oe.length>0}}if(!ve&&de.requireAll)return!1;Ie=Ie||ve}return G||Ie}function K(w,P){const k=w.uniqueEmbeds[w.graph],de=k[P],G=de.parent,Ie=de.property,le={"@id":P};if(D.isArray(G)){for(let Oe=0;Oe<G.length;++Oe)if(C.compareValues(G[Oe],le)){G[Oe]=le;break}}else{const Oe=D.isArray(G[Ie]);C.removeValue(G,Ie,le,{propertyIsArray:Oe}),C.addValue(G,Ie,le,{propertyIsArray:Oe})}const ve=Oe=>{const Le=Object.keys(k);for(const Qe of Le)Qe in k&&D.isObject(k[Qe].parent)&&k[Qe].parent["@id"]===Oe&&(delete k[Qe],ve(Qe))};ve(P)}function J(w,P){if(D.isArray(w))return w.map(k=>J(k,P));if(D.isObject(w)){if("@preserve"in w)return w["@preserve"][0];if(y.isValue(w))return w;if(y.isList(w))return w["@list"]=J(w["@list"],P),w;if("@id"in w){const k=w["@id"];if(P.link.hasOwnProperty(k)){const de=P.link[k].indexOf(w);if(-1!==de)return P.link[k][de];P.link[k].push(w)}else P.link[k]=[w]}for(const k in w)"@id"===k&&P.bnodesToClear.includes(w[k])?delete w["@id"]:w[k]=J(w[k],P)}return w}function Z(w,P,k){D.isObject(w)?C.addValue(w,P,k,{propertyIsArray:!0}):w.push(k)}function $(w,P,k,de){if(!("@id"in k))return!1;const G=w.subjects[k["@id"]];return G&&ce(w,G,P,de)}function H(w,P){const k=P["@value"],de=P["@type"],G=P["@language"],Ie=w["@value"]?D.isArray(w["@value"])?w["@value"]:[w["@value"]]:[],le=w["@type"]?D.isArray(w["@type"])?w["@type"]:[w["@type"]]:[],ve=w["@language"]?D.isArray(w["@language"])?w["@language"]:[w["@language"]]:[];return 0===Ie.length&&0===le.length&&0===ve.length||!(!Ie.includes(k)&&!D.isEmptyObject(Ie[0])||!(!de&&0===le.length||le.includes(de)||de&&D.isEmptyObject(le[0]))||!(!G&&0===ve.length||ve.includes(G)||G&&D.isEmptyObject(ve[0])))}ee.exports=j,j.frameMergedOrDefault=(w,P,k)=>{const de={options:k,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},G=new C.IdentifierIssuer("_:b");v(w,de.graphMap,"@default",G),k.merged&&(de.graphMap["@merged"]=T(de.graphMap),de.graph="@merged"),de.subjects=de.graphMap[de.graph];const Ie=[];return j.frame(de,Object.keys(de.subjects).sort(),P,Ie),k.pruneBlankNodeIdentifiers&&(k.bnodesToClear=Object.keys(de.bnodeMap).filter(le=>1===de.bnodeMap[le].length)),k.link={},J(Ie,k)},j.frame=(w,P,k,de,G=null)=>{A(k);const Ie=w.options,le={embed:Q(k=k[0],Ie,"embed"),explicit:Q(k,Ie,"explicit"),requireAll:Q(k,Ie,"requireAll")};w.link.hasOwnProperty(w.graph)||(w.link[w.graph]={});const ve=w.link[w.graph],Oe=function F(w,P,k,de){const G={};for(const Ie of P){const le=w.graphMap[w.graph][Ie];ce(w,le,k,de)&&(G[Ie]=le)}return G}(w,P,k,le),Le=Object.keys(Oe).sort();for(const Qe of Le){const qe=Oe[Qe];if(null===G?w.uniqueEmbeds={[w.graph]:{}}:w.uniqueEmbeds[w.graph]=w.uniqueEmbeds[w.graph]||{},"@link"===le.embed&&Qe in ve){Z(de,G,ve[Qe]);continue}const Te={"@id":Qe};if(0===Qe.indexOf("_:")&&C.addValue(w.bnodeMap,Qe,Te,{propertyIsArray:!0}),ve[Qe]=Te,("@first"===le.embed||"@last"===le.embed)&&w.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:k});if(w.embedded||!w.uniqueEmbeds[w.graph].hasOwnProperty(Qe)){if(w.embedded&&("@never"===le.embed||B(qe,w.graph,w.subjectStack))){Z(de,G,Te);continue}if(w.embedded&&("@first"==le.embed||"@once"==le.embed)&&w.uniqueEmbeds[w.graph].hasOwnProperty(Qe)){Z(de,G,Te);continue}if("@last"===le.embed&&Qe in w.uniqueEmbeds[w.graph]&&K(w,Qe),w.uniqueEmbeds[w.graph][Qe]={parent:de,property:G},w.subjectStack.push({subject:qe,graph:w.graph}),Qe in w.graphMap){let He=!1,Me=null;"@graph"in k?(Me=k["@graph"][0],He=!("@merged"===Qe||"@default"===Qe),D.isObject(Me)||(Me={})):(He="@merged"!==w.graph,Me={}),He&&j.frame({...w,graph:Qe,embedded:!1},Object.keys(w.graphMap[Qe]).sort(),[Me],Te,"@graph")}"@included"in k&&j.frame({...w,embedded:!1},P,k["@included"],Te,"@included");for(const He of Object.keys(qe).sort())if(M(He)){if(Te[He]=C.clone(qe[He]),"@type"===He)for(const Me of qe["@type"])0===Me.indexOf("_:")&&C.addValue(w.bnodeMap,Me,Te,{propertyIsArray:!0})}else if(!le.explicit||He in k)for(const Me of qe[He]){const Ue=He in k?k[He]:O(le);if(y.isList(Me)){const fe=k[He]&&k[He][0]&&k[He][0]["@list"]?k[He][0]["@list"]:O(le),Ce={"@list":[]};Z(Te,He,Ce);const nt=Me["@list"];for(const gt of nt)y.isSubjectReference(gt)?j.frame({...w,embedded:!0},[gt["@id"]],fe,Ce,"@list"):Z(Ce,"@list",C.clone(gt))}else y.isSubjectReference(Me)?j.frame({...w,embedded:!0},[Me["@id"]],Ue,Te,He):H(Ue[0],Me)&&Z(Te,He,C.clone(Me))}for(const He of Object.keys(k).sort()){if("@type"===He){if(!D.isObject(k[He][0])||!("@default"in k[He][0]))continue}else if(M(He))continue;const Me=k[He][0]||{};if(!Q(Me,Ie,"omitDefault")&&!(He in Te)){let fe="@null";"@default"in Me&&(fe=C.clone(Me["@default"])),D.isArray(fe)||(fe=[fe]),Te[He]=[{"@preserve":fe}]}}for(const He of Object.keys(k["@reverse"]||{}).sort()){const Me=k["@reverse"][He];for(const Ue of Object.keys(w.subjects))C.getValues(w.subjects[Ue],He).some(Ce=>Ce["@id"]===Qe)&&(Te["@reverse"]=Te["@reverse"]||{},C.addValue(Te["@reverse"],He,[],{propertyIsArray:!0}),j.frame({...w,embedded:!0},[Ue],Me,Te["@reverse"][He],G))}Z(de,G,Te),w.subjectStack.pop()}}},j.cleanupNull=(w,P)=>{if(D.isArray(w))return w.map(de=>j.cleanupNull(de,P)).filter(de=>de);if("@null"===w)return null;if(D.isObject(w)){if("@id"in w){const k=w["@id"];if(P.link.hasOwnProperty(k)){const de=P.link[k].indexOf(w);if(-1!==de)return P.link[k][de];P.link[k].push(w)}else P.link[k]=[w]}for(const k in w)w[k]=j.cleanupNull(w[k],P)}return w}},9767:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(1874),D=g(543),C=g(8254),{REGEX_BCP47:R,addValue:_}=g(3521),{handleEvent:v}=g(3855),{RDF_LIST:T,RDF_FIRST:j,RDF_REST:O,RDF_NIL:B,RDF_TYPE:Q,RDF_JSON_LITERAL:A,XSD_BOOLEAN:F,XSD_DOUBLE:ce,XSD_INTEGER:K,XSD_STRING:J}=g(6982),Z={};function $(H,w,P,k){if(H.termType.endsWith("Node"))return{"@id":H.value};const de={"@value":H.value};if(H.language)H.language.match(R)||k.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:H.language}},options:k}),de["@language"]=H.language;else{let G=H.datatype.value;if(G||(G=J),G===A){G="@json";try{de["@value"]=JSON.parse(de["@value"])}catch(Ie){throw new y("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:de["@value"],cause:Ie})}}if(w){if(G===F)"true"===de["@value"]?de["@value"]=!0:"false"===de["@value"]&&(de["@value"]=!1);else if(C.isNumeric(de["@value"]))if(G===K){const Ie=parseInt(de["@value"],10);Ie.toFixed(0)===de["@value"]&&(de["@value"]=Ie)}else G===ce&&(de["@value"]=parseFloat(de["@value"]));[F,K,ce,J].includes(G)||(de["@type"]=G)}else if("i18n-datatype"===P&&G.startsWith("https://www.w3.org/ns/i18n#")){const[,Ie,le]=G.split(/[#_]/);Ie.length>0&&(de["@language"]=Ie,Ie.match(R)||k.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ie}},options:k})),de["@direction"]=le}else G!==J&&(de["@type"]=G)}return de}ee.exports=Z,Z.fromRDF=function(){var H=M(function*(w,P){const{useRdfType:k=!1,useNativeTypes:de=!1,rdfDirection:G=null}=P,Ie={},le={"@default":Ie},ve={};if(G){if("compound-literal"===G)throw new y("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:G});if("i18n-datatype"!==G)throw new y("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:G})}for(const Qe of w){const qe="DefaultGraph"===Qe.graph.termType?"@default":Qe.graph.value;qe in le||(le[qe]={}),"@default"!==qe&&!(qe in Ie)&&(Ie[qe]={"@id":qe});const Te=le[qe],He=Qe.subject.value,Me=Qe.predicate.value,Ue=Qe.object;He in Te||(Te[He]={"@id":He});const fe=Te[He],Ce=Ue.termType.endsWith("Node");if(Ce&&!(Ue.value in Te)&&(Te[Ue.value]={"@id":Ue.value}),Me===Q&&!k&&Ce){_(fe,"@type",Ue.value,{propertyIsArray:!0});continue}const nt=$(Ue,de,G,P);if(_(fe,Me,nt,{propertyIsArray:!0}),Ce)if(Ue.value===B){const gt=Te[Ue.value];"usages"in gt||(gt.usages=[]),gt.usages.push({node:fe,property:Me,value:nt})}else ve[Ue.value]=!(Ue.value in ve)&&{node:fe,property:Me,value:nt}}for(const Qe in le){const qe=le[Qe];if(!(B in qe))continue;const Te=qe[B];if(Te.usages){for(let He of Te.usages){let Me=He.node,Ue=He.property,fe=He.value;const Ce=[],nt=[];let gt=Object.keys(Me).length;for(;Ue===O&&C.isObject(ve[Me["@id"]])&&C.isArray(Me[j])&&1===Me[j].length&&C.isArray(Me[O])&&1===Me[O].length&&(3===gt||4===gt&&C.isArray(Me["@type"])&&1===Me["@type"].length&&Me["@type"][0]===T)&&(Ce.push(Me[j][0]),nt.push(Me["@id"]),He=ve[Me["@id"]],Me=He.node,Ue=He.property,fe=He.value,gt=Object.keys(Me).length,D.isBlankNode(Me)););delete fe["@id"],fe["@list"]=Ce.reverse();for(const Je of nt)delete qe[Je]}delete Te.usages}}const Oe=[],Le=Object.keys(Ie).sort();for(const Qe of Le){const qe=Ie[Qe];if(Qe in le){const Te=qe["@graph"]=[],He=le[Qe],Me=Object.keys(He).sort();for(const Ue of Me){const fe=He[Ue];D.isSubjectReference(fe)||Te.push(fe)}}D.isSubjectReference(qe)||Oe.push(qe)}return Oe});return function(w,P){return H.apply(this,arguments)}}()},543:(ee,q,g)=>{"use strict";const M=g(8254),y={};ee.exports=y,y.isSubject=D=>!(!M.isObject(D)||"@value"in D||"@set"in D||"@list"in D)&&(Object.keys(D).length>1||!("@id"in D)),y.isSubjectReference=D=>M.isObject(D)&&1===Object.keys(D).length&&"@id"in D,y.isValue=D=>M.isObject(D)&&"@value"in D,y.isList=D=>M.isObject(D)&&"@list"in D,y.isGraph=D=>M.isObject(D)&&"@graph"in D&&1===Object.keys(D).filter(C=>"@id"!==C&&"@index"!==C).length,y.isSimpleGraph=D=>y.isGraph(D)&&!("@id"in D),y.isBlankNode=D=>{if(M.isObject(D)){if("@id"in D){const C=D["@id"];return!M.isString(C)||0===C.indexOf("_:")}return 0===Object.keys(D).length||!("@value"in D||"@set"in D||"@list"in D)}return!1}},7661:(ee,q,g)=>{var M=g(7156).default;const y=g(1986),D=g(8924),C=g(3521),R=g(4198),_=C.IdentifierIssuer,v=g(1874),T=g(1072),j=g(7260),{expand:O}=g(3860),{flatten:B}=g(8295),{fromRDF:Q}=g(9767),{toRDF:A}=g(240),{frameMergedOrDefault:F,cleanupNull:ce}=g(9193),{isArray:K,isObject:J,isString:Z}=g(8254),{isSubjectReference:$}=g(543),{expandIri:H,getInitialContext:w,process:P,processingMode:k}=g(9611),{compact:de,compactIri:G}=g(8809),{createNodeMap:Ie,createMergedNodeMap:le,mergeNodeMaps:ve}=g(9783),{logEventHandler:Oe,logWarningEventHandler:Le,safeEventHandler:Qe,setDefaultEventHandler:qe,setupEventHandler:Te,strictEventHandler:He,unhandledEventHandler:Me}=g(3855),Ue=function(Ce){const nt={},Je=new T({max:100});function ge(L,{documentLoader:I=Ce.documentLoader,...ae}){if(L&&"compactionMap"in L)throw new v('"compactionMap" not supported.',"jsonld.OptionsError");if(L&&"expansionMap"in L)throw new v('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:I},ae,L,{eventHandler:Te({options:L})})}return Ce.compact=function(){var L=M(function*(I,ae,ie){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ae)throw new v("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===I)return null;let Ge;(ie=ge(ie,{base:Z(I)?I:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new R({sharedCache:Je})})).link&&(ie.skipExpansion=!0),ie.compactToRelative||delete ie.base,Ge=ie.skipExpansion?I:yield Ce.expand(I,ie);const Ze=yield Ce.processContext(w(ie),ae,ie);let pe=yield de({activeCtx:Ze,element:Ge,options:ie});ie.compactArrays&&!ie.graph&&K(pe)?1===pe.length?pe=pe[0]:0===pe.length&&(pe={}):ie.graph&&J(pe)&&(pe=[pe]),J(ae)&&"@context"in ae&&(ae=ae["@context"]),ae=C.clone(ae),K(ae)||(ae=[ae]);const re=ae;ae=[];for(let N=0;N<re.length;++N)(!J(re[N])||Object.keys(re[N]).length>0)&&ae.push(re[N]);const Y=ae.length>0;if(1===ae.length&&(ae=ae[0]),K(pe)){const N=G({activeCtx:Ze,iri:"@graph",relativeTo:{vocab:!0}}),U=pe;pe={},Y&&(pe["@context"]=ae),pe[N]=U}else if(J(pe)&&Y){const N=pe;pe={"@context":ae};for(const U in N)pe[U]=N[U]}return pe});return function(I,ae,ie){return L.apply(this,arguments)}}(),Ce.expand=function(){var L=M(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const ie={},Ge=[];if("expandContext"in(ae=ge(ae,{keepFreeFloatingNodes:!1,contextResolver:new R({sharedCache:Je})}))){const Y=C.clone(ae.expandContext);ie.expandContext=J(Y)&&"@context"in Y?Y:{"@context":Y},Ge.push(ie.expandContext)}let Ze;if(Z(I)){const Y=yield Ce.get(I,ae);Ze=Y.documentUrl,ie.input=Y.document,Y.contextUrl&&(ie.remoteContext={"@context":Y.contextUrl},Ge.push(ie.remoteContext))}else ie.input=C.clone(I);"base"in ae||(ae.base=Ze||"");let pe=w(ae);for(const Y of Ge)pe=yield P({activeCtx:pe,localCtx:Y,options:ae});let re=yield O({activeCtx:pe,element:ie.input,options:ae});return J(re)&&"@graph"in re&&1===Object.keys(re).length?re=re["@graph"]:null===re&&(re=[]),K(re)||(re=[re]),re});return function(I,ae){return L.apply(this,arguments)}}(),Ce.flatten=function(){var L=M(function*(I,ae,ie){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ae="function"==typeof ae?null:ae||null,ie=ge(ie,{base:Z(I)?I:"",contextResolver:new R({sharedCache:Je})});const Ge=yield Ce.expand(I,ie),Ze=B(Ge);return null===ae?Ze:(ie.graph=!0,ie.skipExpansion=!0,yield Ce.compact(Ze,ae,ie))});return function(I,ae,ie){return L.apply(this,arguments)}}(),Ce.frame=function(){var L=M(function*(I,ae,ie){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(ie=ge(ie,{base:Z(I)?I:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new R({sharedCache:Je})}),Z(ae)){const Ye=yield Ce.get(ae,ie);if(ae=Ye.document,Ye.contextUrl){let ye=ae["@context"];ye?K(ye)?ye.push(Ye.contextUrl):ye=[ye,Ye.contextUrl]:ye=Ye.contextUrl,ae["@context"]=ye}}const Ge=ae&&ae["@context"]||{},Ze=yield Ce.processContext(w(ie),Ge,ie);ie.hasOwnProperty("omitGraph")||(ie.omitGraph=k(Ze,1.1)),ie.hasOwnProperty("pruneBlankNodeIdentifiers")||(ie.pruneBlankNodeIdentifiers=k(Ze,1.1));const pe=yield Ce.expand(I,ie),re={...ie};re.isFrame=!0,re.keepFreeFloatingNodes=!0;const Y=yield Ce.expand(ae,re),N=Object.keys(ae).map(Ye=>H(Ze,Ye,{vocab:!0}));re.merged=!N.includes("@graph"),re.is11=k(Ze,1.1);const U=F(pe,Y,re);re.graph=!ie.omitGraph,re.skipExpansion=!0,re.link={},re.framing=!0;let me=yield Ce.compact(U,Ge,re);return re.link={},me=ce(me,re),me});return function(I,ae,ie){return L.apply(this,arguments)}}(),Ce.link=function(){var L=M(function*(I,ae,ie){const Ge={};return ae&&(Ge["@context"]=ae),Ge["@embed"]="@link",Ce.frame(I,Ge,ie)});return function(I,ae,ie){return L.apply(this,arguments)}}(),Ce.normalize=Ce.canonize=function(){var L=M(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ae=ge(ae,{base:Z(I)?I:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new R({sharedCache:Je})}))){if("application/n-quads"!==ae.inputFormat&&"application/nquads"!==ae.inputFormat)throw new v("Unknown canonicalization input format.","jsonld.CanonizeError");const Ze=j.parse(I);return y.canonize(Ze,ae)}const ie={...ae};delete ie.format,ie.produceGeneralizedRdf=!1;const Ge=yield Ce.toRDF(I,ie);return y.canonize(Ge,ae)});return function(I,ae){return L.apply(this,arguments)}}(),Ce.fromRDF=function(){var L=M(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ae=ge(ae,{format:Z(I)?"application/n-quads":void 0});const{format:ie}=ae;let{rdfParser:Ge}=ae;if(ie){if(Ge=Ge||nt[ie],!Ge)throw new v("Unknown input format.","jsonld.UnknownFormat",{format:ie})}else Ge=()=>I;const Ze=yield Ge(I);return Q(Ze,ae)});return function(I,ae){return L.apply(this,arguments)}}(),Ce.toRDF=function(){var L=M(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let ie;ie=(ae=ge(ae,{base:Z(I)?I:"",skipExpansion:!1,contextResolver:new R({sharedCache:Je})})).skipExpansion?I:yield Ce.expand(I,ae);const Ge=A(ie,ae);if(ae.format){if("application/n-quads"===ae.format||"application/nquads"===ae.format)return j.serialize(Ge);throw new v("Unknown output format.","jsonld.UnknownFormat",{format:ae.format})}return Ge});return function(I,ae){return L.apply(this,arguments)}}(),Ce.createNodeMap=function(){var L=M(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ae=ge(ae,{base:Z(I)?I:"",contextResolver:new R({sharedCache:Je})});const ie=yield Ce.expand(I,ae);return le(ie,ae)});return function(I,ae){return L.apply(this,arguments)}}(),Ce.merge=function(){var L=M(function*(I,ae,ie){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!K(I))throw new TypeError('Could not merge, "docs" must be an array.');ae="function"==typeof ae?null:ae||null,ie=ge(ie,{contextResolver:new R({sharedCache:Je})});const Ge=yield Promise.all(I.map(Ye=>{const ye={...ie};return Ce.expand(Ye,ye)}));let Ze=!0;"mergeNodes"in ie&&(Ze=ie.mergeNodes);const pe=ie.issuer||new _("_:b"),re={"@default":{}};for(let Ye=0;Ye<Ge.length;++Ye){const ye=C.relabelBlankNodes(Ge[Ye],{issuer:new _("_:b"+Ye+"-")}),ze=Ze||0===Ye?re:{"@default":{}};if(Ie(ye,ze,"@default",pe),ze!==re)for(const st in ze){const bt=ze[st];if(!(st in re)){re[st]=bt;continue}const At=re[st];for(const xt in bt)xt in At||(At[xt]=bt[xt])}}const Y=ve(re),N=[],U=Object.keys(Y).sort();for(let Ye=0;Ye<U.length;++Ye){const ye=Y[U[Ye]];$(ye)||N.push(ye)}return null===ae?N:(ie.graph=!0,ie.skipExpansion=!0,yield Ce.compact(N,ae,ie))});return function(I,ae,ie){return L.apply(this,arguments)}}(),Object.defineProperty(Ce,"documentLoader",{get:()=>Ce._documentLoader,set:L=>Ce._documentLoader=L}),Ce.documentLoader=function(){var L=M(function*(I){throw new v("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:I})});return function(I){return L.apply(this,arguments)}}(),Ce.get=function(){var L=M(function*(I,ae){let ie;ie="function"==typeof ae.documentLoader?ae.documentLoader:Ce.documentLoader;const Ge=yield ie(I);try{if(!Ge.document)throw new v("No remote document found at the given URL.","jsonld.NullRemoteDocument");Z(Ge.document)&&(Ge.document=JSON.parse(Ge.document))}catch(Ze){throw new v("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ze,remoteDoc:Ge})}return Ge});return function(I,ae){return L.apply(this,arguments)}}(),Ce.processContext=function(){var L=M(function*(I,ae,ie){return ie=ge(ie,{base:"",contextResolver:new R({sharedCache:Je})}),null===ae?w(ie):(ae=C.clone(ae),J(ae)&&"@context"in ae||(ae={"@context":ae}),P({activeCtx:I,localCtx:ae,options:ie}))});return function(I,ae,ie){return L.apply(this,arguments)}}(),Ce.getContextValue=g(9611).getContextValue,Ce.documentLoaders={},Ce.useDocumentLoader=function(L){if(!(L in Ce.documentLoaders))throw new v('Unknown document loader type: "'+L+'"',"jsonld.UnknownDocumentLoader",{type:L});Ce.documentLoader=Ce.documentLoaders[L].apply(Ce,Array.prototype.slice.call(arguments,1))},Ce.registerRDFParser=function(L,I){nt[L]=I},Ce.unregisterRDFParser=function(L){delete nt[L]},Ce.registerRDFParser("application/n-quads",j.parse),Ce.registerRDFParser("application/nquads",j.parse),Ce.url=g(2651),Ce.logEventHandler=Oe,Ce.logWarningEventHandler=Le,Ce.safeEventHandler=Qe,Ce.setDefaultEventHandler=qe,Ce.strictEventHandler=He,Ce.unhandledEventHandler=Me,Ce.util=C,Object.assign(Ce,C),Ce.promises=Ce,Ce.RequestQueue=g(4044),Ce.JsonLdProcessor=g(1828)(Ce),D.setupGlobals(Ce),D.setupDocumentLoaders(Ce),Ce},fe=function(){return Ue(function(){return fe()})};Ue(fe),ee.exports=fe},9783:(ee,q,g)=>{"use strict";const{isKeyword:M}=g(9611),y=g(543),D=g(8254),C=g(3521),R=g(1874),_={};ee.exports=_,_.createMergedNodeMap=(v,T)=>{const j=(T=T||{}).issuer||new C.IdentifierIssuer("_:b"),O={"@default":{}};return _.createNodeMap(v,O,"@default",j),_.mergeNodeMaps(O)},_.createNodeMap=(v,T,j,O,B,Q)=>{if(D.isArray(v)){for(const K of v)_.createNodeMap(K,T,j,O,void 0,Q);return}if(!D.isObject(v))return void(Q&&Q.push(v));if(y.isValue(v)){if("@type"in v){let K=v["@type"];0===K.indexOf("_:")&&(v["@type"]=K=O.getId(K))}return void(Q&&Q.push(v))}if(Q&&y.isList(v)){const K=[];return _.createNodeMap(v["@list"],T,j,O,B,K),void Q.push({"@list":K})}if("@type"in v){const K=v["@type"];for(const J of K)0===J.indexOf("_:")&&O.getId(J)}D.isUndefined(B)&&(B=y.isBlankNode(v)?O.getId(v["@id"]):v["@id"]),Q&&Q.push({"@id":B});const A=T[j],F=A[B]=A[B]||{};F["@id"]=B;const ce=Object.keys(v).sort();for(let K of ce){if("@id"===K)continue;if("@reverse"===K){const Z={"@id":B},$=v["@reverse"];for(const H in $){const w=$[H];for(const P of w){let k=P["@id"];y.isBlankNode(P)&&(k=O.getId(k)),_.createNodeMap(P,T,j,O,k),C.addValue(A[k],H,Z,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===K){B in T||(T[B]={}),_.createNodeMap(v[K],T,B,O);continue}if("@included"===K){_.createNodeMap(v[K],T,j,O);continue}if("@type"!==K&&M(K)){if("@index"===K&&K in F&&(v[K]!==F[K]||v[K]["@id"]!==F[K]["@id"]))throw new R("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:F});F[K]=v[K];continue}const J=v[K];if(0===K.indexOf("_:")&&(K=O.getId(K)),0!==J.length)for(let Z of J)if("@type"===K&&(Z=0===Z.indexOf("_:")?O.getId(Z):Z),y.isSubject(Z)||y.isSubjectReference(Z)){if("@id"in Z&&!Z["@id"])continue;const $=y.isBlankNode(Z)?O.getId(Z["@id"]):Z["@id"];C.addValue(F,K,{"@id":$},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(Z,T,j,O,$)}else if(y.isValue(Z))C.addValue(F,K,Z,{propertyIsArray:!0,allowDuplicate:!1});else if(y.isList(Z)){const $=[];_.createNodeMap(Z["@list"],T,j,O,B,$),Z={"@list":$},C.addValue(F,K,Z,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(Z,T,j,O,B),C.addValue(F,K,Z,{propertyIsArray:!0,allowDuplicate:!1});else C.addValue(F,K,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=v=>{const T={};for(const j of Object.keys(v).sort())for(const O of Object.keys(v[j]).sort()){const B=v[j][O];O in T||(T[O]={"@id":O});const Q=T[O];for(const A of Object.keys(B).sort())if(M(A)&&"@type"!==A)Q[A]=C.clone(B[A]);else for(const F of B[A])C.addValue(Q,A,C.clone(F),{propertyIsArray:!0,allowDuplicate:!1})}return T},_.mergeNodeMaps=v=>{const T=v["@default"],j=Object.keys(v).sort();for(const O of j){if("@default"===O)continue;const B=v[O];let Q=T[O];Q?"@graph"in Q||(Q["@graph"]=[]):T[O]=Q={"@id":O,"@graph":[]};const A=Q["@graph"];for(const F of Object.keys(B).sort()){const ce=B[F];y.isSubjectReference(ce)||A.push(ce)}}return T}},8924:(ee,q,g)=>{"use strict";const M=g(627),y={};ee.exports=y,y.setupDocumentLoaders=function(D){typeof XMLHttpRequest<"u"&&(D.documentLoaders.xhr=M,D.useDocumentLoader("xhr"))},y.setupGlobals=function(D){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:D.JsonLdProcessor})}},240:(ee,q,g)=>{"use strict";const{createNodeMap:M}=g(9783),{isKeyword:y}=g(9611),D=g(543),C=g(5041),R=g(1874),_=g(8254),v=g(3521),{handleEvent:T}=g(3855),{RDF_FIRST:j,RDF_REST:O,RDF_NIL:B,RDF_TYPE:Q,RDF_JSON_LITERAL:A,RDF_LANGSTRING:F,XSD_BOOLEAN:ce,XSD_DOUBLE:K,XSD_INTEGER:J,XSD_STRING:Z}=g(6982),{isAbsolute:$}=g(2651),H={};function w(de,G,Ie,le,ve){const Oe=Object.keys(G).sort();for(const Le of Oe){const Qe=G[Le],qe=Object.keys(Qe).sort();for(let Te of qe){const He=Qe[Te];if("@type"===Te)Te=Q;else if(y(Te))continue;for(const Me of He){const Ue={termType:Le.startsWith("_:")?"BlankNode":"NamedNode",value:Le};if(!$(Le)){ve.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Le}},options:ve});continue}const fe={termType:Te.startsWith("_:")?"BlankNode":"NamedNode",value:Te};if(!$(Te)){ve.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Te}},options:ve});continue}if("BlankNode"===fe.termType&&!ve.produceGeneralizedRdf){ve.eventHandler&&T({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:le.getOldIds().find(nt=>le.getId(nt)===Te)}},options:ve});continue}const Ce=k(Me,le,de,Ie,ve.rdfDirection,ve);Ce&&de.push({subject:Ue,predicate:fe,object:Ce,graph:Ie})}}}}function k(de,G,Ie,le,ve,Oe){const Le={};if(D.isValue(de)){Le.termType="Literal",Le.value=void 0,Le.datatype={termType:"NamedNode"};let Qe=de["@value"];const qe=de["@type"]||null;if("@json"===qe)Le.value=C(Qe),Le.datatype.value=A;else if(_.isBoolean(Qe))Le.value=Qe.toString(),Le.datatype.value=qe||ce;else if(_.isDouble(Qe)||qe===K)_.isDouble(Qe)||(Qe=parseFloat(Qe)),Le.value=Qe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Le.datatype.value=qe||K;else if(_.isNumber(Qe))Le.value=Qe.toFixed(0),Le.datatype.value=qe||J;else if("@direction"in de&&"i18n-datatype"===ve){const Te=(de["@language"]||"").toLowerCase();Le.datatype.value=`https://www.w3.org/ns/i18n#${Te}_${de["@direction"]}`,Le.value=Qe}else{if("@direction"in de&&"compound-literal"===ve)throw new R("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:ve});if("@direction"in de&&ve)throw new R("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:ve});"@language"in de?("@direction"in de&&!ve&&Oe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Le.value}},options:Oe}),Le.value=Qe,Le.datatype.value=qe||F,Le.language=de["@language"]):("@direction"in de&&!ve&&Oe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Le.value}},options:Oe}),Le.value=Qe,Le.datatype.value=qe||Z)}}else if(D.isList(de)){const Qe=function P(de,G,Ie,le,ve,Oe){const Le={termType:"NamedNode",value:j},Qe={termType:"NamedNode",value:O},qe={termType:"NamedNode",value:B},Te=de.pop(),He=Te?{termType:"BlankNode",value:G.getId()}:qe;let Me=He;for(const Ue of de){const fe=k(Ue,G,Ie,le,ve,Oe),Ce={termType:"BlankNode",value:G.getId()};Ie.push({subject:Me,predicate:Le,object:fe,graph:le}),Ie.push({subject:Me,predicate:Qe,object:Ce,graph:le}),Me=Ce}if(Te){const Ue=k(Te,G,Ie,le,ve,Oe);Ie.push({subject:Me,predicate:Le,object:Ue,graph:le}),Ie.push({subject:Me,predicate:Qe,object:qe,graph:le})}return He}(de["@list"],G,Ie,le,ve,Oe);Le.termType=Qe.termType,Le.value=Qe.value}else{const Qe=_.isObject(de)?de["@id"]:de;Le.termType=Qe.startsWith("_:")?"BlankNode":"NamedNode",Le.value=Qe}return"NamedNode"!==Le.termType||$(Le.value)?Le:(Oe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Le.value}},options:Oe}),null)}ee.exports=H,H.toRDF=(de,G)=>{const Ie=new v.IdentifierIssuer("_:b"),le={"@default":{}};M(de,le,"@default",Ie);const ve=[],Oe=Object.keys(le).sort();for(const Le of Oe){let Qe;if("@default"===Le)Qe={termType:"DefaultGraph",value:""};else{if(!$(Le)){G.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Le}},options:G});continue}Qe=Le.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Qe.value=Le}w(ve,le[Le],Qe,Ie,G)}return ve}},8254:ee=>{"use strict";const q={};ee.exports=q,q.isArray=Array.isArray,q.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),q.isDouble=g=>q.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),q.isEmptyObject=g=>q.isObject(g)&&0===Object.keys(g).length,q.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),q.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),q.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),q.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),q.isUndefined=g=>typeof g>"u"},2651:(ee,q,g)=>{"use strict";const M=g(8254),y={};ee.exports=y,y.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},y.parse=(C,R)=>{const _={},v=y.parsers[R||"full"],T=v.regex.exec(C);let j=v.keys.length;for(;j--;)_[v.keys[j]]=void 0===T[j]?null:T[j];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=y.removeDotSegments(_.path),_},y.prependBase=(C,R)=>{if(null===C||y.isAbsolute(R))return R;(!C||M.isString(C))&&(C=y.parse(C||""));const _=y.parse(R),v={protocol:C.protocol||""};if(null!==_.authority)v.authority=_.authority,v.path=_.path,v.query=_.query;else if(v.authority=C.authority,""===_.path)v.path=C.path,v.query=null!==_.query?_.query:C.query;else{if(0===_.path.indexOf("/"))v.path=_.path;else{let j=C.path;j=j.substr(0,j.lastIndexOf("/")+1),(j.length>0||C.authority)&&"/"!==j.substr(-1)&&(j+="/"),j+=_.path,v.path=j}v.query=_.query}""!==_.path&&(v.path=y.removeDotSegments(v.path));let T=v.protocol;return null!==v.authority&&(T+="//"+v.authority),T+=v.path,null!==v.query&&(T+="?"+v.query),null!==_.fragment&&(T+="#"+_.fragment),""===T&&(T="./"),T},y.removeBase=(C,R)=>{if(null===C)return R;(!C||M.isString(C))&&(C=y.parse(C||""));let _="";if(""!==C.href?_+=(C.protocol||"")+"//"+(C.authority||""):R.indexOf("//")&&(_+="//"),0!==R.indexOf(_))return R;const v=y.parse(R.substr(_.length)),T=C.normalizedPath.split("/"),j=v.normalizedPath.split("/"),O=v.fragment||v.query?0:1;for(;T.length>0&&j.length>O&&T[0]===j[0];)T.shift(),j.shift();let B="";if(T.length>0){T.pop();for(let Q=0;Q<T.length;++Q)B+="../"}return B+=j.join("/"),null!==v.query&&(B+="?"+v.query),null!==v.fragment&&(B+="#"+v.fragment),""===B&&(B="./"),B},y.removeDotSegments=C=>{if(0===C.length)return"";const R=C.split("/"),_=[];for(;R.length>0;){const v=R.shift(),T=0===R.length;"."!==v?".."!==v?_.push(v):(_.pop(),T&&_.push("")):T&&_.push("")}return"/"===C[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const D=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;y.isAbsolute=C=>M.isString(C)&&D.test(C),y.isRelative=C=>M.isString(C)},3521:(ee,q,g)=>{"use strict";const M=g(543),y=g(8254),D=g(1986).IdentifierIssuer,C=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,v=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,T=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,O_headers_accept="application/ld+json, application/json",B={};function Q(A,F){if(y.isArray(F))for(let ce=0;ce<F.length;++ce)F[ce]=Q(A,F[ce]);else if(M.isList(F))F["@list"]=Q(A,F["@list"]);else if(y.isObject(F)){M.isBlankNode(F)&&(F["@id"]=A.getId(F["@id"]));const ce=Object.keys(F).sort();for(let K=0;K<ce.length;++K){const J=ce[K];"@id"!==J&&(F[J]=Q(A,F[J]))}}return F}ee.exports=B,B.IdentifierIssuer=D,B.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,B.REGEX_KEYWORD=/^@[a-zA-Z]+$/,B.clone=function(A){if(A&&"object"==typeof A){let F;if(y.isArray(A)){F=[];for(let ce=0;ce<A.length;++ce)F[ce]=B.clone(A[ce])}else if(A instanceof Map){F=new Map;for(const[ce,K]of A)F.set(ce,B.clone(K))}else if(A instanceof Set){F=new Set;for(const ce of A)F.add(B.clone(ce))}else if(y.isObject(A)){F={};for(const ce in A)F[ce]=B.clone(A[ce])}else F=A.toString();return F}return A},B.asArray=function(A){return Array.isArray(A)?A:[A]},B.buildHeaders=(A={})=>{if(Object.keys(A).some(ce=>"accept"===ce.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+O_headers_accept+'" is supported.');return Object.assign({Accept:O_headers_accept},A)},B.parseLinkHeader=A=>{const F={},ce=A.match(_);for(let K=0;K<ce.length;++K){let J=ce[K].match(v);if(!J)continue;const Z={target:J[1]},$=J[2];for(;J=T.exec($);)Z[J[1]]=void 0===J[2]?J[3]:J[2];const H=Z.rel||"";Array.isArray(F[H])?F[H].push(Z):F[H]=F.hasOwnProperty(H)?[F[H],Z]:Z}return F},B.validateTypeValue=(A,F)=>{if(!(y.isString(A)||y.isArray(A)&&A.every(ce=>y.isString(ce)))){if(F&&y.isObject(A))switch(Object.keys(A).length){case 0:return;case 1:if("@default"in A&&B.asArray(A["@default"]).every(ce=>y.isString(ce)))return}throw new C('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:A})}},B.hasProperty=(A,F)=>{if(A.hasOwnProperty(F)){const ce=A[F];return!y.isArray(ce)||ce.length>0}return!1},B.hasValue=(A,F,ce)=>{if(B.hasProperty(A,F)){let K=A[F];const J=M.isList(K);if(y.isArray(K)||J){J&&(K=K["@list"]);for(let Z=0;Z<K.length;++Z)if(B.compareValues(ce,K[Z]))return!0}else if(!y.isArray(ce))return B.compareValues(ce,K)}return!1},B.addValue=(A,F,ce,K)=>{if("propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1),"valueIsArray"in K||(K.valueIsArray=!1),"allowDuplicate"in K||(K.allowDuplicate=!0),"prependValue"in K||(K.prependValue=!1),K.valueIsArray)A[F]=ce;else if(y.isArray(ce)){0===ce.length&&K.propertyIsArray&&!A.hasOwnProperty(F)&&(A[F]=[]),K.prependValue&&(ce=ce.concat(A[F]),A[F]=[]);for(let J=0;J<ce.length;++J)B.addValue(A,F,ce[J],K)}else if(A.hasOwnProperty(F)){const J=!K.allowDuplicate&&B.hasValue(A,F,ce);!y.isArray(A[F])&&(!J||K.propertyIsArray)&&(A[F]=[A[F]]),J||(K.prependValue?A[F].unshift(ce):A[F].push(ce))}else A[F]=K.propertyIsArray?[ce]:ce},B.getValues=(A,F)=>[].concat(A[F]||[]),B.removeProperty=(A,F)=>{delete A[F]},B.removeValue=(A,F,ce,K)=>{"propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1);const J=B.getValues(A,F).filter(Z=>!B.compareValues(Z,ce));0===J.length?B.removeProperty(A,F):A[F]=1!==J.length||K.propertyIsArray?J:J[0]},B.relabelBlankNodes=(A,F)=>Q((F=F||{}).issuer||new D("_:b"),A),B.compareValues=(A,F)=>!!(A===F||M.isValue(A)&&M.isValue(F)&&A["@value"]===F["@value"]&&A["@type"]===F["@type"]&&A["@language"]===F["@language"]&&A["@index"]===F["@index"])||!!(y.isObject(A)&&"@id"in A&&y.isObject(F)&&"@id"in F)&&A["@id"]===F["@id"],B.compareShortestLeast=(A,F)=>A.length<F.length?-1:F.length<A.length?1:A===F?0:A<F?-1:1},5041:ee=>{"use strict";ee.exports=function q(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((M,y,D)=>M+(0===D?"":",")+q(void 0===y||"symbol"==typeof y?null:y),"")+"]":"{"+Object.keys(g).sort().reduce((M,y,D)=>void 0===g[y]||"symbol"==typeof g[y]?M:M+(0===M.length?"":",")+q(y)+":"+q(g[y]),"")+"}"}},1072:(ee,q,g)=>{"use strict";const M=g(4439),y=Symbol("max"),D=Symbol("length"),C=Symbol("lengthCalculator"),R=Symbol("allowStale"),_=Symbol("maxAge"),v=Symbol("dispose"),T=Symbol("noDisposeOnSet"),j=Symbol("lruList"),O=Symbol("cache"),B=Symbol("updateAgeOnGet"),Q=()=>1,F=(H,w,P)=>{const k=H[O].get(w);if(k){const de=k.value;if(ce(H,de)){if(J(H,k),!H[R])return}else P&&(H[B]&&(k.value.now=Date.now()),H[j].unshiftNode(k));return de.value}},ce=(H,w)=>{if(!w||!w.maxAge&&!H[_])return!1;const P=Date.now()-w.now;return w.maxAge?P>w.maxAge:H[_]&&P>H[_]},K=H=>{if(H[D]>H[y])for(let w=H[j].tail;H[D]>H[y]&&null!==w;){const P=w.prev;J(H,w),w=P}},J=(H,w)=>{if(w){const P=w.value;H[v]&&H[v](P.key,P.value),H[D]-=P.length,H[O].delete(P.key),H[j].removeNode(w)}};class Z{constructor(w,P,k,de,G){this.key=w,this.value=P,this.length=k,this.now=de,this.maxAge=G||0}}const $=(H,w,P,k)=>{let de=P.value;ce(H,de)&&(J(H,P),H[R]||(de=void 0)),de&&w.call(k,de.value,de.key,H)};ee.exports=class A{constructor(w){if("number"==typeof w&&(w={max:w}),w||(w={}),w.max&&("number"!=typeof w.max||w.max<0))throw new TypeError("max must be a non-negative number");this[y]=w.max||1/0;const k=w.length||Q;if(this[C]="function"!=typeof k?Q:k,this[R]=w.stale||!1,w.maxAge&&"number"!=typeof w.maxAge)throw new TypeError("maxAge must be a number");this[_]=w.maxAge||0,this[v]=w.dispose,this[T]=w.noDisposeOnSet||!1,this[B]=w.updateAgeOnGet||!1,this.reset()}set max(w){if("number"!=typeof w||w<0)throw new TypeError("max must be a non-negative number");this[y]=w||1/0,K(this)}get max(){return this[y]}set allowStale(w){this[R]=!!w}get allowStale(){return this[R]}set maxAge(w){if("number"!=typeof w)throw new TypeError("maxAge must be a non-negative number");this[_]=w,K(this)}get maxAge(){return this[_]}set lengthCalculator(w){"function"!=typeof w&&(w=Q),w!==this[C]&&(this[C]=w,this[D]=0,this[j].forEach(P=>{P.length=this[C](P.value,P.key),this[D]+=P.length})),K(this)}get lengthCalculator(){return this[C]}get length(){return this[D]}get itemCount(){return this[j].length}rforEach(w,P){P=P||this;for(let k=this[j].tail;null!==k;){const de=k.prev;$(this,w,k,P),k=de}}forEach(w,P){P=P||this;for(let k=this[j].head;null!==k;){const de=k.next;$(this,w,k,P),k=de}}keys(){return this[j].toArray().map(w=>w.key)}values(){return this[j].toArray().map(w=>w.value)}reset(){this[v]&&this[j]&&this[j].length&&this[j].forEach(w=>this[v](w.key,w.value)),this[O]=new Map,this[j]=new M,this[D]=0}dump(){return this[j].map(w=>!ce(this,w)&&{k:w.key,v:w.value,e:w.now+(w.maxAge||0)}).toArray().filter(w=>w)}dumpLru(){return this[j]}set(w,P,k){if((k=k||this[_])&&"number"!=typeof k)throw new TypeError("maxAge must be a number");const de=k?Date.now():0,G=this[C](P,w);if(this[O].has(w)){if(G>this[y])return J(this,this[O].get(w)),!1;const ve=this[O].get(w).value;return this[v]&&(this[T]||this[v](w,ve.value)),ve.now=de,ve.maxAge=k,ve.value=P,this[D]+=G-ve.length,ve.length=G,this.get(w),K(this),!0}const Ie=new Z(w,P,G,de,k);return Ie.length>this[y]?(this[v]&&this[v](w,P),!1):(this[D]+=Ie.length,this[j].unshift(Ie),this[O].set(w,this[j].head),K(this),!0)}has(w){if(!this[O].has(w))return!1;const P=this[O].get(w).value;return!ce(this,P)}get(w){return F(this,w,!0)}peek(w){return F(this,w,!1)}pop(){const w=this[j].tail;return w?(J(this,w),w.value):null}del(w){J(this,this[O].get(w))}load(w){this.reset();const P=Date.now();for(let k=w.length-1;k>=0;k--){const de=w[k],G=de.e||0;if(0===G)this.set(de.k,de.v);else{const Ie=G-P;Ie>0&&this.set(de.k,de.v,Ie)}}}prune(){this[O].forEach((w,P)=>F(this,P,!1))}}},6506:(ee,q,g)=>{var D=g(8745)(g(8492),"DataView");ee.exports=D},9618:(ee,q,g)=>{var M=g(5602),y=g(1499),D=g(2990),C=g(480),R=g(4469);function _(v){var T=-1,j=null==v?0:v.length;for(this.clear();++T<j;){var O=v[T];this.set(O[0],O[1])}}_.prototype.clear=M,_.prototype.delete=y,_.prototype.get=D,_.prototype.has=C,_.prototype.set=R,ee.exports=_},3597:(ee,q,g)=>{var M=g(9365),y=g(9343),D=g(4779),C=g(1509),R=g(7137);function _(v){var T=-1,j=null==v?0:v.length;for(this.clear();++T<j;){var O=v[T];this.set(O[0],O[1])}}_.prototype.clear=M,_.prototype.delete=y,_.prototype.get=D,_.prototype.has=C,_.prototype.set=R,ee.exports=_},1136:(ee,q,g)=>{var D=g(8745)(g(8492),"Map");ee.exports=D},1811:(ee,q,g)=>{var M=g(3413),y=g(5419),D=g(7253),C=g(1115),R=g(6648);function _(v){var T=-1,j=null==v?0:v.length;for(this.clear();++T<j;){var O=v[T];this.set(O[0],O[1])}}_.prototype.clear=M,_.prototype.delete=y,_.prototype.get=D,_.prototype.has=C,_.prototype.set=R,ee.exports=_},641:(ee,q,g)=>{var D=g(8745)(g(8492),"Promise");ee.exports=D},1732:(ee,q,g)=>{var D=g(8745)(g(8492),"Set");ee.exports=D},5960:(ee,q,g)=>{var M=g(1811),y=g(6151),D=g(2154);function C(R){var _=-1,v=null==R?0:R.length;for(this.__data__=new M;++_<v;)this.add(R[_])}C.prototype.add=C.prototype.push=y,C.prototype.has=D,ee.exports=C},1339:(ee,q,g)=>{var M=g(3597),y=g(9488),D=g(5943),C=g(5456),R=g(4793),_=g(8689);function v(T){var j=this.__data__=new M(T);this.size=j.size}v.prototype.clear=y,v.prototype.delete=D,v.prototype.get=C,v.prototype.has=R,v.prototype.set=_,ee.exports=v},1763:(ee,q,g)=>{var M=g(8492);ee.exports=M.Symbol},2760:(ee,q,g)=>{var M=g(8492);ee.exports=M.Uint8Array},6413:(ee,q,g)=>{var D=g(8745)(g(8492),"WeakMap");ee.exports=D},7910:ee=>{ee.exports=function q(g,M,y){switch(y.length){case 0:return g.call(M);case 1:return g.call(M,y[0]);case 2:return g.call(M,y[0],y[1]);case 3:return g.call(M,y[0],y[1],y[2])}return g.apply(M,y)}},2134:ee=>{ee.exports=function q(g,M){for(var y=-1,D=null==g?0:g.length,C=0,R=[];++y<D;){var _=g[y];M(_,y,g)&&(R[C++]=_)}return R}},1384:(ee,q,g)=>{var M=g(5025),y=g(1955),D=g(2261),C=g(7525),R=g(5188),_=g(4868),T=Object.prototype.hasOwnProperty;ee.exports=function j(O,B){var Q=D(O),A=!Q&&y(O),F=!Q&&!A&&C(O),ce=!Q&&!A&&!F&&_(O),K=Q||A||F||ce,J=K?M(O.length,String):[],Z=J.length;for(var $ in O)(B||T.call(O,$))&&(!K||!("length"==$||F&&("offset"==$||"parent"==$)||ce&&("buffer"==$||"byteLength"==$||"byteOffset"==$)||R($,Z)))&&J.push($);return J}},3880:ee=>{ee.exports=function q(g,M){for(var y=-1,D=null==g?0:g.length,C=Array(D);++y<D;)C[y]=M(g[y],y,g);return C}},7853:ee=>{ee.exports=function q(g,M){for(var y=-1,D=M.length,C=g.length;++y<D;)g[C+y]=M[y];return g}},5916:ee=>{ee.exports=function q(g,M){for(var y=-1,D=null==g?0:g.length;++y<D;)if(M(g[y],y,g))return!0;return!1}},4056:(ee,q,g)=>{var M=g(7826);ee.exports=function y(D,C){for(var R=D.length;R--;)if(M(D[R][0],C))return R;return-1}},5103:(ee,q,g)=>{var M=g(7794),D=g(9386)(M);ee.exports=D},1883:(ee,q,g)=>{var M=g(7853),y=g(2241);ee.exports=function D(C,R,_,v,T){var j=-1,O=C.length;for(_||(_=y),T||(T=[]);++j<O;){var B=C[j];R>0&&_(B)?R>1?D(B,R-1,_,v,T):M(T,B):v||(T[T.length]=B)}return T}},6483:(ee,q,g)=>{var y=g(2086)();ee.exports=y},7794:(ee,q,g)=>{var M=g(6483),y=g(4614);ee.exports=function D(C,R){return C&&M(C,R,y)}},2202:(ee,q,g)=>{var M=g(4826),y=g(8916);ee.exports=function D(C,R){for(var _=0,v=(R=M(R,C)).length;null!=C&&_<v;)C=C[y(R[_++])];return _&&_==v?C:void 0}},7427:(ee,q,g)=>{var M=g(7853),y=g(2261);ee.exports=function D(C,R,_){var v=R(C);return y(C)?v:M(v,_(C))}},4590:(ee,q,g)=>{var M=g(1763),y=g(5933),D=g(9243),_=M?M.toStringTag:void 0;ee.exports=function v(T){return null==T?void 0===T?"[object Undefined]":"[object Null]":_&&_ in Object(T)?y(T):D(T)}},3274:ee=>{ee.exports=function q(g,M){return null!=g&&M in Object(g)}},3022:(ee,q,g)=>{var M=g(4590),y=g(3714);ee.exports=function C(R){return y(R)&&"[object Arguments]"==M(R)}},7108:(ee,q,g)=>{var M=g(7946),y=g(3714);ee.exports=function D(C,R,_,v,T){return C===R||(null==C||null==R||!y(C)&&!y(R)?C!=C&&R!=R:M(C,R,_,v,D,T))}},7946:(ee,q,g)=>{var M=g(1339),y=g(7469),D=g(1642),C=g(9462),R=g(2472),_=g(2261),v=g(7525),T=g(4868),O="[object Arguments]",B="[object Array]",Q="[object Object]",F=Object.prototype.hasOwnProperty;ee.exports=function ce(K,J,Z,$,H,w){var P=_(K),k=_(J),de=P?B:R(K),G=k?B:R(J),Ie=(de=de==O?Q:de)==Q,le=(G=G==O?Q:G)==Q,ve=de==G;if(ve&&v(K)){if(!v(J))return!1;P=!0,Ie=!1}if(ve&&!Ie)return w||(w=new M),P||T(K)?y(K,J,Z,$,H,w):D(K,J,de,Z,$,H,w);if(!(1&Z)){var Oe=Ie&&F.call(K,"__wrapped__"),Le=le&&F.call(J,"__wrapped__");if(Oe||Le){var Qe=Oe?K.value():K,qe=Le?J.value():J;return w||(w=new M),H(Qe,qe,Z,$,w)}}return!!ve&&(w||(w=new M),C(K,J,Z,$,H,w))}},2527:(ee,q,g)=>{var M=g(1339),y=g(7108);ee.exports=function R(_,v,T,j){var O=T.length,B=O,Q=!j;if(null==_)return!B;for(_=Object(_);O--;){var A=T[O];if(Q&&A[2]?A[1]!==_[A[0]]:!(A[0]in _))return!1}for(;++O<B;){var F=(A=T[O])[0],ce=_[F],K=A[1];if(Q&&A[2]){if(void 0===ce&&!(F in _))return!1}else{var J=new M;if(j)var Z=j(ce,K,F,_,v,J);if(!(void 0===Z?y(K,ce,3,j,J):Z))return!1}}return!0}},1082:(ee,q,g)=>{var M=g(6861),y=g(9950),D=g(9794),C=g(7075),_=/^\[object .+?Constructor\]$/,B=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ee.exports=function Q(A){return!(!D(A)||y(A))&&(M(A)?B:_).test(C(A))}},8902:(ee,q,g)=>{var M=g(4590),y=g(7765),D=g(3714),ve={};ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Arguments]"]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object Boolean]"]=ve["[object DataView]"]=ve["[object Date]"]=ve["[object Error]"]=ve["[object Function]"]=ve["[object Map]"]=ve["[object Number]"]=ve["[object Object]"]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object WeakMap]"]=!1,ee.exports=function Oe(Le){return D(Le)&&y(Le.length)&&!!ve[M(Le)]}},1627:(ee,q,g)=>{var M=g(2924),y=g(8526),D=g(5657),C=g(2261),R=g(2692);ee.exports=function _(v){return"function"==typeof v?v:null==v?D:"object"==typeof v?C(v)?y(v[0],v[1]):M(v):R(v)}},190:(ee,q,g)=>{var M=g(6587),y=g(366),C=Object.prototype.hasOwnProperty;ee.exports=function R(_){if(!M(_))return y(_);var v=[];for(var T in Object(_))C.call(_,T)&&"constructor"!=T&&v.push(T);return v}},2839:(ee,q,g)=>{var M=g(5103),y=g(2447);ee.exports=function D(C,R){var _=-1,v=y(C)?Array(C.length):[];return M(C,function(T,j,O){v[++_]=R(T,j,O)}),v}},2924:(ee,q,g)=>{var M=g(2527),y=g(7895),D=g(2265);ee.exports=function C(R){var _=y(R);return 1==_.length&&_[0][2]?D(_[0][0],_[0][1]):function(v){return v===R||M(v,R,_)}}},8526:(ee,q,g)=>{var M=g(7108),y=g(5440),D=g(2494),C=g(6300),R=g(3921),_=g(2265),v=g(8916);ee.exports=function O(B,Q){return C(B)&&R(Q)?_(v(B),Q):function(A){var F=y(A,B);return void 0===F&&F===Q?D(A,B):M(Q,F,3)}}},252:(ee,q,g)=>{var M=g(3880),y=g(2202),D=g(1627),C=g(2839),R=g(6389),_=g(1156),v=g(9664),T=g(5657),j=g(2261);ee.exports=function O(B,Q,A){Q=Q.length?M(Q,function(K){return j(K)?function(J){return y(J,1===K.length?K[0]:K)}:K}):[T];var F=-1;Q=M(Q,_(D));var ce=C(B,function(K,J,Z){return{criteria:M(Q,function(H){return H(K)}),index:++F,value:K}});return R(ce,function(K,J){return v(K,J,A)})}},3400:ee=>{ee.exports=function q(g){return function(M){return M?.[g]}}},6443:(ee,q,g)=>{var M=g(2202);ee.exports=function y(D){return function(C){return M(C,D)}}},8951:(ee,q,g)=>{var M=g(5657),y=g(2394),D=g(6814);ee.exports=function C(R,_){return D(y(R,_,M),R+"")}},8235:(ee,q,g)=>{var M=g(1075),y=g(9383),D=g(5657);ee.exports=y?function(R,_){return y(R,"toString",{configurable:!0,enumerable:!1,value:M(_),writable:!0})}:D},6389:ee=>{ee.exports=function q(g,M){var y=g.length;for(g.sort(M);y--;)g[y]=g[y].value;return g}},5025:ee=>{ee.exports=function q(g,M){for(var y=-1,D=Array(g);++y<g;)D[y]=M(y);return D}},7002:(ee,q,g)=>{var M=g(1763),y=g(3880),D=g(2261),C=g(3423),_=M?M.prototype:void 0,v=_?_.toString:void 0;ee.exports=function T(j){if("string"==typeof j)return j;if(D(j))return y(j,T)+"";if(C(j))return v?v.call(j):"";var O=j+"";return"0"==O&&1/j==-1/0?"-0":O}},1156:ee=>{ee.exports=function q(g){return function(M){return g(M)}}},4795:ee=>{ee.exports=function q(g,M){return g.has(M)}},4826:(ee,q,g)=>{var M=g(2261),y=g(6300),D=g(163),C=g(2674);ee.exports=function R(_,v){return M(_)?_:y(_,v)?[_]:D(C(_))}},5400:(ee,q,g)=>{var M=g(3423);ee.exports=function y(D,C){if(D!==C){var R=void 0!==D,_=null===D,v=D==D,T=M(D),j=void 0!==C,O=null===C,B=C==C,Q=M(C);if(!O&&!Q&&!T&&D>C||T&&j&&B&&!O&&!Q||_&&j&&B||!R&&B||!v)return 1;if(!_&&!T&&!Q&&D<C||Q&&R&&v&&!_&&!T||O&&R&&v||!j&&v||!B)return-1}return 0}},9664:(ee,q,g)=>{var M=g(5400);ee.exports=function y(D,C,R){for(var _=-1,v=D.criteria,T=C.criteria,j=v.length,O=R.length;++_<j;){var B=M(v[_],T[_]);if(B)return _>=O?B:B*("desc"==R[_]?-1:1)}return D.index-C.index}},6189:(ee,q,g)=>{var M=g(8492);ee.exports=M["__core-js_shared__"]},9386:(ee,q,g)=>{var M=g(2447);ee.exports=function y(D,C){return function(R,_){if(null==R)return R;if(!M(R))return D(R,_);for(var v=R.length,T=C?v:-1,j=Object(R);(C?T--:++T<v)&&!1!==_(j[T],T,j););return R}}},2086:ee=>{ee.exports=function q(g){return function(M,y,D){for(var C=-1,R=Object(M),_=D(M),v=_.length;v--;){var T=_[g?v:++C];if(!1===y(R[T],T,R))break}return M}}},9383:(ee,q,g)=>{var M=g(8745),y=function(){try{var D=M(Object,"defineProperty");return D({},"",{}),D}catch{}}();ee.exports=y},7469:(ee,q,g)=>{var M=g(5960),y=g(5916),D=g(4795);ee.exports=function _(v,T,j,O,B,Q){var A=1&j,F=v.length,ce=T.length;if(F!=ce&&!(A&&ce>F))return!1;var K=Q.get(v),J=Q.get(T);if(K&&J)return K==T&&J==v;var Z=-1,$=!0,H=2&j?new M:void 0;for(Q.set(v,T),Q.set(T,v);++Z<F;){var w=v[Z],P=T[Z];if(O)var k=A?O(P,w,Z,T,v,Q):O(w,P,Z,v,T,Q);if(void 0!==k){if(k)continue;$=!1;break}if(H){if(!y(T,function(de,G){if(!D(H,G)&&(w===de||B(w,de,j,O,Q)))return H.push(G)})){$=!1;break}}else if(w!==P&&!B(w,P,j,O,Q)){$=!1;break}}return Q.delete(v),Q.delete(T),$}},1642:(ee,q,g)=>{var M=g(1763),y=g(2760),D=g(7826),C=g(7469),R=g(1575),_=g(8e3),H=M?M.prototype:void 0,w=H?H.valueOf:void 0;ee.exports=function P(k,de,G,Ie,le,ve,Oe){switch(G){case"[object DataView]":if(k.byteLength!=de.byteLength||k.byteOffset!=de.byteOffset)return!1;k=k.buffer,de=de.buffer;case"[object ArrayBuffer]":return!(k.byteLength!=de.byteLength||!ve(new y(k),new y(de)));case"[object Boolean]":case"[object Date]":case"[object Number]":return D(+k,+de);case"[object Error]":return k.name==de.name&&k.message==de.message;case"[object RegExp]":case"[object String]":return k==de+"";case"[object Map]":var Le=R;case"[object Set]":if(Le||(Le=_),k.size!=de.size&&!(1&Ie))return!1;var qe=Oe.get(k);if(qe)return qe==de;Ie|=2,Oe.set(k,de);var Te=C(Le(k),Le(de),Ie,le,ve,Oe);return Oe.delete(k),Te;case"[object Symbol]":if(w)return w.call(k)==w.call(de)}return!1}},9462:(ee,q,g)=>{var M=g(6131),C=Object.prototype.hasOwnProperty;ee.exports=function R(_,v,T,j,O,B){var Q=1&T,A=M(_),F=A.length;if(F!=M(v).length&&!Q)return!1;for(var J=F;J--;){var Z=A[J];if(!(Q?Z in v:C.call(v,Z)))return!1}var $=B.get(_),H=B.get(v);if($&&H)return $==v&&H==_;var w=!0;B.set(_,v),B.set(v,_);for(var P=Q;++J<F;){var k=_[Z=A[J]],de=v[Z];if(j)var G=Q?j(de,k,Z,v,_,B):j(k,de,Z,_,v,B);if(!(void 0===G?k===de||O(k,de,T,j,B):G)){w=!1;break}P||(P="constructor"==Z)}if(w&&!P){var Ie=_.constructor,le=v.constructor;Ie!=le&&"constructor"in _&&"constructor"in v&&!("function"==typeof Ie&&Ie instanceof Ie&&"function"==typeof le&&le instanceof le)&&(w=!1)}return B.delete(_),B.delete(v),w}},248:ee=>{var q="object"==typeof global&&global&&global.Object===Object&&global;ee.exports=q},6131:(ee,q,g)=>{var M=g(7427),y=g(771),D=g(4614);ee.exports=function C(R){return M(R,D,y)}},4113:(ee,q,g)=>{var M=g(29);ee.exports=function y(D,C){var R=D.__data__;return M(C)?R["string"==typeof C?"string":"hash"]:R.map}},7895:(ee,q,g)=>{var M=g(3921),y=g(4614);ee.exports=function D(C){for(var R=y(C),_=R.length;_--;){var v=R[_],T=C[v];R[_]=[v,T,M(T)]}return R}},8745:(ee,q,g)=>{var M=g(1082),y=g(1015);ee.exports=function D(C,R){var _=y(C,R);return M(_)?_:void 0}},5933:(ee,q,g)=>{var M=g(1763),y=Object.prototype,D=y.hasOwnProperty,C=y.toString,R=M?M.toStringTag:void 0;ee.exports=function _(v){var T=D.call(v,R),j=v[R];try{v[R]=void 0;var O=!0}catch{}var B=C.call(v);return O&&(T?v[R]=j:delete v[R]),B}},771:(ee,q,g)=>{var M=g(2134),y=g(1315),C=Object.prototype.propertyIsEnumerable,R=Object.getOwnPropertySymbols;ee.exports=R?function(v){return null==v?[]:(v=Object(v),M(R(v),function(T){return C.call(v,T)}))}:y},2472:(ee,q,g)=>{var M=g(6506),y=g(1136),D=g(641),C=g(1732),R=g(6413),_=g(4590),v=g(7075),T="[object Map]",O="[object Promise]",B="[object Set]",Q="[object WeakMap]",A="[object DataView]",F=v(M),ce=v(y),K=v(D),J=v(C),Z=v(R),$=_;(M&&$(new M(new ArrayBuffer(1)))!=A||y&&$(new y)!=T||D&&$(D.resolve())!=O||C&&$(new C)!=B||R&&$(new R)!=Q)&&($=function(H){var w=_(H),P="[object Object]"==w?H.constructor:void 0,k=P?v(P):"";if(k)switch(k){case F:return A;case ce:return T;case K:return O;case J:return B;case Z:return Q}return w}),ee.exports=$},1015:ee=>{ee.exports=function q(g,M){return g?.[M]}},4583:(ee,q,g)=>{var M=g(4826),y=g(1955),D=g(2261),C=g(5188),R=g(7765),_=g(8916);ee.exports=function v(T,j,O){for(var B=-1,Q=(j=M(j,T)).length,A=!1;++B<Q;){var F=_(j[B]);if(!(A=null!=T&&O(T,F)))break;T=T[F]}return A||++B!=Q?A:!!(Q=null==T?0:T.length)&&R(Q)&&C(F,Q)&&(D(T)||y(T))}},5602:(ee,q,g)=>{var M=g(893);ee.exports=function y(){this.__data__=M?M(null):{},this.size=0}},1499:ee=>{ee.exports=function q(g){var M=this.has(g)&&delete this.__data__[g];return this.size-=M?1:0,M}},2990:(ee,q,g)=>{var M=g(893),C=Object.prototype.hasOwnProperty;ee.exports=function R(_){var v=this.__data__;if(M){var T=v[_];return"__lodash_hash_undefined__"===T?void 0:T}return C.call(v,_)?v[_]:void 0}},480:(ee,q,g)=>{var M=g(893),D=Object.prototype.hasOwnProperty;ee.exports=function C(R){var _=this.__data__;return M?void 0!==_[R]:D.call(_,R)}},4469:(ee,q,g)=>{var M=g(893);ee.exports=function D(C,R){var _=this.__data__;return this.size+=this.has(C)?0:1,_[C]=M&&void 0===R?"__lodash_hash_undefined__":R,this}},2241:(ee,q,g)=>{var M=g(1763),y=g(1955),D=g(2261),C=M?M.isConcatSpreadable:void 0;ee.exports=function R(_){return D(_)||y(_)||!!(C&&_&&_[C])}},5188:ee=>{var g=/^(?:0|[1-9]\d*)$/;ee.exports=function M(y,D){var C=typeof y;return!!(D=D??9007199254740991)&&("number"==C||"symbol"!=C&&g.test(y))&&y>-1&&y%1==0&&y<D}},3817:(ee,q,g)=>{var M=g(7826),y=g(2447),D=g(5188),C=g(9794);ee.exports=function R(_,v,T){if(!C(T))return!1;var j=typeof v;return!!("number"==j?y(T)&&D(v,T.length):"string"==j&&v in T)&&M(T[v],_)}},6300:(ee,q,g)=>{var M=g(2261),y=g(3423),D=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;ee.exports=function R(_,v){if(M(_))return!1;var T=typeof _;return!("number"!=T&&"symbol"!=T&&"boolean"!=T&&null!=_&&!y(_))||C.test(_)||!D.test(_)||null!=v&&_ in Object(v)}},29:ee=>{ee.exports=function q(g){var M=typeof g;return"string"==M||"number"==M||"symbol"==M||"boolean"==M?"__proto__"!==g:null===g}},9950:(ee,q,g)=>{var C,M=g(6189),y=(C=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";ee.exports=function D(C){return!!y&&y in C}},6587:ee=>{var q=Object.prototype;ee.exports=function g(M){var y=M&&M.constructor;return M===("function"==typeof y&&y.prototype||q)}},3921:(ee,q,g)=>{var M=g(9794);ee.exports=function y(D){return D==D&&!M(D)}},9365:ee=>{ee.exports=function q(){this.__data__=[],this.size=0}},9343:(ee,q,g)=>{var M=g(4056),D=Array.prototype.splice;ee.exports=function C(R){var _=this.__data__,v=M(_,R);return!(v<0||(v==_.length-1?_.pop():D.call(_,v,1),--this.size,0))}},4779:(ee,q,g)=>{var M=g(4056);ee.exports=function y(D){var C=this.__data__,R=M(C,D);return R<0?void 0:C[R][1]}},1509:(ee,q,g)=>{var M=g(4056);ee.exports=function y(D){return M(this.__data__,D)>-1}},7137:(ee,q,g)=>{var M=g(4056);ee.exports=function y(D,C){var R=this.__data__,_=M(R,D);return _<0?(++this.size,R.push([D,C])):R[_][1]=C,this}},3413:(ee,q,g)=>{var M=g(9618),y=g(3597),D=g(1136);ee.exports=function C(){this.size=0,this.__data__={hash:new M,map:new(D||y),string:new M}}},5419:(ee,q,g)=>{var M=g(4113);ee.exports=function y(D){var C=M(this,D).delete(D);return this.size-=C?1:0,C}},7253:(ee,q,g)=>{var M=g(4113);ee.exports=function y(D){return M(this,D).get(D)}},1115:(ee,q,g)=>{var M=g(4113);ee.exports=function y(D){return M(this,D).has(D)}},6648:(ee,q,g)=>{var M=g(4113);ee.exports=function y(D,C){var R=M(this,D),_=R.size;return R.set(D,C),this.size+=R.size==_?0:1,this}},1575:ee=>{ee.exports=function q(g){var M=-1,y=Array(g.size);return g.forEach(function(D,C){y[++M]=[C,D]}),y}},2265:ee=>{ee.exports=function q(g,M){return function(y){return null!=y&&y[g]===M&&(void 0!==M||g in Object(y))}}},7371:(ee,q,g)=>{var M=g(7659);ee.exports=function D(C){var R=M(C,function(v){return 500===_.size&&_.clear(),v}),_=R.cache;return R}},893:(ee,q,g)=>{var y=g(8745)(Object,"create");ee.exports=y},366:(ee,q,g)=>{var y=g(3106)(Object.keys,Object);ee.exports=y},8849:(ee,q,g)=>{ee=g.nmd(ee);var M=g(248),y=q&&!q.nodeType&&q,D=y&&ee&&!ee.nodeType&&ee,R=D&&D.exports===y&&M.process,_=function(){try{return D&&D.require&&D.require("util").types||R&&R.binding&&R.binding("util")}catch{}}();ee.exports=_},9243:ee=>{var g=Object.prototype.toString;ee.exports=function M(y){return g.call(y)}},3106:ee=>{ee.exports=function q(g,M){return function(y){return g(M(y))}}},2394:(ee,q,g)=>{var M=g(7910),y=Math.max;ee.exports=function D(C,R,_){return R=y(void 0===R?C.length-1:R,0),function(){for(var v=arguments,T=-1,j=y(v.length-R,0),O=Array(j);++T<j;)O[T]=v[R+T];T=-1;for(var B=Array(R+1);++T<R;)B[T]=v[T];return B[R]=_(O),M(C,this,B)}}},8492:(ee,q,g)=>{var M=g(248),y="object"==typeof self&&self&&self.Object===Object&&self,D=M||y||Function("return this")();ee.exports=D},6151:ee=>{ee.exports=function g(M){return this.__data__.set(M,"__lodash_hash_undefined__"),this}},2154:ee=>{ee.exports=function q(g){return this.__data__.has(g)}},8e3:ee=>{ee.exports=function q(g){var M=-1,y=Array(g.size);return g.forEach(function(D){y[++M]=D}),y}},6814:(ee,q,g)=>{var M=g(8235),D=g(9531)(M);ee.exports=D},9531:ee=>{var M=Date.now;ee.exports=function y(D){var C=0,R=0;return function(){var _=M(),v=16-(_-R);if(R=_,v>0){if(++C>=800)return arguments[0]}else C=0;return D.apply(void 0,arguments)}}},9488:(ee,q,g)=>{var M=g(3597);ee.exports=function y(){this.__data__=new M,this.size=0}},5943:ee=>{ee.exports=function q(g){var M=this.__data__,y=M.delete(g);return this.size=M.size,y}},5456:ee=>{ee.exports=function q(g){return this.__data__.get(g)}},4793:ee=>{ee.exports=function q(g){return this.__data__.has(g)}},8689:(ee,q,g)=>{var M=g(3597),y=g(1136),D=g(1811);ee.exports=function R(_,v){var T=this.__data__;if(T instanceof M){var j=T.__data__;if(!y||j.length<199)return j.push([_,v]),this.size=++T.size,this;T=this.__data__=new D(j)}return T.set(_,v),this.size=T.size,this}},163:(ee,q,g)=>{var M=g(7371),y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D=/\\(\\)?/g,C=M(function(R){var _=[];return 46===R.charCodeAt(0)&&_.push(""),R.replace(y,function(v,T,j,O){_.push(j?O.replace(D,"$1"):T||v)}),_});ee.exports=C},8916:(ee,q,g)=>{var M=g(3423);ee.exports=function D(C){if("string"==typeof C||M(C))return C;var R=C+"";return"0"==R&&1/C==-1/0?"-0":R}},7075:ee=>{var g=Function.prototype.toString;ee.exports=function M(y){if(null!=y){try{return g.call(y)}catch{}try{return y+""}catch{}}return""}},1075:ee=>{ee.exports=function q(g){return function(){return g}}},7826:ee=>{ee.exports=function q(g,M){return g===M||g!=g&&M!=M}},5440:(ee,q,g)=>{var M=g(2202);ee.exports=function y(D,C,R){var _=null==D?void 0:M(D,C);return void 0===_?R:_}},2494:(ee,q,g)=>{var M=g(3274),y=g(4583);ee.exports=function D(C,R){return null!=C&&y(C,R,M)}},5657:ee=>{ee.exports=function q(g){return g}},1955:(ee,q,g)=>{var M=g(3022),y=g(3714),D=Object.prototype,C=D.hasOwnProperty,R=D.propertyIsEnumerable,_=M(function(){return arguments}())?M:function(v){return y(v)&&C.call(v,"callee")&&!R.call(v,"callee")};ee.exports=_},2261:ee=>{ee.exports=Array.isArray},2447:(ee,q,g)=>{var M=g(6861),y=g(7765);ee.exports=function D(C){return null!=C&&y(C.length)&&!M(C)}},7525:(ee,q,g)=>{ee=g.nmd(ee);var M=g(8492),y=g(5706),D=q&&!q.nodeType&&q,C=D&&ee&&!ee.nodeType&&ee,_=C&&C.exports===D?M.Buffer:void 0;ee.exports=(_?_.isBuffer:void 0)||y},6030:(ee,q,g)=>{var y=g(8492).isFinite;ee.exports=function D(C){return"number"==typeof C&&y(C)}},6861:(ee,q,g)=>{var M=g(4590),y=g(9794);ee.exports=function v(T){if(!y(T))return!1;var j=M(T);return"[object Function]"==j||"[object GeneratorFunction]"==j||"[object AsyncFunction]"==j||"[object Proxy]"==j}},7765:ee=>{ee.exports=function g(M){return"number"==typeof M&&M>-1&&M%1==0&&M<=9007199254740991}},9794:ee=>{ee.exports=function q(g){var M=typeof g;return null!=g&&("object"==M||"function"==M)}},3714:ee=>{ee.exports=function q(g){return null!=g&&"object"==typeof g}},3423:(ee,q,g)=>{var M=g(4590),y=g(3714);ee.exports=function C(R){return"symbol"==typeof R||y(R)&&"[object Symbol]"==M(R)}},4868:(ee,q,g)=>{var M=g(8902),y=g(1156),D=g(8849),C=D&&D.isTypedArray,R=C?y(C):M;ee.exports=R},4614:(ee,q,g)=>{var M=g(1384),y=g(190),D=g(2447);ee.exports=function C(R){return D(R)?M(R):y(R)}},6990:function(ee,q,g){var M;ee=g.nmd(ee),function(){var y,_="Expected a function",T="__lodash_hash_undefined__",O="__lodash_placeholder__",w=32,k=128,Te=1/0,He=9007199254740991,fe=4294967295,gt=[["ary",k],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",w],["partialRight",64],["rearg",256]],Je="[object Arguments]",ge="[object Array]",I="[object Boolean]",ae="[object Date]",Ge="[object Error]",Ze="[object Function]",pe="[object GeneratorFunction]",re="[object Map]",Y="[object Number]",U="[object Object]",me="[object Promise]",ye="[object RegExp]",ze="[object Set]",st="[object String]",bt="[object Symbol]",xt="[object WeakMap]",_e="[object ArrayBuffer]",X="[object DataView]",oe="[object Float32Array]",Be="[object Float64Array]",tt="[object Int8Array]",dt="[object Int16Array]",Et="[object Int32Array]",ln="[object Uint8Array]",Fn="[object Uint8ClampedArray]",Gn="[object Uint16Array]",kn="[object Uint32Array]",Bn=/\b__p \+= '';/g,Wi=/\b(__p \+=) '' \+/g,aa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pr=/&(?:amp|lt|gt|quot|#39);/g,Bo=/[&<>"']/g,jo=RegExp(pr.source),Vi=RegExp(Bo.source),Uo=/<%-([\s\S]+?)%>/g,js=/<%([\s\S]+?)%>/g,al=/<%=([\s\S]+?)%>/g,Za=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vo=/^\w*$/,cl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,Xe=RegExp($e.source),Wt=/^\s+/,$t=/\s/,dn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mr=/\{\n\/\* \[wrapped with (.+)\] \*/,Yt=/,? & /,Ma=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ni=/[()=,{}\[\]\/\s]/,Ta=/\\(\\)?/g,Ti=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_i=/\w*$/,Ei=/^[-+]0x[0-9a-f]+$/i,en=/^0b[01]+$/i,qn=/^\[object .+?Constructor\]$/,Io=/^0o[0-7]+$/i,Ai=/^(?:0|[1-9]\d*)$/,ro=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gr=/($^)/,we=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fe="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",hn="A-Z\\xc0-\\xd6\\xd8-\\xde",gn="\\ufe0e\\ufe0f",Xr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yn="["+Ee+"]",hi="["+Xr+"]",Qa="["+be+"]",oo="\\d+",rs="["+Fe+"]",ud="["+ke+"]",hd="[^"+Ee+Xr+oo+Fe+ke+hn+"]",xs="\\ud83c[\\udffb-\\udfff]",O_="[^"+Ee+"]",Lh="(?:\\ud83c[\\udde6-\\uddff]){2}",Re="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+hn+"]",vt="(?:"+ud+"|"+hd+")",Vt="(?:"+Ve+"|"+hd+")",an="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",si="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Kr="(?:"+Qa+"|"+xs+")?",qr="["+gn+"]?",EC=qr+Kr+"(?:\\u200d(?:"+[O_,Lh,Re].join("|")+")"+qr+Kr+")*",ZL="(?:"+[rs,Lh,Re].join("|")+")"+EC,QL="(?:"+[O_+Qa+"?",Qa,Lh,Re,yn].join("|")+")",eF=RegExp("['\u2019]","g"),Ct=RegExp(Qa,"g"),ew=RegExp(xs+"(?="+xs+")|"+QL+EC,"g"),tn=RegExp([Ve+"?"+ud+"+"+an+"(?="+[hi,Ve,"$"].join("|")+")",Vt+"+"+si+"(?="+[hi,Ve+vt,"$"].join("|")+")",Ve+"?"+vt+"+"+an,Ve+"+"+si,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oo,ZL].join("|"),"g"),Bp=RegExp("[\\u200d"+Ee+be+gn+"]"),AC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tw=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],SC=-1,$i={};$i[oe]=$i[Be]=$i[tt]=$i[dt]=$i[Et]=$i[ln]=$i[Fn]=$i[Gn]=$i[kn]=!0,$i[Je]=$i[ge]=$i[_e]=$i[I]=$i[X]=$i[ae]=$i[Ge]=$i[Ze]=$i[re]=$i[Y]=$i[U]=$i[ye]=$i[ze]=$i[st]=$i[xt]=!1;var zi={};zi[Je]=zi[ge]=zi[_e]=zi[X]=zi[I]=zi[ae]=zi[oe]=zi[Be]=zi[tt]=zi[dt]=zi[Et]=zi[re]=zi[Y]=zi[U]=zi[ye]=zi[ze]=zi[st]=zi[bt]=zi[ln]=zi[Fn]=zi[Gn]=zi[kn]=!0,zi[Ge]=zi[Ze]=zi[xt]=!1;var bi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},N_=parseFloat,iw=parseInt,os="object"==typeof global&&global&&global.Object===Object&&global,rw="object"==typeof self&&self&&self.Object===Object&&self,Ho=os||rw||Function("return this")(),Oi=q&&!q.nodeType&&q,jp=Oi&&ee&&!ee.nodeType&&ee,MC=jp&&jp.exports===Oi,_t=MC&&os.process,Es=function(){try{return jp&&jp.require&&jp.require("util").types||_t&&_t.binding&&_t.binding("util")}catch{}}(),Up=Es&&Es.isArrayBuffer,L_=Es&&Es.isDate,Vp=Es&&Es.isMap,ow=Es&&Es.isRegExp,zp=Es&&Es.isSet,TC=Es&&Es.isTypedArray;function ca(lt,St,wt){switch(wt.length){case 0:return lt.call(St);case 1:return lt.call(St,wt[0]);case 2:return lt.call(St,wt[0],wt[1]);case 3:return lt.call(St,wt[0],wt[1],wt[2])}return lt.apply(St,wt)}function tF(lt,St,wt,Kt){for(var Xn=-1,Di=null==lt?0:lt.length;++Xn<Di;){var Pr=lt[Xn];St(Kt,Pr,wt(Pr),lt)}return Kt}function Ia(lt,St){for(var wt=-1,Kt=null==lt?0:lt.length;++wt<Kt&&!1!==St(lt[wt],wt,lt););return lt}function nF(lt,St){for(var wt=null==lt?0:lt.length;wt--&&!1!==St(lt[wt],wt,lt););return lt}function bu(lt,St){for(var wt=-1,Kt=null==lt?0:lt.length;++wt<Kt;)if(!St(lt[wt],wt,lt))return!1;return!0}function ec(lt,St){for(var wt=-1,Kt=null==lt?0:lt.length,Xn=0,Di=[];++wt<Kt;){var Pr=lt[wt];St(Pr,wt,lt)&&(Di[Xn++]=Pr)}return Di}function fd(lt,St){return!(null==lt||!lt.length)&&Sc(lt,St,0)>-1}function F_(lt,St,wt){for(var Kt=-1,Xn=null==lt?0:lt.length;++Kt<Xn;)if(wt(St,lt[Kt]))return!0;return!1}function _r(lt,St){for(var wt=-1,Kt=null==lt?0:lt.length,Xn=Array(Kt);++wt<Kt;)Xn[wt]=St(lt[wt],wt,lt);return Xn}function ll(lt,St){for(var wt=-1,Kt=St.length,Xn=lt.length;++wt<Kt;)lt[Xn+wt]=St[wt];return lt}function Hp(lt,St,wt,Kt){var Xn=-1,Di=null==lt?0:lt.length;for(Kt&&Di&&(wt=lt[++Xn]);++Xn<Di;)wt=St(wt,lt[Xn],Xn,lt);return wt}function yu(lt,St,wt,Kt){var Xn=null==lt?0:lt.length;for(Kt&&Xn&&(wt=lt[--Xn]);Xn--;)wt=St(wt,lt[Xn],Xn,lt);return wt}function B_(lt,St){for(var wt=-1,Kt=null==lt?0:lt.length;++wt<Kt;)if(St(lt[wt],wt,lt))return!0;return!1}var dl=V_("length");function j_(lt,St,wt){var Kt;return wt(lt,function(Xn,Di,Pr){if(St(Xn,Di,Pr))return Kt=Di,!1}),Kt}function Rt(lt,St,wt,Kt){for(var Xn=lt.length,Di=wt+(Kt?1:-1);Kt?Di--:++Di<Xn;)if(St(lt[Di],Di,lt))return Di;return-1}function Sc(lt,St,wt){return St==St?function PC(lt,St,wt){for(var Kt=wt-1,Xn=lt.length;++Kt<Xn;)if(lt[Kt]===St)return Kt;return-1}(lt,St,wt):Rt(lt,vu,wt)}function U_(lt,St,wt,Kt){for(var Xn=wt-1,Di=lt.length;++Xn<Di;)if(Kt(lt[Xn],St))return Xn;return-1}function vu(lt){return lt!=lt}function sw(lt,St){var wt=null==lt?0:lt.length;return wt?Us(lt,St)/wt:NaN}function V_(lt){return function(St){return null==St?y:St[lt]}}function z_(lt){return function(St){return null==lt?y:lt[St]}}function tc(lt,St,wt,Kt,Xn){return Xn(lt,function(Di,Pr,qi){wt=Kt?(Kt=!1,Di):St(wt,Di,Pr,qi)}),wt}function Us(lt,St){for(var wt,Kt=-1,Xn=lt.length;++Kt<Xn;){var Di=St(lt[Kt]);Di!==y&&(wt=wt===y?Di:wt+Di)}return wt}function la(lt,St){for(var wt=-1,Kt=Array(lt);++wt<lt;)Kt[wt]=St(wt);return Kt}function H_(lt){return lt&&lt.slice(0,hw(lt)+1).replace(Wt,"")}function ss(lt){return function(St){return lt(St)}}function Wp(lt,St){return _r(St,function(wt){return lt[wt]})}function wu(lt,St){return lt.has(St)}function xu(lt,St){for(var wt=-1,Kt=lt.length;++wt<Kt&&Sc(St,lt[wt],0)>-1;);return wt}function G_(lt,St){for(var wt=lt.length;wt--&&Sc(St,lt[wt],0)>-1;);return wt}var DC=z_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),cw=z_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function kC(lt){return"\\"+bi[lt]}function Go(lt){return Bp.test(lt)}function W_(lt){var St=-1,wt=Array(lt.size);return lt.forEach(function(Kt,Xn){wt[++St]=[Xn,Kt]}),wt}function dw(lt,St){return function(wt){return lt(St(wt))}}function ul(lt,St){for(var wt=-1,Kt=lt.length,Xn=0,Di=[];++wt<Kt;){var Pr=lt[wt];(Pr===St||Pr===O)&&(lt[wt]=O,Di[Xn++]=wt)}return Di}function $p(lt){var St=-1,wt=Array(lt.size);return lt.forEach(function(Kt){wt[++St]=Kt}),wt}function Eu(lt){return Go(lt)?function rn(lt){for(var St=ew.lastIndex=0;ew.test(lt);)++St;return St}(lt):dl(lt)}function _n(lt){return Go(lt)?function fw(lt){return lt.match(ew)||[]}(lt):function IC(lt){return lt.split("")}(lt)}function hw(lt){for(var St=lt.length;St--&&$t.test(lt.charAt(St)););return St}var LC=z_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Qn=function lt(St){var u,wt=(St=null==St?Ho:Qn.defaults(Ho.Object(),St,Qn.pick(Ho,tw))).Array,Kt=St.Date,Xn=St.Error,Di=St.Function,Pr=St.Math,qi=St.Object,$_=St.RegExp,Nr=St.String,zt=St.TypeError,Sn=wt.prototype,$o=qi.prototype,so=St["__core-js_shared__"],As=Di.prototype.toString,Si=$o.hasOwnProperty,Qi=0,Yo=(u=/[^.]+$/.exec(so&&so.keys&&so.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Vs=$o.toString,Jn=As.call(qi),Fh=Ho._,pw=$_("^"+As.call(Si).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cc=MC?St.Buffer:y,Li=St.Symbol,hl=St.Uint8Array,pd=Cc?Cc.allocUnsafe:y,zs=dw(qi.getPrototypeOf,qi),Au=qi.create,Y_=$o.propertyIsEnumerable,Da=Sn.splice,Bh=Li?Li.isConcatSpreadable:y,ka=Li?Li.iterator:y,Ln=Li?Li.toStringTag:y,Su=function(){try{var u=Pu(qi,"defineProperty");return u({},"",{}),u}catch{}}(),jh=St.clearTimeout!==Ho.clearTimeout&&St.clearTimeout,nc=Kt&&Kt.now!==Ho.Date.now&&Kt.now,Yp=St.setTimeout!==Ho.setTimeout&&St.setTimeout,Mc=Pr.ceil,br=Pr.floor,Uh=qi.getOwnPropertySymbols,Xo=Cc?Cc.isBuffer:y,Do=St.isFinite,X_=Sn.join,md=dw(qi.keys,qi),Lr=Pr.max,er=Pr.min,K_=Kt.now,FC=St.parseInt,mw=Pr.random,q_=Sn.reverse,Xp=Pu(St,"DataView"),Vh=Pu(St,"Map"),zh=Pu(St,"Promise"),Hh=Pu(St,"Set"),Kp=Pu(St,"WeakMap"),qp=Pu(qi,"create"),J_=Kp&&new Kp,Gh={},iF=ac(Xp),rF=ac(Vh),oF=ac(zh),sF=ac(Hh),aF=ac(Kp),Z_=Li?Li.prototype:y,Jp=Z_?Z_.valueOf:y,Q_=Z_?Z_.toString:y;function Pe(u){if(Mr(u)&&!$n(u)&&!(u instanceof vi)){if(u instanceof Ra)return u;if(Si.call(u,"__wrapped__"))return Cb(u)}return new Ra(u)}var Wh=function(){function u(){}return function(p){if(!yr(p))return{};if(Au)return Au(p);u.prototype=p;var E=new u;return u.prototype=y,E}}();function eb(){}function Ra(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=y}function vi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function fl(u){var p=-1,E=null==u?0:u.length;for(this.clear();++p<E;){var te=u[p];this.set(te[0],te[1])}}function Oa(u){var p=-1,E=null==u?0:u.length;for(this.clear();++p<E;){var te=u[p];this.set(te[0],te[1])}}function Tc(u){var p=-1,E=null==u?0:u.length;for(this.clear();++p<E;){var te=u[p];this.set(te[0],te[1])}}function _d(u){var p=-1,E=null==u?0:u.length;for(this.__data__=new Tc;++p<E;)this.add(u[p])}function Cr(u){var p=this.__data__=new Oa(u);this.size=p.size}function Ew(u,p){var E=$n(u),te=!E&&jc(u),Ae=!E&&!te&&Dl(u),je=!E&&!te&&!Ae&&Ld(u),et=E||te||Ae||je,at=et?la(u.length,Nr):[],pt=at.length;for(var Pt in u)(p||Si.call(u,Pt))&&(!et||!("length"==Pt||Ae&&("offset"==Pt||"parent"==Pt)||je&&("buffer"==Pt||"byteLength"==Pt||"byteOffset"==Pt)||ma(Pt,pt)))&&at.push(Pt);return at}function ib(u){var p=u.length;return p?u[hb(0,p-1)]:y}function Aw(u,p){return kd(Ro(u),vd(p,0,u.length))}function rb(u){return kd(Ro(u))}function bd(u,p,E){(E!==y&&!Zo(u[p],E)||E===y&&!(p in u))&&ml(u,p,E)}function pl(u,p,E){var te=u[p];(!Si.call(u,p)||!Zo(te,E)||E===y&&!(p in u))&&ml(u,p,E)}function Mu(u,p){for(var E=u.length;E--;)if(Zo(u[E][0],p))return E;return-1}function yd(u,p,E,te){return gl(u,function(Ae,je,et){p(te,Ae,E(Ae),et)}),te}function Un(u,p){return u&&Ko(p,co(p),u)}function ml(u,p,E){"__proto__"==p&&Su?Su(u,p,{configurable:!0,enumerable:!0,value:E,writable:!0}):u[p]=E}function ob(u,p){for(var E=-1,te=p.length,Ae=wt(te),je=null==u;++E<te;)Ae[E]=je?y:ey(u,p[E]);return Ae}function vd(u,p,E){return u==u&&(E!==y&&(u=u<=E?u:E),p!==y&&(u=u>=p?u:p)),u}function da(u,p,E,te,Ae,je){var et,at=1&p,pt=2&p,Pt=4&p;if(E&&(et=Ae?E(u,te,Ae,je):E(u)),et!==y)return et;if(!yr(u))return u;var Nt=$n(u);if(Nt){if(et=function rM(u){var p=u.length,E=new u.constructor(p);return p&&"string"==typeof u[0]&&Si.call(u,"index")&&(E.index=u.index,E.input=u.input),E}(u),!at)return Ro(u,et)}else{var jt=ls(u),Qt=jt==Ze||jt==pe;if(Dl(u))return am(u,at);if(jt==U||jt==Je||Qt&&!Ae){if(et=pt||Qt?{}:Zw(u),!at)return pt?function Ww(u,p){return Ko(u,Id(u),p)}(u,function Sw(u,p){return u&&Ko(p,Is(p),u)}(et,u)):function JC(u,p){return Ko(u,af(u),p)}(u,Un(et,u))}else{if(!zi[jt])return Ae?u:{};et=function oM(u,p,E){var te=u.constructor;switch(p){case _e:return cm(u);case I:case ae:return new te(+u);case X:return function lm(u,p){var E=p?cm(u.buffer):u.buffer;return new u.constructor(E,u.byteOffset,u.byteLength)}(u,E);case oe:case Be:case tt:case dt:case Et:case ln:case Fn:case Gn:case kn:return _b(u,E);case re:return new te;case Y:case st:return new te(u);case ye:return function gb(u){var p=new u.constructor(u.source,_i.exec(u));return p.lastIndex=u.lastIndex,p}(u);case ze:return new te;case bt:return function qC(u){return Jp?qi(Jp.call(u)):{}}(u)}}(u,jt,at)}}je||(je=new Cr);var bn=je.get(u);if(bn)return bn;je.set(u,et),qb(u)?u.forEach(function(Dn){et.add(da(Dn,p,E,Dn,u,je))}):Rx(u)&&u.forEach(function(Dn,fi){et.set(fi,da(Dn,p,E,fi,u,je))});var ai=Nt?y:(Pt?pt?El:qo:pt?Is:co)(u);return Ia(ai||u,function(Dn,fi){ai&&(Dn=u[fi=Dn]),pl(et,fi,da(Dn,p,E,fi,u,je))}),et}function wd(u,p,E){var te=E.length;if(null==u)return!te;for(u=qi(u);te--;){var Ae=E[te],et=u[Ae];if(et===y&&!(Ae in u)||!(0,p[Ae])(et))return!1}return!0}function Mw(u,p,E){if("function"!=typeof u)throw new zt(_);return df(function(){u.apply(y,E)},p)}function Xh(u,p,E,te){var Ae=-1,je=fd,et=!0,at=u.length,pt=[],Pt=p.length;if(!at)return pt;E&&(p=_r(p,ss(E))),te?(je=F_,et=!1):p.length>=200&&(je=wu,et=!1,p=new _d(p));e:for(;++Ae<at;){var Nt=u[Ae],jt=null==E?Nt:E(Nt);if(Nt=te||0!==Nt?Nt:0,et&&jt==jt){for(var Qt=Pt;Qt--;)if(p[Qt]===jt)continue e;pt.push(Nt)}else je(p,jt,te)||pt.push(Nt)}return pt}Pe.templateSettings={escape:Uo,evaluate:js,interpolate:al,variable:"",imports:{_:Pe}},(Pe.prototype=eb.prototype).constructor=Pe,(Ra.prototype=Wh(eb.prototype)).constructor=Ra,(vi.prototype=Wh(eb.prototype)).constructor=vi,fl.prototype.clear=function BC(){this.__data__=qp?qp(null):{},this.size=0},fl.prototype.delete=function jC(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p},fl.prototype.get=function _w(u){var p=this.__data__;if(qp){var E=p[u];return E===T?y:E}return Si.call(p,u)?p[u]:y},fl.prototype.has=function bw(u){var p=this.__data__;return qp?p[u]!==y:Si.call(p,u)},fl.prototype.set=function UC(u,p){var E=this.__data__;return this.size+=this.has(u)?0:1,E[u]=qp&&p===y?T:p,this},Oa.prototype.clear=function VC(){this.__data__=[],this.size=0},Oa.prototype.delete=function ic(u){var p=this.__data__,E=Mu(p,u);return!(E<0||(E==p.length-1?p.pop():Da.call(p,E,1),--this.size,0))},Oa.prototype.get=function yw(u){var p=this.__data__,E=Mu(p,u);return E<0?y:p[E][1]},Oa.prototype.has=function vw(u){return Mu(this.__data__,u)>-1},Oa.prototype.set=function ww(u,p){var E=this.__data__,te=Mu(E,u);return te<0?(++this.size,E.push([u,p])):E[te][1]=p,this},Tc.prototype.clear=function cF(){this.size=0,this.__data__={hash:new fl,map:new(Vh||Oa),string:new fl}},Tc.prototype.delete=function tr(u){var p=wb(this,u).delete(u);return this.size-=p?1:0,p},Tc.prototype.get=function tb(u){return wb(this,u).get(u)},Tc.prototype.has=function $h(u){return wb(this,u).has(u)},Tc.prototype.set=function as(u,p){var E=wb(this,u),te=E.size;return E.set(u,p),this.size+=E.size==te?0:1,this},_d.prototype.add=_d.prototype.push=function Yh(u){return this.__data__.set(u,T),this},_d.prototype.has=function Cu(u){return this.__data__.has(u)},Cr.prototype.clear=function zC(){this.__data__=new Oa,this.size=0},Cr.prototype.delete=function nb(u){var p=this.__data__,E=p.delete(u);return this.size=p.size,E},Cr.prototype.get=function HC(u){return this.__data__.get(u)},Cr.prototype.has=function rc(u){return this.__data__.has(u)},Cr.prototype.set=function xw(u,p){var E=this.__data__;if(E instanceof Oa){var te=E.__data__;if(!Vh||te.length<199)return te.push([u,p]),this.size=++E.size,this;E=this.__data__=new Tc(te)}return E.set(u,p),this.size=E.size,this};var gl=Ad(Ss),Tw=Ad(ua,!0);function GC(u,p){var E=!0;return gl(u,function(te,Ae,je){return E=!!p(te,Ae,je)}),E}function It(u,p,E){for(var te=-1,Ae=u.length;++te<Ae;){var je=u[te],et=p(je);if(null!=et&&(at===y?et==et&&!Qo(et):E(et,at)))var at=et,pt=je}return pt}function nr(u,p){var E=[];return gl(u,function(te,Ae,je){p(te,Ae,je)&&E.push(te)}),E}function ii(u,p,E,te,Ae){var je=-1,et=u.length;for(E||(E=xb),Ae||(Ae=[]);++je<et;){var at=u[je];p>0&&E(at)?p>1?ii(at,p-1,E,te,Ae):ll(Ae,at):te||(Ae[Ae.length]=at)}return Ae}var Fi=Jr(),sb=Jr(!0);function Ss(u,p){return u&&Fi(u,p,co)}function ua(u,p){return u&&sb(u,p,co)}function Tu(u,p){return ec(p,function(E){return La(u[E])})}function Ic(u,p){for(var E=0,te=(p=yl(p,u)).length;null!=u&&E<te;)u=u[Gs(p[E++])];return E&&E==te?u:y}function Iw(u,p,E){var te=p(u);return $n(u)?te:ll(te,E(u))}function Cs(u){return null==u?u===y?"[object Undefined]":"[object Null]":Ln&&Ln in qi(u)?function Hs(u){var p=Si.call(u,Ln),E=u[Ln];try{u[Ln]=y;var te=!0}catch{}var Ae=Vs.call(u);return te&&(p?u[Ln]=E:delete u[Ln]),Ae}(u):function lf(u){return Vs.call(u)}(u)}function Zp(u,p){return u>p}function cs(u,p){return null!=u&&Si.call(u,p)}function Dc(u,p){return null!=u&&p in qi(u)}function ha(u,p,E){for(var te=E?F_:fd,Ae=u[0].length,je=u.length,et=je,at=wt(je),pt=1/0,Pt=[];et--;){var Nt=u[et];et&&p&&(Nt=_r(Nt,ss(p))),pt=er(Nt.length,pt),at[et]=!E&&(p||Ae>=120&&Nt.length>=120)?new _d(et&&Nt):y}Nt=u[0];var jt=-1,Qt=at[0];e:for(;++jt<Ae&&Pt.length<pt;){var bn=Nt[jt],On=p?p(bn):bn;if(bn=E||0!==bn?bn:0,!(Qt?wu(Qt,On):te(Pt,On,E))){for(et=je;--et;){var ai=at[et];if(!(ai?wu(ai,On):te(u[et],On,E)))continue e}Qt&&Qt.push(On),Pt.push(bn)}}return Pt}function Kh(u,p,E){var te=null==(u=uM(u,p=yl(p,u)))?u:u[Gs(_a(p))];return null==te?y:ca(te,u,E)}function ab(u){return Mr(u)&&Cs(u)==Je}function xd(u,p,E,te,Ae){return u===p||(null==u||null==p||!Mr(u)&&!Mr(p)?u!=u&&p!=p:function cb(u,p,E,te,Ae,je){var et=$n(u),at=$n(p),pt=et?ge:ls(u),Pt=at?ge:ls(p),Nt=(pt=pt==Je?U:pt)==U,jt=(Pt=Pt==Je?U:Pt)==U,Qt=pt==Pt;if(Qt&&Dl(u)){if(!Dl(p))return!1;et=!0,Nt=!1}if(Qt&&!Nt)return je||(je=new Cr),et||Ld(u)?Zr(u,p,E,te,Ae,je):function nM(u,p,E,te,Ae,je,et){switch(E){case X:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case _e:return!(u.byteLength!=p.byteLength||!je(new hl(u),new hl(p)));case I:case ae:case Y:return Zo(+u,+p);case Ge:return u.name==p.name&&u.message==p.message;case ye:case st:return u==p+"";case re:var at=W_;case ze:if(at||(at=$p),u.size!=p.size&&!(1&te))return!1;var Pt=et.get(u);if(Pt)return Pt==p;te|=2,et.set(u,p);var Nt=Zr(at(u),at(p),te,Ae,je,et);return et.delete(u),Nt;case bt:if(Jp)return Jp.call(u)==Jp.call(p)}return!1}(u,p,pt,E,te,Ae,je);if(!(1&E)){var bn=Nt&&Si.call(u,"__wrapped__"),On=jt&&Si.call(p,"__wrapped__");if(bn||On){var ai=bn?u.value():u,Dn=On?p.value():p;return je||(je=new Cr),Ae(ai,Dn,E,te,je)}}return!!Qt&&(je||(je=new Cr),function sf(u,p,E,te,Ae,je){var et=1&E,at=qo(u),pt=at.length;if(pt!=qo(p).length&&!et)return!1;for(var jt=pt;jt--;){var Qt=at[jt];if(!(et?Qt in p:Si.call(p,Qt)))return!1}var bn=je.get(u),On=je.get(p);if(bn&&On)return bn==p&&On==u;var ai=!0;je.set(u,p),je.set(p,u);for(var Dn=et;++jt<pt;){var fi=u[Qt=at[jt]],yi=p[Qt];if(te)var Ys=et?te(yi,fi,Qt,p,u,je):te(fi,yi,Qt,u,p,je);if(!(Ys===y?fi===yi||Ae(fi,yi,E,te,je):Ys)){ai=!1;break}Dn||(Dn="constructor"==Qt)}if(ai&&!Dn){var hs=u.constructor,Xs=p.constructor;hs!=Xs&&"constructor"in u&&"constructor"in p&&!("function"==typeof hs&&hs instanceof hs&&"function"==typeof Xs&&Xs instanceof Xs)&&(ai=!1)}return je.delete(u),je.delete(p),ai}(u,p,E,te,Ae,je))}(u,p,E,te,xd,Ae))}function qh(u,p,E,te){var Ae=E.length,je=Ae,et=!te;if(null==u)return!je;for(u=qi(u);Ae--;){var at=E[Ae];if(et&&at[2]?at[1]!==u[at[0]]:!(at[0]in u))return!1}for(;++Ae<je;){var pt=(at=E[Ae])[0],Pt=u[pt],Nt=at[1];if(et&&at[2]){if(Pt===y&&!(pt in u))return!1}else{var jt=new Cr;if(te)var Qt=te(Pt,Nt,pt,u,p,jt);if(!(Qt===y?xd(Nt,Pt,3,te,jt):Qt))return!1}}return!0}function Rw(u){return!(!yr(u)||function cM(u){return!!Yo&&Yo in u}(u))&&(La(u)?pw:qn).test(ac(u))}function db(u){return"function"==typeof u?u:null==u?Ds:"object"==typeof u?$n(u)?_l(u[0],u[1]):ko(u):Mf(u)}function Qp(u){if(!Dd(u))return md(u);var p=[];for(var E in qi(u))Si.call(u,E)&&"constructor"!=E&&p.push(E);return p}function Jh(u,p){return u<p}function Lw(u,p){var E=-1,te=Ts(u)?wt(u.length):[];return gl(u,function(Ae,je,et){te[++E]=p(Ae,je,et)}),te}function ko(u){var p=um(u);return 1==p.length&&p[0][2]?Eb(p[0][0],p[0][1]):function(E){return E===u||qh(E,u,p)}}function _l(u,p){return Al(u)&&cf(p)?Eb(Gs(u),p):function(E){var te=ey(E,u);return te===y&&te===p?ty(E,u):xd(p,te,3)}}function Yi(u,p,E,te,Ae){u!==p&&Fi(p,function(je,et){if(Ae||(Ae=new Cr),yr(je))!function em(u,p,E,te,Ae,je,et){var at=Ab(u,E),pt=Ab(p,E),Pt=et.get(pt);if(Pt)bd(u,E,Pt);else{var Nt=je?je(at,pt,E+"",u,p,et):y,jt=Nt===y;if(jt){var Qt=$n(pt),bn=!Qt&&Dl(pt),On=!Qt&&!bn&&Ld(pt);Nt=pt,Qt||bn||On?$n(at)?Nt=at:Fr(at)?Nt=Ro(at):bn?(jt=!1,Nt=am(pt,!0)):On?(jt=!1,Nt=_b(pt,!0)):Nt=[]:Vu(pt)||jc(pt)?(Nt=at,jc(at)?Nt=Im(at):(!yr(at)||La(at))&&(Nt=Zw(pt))):jt=!1}jt&&(et.set(pt,Nt),Ae(Nt,pt,te,je,et),et.delete(pt)),bd(u,E,Nt)}}(u,p,et,E,Yi,te,Ae);else{var at=te?te(Ab(u,et),je,et+"",u,p,Ae):y;at===y&&(at=je),bd(u,et,at)}},Is)}function Fw(u,p){var E=u.length;if(E)return ma(p+=p<0?E:0,E)?u[p]:y}function tm(u,p,E){p=p.length?_r(p,function(je){return $n(je)?function(et){return Ic(et,1===je.length?je[0]:je)}:je}):[Ds];var te=-1;return p=_r(p,ss(Rn())),function Gp(lt,St){var wt=lt.length;for(lt.sort(St);wt--;)lt[wt]=lt[wt].value;return lt}(Lw(u,function(je,et,at){return{criteria:_r(p,function(Pt){return Pt(je)}),index:++te,value:je}}),function(je,et){return function Hw(u,p,E){for(var te=-1,Ae=u.criteria,je=p.criteria,et=Ae.length,at=E.length;++te<et;){var pt=bb(Ae[te],je[te]);if(pt)return te>=at?pt:pt*("desc"==E[te]?-1:1)}return u.index-p.index}(je,et,E)})}function ub(u,p,E){for(var te=-1,Ae=p.length,je={};++te<Ae;){var et=p[te],at=Ic(u,et);E(at,et)&&ku(je,yl(et,u),at)}return je}function Iu(u,p,E,te){var Ae=te?U_:Sc,je=-1,et=p.length,at=u;for(u===p&&(p=Ro(p)),E&&(at=_r(u,ss(E)));++je<et;)for(var pt=0,Pt=p[je],Nt=E?E(Pt):Pt;(pt=Ae(at,Nt,pt,te))>-1;)at!==u&&Da.call(at,pt,1),Da.call(u,pt,1);return u}function Rc(u,p){for(var E=u?p.length:0,te=E-1;E--;){var Ae=p[E];if(E==te||Ae!==je){var je=Ae;ma(Ae)?Da.call(u,Ae,1):Ed(u,Ae)}}return u}function hb(u,p){return u+br(mw()*(p-u+1))}function Du(u,p){var E="";if(!u||p<1||p>He)return E;do{p%2&&(E+=u),(p=br(p/2))&&(u+=u)}while(p);return E}function ei(u,p){return Sb(ex(u,p,Ds),u+"")}function fb(u){return ib(Wu(u))}function jw(u,p){var E=Wu(u);return kd(E,vd(p,0,E.length))}function ku(u,p,E,te){if(!yr(u))return u;for(var Ae=-1,je=(p=yl(p,u)).length,et=je-1,at=u;null!=at&&++Ae<je;){var pt=Gs(p[Ae]),Pt=E;if("__proto__"===pt||"constructor"===pt||"prototype"===pt)return u;if(Ae!=et){var Nt=at[pt];(Pt=te?te(Nt,pt,at):y)===y&&(Pt=yr(Nt)?Nt:ma(p[Ae+1])?[]:{})}pl(at,pt,Pt),at=at[pt]}return u}var Uw=J_?function(u,p){return J_.set(u,p),u}:Ds,Ru=Su?function(u,p){return Su(u,"toString",{configurable:!0,enumerable:!1,value:Sf(p),writable:!0})}:Ds;function Zh(u){return kd(Wu(u))}function fa(u,p,E){var te=-1,Ae=u.length;p<0&&(p=-p>Ae?0:Ae+p),(E=E>Ae?Ae:E)<0&&(E+=Ae),Ae=p>E?0:E-p>>>0,p>>>=0;for(var je=wt(Ae);++te<Ae;)je[te]=u[te+p];return je}function pb(u,p){var E;return gl(u,function(te,Ae,je){return!(E=p(te,Ae,je))}),!!E}function im(u,p,E){var te=0,Ae=null==u?te:u.length;if("number"==typeof p&&p==p&&Ae<=2147483647){for(;te<Ae;){var je=te+Ae>>>1,et=u[je];null!==et&&!Qo(et)&&(E?et<=p:et<p)?te=je+1:Ae=je}return Ae}return mb(u,p,Ds,E)}function mb(u,p,E,te){var Ae=0,je=null==u?0:u.length;if(0===je)return 0;for(var et=(p=E(p))!=p,at=null===p,pt=Qo(p),Pt=p===y;Ae<je;){var Nt=br((Ae+je)/2),jt=E(u[Nt]),Qt=jt!==y,bn=null===jt,On=jt==jt,ai=Qo(jt);if(et)var Dn=te||On;else Dn=Pt?On&&(te||Qt):at?On&&Qt&&(te||!bn):pt?On&&Qt&&!bn&&(te||!ai):!bn&&!ai&&(te?jt<=p:jt<p);Dn?Ae=Nt+1:je=Nt}return er(je,4294967294)}function Vw(u,p){for(var E=-1,te=u.length,Ae=0,je=[];++E<te;){var et=u[E],at=p?p(et):et;if(!E||!Zo(at,pt)){var pt=at;je[Ae++]=0===et?0:et}}return je}function XC(u){return"number"==typeof u?u:Qo(u)?NaN:+u}function pa(u){if("string"==typeof u)return u;if($n(u))return _r(u,pa)+"";if(Qo(u))return Q_?Q_.call(u):"";var p=u+"";return"0"==p&&1/u==-Te?"-0":p}function oc(u,p,E){var te=-1,Ae=fd,je=u.length,et=!0,at=[],pt=at;if(E)et=!1,Ae=F_;else if(je>=200){var Pt=p?null:dF(u);if(Pt)return $p(Pt);et=!1,Ae=wu,pt=new _d}else pt=p?[]:at;e:for(;++te<je;){var Nt=u[te],jt=p?p(Nt):Nt;if(Nt=E||0!==Nt?Nt:0,et&&jt==jt){for(var Qt=pt.length;Qt--;)if(pt[Qt]===jt)continue e;p&&pt.push(jt),at.push(Nt)}else Ae(pt,jt,E)||(pt!==at&&pt.push(jt),at.push(Nt))}return at}function Ed(u,p){return null==(u=uM(u,p=yl(p,u)))||delete u[Gs(_a(p))]}function zw(u,p,E,te){return ku(u,p,E(Ic(u,p)),te)}function bl(u,p,E,te){for(var Ae=u.length,je=te?Ae:-1;(te?je--:++je<Ae)&&p(u[je],je,u););return E?fa(u,te?0:je,te?je+1:Ae):fa(u,te?je+1:0,te?Ae:je)}function rm(u,p){var E=u;return E instanceof vi&&(E=E.value()),Hp(p,function(te,Ae){return Ae.func.apply(Ae.thisArg,ll([te],Ae.args))},E)}function Ou(u,p,E){var te=u.length;if(te<2)return te?oc(u[0]):[];for(var Ae=-1,je=wt(te);++Ae<te;)for(var et=u[Ae],at=-1;++at<te;)at!=Ae&&(je[Ae]=Xh(je[Ae]||et,u[at],p,E));return oc(ii(je,1),p,E)}function KC(u,p,E){for(var te=-1,Ae=u.length,je=p.length,et={};++te<Ae;)E(et,u[te],te<je?p[te]:y);return et}function om(u){return Fr(u)?u:[]}function sm(u){return"function"==typeof u?u:Ds}function yl(u,p){return $n(u)?u:Al(u,p)?[u]:hm(ji(u))}var sc=ei;function vl(u,p,E){var te=u.length;return E=E===y?te:E,!p&&E>=te?u:fa(u,p,E)}var Qh=jh||function(u){return Ho.clearTimeout(u)};function am(u,p){if(p)return u.slice();var E=u.length,te=pd?pd(E):new u.constructor(E);return u.copy(te),te}function cm(u){var p=new u.constructor(u.byteLength);return new hl(p).set(new hl(u)),p}function _b(u,p){var E=p?cm(u.buffer):u.buffer;return new u.constructor(E,u.byteOffset,u.length)}function bb(u,p){if(u!==p){var E=u!==y,te=null===u,Ae=u==u,je=Qo(u),et=p!==y,at=null===p,pt=p==p,Pt=Qo(p);if(!at&&!Pt&&!je&&u>p||je&&et&&pt&&!at&&!Pt||te&&et&&pt||!E&&pt||!Ae)return 1;if(!te&&!je&&!Pt&&u<p||Pt&&E&&Ae&&!te&&!je||at&&E&&Ae||!et&&Ae||!pt)return-1}return 0}function yb(u,p,E,te){for(var Ae=-1,je=u.length,et=E.length,at=-1,pt=p.length,Pt=Lr(je-et,0),Nt=wt(pt+Pt),jt=!te;++at<pt;)Nt[at]=p[at];for(;++Ae<et;)(jt||Ae<je)&&(Nt[E[Ae]]=u[Ae]);for(;Pt--;)Nt[at++]=u[Ae++];return Nt}function Gw(u,p,E,te){for(var Ae=-1,je=u.length,et=-1,at=E.length,pt=-1,Pt=p.length,Nt=Lr(je-at,0),jt=wt(Nt+Pt),Qt=!te;++Ae<Nt;)jt[Ae]=u[Ae];for(var bn=Ae;++pt<Pt;)jt[bn+pt]=p[pt];for(;++et<at;)(Qt||Ae<je)&&(jt[bn+E[et]]=u[Ae++]);return jt}function Ro(u,p){var E=-1,te=u.length;for(p||(p=wt(te));++E<te;)p[E]=u[E];return p}function Ko(u,p,E,te){var Ae=!E;E||(E={});for(var je=-1,et=p.length;++je<et;){var at=p[je],pt=te?te(E[at],u[at],at,E,u):y;pt===y&&(pt=u[at]),Ae?ml(E,at,pt):pl(E,at,pt)}return E}function ef(u,p){return function(E,te){var Ae=$n(E)?tF:yd,je=p?p():{};return Ae(E,u,Rn(te,2),je)}}function Pa(u){return ei(function(p,E){var te=-1,Ae=E.length,je=Ae>1?E[Ae-1]:y,et=Ae>2?E[2]:y;for(je=u.length>3&&"function"==typeof je?(Ae--,je):y,et&&ds(E[0],E[1],et)&&(je=Ae<3?y:je,Ae=1),p=qi(p);++te<Ae;){var at=E[te];at&&u(p,at,te,je)}return p})}function Ad(u,p){return function(E,te){if(null==E)return E;if(!Ts(E))return u(E,te);for(var Ae=E.length,je=p?Ae:-1,et=qi(E);(p?je--:++je<Ae)&&!1!==te(et[je],je,et););return E}}function Jr(u){return function(p,E,te){for(var Ae=-1,je=qi(p),et=te(p),at=et.length;at--;){var pt=et[u?at:++Ae];if(!1===E(je[pt],pt,je))break}return p}}function Bi(u){return function(p){var E=Go(p=ji(p))?_n(p):y,te=E?E[0]:p.charAt(0),Ae=E?vl(E,1).join(""):p.slice(1);return te[u]()+Ae}}function wl(u){return function(p){return Hp(Bd(Pm(p).replace(eF,"")),u,"")}}function tf(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var E=Wh(u.prototype),te=u.apply(E,p);return yr(te)?te:E}}function Oc(u){return function(p,E,te){var Ae=qi(p);if(!Ts(p)){var je=Rn(E,3);p=co(p),E=function(at){return je(Ae[at],at,Ae)}}var et=u(p,E,te);return et>-1?Ae[je?p[et]:et]:y}}function Sd(u){return Lc(function(p){var E=p.length,te=E,Ae=Ra.prototype.thru;for(u&&p.reverse();te--;){var je=p[te];if("function"!=typeof je)throw new zt(_);if(Ae&&!et&&"wrapper"==Td(je))var et=new Ra([],!0)}for(te=et?te:E;++te<E;){var at=Td(je=p[te]),pt="wrapper"==at?dm(je):y;et=pt&&Nu(pt[0])&&424==pt[1]&&!pt[4].length&&1==pt[9]?et[Td(pt[0])].apply(et,pt[3]):1==je.length&&Nu(je)?et[at]():et.thru(je)}return function(){var Pt=arguments,Nt=Pt[0];if(et&&1==Pt.length&&$n(Nt))return et.plant(Nt).value();for(var jt=0,Qt=E?p[jt].apply(this,Pt):Nt;++jt<E;)Qt=p[jt].call(this,Qt);return Qt}})}function Pc(u,p,E,te,Ae,je,et,at,pt,Pt){var Nt=p&k,jt=1&p,Qt=2&p,bn=24&p,On=512&p,ai=Qt?y:tf(u);return function Dn(){for(var fi=arguments.length,yi=wt(fi),Ys=fi;Ys--;)yi[Ys]=arguments[Ys];if(bn)var hs=Fc(Dn),Xs=function aw(lt,St){for(var wt=lt.length,Kt=0;wt--;)lt[wt]===St&&++Kt;return Kt}(yi,hs);if(te&&(yi=yb(yi,te,Ae,bn)),je&&(yi=Gw(yi,je,et,bn)),fi-=Xs,bn&&fi<Pt){var Wr=ul(yi,hs);return QC(u,p,Pc,Dn.placeholder,E,yi,Wr,at,pt,Pt-fi)}var Fa=jt?E:this,Hc=Qt?Fa[u]:u;return fi=yi.length,at?yi=function tx(u,p){for(var E=u.length,te=er(p.length,E),Ae=Ro(u);te--;){var je=p[te];u[te]=ma(je,E)?Ae[je]:y}return u}(yi,at):On&&fi>1&&yi.reverse(),Nt&&pt<fi&&(yi.length=pt),this&&this!==Ho&&this instanceof Dn&&(Hc=ai||tf(Hc)),Hc.apply(Fa,yi)}}function Cd(u,p){return function(E,te){return function kc(u,p,E,te){return Ss(u,function(Ae,je,et){p(te,E(Ae),je,et)}),te}(E,u,p(te),{})}}function nf(u,p){return function(E,te){var Ae;if(E===y&&te===y)return p;if(E!==y&&(Ae=E),te!==y){if(Ae===y)return te;"string"==typeof E||"string"==typeof te?(E=pa(E),te=pa(te)):(E=XC(E),te=XC(te)),Ae=u(E,te)}return Ae}}function rf(u){return Lc(function(p){return p=_r(p,ss(Rn())),ei(function(E){var te=this;return u(p,function(Ae){return ca(Ae,te,E)})})})}function Nc(u,p){var E=(p=p===y?" ":pa(p)).length;if(E<2)return E?Du(p,u):p;var te=Du(p,Mc(u/Eu(p)));return Go(p)?vl(_n(te),0,u).join(""):te.slice(0,u)}function Yw(u){return function(p,E,te){return te&&"number"!=typeof te&&ds(p,E,te)&&(E=te=y),p=Uc(p),E===y?(E=p,p=0):E=Uc(E),function nm(u,p,E,te){for(var Ae=-1,je=Lr(Mc((p-u)/(E||1)),0),et=wt(je);je--;)et[te?je:++Ae]=u,u+=E;return et}(p,E,te=te===y?p<E?1:-1:Uc(te),u)}}function vb(u){return function(p,E){return"string"==typeof p&&"string"==typeof E||(p=us(p),E=us(E)),u(p,E)}}function QC(u,p,E,te,Ae,je,et,at,pt,Pt){var Nt=8&p;p|=Nt?w:64,4&(p&=~(Nt?64:w))||(p&=-4);var ai=[u,p,Ae,Nt?je:y,Nt?et:y,Nt?y:je,Nt?y:et,at,pt,Pt],Dn=E.apply(y,ai);return Nu(u)&&hM(Dn,ai),Dn.placeholder=te,nx(Dn,u,p)}function Xw(u){var p=Pr[u];return function(E,te){if(E=us(E),(te=null==te?0:er(ti(te),292))&&Do(E)){var Ae=(ji(E)+"e").split("e");return+((Ae=(ji(p(Ae[0]+"e"+(+Ae[1]+te)))+"e").split("e"))[0]+"e"+(+Ae[1]-te))}return p(E)}}var dF=Hh&&1/$p(new Hh([,-0]))[1]==Te?function(u){return new Hh(u)}:Xu;function eM(u){return function(p){var E=ls(p);return E==re?W_(p):E==ze?function uw(lt){var St=-1,wt=Array(lt.size);return lt.forEach(function(Kt){wt[++St]=[Kt,Kt]}),wt}(p):function Ii(lt,St){return _r(St,function(wt){return[wt,lt[wt]]})}(p,u(p))}}function xl(u,p,E,te,Ae,je,et,at){var pt=2&p;if(!pt&&"function"!=typeof u)throw new zt(_);var Pt=te?te.length:0;if(Pt||(p&=-97,te=Ae=y),et=et===y?et:Lr(ti(et),0),at=at===y?at:ti(at),Pt-=Ae?Ae.length:0,64&p){var Nt=te,jt=Ae;te=Ae=y}var Qt=pt?y:dm(u),bn=[u,p,E,te,Ae,Nt,jt,je,et,at];if(Qt&&function dM(u,p){var E=u[1],te=p[1],Ae=E|te;if(!(Ae<131)&&!(te==k&&8==E||te==k&&256==E&&u[7].length<=p[8]||384==te&&p[7].length<=p[8]&&8==E))return u;1&te&&(u[2]=p[2],Ae|=1&E?0:4);var at=p[3];if(at){var pt=u[3];u[3]=pt?yb(pt,at,p[4]):at,u[4]=pt?ul(u[3],O):p[4]}(at=p[5])&&(u[5]=(pt=u[5])?Gw(pt,at,p[6]):at,u[6]=pt?ul(u[5],O):p[6]),(at=p[7])&&(u[7]=at),te&k&&(u[8]=null==u[8]?p[8]:er(u[8],p[8])),null==u[9]&&(u[9]=p[9]),u[0]=p[0],u[1]=Ae}(bn,Qt),u=bn[0],p=bn[1],E=bn[2],te=bn[3],Ae=bn[4],!(at=bn[9]=bn[9]===y?pt?0:u.length:Lr(bn[9]-Pt,0))&&24&p&&(p&=-25),p&&1!=p)On=8==p||16==p?function $w(u,p,E){var te=tf(u);return function Ae(){for(var je=arguments.length,et=wt(je),at=je,pt=Fc(Ae);at--;)et[at]=arguments[at];var Pt=je<3&&et[0]!==pt&&et[je-1]!==pt?[]:ul(et,pt);return(je-=Pt.length)<E?QC(u,p,Pc,Ae.placeholder,y,et,Pt,y,y,E-je):ca(this&&this!==Ho&&this instanceof Ae?te:u,this,et)}}(u,p,at):p!=w&&33!=p||Ae.length?Pc.apply(y,bn):function lF(u,p,E,te){var Ae=1&p,je=tf(u);return function et(){for(var at=-1,pt=arguments.length,Pt=-1,Nt=te.length,jt=wt(Nt+pt),Qt=this&&this!==Ho&&this instanceof et?je:u;++Pt<Nt;)jt[Pt]=te[Pt];for(;pt--;)jt[Pt++]=arguments[++at];return ca(Qt,Ae?E:this,jt)}}(u,p,E,te);else var On=function ZC(u,p,E){var te=1&p,Ae=tf(u);return function je(){return(this&&this!==Ho&&this instanceof je?Ae:u).apply(te?E:this,arguments)}}(u,p,E);return nx((Qt?Uw:hM)(On,bn),u,p)}function Md(u,p,E,te){return u===y||Zo(u,$o[E])&&!Si.call(te,E)?p:u}function Kw(u,p,E,te,Ae,je){return yr(u)&&yr(p)&&(je.set(p,u),Yi(u,p,y,Kw,je),je.delete(p)),u}function tM(u){return Vu(u)?y:u}function Zr(u,p,E,te,Ae,je){var et=1&E,at=u.length,pt=p.length;if(at!=pt&&!(et&&pt>at))return!1;var Pt=je.get(u),Nt=je.get(p);if(Pt&&Nt)return Pt==p&&Nt==u;var jt=-1,Qt=!0,bn=2&E?new _d:y;for(je.set(u,p),je.set(p,u);++jt<at;){var On=u[jt],ai=p[jt];if(te)var Dn=et?te(ai,On,jt,p,u,je):te(On,ai,jt,u,p,je);if(Dn!==y){if(Dn)continue;Qt=!1;break}if(bn){if(!B_(p,function(fi,yi){if(!wu(bn,yi)&&(On===fi||Ae(On,fi,E,te,je)))return bn.push(yi)})){Qt=!1;break}}else if(On!==ai&&!Ae(On,ai,E,te,je)){Qt=!1;break}}return je.delete(u),je.delete(p),Qt}function Lc(u){return Sb(ex(u,y,pm),u+"")}function qo(u){return Iw(u,co,af)}function El(u){return Iw(u,Is,Id)}var dm=J_?function(u){return J_.get(u)}:Xu;function Td(u){for(var p=u.name+"",E=Gh[p],te=Si.call(Gh,p)?E.length:0;te--;){var Ae=E[te],je=Ae.func;if(null==je||je==u)return Ae.name}return p}function Fc(u){return(Si.call(Pe,"placeholder")?Pe:u).placeholder}function Rn(){var u=Pe.iteratee||uy;return u=u===uy?db:u,arguments.length?u(arguments[0],arguments[1]):u}function wb(u,p){var E=u.__data__;return function aM(u){var p=typeof u;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u}(p)?E["string"==typeof p?"string":"hash"]:E.map}function um(u){for(var p=co(u),E=p.length;E--;){var te=p[E],Ae=u[te];p[E]=[te,Ae,cf(Ae)]}return p}function Pu(u,p){var E=function RC(lt,St){return null==lt?y:lt[St]}(u,p);return Rw(E)?E:y}var af=Uh?function(u){return null==u?[]:(u=qi(u),ec(Uh(u),function(p){return Y_.call(u,p)}))}:Bm,Id=Uh?function(u){for(var p=[];u;)ll(p,af(u)),u=zs(u);return p}:Bm,ls=Cs;function Jw(u,p,E){for(var te=-1,Ae=(p=yl(p,u)).length,je=!1;++te<Ae;){var et=Gs(p[te]);if(!(je=null!=u&&E(u,et)))break;u=u[et]}return je||++te!=Ae?je:!!(Ae=null==u?0:u.length)&&cc(Ae)&&ma(et,Ae)&&($n(u)||jc(u))}function Zw(u){return"function"!=typeof u.constructor||Dd(u)?{}:Wh(zs(u))}function xb(u){return $n(u)||jc(u)||!!(Bh&&u&&u[Bh])}function ma(u,p){var E=typeof u;return!!(p=p??He)&&("number"==E||"symbol"!=E&&Ai.test(u))&&u>-1&&u%1==0&&u<p}function ds(u,p,E){if(!yr(E))return!1;var te=typeof p;return!!("number"==te?Ts(E)&&ma(p,E.length):"string"==te&&p in E)&&Zo(E[p],u)}function Al(u,p){if($n(u))return!1;var E=typeof u;return!("number"!=E&&"symbol"!=E&&"boolean"!=E&&null!=u&&!Qo(u))||Vo.test(u)||!Za.test(u)||null!=p&&u in qi(p)}function Nu(u){var p=Td(u),E=Pe[p];if("function"!=typeof E||!(p in vi.prototype))return!1;if(u===E)return!0;var te=dm(E);return!!te&&u===te[0]}(Xp&&ls(new Xp(new ArrayBuffer(1)))!=X||Vh&&ls(new Vh)!=re||zh&&ls(zh.resolve())!=me||Hh&&ls(new Hh)!=ze||Kp&&ls(new Kp)!=xt)&&(ls=function(u){var p=Cs(u),E=p==U?u.constructor:y,te=E?ac(E):"";if(te)switch(te){case iF:return X;case rF:return re;case oF:return me;case sF:return ze;case aF:return xt}return p});var Qw=so?La:Qx;function Dd(u){var p=u&&u.constructor;return u===("function"==typeof p&&p.prototype||$o)}function cf(u){return u==u&&!yr(u)}function Eb(u,p){return function(E){return null!=E&&E[u]===p&&(p!==y||u in qi(E))}}function ex(u,p,E){return p=Lr(p===y?u.length-1:p,0),function(){for(var te=arguments,Ae=-1,je=Lr(te.length-p,0),et=wt(je);++Ae<je;)et[Ae]=te[p+Ae];Ae=-1;for(var at=wt(p+1);++Ae<p;)at[Ae]=te[Ae];return at[p]=E(et),ca(u,this,at)}}function uM(u,p){return p.length<2?u:Ic(u,fa(p,0,-1))}function Ab(u,p){if(("constructor"!==p||"function"!=typeof u[p])&&"__proto__"!=p)return u[p]}var hM=Sl(Uw),df=Yp||function(u,p){return Ho.setTimeout(u,p)},Sb=Sl(Ru);function nx(u,p,E){var te=p+"";return Sb(u,function sM(u,p){var E=p.length;if(!E)return u;var te=E-1;return p[te]=(E>1?"& ":"")+p[te],p=p.join(E>2?", ":" "),u.replace(dn,"{\n/* [wrapped with "+p+"] */\n")}(te,function fM(u,p){return Ia(gt,function(E){var te="_."+E[0];p&E[1]&&!fd(u,te)&&u.push(te)}),u.sort()}(function iM(u){var p=u.match(mr);return p?p[1].split(Yt):[]}(te),E)))}function Sl(u){var p=0,E=0;return function(){var te=K_(),Ae=16-(te-E);if(E=te,Ae>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(y,arguments)}}function kd(u,p){var E=-1,te=u.length,Ae=te-1;for(p=p===y?te:p;++E<p;){var je=hb(E,Ae),et=u[je];u[je]=u[E],u[E]=et}return u.length=p,u}var hm=function lM(u){var p=Uu(u,function(te){return 500===E.size&&E.clear(),te}),E=p.cache;return p}(function(u){var p=[];return 46===u.charCodeAt(0)&&p.push(""),u.replace(cl,function(E,te,Ae,je){p.push(Ae?je.replace(Ta,"$1"):te||E)}),p});function Gs(u){if("string"==typeof u||Qo(u))return u;var p=u+"";return"0"==p&&1/u==-Te?"-0":p}function ac(u){if(null!=u){try{return As.call(u)}catch{}try{return u+""}catch{}}return""}function Cb(u){if(u instanceof vi)return u.clone();var p=new Ra(u.__wrapped__,u.__chain__);return p.__actions__=Ro(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}var Mb=ei(function(u,p){return Fr(u)?Xh(u,ii(p,1,Fr,!0)):[]}),pM=ei(function(u,p){var E=_a(p);return Fr(E)&&(E=y),Fr(u)?Xh(u,ii(p,1,Fr,!0),Rn(E,2)):[]}),Tb=ei(function(u,p){var E=_a(p);return Fr(E)&&(E=y),Fr(u)?Xh(u,ii(p,1,Fr,!0),y,E):[]});function uf(u,p,E){var te=null==u?0:u.length;if(!te)return-1;var Ae=null==E?0:ti(E);return Ae<0&&(Ae=Lr(te+Ae,0)),Rt(u,Rn(p,3),Ae)}function sx(u,p,E){var te=null==u?0:u.length;if(!te)return-1;var Ae=te-1;return E!==y&&(Ae=ti(E),Ae=E<0?Lr(te+Ae,0):er(Ae,te-1)),Rt(u,Rn(p,3),Ae,!0)}function pm(u){return null!=u&&u.length?ii(u,1):[]}function gm(u){return u&&u.length?u[0]:y}var ax=ei(function(u){var p=_r(u,om);return p.length&&p[0]===u[0]?ha(p):[]}),Bu=ei(function(u){var p=_a(u),E=_r(u,om);return p===_a(E)?p=y:E.pop(),E.length&&E[0]===u[0]?ha(E,Rn(p,2)):[]}),bM=ei(function(u){var p=_a(u),E=_r(u,om);return(p="function"==typeof p?p:y)&&E.pop(),E.length&&E[0]===u[0]?ha(E,y,p):[]});function _a(u){var p=null==u?0:u.length;return p?u[p-1]:y}var kb=ei(Rb);function Rb(u,p){return u&&u.length&&p&&p.length?Iu(u,p):u}var cx=Lc(function(u,p){var E=null==u?0:u.length,te=ob(u,p);return Rc(u,_r(p,function(Ae){return ma(Ae,E)?+Ae:Ae}).sort(bb)),te});function _m(u){return null==u?u:q_.call(u)}var MM=ei(function(u){return oc(ii(u,1,Fr,!0))}),Ml=ei(function(u){var p=_a(u);return Fr(p)&&(p=y),oc(ii(u,1,Fr,!0),Rn(p,2))}),ff=ei(function(u){var p=_a(u);return p="function"==typeof p?p:y,oc(ii(u,1,Fr,!0),y,p)});function fx(u){if(!u||!u.length)return[];var p=0;return u=ec(u,function(E){if(Fr(E))return p=Lr(E.length,p),!0}),la(p,function(E){return _r(u,V_(E))})}function ao(u,p){if(!u||!u.length)return[];var E=fx(u);return null==p?E:_r(E,function(te){return ca(p,y,te)})}var Nb=ei(function(u,p){return Fr(u)?Xh(u,p):[]}),IM=ei(function(u){return Ou(ec(u,Fr))}),DM=ei(function(u){var p=_a(u);return Fr(p)&&(p=y),Ou(ec(u,Fr),Rn(p,2))}),kM=ei(function(u){var p=_a(u);return p="function"==typeof p?p:y,Ou(ec(u,Fr),y,p)}),Lb=ei(fx),Ws=ei(function(u){var p=u.length,E=p>1?u[p-1]:y;return E="function"==typeof E?(u.pop(),E):y,ao(u,E)});function Bc(u){var p=Pe(u);return p.__chain__=!0,p}function pf(u,p){return p(u)}var Tl=Lc(function(u){var p=u.length,E=p?u[0]:0,te=this.__wrapped__,Ae=function(je){return ob(je,u)};return!(p>1||this.__actions__.length)&&te instanceof vi&&ma(E)?((te=te.slice(E,+E+(p?1:0))).__actions__.push({func:pf,args:[Ae],thisArg:y}),new Ra(te,this.__chain__).thru(function(je){return p&&!je.length&&je.push(y),je})):this.thru(Ae)}),_x=ef(function(u,p,E){Si.call(u,E)?++u[E]:ml(u,E,1)}),PM=Oc(uf),Bb=Oc(sx);function NM(u,p){return($n(u)?Ia:gl)(u,Rn(p,3))}function LM(u,p){return($n(u)?nF:Tw)(u,Rn(p,3))}var bF=ef(function(u,p,E){Si.call(u,E)?u[E].push(p):ml(u,E,[p])}),vF=ei(function(u,p,E){var te=-1,Ae="function"==typeof p,je=Ts(u)?wt(u.length):[];return gl(u,function(et){je[++te]=Ae?ca(p,et,E):Kh(et,p,E)}),je}),FM=ef(function(u,p,E){ml(u,E,p)});function Pd(u,p){return($n(u)?_r:Lw)(u,Rn(p,3))}var Ub=ef(function(u,p,E){u[E?0:1].push(p)},function(){return[[],[]]}),Il=ei(function(u,p){if(null==u)return[];var E=p.length;return E>1&&ds(u,p[0],p[1])?p=[]:E>2&&ds(p[0],p[1],p[2])&&(p=[p[0]]),tm(u,ii(p,1),[])}),Em=nc||function(){return Ho.Date.now()};function xx(u,p,E){return p=E?y:p,xl(u,k,y,y,y,y,p=u&&null==p?u.length:p)}function Vb(u,p){var E;if("function"!=typeof p)throw new zt(_);return u=ti(u),function(){return--u>0&&(E=p.apply(this,arguments)),u<=1&&(p=y),E}}var _f=ei(function(u,p,E){var te=1;if(E.length){var Ae=ul(E,Fc(_f));te|=w}return xl(u,te,p,E,Ae)}),Ex=ei(function(u,p,E){var te=3;if(E.length){var Ae=ul(E,Fc(Ex));te|=w}return xl(p,te,u,E,Ae)});function zb(u,p,E){var te,Ae,je,et,at,pt,Pt=0,Nt=!1,jt=!1,Qt=!0;if("function"!=typeof u)throw new zt(_);function bn(Wr){var Fa=te,Hc=Ae;return te=Ae=y,Pt=Wr,et=u.apply(Hc,Fa)}function Dn(Wr){var Fa=Wr-pt;return pt===y||Fa>=p||Fa<0||jt&&Wr-Pt>=je}function fi(){var Wr=Em();if(Dn(Wr))return yi(Wr);at=df(fi,function ai(Wr){var _y=p-(Wr-pt);return jt?er(_y,je-(Wr-Pt)):_y}(Wr))}function yi(Wr){return at=y,Qt&&te?bn(Wr):(te=Ae=y,et)}function Xs(){var Wr=Em(),Fa=Dn(Wr);if(te=arguments,Ae=this,pt=Wr,Fa){if(at===y)return function On(Wr){return Pt=Wr,at=df(fi,p),Nt?bn(Wr):et}(pt);if(jt)return Qh(at),at=df(fi,p),bn(pt)}return at===y&&(at=df(fi,p)),et}return p=us(p)||0,yr(E)&&(Nt=!!E.leading,je=(jt="maxWait"in E)?Lr(us(E.maxWait)||0,p):je,Qt="trailing"in E?!!E.trailing:Qt),Xs.cancel=function Ys(){at!==y&&Qh(at),Pt=0,te=pt=Ae=at=y},Xs.flush=function hs(){return at===y?et:yi(Em())},Xs}var UM=ei(function(u,p){return Mw(u,1,p)}),VM=ei(function(u,p,E){return Mw(u,us(p)||0,E)});function Uu(u,p){if("function"!=typeof u||null!=p&&"function"!=typeof p)throw new zt(_);var E=function(){var te=arguments,Ae=p?p.apply(this,te):te[0],je=E.cache;if(je.has(Ae))return je.get(Ae);var et=u.apply(this,te);return E.cache=je.set(Ae,et)||je,et};return E.cache=new(Uu.Cache||Tc),E}function bf(u){if("function"!=typeof u)throw new zt(_);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}Uu.Cache=Tc;var Jo=sc(function(u,p){var E=(p=1==p.length&&$n(p[0])?_r(p[0],ss(Rn())):_r(ii(p,1),ss(Rn()))).length;return ei(function(te){for(var Ae=-1,je=er(te.length,E);++Ae<je;)te[Ae]=p[Ae].call(this,te[Ae]);return ca(u,this,te)})}),Nd=ei(function(u,p){var E=ul(p,Fc(Nd));return xl(u,w,y,p,E)}),Gb=ei(function(u,p){var E=ul(p,Fc(Gb));return xl(u,64,y,p,E)}),Cx=Lc(function(u,p){return xl(u,256,y,y,y,p)});function Zo(u,p){return u===p||u!=u&&p!=p}var Am=vb(Zp),Dx=vb(function(u,p){return u>=p}),jc=ab(function(){return arguments}())?ab:function(u){return Mr(u)&&Si.call(u,"callee")&&!Y_.call(u,"callee")},$n=wt.isArray,XM=Up?ss(Up):function WC(u){return Mr(u)&&Cs(u)==_e};function Ts(u){return null!=u&&cc(u.length)&&!La(u)}function Fr(u){return Mr(u)&&Ts(u)}var Dl=Xo||Qx,qM=L_?ss(L_):function $C(u){return Mr(u)&&Cs(u)==ae};function Xb(u){if(!Mr(u))return!1;var p=Cs(u);return p==Ge||"[object DOMException]"==p||"string"==typeof u.message&&"string"==typeof u.name&&!Vu(u)}function La(u){if(!yr(u))return!1;var p=Cs(u);return p==Ze||p==pe||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Kb(u){return"number"==typeof u&&u==ti(u)}function cc(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=He}function yr(u){var p=typeof u;return null!=u&&("object"==p||"function"==p)}function Mr(u){return null!=u&&"object"==typeof u}var Rx=Vp?ss(Vp):function kw(u){return Mr(u)&&ls(u)==re};function Mm(u){return"number"==typeof u||Mr(u)&&Cs(u)==Y}function Vu(u){if(!Mr(u)||Cs(u)!=U)return!1;var p=zs(u);if(null===p)return!0;var E=Si.call(p,"constructor")&&p.constructor;return"function"==typeof E&&E instanceof E&&As.call(E)==Jn}var zu=ow?ss(ow):function Ow(u){return Mr(u)&&Cs(u)==ye},qb=zp?ss(zp):function lb(u){return Mr(u)&&ls(u)==ze};function Hu(u){return"string"==typeof u||!$n(u)&&Mr(u)&&Cs(u)==st}function Qo(u){return"symbol"==typeof u||Mr(u)&&Cs(u)==bt}var Ld=TC?ss(TC):function Pw(u){return Mr(u)&&cc(u.length)&&!!$i[Cs(u)]},Lx=vb(Jh),eT=vb(function(u,p){return u<=p});function Fx(u){if(!u)return[];if(Ts(u))return Hu(u)?_n(u):Ro(u);if(ka&&u[ka])return function lw(lt){for(var St,wt=[];!(St=lt.next()).done;)wt.push(St.value);return wt}(u[ka]());var p=ls(u);return(p==re?W_:p==ze?$p:Wu)(u)}function Uc(u){return u?(u=us(u))===Te||u===-Te?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function ti(u){var p=Uc(u),E=p%1;return p==p?E?p-E:p:0}function Zb(u){return u?vd(ti(u),0,fe):0}function us(u){if("number"==typeof u)return u;if(Qo(u))return NaN;if(yr(u)){var p="function"==typeof u.valueOf?u.valueOf():u;u=yr(p)?p+"":p}if("string"!=typeof u)return 0===u?u:+u;u=H_(u);var E=en.test(u);return E||Io.test(u)?iw(u.slice(2),E?2:8):Ei.test(u)?NaN:+u}function Im(u){return Ko(u,Is(u))}function ji(u){return null==u?"":pa(u)}var tT=Pa(function(u,p){if(Dd(p)||Ts(p))Ko(p,co(p),u);else for(var E in p)Si.call(p,E)&&pl(u,E,p[E])}),nT=Pa(function(u,p){Ko(p,Is(p),u)}),Dm=Pa(function(u,p,E,te){Ko(p,Is(p),u,te)}),km=Pa(function(u,p,E,te){Ko(p,co(p),u,te)}),Qb=Lc(ob),jx=ei(function(u,p){u=qi(u);var E=-1,te=p.length,Ae=te>2?p[2]:y;for(Ae&&ds(p[0],p[1],Ae)&&(te=1);++E<te;)for(var je=p[E],et=Is(je),at=-1,pt=et.length;++at<pt;){var Pt=et[at],Nt=u[Pt];(Nt===y||Zo(Nt,$o[Pt])&&!Si.call(u,Pt))&&(u[Pt]=je[Pt])}return u}),Ux=ei(function(u){return u.push(y,Kw),ca(wf,y,u)});function ey(u,p,E){var te=null==u?y:Ic(u,p);return te===y?E:te}function ty(u,p){return null!=u&&Jw(u,p,Dc)}var lT=Cd(function(u,p,E){null!=p&&"function"!=typeof p.toString&&(p=Vs.call(p)),u[p]=E},Sf(Ds)),dT=Cd(function(u,p,E){null!=p&&"function"!=typeof p.toString&&(p=Vs.call(p)),Si.call(u,p)?u[p].push(E):u[p]=[E]},Rn),uT=ei(Kh);function co(u){return Ts(u)?Ew(u):Qp(u)}function Is(u){return Ts(u)?Ew(u,!0):function Nw(u){if(!yr(u))return function Lu(u){var p=[];if(null!=u)for(var E in qi(u))p.push(E);return p}(u);var p=Dd(u),E=[];for(var te in u)"constructor"==te&&(p||!Si.call(u,te))||E.push(te);return E}(u)}var pT=Pa(function(u,p,E){Yi(u,p,E)}),wf=Pa(function(u,p,E,te){Yi(u,p,E,te)}),Vc=Lc(function(u,p){var E={};if(null==u)return E;var te=!1;p=_r(p,function(je){return je=yl(je,u),te||(te=je.length>1),je}),Ko(u,El(u),E),te&&(E=da(E,7,tM));for(var Ae=p.length;Ae--;)Ed(E,p[Ae]);return E}),Vx=Lc(function(u,p){return null==u?{}:function YC(u,p){return ub(u,p,function(E,te){return ty(u,te)})}(u,p)});function ny(u,p){if(null==u)return{};var E=_r(El(u),function(te){return[te]});return p=Rn(p),ub(u,E,function(te,Ae){return p(te,Ae[0])})}var mT=eM(co),Rm=eM(Is);function Wu(u){return null==u?[]:Wp(u,co(u))}var Om=wl(function(u,p,E){return p=p.toLowerCase(),u+(E?ry(p):p)});function ry(u){return Yu(ji(u).toLowerCase())}function Pm(u){return(u=ji(u))&&u.replace(ro,DC).replace(Ct,"")}var wT=wl(function(u,p,E){return u+(E?"-":"")+p.toLowerCase()}),oy=wl(function(u,p,E){return u+(E?" ":"")+p.toLowerCase()}),Wx=Bi("toLowerCase"),MF=wl(function(u,p,E){return u+(E?"_":"")+p.toLowerCase()}),Yx=wl(function(u,p,E){return u+(E?" ":"")+Yu(p)}),Af=wl(function(u,p,E){return u+(E?" ":"")+p.toUpperCase()}),Yu=Bi("toUpperCase");function Bd(u,p,E){return u=ji(u),(p=E?y:p)===y?function OC(lt){return AC.test(lt)}(u)?function Ht(lt){return lt.match(tn)||[]}(u):function rt(lt){return lt.match(Ma)||[]}(u):u.match(p)||[]}var Lm=ei(function(u,p){try{return ca(u,y,p)}catch(E){return Xb(E)?E:new Xn(E)}}),dy=Lc(function(u,p){return Ia(p,function(E){E=Gs(E),ml(u,E,_f(u[E],u))}),u});function Sf(u){return function(){return u}}var MT=Sd(),Xx=Sd(!0);function Ds(u){return u}function uy(u){return db("function"==typeof u?u:da(u,1))}var TT=ei(function(u,p){return function(E){return Kh(E,u,p)}}),IT=ei(function(u,p){return function(E){return Kh(u,E,p)}});function qx(u,p,E){var te=co(p),Ae=Tu(p,te);null==E&&(!yr(p)||!Ae.length&&te.length)&&(E=p,p=u,u=this,Ae=Tu(p,co(p)));var je=!(yr(E)&&"chain"in E&&!E.chain),et=La(u);return Ia(Ae,function(at){var pt=p[at];u[at]=pt,et&&(u.prototype[at]=function(){var Pt=this.__chain__;if(je||Pt){var Nt=u(this.__wrapped__);return(Nt.__actions__=Ro(this.__actions__)).push({func:pt,args:arguments,thisArg:u}),Nt.__chain__=Pt,Nt}return pt.apply(u,ll([this.value()],arguments))})}),u}function Xu(){}var kT=rf(_r),Jx=rf(bu),py=rf(B_);function Mf(u){return Al(u)?V_(Gs(u)):function Bw(u){return function(p){return Ic(p,u)}}(u)}var Zx=Yw(),OT=Yw(!0);function Bm(){return[]}function Qx(){return!1}var e1=nf(function(u,p){return u+p},0),zc=Xw("ceil"),FT=nf(function(u,p){return u/p},1),BT=Xw("floor"),PF=nf(function(u,p){return u*p},1),jm=Xw("round"),UT=nf(function(u,p){return u-p},0);return Pe.after=function jM(u,p){if("function"!=typeof p)throw new zt(_);return u=ti(u),function(){if(--u<1)return p.apply(this,arguments)}},Pe.ary=xx,Pe.assign=tT,Pe.assignIn=nT,Pe.assignInWith=Dm,Pe.assignWith=km,Pe.at=Qb,Pe.before=Vb,Pe.bind=_f,Pe.bindAll=dy,Pe.bindKey=Ex,Pe.castArray=function Ix(){if(!arguments.length)return[];var u=arguments[0];return $n(u)?u:[u]},Pe.chain=Bc,Pe.chunk=function ix(u,p,E){p=(E?ds(u,p,E):p===y)?1:Lr(ti(p),0);var te=null==u?0:u.length;if(!te||p<1)return[];for(var Ae=0,je=0,et=wt(Mc(te/p));Ae<te;)et[je++]=fa(u,Ae,Ae+=p);return et},Pe.compact=function fm(u){for(var p=-1,E=null==u?0:u.length,te=0,Ae=[];++p<E;){var je=u[p];je&&(Ae[te++]=je)}return Ae},Pe.concat=function uF(){var u=arguments.length;if(!u)return[];for(var p=wt(u-1),E=arguments[0],te=u;te--;)p[te-1]=arguments[te];return ll($n(E)?Ro(E):[E],ii(p,1))},Pe.cond=function Fm(u){var p=null==u?0:u.length,E=Rn();return u=p?_r(u,function(te){if("function"!=typeof te[1])throw new zt(_);return[E(te[0]),te[1]]}):[],ei(function(te){for(var Ae=-1;++Ae<p;){var je=u[Ae];if(ca(je[0],this,te))return ca(je[1],this,te)}})},Pe.conforms=function DF(u){return function Cw(u){var p=co(u);return function(E){return wd(E,u,p)}}(da(u,1))},Pe.constant=Sf,Pe.countBy=_x,Pe.create=function Bx(u,p){var E=Wh(u);return null==p?E:Un(E,p)},Pe.curry=function Ax(u,p,E){var te=xl(u,8,y,y,y,y,y,p=E?y:p);return te.placeholder=Ax.placeholder,te},Pe.curryRight=function Sx(u,p,E){var te=xl(u,16,y,y,y,y,y,p=E?y:p);return te.placeholder=Sx.placeholder,te},Pe.debounce=zb,Pe.defaults=jx,Pe.defaultsDeep=Ux,Pe.defer=UM,Pe.delay=VM,Pe.difference=Mb,Pe.differenceBy=pM,Pe.differenceWith=Tb,Pe.drop=function rx(u,p,E){var te=null==u?0:u.length;return te?fa(u,(p=E||p===y?1:ti(p))<0?0:p,te):[]},Pe.dropRight=function ox(u,p,E){var te=null==u?0:u.length;return te?fa(u,0,(p=te-(p=E||p===y?1:ti(p)))<0?0:p):[]},Pe.dropRightWhile=function Rd(u,p){return u&&u.length?bl(u,Rn(p,3),!0,!0):[]},Pe.dropWhile=function mM(u,p){return u&&u.length?bl(u,Rn(p,3),!0):[]},Pe.fill=function Ib(u,p,E,te){var Ae=null==u?0:u.length;return Ae?(E&&"number"!=typeof E&&ds(u,p,E)&&(E=0,te=Ae),function wi(u,p,E,te){var Ae=u.length;for((E=ti(E))<0&&(E=-E>Ae?0:Ae+E),(te=te===y||te>Ae?Ae:ti(te))<0&&(te+=Ae),te=E>te?0:Zb(te);E<te;)u[E++]=p;return u}(u,p,E,te)):[]},Pe.filter=function OM(u,p){return($n(u)?ec:nr)(u,Rn(p,3))},Pe.flatMap=function gF(u,p){return ii(Pd(u,p),1)},Pe.flatMapDeep=function _F(u,p){return ii(Pd(u,p),Te)},Pe.flatMapDepth=function jb(u,p,E){return E=E===y?1:ti(E),ii(Pd(u,p),E)},Pe.flatten=pm,Pe.flattenDeep=function mm(u){return null!=u&&u.length?ii(u,Te):[]},Pe.flattenDepth=function ga(u,p){return null!=u&&u.length?ii(u,p=p===y?1:ti(p)):[]},Pe.flip=function Ms(u){return xl(u,512)},Pe.flow=MT,Pe.flowRight=Xx,Pe.fromPairs=function Fu(u){for(var p=-1,E=null==u?0:u.length,te={};++p<E;){var Ae=u[p];te[Ae[0]]=Ae[1]}return te},Pe.functions=function $s(u){return null==u?[]:Tu(u,co(u))},Pe.functionsIn=function lc(u){return null==u?[]:Tu(u,Is(u))},Pe.groupBy=bF,Pe.initial=function _M(u){return null!=u&&u.length?fa(u,0,-1):[]},Pe.intersection=ax,Pe.intersectionBy=Bu,Pe.intersectionWith=bM,Pe.invert=lT,Pe.invertBy=dT,Pe.invokeMap=vF,Pe.iteratee=uy,Pe.keyBy=FM,Pe.keys=co,Pe.keysIn=Is,Pe.map=Pd,Pe.mapKeys=function hT(u,p){var E={};return p=Rn(p,3),Ss(u,function(te,Ae,je){ml(E,p(te,Ae,je),te)}),E},Pe.mapValues=function fT(u,p){var E={};return p=Rn(p,3),Ss(u,function(te,Ae,je){ml(E,Ae,p(te,Ae,je))}),E},Pe.matches=function hy(u){return ko(da(u,1))},Pe.matchesProperty=function Kx(u,p){return _l(u,da(p,1))},Pe.memoize=Uu,Pe.merge=pT,Pe.mergeWith=wf,Pe.method=TT,Pe.methodOf=IT,Pe.mixin=qx,Pe.negate=bf,Pe.nthArg=function fy(u){return u=ti(u),ei(function(p){return Fw(p,u)})},Pe.omit=Vc,Pe.omitBy=function xf(u,p){return ny(u,bf(Rn(p)))},Pe.once=function Hb(u){return Vb(2,u)},Pe.orderBy=function vm(u,p,E,te){return null==u?[]:($n(p)||(p=null==p?[]:[p]),$n(E=te?y:E)||(E=null==E?[]:[E]),tm(u,p,E))},Pe.over=kT,Pe.overArgs=Jo,Pe.overEvery=Jx,Pe.overSome=py,Pe.partial=Nd,Pe.partialRight=Gb,Pe.partition=Ub,Pe.pick=Vx,Pe.pickBy=ny,Pe.property=Mf,Pe.propertyOf=function RT(u){return function(p){return null==u?y:Ic(u,p)}},Pe.pull=kb,Pe.pullAll=Rb,Pe.pullAllBy=function vM(u,p,E){return u&&u.length&&p&&p.length?Iu(u,p,Rn(E,2)):u},Pe.pullAllWith=function wM(u,p,E){return u&&u.length&&p&&p.length?Iu(u,p,y,E):u},Pe.pullAt=cx,Pe.range=Zx,Pe.rangeRight=OT,Pe.rearg=Cx,Pe.reject=function gf(u,p){return($n(u)?ec:nr)(u,bf(Rn(p,3)))},Pe.remove=function xM(u,p){var E=[];if(!u||!u.length)return E;var te=-1,Ae=[],je=u.length;for(p=Rn(p,3);++te<je;){var et=u[te];p(et,te,u)&&(E.push(et),Ae.push(te))}return Rc(u,Ae),E},Pe.rest=function zM(u,p){if("function"!=typeof u)throw new zt(_);return ei(u,p=p===y?p:ti(p))},Pe.reverse=_m,Pe.sampleSize=function vx(u,p,E){return p=(E?ds(u,p,E):p===y)?1:ti(p),($n(u)?Aw:jw)(u,p)},Pe.set=function xF(u,p,E){return null==u?u:ku(u,p,E)},Pe.setWith=function EF(u,p,E,te){return te="function"==typeof te?te:y,null==u?u:ku(u,p,E,te)},Pe.shuffle=function wx(u){return($n(u)?rb:Zh)(u)},Pe.slice=function EM(u,p,E){var te=null==u?0:u.length;return te?(E&&"number"!=typeof E&&ds(u,p,E)?(p=0,E=te):(p=null==p?0:ti(p),E=E===y?te:ti(E)),fa(u,p,E)):[]},Pe.sortBy=Il,Pe.sortedUniq=function Cl(u){return u&&u.length?Vw(u):[]},Pe.sortedUniqBy=function bm(u,p){return u&&u.length?Vw(u,Rn(p,2)):[]},Pe.split=function Ef(u,p,E){return E&&"number"!=typeof E&&ds(u,p,E)&&(p=E=y),(E=E===y?fe:E>>>0)?(u=ji(u))&&("string"==typeof p||null!=p&&!zu(p))&&!(p=pa(p))&&Go(u)?vl(_n(u),0,E):u.split(p,E):[]},Pe.spread=function Mx(u,p){if("function"!=typeof u)throw new zt(_);return p=null==p?0:Lr(ti(p),0),ei(function(E){var te=E[p],Ae=vl(E,0,p);return te&&ll(Ae,te),ca(u,this,Ae)})},Pe.tail=function ux(u){var p=null==u?0:u.length;return p?fa(u,1,p):[]},Pe.take=function hf(u,p,E){return u&&u.length?fa(u,0,(p=E||p===y?1:ti(p))<0?0:p):[]},Pe.takeRight=function SM(u,p,E){var te=null==u?0:u.length;return te?fa(u,(p=te-(p=E||p===y?1:ti(p)))<0?0:p,te):[]},Pe.takeRightWhile=function CM(u,p){return u&&u.length?bl(u,Rn(p,3),!1,!0):[]},Pe.takeWhile=function Pb(u,p){return u&&u.length?bl(u,Rn(p,3)):[]},Pe.tap=function Fb(u,p){return p(u),u},Pe.throttle=function HM(u,p,E){var te=!0,Ae=!0;if("function"!=typeof u)throw new zt(_);return yr(E)&&(te="leading"in E?!!E.leading:te,Ae="trailing"in E?!!E.trailing:Ae),zb(u,p,{leading:te,maxWait:p,trailing:Ae})},Pe.thru=pf,Pe.toArray=Fx,Pe.toPairs=mT,Pe.toPairsIn=Rm,Pe.toPath=function vn(u){return $n(u)?_r(u,Gs):Qo(u)?[u]:Ro(hm(ji(u)))},Pe.toPlainObject=Im,Pe.transform=function iy(u,p,E){var te=$n(u),Ae=te||Dl(u)||Ld(u);if(p=Rn(p,4),null==E){var je=u&&u.constructor;E=Ae?te?new je:[]:yr(u)&&La(je)?Wh(zs(u)):{}}return(Ae?Ia:Ss)(u,function(et,at,pt){return p(E,et,at,pt)}),E},Pe.unary=function Tx(u){return xx(u,1)},Pe.union=MM,Pe.unionBy=Ml,Pe.unionWith=ff,Pe.uniq=function TM(u){return u&&u.length?oc(u):[]},Pe.uniqBy=function hx(u,p){return u&&u.length?oc(u,Rn(p,2)):[]},Pe.uniqWith=function Na(u,p){return p="function"==typeof p?p:y,u&&u.length?oc(u,y,p):[]},Pe.unset=function AF(u,p){return null==u||Ed(u,p)},Pe.unzip=fx,Pe.unzipWith=ao,Pe.update=function SF(u,p,E){return null==u?u:zw(u,p,sm(E))},Pe.updateWith=function Hx(u,p,E,te){return te="function"==typeof te?te:y,null==u?u:zw(u,p,sm(E),te)},Pe.values=Wu,Pe.valuesIn=function gT(u){return null==u?[]:Wp(u,Is(u))},Pe.without=Nb,Pe.words=Bd,Pe.wrap=function GM(u,p){return Nd(sm(p),u)},Pe.xor=IM,Pe.xorBy=DM,Pe.xorWith=kM,Pe.zip=Lb,Pe.zipObject=function px(u,p){return KC(u||[],p||[],pl)},Pe.zipObjectDeep=function ju(u,p){return KC(u||[],p||[],ku)},Pe.zipWith=Ws,Pe.entries=mT,Pe.entriesIn=Rm,Pe.extend=nT,Pe.extendWith=Dm,qx(Pe,Pe),Pe.add=e1,Pe.attempt=Lm,Pe.camelCase=Om,Pe.capitalize=ry,Pe.ceil=zc,Pe.clamp=function _T(u,p,E){return E===y&&(E=p,p=y),E!==y&&(E=(E=us(E))==E?E:0),p!==y&&(p=(p=us(p))==p?p:0),vd(us(u),p,E)},Pe.clone=function WM(u){return da(u,4)},Pe.cloneDeep=function Wb(u){return da(u,5)},Pe.cloneDeepWith=function $b(u,p){return da(u,5,p="function"==typeof p?p:y)},Pe.cloneWith=function $M(u,p){return da(u,4,p="function"==typeof p?p:y)},Pe.conformsTo=function YM(u,p){return null==p||wd(u,p,co(p))},Pe.deburr=Pm,Pe.defaultTo=function Cf(u,p){return null==u||u!=u?p:u},Pe.divide=FT,Pe.endsWith=function yT(u,p,E){u=ji(u),p=pa(p);var te=u.length,Ae=E=E===y?te:vd(ti(E),0,te);return(E-=p.length)>=0&&u.slice(E,Ae)==p},Pe.eq=Zo,Pe.escape=function _o(u){return(u=ji(u))&&Vi.test(u)?u.replace(Bo,cw):u},Pe.escapeRegExp=function vT(u){return(u=ji(u))&&Xe.test(u)?u.replace($e,"\\$&"):u},Pe.every=function mF(u,p,E){var te=$n(u)?bu:GC;return E&&ds(u,p,E)&&(p=y),te(u,Rn(p,3))},Pe.find=PM,Pe.findIndex=uf,Pe.findKey=function Fd(u,p){return j_(u,Rn(p,3),Ss)},Pe.findLast=Bb,Pe.findLastIndex=sx,Pe.findLastKey=function iT(u,p){return j_(u,Rn(p,3),ua)},Pe.floor=BT,Pe.forEach=NM,Pe.forEachRight=LM,Pe.forIn=function rT(u,p){return null==u?u:Fi(u,Rn(p,3),Is)},Pe.forInRight=function oT(u,p){return null==u?u:sb(u,Rn(p,3),Is)},Pe.forOwn=function sT(u,p){return u&&Ss(u,Rn(p,3))},Pe.forOwnRight=function aT(u,p){return u&&ua(u,Rn(p,3))},Pe.get=ey,Pe.gt=Am,Pe.gte=Dx,Pe.has=function cT(u,p){return null!=u&&Jw(u,p,cs)},Pe.hasIn=ty,Pe.head=gm,Pe.identity=Ds,Pe.includes=function yF(u,p,E,te){u=Ts(u)?u:Wu(u),E=E&&!te?ti(E):0;var Ae=u.length;return E<0&&(E=Lr(Ae+E,0)),Hu(u)?E<=Ae&&u.indexOf(p,E)>-1:!!Ae&&Sc(u,p,E)>-1},Pe.indexOf=function gM(u,p,E){var te=null==u?0:u.length;if(!te)return-1;var Ae=null==E?0:ti(E);return Ae<0&&(Ae=Lr(te+Ae,0)),Sc(u,p,Ae)},Pe.inRange=function bT(u,p,E){return p=Uc(p),E===y?(E=p,p=0):E=Uc(E),function Dw(u,p,E){return u>=er(p,E)&&u<Lr(p,E)}(u=us(u),p,E)},Pe.invoke=uT,Pe.isArguments=jc,Pe.isArray=$n,Pe.isArrayBuffer=XM,Pe.isArrayLike=Ts,Pe.isArrayLikeObject=Fr,Pe.isBoolean=function KM(u){return!0===u||!1===u||Mr(u)&&Cs(u)==I},Pe.isBuffer=Dl,Pe.isDate=qM,Pe.isElement=function kx(u){return Mr(u)&&1===u.nodeType&&!Vu(u)},Pe.isEmpty=function yf(u){if(null==u)return!0;if(Ts(u)&&($n(u)||"string"==typeof u||"function"==typeof u.splice||Dl(u)||Ld(u)||jc(u)))return!u.length;var p=ls(u);if(p==re||p==ze)return!u.size;if(Dd(u))return!Qp(u).length;for(var E in u)if(Si.call(u,E))return!1;return!0},Pe.isEqual=function Sm(u,p){return xd(u,p)},Pe.isEqualWith=function Yb(u,p,E){var te=(E="function"==typeof E?E:y)?E(u,p):y;return te===y?xd(u,p,y,E):!!te},Pe.isError=Xb,Pe.isFinite=function JM(u){return"number"==typeof u&&Do(u)},Pe.isFunction=La,Pe.isInteger=Kb,Pe.isLength=cc,Pe.isMap=Rx,Pe.isMatch=function wF(u,p){return u===p||qh(u,p,um(p))},Pe.isMatchWith=function Cm(u,p,E){return E="function"==typeof E?E:y,qh(u,p,um(p),E)},Pe.isNaN=function ZM(u){return Mm(u)&&u!=+u},Pe.isNative=function Ox(u){if(Qw(u))throw new Xn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rw(u)},Pe.isNil=function Nx(u){return null==u},Pe.isNull=function Px(u){return null===u},Pe.isNumber=Mm,Pe.isObject=yr,Pe.isObjectLike=Mr,Pe.isPlainObject=Vu,Pe.isRegExp=zu,Pe.isSafeInteger=function vf(u){return Kb(u)&&u>=-He&&u<=He},Pe.isSet=qb,Pe.isString=Hu,Pe.isSymbol=Qo,Pe.isTypedArray=Ld,Pe.isUndefined=function Jb(u){return u===y},Pe.isWeakMap=function Tm(u){return Mr(u)&&ls(u)==xt},Pe.isWeakSet=function QM(u){return Mr(u)&&"[object WeakSet]"==Cs(u)},Pe.join=function yM(u,p){return null==u?"":X_.call(u,p)},Pe.kebabCase=wT,Pe.last=_a,Pe.lastIndexOf=function Db(u,p,E){var te=null==u?0:u.length;if(!te)return-1;var Ae=te;return E!==y&&(Ae=(Ae=ti(E))<0?Lr(te+Ae,0):er(Ae,te-1)),p==p?function NC(lt,St,wt){for(var Kt=wt+1;Kt--;)if(lt[Kt]===St)return Kt;return Kt}(u,p,Ae):Rt(u,vu,Ae,!0)},Pe.lowerCase=oy,Pe.lowerFirst=Wx,Pe.lt=Lx,Pe.lte=eT,Pe.max=function my(u){return u&&u.length?It(u,Ds,Zp):y},Pe.maxBy=function kF(u,p){return u&&u.length?It(u,Rn(p,2),Zp):y},Pe.mean=function RF(u){return sw(u,Ds)},Pe.meanBy=function OF(u,p){return sw(u,Rn(p,2))},Pe.min=function jT(u){return u&&u.length?It(u,Ds,Jh):y},Pe.minBy=function t1(u,p){return u&&u.length?It(u,Rn(p,2),Jh):y},Pe.stubArray=Bm,Pe.stubFalse=Qx,Pe.stubObject=function PT(){return{}},Pe.stubString=function kl(){return""},Pe.stubTrue=function NT(){return!0},Pe.multiply=PF,Pe.nth=function Od(u,p){return u&&u.length?Fw(u,ti(p)):y},Pe.noConflict=function DT(){return Ho._===this&&(Ho._=Fh),this},Pe.noop=Xu,Pe.now=Em,Pe.pad=function xT(u,p,E){u=ji(u);var te=(p=ti(p))?Eu(u):0;if(!p||te>=p)return u;var Ae=(p-te)/2;return Nc(br(Ae),E)+u+Nc(Mc(Ae),E)},Pe.padEnd=function ET(u,p,E){u=ji(u);var te=(p=ti(p))?Eu(u):0;return p&&te<p?u+Nc(p-te,E):u},Pe.padStart=function AT(u,p,E){u=ji(u);var te=(p=ti(p))?Eu(u):0;return p&&te<p?Nc(p-te,E)+u:u},Pe.parseInt=function ST(u,p,E){return E||null==p?p=0:p&&(p=+p),FC(ji(u).replace(Wt,""),p||0)},Pe.random=function Gx(u,p,E){if(E&&"boolean"!=typeof E&&ds(u,p,E)&&(p=E=y),E===y&&("boolean"==typeof p?(E=p,p=y):"boolean"==typeof u&&(E=u,u=y)),u===y&&p===y?(u=0,p=1):(u=Uc(u),p===y?(p=u,u=0):p=Uc(p)),u>p){var te=u;u=p,p=te}if(E||u%1||p%1){var Ae=mw();return er(u+Ae*(p-u+N_("1e-"+((Ae+"").length-1))),p)}return hb(u,p)},Pe.reduce=function bx(u,p,E){var te=$n(u)?Hp:tc,Ae=arguments.length<3;return te(u,Rn(p,4),E,Ae,gl)},Pe.reduceRight=function yx(u,p,E){var te=$n(u)?yu:tc,Ae=arguments.length<3;return te(u,Rn(p,4),E,Ae,Tw)},Pe.repeat=function $x(u,p,E){return p=(E?ds(u,p,E):p===y)?1:ti(p),Du(ji(u),p)},Pe.replace=function CF(){var u=arguments,p=ji(u[0]);return u.length<3?p:p.replace(u[1],u[2])},Pe.result=function zx(u,p,E){var te=-1,Ae=(p=yl(p,u)).length;for(Ae||(Ae=1,u=y);++te<Ae;){var je=null==u?y:u[Gs(p[te])];je===y&&(te=Ae,je=E),u=La(je)?je.call(u):je}return u},Pe.round=jm,Pe.runInContext=lt,Pe.sample=function BM(u){return($n(u)?ib:fb)(u)},Pe.size=function wm(u){if(null==u)return 0;if(Ts(u))return Hu(u)?Eu(u):u.length;var p=ls(u);return p==re||p==ze?u.size:Qp(u).length},Pe.snakeCase=MF,Pe.some=function xm(u,p,E){var te=$n(u)?B_:pb;return E&&ds(u,p,E)&&(p=y),te(u,Rn(p,3))},Pe.sortedIndex=function AM(u,p){return im(u,p)},Pe.sortedIndexBy=function hF(u,p,E){return mb(u,p,Rn(E,2))},Pe.sortedIndexOf=function lx(u,p){var E=null==u?0:u.length;if(E){var te=im(u,p);if(te<E&&Zo(u[te],p))return te}return-1},Pe.sortedLastIndex=function dx(u,p){return im(u,p,!0)},Pe.sortedLastIndexBy=function ir(u,p,E){return mb(u,p,Rn(E,2),!0)},Pe.sortedLastIndexOf=function Ob(u,p){if(null!=u&&u.length){var te=im(u,p,!0)-1;if(Zo(u[te],p))return te}return-1},Pe.startCase=Yx,Pe.startsWith=function TF(u,p,E){return u=ji(u),E=null==E?0:vd(ti(E),0,u.length),p=pa(p),u.slice(E,E+p.length)==p},Pe.subtract=UT,Pe.sum=function VT(u){return u&&u.length?Us(u,Ds):0},Pe.sumBy=function gy(u,p){return u&&u.length?Us(u,Rn(p,2)):0},Pe.template=function IF(u,p,E){var te=Pe.templateSettings;E&&ds(u,p,E)&&(p=y),u=ji(u),p=Dm({},p,te,Md);var at,pt,Ae=Dm({},p.imports,te.imports,Md),je=co(Ae),et=Wp(Ae,je),Pt=0,Nt=p.interpolate||gr,jt="__p += '",Qt=$_((p.escape||gr).source+"|"+Nt.source+"|"+(Nt===al?Ti:gr).source+"|"+(p.evaluate||gr).source+"|$","g"),bn="//# sourceURL="+(Si.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++SC+"]")+"\n";u.replace(Qt,function(Dn,fi,yi,Ys,hs,Xs){return yi||(yi=Ys),jt+=u.slice(Pt,Xs).replace(we,kC),fi&&(at=!0,jt+="' +\n__e("+fi+") +\n'"),hs&&(pt=!0,jt+="';\n"+hs+";\n__p += '"),yi&&(jt+="' +\n((__t = ("+yi+")) == null ? '' : __t) +\n'"),Pt=Xs+Dn.length,Dn}),jt+="';\n";var On=Si.call(p,"variable")&&p.variable;if(On){if(Ni.test(On))throw new Xn("Invalid `variable` option passed into `_.template`")}else jt="with (obj) {\n"+jt+"\n}\n";jt=(pt?jt.replace(Bn,""):jt).replace(Wi,"$1").replace(aa,"$1;"),jt="function("+(On||"obj")+") {\n"+(On?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(at?", __e = _.escape":"")+(pt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+jt+"return __p\n}";var ai=Lm(function(){return Di(je,bn+"return "+jt).apply(y,et)});if(ai.source=jt,Xb(ai))throw ai;return ai},Pe.times=function Ku(u,p){if((u=ti(u))<1||u>He)return[];var E=fe,te=er(u,fe);p=Rn(p),u-=fe;for(var Ae=la(te,p);++E<u;)p(E);return Ae},Pe.toFinite=Uc,Pe.toInteger=ti,Pe.toLength=Zb,Pe.toLower=function Nm(u){return ji(u).toLowerCase()},Pe.toNumber=us,Pe.toSafeInteger=function Gu(u){return u?vd(ti(u),-He,He):0===u?u:0},Pe.toString=ji,Pe.toUpper=function CT(u){return ji(u).toUpperCase()},Pe.trim=function sy(u,p,E){if((u=ji(u))&&(E||p===y))return H_(u);if(!u||!(p=pa(p)))return u;var te=_n(u),Ae=_n(p);return vl(te,xu(te,Ae),G_(te,Ae)+1).join("")},Pe.trimEnd=function ay(u,p,E){if((u=ji(u))&&(E||p===y))return u.slice(0,hw(u)+1);if(!u||!(p=pa(p)))return u;var te=_n(u);return vl(te,0,G_(te,_n(p))+1).join("")},Pe.trimStart=function $u(u,p,E){if((u=ji(u))&&(E||p===y))return u.replace(Wt,"");if(!u||!(p=pa(p)))return u;var te=_n(u);return vl(te,xu(te,_n(p))).join("")},Pe.truncate=function cy(u,p){var E=30,te="...";if(yr(p)){var Ae="separator"in p?p.separator:Ae;E="length"in p?ti(p.length):E,te="omission"in p?pa(p.omission):te}var je=(u=ji(u)).length;if(Go(u)){var et=_n(u);je=et.length}if(E>=je)return u;var at=E-Eu(te);if(at<1)return te;var pt=et?vl(et,0,at).join(""):u.slice(0,at);if(Ae===y)return pt+te;if(et&&(at+=pt.length-at),zu(Ae)){if(u.slice(at).search(Ae)){var Pt,Nt=pt;for(Ae.global||(Ae=$_(Ae.source,ji(_i.exec(Ae))+"g")),Ae.lastIndex=0;Pt=Ae.exec(Nt);)var jt=Pt.index;pt=pt.slice(0,jt===y?at:jt)}}else if(u.indexOf(pa(Ae),at)!=at){var Qt=pt.lastIndexOf(Ae);Qt>-1&&(pt=pt.slice(0,Qt))}return pt+te},Pe.unescape=function ly(u){return(u=ji(u))&&jo.test(u)?u.replace(pr,LC):u},Pe.uniqueId=function LT(u){var p=++Qi;return ji(u)+p},Pe.upperCase=Af,Pe.upperFirst=Yu,Pe.each=NM,Pe.eachRight=LM,Pe.first=gm,qx(Pe,function(){var u={};return Ss(Pe,function(p,E){Si.call(Pe.prototype,E)||(u[E]=p)}),u}(),{chain:!1}),Pe.VERSION="4.17.21",Ia(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Pe[u].placeholder=Pe}),Ia(["drop","take"],function(u,p){vi.prototype[u]=function(E){E=E===y?1:Lr(ti(E),0);var te=this.__filtered__&&!p?new vi(this):this.clone();return te.__filtered__?te.__takeCount__=er(E,te.__takeCount__):te.__views__.push({size:er(E,fe),type:u+(te.__dir__<0?"Right":"")}),te},vi.prototype[u+"Right"]=function(E){return this.reverse()[u](E).reverse()}}),Ia(["filter","map","takeWhile"],function(u,p){var E=p+1,te=1==E||3==E;vi.prototype[u]=function(Ae){var je=this.clone();return je.__iteratees__.push({iteratee:Rn(Ae,3),type:E}),je.__filtered__=je.__filtered__||te,je}}),Ia(["head","last"],function(u,p){var E="take"+(p?"Right":"");vi.prototype[u]=function(){return this[E](1).value()[0]}}),Ia(["initial","tail"],function(u,p){var E="drop"+(p?"":"Right");vi.prototype[u]=function(){return this.__filtered__?new vi(this):this[E](1)}}),vi.prototype.compact=function(){return this.filter(Ds)},vi.prototype.find=function(u){return this.filter(u).head()},vi.prototype.findLast=function(u){return this.reverse().find(u)},vi.prototype.invokeMap=ei(function(u,p){return"function"==typeof u?new vi(this):this.map(function(E){return Kh(E,u,p)})}),vi.prototype.reject=function(u){return this.filter(bf(Rn(u)))},vi.prototype.slice=function(u,p){u=ti(u);var E=this;return E.__filtered__&&(u>0||p<0)?new vi(E):(u<0?E=E.takeRight(-u):u&&(E=E.drop(u)),p!==y&&(E=(p=ti(p))<0?E.dropRight(-p):E.take(p-u)),E)},vi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},vi.prototype.toArray=function(){return this.take(fe)},Ss(vi.prototype,function(u,p){var E=/^(?:filter|find|map|reject)|While$/.test(p),te=/^(?:head|last)$/.test(p),Ae=Pe[te?"take"+("last"==p?"Right":""):p],je=te||/^find/.test(p);Ae&&(Pe.prototype[p]=function(){var et=this.__wrapped__,at=te?[1]:arguments,pt=et instanceof vi,Pt=at[0],Nt=pt||$n(et),jt=function(fi){var yi=Ae.apply(Pe,ll([fi],at));return te&&Qt?yi[0]:yi};Nt&&E&&"function"==typeof Pt&&1!=Pt.length&&(pt=Nt=!1);var Qt=this.__chain__,On=je&&!Qt,ai=pt&&!this.__actions__.length;if(!je&&Nt){et=ai?et:new vi(this);var Dn=u.apply(et,at);return Dn.__actions__.push({func:pf,args:[jt],thisArg:y}),new Ra(Dn,Qt)}return On&&ai?u.apply(this,at):(Dn=this.thru(jt),On?te?Dn.value()[0]:Dn.value():Dn)})}),Ia(["pop","push","shift","sort","splice","unshift"],function(u){var p=Sn[u],E=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",te=/^(?:pop|shift)$/.test(u);Pe.prototype[u]=function(){var Ae=arguments;if(te&&!this.__chain__){var je=this.value();return p.apply($n(je)?je:[],Ae)}return this[E](function(et){return p.apply($n(et)?et:[],Ae)})}}),Ss(vi.prototype,function(u,p){var E=Pe[p];if(E){var te=E.name+"";Si.call(Gh,te)||(Gh[te]=[]),Gh[te].push({name:p,func:E})}}),Gh[Pc(y,2).name]=[{name:"wrapper",func:y}],vi.prototype.clone=function gd(){var u=new vi(this.__wrapped__);return u.__actions__=Ro(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Ro(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Ro(this.__views__),u},vi.prototype.reverse=function gw(){if(this.__filtered__){var u=new vi(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},vi.prototype.value=function Sr(){var u=this.__wrapped__.value(),p=this.__dir__,E=$n(u),te=p<0,Ae=E?u.length:0,je=function qw(u,p,E){for(var te=-1,Ae=E.length;++te<Ae;){var je=E[te],et=je.size;switch(je.type){case"drop":u+=et;break;case"dropRight":p-=et;break;case"take":p=er(p,u+et);break;case"takeRight":u=Lr(u,p-et)}}return{start:u,end:p}}(0,Ae,this.__views__),et=je.start,at=je.end,pt=at-et,Pt=te?at:et-1,Nt=this.__iteratees__,jt=Nt.length,Qt=0,bn=er(pt,this.__takeCount__);if(!E||!te&&Ae==pt&&bn==pt)return rm(u,this.__actions__);var On=[];e:for(;pt--&&Qt<bn;){for(var ai=-1,Dn=u[Pt+=p];++ai<jt;){var fi=Nt[ai],Ys=fi.type,hs=(0,fi.iteratee)(Dn);if(2==Ys)Dn=hs;else if(!hs){if(1==Ys)continue e;break e}}On[Qt++]=Dn}return On},Pe.prototype.at=Tl,Pe.prototype.chain=function mf(){return Bc(this)},Pe.prototype.commit=function fF(){return new Ra(this.value(),this.__chain__)},Pe.prototype.next=function ym(){this.__values__===y&&(this.__values__=Fx(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?y:this.__values__[this.__index__++]}},Pe.prototype.plant=function RM(u){for(var p,E=this;E instanceof eb;){var te=Cb(E);te.__index__=0,te.__values__=y,p?Ae.__wrapped__=te:p=te;var Ae=te;E=E.__wrapped__}return Ae.__wrapped__=u,p},Pe.prototype.reverse=function gx(){var u=this.__wrapped__;if(u instanceof vi){var p=u;return this.__actions__.length&&(p=new vi(this)),(p=p.reverse()).__actions__.push({func:pf,args:[_m],thisArg:y}),new Ra(p,this.__chain__)}return this.thru(_m)},Pe.prototype.toJSON=Pe.prototype.valueOf=Pe.prototype.value=function pF(){return rm(this.__wrapped__,this.__actions__)},Pe.prototype.first=Pe.prototype.head,ka&&(Pe.prototype[ka]=function mx(){return this}),Pe}();Ho._=Qn,(M=function(){return Qn}.call(q,g,q,ee))!==y&&(ee.exports=M)}.call(this)},7659:(ee,q,g)=>{var M=g(1811);function D(C,R){if("function"!=typeof C||null!=R&&"function"!=typeof R)throw new TypeError("Expected a function");var _=function(){var v=arguments,T=R?R.apply(this,v):v[0],j=_.cache;if(j.has(T))return j.get(T);var O=C.apply(this,v);return _.cache=j.set(T,O)||j,O};return _.cache=new(D.Cache||M),_}D.Cache=M,ee.exports=D},2692:(ee,q,g)=>{var M=g(3400),y=g(6443),D=g(6300),C=g(8916);ee.exports=function R(_){return D(_)?M(C(_)):y(_)}},7184:(ee,q,g)=>{var M=g(1883),y=g(252),D=g(8951),C=g(3817),R=D(function(_,v){if(null==_)return[];var T=v.length;return T>1&&C(_,v[0],v[1])?v=[]:T>2&&C(v[0],v[1],v[2])&&(v=[v[0]]),y(_,M(v,1),[])});ee.exports=R},1315:ee=>{ee.exports=function q(){return[]}},5706:ee=>{ee.exports=function q(){return!1}},2674:(ee,q,g)=>{var M=g(7002);ee.exports=function y(D){return null==D?"":M(D)}},5249:(ee,q,g)=>{var M=g(549),y=M.ARRAY_BUFFER_SUPPORT,D=M.SYMBOL_SUPPORT;ee.exports=function(R,_){var v,T,j,O,B;if(!R)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(R)||y&&ArrayBuffer.isView(R)||"string"==typeof R||"[object Arguments]"===R.toString())for(j=0,O=R.length;j<O;j++)_(R[j],j);else if("function"!=typeof R.forEach)if(D&&Symbol.iterator in R&&"function"!=typeof R.next&&(R=R[Symbol.iterator]()),"function"!=typeof R.next)for(T in R)R.hasOwnProperty(T)&&_(R[T],T);else for(v=R,j=0;!0!==(B=v.next()).done;)_(B.value,j),j++;else R.forEach(_)}},2508:ee=>{function q(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=function(){return this}),q.of=function(){var g=arguments,M=g.length,y=0;return new q(function(){return y>=M?{done:!0}:{done:!1,value:g[y++]}})},q.empty=function(){return new q(function(){return{done:!0}})},q.fromSequence=function(g){var M=0,y=g.length;return new q(function(){return M>=y?{done:!0}:{done:!1,value:g[M++]}})},q.is=function(g){return g instanceof q||"object"==typeof g&&null!==g&&"function"==typeof g.next},ee.exports=q},549:(ee,q)=>{q.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",q.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(ee,q,g)=>{var M=g(2508),y=g(5249);function D(){this.clear()}D.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},D.prototype.enqueue=function(C){return this.items.push(C),++this.size},D.prototype.dequeue=function(){if(this.size){var C=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,C}},D.prototype.peek=function(){if(this.size)return this.items[this.offset]},D.prototype.forEach=function(C,R){R=arguments.length>1?R:this;for(var _=this.offset,v=0,T=this.items.length;_<T;_++,v++)C.call(R,this.items[_],v,this)},D.prototype.toArray=function(){return this.items.slice(this.offset)},D.prototype.values=function(){var C=this.items,R=this.offset;return new M(function(){if(R>=C.length)return{done:!0};var _=C[R];return R++,{value:_,done:!1}})},D.prototype.entries=function(){var C=this.items,R=this.offset,_=0;return new M(function(){if(R>=C.length)return{done:!0};var v=C[R];return R++,{value:[_++,v],done:!1}})},typeof Symbol<"u"&&(D.prototype[Symbol.iterator]=D.prototype.values),D.prototype.toString=function(){return this.toArray().join(",")},D.prototype.toJSON=function(){return this.toArray()},D.prototype.inspect=function(){var C=this.toArray();return Object.defineProperty(C,"constructor",{value:D,enumerable:!1}),C},typeof Symbol<"u"&&(D.prototype[Symbol.for("nodejs.util.inspect.custom")]=D.prototype.inspect),D.from=function(C){var R=new D;return y(C,function(_){R.enqueue(_)}),R},D.of=function(){return D.from(arguments)},ee.exports=D},5020:ee=>{ee.exports=function q(g,M,y){function D(_,v){if(!M[_]){if(!g[_]){if(C)return C(_,!0);throw new Error("Cannot find module '"+_+"'")}v=M[_]={exports:{}},g[_][0].call(v.exports,function(j){return D(g[_][1][j]||j)},v,v.exports,q,g,M,y)}return M[_].exports}for(var C=void 0,R=0;R<y.length;R++)D(y[R]);return D}({1:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){"use strict";var B=q("crypto");function Q($,H){var w;return void 0===(w="passthrough"!==(H=ce($,H)).algorithm?B.createHash(H.algorithm):new Z).write&&(w.write=w.update,w.end=w.update),J(H,w).dispatch($),w.update||w.end(""),w.digest?w.digest("buffer"===H.encoding?void 0:H.encoding):($=w.read(),"buffer"!==H.encoding?$.toString(H.encoding):$)}(M=g.exports=Q).sha1=function($){return Q($)},M.keys=function($){return Q($,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},M.MD5=function($){return Q($,{algorithm:"md5",encoding:"hex"})},M.keysMD5=function($){return Q($,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var A=B.getHashes?B.getHashes().slice():["sha1","md5"],F=(A.push("passthrough"),["buffer","hex","binary","base64"]);function ce($,H){var w={};if(w.algorithm=(H=H||{}).algorithm||"sha1",w.encoding=H.encoding||"hex",w.excludeValues=!!H.excludeValues,w.algorithm=w.algorithm.toLowerCase(),w.encoding=w.encoding.toLowerCase(),w.ignoreUnknown=!0===H.ignoreUnknown,w.respectType=!1!==H.respectType,w.respectFunctionNames=!1!==H.respectFunctionNames,w.respectFunctionProperties=!1!==H.respectFunctionProperties,w.unorderedArrays=!0===H.unorderedArrays,w.unorderedSets=!1!==H.unorderedSets,w.unorderedObjects=!1!==H.unorderedObjects,w.replacer=H.replacer||void 0,w.excludeKeys=H.excludeKeys||void 0,void 0===$)throw new Error("Object argument required.");for(var P=0;P<A.length;++P)A[P].toLowerCase()===w.algorithm.toLowerCase()&&(w.algorithm=A[P]);if(-1===A.indexOf(w.algorithm))throw new Error('Algorithm "'+w.algorithm+'"  not supported. supported values: '+A.join(", "));if(-1===F.indexOf(w.encoding)&&"passthrough"!==w.algorithm)throw new Error('Encoding "'+w.encoding+'"  not supported. supported values: '+F.join(", "));return w}function K($){if("function"==typeof $)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call($))}function J($,H,w){function P(k){return H.update?H.update(k,"utf8"):H.write(k,"utf8")}return w=w||[],{dispatch:function(k){return this["_"+(null===(k=$.replacer?$.replacer(k):k)?"null":typeof k)](k)},_object:function(k){var de,G=Object.prototype.toString.call(k),Ie=/\[object (.*)\]/i.exec(G);if(Ie=(Ie=Ie?Ie[1]:"unknown:["+G+"]").toLowerCase(),0<=(G=w.indexOf(k)))return this.dispatch("[CIRCULAR:"+G+"]");if(w.push(k),void 0!==C&&C.isBuffer&&C.isBuffer(k))return P("buffer:"),P(k);if("object"===Ie||"function"===Ie||"asyncfunction"===Ie)return G=Object.keys(k),$.unorderedObjects&&(G=G.sort()),!1===$.respectType||K(k)||G.splice(0,0,"prototype","__proto__","constructor"),$.excludeKeys&&(G=G.filter(function(le){return!$.excludeKeys(le)})),P("object:"+G.length+":"),de=this,G.forEach(function(le){de.dispatch(le),P(":"),$.excludeValues||de.dispatch(k[le]),P(",")});if(!this["_"+Ie]){if($.ignoreUnknown)return P("["+Ie+"]");throw new Error('Unknown object type "'+Ie+'"')}this["_"+Ie](k)},_array:function(k,le){le=void 0!==le?le:!1!==$.unorderedArrays;var G=this;if(P("array:"+k.length+":"),!le||k.length<=1)return k.forEach(function(ve){return G.dispatch(ve)});var Ie=[];return le=k.map(function(ve){var Oe=new Z,Le=w.slice();return J($,Oe,Le).dispatch(ve),Ie=Ie.concat(Le.slice(w.length)),Oe.read().toString()}),w=w.concat(Ie),le.sort(),this._array(le,!1)},_date:function(k){return P("date:"+k.toJSON())},_symbol:function(k){return P("symbol:"+k.toString())},_error:function(k){return P("error:"+k.toString())},_boolean:function(k){return P("bool:"+k.toString())},_string:function(k){P("string:"+k.length+":"),P(k.toString())},_function:function(k){P("fn:"),K(k)?this.dispatch("[native]"):this.dispatch(k.toString()),!1!==$.respectFunctionNames&&this.dispatch("function-name:"+String(k.name)),$.respectFunctionProperties&&this._object(k)},_number:function(k){return P("number:"+k.toString())},_xml:function(k){return P("xml:"+k.toString())},_null:function(){return P("Null")},_undefined:function(){return P("Undefined")},_regexp:function(k){return P("regex:"+k.toString())},_uint8array:function(k){return P("uint8array:"),this.dispatch(Array.prototype.slice.call(k))},_uint8clampedarray:function(k){return P("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(k))},_int8array:function(k){return P("int8array:"),this.dispatch(Array.prototype.slice.call(k))},_uint16array:function(k){return P("uint16array:"),this.dispatch(Array.prototype.slice.call(k))},_int16array:function(k){return P("int16array:"),this.dispatch(Array.prototype.slice.call(k))},_uint32array:function(k){return P("uint32array:"),this.dispatch(Array.prototype.slice.call(k))},_int32array:function(k){return P("int32array:"),this.dispatch(Array.prototype.slice.call(k))},_float32array:function(k){return P("float32array:"),this.dispatch(Array.prototype.slice.call(k))},_float64array:function(k){return P("float64array:"),this.dispatch(Array.prototype.slice.call(k))},_arraybuffer:function(k){return P("arraybuffer:"),this.dispatch(new Uint8Array(k))},_url:function(k){return P("url:"+k.toString())},_map:function(k){return P("map:"),k=Array.from(k),this._array(k,!1!==$.unorderedSets)},_set:function(k){return P("set:"),k=Array.from(k),this._array(k,!1!==$.unorderedSets)},_file:function(k){return P("file:"),this.dispatch([k.name,k.size,k.type,k.lastModfied])},_blob:function(){if($.ignoreUnknown)return P("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return P("domwindow")},_bigint:function(k){return P("bigint:"+k.toString())},_process:function(){return P("process")},_timer:function(){return P("timer")},_pipe:function(){return P("pipe")},_tcp:function(){return P("tcp")},_udp:function(){return P("udp")},_tty:function(){return P("tty")},_statwatcher:function(){return P("statwatcher")},_securecontext:function(){return P("securecontext")},_connection:function(){return P("connection")},_zlib:function(){return P("zlib")},_context:function(){return P("context")},_nodescript:function(){return P("nodescript")},_httpparser:function(){return P("httpparser")},_dataview:function(){return P("dataview")},_signal:function(){return P("signal")},_fsevent:function(){return P("fsevent")},_tlswrap:function(){return P("tlswrap")}}}function Z(){return{buf:"",write:function($){this.buf+=$},end:function($){this.buf+=$},read:function(){return this.buf}}}M.writeToStream=function($,H,w){return void 0===w&&(w=H,H={}),J(H=ce($,H),w).dispatch($)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){!function(B){"use strict";var Q=typeof Uint8Array<"u"?Uint8Array:Array,A="+".charCodeAt(0),F="/".charCodeAt(0),ce="0".charCodeAt(0),K="a".charCodeAt(0),J="A".charCodeAt(0),Z="-".charCodeAt(0),$="_".charCodeAt(0);function H(w){return(w=w.charCodeAt(0))===A||w===Z?62:w===F||w===$?63:w<ce?-1:w<ce+10?w-ce+26+26:w<J+26?w-J:w<K+26?w-K+26:void 0}B.toByteArray=function(w){var P,k;if(0<w.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var de="="===w.charAt((de=w.length)-2)?2:"="===w.charAt(de-1)?1:0,G=new Q(3*w.length/4-de),Ie=0<de?w.length-4:w.length,le=0;function ve(Oe){G[le++]=Oe}for(P=0;P<Ie;P+=4,0)ve((16711680&(k=H(w.charAt(P))<<18|H(w.charAt(P+1))<<12|H(w.charAt(P+2))<<6|H(w.charAt(P+3))))>>16),ve((65280&k)>>8),ve(255&k);return 2==de?ve(255&(k=H(w.charAt(P))<<2|H(w.charAt(P+1))>>4)):1==de&&(ve((k=H(w.charAt(P))<<10|H(w.charAt(P+1))<<4|H(w.charAt(P+2))>>2)>>8&255),ve(255&k)),G},B.fromByteArray=function(w){var P,k,de,G,Ie=w.length%3,le="";function ve(Oe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Oe)}for(P=0,de=w.length-Ie;P<de;P+=3)le+=ve((G=k=(w[P]<<16)+(w[P+1]<<8)+w[P+2])>>18&63)+ve(G>>12&63)+ve(G>>6&63)+ve(63&G);switch(Ie){case 1:le=(le+=ve((k=w[w.length-1])>>2))+ve(k<<4&63)+"==";break;case 2:le=(le=(le+=ve((k=(w[w.length-2]<<8)+w[w.length-1])>>10))+ve(k>>4&63))+ve(k<<2&63)+"="}return le}}(void 0===M?this.base64js={}:M)}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(q,g,M){(function(y,D,A,R,_,v,T,j,O){var B=q("base64-js"),Q=q("ieee754");function A(ge,L,I){if(!(this instanceof A))return new A(ge,L,I);var ae,ie,Ge,Ze,pe=typeof ge;if("base64"===L&&"string"==pe)for(ge=(Ze=ge).trim?Ze.trim():Ze.replace(/^\s+|\s+$/g,"");ge.length%4!=0;)ge+="=";if("number"==pe)ae=Qe(ge);else if("string"==pe)ae=A.byteLength(ge,L);else{if("object"!=pe)throw new Error("First argument needs to be a number, array or string.");ae=Qe(ge.length)}if(A._useTypedArrays?ie=A._augment(new Uint8Array(ae)):((ie=this).length=ae,ie._isBuffer=!0),A._useTypedArrays&&"number"==typeof ge.byteLength)ie._set(ge);else if(qe(Ze=ge)||A.isBuffer(Ze)||Ze&&"object"==typeof Ze&&"number"==typeof Ze.length)for(Ge=0;Ge<ae;Ge++)ie[Ge]=A.isBuffer(ge)?ge.readUInt8(Ge):ge[Ge];else if("string"==pe)ie.write(ge,0,L);else if("number"==pe&&!A._useTypedArrays&&!I)for(Ge=0;Ge<ae;Ge++)ie[Ge]=0;return ie}function J(ge,L,I,Ge){var ie;if(Ge||(Je("boolean"==typeof I,"missing or invalid endian"),Je(null!=L,"missing offset"),Je(L+1<ge.length,"Trying to read beyond buffer length")),!((Ge=ge.length)<=L))return I?(ie=ge[L],L+1<Ge&&(ie|=ge[L+1]<<8)):(ie=ge[L]<<8,L+1<Ge&&(ie|=ge[L+1])),ie}function Z(ge,L,I,Ge){var ie;if(Ge||(Je("boolean"==typeof I,"missing or invalid endian"),Je(null!=L,"missing offset"),Je(L+3<ge.length,"Trying to read beyond buffer length")),!((Ge=ge.length)<=L))return I?(L+2<Ge&&(ie=ge[L+2]<<16),L+1<Ge&&(ie|=ge[L+1]<<8),ie|=ge[L],L+3<Ge&&(ie+=ge[L+3]<<24>>>0)):(L+1<Ge&&(ie=ge[L+1]<<16),L+2<Ge&&(ie|=ge[L+2]<<8),L+3<Ge&&(ie|=ge[L+3]),ie+=ge[L]<<24>>>0),ie}function $(ge,L,I,ae){if(ae||(Je("boolean"==typeof I,"missing or invalid endian"),Je(null!=L,"missing offset"),Je(L+1<ge.length,"Trying to read beyond buffer length")),!(ge.length<=L))return 32768&(ae=J(ge,L,I,!0))?-1*(65535-ae+1):ae}function H(ge,L,I,ae){if(ae||(Je("boolean"==typeof I,"missing or invalid endian"),Je(null!=L,"missing offset"),Je(L+3<ge.length,"Trying to read beyond buffer length")),!(ge.length<=L))return 2147483648&(ae=Z(ge,L,I,!0))?-1*(4294967295-ae+1):ae}function w(ge,L,I,ae){return ae||(Je("boolean"==typeof I,"missing or invalid endian"),Je(L+3<ge.length,"Trying to read beyond buffer length")),Q.read(ge,L,I,23,4)}function P(ge,L,I,ae){return ae||(Je("boolean"==typeof I,"missing or invalid endian"),Je(L+7<ge.length,"Trying to read beyond buffer length")),Q.read(ge,L,I,52,8)}function k(ge,L,I,ae,ie){if(ie||(Je(null!=L,"missing value"),Je("boolean"==typeof ae,"missing or invalid endian"),Je(null!=I,"missing offset"),Je(I+1<ge.length,"trying to write beyond buffer length"),Ce(L,65535)),!((ie=ge.length)<=I))for(var Ge=0,Ze=Math.min(ie-I,2);Ge<Ze;Ge++)ge[I+Ge]=(L&255<<8*(ae?Ge:1-Ge))>>>8*(ae?Ge:1-Ge)}function de(ge,L,I,ae,ie){if(ie||(Je(null!=L,"missing value"),Je("boolean"==typeof ae,"missing or invalid endian"),Je(null!=I,"missing offset"),Je(I+3<ge.length,"trying to write beyond buffer length"),Ce(L,4294967295)),!((ie=ge.length)<=I))for(var Ge=0,Ze=Math.min(ie-I,4);Ge<Ze;Ge++)ge[I+Ge]=L>>>8*(ae?Ge:3-Ge)&255}function G(ge,L,I,ae,ie){ie||(Je(null!=L,"missing value"),Je("boolean"==typeof ae,"missing or invalid endian"),Je(null!=I,"missing offset"),Je(I+1<ge.length,"Trying to write beyond buffer length"),nt(L,32767,-32768)),ge.length<=I||k(ge,0<=L?L:65535+L+1,I,ae,ie)}function Ie(ge,L,I,ae,ie){ie||(Je(null!=L,"missing value"),Je("boolean"==typeof ae,"missing or invalid endian"),Je(null!=I,"missing offset"),Je(I+3<ge.length,"Trying to write beyond buffer length"),nt(L,2147483647,-2147483648)),ge.length<=I||de(ge,0<=L?L:4294967295+L+1,I,ae,ie)}function le(ge,L,I,ae,ie){ie||(Je(null!=L,"missing value"),Je("boolean"==typeof ae,"missing or invalid endian"),Je(null!=I,"missing offset"),Je(I+3<ge.length,"Trying to write beyond buffer length"),gt(L,34028234663852886e22,-34028234663852886e22)),ge.length<=I||Q.write(ge,L,I,ae,23,4)}function ve(ge,L,I,ae,ie){ie||(Je(null!=L,"missing value"),Je("boolean"==typeof ae,"missing or invalid endian"),Je(null!=I,"missing offset"),Je(I+7<ge.length,"Trying to write beyond buffer length"),gt(L,17976931348623157e292,-17976931348623157e292)),ge.length<=I||Q.write(ge,L,I,ae,52,8)}M.Buffer=A,M.SlowBuffer=A,M.INSPECT_MAX_BYTES=50,A.poolSize=8192,A._useTypedArrays=function(){try{var ge=new ArrayBuffer(0),L=new Uint8Array(ge);return L.foo=function(){return 42},42===L.foo()&&"function"==typeof L.subarray}catch{return!1}}(),A.isEncoding=function(ge){switch(String(ge).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.isBuffer=function(ge){return!(null==ge||!ge._isBuffer)},A.byteLength=function(ge,L){var I;switch(ge+="",L||"utf8"){case"hex":I=ge.length/2;break;case"utf8":case"utf-8":I=He(ge).length;break;case"ascii":case"binary":case"raw":I=ge.length;break;case"base64":I=Me(ge).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":I=2*ge.length;break;default:throw new Error("Unknown encoding")}return I},A.concat=function(ge,L){if(Je(qe(ge),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===ge.length)return new A(0);if(1===ge.length)return ge[0];if("number"!=typeof L)for(ie=L=0;ie<ge.length;ie++)L+=ge[ie].length;for(var I=new A(L),ae=0,ie=0;ie<ge.length;ie++){var Ge=ge[ie];Ge.copy(I,ae),ae+=Ge.length}return I},A.prototype.write=function(ge,L,I,ae){isFinite(L)?isFinite(I)||(ae=I,I=void 0):(re=ae,ae=L,L=I,I=re),L=Number(L)||0;var ie,Ge,Ze,pe,re=this.length-L;switch((!I||re<(I=Number(I)))&&(I=re),ae=String(ae||"utf8").toLowerCase()){case"hex":ie=function(Y,N,U,me){U=Number(U)||0;var Ye=Y.length-U;(!me||Ye<(me=Number(me)))&&(me=Ye),Je((Ye=N.length)%2==0,"Invalid hex string"),Ye/2<me&&(me=Ye/2);for(var ye=0;ye<me;ye++){var ze=parseInt(N.substr(2*ye,2),16);Je(!isNaN(ze),"Invalid hex string"),Y[U+ye]=ze}return A._charsWritten=2*ye,ye}(this,ge,L,I);break;case"utf8":case"utf-8":Ge=this,Ze=L,pe=I,ie=A._charsWritten=Ue(He(ge),Ge,Ze,pe);break;case"ascii":case"binary":ie=function F(ge,L,I,ae){return A._charsWritten=Ue(function(ie){for(var Ge=[],Ze=0;Ze<ie.length;Ze++)Ge.push(255&ie.charCodeAt(Ze));return Ge}(L),ge,I,ae)}(this,ge,L,I);break;case"base64":Ge=this,Ze=L,pe=I,ie=A._charsWritten=Ue(Me(ge),Ge,Ze,pe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function ce(ge,L,I,ae){return A._charsWritten=Ue(function(ie){for(var Ge,Ze,pe=[],re=0;re<ie.length;re++)Ge=(Ze=ie.charCodeAt(re))>>8,pe.push(Ze%=256),pe.push(Ge);return pe}(L),ge,I,ae)}(this,ge,L,I);break;default:throw new Error("Unknown encoding")}return ie},A.prototype.toString=function(ge,L,I){var ae,ie,Ge,Ze,pe=this;if(ge=String(ge||"utf8").toLowerCase(),L=Number(L)||0,(I=void 0!==I?Number(I):pe.length)===L)return"";switch(ge){case"hex":ae=function(re,Y,N){var U=re.length;(!Y||Y<0)&&(Y=0),(!N||N<0||U<N)&&(N=U);for(var me="",Ye=Y;Ye<N;Ye++)me+=Te(re[Ye]);return me}(pe,L,I);break;case"utf8":case"utf-8":ae=function(re,Y,N){var U="",me="";N=Math.min(re.length,N);for(var Ye=Y;Ye<N;Ye++)re[Ye]<=127?(U+=fe(me)+String.fromCharCode(re[Ye]),me=""):me+="%"+re[Ye].toString(16);return U+fe(me)}(pe,L,I);break;case"ascii":case"binary":ae=function K(ge,L,I){var ae="";I=Math.min(ge.length,I);for(var ie=L;ie<I;ie++)ae+=String.fromCharCode(ge[ie]);return ae}(pe,L,I);break;case"base64":ie=pe,Ze=I,ae=0===(Ge=L)&&Ze===ie.length?B.fromByteArray(ie):B.fromByteArray(ie.slice(Ge,Ze));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ae=function(re,Y,N){for(var U=re.slice(Y,N),me="",Ye=0;Ye<U.length;Ye+=2)me+=String.fromCharCode(U[Ye]+256*U[Ye+1]);return me}(pe,L,I);break;default:throw new Error("Unknown encoding")}return ae},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},A.prototype.copy=function(ge,L,I,ae){if(L=L||0,(ae=ae||0===ae?ae:this.length)!==(I=I||0)&&0!==ge.length&&0!==this.length){Je(I<=ae,"sourceEnd < sourceStart"),Je(0<=L&&L<ge.length,"targetStart out of bounds"),Je(0<=I&&I<this.length,"sourceStart out of bounds"),Je(0<=ae&&ae<=this.length,"sourceEnd out of bounds"),ae>this.length&&(ae=this.length);var ie=(ae=ge.length-L<ae-I?ge.length-L+I:ae)-I;if(ie<100||!A._useTypedArrays)for(var Ge=0;Ge<ie;Ge++)ge[Ge+L]=this[Ge+I];else ge._set(this.subarray(I,I+ie),L)}},A.prototype.slice=function(ge,L){var I=this.length;if(ge=Le(ge,I,0),L=Le(L,I,I),A._useTypedArrays)return A._augment(this.subarray(ge,L));for(var ae=L-ge,ie=new A(ae,void 0,!0),Ge=0;Ge<ae;Ge++)ie[Ge]=this[Ge+ge];return ie},A.prototype.get=function(ge){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(ge)},A.prototype.set=function(ge,L){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(ge,L)},A.prototype.readUInt8=function(ge,L){if(L||(Je(null!=ge,"missing offset"),Je(ge<this.length,"Trying to read beyond buffer length")),!(ge>=this.length))return this[ge]},A.prototype.readUInt16LE=function(ge,L){return J(this,ge,!0,L)},A.prototype.readUInt16BE=function(ge,L){return J(this,ge,!1,L)},A.prototype.readUInt32LE=function(ge,L){return Z(this,ge,!0,L)},A.prototype.readUInt32BE=function(ge,L){return Z(this,ge,!1,L)},A.prototype.readInt8=function(ge,L){if(L||(Je(null!=ge,"missing offset"),Je(ge<this.length,"Trying to read beyond buffer length")),!(ge>=this.length))return 128&this[ge]?-1*(255-this[ge]+1):this[ge]},A.prototype.readInt16LE=function(ge,L){return $(this,ge,!0,L)},A.prototype.readInt16BE=function(ge,L){return $(this,ge,!1,L)},A.prototype.readInt32LE=function(ge,L){return H(this,ge,!0,L)},A.prototype.readInt32BE=function(ge,L){return H(this,ge,!1,L)},A.prototype.readFloatLE=function(ge,L){return w(this,ge,!0,L)},A.prototype.readFloatBE=function(ge,L){return w(this,ge,!1,L)},A.prototype.readDoubleLE=function(ge,L){return P(this,ge,!0,L)},A.prototype.readDoubleBE=function(ge,L){return P(this,ge,!1,L)},A.prototype.writeUInt8=function(ge,L,I){I||(Je(null!=ge,"missing value"),Je(null!=L,"missing offset"),Je(L<this.length,"trying to write beyond buffer length"),Ce(ge,255)),L>=this.length||(this[L]=ge)},A.prototype.writeUInt16LE=function(ge,L,I){k(this,ge,L,!0,I)},A.prototype.writeUInt16BE=function(ge,L,I){k(this,ge,L,!1,I)},A.prototype.writeUInt32LE=function(ge,L,I){de(this,ge,L,!0,I)},A.prototype.writeUInt32BE=function(ge,L,I){de(this,ge,L,!1,I)},A.prototype.writeInt8=function(ge,L,I){I||(Je(null!=ge,"missing value"),Je(null!=L,"missing offset"),Je(L<this.length,"Trying to write beyond buffer length"),nt(ge,127,-128)),L>=this.length||this.writeUInt8(0<=ge?ge:255+ge+1,L,I)},A.prototype.writeInt16LE=function(ge,L,I){G(this,ge,L,!0,I)},A.prototype.writeInt16BE=function(ge,L,I){G(this,ge,L,!1,I)},A.prototype.writeInt32LE=function(ge,L,I){Ie(this,ge,L,!0,I)},A.prototype.writeInt32BE=function(ge,L,I){Ie(this,ge,L,!1,I)},A.prototype.writeFloatLE=function(ge,L,I){le(this,ge,L,!0,I)},A.prototype.writeFloatBE=function(ge,L,I){le(this,ge,L,!1,I)},A.prototype.writeDoubleLE=function(ge,L,I){ve(this,ge,L,!0,I)},A.prototype.writeDoubleBE=function(ge,L,I){ve(this,ge,L,!1,I)},A.prototype.fill=function(ge,L,I){if(L=L||0,I=I||this.length,Je("number"==typeof(ge="string"==typeof(ge=ge||0)?ge.charCodeAt(0):ge)&&!isNaN(ge),"value is not a number"),Je(L<=I,"end < start"),I!==L&&0!==this.length){Je(0<=L&&L<this.length,"start out of bounds"),Je(0<=I&&I<=this.length,"end out of bounds");for(var ae=L;ae<I;ae++)this[ae]=ge}},A.prototype.inspect=function(){for(var ge=[],L=this.length,I=0;I<L;I++)if(ge[I]=Te(this[I]),I===M.INSPECT_MAX_BYTES){ge[I+1]="...";break}return"<Buffer "+ge.join(" ")+">"},A.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(A._useTypedArrays)return new A(this).buffer;for(var ge=new Uint8Array(this.length),L=0,I=ge.length;L<I;L+=1)ge[L]=this[L];return ge.buffer};var Oe=A.prototype;function Le(ge,L,I){return"number"!=typeof ge?I:L<=(ge=~~ge)?L:0<=ge||0<=(ge+=L)?ge:0}function Qe(ge){return(ge=~~Math.ceil(+ge))<0?0:ge}function qe(ge){return(Array.isArray||function(L){return"[object Array]"===Object.prototype.toString.call(L)})(ge)}function Te(ge){return ge<16?"0"+ge.toString(16):ge.toString(16)}function He(ge){for(var L=[],I=0;I<ge.length;I++){var ae=ge.charCodeAt(I);if(ae<=127)L.push(ge.charCodeAt(I));else for(var ie=I,Ge=(55296<=ae&&ae<=57343&&I++,encodeURIComponent(ge.slice(ie,I+1)).substr(1).split("%")),Ze=0;Ze<Ge.length;Ze++)L.push(parseInt(Ge[Ze],16))}return L}function Me(ge){return B.toByteArray(ge)}function Ue(ge,L,I,ae){for(var ie=0;ie<ae&&!(ie+I>=L.length||ie>=ge.length);ie++)L[ie+I]=ge[ie];return ie}function fe(ge){try{return decodeURIComponent(ge)}catch{return String.fromCharCode(65533)}}function Ce(ge,L){Je("number"==typeof ge,"cannot write a non-number as a number"),Je(0<=ge,"specified a negative value for writing an unsigned value"),Je(ge<=L,"value is larger than maximum value for type"),Je(Math.floor(ge)===ge,"value has a fractional component")}function nt(ge,L,I){Je("number"==typeof ge,"cannot write a non-number as a number"),Je(ge<=L,"value larger than maximum allowed value"),Je(I<=ge,"value smaller than minimum allowed value"),Je(Math.floor(ge)===ge,"value has a fractional component")}function gt(ge,L,I){Je("number"==typeof ge,"cannot write a non-number as a number"),Je(ge<=L,"value larger than maximum allowed value"),Je(I<=ge,"value smaller than minimum allowed value")}function Je(ge,L){if(!ge)throw new Error(L||"Failed assertion")}A._augment=function(ge){return ge._isBuffer=!0,ge._get=ge.get,ge._set=ge.set,ge.get=Oe.get,ge.set=Oe.set,ge.write=Oe.write,ge.toString=Oe.toString,ge.toLocaleString=Oe.toString,ge.toJSON=Oe.toJSON,ge.copy=Oe.copy,ge.slice=Oe.slice,ge.readUInt8=Oe.readUInt8,ge.readUInt16LE=Oe.readUInt16LE,ge.readUInt16BE=Oe.readUInt16BE,ge.readUInt32LE=Oe.readUInt32LE,ge.readUInt32BE=Oe.readUInt32BE,ge.readInt8=Oe.readInt8,ge.readInt16LE=Oe.readInt16LE,ge.readInt16BE=Oe.readInt16BE,ge.readInt32LE=Oe.readInt32LE,ge.readInt32BE=Oe.readInt32BE,ge.readFloatLE=Oe.readFloatLE,ge.readFloatBE=Oe.readFloatBE,ge.readDoubleLE=Oe.readDoubleLE,ge.readDoubleBE=Oe.readDoubleBE,ge.writeUInt8=Oe.writeUInt8,ge.writeUInt16LE=Oe.writeUInt16LE,ge.writeUInt16BE=Oe.writeUInt16BE,ge.writeUInt32LE=Oe.writeUInt32LE,ge.writeUInt32BE=Oe.writeUInt32BE,ge.writeInt8=Oe.writeInt8,ge.writeInt16LE=Oe.writeInt16LE,ge.writeInt16BE=Oe.writeInt16BE,ge.writeInt32LE=Oe.writeInt32LE,ge.writeInt32BE=Oe.writeInt32BE,ge.writeFloatLE=Oe.writeFloatLE,ge.writeFloatBE=Oe.writeFloatBE,ge.writeDoubleLE=Oe.writeDoubleLE,ge.writeDoubleBE=Oe.writeDoubleBE,ge.fill=Oe.fill,ge.inspect=Oe.inspect,ge.toArrayBuffer=Oe.toArrayBuffer,ge}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(q,g,M){(function(y,D,B,R,_,v,T,j,O){B=q("buffer").Buffer;var A=new B(4);A.fill(0),g.exports={hash:function(F,ce,K,J){for(var Z=ce(function(k,de){k.length%4!=0&&(k=B.concat([k,A],k.length+(4-k.length%4)));for(var Ie=[],le=de?k.readInt32BE:k.readInt32LE,ve=0;ve<k.length;ve+=4)Ie.push(le.call(k,ve));return Ie}(F=B.isBuffer(F)?F:new B(F),J),8*F.length),$=(ce=J,new B(K)),H=ce?$.writeInt32BE:$.writeInt32LE,w=0;w<Z.length;w++)H.call($,Z[w],4*w,!0);return $}}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(q,g,M){(function(y,D,B,R,_,v,T,j,O){B=q("buffer").Buffer;var Q=q("./sha"),A=q("./sha256"),F=q("./rng"),ce={sha1:Q,sha256:A,md5:q("./md5")},K=64,J=new B(K);function Z(k,de){var G=ce[k=k||"sha1"],Ie=[];return G||$("algorithm:",k,"is not yet supported"),{update:function(le){return B.isBuffer(le)||(le=new B(le)),Ie.push(le),this},digest:function(le){var ve=B.concat(Ie);return ve=de?function(Oe,Le,Qe){B.isBuffer(Le)||(Le=new B(Le)),B.isBuffer(Qe)||(Qe=new B(Qe)),Le.length>K?Le=Oe(Le):Le.length<K&&(Le=B.concat([Le,J],K));for(var qe=new B(K),Te=new B(K),He=0;He<K;He++)qe[He]=54^Le[He],Te[He]=92^Le[He];return Qe=Oe(B.concat([qe,Qe])),Oe(B.concat([Te,Qe]))}(G,de,ve):G(ve),Ie=null,le?ve.toString(le):ve}}}function $(){var k=[].slice.call(arguments).join(" ");throw new Error([k,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}J.fill(0),M.createHash=function(k){return Z(k)},M.createHmac=Z,M.randomBytes=function(k,de){if(!de||!de.call)return new B(F(k));try{de.call(this,void 0,new B(F(k)))}catch(G){de(G)}};var H,w=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],P=function(k){M[k]=function(){$("sorry,",k,"is not implemented yet")}};for(H in w)P(w[H])}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){var B=q("./helpers");function Q($,H){$[H>>5]|=128<<H%32,$[14+(H+64>>>9<<4)]=H;for(var w=1732584193,P=-271733879,k=-1732584194,de=271733878,G=0;G<$.length;G+=16){var Ie=w,le=P,ve=k,Oe=de;w=F(w,P,k,de,$[G+0],7,-680876936),de=F(de,w,P,k,$[G+1],12,-389564586),k=F(k,de,w,P,$[G+2],17,606105819),P=F(P,k,de,w,$[G+3],22,-1044525330),w=F(w,P,k,de,$[G+4],7,-176418897),de=F(de,w,P,k,$[G+5],12,1200080426),k=F(k,de,w,P,$[G+6],17,-1473231341),P=F(P,k,de,w,$[G+7],22,-45705983),w=F(w,P,k,de,$[G+8],7,1770035416),de=F(de,w,P,k,$[G+9],12,-1958414417),k=F(k,de,w,P,$[G+10],17,-42063),P=F(P,k,de,w,$[G+11],22,-1990404162),w=F(w,P,k,de,$[G+12],7,1804603682),de=F(de,w,P,k,$[G+13],12,-40341101),k=F(k,de,w,P,$[G+14],17,-1502002290),w=ce(w,P=F(P,k,de,w,$[G+15],22,1236535329),k,de,$[G+1],5,-165796510),de=ce(de,w,P,k,$[G+6],9,-1069501632),k=ce(k,de,w,P,$[G+11],14,643717713),P=ce(P,k,de,w,$[G+0],20,-373897302),w=ce(w,P,k,de,$[G+5],5,-701558691),de=ce(de,w,P,k,$[G+10],9,38016083),k=ce(k,de,w,P,$[G+15],14,-660478335),P=ce(P,k,de,w,$[G+4],20,-405537848),w=ce(w,P,k,de,$[G+9],5,568446438),de=ce(de,w,P,k,$[G+14],9,-1019803690),k=ce(k,de,w,P,$[G+3],14,-187363961),P=ce(P,k,de,w,$[G+8],20,1163531501),w=ce(w,P,k,de,$[G+13],5,-1444681467),de=ce(de,w,P,k,$[G+2],9,-51403784),k=ce(k,de,w,P,$[G+7],14,1735328473),w=K(w,P=ce(P,k,de,w,$[G+12],20,-1926607734),k,de,$[G+5],4,-378558),de=K(de,w,P,k,$[G+8],11,-2022574463),k=K(k,de,w,P,$[G+11],16,1839030562),P=K(P,k,de,w,$[G+14],23,-35309556),w=K(w,P,k,de,$[G+1],4,-1530992060),de=K(de,w,P,k,$[G+4],11,1272893353),k=K(k,de,w,P,$[G+7],16,-155497632),P=K(P,k,de,w,$[G+10],23,-1094730640),w=K(w,P,k,de,$[G+13],4,681279174),de=K(de,w,P,k,$[G+0],11,-358537222),k=K(k,de,w,P,$[G+3],16,-722521979),P=K(P,k,de,w,$[G+6],23,76029189),w=K(w,P,k,de,$[G+9],4,-640364487),de=K(de,w,P,k,$[G+12],11,-421815835),k=K(k,de,w,P,$[G+15],16,530742520),w=J(w,P=K(P,k,de,w,$[G+2],23,-995338651),k,de,$[G+0],6,-198630844),de=J(de,w,P,k,$[G+7],10,1126891415),k=J(k,de,w,P,$[G+14],15,-1416354905),P=J(P,k,de,w,$[G+5],21,-57434055),w=J(w,P,k,de,$[G+12],6,1700485571),de=J(de,w,P,k,$[G+3],10,-1894986606),k=J(k,de,w,P,$[G+10],15,-1051523),P=J(P,k,de,w,$[G+1],21,-2054922799),w=J(w,P,k,de,$[G+8],6,1873313359),de=J(de,w,P,k,$[G+15],10,-30611744),k=J(k,de,w,P,$[G+6],15,-1560198380),P=J(P,k,de,w,$[G+13],21,1309151649),w=J(w,P,k,de,$[G+4],6,-145523070),de=J(de,w,P,k,$[G+11],10,-1120210379),k=J(k,de,w,P,$[G+2],15,718787259),P=J(P,k,de,w,$[G+9],21,-343485551),w=Z(w,Ie),P=Z(P,le),k=Z(k,ve),de=Z(de,Oe)}return Array(w,P,k,de)}function A($,H,w,P,k,de){return Z((H=Z(Z(H,$),Z(P,de)))<<k|H>>>32-k,w)}function F($,H,w,P,k,de,G){return A(H&w|~H&P,$,H,k,de,G)}function ce($,H,w,P,k,de,G){return A(H&P|w&~P,$,H,k,de,G)}function K($,H,w,P,k,de,G){return A(H^w^P,$,H,k,de,G)}function J($,H,w,P,k,de,G){return A(w^(H|~P),$,H,k,de,G)}function Z($,H){var w=(65535&$)+(65535&H);return($>>16)+(H>>16)+(w>>16)<<16|65535&w}g.exports=function($){return B.hash($,Q,16)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){g.exports=function(Q){for(var A,F=new Array(Q),ce=0;ce<Q;ce++)!(3&ce)&&(A=4294967296*Math.random()),F[ce]=A>>>((3&ce)<<3)&255;return F}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){var B=q("./helpers");function Q(ce,K){ce[K>>5]|=128<<24-K%32,ce[15+(K+64>>9<<4)]=K;for(var J,Z,$,H=Array(80),w=1732584193,P=-271733879,k=-1732584194,de=271733878,G=-1009589776,Ie=0;Ie<ce.length;Ie+=16){for(var le=w,ve=P,Oe=k,Le=de,Qe=G,qe=0;qe<80;qe++){H[qe]=qe<16?ce[Ie+qe]:F(H[qe-3]^H[qe-8]^H[qe-14]^H[qe-16],1);var Te=A(A(F(w,5),(Te=P,Z=k,$=de,(J=qe)<20?Te&Z|~Te&$:!(J<40)&&J<60?Te&Z|Te&$|Z&$:Te^Z^$)),A(A(G,H[qe]),(J=qe)<20?1518500249:J<40?1859775393:J<60?-1894007588:-899497514));G=de,de=k,k=F(P,30),P=w,w=Te}w=A(w,le),P=A(P,ve),k=A(k,Oe),de=A(de,Le),G=A(G,Qe)}return Array(w,P,k,de,G)}function A(ce,K){var J=(65535&ce)+(65535&K);return(ce>>16)+(K>>16)+(J>>16)<<16|65535&J}function F(ce,K){return ce<<K|ce>>>32-K}g.exports=function(ce){return B.hash(ce,Q,20,!0)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){function B(K,J){var Z=(65535&K)+(65535&J);return(K>>16)+(J>>16)+(Z>>16)<<16|65535&Z}function Q(K,J){var Z,$=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),w=new Array(64);K[J>>5]|=128<<24-J%32,K[15+(J+64>>9<<4)]=J;for(var P,k,de=0;de<K.length;de+=16){for(var G=H[0],Ie=H[1],le=H[2],ve=H[3],Oe=H[4],Le=H[5],Qe=H[6],qe=H[7],Te=0;Te<64;Te++)w[Te]=Te<16?K[Te+de]:B(B(B(F(k=w[Te-2],17)^F(k,19)^ce(k,10),w[Te-7]),F(k=w[Te-15],7)^F(k,18)^ce(k,3)),w[Te-16]),Z=B(B(B(B(qe,F(k=Oe,6)^F(k,11)^F(k,25)),Oe&Le^~Oe&Qe),$[Te]),w[Te]),P=B(F(P=G,2)^F(P,13)^F(P,22),G&Ie^G&le^Ie&le),qe=Qe,Qe=Le,Le=Oe,Oe=B(ve,Z),ve=le,le=Ie,Ie=G,G=B(Z,P);H[0]=B(G,H[0]),H[1]=B(Ie,H[1]),H[2]=B(le,H[2]),H[3]=B(ve,H[3]),H[4]=B(Oe,H[4]),H[5]=B(Le,H[5]),H[6]=B(Qe,H[6]),H[7]=B(qe,H[7])}return H}var A=q("./helpers"),F=function(K,J){return K>>>J|K<<32-J},ce=function(K,J){return K>>>J};g.exports=function(K){return A.hash(K,Q,32,!0)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){M.read=function(B,Q,A,F,de){var K,J,Z=8*de-F-1,$=(1<<Z)-1,H=$>>1,w=-7,P=A?de-1:0,k=A?-1:1;for(de=B[Q+P],P+=k,K=de&(1<<-w)-1,de>>=-w,w+=Z;0<w;K=256*K+B[Q+P],P+=k,w-=8);for(J=K&(1<<-w)-1,K>>=-w,w+=F;0<w;J=256*J+B[Q+P],P+=k,w-=8);if(0===K)K=1-H;else{if(K===$)return J?NaN:1/0*(de?-1:1);J+=Math.pow(2,F),K-=H}return(de?-1:1)*J*Math.pow(2,K-F)},M.write=function(B,Q,A,F,ce,G){var J,Z,$=8*G-ce-1,H=(1<<$)-1,w=H>>1,P=23===ce?Math.pow(2,-24)-Math.pow(2,-77):0,k=F?0:G-1,de=F?1:-1;for(G=Q<0||0===Q&&1/Q<0?1:0,Q=Math.abs(Q),isNaN(Q)||Q===1/0?(Z=isNaN(Q)?1:0,J=H):(J=Math.floor(Math.log(Q)/Math.LN2),Q*(F=Math.pow(2,-J))<1&&(J--,F*=2),2<=(Q+=1<=J+w?P/F:P*Math.pow(2,1-w))*F&&(J++,F/=2),H<=J+w?(Z=0,J=H):1<=J+w?(Z=(Q*F-1)*Math.pow(2,ce),J+=w):(Z=Q*Math.pow(2,w-1)*Math.pow(2,ce),J=0));8<=ce;B[A+k]=255&Z,k+=de,Z/=256,ce-=8);for(J=J<<ce|Z,$+=ce;0<$;B[A+k]=255&J,k+=de,J/=256,$-=8);B[A+k-de]|=128*G}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(q,g,M){(function(y,D,C,R,_,v,T,j,O){var B,Q,A;function F(){}(y=g.exports={}).nextTick=(Q=typeof window<"u"&&window.setImmediate,A=typeof window<"u"&&window.postMessage&&window.addEventListener,Q?function(ce){return window.setImmediate(ce)}:A?(B=[],window.addEventListener("message",function(ce){var K=ce.source;K!==window&&null!==K||"process-tick"!==ce.data||(ce.stopPropagation(),0<B.length&&B.shift()())},!0),function(ce){B.push(ce),window.postMessage("process-tick","*")}):function(ce){setTimeout(ce,0)}),y.title="browser",y.browser=!0,y.env={},y.argv=[],y.on=F,y.addListener=F,y.once=F,y.off=F,y.removeListener=F,y.removeAllListeners=F,y.emit=F,y.binding=function(ce){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(ce){throw new Error("process.chdir is not supported")}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:ee=>{var g,M,q=ee.exports={};function y(){throw new Error("setTimeout has not been defined")}function D(){throw new Error("clearTimeout has not been defined")}function C(F){if(g===setTimeout)return setTimeout(F,0);if((g===y||!g)&&setTimeout)return g=setTimeout,setTimeout(F,0);try{return g(F,0)}catch{try{return g.call(null,F,0)}catch{return g.call(this,F,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:y}catch{g=y}try{M="function"==typeof clearTimeout?clearTimeout:D}catch{M=D}}();var T,_=[],v=!1,j=-1;function O(){!v||!T||(v=!1,T.length?_=T.concat(_):j=-1,_.length&&B())}function B(){if(!v){var F=C(O);v=!0;for(var ce=_.length;ce;){for(T=_,_=[];++j<ce;)T&&T[j].run();j=-1,ce=_.length}T=null,v=!1,function R(F){if(M===clearTimeout)return clearTimeout(F);if((M===D||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(F);try{return M(F)}catch{try{return M.call(null,F)}catch{return M.call(this,F)}}}(F)}}function Q(F,ce){this.fun=F,this.array=ce}function A(){}q.nextTick=function(F){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var K=1;K<arguments.length;K++)ce[K-1]=arguments[K];_.push(new Q(F,ce)),1===_.length&&!v&&C(B)},Q.prototype.run=function(){this.fun.apply(null,this.array)},q.title="browser",q.browser=!0,q.env={},q.argv=[],q.version="",q.versions={},q.on=A,q.addListener=A,q.once=A,q.off=A,q.removeListener=A,q.removeAllListeners=A,q.emit=A,q.prependListener=A,q.prependOnceListener=A,q.listeners=function(F){return[]},q.binding=function(F){throw new Error("process.binding is not supported")},q.cwd=function(){return"/"},q.chdir=function(F){throw new Error("process.chdir is not supported")},q.umask=function(){return 0}},3410:ee=>{let q;ee.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(q||(q=Promise.resolve())).then(g).catch(M=>setTimeout(()=>{throw M},0))},1986:(ee,q,g)=>{ee.exports=g(7842)},5327:ee=>{"use strict";ee.exports=class aq{constructor(g,M=new Map,y=0){this.prefix=g,this._existing=M,this.counter=y}clone(){const{prefix:g,_existing:M,counter:y}=this;return new aq(g,new Map(M),y)}getId(g){const M=g&&this._existing.get(g);if(M)return M;const y=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,y),y}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(ee,q,g)=>{"use strict";var M=g(7156).default;g(8280);const y=self.crypto||self.msCrypto;ee.exports=class{constructor(C){if(!y||!y.subtle)throw new Error("crypto.subtle not found.");if("sha256"===C)this.algorithm={name:"SHA-256"};else{if("sha1"!==C)throw new Error(`Unsupported algorithm "${C}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(C){this._content+=C}digest(){var C=this;return M(function*(){const R=(new TextEncoder).encode(C._content),_=new Uint8Array(yield y.subtle.digest(C.algorithm,R));let v="";for(let T=0;T<_.length;++T)v+=_[T].toString(16).padStart(2,"0");return v})()}}},8003:ee=>{"use strict";const M="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",y="http://www.w3.org/2001/XMLSchema#string",D="NamedNode",C="BlankNode",R="Literal",_="DefaultGraph",v={};function T(A,F){return A.subject.termType===F.subject.termType&&A.object.termType===F.object.termType&&A.subject.value===F.subject.value&&A.predicate.value===F.predicate.value&&A.object.value===F.object.value&&(A.object.termType!==R||A.object.datatype.termType===F.object.datatype.termType&&A.object.language===F.object.language&&A.object.datatype.value===F.object.datatype.value)}(()=>{const A="(?:<([^:]+:[^>]*)>)",ce="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",K=ce+"0-9-\xb7\u0300-\u036f\u203f-\u2040",Z="(_:(?:["+ce+"0-9])(?:(?:["+K+".])*(?:["+K+"]))?)",k="[ \\t]+",de="[ \\t]*",G="(?:"+A+"|"+Z+")"+k,Ie=A+k,le="(?:"+A+"|"+Z+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+A+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+de,ve="(?:\\.|(?:(?:"+A+"|"+Z+")"+de+"\\.))";v.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,v.empty=new RegExp("^[ \\t]*$"),v.quad=new RegExp("^"+de+G+Ie+le+ve+de+"$")})(),ee.exports=class xC{static parse(F){const ce=[],K={},J=F.split(v.eoln);let Z=0;for(const $ of J){if(Z++,v.empty.test($))continue;const H=$.match(v.quad);if(null===H)throw new Error("N-Quads parse error on line "+Z+".");const w={subject:null,predicate:null,object:null,graph:null};if(w.subject=void 0!==H[1]?{termType:D,value:H[1]}:{termType:C,value:H[2]},w.predicate={termType:D,value:H[3]},void 0!==H[4]?w.object={termType:D,value:H[4]}:void 0!==H[5]?w.object={termType:C,value:H[5]}:(w.object={termType:R,value:void 0,datatype:{termType:D}},void 0!==H[7]?w.object.datatype.value=H[7]:void 0!==H[8]?(w.object.datatype.value=M,w.object.language=H[8]):w.object.datatype.value=y,w.object.value=H[6].replace(B,function(F,ce,K,J){if(ce)switch(ce){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(K)return String.fromCharCode(parseInt(K,16));if(J)throw new Error("Unsupported U escape")})),w.graph=void 0!==H[9]?{termType:D,value:H[9]}:void 0!==H[10]?{termType:C,value:H[10]}:{termType:_,value:""},w.graph.value in K){let P=!0;const k=K[w.graph.value];for(const de of k)if(T(de,w)){P=!1;break}P&&(k.push(w),ce.push(w))}else K[w.graph.value]=[w],ce.push(w)}return ce}static serialize(F){Array.isArray(F)||(F=xC.legacyDatasetToQuads(F));const ce=[];for(const K of F)ce.push(xC.serializeQuad(K));return ce.sort().join("")}static serializeQuadComponents(F,ce,K,J){let Z="";return Z+=F.termType===D?`<${F.value}>`:`${F.value}`,Z+=` <${ce.value}> `,K.termType===D?Z+=`<${K.value}>`:K.termType===C?Z+=K.value:(Z+=`"${function O(A){return A.replace(j,function(F){switch(F){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(K.value)}"`,K.datatype.value===M?K.language&&(Z+=`@${K.language}`):K.datatype.value!==y&&(Z+=`^^<${K.datatype.value}>`)),J.termType===D?Z+=` <${J.value}>`:J.termType===C&&(Z+=` ${J.value}`),Z+=" .\n",Z}static serializeQuad(F){return xC.serializeQuadComponents(F.subject,F.predicate,F.object,F.graph)}static legacyDatasetToQuads(F){const ce=[],K={"blank node":C,IRI:D,literal:R};for(const J in F)F[J].forEach($=>{const H={};for(const w in $){const P=$[w],k={termType:K[P.type],value:P.value};k.termType===R&&(k.datatype={termType:D},"datatype"in P&&(k.datatype.value=P.datatype),"language"in P?("datatype"in P||(k.datatype.value=M),k.language=P.language):"datatype"in P||(k.datatype.value=y)),H[w]=k}H.graph="@default"===J?{termType:_,value:""}:{termType:J.startsWith("_:")?C:D,value:J},ce.push(H)});return ce}};const j=/["\\\n\r]/g,B=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:ee=>{"use strict";ee.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let M=0;M<g.length;++M)this.dir.set(g[M],!0)}hasNext(){return!this.done}next(){const{current:g,dir:M}=this,y=g.slice();let D=null,C=0;const R=g.length;for(let _=0;_<R;++_){const v=g[_],T=M.get(v);(null===D||v>D)&&(T&&_>0&&v>g[_-1]||!T&&_<R-1&&v>g[_+1])&&(D=v,C=_)}if(null===D)this.done=!0;else{const _=M.get(D)?C-1:C+1;g[C]=g[_],g[_]=D;for(const v of g)v>D&&M.set(v,!M.get(v))}return y}}},7218:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(5327),D=g(7475),C=g(7790),R=g(8003);function _(v,T){return v.hash<T.hash?-1:v.hash>T.hash?1:0}ee.exports=class{constructor({createMessageDigest:T=(()=>new D("sha256")),canonicalIdMap:j=new Map,maxDeepIterations:O=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new y("_:c14n",j),this.createMessageDigest=T,this.maxDeepIterations=O,this.quads=null,this.deepIterations=null}main(T){var j=this;return M(function*(){j.deepIterations=new Map,j.quads=T;for(const K of T)j._addBlankNodeQuadInfo({quad:K,component:K.subject}),j._addBlankNodeQuadInfo({quad:K,component:K.object}),j._addBlankNodeQuadInfo({quad:K,component:K.graph});const O=new Map,B=[...j.blankNodeInfo.keys()];let Q=0;for(const K of B)++Q%100==0&&(yield j._yield()),yield j._hashAndTrackBlankNode({id:K,hashToBlankNodes:O});const A=[...O.keys()].sort(),F=[];for(const K of A){const J=O.get(K);J.length>1?F.push(J):j.canonicalIssuer.getId(J[0])}for(const K of F){const J=[];for(const Z of K){if(j.canonicalIssuer.hasId(Z))continue;const $=new y("_:b");$.getId(Z);const H=yield j.hashNDegreeQuads(Z,$);J.push(H)}J.sort(_);for(const Z of J){const $=Z.issuer.getOldIds();for(const H of $)j.canonicalIssuer.getId(H)}}const ce=[];for(const K of j.quads){const J=R.serializeQuadComponents(j._componentWithCanonicalId(K.subject),K.predicate,j._componentWithCanonicalId(K.object),j._componentWithCanonicalId(K.graph));ce.push(J)}return ce.sort(),ce.join("")})()}hashFirstDegreeQuads(T){var j=this;return M(function*(){const O=[],B=j.blankNodeInfo.get(T),Q=B.quads;for(const F of Q){const ce={subject:null,predicate:F.predicate,object:null,graph:null};ce.subject=j.modifyFirstDegreeComponent(T,F.subject,"subject"),ce.object=j.modifyFirstDegreeComponent(T,F.object,"object"),ce.graph=j.modifyFirstDegreeComponent(T,F.graph,"graph"),O.push(R.serializeQuad(ce))}O.sort();const A=j.createMessageDigest();for(const F of O)A.update(F);return B.hash=yield A.digest(),B.hash})()}hashRelatedBlankNode(T,j,O,B){var Q=this;return M(function*(){let A;A=Q.canonicalIssuer.hasId(T)?Q.canonicalIssuer.getId(T):O.hasId(T)?O.getId(T):Q.blankNodeInfo.get(T).hash;const F=Q.createMessageDigest();return F.update(B),"g"!==B&&F.update(Q.getRelatedPredicate(j)),F.update(A),F.digest()})()}hashNDegreeQuads(T,j){var O=this;return M(function*(){const B=O.deepIterations.get(T)||0;if(B>O.maxDeepIterations)throw new Error(`Maximum deep iterations (${O.maxDeepIterations}) exceeded.`);O.deepIterations.set(T,B+1);const Q=O.createMessageDigest(),A=yield O.createHashToRelated(T,j),F=[...A.keys()].sort();for(const ce of F){Q.update(ce);let J,K="";const Z=new C(A.get(ce));let $=0;for(;Z.hasNext();){const H=Z.next();++$%3==0&&(yield O._yield());let w=j.clone(),P="";const k=[];let de=!1;for(const G of H)if(O.canonicalIssuer.hasId(G)?P+=O.canonicalIssuer.getId(G):(w.hasId(G)||k.push(G),P+=w.getId(G)),0!==K.length&&P>K){de=!0;break}if(!de){for(const G of k){const Ie=yield O.hashNDegreeQuads(G,w);if(P+=w.getId(G),P+=`<${Ie.hash}>`,w=Ie.issuer,0!==K.length&&P>K){de=!0;break}}de||(0===K.length||P<K)&&(K=P,J=w)}}Q.update(K),j=J}return{hash:yield Q.digest(),issuer:j}})()}modifyFirstDegreeComponent(T,j){return"BlankNode"!==j.termType?j:{termType:"BlankNode",value:j.value===T?"_:a":"_:z"}}getRelatedPredicate(T){return`<${T.predicate.value}>`}createHashToRelated(T,j){var O=this;return M(function*(){const B=new Map,Q=O.blankNodeInfo.get(T).quads;let A=0;for(const F of Q)++A%100==0&&(yield O._yield()),yield Promise.all([O._addRelatedBlankNodeHash({quad:F,component:F.subject,position:"s",id:T,issuer:j,hashToRelated:B}),O._addRelatedBlankNodeHash({quad:F,component:F.object,position:"o",id:T,issuer:j,hashToRelated:B}),O._addRelatedBlankNodeHash({quad:F,component:F.graph,position:"g",id:T,issuer:j,hashToRelated:B})]);return B})()}_hashAndTrackBlankNode({id:T,hashToBlankNodes:j}){var O=this;return M(function*(){const B=yield O.hashFirstDegreeQuads(T),Q=j.get(B);Q?Q.push(T):j.set(B,[T])})()}_addBlankNodeQuadInfo({quad:T,component:j}){if("BlankNode"!==j.termType)return;const O=j.value,B=this.blankNodeInfo.get(O);B?B.quads.add(T):this.blankNodeInfo.set(O,{quads:new Set([T]),hash:null})}_addRelatedBlankNodeHash({quad:T,component:j,position:O,id:B,issuer:Q,hashToRelated:A}){var F=this;return M(function*(){if("BlankNode"!==j.termType||j.value===B)return;const ce=j.value,K=yield F.hashRelatedBlankNode(ce,T,Q,O),J=A.get(K);J?J.push(ce):A.set(K,[ce])})()}_componentWithCanonicalId(T){return"BlankNode"!==T.termType||T.value.startsWith(this.canonicalIssuer.prefix)?T:{termType:"BlankNode",value:this.canonicalIssuer.getId(T.value)}}_yield(){return M(function*(){return new Promise(T=>setImmediate(T))})()}}},9123:(ee,q,g)=>{"use strict";const M=g(5327),y=g(7475),D=g(7790),C=g(8003);function R(_,v){return _.hash<v.hash?-1:_.hash>v.hash?1:0}ee.exports=class{constructor({createMessageDigest:v=(()=>new y("sha256")),canonicalIdMap:T=new Map,maxDeepIterations:j=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new M("_:c14n",T),this.createMessageDigest=v,this.maxDeepIterations=j,this.quads=null,this.deepIterations=null}main(v){this.deepIterations=new Map,this.quads=v;for(const A of v)this._addBlankNodeQuadInfo({quad:A,component:A.subject}),this._addBlankNodeQuadInfo({quad:A,component:A.object}),this._addBlankNodeQuadInfo({quad:A,component:A.graph});const T=new Map,j=[...this.blankNodeInfo.keys()];for(const A of j)this._hashAndTrackBlankNode({id:A,hashToBlankNodes:T});const O=[...T.keys()].sort(),B=[];for(const A of O){const F=T.get(A);F.length>1?B.push(F):this.canonicalIssuer.getId(F[0])}for(const A of B){const F=[];for(const ce of A){if(this.canonicalIssuer.hasId(ce))continue;const K=new M("_:b");K.getId(ce);const J=this.hashNDegreeQuads(ce,K);F.push(J)}F.sort(R);for(const ce of F){const K=ce.issuer.getOldIds();for(const J of K)this.canonicalIssuer.getId(J)}}const Q=[];for(const A of this.quads){const F=C.serializeQuadComponents(this._componentWithCanonicalId({component:A.subject}),A.predicate,this._componentWithCanonicalId({component:A.object}),this._componentWithCanonicalId({component:A.graph}));Q.push(F)}return Q.sort(),Q.join("")}hashFirstDegreeQuads(v){const T=[],j=this.blankNodeInfo.get(v),O=j.quads;for(const Q of O){const A={subject:null,predicate:Q.predicate,object:null,graph:null};A.subject=this.modifyFirstDegreeComponent(v,Q.subject,"subject"),A.object=this.modifyFirstDegreeComponent(v,Q.object,"object"),A.graph=this.modifyFirstDegreeComponent(v,Q.graph,"graph"),T.push(C.serializeQuad(A))}T.sort();const B=this.createMessageDigest();for(const Q of T)B.update(Q);return j.hash=B.digest(),j.hash}hashRelatedBlankNode(v,T,j,O){let B;B=this.canonicalIssuer.hasId(v)?this.canonicalIssuer.getId(v):j.hasId(v)?j.getId(v):this.blankNodeInfo.get(v).hash;const Q=this.createMessageDigest();return Q.update(O),"g"!==O&&Q.update(this.getRelatedPredicate(T)),Q.update(B),Q.digest()}hashNDegreeQuads(v,T){const j=this.deepIterations.get(v)||0;if(j>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(v,j+1);const O=this.createMessageDigest(),B=this.createHashToRelated(v,T),Q=[...B.keys()].sort();for(const A of Q){O.update(A);let ce,F="";const K=new D(B.get(A));for(;K.hasNext();){const J=K.next();let Z=T.clone(),$="";const H=[];let w=!1;for(const P of J)if(this.canonicalIssuer.hasId(P)?$+=this.canonicalIssuer.getId(P):(Z.hasId(P)||H.push(P),$+=Z.getId(P)),0!==F.length&&$>F){w=!0;break}if(!w){for(const P of H){const k=this.hashNDegreeQuads(P,Z);if($+=Z.getId(P),$+=`<${k.hash}>`,Z=k.issuer,0!==F.length&&$>F){w=!0;break}}w||(0===F.length||$<F)&&(F=$,ce=Z)}}O.update(F),T=ce}return{hash:O.digest(),issuer:T}}modifyFirstDegreeComponent(v,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===v?"_:a":"_:z"}}getRelatedPredicate(v){return`<${v.predicate.value}>`}createHashToRelated(v,T){const j=new Map,O=this.blankNodeInfo.get(v).quads;for(const B of O)this._addRelatedBlankNodeHash({quad:B,component:B.subject,position:"s",id:v,issuer:T,hashToRelated:j}),this._addRelatedBlankNodeHash({quad:B,component:B.object,position:"o",id:v,issuer:T,hashToRelated:j}),this._addRelatedBlankNodeHash({quad:B,component:B.graph,position:"g",id:v,issuer:T,hashToRelated:j});return j}_hashAndTrackBlankNode({id:v,hashToBlankNodes:T}){const j=this.hashFirstDegreeQuads(v),O=T.get(j);O?O.push(v):T.set(j,[v])}_addBlankNodeQuadInfo({quad:v,component:T}){if("BlankNode"!==T.termType)return;const j=T.value,O=this.blankNodeInfo.get(j);O?O.quads.add(v):this.blankNodeInfo.set(j,{quads:new Set([v]),hash:null})}_addRelatedBlankNodeHash({quad:v,component:T,position:j,id:O,issuer:B,hashToRelated:Q}){if("BlankNode"!==T.termType||T.value===O)return;const A=T.value,F=this.hashRelatedBlankNode(A,v,B,j),ce=Q.get(F);ce?ce.push(A):Q.set(F,[A])}_componentWithCanonicalId({component:v}){return"BlankNode"!==v.termType||v.value.startsWith(this.canonicalIssuer.prefix)?v:{termType:"BlankNode",value:this.canonicalIssuer.getId(v.value)}}}},1326:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(7475),D=g(7218);ee.exports=class extends D{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new y("sha1")}modifyFirstDegreeComponent(R,_,v){return"BlankNode"!==_.termType?_:"graph"===v?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===R?"_:a":"_:z"}}getRelatedPredicate(R){return R.predicate.value}createHashToRelated(R,_){var v=this;return M(function*(){const T=new Map,j=v.blankNodeInfo.get(R).quads;let O=0;for(const B of j){let Q,A;if("BlankNode"===B.subject.termType&&B.subject.value!==R)A=B.subject.value,Q="p";else{if("BlankNode"!==B.object.termType||B.object.value===R)continue;A=B.object.value,Q="r"}++O%100==0&&(yield v._yield());const F=yield v.hashRelatedBlankNode(A,B,_,Q),ce=T.get(F);ce?ce.push(A):T.set(F,[A])}return T})()}}},9869:(ee,q,g)=>{"use strict";const M=g(7475),y=g(9123);ee.exports=class extends y{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new M("sha1")}modifyFirstDegreeComponent(C,R,_){return"BlankNode"!==R.termType?R:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:R.value===C?"_:a":"_:z"}}getRelatedPredicate(C){return C.predicate.value}createHashToRelated(C,R){const _=new Map,v=this.blankNodeInfo.get(C).quads;for(const T of v){let j,O;if("BlankNode"===T.subject.termType&&T.subject.value!==C)O=T.subject.value,j="p";else{if("BlankNode"!==T.object.termType||T.object.value===C)continue;O=T.object.value,j="r"}const B=this.hashRelatedBlankNode(O,T,R,j),Q=_.get(B);Q?Q.push(O):_.set(B,[O])}return _}}},7842:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(7218),D=g(1326),C=g(9123),R=g(9869);let _;try{_=g(7670)}catch{}function v(T){return Array.isArray(T)?T:q.NQuads.legacyDatasetToQuads(T)}q.NQuads=g(8003),q.IdentifierIssuer=g(5327),q._rdfCanonizeNative=function(T){return T&&(_=T),_},q.canonize=function(){var T=M(function*(j,O){const B=v(j);if(O.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(O.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((Q,A)=>_.canonize(B,O,(F,ce)=>F?A(F):Q(ce)))}if("URDNA2015"===O.algorithm)return new y(O).main(B);if("URGNA2012"===O.algorithm){if(O.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new D(O).main(B)}throw"algorithm"in O?new Error("Invalid RDF Dataset Canonicalization algorithm: "+O.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(j,O){return T.apply(this,arguments)}}(),q._canonizeSync=function(T,j){const O=v(T);if(j.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(j.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(O,j)}if("URDNA2015"===j.algorithm)return new C(j).main(O);if("URGNA2012"===j.algorithm){if(j.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new R(j).main(O)}throw"algorithm"in j?new Error("Invalid RDF Dataset Canonicalization algorithm: "+j.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(ee,q,g){"use strict";var M=this&&this.__createBinding||(Object.create?function(D,C,R,_){void 0===_&&(_=R),Object.defineProperty(D,_,{enumerable:!0,get:function(){return C[R]}})}:function(D,C,R,_){void 0===_&&(_=R),D[_]=C[R]}),y=this&&this.__exportStar||function(D,C){for(var R in D)"default"!==R&&!Object.prototype.hasOwnProperty.call(C,R)&&M(C,D,R)};Object.defineProperty(q,"__esModule",{value:!0}),y(g(4740),q),y(g(3613),q),y(g(9379),q),y(g(5565),q),y(g(3283),q),y(g(3905),q),y(g(2234),q)},4740:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.BlankNode=void 0,q.BlankNode=class g{constructor(y){this.termType="BlankNode",this.value=y}equals(y){return!!y&&"BlankNode"===y.termType&&y.value===this.value}}},3613:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DataFactory=void 0;const M=g(4740),y=g(9379),D=g(5565),C=g(3283),R=g(3905),_=g(2234);let v=0;q.DataFactory=class T{constructor(O){this.blankNodeCounter=0,this.blankNodePrefix=(O=O||{}).blankNodePrefix||`df_${v++}_`}namedNode(O){return new C.NamedNode(O)}blankNode(O){return new M.BlankNode(O||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(O,B){return new D.Literal(O,B)}variable(O){return new _.Variable(O)}defaultGraph(){return y.DefaultGraph.INSTANCE}quad(O,B,Q,A){return new R.Quad(O,B,Q,A||this.defaultGraph())}fromTerm(O){switch(O.termType){case"NamedNode":return this.namedNode(O.value);case"BlankNode":return this.blankNode(O.value);case"Literal":return O.language?this.literal(O.value,O.language):O.datatype.equals(D.Literal.XSD_STRING)?this.literal(O.value):this.literal(O.value,this.fromTerm(O.datatype));case"Variable":return this.variable(O.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(O.subject),this.fromTerm(O.predicate),this.fromTerm(O.object),this.fromTerm(O.graph))}}fromQuad(O){return this.fromTerm(O)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(y){return!!y&&"DefaultGraph"===y.termType}}q.DefaultGraph=g,g.INSTANCE=new g},5565:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Literal=void 0;const M=g(3283);class y{constructor(C,R){this.termType="Literal",this.value=C,"string"==typeof R?(this.language=R,this.datatype=y.RDF_LANGUAGE_STRING):R?(this.language="",this.datatype=R):(this.language="",this.datatype=y.XSD_STRING)}equals(C){return!!C&&"Literal"===C.termType&&C.value===this.value&&C.language===this.language&&this.datatype.equals(C.datatype)}}q.Literal=y,y.RDF_LANGUAGE_STRING=new M.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),y.XSD_STRING=new M.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.NamedNode=void 0,q.NamedNode=class g{constructor(y){this.termType="NamedNode",this.value=y}equals(y){return!!y&&"NamedNode"===y.termType&&y.value===this.value}}},3905:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Quad=void 0,q.Quad=class g{constructor(y,D,C,R){this.termType="Quad",this.value="",this.subject=y,this.predicate=D,this.object=C,this.graph=R}equals(y){return!!y&&("Quad"===y.termType||!y.termType)&&this.subject.equals(y.subject)&&this.predicate.equals(y.predicate)&&this.object.equals(y.object)&&this.graph.equals(y.graph)}}},2234:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Variable=void 0,q.Variable=class g{constructor(y){this.termType="Variable",this.value=y}equals(y){return!!y&&"Variable"===y.termType&&y.value===this.value}}},9689:function(ee,q,g){"use strict";var M=this&&this.__createBinding||(Object.create?function(A,F,ce,K){void 0===K&&(K=ce),Object.defineProperty(A,K,{enumerable:!0,get:function(){return F[ce]}})}:function(A,F,ce,K){void 0===K&&(K=ce),A[K]=F[ce]}),y=this&&this.__exportStar||function(A,F){for(var ce in A)"default"!==ce&&!Object.prototype.hasOwnProperty.call(F,ce)&&M(F,A,ce)};Object.defineProperty(q,"__esModule",{value:!0}),q.getSupportedJavaScriptPrimitives=q.getSupportedRdfDatatypes=q.getTermRaw=q.toRdf=q.fromRdf=void 0;const D=g(2633),C=g(2538),R=g(6374);y(g(2538),q),y(g(1815),q),y(g(6374),q);const _=new D.DataFactory,v=new R.Translator;function T(A,F){return v.fromRdf(A,F)}v.registerHandler(new C.TypeHandlerString,C.TypeHandlerString.TYPES.map(A=>_.namedNode(A)),["string"]),v.registerHandler(new C.TypeHandlerBoolean,[C.TypeHandlerBoolean.TYPE].map(A=>_.namedNode(A)),["boolean"]),v.registerHandler(new C.TypeHandlerNumberDouble,C.TypeHandlerNumberDouble.TYPES.map(A=>_.namedNode(A)),["number"]),v.registerHandler(new C.TypeHandlerNumberInteger,C.TypeHandlerNumberInteger.TYPES.map(A=>_.namedNode(A)),["number"]),v.registerHandler(new C.TypeHandlerDate,C.TypeHandlerDate.TYPES.map(A=>_.namedNode(A)),["object"]),q.fromRdf=T,q.toRdf=function j(A,F){return F&&"namedNode"in F&&(F={dataFactory:F}),(F=F||{})&&!F.dataFactory&&(F.dataFactory=_),v.toRdf(A,F)},q.getTermRaw=function O(A,F){return"Literal"===A.termType?T(A,F):A.value},q.getSupportedRdfDatatypes=function B(){return v.getSupportedRdfDatatypes()},q.getSupportedJavaScriptPrimitives=function Q(){return v.getSupportedJavaScriptPrimitives()}},1815:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0})},6374:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Translator=void 0,q.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(y){throw new Error(`Invalid RDF ${y.datatype.value} value: '${y.value}'`)}registerHandler(y,D,C){for(const R of D)this.supportedRdfDatatypes.push(R),this.fromRdfHandlers[R.value]=y;for(const R of C){let _=this.toRdfHandlers[R];_||(this.toRdfHandlers[R]=_=[]),_.push(y)}}fromRdf(y,D){const C=this.fromRdfHandlers[y.datatype.value];return C?C.fromRdf(y,D):y.value}toRdf(y,D){const C=this.toRdfHandlers[typeof y];if(C)for(const R of C){const _=R.toRdf(y,D);if(_)return _}throw new Error(`Invalid JavaScript value: '${y}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerBoolean=void 0;const M=g(6374);class y{fromRdf(C,R){switch(C.value){case"true":case"1":return!0;case"false":case"0":return!1}return R&&M.Translator.incorrectRdfDataType(C),!1}toRdf(C,{datatype:R,dataFactory:_}){return _.literal(C?"true":"false",R||_.namedNode(y.TYPE))}}q.TypeHandlerBoolean=y,y.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerDate=void 0;const M=g(6374);class y{fromRdf(C,R){switch(R&&!C.value.match(y.VALIDATORS[C.datatype.value.substr(33,C.datatype.value.length)])&&M.Translator.incorrectRdfDataType(C),C.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(C.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=C.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(C.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(C.value+"-01");default:return new Date(C.value)}}toRdf(C,{datatype:R,dataFactory:_}){if(R=R||_.namedNode(y.TYPES[0]),!(C instanceof Date))return null;const v=C;let T;switch(R.value){case"http://www.w3.org/2001/XMLSchema#gDay":T=String(v.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":T=v.getUTCMonth()+1+"-"+v.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":T=String(v.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":T=v.getUTCFullYear()+"-"+(v.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":T=v.toISOString().replace(/T.*$/,"");break;default:T=v.toISOString()}return _.literal(T,R)}}q.TypeHandlerDate=y,y.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],y.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerNumberDouble=void 0;const M=g(6374);class y{fromRdf(C,R){const _=parseFloat(C.value);return R&&isNaN(_)&&M.Translator.incorrectRdfDataType(C),_}toRdf(C,{datatype:R,dataFactory:_}){return R=R||_.namedNode(y.TYPES[0]),isNaN(C)?_.literal("NaN",R):isFinite(C)?C%1==0?null:_.literal(C.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),R):_.literal(C>0?"INF":"-INF",R)}}q.TypeHandlerNumberDouble=y,y.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerNumberInteger=void 0;const M=g(6374);class y{fromRdf(C,R){const _=parseInt(C.value,10);return R&&(isNaN(_)||C.value.indexOf(".")>=0)&&M.Translator.incorrectRdfDataType(C),_}toRdf(C,{datatype:R,dataFactory:_}){return _.literal(String(C),R||_.namedNode(C<=y.MAX_INT&&C>=y.MIN_INT?y.TYPES[0]:y.TYPES[1]))}}q.TypeHandlerNumberInteger=y,y.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],y.MAX_INT=2147483647,y.MIN_INT=-2147483648},2210:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerString=void 0;class g{fromRdf(y){return y.value}toRdf(y,{datatype:D,dataFactory:C}){return C.literal(y,D)}}q.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(ee,q,g){"use strict";var M=this&&this.__createBinding||(Object.create?function(D,C,R,_){void 0===_&&(_=R),Object.defineProperty(D,_,{enumerable:!0,get:function(){return C[R]}})}:function(D,C,R,_){void 0===_&&(_=R),D[_]=C[R]}),y=this&&this.__exportStar||function(D,C){for(var R in D)"default"!==R&&!Object.prototype.hasOwnProperty.call(C,R)&&M(C,D,R)};Object.defineProperty(q,"__esModule",{value:!0}),y(g(88),q),y(g(1600),q),y(g(1511),q),y(g(9199),q),y(g(2210),q)},2821:function(ee,q,g){"use strict";var M=this&&this.__createBinding||(Object.create?function(D,C,R,_){void 0===_&&(_=R),Object.defineProperty(D,_,{enumerable:!0,get:function(){return C[R]}})}:function(D,C,R,_){void 0===_&&(_=R),D[_]=C[R]}),y=this&&this.__exportStar||function(D,C){for(var R in D)"default"!==R&&!Object.prototype.hasOwnProperty.call(C,R)&&M(C,D,R)};Object.defineProperty(q,"__esModule",{value:!0}),y(g(5664),q)},758:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ParseError=void 0;class g extends Error{constructor(y,D){const C=y.saxStream._parser;super(y.trackPosition?`Line ${C.line+1} column ${C.column+1}: ${D}`:D)}}q.ParseError=g},5664:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ParseType=q.RdfXmlParser=void 0;const M=g(7054),y=g(9528),D=g(1793),C=g(758),R=g(2633);class _ extends D.Transform{constructor(j){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},j&&(Object.assign(this,j),this.options=j),this.dataFactory||(this.dataFactory=new R.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=y.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(j,O){const B={};let Q=!1;for(const F in j.attributes)F.startsWith("xmlns")&&(5===F.length?(Q=!0,B[""]=j.attributes[F]):":"===F.charAt(5)&&(Q=!0,B[F.substr(6)]=j.attributes[F]));const A=O&&O.ns?O.ns:[_.DEFAULT_NS];return Q?A.concat([B]):A}static expandPrefixedTerm(j,O,B){const Q=j.indexOf(":");let A,F;Q>=0?(A=j.substr(0,Q),F=j.substr(Q+1)):(A="",F=j);let ce=null,K=null;for(let J=O.length-1;J>=0;J--){const Z=O[J][A];if(Z){ce=Z;break}K||(K=O[J][""])}if(!ce){if(A&&"xmlns"!==A)throw new C.ParseError(B,`The prefix '${A}' in term '${j}' was not bound.`);ce=K||""}return{prefix:A,local:F,uri:ce}}static isValidIri(j){return _.IRI_REGEX.test(j)}import(j){const O=new D.PassThrough({readableObjectMode:!0});j.on("error",Q=>B.emit("error",Q)),j.on("data",Q=>O.push(Q)),j.on("end",()=>O.push(null));const B=O.pipe(new _(this.options));return B}_transform(j,O,B){try{this.saxStream.write(j,O)}catch(Q){return B(Q)}B()}newParseError(j){return new C.ParseError(this,j)}valueToUri(j,O){return this.uriToNamedNode(M.resolve(j,O.baseIRI))}uriToNamedNode(j){if(!_.isValidIri(j))throw this.newParseError(`Invalid URI: ${j}`);return this.dataFactory.namedNode(j)}validateNcname(j){if(!_.NCNAME_MATCHER.test(j))throw this.newParseError(`Not a valid NCName: ${j}`)}attachSaxListeners(){this.saxStream.on("error",j=>this.emit("error",j)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(j){const O=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let B=v.RESOURCE;if(O&&(O.hadChildren=!0,B=O.childrenParseType),O&&O.childrenStringTags){const A=j.name;let F="";for(const Z in j.attributes)F+=` ${Z}="${j.attributes[Z]}"`;O.childrenStringTags.push(`<${A}${F}>`);const J={childrenStringTags:O.childrenStringTags};return J.childrenStringEmitClosingTag=`</${A}>`,void this.activeTagStack.push(J)}const Q={};O?(Q.language=O.language,Q.baseIRI=O.baseIRI):Q.baseIRI=this.baseIRI,this.activeTagStack.push(Q),Q.ns=_.parseNamespace(j,O),B===v.RESOURCE?this.onTagResource(j,Q,O,!O):this.onTagProperty(j,Q,O)}onTagResource(j,O,B,Q){const A=_.expandPrefixedTerm(j.name,O.ns,this);O.childrenParseType=v.PROPERTY;let F=!0;if(A.uri===_.RDF){if(!Q&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(A.local)>=0)throw this.newParseError(`Illegal node element name: ${A.local}`);switch(A.local){case"RDF":O.childrenParseType=v.RESOURCE;case"Description":F=!1}}const ce=[],K=[];let J=null,Z=!1,$=!1,H=null;for(const w in j.attributes){const P=j.attributes[w],k=_.expandPrefixedTerm(w,O.ns,this);if(B&&k.uri===_.RDF)switch(k.local){case"about":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${P} and ${J} where found.`);J=P;continue;case"ID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${P} and ${J} where found.`);this.validateNcname(P),J="#"+P,Z=!0;continue;case"nodeID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${P} and ${J} where found.`);this.validateNcname(P),J=P,$=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":H=P;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(k.uri===_.XML){if("lang"===k.local){O.language=""===P?null:P.toLowerCase();continue}if("base"===k.local){O.baseIRI=M.resolve(P,O.baseIRI);continue}}"xml"!==k.prefix&&k.uri&&(ce.push(this.uriToNamedNode(k.uri+k.local)),K.push(P))}if(null!==J&&(O.subject=$?this.dataFactory.blankNode(J):this.valueToUri(J,O),Z&&this.claimNodeId(O.subject)),O.subject||(O.subject=this.dataFactory.blankNode()),F){const w=this.uriToNamedNode(A.uri+A.local);this.emitTriple(O.subject,this.dataFactory.namedNode(_.RDF+"type"),w,B?B.reifiedStatementId:null)}if(B){if(B.predicate)if(B.childrenCollectionSubject){const w=this.dataFactory.blankNode();this.emitTriple(B.childrenCollectionSubject,B.childrenCollectionPredicate,w,B.reifiedStatementId),this.emitTriple(w,this.dataFactory.namedNode(_.RDF+"first"),O.subject,O.reifiedStatementId),B.childrenCollectionSubject=w,B.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(B.subject,B.predicate,O.subject,B.reifiedStatementId);for(let w=0;w<B.predicateSubPredicates.length;w++)this.emitTriple(O.subject,B.predicateSubPredicates[w],B.predicateSubObjects[w],null);B.predicateSubPredicates=[],B.predicateSubObjects=[],B.predicateEmitted=!0}for(let w=0;w<ce.length;w++){const P=this.dataFactory.literal(K[w],O.datatype||O.language);this.emitTriple(O.subject,ce[w],P,B.reifiedStatementId)}H&&this.emitTriple(O.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(H),null)}}onTagProperty(j,O,B){const Q=_.expandPrefixedTerm(j.name,O.ns,this);if(O.childrenParseType=v.RESOURCE,O.subject=B.subject,Q.uri===_.RDF&&"li"===Q.local?(B.listItemCounter||(B.listItemCounter=1),O.predicate=this.uriToNamedNode(Q.uri+"_"+B.listItemCounter++)):O.predicate=this.uriToNamedNode(Q.uri+Q.local),Q.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(Q.local)>=0)throw this.newParseError(`Illegal property element name: ${Q.local}`);O.predicateSubPredicates=[],O.predicateSubObjects=[];let A=!1,F=!1,ce=null,K=!0;const J=[],Z=[];for(const $ in j.attributes){const H=j.attributes[$],w=_.expandPrefixedTerm($,O.ns,this);if(w.uri===_.RDF)switch(w.local){case"resource":if(ce)throw this.newParseError(`Found both rdf:resource (${H}) and rdf:nodeID (${ce}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${H})`);O.hadChildren=!0,ce=H,K=!1;continue;case"datatype":if(F)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${H}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${H})`);O.datatype=this.valueToUri(H,O);continue;case"nodeID":if(F)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${H}).`);if(O.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${H}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${H})`);this.validateNcname(H),O.hadChildren=!0,ce=H,K=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(F)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(O.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${O.datatype.value})`);if(ce)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ce})`);if("Resource"===H){A=!0,O.childrenParseType=v.PROPERTY;const P=this.dataFactory.blankNode();this.emitTriple(O.subject,O.predicate,P,O.reifiedStatementId),O.subject=P,O.predicate=null}else"Collection"===H?(A=!0,O.hadChildren=!0,O.childrenCollectionSubject=O.subject,O.childrenCollectionPredicate=O.predicate,K=!1):"Literal"===H&&(A=!0,O.childrenTagsToString=!0,O.childrenStringTags=[]);continue;case"ID":this.validateNcname(H),O.reifiedStatementId=this.valueToUri("#"+H,O),this.claimNodeId(O.reifiedStatementId);continue}else if(w.uri===_.XML&&"lang"===w.local){O.language=""===H?null:H.toLowerCase();continue}if("xml"!==w.prefix&&"xmlns"!==w.prefix&&w.uri){if(A||O.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${H}`);O.hadChildren=!0,F=!0,J.push(this.uriToNamedNode(w.uri+w.local)),Z.push(this.dataFactory.literal(H,O.datatype||O.language))}}if(null!==ce){const $=O.subject;O.subject=K?this.dataFactory.blankNode(ce):this.valueToUri(ce,O),this.emitTriple($,O.predicate,O.subject,O.reifiedStatementId);for(let H=0;H<J.length;H++)this.emitTriple(O.subject,J[H],Z[H],null);O.predicateEmitted=!0}else K&&(O.predicateSubPredicates=J,O.predicateSubObjects=Z,O.predicateEmitted=!1)}emitTriple(j,O,B,Q){this.push(this.dataFactory.quad(j,O,B,this.defaultGraph)),Q&&(this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"subject"),j,this.defaultGraph)),this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"predicate"),O,this.defaultGraph)),this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"object"),B,this.defaultGraph)))}claimNodeId(j){if(!this.allowDuplicateRdfIds){if(this.nodeIds[j.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${j.value}'.`);this.nodeIds[j.value]=!0}}onText(j){const O=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;O&&(O.childrenStringTags?O.childrenStringTags.push(j):O.predicate&&(O.text=j))}onCloseTag(){const j=this.activeTagStack.pop();if(j.childrenStringEmitClosingTag&&j.childrenStringTags.push(j.childrenStringEmitClosingTag),j.childrenTagsToString&&(j.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),j.text=j.childrenStringTags.join(""),j.hadChildren=!1),j.childrenCollectionSubject)this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),j.reifiedStatementId);else if(j.predicate)if(j.hadChildren||j.childrenParseType===v.PROPERTY){if(!j.predicateEmitted){const O=this.dataFactory.blankNode();this.emitTriple(j.subject,j.predicate,O,j.reifiedStatementId);for(let B=0;B<j.predicateSubPredicates.length;B++)this.emitTriple(O,j.predicateSubPredicates[B],j.predicateSubObjects[B],null)}}else this.emitTriple(j.subject,j.predicate,this.dataFactory.literal(j.text||"",j.datatype||j.language),j.reifiedStatementId)}onDoctype(j){j.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(O,B,Q)=>(this.saxStream._parser.ENTITIES[B]=Q,""))}}var v,T;q.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(T=v=q.ParseType||(q.ParseType={}))[T.RESOURCE=0]="RESOURCE",T[T.PROPERTY=1]="PROPERTY"},9987:(ee,q,g)=>{"use strict";const{SymbolDispose:M}=g(6305),{AbortError:y,codes:D}=g(4370),{isNodeStream:C,isWebStream:R,kControllerErrorFunction:_}=g(5428),v=g(4618),{ERR_INVALID_ARG_TYPE:T}=D;let j;ee.exports.addAbortSignal=function(Q,A){if(((B,Q)=>{if("object"!=typeof B||!("aborted"in B))throw new T("signal","AbortSignal",B)})(Q),!C(A)&&!R(A))throw new T("stream",["ReadableStream","WritableStream","Stream"],A);return ee.exports.addAbortSignalNoValidate(Q,A)},ee.exports.addAbortSignalNoValidate=function(B,Q){if("object"!=typeof B||!("aborted"in B))return Q;const A=C(Q)?()=>{Q.destroy(new y(void 0,{cause:B.reason}))}:()=>{Q[_](new y(void 0,{cause:B.reason}))};if(B.aborted)A();else{j=j||g(2656).addAbortListener;const F=j(B,A);v(Q,F[M])}return Q}},2960:(ee,q,g)=>{"use strict";const{StringPrototypeSlice:M,SymbolIterator:y,TypedArrayPrototypeSet:D,Uint8Array:C}=g(6305),{Buffer:R}=g(1657),{inspect:_}=g(2656);ee.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(T){const j={data:T,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length}unshift(T){const j={data:T,next:this.head};0===this.length&&(this.tail=j),this.head=j,++this.length}shift(){if(0===this.length)return;const T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}clear(){this.head=this.tail=null,this.length=0}join(T){if(0===this.length)return"";let j=this.head,O=""+j.data;for(;null!==(j=j.next);)O+=T+j.data;return O}concat(T){if(0===this.length)return R.alloc(0);const j=R.allocUnsafe(T>>>0);let O=this.head,B=0;for(;O;)D(j,O.data,B),B+=O.data.length,O=O.next;return j}consume(T,j){const O=this.head.data;if(T<O.length){const B=O.slice(0,T);return this.head.data=O.slice(T),B}return T===O.length?this.shift():j?this._getString(T):this._getBuffer(T)}first(){return this.head.data}*[y](){for(let T=this.head;T;T=T.next)yield T.data}_getString(T){let j="",O=this.head,B=0;do{const Q=O.data;if(!(T>Q.length)){T===Q.length?(j+=Q,++B,this.head=O.next?O.next:this.tail=null):(j+=M(Q,0,T),this.head=O,O.data=M(Q,T));break}j+=Q,T-=Q.length,++B}while(null!==(O=O.next));return this.length-=B,j}_getBuffer(T){const j=R.allocUnsafe(T),O=T;let B=this.head,Q=0;do{const A=B.data;if(!(T>A.length)){T===A.length?(D(j,A,O-T),++Q,this.head=B.next?B.next:this.tail=null):(D(j,new C(A.buffer,A.byteOffset,T),O-T),this.head=B,B.data=A.slice(T));break}D(j,A,O-T),T-=A.length,++Q}while(null!==(B=B.next));return this.length-=Q,j}[Symbol.for("nodejs.util.inspect.custom")](T,j){return _(this,{...j,depth:0,customInspect:!1})}}},7721:(ee,q,g)=>{"use strict";var M=g(7156).default;const{pipeline:y}=g(4514),D=g(5931),{destroyer:C}=g(5601),{isNodeStream:R,isReadable:_,isWritable:v,isWebStream:T,isTransformStream:j,isWritableStream:O,isReadableStream:B}=g(5428),{AbortError:Q,codes:{ERR_INVALID_ARG_VALUE:A,ERR_MISSING_ARGS:F}}=g(4370),ce=g(4618);ee.exports=function(...J){if(0===J.length)throw new F("streams");if(1===J.length)return D.from(J[0]);const Z=[...J];if("function"==typeof J[0]&&(J[0]=D.from(J[0])),"function"==typeof J[J.length-1]){const Oe=J.length-1;J[Oe]=D.from(J[Oe])}for(let Oe=0;Oe<J.length;++Oe)if(R(J[Oe])||T(J[Oe])){if(Oe<J.length-1&&!(_(J[Oe])||B(J[Oe])||j(J[Oe])))throw new A(`streams[${Oe}]`,Z[Oe],"must be readable");if(Oe>0&&!(v(J[Oe])||O(J[Oe])||j(J[Oe])))throw new A(`streams[${Oe}]`,Z[Oe],"must be writable")}let $,H,w,P,k;const G=J[0],Ie=y(J,function de(Oe){const Le=P;P=null,Le?Le(Oe):Oe?k.destroy(Oe):!ve&&!le&&k.destroy()}),le=!!(v(G)||O(G)||j(G)),ve=!!(_(Ie)||B(Ie)||j(Ie));if(k=new D({writableObjectMode:!(null==G||!G.writableObjectMode),readableObjectMode:!(null==Ie||!Ie.readableObjectMode),writable:le,readable:ve}),le){if(R(G))k._write=function(Le,Qe,qe){G.write(Le,Qe)?qe():$=qe},k._final=function(Le){G.end(),H=Le},G.on("drain",function(){if($){const Le=$;$=null,Le()}});else if(T(G)){const Qe=(j(G)?G.writable:G).getWriter();k._write=function(){var qe=M(function*(Te,He,Me){try{yield Qe.ready,Qe.write(Te).catch(()=>{}),Me()}catch(Ue){Me(Ue)}});return function(Te,He,Me){return qe.apply(this,arguments)}}(),k._final=function(){var qe=M(function*(Te){try{yield Qe.ready,Qe.close().catch(()=>{}),H=Te}catch(He){Te(He)}});return function(Te){return qe.apply(this,arguments)}}()}const Oe=j(Ie)?Ie.readable:Ie;ce(Oe,()=>{if(H){const Le=H;H=null,Le()}})}if(ve)if(R(Ie))Ie.on("readable",function(){if(w){const Oe=w;w=null,Oe()}}),Ie.on("end",function(){k.push(null)}),k._read=function(){for(;;){const Oe=Ie.read();if(null===Oe)return void(w=k._read);if(!k.push(Oe))return}};else if(T(Ie)){const Le=(j(Ie)?Ie.readable:Ie).getReader();k._read=M(function*(){for(;;)try{const{value:Qe,done:qe}=yield Le.read();if(!k.push(Qe))return;if(qe)return void k.push(null)}catch{return}})}return k._destroy=function(Oe,Le){!Oe&&null!==P&&(Oe=new Q),w=null,$=null,H=null,null===P?Le(Oe):(P=Le,R(Ie)&&C(Ie,Oe))},k}},5601:(ee,q,g)=>{"use strict";const M=g(42),{aggregateTwoErrors:y,codes:{ERR_MULTIPLE_CALLBACK:D},AbortError:C}=g(4370),{Symbol:R}=g(6305),{kIsDestroyed:_,isDestroyed:v,isFinished:T,isServerRequest:j}=g(5428),O=R("kDestroy"),B=R("kConstruct");function Q(le,ve,Oe){le&&(ve&&!ve.errored&&(ve.errored=le),Oe&&!Oe.errored&&(Oe.errored=le))}function F(le,ve,Oe){let Le=!1;function Qe(qe){if(Le)return;Le=!0;const Te=le._readableState,He=le._writableState;Q(qe,He,Te),He&&(He.closed=!0),Te&&(Te.closed=!0),"function"==typeof Oe&&Oe(qe),qe?M.nextTick(ce,le,qe):M.nextTick(K,le)}try{le._destroy(ve||null,Qe)}catch(qe){Qe(qe)}}function ce(le,ve){J(le,ve),K(le)}function K(le){const ve=le._readableState,Oe=le._writableState;Oe&&(Oe.closeEmitted=!0),ve&&(ve.closeEmitted=!0),(null!=Oe&&Oe.emitClose||null!=ve&&ve.emitClose)&&le.emit("close")}function J(le,ve){const Oe=le._readableState,Le=le._writableState;null!=Le&&Le.errorEmitted||null!=Oe&&Oe.errorEmitted||(Le&&(Le.errorEmitted=!0),Oe&&(Oe.errorEmitted=!0),le.emit("error",ve))}function $(le,ve,Oe){const Le=le._readableState,Qe=le._writableState;if(null!=Qe&&Qe.destroyed||null!=Le&&Le.destroyed)return this;null!=Le&&Le.autoDestroy||null!=Qe&&Qe.autoDestroy?le.destroy(ve):ve&&(Qe&&!Qe.errored&&(Qe.errored=ve),Le&&!Le.errored&&(Le.errored=ve),Oe?M.nextTick(J,le,ve):J(le,ve))}function w(le){let ve=!1;function Oe(Le){if(ve)return void $(le,Le??new D);ve=!0;const Qe=le._readableState,qe=le._writableState,Te=qe||Qe;Qe&&(Qe.constructed=!0),qe&&(qe.constructed=!0),Te.destroyed?le.emit(O,Le):Le?$(le,Le,!0):M.nextTick(P,le)}try{le._construct(Le=>{M.nextTick(Oe,Le)})}catch(Le){M.nextTick(Oe,Le)}}function P(le){le.emit(B)}function k(le){return le?.setHeader&&"function"==typeof le.abort}function de(le){le.emit("close")}function G(le,ve){le.emit("error",ve),M.nextTick(de,le)}ee.exports={construct:function H(le,ve){if("function"!=typeof le._construct)return;const Oe=le._readableState,Le=le._writableState;Oe&&(Oe.constructed=!1),Le&&(Le.constructed=!1),le.once(B,ve),!(le.listenerCount(B)>1)&&M.nextTick(w,le)},destroyer:function Ie(le,ve){!le||v(le)||(!ve&&!T(le)&&(ve=new C),j(le)?(le.socket=null,le.destroy(ve)):k(le)?le.abort():k(le.req)?le.req.abort():"function"==typeof le.destroy?le.destroy(ve):"function"==typeof le.close?le.close():ve?M.nextTick(G,le,ve):M.nextTick(de,le),le.destroyed||(le[_]=!0))},destroy:function A(le,ve){const Oe=this._readableState,Le=this._writableState,Qe=Le||Oe;return null!=Le&&Le.destroyed||null!=Oe&&Oe.destroyed?("function"==typeof ve&&ve(),this):(Q(le,Le,Oe),Le&&(Le.destroyed=!0),Oe&&(Oe.destroyed=!0),Qe.constructed?F(this,le,ve):this.once(O,function(qe){F(this,y(qe,le),ve)}),this)},undestroy:function Z(){const le=this._readableState,ve=this._writableState;le&&(le.constructed=!0,le.closed=!1,le.closeEmitted=!1,le.destroyed=!1,le.errored=null,le.errorEmitted=!1,le.reading=!1,le.ended=!1===le.readable,le.endEmitted=!1===le.readable),ve&&(ve.constructed=!0,ve.destroyed=!1,ve.closed=!1,ve.closeEmitted=!1,ve.errored=null,ve.errorEmitted=!1,ve.finalCalled=!1,ve.prefinished=!1,ve.ended=!1===ve.writable,ve.ending=!1===ve.writable,ve.finished=!1===ve.writable)},errorOrDestroy:$}},5931:(ee,q,g)=>{"use strict";const{ObjectDefineProperties:M,ObjectGetOwnPropertyDescriptor:y,ObjectKeys:D,ObjectSetPrototypeOf:C}=g(6305);ee.exports=v;const R=g(8383),_=g(9764);C(v.prototype,R.prototype),C(v,R);{const B=D(_.prototype);for(let Q=0;Q<B.length;Q++){const A=B[Q];v.prototype[A]||(v.prototype[A]=_.prototype[A])}}function v(B){if(!(this instanceof v))return new v(B);R.call(this,B),_.call(this,B),B?(this.allowHalfOpen=!1!==B.allowHalfOpen,!1===B.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===B.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let T,O;function j(){return void 0===T&&(T={}),T}M(v.prototype,{writable:{__proto__:null,...y(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...y(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...y(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...y(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...y(_.prototype,"writableLength")},writableFinished:{__proto__:null,...y(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...y(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...y(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...y(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(B){this._readableState&&this._writableState&&(this._readableState.destroyed=B,this._writableState.destroyed=B)}}}),v.fromWeb=function(B,Q){return j().newStreamDuplexFromReadableWritablePair(B,Q)},v.toWeb=function(B){return j().newReadableWritablePairFromDuplex(B)},v.from=function(B){return O||(O=g(8078)),O(B,"body")}},8078:(ee,q,g)=>{var M=g(7156).default,y=g(6737).default,D=g(8186).default;const C=g(42),R=g(1657),{isReadable:_,isWritable:v,isIterable:T,isNodeStream:j,isReadableNodeStream:O,isWritableNodeStream:B,isDuplexNodeStream:Q,isReadableStream:A,isWritableStream:F}=g(5428),ce=g(4618),{AbortError:K,codes:{ERR_INVALID_ARG_TYPE:J,ERR_INVALID_RETURN_VALUE:Z}}=g(4370),{destroyer:$}=g(5601),H=g(5931),w=g(8383),P=g(9764),{createDeferredPromise:k}=g(2656),de=g(55),G=globalThis.Blob||R.Blob,Ie=typeof G<"u"?function(Te){return Te instanceof G}:function(Te){return!1},le=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:ve}=g(6305);class Oe extends H{constructor(Te){super(Te),!1===Te?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Te?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Qe(qe){const Te=qe.readable&&"function"!=typeof qe.readable.read?w.wrap(qe.readable):qe.readable,He=qe.writable;let fe,Ce,nt,gt,Je,Me=!!_(Te),Ue=!!v(He);function ge(L){const I=gt;gt=null,I?I(L):L&&Je.destroy(L)}return Je=new Oe({readableObjectMode:!(null==Te||!Te.readableObjectMode),writableObjectMode:!(null==He||!He.writableObjectMode),readable:Me,writable:Ue}),Ue&&(ce(He,L=>{Ue=!1,L&&$(Te,L),ge(L)}),Je._write=function(L,I,ae){He.write(L,I)?ae():fe=ae},Je._final=function(L){He.end(),Ce=L},He.on("drain",function(){if(fe){const L=fe;fe=null,L()}}),He.on("finish",function(){if(Ce){const L=Ce;Ce=null,L()}})),Me&&(ce(Te,L=>{Me=!1,L&&$(Te,L),ge(L)}),Te.on("readable",function(){if(nt){const L=nt;nt=null,L()}}),Te.on("end",function(){Je.push(null)}),Je._read=function(){for(;;){const L=Te.read();if(null===L)return void(nt=Je._read);if(!Je.push(L))return}}),Je._destroy=function(L,I){!L&&null!==gt&&(L=new K),nt=null,fe=null,Ce=null,null===gt?I(L):(gt=I,$(He,L),$(Te,L))},Je}ee.exports=function qe(Te,He){if(Q(Te))return Te;if(O(Te))return Qe({readable:Te});if(B(Te))return Qe({writable:Te});if(j(Te))return Qe({writable:!1,readable:!1});if(A(Te))return Qe({readable:w.fromWeb(Te)});if(F(Te))return Qe({writable:P.fromWeb(Te)});if("function"==typeof Te){const{value:Ue,write:fe,final:Ce,destroy:nt}=function Le(qe){let{promise:Te,resolve:He}=k();const Me=new le,Ue=Me.signal;return{value:qe(D(function*(){for(;;){const Ce=Te;Te=null;const{chunk:nt,done:gt,cb:Je}=yield y(Ce);if(C.nextTick(Je),gt)return;if(Ue.aborted)throw new K(void 0,{cause:Ue.reason});({promise:Te,resolve:He}=k()),yield nt}})(),{signal:Ue}),write(Ce,nt,gt){const Je=He;He=null,Je({chunk:Ce,done:!1,cb:gt})},final(Ce){const nt=He;He=null,nt({done:!0,cb:Ce})},destroy(Ce,nt){Me.abort(),nt(Ce)}}}(Te);if(T(Ue))return de(Oe,Ue,{objectMode:!0,write:fe,final:Ce,destroy:nt});const gt=Ue?.then;if("function"==typeof gt){let Je;const ge=ve(gt,Ue,L=>{if(null!=L)throw new Z("nully","body",L)},L=>{$(Je,L)});return Je=new Oe({objectMode:!0,readable:!1,write:fe,final(L){Ce(M(function*(){try{yield ge,C.nextTick(L,null)}catch(I){C.nextTick(L,I)}}))},destroy:nt})}throw new Z("Iterable, AsyncIterable or AsyncFunction",He,Ue)}if(Ie(Te))return qe(Te.arrayBuffer());if(T(Te))return de(Oe,Te,{objectMode:!0,writable:!1});if(A(Te?.readable)&&F(Te?.writable))return Oe.fromWeb(Te);if("object"==typeof Te?.writable||"object"==typeof Te?.readable)return Qe({readable:null!=Te&&Te.readable?O(Te?.readable)?Te?.readable:qe(Te.readable):void 0,writable:null!=Te&&Te.writable?B(Te?.writable)?Te?.writable:qe(Te.writable):void 0});const Me=Te?.then;if("function"==typeof Me){let Ue;return ve(Me,Te,fe=>{null!=fe&&Ue.push(fe),Ue.push(null)},fe=>{$(Ue,fe)}),Ue=new Oe({objectMode:!0,writable:!1,read(){}})}throw new J(He,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Te)}},4618:(ee,q,g)=>{const M=g(42),{AbortError:y,codes:D}=g(4370),{ERR_INVALID_ARG_TYPE:C,ERR_STREAM_PREMATURE_CLOSE:R}=D,{kEmptyObject:_,once:v}=g(2656),{validateAbortSignal:T,validateFunction:j,validateObject:O,validateBoolean:B}=g(2120),{Promise:Q,PromisePrototypeThen:A,SymbolDispose:F}=g(6305),{isClosed:ce,isReadable:K,isReadableNodeStream:J,isReadableStream:Z,isReadableFinished:$,isReadableErrored:H,isWritable:w,isWritableNodeStream:P,isWritableStream:k,isWritableFinished:de,isWritableErrored:G,isNodeStream:Ie,willEmitClose:le,kIsClosedPromise:ve}=g(5428);let Oe;const Qe=()=>{};function qe(Me,Ue,fe){var Ce,nt;if(2===arguments.length?(fe=Ue,Ue=_):null==Ue?Ue=_:O(Ue,"options"),j(fe,"callback"),T(Ue.signal,"options.signal"),fe=v(fe),Z(Me)||k(Me))return function Te(Me,Ue,fe){let Ce=!1,nt=Qe;if(Ue.signal)if(nt=()=>{Ce=!0,fe.call(Me,new y(void 0,{cause:Ue.signal.reason}))},Ue.signal.aborted)M.nextTick(nt);else{Oe=Oe||g(2656).addAbortListener;const Je=Oe(Ue.signal,nt),ge=fe;fe=v((...L)=>{Je[F](),ge.apply(Me,L)})}const gt=(...Je)=>{Ce||M.nextTick(()=>fe.apply(Me,Je))};return A(Me[ve].promise,gt,gt),Qe}(Me,Ue,fe);if(!Ie(Me))throw new C("stream",["ReadableStream","WritableStream","Stream"],Me);const gt=null!==(Ce=Ue.readable)&&void 0!==Ce?Ce:J(Me),Je=null!==(nt=Ue.writable)&&void 0!==nt?nt:P(Me),ge=Me._writableState,L=Me._readableState,I=()=>{Me.writable||Ge()};let ae=le(Me)&&J(Me)===gt&&P(Me)===Je,ie=de(Me,!1);const Ge=()=>{ie=!0,Me.destroyed&&(ae=!1),(!ae||Me.readable&&!gt)&&(!gt||Ze)&&fe.call(Me)};let Ze=$(Me,!1);const pe=()=>{Ze=!0,Me.destroyed&&(ae=!1),(!ae||Me.writable&&!Je)&&(!Je||ie)&&fe.call(Me)},re=ye=>{fe.call(Me,ye)};let Y=ce(Me);const N=()=>{Y=!0;const ye=G(Me)||H(Me);return ye&&"boolean"!=typeof ye?fe.call(Me,ye):gt&&!Ze&&J(Me,!0)&&!$(Me,!1)?fe.call(Me,new R):!Je||ie||de(Me,!1)?void fe.call(Me):fe.call(Me,new R)},U=()=>{Y=!0;const ye=G(Me)||H(Me);if(ye&&"boolean"!=typeof ye)return fe.call(Me,ye);fe.call(Me)},me=()=>{Me.req.on("finish",Ge)};!function Le(Me){return Me.setHeader&&"function"==typeof Me.abort}(Me)?Je&&!ge&&(Me.on("end",I),Me.on("close",I)):(Me.on("complete",Ge),ae||Me.on("abort",N),Me.req?me():Me.on("request",me)),!ae&&"boolean"==typeof Me.aborted&&Me.on("aborted",N),Me.on("end",pe),Me.on("finish",Ge),!1!==Ue.error&&Me.on("error",re),Me.on("close",N),Y?M.nextTick(N):null!=ge&&ge.errorEmitted||null!=L&&L.errorEmitted?ae||M.nextTick(U):(!gt&&(!ae||K(Me))&&(ie||!1===w(Me))||!Je&&(!ae||w(Me))&&(Ze||!1===K(Me))||L&&Me.req&&Me.aborted)&&M.nextTick(U);const Ye=()=>{fe=Qe,Me.removeListener("aborted",N),Me.removeListener("complete",Ge),Me.removeListener("abort",N),Me.removeListener("request",me),Me.req&&Me.req.removeListener("finish",Ge),Me.removeListener("end",I),Me.removeListener("close",I),Me.removeListener("finish",Ge),Me.removeListener("end",pe),Me.removeListener("error",re),Me.removeListener("close",N)};if(Ue.signal&&!Y){const ye=()=>{const ze=fe;Ye(),ze.call(Me,new y(void 0,{cause:Ue.signal.reason}))};if(Ue.signal.aborted)M.nextTick(ye);else{Oe=Oe||g(2656).addAbortListener;const ze=Oe(Ue.signal,ye),st=fe;fe=v((...bt)=>{ze[F](),st.apply(Me,bt)})}}return Ye}ee.exports=qe,ee.exports.finished=function He(Me,Ue){var fe;let Ce=!1;return null===Ue&&(Ue=_),null!==(fe=Ue)&&void 0!==fe&&fe.cleanup&&(B(Ue.cleanup,"cleanup"),Ce=Ue.cleanup),new Q((nt,gt)=>{const Je=qe(Me,Ue,ge=>{Ce&&Je(),ge?gt(ge):nt()})})}},55:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(42),{PromisePrototypeThen:D,SymbolAsyncIterator:C,SymbolIterator:R}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:v,ERR_STREAM_NULL_VALUES:T}=g(4370).codes;ee.exports=function j(O,B,Q){let A,F;if("string"==typeof B||B instanceof _)return new O({objectMode:!0,...Q,read(){this.push(B),this.push(null)}});if(B&&B[C])F=!0,A=B[C]();else{if(!B||!B[R])throw new v("iterable",["Iterable"],B);F=!1,A=B[R]()}const ce=new O({objectMode:!0,highWaterMark:1,...Q});let K=!1;function Z(){return(Z=M(function*(w){if(null!=w&&"function"==typeof A.throw){const{value:de,done:G}=yield A.throw(w);if(yield de,G)return}if("function"==typeof A.return){const{value:de}=yield A.return();yield de}})).apply(this,arguments)}function H(){return(H=M(function*(){for(;;){try{const{value:w,done:P}=F?yield A.next():A.next();if(P)ce.push(null);else{const k=w&&"function"==typeof w.then?yield w:w;if(null===k)throw K=!1,new T;if(ce.push(k))continue;K=!1}}catch(w){ce.destroy(w)}break}})).apply(this,arguments)}return ce._read=function(){K||(K=!0,function $(){H.apply(this,arguments)}())},ce._destroy=function(w,P){D(function J(w){return Z.apply(this,arguments)}(w),()=>y.nextTick(P,w),k=>y.nextTick(P,k||w))},ce}},900:(ee,q,g)=>{"use strict";const{ArrayIsArray:M,ObjectSetPrototypeOf:y}=g(6305),{EventEmitter:D}=g(2016);function C(_){D.call(this,_)}function R(_,v,T){if("function"==typeof _.prependListener)return _.prependListener(v,T);_._events&&_._events[v]?M(_._events[v])?_._events[v].unshift(T):_._events[v]=[T,_._events[v]]:_.on(v,T)}y(C.prototype,D.prototype),y(C,D),C.prototype.pipe=function(_,v){const T=this;function j(K){_.writable&&!1===_.write(K)&&T.pause&&T.pause()}function O(){T.readable&&T.resume&&T.resume()}T.on("data",j),_.on("drain",O),!_._isStdio&&(!v||!1!==v.end)&&(T.on("end",Q),T.on("close",A));let B=!1;function Q(){B||(B=!0,_.end())}function A(){B||(B=!0,"function"==typeof _.destroy&&_.destroy())}function F(K){ce(),0===D.listenerCount(this,"error")&&this.emit("error",K)}function ce(){T.removeListener("data",j),_.removeListener("drain",O),T.removeListener("end",Q),T.removeListener("close",A),T.removeListener("error",F),_.removeListener("error",F),T.removeListener("end",ce),T.removeListener("close",ce),_.removeListener("close",ce)}return R(T,"error",F),R(_,"error",F),T.on("end",ce),T.on("close",ce),_.on("close",ce),_.emit("pipe",T),_},ee.exports={Stream:C,prependListener:R}},7624:(ee,q,g)=>{"use strict";var M=g(7156).default,y=g(8131).default,D=g(8237).default,C=g(6737).default,R=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:v,ERR_INVALID_ARG_TYPE:T,ERR_MISSING_ARGS:j,ERR_OUT_OF_RANGE:O},AbortError:B}=g(4370),{validateAbortSignal:Q,validateInteger:A,validateObject:F}=g(2120),ce=g(6305).Symbol("kWeak"),K=g(6305).Symbol("kResistStopPropagation"),{finished:J}=g(4618),Z=g(7721),{addAbortSignalNoValidate:$}=g(9987),{isWritable:H,isNodeStream:w}=g(5428),{deprecate:P}=g(2656),{ArrayPrototypePush:k,Boolean:de,MathFloor:G,Number:Ie,NumberIsNaN:le,Promise:ve,PromiseReject:Oe,PromiseResolve:Le,PromisePrototypeThen:Qe,Symbol:qe}=g(6305),Te=qe("kEmpty"),He=qe("kEof");function Ue(ye,ze){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);null!=ze&&F(ze,"options"),null!=ze?.signal&&Q(ze.signal,"options.signal");let st=1;null!=ze?.concurrency&&(st=G(ze.concurrency));let bt=st-1;return null!=ze?.highWaterMark&&(bt=G(ze.highWaterMark)),A(st,"options.concurrency",1),A(bt,"options.highWaterMark",0),bt+=st,function(){var At=R(function*(){const Xt=g(2656).AbortSignalAny([ze?.signal].filter(de)),_e=this,X=[],oe={signal:Xt};let Be,tt,dt=!1,Et=0;function ln(){dt=!0,Fn()}function Fn(){Et-=1,Gn()}function Gn(){tt&&!dt&&Et<st&&X.length<bt&&(tt(),tt=null)}function Bn(){return(Bn=M(function*(){try{var pr,Wi=!1,aa=!1;try{for(var jo,Bo=D(_e);Wi=!(jo=yield Bo.next()).done;Wi=!1){let Vi=jo.value;if(dt)return;if(Xt.aborted)throw new B;try{if(Vi=ye(Vi,oe),Vi===Te)continue;Vi=Le(Vi)}catch(Uo){Vi=Oe(Uo)}Et+=1,Qe(Vi,Fn,ln),X.push(Vi),Be&&(Be(),Be=null),!dt&&(X.length>=bt||Et>=st)&&(yield new ve(Uo=>{tt=Uo}))}}catch(Vi){aa=!0,pr=Vi}finally{try{Wi&&null!=Bo.return&&(yield Bo.return())}finally{if(aa)throw pr}}X.push(He)}catch(Vi){const Uo=Oe(Vi);Qe(Uo,Fn,ln),X.push(Uo)}finally{dt=!0,Be&&(Be(),Be=null)}})).apply(this,arguments)}!function kn(){Bn.apply(this,arguments)}();try{for(;;){for(;X.length>0;){const Wi=yield C(X[0]);if(Wi===He)return;if(Xt.aborted)throw new B;Wi!==Te&&(yield Wi),X.shift(),Gn()}yield C(new ve(Wi=>{Be=Wi}))}}finally{dt=!0,tt&&(tt(),tt=null)}});return function xt(){return At.apply(this,arguments)}}().call(this)}function Ce(ye){return nt.apply(this,arguments)}function nt(){return(nt=M(function*(ye,ze=void 0){var At,st=!1,bt=!1;try{for(var xt=D(ie.call(this,ye,ze));st=!(yield xt.next()).done;st=!1)return!0}catch(_e){bt=!0,At=_e}finally{try{st&&null!=xt.return&&(yield xt.return())}finally{if(bt)throw At}}return!1})).apply(this,arguments)}function Je(){return(Je=M(function*(ye,ze=void 0){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);return!(yield Ce.call(this,M(function*(...st){return!(yield ye(...st))}),ze))})).apply(this,arguments)}function L(){return(L=M(function*(ye,ze){var At,st=!1,bt=!1;try{for(var Xt,xt=D(ie.call(this,ye,ze));st=!(Xt=yield xt.next()).done;st=!1)return Xt.value}catch(_e){bt=!0,At=_e}finally{try{st&&null!=xt.return&&(yield xt.return())}finally{if(bt)throw At}}})).apply(this,arguments)}function ae(){return ae=M(function*(ye,ze){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);function bt(){return(bt=M(function*(oe,Be){return yield ye(oe,Be),Te})).apply(this,arguments)}var Xt,At=!1,xt=!1;try{for(var _e=D(Ue.call(this,function st(oe,Be){return bt.apply(this,arguments)},ze));At=!(yield _e.next()).done;At=!1);}catch(oe){xt=!0,Xt=oe}finally{try{At&&null!=_e.return&&(yield _e.return())}finally{if(xt)throw Xt}}}),ae.apply(this,arguments)}function ie(ye,ze){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);function bt(){return(bt=M(function*(At,xt){return(yield ye(At,xt))?At:Te})).apply(this,arguments)}return Ue.call(this,function st(At,xt){return bt.apply(this,arguments)},ze)}class Ge extends j{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function pe(){return pe=M(function*(ye,ze,st){var bt;if("function"!=typeof ye)throw new T("reducer",["Function","AsyncFunction"],ye);null!=st&&F(st,"options"),null!=st?.signal&&Q(st.signal,"options.signal");let At=arguments.length>1;if(null!=st&&null!==(bt=st.signal)&&void 0!==bt&&bt.aborted){const ln=new B(void 0,{cause:st.signal.reason});throw this.once("error",()=>{}),yield J(this.destroy(ln)),ln}const xt=new _,Xt=xt.signal;null!=st&&st.signal&&st.signal.addEventListener("abort",()=>xt.abort(),{once:!0,[ce]:this,[K]:!0});let _e=!1;try{var Be,X=!1,oe=!1;try{for(var dt,tt=D(this);X=!(dt=yield tt.next()).done;X=!1){const ln=dt.value;var Et;if(_e=!0,null!=st&&null!==(Et=st.signal)&&void 0!==Et&&Et.aborted)throw new B;At?ze=yield ye(ze,ln,{signal:Xt}):(ze=ln,At=!0)}}catch(ln){oe=!0,Be=ln}finally{try{X&&null!=tt.return&&(yield tt.return())}finally{if(oe)throw Be}}if(!_e&&!At)throw new Ge}finally{xt.abort()}return ze}),pe.apply(this,arguments)}function Y(){return(Y=M(function*(ye){null!=ye&&F(ye,"options"),null!=ye?.signal&&Q(ye.signal,"options.signal");const ze=[];var At,st=!1,bt=!1;try{for(var Xt,xt=D(this);st=!(Xt=yield xt.next()).done;st=!1){const X=Xt.value;var _e;if(null!=ye&&null!==(_e=ye.signal)&&void 0!==_e&&_e.aborted)throw new B(void 0,{cause:ye.signal.reason});k(ze,X)}}catch(X){bt=!0,At=X}finally{try{st&&null!=xt.return&&(yield xt.return())}finally{if(bt)throw At}}return ze})).apply(this,arguments)}function U(ye){if(ye=Ie(ye),le(ye))return 0;if(ye<0)throw new O("number",">= 0",ye);return ye}ee.exports.streamReturningOperators={asIndexedPairs:P(function fe(ye=void 0){return null!=ye&&F(ye,"options"),null!=ye?.signal&&Q(ye.signal,"options.signal"),function(){var ze=R(function*(){let bt=0;var Xt,At=!1,xt=!1;try{for(var X,_e=D(this);At=!(X=yield C(_e.next())).done;At=!1){const Be=X.value;var oe;if(null!=ye&&null!==(oe=ye.signal)&&void 0!==oe&&oe.aborted)throw new B({cause:ye.signal.reason});yield[bt++,Be]}}catch(Be){xt=!0,Xt=Be}finally{try{At&&null!=_e.return&&(yield C(_e.return()))}finally{if(xt)throw Xt}}});return function st(){return ze.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function me(ye,ze=void 0){return null!=ze&&F(ze,"options"),null!=ze?.signal&&Q(ze.signal,"options.signal"),ye=U(ye),function(){var st=R(function*(){var At;if(null!=ze&&null!==(At=ze.signal)&&void 0!==At&&At.aborted)throw new B;var _e,xt=!1,Xt=!1;try{for(var oe,X=D(this);xt=!(oe=yield C(X.next())).done;xt=!1){const tt=oe.value;var Be;if(null!=ze&&null!==(Be=ze.signal)&&void 0!==Be&&Be.aborted)throw new B;ye--<=0&&(yield tt)}}catch(tt){Xt=!0,_e=tt}finally{try{xt&&null!=X.return&&(yield C(X.return()))}finally{if(Xt)throw _e}}});return function bt(){return st.apply(this,arguments)}}().call(this)},filter:ie,flatMap:function N(ye,ze){const st=Ue.call(this,ye,ze);return function(){var bt=R(function*(){var _e,xt=!1,Xt=!1;try{for(var oe,X=D(st);xt=!(oe=yield C(X.next())).done;xt=!1){const Be=oe.value;yield*y(D(Be),C)}}catch(Be){Xt=!0,_e=Be}finally{try{xt&&null!=X.return&&(yield C(X.return()))}finally{if(Xt)throw _e}}});return function At(){return bt.apply(this,arguments)}}().call(this)},map:Ue,take:function Ye(ye,ze=void 0){return null!=ze&&F(ze,"options"),null!=ze?.signal&&Q(ze.signal,"options.signal"),ye=U(ye),function(){var st=R(function*(){var At;if(null!=ze&&null!==(At=ze.signal)&&void 0!==At&&At.aborted)throw new B;var _e,xt=!1,Xt=!1;try{for(var oe,X=D(this);xt=!(oe=yield C(X.next())).done;xt=!1){const tt=oe.value;var Be;if(null!=ze&&null!==(Be=ze.signal)&&void 0!==Be&&Be.aborted)throw new B;if(ye-- >0&&(yield tt),ye<=0)return}}catch(tt){Xt=!0,_e=tt}finally{try{xt&&null!=X.return&&(yield C(X.return()))}finally{if(Xt)throw _e}}});return function bt(){return st.apply(this,arguments)}}().call(this)},compose:function Me(ye,ze){if(null!=ze&&F(ze,"options"),null!=ze?.signal&&Q(ze.signal,"options.signal"),w(ye)&&!H(ye))throw new v("stream",ye,"must be writable");const st=Z(this,ye);return null!=ze&&ze.signal&&$(ze.signal,st),st}},ee.exports.promiseReturningOperators={every:function gt(ye){return Je.apply(this,arguments)},forEach:function I(ye,ze){return ae.apply(this,arguments)},reduce:function Ze(ye,ze,st){return pe.apply(this,arguments)},toArray:function re(ye){return Y.apply(this,arguments)},some:Ce,find:function ge(ye,ze){return L.apply(this,arguments)}}},6973:(ee,q,g)=>{"use strict";const{ObjectSetPrototypeOf:M}=g(6305);ee.exports=D;const y=g(123);function D(C){if(!(this instanceof D))return new D(C);y.call(this,C)}M(D.prototype,y.prototype),M(D,y),D.prototype._transform=function(C,R,_){_(null,C)}},4514:(ee,q,g)=>{var M=g(7156).default,y=g(8186).default,D=g(6737).default,C=g(8131).default,R=g(8237).default;const _=g(42),{ArrayIsArray:v,Promise:T,SymbolAsyncIterator:j,SymbolDispose:O}=g(6305),B=g(4618),{once:Q}=g(2656),A=g(5601),F=g(5931),{aggregateTwoErrors:ce,codes:{ERR_INVALID_ARG_TYPE:K,ERR_INVALID_RETURN_VALUE:J,ERR_MISSING_ARGS:Z,ERR_STREAM_DESTROYED:$,ERR_STREAM_PREMATURE_CLOSE:H},AbortError:w}=g(4370),{validateFunction:P,validateAbortSignal:k}=g(2120),{isIterable:de,isReadable:G,isReadableNodeStream:Ie,isNodeStream:le,isTransformStream:ve,isWebStream:Oe,isReadableStream:Le,isReadableFinished:Qe}=g(5428),qe=globalThis.AbortController||g(3982).AbortController;let Te,He,Me;function Ue(Ze,pe,re){let Y=!1;return Ze.on("close",()=>{Y=!0}),{destroy:U=>{Y||(Y=!0,A.destroyer(Ze,U||new $("pipe")))},cleanup:B(Ze,{readable:pe,writable:re},U=>{Y=!U})}}function Ce(Ze){if(de(Ze))return Ze;if(Ie(Ze))return function nt(Ze){return gt.apply(this,arguments)}(Ze);throw new K("val",["Readable","Iterable","AsyncIterable"],Ze)}function gt(){return(gt=y(function*(Ze){He||(He=g(8383)),yield*C(R(He.prototype[j].call(Ze)),D)})).apply(this,arguments)}function Je(Ze,pe,re,Y){return ge.apply(this,arguments)}function ge(){return(ge=M(function*(Ze,pe,re,{end:Y}){let N,U=null;const me=Xt=>{if(Xt&&(N=Xt),U){const _e=U;U=null,_e()}},Ye=()=>new T((Xt,_e)=>{N?_e(N):U=()=>{N?_e(N):Xt()}});pe.on("drain",me);const ye=B(pe,{readable:!1},me);try{pe.writableNeedDrain&&(yield Ye());var bt,ze=!1,st=!1;try{for(var xt,At=R(Ze);ze=!(xt=yield At.next()).done;ze=!1)pe.write(xt.value)||(yield Ye())}catch(Xt){st=!0,bt=Xt}finally{try{ze&&null!=At.return&&(yield At.return())}finally{if(st)throw bt}}Y&&(pe.end(),yield Ye()),re()}catch(Xt){re(N!==Xt?ce(N,Xt):Xt)}finally{ye(),pe.off("drain",me)}})).apply(this,arguments)}function L(Ze,pe,re,Y){return I.apply(this,arguments)}function I(){return(I=M(function*(Ze,pe,re,{end:Y}){ve(pe)&&(pe=pe.writable);const N=pe.getWriter();try{var Ye,U=!1,me=!1;try{for(var ze,ye=R(Ze);U=!(ze=yield ye.next()).done;U=!1){const st=ze.value;yield N.ready,N.write(st).catch(()=>{})}}catch(st){me=!0,Ye=st}finally{try{U&&null!=ye.return&&(yield ye.return())}finally{if(me)throw Ye}}yield N.ready,Y&&(yield N.close()),re()}catch(st){try{yield N.abort(st),re(st)}catch(bt){re(bt)}}})).apply(this,arguments)}function ie(Ze,pe,re){if(1===Ze.length&&v(Ze[0])&&(Ze=Ze[0]),Ze.length<2)throw new Z("streams");const Y=new qe,N=Y.signal,U=re?.signal,me=[];function Ye(){Xt(new w)}let ye,ze,st;k(U,"options.signal"),Me=Me||g(2656).addAbortListener,U&&(ye=Me(U,Ye));const bt=[];let _e,At=0;function xt(tt){Xt(tt,0==--At)}function Xt(tt,dt){var Et;if(tt&&(!ze||"ERR_STREAM_PREMATURE_CLOSE"===ze.code)&&(ze=tt),ze||dt){for(;bt.length;)bt.shift()(ze);null===(Et=ye)||void 0===Et||Et[O](),Y.abort(),dt&&(ze||me.forEach(ln=>ln()),_.nextTick(pe,ze,st))}}for(let tt=0;tt<Ze.length;tt++){const dt=Ze[tt],Et=tt<Ze.length-1,ln=tt>0,Fn=Et||!1!==re?.end,Gn=tt===Ze.length-1;if(le(dt)){let kn=function(Bn){Bn&&"AbortError"!==Bn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==Bn.code&&xt(Bn)};if(Fn){const{destroy:Bn,cleanup:Wi}=Ue(dt,Et,ln);bt.push(Bn),G(dt)&&Gn&&me.push(Wi)}dt.on("error",kn),G(dt)&&Gn&&me.push(()=>{dt.removeListener("error",kn)})}if(0===tt)if("function"==typeof dt){if(_e=dt({signal:N}),!de(_e))throw new J("Iterable, AsyncIterable or Stream","source",_e)}else _e=de(dt)||Ie(dt)||ve(dt)?dt:F.from(dt);else if("function"==typeof dt){var X;if(_e=ve(_e)?Ce(null===(X=_e)||void 0===X?void 0:X.readable):Ce(_e),_e=dt(_e,{signal:N}),Et){if(!de(_e,!0))throw new J("AsyncIterable",`transform[${tt-1}]`,_e)}else{var oe;Te||(Te=g(6973));const kn=new Te({objectMode:!0}),Bn=null===(oe=_e)||void 0===oe?void 0:oe.then;if("function"==typeof Bn)At++,Bn.call(_e,pr=>{st=pr,null!=pr&&kn.write(pr),Fn&&kn.end(),_.nextTick(xt)},pr=>{kn.destroy(pr),_.nextTick(xt,pr)});else if(de(_e,!0))At++,Je(_e,kn,xt,{end:Fn});else{if(!Le(_e)&&!ve(_e))throw new J("AsyncIterable or Promise","destination",_e);At++,Je(_e.readable||_e,kn,xt,{end:Fn})}_e=kn;const{destroy:Wi,cleanup:aa}=Ue(_e,!1,!0);bt.push(Wi),Gn&&me.push(aa)}}else if(le(dt)){if(Ie(_e)){At+=2;const kn=Ge(_e,dt,xt,{end:Fn});G(dt)&&Gn&&me.push(kn)}else if(ve(_e)||Le(_e))At++,Je(_e.readable||_e,dt,xt,{end:Fn});else{if(!de(_e))throw new K("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_e);At++,Je(_e,dt,xt,{end:Fn})}_e=dt}else if(Oe(dt)){if(Ie(_e))At++,L(Ce(_e),dt,xt,{end:Fn});else if(Le(_e)||de(_e))At++,L(_e,dt,xt,{end:Fn});else{if(!ve(_e))throw new K("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_e);At++,L(_e.readable,dt,xt,{end:Fn})}_e=dt}else _e=F.from(dt)}return(null!=N&&N.aborted||null!=U&&U.aborted)&&_.nextTick(Ye),_e}function Ge(Ze,pe,re,{end:Y}){let N=!1;if(pe.on("close",()=>{N||re(new H)}),Ze.pipe(pe,{end:!1}),Y){let me=function(){N=!0,pe.end()};Qe(Ze)?_.nextTick(me):Ze.once("end",me)}else re();return B(Ze,{readable:!0,writable:!1},me=>{const Ye=Ze._readableState;me&&"ERR_STREAM_PREMATURE_CLOSE"===me.code&&Ye&&Ye.ended&&!Ye.errored&&!Ye.errorEmitted?Ze.once("end",re).once("error",re):re(me)}),B(pe,{readable:!1,writable:!0},re)}ee.exports={pipelineImpl:ie,pipeline:function ae(...Ze){return ie(Ze,Q(function fe(Ze){return P(Ze[Ze.length-1],"streams[stream.length - 1]"),Ze.pop()}(Ze)))}}},8383:(ee,q,g)=>{var M=g(6737).default,y=g(8186).default;const D=g(42),{ArrayPrototypeIndexOf:C,NumberIsInteger:R,NumberIsNaN:_,NumberParseInt:v,ObjectDefineProperties:T,ObjectKeys:j,ObjectSetPrototypeOf:O,Promise:B,SafeSet:Q,SymbolAsyncDispose:A,SymbolAsyncIterator:F,Symbol:ce}=g(6305);ee.exports=xt,xt.ReadableState=At;const{EventEmitter:K}=g(2016),{Stream:J,prependListener:Z}=g(900),{Buffer:$}=g(1657),{addAbortSignal:H}=g(9987),w=g(4618);let P=g(2656).debuglog("stream",$e=>{P=$e});const k=g(2960),de=g(5601),{getHighWaterMark:G,getDefaultHighWaterMark:Ie}=g(8782),{aggregateTwoErrors:le,codes:{ERR_INVALID_ARG_TYPE:ve,ERR_METHOD_NOT_IMPLEMENTED:Oe,ERR_OUT_OF_RANGE:Le,ERR_STREAM_PUSH_AFTER_EOF:Qe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:qe},AbortError:Te}=g(4370),{validateObject:He}=g(2120),Me=ce("kPaused"),{StringDecoder:Ue}=g(2024),fe=g(55);O(xt.prototype,J.prototype),O(xt,J);const Ce=()=>{},{errorOrDestroy:nt}=de,gt=1,I=16,ae=32,ie=64,Y=2048,N=4096,ye=65536;function bt($e){return{enumerable:!1,get(){return 0!=(this.state&$e)},set(Xe){Xe?this.state|=$e:this.state&=~$e}}}function At($e,Xe,Wt){"boolean"!=typeof Wt&&(Wt=Xe instanceof g(5931)),this.state=Y|N|I|ae,$e&&$e.objectMode&&(this.state|=gt),Wt&&$e&&$e.readableObjectMode&&(this.state|=gt),this.highWaterMark=$e?G(this,$e,"readableHighWaterMark",Wt):Ie(!1),this.buffer=new k,this.length=0,this.pipes=[],this.flowing=null,this[Me]=null,$e&&!1===$e.emitClose&&(this.state&=~Y),$e&&!1===$e.autoDestroy&&(this.state&=~N),this.errored=null,this.defaultEncoding=$e&&$e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,$e&&$e.encoding&&(this.decoder=new Ue($e.encoding),this.encoding=$e.encoding)}function xt($e){if(!(this instanceof xt))return new xt($e);const Xe=this instanceof g(5931);this._readableState=new At($e,this,Xe),$e&&("function"==typeof $e.read&&(this._read=$e.read),"function"==typeof $e.destroy&&(this._destroy=$e.destroy),"function"==typeof $e.construct&&(this._construct=$e.construct),$e.signal&&!Xe&&H($e.signal,this)),J.call(this,$e),de.construct(this,()=>{this._readableState.needReadable&&ln(this,this._readableState)})}function Xt($e,Xe,Wt,$t){P("readableAddChunk",Xe);const dn=$e._readableState;let mr;if(dn.state&gt||("string"==typeof Xe?dn.encoding!==(Wt=Wt||dn.defaultEncoding)&&($t&&dn.encoding?Xe=$.from(Xe,Wt).toString(dn.encoding):(Xe=$.from(Xe,Wt),Wt="")):Xe instanceof $?Wt="":J._isUint8Array(Xe)?(Xe=J._uint8ArrayToBuffer(Xe),Wt=""):null!=Xe&&(mr=new ve("chunk",["string","Buffer","Uint8Array"],Xe))),mr)nt($e,mr);else if(null===Xe)dn.state&=-9,function tt($e,Xe){if(P("onEofChunk"),!Xe.ended){if(Xe.decoder){const Wt=Xe.decoder.end();Wt&&Wt.length&&(Xe.buffer.push(Wt),Xe.length+=Xe.objectMode?1:Wt.length)}Xe.ended=!0,Xe.sync?dt($e):(Xe.needReadable=!1,Xe.emittedReadable=!0,Et($e))}}($e,dn);else if(dn.state&gt||Xe&&Xe.length>0)if($t)if(4&dn.state)nt($e,new qe);else{if(dn.destroyed||dn.errored)return!1;_e($e,dn,Xe,!0)}else if(dn.ended)nt($e,new Qe);else{if(dn.destroyed||dn.errored)return!1;dn.state&=-9,dn.decoder&&!Wt?(Xe=dn.decoder.write(Xe),dn.objectMode||0!==Xe.length?_e($e,dn,Xe,!1):ln($e,dn)):_e($e,dn,Xe,!1)}else $t||(dn.state&=-9,ln($e,dn));return!dn.ended&&(dn.length<dn.highWaterMark||0===dn.length)}function _e($e,Xe,Wt,$t){Xe.flowing&&0===Xe.length&&!Xe.sync&&$e.listenerCount("data")>0?(Xe.state&ye?Xe.awaitDrainWriters.clear():Xe.awaitDrainWriters=null,Xe.dataEmitted=!0,$e.emit("data",Wt)):(Xe.length+=Xe.objectMode?1:Wt.length,$t?Xe.buffer.unshift(Wt):Xe.buffer.push(Wt),Xe.state&ie&&dt($e)),ln($e,Xe)}function Be($e,Xe){return $e<=0||0===Xe.length&&Xe.ended?0:Xe.state&gt?1:_($e)?Xe.flowing&&Xe.length?Xe.buffer.first().length:Xe.length:$e<=Xe.length?$e:Xe.ended?Xe.length:0}function dt($e){const Xe=$e._readableState;P("emitReadable",Xe.needReadable,Xe.emittedReadable),Xe.needReadable=!1,Xe.emittedReadable||(P("emitReadable",Xe.flowing),Xe.emittedReadable=!0,D.nextTick(Et,$e))}function Et($e){const Xe=$e._readableState;P("emitReadable_",Xe.destroyed,Xe.length,Xe.ended),!Xe.destroyed&&!Xe.errored&&(Xe.length||Xe.ended)&&($e.emit("readable"),Xe.emittedReadable=!1),Xe.needReadable=!Xe.flowing&&!Xe.ended&&Xe.length<=Xe.highWaterMark,pr($e)}function ln($e,Xe){!Xe.readingMore&&Xe.constructed&&(Xe.readingMore=!0,D.nextTick(Fn,$e,Xe))}function Fn($e,Xe){for(;!Xe.reading&&!Xe.ended&&(Xe.length<Xe.highWaterMark||Xe.flowing&&0===Xe.length);){const Wt=Xe.length;if(P("maybeReadMore read 0"),$e.read(0),Wt===Xe.length)break}Xe.readingMore=!1}function kn($e){const Xe=$e._readableState;Xe.readableListening=$e.listenerCount("readable")>0,Xe.resumeScheduled&&!1===Xe[Me]?Xe.flowing=!0:$e.listenerCount("data")>0?$e.resume():Xe.readableListening||(Xe.flowing=null)}function Bn($e){P("readable nexttick read 0"),$e.read(0)}function aa($e,Xe){P("resume",Xe.reading),Xe.reading||$e.read(0),Xe.resumeScheduled=!1,$e.emit("resume"),pr($e),Xe.flowing&&!Xe.reading&&$e.read(0)}function pr($e){const Xe=$e._readableState;for(P("flow",Xe.flowing);Xe.flowing&&null!==$e.read(););}function Bo($e,Xe){"function"!=typeof $e.read&&($e=xt.wrap($e,{objectMode:!0}));const Wt=function jo($e,Xe){return Vi.apply(this,arguments)}($e,Xe);return Wt.stream=$e,Wt}function Vi(){return(Vi=y(function*($e,Xe){let dn,Wt=Ce;function $t(Yt){this===$e?(Wt(),Wt=Ce):Wt=Yt}$e.on("readable",$t);const mr=w($e,{writable:!1},Yt=>{dn=Yt?le(dn,Yt):null,Wt(),Wt=Ce});try{for(;;){const Yt=$e.destroyed?null:$e.read();if(null!==Yt)yield Yt;else{if(dn)throw dn;if(null===dn)return;yield M(new B($t))}}}catch(Yt){throw dn=le(dn,Yt),dn}finally{!dn&&!1===Xe?.destroyOnReturn||void 0!==dn&&!$e._readableState.autoDestroy?($e.off("readable",$t),mr()):de.destroyer($e,null)}})).apply(this,arguments)}function Uo($e,Xe){if(0===Xe.length)return null;let Wt;return Xe.objectMode?Wt=Xe.buffer.shift():!$e||$e>=Xe.length?(Wt=Xe.decoder?Xe.buffer.join(""):1===Xe.buffer.length?Xe.buffer.first():Xe.buffer.concat(Xe.length),Xe.buffer.clear()):Wt=Xe.buffer.consume($e,Xe.decoder),Wt}function js($e){const Xe=$e._readableState;P("endReadable",Xe.endEmitted),Xe.endEmitted||(Xe.ended=!0,D.nextTick(al,Xe,$e))}function al($e,Xe){if(P("endReadableNT",$e.endEmitted,$e.length),!$e.errored&&!$e.closeEmitted&&!$e.endEmitted&&0===$e.length)if($e.endEmitted=!0,Xe.emit("end"),Xe.writable&&!1===Xe.allowHalfOpen)D.nextTick(Za,Xe);else if($e.autoDestroy){const Wt=Xe._writableState;(!Wt||Wt.autoDestroy&&(Wt.finished||!1===Wt.writable))&&Xe.destroy()}}function Za($e){$e.writable&&!$e.writableEnded&&!$e.destroyed&&$e.end()}let Vo;function cl(){return void 0===Vo&&(Vo={}),Vo}T(At.prototype,{objectMode:bt(gt),ended:bt(2),endEmitted:bt(4),reading:bt(8),constructed:bt(I),sync:bt(ae),needReadable:bt(ie),emittedReadable:bt(128),readableListening:bt(256),resumeScheduled:bt(512),errorEmitted:bt(1024),emitClose:bt(Y),autoDestroy:bt(N),destroyed:bt(8192),closed:bt(16384),closeEmitted:bt(32768),multiAwaitDrain:bt(ye),readingMore:bt(1<<17),dataEmitted:bt(1<<18)}),xt.prototype.destroy=de.destroy,xt.prototype._undestroy=de.undestroy,xt.prototype._destroy=function($e,Xe){Xe($e)},xt.prototype[K.captureRejectionSymbol]=function($e){this.destroy($e)},xt.prototype[A]=function(){let $e;return this.destroyed||($e=this.readableEnded?null:new Te,this.destroy($e)),new B((Xe,Wt)=>w(this,$t=>$t&&$t!==$e?Wt($t):Xe(null)))},xt.prototype.push=function($e,Xe){return Xt(this,$e,Xe,!1)},xt.prototype.unshift=function($e,Xe){return Xt(this,$e,Xe,!0)},xt.prototype.isPaused=function(){const $e=this._readableState;return!0===$e[Me]||!1===$e.flowing},xt.prototype.setEncoding=function($e){const Xe=new Ue($e);this._readableState.decoder=Xe,this._readableState.encoding=this._readableState.decoder.encoding;const Wt=this._readableState.buffer;let $t="";for(const dn of Wt)$t+=Xe.write(dn);return Wt.clear(),""!==$t&&Wt.push($t),this._readableState.length=$t.length,this},xt.prototype.read=function($e){P("read",$e),void 0===$e?$e=NaN:R($e)||($e=v($e,10));const Xe=this._readableState,Wt=$e;if($e>Xe.highWaterMark&&(Xe.highWaterMark=function oe($e){if($e>1073741824)throw new Le("size","<= 1GiB",$e);return $e--,$e|=$e>>>1,$e|=$e>>>2,$e|=$e>>>4,$e|=$e>>>8,$e|=$e>>>16,++$e}($e)),0!==$e&&(Xe.state&=-129),0===$e&&Xe.needReadable&&((0!==Xe.highWaterMark?Xe.length>=Xe.highWaterMark:Xe.length>0)||Xe.ended))return P("read: emitReadable",Xe.length,Xe.ended),0===Xe.length&&Xe.ended?js(this):dt(this),null;if(0===($e=Be($e,Xe))&&Xe.ended)return 0===Xe.length&&js(this),null;let dn,$t=0!=(Xe.state&ie);if(P("need readable",$t),(0===Xe.length||Xe.length-$e<Xe.highWaterMark)&&($t=!0,P("length less than watermark",$t)),Xe.ended||Xe.reading||Xe.destroyed||Xe.errored||!Xe.constructed)$t=!1,P("reading, ended or constructing",$t);else if($t){P("do read"),Xe.state|=8|ae,0===Xe.length&&(Xe.state|=ie);try{this._read(Xe.highWaterMark)}catch(mr){nt(this,mr)}Xe.state&=~ae,Xe.reading||($e=Be(Wt,Xe))}return dn=$e>0?Uo($e,Xe):null,null===dn?(Xe.needReadable=Xe.length<=Xe.highWaterMark,$e=0):(Xe.length-=$e,Xe.multiAwaitDrain?Xe.awaitDrainWriters.clear():Xe.awaitDrainWriters=null),0===Xe.length&&(Xe.ended||(Xe.needReadable=!0),Wt!==$e&&Xe.ended&&js(this)),null!==dn&&!Xe.errorEmitted&&!Xe.closeEmitted&&(Xe.dataEmitted=!0,this.emit("data",dn)),dn},xt.prototype._read=function($e){throw new Oe("_read()")},xt.prototype.pipe=function($e,Xe){const Wt=this,$t=this._readableState;1===$t.pipes.length&&($t.multiAwaitDrain||($t.multiAwaitDrain=!0,$t.awaitDrainWriters=new Q($t.awaitDrainWriters?[$t.awaitDrainWriters]:[]))),$t.pipes.push($e),P("pipe count=%d opts=%j",$t.pipes.length,Xe);const mr=Xe&&!1===Xe.end||$e===D.stdout||$e===D.stderr?Ai:Ma;function Ma(){P("onend"),$e.end()}$t.endEmitted?D.nextTick(mr):Wt.once("end",mr),$e.on("unpipe",function Yt(ro,gr){P("onunpipe"),ro===Wt&&gr&&!1===gr.hasUnpiped&&(gr.hasUnpiped=!0,function Ti(){P("cleanup"),$e.removeListener("close",qn),$e.removeListener("finish",Io),Ni&&$e.removeListener("drain",Ni),$e.removeListener("error",en),$e.removeListener("unpipe",Yt),Wt.removeListener("end",Ma),Wt.removeListener("end",Ai),Wt.removeListener("data",Ei),Ta=!0,Ni&&$t.awaitDrainWriters&&(!$e._writableState||$e._writableState.needDrain)&&Ni()}())});let Ni,Ta=!1;function _i(){Ta||(1===$t.pipes.length&&$t.pipes[0]===$e?(P("false write response, pause",0),$t.awaitDrainWriters=$e,$t.multiAwaitDrain=!1):$t.pipes.length>1&&$t.pipes.includes($e)&&(P("false write response, pause",$t.awaitDrainWriters.size),$t.awaitDrainWriters.add($e)),Wt.pause()),Ni||(Ni=function Gn($e,Xe){return function(){const $t=$e._readableState;$t.awaitDrainWriters===Xe?(P("pipeOnDrain",1),$t.awaitDrainWriters=null):$t.multiAwaitDrain&&(P("pipeOnDrain",$t.awaitDrainWriters.size),$t.awaitDrainWriters.delete(Xe)),(!$t.awaitDrainWriters||0===$t.awaitDrainWriters.size)&&$e.listenerCount("data")&&$e.resume()}}(Wt,$e),$e.on("drain",Ni))}function Ei(ro){P("ondata");const gr=$e.write(ro);P("dest.write",gr),!1===gr&&_i()}function en(ro){if(P("onerror",ro),Ai(),$e.removeListener("error",en),0===$e.listenerCount("error")){const gr=$e._writableState||$e._readableState;gr&&!gr.errorEmitted?nt($e,ro):$e.emit("error",ro)}}function qn(){$e.removeListener("finish",Io),Ai()}function Io(){P("onfinish"),$e.removeListener("close",qn),Ai()}function Ai(){P("unpipe"),Wt.unpipe($e)}return Wt.on("data",Ei),Z($e,"error",en),$e.once("close",qn),$e.once("finish",Io),$e.emit("pipe",Wt),!0===$e.writableNeedDrain?_i():$t.flowing||(P("pipe resume"),Wt.resume()),$e},xt.prototype.unpipe=function($e){const Xe=this._readableState;if(0===Xe.pipes.length)return this;if(!$e){const dn=Xe.pipes;Xe.pipes=[],this.pause();for(let mr=0;mr<dn.length;mr++)dn[mr].emit("unpipe",this,{hasUnpiped:!1});return this}const $t=C(Xe.pipes,$e);return-1===$t||(Xe.pipes.splice($t,1),0===Xe.pipes.length&&this.pause(),$e.emit("unpipe",this,{hasUnpiped:!1})),this},xt.prototype.addListener=xt.prototype.on=function($e,Xe){const Wt=J.prototype.on.call(this,$e,Xe),$t=this._readableState;return"data"===$e?($t.readableListening=this.listenerCount("readable")>0,!1!==$t.flowing&&this.resume()):"readable"===$e&&!$t.endEmitted&&!$t.readableListening&&($t.readableListening=$t.needReadable=!0,$t.flowing=!1,$t.emittedReadable=!1,P("on readable",$t.length,$t.reading),$t.length?dt(this):$t.reading||D.nextTick(Bn,this)),Wt},xt.prototype.off=xt.prototype.removeListener=function($e,Xe){const Wt=J.prototype.removeListener.call(this,$e,Xe);return"readable"===$e&&D.nextTick(kn,this),Wt},xt.prototype.removeAllListeners=function($e){const Xe=J.prototype.removeAllListeners.apply(this,arguments);return("readable"===$e||void 0===$e)&&D.nextTick(kn,this),Xe},xt.prototype.resume=function(){const $e=this._readableState;return $e.flowing||(P("resume"),$e.flowing=!$e.readableListening,function Wi($e,Xe){Xe.resumeScheduled||(Xe.resumeScheduled=!0,D.nextTick(aa,$e,Xe))}(this,$e)),$e[Me]=!1,this},xt.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Me]=!0,this},xt.prototype.wrap=function($e){let Xe=!1;$e.on("data",$t=>{!this.push($t)&&$e.pause&&(Xe=!0,$e.pause())}),$e.on("end",()=>{this.push(null)}),$e.on("error",$t=>{nt(this,$t)}),$e.on("close",()=>{this.destroy()}),$e.on("destroy",()=>{this.destroy()}),this._read=()=>{Xe&&$e.resume&&(Xe=!1,$e.resume())};const Wt=j($e);for(let $t=1;$t<Wt.length;$t++){const dn=Wt[$t];void 0===this[dn]&&"function"==typeof $e[dn]&&(this[dn]=$e[dn].bind($e))}return this},xt.prototype[F]=function(){return Bo(this)},xt.prototype.iterator=function($e){return void 0!==$e&&He($e,"options"),Bo(this,$e)},T(xt.prototype,{readable:{__proto__:null,get(){const $e=this._readableState;return!(!$e||!1===$e.readable||$e.destroyed||$e.errorEmitted||$e.endEmitted)},set($e){this._readableState&&(this._readableState.readable=!!$e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function($e){this._readableState&&(this._readableState.flowing=$e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set($e){this._readableState&&(this._readableState.destroyed=$e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),T(At.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Me]},set($e){this[Me]=!!$e}}}),xt._fromList=Uo,xt.from=function($e,Xe){return fe(xt,$e,Xe)},xt.fromWeb=function($e,Xe){return cl().newStreamReadableFromReadableStream($e,Xe)},xt.toWeb=function($e,Xe){return cl().newReadableStreamFromStreamReadable($e,Xe)},xt.wrap=function($e,Xe){var Wt,$t;return new xt({objectMode:null===(Wt=null!==($t=$e.readableObjectMode)&&void 0!==$t?$t:$e.objectMode)||void 0===Wt||Wt,...Xe,destroy(dn,mr){de.destroyer($e,dn),mr(dn)}}).wrap($e)}},8782:(ee,q,g)=>{"use strict";const{MathFloor:M,NumberIsInteger:y}=g(6305),{validateInteger:D}=g(2120),{ERR_INVALID_ARG_VALUE:C}=g(4370).codes;let R=16384,_=16;function T(B){return B?_:R}ee.exports={getHighWaterMark:function O(B,Q,A,F){const ce=function v(B,Q,A){return null!=B.highWaterMark?B.highWaterMark:Q?B[A]:null}(Q,F,A);if(null!=ce){if(!y(ce)||ce<0)throw new C(F?`options.${A}`:"options.highWaterMark",ce);return M(ce)}return T(B.objectMode)},getDefaultHighWaterMark:T,setDefaultHighWaterMark:function j(B,Q){D(Q,"value",0),B?_=Q:R=Q}}},123:(ee,q,g)=>{"use strict";const{ObjectSetPrototypeOf:M,Symbol:y}=g(6305);ee.exports=v;const{ERR_METHOD_NOT_IMPLEMENTED:D}=g(4370).codes,C=g(5931),{getHighWaterMark:R}=g(8782);M(v.prototype,C.prototype),M(v,C);const _=y("kCallback");function v(O){if(!(this instanceof v))return new v(O);const B=O?R(this,O,"readableHighWaterMark",!0):null;0===B&&(O={...O,highWaterMark:null,readableHighWaterMark:B,writableHighWaterMark:O.writableHighWaterMark||0}),C.call(this,O),this._readableState.sync=!1,this[_]=null,O&&("function"==typeof O.transform&&(this._transform=O.transform),"function"==typeof O.flush&&(this._flush=O.flush)),this.on("prefinish",j)}function T(O){"function"!=typeof this._flush||this.destroyed?(this.push(null),O&&O()):this._flush((B,Q)=>{B?O?O(B):this.destroy(B):(null!=Q&&this.push(Q),this.push(null),O&&O())})}function j(){this._final!==T&&T.call(this)}v.prototype._final=T,v.prototype._transform=function(O,B,Q){throw new D("_transform()")},v.prototype._write=function(O,B,Q){const A=this._readableState,F=this._writableState,ce=A.length;this._transform(O,B,(K,J)=>{K?Q(K):(null!=J&&this.push(J),F.ended||ce===A.length||A.length<A.highWaterMark?Q():this[_]=Q)})},v.prototype._read=function(){if(this[_]){const O=this[_];this[_]=null,O()}}},5428:(ee,q,g)=>{"use strict";const{SymbolAsyncIterator:M,SymbolIterator:y,SymbolFor:D}=g(6305),C=D("nodejs.stream.destroyed"),R=D("nodejs.stream.errored"),_=D("nodejs.stream.readable"),v=D("nodejs.stream.writable"),T=D("nodejs.stream.disturbed"),j=D("nodejs.webstream.isClosedPromise"),O=D("nodejs.webstream.controllerErrorFunction");function B(fe,Ce=!1){var nt;return!(!fe||"function"!=typeof fe.pipe||"function"!=typeof fe.on||Ce&&("function"!=typeof fe.pause||"function"!=typeof fe.resume)||fe._writableState&&!1===(null===(nt=fe._readableState)||void 0===nt?void 0:nt.readable)||fe._writableState&&!fe._readableState)}function Q(fe){var Ce;return!(!fe||"function"!=typeof fe.write||"function"!=typeof fe.on||fe._readableState&&!1===(null===(Ce=fe._writableState)||void 0===Ce?void 0:Ce.writable))}function F(fe){return fe&&(fe._readableState||fe._writableState||"function"==typeof fe.write&&"function"==typeof fe.on||"function"==typeof fe.pipe&&"function"==typeof fe.on)}function ce(fe){return!(!fe||F(fe)||"function"!=typeof fe.pipeThrough||"function"!=typeof fe.getReader||"function"!=typeof fe.cancel)}function K(fe){return!(!fe||F(fe)||"function"!=typeof fe.getWriter||"function"!=typeof fe.abort)}function J(fe){return!(!fe||F(fe)||"object"!=typeof fe.readable||"object"!=typeof fe.writable)}function H(fe){if(!F(fe))return null;const gt=fe._writableState||fe._readableState;return!!(fe.destroyed||fe[C]||null!=gt&&gt.destroyed)}function w(fe){if(!Q(fe))return null;if(!0===fe.writableEnded)return!0;const Ce=fe._writableState;return(null==Ce||!Ce.errored)&&("boolean"!=typeof Ce?.ended?null:Ce.ended)}function de(fe,Ce){if(!B(fe))return null;const nt=fe._readableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.endEmitted?null:!!(nt.endEmitted||!1===Ce&&!0===nt.ended&&0===nt.length))}function G(fe){return fe&&null!=fe[_]?fe[_]:"boolean"!=typeof fe?.readable?null:!H(fe)&&B(fe)&&fe.readable&&!de(fe)}function Ie(fe){return fe&&null!=fe[v]?fe[v]:"boolean"!=typeof fe?.writable?null:!H(fe)&&Q(fe)&&fe.writable&&!w(fe)}function Qe(fe){return"boolean"==typeof fe._closed&&"boolean"==typeof fe._defaultKeepAlive&&"boolean"==typeof fe._removedConnection&&"boolean"==typeof fe._removedContLen}function qe(fe){return"boolean"==typeof fe._sent100&&Qe(fe)}ee.exports={isDestroyed:H,kIsDestroyed:C,isDisturbed:function Me(fe){var Ce;return!(!fe||!(null!==(Ce=fe[T])&&void 0!==Ce?Ce:fe.readableDidRead||fe.readableAborted))},kIsDisturbed:T,isErrored:function Ue(fe){var Ce,nt,gt,Je,ge,L,I,ae,ie,Ge;return!(!fe||!(null!==(Ce=null!==(nt=null!==(gt=null!==(Je=null!==(ge=null!==(L=fe[R])&&void 0!==L?L:fe.readableErrored)&&void 0!==ge?ge:fe.writableErrored)&&void 0!==Je?Je:null===(I=fe._readableState)||void 0===I?void 0:I.errorEmitted)&&void 0!==gt?gt:null===(ae=fe._writableState)||void 0===ae?void 0:ae.errorEmitted)&&void 0!==nt?nt:null===(ie=fe._readableState)||void 0===ie?void 0:ie.errored)&&void 0!==Ce?Ce:null!==(Ge=fe._writableState)&&void 0!==Ge&&Ge.errored))},kIsErrored:R,isReadable:G,kIsReadable:_,kIsClosedPromise:j,kControllerErrorFunction:O,kIsWritable:v,isClosed:function Le(fe){if(!F(fe))return null;if("boolean"==typeof fe.closed)return fe.closed;const Ce=fe._writableState,nt=fe._readableState;return"boolean"==typeof Ce?.closed||"boolean"==typeof nt?.closed?Ce?.closed||nt?.closed:"boolean"==typeof fe._closed&&Qe(fe)?fe._closed:null},isDuplexNodeStream:function A(fe){return!(!fe||"function"!=typeof fe.pipe||!fe._readableState||"function"!=typeof fe.on||"function"!=typeof fe.write)},isFinished:function le(fe,Ce){return F(fe)?!!H(fe)||!(!1!==Ce?.readable&&G(fe)||!1!==Ce?.writable&&Ie(fe)):null},isIterable:function $(fe,Ce){return null!=fe&&(!0===Ce?"function"==typeof fe[M]:!1===Ce?"function"==typeof fe[y]:"function"==typeof fe[M]||"function"==typeof fe[y])},isReadableNodeStream:B,isReadableStream:ce,isReadableEnded:function k(fe){if(!B(fe))return null;if(!0===fe.readableEnded)return!0;const Ce=fe._readableState;return!(!Ce||Ce.errored)&&("boolean"!=typeof Ce?.ended?null:Ce.ended)},isReadableFinished:de,isReadableErrored:function Oe(fe){var Ce,nt;return F(fe)?fe.readableErrored?fe.readableErrored:null!==(Ce=null===(nt=fe._readableState)||void 0===nt?void 0:nt.errored)&&void 0!==Ce?Ce:null:null},isNodeStream:F,isWebStream:function Z(fe){return ce(fe)||K(fe)||J(fe)},isWritable:Ie,isWritableNodeStream:Q,isWritableStream:K,isWritableEnded:w,isWritableFinished:function P(fe,Ce){if(!Q(fe))return null;if(!0===fe.writableFinished)return!0;const nt=fe._writableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.finished?null:!!(nt.finished||!1===Ce&&!0===nt.ended&&0===nt.length))},isWritableErrored:function ve(fe){var Ce,nt;return F(fe)?fe.writableErrored?fe.writableErrored:null!==(Ce=null===(nt=fe._writableState)||void 0===nt?void 0:nt.errored)&&void 0!==Ce?Ce:null:null},isServerRequest:function Te(fe){var Ce;return"boolean"==typeof fe._consuming&&"boolean"==typeof fe._dumped&&void 0===(null===(Ce=fe.req)||void 0===Ce?void 0:Ce.upgradeOrConnect)},isServerResponse:qe,willEmitClose:function He(fe){if(!F(fe))return null;const gt=fe._writableState||fe._readableState;return!gt&&qe(fe)||!!(gt&&gt.autoDestroy&&gt.emitClose&&!1===gt.closed)},isTransformStream:J}},9764:(ee,q,g)=>{const M=g(42),{ArrayPrototypeSlice:y,Error:D,FunctionPrototypeSymbolHasInstance:C,ObjectDefineProperty:R,ObjectDefineProperties:_,ObjectSetPrototypeOf:v,StringPrototypeToLowerCase:T,Symbol:j,SymbolHasInstance:O}=g(6305);ee.exports=qe,qe.WritableState=Le;const{EventEmitter:B}=g(2016),Q=g(900).Stream,{Buffer:A}=g(1657),F=g(5601),{addAbortSignal:ce}=g(9987),{getHighWaterMark:K,getDefaultHighWaterMark:J}=g(8782),{ERR_INVALID_ARG_TYPE:Z,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_MULTIPLE_CALLBACK:H,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:k,ERR_STREAM_NULL_VALUES:de,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:Ie}=g(4370).codes,{errorOrDestroy:le}=F;function ve(){}v(qe.prototype,Q.prototype),v(qe,Q);const Oe=j("kOnFinished");function Le(re,Y,N){"boolean"!=typeof N&&(N=Y instanceof g(5931)),this.objectMode=!(!re||!re.objectMode),N&&(this.objectMode=this.objectMode||!(!re||!re.writableObjectMode)),this.highWaterMark=re?K(this,re,"writableHighWaterMark",N):J(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(re&&!1===re.decodeStrings),this.defaultEncoding=re&&re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=fe.bind(void 0,Y),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Qe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!re||!1!==re.emitClose,this.autoDestroy=!re||!1!==re.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function Qe(re){re.buffered=[],re.bufferedIndex=0,re.allBuffers=!0,re.allNoop=!0}function qe(re){const Y=this instanceof g(5931);if(!Y&&!C(qe,this))return new qe(re);this._writableState=new Le(re,this,Y),re&&("function"==typeof re.write&&(this._write=re.write),"function"==typeof re.writev&&(this._writev=re.writev),"function"==typeof re.destroy&&(this._destroy=re.destroy),"function"==typeof re.final&&(this._final=re.final),"function"==typeof re.construct&&(this._construct=re.construct),re.signal&&ce(re.signal,this)),Q.call(this,re),F.construct(this,()=>{const N=this._writableState;N.writing||Je(this,N),ae(this,N)})}function Te(re,Y,N,U){const me=re._writableState;if("function"==typeof N)U=N,N=me.defaultEncoding;else{if(N){if("buffer"!==N&&!A.isEncoding(N))throw new Ie(N)}else N=me.defaultEncoding;"function"!=typeof U&&(U=ve)}if(null===Y)throw new de;if(!me.objectMode)if("string"==typeof Y)!1!==me.decodeStrings&&(Y=A.from(Y,N),N="buffer");else if(Y instanceof A)N="buffer";else{if(!Q._isUint8Array(Y))throw new Z("chunk",["string","Buffer","Uint8Array"],Y);Y=Q._uint8ArrayToBuffer(Y),N="buffer"}let Ye;return me.ending?Ye=new G:me.destroyed&&(Ye=new P("write")),Ye?(M.nextTick(U,Ye),le(re,Ye,!0),Ye):(me.pendingcb++,function He(re,Y,N,U,me){const Ye=Y.objectMode?1:N.length;Y.length+=Ye;const ye=Y.length<Y.highWaterMark;return ye||(Y.needDrain=!0),Y.writing||Y.corked||Y.errored||!Y.constructed?(Y.buffered.push({chunk:N,encoding:U,callback:me}),Y.allBuffers&&"buffer"!==U&&(Y.allBuffers=!1),Y.allNoop&&me!==ve&&(Y.allNoop=!1)):(Y.writelen=Ye,Y.writecb=me,Y.writing=!0,Y.sync=!0,re._write(N,U,Y.onwrite),Y.sync=!1),ye&&!Y.errored&&!Y.destroyed}(re,me,Y,N,U))}function Me(re,Y,N,U,me,Ye,ye){Y.writelen=U,Y.writecb=ye,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new P("write")):N?re._writev(me,Y.onwrite):re._write(me,Ye,Y.onwrite),Y.sync=!1}function Ue(re,Y,N,U){--Y.pendingcb,U(N),gt(Y),le(re,N)}function fe(re,Y){const N=re._writableState,U=N.sync,me=N.writecb;"function"==typeof me?(N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0,Y?(N.errored||(N.errored=Y),re._readableState&&!re._readableState.errored&&(re._readableState.errored=Y),U?M.nextTick(Ue,re,N,Y,me):Ue(re,N,Y,me)):(N.buffered.length>N.bufferedIndex&&Je(re,N),U?null!==N.afterWriteTickInfo&&N.afterWriteTickInfo.cb===me?N.afterWriteTickInfo.count++:(N.afterWriteTickInfo={count:1,cb:me,stream:re,state:N},M.nextTick(Ce,N.afterWriteTickInfo)):nt(re,N,1,me))):le(re,new H)}function Ce({stream:re,state:Y,count:N,cb:U}){return Y.afterWriteTickInfo=null,nt(re,Y,N,U)}function nt(re,Y,N,U){for(!Y.ending&&!re.destroyed&&0===Y.length&&Y.needDrain&&(Y.needDrain=!1,re.emit("drain"));N-- >0;)Y.pendingcb--,U();Y.destroyed&&gt(Y),ae(re,Y)}function gt(re){if(re.writing)return;for(let me=re.bufferedIndex;me<re.buffered.length;++me){var Y;const{chunk:Ye,callback:ye}=re.buffered[me];re.length-=re.objectMode?1:Ye.length,ye(null!==(Y=re.errored)&&void 0!==Y?Y:new P("write"))}const N=re[Oe].splice(0);for(let me=0;me<N.length;me++){var U;N[me](null!==(U=re.errored)&&void 0!==U?U:new P("end"))}Qe(re)}function Je(re,Y){if(Y.corked||Y.bufferProcessing||Y.destroyed||!Y.constructed)return;const{buffered:N,bufferedIndex:U,objectMode:me}=Y,Ye=N.length-U;if(!Ye)return;let ye=U;if(Y.bufferProcessing=!0,Ye>1&&re._writev){Y.pendingcb-=Ye-1;const ze=Y.allNoop?ve:bt=>{for(let At=ye;At<N.length;++At)N[At].callback(bt)},st=Y.allNoop&&0===ye?N:y(N,ye);st.allBuffers=Y.allBuffers,Me(re,Y,!0,Y.length,st,"",ze),Qe(Y)}else{do{const{chunk:ze,encoding:st,callback:bt}=N[ye];N[ye++]=null,Me(re,Y,!1,me?1:ze.length,ze,st,bt)}while(ye<N.length&&!Y.writing);ye===N.length?Qe(Y):ye>256?(N.splice(0,ye),Y.bufferedIndex=0):Y.bufferedIndex=ye}Y.bufferProcessing=!1}function ge(re){return re.ending&&!re.destroyed&&re.constructed&&0===re.length&&!re.errored&&0===re.buffered.length&&!re.finished&&!re.writing&&!re.errorEmitted&&!re.closeEmitted}function ae(re,Y,N){ge(Y)&&(function I(re,Y){!Y.prefinished&&!Y.finalCalled&&("function"!=typeof re._final||Y.destroyed?(Y.prefinished=!0,re.emit("prefinish")):(Y.finalCalled=!0,function L(re,Y){let N=!1;function U(me){if(N)le(re,me??H());else if(N=!0,Y.pendingcb--,me){const Ye=Y[Oe].splice(0);for(let ye=0;ye<Ye.length;ye++)Ye[ye](me);le(re,me,Y.sync)}else ge(Y)&&(Y.prefinished=!0,re.emit("prefinish"),Y.pendingcb++,M.nextTick(ie,re,Y))}Y.sync=!0,Y.pendingcb++;try{re._final(U)}catch(me){U(me)}Y.sync=!1}(re,Y)))}(re,Y),0===Y.pendingcb&&(N?(Y.pendingcb++,M.nextTick((U,me)=>{ge(me)?ie(U,me):me.pendingcb--},re,Y)):ge(Y)&&(Y.pendingcb++,ie(re,Y))))}function ie(re,Y){Y.pendingcb--,Y.finished=!0;const N=Y[Oe].splice(0);for(let U=0;U<N.length;U++)N[U]();if(re.emit("finish"),Y.autoDestroy){const U=re._readableState;(!U||U.autoDestroy&&(U.endEmitted||!1===U.readable))&&re.destroy()}}Le.prototype.getBuffer=function(){return y(this.buffered,this.bufferedIndex)},R(Le.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),R(qe,O,{__proto__:null,value:function(re){return!!C(this,re)||this===qe&&re&&re._writableState instanceof Le}}),qe.prototype.pipe=function(){le(this,new w)},qe.prototype.write=function(re,Y,N){return!0===Te(this,re,Y,N)},qe.prototype.cork=function(){this._writableState.corked++},qe.prototype.uncork=function(){const re=this._writableState;re.corked&&(re.corked--,re.writing||Je(this,re))},qe.prototype.setDefaultEncoding=function(Y){if("string"==typeof Y&&(Y=T(Y)),!A.isEncoding(Y))throw new Ie(Y);return this._writableState.defaultEncoding=Y,this},qe.prototype._write=function(re,Y,N){if(!this._writev)throw new $("_write()");this._writev([{chunk:re,encoding:Y}],N)},qe.prototype._writev=null,qe.prototype.end=function(re,Y,N){const U=this._writableState;let me;if("function"==typeof re?(N=re,re=null,Y=null):"function"==typeof Y&&(N=Y,Y=null),null!=re){const Ye=Te(this,re,Y);Ye instanceof D&&(me=Ye)}return U.corked&&(U.corked=1,this.uncork()),me||(U.errored||U.ending?U.finished?me=new k("end"):U.destroyed&&(me=new P("end")):(U.ending=!0,ae(this,U,!0),U.ended=!0)),"function"==typeof N&&(me||U.finished?M.nextTick(N,me):U[Oe].push(N)),this},_(qe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(re){this._writableState&&(this._writableState.destroyed=re)}},writable:{__proto__:null,get(){const re=this._writableState;return!(!re||!1===re.writable||re.destroyed||re.errored||re.ending||re.ended)},set(re){this._writableState&&(this._writableState.writable=!!re)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const re=this._writableState;return!!re&&!re.destroyed&&!re.ending&&re.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Ge=F.destroy;let Ze;function pe(){return void 0===Ze&&(Ze={}),Ze}qe.prototype.destroy=function(re,Y){const N=this._writableState;return!N.destroyed&&(N.bufferedIndex<N.buffered.length||N[Oe].length)&&M.nextTick(gt,N),Ge.call(this,re,Y),this},qe.prototype._undestroy=F.undestroy,qe.prototype._destroy=function(re,Y){Y(re)},qe.prototype[B.captureRejectionSymbol]=function(re){this.destroy(re)},qe.fromWeb=function(re,Y){return pe().newStreamWritableFromWritableStream(re,Y)},qe.toWeb=function(re){return pe().newWritableStreamFromStreamWritable(re)}},2120:(ee,q,g)=>{"use strict";const{ArrayIsArray:M,ArrayPrototypeIncludes:y,ArrayPrototypeJoin:D,ArrayPrototypeMap:C,NumberIsInteger:R,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:v,NumberMIN_SAFE_INTEGER:T,NumberParseInt:j,ObjectPrototypeHasOwnProperty:O,RegExpPrototypeExec:B,String:Q,StringPrototypeToUpperCase:A,StringPrototypeTrim:F}=g(6305),{hideStackFrames:ce,codes:{ERR_SOCKET_BAD_PORT:K,ERR_INVALID_ARG_TYPE:J,ERR_INVALID_ARG_VALUE:Z,ERR_OUT_OF_RANGE:$,ERR_UNKNOWN_SIGNAL:H}}=g(4370),{normalizeEncoding:w}=g(2656),{isAsyncFunction:P,isArrayBufferView:k}=g(2656).types,de={},le=/^[0-7]+$/,Le=ce((ye,ze,st=T,bt=v)=>{if("number"!=typeof ye)throw new J(ze,"number",ye);if(!R(ye))throw new $(ze,"an integer",ye);if(ye<st||ye>bt)throw new $(ze,`>= ${st} && <= ${bt}`,ye)}),Qe=ce((ye,ze,st=-2147483648,bt=2147483647)=>{if("number"!=typeof ye)throw new J(ze,"number",ye);if(!R(ye))throw new $(ze,"an integer",ye);if(ye<st||ye>bt)throw new $(ze,`>= ${st} && <= ${bt}`,ye)}),qe=ce((ye,ze,st=!1)=>{if("number"!=typeof ye)throw new J(ze,"number",ye);if(!R(ye))throw new $(ze,"an integer",ye);const bt=st?1:0,At=4294967295;if(ye<bt||ye>At)throw new $(ze,`>= ${bt} && <= ${At}`,ye)});function Te(ye,ze){if("string"!=typeof ye)throw new J(ze,"string",ye)}const Me=ce((ye,ze,st)=>{if(!y(st,ye)){const At="must be one of: "+D(C(st,xt=>"string"==typeof xt?`'${xt}'`:Q(xt)),", ");throw new Z(ze,ye,At)}});function Ue(ye,ze){if("boolean"!=typeof ye)throw new J(ze,"boolean",ye)}function fe(ye,ze,st){return null!=ye&&O(ye,ze)?ye[ze]:st}const Ce=ce((ye,ze,st=null)=>{const bt=fe(st,"allowArray",!1),At=fe(st,"allowFunction",!1);if(!fe(st,"nullable",!1)&&null===ye||!bt&&M(ye)||"object"!=typeof ye&&(!At||"function"!=typeof ye))throw new J(ze,"Object",ye)}),nt=ce((ye,ze)=>{if(null!=ye&&"object"!=typeof ye&&"function"!=typeof ye)throw new J(ze,"a dictionary",ye)}),gt=ce((ye,ze,st=0)=>{if(!M(ye))throw new J(ze,"Array",ye);if(ye.length<st)throw new Z(ze,ye,`must be longer than ${st}`)}),ae=ce((ye,ze="buffer")=>{if(!k(ye))throw new J(ze,["Buffer","TypedArray","DataView"],ye)}),Ze=ce((ye,ze)=>{if(void 0!==ye&&(null===ye||"object"!=typeof ye||!("aborted"in ye)))throw new J(ze,"AbortSignal",ye)}),pe=ce((ye,ze)=>{if("function"!=typeof ye)throw new J(ze,"Function",ye)}),re=ce((ye,ze)=>{if("function"!=typeof ye||P(ye))throw new J(ze,"Function",ye)}),Y=ce((ye,ze)=>{if(void 0!==ye)throw new J(ze,"undefined",ye)}),U=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function me(ye,ze){if(typeof ye>"u"||!B(U,ye))throw new Z(ze,ye,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}ee.exports={isInt32:function G(ye){return ye===(0|ye)},isUint32:function Ie(ye){return ye===ye>>>0},parseFileMode:function Oe(ye,ze,st){if(typeof ye>"u"&&(ye=st),"string"==typeof ye){if(null===B(le,ye))throw new Z(ze,ye,"must be a 32-bit unsigned integer or an octal string");ye=j(ye,8)}return qe(ye,ze),ye},validateArray:gt,validateStringArray:function Je(ye,ze){gt(ye,ze);for(let st=0;st<ye.length;st++)Te(ye[st],`${ze}[${st}]`)},validateBooleanArray:function ge(ye,ze){gt(ye,ze);for(let st=0;st<ye.length;st++)Ue(ye[st],`${ze}[${st}]`)},validateAbortSignalArray:function L(ye,ze){gt(ye,ze);for(let st=0;st<ye.length;st++){const bt=ye[st],At=`${ze}[${st}]`;if(null==bt)throw new J(At,"AbortSignal",bt);Ze(bt,At)}},validateBoolean:Ue,validateBuffer:ae,validateDictionary:nt,validateEncoding:function ie(ye,ze){const st=w(ze),bt=ye.length;if("hex"===st&&bt%2!=0)throw new Z("encoding",ze,`is invalid for data of length ${bt}`)},validateFunction:pe,validateInt32:Qe,validateInteger:Le,validateNumber:function He(ye,ze,st=void 0,bt){if("number"!=typeof ye)throw new J(ze,"number",ye);if(null!=st&&ye<st||null!=bt&&ye>bt||(null!=st||null!=bt)&&_(ye))throw new $(ze,`${null!=st?`>= ${st}`:""}${null!=st&&null!=bt?" && ":""}${null!=bt?`<= ${bt}`:""}`,ye)},validateObject:Ce,validateOneOf:Me,validatePlainFunction:re,validatePort:function Ge(ye,ze="Port",st=!0){if("number"!=typeof ye&&"string"!=typeof ye||"string"==typeof ye&&0===F(ye).length||+ye!=+ye>>>0||ye>65535||0===ye&&!st)throw new K(ze,ye,st);return 0|ye},validateSignalName:function I(ye,ze="signal"){if(Te(ye,ze),void 0===de[ye])throw void 0!==de[A(ye)]?new H(ye+" (signals must use all capital letters)"):new H(ye)},validateString:Te,validateUint32:qe,validateUndefined:Y,validateUnion:function N(ye,ze,st){if(!y(st,ye))throw new J(ze,`('${D(st,"|")}')`,ye)},validateAbortSignal:Ze,validateLinkHeaderValue:function Ye(ye){if("string"==typeof ye)return me(ye,"hints"),ye;if(M(ye)){const ze=ye.length;let st="";if(0===ze)return st;for(let bt=0;bt<ze;bt++){const At=ye[bt];me(At,"hints"),st+=At,bt!==ze-1&&(st+=", ")}return st}throw new Z("hints",ye,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(ee,q,g)=>{"use strict";const M=g(8110),y=g(16),D=M.Readable.destroy;ee.exports=M.Readable,ee.exports._uint8ArrayToBuffer=M._uint8ArrayToBuffer,ee.exports._isUint8Array=M._isUint8Array,ee.exports.isDisturbed=M.isDisturbed,ee.exports.isErrored=M.isErrored,ee.exports.isReadable=M.isReadable,ee.exports.Readable=M.Readable,ee.exports.Writable=M.Writable,ee.exports.Duplex=M.Duplex,ee.exports.Transform=M.Transform,ee.exports.PassThrough=M.PassThrough,ee.exports.addAbortSignal=M.addAbortSignal,ee.exports.finished=M.finished,ee.exports.destroy=M.destroy,ee.exports.destroy=D,ee.exports.pipeline=M.pipeline,ee.exports.compose=M.compose,Object.defineProperty(M,"promises",{configurable:!0,enumerable:!0,get:()=>y}),ee.exports.Stream=M.Stream,ee.exports.default=ee.exports},4370:(ee,q,g)=>{"use strict";const{format:M,inspect:y,AggregateError:D}=g(2656),C=globalThis.AggregateError||D,R=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],v=/^([A-Z][a-z0-9]*)+$/,j={};function O(J,Z){if(!J)throw new j.ERR_INTERNAL_ASSERTION(Z)}function B(J){let Z="",$=J.length;const H="-"===J[0]?1:0;for(;$>=H+4;$-=3)Z=`_${J.slice($-3,$)}${Z}`;return`${J.slice(0,$)}${Z}`}function A(J,Z,$){$||($=Error);class H extends ${constructor(...P){super(function Q(J,Z,$){if("function"==typeof Z)return O(Z.length<=$.length,`Code: ${J}; The provided arguments length (${$.length}) does not match the required ones (${Z.length}).`),Z(...$);const H=(Z.match(/%[dfijoOs]/g)||[]).length;return O(H===$.length,`Code: ${J}; The provided arguments length (${$.length}) does not match the required ones (${H}).`),0===$.length?Z:M(Z,...$)}(J,Z,P))}toString(){return`${this.name} [${J}]: ${this.message}`}}Object.defineProperties(H.prototype,{name:{value:$.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${J}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),H.prototype.code=J,H.prototype[R]=!0,j[J]=H}function F(J){return Object.defineProperty(J,"name",{value:"__node_internal_"+J.name}),J}class K extends Error{constructor(Z="The operation was aborted",$=void 0){if(void 0!==$&&"object"!=typeof $)throw new j.ERR_INVALID_ARG_TYPE("options","Object",$);super(Z,$),this.code="ABORT_ERR",this.name="AbortError"}}A("ERR_ASSERTION","%s",Error),A("ERR_INVALID_ARG_TYPE",(J,Z,$)=>{O("string"==typeof J,"'name' must be a string"),Array.isArray(Z)||(Z=[Z]);let H="The ";J.endsWith(" argument")?H+=`${J} `:H+=`"${J}" ${J.includes(".")?"property":"argument"} `,H+="must be ";const w=[],P=[],k=[];for(const G of Z)O("string"==typeof G,"All expected entries have to be of type string"),_.includes(G)?w.push(G.toLowerCase()):v.test(G)?P.push(G):(O("object"!==G,'The value "object" should be written as "Object"'),k.push(G));if(P.length>0){const G=w.indexOf("object");-1!==G&&(w.splice(w,G,1),P.push("Object"))}if(w.length>0){switch(w.length){case 1:H+=`of type ${w[0]}`;break;case 2:H+=`one of type ${w[0]} or ${w[1]}`;break;default:{const G=w.pop();H+=`one of type ${w.join(", ")}, or ${G}`}}(P.length>0||k.length>0)&&(H+=" or ")}if(P.length>0){switch(P.length){case 1:H+=`an instance of ${P[0]}`;break;case 2:H+=`an instance of ${P[0]} or ${P[1]}`;break;default:{const G=P.pop();H+=`an instance of ${P.join(", ")}, or ${G}`}}k.length>0&&(H+=" or ")}switch(k.length){case 0:break;case 1:k[0].toLowerCase()!==k[0]&&(H+="an "),H+=`${k[0]}`;break;case 2:H+=`one of ${k[0]} or ${k[1]}`;break;default:{const G=k.pop();H+=`one of ${k.join(", ")}, or ${G}`}}if(null==$)H+=`. Received ${$}`;else if("function"==typeof $&&$.name)H+=`. Received function ${$.name}`;else if("object"==typeof $){var de;null!==(de=$.constructor)&&void 0!==de&&de.name?H+=`. Received an instance of ${$.constructor.name}`:H+=`. Received ${y($,{depth:-1})}`}else{let G=y($,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),H+=`. Received type ${typeof $} (${G})`}return H},TypeError),A("ERR_INVALID_ARG_VALUE",(J,Z,$="is invalid")=>{let H=y(Z);return H.length>128&&(H=H.slice(0,128)+"..."),`The ${J.includes(".")?"property":"argument"} '${J}' ${$}. Received ${H}`},TypeError),A("ERR_INVALID_RETURN_VALUE",(J,Z,$)=>{var H;return`Expected ${J} to be returned from the "${Z}" function but got ${null!=$&&null!==(H=$.constructor)&&void 0!==H&&H.name?`instance of ${$.constructor.name}`:"type "+typeof $}.`},TypeError),A("ERR_MISSING_ARGS",(...J)=>{let Z;O(J.length>0,"At least one arg needs to be specified");const $=J.length;switch(J=(Array.isArray(J)?J:[J]).map(H=>`"${H}"`).join(" or "),$){case 1:Z+=`The ${J[0]} argument`;break;case 2:Z+=`The ${J[0]} and ${J[1]} arguments`;break;default:{const H=J.pop();Z+=`The ${J.join(", ")}, and ${H} arguments`}}return`${Z} must be specified`},TypeError),A("ERR_OUT_OF_RANGE",(J,Z,$)=>{let H;return O(Z,'Missing "range" argument'),Number.isInteger($)&&Math.abs($)>2**32?H=B(String($)):"bigint"==typeof $?(H=String($),($>2n**32n||$<-(2n**32n))&&(H=B(H)),H+="n"):H=y($),`The value of "${J}" is out of range. It must be ${Z}. Received ${H}`},RangeError),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),A("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),A("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),A("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),A("ERR_STREAM_WRITE_AFTER_END","write after end",Error),A("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ee.exports={AbortError:K,aggregateTwoErrors:F(function ce(J,Z){if(J&&Z&&J!==Z){if(Array.isArray(Z.errors))return Z.errors.push(J),Z;const $=new C([Z,J],Z.message);return $.code=Z.code,$}return J||Z}),hideStackFrames:F,codes:j}},6305:ee=>{"use strict";ee.exports={ArrayIsArray:q=>Array.isArray(q),ArrayPrototypeIncludes:(q,g)=>q.includes(g),ArrayPrototypeIndexOf:(q,g)=>q.indexOf(g),ArrayPrototypeJoin:(q,g)=>q.join(g),ArrayPrototypeMap:(q,g)=>q.map(g),ArrayPrototypePop:(q,g)=>q.pop(g),ArrayPrototypePush:(q,g)=>q.push(g),ArrayPrototypeSlice:(q,g,M)=>q.slice(g,M),Error,FunctionPrototypeCall:(q,g,...M)=>q.call(g,...M),FunctionPrototypeSymbolHasInstance:(q,g)=>Function.prototype[Symbol.hasInstance].call(q,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(q,g)=>Object.defineProperties(q,g),ObjectDefineProperty:(q,g,M)=>Object.defineProperty(q,g,M),ObjectGetOwnPropertyDescriptor:(q,g)=>Object.getOwnPropertyDescriptor(q,g),ObjectKeys:q=>Object.keys(q),ObjectSetPrototypeOf:(q,g)=>Object.setPrototypeOf(q,g),Promise,PromisePrototypeCatch:(q,g)=>q.catch(g),PromisePrototypeThen:(q,g,M)=>q.then(g,M),PromiseReject:q=>Promise.reject(q),PromiseResolve:q=>Promise.resolve(q),ReflectApply:Reflect.apply,RegExpPrototypeTest:(q,g)=>q.test(g),SafeSet:Set,String,StringPrototypeSlice:(q,g,M)=>q.slice(g,M),StringPrototypeToLowerCase:q=>q.toLowerCase(),StringPrototypeToUpperCase:q=>q.toUpperCase(),StringPrototypeTrim:q=>q.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(q,g,M)=>q.set(g,M),Boolean,Uint8Array}},2656:(ee,q,g)=>{"use strict";var M=g(7156).default;const y=g(1657),{kResistStopPropagation:D,SymbolDispose:C}=g(6305),R=globalThis.AbortSignal||g(3982).AbortSignal,_=globalThis.AbortController||g(3982).AbortController,v=Object.getPrototypeOf(M(function*(){})).constructor,T=globalThis.Blob||y.Blob,j=typeof T<"u"?function(F){return F instanceof T}:function(F){return!1},O=(A,F)=>{if(void 0!==A&&(null===A||"object"!=typeof A||!("aborted"in A)))throw new ERR_INVALID_ARG_TYPE(F,"AbortSignal",A)};class Q extends Error{constructor(F){if(!Array.isArray(F))throw new TypeError("Expected input to be an Array, got "+typeof F);let ce="";for(let K=0;K<F.length;K++)ce+=`    ${F[K].stack}\n`;super(ce),this.name="AggregateError",this.errors=F}}ee.exports={AggregateError:Q,kEmptyObject:Object.freeze({}),once(A){let F=!1;return function(...ce){F||(F=!0,A.apply(this,ce))}},createDeferredPromise:function(){let A,F;return{promise:new Promise((K,J)=>{A=K,F=J}),resolve:A,reject:F}},promisify:A=>new Promise((F,ce)=>{A((K,...J)=>K?ce(K):F(...J))}),debuglog:()=>function(){},format:(A,...F)=>A.replace(/%([sdifj])/g,function(...[ce,K]){const J=F.shift();return"f"===K?J.toFixed(6):"j"===K?JSON.stringify(J):"s"===K&&"object"==typeof J?`${J.constructor!==Object?J.constructor.name:""} {}`.trim():J.toString()}),inspect(A){switch(typeof A){case"string":if(A.includes("'")){if(!A.includes('"'))return`"${A}"`;if(!A.includes("`")&&!A.includes("${"))return`\`${A}\``}return`'${A}'`;case"number":return isNaN(A)?"NaN":Object.is(A,-0)?String(A):A;case"bigint":return`${String(A)}n`;case"boolean":case"undefined":return String(A);case"object":return"{}"}},types:{isAsyncFunction:A=>A instanceof v,isArrayBufferView:A=>ArrayBuffer.isView(A)},isBlob:j,deprecate:(A,F)=>A,addAbortListener:g(2016).addAbortListener||function(F,ce){if(void 0===F)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",F);let K;return O(F,"signal"),((A,F)=>{if("function"!=typeof A)throw new ERR_INVALID_ARG_TYPE("listener","Function",A)})(ce),F.aborted?queueMicrotask(()=>ce()):(F.addEventListener("abort",ce,{__proto__:null,once:!0,[D]:!0}),K=()=>{F.removeEventListener("abort",ce)}),{__proto__:null,[C](){var J;null===(J=K)||void 0===J||J()}}},AbortSignalAny:R.any||function(F){if(1===F.length)return F[0];const ce=new _,K=()=>ce.abort();return F.forEach(J=>{O(J,"signals"),J.addEventListener("abort",K,{once:!0})}),ce.signal.addEventListener("abort",()=>{F.forEach(J=>J.removeEventListener("abort",K))},{once:!0}),ce.signal}},ee.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(ee,q,g)=>{const{Buffer:M}=g(1657),{ObjectDefineProperty:y,ObjectKeys:D,ReflectApply:C}=g(6305),{promisify:{custom:R}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:v}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:T}}=g(4370),j=g(7721),{setDefaultHighWaterMark:O,getDefaultHighWaterMark:B}=g(8782),{pipeline:Q}=g(4514),{destroyer:A}=g(5601),F=g(4618),K=g(16),J=g(5428),Z=ee.exports=g(900).Stream;Z.isDestroyed=J.isDestroyed,Z.isDisturbed=J.isDisturbed,Z.isErrored=J.isErrored,Z.isReadable=J.isReadable,Z.isWritable=J.isWritable,Z.Readable=g(8383);for(const w of D(_)){let k=function(...de){if(new.target)throw T();return Z.Readable.from(C(P,this,de))};const P=_[w];y(k,"name",{__proto__:null,value:P.name}),y(k,"length",{__proto__:null,value:P.length}),y(Z.Readable.prototype,w,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const w of D(v)){let k=function(...G){if(new.target)throw T();return C(P,this,G)};const P=v[w];y(k,"name",{__proto__:null,value:P.name}),y(k,"length",{__proto__:null,value:P.length}),y(Z.Readable.prototype,w,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}Z.Writable=g(9764),Z.Duplex=g(5931),Z.Transform=g(123),Z.PassThrough=g(6973),Z.pipeline=Q;const{addAbortSignal:$}=g(9987);Z.addAbortSignal=$,Z.finished=F,Z.destroy=A,Z.compose=j,Z.setDefaultHighWaterMark=O,Z.getDefaultHighWaterMark=B,y(Z,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>K}),y(Q,R,{__proto__:null,enumerable:!0,get:()=>K.pipeline}),y(F,R,{__proto__:null,enumerable:!0,get:()=>K.finished}),Z.Stream=Z,Z._isUint8Array=function(P){return P instanceof Uint8Array},Z._uint8ArrayToBuffer=function(P){return M.from(P.buffer,P.byteOffset,P.byteLength)}},16:(ee,q,g)=>{"use strict";const{ArrayPrototypePop:M,Promise:y}=g(6305),{isIterable:D,isNodeStream:C,isWebStream:R}=g(5428),{pipelineImpl:_}=g(4514),{finished:v}=g(4618);g(8110),ee.exports={finished:v,pipeline:function T(...j){return new y((O,B)=>{let Q,A;const F=j[j.length-1];if(F&&"object"==typeof F&&!C(F)&&!D(F)&&!R(F)){const ce=M(j);Q=ce.signal,A=ce.end}_(j,(ce,K)=>{ce?B(ce):O(K)},{signal:Q,end:A})})}}},1657:(ee,q,g)=>{"use strict";const M=g(9919),y=g(2601),D="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;q.Buffer=v,q.SlowBuffer=function Z(_e){return+_e!=_e&&(_e=0),v.alloc(+_e)},q.INSPECT_MAX_BYTES=50;const C=2147483647;function _(_e){if(_e>C)throw new RangeError('The value "'+_e+'" is invalid for option "size"');const X=new Uint8Array(_e);return Object.setPrototypeOf(X,v.prototype),X}function v(_e,X,oe){if("number"==typeof _e){if("string"==typeof X)throw new TypeError('The "string" argument must be of type string. Received type number');return B(_e)}return T(_e,X,oe)}function T(_e,X,oe){if("string"==typeof _e)return function Q(_e,X){if(("string"!=typeof X||""===X)&&(X="utf8"),!v.isEncoding(X))throw new TypeError("Unknown encoding: "+X);const oe=0|$(_e,X);let Be=_(oe);const tt=Be.write(_e,X);return tt!==oe&&(Be=Be.slice(0,tt)),Be}(_e,X);if(ArrayBuffer.isView(_e))return function F(_e){if(st(_e,Uint8Array)){const X=new Uint8Array(_e);return ce(X.buffer,X.byteOffset,X.byteLength)}return A(_e)}(_e);if(null==_e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e);if(st(_e,ArrayBuffer)||_e&&st(_e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(st(_e,SharedArrayBuffer)||_e&&st(_e.buffer,SharedArrayBuffer)))return ce(_e,X,oe);if("number"==typeof _e)throw new TypeError('The "value" argument must not be of type number. Received type number');const Be=_e.valueOf&&_e.valueOf();if(null!=Be&&Be!==_e)return v.from(Be,X,oe);const tt=function K(_e){if(v.isBuffer(_e)){const X=0|J(_e.length),oe=_(X);return 0===oe.length||_e.copy(oe,0,0,X),oe}return void 0!==_e.length?"number"!=typeof _e.length||bt(_e.length)?_(0):A(_e):"Buffer"===_e.type&&Array.isArray(_e.data)?A(_e.data):void 0}(_e);if(tt)return tt;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof _e[Symbol.toPrimitive])return v.from(_e[Symbol.toPrimitive]("string"),X,oe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _e)}function j(_e){if("number"!=typeof _e)throw new TypeError('"size" argument must be of type number');if(_e<0)throw new RangeError('The value "'+_e+'" is invalid for option "size"')}function B(_e){return j(_e),_(_e<0?0:0|J(_e))}function A(_e){const X=_e.length<0?0:0|J(_e.length),oe=_(X);for(let Be=0;Be<X;Be+=1)oe[Be]=255&_e[Be];return oe}function ce(_e,X,oe){if(X<0||_e.byteLength<X)throw new RangeError('"offset" is outside of buffer bounds');if(_e.byteLength<X+(oe||0))throw new RangeError('"length" is outside of buffer bounds');let Be;return Be=void 0===X&&void 0===oe?new Uint8Array(_e):void 0===oe?new Uint8Array(_e,X):new Uint8Array(_e,X,oe),Object.setPrototypeOf(Be,v.prototype),Be}function J(_e){if(_e>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return 0|_e}function $(_e,X){if(v.isBuffer(_e))return _e.length;if(ArrayBuffer.isView(_e)||st(_e,ArrayBuffer))return _e.byteLength;if("string"!=typeof _e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _e);const oe=_e.length,Be=arguments.length>2&&!0===arguments[2];if(!Be&&0===oe)return 0;let tt=!1;for(;;)switch(X){case"ascii":case"latin1":case"binary":return oe;case"utf8":case"utf-8":return U(_e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*oe;case"hex":return oe>>>1;case"base64":return ye(_e).length;default:if(tt)return Be?-1:U(_e).length;X=(""+X).toLowerCase(),tt=!0}}function H(_e,X,oe){let Be=!1;if((void 0===X||X<0)&&(X=0),X>this.length||((void 0===oe||oe>this.length)&&(oe=this.length),oe<=0)||(oe>>>=0)<=(X>>>=0))return"";for(_e||(_e="utf8");;)switch(_e){case"hex":return Me(this,X,oe);case"utf8":case"utf-8":return Le(this,X,oe);case"ascii":return Te(this,X,oe);case"latin1":case"binary":return He(this,X,oe);case"base64":return Oe(this,X,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,X,oe);default:if(Be)throw new TypeError("Unknown encoding: "+_e);_e=(_e+"").toLowerCase(),Be=!0}}function w(_e,X,oe){const Be=_e[X];_e[X]=_e[oe],_e[oe]=Be}function P(_e,X,oe,Be,tt){if(0===_e.length)return-1;if("string"==typeof oe?(Be=oe,oe=0):oe>2147483647?oe=2147483647:oe<-2147483648&&(oe=-2147483648),bt(oe=+oe)&&(oe=tt?0:_e.length-1),oe<0&&(oe=_e.length+oe),oe>=_e.length){if(tt)return-1;oe=_e.length-1}else if(oe<0){if(!tt)return-1;oe=0}if("string"==typeof X&&(X=v.from(X,Be)),v.isBuffer(X))return 0===X.length?-1:k(_e,X,oe,Be,tt);if("number"==typeof X)return X&=255,"function"==typeof Uint8Array.prototype.indexOf?tt?Uint8Array.prototype.indexOf.call(_e,X,oe):Uint8Array.prototype.lastIndexOf.call(_e,X,oe):k(_e,[X],oe,Be,tt);throw new TypeError("val must be string, number or Buffer")}function k(_e,X,oe,Be,tt){let Gn,dt=1,Et=_e.length,ln=X.length;if(void 0!==Be&&("ucs2"===(Be=String(Be).toLowerCase())||"ucs-2"===Be||"utf16le"===Be||"utf-16le"===Be)){if(_e.length<2||X.length<2)return-1;dt=2,Et/=2,ln/=2,oe/=2}function Fn(kn,Bn){return 1===dt?kn[Bn]:kn.readUInt16BE(Bn*dt)}if(tt){let kn=-1;for(Gn=oe;Gn<Et;Gn++)if(Fn(_e,Gn)===Fn(X,-1===kn?0:Gn-kn)){if(-1===kn&&(kn=Gn),Gn-kn+1===ln)return kn*dt}else-1!==kn&&(Gn-=Gn-kn),kn=-1}else for(oe+ln>Et&&(oe=Et-ln),Gn=oe;Gn>=0;Gn--){let kn=!0;for(let Bn=0;Bn<ln;Bn++)if(Fn(_e,Gn+Bn)!==Fn(X,Bn)){kn=!1;break}if(kn)return Gn}return-1}function de(_e,X,oe,Be){oe=Number(oe)||0;const tt=_e.length-oe;Be?(Be=Number(Be))>tt&&(Be=tt):Be=tt;const dt=X.length;let Et;for(Be>dt/2&&(Be=dt/2),Et=0;Et<Be;++Et){const ln=parseInt(X.substr(2*Et,2),16);if(bt(ln))return Et;_e[oe+Et]=ln}return Et}function G(_e,X,oe,Be){return ze(U(X,_e.length-oe),_e,oe,Be)}function Ie(_e,X,oe,Be){return ze(function me(_e){const X=[];for(let oe=0;oe<_e.length;++oe)X.push(255&_e.charCodeAt(oe));return X}(X),_e,oe,Be)}function le(_e,X,oe,Be){return ze(ye(X),_e,oe,Be)}function ve(_e,X,oe,Be){return ze(function Ye(_e,X){let oe,Be,tt;const dt=[];for(let Et=0;Et<_e.length&&!((X-=2)<0);++Et)oe=_e.charCodeAt(Et),Be=oe>>8,tt=oe%256,dt.push(tt),dt.push(Be);return dt}(X,_e.length-oe),_e,oe,Be)}function Oe(_e,X,oe){return M.fromByteArray(0===X&&oe===_e.length?_e:_e.slice(X,oe))}function Le(_e,X,oe){oe=Math.min(_e.length,oe);const Be=[];let tt=X;for(;tt<oe;){const dt=_e[tt];let Et=null,ln=dt>239?4:dt>223?3:dt>191?2:1;if(tt+ln<=oe){let Fn,Gn,kn,Bn;switch(ln){case 1:dt<128&&(Et=dt);break;case 2:Fn=_e[tt+1],128==(192&Fn)&&(Bn=(31&dt)<<6|63&Fn,Bn>127&&(Et=Bn));break;case 3:Fn=_e[tt+1],Gn=_e[tt+2],128==(192&Fn)&&128==(192&Gn)&&(Bn=(15&dt)<<12|(63&Fn)<<6|63&Gn,Bn>2047&&(Bn<55296||Bn>57343)&&(Et=Bn));break;case 4:Fn=_e[tt+1],Gn=_e[tt+2],kn=_e[tt+3],128==(192&Fn)&&128==(192&Gn)&&128==(192&kn)&&(Bn=(15&dt)<<18|(63&Fn)<<12|(63&Gn)<<6|63&kn,Bn>65535&&Bn<1114112&&(Et=Bn))}}null===Et?(Et=65533,ln=1):Et>65535&&(Et-=65536,Be.push(Et>>>10&1023|55296),Et=56320|1023&Et),Be.push(Et),tt+=ln}return function qe(_e){const X=_e.length;if(X<=Qe)return String.fromCharCode.apply(String,_e);let oe="",Be=0;for(;Be<X;)oe+=String.fromCharCode.apply(String,_e.slice(Be,Be+=Qe));return oe}(Be)}q.kMaxLength=C,!(v.TYPED_ARRAY_SUPPORT=function R(){try{const _e=new Uint8Array(1),X={foo:function(){return 42}};return Object.setPrototypeOf(X,Uint8Array.prototype),Object.setPrototypeOf(_e,X),42===_e.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(_e,X,oe){return T(_e,X,oe)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(_e,X,oe){return function O(_e,X,oe){return j(_e),_e<=0?_(_e):void 0!==X?"string"==typeof oe?_(_e).fill(X,oe):_(_e).fill(X):_(_e)}(_e,X,oe)},v.allocUnsafe=function(_e){return B(_e)},v.allocUnsafeSlow=function(_e){return B(_e)},v.isBuffer=function(X){return null!=X&&!0===X._isBuffer&&X!==v.prototype},v.compare=function(X,oe){if(st(X,Uint8Array)&&(X=v.from(X,X.offset,X.byteLength)),st(oe,Uint8Array)&&(oe=v.from(oe,oe.offset,oe.byteLength)),!v.isBuffer(X)||!v.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===oe)return 0;let Be=X.length,tt=oe.length;for(let dt=0,Et=Math.min(Be,tt);dt<Et;++dt)if(X[dt]!==oe[dt]){Be=X[dt],tt=oe[dt];break}return Be<tt?-1:tt<Be?1:0},v.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(X,oe){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(0===X.length)return v.alloc(0);let Be;if(void 0===oe)for(oe=0,Be=0;Be<X.length;++Be)oe+=X[Be].length;const tt=v.allocUnsafe(oe);let dt=0;for(Be=0;Be<X.length;++Be){let Et=X[Be];if(st(Et,Uint8Array))dt+Et.length>tt.length?(v.isBuffer(Et)||(Et=v.from(Et)),Et.copy(tt,dt)):Uint8Array.prototype.set.call(tt,Et,dt);else{if(!v.isBuffer(Et))throw new TypeError('"list" argument must be an Array of Buffers');Et.copy(tt,dt)}dt+=Et.length}return tt},v.byteLength=$,v.prototype._isBuffer=!0,v.prototype.swap16=function(){const X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let oe=0;oe<X;oe+=2)w(this,oe,oe+1);return this},v.prototype.swap32=function(){const X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let oe=0;oe<X;oe+=4)w(this,oe,oe+3),w(this,oe+1,oe+2);return this},v.prototype.swap64=function(){const X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let oe=0;oe<X;oe+=8)w(this,oe,oe+7),w(this,oe+1,oe+6),w(this,oe+2,oe+5),w(this,oe+3,oe+4);return this},v.prototype.toLocaleString=v.prototype.toString=function(){const X=this.length;return 0===X?"":0===arguments.length?Le(this,0,X):H.apply(this,arguments)},v.prototype.equals=function(X){if(!v.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X||0===v.compare(this,X)},v.prototype.inspect=function(){let X="";const oe=q.INSPECT_MAX_BYTES;return X=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(X+=" ... "),"<Buffer "+X+">"},D&&(v.prototype[D]=v.prototype.inspect),v.prototype.compare=function(X,oe,Be,tt,dt){if(st(X,Uint8Array)&&(X=v.from(X,X.offset,X.byteLength)),!v.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(void 0===oe&&(oe=0),void 0===Be&&(Be=X?X.length:0),void 0===tt&&(tt=0),void 0===dt&&(dt=this.length),oe<0||Be>X.length||tt<0||dt>this.length)throw new RangeError("out of range index");if(tt>=dt&&oe>=Be)return 0;if(tt>=dt)return-1;if(oe>=Be)return 1;if(this===X)return 0;let Et=(dt>>>=0)-(tt>>>=0),ln=(Be>>>=0)-(oe>>>=0);const Fn=Math.min(Et,ln),Gn=this.slice(tt,dt),kn=X.slice(oe,Be);for(let Bn=0;Bn<Fn;++Bn)if(Gn[Bn]!==kn[Bn]){Et=Gn[Bn],ln=kn[Bn];break}return Et<ln?-1:ln<Et?1:0},v.prototype.includes=function(X,oe,Be){return-1!==this.indexOf(X,oe,Be)},v.prototype.indexOf=function(X,oe,Be){return P(this,X,oe,Be,!0)},v.prototype.lastIndexOf=function(X,oe,Be){return P(this,X,oe,Be,!1)},v.prototype.write=function(X,oe,Be,tt){if(void 0===oe)tt="utf8",Be=this.length,oe=0;else if(void 0===Be&&"string"==typeof oe)tt=oe,Be=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(Be)?(Be>>>=0,void 0===tt&&(tt="utf8")):(tt=Be,Be=void 0)}const dt=this.length-oe;if((void 0===Be||Be>dt)&&(Be=dt),X.length>0&&(Be<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");tt||(tt="utf8");let Et=!1;for(;;)switch(tt){case"hex":return de(this,X,oe,Be);case"utf8":case"utf-8":return G(this,X,oe,Be);case"ascii":case"latin1":case"binary":return Ie(this,X,oe,Be);case"base64":return le(this,X,oe,Be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,X,oe,Be);default:if(Et)throw new TypeError("Unknown encoding: "+tt);tt=(""+tt).toLowerCase(),Et=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Qe=4096;function Te(_e,X,oe){let Be="";oe=Math.min(_e.length,oe);for(let tt=X;tt<oe;++tt)Be+=String.fromCharCode(127&_e[tt]);return Be}function He(_e,X,oe){let Be="";oe=Math.min(_e.length,oe);for(let tt=X;tt<oe;++tt)Be+=String.fromCharCode(_e[tt]);return Be}function Me(_e,X,oe){const Be=_e.length;(!X||X<0)&&(X=0),(!oe||oe<0||oe>Be)&&(oe=Be);let tt="";for(let dt=X;dt<oe;++dt)tt+=At[_e[dt]];return tt}function Ue(_e,X,oe){const Be=_e.slice(X,oe);let tt="";for(let dt=0;dt<Be.length-1;dt+=2)tt+=String.fromCharCode(Be[dt]+256*Be[dt+1]);return tt}function fe(_e,X,oe){if(_e%1!=0||_e<0)throw new RangeError("offset is not uint");if(_e+X>oe)throw new RangeError("Trying to access beyond buffer length")}function Ce(_e,X,oe,Be,tt,dt){if(!v.isBuffer(_e))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>tt||X<dt)throw new RangeError('"value" argument is out of bounds');if(oe+Be>_e.length)throw new RangeError("Index out of range")}function nt(_e,X,oe,Be,tt){Ze(X,Be,tt,_e,oe,7);let dt=Number(X&BigInt(4294967295));_e[oe++]=dt,dt>>=8,_e[oe++]=dt,dt>>=8,_e[oe++]=dt,dt>>=8,_e[oe++]=dt;let Et=Number(X>>BigInt(32)&BigInt(4294967295));return _e[oe++]=Et,Et>>=8,_e[oe++]=Et,Et>>=8,_e[oe++]=Et,Et>>=8,_e[oe++]=Et,oe}function gt(_e,X,oe,Be,tt){Ze(X,Be,tt,_e,oe,7);let dt=Number(X&BigInt(4294967295));_e[oe+7]=dt,dt>>=8,_e[oe+6]=dt,dt>>=8,_e[oe+5]=dt,dt>>=8,_e[oe+4]=dt;let Et=Number(X>>BigInt(32)&BigInt(4294967295));return _e[oe+3]=Et,Et>>=8,_e[oe+2]=Et,Et>>=8,_e[oe+1]=Et,Et>>=8,_e[oe]=Et,oe+8}function Je(_e,X,oe,Be,tt,dt){if(oe+Be>_e.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("Index out of range")}function ge(_e,X,oe,Be,tt){return X=+X,oe>>>=0,tt||Je(_e,0,oe,4),y.write(_e,X,oe,Be,23,4),oe+4}function L(_e,X,oe,Be,tt){return X=+X,oe>>>=0,tt||Je(_e,0,oe,8),y.write(_e,X,oe,Be,52,8),oe+8}v.prototype.slice=function(X,oe){const Be=this.length;(X=~~X)<0?(X+=Be)<0&&(X=0):X>Be&&(X=Be),(oe=void 0===oe?Be:~~oe)<0?(oe+=Be)<0&&(oe=0):oe>Be&&(oe=Be),oe<X&&(oe=X);const tt=this.subarray(X,oe);return Object.setPrototypeOf(tt,v.prototype),tt},v.prototype.readUintLE=v.prototype.readUIntLE=function(X,oe,Be){X>>>=0,oe>>>=0,Be||fe(X,oe,this.length);let tt=this[X],dt=1,Et=0;for(;++Et<oe&&(dt*=256);)tt+=this[X+Et]*dt;return tt},v.prototype.readUintBE=v.prototype.readUIntBE=function(X,oe,Be){X>>>=0,oe>>>=0,Be||fe(X,oe,this.length);let tt=this[X+--oe],dt=1;for(;oe>0&&(dt*=256);)tt+=this[X+--oe]*dt;return tt},v.prototype.readUint8=v.prototype.readUInt8=function(X,oe){return X>>>=0,oe||fe(X,1,this.length),this[X]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(X,oe){return X>>>=0,oe||fe(X,2,this.length),this[X]|this[X+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(X,oe){return X>>>=0,oe||fe(X,2,this.length),this[X]<<8|this[X+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(X,oe){return X>>>=0,oe||fe(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+16777216*this[X+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(X,oe){return X>>>=0,oe||fe(X,4,this.length),16777216*this[X]+(this[X+1]<<16|this[X+2]<<8|this[X+3])},v.prototype.readBigUInt64LE=xt(function(X){pe(X>>>=0,"offset");const oe=this[X],Be=this[X+7];(void 0===oe||void 0===Be)&&re(X,this.length-8);const tt=oe+256*this[++X]+65536*this[++X]+this[++X]*2**24,dt=this[++X]+256*this[++X]+65536*this[++X]+Be*2**24;return BigInt(tt)+(BigInt(dt)<<BigInt(32))}),v.prototype.readBigUInt64BE=xt(function(X){pe(X>>>=0,"offset");const oe=this[X],Be=this[X+7];(void 0===oe||void 0===Be)&&re(X,this.length-8);const tt=oe*2**24+65536*this[++X]+256*this[++X]+this[++X],dt=this[++X]*2**24+65536*this[++X]+256*this[++X]+Be;return(BigInt(tt)<<BigInt(32))+BigInt(dt)}),v.prototype.readIntLE=function(X,oe,Be){X>>>=0,oe>>>=0,Be||fe(X,oe,this.length);let tt=this[X],dt=1,Et=0;for(;++Et<oe&&(dt*=256);)tt+=this[X+Et]*dt;return dt*=128,tt>=dt&&(tt-=Math.pow(2,8*oe)),tt},v.prototype.readIntBE=function(X,oe,Be){X>>>=0,oe>>>=0,Be||fe(X,oe,this.length);let tt=oe,dt=1,Et=this[X+--tt];for(;tt>0&&(dt*=256);)Et+=this[X+--tt]*dt;return dt*=128,Et>=dt&&(Et-=Math.pow(2,8*oe)),Et},v.prototype.readInt8=function(X,oe){return X>>>=0,oe||fe(X,1,this.length),128&this[X]?-1*(255-this[X]+1):this[X]},v.prototype.readInt16LE=function(X,oe){X>>>=0,oe||fe(X,2,this.length);const Be=this[X]|this[X+1]<<8;return 32768&Be?4294901760|Be:Be},v.prototype.readInt16BE=function(X,oe){X>>>=0,oe||fe(X,2,this.length);const Be=this[X+1]|this[X]<<8;return 32768&Be?4294901760|Be:Be},v.prototype.readInt32LE=function(X,oe){return X>>>=0,oe||fe(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},v.prototype.readInt32BE=function(X,oe){return X>>>=0,oe||fe(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},v.prototype.readBigInt64LE=xt(function(X){pe(X>>>=0,"offset");const oe=this[X],Be=this[X+7];return(void 0===oe||void 0===Be)&&re(X,this.length-8),(BigInt(this[X+4]+256*this[X+5]+65536*this[X+6]+(Be<<24))<<BigInt(32))+BigInt(oe+256*this[++X]+65536*this[++X]+this[++X]*2**24)}),v.prototype.readBigInt64BE=xt(function(X){pe(X>>>=0,"offset");const oe=this[X],Be=this[X+7];(void 0===oe||void 0===Be)&&re(X,this.length-8);const tt=(oe<<24)+65536*this[++X]+256*this[++X]+this[++X];return(BigInt(tt)<<BigInt(32))+BigInt(this[++X]*2**24+65536*this[++X]+256*this[++X]+Be)}),v.prototype.readFloatLE=function(X,oe){return X>>>=0,oe||fe(X,4,this.length),y.read(this,X,!0,23,4)},v.prototype.readFloatBE=function(X,oe){return X>>>=0,oe||fe(X,4,this.length),y.read(this,X,!1,23,4)},v.prototype.readDoubleLE=function(X,oe){return X>>>=0,oe||fe(X,8,this.length),y.read(this,X,!0,52,8)},v.prototype.readDoubleBE=function(X,oe){return X>>>=0,oe||fe(X,8,this.length),y.read(this,X,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(X,oe,Be,tt){X=+X,oe>>>=0,Be>>>=0,tt||Ce(this,X,oe,Be,Math.pow(2,8*Be)-1,0);let dt=1,Et=0;for(this[oe]=255&X;++Et<Be&&(dt*=256);)this[oe+Et]=X/dt&255;return oe+Be},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(X,oe,Be,tt){X=+X,oe>>>=0,Be>>>=0,tt||Ce(this,X,oe,Be,Math.pow(2,8*Be)-1,0);let dt=Be-1,Et=1;for(this[oe+dt]=255&X;--dt>=0&&(Et*=256);)this[oe+dt]=X/Et&255;return oe+Be},v.prototype.writeUint8=v.prototype.writeUInt8=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,1,255,0),this[oe]=255&X,oe+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,2,65535,0),this[oe]=255&X,this[oe+1]=X>>>8,oe+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,2,65535,0),this[oe]=X>>>8,this[oe+1]=255&X,oe+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,4,4294967295,0),this[oe+3]=X>>>24,this[oe+2]=X>>>16,this[oe+1]=X>>>8,this[oe]=255&X,oe+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,4,4294967295,0),this[oe]=X>>>24,this[oe+1]=X>>>16,this[oe+2]=X>>>8,this[oe+3]=255&X,oe+4},v.prototype.writeBigUInt64LE=xt(function(X,oe=0){return nt(this,X,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeBigUInt64BE=xt(function(X,oe=0){return gt(this,X,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeIntLE=function(X,oe,Be,tt){if(X=+X,oe>>>=0,!tt){const Fn=Math.pow(2,8*Be-1);Ce(this,X,oe,Be,Fn-1,-Fn)}let dt=0,Et=1,ln=0;for(this[oe]=255&X;++dt<Be&&(Et*=256);)X<0&&0===ln&&0!==this[oe+dt-1]&&(ln=1),this[oe+dt]=(X/Et>>0)-ln&255;return oe+Be},v.prototype.writeIntBE=function(X,oe,Be,tt){if(X=+X,oe>>>=0,!tt){const Fn=Math.pow(2,8*Be-1);Ce(this,X,oe,Be,Fn-1,-Fn)}let dt=Be-1,Et=1,ln=0;for(this[oe+dt]=255&X;--dt>=0&&(Et*=256);)X<0&&0===ln&&0!==this[oe+dt+1]&&(ln=1),this[oe+dt]=(X/Et>>0)-ln&255;return oe+Be},v.prototype.writeInt8=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,1,127,-128),X<0&&(X=255+X+1),this[oe]=255&X,oe+1},v.prototype.writeInt16LE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,2,32767,-32768),this[oe]=255&X,this[oe+1]=X>>>8,oe+2},v.prototype.writeInt16BE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,2,32767,-32768),this[oe]=X>>>8,this[oe+1]=255&X,oe+2},v.prototype.writeInt32LE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,4,2147483647,-2147483648),this[oe]=255&X,this[oe+1]=X>>>8,this[oe+2]=X>>>16,this[oe+3]=X>>>24,oe+4},v.prototype.writeInt32BE=function(X,oe,Be){return X=+X,oe>>>=0,Be||Ce(this,X,oe,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),this[oe]=X>>>24,this[oe+1]=X>>>16,this[oe+2]=X>>>8,this[oe+3]=255&X,oe+4},v.prototype.writeBigInt64LE=xt(function(X,oe=0){return nt(this,X,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeBigInt64BE=xt(function(X,oe=0){return gt(this,X,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeFloatLE=function(X,oe,Be){return ge(this,X,oe,!0,Be)},v.prototype.writeFloatBE=function(X,oe,Be){return ge(this,X,oe,!1,Be)},v.prototype.writeDoubleLE=function(X,oe,Be){return L(this,X,oe,!0,Be)},v.prototype.writeDoubleBE=function(X,oe,Be){return L(this,X,oe,!1,Be)},v.prototype.copy=function(X,oe,Be,tt){if(!v.isBuffer(X))throw new TypeError("argument should be a Buffer");if(Be||(Be=0),!tt&&0!==tt&&(tt=this.length),oe>=X.length&&(oe=X.length),oe||(oe=0),tt>0&&tt<Be&&(tt=Be),tt===Be||0===X.length||0===this.length)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(Be<0||Be>=this.length)throw new RangeError("Index out of range");if(tt<0)throw new RangeError("sourceEnd out of bounds");tt>this.length&&(tt=this.length),X.length-oe<tt-Be&&(tt=X.length-oe+Be);const dt=tt-Be;return this===X&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(oe,Be,tt):Uint8Array.prototype.set.call(X,this.subarray(Be,tt),oe),dt},v.prototype.fill=function(X,oe,Be,tt){if("string"==typeof X){if("string"==typeof oe?(tt=oe,oe=0,Be=this.length):"string"==typeof Be&&(tt=Be,Be=this.length),void 0!==tt&&"string"!=typeof tt)throw new TypeError("encoding must be a string");if("string"==typeof tt&&!v.isEncoding(tt))throw new TypeError("Unknown encoding: "+tt);if(1===X.length){const Et=X.charCodeAt(0);("utf8"===tt&&Et<128||"latin1"===tt)&&(X=Et)}}else"number"==typeof X?X&=255:"boolean"==typeof X&&(X=Number(X));if(oe<0||this.length<oe||this.length<Be)throw new RangeError("Out of range index");if(Be<=oe)return this;let dt;if(oe>>>=0,Be=void 0===Be?this.length:Be>>>0,X||(X=0),"number"==typeof X)for(dt=oe;dt<Be;++dt)this[dt]=X;else{const Et=v.isBuffer(X)?X:v.from(X,tt),ln=Et.length;if(0===ln)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(dt=0;dt<Be-oe;++dt)this[dt+oe]=Et[dt%ln]}return this};const I={};function ae(_e,X,oe){I[_e]=class extends oe{constructor(){super(),Object.defineProperty(this,"message",{value:X.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_e}]`,delete this.name}get code(){return _e}set code(tt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:tt,writable:!0})}toString(){return`${this.name} [${_e}]: ${this.message}`}}}function ie(_e){let X="",oe=_e.length;const Be="-"===_e[0]?1:0;for(;oe>=Be+4;oe-=3)X=`_${_e.slice(oe-3,oe)}${X}`;return`${_e.slice(0,oe)}${X}`}function Ze(_e,X,oe,Be,tt,dt){if(_e>oe||_e<X){const Et="bigint"==typeof X?"n":"";let ln;throw ln=dt>3?0===X||X===BigInt(0)?`>= 0${Et} and < 2${Et} ** ${8*(dt+1)}${Et}`:`>= -(2${Et} ** ${8*(dt+1)-1}${Et}) and < 2 ** ${8*(dt+1)-1}${Et}`:`>= ${X}${Et} and <= ${oe}${Et}`,new I.ERR_OUT_OF_RANGE("value",ln,_e)}!function Ge(_e,X,oe){pe(X,"offset"),(void 0===_e[X]||void 0===_e[X+oe])&&re(X,_e.length-(oe+1))}(Be,tt,dt)}function pe(_e,X){if("number"!=typeof _e)throw new I.ERR_INVALID_ARG_TYPE(X,"number",_e)}function re(_e,X,oe){throw Math.floor(_e)!==_e?(pe(_e,oe),new I.ERR_OUT_OF_RANGE(oe||"offset","an integer",_e)):X<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(oe||"offset",`>= ${oe?1:0} and <= ${X}`,_e)}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(_e){return _e?`${_e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(_e,X){return`The "${_e}" argument must be of type number. Received type ${typeof X}`},TypeError),ae("ERR_OUT_OF_RANGE",function(_e,X,oe){let Be=`The value of "${_e}" is out of range.`,tt=oe;return Number.isInteger(oe)&&Math.abs(oe)>2**32?tt=ie(String(oe)):"bigint"==typeof oe&&(tt=String(oe),(oe>BigInt(2)**BigInt(32)||oe<-(BigInt(2)**BigInt(32)))&&(tt=ie(tt)),tt+="n"),Be+=` It must be ${X}. Received ${tt}`,Be},RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function U(_e,X){let oe;X=X||1/0;const Be=_e.length;let tt=null;const dt=[];for(let Et=0;Et<Be;++Et){if(oe=_e.charCodeAt(Et),oe>55295&&oe<57344){if(!tt){if(oe>56319){(X-=3)>-1&&dt.push(239,191,189);continue}if(Et+1===Be){(X-=3)>-1&&dt.push(239,191,189);continue}tt=oe;continue}if(oe<56320){(X-=3)>-1&&dt.push(239,191,189),tt=oe;continue}oe=65536+(tt-55296<<10|oe-56320)}else tt&&(X-=3)>-1&&dt.push(239,191,189);if(tt=null,oe<128){if((X-=1)<0)break;dt.push(oe)}else if(oe<2048){if((X-=2)<0)break;dt.push(oe>>6|192,63&oe|128)}else if(oe<65536){if((X-=3)<0)break;dt.push(oe>>12|224,oe>>6&63|128,63&oe|128)}else{if(!(oe<1114112))throw new Error("Invalid code point");if((X-=4)<0)break;dt.push(oe>>18|240,oe>>12&63|128,oe>>6&63|128,63&oe|128)}}return dt}function ye(_e){return M.toByteArray(function N(_e){if((_e=(_e=_e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;_e.length%4!=0;)_e+="=";return _e}(_e))}function ze(_e,X,oe,Be){let tt;for(tt=0;tt<Be&&!(tt+oe>=X.length||tt>=_e.length);++tt)X[tt+oe]=_e[tt];return tt}function st(_e,X){return _e instanceof X||null!=_e&&null!=_e.constructor&&null!=_e.constructor.name&&_e.constructor.name===X.name}function bt(_e){return _e!=_e}const At=function(){const _e="0123456789abcdef",X=new Array(256);for(let oe=0;oe<16;++oe){const Be=16*oe;for(let tt=0;tt<16;++tt)X[Be+tt]=_e[oe]+_e[tt]}return X}();function xt(_e){return typeof BigInt>"u"?Xt:_e}function Xt(){throw new Error("BigInt not supported")}},7054:function(ee,q,g){"use strict";var M=this&&this.__createBinding||(Object.create?function(D,C,R,_){void 0===_&&(_=R),Object.defineProperty(D,_,{enumerable:!0,get:function(){return C[R]}})}:function(D,C,R,_){void 0===_&&(_=R),D[_]=C[R]}),y=this&&this.__exportStar||function(D,C){for(var R in D)"default"!==R&&!Object.prototype.hasOwnProperty.call(C,R)&&M(C,D,R)};Object.defineProperty(q,"__esModule",{value:!0}),y(g(361),q)},361:(ee,q)=>{"use strict";function M(C){const R=[];let _=0;for(;_<C.length;)switch(C[_]){case"/":if("."===C[_+1])if("."===C[_+2]){if(!D(C[_+3])){R.push([]),_++;break}R.pop(),C[_+3]||R.push([]),_+=3}else{if(!D(C[_+2])){R.push([]),_++;break}C[_+2]||R.push([]),_+=2}else R.push([]),_++;break;case"#":case"?":R.length||R.push([]),R[R.length-1].push(C.substr(_)),_=C.length;break;default:R.length||R.push([]),R[R.length-1].push(C[_]),_++}return"/"+R.map(v=>v.join("")).join("/")}function y(C,R){let _=R+1;R>=0?"/"===C[R+1]&&"/"===C[R+2]&&(_=R+3):"/"===C[0]&&"/"===C[1]&&(_=2);const v=C.indexOf("/",_);return v<0?C:C.substr(0,v)+M(C.substr(v))}function D(C){return!C||"#"===C||"?"===C||"/"===C}Object.defineProperty(q,"__esModule",{value:!0}),q.removeDotSegmentsOfPath=q.removeDotSegments=q.resolve=void 0,q.resolve=function g(C,R){const _=(R=R||"").indexOf("#");if(_>0&&(R=R.substr(0,_)),!C.length){if(R.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${R}' for value '${C}'`);return R}if(C.startsWith("?")){const A=R.indexOf("?");return A>0&&(R=R.substr(0,A)),R+C}if(C.startsWith("#"))return R+C;if(!R.length){const A=C.indexOf(":");if(A<0)throw new Error(`Found invalid relative IRI '${C}' for a missing baseIRI`);return y(C,A)}const v=C.indexOf(":");if(v>=0)return y(C,v);const T=R.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${R}' for value '${C}'`);const j=R.substr(0,T+1);if(0===C.indexOf("//"))return j+y(C,v);let O;if(R.indexOf("//",T)===T+1){if(O=R.indexOf("/",T+3),O<0)return R.length>T+3?R+"/"+y(C,v):j+y(C,v)}else if(O=R.indexOf("/",T+1),O<0)return j+y(C,v);if(0===C.indexOf("/"))return R.substr(0,O)+M(C);let B=R.substr(O);const Q=B.lastIndexOf("/");return Q>=0&&Q<B.length-1&&(B=B.substr(0,Q+1),"."===C[0]&&"."!==C[1]&&"/"!==C[1]&&C[2]&&(C=C.substr(1))),C=M(C=B+C),R.substr(0,O)+C},q.removeDotSegments=M,q.removeDotSegmentsOfPath=y},9528:(ee,q,g)=>{!function(M){M.parser=function(L,I){return new D(L,I)},M.SAXParser=D,M.SAXStream=O,M.createStream=function j(L,I){return new O(L,I)},M.MAX_BUFFER_LENGTH=65536;var v,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function D(L,I){if(!(this instanceof D))return new D(L,I);var ae=this;(function R(L){for(var I=0,ae=y.length;I<ae;I++)L[y[I]]=""})(ae),ae.q=ae.c="",ae.bufferCheckPosition=M.MAX_BUFFER_LENGTH,ae.opt=I||{},ae.opt.lowercase=ae.opt.lowercase||ae.opt.lowercasetags,ae.looseCase=ae.opt.lowercase?"toLowerCase":"toUpperCase",ae.tags=[],ae.closed=ae.closedRoot=ae.sawRoot=!1,ae.tag=ae.error=null,ae.strict=!!L,ae.noscript=!(!L&&!ae.opt.noscript),ae.state=G.BEGIN,ae.strictEntities=ae.opt.strictEntities,ae.ENTITIES=Object.create(ae.strictEntities?M.XML_ENTITIES:M.ENTITIES),ae.attribList=[],ae.opt.xmlns&&(ae.ns=Object.create(ce)),ae.trackPosition=!1!==ae.opt.position,ae.trackPosition&&(ae.position=ae.line=ae.column=0),le(ae,"onready")}M.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(L){function I(){}return I.prototype=L,new I}),Object.keys||(Object.keys=function(L){var I=[];for(var ae in L)L.hasOwnProperty(ae)&&I.push(ae);return I}),D.prototype={end:function(){qe(this)},write:function ge(L){var I=this;if(this.error)throw this.error;if(I.closed)return Qe(I,"Cannot write after close. Assign an onready handler.");if(null===L)return qe(I);"object"==typeof L&&(L=L.toString());for(var ae=0,ie="";ie=Je(L,ae++),I.c=ie,ie;)switch(I.trackPosition&&(I.position++,"\n"===ie?(I.line++,I.column=0):I.column++),I.state){case G.BEGIN:if(I.state=G.BEGIN_WHITESPACE,"\ufeff"===ie)continue;gt(I,ie);continue;case G.BEGIN_WHITESPACE:gt(I,ie);continue;case G.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Ge=ae-1;ie&&"<"!==ie&&"&"!==ie;)(ie=Je(L,ae++))&&I.trackPosition&&(I.position++,"\n"===ie?(I.line++,I.column=0):I.column++);I.textNode+=L.substring(Ge,ae-1)}"<"!==ie||I.sawRoot&&I.closedRoot&&!I.strict?(!H(ie)&&(!I.sawRoot||I.closedRoot)&&Te(I,"Text data outside of root node."),"&"===ie?I.state=G.TEXT_ENTITY:I.textNode+=ie):(I.state=G.OPEN_WAKA,I.startTagPosition=I.position);continue;case G.SCRIPT:"<"===ie?I.state=G.SCRIPT_ENDING:I.script+=ie;continue;case G.SCRIPT_ENDING:"/"===ie?I.state=G.CLOSE_TAG:(I.script+="<"+ie,I.state=G.SCRIPT);continue;case G.OPEN_WAKA:"!"===ie?(I.state=G.SGML_DECL,I.sgmlDecl=""):H(ie)||(k(K,ie)?(I.state=G.OPEN_TAG,I.tagName=ie):"/"===ie?(I.state=G.CLOSE_TAG,I.tagName=""):"?"===ie?(I.state=G.PROC_INST,I.procInstName=I.procInstBody=""):(Te(I,"Unencoded <"),I.startTagPosition+1<I.position&&(ie=new Array(I.position-I.startTagPosition).join(" ")+ie),I.textNode+="<"+ie,I.state=G.TEXT));continue;case G.SGML_DECL:(I.sgmlDecl+ie).toUpperCase()===B?(ve(I,"onopencdata"),I.state=G.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+ie==="--"?(I.state=G.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+ie).toUpperCase()===Q?(I.state=G.DOCTYPE,(I.doctype||I.sawRoot)&&Te(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===ie?(ve(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=G.TEXT):(w(ie)&&(I.state=G.SGML_DECL_QUOTED),I.sgmlDecl+=ie);continue;case G.SGML_DECL_QUOTED:ie===I.q&&(I.state=G.SGML_DECL,I.q=""),I.sgmlDecl+=ie;continue;case G.DOCTYPE:">"===ie?(I.state=G.TEXT,ve(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=ie,"["===ie?I.state=G.DOCTYPE_DTD:w(ie)&&(I.state=G.DOCTYPE_QUOTED,I.q=ie));continue;case G.DOCTYPE_QUOTED:I.doctype+=ie,ie===I.q&&(I.q="",I.state=G.DOCTYPE);continue;case G.DOCTYPE_DTD:I.doctype+=ie,"]"===ie?I.state=G.DOCTYPE:w(ie)&&(I.state=G.DOCTYPE_DTD_QUOTED,I.q=ie);continue;case G.DOCTYPE_DTD_QUOTED:I.doctype+=ie,ie===I.q&&(I.state=G.DOCTYPE_DTD,I.q="");continue;case G.COMMENT:"-"===ie?I.state=G.COMMENT_ENDING:I.comment+=ie;continue;case G.COMMENT_ENDING:"-"===ie?(I.state=G.COMMENT_ENDED,I.comment=Le(I.opt,I.comment),I.comment&&ve(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+ie,I.state=G.COMMENT);continue;case G.COMMENT_ENDED:">"!==ie?(Te(I,"Malformed comment"),I.comment+="--"+ie,I.state=G.COMMENT):I.state=G.TEXT;continue;case G.CDATA:"]"===ie?I.state=G.CDATA_ENDING:I.cdata+=ie;continue;case G.CDATA_ENDING:"]"===ie?I.state=G.CDATA_ENDING_2:(I.cdata+="]"+ie,I.state=G.CDATA);continue;case G.CDATA_ENDING_2:">"===ie?(I.cdata&&ve(I,"oncdata",I.cdata),ve(I,"onclosecdata"),I.cdata="",I.state=G.TEXT):"]"===ie?I.cdata+="]":(I.cdata+="]]"+ie,I.state=G.CDATA);continue;case G.PROC_INST:"?"===ie?I.state=G.PROC_INST_ENDING:H(ie)?I.state=G.PROC_INST_BODY:I.procInstName+=ie;continue;case G.PROC_INST_BODY:if(!I.procInstBody&&H(ie))continue;"?"===ie?I.state=G.PROC_INST_ENDING:I.procInstBody+=ie;continue;case G.PROC_INST_ENDING:">"===ie?(ve(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=G.TEXT):(I.procInstBody+="?"+ie,I.state=G.PROC_INST_BODY);continue;case G.OPEN_TAG:k(J,ie)?I.tagName+=ie:(He(I),">"===ie?fe(I):"/"===ie?I.state=G.OPEN_TAG_SLASH:(H(ie)||Te(I,"Invalid character in tag name"),I.state=G.ATTRIB));continue;case G.OPEN_TAG_SLASH:">"===ie?(fe(I,!0),Ce(I)):(Te(I,"Forward-slash in opening tag not followed by >"),I.state=G.ATTRIB);continue;case G.ATTRIB:if(H(ie))continue;">"===ie?fe(I):"/"===ie?I.state=G.OPEN_TAG_SLASH:k(K,ie)?(I.attribName=ie,I.attribValue="",I.state=G.ATTRIB_NAME):Te(I,"Invalid attribute name");continue;case G.ATTRIB_NAME:"="===ie?I.state=G.ATTRIB_VALUE:">"===ie?(Te(I,"Attribute without value"),I.attribValue=I.attribName,Ue(I),fe(I)):H(ie)?I.state=G.ATTRIB_NAME_SAW_WHITE:k(J,ie)?I.attribName+=ie:Te(I,"Invalid attribute name");continue;case G.ATTRIB_NAME_SAW_WHITE:if("="===ie)I.state=G.ATTRIB_VALUE;else{if(H(ie))continue;Te(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",ve(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===ie?fe(I):k(K,ie)?(I.attribName=ie,I.state=G.ATTRIB_NAME):(Te(I,"Invalid attribute name"),I.state=G.ATTRIB)}continue;case G.ATTRIB_VALUE:if(H(ie))continue;w(ie)?(I.q=ie,I.state=G.ATTRIB_VALUE_QUOTED):(Te(I,"Unquoted attribute value"),I.state=G.ATTRIB_VALUE_UNQUOTED,I.attribValue=ie);continue;case G.ATTRIB_VALUE_QUOTED:if(ie!==I.q){"&"===ie?I.state=G.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=ie;continue}Ue(I),I.q="",I.state=G.ATTRIB_VALUE_CLOSED;continue;case G.ATTRIB_VALUE_CLOSED:H(ie)?I.state=G.ATTRIB:">"===ie?fe(I):"/"===ie?I.state=G.OPEN_TAG_SLASH:k(K,ie)?(Te(I,"No whitespace between attributes"),I.attribName=ie,I.attribValue="",I.state=G.ATTRIB_NAME):Te(I,"Invalid attribute name");continue;case G.ATTRIB_VALUE_UNQUOTED:if(!P(ie)){"&"===ie?I.state=G.ATTRIB_VALUE_ENTITY_U:I.attribValue+=ie;continue}Ue(I),">"===ie?fe(I):I.state=G.ATTRIB;continue;case G.CLOSE_TAG:if(I.tagName)">"===ie?Ce(I):k(J,ie)?I.tagName+=ie:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=G.SCRIPT):(H(ie)||Te(I,"Invalid tagname in closing tag"),I.state=G.CLOSE_TAG_SAW_WHITE);else{if(H(ie))continue;de(K,ie)?I.script?(I.script+="</"+ie,I.state=G.SCRIPT):Te(I,"Invalid tagname in closing tag."):I.tagName=ie}continue;case G.CLOSE_TAG_SAW_WHITE:if(H(ie))continue;">"===ie?Ce(I):Te(I,"Invalid characters in closing tag");continue;case G.TEXT_ENTITY:case G.ATTRIB_VALUE_ENTITY_Q:case G.ATTRIB_VALUE_ENTITY_U:var pe,re;switch(I.state){case G.TEXT_ENTITY:pe=G.TEXT,re="textNode";break;case G.ATTRIB_VALUE_ENTITY_Q:pe=G.ATTRIB_VALUE_QUOTED,re="attribValue";break;case G.ATTRIB_VALUE_ENTITY_U:pe=G.ATTRIB_VALUE_UNQUOTED,re="attribValue"}if(";"===ie)if(I.opt.unparsedEntities){var Y=nt(I);I.entity="",I.state=pe,I.write(Y)}else I[re]+=nt(I),I.entity="",I.state=pe;else k(I.entity.length?$:Z,ie)?I.entity+=ie:(Te(I,"Invalid character in entity name"),I[re]+="&"+I.entity+ie,I.entity="",I.state=pe);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function C(L){for(var I=Math.max(M.MAX_BUFFER_LENGTH,10),ae=0,ie=0,Ge=y.length;ie<Ge;ie++){var Ze=L[y[ie]].length;if(Ze>I)switch(y[ie]){case"textNode":Oe(L);break;case"cdata":ve(L,"oncdata",L.cdata),L.cdata="";break;case"script":ve(L,"onscript",L.script),L.script="";break;default:Qe(L,"Max buffer length exceeded: "+y[ie])}ae=Math.max(ae,Ze)}L.bufferCheckPosition=M.MAX_BUFFER_LENGTH-ae+L.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(L){Oe(L),""!==L.cdata&&(ve(L,"oncdata",L.cdata),L.cdata=""),""!==L.script&&(ve(L,"onscript",L.script),L.script="")}(this)}};try{v=g(1793).Stream}catch{v=function(){}}v||(v=function(){});var T=M.EVENTS.filter(function(L){return"error"!==L&&"end"!==L});function O(L,I){if(!(this instanceof O))return new O(L,I);v.apply(this),this._parser=new D(L,I),this.writable=!0,this.readable=!0;var ae=this;this._parser.onend=function(){ae.emit("end")},this._parser.onerror=function(ie){ae.emit("error",ie),ae._parser.error=null},this._decoder=null,T.forEach(function(ie){Object.defineProperty(ae,"on"+ie,{get:function(){return ae._parser["on"+ie]},set:function(Ge){if(!Ge)return ae.removeAllListeners(ie),ae._parser["on"+ie]=Ge,Ge;ae.on(ie,Ge)},enumerable:!0,configurable:!1})})}(O.prototype=Object.create(v.prototype,{constructor:{value:O}})).write=function(L){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(L)){if(!this._decoder){var I=g(2024).StringDecoder;this._decoder=new I("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},O.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},O.prototype.on=function(L,I){var ae=this;return!ae._parser["on"+L]&&-1!==T.indexOf(L)&&(ae._parser["on"+L]=function(){var ie=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ie.splice(0,0,L),ae.emit.apply(ae,ie)}),v.prototype.on.call(ae,L,I)};var B="[CDATA[",Q="DOCTYPE",A="http://www.w3.org/XML/1998/namespace",F="http://www.w3.org/2000/xmlns/",ce={xml:A,xmlns:F},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,J=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,Z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function H(L){return" "===L||"\n"===L||"\r"===L||"\t"===L}function w(L){return'"'===L||"'"===L}function P(L){return">"===L||H(L)}function k(L,I){return L.test(I)}function de(L,I){return!k(L,I)}var L,I,ae,G=0;for(var Ie in M.STATE={BEGIN:G++,BEGIN_WHITESPACE:G++,TEXT:G++,TEXT_ENTITY:G++,OPEN_WAKA:G++,SGML_DECL:G++,SGML_DECL_QUOTED:G++,DOCTYPE:G++,DOCTYPE_QUOTED:G++,DOCTYPE_DTD:G++,DOCTYPE_DTD_QUOTED:G++,COMMENT_STARTING:G++,COMMENT:G++,COMMENT_ENDING:G++,COMMENT_ENDED:G++,CDATA:G++,CDATA_ENDING:G++,CDATA_ENDING_2:G++,PROC_INST:G++,PROC_INST_BODY:G++,PROC_INST_ENDING:G++,OPEN_TAG:G++,OPEN_TAG_SLASH:G++,ATTRIB:G++,ATTRIB_NAME:G++,ATTRIB_NAME_SAW_WHITE:G++,ATTRIB_VALUE:G++,ATTRIB_VALUE_QUOTED:G++,ATTRIB_VALUE_CLOSED:G++,ATTRIB_VALUE_UNQUOTED:G++,ATTRIB_VALUE_ENTITY_Q:G++,ATTRIB_VALUE_ENTITY_U:G++,CLOSE_TAG:G++,CLOSE_TAG_SAW_WHITE:G++,SCRIPT:G++,SCRIPT_ENDING:G++},M.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},M.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(M.ENTITIES).forEach(function(L){var I=M.ENTITIES[L],ae="number"==typeof I?String.fromCharCode(I):I;M.ENTITIES[L]=ae}),M.STATE)M.STATE[M.STATE[Ie]]=Ie;function le(L,I,ae){L[I]&&L[I](ae)}function ve(L,I,ae){L.textNode&&Oe(L),le(L,I,ae)}function Oe(L){L.textNode=Le(L.opt,L.textNode),L.textNode&&le(L,"ontext",L.textNode),L.textNode=""}function Le(L,I){return L.trim&&(I=I.trim()),L.normalize&&(I=I.replace(/\s+/g," ")),I}function Qe(L,I){return Oe(L),L.trackPosition&&(I+="\nLine: "+L.line+"\nColumn: "+L.column+"\nChar: "+L.c),I=new Error(I),L.error=I,le(L,"onerror",I),L}function qe(L){return L.sawRoot&&!L.closedRoot&&Te(L,"Unclosed root tag"),L.state!==G.BEGIN&&L.state!==G.BEGIN_WHITESPACE&&L.state!==G.TEXT&&Qe(L,"Unexpected end"),Oe(L),L.c="",L.closed=!0,le(L,"onend"),D.call(L,L.strict,L.opt),L}function Te(L,I){if("object"!=typeof L||!(L instanceof D))throw new Error("bad call to strictFail");L.strict&&Qe(L,I)}function He(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var I=L.tags[L.tags.length-1]||L,ae=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(ae.ns=I.ns),L.attribList.length=0,ve(L,"onopentagstart",ae)}function Me(L,I){var ie=L.indexOf(":")<0?["",L]:L.split(":"),Ge=ie[0],Ze=ie[1];return I&&"xmlns"===L&&(Ge="xmlns",Ze=""),{prefix:Ge,local:Ze}}function Ue(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),-1!==L.attribList.indexOf(L.attribName)||L.tag.attributes.hasOwnProperty(L.attribName))L.attribName=L.attribValue="";else{if(L.opt.xmlns){var I=Me(L.attribName,!0),ie=I.local;if("xmlns"===I.prefix)if("xml"===ie&&L.attribValue!==A)Te(L,"xml: prefix must be bound to "+A+"\nActual: "+L.attribValue);else if("xmlns"===ie&&L.attribValue!==F)Te(L,"xmlns: prefix must be bound to "+F+"\nActual: "+L.attribValue);else{var Ge=L.tag,Ze=L.tags[L.tags.length-1]||L;Ge.ns===Ze.ns&&(Ge.ns=Object.create(Ze.ns)),Ge.ns[ie]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,ve(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}}function fe(L,I){if(L.opt.xmlns){var ae=L.tag,ie=Me(L.tagName);ae.prefix=ie.prefix,ae.local=ie.local,ae.uri=ae.ns[ie.prefix]||"",ae.prefix&&!ae.uri&&(Te(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),ae.uri=ie.prefix),ae.ns&&(L.tags[L.tags.length-1]||L).ns!==ae.ns&&Object.keys(ae.ns).forEach(function(st){ve(L,"onopennamespace",{prefix:st,uri:ae.ns[st]})});for(var Ze=0,pe=L.attribList.length;Ze<pe;Ze++){var re=L.attribList[Ze],Y=re[0],N=re[1],U=Me(Y,!0),me=U.prefix,ye=""===me?"":ae.ns[me]||"",ze={name:Y,value:N,prefix:me,local:U.local,uri:ye};me&&"xmlns"!==me&&!ye&&(Te(L,"Unbound namespace prefix: "+JSON.stringify(me)),ze.uri=me),L.tag.attributes[Y]=ze,ve(L,"onattribute",ze)}L.attribList.length=0}L.tag.isSelfClosing=!!I,L.sawRoot=!0,L.tags.push(L.tag),ve(L,"onopentag",L.tag),I||(L.state=L.noscript||"script"!==L.tagName.toLowerCase()?G.TEXT:G.SCRIPT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function Ce(L){if(!L.tagName)return Te(L,"Weird empty close tag."),L.textNode+="</>",void(L.state=G.TEXT);if(L.script){if("script"!==L.tagName)return L.script+="</"+L.tagName+">",L.tagName="",void(L.state=G.SCRIPT);ve(L,"onscript",L.script),L.script=""}var I=L.tags.length,ae=L.tagName;L.strict||(ae=ae[L.looseCase]());for(var ie=ae;I--&&L.tags[I].name!==ie;)Te(L,"Unexpected close tag");if(I<0)return Te(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",void(L.state=G.TEXT);L.tagName=ae;for(var Ze=L.tags.length;Ze-- >I;){var pe=L.tag=L.tags.pop();L.tagName=L.tag.name,ve(L,"onclosetag",L.tagName);var re={};for(var Y in pe.ns)re[Y]=pe.ns[Y];L.opt.xmlns&&pe.ns!==(L.tags[L.tags.length-1]||L).ns&&Object.keys(pe.ns).forEach(function(U){ve(L,"onclosenamespace",{prefix:U,uri:pe.ns[U]})})}0===I&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=G.TEXT}function nt(L){var ie,I=L.entity,ae=I.toLowerCase(),Ge="";return L.ENTITIES[I]?L.ENTITIES[I]:L.ENTITIES[ae]?L.ENTITIES[ae]:("#"===(I=ae).charAt(0)&&("x"===I.charAt(1)?(I=I.slice(2),Ge=(ie=parseInt(I,16)).toString(16)):(I=I.slice(1),Ge=(ie=parseInt(I,10)).toString(10))),I=I.replace(/^0+/,""),isNaN(ie)||Ge.toLowerCase()!==I?(Te(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(ie))}function gt(L,I){"<"===I?(L.state=G.OPEN_WAKA,L.startTagPosition=L.position):H(I)||(Te(L,"Non-whitespace before first tag."),L.textNode=I,L.state=G.TEXT)}function Je(L,I){var ae="";return I<L.length&&(ae=L.charAt(I)),ae}G=M.STATE,String.fromCodePoint||(L=String.fromCharCode,I=Math.floor,ae=function(){var Ge=[],re=-1,Y=arguments.length;if(!Y)return"";for(var N="";++re<Y;){var U=Number(arguments[re]);if(!isFinite(U)||U<0||U>1114111||I(U)!==U)throw RangeError("Invalid code point: "+U);U<=65535?Ge.push(U):Ge.push(55296+((U-=65536)>>10),U%1024+56320),(re+1===Y||Ge.length>16384)&&(N+=L.apply(null,Ge),Ge.length=0)}return N},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ae,configurable:!0,writable:!0}):String.fromCodePoint=ae)}(q)},8280:function(){!function(ee,q){"use strict";if(!ee.setImmediate){var C,g=1,M={},y=!1,D=ee.document,ce=Object.getPrototypeOf&&Object.getPrototypeOf(ee);ce=ce&&ce.setTimeout?ce:ee,"[object process]"==={}.toString.call(ee.process)?function j(){C=function(K){process.nextTick(function(){T(K)})}}():function O(){if(ee.postMessage&&!ee.importScripts){var K=!0,J=ee.onmessage;return ee.onmessage=function(){K=!1},ee.postMessage("","*"),ee.onmessage=J,K}}()?function B(){var K="setImmediate$"+Math.random()+"$",J=function(Z){Z.source===ee&&"string"==typeof Z.data&&0===Z.data.indexOf(K)&&T(+Z.data.slice(K.length))};ee.addEventListener?ee.addEventListener("message",J,!1):ee.attachEvent("onmessage",J),C=function(Z){ee.postMessage(K+Z,"*")}}():ee.MessageChannel?function Q(){var K=new MessageChannel;K.port1.onmessage=function(J){T(J.data)},C=function(J){K.port2.postMessage(J)}}():D&&"onreadystatechange"in D.createElement("script")?function A(){var K=D.documentElement;C=function(J){var Z=D.createElement("script");Z.onreadystatechange=function(){T(J),Z.onreadystatechange=null,K.removeChild(Z),Z=null},K.appendChild(Z)}}():function F(){C=function(K){setTimeout(T,0,K)}}(),ce.setImmediate=function R(K){"function"!=typeof K&&(K=new Function(""+K));for(var J=new Array(arguments.length-1),Z=0;Z<J.length;Z++)J[Z]=arguments[Z+1];return M[g]={callback:K,args:J},C(g),g++},ce.clearImmediate=_}function _(K){delete M[K]}function T(K){if(y)setTimeout(T,0,K);else{var J=M[K];if(J){y=!0;try{!function v(K){var J=K.callback,Z=K.args;switch(Z.length){case 0:J();break;case 1:J(Z[0]);break;case 2:J(Z[0],Z[1]);break;case 3:J(Z[0],Z[1],Z[2]);break;default:J.apply(undefined,Z)}}(J)}finally{_(K),y=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(ee,q,g)=>{ee.exports=D;var M=g(2016).EventEmitter;function D(){M.call(this)}g(6698)(D,M),D.Readable=g(842),D.Writable=g(7597),D.Duplex=g(2232),D.Transform=g(555),D.PassThrough=g(8226),D.finished=g(1227),D.pipeline=g(2345),D.Stream=D,D.prototype.pipe=function(C,R){var _=this;function v(F){C.writable&&!1===C.write(F)&&_.pause&&_.pause()}function T(){_.readable&&_.resume&&_.resume()}_.on("data",v),C.on("drain",T),!C._isStdio&&(!R||!1!==R.end)&&(_.on("end",O),_.on("close",B));var j=!1;function O(){j||(j=!0,C.end())}function B(){j||(j=!0,"function"==typeof C.destroy&&C.destroy())}function Q(F){if(A(),0===M.listenerCount(this,"error"))throw F}function A(){_.removeListener("data",v),C.removeListener("drain",T),_.removeListener("end",O),_.removeListener("close",B),_.removeListener("error",Q),C.removeListener("error",Q),_.removeListener("end",A),_.removeListener("close",A),C.removeListener("close",A)}return _.on("error",Q),C.on("error",Q),_.on("end",A),_.on("close",A),C.on("close",A),C.emit("pipe",_),C}},9555:ee=>{"use strict";var g={};function M(_,v,T){T||(T=Error);var O=function(B){function Q(A,F,ce){return B.call(this,function j(B,Q,A){return"string"==typeof v?v:v(B,Q,A)}(A,F,ce))||this}return function q(_,v){_.prototype=Object.create(v.prototype),_.prototype.constructor=_,_.__proto__=v}(Q,B),Q}(T);O.prototype.name=T.name,O.prototype.code=_,g[_]=O}function y(_,v){if(Array.isArray(_)){var T=_.length;return _=_.map(function(j){return String(j)}),T>2?"one of ".concat(v," ").concat(_.slice(0,T-1).join(", "),", or ")+_[T-1]:2===T?"one of ".concat(v," ").concat(_[0]," or ").concat(_[1]):"of ".concat(v," ").concat(_[0])}return"of ".concat(v," ").concat(String(_))}M("ERR_INVALID_OPT_VALUE",function(_,v){return'The value "'+v+'" is invalid for option "'+_+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(_,v,T){var j,O;if("string"==typeof v&&function D(_,v,T){return _.substr(!T||T<0?0:+T,v.length)===v}(v,"not ")?(j="must not be",v=v.replace(/^not /,"")):j="must be",function C(_,v,T){return(void 0===T||T>_.length)&&(T=_.length),_.substring(T-v.length,T)===v}(_," argument"))O="The ".concat(_," ").concat(j," ").concat(y(v,"type"));else{var B=function R(_,v,T){return"number"!=typeof T&&(T=0),!(T+v.length>_.length)&&-1!==_.indexOf(v,T)}(_,".")?"property":"argument";O='The "'.concat(_,'" ').concat(B," ").concat(j," ").concat(y(v,"type"))}return O+". Received type ".concat(typeof T)},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.q=g},2232:(ee,q,g)=>{"use strict";var M=Object.keys||function(O){var B=[];for(var Q in O)B.push(Q);return B};ee.exports=v;var y=g(842),D=g(7597);g(6698)(v,y);for(var C=M(D.prototype),R=0;R<C.length;R++){var _=C[R];v.prototype[_]||(v.prototype[_]=D.prototype[_])}function v(O){if(!(this instanceof v))return new v(O);y.call(this,O),D.call(this,O),this.allowHalfOpen=!0,O&&(!1===O.readable&&(this.readable=!1),!1===O.writable&&(this.writable=!1),!1===O.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||process.nextTick(j,this)}function j(O){O.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(B){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=B,this._writableState.destroyed=B)}})},8226:(ee,q,g)=>{"use strict";ee.exports=y;var M=g(555);function y(D){if(!(this instanceof y))return new y(D);M.call(this,D)}g(6698)(y,M),y.prototype._transform=function(D,C,R){R(null,D)}},842:(ee,q,g)=>{"use strict";var M;ee.exports=le,le.ReadableState=Ie,g(2016);var O,D=function(re,Y){return re.listeners(Y).length},C=g(3951),R=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},j=g(964);O=j&&j.debuglog?j.debuglog("stream"):function(){};var H,w,P,B=g(2998),Q=g(3992),F=g(4962).getHighWaterMark,ce=g(9555).q,K=ce.ERR_INVALID_ARG_TYPE,J=ce.ERR_STREAM_PUSH_AFTER_EOF,Z=ce.ERR_METHOD_NOT_IMPLEMENTED,$=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(le,C);var k=Q.errorOrDestroy,de=["error","close","destroy","pause","resume"];function Ie(pe,re,Y){M=M||g(2232),"boolean"!=typeof Y&&(Y=re instanceof M),this.objectMode=!!(pe=pe||{}).objectMode,Y&&(this.objectMode=this.objectMode||!!pe.readableObjectMode),this.highWaterMark=F(this,pe,"readableHighWaterMark",Y),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==pe.emitClose,this.autoDestroy=!!pe.autoDestroy,this.destroyed=!1,this.defaultEncoding=pe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,pe.encoding&&(H||(H=g(2024).StringDecoder),this.decoder=new H(pe.encoding),this.encoding=pe.encoding)}function le(pe){if(M=M||g(2232),!(this instanceof le))return new le(pe);this._readableState=new Ie(pe,this,this instanceof M),this.readable=!0,pe&&("function"==typeof pe.read&&(this._read=pe.read),"function"==typeof pe.destroy&&(this._destroy=pe.destroy)),C.call(this)}function ve(pe,re,Y,N,U){O("readableAddChunk",re);var Ye,me=pe._readableState;if(null===re)me.reading=!1,function He(pe,re){if(O("onEofChunk"),!re.ended){if(re.decoder){var Y=re.decoder.end();Y&&Y.length&&(re.buffer.push(Y),re.length+=re.objectMode?1:Y.length)}re.ended=!0,re.sync?Me(pe):(re.needReadable=!1,re.emittedReadable||(re.emittedReadable=!0,Ue(pe)))}}(pe,me);else if(U||(Ye=function Le(pe,re){var Y;return!function T(pe){return R.isBuffer(pe)||pe instanceof _}(re)&&"string"!=typeof re&&void 0!==re&&!pe.objectMode&&(Y=new K("chunk",["string","Buffer","Uint8Array"],re)),Y}(me,re)),Ye)k(pe,Ye);else if(me.objectMode||re&&re.length>0)if("string"!=typeof re&&!me.objectMode&&Object.getPrototypeOf(re)!==R.prototype&&(re=function v(pe){return R.from(pe)}(re)),N)me.endEmitted?k(pe,new $):Oe(pe,me,re,!0);else if(me.ended)k(pe,new J);else{if(me.destroyed)return!1;me.reading=!1,me.decoder&&!Y?(re=me.decoder.write(re),me.objectMode||0!==re.length?Oe(pe,me,re,!1):fe(pe,me)):Oe(pe,me,re,!1)}else N||(me.reading=!1,fe(pe,me));return!me.ended&&(me.length<me.highWaterMark||0===me.length)}function Oe(pe,re,Y,N){re.flowing&&0===re.length&&!re.sync?(re.awaitDrain=0,pe.emit("data",Y)):(re.length+=re.objectMode?1:Y.length,N?re.buffer.unshift(Y):re.buffer.push(Y),re.needReadable&&Me(pe)),fe(pe,re)}Object.defineProperty(le.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(re){this._readableState&&(this._readableState.destroyed=re)}}),le.prototype.destroy=Q.destroy,le.prototype._undestroy=Q.undestroy,le.prototype._destroy=function(pe,re){re(pe)},le.prototype.push=function(pe,re){var N,Y=this._readableState;return Y.objectMode?N=!0:"string"==typeof pe&&((re=re||Y.defaultEncoding)!==Y.encoding&&(pe=R.from(pe,re),re=""),N=!0),ve(this,pe,re,!1,N)},le.prototype.unshift=function(pe){return ve(this,pe,null,!0,!1)},le.prototype.isPaused=function(){return!1===this._readableState.flowing},le.prototype.setEncoding=function(pe){H||(H=g(2024).StringDecoder);var re=new H(pe);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,N="";null!==Y;)N+=re.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),""!==N&&this._readableState.buffer.push(N),this._readableState.length=N.length,this};var Qe=1073741824;function Te(pe,re){return pe<=0||0===re.length&&re.ended?0:re.objectMode?1:pe!=pe?re.flowing&&re.length?re.buffer.head.data.length:re.length:(pe>re.highWaterMark&&(re.highWaterMark=function qe(pe){return pe>=Qe?pe=Qe:(pe--,pe|=pe>>>1,pe|=pe>>>2,pe|=pe>>>4,pe|=pe>>>8,pe|=pe>>>16,pe++),pe}(pe)),pe<=re.length?pe:re.ended?re.length:(re.needReadable=!0,0))}function Me(pe){var re=pe._readableState;O("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(O("emitReadable",re.flowing),re.emittedReadable=!0,process.nextTick(Ue,pe))}function Ue(pe){var re=pe._readableState;O("emitReadable_",re.destroyed,re.length,re.ended),!re.destroyed&&(re.length||re.ended)&&(pe.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,I(pe)}function fe(pe,re){re.readingMore||(re.readingMore=!0,process.nextTick(Ce,pe,re))}function Ce(pe,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&0===re.length);){var Y=re.length;if(O("maybeReadMore read 0"),pe.read(0),Y===re.length)break}re.readingMore=!1}function gt(pe){var re=pe._readableState;re.readableListening=pe.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:pe.listenerCount("data")>0&&pe.resume()}function Je(pe){O("readable nexttick read 0"),pe.read(0)}function L(pe,re){O("resume",re.reading),re.reading||pe.read(0),re.resumeScheduled=!1,pe.emit("resume"),I(pe),re.flowing&&!re.reading&&pe.read(0)}function I(pe){var re=pe._readableState;for(O("flow",re.flowing);re.flowing&&null!==pe.read(););}function ae(pe,re){return 0===re.length?null:(re.objectMode?Y=re.buffer.shift():!pe||pe>=re.length?(Y=re.decoder?re.buffer.join(""):1===re.buffer.length?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):Y=re.buffer.consume(pe,re.decoder),Y);var Y}function ie(pe){var re=pe._readableState;O("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,process.nextTick(Ge,re,pe))}function Ge(pe,re){if(O("endReadableNT",pe.endEmitted,pe.length),!pe.endEmitted&&0===pe.length&&(pe.endEmitted=!0,re.readable=!1,re.emit("end"),pe.autoDestroy)){var Y=re._writableState;(!Y||Y.autoDestroy&&Y.finished)&&re.destroy()}}function Ze(pe,re){for(var Y=0,N=pe.length;Y<N;Y++)if(pe[Y]===re)return Y;return-1}le.prototype.read=function(pe){O("read",pe),pe=parseInt(pe,10);var re=this._readableState,Y=pe;if(0!==pe&&(re.emittedReadable=!1),0===pe&&re.needReadable&&((0!==re.highWaterMark?re.length>=re.highWaterMark:re.length>0)||re.ended))return O("read: emitReadable",re.length,re.ended),0===re.length&&re.ended?ie(this):Me(this),null;if(0===(pe=Te(pe,re))&&re.ended)return 0===re.length&&ie(this),null;var U,N=re.needReadable;return O("need readable",N),(0===re.length||re.length-pe<re.highWaterMark)&&O("length less than watermark",N=!0),re.ended||re.reading?O("reading or ended",N=!1):N&&(O("do read"),re.reading=!0,re.sync=!0,0===re.length&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(pe=Te(Y,re))),null===(U=pe>0?ae(pe,re):null)?(re.needReadable=re.length<=re.highWaterMark,pe=0):(re.length-=pe,re.awaitDrain=0),0===re.length&&(re.ended||(re.needReadable=!0),Y!==pe&&re.ended&&ie(this)),null!==U&&this.emit("data",U),U},le.prototype._read=function(pe){k(this,new Z("_read()"))},le.prototype.pipe=function(pe,re){var Y=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=pe;break;case 1:N.pipes=[N.pipes,pe];break;default:N.pipes.push(pe)}N.pipesCount+=1,O("pipe count=%d opts=%j",N.pipesCount,re);var me=re&&!1===re.end||pe===process.stdout||pe===process.stderr?X:ye;function ye(){O("onend"),pe.end()}N.endEmitted?process.nextTick(me):Y.once("end",me),pe.on("unpipe",function Ye(oe,Be){O("onunpipe"),oe===Y&&Be&&!1===Be.hasUnpiped&&(Be.hasUnpiped=!0,function bt(){O("cleanup"),pe.removeListener("close",Xt),pe.removeListener("finish",_e),pe.removeListener("drain",ze),pe.removeListener("error",xt),pe.removeListener("unpipe",Ye),Y.removeListener("end",ye),Y.removeListener("end",X),Y.removeListener("data",At),st=!0,N.awaitDrain&&(!pe._writableState||pe._writableState.needDrain)&&ze()}())});var ze=function nt(pe){return function(){var Y=pe._readableState;O("pipeOnDrain",Y.awaitDrain),Y.awaitDrain&&Y.awaitDrain--,0===Y.awaitDrain&&D(pe,"data")&&(Y.flowing=!0,I(pe))}}(Y);pe.on("drain",ze);var st=!1;function At(oe){O("ondata");var Be=pe.write(oe);O("dest.write",Be),!1===Be&&((1===N.pipesCount&&N.pipes===pe||N.pipesCount>1&&-1!==Ze(N.pipes,pe))&&!st&&(O("false write response, pause",N.awaitDrain),N.awaitDrain++),Y.pause())}function xt(oe){O("onerror",oe),X(),pe.removeListener("error",xt),0===D(pe,"error")&&k(pe,oe)}function Xt(){pe.removeListener("finish",_e),X()}function _e(){O("onfinish"),pe.removeListener("close",Xt),X()}function X(){O("unpipe"),Y.unpipe(pe)}return Y.on("data",At),function G(pe,re,Y){if("function"==typeof pe.prependListener)return pe.prependListener(re,Y);pe._events&&pe._events[re]?Array.isArray(pe._events[re])?pe._events[re].unshift(Y):pe._events[re]=[Y,pe._events[re]]:pe.on(re,Y)}(pe,"error",xt),pe.once("close",Xt),pe.once("finish",_e),pe.emit("pipe",Y),N.flowing||(O("pipe resume"),Y.resume()),pe},le.prototype.unpipe=function(pe){var re=this._readableState,Y={hasUnpiped:!1};if(0===re.pipesCount)return this;if(1===re.pipesCount)return pe&&pe!==re.pipes||(pe||(pe=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,pe&&pe.emit("unpipe",this,Y)),this;if(!pe){var N=re.pipes,U=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var me=0;me<U;me++)N[me].emit("unpipe",this,{hasUnpiped:!1});return this}var Ye=Ze(re.pipes,pe);return-1===Ye||(re.pipes.splice(Ye,1),re.pipesCount-=1,1===re.pipesCount&&(re.pipes=re.pipes[0]),pe.emit("unpipe",this,Y)),this},le.prototype.addListener=le.prototype.on=function(pe,re){var Y=C.prototype.on.call(this,pe,re),N=this._readableState;return"data"===pe?(N.readableListening=this.listenerCount("readable")>0,!1!==N.flowing&&this.resume()):"readable"===pe&&!N.endEmitted&&!N.readableListening&&(N.readableListening=N.needReadable=!0,N.flowing=!1,N.emittedReadable=!1,O("on readable",N.length,N.reading),N.length?Me(this):N.reading||process.nextTick(Je,this)),Y},le.prototype.removeListener=function(pe,re){var Y=C.prototype.removeListener.call(this,pe,re);return"readable"===pe&&process.nextTick(gt,this),Y},le.prototype.removeAllListeners=function(pe){var re=C.prototype.removeAllListeners.apply(this,arguments);return("readable"===pe||void 0===pe)&&process.nextTick(gt,this),re},le.prototype.resume=function(){var pe=this._readableState;return pe.flowing||(O("resume"),pe.flowing=!pe.readableListening,function ge(pe,re){re.resumeScheduled||(re.resumeScheduled=!0,process.nextTick(L,pe,re))}(this,pe)),pe.paused=!1,this},le.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},le.prototype.wrap=function(pe){var re=this,Y=this._readableState,N=!1;for(var U in pe.on("end",function(){if(O("wrapped end"),Y.decoder&&!Y.ended){var Ye=Y.decoder.end();Ye&&Ye.length&&re.push(Ye)}re.push(null)}),pe.on("data",function(Ye){O("wrapped data"),Y.decoder&&(Ye=Y.decoder.write(Ye)),Y.objectMode&&null==Ye||!(Y.objectMode||Ye&&Ye.length)||re.push(Ye)||(N=!0,pe.pause())}),pe)void 0===this[U]&&"function"==typeof pe[U]&&(this[U]=function(ye){return function(){return pe[ye].apply(pe,arguments)}}(U));for(var me=0;me<de.length;me++)pe.on(de[me],this.emit.bind(this,de[me]));return this._read=function(Ye){O("wrapped _read",Ye),N&&(N=!1,pe.resume())},this},"function"==typeof Symbol&&(le.prototype[Symbol.asyncIterator]=function(){return void 0===w&&(w=g(2590)),w(this)}),Object.defineProperty(le.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(le.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(le.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}}),le._fromList=ae,Object.defineProperty(le.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(le.from=function(pe,re){return void 0===P&&(P=g(5374)),P(le,pe,re)})},555:(ee,q,g)=>{"use strict";ee.exports=T;var M=g(9555).q,y=M.ERR_METHOD_NOT_IMPLEMENTED,D=M.ERR_MULTIPLE_CALLBACK,C=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,R=M.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function v(B,Q){var A=this._transformState;A.transforming=!1;var F=A.writecb;if(null===F)return this.emit("error",new D);A.writechunk=null,A.writecb=null,null!=Q&&this.push(Q),F(B);var ce=this._readableState;ce.reading=!1,(ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}function T(B){if(!(this instanceof T))return new T(B);_.call(this,B),this._transformState={afterTransform:v.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,B&&("function"==typeof B.transform&&(this._transform=B.transform),"function"==typeof B.flush&&(this._flush=B.flush)),this.on("prefinish",j)}function j(){var B=this;"function"!=typeof this._flush||this._readableState.destroyed?O(this,null,null):this._flush(function(Q,A){O(B,Q,A)})}function O(B,Q,A){if(Q)return B.emit("error",Q);if(null!=A&&B.push(A),B._writableState.length)throw new R;if(B._transformState.transforming)throw new C;return B.push(null)}g(6698)(T,_),T.prototype.push=function(B,Q){return this._transformState.needTransform=!1,_.prototype.push.call(this,B,Q)},T.prototype._transform=function(B,Q,A){A(new y("_transform()"))},T.prototype._write=function(B,Q,A){var F=this._transformState;if(F.writecb=A,F.writechunk=B,F.writeencoding=Q,!F.transforming){var ce=this._readableState;(F.needTransform||ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}},T.prototype._read=function(B){var Q=this._transformState;null===Q.writechunk||Q.transforming?Q.needTransform=!0:(Q.transforming=!0,this._transform(Q.writechunk,Q.writeencoding,Q.afterTransform))},T.prototype._destroy=function(B,Q){_.prototype._destroy.call(this,B,function(A){Q(A)})}},7597:(ee,q,g)=>{"use strict";function y(I){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function L(I,ae,ie){var Ge=I.entry;for(I.entry=null;Ge;){var Ze=Ge.callback;ae.pendingcb--,Ze(ie),Ge=Ge.next}ae.corkedRequestsFree.next=I}(ae,I)}}var D;ee.exports=Ie,Ie.WritableState=de;var G,C={deprecate:g(496)},R=g(3951),_=g(9007).Buffer,v=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},O=g(3992),Q=g(4962).getHighWaterMark,A=g(9555).q,F=A.ERR_INVALID_ARG_TYPE,ce=A.ERR_METHOD_NOT_IMPLEMENTED,K=A.ERR_MULTIPLE_CALLBACK,J=A.ERR_STREAM_CANNOT_PIPE,Z=A.ERR_STREAM_DESTROYED,$=A.ERR_STREAM_NULL_VALUES,H=A.ERR_STREAM_WRITE_AFTER_END,w=A.ERR_UNKNOWN_ENCODING,P=O.errorOrDestroy;function k(){}function de(I,ae,ie){D=D||g(2232),"boolean"!=typeof ie&&(ie=ae instanceof D),this.objectMode=!!(I=I||{}).objectMode,ie&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=Q(this,I,"writableHighWaterMark",ie),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===I.decodeStrings),this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ze){!function He(I,ae){var ie=I._writableState,Ge=ie.sync,Ze=ie.writecb;if("function"!=typeof Ze)throw new K;if(function Te(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}(ie),ae)!function qe(I,ae,ie,Ge,Ze){--ae.pendingcb,ie?(process.nextTick(Ze,Ge),process.nextTick(Je,I,ae),I._writableState.errorEmitted=!0,P(I,Ge)):(Ze(Ge),I._writableState.errorEmitted=!0,P(I,Ge),Je(I,ae))}(I,ie,Ge,ae,Ze);else{var pe=Ce(ie)||I.destroyed;!pe&&!ie.corked&&!ie.bufferProcessing&&ie.bufferedRequest&&fe(I,ie),Ge?process.nextTick(Me,I,ie,pe,Ze):Me(I,ie,pe,Ze)}}(ae,Ze)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==I.emitClose,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new y(this)}function Ie(I){var ae=this instanceof(D=D||g(2232));if(!ae&&!G.call(Ie,this))return new Ie(I);this._writableState=new de(I,this,ae),this.writable=!0,I&&("function"==typeof I.write&&(this._write=I.write),"function"==typeof I.writev&&(this._writev=I.writev),"function"==typeof I.destroy&&(this._destroy=I.destroy),"function"==typeof I.final&&(this._final=I.final)),R.call(this)}function Qe(I,ae,ie,Ge,Ze,pe,re){ae.writelen=Ge,ae.writecb=re,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new Z("write")):ie?I._writev(Ze,ae.onwrite):I._write(Ze,pe,ae.onwrite),ae.sync=!1}function Me(I,ae,ie,Ge){ie||function Ue(I,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,I.emit("drain"))}(I,ae),ae.pendingcb--,Ge(),Je(I,ae)}function fe(I,ae){ae.bufferProcessing=!0;var ie=ae.bufferedRequest;if(I._writev&&ie&&ie.next){var Ze=new Array(ae.bufferedRequestCount),pe=ae.corkedRequestsFree;pe.entry=ie;for(var re=0,Y=!0;ie;)Ze[re]=ie,ie.isBuf||(Y=!1),ie=ie.next,re+=1;Ze.allBuffers=Y,Qe(I,ae,!0,ae.length,Ze,"",pe.finish),ae.pendingcb++,ae.lastBufferedRequest=null,pe.next?(ae.corkedRequestsFree=pe.next,pe.next=null):ae.corkedRequestsFree=new y(ae),ae.bufferedRequestCount=0}else{for(;ie;){var N=ie.chunk;if(Qe(I,ae,!1,ae.objectMode?1:N.length,N,ie.encoding,ie.callback),ie=ie.next,ae.bufferedRequestCount--,ae.writing)break}null===ie&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=ie,ae.bufferProcessing=!1}function Ce(I){return I.ending&&0===I.length&&null===I.bufferedRequest&&!I.finished&&!I.writing}function nt(I,ae){I._final(function(ie){ae.pendingcb--,ie&&P(I,ie),ae.prefinished=!0,I.emit("prefinish"),Je(I,ae)})}function Je(I,ae){var ie=Ce(ae);if(ie&&(function gt(I,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof I._final||ae.destroyed?(ae.prefinished=!0,I.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(nt,I,ae)))}(I,ae),0===ae.pendingcb&&(ae.finished=!0,I.emit("finish"),ae.autoDestroy))){var Ge=I._readableState;(!Ge||Ge.autoDestroy&&Ge.endEmitted)&&I.destroy()}return ie}g(6698)(Ie,R),de.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,ie=[];ae;)ie.push(ae),ae=ae.next;return ie},function(){try{Object.defineProperty(de.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(G=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ie,Symbol.hasInstance,{value:function(ae){return!!G.call(this,ae)||this===Ie&&ae&&ae._writableState instanceof de}})):G=function(ae){return ae instanceof this},Ie.prototype.pipe=function(){P(this,new J)},Ie.prototype.write=function(I,ae,ie){var Ge=this._writableState,Ze=!1,pe=!Ge.objectMode&&function j(I){return _.isBuffer(I)||I instanceof v}(I);return pe&&!_.isBuffer(I)&&(I=function T(I){return _.from(I)}(I)),"function"==typeof ae&&(ie=ae,ae=null),pe?ae="buffer":ae||(ae=Ge.defaultEncoding),"function"!=typeof ie&&(ie=k),Ge.ending?function le(I,ae){var ie=new H;P(I,ie),process.nextTick(ae,ie)}(this,ie):(pe||function ve(I,ae,ie,Ge){var Ze;return null===ie?Ze=new $:"string"!=typeof ie&&!ae.objectMode&&(Ze=new F("chunk",["string","Buffer"],ie)),!Ze||(P(I,Ze),process.nextTick(Ge,Ze),!1)}(this,Ge,I,ie))&&(Ge.pendingcb++,Ze=function Le(I,ae,ie,Ge,Ze,pe){if(!ie){var re=function Oe(I,ae,ie){return!I.objectMode&&!1!==I.decodeStrings&&"string"==typeof ae&&(ae=_.from(ae,ie)),ae}(ae,Ge,Ze);Ge!==re&&(ie=!0,Ze="buffer",Ge=re)}var Y=ae.objectMode?1:Ge.length;ae.length+=Y;var N=ae.length<ae.highWaterMark;if(N||(ae.needDrain=!0),ae.writing||ae.corked){var U=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:Ge,encoding:Ze,isBuf:ie,callback:pe,next:null},U?U.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else Qe(I,ae,!1,Y,Ge,Ze,pe);return N}(this,Ge,pe,I,ae,ie)),Ze},Ie.prototype.cork=function(){this._writableState.corked++},Ie.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&fe(this,I))},Ie.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new w(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(Ie.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ie.prototype._write=function(I,ae,ie){ie(new ce("_write()"))},Ie.prototype._writev=null,Ie.prototype.end=function(I,ae,ie){var Ge=this._writableState;return"function"==typeof I?(ie=I,I=null,ae=null):"function"==typeof ae&&(ie=ae,ae=null),null!=I&&this.write(I,ae),Ge.corked&&(Ge.corked=1,this.uncork()),Ge.ending||function ge(I,ae,ie){ae.ending=!0,Je(I,ae),ie&&(ae.finished?process.nextTick(ie):I.once("finish",ie)),ae.ended=!0,I.writable=!1}(this,Ge,ie),this},Object.defineProperty(Ie.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ie.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){this._writableState&&(this._writableState.destroyed=ae)}}),Ie.prototype.destroy=O.destroy,Ie.prototype._undestroy=O.undestroy,Ie.prototype._destroy=function(I,ae){ae(I)}},2590:(ee,q,g)=>{"use strict";var M;function y(H,w,P){return w=function D(H){var w=function C(H,w){if("object"!=typeof H||null===H)return H;var P=H[Symbol.toPrimitive];if(void 0!==P){var k=P.call(H,w||"default");if("object"!=typeof k)return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===w?String:Number)(H)}(H,"string");return"symbol"==typeof w?w:String(w)}(w),w in H?Object.defineProperty(H,w,{value:P,enumerable:!0,configurable:!0,writable:!0}):H[w]=P,H}var R=g(1227),_=Symbol("lastResolve"),v=Symbol("lastReject"),T=Symbol("error"),j=Symbol("ended"),O=Symbol("lastPromise"),B=Symbol("handlePromise"),Q=Symbol("stream");function A(H,w){return{value:H,done:w}}function F(H){var w=H[_];if(null!==w){var P=H[Q].read();null!==P&&(H[O]=null,H[_]=null,H[v]=null,w(A(P,!1)))}}function ce(H){process.nextTick(F,H)}var J=Object.getPrototypeOf(function(){}),Z=Object.setPrototypeOf((y(M={get stream(){return this[Q]},next:function(){var w=this,P=this[T];if(null!==P)return Promise.reject(P);if(this[j])return Promise.resolve(A(void 0,!0));if(this[Q].destroyed)return new Promise(function(Ie,le){process.nextTick(function(){w[T]?le(w[T]):Ie(A(void 0,!0))})});var de,k=this[O];if(k)de=new Promise(function K(H,w){return function(P,k){H.then(function(){w[j]?P(A(void 0,!0)):w[B](P,k)},k)}}(k,this));else{var G=this[Q].read();if(null!==G)return Promise.resolve(A(G,!1));de=new Promise(this[B])}return this[O]=de,de}},Symbol.asyncIterator,function(){return this}),y(M,"return",function(){var w=this;return new Promise(function(P,k){w[Q].destroy(null,function(de){de?k(de):P(A(void 0,!0))})})}),M),J);ee.exports=function(w){var P,k=Object.create(Z,(y(P={},Q,{value:w,writable:!0}),y(P,_,{value:null,writable:!0}),y(P,v,{value:null,writable:!0}),y(P,T,{value:null,writable:!0}),y(P,j,{value:w._readableState.endEmitted,writable:!0}),y(P,B,{value:function(G,Ie){var le=k[Q].read();le?(k[O]=null,k[_]=null,k[v]=null,G(A(le,!1))):(k[_]=G,k[v]=Ie)},writable:!0}),P));return k[O]=null,R(w,function(de){if(de&&"ERR_STREAM_PREMATURE_CLOSE"!==de.code){var G=k[v];return null!==G&&(k[O]=null,k[_]=null,k[v]=null,G(de)),void(k[T]=de)}var Ie=k[_];null!==Ie&&(k[O]=null,k[_]=null,k[v]=null,Ie(A(void 0,!0))),k[j]=!0}),w.on("readable",ce.bind(null,k)),k}},2998:(ee,q,g)=>{"use strict";function M(ce,K){var J=Object.keys(ce);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ce);K&&(Z=Z.filter(function($){return Object.getOwnPropertyDescriptor(ce,$).enumerable})),J.push.apply(J,Z)}return J}function y(ce){for(var K=1;K<arguments.length;K++){var J=null!=arguments[K]?arguments[K]:{};K%2?M(Object(J),!0).forEach(function(Z){D(ce,Z,J[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(J)):M(Object(J)).forEach(function(Z){Object.defineProperty(ce,Z,Object.getOwnPropertyDescriptor(J,Z))})}return ce}function D(ce,K,J){return(K=v(K))in ce?Object.defineProperty(ce,K,{value:J,enumerable:!0,configurable:!0,writable:!0}):ce[K]=J,ce}function R(ce,K){for(var J=0;J<K.length;J++){var Z=K[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(ce,v(Z.key),Z)}}function v(ce){var K=function T(ce,K){if("object"!=typeof ce||null===ce)return ce;var J=ce[Symbol.toPrimitive];if(void 0!==J){var Z=J.call(ce,K||"default");if("object"!=typeof Z)return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===K?String:Number)(ce)}(ce,"string");return"symbol"==typeof K?K:String(K)}var O=g(9007).Buffer,Q=g(9862).inspect,A=Q&&Q.custom||"inspect";function F(ce,K,J){O.prototype.copy.call(ce,K,J)}ee.exports=function(){function ce(){(function C(ce,K){if(!(ce instanceof K))throw new TypeError("Cannot call a class as a function")})(this,ce),this.head=null,this.tail=null,this.length=0}return function _(ce,K,J){K&&R(ce.prototype,K),J&&R(ce,J),Object.defineProperty(ce,"prototype",{writable:!1})}(ce,[{key:"push",value:function(J){var Z={data:J,next:null};this.length>0?this.tail.next=Z:this.head=Z,this.tail=Z,++this.length}},{key:"unshift",value:function(J){var Z={data:J,next:this.head};0===this.length&&(this.tail=Z),this.head=Z,++this.length}},{key:"shift",value:function(){if(0!==this.length){var J=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,J}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(J){if(0===this.length)return"";for(var Z=this.head,$=""+Z.data;Z=Z.next;)$+=J+Z.data;return $}},{key:"concat",value:function(J){if(0===this.length)return O.alloc(0);for(var Z=O.allocUnsafe(J>>>0),$=this.head,H=0;$;)F($.data,Z,H),H+=$.data.length,$=$.next;return Z}},{key:"consume",value:function(J,Z){var $;return J<this.head.data.length?($=this.head.data.slice(0,J),this.head.data=this.head.data.slice(J)):$=J===this.head.data.length?this.shift():Z?this._getString(J):this._getBuffer(J),$}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(J){var Z=this.head,$=1,H=Z.data;for(J-=H.length;Z=Z.next;){var w=Z.data,P=J>w.length?w.length:J;if(H+=P===w.length?w:w.slice(0,J),0==(J-=P)){P===w.length?(++$,this.head=Z.next?Z.next:this.tail=null):(this.head=Z,Z.data=w.slice(P));break}++$}return this.length-=$,H}},{key:"_getBuffer",value:function(J){var Z=O.allocUnsafe(J),$=this.head,H=1;for($.data.copy(Z),J-=$.data.length;$=$.next;){var w=$.data,P=J>w.length?w.length:J;if(w.copy(Z,Z.length-J,0,P),0==(J-=P)){P===w.length?(++H,this.head=$.next?$.next:this.tail=null):(this.head=$,$.data=w.slice(P));break}++H}return this.length-=H,Z}},{key:A,value:function(J,Z){return Q(this,y(y({},Z),{},{depth:0,customInspect:!1}))}}]),ce}()},3992:ee=>{"use strict";function g(R,_){D(R,_),M(R)}function M(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function D(R,_){R.emit("error",_)}ee.exports={destroy:function q(R,_){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(D,this,R)):process.nextTick(D,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(O){!_&&O?v._writableState?v._writableState.errorEmitted?process.nextTick(M,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,O)):process.nextTick(g,v,O):_?(process.nextTick(M,v),_(O)):process.nextTick(M,v)}),this)},undestroy:function y(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function C(R,_){var v=R._readableState,T=R._writableState;v&&v.autoDestroy||T&&T.autoDestroy?R.destroy(_):R.emit("error",_)}}},1227:(ee,q,g)=>{"use strict";var M=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function D(){}ee.exports=function R(_,v,T){if("function"==typeof v)return R(_,null,v);v||(v={}),T=function y(_){var v=!1;return function(){if(!v){v=!0;for(var T=arguments.length,j=new Array(T),O=0;O<T;O++)j[O]=arguments[O];_.apply(this,j)}}}(T||D);var j=v.readable||!1!==v.readable&&_.readable,O=v.writable||!1!==v.writable&&_.writable,B=function(){_.writable||A()},Q=_._writableState&&_._writableState.finished,A=function(){O=!1,Q=!0,j||T.call(_)},F=_._readableState&&_._readableState.endEmitted,ce=function(){j=!1,F=!0,O||T.call(_)},K=function(H){T.call(_,H)},J=function(){var H;return j&&!F?((!_._readableState||!_._readableState.ended)&&(H=new M),T.call(_,H)):O&&!Q?((!_._writableState||!_._writableState.ended)&&(H=new M),T.call(_,H)):void 0},Z=function(){_.req.on("finish",A)};return function C(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",A),_.on("abort",J),_.req?Z():_.on("request",Z)):O&&!_._writableState&&(_.on("end",B),_.on("close",B)),_.on("end",ce),_.on("finish",A),!1!==v.error&&_.on("error",K),_.on("close",J),function(){_.removeListener("complete",A),_.removeListener("abort",J),_.removeListener("request",Z),_.req&&_.req.removeListener("finish",A),_.removeListener("end",B),_.removeListener("close",B),_.removeListener("finish",A),_.removeListener("end",ce),_.removeListener("error",K),_.removeListener("close",J)}}},5374:ee=>{ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(ee,q,g)=>{"use strict";var M,D=g(9555).q,C=D.ERR_MISSING_ARGS,R=D.ERR_STREAM_DESTROYED;function _(A){if(A)throw A}function j(A){A()}function O(A,F){return A.pipe(F)}ee.exports=function Q(){for(var A=arguments.length,F=new Array(A),ce=0;ce<A;ce++)F[ce]=arguments[ce];var K=function B(A){return A.length&&"function"==typeof A[A.length-1]?A.pop():_}(F);if(Array.isArray(F[0])&&(F=F[0]),F.length<2)throw new C("streams");var J,Z=F.map(function($,H){var w=H<F.length-1;return function T(A,F,ce,K){K=function y(A){var F=!1;return function(){F||(F=!0,A.apply(void 0,arguments))}}(K);var J=!1;A.on("close",function(){J=!0}),void 0===M&&(M=g(1227)),M(A,{readable:F,writable:ce},function($){if($)return K($);J=!0,K()});var Z=!1;return function($){if(!J&&!Z){if(Z=!0,function v(A){return A.setHeader&&"function"==typeof A.abort}(A))return A.abort();if("function"==typeof A.destroy)return A.destroy();K($||new R("pipe"))}}}($,w,H>0,function(k){J||(J=k),k&&Z.forEach(j),!w&&(Z.forEach(j),K(J))})});return F.reduce(O)}},4962:(ee,q,g)=>{"use strict";var M=g(9555).q.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function D(C,R,_,v){var T=function y(C,R,_){return null!=C.highWaterMark?C.highWaterMark:R?C[_]:null}(R,v,_);if(null!=T){if(!isFinite(T)||Math.floor(T)!==T||T<0)throw new M(v?_:"highWaterMark",T);return Math.floor(T)}return C.objectMode?16:16384}}},3951:(ee,q,g)=>{ee.exports=g(2016).EventEmitter},2024:(ee,q,g)=>{"use strict";var M=g(4282).Buffer,y=M.isEncoding||function(Z){switch((Z=""+Z)&&Z.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function R(Z){var $;switch(this.encoding=function C(Z){var $=function D(Z){if(!Z)return"utf8";for(var $;;)switch(Z){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Z;default:if($)return;Z=(""+Z).toLowerCase(),$=!0}}(Z);if("string"!=typeof $&&(M.isEncoding===y||!y(Z)))throw new Error("Unknown encoding: "+Z);return $||Z}(Z),this.encoding){case"utf16le":this.text=Q,this.end=A,$=4;break;case"utf8":this.fillLast=j,$=4;break;case"base64":this.text=F,this.end=ce,$=3;break;default:return this.write=K,void(this.end=J)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe($)}function _(Z){return Z<=127?0:Z>>5==6?2:Z>>4==14?3:Z>>3==30?4:Z>>6==2?-1:-2}function j(Z){var $=this.lastTotal-this.lastNeed,H=function T(Z,$,H){if(128!=(192&$[0]))return Z.lastNeed=0,"\ufffd";if(Z.lastNeed>1&&$.length>1){if(128!=(192&$[1]))return Z.lastNeed=1,"\ufffd";if(Z.lastNeed>2&&$.length>2&&128!=(192&$[2]))return Z.lastNeed=2,"\ufffd"}}(this,Z);return void 0!==H?H:this.lastNeed<=Z.length?(Z.copy(this.lastChar,$,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(Z.copy(this.lastChar,$,0,Z.length),void(this.lastNeed-=Z.length))}function Q(Z,$){if((Z.length-$)%2==0){var H=Z.toString("utf16le",$);if(H){var w=H.charCodeAt(H.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Z[Z.length-2],this.lastChar[1]=Z[Z.length-1],H.slice(0,-1)}return H}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Z[Z.length-1],Z.toString("utf16le",$,Z.length-1)}function A(Z){var $=Z&&Z.length?this.write(Z):"";return this.lastNeed?$+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):$}function F(Z,$){var H=(Z.length-$)%3;return 0===H?Z.toString("base64",$):(this.lastNeed=3-H,this.lastTotal=3,1===H?this.lastChar[0]=Z[Z.length-1]:(this.lastChar[0]=Z[Z.length-2],this.lastChar[1]=Z[Z.length-1]),Z.toString("base64",$,Z.length-H))}function ce(Z){var $=Z&&Z.length?this.write(Z):"";return this.lastNeed?$+this.lastChar.toString("base64",0,3-this.lastNeed):$}function K(Z){return Z.toString(this.encoding)}function J(Z){return Z&&Z.length?this.write(Z):""}q.StringDecoder=R,R.prototype.write=function(Z){if(0===Z.length)return"";var $,H;if(this.lastNeed){if(void 0===($=this.fillLast(Z)))return"";H=this.lastNeed,this.lastNeed=0}else H=0;return H<Z.length?$?$+this.text(Z,H):this.text(Z,H):$||""},R.prototype.end=function B(Z){var $=Z&&Z.length?this.write(Z):"";return this.lastNeed?$+"\ufffd":$},R.prototype.text=function O(Z,$){var H=function v(Z,$,H){var w=$.length-1;if(w<H)return 0;var P=_($[w]);return P>=0?(P>0&&(Z.lastNeed=P-1),P):--w<H||-2===P?0:(P=_($[w]))>=0?(P>0&&(Z.lastNeed=P-2),P):--w<H||-2===P?0:(P=_($[w]))>=0?(P>0&&(2===P?P=0:Z.lastNeed=P-3),P):0}(this,Z,$);if(!this.lastNeed)return Z.toString("utf8",$);this.lastTotal=H;var w=Z.length-(H-this.lastNeed);return Z.copy(this.lastChar,0,w),Z.toString("utf8",$,w)},R.prototype.fillLast=function(Z){if(this.lastNeed<=Z.length)return Z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Z.length),this.lastNeed-=Z.length}},4282:(ee,q,g)=>{var M=g(9007),y=M.Buffer;function D(R,_){for(var v in R)_[v]=R[v]}function C(R,_,v){return y(R,_,v)}y.from&&y.alloc&&y.allocUnsafe&&y.allocUnsafeSlow?ee.exports=M:(D(M,q),q.Buffer=C),C.prototype=Object.create(y.prototype),D(y,C),C.from=function(R,_,v){if("number"==typeof R)throw new TypeError("Argument must not be a number");return y(R,_,v)},C.alloc=function(R,_,v){if("number"!=typeof R)throw new TypeError("Argument must be a number");var T=y(R);return void 0!==_?"string"==typeof v?T.fill(_,v):T.fill(_):T.fill(0),T},C.allocUnsafe=function(R){if("number"!=typeof R)throw new TypeError("Argument must be a number");return y(R)},C.allocUnsafeSlow=function(R){if("number"!=typeof R)throw new TypeError("Argument must be a number");return M.SlowBuffer(R)}},496:ee=>{function g(M){try{if(!global.localStorage)return!1}catch{return!1}var y=global.localStorage[M];return null!=y&&"true"===String(y).toLowerCase()}ee.exports=function q(M,y){if(g("noDeprecation"))return M;var D=!1;return function C(){if(!D){if(g("throwDeprecation"))throw new Error(y);g("traceDeprecation")?console.trace(y):console.warn(y),D=!0}return M.apply(this,arguments)}}},1171:ee=>{"use strict";ee.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(ee,q,g)=>{"use strict";function M(_){var v=this;if(v instanceof M||(v=new M),v.tail=null,v.head=null,v.length=0,_&&"function"==typeof _.forEach)_.forEach(function(O){v.push(O)});else if(arguments.length>0)for(var T=0,j=arguments.length;T<j;T++)v.push(arguments[T]);return v}function y(_,v,T){var j=v===_.head?new R(T,null,v,_):new R(T,v,v.next,_);return null===j.next&&(_.tail=j),null===j.prev&&(_.head=j),_.length++,j}function D(_,v){_.tail=new R(v,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function C(_,v){_.head=new R(v,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function R(_,v,T,j){if(!(this instanceof R))return new R(_,v,T,j);this.list=j,this.value=_,v?(v.next=this,this.prev=v):this.prev=null,T?(T.prev=this,this.next=T):this.next=null}ee.exports=M,M.Node=R,M.create=M,M.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var v=_.next,T=_.prev;return v&&(v.prev=T),T&&(T.next=v),_===this.head&&(this.head=v),_===this.tail&&(this.tail=T),_.list.length--,_.next=null,_.prev=null,_.list=null,v},M.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var v=this.head;_.list=this,_.next=v,v&&(v.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},M.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var v=this.tail;_.list=this,_.prev=v,v&&(v.next=_),this.tail=_,this.head||(this.head=_),this.length++}},M.prototype.push=function(){for(var _=0,v=arguments.length;_<v;_++)D(this,arguments[_]);return this.length},M.prototype.unshift=function(){for(var _=0,v=arguments.length;_<v;_++)C(this,arguments[_]);return this.length},M.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},M.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},M.prototype.forEach=function(_,v){v=v||this;for(var T=this.head,j=0;null!==T;j++)_.call(v,T.value,j,this),T=T.next},M.prototype.forEachReverse=function(_,v){v=v||this;for(var T=this.tail,j=this.length-1;null!==T;j--)_.call(v,T.value,j,this),T=T.prev},M.prototype.get=function(_){for(var v=0,T=this.head;null!==T&&v<_;v++)T=T.next;if(v===_&&null!==T)return T.value},M.prototype.getReverse=function(_){for(var v=0,T=this.tail;null!==T&&v<_;v++)T=T.prev;if(v===_&&null!==T)return T.value},M.prototype.map=function(_,v){v=v||this;for(var T=new M,j=this.head;null!==j;)T.push(_.call(v,j.value,this)),j=j.next;return T},M.prototype.mapReverse=function(_,v){v=v||this;for(var T=new M,j=this.tail;null!==j;)T.push(_.call(v,j.value,this)),j=j.prev;return T},M.prototype.reduce=function(_,v){var T,j=this.head;if(arguments.length>1)T=v;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");j=this.head.next,T=this.head.value}for(var O=0;null!==j;O++)T=_(T,j.value,O),j=j.next;return T},M.prototype.reduceReverse=function(_,v){var T,j=this.tail;if(arguments.length>1)T=v;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");j=this.tail.prev,T=this.tail.value}for(var O=this.length-1;null!==j;O--)T=_(T,j.value,O),j=j.prev;return T},M.prototype.toArray=function(){for(var _=new Array(this.length),v=0,T=this.head;null!==T;v++)_[v]=T.value,T=T.next;return _},M.prototype.toArrayReverse=function(){for(var _=new Array(this.length),v=0,T=this.tail;null!==T;v++)_[v]=T.value,T=T.prev;return _},M.prototype.slice=function(_,v){(v=v||this.length)<0&&(v+=this.length),(_=_||0)<0&&(_+=this.length);var T=new M;if(v<_||v<0)return T;_<0&&(_=0),v>this.length&&(v=this.length);for(var j=0,O=this.head;null!==O&&j<_;j++)O=O.next;for(;null!==O&&j<v;j++,O=O.next)T.push(O.value);return T},M.prototype.sliceReverse=function(_,v){(v=v||this.length)<0&&(v+=this.length),(_=_||0)<0&&(_+=this.length);var T=new M;if(v<_||v<0)return T;_<0&&(_=0),v>this.length&&(v=this.length);for(var j=this.length,O=this.tail;null!==O&&j>v;j--)O=O.prev;for(;null!==O&&j>_;j--,O=O.prev)T.push(O.value);return T},M.prototype.splice=function(_,v,...T){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var j=0,O=this.head;null!==O&&j<_;j++)O=O.next;var B=[];for(j=0;O&&j<v;j++)B.push(O.value),O=this.removeNode(O);for(null===O&&(O=this.tail),O!==this.head&&O!==this.tail&&(O=O.prev),j=0;j<T.length;j++)O=y(this,O,T[j]);return B},M.prototype.reverse=function(){for(var _=this.head,v=this.tail,T=_;null!==T;T=T.prev){var j=T.prev;T.prev=T.next,T.next=j}return this.head=v,this.tail=_,this};try{g(1171)(M)}catch{}},643:()=>{},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(ee,q,g)=>{var M=g(3801);function y(D){var C,R;function _(T,j){try{var O=D[T](j),B=O.value,Q=B instanceof M;Promise.resolve(Q?B.v:B).then(function(A){if(Q){var F="return"===T?"return":"next";if(!B.k||A.done)return _(F,A);A=D[F](A).value}v(O.done?"return":"normal",A)},function(A){_("throw",A)})}catch(A){v("throw",A)}}function v(T,j){switch(T){case"return":C.resolve({value:j,done:!0});break;case"throw":C.reject(j);break;default:C.resolve({value:j,done:!1})}(C=C.next)?_(C.key,C.arg):R=null}this._invoke=function(T,j){return new Promise(function(O,B){var Q={key:T,arg:j,resolve:O,reject:B,next:null};R?R=R.next=Q:(C=R=Q,_(T,j))})},"function"!=typeof D.return&&(this.return=void 0)}y.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},y.prototype.next=function(D){return this._invoke("next",D)},y.prototype.throw=function(D){return this._invoke("throw",D)},y.prototype.return=function(D){return this._invoke("return",D)},ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},3801:ee=>{ee.exports=function q(g,M){this.v=g,this.k=M},ee.exports.__esModule=!0,ee.exports.default=ee.exports},8131:(ee,q,g)=>{var M=g(3801);ee.exports=function y(D){var C={},R=!1;function _(v,T){return R=!0,T=new Promise(function(j){j(D[v](T))}),{done:!1,value:new M(T,1)}}return C[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},C.next=function(v){return R?(R=!1,v):_("next",v)},"function"==typeof D.throw&&(C.throw=function(v){if(R)throw R=!1,v;return _("throw",v)}),"function"==typeof D.return&&(C.return=function(v){return R?(R=!1,v):_("return",v)}),C},ee.exports.__esModule=!0,ee.exports.default=ee.exports},8237:ee=>{function g(M){function y(D){if(Object(D)!==D)return Promise.reject(new TypeError(D+" is not an object."));var C=D.done;return Promise.resolve(D.value).then(function(R){return{value:R,done:C}})}return(g=function(C){this.s=C,this.n=C.next}).prototype={s:null,n:null,next:function(){return y(this.n.apply(this.s,arguments))},return:function(C){var R=this.s.return;return void 0===R?Promise.resolve({value:C,done:!0}):y(R.apply(this.s,arguments))},throw:function(C){var R=this.s.return;return void 0===R?Promise.reject(C):y(R.apply(this.s,arguments))}},new g(M)}ee.exports=function q(M){var y,D,C,R=2;for(typeof Symbol<"u"&&(D=Symbol.asyncIterator,C=Symbol.iterator);R--;){if(D&&null!=(y=M[D]))return y.call(M);if(C&&null!=(y=M[C]))return new g(y.call(M));D="@@asyncIterator",C="@@iterator"}throw new TypeError("Object is not async iterable")},ee.exports.__esModule=!0,ee.exports.default=ee.exports},7156:ee=>{function q(M,y,D,C,R,_,v){try{var T=M[_](v),j=T.value}catch(O){return void D(O)}T.done?y(j):Promise.resolve(j).then(C,R)}ee.exports=function g(M){return function(){var y=this,D=arguments;return new Promise(function(C,R){var _=M.apply(y,D);function v(j){q(_,C,R,v,T,"next",j)}function T(j){q(_,C,R,v,T,"throw",j)}v(void 0)})}},ee.exports.__esModule=!0,ee.exports.default=ee.exports},6737:(ee,q,g)=>{var M=g(3801);ee.exports=function y(D){return new M(D,0)},ee.exports.__esModule=!0,ee.exports.default=ee.exports},8186:(ee,q,g)=>{var M=g(4642);ee.exports=function y(D){return function(){return new M(D.apply(this,arguments))}},ee.exports.__esModule=!0,ee.exports.default=ee.exports}},ee=>{ee(ee.s=2500)}]);