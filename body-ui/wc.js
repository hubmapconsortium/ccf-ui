(()=>{"use strict";var e,b={},d={};function t(e){var f=d[e];if(void 0!==f)return f.exports;var r=d[e]={id:e,loaded:!1,exports:{}};return b[e].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=b,e=[],t.O=(f,r,a,o)=>{if(!r){var c=1/0;for(n=0;n<e.length;n++){for(var[r,a,o]=e[n],_=!0,i=0;i<r.length;i++)(!1&o||c>=o)&&Object.keys(t.O).every(h=>t.O[h](r[i]))?r.splice(i--,1):(_=!1,o<c&&(c=o));if(_){e.splice(n--,1);var l=a();void 0!==l&&(f=l)}}return f}o=o||0;for(var n=e.length;n>0&&e[n-1][2]>o;n--)e[n]=e[n-1];e[n]=[r,a,o]},t.n=e=>{var f=e&&e.__esModule?()=>e.default:()=>e;return t.d(f,{a:f}),f},(()=>{var f,e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__;t.t=function(r,a){if(1&a&&(r=this(r)),8&a||"object"==typeof r&&r&&(4&a&&r.__esModule||16&a&&"function"==typeof r.then))return r;var o=Object.create(null);t.r(o);var n={};f=f||[null,e({}),e([]),e(e)];for(var c=2&a&&r;"object"==typeof c&&!~f.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach(_=>n[_]=()=>r[_]);return n.default=()=>r,t.d(o,n),o}})(),t.d=(e,f)=>{for(var r in f)t.o(f,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:f[r]})},t.o=(e,f)=>Object.prototype.hasOwnProperty.call(e,f),t.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};t.O.j=a=>0===e[a];var f=(a,o)=>{var i,l,[n,c,_]=o,s=0;if(n.some(u=>0!==e[u])){for(i in c)t.o(c,i)&&(t.m[i]=c[i]);if(_)var p=_(t)}for(a&&a(o);s<n.length;s++)t.o(e,l=n[s])&&e[l]&&e[l][0](),e[l]=0;return t.O(p)},r=self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[];r.forEach(f.bind(null,0)),r.push=f.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[429],{3757:(ie,Ee,de)=>{de(8332)},8332:()=>{!function(e){const n=e.performance;function i(L){n&&n.mark&&n.mark(L)}function o(L,T){n&&n.measure&&n.measure(L,T)}i("Zone");const c=e.__Zone_symbol_prefix||"__zone_symbol__";function a(L){return c+L}const y=!0===e[a("forceDuplicateZoneCheck")];if(e.Zone){if(y||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let d=(()=>{class L{static#e=this.__symbol__=a;static assertZonePatched(){if(e.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=L.current;for(;t.parent;)t=t.parent;return t}static get current(){return U.zone}static get currentTask(){return re}static __load_patch(t,r,k=!1){if(oe.hasOwnProperty(t)){if(!k&&y)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const C="Zone:"+t;i(C),oe[t]=r(e,L,z),o(C,C)}}get parent(){return this._parent}get name(){return this._name}constructor(t,r){this._parent=t,this._name=r?r.name||"unnamed":"<root>",this._properties=r&&r.properties||{},this._zoneDelegate=new v(this,this._parent&&this._parent._zoneDelegate,r)}get(t){const r=this.getZoneWith(t);if(r)return r._properties[t]}getZoneWith(t){let r=this;for(;r;){if(r._properties.hasOwnProperty(t))return r;r=r._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,r){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const k=this._zoneDelegate.intercept(this,t,r),C=this;return function(){return C.runGuarded(k,this,arguments,r)}}run(t,r,k,C){U={parent:U,zone:this};try{return this._zoneDelegate.invoke(this,t,r,k,C)}finally{U=U.parent}}runGuarded(t,r=null,k,C){U={parent:U,zone:this};try{try{return this._zoneDelegate.invoke(this,t,r,k,C)}catch($){if(this._zoneDelegate.handleError(this,$))throw $}}finally{U=U.parent}}runTask(t,r,k){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||K).name+"; Execution: "+this.name+")");if(t.state===x&&(t.type===Q||t.type===P))return;const C=t.state!=E;C&&t._transitionTo(E,A),t.runCount++;const $=re;re=t,U={parent:U,zone:this};try{t.type==P&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,r,k)}catch(l){if(this._zoneDelegate.handleError(this,l))throw l}}finally{t.state!==x&&t.state!==h&&(t.type==Q||t.data&&t.data.isPeriodic?C&&t._transitionTo(A,E):(t.runCount=0,this._updateTaskCount(t,-1),C&&t._transitionTo(x,E,x))),U=U.parent,re=$}}scheduleTask(t){if(t.zone&&t.zone!==this){let k=this;for(;k;){if(k===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);k=k.parent}}t._transitionTo(X,x);const r=[];t._zoneDelegates=r,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(k){throw t._transitionTo(h,X,x),this._zoneDelegate.handleError(this,k),k}return t._zoneDelegates===r&&this._updateTaskCount(t,1),t.state==X&&t._transitionTo(A,X),t}scheduleMicroTask(t,r,k,C){return this.scheduleTask(new p(I,t,r,k,C,void 0))}scheduleMacroTask(t,r,k,C,$){return this.scheduleTask(new p(P,t,r,k,C,$))}scheduleEventTask(t,r,k,C,$){return this.scheduleTask(new p(Q,t,r,k,C,$))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||K).name+"; Execution: "+this.name+")");if(t.state===A||t.state===E){t._transitionTo(G,A,E);try{this._zoneDelegate.cancelTask(this,t)}catch(r){throw t._transitionTo(h,G),this._zoneDelegate.handleError(this,r),r}return this._updateTaskCount(t,-1),t._transitionTo(x,G),t.runCount=0,t}}_updateTaskCount(t,r){const k=t._zoneDelegates;-1==r&&(t._zoneDelegates=null);for(let C=0;C<k.length;C++)k[C]._updateTaskCount(t.type,r)}}return L})();const b={name:"",onHasTask:(L,T,t,r)=>L.hasTask(t,r),onScheduleTask:(L,T,t,r)=>L.scheduleTask(t,r),onInvokeTask:(L,T,t,r,k,C)=>L.invokeTask(t,r,k,C),onCancelTask:(L,T,t,r)=>L.cancelTask(t,r)};class v{constructor(T,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=T,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const k=r&&r.onHasTask;(k||t&&t._hasTaskZS)&&(this._hasTaskZS=k?r:b,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=T,r.onScheduleTask||(this._scheduleTaskZS=b,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=b,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=b,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(T,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,T,t):new d(T,t)}intercept(T,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,T,t,r):t}invoke(T,t,r,k,C){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,T,t,r,k,C):t.apply(r,k)}handleError(T,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,T,t)}scheduleTask(T,t){let r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,T,t),r||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=I)throw new Error("Task is missing scheduleFn.");R(t)}return r}invokeTask(T,t,r,k){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,T,t,r,k):t.callback.apply(r,k)}cancelTask(T,t){let r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,T,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r}hasTask(T,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,T,t)}catch(r){this.handleError(T,r)}}_updateTaskCount(T,t){const r=this._taskCounts,k=r[T],C=r[T]=k+t;if(C<0)throw new Error("More tasks executed then were scheduled.");0!=k&&0!=C||this.hasTask(this.zone,{microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:T})}}class p{constructor(T,t,r,k,C,$){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=T,this.source=t,this.data=k,this.scheduleFn=C,this.cancelFn=$,!r)throw new Error("callback is not defined");this.callback=r;const l=this;this.invoke=T===Q&&k&&k.useG?p.invokeTask:function(){return p.invokeTask.call(e,l,this,arguments)}}static invokeTask(T,t,r){T||(T=this),ee++;try{return T.runCount++,T.zone.runTask(T,t,r)}finally{1==ee&&_(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(x,X)}_transitionTo(T,t,r){if(this._state!==t&&this._state!==r)throw new Error(`${this.type} '${this.source}': can not transition to '${T}', expecting state '${t}'${r?" or '"+r+"'":""}, was '${this._state}'.`);this._state=T,T==x&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const M=a("setTimeout"),Z=a("Promise"),N=a("then");let J,B=[],H=!1;function q(L){if(J||e[Z]&&(J=e[Z].resolve(0)),J){let T=J[N];T||(T=J.then),T.call(J,L)}else e[M](L,0)}function R(L){0===ee&&0===B.length&&q(_),L&&B.push(L)}function _(){if(!H){for(H=!0;B.length;){const L=B;B=[];for(let T=0;T<L.length;T++){const t=L[T];try{t.zone.runTask(t,null,null)}catch(r){z.onUnhandledError(r)}}}z.microtaskDrainDone(),H=!1}}const K={name:"NO ZONE"},x="notScheduled",X="scheduling",A="scheduled",E="running",G="canceling",h="unknown",I="microTask",P="macroTask",Q="eventTask",oe={},z={symbol:a,currentZoneFrame:()=>U,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:R,showUncaughtError:()=>!d[a("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:q};let U={parent:null,zone:new d(null,null)},re=null,ee=0;function W(){}o("Zone","Zone"),e.Zone=d}(typeof window<"u"&&window||typeof self<"u"&&self||global);const ie=Object.getOwnPropertyDescriptor,Ee=Object.defineProperty,de=Object.getPrototypeOf,ge=Object.create,Ve=Array.prototype.slice,Se="addEventListener",Oe="removeEventListener",Ze=Zone.__symbol__(Se),Ne=Zone.__symbol__(Oe),ce="true",ae="false",ke=Zone.__symbol__("");function Ie(e,n){return Zone.current.wrap(e,n)}function Me(e,n,i,o,c){return Zone.current.scheduleMacroTask(e,n,i,o,c)}const j=Zone.__symbol__,Pe=typeof window<"u",Te=Pe?window:void 0,Y=Pe&&Te||"object"==typeof self&&self||global,ct="removeAttribute";function Le(e,n){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=Ie(e[i],n+"_"+i));return e}function Fe(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const Be=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,we=!("nw"in Y)&&typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process),Ae=!we&&!Be&&!(!Pe||!Te.HTMLElement),Ue=typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process)&&!Be&&!(!Pe||!Te.HTMLElement),Re={},We=function(e){if(!(e=e||Y.event))return;let n=Re[e.type];n||(n=Re[e.type]=j("ON_PROPERTY"+e.type));const i=this||e.target||Y,o=i[n];let c;return Ae&&i===Te&&"error"===e.type?(c=o&&o.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===c&&e.preventDefault()):(c=o&&o.apply(this,arguments),null!=c&&!c&&e.preventDefault()),c};function qe(e,n,i){let o=ie(e,n);if(!o&&i&&ie(i,n)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const c=j("on"+n+"patched");if(e.hasOwnProperty(c)&&e[c])return;delete o.writable,delete o.value;const a=o.get,y=o.set,d=n.slice(2);let b=Re[d];b||(b=Re[d]=j("ON_PROPERTY"+d)),o.set=function(v){let p=this;!p&&e===Y&&(p=Y),p&&("function"==typeof p[b]&&p.removeEventListener(d,We),y&&y.call(p,null),p[b]=v,"function"==typeof v&&p.addEventListener(d,We,!1))},o.get=function(){let v=this;if(!v&&e===Y&&(v=Y),!v)return null;const p=v[b];if(p)return p;if(a){let M=a.call(this);if(M)return o.set.call(this,M),"function"==typeof v[ct]&&v.removeAttribute(n),M}return null},Ee(e,n,o),e[c]=!0}function Xe(e,n,i){if(n)for(let o=0;o<n.length;o++)qe(e,"on"+n[o],i);else{const o=[];for(const c in e)"on"==c.slice(0,2)&&o.push(c);for(let c=0;c<o.length;c++)qe(e,o[c],i)}}const ne=j("originalInstance");function ve(e){const n=Y[e];if(!n)return;Y[j(e)]=n,Y[e]=function(){const c=Le(arguments,e);switch(c.length){case 0:this[ne]=new n;break;case 1:this[ne]=new n(c[0]);break;case 2:this[ne]=new n(c[0],c[1]);break;case 3:this[ne]=new n(c[0],c[1],c[2]);break;case 4:this[ne]=new n(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},ue(Y[e],n);const i=new n(function(){});let o;for(o in i)"XMLHttpRequest"===e&&"responseBlob"===o||function(c){"function"==typeof i[c]?Y[e].prototype[c]=function(){return this[ne][c].apply(this[ne],arguments)}:Ee(Y[e].prototype,c,{set:function(a){"function"==typeof a?(this[ne][c]=Ie(a,e+"."+c),ue(this[ne][c],a)):this[ne][c]=a},get:function(){return this[ne][c]}})}(o);for(o in n)"prototype"!==o&&n.hasOwnProperty(o)&&(Y[e][o]=n[o])}function le(e,n,i){let o=e;for(;o&&!o.hasOwnProperty(n);)o=de(o);!o&&e[n]&&(o=e);const c=j(n);let a=null;if(o&&(!(a=o[c])||!o.hasOwnProperty(c))&&(a=o[c]=o[n],Fe(o&&ie(o,n)))){const d=i(a,c,n);o[n]=function(){return d(this,arguments)},ue(o[n],a)}return a}function lt(e,n,i){let o=null;function c(a){const y=a.data;return y.args[y.cbIdx]=function(){a.invoke.apply(this,arguments)},o.apply(y.target,y.args),a}o=le(e,n,a=>function(y,d){const b=i(y,d);return b.cbIdx>=0&&"function"==typeof d[b.cbIdx]?Me(b.name,d[b.cbIdx],b,c):a.apply(y,d)})}function ue(e,n){e[j("OriginalDelegate")]=n}let ze=!1,je=!1;function ft(){if(ze)return je;ze=!0;try{const e=Te.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(je=!0)}catch{}return je}Zone.__load_patch("ZoneAwarePromise",(e,n,i)=>{const o=Object.getOwnPropertyDescriptor,c=Object.defineProperty,y=i.symbol,d=[],b=!0===e[y("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],v=y("Promise"),p=y("then"),M="__creationTrace__";i.onUnhandledError=l=>{if(i.showUncaughtError()){const u=l&&l.rejection;u?console.error("Unhandled Promise rejection:",u instanceof Error?u.message:u,"; Zone:",l.zone.name,"; Task:",l.task&&l.task.source,"; Value:",u,u instanceof Error?u.stack:void 0):console.error(l)}},i.microtaskDrainDone=()=>{for(;d.length;){const l=d.shift();try{l.zone.runGuarded(()=>{throw l.throwOriginal?l.rejection:l})}catch(u){N(u)}}};const Z=y("unhandledPromiseRejectionHandler");function N(l){i.onUnhandledError(l);try{const u=n[Z];"function"==typeof u&&u.call(this,l)}catch{}}function B(l){return l&&l.then}function H(l){return l}function J(l){return t.reject(l)}const q=y("state"),R=y("value"),_=y("finally"),K=y("parentPromiseValue"),x=y("parentPromiseState"),X="Promise.then",A=null,E=!0,G=!1,h=0;function I(l,u){return s=>{try{z(l,u,s)}catch(f){z(l,!1,f)}}}const P=function(){let l=!1;return function(s){return function(){l||(l=!0,s.apply(null,arguments))}}},Q="Promise resolved with itself",oe=y("currentTaskTrace");function z(l,u,s){const f=P();if(l===s)throw new TypeError(Q);if(l[q]===A){let g=null;try{("object"==typeof s||"function"==typeof s)&&(g=s&&s.then)}catch(w){return f(()=>{z(l,!1,w)})(),l}if(u!==G&&s instanceof t&&s.hasOwnProperty(q)&&s.hasOwnProperty(R)&&s[q]!==A)re(s),z(l,s[q],s[R]);else if(u!==G&&"function"==typeof g)try{g.call(s,f(I(l,u)),f(I(l,!1)))}catch(w){f(()=>{z(l,!1,w)})()}else{l[q]=u;const w=l[R];if(l[R]=s,l[_]===_&&u===E&&(l[q]=l[x],l[R]=l[K]),u===G&&s instanceof Error){const m=n.currentTask&&n.currentTask.data&&n.currentTask.data[M];m&&c(s,oe,{configurable:!0,enumerable:!1,writable:!0,value:m})}for(let m=0;m<w.length;)ee(l,w[m++],w[m++],w[m++],w[m++]);if(0==w.length&&u==G){l[q]=h;let m=s;try{throw new Error("Uncaught (in promise): "+function a(l){return l&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(D){m=D}b&&(m.throwOriginal=!0),m.rejection=s,m.promise=l,m.zone=n.current,m.task=n.currentTask,d.push(m),i.scheduleMicroTask()}}}return l}const U=y("rejectionHandledHandler");function re(l){if(l[q]===h){try{const u=n[U];u&&"function"==typeof u&&u.call(this,{rejection:l[R],promise:l})}catch{}l[q]=G;for(let u=0;u<d.length;u++)l===d[u].promise&&d.splice(u,1)}}function ee(l,u,s,f,g){re(l);const w=l[q],m=w?"function"==typeof f?f:H:"function"==typeof g?g:J;u.scheduleMicroTask(X,()=>{try{const D=l[R],S=!!s&&_===s[_];S&&(s[K]=D,s[x]=w);const O=u.run(m,void 0,S&&m!==J&&m!==H?[]:[D]);z(s,!0,O)}catch(D){z(s,!1,D)}},s)}const L=function(){},T=e.AggregateError;class t{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(u){return z(new this(null),E,u)}static reject(u){return z(new this(null),G,u)}static any(u){if(!u||"function"!=typeof u[Symbol.iterator])return Promise.reject(new T([],"All promises were rejected"));const s=[];let f=0;try{for(let m of u)f++,s.push(t.resolve(m))}catch{return Promise.reject(new T([],"All promises were rejected"))}if(0===f)return Promise.reject(new T([],"All promises were rejected"));let g=!1;const w=[];return new t((m,D)=>{for(let S=0;S<s.length;S++)s[S].then(O=>{g||(g=!0,m(O))},O=>{w.push(O),f--,0===f&&(g=!0,D(new T(w,"All promises were rejected")))})})}static race(u){let s,f,g=new this((D,S)=>{s=D,f=S});function w(D){s(D)}function m(D){f(D)}for(let D of u)B(D)||(D=this.resolve(D)),D.then(w,m);return g}static all(u){return t.allWithCallback(u)}static allSettled(u){return(this&&this.prototype instanceof t?this:t).allWithCallback(u,{thenCallback:f=>({status:"fulfilled",value:f}),errorCallback:f=>({status:"rejected",reason:f})})}static allWithCallback(u,s){let f,g,w=new this((O,V)=>{f=O,g=V}),m=2,D=0;const S=[];for(let O of u){B(O)||(O=this.resolve(O));const V=D;try{O.then(F=>{S[V]=s?s.thenCallback(F):F,m--,0===m&&f(S)},F=>{s?(S[V]=s.errorCallback(F),m--,0===m&&f(S)):g(F)})}catch(F){g(F)}m++,D++}return m-=2,0===m&&f(S),w}constructor(u){const s=this;if(!(s instanceof t))throw new Error("Must be an instanceof Promise.");s[q]=A,s[R]=[];try{const f=P();u&&u(f(I(s,E)),f(I(s,G)))}catch(f){z(s,!1,f)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return t}then(u,s){let f=this.constructor?.[Symbol.species];(!f||"function"!=typeof f)&&(f=this.constructor||t);const g=new f(L),w=n.current;return this[q]==A?this[R].push(w,g,u,s):ee(this,w,g,u,s),g}catch(u){return this.then(null,u)}finally(u){let s=this.constructor?.[Symbol.species];(!s||"function"!=typeof s)&&(s=t);const f=new s(L);f[_]=_;const g=n.current;return this[q]==A?this[R].push(g,f,u,u):ee(this,g,f,u,u),f}}t.resolve=t.resolve,t.reject=t.reject,t.race=t.race,t.all=t.all;const r=e[v]=e.Promise;e.Promise=t;const k=y("thenPatched");function C(l){const u=l.prototype,s=o(u,"then");if(s&&(!1===s.writable||!s.configurable))return;const f=u.then;u[p]=f,l.prototype.then=function(g,w){return new t((D,S)=>{f.call(this,D,S)}).then(g,w)},l[k]=!0}return i.patchThen=C,r&&(C(r),le(e,"fetch",l=>function $(l){return function(u,s){let f=l.apply(u,s);if(f instanceof t)return f;let g=f.constructor;return g[k]||C(g),f}}(l))),Promise[n.__symbol__("uncaughtPromiseErrors")]=d,t}),Zone.__load_patch("toString",e=>{const n=Function.prototype.toString,i=j("OriginalDelegate"),o=j("Promise"),c=j("Error"),a=function(){if("function"==typeof this){const v=this[i];if(v)return"function"==typeof v?n.call(v):Object.prototype.toString.call(v);if(this===Promise){const p=e[o];if(p)return n.call(p)}if(this===Error){const p=e[c];if(p)return n.call(p)}}return n.call(this)};a[i]=n,Function.prototype.toString=a;const y=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":y.call(this)}});let ye=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ye=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ye=!1}const ht={useG:!0},te={},Ye={},$e=new RegExp("^"+ke+"(\\w+)(true|false)$"),Ke=j("propagationStopped");function Je(e,n){const i=(n?n(e):e)+ae,o=(n?n(e):e)+ce,c=ke+i,a=ke+o;te[e]={},te[e][ae]=c,te[e][ce]=a}function dt(e,n,i,o){const c=o&&o.add||Se,a=o&&o.rm||Oe,y=o&&o.listeners||"eventListeners",d=o&&o.rmAll||"removeAllListeners",b=j(c),v="."+c+":",p="prependListener",M="."+p+":",Z=function(R,_,K){if(R.isRemoved)return;const x=R.callback;let X;"object"==typeof x&&x.handleEvent&&(R.callback=E=>x.handleEvent(E),R.originalDelegate=x);try{R.invoke(R,_,[K])}catch(E){X=E}const A=R.options;return A&&"object"==typeof A&&A.once&&_[a].call(_,K.type,R.originalDelegate?R.originalDelegate:R.callback,A),X};function N(R,_,K){if(!(_=_||e.event))return;const x=R||_.target||e,X=x[te[_.type][K?ce:ae]];if(X){const A=[];if(1===X.length){const E=Z(X[0],x,_);E&&A.push(E)}else{const E=X.slice();for(let G=0;G<E.length&&(!_||!0!==_[Ke]);G++){const h=Z(E[G],x,_);h&&A.push(h)}}if(1===A.length)throw A[0];for(let E=0;E<A.length;E++){const G=A[E];n.nativeScheduleMicroTask(()=>{throw G})}}}const B=function(R){return N(this,R,!1)},H=function(R){return N(this,R,!0)};function J(R,_){if(!R)return!1;let K=!0;_&&void 0!==_.useG&&(K=_.useG);const x=_&&_.vh;let X=!0;_&&void 0!==_.chkDup&&(X=_.chkDup);let A=!1;_&&void 0!==_.rt&&(A=_.rt);let E=R;for(;E&&!E.hasOwnProperty(c);)E=de(E);if(!E&&R[c]&&(E=R),!E||E[b])return!1;const G=_&&_.eventNameToString,h={},I=E[b]=E[c],P=E[j(a)]=E[a],Q=E[j(y)]=E[y],oe=E[j(d)]=E[d];let z;_&&_.prepend&&(z=E[j(_.prepend)]=E[_.prepend]);const t=K?function(s){if(!h.isExisting)return I.call(h.target,h.eventName,h.capture?H:B,h.options)}:function(s){return I.call(h.target,h.eventName,s.invoke,h.options)},r=K?function(s){if(!s.isRemoved){const f=te[s.eventName];let g;f&&(g=f[s.capture?ce:ae]);const w=g&&s.target[g];if(w)for(let m=0;m<w.length;m++)if(w[m]===s){w.splice(m,1),s.isRemoved=!0,0===w.length&&(s.allRemoved=!0,s.target[g]=null);break}}if(s.allRemoved)return P.call(s.target,s.eventName,s.capture?H:B,s.options)}:function(s){return P.call(s.target,s.eventName,s.invoke,s.options)},C=_&&_.diff?_.diff:function(s,f){const g=typeof f;return"function"===g&&s.callback===f||"object"===g&&s.originalDelegate===f},$=Zone[j("UNPATCHED_EVENTS")],l=e[j("PASSIVE_EVENTS")],u=function(s,f,g,w,m=!1,D=!1){return function(){const S=this||e;let O=arguments[0];_&&_.transferEventName&&(O=_.transferEventName(O));let V=arguments[1];if(!V)return s.apply(this,arguments);if(we&&"uncaughtException"===O)return s.apply(this,arguments);let F=!1;if("function"!=typeof V){if(!V.handleEvent)return s.apply(this,arguments);F=!0}if(x&&!x(s,V,S,arguments))return;const fe=ye&&!!l&&-1!==l.indexOf(O),se=function U(s,f){return!ye&&"object"==typeof s&&s?!!s.capture:ye&&f?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?{...s,passive:!0}:s:{passive:!0}:s}(arguments[2],fe);if($)for(let _e=0;_e<$.length;_e++)if(O===$[_e])return fe?s.call(S,O,V,se):s.apply(this,arguments);const xe=!!se&&("boolean"==typeof se||se.capture),nt=!(!se||"object"!=typeof se)&&se.once,kt=Zone.current;let Ge=te[O];Ge||(Je(O,G),Ge=te[O]);const rt=Ge[xe?ce:ae];let De,me=S[rt],ot=!1;if(me){if(ot=!0,X)for(let _e=0;_e<me.length;_e++)if(C(me[_e],V))return}else me=S[rt]=[];const st=S.constructor.name,it=Ye[st];it&&(De=it[O]),De||(De=st+f+(G?G(O):O)),h.options=se,nt&&(h.options.once=!1),h.target=S,h.capture=xe,h.eventName=O,h.isExisting=ot;const be=K?ht:void 0;be&&(be.taskData=h);const he=kt.scheduleEventTask(De,V,be,g,w);return h.target=null,be&&(be.taskData=null),nt&&(se.once=!0),!ye&&"boolean"==typeof he.options||(he.options=se),he.target=S,he.capture=xe,he.eventName=O,F&&(he.originalDelegate=V),D?me.unshift(he):me.push(he),m?S:void 0}};return E[c]=u(I,v,t,r,A),z&&(E[p]=u(z,M,function(s){return z.call(h.target,h.eventName,s.invoke,h.options)},r,A,!0)),E[a]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=arguments[2],w=!!g&&("boolean"==typeof g||g.capture),m=arguments[1];if(!m)return P.apply(this,arguments);if(x&&!x(P,m,s,arguments))return;const D=te[f];let S;D&&(S=D[w?ce:ae]);const O=S&&s[S];if(O)for(let V=0;V<O.length;V++){const F=O[V];if(C(F,m))return O.splice(V,1),F.isRemoved=!0,0===O.length&&(F.allRemoved=!0,s[S]=null,"string"==typeof f)&&(s[ke+"ON_PROPERTY"+f]=null),F.zone.cancelTask(F),A?s:void 0}return P.apply(this,arguments)},E[y]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=[],w=Qe(s,G?G(f):f);for(let m=0;m<w.length;m++){const D=w[m];g.push(D.originalDelegate?D.originalDelegate:D.callback)}return g},E[d]=function(){const s=this||e;let f=arguments[0];if(f){_&&_.transferEventName&&(f=_.transferEventName(f));const g=te[f];if(g){const D=s[g[ae]],S=s[g[ce]];if(D){const O=D.slice();for(let V=0;V<O.length;V++){const F=O[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}if(S){const O=S.slice();for(let V=0;V<O.length;V++){const F=O[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}}}else{const g=Object.keys(s);for(let w=0;w<g.length;w++){const D=$e.exec(g[w]);let S=D&&D[1];S&&"removeListener"!==S&&this[d].call(this,S)}this[d].call(this,"removeListener")}if(A)return this},ue(E[c],I),ue(E[a],P),oe&&ue(E[d],oe),Q&&ue(E[y],Q),!0}let q=[];for(let R=0;R<i.length;R++)q[R]=J(i[R],o);return q}function Qe(e,n){if(!n){const a=[];for(let y in e){const d=$e.exec(y);let b=d&&d[1];if(b&&(!n||b===n)){const v=e[y];if(v)for(let p=0;p<v.length;p++)a.push(v[p])}}return a}let i=te[n];i||(Je(n),i=te[n]);const o=e[i[ae]],c=e[i[ce]];return o?c?o.concat(c):o.slice():c?c.slice():[]}function _t(e,n){const i=e.Event;i&&i.prototype&&n.patchMethod(i.prototype,"stopImmediatePropagation",o=>function(c,a){c[Ke]=!0,o&&o.apply(c,a)})}function Et(e,n,i,o,c){const a=Zone.__symbol__(o);if(n[a])return;const y=n[a]=n[o];n[o]=function(d,b,v){return b&&b.prototype&&c.forEach(function(p){const M=`${i}.${o}::`+p,Z=b.prototype;try{if(Z.hasOwnProperty(p)){const N=e.ObjectGetOwnPropertyDescriptor(Z,p);N&&N.value?(N.value=e.wrapWithCurrentZone(N.value,M),e._redefineProperty(b.prototype,p,N)):Z[p]&&(Z[p]=e.wrapWithCurrentZone(Z[p],M))}else Z[p]&&(Z[p]=e.wrapWithCurrentZone(Z[p],M))}catch{}}),y.call(n,d,b,v)},e.attachOriginToPatched(n[o],y)}function et(e,n,i){if(!i||0===i.length)return n;const o=i.filter(a=>a.target===e);if(!o||0===o.length)return n;const c=o[0].ignoreProperties;return n.filter(a=>-1===c.indexOf(a))}function tt(e,n,i,o){e&&Xe(e,et(e,n,i),o)}function He(e){return Object.getOwnPropertyNames(e).filter(n=>n.startsWith("on")&&n.length>2).map(n=>n.substring(2))}Zone.__load_patch("util",(e,n,i)=>{const o=He(e);i.patchOnProperties=Xe,i.patchMethod=le,i.bindArguments=Le,i.patchMacroTask=lt;const c=n.__symbol__("BLACK_LISTED_EVENTS"),a=n.__symbol__("UNPATCHED_EVENTS");e[a]&&(e[c]=e[a]),e[c]&&(n[c]=n[a]=e[c]),i.patchEventPrototype=_t,i.patchEventTarget=dt,i.isIEOrEdge=ft,i.ObjectDefineProperty=Ee,i.ObjectGetOwnPropertyDescriptor=ie,i.ObjectCreate=ge,i.ArraySlice=Ve,i.patchClass=ve,i.wrapWithCurrentZone=Ie,i.filterProperties=et,i.attachOriginToPatched=ue,i._redefineProperty=Object.defineProperty,i.patchCallbacks=Et,i.getGlobalObjects=()=>({globalSources:Ye,zoneSymbolEventNames:te,eventNames:o,isBrowser:Ae,isMix:Ue,isNode:we,TRUE_STR:ce,FALSE_STR:ae,ZONE_SYMBOL_PREFIX:ke,ADD_EVENT_LISTENER_STR:Se,REMOVE_EVENT_LISTENER_STR:Oe})});const Ce=j("zoneTask");function pe(e,n,i,o){let c=null,a=null;i+=o;const y={};function d(v){const p=v.data;return p.args[0]=function(){return v.invoke.apply(this,arguments)},p.handleId=c.apply(e,p.args),v}function b(v){return a.call(e,v.data.handleId)}c=le(e,n+=o,v=>function(p,M){if("function"==typeof M[0]){const Z={isPeriodic:"Interval"===o,delay:"Timeout"===o||"Interval"===o?M[1]||0:void 0,args:M},N=M[0];M[0]=function(){try{return N.apply(this,arguments)}finally{Z.isPeriodic||("number"==typeof Z.handleId?delete y[Z.handleId]:Z.handleId&&(Z.handleId[Ce]=null))}};const B=Me(n,M[0],Z,d,b);if(!B)return B;const H=B.data.handleId;return"number"==typeof H?y[H]=B:H&&(H[Ce]=B),H&&H.ref&&H.unref&&"function"==typeof H.ref&&"function"==typeof H.unref&&(B.ref=H.ref.bind(H),B.unref=H.unref.bind(H)),"number"==typeof H||H?H:B}return v.apply(e,M)}),a=le(e,i,v=>function(p,M){const Z=M[0];let N;"number"==typeof Z?N=y[Z]:(N=Z&&Z[Ce],N||(N=Z)),N&&"string"==typeof N.type?"notScheduled"!==N.state&&(N.cancelFn&&N.data.isPeriodic||0===N.runCount)&&("number"==typeof Z?delete y[Z]:Z&&(Z[Ce]=null),N.zone.cancelTask(N)):v.apply(e,M)})}Zone.__load_patch("legacy",e=>{const n=e[Zone.__symbol__("legacyPatch")];n&&n()}),Zone.__load_patch("timers",e=>{const n="set",i="clear";pe(e,n,i,"Timeout"),pe(e,n,i,"Interval"),pe(e,n,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{pe(e,"request","cancel","AnimationFrame"),pe(e,"mozRequest","mozCancel","AnimationFrame"),pe(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,n)=>{const i=["alert","prompt","confirm"];for(let o=0;o<i.length;o++)le(e,i[o],(a,y,d)=>function(b,v){return n.current.run(a,e,v,d)})}),Zone.__load_patch("EventTarget",(e,n,i)=>{(function gt(e,n){n.patchEventPrototype(e,n)})(e,i),function mt(e,n){if(Zone[n.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:o,TRUE_STR:c,FALSE_STR:a,ZONE_SYMBOL_PREFIX:y}=n.getGlobalObjects();for(let b=0;b<i.length;b++){const v=i[b],Z=y+(v+a),N=y+(v+c);o[v]={},o[v][a]=Z,o[v][c]=N}const d=e.EventTarget;d&&d.prototype&&n.patchEventTarget(e,n,[d&&d.prototype])}(e,i);const o=e.XMLHttpRequestEventTarget;o&&o.prototype&&i.patchEventTarget(e,i,[o.prototype])}),Zone.__load_patch("MutationObserver",(e,n,i)=>{ve("MutationObserver"),ve("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,n,i)=>{ve("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,n,i)=>{ve("FileReader")}),Zone.__load_patch("on_property",(e,n,i)=>{!function Tt(e,n){if(we&&!Ue||Zone[e.symbol("patchEvents")])return;const i=n.__Zone_ignore_on_properties;let o=[];if(Ae){const c=window;o=o.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const a=function ut(){try{const e=Te.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:c,ignoreProperties:["error"]}]:[];tt(c,He(c),i&&i.concat(a),de(c))}o=o.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let c=0;c<o.length;c++){const a=n[o[c]];a&&a.prototype&&tt(a.prototype,He(a.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,n,i)=>{!function pt(e,n){const{isBrowser:i,isMix:o}=n.getGlobalObjects();(i||o)&&e.customElements&&"customElements"in e&&n.patchCallbacks(n,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,n)=>{!function b(v){const p=v.XMLHttpRequest;if(!p)return;const M=p.prototype;let N=M[Ze],B=M[Ne];if(!N){const h=v.XMLHttpRequestEventTarget;if(h){const I=h.prototype;N=I[Ze],B=I[Ne]}}const H="readystatechange",J="scheduled";function q(h){const I=h.data,P=I.target;P[a]=!1,P[d]=!1;const Q=P[c];N||(N=P[Ze],B=P[Ne]),Q&&B.call(P,H,Q);const oe=P[c]=()=>{if(P.readyState===P.DONE)if(!I.aborted&&P[a]&&h.state===J){const U=P[n.__symbol__("loadfalse")];if(0!==P.status&&U&&U.length>0){const re=h.invoke;h.invoke=function(){const ee=P[n.__symbol__("loadfalse")];for(let W=0;W<ee.length;W++)ee[W]===h&&ee.splice(W,1);!I.aborted&&h.state===J&&re.call(h)},U.push(h)}else h.invoke()}else!I.aborted&&!1===P[a]&&(P[d]=!0)};return N.call(P,H,oe),P[i]||(P[i]=h),E.apply(P,I.args),P[a]=!0,h}function R(){}function _(h){const I=h.data;return I.aborted=!0,G.apply(I.target,I.args)}const K=le(M,"open",()=>function(h,I){return h[o]=0==I[2],h[y]=I[1],K.apply(h,I)}),X=j("fetchTaskAborting"),A=j("fetchTaskScheduling"),E=le(M,"send",()=>function(h,I){if(!0===n.current[A]||h[o])return E.apply(h,I);{const P={target:h,url:h[y],isPeriodic:!1,args:I,aborted:!1},Q=Me("XMLHttpRequest.send",R,P,q,_);h&&!0===h[d]&&!P.aborted&&Q.state===J&&Q.invoke()}}),G=le(M,"abort",()=>function(h,I){const P=function Z(h){return h[i]}(h);if(P&&"string"==typeof P.type){if(null==P.cancelFn||P.data&&P.data.aborted)return;P.zone.cancelTask(P)}else if(!0===n.current[X])return G.apply(h,I)})}(e);const i=j("xhrTask"),o=j("xhrSync"),c=j("xhrListener"),a=j("xhrScheduled"),y=j("xhrURL"),d=j("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function at(e,n){const i=e.constructor.name;for(let o=0;o<n.length;o++){const c=n[o],a=e[c];if(a){if(!Fe(ie(e,c)))continue;e[c]=(d=>{const b=function(){return d.apply(this,Le(arguments,i+"."+c))};return ue(b,d),b})(a)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,n)=>{function i(o){return function(c){Qe(e,o).forEach(y=>{const d=e.PromiseRejectionEvent;if(d){const b=new d(o,{promise:c.promise,reason:c.rejection});y.invoke(b)}})}}e.PromiseRejectionEvent&&(n[j("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),n[j("rejectionHandledHandler")]=i("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(e,n,i)=>{!function yt(e,n){n.patchMethod(e,"queueMicrotask",i=>function(o,c){Zone.current.scheduleMicroTask("queueMicrotask",c[0])})}(e,i)})}},ie=>{ie(ie.s=3757)}]);
!function(m,w){"use strict";function rt(){var e=K.splice(0,K.length);for(ie=0;e.length;)e.shift().call(null,e.shift())}function me(e,t){for(var n=0,r=e.length;n<r;n++)Te(e[n],t)}function fe(e){return function(t){Lt(t)&&(Te(t,e),L.length&&me(t.querySelectorAll(L),e))}}function de(e){var t=le.call(e,"is"),n=e.nodeName.toUpperCase(),r=v.call(D,t?Y+t.toUpperCase():x+n);return t&&-1<r&&!De(n,t)?-1:r}function De(e,t){return-1<L.indexOf(e+'[is="'+t+'"]')}function Ie(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[W]||2,a=e[He]||3;!ce||o&&o!==t||!t[y]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[y](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function Fe(e){var t=fe(e);return function(n){K.push(t,n.target),ie&&clearTimeout(ie),ie=setTimeout(rt,1)}}function pe(e){nt&&(nt=!1,e.currentTarget.removeEventListener(Ze,pe)),L.length&&me((e.target||u).querySelectorAll(L),e.detail===E?E:b),R&&function at(){for(var e,t=0,n=G.length;t<n;t++)V.contains(e=G[t])||(n--,G.splice(t--,1),Te(e,E))}()}function lt(e,t){var n=this;Ye.call(n,e,t),Me.call(n,{target:n})}function Se(e,t,n){var r=t.apply(e,n),o=de(r);return-1<o&&U(r,q[o]),n.pop()&&L.length&&function ot(e){for(var t,n=0,r=e.length;n<r;n++)U(t=e[n],q[de(t)])}(r.querySelectorAll(L)),r}function he(e,t){Tt(e,t),$?$.observe(e,gt):(ue&&(e.setAttribute=lt,e[H]=Ee(e),e[g](st,Me)),e[g](N,Ie)),e[k]&&ce&&(e.created=!0,e[k](),e.created=!1)}function Ve(e){throw new Error("A "+e+" type is already registered")}function Te(e,t){var n,r,o=de(e);-1<o&&!Mt.call(e,"TEMPLATE")&&(Q(e,q[o]),o=0,t!==b||e[b]?t!==E||e[E]||(e[b]=!1,e[E]=!0,r="disconnected",o=1):(e[E]=!1,e[b]=!0,r="connected",o=1,R&&v.call(G,e)<0&&G.push(e)),o&&(n=e[t+O]||e[r+O])&&n.call(e))}function z(){}function Pe(e,t,n){var r=n&&n[_]||"",o=t.prototype,l=Ce(o),a=t.observedAttributes||ye,s={prototype:l};oe(l,k,{value:function(){if(te)te=!1;else if(!this[B]){this[B]=!0,new t(this),o[k]&&o[k].call(this);var i=j[ne.get(t)];(!Z||i.create.length>1)&&_e(this)}}}),oe(l,y,{value:function(i){-1<v.call(a,i)&&o[y]&&o[y].apply(this,arguments)}}),o[qe]&&oe(l,ut,{value:o[qe]}),o[Be]&&oe(l,ct,{value:o[Be]}),r&&(s[_]=r),e=e.toUpperCase(),j[e]={constructor:t,create:r?[r,re(e)]:[e]},ne.set(t,e),u[S](e.toLowerCase(),s),Le(e),P[e].r()}function Re(e){var t=j[e.toUpperCase()];return t&&t.constructor}function Ue(e){return"string"==typeof e?e:e&&e.is||""}function _e(e){for(var t,n=e[y],r=n?e.attributes:ye,o=r.length;o--;)n.call(e,(t=r[o]).name||t.nodeName,null,t.value||t.nodeValue)}function Le(e){return(e=e.toUpperCase())in P||(P[e]={},P[e].p=new Xe(function(t){P[e].r=t})),P[e].p}function ke(){C&&delete m.customElements,I(m,"customElements",{configurable:!0,value:new z}),I(m,"CustomElementRegistry",{configurable:!0,value:z});for(var e=it.get(/^HTML[A-Z]*[a-z]/),t=e.length;t--;function(n){var r=m[n];if(r){m[n]=function(o){var l,a;return o||(o=this),o[B]||(te=!0,l=j[ne.get(o.constructor)],(o=(a=Z&&1===l.create.length)?Reflect.construct(r,ye,l.constructor):u.createElement.apply(u,l.create))[B]=!0,te=!1,a||_e(o)),o},m[n].prototype=r.prototype;try{r.prototype.constructor=m[n]}catch{I(r,B,{value:m[n]})}}}(e[t]));u.createElement=function(n,r){var o=Ue(r);return o?Ae.call(this,n,re(o)):Ae.call(this,n)},et||(Oe=!0,u[S](""))}var u=m.document,T=m.Object,it=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,s=function(d,f){(f=f.toLowerCase())in i||(i[d]=(i[d]||[]).concat(f),i[f]=i[f.toUpperCase()]=d)},i=(T.create||T)(null),c={};for(n in e)for(o in e[n])for(i[o]=r=e[n][o],t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return c.get=function(d){return"string"==typeof d?i[d]||(l.test(d)?[]:""):function(d){var f,h=[];for(f in i)d.test(f)&&h.push(f);return h}(d)},c.set=function(d,f){return l.test(d)?s(d,f):s(f,d),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof w&&(w={type:w||"auto"});var K,Me,X,Ee,$,ve,Q,U,A,e,t,n,r,o,S="registerElement",xe=1e5*m.Math.random()>>0,H="__"+S+xe,g="addEventListener",b="attached",O="Callback",E="detached",_="extends",y="attributeChanged"+O,ut=b+O,qe="connected"+O,Be="disconnected"+O,k="created"+O,ct=E+O,W="ADDITION",He="REMOVAL",N="DOMAttrModified",Ze="DOMContentLoaded",st="DOMSubtreeModified",x="<",Y="=",mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ft=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],D=[],q=[],L="",V=u.documentElement,v=D.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ge=T.prototype,be=ge.hasOwnProperty,J=ge.isPrototypeOf,I=T.defineProperty,ye=[],ee=T.getOwnPropertyDescriptor,je=T.getOwnPropertyNames,dt=T.getPrototypeOf,Ge=T.setPrototypeOf,ze=!!T.__proto__,B="__dreCEv1",C=m.customElements,Z=!/^force/.test(w.type)&&!!(C&&C.define&&C.get&&C.whenDefined),Ke=T.create||T,ht=m.Map||function(){var e,t=[],n=[];return{get:function(r){return n[v.call(t,r)]},set:function(r,o){(e=v.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},Xe=m.Promise||function(e){function t(l){for(r=!0;n.length;)n.shift()(l)}var n=[],r=!1,o={catch:function(){return o},then:function(l){return n.push(l),r&&setTimeout(t,1),o}};return e(t),o},te=!1,j=Ke(null),P=Ke(null),ne=new ht,re=function(e){return e.toLowerCase()},Ce=T.create||function e(t){return t?(e.prototype=t,new e):this},Tt=Ge||(ze?function(e,t){return e.__proto__=t,e}:je&&ee?function(){function e(t,n){for(var r,o=je(n),l=0,a=o.length;l<a;l++)be.call(t,r=o[l])||I(t,r,ee(n,r))}return function(t,n){do{e(t,n)}while((n=dt(n))&&!J.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),F=m.MutationObserver||m.WebKitMutationObserver,$e=m.HTMLAnchorElement,p=(m.HTMLElement||m.Element||m.Node).prototype,R=!J.call(p,V),oe=R?function(e,t,n){return e[t]=n.value,e}:I,Lt=R?function(e){return 1===e.nodeType}:function(e){return J.call(p,e)},G=R&&[],Qe=p.attachShadow,We=p.cloneNode,Mt=p.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},we=p.dispatchEvent,le=p.getAttribute,Et=p.hasAttribute,vt=p.removeAttribute,Ye=p.setAttribute,ae=u.createElement,Ht=u.importNode,Ae=ae,gt=F&&{attributes:!0,characterData:!0,attributeOldValue:!0},Je=F||function(e){ue=!1,V.removeEventListener(N,Je)},ie=0,et=S in u&&!/^force-all/.test(w.type),tt=!0,Oe=!1,ue=!0,nt=!0,ce=!0;if(F&&((A=u.createElement("div")).innerHTML="<div><div></div></div>",new F(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(A=ee(p,"innerHTML"))&&A.set;n&&I(p,"innerHTML",{set:function(r){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,r)}})}t.disconnect(),A=null}).observe(A,{childList:!0,subtree:!0}),A.innerHTML=""),et||(Ge||ze?(Q=function(e,t){J.call(t,e)||he(e,t)},U=he):(Q=function(e,t){e[H]||(e[H]=T(!0),he(e,t))},U=Q),R?(ue=!1,e=ee(p,g),t=e.value,n=function(l){var a=new CustomEvent(N,{bubbles:!0});a.attrName=l,a.prevValue=le.call(this,l),a.newValue=null,a[He]=a.attrChange=2,vt.call(this,l),we.call(this,a)},r=function(l,a){var s=Et.call(this,l),i=s&&le.call(this,l),c=new CustomEvent(N,{bubbles:!0});Ye.call(this,l,a),c.attrName=l,c.prevValue=s?i:null,c.newValue=a,s?c.MODIFICATION=c.attrChange=1:c[W]=c.attrChange=0,we.call(this,c)},o=function(l){var a,s=l.currentTarget,i=s[H],c=l.propertyName;i.hasOwnProperty(c)&&(i=i[c],(a=new CustomEvent(N,{bubbles:!0})).attrName=i.name,a.prevValue=i.value||null,a.newValue=i.value=s[c]||null,null==a.prevValue?a[W]=a.attrChange=0:a.MODIFICATION=a.attrChange=1,we.call(s,a))},e.value=function(l,a,s){l===N&&this[y]&&this.setAttribute!==r&&(this[H]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,l,a,s)},I(p,g,e)):F||(V[g](N,Je),V.setAttribute(H,1),V.removeAttribute(H),ue&&(Me=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[H],o[H]=n=Ee(o),n){if(!(r in t))return X(0,o,r,t[r],n[r],W);if(n[r]!==t[r])return X(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return X(2,o,r,t[r],n[r],He)}},X=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,Ie(a)},Ee=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),u[S]=function(e,t){if(n=e.toUpperCase(),tt&&(tt=!1,F?($=function(i,c){function d(f,h){for(var M=0,se=f.length;M<se;h(f[M++]));}return new F(function(f){for(var h,M,se,Ne=0,bt=f.length;Ne<bt;Ne++)"childList"===(h=f[Ne]).type?(d(h.addedNodes,i),d(h.removedNodes,c)):(M=h.target,ce&&M[y]&&"style"!==h.attributeName&&(se=le.call(M,h.attributeName))!==h.oldValue&&M[y](h.attributeName,h.oldValue,se))})}(fe(b),fe(E)),(ve=function(i){return $.observe(i,{childList:!0,subtree:!0}),i})(u),Qe&&(p.attachShadow=function(){return ve(Qe.apply(this,arguments))})):(K=[],u[g]("DOMNodeInserted",Fe(b)),u[g]("DOMNodeRemoved",Fe(E))),u[g](Ze,pe),u[g]("readystatechange",pe),u.importNode=function(i,c){switch(i.nodeType){case 1:return Se(u,Ht,[i,!!c]);case 11:for(var d=u.createDocumentFragment(),f=i.childNodes,h=f.length,M=0;M<h;M++)d.appendChild(u.importNode(f[M],!!c));return d;default:return We.call(i,!!c)}},p.cloneNode=function(i){return Se(this,We,[!!i])}),Oe)return Oe=!1;if(-2<v.call(D,Y+n)+v.call(D,x+n)&&Ve(e),!mt.test(n)||-1<v.call(ft,n))throw new Error("The type "+e+" is invalid");var n,r,o=function(){return a?u.createElement(s,n):u.createElement(s)},l=t||ge,a=be.call(l,_),s=a?t[_].toUpperCase():n;return a&&-1<v.call(D,x+s)&&Ve(s),r=D.push((a?Y:x)+n)-1,L=L.concat(L.length?",":"",a?s+'[is="'+e.toLowerCase()+'"]':s),o.prototype=q[r]=be.call(l,"prototype")?l.prototype:Ce(p),L.length&&me(u.querySelectorAll(L),b),o},u.createElement=Ae=function(e,t){var n=Ue(t),r=n?ae.call(u,e,re(n)):ae.call(u,e),o=""+e,l=v.call(D,(n?Y:x)+(n||o).toUpperCase()),a=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=De(o.toUpperCase(),n))),ce=!u.createElement.innerHTMLHelper,a&&U(r,q[l]),r}),addEventListener("beforeunload",function(){delete u.createElement,delete u.importNode,delete u[S]},!1),z.prototype={constructor:z,define:Z?function(e,t,n){if(n)Pe(e,t,n);else{var r=e.toUpperCase();j[r]={constructor:t,create:[r]},ne.set(t,r),C.define(e,t)}}:Pe,get:Z?function(e){return C.get(e)||Re(e)}:Re,whenDefined:Z?function(e){return Xe.race([C.whenDefined(e),Le(e)])}:Le},!C||/^force/.test(w.type))ke();else if(!w.noBuiltIn)try{!function(e,t,n){var r=new RegExp("^<a\\s+is=('|\")"+n+"\\1></a>$");if(t[_]="a",(e.prototype=Ce($e.prototype)).constructor=e,m.customElements.define(n,e,t),!r.test(u.createElement("a",{is:n}).outerHTML)||!r.test((new e).outerHTML))throw t}(function e(){return Reflect.construct($e,[],e)},{},"document-register-element-a"+xe)}catch{ke()}if(!w.noBuiltIn)try{if(ae.call(u,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{re=function(t){return{is:t.toLowerCase()}}}}(window);
(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[179],{822:te=>{"use strict";te.exports=g,te.exports.default=g;var J=1e20;function g(N,_,y,I,L,P){this.fontSize=N||24,this.buffer=void 0===_?3:_,this.cutoff=I||.25,this.fontFamily=L||"sans-serif",this.fontWeight=P||"normal",this.radius=y||8;var j=this.size=this.fontSize+2*this.buffer,oe=j+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=j,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(j/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function k(N,_,y,I,L,P){for(var j=0;j<_;j++)C(N,j,_,y,I,L,P);for(var oe=0;oe<y;oe++)C(N,oe*_,1,_,I,L,P)}function C(N,_,y,I,L,P,j){var oe,M,$,ce;for(P[0]=0,j[0]=-J,j[1]=J,oe=0;oe<I;oe++)L[oe]=N[_+oe*y];for(oe=1,M=0,$=0;oe<I;oe++){do{$=(L[oe]-L[ce=P[M]]+oe*oe-ce*ce)/(oe-ce)/2}while($<=j[M]&&--M>-1);P[++M]=oe,j[M]=$,j[M+1]=J}for(oe=0,M=0;oe<I;oe++){for(;j[M+1]<oe;)M++;N[_+oe*y]=L[ce=P[M]]+(oe-ce)*(oe-ce)}}g.prototype._draw=function(N,_){var P,j,oe,M,$,ce,K,ie,ne,y=this.ctx.measureText(N),I=y.width,L=2*this.buffer;_&&this.useMetrics?($=Math.floor(y.actualBoundingBoxAscent),ie=this.buffer+Math.ceil(y.actualBoundingBoxAscent),ce=this.buffer,K=this.buffer,P=(j=Math.min(this.size,Math.ceil(y.actualBoundingBoxRight-y.actualBoundingBoxLeft)))+L,oe=(M=Math.min(this.size-ce,Math.ceil(y.actualBoundingBoxAscent+y.actualBoundingBoxDescent)))+L,this.ctx.textBaseline="alphabetic"):(P=j=this.size,oe=M=this.size,$=19*this.fontSize/24,ce=K=0,ie=this.middle,this.ctx.textBaseline="middle"),j&&M&&(this.ctx.clearRect(K,ce,j,M),this.ctx.fillText(N,this.buffer,ie),ne=this.ctx.getImageData(K,ce,j,M));var q=new Uint8ClampedArray(P*oe);return function S(N,_,y,I,L,P,j){P.fill(J,0,_*y),j.fill(0,0,_*y);for(var oe=(_-I)/2,M=0;M<L;M++)for(var $=0;$<I;$++){var ce=(M+oe)*_+$+oe,K=N.data[4*(M*I+$)+3]/255;if(1===K)P[ce]=0,j[ce]=J;else if(0===K)P[ce]=J,j[ce]=0;else{var ie=Math.max(0,.5-K),ne=Math.max(0,K-.5);P[ce]=ie*ie,j[ce]=ne*ne}}}(ne,P,oe,j,M,this.gridOuter,this.gridInner),k(this.gridOuter,P,oe,this.f,this.v,this.z),k(this.gridInner,P,oe,this.f,this.v,this.z),function b(N,_,y,I,L,P,j){for(var oe=0;oe<_*y;oe++){var M=Math.sqrt(I[oe])-Math.sqrt(L[oe]);N[oe]=Math.round(255-255*(M/P+j))}}(q,P,oe,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:q,metrics:{width:j,height:M,sdfWidth:P,sdfHeight:oe,top:$,left:0,advance:I}}},g.prototype.draw=function(N){return this._draw(N,!1).data},g.prototype.drawWithMetrics=function(N){return this._draw(N,!0)}},7055:(te,J,g)=>{"use strict";var S={};g.r(S),g.d(S,{decode:()=>C_e,name:()=>S_e});var b={};g.r(b),g.d(b,{name:()=>O_e,preprocess:()=>k_e});var k={};g.r(k),g.d(k,{name:()=>P_e,preprocess:()=>N_e});var C={};g.r(C),g.d(C,{decode:()=>ybe,encode:()=>vbe,name:()=>_be,preprocess:()=>bbe});var N={};g.r(N),g.d(N,{decode:()=>Sbe,encode:()=>Cbe,name:()=>Abe});var _={};g.r(_),g.d(_,{decode:()=>Tbe,encode:()=>Ibe,name:()=>Mbe});var y={};g.r(y),g.d(y,{decode:()=>Rbe,encode:()=>Obe,name:()=>Dbe});var I={};function L(n){return"function"==typeof n}function P(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}g.r(I),g.d(I,{delMany:()=>xPe,get:()=>yPe,setMany:()=>vPe});const j=P(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function oe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class M{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(L(i))try{i()}catch(o){e=o instanceof j?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{K(o)}catch(s){e=e??[],s instanceof j?e=[...e,...s.errors]:e.push(s)}}if(e)throw new j(e)}}add(e){var t;if(e&&e!==this)if(this.closed)K(e);else{if(e instanceof M){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&oe(t,e)}remove(e){const{_finalizers:t}=this;t&&oe(t,e),e instanceof M&&e._removeParent(this)}}M.EMPTY=(()=>{const n=new M;return n.closed=!0,n})();const $=M.EMPTY;function ce(n){return n instanceof M||n&&"closed"in n&&L(n.remove)&&L(n.add)&&L(n.unsubscribe)}function K(n){L(n)?n():n.unsubscribe()}const ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ne={setTimeout(n,e,...t){const{delegate:i}=ne;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ne;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function q(n){ne.setTimeout(()=>{const{onUnhandledError:e}=ie;if(!e)throw n;e(n)})}function U(){}const x=ue("C",void 0,void 0);function ue(n,e,t){return{kind:n,value:e,error:t}}let W=null;function Ce(n){if(ie.useDeprecatedSynchronousErrorHandling){const e=!W;if(e&&(W={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=W;if(W=null,t)throw i}}else n()}class ve extends M{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ce(e)&&e.add(this)):this.destination=Ve}static create(e,t,i){return new qe(e,t,i)}next(e){this.isStopped?ke(function O(n){return ue("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ke(function B(n){return ue("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ke(x,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Me(n,e){return Oe.call(n,e)}class Je{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){we(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){we(i)}else we(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){we(t)}}}class qe extends ve{constructor(e,t,i){let r;if(super(),L(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&ie.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Me(e.next,o),error:e.error&&Me(e.error,o),complete:e.complete&&Me(e.complete,o)}):r=e}this.destination=new Je(r)}}function we(n){ie.useDeprecatedSynchronousErrorHandling?function le(n){ie.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=n)}(n):q(n)}function ke(n,e){const{onStoppedNotification:t}=ie;t&&ne.setTimeout(()=>t(n,e))}const Ve={closed:!0,next:U,error:function Ne(n){throw n},complete:U},me="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ee(n){return n}function Ke(...n){return at(n)}function at(n){return 0===n.length?Ee:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function R(n){return n&&n instanceof ve||function G(n){return n&&L(n.next)&&L(n.error)&&L(n.complete)}(n)&&ce(n)}(t)?t:new qe(t,i,r);return Ce(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=_e(i))((r,o)=>{const s=new qe({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[me](){return this}pipe(...t){return at(t)(this)}toPromise(t){return new(t=_e(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function _e(n){var e;return null!==(e=n??ie.Promise)&&void 0!==e?e:Promise}const se=P(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let V=(()=>{class n extends Ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Fe(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new se}next(t){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?$:(this.currentObservers=null,o.push(t),new M(()=>{this.currentObservers=null,oe(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Ye;return t.source=this,t}}return n.create=(e,t)=>new Fe(e,t),n})();class Fe extends V{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:$}}function et(n){return L(n?.lift)}function fe(n){return e=>{if(et(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,e,t,i,r){return new X(n,e,t,i,r)}class X extends ve{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function A(n,e){return fe((t,i)=>{let r=0;t.subscribe(Q(i,o=>{i.next(n.call(e,o,r++))}))})}function Ge(n,e,t,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function gt(n,e){return function(t,i){e(t,i,n)}}function Te(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function Sn(n){return this instanceof Sn?(this.v=n,this):new Sn(n)}function ys(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ze(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const da=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function nc(n){return L(n?.then)}function Wl(n){return L(n[me])}function $l(n){return Symbol.asyncIterator&&L(n?.[Symbol.asyncIterator])}function zc(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Hc=function ph(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tu(n){return L(n?.[Hc])}function Gc(n){return function Cn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(m){return new Promise(function(v,E){o.push([f,m,v,E])>1||a(f,m)})})}function a(f,m){try{!function c(f){f.value instanceof Sn?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}(i[f](m))}catch(v){h(o[0][3],v)}}function l(f){a("next",f)}function d(f){a("throw",f)}function h(f,m){f(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Sn(t.read());if(r)return yield Sn(void 0);yield yield Sn(i)}}finally{t.releaseLock()}})}function Yl(n){return L(n?.getReader)}function Li(n){if(n instanceof Ye)return n;if(null!=n){if(Wl(n))return function Mi(n){return new Ye(e=>{const t=n[me]();if(L(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(da(n))return function Wc(n){return new Ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(nc(n))return function Hs(n){return new Ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,q)})}(n);if($l(n))return ua(n);if(tu(n))return function Ta(n){return new Ye(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Yl(n))return function ic(n){return ua(Gc(n))}(n)}throw zc(n)}function ua(n){return new Ye(e=>{(function Oo(n,e){var t,i,r,o;return function Z(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=ys(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ge(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function ye(n,e,t=1/0){return L(e)?ye((i,r)=>A((o,s)=>e(i,o,r,s))(Li(n(i,r))),t):("number"==typeof e&&(t=e),fe((i,r)=>function De(n,e,t,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},m=E=>l<i?v(E):c.push(E),v=E=>{o&&e.next(E),l++;let D=!1;Li(t(E,d++)).subscribe(Q(e,H=>{r?.(H),o?m(H):e.next(H)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<i;){const H=c.shift();s?ge(e,s,()=>v(H)):v(H)}f()}catch(H){e.error(H)}}))};return n.subscribe(Q(e,m,()=>{h=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function z(n=1/0){return ye(Ee,n)}const ee=new Ye(n=>n.complete());function Xe(n){return n&&L(n.schedule)}function rt(n){return n[n.length-1]}function wt(n){return L(rt(n))?n.pop():void 0}function Tt(n){return Xe(rt(n))?n.pop():void 0}function en(n,e=0){return fe((t,i)=>{t.subscribe(Q(i,r=>ge(i,n,()=>i.next(r),e),()=>ge(i,n,()=>i.complete(),e),r=>ge(i,n,()=>i.error(r),e)))})}function yn(n,e=0){return fe((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Gs(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ye(t=>{ge(t,e,()=>{const i=n[Symbol.asyncIterator]();ge(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Bi(n,e){return e?function Po(n,e){if(null!=n){if(Wl(n))return function bo(n,e){return Li(n).pipe(yn(e),en(e))}(n,e);if(da(n))return function ko(n,e){return new Ye(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(nc(n))return function Dr(n,e){return Li(n).pipe(yn(e),en(e))}(n,e);if($l(n))return Gs(n,e);if(tu(n))return function $c(n,e){return new Ye(t=>{let i;return ge(t,e,()=>{i=n[Hc](),ge(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>L(i?.return)&&i.return()})}(n,e);if(Yl(n))return function Br(n,e){return Gs(Gc(n),e)}(n,e)}throw zc(n)}(n,e):Li(n)}function jr(...n){const e=Tt(n),t=function jt(n,e){return"number"==typeof rt(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Li(i[0]):z(t)(Bi(i,e)):ee}class ui extends V{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function $t(...n){return Bi(n,Tt(n))}function es(n={}){const{connector:e=(()=>new V),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),s=c=void 0,d=h=!1},v=()=>{const E=s;m(),E?.unsubscribe()};return fe((E,D)=>{l++,!h&&!d&&f();const H=c=c??e();D.add(()=>{l--,0===l&&!h&&!d&&(a=Xl(v,r))}),H.subscribe(D),!s&&l>0&&(s=new qe({next:Y=>H.next(Y),error:Y=>{h=!0,f(),a=Xl(m,t,Y),H.error(Y)},complete:()=>{d=!0,f(),a=Xl(m,i),H.complete()}}),Li(E).subscribe(s))})(o)}}function Xl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new qe({next:()=>{i.unsubscribe(),n()}});return Li(e(...t)).subscribe(i)}function Re(n,e){return fe((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(Q(i,c=>{r?.unsubscribe();let l=0;const d=o++;Li(n(c,d)).subscribe(r=Q(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function je(n,e=Ee){return n=n??tt,fe((t,i)=>{let r,o=!0;t.subscribe(Q(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function tt(n,e){return n===e}function dt(n){for(let e in n)if(n[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function kt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ht(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ht).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Yn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Er=dt({__forward_ref__:dt});function Mn(n){return n.__forward_ref__=Mn,n.toString=function(){return Ht(this())},n}function cn(n){return ts(n)?n():n}function ts(n){return"function"==typeof n&&n.hasOwnProperty(Er)&&n.__forward_ref__===Mn}function u_(n){return n&&!!n.\u0275providers}const Fv="https://g.co/ng/security#xss";class Ot extends Error{constructor(e,t){super(function hp(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Bn(n){return"string"==typeof n?n:null==n?"":String(n)}function h_(n,e){throw new Ot(-201,!1)}function yo(n,e){null==n&&function Rn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function At(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function mh(n){return ns(n,fp)||ns(n,rc)}function ns(n,e){return n.hasOwnProperty(e)?n[e]:null}function No(n){return n&&(n.hasOwnProperty(pp)||n.hasOwnProperty(mp))?n[pp]:null}const fp=dt({\u0275prov:dt}),pp=dt({\u0275inj:dt}),rc=dt({ngInjectableDef:dt}),mp=dt({ngInjectorDef:dt});var ai=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ai||{});let Yi;function vo(n){const e=Yi;return Yi=n,e}function Uv(n,e,t){const i=mh(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ai.Optional?null:void 0!==e?e:void h_(Ht(n))}const Ii=globalThis,Jl={},p_="__NG_DI_FLAG__",gh="ngTempTokenPath",m_=/\n/gm,g_="__source";let Zl;function Yc(n){const e=Zl;return Zl=n,e}function XS(n,e=ai.Default){if(void 0===Zl)throw new Ot(-203,!1);return null===Zl?Uv(n,void 0,e):Zl.get(n,e&ai.Optional?null:void 0,e)}function nt(n,e=ai.Default){return(function oc(){return Yi}()||XS)(cn(n),e)}function Vt(n,e=ai.Default){return nt(n,bp(e))}function bp(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function __(n){const e=[];for(let t=0;t<n.length;t++){const i=cn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ot(900,!1);let r,o=ai.Default;for(let s=0;s<i.length;s++){const a=i[s],c=Yv(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(nt(r,o))}else e.push(nt(i))}return e}function Ql(n,e){return n[p_]=e,n.prototype[p_]=e,n}function Yv(n){return n[p_]}function sc(n){return{toString:n}.toString()}var vp=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vp||{}),fa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(fa||{});const Fo={},Xn=[],bh=dt({\u0275cmp:dt}),b_=dt({\u0275dir:dt}),y_=dt({\u0275pipe:dt}),Xv=dt({\u0275mod:dt}),ac=dt({\u0275fac:dt}),yh=dt({__NG_ELEMENT_ID__:dt}),vh=dt({__NG_ENV_ID__:dt});function ct(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function Et(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];Qt(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function bt(n){return 3===n||4===n||6===n}function Qt(n){return 64===n.charCodeAt(0)}function Fn(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Si(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Si(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const Rr="ng-template";function ji(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==ct(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function xp(n){return 4===n.type&&n.value!==Rr}function KS(n,e,t){return e===(4!==n.type||t?n.value:Rr)}function Ws(n,e,t){let i=4;const r=n.attrs||[],o=function Ep(n){for(let e=0;e<n.length;e++)if(bt(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!KS(n,c,t)||""===c&&1===e.length){if(is(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!ji(n.attrs,l,t)){if(is(i))return!1;s=!0}continue}const h=qS(8&i?"class":c,r,xp(n),t);if(-1===h){if(is(i))return!1;s=!0;continue}if(""!==l){let f;f=h>o?"":r[h+1].toLowerCase();const m=8&i?f:null;if(m&&-1!==ct(m,l,0)||2&i&&l!==f){if(is(i))return!1;s=!0}}}}else{if(!s&&!is(i)&&!is(c))return!1;if(s&&is(c))continue;s=!1,i=c|1&i}}return is(i)||s}function is(n){return 0==(1&n)}function qS(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Di(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function ed(n,e,t=!1){for(let i=0;i<e.length;i++)if(Ws(n,e[i],t))return!0;return!1}function JS(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function v_(n,e){return n?":not("+e.trim()+")":e}function Ap(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!is(s)&&(e+=v_(o,r),r=""),i=s,o=o||!is(i);t++}return""!==r&&(e+=v_(o,r)),e}function jn(n){return sc(()=>{const e=Kv(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||fa.Emulated,styles:n.styles||Xn,_:null,schemas:n.schemas||null,tView:null,id:""};qv(t);const i=n.dependencies;return t.directiveDefs=td(i,!1),t.pipeDefs=td(i,!0),t.id=function w_(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Kc(n){return _i(n)||Ar(n)}function Cp(n){return null!==n}function on(n){return sc(()=>({type:n.type,bootstrap:n.bootstrap||Xn,declarations:n.declarations||Xn,imports:n.imports||Xn,exports:n.exports||Xn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function x_(n,e){if(null==n)return Fo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function Ut(n){return sc(()=>{const e=Kv(n);return qv(e),e})}function Ur(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function _i(n){return n[bh]||null}function Ar(n){return n[b_]||null}function Sr(n){return n[y_]||null}function Kv(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Fo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Xn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:x_(n.inputs,e),outputs:x_(n.outputs)}}function qv(n){n.features?.forEach(e=>e(n))}function td(n,e){if(!n)return null;const t=e?Sr:Kc;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Cp)}const yr=0,Kt=1,Wn=2,rr=3,Ri=4,Or=5,xo=6,iu=7,vr=8,qc=9,Jc=10,On=11,nd=12,id=13,Ia=14,Zi=15,Zc=16,pa=17,Da=18,xh=19,Jv=20,Qc=21,lc=22,el=23,dc=24,ci=25,tl=1,wh=2,Cr=7,ru=9,co=11;function rs(n){return Array.isArray(n)&&"object"==typeof n[tl]}function Lo(n){return Array.isArray(n)&&!0===n[tl]}function E_(n){return 0!=(4&n.flags)}function rd(n){return n.componentOffset>-1}function Ip(n){return 1==(1&n.flags)}function Vr(n){return!!n.template}function A_(n){return 0!=(512&n[Wn])}function od(n,e){return n.hasOwnProperty(ac)?n[ac]:null}let lo=null,Ah=!1;function $s(n){const e=lo;return lo=n,e}const ka={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function nl(n){if(!Sh(n)||n.dirty){if(!n.producerMustRecompute(n)&&!hc(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function M_(n){n.dirty=!0,function As(n){if(void 0===n.liveConsumerNode)return;const e=Ah;Ah=!0;try{for(const t of n.liveConsumerNode)t.dirty||M_(t)}finally{Ah=e}}(n),n.consumerMarkedDirty?.(n)}function Op(n){return n&&(n.nextProducerIndex=0),$s(n)}function sd(n,e){if($s(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Sh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ad(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hc(n){cd(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(nl(t),i!==t.version))return!0}return!1}function T_(n){if(cd(n),Sh(n))for(let e=0;e<n.producerNode.length;e++)ad(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ad(n,e){if(function Xr(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),cd(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)ad(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];cd(r),r.producerIndexOfThis[i]=e}}function Sh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function cd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let D_=null;function lu(n){const e=$s(null);try{return n()}finally{$s(e)}}const rx=()=>{},P_=(()=>({...ka,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:rx}))();class ox{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function kr(){return sx}function sx(n){return n.type.prototype.ngOnChanges&&(n.setInput=N_),ax}function ax(){const n=Pp(this),e=n?.current;if(e){const t=n.previous;if(t===Fo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function N_(n,e,t,i){const r=this.declaredInputs[t],o=Pp(n)||function lx(n,e){return n[cx]=e}(n,{previous:Fo,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new ox(c&&c.currentValue,e,a===Fo),n[i]=e}kr.ngInherit=!0;const cx="__ngSimpleChanges__";function Pp(n){return n[cx]||null}const Ss=function(n,e,t){};function Ui(n){for(;Array.isArray(n);)n=n[yr];return n}function Ch(n,e){return Ui(e[n])}function os(n,e){return Ui(e[n.index])}function j_(n,e){return n.data[e]}function Cs(n,e){const t=e[n];return rs(t)?t:t[yr]}function rl(n,e){return null==e?null:n[e]}function du(n){n[pa]=0}function hx(n){1024&n[Wn]||(n[Wn]|=1024,px(n,1))}function fx(n){1024&n[Wn]&&(n[Wn]&=-1025,px(n,-1))}function px(n,e){let t=n[rr];if(null===t)return;t[Or]+=e;let i=t;for(t=t[rr];null!==t&&(1===e&&1===i[Or]||-1===e&&0===i[Or]);)t[Or]+=e,i=t,t=t[rr]}const En={lFrame:Ih(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Lp(){return En.bindingsEnabled}function ld(){return null!==En.skipHydrationRootTNode}function It(){return En.lFrame.lView}function qn(){return En.lFrame.tView}function Pr(n){return En.lFrame.contextLView=n,n[vr]}function Vi(n){return En.lFrame.contextLView=null,n}function Kr(){let n=H_();for(;null!==n&&64===n.type;)n=n.parent;return n}function H_(){return En.lFrame.currentTNode}function Pa(n,e){const t=En.lFrame;t.currentTNode=n,t.isParent=e}function G_(){return En.lFrame.isParent}function W_(){En.lFrame.isParent=!1}function jo(){return En.lFrame.bindingIndex++}function pc(n){const e=En.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function uu(n,e){const t=En.lFrame;t.bindingIndex=t.bindingRootIndex=n,jp(e)}function jp(n){En.lFrame.currentDirectiveIndex=n}function Y_(){return En.lFrame.currentQueryIndex}function sl(n){En.lFrame.currentQueryIndex=n}function Th(n){const e=n[Kt];return 2===e.type?e.declTNode:1===e.type?n[xo]:null}function xx(n,e,t){if(t&ai.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&ai.Host||(r=Th(o),null===r||(o=o[Ia],10&r.type))););if(null===r)return!1;e=r,n=o}const i=En.lFrame=X_();return i.currentTNode=e,i.lView=n,!0}function Up(n){const e=X_(),t=n[Kt];En.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function X_(){const n=En.lFrame,e=null===n?null:n.child;return null===e?Ih(n):e}function Ih(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function K_(){const n=En.lFrame;return En.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Dh=K_;function Rh(){const n=K_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Eo(){return En.lFrame.selectedIndex}function Fa(n){En.lFrame.selectedIndex=n}function or(){const n=En.lFrame;return j_(n.tView,n.selectedIndex)}let J_=!0;function Hp(){return J_}function gc(n){J_=n}function Gp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function Ys(n,e,t){Wp(n,e,3,t)}function hu(n,e,t,i){(3&n[Wn])===t&&Wp(n,e,t,i)}function kh(n,e){let t=n[Wn];(3&t)===e&&(t&=8191,t+=1,n[Wn]=t)}function Wp(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&n[pa]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[pa]+=65536),(a<o||-1==o)&&(fu(n,t,e,c),n[pa]=(4294901760&n[pa])+c+2),c++}function Ph(n,e){Ss(4,n,e);const t=$s(null);try{e.call(n)}finally{$s(t),Ss(5,n,e)}}function fu(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[Wn]>>13<n[pa]>>16&&(3&n[Wn])===e&&(n[Wn]+=8192,Ph(a,o)):Ph(a,o)}const _n=-1;class al{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function $p(n){return n!==_n}function Nh(n){return 32767&n}function Fh(n,e){let t=function Ax(n){return n>>16}(n),i=e;for(;t>0;)i=i[Ia],t--;return i}let eb=!0;function Yp(n){const e=eb;return eb=n,e}const So=255,Xp=5;let bC=0;const Xs={};function Kp(n,e){const t=tb(n,e);if(-1!==t)return t;const i=e[Kt];i.firstCreatePass&&(n.injectorIndex=e.length,ud(i.data,n),ud(e,null),ud(i.blueprint,null));const r=Lh(n,e),o=n.injectorIndex;if($p(r)){const s=Nh(r),a=Fh(r,e),c=a[Kt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function ud(n,e){n.push(0,0,0,0,0,0,0,0,e)}function tb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Lh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Tx(r),null===i)return _n;if(t++,r=r[Ia],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return _n}function nb(n,e,t){!function yC(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(yh)&&(i=t[yh]),null==i&&(i=t[yh]=bC++);const r=i&So;e.data[n+(r>>Xp)]|=1<<r}(n,e,t)}function Sx(n,e,t){if(t&ai.Optional||void 0!==n)return n;h_()}function Cx(n,e,t,i){if(t&ai.Optional&&void 0===i&&(i=null),!(t&(ai.Self|ai.Host))){const r=n[qc],o=vo(void 0);try{return r?r.get(e,i,t&ai.Optional):Uv(e,i,t&ai.Optional)}finally{vo(o)}}return Sx(i,0,t)}function ib(n,e,t,i=ai.Default,r){if(null!==n){if(2048&e[Wn]&&!(i&ai.Self)){const s=function Mx(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Wn]&&!(512&s[Wn]);){const a=rb(o,s,t,i|ai.Self,Xs);if(a!==Xs)return a;let c=o.parent;if(!c){const l=s[Jv];if(l){const d=l.get(t,Xs,i);if(d!==Xs)return d}c=Tx(s),s=s[Ia]}o=c}return r}(n,e,t,i,Xs);if(s!==Xs)return s}const o=rb(n,e,t,i,Xs);if(o!==Xs)return o}return Cx(e,t,i,r)}function rb(n,e,t,i,r){const o=function Bh(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(yh)?n[yh]:void 0;return"number"==typeof e?e>=0?e&So:La:e}(t);if("function"==typeof o){if(!xx(e,n,i))return i&ai.Host?Sx(r,0,i):Cx(e,t,i,r);try{let s;if(s=o(i),null!=s||i&ai.Optional)return s;h_()}finally{Dh()}}else if("number"==typeof o){let s=null,a=tb(n,e),c=_n,l=i&ai.Host?e[Zi][xo]:null;for((-1===a||i&ai.SkipSelf)&&(c=-1===a?Lh(n,e):e[a+8],c!==_n&&ob(i,!1)?(s=e[Kt],a=Nh(c),e=Fh(c,e)):a=-1);-1!==a;){const d=e[Kt];if(qp(o,a,d.data)){const h=xC(a,e,t,s,i,l);if(h!==Xs)return h}c=e[a+8],c!==_n&&ob(i,e[Kt].data[a+8]===l)&&qp(o,a,e)?(s=d,a=Nh(c),e=Fh(c,e)):a=-1}}return r}function xC(n,e,t,i,r,o){const s=e[Kt],a=s.data[n+8],d=mu(a,s,t,null==i?rd(a)&&eb:i!=s&&0!=(3&a.type),r&ai.Host&&o===a);return null!==d?ll(e,s,d,a):Xs}function mu(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,d=o>>20,f=r?a+d:n.directiveEnd;for(let m=i?a:a+d;m<f;m++){const v=s[m];if(m<c&&t===v||m>=c&&v.type===t)return m}if(r){const m=s[c];if(m&&Vr(m)&&m.type===t)return c}return null}function ll(n,e,t,i){let r=n[t];const o=e.data;if(function Z_(n){return n instanceof al}(r)){const s=r;s.resolving&&function US(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ot(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ai(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Bn(n)}(o[t]));const a=Yp(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?vo(s.injectImpl):null;xx(n,i,ai.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function _C(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=sx(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&vo(l),Yp(a),s.resolving=!1,Dh()}}return r}function qp(n,e,t){return!!(t[e+(n>>Xp)]&1<<n)}function ob(n,e){return!(n&ai.Self||n&ai.Host&&e)}class Co{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return ib(this._tNode,this._lView,e,bp(i),t)}}function La(){return new Co(Kr(),It())}function wi(n){return sc(()=>{const e=n.prototype.constructor,t=e[ac]||sb(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[ac]||sb(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function sb(n){return ts(n)?()=>{const e=sb(cn(n));return e&&e()}:od(n)}function Tx(n){const e=n[Kt],t=e.type;return 2===t?e.declTNode:1===t?n[xo]:null}function dl(n){return function vC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(bt(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(Kr(),n)}const bu="__parameters__";function vu(n,e,t){return sc(()=>{const i=function ab(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(bu)?c[bu]:Object.defineProperty(c,bu,{value:[]})[bu];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function ho(n,e){n.forEach(t=>Array.isArray(t)?ho(t,e):e(t))}function Rx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Zp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Uh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Is(n,e,t){let i=wu(n,e);return i>=0?n[1|i]=t:(i=~i,function IC(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Vh(n,e){const t=wu(n,e);if(t>=0)return n[1|t]}function wu(n,e){return function kx(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Eu=Ql(vu("Optional"),8),em=Ql(vu("SkipSelf"),4);function rm(n){return 128==(128&n.flags)}var ul=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ul||{});const fb=new Map;let sm=0;const _b="__ngContext__";function Mo(n,e){rs(e)?(n[_b]=e[xh],function Xx(n){fb.set(n[xh],n)}(e)):n[_b]=e}let vb;function xb(n,e){return vb(n,e)}function Yh(n){const e=n[rr];return Lo(e)?e[rr]:e}function Zx(n){return qs(n[nd])}function Qx(n){return qs(n[Ri])}function qs(n){for(;null!==n&&!Lo(n);)n=n[Ri];return n}function Cu(n,e,t,i,r){if(null!=i){let o,s=!1;Lo(i)?o=i:rs(i)&&(s=!0,i=i[yr]);const a=Ui(i);0===n&&null!==t?null==r?fr(e,t,a):Oi(e,t,a,r||null,!0):1===n&&null!==t?Oi(e,t,a,r||null,!0):2===n?function bc(n,e,t){const i=hm(n,e);i&&function cM(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function ow(n,e,t,i,r){const o=t[Cr];o!==Ui(t)&&Cu(e,n,i,o,r);for(let a=co;a<t.length;a++){const c=t[a];Jh(c[Kt],c,n,e,i,o)}}(e,n,o,t,r)}}function lm(n,e,t){return n.createElement(e,t)}function ew(n,e){const t=n[ru],i=t.indexOf(e);fx(e),t.splice(i,1)}function dm(n,e){if(n.length<=co)return;const t=co+e,i=n[t];if(i){const r=i[Zc];null!==r&&r!==n&&ew(r,i),e>0&&(n[t-1][Ri]=i[Ri]);const o=Zp(n,co+e);!function ss(n,e){Jh(n,e,e[On],2,null,null),e[yr]=null,e[xo]=null}(i[Kt],i);const s=o[Da];null!==s&&s.detachView(o[Kt]),i[rr]=null,i[Ri]=null,i[Wn]&=-129}return i}function wb(n,e){if(!(256&e[Wn])){const t=e[On];e[el]&&T_(e[el]),e[dc]&&T_(e[dc]),t.destroyNode&&Jh(n,e,t,3,null,null),function fl(n){let e=n[nd];if(!e)return Xh(n[Kt],n);for(;e;){let t=null;if(rs(e))t=e[nd];else{const i=e[co];i&&(t=i)}if(!t){for(;e&&!e[Ri]&&e!==n;)rs(e)&&Xh(e[Kt],e),e=e[rr];null===e&&(e=n),rs(e)&&Xh(e[Kt],e),t=e&&e[Ri]}e=t}}(e)}}function Xh(n,e){if(!(256&e[Wn])){e[Wn]&=-129,e[Wn]|=256,function _c(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof al)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Ss(4,a,c);try{c.call(a)}finally{Ss(5,a,c)}}else{Ss(4,r,o);try{o.call(r)}finally{Ss(5,r,o)}}}}}(n,e),function aM(n,e){const t=n.cleanup,i=e[iu];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[iu]=null);const r=e[Qc];if(null!==r){e[Qc]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Kt].type&&e[On].destroy();const t=e[Zc];if(null!==t&&Lo(e[rr])){t!==e[rr]&&ew(t,e);const i=e[Da];null!==i&&i.detachView(n)}!function mb(n){fb.delete(n[xh])}(e)}}function um(n,e,t){return function Kh(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[yr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===fa.None||o===fa.Emulated)return null}return os(i,t)}}(n,e.parent,t)}function Oi(n,e,t,i,r){n.insertBefore(e,t,i,r)}function fr(n,e,t){n.appendChild(e,t)}function Eb(n,e,t,i,r){null!==i?Oi(n,e,t,i,r):fr(n,e,t)}function hm(n,e){return n.parentNode(e)}function tw(n,e,t){return Ab(n,e,t)}let fd,Zh,Ib,Ab=function nw(n,e,t){return 40&n.type?os(n,t):null};function pm(n,e,t,i){const r=um(n,i,e),o=e[On],a=tw(i.parent||e[xo],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)Eb(o,r,t[c],a,!1);else Eb(o,r,t,a,!1);void 0!==fd&&fd(o,i,e,t,r)}function Mu(n,e){if(null!==e){const t=e.type;if(3&t)return os(e,n);if(4&t)return Vo(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Mu(n,i);{const r=n[e.index];return Lo(r)?Vo(-1,r):Ui(r)}}if(32&t)return xb(e,n)()||Ui(n[e.index]);{const i=qh(n,e);return null!==i?Array.isArray(i)?i[0]:Mu(Yh(n[Zi]),i):Mu(n,e.next)}}return null}function qh(n,e){return null!==e?n[Zi][xo].projection[e.projection]:null}function Vo(n,e){const t=co+n+1;if(t<e.length){const i=e[t],r=i[Kt].firstChild;if(null!==r)return Mu(i,r)}return e[Cr]}function Sb(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],c=t.type;if(s&&0===e&&(a&&Mo(Ui(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)Sb(n,e,t.child,i,r,o,!1),Cu(e,n,r,a,o);else if(32&c){const l=xb(t,i);let d;for(;d=l();)Cu(e,n,r,d,o);Cu(e,n,r,a,o)}else 16&c?rw(n,e,i,t,r,o):Cu(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Jh(n,e,t,i,r,o){Sb(t,i,n.firstChild,e,r,o,!1)}function rw(n,e,t,i,r,o){const s=t[Zi],c=s[xo].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Cu(e,n,r,c[l],o);else{let l=c;const d=s[rr];rm(i)&&(l.flags|=128),Sb(n,e,l,d,r,o,!0)}}function Cb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Ds(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&Et(n,e,i),null!==r&&Cb(n,e,r),null!==o&&function Jn(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function bi(n){return function Mb(){if(void 0===Zh&&(Zh=null,Ii.trustedTypes))try{Zh=Ii.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zh}()?.createHTML(n)||n}class pd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fv})`}}class pM extends pd{getTypeName(){return"HTML"}}class mM extends pd{getTypeName(){return"Style"}}class gM extends pd{getTypeName(){return"Script"}}class Rb extends pd{getTypeName(){return"URL"}}class _M extends pd{getTypeName(){return"ResourceURL"}}function zo(n){return n instanceof pd?n.changingThisBreaksApplicationSecurity:n}function Ba(n,e){const t=function bM(n){return n instanceof pd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Fv})`)}return t===e}class uw{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(bi(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class wM{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=bi(e),t}}const AM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qh(n){return(n=String(n)).match(AM)?n:"unsafe:"+n}function vc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function ef(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const hw=vc("area,br,col,hr,img,wbr"),Ob=vc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kb=vc("rp,rt"),Pb=ef(hw,ef(Ob,vc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ef(kb,vc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ef(kb,Ob)),pl=vc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fw=ef(pl,vc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),SM=vc("script,style,template");class CM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Pb.hasOwnProperty(t))return this.sanitizedSomething=!0,!SM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!fw.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;pl[a]&&(c=Qh(c)),this.buf.push(" ",s,'="',gw(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Pb.hasOwnProperty(t)&&!hw.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(gw(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const pw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mw=/([^\#-~ |!])/g;function gw(n){return n.replace(/&/g,"&amp;").replace(pw,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(mw,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gm;function _w(n,e){let t=null;try{gm=gm||function dw(n){const e=new wM(n);return function EM(){try{return!!(new window.DOMParser).parseFromString(bi(""),"text/html")}catch{return!1}}()?new uw(e):e}(n);let i=e?String(e):"";t=gm.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=gm.getInertBodyElement(i)}while(i!==o);return bi((new CM).sanitizeChildren(Nb(t)||t))}finally{if(t){const i=Nb(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Nb(n){return"content"in n&&function MM(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Jr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Jr||{});function Fb(n){const e=function tf(){const n=It();return n&&n[Jc].sanitizer}();return e?e.sanitize(Jr.URL,n)||"":Ba(n,"URL")?zo(n):Qh(Bn(n))}class vt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=At({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const nf=new vt("ENVIRONMENT_INITIALIZER"),_m=new vt("INJECTOR",-1),vw=new vt("INJECTOR_DEF_TYPES");class Lb{get(e,t=Jl){if(t===Jl){const i=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw i.name="NullInjectorError",i}return t}}function PM(...n){return{\u0275providers:bm(0,n),\u0275fromNgModule:!0}}function bm(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return ho(e,s=>{const a=s;rf(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&jb(r,o),t}function jb(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Ub(r,o=>{e(o,i)})}}function rf(n,e,t,i){if(!(n=cn(n)))return!1;let r=null,o=No(n);const s=!o&&_i(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=No(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)rf(l,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{ho(o.imports,d=>{rf(d,e,t,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&jb(l,e)}if(!a){const l=od(r)||(()=>new r);e({provide:r,useFactory:l,deps:Xn},r),e({provide:vw,useValue:r,multi:!0},r),e({provide:nf,useValue:()=>nt(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=n;Ub(c,d=>{e(d,l)})}}}return r!==n&&void 0!==n.providers}function Ub(n,e){for(let t of n)u_(t)&&(t=t.\u0275providers),Array.isArray(t)?Ub(t,e):e(t)}const NM=dt({provide:String,useValue:dt});function sf(n){return null!==n&&"object"==typeof n&&NM in n}function md(n){return"function"==typeof n}const af=new vt("Set Injector scope."),ym={},FM={};let Vb;function vm(){return void 0===Vb&&(Vb=new Lb),Vb}class ls{}class xm extends ls{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zb(e,s=>this.processProvider(s)),this.records.set(_m,Iu(void 0,this)),r.has("environment")&&this.records.set(ls,Iu(void 0,this));const o=this.records.get(af);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vw.multi,Xn,ai.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Yc(this),i=vo(void 0);try{return e()}finally{Yc(t),vo(i)}}get(e,t=Jl,i=ai.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(vh))return e[vh](this);i=bp(i);const o=Yc(this),s=vo(void 0);try{if(!(i&ai.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function UM(n){return"function"==typeof n||"object"==typeof n&&n instanceof vt}(e)&&mh(e);c=l&&this.injectableDefInScope(l)?Iu(cf(e),ym):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&ai.Self?vm():this.parent).get(e,t=i&ai.Optional&&t===Jl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[gh]=a[gh]||[]).unshift(Ht(e)),o)throw a;return function Xc(n,e,t,i){const r=n[gh];throw e[g_]&&r.unshift(e[g_]),n.message=function yp(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ht(e);if(Array.isArray(e))r=e.map(Ht).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ht(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(m_,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[gh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{vo(s),Yc(o)}}resolveInjectorInitializers(){const e=Yc(this),t=vo(void 0);try{const r=this.get(nf.multi,Xn,ai.Self);for(const o of r)o()}finally{Yc(e),vo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ht(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ot(205,!1)}processProvider(e){let t=md(e=cn(e))?e:cn(e&&e.provide);const i=function BM(n){return sf(n)?Iu(void 0,n.useValue):Iu(Ew(n),ym)}(e);if(md(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Iu(void 0,ym,!0),r.factory=()=>__(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===ym&&(t.value=FM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=cn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function cf(n){const e=mh(n),t=null!==e?e.factory:od(n);if(null!==t)return t;if(n instanceof vt)throw new Ot(204,!1);if(n instanceof Function)return function LM(n){const e=n.length;if(e>0)throw Uh(e,"?"),new Ot(204,!1);const t=function WS(n){return n&&(n[fp]||n[rc])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ot(204,!1)}function Ew(n,e,t){let i;if(md(n)){const r=cn(n);return od(r)||cf(r)}if(sf(n))i=()=>cn(n.useValue);else if(function ww(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...__(n.deps||[]));else if(function xw(n){return!(!n||!n.useExisting)}(n))i=()=>nt(cn(n.useExisting));else{const r=cn(n&&(n.useClass||n.provide));if(!function Aw(n){return!!n.deps}(n))return od(r)||cf(r);i=()=>new r(...__(n.deps))}return i}function Iu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zb(n,e){for(const t of n)Array.isArray(t)?zb(t,e):t&&u_(t)?zb(t.\u0275providers,e):e(t)}const gd=new vt("AppId",{providedIn:"root",factory:()=>Hb}),Hb="ng",Sw=new vt("Platform Initializer"),ma=new vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Zr=new vt("AnimationModuleType"),Gb=new vt("CSP nonce",{providedIn:"root",factory:()=>function Tu(){if(void 0!==Ib)return Ib;if(typeof document<"u")return document;throw new Ot(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ae=(n,e,t)=>null;function it(n,e,t=!1){return Ae(n,e,t)}class Rs{}class To{}class xc{resolveComponentFactory(e){throw function Os(n){const e=Error(`No component factory found for ${Ht(n)}.`);return e.ngComponent=n,e}(e)}}let wc=(()=>{class n{static#e=this.NULL=new xc}return n})();function UX(){return Sm(Kr(),It())}function Sm(n,e){return new kn(os(n,e))}let kn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=UX}return n})();function VX(n){return n instanceof kn?n.nativeElement:n}class jF{}let HX=(()=>{class n{static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:()=>null})}return n})();class Ou{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const GX=new Ou("16.2.10"),HM={};function HF(n,e=null,t=null,i){const r=GF(n,e,t,i);return r.resolveInjectorInitializers(),r}function GF(n,e=null,t=null,i,r=new Set){const o=[t||Xn,PM(n)];return i=i||("object"==typeof n?void 0:Ht(n)),new xm(o,e||vm(),i||null,r)}let wr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Jl;static#t=this.NULL=new Lb;static create(t,i){if(Array.isArray(t))return HF({name:""},i,t,"");{const r=t.name??"";return HF({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=At({token:n,providedIn:"any",factory:()=>nt(_m)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function WM(n){return n.ngOriginalError}class ga{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&WM(e);for(;t&&WM(t);)t=WM(t);return t||null}}function YM(n){return e=>{setTimeout(n,void 0,e)}}const Zt=class JX extends V{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=YM(o),r&&(r=YM(r)),s&&(s=YM(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof M&&e.add(a),a}};function $F(...n){}class nn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zt(!1),this.onMicrotaskEmpty=new Zt(!1),this.onStable=new Zt(!1),this.onError=new Zt(!1),typeof Zone>"u")throw new Ot(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function ZX(){const n="function"==typeof Ii.requestAnimationFrame;let e=Ii[n?"requestAnimationFrame":"setTimeout"],t=Ii[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function tK(n){const e=()=>{!function eK(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ii,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,KM(n),n.isCheckStableRunning=!0,XM(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),KM(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function iK(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return YF(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),XF(n)}},onInvoke:(t,i,r,o,s,a,c)=>{try{return YF(n),t.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),XF(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,KM(n),XM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nn.isInAngularZone())throw new Ot(909,!1)}static assertNotInAngularZone(){if(nn.isInAngularZone())throw new Ot(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,QX,$F,$F);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const QX={};function XM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function KM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function YF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XF(n){n._nesting--,XM(n)}class nK{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zt,this.onMicrotaskEmpty=new Zt,this.onStable=new Zt,this.onError=new Zt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const KF=new vt("",{providedIn:"root",factory:qF});function qF(){const n=Vt(nn);let e=!0;return jr(new Ye(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Ye(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{nn.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{nn.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(es()))}let JM=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:()=>new n})}return n})();function Jb(n){for(;n;){n[Wn]|=64;const e=Yh(n);if(A_(n)&&!e)return n;n=e}return null}const tL=new vt("",{providedIn:"root",factory:()=>!1});let Mw=null;function oL(n,e){return n[e]??cL()}function sL(n,e){const t=cL();t.producerNode?.length&&(n[e]=Mw,t.lView=n,Mw=aL())}const hK={...ka,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Jb(n.lView)},lView:null};function aL(){return Object.create(hK)}function cL(){return Mw??=aL(),Mw}const Kn={};function Bt(n){lL(qn(),It(),Eo()+n,!1)}function lL(n,e,t,i){if(!i)if(3==(3&e[Wn])){const o=n.preOrderCheckHooks;null!==o&&Ys(e,o,t)}else{const o=n.preOrderHooks;null!==o&&hu(e,o,0,t)}Fa(t)}function He(n,e=ai.Default){const t=It();return null===t?nt(n,e):ib(Kr(),t,cn(n),e)}function df(){throw new Error("invalid")}function Tw(n,e,t,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[yr]=r,h[Wn]=140|i,(null!==l||n&&2048&n[Wn])&&(h[Wn]|=2048),du(h),h[rr]=h[Ia]=n,h[vr]=t,h[Jc]=s||n&&n[Jc],h[On]=a||n&&n[On],h[qc]=c||n&&n[qc]||null,h[xo]=o,h[xh]=function qC(){return sm++}(),h[lc]=d,h[Jv]=l,h[Zi]=2==e.type?n[Zi]:h,h}function Tm(n,e,t,i,r){let o=n.data[e];if(null===o)o=function ZM(n,e,t,i,r){const o=H_(),s=G_(),c=n.data[e]=function vK(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return ld()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,i,r),function pC(){return En.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function dd(){const n=En.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Pa(o,!0),o}function Zb(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function dL(n,e,t,i,r){const o=oL(e,el),s=Eo(),a=2&i;try{Fa(-1),a&&e.length>ci&&lL(n,e,ci,!1),Ss(a?2:0,r);const l=a?o:null,d=Op(l);try{null!==l&&(l.dirty=!1),t(i,r)}finally{sd(l,d)}}finally{a&&null===e[el]&&sL(e,el),Fa(s),Ss(a?3:1,r)}}function QM(n,e,t){if(E_(e)){const i=$s(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{$s(i)}}}function eT(n,e,t){Lp()&&(function MK(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;rd(t)&&function PK(n,e,t){const i=os(e,n),r=uL(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Iw(n,Tw(n,r,null,s,i,e,null,n[Jc].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Kp(t,e),Mo(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],l=ll(e,n,a,t);Mo(l,e),null!==s&&NK(0,a-r,l,c,0,s),Vr(c)&&(Cs(t.index,e)[vr]=ll(e,n,a,t))}}(n,e,t,os(t,e)),64==(64&t.flags)&&gL(n,e,t))}function tT(n,e,t=os){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function uL(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=nT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function nT(n,e,t,i,r,o,s,a,c,l,d){const h=ci+i,f=h+r,m=function pK(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Kn);return t}(h,f),v="function"==typeof l?l():l;return m[Kt]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}let hL=n=>null;function fL(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?pL(t,e,r,o):i.hasOwnProperty(r)&&pL(t,e,i[r],o)}return t}function pL(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function _a(n,e,t,i,r,o,s,a){const c=os(e,t);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(aT(n,t,d,i,r),rd(e)&&function EK(n,e){const t=Cs(e,n);16&t[Wn]||(t[Wn]|=64)}(t,e.index)):3&e.type&&(i=function wK(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function iT(n,e,t,i){if(Lp()){const r=null===i?null:{"":-1},o=function IK(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(ed(e,s.selectors,!1))if(i||(i=[]),Vr(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),rT(n,e,a.length)}else i.unshift(s),rT(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&mL(n,e,t,s,r,a),r&&function DK(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new Ot(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=Fn(t.mergedAttrs,t.attrs)}function mL(n,e,t,i,r,o){for(let l=0;l<i.length;l++)nb(Kp(t,e),n,i[l].type);!function OK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=Zb(n,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];t.mergedAttrs=Fn(t.mergedAttrs,d.hostAttrs),kK(n,t,e,c,d),RK(c,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function xK(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],f=t?t.get(h):null,v=f?f.outputs:null;c=fL(h.inputs,d,c,f?f.inputs:null),l=fL(h.outputs,d,l,v);const E=null===c||null===s||xp(e)?null:FK(c,d,s);a.push(E)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function gL(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function vx(){return En.lFrame.currentDirectiveIndex}();try{Fa(o);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];jp(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&TK(c,l)}}finally{Fa(-1),jp(s)}}function TK(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function rT(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RK(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Vr(e)&&(t[""]=n)}}function kK(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=od(r.type)),s=new al(o,Vr(r),He);n.blueprint[i]=s,t[i]=s,function SK(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function CK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,Zb(n,t,r.hostVars,Kn),r)}function ml(n,e,t,i,r,o){const s=os(n,e);!function oT(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?Bn(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[On],s,o,n.value,t,i,r)}function NK(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)_L(i,t,s[a++],s[a++],s[a++])}function _L(n,e,t,i,r){const o=$s(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{$s(o)}}function FK(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function bL(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function yL(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];sl(t[i]),s.contentQueries(2,e[o],o)}}}function Iw(n,e){return n[nd]?n[id][Ri]=e:n[nd]=e,n[id]=e,e}function sT(n,e,t){sl(0);const i=$s(null);try{e(n,t)}finally{$s(i)}}function vL(n){return n[iu]||(n[iu]=[])}function xL(n){return n.cleanup||(n.cleanup=[])}function EL(n,e){const t=n[qc],i=t?t.get(ga,null):null;i&&i.handleError(e)}function aT(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];_L(n.data[s],e[s],i,a,r)}}function LK(n,e){const t=Cs(e,n),i=t[Kt];!function BK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[yr];null!==r&&null===t[lc]&&(t[lc]=it(r,t[qc])),cT(i,t,t[vr])}function cT(n,e,t){Up(e);try{const i=n.viewQuery;null!==i&&sT(1,i,t);const r=n.template;null!==r&&dL(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&yL(n,e),n.staticViewQueries&&sT(2,n.viewQuery,t);const o=n.components;null!==o&&function jK(n,e){for(let t=0;t<e.length;t++)LK(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Wn]&=-5,Rh()}}let AL=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function cC(n,e,t){const i=Object.create(P_);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>M_(i),run:()=>{if(i.dirty=!1,i.hasRun&&!hc(i))return;i.hasRun=!0;const s=Op(i);try{i.cleanupFn(),i.cleanupFn=rx,i.fn(r)}finally{sd(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,o)},r);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:()=>new n})}return n})();function Dw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=Yn(r,a):2==o&&(i=Yn(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Qb(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(Ui(o)),Lo(o)&&SL(o,i);const s=t.type;if(8&s)Qb(n,e,t.child,i);else if(32&s){const a=xb(t,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=qh(e,t);if(Array.isArray(a))i.push(...a);else{const c=Yh(e[Zi]);Qb(c[Kt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function SL(n,e){for(let t=co;t<n.length;t++){const i=n[t],r=i[Kt].firstChild;null!==r&&Qb(i[Kt],i,r,e)}n[Cr]!==n[yr]&&e.push(n[Cr])}function Rw(n,e,t,i=!0){const r=e[Jc],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{CL(n,e,n.template,t)}catch(c){throw i&&EL(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function CL(n,e,t,i){const r=e[Wn];if(256!=(256&r)){e[Jc].effectManager?.flush(),Up(e);try{du(e),function Bo(n){return En.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&dL(n,e,t,2,i);const s=3==(3&r);if(s){const l=n.preOrderCheckHooks;null!==l&&Ys(e,l,null)}else{const l=n.preOrderHooks;null!==l&&hu(e,l,0,null),kh(e,0)}if(function zK(n){for(let e=Zx(n);null!==e;e=Qx(e)){if(!e[wh])continue;const t=e[ru];for(let i=0;i<t.length;i++){hx(t[i])}}}(e),ML(e,2),null!==n.contentQueries&&yL(n,e),s){const l=n.contentCheckHooks;null!==l&&Ys(e,l)}else{const l=n.contentHooks;null!==l&&hu(e,l,1),kh(e,1)}!function fK(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=oL(e,dc);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Fa(~o);else{const s=o,a=t[++r],c=t[++r];uu(a,s),i.dirty=!1;const l=Op(i);try{c(2,e[s])}finally{sd(i,l)}}}}finally{null===e[dc]&&sL(e,dc),Fa(-1)}}(n,e);const a=n.components;null!==a&&IL(e,a,0);const c=n.viewQuery;if(null!==c&&sT(2,c,i),s){const l=n.viewCheckHooks;null!==l&&Ys(e,l)}else{const l=n.viewHooks;null!==l&&hu(e,l,2),kh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Wn]&=-73,fx(e)}finally{Rh()}}}function ML(n,e){for(let t=Zx(n);null!==t;t=Qx(t))for(let i=co;i<t.length;i++)TL(t[i],e)}function HK(n,e,t){TL(Cs(e,n),t)}function TL(n,e){if(!function oi(n){return 128==(128&n[Wn])}(n))return;const t=n[Kt],i=n[Wn];if(80&i&&0===e||1024&i||2===e)CL(t,n,t.template,n[vr]);else if(n[Or]>0){ML(n,1);const r=t.components;null!==r&&IL(n,r,1)}}function IL(n,e,t){for(let i=0;i<e.length;i++)HK(n,e[i],t)}class e0{get rootNodes(){const e=this._lView,t=e[Kt];return Qb(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vr]}set context(e){this._lView[vr]=e}get destroyed(){return 256==(256&this._lView[Wn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[rr];if(Lo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(dm(e,i),Zp(t,i))}this._attachedToViewContainer=!1}wb(this._lView[Kt],this._lView)}onDestroy(e){!function Ms(n,e){if(256==(256&n[Wn]))throw new Ot(911,!1);null===n[Qc]&&(n[Qc]=[]),n[Qc].push(e)}(this._lView,e)}markForCheck(){Jb(this._cdRefInjectingView||this._lView)}detach(){this._lView[Wn]&=-129}reattach(){this._lView[Wn]|=128}detectChanges(){Rw(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ot(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rM(n,e){Jh(n,e,e[On],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ot(902,!1);this._appRef=e}}class GK extends e0{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Rw(e[Kt],e,e[vr],!1)}checkNoChanges(){}get context(){return null}}class DL extends wc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=_i(e);return new t0(t,this.ngModule)}}function RL(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class $K{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=bp(i);const r=this.injector.get(e,HM,i);return r!==HM||t===HM?r:this.parentInjector.get(e,t,i)}}class t0 extends To{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=RL(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return RL(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ZS(n){return n.map(Ap).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof ls?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new $K(e,o):e,a=s.get(jF,null);if(null===a)throw new Ot(407,!1);const h={rendererFactory:a,sanitizer:s.get(HX,null),effectManager:s.get(AL,null),afterRenderEventManager:s.get(JM,null)},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=i?function mK(n,e,t,i){const o=i.get(tL,!1)||t===fa.ShadowDom,s=n.selectRootElement(e,o);return function gK(n){hL(n)}(s),s}(f,i,this.componentDef.encapsulation,s):lm(f,m,function WK(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(m)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Y=null;null!==v&&(Y=it(v,s,!0));const he=nT(0,null,null,1,0,null,null,null,null,null,null),Ie=Tw(null,he,null,H,null,null,h,f,s,null,Y);let Le,$e;Up(Ie);try{const ot=this.componentDef;let mt,pt=null;ot.findHostDirectiveDefs?(mt=[],pt=new Map,ot.findHostDirectiveDefs(ot,mt,pt),mt.push(ot)):mt=[ot];const ft=function XK(n,e){const t=n[Kt],i=ci;return n[i]=e,Tm(t,i,2,"#host",null)}(Ie,v),_t=function KK(n,e,t,i,r,o,s){const a=r[Kt];!function qK(n,e,t,i){for(const r of n)e.mergedAttrs=Fn(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Dw(e,e.mergedAttrs,!0),null!==t&&Ds(i,t,e))}(i,n,e,s);let c=null;null!==e&&(c=it(e,r[qc]));const l=o.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const h=Tw(r,uL(t),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&rT(a,n,i.length-1),Iw(r,h),r[n.index]=h}(ft,v,ot,mt,Ie,h,f);$e=j_(he,ci),v&&function ZK(n,e,t,i){if(i)Et(n,t,["ng-version",GX.full]);else{const{attrs:r,classes:o}=function QS(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!is(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Et(n,t,r),o&&o.length>0&&Cb(n,t,o.join(" "))}}(f,ot,v,i),void 0!==t&&function QK(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}($e,this.ngContentSelectors,t),Le=function JK(n,e,t,i,r,o){const s=Kr(),a=r[Kt],c=os(s,r);mL(a,r,s,t,null,i);for(let d=0;d<t.length;d++)Mo(ll(r,a,s.directiveStart+d,s),r);gL(a,r,s),c&&Mo(c,r);const l=ll(r,a,s.directiveStart+s.componentOffset,s);if(n[vr]=r[vr]=l,null!==o)for(const d of o)d(l,e);return QM(a,s,n),l}(_t,ot,mt,pt,Ie,[eq]),cT(he,Ie,null)}finally{Rh()}return new YK(this.componentType,Le,Sm($e,Ie),Ie,$e)}}class YK extends Rs{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new GK(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;aT(o[Kt],o,r,e,t),this.previousInputValues.set(e,t),Jb(Cs(this._tNode.index,o))}}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function eq(){const n=Kr();Gp(It()[Kt],n)}function vn(n){let e=function OL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Vr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ot(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=Ow(n.inputs),s.inputTransforms=Ow(n.inputTransforms),s.declaredInputs=Ow(n.declaredInputs),s.outputs=Ow(n.outputs);const a=r.hostBindings;a&&rq(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&nq(n,c),l&&iq(n,l),kt(n.inputs,r.inputs),kt(n.declaredInputs,r.declaredInputs),kt(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),kt(s.inputTransforms,r.inputTransforms)),Vr(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===vn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function tq(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Fn(r.hostAttrs,t=Fn(t,r.hostAttrs))}}(i)}function Ow(n){return n===Fo?{}:n===Xn?[]:n}function nq(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function iq(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function rq(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function kw(n){return!!function lT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ds(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ki(n,e,t,i){const r=It();return ds(r,jo(),e)&&(qn(),ml(or(),r,n,e,t,i)),ki}function Dm(n,e,t,i){return ds(n,jo(),t)?e+Bn(t)+i:Kn}function pn(n,e,t,i,r,o,s,a){const c=It(),l=qn(),d=n+ci,h=l.firstCreatePass?function Iq(n,e,t,i,r,o,s,a,c){const l=e.consts,d=Tm(e,n,4,s||null,rl(l,a));iT(e,t,d,rl(l,c)),Gp(e,d);const h=d.tView=nT(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,t,i,r,o,s):l.data[d];Pa(h,!1);const f=KL(l,c,h,n);Hp()&&pm(l,c,f,h),Mo(f,c),Iw(c,c[d]=bL(f,c,f,h)),Ip(h)&&eT(l,c,h),null!=s&&tT(c,h,a)}let KL=function qL(n,e,t,i){return gc(!0),e[On].createComment("")};function zt(n,e,t){const i=It();return ds(i,jo(),e)&&_a(qn(),or(),i,n,e,i[On],t,!1),zt}function mT(n,e,t,i,r){const s=r?"class":"style";aT(n,t,e.inputs[s],s,i)}function Rt(n,e,t,i){const r=It(),o=qn(),s=ci+n,a=r[On],c=o.firstCreatePass?function kq(n,e,t,i,r,o){const s=e.consts,c=Tm(e,n,2,i,rl(s,r));return iT(e,t,c,rl(s,o)),null!==c.attrs&&Dw(c,c.attrs,!1),null!==c.mergedAttrs&&Dw(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,t,i):o.data[s],l=JL(o,r,c,a,e,n);r[s]=l;const d=Ip(c);return Pa(c,!0),Ds(a,l,c),32!=(32&c.flags)&&Hp()&&pm(o,r,l,c),0===function mx(){return En.lFrame.elementDepthCount}()&&Mo(l,r),function Ts(){En.lFrame.elementDepthCount++}(),d&&(eT(o,r,c),QM(o,c,r)),null!==i&&tT(r,c),Rt}function Ft(){let n=Kr();G_()?W_():(n=n.parent,Pa(n,!1));const e=n;(function Bp(n){return En.skipHydrationRootTNode===n})(e)&&function z_(){En.skipHydrationRootTNode=null}(),function ol(){En.lFrame.elementDepthCount--}();const t=qn();return t.firstCreatePass&&(Gp(t,n),E_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Ex(n){return 0!=(8&n.flags)}(e)&&mT(t,e,It(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Ao(n){return 0!=(16&n.flags)}(e)&&mT(t,e,It(),e.stylesWithoutHost,!1),Ft}function di(n,e,t,i){return Rt(n,e,t,i),Ft(),di}let JL=(n,e,t,i,r,o)=>(gc(!0),lm(i,r,function q_(){return En.lFrame.currentNamespace}()));function Bm(n){return!!n&&"function"==typeof n.then}function eB(n){return!!n&&"function"==typeof n.subscribe}function bn(n,e,t,i){const r=It(),o=qn(),s=Kr();return function nB(n,e,t,i,r,o,s){const a=Ip(i),l=n.firstCreatePass&&xL(n),d=e[vr],h=vL(e);let f=!0;if(3&i.type||s){const E=os(i,e),D=s?s(E):E,H=h.length,Y=s?Ie=>s(Ui(Ie[i.index])):i.index;let he=null;if(!s&&a&&(he=function jq(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[iu],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==he)(he.__ngLastListenerFn__||he).__ngNextListenerFn__=o,he.__ngLastListenerFn__=o,f=!1;else{o=rB(i,e,d,o,!1);const Ie=t.listen(D,r,o);h.push(o,Ie),l&&l.push(r,Y,H,H+1)}}else o=rB(i,e,d,o,!1);const m=i.outputs;let v;if(f&&null!==m&&(v=m[r])){const E=v.length;if(E)for(let D=0;D<E;D+=2){const Le=e[v[D]][v[D+1]].subscribe(o),$e=h.length;h.push(o,Le),l&&l.push(r,i.index,$e,-($e+1))}}}(o,r,r[On],s,n,e,i),bn}function iB(n,e,t,i){try{return Ss(6,e,t),!1!==t(i)}catch(r){return EL(n,r),!1}finally{Ss(7,e,t)}}function rB(n,e,t,i,r){return function o(s){if(s===Function)return i;Jb(n.componentOffset>-1?Cs(n.index,e):e);let c=iB(e,t,i,s),l=o.__ngNextListenerFn__;for(;l;)c=iB(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Pn(n=1){return function Vp(n){return(En.lFrame.contextLView=function mC(n,e){for(;n>0;)e=e[Ia],n--;return e}(n,En.lFrame.contextLView))[vr]}(n)}function Uq(n,e){let t=null;const i=function wp(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?ed(n,o,!0):JS(i,o))return r}else t=r}return t}function Qr(n){const e=It()[Zi][xo];if(!e.projection){const i=e.projection=Uh(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?Uq(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Ln(n,e=0,t){const i=It(),r=qn(),o=Tm(r,ci+n,16,null,t||null);null===o.projection&&(o.projection=e),W_(),(!i[lc]||ld())&&32!=(32&o.flags)&&function dM(n,e,t){rw(e[On],0,e,t,um(n,t,e),tw(t.parent||e[xo],t,e))}(r,i,o)}function Bw(n,e,t){return gT(n,"",e,"",t),Bw}function gT(n,e,t,i,r){const o=It(),s=Dm(o,e,t,i);return s!==Kn&&_a(qn(),or(),o,n,s,o[On],r,!1),gT}function jw(n,e){return n<<17|e<<2}function ku(n){return n>>17&32767}function _T(n){return 2|n}function hf(n){return(131068&n)>>2}function bT(n,e){return-131069&n|e<<2}function yT(n){return 1|n}function fB(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?ku(o):hf(o),c=!1;for(;0!==a&&(!1===c||s);){const d=n[a+1];$q(n[a],e)&&(c=!0,n[a+1]=i?yT(d):_T(d)),a=i?ku(d):hf(d)}c&&(n[t+1]=i?_T(o):yT(o))}function $q(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&wu(n,e)>=0}const fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pB(n){return n.substring(fo.key,fo.keyEnd)}function mB(n,e){const t=fo.textEnd;return t===e?-1:(e=fo.keyEnd=function qq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,fo.key=e,t),jm(n,e,t))}function jm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Uw(n,e,t){return Sc(n,e,t,!1),Uw}function Tn(n,e){return Sc(n,e,null,!0),Tn}function Js(n){!function Cc(n,e,t,i){const r=qn(),o=pc(2);r.firstUpdatePass&&xB(r,null,o,i);const s=It();if(t!==Kn&&ds(s,o,t)){const a=r.data[Eo()];if(SB(a,i)&&!vB(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Yn(c,t||"")),mT(r,a,s,t,i)}else!function sJ(n,e,t,i,r,o,s,a){r===Kn&&(r=Xn);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const f=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let E,v=null;d===h?(c+=2,l+=2,f!==m&&(v=h,E=m)):null===h||null!==d&&d<h?(c+=2,v=d):(l+=2,v=h,E=m),null!==v&&EB(n,e,t,i,v,E,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[On],s[o+1],s[o+1]=function rJ(n,e,t){if(null==t||""===t)return Xn;const i=[],r=zo(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(oJ,_l,n,!0)}function _l(n,e){for(let t=function Xq(n){return function _B(n){fo.key=0,fo.keyEnd=0,fo.value=0,fo.valueEnd=0,fo.textEnd=n.length}(n),mB(n,jm(n,0,fo.textEnd))}(e);t>=0;t=mB(e,t))Is(n,pB(e),!0)}function Sc(n,e,t,i){const r=It(),o=qn(),s=pc(2);o.firstUpdatePass&&xB(o,n,s,i),e!==Kn&&ds(r,s,e)&&EB(o,o.data[Eo()],r,r[On],n,r[s+1]=function aJ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ht(zo(n)))),n}(e,t),i,s)}function vB(n,e){return e>=n.expandoStartIndex}function xB(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Eo()],s=vB(n,t);SB(o,i)&&null===e&&!s&&(e=!1),e=function eJ(n,e,t,i){const r=function $_(n){const e=En.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=l0(t=vT(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=vT(r,n,e,t,i),null===o){let c=function tJ(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==hf(i))return n[ku(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=vT(null,n,e,c[1],i),c=l0(c,e.attrs,i),function nJ(n,e,t,i){n[ku(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else o=function iJ(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=l0(i,n[o].hostAttrs,t);return l0(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function Gq(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=ku(s),c=hf(s);n[i]=t;let d,l=!1;if(Array.isArray(t)?(d=t[1],(null===d||wu(t,d)>0)&&(l=!0)):d=t,r)if(0!==c){const f=ku(n[a+1]);n[i+1]=jw(f,a),0!==f&&(n[f+1]=bT(n[f+1],i)),n[a+1]=function zq(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=jw(a,0),0!==a&&(n[a+1]=bT(n[a+1],i)),a=i;else n[i+1]=jw(c,0),0===a?a=i:n[c+1]=bT(n[c+1],i),c=i;l&&(n[i+1]=_T(n[i+1])),fB(n,d,i,!0),fB(n,d,i,!1),function Wq(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&wu(o,e)>=0&&(t[i+1]=yT(t[i+1]))}(e,d,n,i,o),s=jw(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function vT(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=l0(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function l0(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Is(n,s,!!t||e[++o]))}return void 0===n?null:n}function oJ(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Is(n,i,t)}function EB(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],d=function Hq(n){return 1==(1&n)}(l)?AB(c,e,t,r,hf(l),s):void 0;Vw(d)||(Vw(o)||function Vq(n){return 2==(2&n)}(l)&&(o=AB(c,null,t,r,a,s)),function yc(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:ul.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ul.Important),n.setStyle(t,i,r,o))}}(i,s,Ch(Eo(),t),r,o))}function AB(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let f=t[r+1];f===Kn&&(f=h?Xn:void 0);let m=h?Vh(f,i):d===i?f:void 0;if(l&&!Vw(m)&&(m=Vh(c,i)),Vw(m)&&(a=m,s))return a;const v=n[r+1];r=s?ku(v):hf(v)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Vh(c,i))}return a}function Vw(n){return void 0!==n}function SB(n,e){return 0!=(n.flags&(e?8:16))}function hi(n,e=""){const t=It(),i=qn(),r=n+ci,o=i.firstCreatePass?Tm(i,r,1,e,null):i.data[r],s=CB(i,t,o,e,n);t[r]=s,Hp()&&pm(i,t,s,o),Pa(o,!1)}let CB=(n,e,t,i,r)=>(gc(!0),function cm(n,e){return n.createText(e)}(e[On],i));function Va(n){return Zs("",n,""),Va}function Zs(n,e,t){const i=It(),r=Dm(i,n,e,t);return r!==Kn&&function yd(n,e,t){const i=Ch(e,n);!function hl(n,e,t){n.setValue(e,t)}(n[On],i,t)}(i,Eo(),r),Zs}function xd(n,e,t){const i=It();return ds(i,jo(),e)&&_a(qn(),or(),i,n,e,i[On],t,!0),xd}const Vm="en-US";let $B=Vm;function AT(n,e,t,i,r){if(n=cn(n),Array.isArray(n))for(let o=0;o<n.length;o++)AT(n[o],e,t,i,r);else{const o=qn(),s=It(),a=Kr();let c=md(n)?n:cn(n.provide);const l=Ew(n),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(md(n)||!n.multi){const m=new al(l,r,He),v=CT(c,e,r?d:d+f,h);-1===v?(nb(Kp(a,s),o,c),ST(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[v]=m,s[v]=m)}else{const m=CT(c,e,d+f,h),v=CT(c,e,d,d+f),D=v>=0&&t[v];if(r&&!D||!r&&!(m>=0&&t[m])){nb(Kp(a,s),o,c);const H=function TZ(n,e,t,i,r){const o=new al(n,t,He);return o.multi=[],o.index=e,o.componentProviders=0,b3(o,r,i&&!t),o}(r?MZ:CZ,t.length,r,i,l);!r&&D&&(t[v].providerFactory=H),ST(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(H),s.push(H)}else ST(o,n,m>-1?m:v,b3(t[r?v:m],l,!r&&i));!r&&i&&D&&t[v].componentProviders++}}}function ST(n,e,t,i){const r=md(e),o=function cs(n){return!!n.useClass}(e);if(r||o){const c=(o?cn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(t);-1===d?l.push(t,[i,c]):l[d+1].push(i,c)}else l.push(t,c)}}}function b3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function CT(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function CZ(n,e,t,i){return MT(this.multi,[])}function MZ(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ll(t,t[Kt],this.providerFactory.index,i);o=a.slice(0,s),MT(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],MT(r,o);return o}function MT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function gi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function SZ(n,e,t){const i=qn();if(i.firstCreatePass){const r=Vr(n);AT(t,i.data,i.blueprint,r,!0),AT(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class pf{}class y3{}class TT extends pf{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DL(this);const r=function Es(n,e){const t=n[Xv]||null;if(!t&&!0===e)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function bd(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=GF(e,t,[{provide:pf,useValue:this},{provide:wc,useValue:this.componentFactoryResolver},...i],Ht(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class IT extends y3{constructor(e){super(),this.moduleType=e}create(e){return new TT(this.moduleType,e,[])}}function I3(n,e,t,i,r,o){const s=e+t;return ds(n,s,r)?function gl(n,e,t){return n[e]=t}(n,s+1,o?i.call(o,r):i(r)):function m0(n,e){const t=n[e];return t===Kn?void 0:t}(n,s+1)}function ba(n,e){const t=qn();let i;const r=n+ci;t.firstCreatePass?(i=function qZ(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const o=i.factory||(i.factory=od(i.type)),a=vo(He);try{const c=Yp(!1),l=o();return Yp(c),function Oq(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,It(),r,l),l}finally{vo(a)}}function bl(n,e,t){const i=n+ci,r=It(),o=function il(n,e){return n[e]}(r,i);return function g0(n,e){return n[Kt].data[e].pure}(r,i)?I3(r,function wo(){const n=En.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,o.transform,t,o):o.transform(t)}function eQ(){return this._results[Symbol.iterator]()}class _0{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Zt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=_0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=eQ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Ks(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function TC(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function nQ(n,e,t,i=!0){const r=e[Kt];if(function oM(n,e,t,i){const r=co+i,o=t.length;i>0&&(t[r-1][Ri]=e),i<o-co?(e[Ri]=t[r],Rx(t,co+i,e)):(t.push(e),e[Ri]=null),e[rr]=t;const s=e[Zc];null!==s&&t!==s&&function sM(n,e){const t=n[ru];e[Zi]!==e[rr][rr][Zi]&&(n[wh]=!0),null===t?n[ru]=[e]:t.push(e)}(s,e);const a=e[Da];null!==a&&a.insertView(n),e[Wn]|=128}(r,e,n,t),i){const o=Vo(t,n),s=e[On],a=hm(s,n[Cr]);null!==a&&function Mr(n,e,t,i,r,o){i[yr]=r,i[xo]=e,Jh(n,i,t,1,r,o)}(r,n[xo],s,e,a,o)}}let za=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=oQ}return n})();const iQ=za,rQ=class extends iQ{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function tQ(n,e,t,i){const r=e.tView,a=Tw(n,r,t,4096&n[Wn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Zc]=n[e.index];const l=n[Da];return null!==l&&(a[Da]=l.createEmbeddedView(r)),cT(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new e0(r)}};function oQ(){return Yw(Kr(),It())}function Yw(n,e){return 4&n.type?new rQ(e,n,Sm(n,e)):null}let Ho=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=uQ}return n})();function uQ(){return U3(Kr(),It())}const hQ=Ho,B3=class extends hQ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Sm(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){const e=Lh(this._hostTNode,this._hostLView);if($p(e)){const t=Fh(e,this._hostLView),i=Nh(e);return new Co(t[Kt].data[i+8],t)}return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=j3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-co}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function jh(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const E=t||{};a=E.index,i=E.injector,r=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}const c=s?e:new t0(_i(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const D=(s?l:this.parentInjector).get(ls,null);D&&(o=D)}_i(c.componentType??{});const m=c.create(l,r,null,o);return this.insertImpl(m.hostView,a,false),m}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function dC(n){return Lo(n[rr])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[rr],d=new B3(l,l[xo],l[rr]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return nQ(a,r,s,!i),e.attachToViewContainerRef(),Rx(RT(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=j3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=dm(this._lContainer,t);i&&(Zp(RT(this._lContainer),t),wb(i[Kt],i))}detach(e){const t=this._adjustIndex(e,-1),i=dm(this._lContainer,t);return i&&null!=Zp(RT(this._lContainer),t)?new e0(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function j3(n){return n[8]}function RT(n){return n[8]||(n[8]=[])}function U3(n,e){let t;const i=e[n.index];return Lo(i)?t=i:(t=bL(i,e,null,n),e[n.index]=t,Iw(e,t)),V3(t,e,n,i),new B3(t,n,e)}let V3=function z3(n,e,t,i){if(n[Cr])return;let r;r=8&t.type?Ui(i):function fQ(n,e){const t=n[On],i=t.createComment(""),r=os(e,n);return Oi(t,hm(t,r),i,function lM(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Cr]=r};class OT{constructor(e){this.queryList=e,this.matches=null}clone(){return new OT(this.queryList)}setDirty(){this.queryList.setDirty()}}class kT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new kT(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Y3(e,t).matches&&this.queries[t].setDirty()}}class H3{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class PT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new PT(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class NT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new NT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,gQ(t,o)),this.matchTNodeWithReadOption(e,t,mu(t,e,o,!1,!1))}else i===za?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,mu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===kn||r===Ho||r===za&&4&t.type)this.addMatch(t.index,-2);else{const o=mu(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function gQ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function bQ(n,e,t,i){return-1===t?function _Q(n,e){return 11&n.type?Sm(n,e):4&n.type?Yw(n,e):null}(e,n):-2===t?function yQ(n,e,t){return t===kn?Sm(e,n):t===za?Yw(e,n):t===Ho?U3(e,n):void 0}(n,e,i):ll(n,n[Kt],t,e)}function G3(n,e,t,i){const r=e[Da].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:bQ(e,o[l],s[c+1],t.metadata.read))}r.matches=a}return r.matches}function FT(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=G3(n,e,r,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=co;h<d.length;h++){const f=d[h];f[Zc]===f[rr]&&FT(f[Kt],f,l,i)}if(null!==d[ru]){const h=d[ru];for(let f=0;f<h.length;f++){const m=h[f];FT(m[Kt],m,l,i)}}}}}return i}function Vn(n){const e=It(),t=qn(),i=Y_();sl(i+1);const r=Y3(t,i);if(n.dirty&&function U_(n){return 4==(4&n[Wn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?FT(t,e,i,[]):G3(t,e,r,i);n.reset(o,VX),n.notifyOnChanges()}return!0}return!1}function Qi(n,e,t){const i=qn();i.firstCreatePass&&($3(i,new H3(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),W3(i,It(),e)}function zn(){return function vQ(n,e){return n[Da].queries[e].queryList}(It(),Y_())}function W3(n,e,t){const i=new _0(4==(4&t));(function yK(n,e,t,i){const r=vL(e);r.push(t),n.firstCreatePass&&xL(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Da]&&(e[Da]=new kT),e[Da].queries.push(new OT(i))}function $3(n,e,t){null===n.queries&&(n.queries=new PT),n.queries.track(new NT(e,t))}function Y3(n,e){return n.queries.getByIndex(e)}const zT=new vt("Application Initializer");let HT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Vt(zT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(Bm(o))t.push(o);else if(eB(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const yl=new vt("LocaleId",{providedIn:"root",factory:()=>Vt(yl,ai.Optional|ai.SkipSelf)||function zQ(){return typeof $localize<"u"&&$localize.locale||Vm}()});let qw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ui(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const p4=new vt(""),Zw=new vt("");let KT,$T=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,KT||(function hee(n){KT=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(nt(nn),nt(XT),nt(Zw))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),XT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return KT?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Pu=null;const m4=new vt("AllowMultipleToken"),qT=new vt("PlatformDestroyListeners"),Qw=new vt("appBootstrapListener");function b4(n,e,t=[]){const i=`Platform: ${e}`,r=new vt(i);return(o=[])=>{let s=JT();if(!s||s.injector.get(m4,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function mee(n){if(Pu&&!Pu.get(m4,!1))throw new Ot(400,!1);(function g4(){!function R_(n){D_=n}(()=>{throw new Ot(600,!1)})})(),Pu=n;const e=n.get(v4);(function _4(n){n.get(Sw,null)?.forEach(t=>t())})(n)}(function y4(n=[],e){return wr.create({name:e,providers:[{provide:af,useValue:"platform"},{provide:qT,useValue:new Set([()=>Pu=null])},...n]})}(a,i))}return function _ee(n){const e=JT();if(!e)throw new Ot(401,!1);return e}()}}function JT(){return Pu?.get(v4)??null}let v4=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function bee(n="zone.js",e){return"noop"===n?new nK:"zone.js"===n?new nn(e):n}(i?.ngZone,function x4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function DZ(n,e,t){return new TT(n,e,t)}(t.moduleType,this.injector,function C4(n){return[{provide:nn,useFactory:n},{provide:nf,multi:!0,useFactory:()=>{const e=Vt(vee,{optional:!0});return()=>e.initialize()}},{provide:S4,useFactory:yee},{provide:KF,useFactory:qF}]}(()=>r)),s=o.injector.get(ga,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{e1(this._modules,o),a.unsubscribe()})}),function w4(n,e,t){try{const i=t();return Bm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(HT);return a.runInitializers(),a.donePromise.then(()=>(function YB(n){yo(n,"Expected localeId to be defined"),"string"==typeof n&&($B=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(yl,Vm)||Vm),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=E4({},i);return function fee(n,e,t){const i=new IT(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(mf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ot(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ot(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(qT,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(nt(wr))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function E4(n,e){return Array.isArray(e)?e.reduce(E4,n):{...n,...e}}let mf=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Vt(S4),this.zoneIsStable=Vt(KF),this.componentTypes=[],this.components=[],this.isStable=Vt(qw).hasPendingTasks.pipe(Re(t=>t?$t(!1):this.zoneIsStable),je(),es()),this._injector=Vt(ls)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof To;if(!this._injector.get(HT).done)throw!r&&function cc(n){const e=_i(n)||Ar(n)||Sr(n);return null!==e&&e.standalone}(t),new Ot(405,!1);let s;s=r?t:this._injector.get(wc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function pee(n){return n.isBoundToModule}(s)?void 0:this._injector.get(pf),l=s.create(wr.NULL,[],i||s.selector,a),d=l.location.nativeElement,h=l.injector.get(p4,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),e1(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Ot(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;e1(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Qw,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>e1(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ot(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function e1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const S4=new vt("",{providedIn:"root",factory:()=>Vt(ga).handleError.bind(void 0)});function yee(){const n=Vt(nn),e=Vt(ga);return t=>n.runOutsideAngular(()=>e.handleError(t))}let vee=(()=>{class n{constructor(){this.zone=Vt(nn),this.applicationRef=Vt(mf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let to=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=wee}return n})();function wee(n){return function Eee(n,e,t){if(rd(n)&&!t){const i=Cs(n.index,e);return new e0(i,i)}return 47&n.type?new e0(e[Zi],e):null}(Kr(),It(),16==(16&n))}class D4{constructor(){}supports(e){return kw(e)}create(e){return new Iee(e)}}const Tee=(n,e)=>e;class Iee{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Tee}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<O4(i,r,o)?t:i,a=O4(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let f=0;f<l;f++){const m=f<o.length?o[f]:o[f]=0,v=m+f;d<=v&&v<l&&(o[f]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!kw(e))throw new Ot(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function uq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Dee(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new R4),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new R4),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Dee{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ree{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class R4{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Ree,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function O4(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function P4(){return new r1([new D4])}let r1=(()=>{class n{static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:P4});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||P4()),deps:[[n,new em,new Eu]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Ot(901,!1)}}return n})();const Fee=b4(null,"core",[]);let Lee=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(nt(mf))};static#t=this.\u0275mod=on({type:n});static#n=this.\u0275inj=tn({})}return n})(),iI=null;function Nu(){return iI}class qee{}const Hn=new vt("DocumentToken");let G4=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(){return Vt(Jee)},providedIn:"platform"})}return n})(),Jee=(()=>{class n extends G4{constructor(){super(),this._doc=Vt(Hn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nu().getBaseHref(this._doc)}onPopState(t){const i=Nu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Nu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function W4(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $4(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function bf(n){return n&&"?"!==n[0]?"?"+n:n}let w0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(){return Vt(Qee)},providedIn:"root"})}return n})();const Zee=new vt("appBaseHref");let Qee=(()=>{class n extends w0{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Vt(Hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return W4(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+bf(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+bf(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+bf(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(G4),nt(Zee,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E0=(()=>{class n{constructor(t){this._subject=new Zt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function nte(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}($4(Y4(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+bf(i))}normalize(t){return n.stripTrailingSlash(function tte(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Y4(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bf(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=bf;static#t=this.joinWithSlash=W4;static#n=this.stripTrailingSlash=$4;static#i=this.\u0275fac=function(i){return new(i||n)(nt(w0))};static#r=this.\u0275prov=At({token:n,factory:function(){return function ete(){return new E0(nt(w0))}()},providedIn:"root"})}return n})();function Y4(n){return n.replace(/\/index.html$/,"")}class Vte{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fu=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Vte(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),oj(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{oj(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(He(Ho),He(za),He(r1))};static#t=this.\u0275dir=Ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function oj(n,e){n.context.$implicit=e.item}let Tc=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new zte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(He(Ho),He(za))};static#t=this.\u0275dir=Ut({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class zte{constructor(){this.$implicit=null,this.ngIf=null}}function sj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ht(e)}'.`)}class Wte{createSubscription(e,t){return lu(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){lu(()=>e.unsubscribe())}}class $te{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Yte=new $te,Xte=new Wte;let C0=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Bm(t))return Yte;if(eB(t))return Xte;throw function Ic(n,e){return new Ot(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(He(to,16))};static#t=this.\u0275pipe=Ur({name:"async",type:n,pure:!1,standalone:!0})}return n})(),pr=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=on({type:n});static#n=this.\u0275inj=tn({})}return n})();const fj="browser";function Lu(n){return n===fj}function yI(n){return"server"===n}class Fne extends qee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wI extends Fne{static makeCurrent(){!function Kee(n){iI||(iI=n)}(new wI)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Lne(){return T0=T0||document.querySelector("base"),T0?T0.getAttribute("href"):null}();return null==t?null:function Bne(n){y1=y1||document.createElement("a"),y1.setAttribute("href",n);const e=y1.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){T0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function nj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let y1,T0=null,Une=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const EI=new vt("EventManagerPlugins");let yj=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ot(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(nt(EI),nt(nn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();class vj{constructor(e){this._doc=e}}const AI="ng-app-id";let xj=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yI(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${AI}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(AI),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(AI,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn),nt(gd),nt(Gb,8),nt(ma))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const SI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CI=/%COMP%/g,Gne=new vt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ej(n,e){return e.map(t=>t.replace(CI,n))}let Aj=(()=>{class n{constructor(t,i,r,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=yI(a),this.defaultRenderer=new MI(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===fa.ShadowDom&&(i={...i,encapsulation:fa.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof Cj?r.applyToHost(t):r instanceof TI&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case fa.Emulated:o=new Cj(c,l,i,this.appId,d,s,a,h);break;case fa.ShadowDom:return new Xne(c,l,t,i,s,a,this.nonce,h);default:o=new TI(c,l,i,d,s,a,h)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(nt(yj),nt(xj),nt(gd),nt(Gne),nt(Hn),nt(ma),nt(nn),nt(Gb))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();class MI{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(SI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Sj(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Sj(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Ot(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=SI[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=SI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ul.DashCase|ul.Important)?e.style.setProperty(t,i,r&ul.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ul.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Nu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Sj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xne extends MI{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ej(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class TI extends MI{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?Ej(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Cj extends TI{constructor(e,t,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,t,i,o,s,a,c,l),this.contentAttr=function Wne(n){return"_ngcontent-%COMP%".replace(CI,n)}(l),this.hostAttr=function $ne(n){return"_nghost-%COMP%".replace(CI,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Kne=(()=>{class n extends vj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const Mj=["alt","control","meta","shift"],qne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zne=(()=>{class n extends vj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nu().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),Mj.forEach(l=>{const d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=qne[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Mj.forEach(s=>{s!==r&&(0,Jne[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const Ij=[{provide:ma,useValue:fj},{provide:Sw,useValue:function Qne(){wI.makeCurrent()},multi:!0},{provide:Hn,useFactory:function tie(){return function fM(n){Ib=n}(document),document},deps:[]}],nie=b4(Fee,"browser",Ij),iie=new vt(""),Dj=[{provide:Zw,useClass:class jne{addToWindow(e){Ii.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Ot(5103,!1);return o},Ii.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ii.getAllAngularRootElements=()=>e.getAllRootElements(),Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(i=>{const r=Ii.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Nu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p4,useClass:$T,deps:[nn,XT,Zw]},{provide:$T,useClass:$T,deps:[nn,XT,Zw]}],Rj=[{provide:af,useValue:"root"},{provide:ga,useFactory:function eie(){return new ga},deps:[]},{provide:EI,useClass:Kne,multi:!0,deps:[Hn,nn,ma]},{provide:EI,useClass:Zne,multi:!0,deps:[Hn]},Aj,xj,yj,{provide:jF,useExisting:Aj},{provide:class pj{},useClass:Une,deps:[]},[]];let rie=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:gd,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(nt(iie,12))};static#t=this.\u0275mod=on({type:n});static#n=this.\u0275inj=tn({providers:[...Rj,...Dj],imports:[pr,Lee]})}return n})();typeof window<"u"&&window;let I0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(i){let r=null;return r=i?new(i||n):nt(Nj),r},providedIn:"root"})}return n})(),Nj=(()=>{class n extends I0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Jr.NONE:return i;case Jr.HTML:return Ba(i,"HTML")?zo(i):_w(this._doc,String(i)).toString();case Jr.STYLE:return Ba(i,"Style")?zo(i):i;case Jr.SCRIPT:if(Ba(i,"Script"))return zo(i);throw new Ot(5200,!1);case Jr.URL:return Ba(i,"URL")?zo(i):Qh(String(i));case Jr.RESOURCE_URL:if(Ba(i,"ResourceURL"))return zo(i);throw new Ot(5201,!1);default:throw new Ot(5202,!1)}}bypassSecurityTrustHtml(t){return function yM(n){return new pM(n)}(t)}bypassSecurityTrustStyle(t){return function qr(n){return new mM(n)}(t)}bypassSecurityTrustScript(t){return function as(n){return new gM(n)}(t)}bypassSecurityTrustUrl(t){return function vM(n){return new Rb(n)}(t)}bypassSecurityTrustResourceUrl(t){return function xM(n){return new _M(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn))};static#t=this.\u0275prov=At({token:n,factory:function(i){let r=null;return r=i?new i:function die(n){return new Nj(n.get(Hn))}(nt(wr)),r},providedIn:"root"})}return n})();const DI={now:()=>(DI.delegate||Date).now(),delegate:void 0};class $m extends V{constructor(e=1/0,t=1/0,i=DI){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}const v1={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return v1.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return v1.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let RI;function yie(n,e,t){let i=t;return function hie(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,o)=>!("*"===r||!function pie(n,e){if(!RI){const t=Element.prototype;RI=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&RI.call(n,e)}(n,r)||(i=o,0))),i}class xie{constructor(e,t){this.componentFactory=t.get(wc).resolveComponentFactory(e)}create(e){return new wie(this.componentFactory,e)}}class wie{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new $m(1),this.events=this.eventEmitters.pipe(Re(i=>jr(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(nn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=v1.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function mie(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=wr.create({providers:[],parent:this.injector}),i=function bie(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=t.length;o<s;++o){const a=t[o],c=yie(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(to),this.implementsOnChanges=function fie(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(mf).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(A(s=>({name:r,value:s}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=v1.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new ox(o,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Eie extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const Sie={initialConfig:{},parse:{},rename:{}};class Cie{constructor(e,t){this.configState=e,this.storedChanges={},this.options={...Sie,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,t,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=t.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[s]=a}}let Mie=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new Cie(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){df()};static#t=this.\u0275dir=Ut({type:n,features:[kr]})}return n})();const D0_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""};function Lj(n,e,t,i,r,o,s){try{var a=n[o](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Lt(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(c){Lj(o,i,r,s,a,"next",c)}function a(c){Lj(o,i,r,s,a,"throw",c)}s(void 0)})}}function R0(n){return(R0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Se(n,e,t){return(e=function Iie(n){var e=function Tie(n,e){if("object"!==R0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==R0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===R0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bj(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function vl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Bj()}window;const jj=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";vl();class Rie{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Se(this,"storage",void 0),Se(this,"id",void 0),Se(this,"config",void 0),this.storage=function Die(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function OI(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const o=n.width*t,s=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let x1;var n;function Uj(n){return"string"==typeof n?x1[n.toUpperCase()]||x1.WHITE:n}function w1(n,e){if(!n)throw new Error(e||"Assertion failed")}(n=x1||(x1={}))[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE";const ju={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},E1=ju.window||ju.self||ju.global,O0=ju.process||{};function Ym(){let n;var e,t;if(vl&&"performance"in E1)n=null==E1||null===(e=E1.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in O0){var i;const r=null==O0||null===(i=O0.hrtime)||void 0===i?void 0:i.call(O0);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const Xm={debug:vl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Bie={enabled:!0,level:0};function Wa(){}const Vj={},zj={once:!0};class k0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};Se(this,"id",void 0),Se(this,"VERSION",jj),Se(this,"_startTs",Ym()),Se(this,"_deltaTs",Ym()),Se(this,"_storage",void 0),Se(this,"userData",{}),Se(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Rie("__probe-".concat(this.id,"__"),Bie),this.timeStamp("".concat(this.id," started")),function Lie(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(o=>r===o)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ym()-this._startTs).toPrecision(10))}getDelta(){return Number((Ym()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){w1(e,t)}warn(e){return this._getLogFunction(0,e,Xm.warn,arguments,zj)}error(e){return this._getLogFunction(0,e,Xm.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,Xm.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,Xm.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,t,Xm.debug||Xm.info,arguments,zj)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||Wa,i&&[i],{tag:zie(t)}):Wa}image(e){let{logLevel:t,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(t||i)?vl?function Vie(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=OI(o,t,i);console.log(...s)},o.src=e,Wa}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...OI(e,t,i)),Wa;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...OI(o,t,i)),o.src=e.toDataURL(),Wa}return Wa}({image:r,message:o,scale:s}):function Uie(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),Wa}({image:r,message:o,scale:s}):Wa}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||Wa)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Gj({logLevel:e,message:t,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Wa)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Hj(e)}_getLogFunction(e,t,i,r,o){if(this._shouldLog(e)){o=Gj({logLevel:e,message:t,args:r,opts:o}),w1(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Ym();const s=o.tag||o.message;if(o.once){if(Vj[s])return Wa;Vj[s]=Ym()}return t=function jie(n,e,t){if("string"==typeof e){const i=t.time?function kie(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function Oie(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function Fie(n,e,t){return!vl&&"string"==typeof n&&(e&&(e=Uj(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=Uj(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),i.bind(console,t,...o.args)}return Wa}}function Hj(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return w1(Number.isFinite(e)&&e>=0),e}function Gj(n){const{logLevel:e,message:t}=n;n.logLevel=Hj(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return w1("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function zie(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}Se(k0,"VERSION",jj);const yi=new k0({id:"deck"}),Ci={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ci,"IDENTITY",{get:()=>(yi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const xl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},A1={common:0,meters:1,pixels:2},Wj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},dn=new k0({id:"luma.gl"});function Fs(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const Gie="Requires WebGL2";function S1(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function fi(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function C1(n){return Fs(S1(n),"Invalid WebGLRenderingContext"),n}function us(n){return Fs(fi(n),Gie),n}const N0={};const F0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(F0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const yf=function(e){const t=this;this.gl=e,function Kie(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(N0[i]=!0)}while(0!==i);for(i in N0)if(N0[i])return delete N0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:t.currentArrayBuffer=s;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=t.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const f=h.attribs[o];return f.buffer=t.currentArrayBuffer,f.size=s,f.type=a,f.normalized=c,f.stride=l,f.offset=d,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Yie(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};yf.prototype.VERTEX_ARRAY_BINDING_OES=34229,yf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new F0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},yf.prototype.createVertexArrayOES=function(){const e=new F0(this);return this.vertexArrayObjects.push(e),e},yf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},yf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof F0&&e.hasBeenBound&&e.ext===this)},yf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function Xie(n,e){N0[n]=!0,void 0!==e&&function $ie(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const $j="OES_element_index",Yj="WEBGL_draw_buffers",Xj="WEBGL_debug_renderer_info",cr=n=>fi(n)?void 0:0,sre={3074:n=>fi(n)?void 0:36064,35723:n=>fi(n)?void 0:4352,35977:cr,32937:cr,36795:(n,e)=>{const t=fi(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(Xj);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(Xj);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:cr,35071:cr,37447:cr,36063:(n,e)=>{if(!fi(n)){const t=n.getExtension(Yj);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:cr,35374:cr,35377:cr,34852:n=>{if(!fi(n)){const e=n.getExtension(Yj);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension($j)?2147483647:65535,33001:n=>n.getExtension($j)?16777216:65535,33e3:n=>16777216,37157:cr,35373:cr,35657:cr,36183:cr,37137:cr,34045:cr,35978:cr,35979:cr,35968:cr,35376:cr,35375:cr,35659:cr,37154:cr,35371:cr,35658:cr,35076:cr,35077:cr,35380:cr},Kj="ANGLE_instanced_arrays",qj={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Fs(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Kj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Fs(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Fs(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Fs(!1)},deleteQuery:()=>{Fs(!1)},beginQuery:()=>{Fs(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},kI={readBuffer:(n,e,t)=>{fi(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:o}=function fre(n,e){return{webgl2:fi(n),ext:n.getExtension(e)}}(n,Kj);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!fi(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>fi(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function are(n,e,t){const i=sre[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function bre(n,e){let{extension:t,target:i,target2:r}=e;const o=qj[t];Fs(o);const{meta:s={}}=o,{suffix:a=""}=s,c=n.getExtension(t);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function pre(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function qie(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new yf(this)),this.__OESVertexArrayObject))}}(n),function mre(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function _re(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&bre(n,{extension:t,target:n.luma,target2:n})}(n,qj),function gre(n,e){let{target:t,target2:i}=e;Object.keys(kI).forEach(r=>{if("function"==typeof kI[r]){const o=n[r]?n[r].bind(n):()=>{},s=kI[r].bind(null,n,o);t[r]=s,i[r]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const PI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Uu=(n,e,t)=>e?n.enable(t):n.disable(t),Jj=(n,e,t)=>n.hint(t,e),va=(n,e,t)=>n.pixelStorei(t,e);function L0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const xre={3042:Uu,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:Uu,2885:(n,e)=>n.cullFace(e),2929:Uu,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:Uu,35723:Jj,36006:(n,e)=>{const t=fi(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:Jj,2849:(n,e)=>n.lineWidth(e),32823:Uu,32824:"polygonOffset",10752:"polygonOffset",35977:Uu,32938:"sampleCoverage",32939:"sampleCoverage",3089:Uu,3088:(n,e)=>n.scissor(...e),2960:Uu,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:va,3317:va,37440:va,37441:va,37443:va,3330:va,3332:va,3331:va,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:va,32878:va,3316:va,3315:va,32877:va,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=L0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=L0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=L0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=L0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,o,s,a)},stencilOp:(n,e)=>{e=L0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,o,s,a)},viewport:(n,e)=>n.viewport(...e)};function Fr(n,e,t){return void 0!==e[n]?e[n]:t[n]}const wre={blendEquation:(n,e,t)=>n.blendEquationSeparate(Fr(32777,e,t),Fr(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Fr(32969,e,t),Fr(32968,e,t),Fr(32971,e,t),Fr(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Fr(32824,e,t),Fr(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Fr(32938,e,t),Fr(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Fr(2962,e,t),Fr(2967,e,t),Fr(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Fr(34816,e,t),Fr(36003,e,t),Fr(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Fr(2964,e,t),Fr(2965,e,t),Fr(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Fr(34817,e,t),Fr(34818,e,t),Fr(34819,e,t))},Zj={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},wl=(n,e)=>n.isEnabled(e),Qj={3042:wl,2884:wl,2929:wl,3024:wl,32823:wl,32926:wl,32928:wl,3089:wl,2960:wl,35977:wl};function eU(n){for(const e in n)return!1;return!0}function Ere(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function tU(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Are(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Cre{constructor(e){let{copyState:t=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function Tre(n,e){if("number"==typeof(e=e||PI)){const r=e,o=Qj[r];return o?o(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const o=Qj[r];i[r]=o?o(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},PI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Fs(this.stateStack.length>0),Ad(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Fs(void 0!==o);const s=e[o],a=this.cache[o];Ere(s,a)||(t=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:t,oldValue:i}}}function nU(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(Fs(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new Cre(n,{copyState:i}),function Sre(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const o in Zj)Are(n,o,Zj[o]);tU(n,"getParameter"),tU(n,"isEnabled")}return n.state.enable=t,n}function iU(n){Fs(n.state),n.state.pop()}function Ad(n,e){if(Fs(S1(n),"setParameters requires a WebGL context"),eU(e))return;const t={};for(const r in e){const o=Number(r),s=xre[r];s&&("string"==typeof s?t[s]=!0:s(n,e[r],o))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,wre[r])(n,e,i)}function $a(n,e,t){if(eU(e))return t(n);const{nocatch:i=!0}=e;let r;if(function Mre(n){n.state||nU(n,{copyState:!1}),n.state.push()}(n),Ad(n,e),i)r=t(n),iU(n);else try{r=t(n)}finally{iU(n)}return r}function Km(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function NI(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function Rre(n,e,t,i,r){const o=rU(n[0],e,t);let s=oU(n[1],e,i,r),a=rU(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=oU(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,Km(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function rU(n,e,t){return Math.min(Math.round(n*e),t-1)}function oU(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const FI=vl(),Ore=FI&&typeof document<"u",sU={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function aU(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fs(FI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},sU,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:o}=n,s=function Fre(n){let o,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(Ore&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:t,onError:i});return r=function Nre(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),o&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,n),r?(r=LI(r,n),function Lre(n){const e=fi(n)?"WebGL2":"WebGL1",t=function kre(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";dn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function LI(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function Bre(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},sU,e);const{manageState:t,debug:i}=e;return t&&nU(n,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return dn.log(1,...o)()}}),FI&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),dn.level=Math.max(dn.level,1)):dn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function cU(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class lU{constructor(e,t){Se(this,"name",void 0),Se(this,"type",void 0),Se(this,"sampleSize",1),Se(this,"time",void 0),Se(this,"count",void 0),Se(this,"samples",void 0),Se(this,"lastTiming",void 0),Se(this,"lastSampleTime",void 0),Se(this,"lastSampleCount",void 0),Se(this,"_count",0),Se(this,"_time",0),Se(this,"_samples",0),Se(this,"_startTime",0),Se(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=cU(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(cU()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class BI{constructor(e){Se(this,"id",void 0),Se(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof lU?e:new lU(t,i)),this.stats[t]}}const B0="8.5.21",vf=new class Vre{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new BI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==B0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(B0));function Xt(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function jI(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return Xt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Vu(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(vl()&&dn.log(1,"luma.gl ".concat(B0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:B0,version:B0,log:dn,stats:vf,globals:{modules:{},nodeIO:{}}}),globalThis;const UI={};function ta(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";UI[n]=UI[n]||1;const e=UI[n]++;return"".concat(n,"-").concat(e)}function dU(n){return Xt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function qm(n){let e=!0;for(const t in n){e=!1;break}return e}function uU(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(n);i.forEach(s=>{o.methodName||(o[s]=()=>{throw dn.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const Jm="Resource subclass must define virtual methods";class Sd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};C1(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||ta(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xt(e=jI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=fi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},o=fi(this.gl),s={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Vu(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=Vu(this.gl,s[h]))}}return s}setParameter(e,t){Xt(e=jI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=fi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=jI(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return uU(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(Jm)}_deleteHandle(){throw new Error(Jm)}_bindHandle(e){throw new Error(Jm)}_getOptsFromHandle(){throw new Error(Jm)}_getParameter(e,t){throw new Error(Jm)}_setParameter(e,t){throw new Error(Jm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=vf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];vf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=vf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=vf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const zre="Failed to deduce GL constant from typed array";function VI(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(zre)}}function j0(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Gre(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:s,width:r,height:o}}function zI(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";dn.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];dn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];dn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const Wre={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},$re={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class na{static getBytesPerElement(e){return j0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Xt(e.size),j0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new na(Wre,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return na.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return na.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=zI("Accessor",e,$re),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const fU={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Yre={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:fU},Xre={removedProps:fU};class Xi extends Sd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/na.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/na.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=zI("Buffer",e,Yre),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=zI("Buffer",e,Xre))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new na(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Xt(t);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(us(this.gl),this.gl.bufferSubData(this.target,i,t,r,o)):this.gl.bufferSubData(s,i,t),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return us(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};us(this.gl);const o=j0(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Xt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(Xt(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Xt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=VI(e);return Xt(o),this.setAccessor(new na(this.accessor,{type:o})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Xt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/j0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new na(this.accessor,{type:VI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return dn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return dn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return dn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return dn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new na(this.accessor,e),this}}const HI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},pU={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},mU={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Jre=[9729,9728],gU=globalThis.WebGLBuffer||function(){};class xf extends Sd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let o=!0;return i&&(o=o&&function Kre(n,e){const t=HI[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=fi(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),o=o&&(!r||function qre(n,e){const t=HI[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,t){const{id:i=ta("texture"),handle:r,target:o}=t;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(Y=>this.initialize(Object.assign({},e,{pixels:Y,data:Y}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;t||(t=r);let{width:h,height:f,dataFormat:m,type:v,compressed:E=!1,mipmaps:D=!0}=e;const{depth:H=0}=e;return({width:h,height:f,compressed:E,dataFormat:m,type:v}=this._deduceParameters({format:o,type:v,dataFormat:m,compressed:E,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=H,this.format=o,this.type=v,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),D&&this._isNPOT()&&(dn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),D=!1,this._updateForNPOT(c)),this.mipmaps=D,this.setImageData({data:t,width:h,height:f,depth:H,format:o,type:v,dataFormat:m,border:s,mipmaps:D,parameters:l,compressed:E}),D&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(dn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),$a(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:f=this.height,dataFormat:m=this.dataFormat,compressed:v=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:v,width:h,height:f}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:v,data:l,width:h,height:f}));const{gl:E}=this;E.bindTexture(this.target,this.handle);let D=null;({data:l,dataType:D}=this._getDataType({data:l,compressed:v}));let H,Y=0;return $a(this.gl,c,()=>{switch(D){case"null":E.texImage2D(t,r,o,h,f,s,m,d,l);break;case"typed-array":E.texImage2D(t,r,o,h,f,s,m,d,l,a);break;case"buffer":H=us(E),H.bindBuffer(35052,l.handle||l),H.texImage2D(t,r,o,h,f,s,m,d,a),H.bindBuffer(35052,null);break;case"browser-object":fi(E)?E.texImage2D(t,r,o,h,f,s,m,d,l):E.texImage2D(t,r,o,m,d,l);break;case"compressed":for(const[he,Ie]of l.entries())E.compressedTexImage2D(t,he,Ie.format,Ie.width,Ie.height,s,Ie.data),Y+=Ie.levelSize;break;default:Xt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===D?Y:l&&l.byteLength?l.byteLength:this.width*this.height*(pU[this.dataFormat]||4)*(mU[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:m=!1,offset:v=0,border:E=this.border,parameters:D={}}=e;if(({type:h,dataFormat:f,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:f,compressed:m,data:r,width:a,height:c})),Xt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const H=r;r=H.data,a=H.shape[0],c=H.shape[1]}r instanceof Xi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),$a(this.gl,D,()=>{if(m)this.gl.compressedTexSubImage2D(t,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(t,l,o,s,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,o,s,a,c,f,h,r,v);else if(r instanceof gU){const H=us(this.gl);H.bindBuffer(35052,r),H.texSubImage2D(t,l,o,s,a,c,f,h,v),H.bindBuffer(35052,null)}else fi(this.gl)?us(this.gl).texSubImage2D(t,l,o,s,a,c,f,h,r):this.gl.texSubImage2D(t,l,o,s,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return dn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Xi?{data:t.handle,dataType:"buffer"}:t instanceof gU?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=HI[t];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},Xt(r,"Could not deduced texture size"),Xt(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Xt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Xt(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(fi(this.gl)||!this.width||!this.height||dU(this.width)&&dU(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Jre.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Zre(n,e){return Xt("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class Go extends xf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return xf.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};C1(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Zre(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const wf="EXT_color_buffer_float",_U={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:wf,bpp:2},33327:{gl2:wf,bpp:4},34842:{gl2:wf,bpp:8},33326:{gl2:wf,bpp:4},33328:{gl2:wf,bpp:8},34836:{gl2:wf,bpp:16},35898:{gl2:wf,bpp:4}};class Zm extends Sd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function Qre(n,e,t){const i=t[e];if(!i)return!1;const r=fi(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,_U)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:o=0}=e;return Xt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&fi(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*_U[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const bU=6144,wU="clear: bad arguments";function WI(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;t&&(s|=16384,!0!==t&&(o.clearColor=t)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Xt(0!==s,wU),$a(n,o,()=>{n.clear(s)})}const $I=[34069,34070,34071,34072,34073,34074];let ooe=(()=>{class n extends xf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};C1(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return Lt(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t;const{gl:h}=i,f=s||a,m=yield Promise.all($I.map(v=>{const E=f[v];return Promise.all(Array.isArray(E)?E:[E])}));i.bind(),$I.forEach((v,E)=>{m[E].length>1&&!1!==i.opts.mipmaps&&dn.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[E].forEach((D,H)=>{r&&o?h.texImage2D(v,H,l,r,o,c,l,d,D):h.texImage2D(v,H,l,l,d,D)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t,{gl:h}=this,f=s||a;return this.bind(),f instanceof Promise?f.then(m=>this.setImageDataForFace(Object.assign({},t,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,f):h.texImage2D(i,0,l,l,d,f),this}}return n.FACES=$I,n})();class soe extends xf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return fi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),$a(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,h),h instanceof Xi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(pU[this.dataFormat]||4)*(mU[this.type]||1),"Texture"),this.loaded=!0,this}}function coe(n,e){const{gl:t,width:i,height:r,id:o}=n;return new io(t,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:n}}))}function M1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=U0(n);Xt(d);const{gl:f,handle:m,attachments:v}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Xt(v[o]),l=l||v[o].type,s=function doe(n,e,t,i,r){if(n)return n;const o=j0(e=e||5121,{clamped:!1}),s=function roe(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Xt(!1),0}}(t);return new o(i*r*s)}(s,l,r,a,c),l=l||VI(s);const E=f.bindFramebuffer(36160,m);return f.readPixels(t,i,a,c,r,l,s),f.bindFramebuffer(36160,E||null),h&&d.delete(),s}function YI(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=M1(n,{sourceAttachment:e}),{width:r,height:o}=n;for(;o>t;)({data:i,width:r,height:o}=Gre({data:i,width:r,height:o}));!function Hre(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:o}=n;const s=t*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function U0(n){return n instanceof io?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:coe(n),deleteFramebuffer:!0}}const EU="Multiple render targets not supported";class io extends Sd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new io(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=us(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=us(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Xt(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:t,height:i})}else r=this._createDefaultAttachments(o,s,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(t,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return Xt(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&dn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Xt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof Zm)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,f=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function hoe(n){return(io.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&WI(this.gl,{color:t,depth:i,stencil:r}),o.forEach((a,c)=>{!function ioe(n){let{framebuffer:e=null,buffer:t=bU,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(n),$a(n,{framebuffer:e},()=>{switch(t){case bU:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;n.clearBufferfi(34041,0,o,s);break;default:Xt(!1,wU)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return dn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return dn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return dn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return dn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return dn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return dn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:o,height:s}=e;const a=us(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Vu(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[t?Vu(this.gl,o):o]=this.getAttachmentParameter(e,o,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const o=Number(r);i[e?Vu(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(YI(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>dn.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=YI(this,{targetMaxHeight:100});return dn.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new Go(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),t&&i?(s=s||{},s[33306]=new Zm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):t?(s=s||{},s[36096]=new Zm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Xt(!1),s}_unattach(e){const t=this.attachments[e];t&&(t instanceof Zm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:us(s).framebufferTextureLayer(36160,t,i.target,o,r);break;case 34067:const c=function uoe(n){return n<34069?n+34069:n}(r);s.framebufferTexture2D(36160,t,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,t,3553,i.handle,o);break;default:Xt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function Wie(n){return fi(n)?n:null}(this.gl);t?t.readBuffer(e):Xt(36064===e||1029===e,EU),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=us(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Xt(1===e.length&&(36064===e[0]||1029===e[0]),EU)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function goe(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in AU)void 0===n.luma.caps[e]&&(n.luma.caps[e]=CU(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}io.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const AU={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function poe(n){const e=new Go(n,{format:6408,type:5126,dataFormat:6408}),t=new io(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},moe=2;function XI(n,e){return SU(n,e)}function SU(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>CU(n,t))}function CU(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function _oe(n,e){const t=AU[e];let i;Xt(t,e);const r=fi(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!n.getExtension(o)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:Xt(!1);return i}(n,e)),n.luma.caps[e]||dn.log(moe,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}class KI{constructor(e,t){Se(this,"opts",void 0),Se(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=t.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const V0=new class yoe{constructor(e={}){Se(this,"_pool",[]),Se(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=t*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const f=this._allocate(l,d,a,h);return e&&s?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,o=t.findIndex(s=>s.byteLength>=r);o<0?t.push(i):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,i),t.length>this.opts.poolSize&&t.shift()}},voe=1/Math.PI*180,xoe=1/180*Math.PI,Gr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function woe(n,{precision:e=Gr.precision}={}){return n=function Moe(n){return Math.round(n/Gr.EPSILON)*Gr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Cd(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function MU(n){return function Aoe(n,e){return Md(n,t=>t*xoe,e)}(n)}function Eoe(n){return function Soe(n,e){return Md(n,t=>t*voe,e)}(n)}function Tr(n,e,t){return Md(n,i=>Math.max(e,Math.min(t,i)))}function T1(n,e,t){return Cd(n)?n.map((i,r)=>T1(i,e[r],t)):t*e+(1-t)*n}function Qm(n,e,t){const i=Gr.EPSILON;t&&(Gr.EPSILON=t);try{if(n===e)return!0;if(Cd(n)&&Cd(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Qm(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=Gr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Gr.EPSILON=i}}function Md(n,e,t){if(Cd(n)){const i=n;t=t||function Toe(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}class I1 extends(function Ioe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Cd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Gr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+woe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Qm(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(Gr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function pi(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function D1(n,e,t=""){if(Gr.debug&&!function Doe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}function IU(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class DU extends I1{get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return pi(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return pi(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return IU(e>=0&&e<this.ELEMENTS,"index is out of range"),pi(this[e])}setComponent(e,t){return IU(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var El=1e-6,ia=typeof Float32Array<"u"?Float32Array:Array;function RU(){var n=new ia(3);return ia!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function OU(n,e,t){var i=new ia(3);return i[0]=n,i[1]=e,i[2]=t,i}function kU(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function R1(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function qI(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s,n}function PU(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,v=o*d-i*f,E=i*h-r*d,D=2*t[3];return h*=D,f*=D,v*=2,E*=2,n[0]=a+(d*=D)+(m*=2),n[1]=c+h+v,n[2]=l+f+E,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function NU(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;return n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s,n}RU();const JI=[0,0,0];let O1;class hs extends DU{static get ZERO(){return O1||(O1=new hs(0,0,0),Object.freeze(O1)),O1}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Cd(e)?this.copy(e):(Gr.debug&&(pi(e),pi(t),pi(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Gr.debug&&(pi(e.x),pi(e.y),pi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=pi(e)}angle(e){return function Uoe(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&kU(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return R1(this,this,e),this.check()}rotateX({radians:e,origin:t=JI}){return function Loe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=JI}){return function Boe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=JI}){return function joe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return qI(this,this,e),this.check()}transformAsVector(e){return NU(this,this,e),this.check()}transformByMatrix3(e){return function Foe(n,e,t){var i=e[0],r=e[1],o=e[2];n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Goe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return PU(this,this,e),this.check()}}const FU=new hs;function eg(n,e,t,i){FU.set(n,e,t);const r=FU.len();return{distance:i/r,normal:new hs(-n/r,-e/r,-t/r)}}function qoe(n){return n-Math.fround(n)}let H0;function ZI(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,o=(r-i)/t;H0=V0.allocate(H0,o,{type:Float32Array,size:2*t});let s=i,a=0;for(;s<r;){for(let c=0;c<t;c++){const l=n[s++];H0[a+c]=l,H0[a+c+t]=qoe(l)}a+=2*t}return H0.subarray(0,o*t*2)}function k1(n){return n.stride||n.size*n.bytesPerElement}function LU(n,e){e.offset&&yi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=k1(n),o=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:o,stride:t}}class Zoe{constructor(e,t,i){Se(this,"gl",void 0),Se(this,"id",void 0),Se(this,"size",void 0),Se(this,"settings",void 0),Se(this,"value",void 0),Se(this,"doublePrecision",void 0),Se(this,"_buffer",void 0),Se(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,o=5130===r;let a,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&t.isIndexed?e&&XI(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function boe(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Xi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*k1(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),V0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function Joe(n,e){const t=LU(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new KI(this,o.high),i["".concat(e,"64Low")]=r?new KI(this,o.low):new Float32Array(this.size),i}if(t){const i=LU(this.getAccessor(),t);return{[e]:new KI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,o=i*r;if(t&&o&&t.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=t[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Xi?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),t.constant&&this._areValuesEqual(o,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;t.externalBuffer=o,t.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=k1(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;t.externalBuffer=null,t.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=k1(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=ZI(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?ZI(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,o=V0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),t&&r&&s.subData({data:r instanceof Float64Array?ZI(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&yi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(o){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)t[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}function Wo(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const BU=[],jU=[];function P1(n,e=0,t=1/0){let i=BU;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(jU.length=n.length,i=jU):i=BU,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function UU(n){return n&&n[Symbol.asyncIterator]}function QI(n,e=(()=>!0)){return Array.isArray(n)?VU(n,e,[]):e(n)?[n]:[]}function VU(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?VU(r,e,t):e(r)&&t.push(r)}return t}function ese({target:n,source:e,start:t=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=t;s<r;s++)n[a++]=e[s];for(;s<o;)s<o-s?(n.copyWithin(t+s,t,t+s),s*=2):(n.copyWithin(t+s,t,t+o-s),s=o);return n}const tse=[],N1=[[0,1/0]];function eD(n){const{source:e,target:t,start:i=0,size:r,getData:o}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)t[i+l]=d[h]||0,l++}}const rse={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function zU(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...rse[t],...e,...n,type:t}}function HU(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function GU(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function WU(n){n.push(n.shift())}function tD(n,e){const{doublePrecision:t,settings:i,value:r,size:o}=n,s=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function $U({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*s,c=t.byteOffset,l=t.startIndices,d=r&&l,h=tD(t,e),f=t.isConstant;if(!d&&i>=h)return;const m=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const H=o;o=(Y,he)=>t.normalizeConstant(H(Y,he))}const v=f?(H,Y)=>o(m,Y):(H,Y)=>o(m.subarray(H,H+a),Y),E=n.getData({length:i}),D=new Float32Array(h);(function ise({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return eD({source:n,target:e,size:t,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*t,f=o[d]*t;eD({source:n.subarray(s,h),target:e,start:a,end:f,size:t,getData:c}),s=h,a=f}a<e.length&&eD({source:[],target:e,start:a,size:t,getData:c})})({source:E,target:D,sourceStartIndices:r,targetStartIndices:l,size:a,getData:v}),n.byteLength<D.byteLength+c&&n.reallocate(D.byteLength+c),n.subData({data:D,offset:c})}class nD extends Zoe{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:N1}),Se(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return zU(Array.isArray(t)?e[t.find(o=>e[o])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function nse(n,e){if(n===N1||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let o=0;o<i;o++){const s=n[o];s[1]<e[0]?(t.push(s),r=o+1):s[0]>e[1]?t.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=N1}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=tse}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==N1),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:t,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return Wo(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Qoe(n,e){const{size:t,stride:i,offset:r,startIndices:o,nested:s}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,d=Math.floor((n.length-l)/c);return(h,{index:f,target:m})=>{if(!o){const H=f*c+l;for(let Y=0;Y<t;Y++)m[Y]=n[H+Y];return m}const v=o[f],E=o[f+1]||d;let D;if(s){D=new Array(E-v);for(let H=v;H<E;H++){const Y=H*c+l;m=new Array(t);for(let he=0;he<t;he++)m[he]=n[Y+he];D[H-v]=m}}else if(c===t)D=n.subarray(v*t+l,E*t+l);else{D=new n.constructor((E-v)*t);let H=0;for(let Y=v;Y<E;Y++){const he=Y*c+l;for(let Ie=0;Ie<t;Ie++)D[H++]=n[he+Ie]}}return D}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:t,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:f,transform:m}=a,v=c.binaryAccessor||("function"==typeof f?f:o[f]);Wo("function"==typeof v,'accessor "'.concat(f,'" is not a function'));let E=e.getVertexOffset(i);const{iterable:D,objectInfo:H}=P1(t,i,r);for(const Y of D){H.index++;let he=v(Y,H);if(m&&(he=m.call(this,he)),h){const Ie=(H.index<h.length-1?h[H.index+1]:s)-h[H.index];if(he&&Array.isArray(he[0])){let Le=E;for(const $e of he)e._normalizeValue($e,l,Le),Le+=d}else he&&he.length>d?l.set(he,E):(e._normalizeValue(he,H.target,0),ese({target:l,source:H.target,start:E,count:Ie}));E+=Ie*d}else e._normalizeValue(he,l,E),E+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let iD={};function fs(n,e,t,i){yi.level>0&&iD[n]&&iD[n].call(null,e,t,i)}function xa(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const YU="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",ase="#version 300 es\n".concat(YU);function XU(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,o]=t;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function KU(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?ase:e>300?"#version ".concat(e,"\n").concat(YU):"void main() {gl_FragColor = vec4(0);}";const o=function dse(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return xa(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class qU extends Sd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return fi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,qm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(t);return i<0?(this.unused[e]=r,dn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof Xi?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const o=t&&t.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class use{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof Xi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Xt(fi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=t[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new qU(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];t[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Xt(i[o]instanceof Xi)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new Xi(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function JU(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const G0="vs",pse={[G0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},F1="__LUMA_INJECT_DECLARATIONS__",ZU=/void\s+main\s*\([^)]*\)\s*\{\n?/,QU=/}\n?[^{}]*$/,oD=[];function e8(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===G0;for(const o in t){const s=t[o];s.sort((c,l)=>c.order-l.order),oD.length=s.length;for(let c=0,l=s.length;c<l;++c)oD[c]=s[c].injection;const a="".concat(oD.join("\n"),"\n");switch(o){case"vs:#decl":r&&(n=n.replace(F1,a));break;case"vs:#main-start":r&&(n=n.replace(ZU,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(QU,c=>a+c));break;case"fs:#decl":r||(n=n.replace(F1,a));break;case"fs:#main-start":r||(n=n.replace(ZU,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(QU,c=>a+c));break;default:n=n.replace(o,c=>c+a)}}return n=n.replace(F1,""),i&&(n=n.replace(/\}\s*$/,o=>o+pse[e])),n}function sD(n){const e={};return xa(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}const mse={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},L1="transform_uSize_",t8="transform_position";const Ese={10241:9728,10240:9728,10242:33071,10243:33071};class Sse{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function bse(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let o,s;t&&(({width:o,height:s}=i),r["".concat(L1).concat(t)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(L1).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=M1(t);if(!e)return i;const r=i.constructor,o=function lse(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return xa(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof Go)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Xi(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new io(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(Ese)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function aoe(n,e){Xt(n instanceof Go||n instanceof ooe||n instanceof soe);const t=n.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=n;return new t(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function _se(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,s=Object.keys(t).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((m,v,E)=>{if(s>0){const D=function wse(n,e){const t={},i=function yse(n){return XU(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function vse(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(L1).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(o),d=function cse(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return xa(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return t[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(m,t);if(D){const{updatedLine:H,inject:Y}=D;f[v]=H,d=sD([d,Y]),Object.assign(c,D.samplerTextureMap),s--}}i&&!a&&(a=function xse(n,e){const t=XU(n,["varying","out"]);return t&&t.name===e?t.type:null}(m,i))}),i){Xt(r);const m="".concat(L1).concat(i),v="uniform vec2 ".concat(m,";\n"),E="     vec2 ".concat(t8," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(t8,", 0, 1.);\n");d=sD([d,{"vs:#decl":v,"vs:#main-start":E}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=sD([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||KU({version:JU(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[mse].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const aD={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function Mse(n){let e=n8(n);return"object"===e?n?"type"in n?Object.assign({},n,aD[n.type]):"value"in n?(e=n8(n.value),Object.assign({type:e},n,aD[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},aD[e])}function n8(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class cD{constructor(e){let{name:t,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:f}=e;xa("string"==typeof t),this.name=t,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Dse(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(d),s&&(this.uniforms=function Cse(n){const e={};for(const t in n){const r=Mse(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:xa(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&xa(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=o.value}return t}}function Rse(n){return function i8(n){const e={},t={};return lD({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(r8(n))}function lD(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<t)&&(r[o.name]=t);for(const o of e)o.dependencies&&lD({modules:o.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function r8(n,e){return n.map(t=>(t instanceof cD||(xa("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),xa(t.name,"shader module has no name"),(t=new cD(t)).dependencies=r8(t.dependencies)),t))}const kse=7936,Pse=7937,Nse=7938,Fse=35724,dD={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ef={};function jse(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(dD).forEach(n=>{Ef[n]=n});const uD={};function o8(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=dD[e];if(xa(i,e),!function Ose(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in uD)return uD[e];const o=t.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,s),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),uD[e]=c,c}function B1(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function Use(n,e){const t=dD[e];xa(t,e);const i=function Lse(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return xa(!1===r||!0===r),r}(n,t))}function tg(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const s8=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Hse=[...s8,[tg("attribute"),"in $1"],[tg("varying"),"out $1"]],Gse=[...s8,[tg("varying"),"in $1"]],a8=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Wse=[...a8,[tg("in"),"attribute $1"],[tg("out"),"varying $1"]],$se=[...a8,[tg("in"),"varying $1"]],hD="gl_FragColor",fD=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Yse=/void\s+main\s*\([^)]*\)\s*\{\n?/;function j1(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Jse="\n\n".concat(F1,"\n\n"),c8={[G0]:"vertex",fs:"fragment"};function l8(n,e){let{id:t,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;xa("string"==typeof i,"shader source must be a string");const f=r===G0,m=i.split("\n");let v=100,E="",D=i;0===m[0].indexOf("#version ")?(v=300,E=m[0],D=m.slice(1).join("\n")):E="#version ".concat(v);const H={};o.forEach(ot=>{Object.assign(H,ot.getDefines())}),Object.assign(H,s);let Y=d?"".concat(E,"\n").concat(function nae(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(c8[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function tae(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(c8[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Vse(n){switch(function Bse(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||kse),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Pse);return{gpuVendor:jse(t,i),vendor:t,renderer:i,version:n.getParameter(Nse),shadingLanguageVersion:n.getParameter(Fse)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function zse(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return B1(n,Ef.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),B1(n,Ef.GLSL_DERIVATIVES)&&o8(n,Ef.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),B1(n,Ef.GLSL_FRAG_DATA)&&o8(n,Ef.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),B1(n,Ef.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function iae(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(H),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(E,"\n");const he=function oae(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,o]=t.split(":"),s=t.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),Ie={},Le={},$e={};for(const ot in c){const mt="string"==typeof c[ot]?{injection:c[ot],order:0}:c[ot],pt=ot.match(/^(v|f)s:(#)?([\w-]+)$/);pt?pt[2]?"decl"===pt[3]?Le[ot]=[mt]:$e[ot]=[mt]:Ie[ot]=[mt]:$e[ot]=[mt]}for(const ot of o){h&&ot.checkDeprecations(D,h),Y+=ot.getModuleSource(r,v);const pt=ot.injections[r];for(const ft in pt){const _t=ft.match(/^(v|f)s:#([\w-]+)$/);if(_t){const lt="decl"===_t[2]?Le:$e;lt[ft]=lt[ft]||[],lt[ft].push(pt[ft])}else Ie[ft]=Ie[ft]||[],Ie[ft].push(pt[ft])}}return Y+=Jse,Y=e8(Y,r,Le),Y+=function rae(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)t+="  ".concat(s.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(he[r],Ie),Y+=D,Y=e8(Y,r,$e),Y=function Xse(n,e,t){switch(e){case 300:return t?j1(n,Hse):function Kse(n){const e=(n=j1(n,Gse)).match(fD);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(hD,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(Yse,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(hD,"\\b"),"g"),t)}return n}(n);case 100:return t?j1(n,Wse):function qse(n){const e=(n=j1(n,$se)).match(fD);if(e){const t=e[1];n=n.replace(fD,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),hD)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}(Y,l?100:v,f),Y}function eae(n){return function(t){const i={};for(const r of n){const o=r.getUniforms(t,i);Object.assign(i,o)}return i}}const sae={5126:mr.bind(null,"uniform1fv",wa,1,ps),35664:mr.bind(null,"uniform2fv",wa,2,ps),35665:mr.bind(null,"uniform3fv",wa,3,ps),35666:mr.bind(null,"uniform4fv",wa,4,ps),5124:mr.bind(null,"uniform1iv",zu,1,ps),35667:mr.bind(null,"uniform2iv",zu,2,ps),35668:mr.bind(null,"uniform3iv",zu,3,ps),35669:mr.bind(null,"uniform4iv",zu,4,ps),35670:mr.bind(null,"uniform1iv",zu,1,ps),35671:mr.bind(null,"uniform2iv",zu,2,ps),35672:mr.bind(null,"uniform3iv",zu,3,ps),35673:mr.bind(null,"uniform4iv",zu,4,ps),35674:mr.bind(null,"uniformMatrix2fv",wa,4,Td),35675:mr.bind(null,"uniformMatrix3fv",wa,9,Td),35676:mr.bind(null,"uniformMatrix4fv",wa,16,Td),35678:$o,35680:$o,5125:mr.bind(null,"uniform1uiv",U1,1,ps),36294:mr.bind(null,"uniform2uiv",U1,2,ps),36295:mr.bind(null,"uniform3uiv",U1,3,ps),36296:mr.bind(null,"uniform4uiv",U1,4,ps),35685:mr.bind(null,"uniformMatrix2x3fv",wa,6,Td),35686:mr.bind(null,"uniformMatrix2x4fv",wa,8,Td),35687:mr.bind(null,"uniformMatrix3x2fv",wa,6,Td),35688:mr.bind(null,"uniformMatrix3x4fv",wa,12,Td),35689:mr.bind(null,"uniformMatrix4x2fv",wa,8,Td),35690:mr.bind(null,"uniformMatrix4x3fv",wa,12,Td),35678:$o,35680:$o,35679:$o,35682:$o,36289:$o,36292:$o,36293:$o,36298:$o,36299:$o,36300:$o,36303:$o,36306:$o,36307:$o,36308:$o,36311:$o},aae={},cae={},lae={},d8=[0];function pD(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(d8[0]=n,n=d8);const r=n.length;if(r%e&&dn.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let o=i[r];o||(o=new t(r),i[r]=o);for(let s=0;s<r;s++)o[s]=n[s];return o}function wa(n,e){return pD(n,e,Float32Array,aae)}function zu(n,e){return pD(n,e,Int32Array,cae)}function U1(n,e){return pD(n,e,Uint32Array,lae)}function u8(n,e,t){const i=sae[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function dae(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function hae(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function pae(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof xf||n instanceof Zm)||n instanceof io&&!!n.texture}function fae(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,o=t.length;r<o;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function $o(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function mr(n,e,t,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,t),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Xt(o===d,"Uniform length cannot change.");for(let f=0;f<d;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(s,n,a,l),r.set(l)),h}}function ps(n,e,t,i){n[e](t,i)}function Td(n,e,t,i){n[e](t,!1,i)}function V1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function f8(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const o=n[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();t+=p8("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function p8(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class W0 extends Sd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Xt(!1),"unknown"}}constructor(e,t){C1(e),Xt("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:V1(t.source,null)||t.id||ta("unnamed ".concat(W0.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=V1(t,null);i&&(this.id=ta(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(W0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return V1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function h8(n,e,t,i){const r=n.split(/\r?\n/),o={},s={},a=i||V1(e)||"(unnamed)",c="".concat(function _ae(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const f=h.split(":"),m=f[0],v=parseInt(f[2],10);if(isNaN(v))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==m?o[v]=h:s[v]=h}const l=function bae(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return p8(a,r-a.length)+t+o})}(e);return{shaderName:c,errors:f8(o,l),warnings:f8(s,l)}}(i,this.source,this.shaderType,this.id);throw dn.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),dn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class mD extends W0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class gD extends W0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const vae=5120,xae=5121,wae=5122,Eae=5123,po=5126,$0=5124,Y0=5125,_D={[po]:[po,1,"float"],35664:[po,2,"vec2"],35665:[po,3,"vec3"],35666:[po,4,"vec4"],[$0]:[$0,1,"int"],35667:[$0,2,"ivec2"],35668:[$0,3,"ivec3"],35669:[$0,4,"ivec4"],[Y0]:[Y0,1,"uint"],36294:[Y0,2,"uvec2"],36295:[Y0,3,"uvec3"],36296:[Y0,4,"uvec4"],35670:[po,1,"bool"],35671:[po,2,"bvec2"],35672:[po,3,"bvec3"],35673:[po,4,"bvec4"],35674:[po,8,"mat2"],35685:[po,8,"mat2x3"],35686:[po,8,"mat2x4"],35675:[po,12,"mat3"],35687:[po,12,"mat3x2"],35688:[po,12,"mat3x4"],35676:[po,16,"mat4"],35689:[po,16,"mat4x2"],35690:[po,16,"mat4x3"]};function v8(n){const e=_D[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function x8(n,e){switch(n){case vae:case xae:case wae:case Eae:n=po}for(const t in _D){const[i,r,o]=_D[t];if(i===n&&r===e)return{glType:t,name:o}}return null}class Yae{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!fi(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,t,i,r){const{type:o,components:s}=v8(i),a={type:o,size:r*s};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new na(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:o,components:s}=v8(i),c={location:e,name:t,accessor:new na({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Xae=35981,Kae=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class E8 extends Sd{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",Kae),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:o,bufferMode:s=Xae}=e;return this.hash=t||"",this.vs="string"==typeof i?new mD(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new gD(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Xt(this.vs instanceof mD),Xt(this.fs instanceof gD),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(us(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Yae(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:f=null,transformFeedback:m,framebuffer:v,parameters:E={},uniforms:D,samplers:H}=e;if((D||H)&&(dn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(D||{})),dn.priority>=t){const Y=v?v.id:"default",he="mode=".concat(Vu(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(Vu(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(Y);dn.log(t,he)()}return Xt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(f.bindForDraw(r,d,()=>{if(void 0!==v&&(E=Object.assign({},E,{framebuffer:v})),m){const Y=function y8(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Xt(!1),0}}(i);m.begin(Y)}this._bindTextures(),$a(this.gl,E,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&fi(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dn.priority>=2&&function uae(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!hae(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let o=i,s=!1;if(o instanceof io&&(o=o.texture),o instanceof xf)if(s=this.uniforms[t]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[t]=a}else o=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(o)||s)&&fae(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new mD({handle:r});break;case 35632:i.fs=new gD({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=ta(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),dn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),dn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||dn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=dae(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=u8(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=u8(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class X0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new X0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(t),h=this._getHash(i),f=l.map(he=>this._getHash(he.name)).sort(),m=s.map(he=>this._getHash(he)),v=Object.keys(r).sort(),E=Object.keys(o).sort(),D=[],H=[];for(const he of v)D.push(this._getHash(he)),D.push(this._getHash(r[he]));for(const he of E)H.push(this._getHash(he)),H.push(this._getHash(o[he]));const Y="".concat(d,"/").concat(h,"D").concat(D.join("/"),"M").concat(f.join("/"),"I").concat(H.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[Y]){const he=function Qse(n,e){const{vs:t,fs:i}=e,r=Rse(e.modules||[]);return{gl:n,vs:l8(n,Object.assign({},e,{source:t,type:G0,modules:r})),fs:l8(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:eae(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[Y]=new E8(this.gl,{hash:Y,vs:he.vs,fs:he.fs,varyings:s,bufferMode:a}),this._getUniforms[Y]=he.getUniforms||(Ie=>{}),this._useCounts[Y]=0}return this._useCounts[Y]++,this._programCache[Y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;t[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}let H1=null;const G1=globalThis;function A8(n){if(!n&&!vl())return"Node";if(Bj(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":G1.chrome?"Chrome":G1.safari?"Safari":G1.mozInnerScreenX?"Firefox":"Unknown"}class Ea extends Sd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||fi(e)||"Chrome"===A8()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ea(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ea.MAX_ATTRIBUTES=Ea.MAX_ATTRIBUTES||e.getParameter(34921),Ea.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Ea._setConstantFloatArray(e,t,i);break;case Int32Array:Ea._setConstantIntArray(e,t,i);break;case Uint32Array:Ea._setConstantUintArray(e,t,i);break;default:Xt(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ea.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Xt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(Xt(fi(h)),f.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,d||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Ea.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new Xi(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function Jae(n,e){const t=function qae(n){return(!H1||H1.byteLength<n)&&(H1=new ArrayBuffer(n)),H1}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,o);(function Zae(n){let{target:e,source:t,start:i=0,count:r=1}=n;const o=t.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=t[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:Xt(!1)}}static _setConstantIntArray(e,t,i){switch(Xt(fi(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:Xt(!1)}}static _setConstantUintArray(e,t,i){switch(Xt(fi(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:Xt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return Xt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const tce=/^(.+)__LOCATION_([0-9]+)$/,nce=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class ice{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ea(e),uU(this,"VertexArray","v6.0",nce),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,o)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Xi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Xi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Xi&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=t,dn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=na.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:f}=d;return Xt(Number.isFinite(h)&&Number.isFinite(f)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=tce.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Xi)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Xi)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Xi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,t){if(Ea.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Ea.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof Xi){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function K0(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function rce(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let s=0;s<n.length&&s<t;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=K0(n[s],e);const o=n.length>t?"...":"]";return"".concat(r).concat(o)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function S8(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(t&&(o=t.type,s=t.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof Xi){const f=e,{data:m,changed:v}=f.getDebugData();let E;return d=v?"*":"",h=m,c=f.byteLength,a=c/m.BYTES_PER_ELEMENT/s,t?E="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(Vu(r,o),")"):(l=!0,E="".concat(c," bytes")),{[i]:"".concat(d).concat(K0(h,{size:s,isInteger:l})),"Format ":E}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(K0(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function sce(n,e){const{type:t,size:i}=e,r=x8(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function C8(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;Xt(t);const s=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&bD({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&bD({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||bD({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const f={};if(!r)for(const m in i){const v=i[m];c[m]||(h++,f[m]={Type:"NOT USED: ".concat(v),[e]:K0(v)})}return{table:c,count:d,unusedTable:f,unusedCount:h}}function bD(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:o}=n;const s=i[r],a=function ace(n){return null!=n}(s);return!(o&&a||(e[r]={[t]:a?K0(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function M8(n){const{type:e,size:t}=n.accessor,i=x8(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const lce={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function uce(n,e){const{attributeMap:t=lce}=e||{};return t&&t[n]||n}function hce(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Xt(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const T8=()=>{},mce={};class og{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=ta("model")}=t;Xt(S1(e)),this.id=i,this.gl=e,this.id=t.id||ta("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||X0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Xt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Xt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Xt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function dce(n,e,t){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=uce(o,t);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new Xi(n,c),l],hce(o,l)}}if(r){const o=r.value||r;Xt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Xi(n,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(qm(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return WI(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(t),this.setUniforms(r),dn.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:f=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:v=d.isInstanced}=this.props;v&&!this.isInstanced&&dn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:E,instanceCount:D}=this,{onBeforeRender:H=T8,onAfterRender:Y=T8}=this.props;H(),this.program.setUniforms(this.uniforms);const he=this.program.draw(Object.assign(mce,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:f,isInstanced:E,instanceCount:D,offset:h?m:0}));return Y(),dn.priority>=2&&this._logDrawCallEnd(l,c,i),he}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),t&&(o=Object.assign({},o,{35977:t})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Xt(t instanceof E8,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new ice(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Xi&&t.delete()}}_setAnimationProps(e){this.animated&&Xt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(qm(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new qU(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),dn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:dn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const o=function oce(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=S8(e,e.elements,null,t));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(sce(s.name,c))),i[a]=S8(e,r[o],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=C8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=C8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&dn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&dn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function cce(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=M8(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=M8(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);dn.table(e,o)(),dn.table(e,s)(),dn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),dn.groupEnd(2)()}}class yD{static isSupported(e){return fi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();Xt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new og(t,Object.assign({},e,{fs:e.fs||KU({version:JU(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function gce(n){return!(qm(n.feedbackBuffers)&&qm(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new use(e,t)),function _ce(n){return!(qm(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new Sse(e,t)),Xt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}class q0{constructor(e){Se(this,"_inProgress",void 0),Se(this,"_handle",void 0),Se(this,"_timeline",void 0),Se(this,"time",void 0),Se(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Sce={interpolation:class bce{constructor({gl:e,attribute:t,timeline:i}){Se(this,"gl",void 0),Se(this,"type","interpolation"),Se(this,"attributeInTransition",void 0),Se(this,"settings",void 0),Se(this,"attribute",void 0),Se(this,"transition",void 0),Se(this,"currentStartIndices",void 0),Se(this,"currentLength",void 0),Se(this,"transform",void 0),Se(this,"buffers",void 0),this.gl=e,this.transition=new q0(i),this.attribute=t,this.attributeInTransition=new nD(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function vce(n,e){const t=GU(e.size);return new yD(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new Xi(e,r),new Xi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;WU(r);const s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)$U({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=tD(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:HU(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let o=r/t;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class xce{constructor({gl:e,attribute:t,timeline:i}){Se(this,"gl",void 0),Se(this,"type","spring"),Se(this,"attributeInTransition",void 0),Se(this,"settings",void 0),Se(this,"attribute",void 0),Se(this,"transition",void 0),Se(this,"currentStartIndices",void 0),Se(this,"currentLength",void 0),Se(this,"texture",void 0),Se(this,"framebuffer",void 0),Se(this,"transform",void 0),Se(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new q0(i),this.attribute=t,this.attributeInTransition=new nD(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function Ece(n){return new Go(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function Ace(n,e){return new io(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function wce(n,e,t){const i=GU(e.size);return new yD(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Xi(e,r),new Xi(e,r),new Xi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:o}=this,s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)$U({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=tD(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:HU(0,o)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),WU(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),M1(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Cce{constructor(e,{id:t,timeline:i}){Se(this,"id",void 0),Se(this,"isSupported",void 0),Se(this,"gl",void 0),Se(this,"timeline",void 0),Se(this,"transitions",void 0),Se(this,"needsRedraw",void 0),Se(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=yD.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(t);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void yi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=Sce[i.type];s?this.transitions[e]=new s({attribute:t,timeline:this.timeline,gl:this.gl}):(yi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const I8="attributeManager.invalidate";class Oce{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){Se(this,"id",void 0),Se(this,"gl",void 0),Se(this,"attributes",void 0),Se(this,"updateTriggers",void 0),Se(this,"needsRedraw",void 0),Se(this,"userData",void 0),Se(this,"stats",void 0),Se(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new Cce(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);fs(I8,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);fs(I8,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;fs("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=t,o[l]&&yi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:t,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&fs("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in t){const s=t[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new nD(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,t)}),o}_updateAttribute(e){const{attribute:t,numInstances:i}=e;fs("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&fs("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,fs("attribute.updateEnd",t,i)))}}function R8(n,e,t,i,r){const o=e-n;return(t-e)*r+-o*i+o+e}function O8(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const Fce={interpolation:class kce extends q0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=T1(t,i,s)}},spring:class Nce extends q0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function Pce(n,e,t,i,r){if(Array.isArray(t)){const o=[];for(let s=0;s<t.length;s++)o[s]=R8(n[s],e[s],t[s],i,r);return o}return R8(n,e,t,i,r)}(o,s,t,i,r);const c=O8(a,t),l=O8(a,s);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=s,this._currValue=a}}};class Lce{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=zU(r)))return;const s=Fce[r.type];if(!s)return void yi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:t,toValue:i}),o.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const W1=Symbol.for("component"),ag=Symbol.for("asyncPropDefaults"),Af=Symbol.for("asyncPropOriginal"),Hu=Symbol.for("asyncPropResolved");function Uce(n,e){if(!n.transitions)return!1;const t={},i=xD(n);let r=!1;for(const o in n.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&vD(n[o],e[o],s)&&(t[o]=!0,r=!0)}return!!r&&t}function k8({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(n))if(!(o in t)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=vD(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in t)){if(!(o in n))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(n,o)){const s=vD(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function vD(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Hce(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function P8(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},k8({oldProps:r,newProps:i,triggerName:t})}function xD(n){const e=n[W1],t=e&&e.constructor;return t?t._propTypes:{}}function Kce(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function $1(n){let t,e={};return i=>{for(const r in i)if(!Kce(i[r],e[r])){t=n(i),e=i;break}return t}}function qce(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function wD(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],f=e[10],m=e[11],v=e[12],E=e[13],D=e[14],H=e[15],Y=t*a-i*s,he=t*c-r*s,Ie=t*l-o*s,Le=i*c-r*a,$e=i*l-o*a,ot=r*l-o*c,mt=d*E-h*v,pt=d*D-f*v,ft=d*H-m*v,_t=h*D-f*E,xt=h*H-m*E,lt=f*H-m*D,ht=Y*lt-he*xt+Ie*_t+Le*ft-$e*pt+ot*mt;return ht?(n[0]=(a*lt-c*xt+l*_t)*(ht=1/ht),n[1]=(r*xt-i*lt-o*_t)*ht,n[2]=(E*ot-D*$e+H*Le)*ht,n[3]=(f*$e-h*ot-m*Le)*ht,n[4]=(c*ft-s*lt-l*pt)*ht,n[5]=(t*lt-r*ft+o*pt)*ht,n[6]=(D*Ie-v*ot-H*he)*ht,n[7]=(d*ot-f*Ie+m*he)*ht,n[8]=(s*xt-a*ft+l*mt)*ht,n[9]=(i*ft-t*xt-o*mt)*ht,n[10]=(v*$e-E*Ie+H*Y)*ht,n[11]=(h*Ie-d*$e-m*Y)*ht,n[12]=(a*pt-s*_t-c*mt)*ht,n[13]=(t*_t-i*pt+r*mt)*ht,n[14]=(E*he-v*Le-D*Y)*ht,n[15]=(d*Le-h*he+f*Y)*ht,n):null}function Sf(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=e[9],m=e[10],v=e[11],E=e[12],D=e[13],H=e[14],Y=e[15],he=t[0],Ie=t[1],Le=t[2],$e=t[3];return n[0]=he*i+Ie*a+Le*h+$e*E,n[1]=he*r+Ie*c+Le*f+$e*D,n[2]=he*o+Ie*l+Le*m+$e*H,n[3]=he*s+Ie*d+Le*v+$e*Y,n[4]=(he=t[4])*i+(Ie=t[5])*a+(Le=t[6])*h+($e=t[7])*E,n[5]=he*r+Ie*c+Le*f+$e*D,n[6]=he*o+Ie*l+Le*m+$e*H,n[7]=he*s+Ie*d+Le*v+$e*Y,n[8]=(he=t[8])*i+(Ie=t[9])*a+(Le=t[10])*h+($e=t[11])*E,n[9]=he*r+Ie*c+Le*f+$e*D,n[10]=he*o+Ie*l+Le*m+$e*H,n[11]=he*s+Ie*d+Le*v+$e*Y,n[12]=(he=t[12])*i+(Ie=t[13])*a+(Le=t[14])*h+($e=t[15])*E,n[13]=he*r+Ie*c+Le*f+$e*D,n[14]=he*o+Ie*l+Le*m+$e*H,n[15]=he*s+Ie*d+Le*v+$e*Y,n}function Y1(n,e,t){var s,a,c,l,d,h,f,m,v,E,D,H,i=t[0],r=t[1],o=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*o+e[12],n[13]=e[1]*i+e[5]*r+e[9]*o+e[13],n[14]=e[2]*i+e[6]*r+e[10]*o+e[14],n[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],f=e[6],m=e[7],v=e[8],E=e[9],D=e[10],H=e[11],n[0]=s=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=d,n[5]=h,n[6]=f,n[7]=m,n[8]=v,n[9]=E,n[10]=D,n[11]=H,n[12]=s*i+d*r+v*o+e[12],n[13]=a*i+h*r+E*o+e[13],n[14]=c*i+f*r+D*o+e[14],n[15]=l*i+m*r+H*o+e[15]),n}function ED(n,e,t){var i=t[0],r=t[1],o=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,n[11]=e[11]*o,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function N8(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=o*r+l*i,n[5]=s*r+d*i,n[6]=a*r+h*i,n[7]=c*r+f*i,n[8]=l*r-o*i,n[9]=d*r-s*i,n[10]=h*r-a*i,n[11]=f*r-c*i,n}function F8(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r+l*i,n[1]=s*r+d*i,n[2]=a*r+h*i,n[3]=c*r+f*i,n[4]=l*r-o*i,n[5]=d*r-s*i,n[6]=h*r-a*i,n[7]=f*r-c*i,n}function L8(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function J0(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*o+t[12]*s,n[1]=t[1]*i+t[5]*r+t[9]*o+t[13]*s,n[2]=t[2]*i+t[6]*r+t[10]*o+t[14]*s,n[3]=t[3]*i+t[7]*r+t[11]*o+t[15]*s,n}!function ule(){var n=new ia(4);ia!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const B8=[0,0,0,0],Sle=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],j8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Cle=[0,0,0],U8=[0,0,0],Mle=$1(function Dle({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Tle(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:o,viewProjectionMatrix:s}=n,a=B8,c=B8,l=n.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:f}=V8(n,e,t);return f&&(c=n.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=J0([],c,s),o=i||o,s=Sf([],r,o),s=Sf([],s,Sle)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(n,t,i),d=n.getDistanceScales(),h=[n.width*e,n.height*e],f=J0([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,m={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Cle,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:j8,project_uCameraPosition:a};if(l){const v=n.getDistanceScales(l);switch(t){case Ci.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=v.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=v.unitsPerMeter2;break;case Ci.LNGLAT:case Ci.LNGLAT_OFFSETS:n._pseudoMeters||(m.project_uCommonUnitsPerMeter=v.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=v.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=v.unitsPerDegree2;break;case Ci.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,v.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,v.unitsPerMeter2[2]]}}return m});function V8(n,e,t=U8){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,o=!0;switch(r=e===Ci.LNGLAT_OFFSETS||e===Ci.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case xl.WEB_MERCATOR:(e===Ci.LNGLAT||e===Ci.CARTESIAN)&&(r=[0,0,0],o=!1);break;case xl.WEB_MERCATOR_AUTO_OFFSET:e===Ci.LNGLAT?i=r:e===Ci.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case xl.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case xl.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class Rle extends I1{toString(){let e="[";if(Gr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=pi(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function X1(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function z8(n,e){return n[0]=-e[0],n[1]=-e[1],n}function H8(n,e,t,i){var r=e[0],o=e[1];return n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n}!function Ole(){var n=new ia(2);ia!=Float32Array&&(n[0]=0,n[1]=0)}();var G8=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(G8||{});const Ple=45*Math.PI/180,Nle=1,AD=.1,SD=500,Fle=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Gn extends Rle{static get IDENTITY(){return function Ble(){return q1||(q1=new Gn,Object.freeze(q1)),q1}()}static get ZERO(){return function Lle(){return K1||(K1=new Gn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(K1)),K1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return G8}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,o,s,a,c,l,d,h,f,m,v,E,D){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=f,this[12]=m,this[13]=v,this[14]=E,this[15]=D,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l,d,h,f,m,v,E,D){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=t,this[5]=s,this[6]=d,this[7]=v,this[8]=i,this[9]=a,this[10]=h,this[11]=E,this[12]=r,this[13]=c,this[14]=f,this[15]=D,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Fle)}fromObject(e){return this.check()}fromQuaternion(e){return function rle(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,v=r*c,E=o*s,D=o*a,H=o*c;n[0]=1-h-v,n[1]=d+H,n[2]=f-D,n[3]=0,n[4]=d-H,n[5]=1-l-v,n[6]=m+E,n[7]=0,n[8]=f+D,n[9]=m-E,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:o,near:s=AD,far:a=SD}=e;return a===1/0?function jle(n,e,t,i,r,o){const a=2*o/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),f=-2*o;n[0]=2*o/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=f,n[15]=0}(this,t,i,r,o,s):function ole(n,e,t,i,r,o,s){var a=1/(t-e),c=1/(r-i),l=1/(o-s);n[0]=2*o*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*o*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(s+o)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=s*o*2*l,n[15]=0}(this,t,i,r,o,s,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function dle(n,e,t,i){var r,o,s,a,c,l,d,h,f,m,v=e[0],E=e[1],D=e[2],H=i[0],Y=i[1],he=i[2],Ie=t[0],Le=t[1],$e=t[2];Math.abs(v-Ie)<El&&Math.abs(E-Le)<El&&Math.abs(D-$e)<El?function Jce(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(d=v-Ie,h=E-Le,f=D-$e,r=Y*(f*=m=1/Math.hypot(d,h,f))-he*(h*=m),o=he*(d*=m)-H*f,s=H*h-Y*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-f*o,c=f*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=d,n[3]=0,n[4]=o,n[5]=c,n[6]=h,n[7]=0,n[8]=s,n[9]=l,n[10]=f,n[11]=0,n[12]=-(r*v+o*E+s*D),n[13]=-(a*v+c*E+l*D),n[14]=-(d*v+h*E+f*D),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:o,near:s=AD,far:a=SD}=e;return function cle(n,e,t,i,r,o,s){var a=1/(e-t),c=1/(i-r),l=1/(o-s);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(s+o)*l,n[15]=1}(this,t,i,r,o,s,a),this.check()}orthographic(e){const{fovy:t=Ple,aspect:i=Nle,focalDistance:r=1,near:o=AD,far:s=SD}=e;W8(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return W8(t),function sle(n,e,t,i,r){var s,o=1/Math.tan(e/2);n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(s=1/(i-r)),n[14]=2*r*i*s):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,o),this.check()}determinant(){return function Qce(n){var e=n[0],t=n[1],i=n[2],r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8],d=n[9],h=n[10],f=n[11],m=n[12],v=n[13],E=n[14],D=n[15];return(e*s-t*o)*(h*D-f*E)-(e*a-i*o)*(d*D-f*v)+(e*c-r*o)*(d*E-h*v)+(t*a-i*s)*(l*D-f*m)-(t*c-r*s)*(l*E-h*m)+(i*c-r*a)*(l*v-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function Zce(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=o,n[11]=e[14],n[12]=r,n[13]=s,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return wD(this,this),this.check()}multiplyLeft(e){return Sf(this,e,this),this.check()}multiplyRight(e){return Sf(this,this,e),this.check()}rotateX(e){return N8(this,this,e),this.check()}rotateY(e){return function tle(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r-l*i,n[1]=s*r-d*i,n[2]=a*r-h*i,n[3]=c*r-f*i,n[8]=o*i+l*r,n[9]=s*i+d*r,n[10]=a*i+h*r,n[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return F8(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function ele(n,e,t,i){var c,l,d,h,f,m,v,E,D,H,Y,he,Ie,Le,$e,ot,mt,pt,ft,_t,xt,lt,ht,Mt,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<El||(r*=a=1/a,o*=a,s*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],m=e[2],v=e[3],D=e[5],H=e[6],Y=e[7],Ie=e[9],Le=e[10],$e=e[11],ft=r*o*(d=1-l)-s*c,_t=o*o*d+l,xt=s*o*d+r*c,lt=r*s*d+o*c,ht=o*s*d-r*c,Mt=s*s*d+l,n[0]=(h=e[0])*(ot=r*r*d+l)+(E=e[4])*(mt=o*r*d+s*c)+(he=e[8])*(pt=s*r*d-o*c),n[1]=f*ot+D*mt+Ie*pt,n[2]=m*ot+H*mt+Le*pt,n[3]=v*ot+Y*mt+$e*pt,n[4]=h*ft+E*_t+he*xt,n[5]=f*ft+D*_t+Ie*xt,n[6]=m*ft+H*_t+Le*xt,n[7]=v*ft+Y*_t+$e*xt,n[8]=h*lt+E*ht+he*Mt,n[9]=f*lt+D*ht+Ie*Mt,n[10]=m*lt+H*ht+Le*Mt,n[11]=v*lt+Y*ht+$e*Mt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return ED(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Y1(this,this,e),this.check()}transform(e,t){return 4===e.length?(D1(t=J0(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function kle(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=qI(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return D1(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function Hoe(n,e,t){const i=e[0],r=e[1],o=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/o,n[1]=(t[1]*i+t[5]*r)/o,n}(t||[-0,-0],e,this);break;case 3:i=NU(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return D1(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let K1,q1;function W8(n){if(n>2*Math.PI)throw Error("expected radians")}function cg(n,e){const t=J0([],e,n);return L8(t,t,1/t[3]),t}function $8(n,e){const t=n%e;return t<0?e+t:t}function CD(n,e,t){return n<e?e:n>t?t:n}const MD=Math.log2||function Vle(n){return Math.log(n)*Math.LOG2E};function Id(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Dc=Math.PI,Y8=Dc/4,Ya=Dc/180,TD=180/Dc,lg=512,J1=4003e4,Z1=85.051129,zle=1.5;function Q1(n){const[e,t]=n;return Id(Number.isFinite(e)),Id(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[lg*(e*Ya+Dc)/(2*Dc),lg*(Dc+Math.log(Math.tan(Y8+t*Ya*.5)))/(2*Dc)]}function dg(n){const[e,t]=n,i=e/lg*(2*Dc)-Dc,r=2*(Math.atan(Math.exp(t/lg*(2*Dc)-Dc))-Y8);return[i*TD,r*TD]}function ID(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Id(Number.isFinite(e)&&Number.isFinite(t));const r=lg,o=Math.cos(e*Ya),s=r/360,a=s/o,c=r/J1/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=Ya*Math.tan(e*Ya)/o,f=r/J1*d,m=f/a*c;l.unitsPerDegree2=[0,s*d/2,f],l.unitsPerMeter2=[m,0,m]}return l}function X8(n,e){const[t,i,r]=n,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=ID({longitude:t,latitude:i,highPrecision:!0}),d=Q1(n);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=dg(d),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function eE(n){return 2*Math.atan(.5/n)*TD}function DD(n){return.5/Math.tan(.5*n*Ya)}function q8(n,e){const[t,i,r=0]=n;return Id(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),cg(e,[t,i,r,1])}function Z0(n,e,t=0){const[i,r,o]=n;if(Id(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return cg(e,[i,r,o,1]);const s=cg(e,[i,r,0,1]),a=cg(e,[i,r,1,1]),c=s[2],l=a[2];return H8([],s,a,c===l?0:((t||0)-c)/(l-c))}function J8(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=n,[[a,c],[l,d]]=i,h=function $le(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(Id(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),f=Q1([a,CD(d,-Z1,Z1)]),m=Q1([l,CD(c,-Z1,Z1)]),v=[Math.max(Math.abs(m[0]-f[0]),r),Math.max(Math.abs(m[1]-f[1]),r)],E=[e-h.left-h.right-2*Math.abs(s[0]),t-h.top-h.bottom-2*Math.abs(s[1])];Id(E[0]>0&&E[1]>0);const D=E[0]/v[0],H=E[1]/v[1],Le=dg([(m[0]+f[0])/2+(h.right-h.left)/2/D,(m[1]+f[1])/2+(h.top-h.bottom)/2/H]),$e=Math.min(o,MD(Math.abs(Math.min(D,H))));return Id(Number.isFinite($e)),{longitude:Le[0],latitude:Le[1],zoom:$e}}const Z8=Math.PI/180;function Q8(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=cg(i,[e,0,1,1]),o=cg(i,[e,n.height,1,1]),l=dg(H8([],r,o,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(t),l}const qle=Math.PI/180,Jle=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rV=[0,0,0],Zle={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Gu{constructor(e={}){Se(this,"id",void 0),Se(this,"x",void 0),Se(this,"y",void 0),Se(this,"width",void 0),Se(this,"height",void 0),Se(this,"padding",void 0),Se(this,"isGeospatial",void 0),Se(this,"zoom",void 0),Se(this,"focalDistance",void 0),Se(this,"position",void 0),Se(this,"modelMatrix",void 0),Se(this,"distanceScales",void 0),Se(this,"scale",void 0),Se(this,"center",void 0),Se(this,"cameraPosition",void 0),Se(this,"projectionMatrix",void 0),Se(this,"viewMatrix",void 0),Se(this,"viewMatrixUncentered",void 0),Se(this,"viewMatrixInverse",void 0),Se(this,"viewProjectionMatrix",void 0),Se(this,"pixelProjectionMatrix",void 0),Se(this,"pixelUnprojectionMatrix",void 0),Se(this,"resolution",void 0),Se(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Zle,this.focalDistance=e.focalDistance||1,this.position=e.position||rV,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?xl.WEB_MERCATOR:xl.WEB_MERCATOR_AUTO_OFFSET:xl.IDENTITY}equals(e){return e instanceof Gu&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Qm(e.projectionMatrix,this.projectionMatrix)&&Qm(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=q8(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=t?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,o,s]=e,l=Z0([r,t?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,f]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,f]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=Q1(e);return t[1]=Tr(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?dg(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),o=this.unproject([0,this.height],t),s=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?ID({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Koe(n){return{left:eg(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:eg(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:eg(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:eg(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:eg(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:eg(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Gle(n){const{latitude:e}=n;Id(Number.isFinite(e));const t=Math.cos(e*Ya);return function Hle(n){return MD(n)}(J1*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||ID({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=rV;if(o&&(a=s?new Gn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new hs(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=Jle,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Gn).multiplyRight(t).translate(new hs(this.center).negate()),this.projectionMatrix=i||function Qle({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=n/e,l=t?(new Gn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new Gn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:f=0,bottom:m=0}=o,v=Tr((d+n-h)/2,0,n)-n/2,E=Tr((f+e-m)/2,0,e)-e/2;l[8]-=2*v/n,l[9]+=2*E/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*qle,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Sf(h,h,this.projectionMatrix),Sf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=wD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Xoe(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ED(f,f,[this.width/2,-this.height/2,1]),Y1(f,f,[1,-1,0]),Sf(m,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=wD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||yi.warn("Pixel project matrix not invertible")()}}Se(Gu,"displayName","Viewport");const nde=Math.PI/180;function oV(n){return 512/4003e4/Math.cos(n*nde)}class Wu extends Gu{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:m=!1}=e;let{width:v,height:E,altitude:D=1.5}=e;const H=Math.pow(2,r);v=v||1,E=E||1;let Y,he=null;d?(D=d[5]/2,Y=eE(D)):(e.fovy?(Y=e.fovy,D=DD(Y)):Y=eE(D),he=function K8(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:d=eE(zle)}=n;void 0!==i&&(d=eE(i));const h=d*Ya,f=r*Ya,m=DD(d);let v=m;s&&(v+=s[2]*a/Math.cos(f)/t);const E=h*(.5+(o?o[1]:0)/t),D=Math.sin(E)*v/Math.sin(CD(Math.PI/2-f-E,.01,Math.PI-.01)),H=Math.sin(f)*D+v;return{fov:h,aspect:e/t,focalDistance:m,near:c,far:Math.min(H*l,10*v)}}({width:v,height:E,pitch:o,fovy:Y,nearZMultiplier:a,farZMultiplier:c}));let Ie=function Wle(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:o,center:s}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Y1(a,a,[0,0,-r]),N8(a,a,-t*Ya),F8(a,a,i*Ya);const c=o/e;return ED(a,a,[c,c,c]),s&&Y1(a,a,function Poe(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),a}({height:E,pitch:o,bearing:s,scale:H,altitude:D});f&&(Ie=(new Gn).translate([512*f,0,0]).multiplyLeft(Ie)),super({...e,width:v,height:E,viewMatrix:Ie,longitude:i,latitude:t,zoom:r,...he,fovy:Y,focalDistance:D}),Se(this,"longitude",void 0),Se(this,"latitude",void 0),Se(this,"pitch",void 0),Se(this,"bearing",void 0),Se(this,"altitude",void 0),Se(this,"fovy",void 0),Se(this,"orthographic",void 0),Se(this,"_subViewports",void 0),Se(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=D,this.fovy=Y,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const o=r?new Wu({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*oV(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/oV(i)]}addMetersToLngLat(e,t){return X8(e,t)}panByPosition(e,t){const i=Z0(t,this.pixelUnprojectionMatrix),o=X1([],this.projectFlat(e),z8([],i)),s=X1([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const t=function Yle(n,e=0){const{width:t,height:i,unproject:r}=n,o={targetZ:e},s=r([0,i],o),a=r([t,i],o);let c,l;return(n.fovy?.5*n.fovy*Z8:Math.atan(.5/n.altitude))>(90-n.pitch)*Z8-.01?(c=Q8(n,0,e),l=Q8(n,t,e)):(c=r([0,0],o),l=r([t,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=J8({width:i,height:r,bounds:e,...t});return new Wu({width:i,height:r,longitude:o,latitude:s,zoom:a})}}function OD(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof Wu){const[r,o,s=0]=n,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function sV(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=n;switch(t&&([s,a,c]=J0([],[s,a,c,1],t)),i){case Ci.LNGLAT:return OD([s,a,c],e,o);case Ci.LNGLAT_OFFSETS:return OD([s+r[0],a+r[1],c+(r[2]||0)],e,o);case Ci.METER_OFFSETS:return OD(X8(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}Se(Wu,"displayName","WebMercatorViewport");const ode={10241:9987,10240:9729,10242:33071,10243:33071},kD={};function ug(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&ug(i,r)))return!1}return!0}const cde={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||ey(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>PD(n,e)},accessor:{validate(n,e){const t=tE(n);return"function"===t||t===tE(e.value)},equal:(n,e,t)=>"function"==typeof e||PD(n,e)},array:{validate:(n,e)=>e.optional&&!n||ey(n),equal:(n,e,t)=>t.compare?PD(n,e):n===e},object:{equal:(n,e,t)=>t.compare?ug(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function sde(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof Go)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new Go(t,{...e,parameters:{...ode,...i,...n.props.textureParameters}});return kD[r.id]=!0,r}(t,n),release:n=>{!function ade(n){!n||!(n instanceof Go)||kD[n.id]&&(n.delete(),delete kD[n.id])}(n)}}};function PD(n,e){if(n===e)return!0;if(!ey(n)||!ey(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function dde(n,e){switch(tE(e)){case"object":return Q0(n,e);case"array":return Q0(n,{type:"array",value:e,compare:!1});case"boolean":return Q0(n,{type:"boolean",value:e});case"number":return Q0(n,{type:"number",value:e});case"function":return Q0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function Q0(n,e){return"type"in e?{name:n,...cde[e.type],...e}:"value"in e?{name:n,type:tE(e.value),...e}:{name:n,type:"object",value:e}}function ey(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function tE(n){return ey(n)?"array":null===n?"null":typeof n}function aV(n){return nE(n,"_mergedDefaultProps")||(function hde(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=aV(t),o=function lde(n){const e={},t={},i={};for(const[r,o]of Object.entries(n)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=dde(r,o);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(nE(n,"defaultProps")||{}),s=function fde(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function _de(n){const e=nE(n,"layerName")||nE(n,"componentName");return e||yi.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(o.defaultProps,i,n),a={...t._propTypes,...o.propTypes};!function mde(n,e){const t={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(t[s]=a,i[s]=gde(s))}n[ag]=t,n[Af]={},Object.defineProperties(n,i)}(s,a);const c={...t._deprecatedProps,...o.deprecatedProps};(function pde(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const o of e[t])cV(this,o)||(this[o]=i);yi.deprecated(r,e[t].join("/"))()}})})(s,c),n._mergedDefaultProps=s,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function gde(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||UU(e)?this[Af][n]=e:this[Hu][n]=e},get(){if(this[Hu]){if(n in this[Hu])return this[Hu][n]||this[ag][n];if(n in this[Af]){const e=this[W1]&&this[W1].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[ag][n]}}return this[ag][n]}}}function cV(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function nE(n,e){return cV(n,e)&&n[e]}let bde=0;class ND{constructor(...e){Se(this,"id",void 0),Se(this,"props",void 0),Se(this,"count",void 0),this.props=function ude(n,e){const t=aV(n.constructor),i=Object.create(t);i[W1]=n,i[Af]={},i[Hu]={};for(let r=0;r<e.length;++r){const o=e[r];for(const s in o)i[s]=o[s]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=bde++}clone(e){const{props:t}=this,i={};for(const r in t[ag])r in t[Hu]?i[r]=t[Hu][r]:r in t[Af]&&(i[r]=t[Af][r]);return new this.constructor({...t,...i,...e})}}function FD(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new iE(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function iE(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(iE=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new iE(n)}Se(ND,"componentName","Component"),Se(ND,"defaultProps",{});const yde=Object.freeze({});class vde{constructor(e){Se(this,"component",void 0),Se(this,"onAsyncPropUpdated",void 0),Se(this,"asyncProps",void 0),Se(this,"oldProps",void 0),Se(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||yde}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[Hu]||{},i=e[Af]||e,r=e[ag]||{};for(const o in t){const s=t[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),t[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(UU(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(o=>{o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,t){var i=this;return Lt(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var f,h=FD(t);c=!(f=yield h.next()).done;c=!1){const m=f.value;{const{dataTransform:v}=i.component.props;s=v?v(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class xde extends vde{constructor({attributeManager:e,layer:t}){super(t),Se(this,"attributeManager",void 0),Se(this,"needsRedraw",void 0),Se(this,"needsUpdate",void 0),Se(this,"subLayers",void 0),Se(this,"usesPickingColorCache",void 0),Se(this,"changeFlags",void 0),Se(this,"viewport",void 0),Se(this,"uniformTransitions",void 0),Se(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Rc=n=>"function"==typeof n,$u=n=>null!==n&&"object"==typeof n,dV=n=>$u(n)&&n.constructor==={}.constructor,wde=n=>n&&"function"==typeof n[Symbol.iterator],Ede=n=>n&&"function"==typeof n[Symbol.asyncIterator],hg=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,fg=n=>typeof Blob<"u"&&n instanceof Blob,Ade=n=>n&&"object"==typeof n&&n.isBuffer,uV=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||$u(n)&&Rc(n.tee)&&Rc(n.cancel)&&Rc(n.getReader))(n)||(n=>$u(n)&&Rc(n.read)&&Rc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function hV(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function LD(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function BD(n){var e,t;let i;return hV(n,"null loader"),hV(LD(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let jD="";const UD={},Dde=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Rde=/^([-\w.]+\/[-\w.+]+)/;function Ode(n){const e=Rde.exec(n);return e?e[1]:n}function fV(n){const e=Dde.exec(n);return e?e[1]:""}const kde=/\?.*/;function rE(n){if(hg(n)){const e=VD(n.url||"");return{url:e,type:Ode(n.headers.get("content-type")||"")||fV(e)}}return fg(n)?{url:VD(n.name||""),type:n.type||""}:"string"==typeof n?{url:VD(n),type:fV(n)}:{url:"",type:""}}function VD(n){return n.replace(kde,"")}function pV(n){return zD.apply(this,arguments)}function zD(){return zD=Lt(function*(n){if(hg(n))return n;const e={},t=function Pde(n){return hg(n)?n.headers["content-length"]||-1:fg(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=rE(n);r&&(e["content-type"]=r);const o=yield function Lde(n){return WD.apply(this,arguments)}(n);o&&(e["x-first-bytes"]=o),"string"==typeof n&&(n=(new TextEncoder).encode(n));const s=new Response(n,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),zD.apply(this,arguments)}function HD(){return HD=Lt(function*(n){if(!n.ok){const e=yield function Fde(n){return GD.apply(this,arguments)}(n);throw new Error(e)}}),HD.apply(this,arguments)}function GD(){return GD=Lt(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),GD.apply(this,arguments)}function WD(){return WD=Lt(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function Bde(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),WD.apply(this,arguments)}function mV(n,e){return $D.apply(this,arguments)}function $D(){return $D=Lt(function*(n,e){if("string"==typeof n){n=function Ide(n){for(const e in UD)n.startsWith(e)&&(n=n.replace(e,UD[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(jD).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield pV(n)}),$D.apply(this,arguments)}const gV=new k0({id:"loaders.gl"});class jde{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const _V=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),bV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),yV=(bV&&parseFloat(bV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class Ude{constructor(){Se(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:_V,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Vde={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function YD(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const XD=()=>{const n=YD();return n.globalOptions=n.globalOptions||{...yV},n.globalOptions};function zde(n,e,t,i){return t=t||[],function Hde(n,e){xV(n,null,yV,Vde,e);for(const t of e)xV(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function wV(n,e,t){const r={...n.options||{}};return function Wde(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new jde),EV(r,XD()),EV(r,e),r}(e,n,i)}function vV(n,e){const t=XD(),i=n||t;return"function"==typeof i.fetch?i.fetch:$u(i.fetch)?r=>mV(r,i):null!=e&&e.fetch?e?.fetch:mV}function xV(n,e,t,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in n){const c=!e&&$u(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)gV.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Gde(a,r);gV.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function Gde(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(n===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(t.startsWith(s)||s.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function EV(n,e){for(const t in e)t in e&&(n[t]=dV(e[t])&&dV(n[t])?{...n[t],...e[t]}:e[t])}function Sl(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const $de="3.2.13",Cl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Xde=Cl.global||Cl.self||Cl.window||{},Yu="object"!=typeof process||"[object process]"!==String(process)||process.browser,KD="function"==typeof importScripts,Kde=typeof window<"u"&&typeof window.orientation<"u",AV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);AV&&parseFloat(AV[1]);class qD{}const JD=new Map;function SV(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function CV(n,e=!0,t){const i=t||new Set;if(n)if(MV(n))i.add(n);else if(MV(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)CV(n[r],e,i);return void 0===t?Array.from(i):[]}function MV(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const ZD=()=>{};class QD{static isSupported(){return typeof Worker<"u"&&Yu||typeof qD<"u"&&!Yu}constructor(e){Se(this,"name",void 0),Se(this,"source",void 0),Se(this,"url",void 0),Se(this,"terminated",!1),Se(this,"worker",void 0),Se(this,"onMessage",void 0),Se(this,"onError",void 0),Se(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Sl(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=ZD,this.onError=o=>console.log(o),this.worker=Yu?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=ZD,this.onError=ZD,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||CV(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function qde(n){Sl(n.source&&!n.url||!n.source&&n.url);let e=JD.get(n.source||n.url);return e||(n.url&&(e=function Jde(n){if(!n.startsWith("http"))return n;const e=function Zde(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return SV(e)}(n.url),JD.set(n.url,e)),n.source&&(e=SV(n.source),JD.set(n.source,e))),Sl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new qD(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new qD(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class eue{constructor(e,t){Se(this,"name",void 0),Se(this,"workerThread",void 0),Se(this,"isRunning",!0),Se(this,"result",void 0),Se(this,"_resolve",()=>{}),Se(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Sl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Sl(this.isRunning),this.isRunning=!1,this._reject(e)}}class tue{static isSupported(){return QD.isSupported()}constructor(e){Se(this,"name","unnamed"),Se(this,"source",void 0),Se(this,"url",void 0),Se(this,"maxConcurrency",1),Se(this,"maxMobileConcurrency",1),Se(this,"onDebug",()=>{}),Se(this,"reuseWorkers",!0),Se(this,"props",{}),Se(this,"jobQueue",[]),Se(this,"idleQueue",[]),Se(this,"count",0),Se(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,o,s)=>r.done(s)),i=((r,o)=>r.error(o))){var r=this;return Lt(function*(){const o=new Promise(s=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:s}),r));return r._startQueuedJob(),yield o})()}_startQueuedJob(){var e=this;return Lt(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new eue(i.name,t);t.onMessage=o=>i.onMessage(r,o.type,o.payload),t.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new QD({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Kde?this.maxMobileConcurrency:this.maxConcurrency}}const nue={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Dd{static isSupported(){return QD.isSupported()}static getWorkerFarm(e={}){return Dd._workerFarm=Dd._workerFarm||new Dd({}),Dd._workerFarm.setProps(e),Dd._workerFarm}constructor(e){Se(this,"props",void 0),Se(this,"workerPools",new Map),this.props={...nue},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let o=this.workerPools.get(t);return o||(o=new tue({name:t,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Se(Dd,"_workerFarm",void 0);const iue="latest";function e2(){return e2=Lt(function*(n,e,t,i,r){const o=n.id,s=function rue(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let o=n.version;"latest"===o&&(o=iue);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(s,"/dist/").concat(i)}return Sl(r),r}(n,t),c=Dd.getWorkerFarm(t).getWorkerPool({name:o,url:s});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",aue.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),e2.apply(this,arguments)}function aue(n,e,t,i){return t2.apply(this,arguments)}function t2(){return t2=Lt(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield n(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),t2.apply(this,arguments)}function IV(n){return n&&"object"==typeof n&&n.isBuffer}function DV(n){if(IV(n))return function cue(n){return IV(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function r2(){return r2=Lt(function*(n){const e=[];var r,t=!1,i=!1;try{for(var s,o=FD(n);t=!(s=yield o.next()).done;t=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function due(...n){const e=n.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),t=e.reduce((o,s)=>o+s.byteLength,0),i=new Uint8Array(t);let r=0;for(const o of e)i.set(o,r),r+=o.byteLength;return i.buffer}(...e)}),r2.apply(this,arguments)}g(643);const hue=262144,pue=262144;function RV(n,e){this.v=n,this.k=e}function oE(n){return new RV(n,0)}function ty(n){var e,t;function i(o,s){try{var a=n[o](s),c=a.value,l=c instanceof RV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=n[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(o,s))})},"function"!=typeof n.return&&(this.return=void 0)}function s2(n){return function(){return new ty(n.apply(this,arguments))}}ty.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ty.prototype.next=function(n){return this._invoke("next",n)},ty.prototype.throw=function(n){return this._invoke("throw",n)},ty.prototype.return=function(n){return this._invoke("return",n)};const gue=1048576;function a2(){return a2=s2(function*(n,e){const t=e?.chunkSize||gue;let i=0;for(;i<n.size;){const r=i+t,o=yield oE(n.slice(i,r).arrayBuffer());i=r,yield o}}),a2.apply(this,arguments)}function OV(n,e){return _V?function bue(n,e){return c2.apply(this,arguments)}(n,e):function yue(n,e){return l2.apply(this,arguments)}(n,e)}function c2(){return c2=s2(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:o,value:s}=yield oE(r);if(o)return;yield DV(s)}}catch{t.releaseLock()}}),c2.apply(this,arguments)}function l2(){return l2=s2(function*(n,e){var r,t=!1,i=!1;try{for(var s,o=FD(n);t=!(s=yield oE(o.next())).done;t=!1){const a=s.value;yield DV(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield oE(o.return()))}finally{if(i)throw r}}}),l2.apply(this,arguments)}const d2="Cannot convert supplied data type";function u2(){return u2=Lt(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function xue(n,e,t){if(e.text&&"string"==typeof n)return n;if(Ade(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(d2)}(n,e);if(fg(n)&&(n=yield pV(n)),hg(n)){const r=n;return yield function Nde(n){return HD.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(uV(n)&&(n=function vue(n,e){if("string"==typeof n)return function*fue(n,e){const t=e?.chunkSize||hue;let i=0;const r=new TextEncoder;for(;i<n.length;){const o=Math.min(n.length-i,t),s=n.slice(i,i+o);i+=o,yield r.encode(s)}}(n,e);if(n instanceof ArrayBuffer)return function*mue(n,e={}){const{chunkSize:t=pue}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),o=new ArrayBuffer(r),s=new Uint8Array(n,i,r);new Uint8Array(o).set(s),i+=r,yield o}}(n,e);if(fg(n))return function _ue(n,e){return a2.apply(this,arguments)}(n,e);if(uV(n))return OV(n,e);if(hg(n))return OV(n.body,e);throw new Error("makeIterator")}(n,t)),wde(n)||Ede(n))return function uue(n){return r2.apply(this,arguments)}(n);throw new Error(d2)}),u2.apply(this,arguments)}const Mue=new k0({id:"loaders.gl"}),kV=()=>{const n=YD();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function PV(n){const e=kV();n=Array.isArray(n)?n:[n];for(const t of n){const i=BD(t);e.find(r=>i===r)||e.unshift(i)}}const Iue=/\.([^.]+)$/;function p2(){return p2=Lt(function*(n,e=[],t,i){if(!FV(n))return null;let r=NV(n,e,{...t,nothrow:!0},i);if(r)return r;if(fg(n)&&(r=NV(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(LV(n));return r}),p2.apply(this,arguments)}function NV(n,e=[],t,i){if(!FV(n))return null;if(e&&!Array.isArray(e))return BD(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function Tue(){return kV()}()),function Oue(n){for(const e of n)BD(e)}(r);const o=function Rue(n,e,t,i){const{url:r,type:o}=rE(n),s=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=m2(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function kue(n,e){const t=e&&Iue.exec(e),i=t&&t[1];return i?function Pue(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||m2(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function Nue(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(Fue(e,t))return t}else if(ArrayBuffer.isView(e)){if(BV(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&BV(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(jV(n)):""),a=a||m2(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&Mue.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(o||null!=t&&t.nothrow))throw new Error(LV(n));return o}function FV(n){return!(n instanceof Response&&204===n.status)}function LV(n){const{url:e,type:t}=rE(n);let i="No valid loader found (";i+=e?"".concat(function Cue(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?jV(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function m2(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function Fue(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function BV(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function Lue(n,e,t,i){if(i instanceof ArrayBuffer)return function lue(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===g2(n,e,i.length);default:return!1}}(n,e,t,r))}function jV(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?g2(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?g2(n,0,e):""}function g2(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function sE(n,e,t,i){return _2.apply(this,arguments)}function _2(){return _2=Lt(function*(n,e,t,i){Sl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!LD(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=rE(n),s=function Sue(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function Due(n){return p2.apply(this,arguments)}(n,s,t);return a?(i=function Aue(n,e,t=null){if(t)return t;const i={fetch:vV(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:sE,loaders:s},t=zde(t,a,s,r),i),yield function Bue(n,e,t,i){return b2.apply(this,arguments)}(a,n,t,i)):null}),_2.apply(this,arguments)}function b2(){return b2=Lt(function*(n,e,t,i){if(function Yde(n,e=$de){Sl(n,"no worker provided")}(n),hg(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function wue(n,e,t){return u2.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function oue(n,e){return!(!Dd.isSupported()||!(Yu||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function sue(n,e,t,i,r){return e2.apply(this,arguments)}(n,e,t,i,sE);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Sl(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),b2.apply(this,arguments)}function ny(n,e,t,i){return y2.apply(this,arguments)}function y2(){return y2=Lt(function*(n,e,t,i){!Array.isArray(e)&&!LD(e)&&(t=e,e=void 0);const r=vV(t);let o=n;return"string"==typeof n&&(o=yield r(n)),fg(n)&&(o=yield r(n)),yield sE(o,e,t)}),y2.apply(this,arguments)}const Gue=Object.freeze([]),Wue=$1(({oldViewport:n,viewport:e})=>n.equals(e));let Ml=new Uint8ClampedArray(0);const $ue={data:{type:"data",value:Gue,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(n);return!c&&!r&&(s.add({resourceId:n,data:ny(n,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:n,onChange:l=>{var d;return null===(d=t.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):ny(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ci.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Cf extends ND{constructor(...e){super(...e),Se(this,"internalState",null),Se(this,"lifecycle","Awaiting state"),Se(this,"context",void 0),Se(this,"state",void 0),Se(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Wo(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=sV(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=q8(i,t.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return Wo(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return Wo(this.internalState),function rde(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function ide(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=n;return r===Ci.DEFAULT&&(r=e.isGeospatial?Ci.LNGLAT:Ci.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:d}=V8(t,i,r),h=sV(n,{viewport:t,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});d&&function koe(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ci.DEFAULT||e===Ci.LNGLAT||e===Ci.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){Wo(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function $ce(n){if(!function Xce(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function Yce(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=qce(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(s!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,d=c||l;d&&(a&&d.constant&&(d.constant=!1,t.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,o,s;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!Wue({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(Ml.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>16777215&&yi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ml=V0.allocate(Ml,t,{size:3,copy:!0,maxCount:Math.max(t,16777215)});const r=Math.floor(Ml.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),Ml[3*s+0]=o[0],Ml[3*s+1]=o[1],Ml[3*s+2]=o[2]}e.value=Ml.subarray(0,3*t)}_setModelAttributes(e,t){const o=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Ml.buffer&&(i.value=Ml.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Wo(!this.internalState),Wo(Number.isFinite(this.props.coordinateSystem)),fs("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new xde({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(yi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Lce(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){fs("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(fs("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){fs("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];Ad(o.gl,{polygonOffset:c}),$a(o.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=t[r];s&&Array.isArray(a)&&(t.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}t[r]||(t[r]=e[r],o=!0),o&&fs("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function jce(n,e){const t=k8({newProps:n,oldProps:e,propTypes:xD(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Vce(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function zce(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&P8(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&P8(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Hce(n,e),transitionsChanged:Uce(n,e)}}(e,t);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,t[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function Bce(n){const e=xD(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Oce(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Se(Cf,"defaultProps",$ue),Se(Cf,"layerName","Layer");class v2 extends Cf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:v,modelMatrix:E,extensions:D,fetch:H,operation:Y,_subLayerProps:he}=this.props,Ie={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:v,modelMatrix:E,extensions:D,fetch:H,operation:Y},Le=he&&e.id&&he[e.id],$e=Le&&Le.updateTriggers,ot=e.id||"sublayer";if(Le){const mt=this.constructor._propTypes,pt=e.type?e.type._propTypes:{};for(const ft in Le){const _t=pt[ft]||mt[ft];_t&&"accessor"===_t.type&&(Le[ft]=this.getSubLayerAccessor(Le[ft]))}}Object.assign(Ie,e,Le),Ie.id="".concat(this.props.id,"-").concat(ot),Ie.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...$e};for(const mt of D){const pt=mt.getSubLayerProps.call(this,mt);pt&&Object.assign(Ie,pt,{updateTriggers:Object.assign(Ie.updateTriggers,pt.updateTriggers)})}return Ie}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=QI(this.renderLayers(),Boolean),this.internalState.subLayers=i),fs("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}Se(v2,"layerName","CompositeLayer");const Xue=/([0-9]+\.?[0-9]*)(%|px)/;function Xu(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=Xue.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function Ku(n,e){return n.relative?Math.round(n.position*e):n.position}class x2{constructor(e){Se(this,"id",void 0),Se(this,"viewportInstance",void 0),Se(this,"_x",void 0),Se(this,"_y",void 0),Se(this,"_width",void 0),Se(this,"_height",void 0),Se(this,"_padding",void 0),Se(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};Wo(!c||c instanceof Gu),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Xu(i),this._y=Xu(r),this._width=Xu(o),this._height=Xu(s),this._padding=a&&{left:Xu(a.left||0),right:Xu(a.right||0),top:Xu(a.top||0),bottom:Xu(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&ug(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:Ku(this._x,e),y:Ku(this._y,t),width:Ku(this._width,e),height:Ku(this._height,t)};return this._padding&&(i.padding={left:Ku(this._padding.left,e),top:Ku(this._padding.top,t),right:Ku(this._padding.right,e),bottom:Ku(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Kue=(new Gn).lookAt({eye:[0,0,1]});function que({width:n,height:e,near:t,far:i,padding:r}){let o=-n/2,s=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:f=0}=r,m=Tr((l+n-d)/2,0,n)-n/2,v=Tr((h+e-f)/2,0,e)-e/2;o-=m,s-=m,a+=v,c+=v}return(new Gn).ortho({left:o,right:s,bottom:a,top:c,near:t,far:i})}class Jue extends Gu{constructor(e){const{width:t,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,f=Math.min(d,h),m=Math.pow(2,f);let v;if(d!==h){const E=Math.pow(2,d),D=Math.pow(2,h);v={unitsPerMeter:[E/m,D/m,1],metersPerUnit:[m/E,m/D,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Kue.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:que({width:t||1,height:i||1,padding:c,near:r,far:o}),zoom:f,distanceScales:v})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=Z0(t,this.pixelUnprojectionMatrix),o=X1([],this.projectFlat(e),z8([],i)),s=X1([],this.center,o);return{target:this.unprojectFlat(s)}}}const VV=()=>{},Zue=n=>n;class ehe{constructor(e){Se(this,"getControllerState",void 0),Se(this,"props",void 0),Se(this,"propsInTransition",void 0),Se(this,"transition",void 0),Se(this,"onViewStateChange",void 0),Se(this,"onStateChange",void 0),Se(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=t,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new q0(e.timeline),this.onViewStateChange=e.onViewStateChange||VV,this.onStateChange=e.onStateChange||VV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),o=t.transitionInterpolator,s=o.getDuration?o.getDuration(e,t):t.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:t.transitionEasing||Zue,interpolator:o,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class the{constructor(e){Se(this,"_propsToCompare",void 0),Se(this,"_propsToExtract",void 0),Se(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!Qm(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const o of this._propsToExtract)(o in e||o in t)&&(i[o]=e[o],r[o]=t[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];Wo(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const nhe=["longitude","latitude","zoom","bearing","pitch"],ihe=["longitude","latitude","zoom"];class aE extends the{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:nhe,required:ihe},super(i.transitionProps),Se(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(t),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const o of this._propsToExtract)r[o]=T1(e[o]||0,t[o]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...t,...r});Object.assign(r,o.panByPosition(t.aroundPosition,T1(e.around,t.around,i)))}return r}}const qu={transitionDuration:0},cE=n=>1-(1-n)*(1-n),pg_WHEEL=["wheel"],pg_PAN=["panstart","panmove","panend"],pg_PINCH=["pinchstart","pinchmove","pinchend"],pg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],pg_DOUBLE_TAP=["doubletap"],pg_KEYBOARD=["keydown"],Mf={};class E2{constructor(e){Se(this,"props",void 0),Se(this,"state",{}),Se(this,"transitionManager",void 0),Se(this,"eventManager",void 0),Se(this,"onViewStateChange",void 0),Se(this,"onStateChange",void 0),Se(this,"makeViewport",void 0),Se(this,"_controllerState",void 0),Se(this,"_events",{}),Se(this,"_interactionState",{isDragging:!1}),Se(this,"_customEvents",[]),Se(this,"_eventStartBlocked",null),Se(this,"_panMove",!1),Se(this,"invertPan",!1),Se(this,"dragMode","rotate"),Se(this,"inertia",0),Se(this,"scrollZoom",!0),Se(this,"dragPan",!0),Se(this,"dragRotate",!0),Se(this,"doubleClickZoom",!0),Se(this,"touchZoom",!0),Se(this,"touchRotate",!1),Se(this,"keyboard",!0),this.transitionManager=new ehe({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&t&&t.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(pg_WHEEL,d&&i),this.toggleEvents(pg_PAN,d&&(r||o)),this.toggleEvents(pg_PINCH,d&&(a||c)),this.toggleEvents(pg_TRIPLE_PAN,d&&c),this.toggleEvents(pg_DOUBLE_TAP,d&&s),this.toggleEvents(pg_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,qu,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,qu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:cE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,qu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:cE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:t,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,qu,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,qu,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:cE},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Mf._startPinchRotation=e.rotation,Mf._lastPinchEvent=e,this.updateViewport(i,qu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:Mf._startPinchRotation-i})}return this.updateViewport(t,qu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Mf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=Mf;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*t/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:cE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Mf._startPinchRotation=null,Mf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new aE({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:qu}}class zV{constructor(e,t){Se(this,"_viewportProps",void 0),Se(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class HV extends zV{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:m,startRotationX:v,startRotationOrbit:E,startZoomPosition:D,startZoom:H}=e;super({width:t,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:f,startRotatePos:m,startRotationX:v,startRotationOrbit:E,startZoomPosition:D,startZoom:H}),Se(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),Tr(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Tr(r[0],i,t),Tr(r[1],i,t)]:Tr(r,i,t),e.rotationX=Tr(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function Yoe(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class ohe extends E2{constructor(...e){super(...e),Se(this,"ControllerState",HV),Se(this,"transition",{transitionDuration:300,transitionInterpolator:new aE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class she extends HV{constructor(e){super(e),Se(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(t)){let[s,a]=t;switch(this.zoomAxis){case"X":s=Tr(s+o,r,i);break;case"Y":a=Tr(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return Tr(t+o,r,i)}}class ahe extends E2{constructor(...e){super(...e),Se(this,"ControllerState",she),Se(this,"transition",{transitionDuration:300,transitionInterpolator:new aE(["target","zoom"])}),Se(this,"dragMode","pan")}_onPanRotate(){return!1}}class A2 extends x2{get ViewportType(){return Jue}get ControllerType(){return ahe}}Se(A2,"displayName","OrthographicView");const S2=Math.PI/180;function che({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new Gn).lookAt({eye:a,up:s});c.rotateX(i*S2),"Z"===t?c.rotateZ(r*S2):c.rotateY(r*S2);const l=Math.pow(2,o)/n;return c.scale(l),c}class lhe extends Gu{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:DD(r);super({...e,longitude:void 0,viewMatrix:che({height:t||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),Se(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=t?r:this.height-r,[a,c,l]=Z0([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class GV extends x2{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return lhe}get ControllerType(){return ohe}}Se(GV,"displayName","OrbitView");const dhe=[255,255,255],uhe=1;let hhe=0;class WV{constructor(e={}){Se(this,"id",void 0),Se(this,"color",void 0),Se(this,"intensity",void 0),Se(this,"type","ambient");const{color:t=dhe}=e,{intensity:i=uhe}=e;this.id=e.id||"ambient-".concat(hhe++),this.color=t,this.intensity=i}}const fhe=[255,255,255],phe=1,mhe=[0,0,-1];let ghe=0;class $V{constructor(e={}){Se(this,"id",void 0),Se(this,"color",void 0),Se(this,"intensity",void 0),Se(this,"type","directional"),Se(this,"direction",void 0),Se(this,"shadow",void 0);const{color:t=fhe}=e,{intensity:i=phe}=e,{direction:r=mhe}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(ghe++),this.color=t,this.intensity=i,this.type="directional",this.direction=new hs(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class _he{constructor(e,t={id:"pass"}){Se(this,"id",void 0),Se(this,"gl",void 0),Se(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class lE extends _he{constructor(...e){super(...e),Se(this,"_lastRenderIndex",-1)}render(e){return Ad(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function yhe(n){Ad(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const f=o&&o[h.id];s(h);const m=this._getDrawLayerParams(h,e),v=h.subViewports||[h];for(const E of v){const D=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:E,view:f,pass:e.pass,layers:e.layers},m);d.push(D)}}return d}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:o,effects:s,moduleParameters:a}){const c=[],l=YV(this._lastRenderIndex+1),d={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:o},h={};for(let f=0;f<t.length;f++){const m=t[f],v=this._shouldDrawLayer(m,d,r,h),E={shouldDrawLayer:v};v&&(E.layerRenderIndex=l(m,v),E.moduleParameters=this._getModuleParameters(m,s,i,a),E.layerParameters=this.getLayerParameters(m,f,e)),c[f]=E}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function bhe(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,o=e&&e.devicePixelRatio||Km(n);return[i.x*o,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;$a(e,{scissorTest:!0,scissor:l},()=>WI(e,h))}const d={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Ad(e,{viewport:l});for(let h=0;h<t.length;h++){const f=t[h],{shouldDrawLayer:m,layerRenderIndex:v,moduleParameters:E,layerParameters:D}=c[h];if(m&&f.props.pickable&&d.pickableCount++,f.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,v),E.viewport=s;try{f._drawLayer({moduleParameters:E,uniforms:{layerIndex:v},parameters:D})}catch(H){f.raiseError(H,"drawing ".concat(f," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Km(this.gl)});if(t)for(const c of t){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,t),r)}}function YV(n=0,e={}){const t={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const d=t[c]=t[c]||YV(e[c],e);l=d(r,o),t[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),t[a]=null):l=n;return o&&l>=n&&(n=l+1),e[a]=l,l};return i}class vhe extends lE{constructor(e,t){super(e,t),Se(this,"shadowMap",void 0),Se(this,"depthBuffer",void 0),Se(this,"fbo",void 0),this.shadowMap=new Go(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Zm(e,{format:33189,width:1,height:1}),this.fbo=new io(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;$a(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Km(this.gl),o=i.width*r,s=i.height*r;(o!==t.width||s!==t.height)&&t.resize({width:o,height:s}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const XV="#define SMOOTH_EDGE_RADIUS 0.5",Ahe={name:"geometry",vs:"\n".concat(XV,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(XV,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},She=Object.keys(Ci).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Ci[n],";")).join(""),Che=Object.keys(xl).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(xl[n],";")).join(""),Mhe=Object.keys(A1).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(A1[n],";")).join(""),The="".concat(She,"\n").concat(Che,"\n").concat(Mhe,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),Ihe={},C2={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Ahe],vs:The,getUniforms:function Dhe(n=Ihe){return"viewport"in n?function Ile({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=Ci.DEFAULT,coordinateOrigin:r=U8,autoWrapLongitude:o=!1}){i===Ci.DEFAULT&&(i=n.isGeospatial?Ci.LNGLAT:Ci.CARTESIAN);const s=Mle({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=t||j8,s}(n):{}}},khe=$1(function Bhe({viewport:n,center:e}){return new Gn(n.viewProjectionMatrix).invert().transform(e)}),Phe=$1(function jhe({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,o=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(s=>function Lhe(n,e){const[t,i,r]=n,o=Z0([t,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new hs(n.center).negate()),c=o.map(d=>a.transform(d)),l=(new Gn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});t.push(l.multiplyRight(s))}return t}),Nhe=[0,0,0,1],Fhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],M2={name:"shadow",dependencies:[C2],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function Uhe(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||Nhe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=khe({viewport:n.viewport,center:e.project_uCenter}),o=[],s=Phe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new hs(n.viewport.center).negate());e.project_uCoordinateSystem===Ci.LNGLAT&&e.project_uProjectionMode===xl.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(Fhe),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},Vhe={color:[255,255,255],intensity:1},KV=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],zhe=[0,0,0,200/255];class T2{constructor(e={}){Se(this,"id","lighting-effect"),Se(this,"props",null),Se(this,"shadowColor",zhe),Se(this,"shadow",void 0),Se(this,"ambientLight",null),Se(this,"directionalLights",[]),Se(this,"pointLights",[]),Se(this,"shadowPasses",[]),Se(this,"shadowMaps",[]),Se(this,"dummyShadowMap",null),Se(this,"programManager",void 0),Se(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=X0.getDefaultProgramManager(e),M2&&this.programManager.addDefaultModule(M2)),this.dummyShadowMap||(this.dummyShadowMap=new Go(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(M2),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new Gn).lookAt({eye:new hs(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new vhe(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new WV(Vhe),this.directionalLights.push(new $V(KV[0]),new $V(KV[1])))}}let Hhe=1,Ghe=1;class qV{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=Hhe++,a={time:0,delay:t,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Ghe++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Whe{constructor(e,t,i){Se(this,"id",void 0),Se(this,"context",void 0),Se(this,"isLoaded",void 0),Se(this,"persistent",void 0),Se(this,"_loadCount",0),Se(this,"_subscribers",new Set),Se(this,"_data",void 0),Se(this,"_loader",void 0),Se(this,"_error",void 0),Se(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=ny(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class $he{constructor({gl:e,protocol:t}){Se(this,"protocol",void 0),Se(this,"_context",void 0),Se(this,"_resources",void 0),Se(this,"_consumers",void 0),Se(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(t,i):(o=new Whe(e,t,this._context),this._resources[e]=o),o.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Yhe=[C2],Xhe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Khe(n){const e=X0.getDefaultProgramManager(n);for(const t of Yhe)e.addDefaultModule(t);for(const t of Xhe)e.addShaderHook(t);return e}class Zhe{constructor(e,{deck:t,stats:i,viewport:r,timeline:o}={}){Se(this,"layers",void 0),Se(this,"context",void 0),Se(this,"resourceManager",void 0),Se(this,"_lastRenderedLayers",[]),Se(this,"_needsRedraw",!1),Se(this,"_needsUpdate",!1),Se(this,"_nextLayers",null),Se(this,"_debug",!1),Se(this,"activateViewport",s=>{fs("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new $he({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&Khe(e),stats:i||new BI({id:"deck.gl"}),viewport:r||new Gu({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new qV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){fs("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=QI(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const s of e)i[s.id]?yi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const o=t[r.id];null===o&&yi.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class Qhe{constructor(e){Se(this,"width",void 0),Se(this,"height",void 0),Se(this,"views",void 0),Se(this,"viewState",void 0),Se(this,"controllers",void 0),Se(this,"timeline",void 0),Se(this,"_viewports",void 0),Se(this,"_viewportMap",void 0),Se(this,"_isUpdating",void 0),Se(this,"_needsRedraw",void 0),Se(this,"_needsUpdate",void 0),Se(this,"_eventManager",void 0),Se(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=QI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!ug(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):yi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const o=e.controller;if(o){const s={...t,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=t[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),this._viewports.unshift(a)}for(const r in t){const o=t[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class tfe extends zV{constructor(e){const{width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:m=60,minPitch:v=0,startPanLngLat:E,startZoomLngLat:D,startRotatePos:H,startBearing:Y,startPitch:he,startZoom:Ie,normalize:Le=!0}=e;Wo(Number.isFinite(o)),Wo(Number.isFinite(r)),Wo(Number.isFinite(s)),super({width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:m,minPitch:v,normalize:Le,position:d},{startPanLngLat:E,startZoomLngLat:D,startRotatePos:H,startBearing:Y,startPitch:he,startZoom:Ie}),Se(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+t,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Tr(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-t.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Tr(r,i,t);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=Tr(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function Xle(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=n;(r<-180||r>180)&&(r=$8(r+180,360)-180),(a<-180||a>180)&&(a=$8(a+180,360)-180);const c=MD(t/512);if(s<=c)s=c,o=0;else{const l=t/2/Math.pow(2,s),d=dg([0,l])[1];if(o<d)o=d;else{const h=dg([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:t,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const o=e[0]-t[0],s=e[1]-t[1],a=e[1],c=t[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let f=0;s>0?Math.abs(d-c)>5&&(f=s/(c-d)*1.2):s<0&&c>5&&(f=1-a/c),f=Tr(f,-1,1);const{minPitch:m,maxPitch:v}=this.getViewportProps();let D=i;return f>0?D=i+f*(v-i):f<0&&(D=i-f*(m-i)),{pitch:D,bearing:r+180*h}}}class nfe extends E2{constructor(...e){super(...e),Se(this,"ControllerState",tfe),Se(this,"transition",{transitionDuration:300,transitionInterpolator:new aE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),Se(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class ZV extends x2{get ViewportType(){return Wu}get ControllerType(){return nfe}}Se(ZV,"displayName","MapView");class ife extends lE{constructor(e,t){super(e,t),Se(this,"maskMap",void 0),Se(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new Go(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new io(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,$a(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class afe{constructor(){Se(this,"id","mask-effect"),Se(this,"props",null),Se(this,"useInPicking",!0),Se(this,"dummyMaskMap",void 0),Se(this,"channels",[]),Se(this,"masks",null),Se(this,"maskPass",void 0),Se(this,"maskMap",void 0),Se(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Go(e,{width:1,height:1}));const a=t.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new ife(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],d=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:o,views:s,viewport:l,viewportChanged:d})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:o,viewportChanged:s}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,d)=>l!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||s)&&(this.lastViewport=o,e.bounds=function rfe({layers:n,viewport:e}){let t=null;for(const o of n){const s=o.getBounds();s&&(t?(t[0]=Math.min(t[0],s[0][0]),t[1]=Math.min(t[1],s[0][1]),t[2]=Math.max(t[2],s[1][0]),t[3]=Math.max(t[3],s[1][1])):t=[s[0][0],s[0][1],s[1][0],s[1][1]])}const i=e.getBounds();if(!t)return i;const r=function sfe(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:o}),c||!Qm(e.bounds,a.bounds))){const{maskPass:l,maskMap:d}=this,h=function ofe({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof Wu){const{longitude:a,latitude:c,zoom:l}=J8({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new Wu({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const o=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],s=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new A2({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:o,zoom:Math.log2(s)}})}({bounds:e.bounds,viewport:o,width:d.width,height:d.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:o}=r.root;let s=t[o];if(!s){if(++i>4){yi.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>a?.id===o),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[o]=s}s.layers.push(r),s.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const o=this.channels[r];(!o||!(o.id in t))&&(this.channels[r]=null)}for(const r in t){const o=t[r];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const cfe=new T2;class lfe{constructor(){Se(this,"effects",void 0),Se(this,"_internalEffects",void 0),Se(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!ug(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new afe),e.some(t=>t instanceof T2)||this._internalEffects.push(cfe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class dfe extends lE{shouldDrawLayer(e){return"draw"===e.props.operation}}const QV={blendFunc:[1,0,32771,0],blendEquation:32774};class e5 extends lE{constructor(...e){super(...e),Se(this,"pickZ",void 0),Se(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:f,pass:m="picking",pickZ:v}){const E=this.gl;this.pickZ=v;const D=v?null:{byLayer:new Map,byAlpha:[]};this._colors=D;const H=$a(E,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...QV,blend:!v},()=>super.render({target:s,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:f?.filter(he=>he.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:D&&hfe.bind(null,D),stats:H}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,QV),r.blend=!0,r.blendColor=function ufe(n,e,t){const{byLayer:i,byAlpha:r}=n;let o,s=i.get(e);return s?(s.viewports.push(t),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[t]},i.set(e,s),r[o]=s):(yi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colors,e,i)):r.blend=!1,r}}function hfe(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class pfe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new dfe(e),this.pickLayersPass=new e5(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||io.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,fs("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new io(this.gl),new io(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o===this.lastPostProcessEffect){r.target=t.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const mfe={pickedColor:null,pickedObjectIndex:-1};function gfe({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,f=0;for(let m=0;m<l;m++){const v=m+a-i,E=v*v;if(E>d)f+=4*c;else for(let D=0;D<c;D++){if(n[f+3]-1>=0){const Y=D+s-t,he=Y*Y+E;he<=d&&(d=he,h=f)}f+=4}}if(h>=0){const m=n.slice(h,h+4),v=e(m);if(v){const E=Math.floor(h/4/c),D=h/4-E*c;return{...v,pickedColor:m,pickedX:s+D,pickedY:a+E}}yi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return mfe}function t5({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function yfe(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function bfe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const f=t.layerId,m=s?s.props.id:null;if(m!==f||a!==t.index){if(m!==f){const v=r.find(E=>E.props.id===f);v&&c.unshift(v)}t.layerId=m,t.index=a,t.info=null}}const l=t5(n),d=new Map;return d.set(null,l),c.forEach(h=>{let f={...l};h===s&&(f.color=o,f.index=a,f.picked=!0),f=n5({layer:h,info:f,mode:i});const m=f.layer;h===s&&"hover"===i&&(t.info=f),d.set(m.id,f),"hover"===i&&m.updateAutoHighlight(f)}),d}function n5({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class vfe{constructor(e){Se(this,"gl",void 0),Se(this,"pickingFBO",void 0),Se(this,"depthFBO",void 0),Se(this,"pickLayersPass",void 0),Se(this,"layerFilter",void 0),Se(this,"lastPickedInfo",void 0),Se(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new e5(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(f=>f.id===s):null,l=a&&r.find(f=>f.id===a)||r[0],d=l&&l.unproject([e-l.x,t-l.y]);return{...o,x:e,y:t,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new io(i),io.isSupported(i,{colorBufferFloat:!0}))){const r=new io(i);r.attach({36064:new Go(i,{format:fi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const f=this._getPickable(e),m=Km(this.gl);if(!f)return{result:[],emptyInfo:t5({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const v=NI(this.gl,[r,o],!0),E=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],D=Math.round(s*m),{width:H,height:Y}=this.pickingFBO,he=this._getPickingRect({deviceX:E[0],deviceY:E[1],deviceRadius:D,deviceWidth:H,deviceHeight:Y}),Ie={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let Le;const $e=[],ot=new Set;for(let mt=0;mt<a;mt++){let pt,ft;pt=he?gfe({...this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:he,cullRect:Ie,effects:h,pass:"picking:".concat(c)}),deviceX:E[0],deviceY:E[1],deviceRadius:D,deviceRect:he}):{pickedColor:null,pickedObjectIndex:-1},pt.pickedLayer&&l&&this.depthFBO&&(ft=this._drawAndSample({layers:[pt.pickedLayer],views:t,viewports:i,onViewportActive:d,deviceRect:{x:pt.pickedX,y:pt.pickedY,width:1,height:1},cullRect:Ie,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),pt.pickedLayer&&mt+1<a&&(ot.add(pt.pickedLayer),pt.pickedLayer.disablePickingIndex(pt.pickedObjectIndex)),Le=bfe({pickInfo:pt,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:o,z:ft,pixelRatio:m});for(const _t of Le.values())_t.layer&&$e.push(_t);if(!pt.pickedColor)break}for(const mt of ot)mt.restorePickingColors();return{result:$e,emptyInfo:Le.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const m=Km(this.gl),v=NI(this.gl,[r,o],!0),E=v.x,D=v.y+v.height,H=NI(this.gl,[r+s,o+a],!0),he=H.y,$e=function _fe({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const o=n.slice(i,i+4),s=o.join(",");if(!t.has(s)){const a=e(o);a?t.set(s,{...a,color:o}):yi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:{x:E,y:he,width:H.x+H.width-E,height:D-he},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),ot=new Map,mt=Number.isFinite(l);for(let pt=0;pt<$e.length&&!(mt&&l&&ot.size>=l);pt++){const ft=$e[pt];let _t={color:ft.pickedColor,layer:null,index:ft.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};_t=n5({layer:ft.pickedLayer,info:_t,mode:c}),ot.has(_t.object)||ot.set(_t.object,_t)}return Array.from(ot.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l}),{x:f,y:m,width:v,height:E}=o,D=new(l?Float32Array:Uint8Array)(v*E*4);return M1(d,{sourceX:f,sourceY:m,sourceWidth:v,sourceHeight:E,target:D}),{pickedColors:D,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,t+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const xfe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class wfe{constructor(e){Se(this,"el",null),Se(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,xfe),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function r5(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Afe=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),o5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Sfe}=(o5&&parseFloat(o5[1]),globalThis),I2=typeof Image<"u",D2=typeof ImageBitmap<"u",R2=!!Afe||!!Sfe;function s5(n){const e=function c5(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Tfe=/^data:image\/svg\+xml/,Ife=/\.svg((\?|#).*)?$/;function O2(n){return n&&(Tfe.test(n)||Ife.test(n))}function l5(n,e){if(O2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function d5(n,e,t){return k2.apply(this,arguments)}function k2(){return k2=Lt(function*(n,e,t){const i=function Dfe(n,e){if(O2(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return l5(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Rfe(n,e){return P2.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),k2.apply(this,arguments)}function P2(){return P2=Lt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),P2.apply(this,arguments)}const Ofe={};let u5=!0;function N2(){return N2=Lt(function*(n,e,t){let i;i=O2(t)?yield d5(n,e,t):l5(n,t);const r=e&&e.imagebitmap;return yield function Pfe(n){return F2.apply(this,arguments)}(i,r)}),N2.apply(this,arguments)}function F2(){return F2=Lt(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function Nfe(n){for(const e in n||Ofe)return!1;return!0}(e)||!u5)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),u5=!1}return yield createImageBitmap(n)}),F2.apply(this,arguments)}const Il=!1,iy=!0;function h5(n){const e=ry(n);return function zfe(n){const e=ry(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Il)?{mimeType:"image/png",width:e.getUint32(16,Il),height:e.getUint32(20,Il)}:null}(e)||function Wfe(n){const e=ry(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Il)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function $fe(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,Il);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Il),width:e.getUint16(o+7,Il)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,Il)}return null}(e)||function Hfe(n){const e=ry(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Il)?{mimeType:"image/gif",width:e.getUint16(6,iy),height:e.getUint16(8,iy)}:null}(e)||function Gfe(n){const e=ry(n);return e.byteLength>=14&&16973===e.getUint16(0,Il)&&e.getUint32(2,iy)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,iy),height:e.getUint32(22,iy)}:null}(e)||function Vfe(n){const t=function Ffe(n){return function Ufe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function jfe(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function Lfe(n){switch(function Bfe(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function ry(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function L2(){return L2=Lt(function*(n,e){const{mimeType:t}=h5(n)||{},i=globalThis._parseImageNode;return r5(i),yield i(n,t)}),L2.apply(this,arguments)}function B2(){return B2=Lt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function Kfe(n){switch(n){case"auto":case"data":return function Mfe(){if(D2)return"imagebitmap";if(I2)return"image";if(R2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Cfe(n){switch(n){case"auto":return D2||I2||R2;case"imagebitmap":return D2;case"image":return I2;case"data":return R2;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function kfe(n,e,t){return N2.apply(this,arguments)}(n,e,o);break;case"image":a=yield d5(n,e,o);break;case"data":a=yield function Yfe(n,e){return L2.apply(this,arguments)}(n,e);break;default:r5(!1)}return"data"===r&&(a=function a5(n){switch(s5(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),B2.apply(this,arguments)}const f5={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Xfe(n,e,t){return B2.apply(this,arguments)},tests:[n=>!!h5(new DataView(n))],options:{image:{type:"auto",decode:!0}}},Jfe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function qfe(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},oy="8.8.27",dE=globalThis.deck&&globalThis.deck.VERSION;if(dE&&dE!==oy)throw new Error("deck.gl - multiple versions detected: ".concat(dE," vs ").concat(oy));dE||(yi.log(1,"deck.gl ".concat(oy))(),globalThis.deck={...globalThis.deck,VERSION:oy,version:oy,log:yi,_registerLoggers:function ose(n){iD=n}},PV([Jfe,[f5,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Zfe=globalThis.deck;class uE extends Sd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=fi(e),r=SU(e,"TIMER_QUERY");let o=i||r;for(const s of t)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Xt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return uE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const p5=vl()&&typeof document<"u";let cpe=0;class lpe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(D=>aU(D)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:m=!0,stats:v=vf.get("animation-loop-".concat(cpe++))}=e;let{useDevicePixels:E=!0}=e;"useDevicePixelRatio"in e&&(dn.deprecated("useDevicePixelRatio","useDevicePixels")(),E=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=v,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:m,useDevicePixels:E}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Xt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=uE.isSupported(this.gl,["timers"])?new uE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return Lt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return dn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=p5?new Promise((e,t)=>{p5&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function ape(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function spe(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?LI(this.props.gl,e):this.onCreateContext(e),!S1(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Ire(n){Ad(n,PI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Pre(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function Dre(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function jre(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(dn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const o=n.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(dn.warn("Device pixel ratio clamped")(),s=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*s),n.canvas.height=Math.floor(r*s)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new io(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var hE=g(7271);const dpe={mousedown:1,mousemove:2,mouseup:4};(function hpe(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function upe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(hE.PointerEventInput),function fpe(n){n.prototype.handler=function(t){let i=dpe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(hE.MouseInput);const ppe=hE.Manager,Dl=hE;class fE{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const mpe=Dl?[[Dl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Dl.Rotate,{enable:!1}],[Dl.Pinch,{enable:!1}],[Dl.Swipe,{enable:!1}],[Dl.Pan,{threshold:0,enable:!1}],[Dl.Press,{enable:!1}],[Dl.Tap,{event:"doubletap",taps:2,enable:!1}],[Dl.Tap,{event:"anytap",enable:!1}],[Dl.Tap,{enable:!1}]]:null,_5={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},gpe={doubletap:["tap"]},_pe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},U2={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},bpe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},b5={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},ype=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",mg=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let V2=!1;try{mg.addEventListener("test",null,{get passive(){return V2=!0,!0}}),mg.removeEventListener("test",null)}catch{V2=!1}const vpe=-1!==ype.indexOf("firefox"),{WHEEL_EVENTS:xpe}=U2,v5=4.000244140625;class Ape extends fE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;mg.WheelEvent&&(vpe&&r.deltaMode===mg.WheelEvent.DOM_DELTA_PIXEL&&(o/=mg.devicePixelRatio),r.deltaMode===mg.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%v5==0&&(o=Math.floor(o/v5)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(xpe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!V2&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:Spe}=U2,x5="pointermove",w5="pointerover",E5="pointerout",A5="pointerenter",S5="pointerleave";class Cpe extends fE{constructor(e,t,i){super(e,t,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Spe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===x5&&(this.enableMoveEvent=t),e===w5&&(this.enableOverEvent=t),e===E5&&(this.enableOutEvent=t),e===A5&&(this.enableEnterEvent=t),e===S5&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(w5,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(E5,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(A5,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(S5,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(x5,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:Mpe}=U2,C5="keydown";class Tpe extends fE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:C5,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Mpe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===C5&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const T5="contextmenu";class Ipe extends fE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:T5,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===T5&&(this.options.enable=t)}}const Dpe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Upe(n){const e=Dpe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&t),s=!!(4&t),a=!!(2&t)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function Vpe(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const G2={srcElement:"root",priority:0};class zpe{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=G2;"string"==typeof i||i&&i.addEventListener?c={...G2,srcElement:i}:i&&(c={...G2,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===t){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...Upe(e),...Vpe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const Hpe={events:null,recognizers:null,recognizerOptions:{},Manager:ppe,touchAction:"none",tabIndex:0};class Gpe{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:o}=r,s=_pe[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...Hpe,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||mpe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(_5).forEach(r=>{const o=this.manager.get(r);o&&_5[r].forEach(s=>{o.recognizeWith(s)})});for(const r in t.recognizerOptions){const o=this.manager.get(r);if(o){const s=t.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new Ape(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Cpe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Tpe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new Ipe(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const o=gpe[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);t?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,o){if("string"!=typeof e){i=t;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=b5[e]||e;let l=a.get(c);l||(l=new zpe(this),a.set(c,l),l.recognizerName=bpe[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,t,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(b5[e]||e);if(o&&(o.remove(e,t),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Tf(){}const I5={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Tf,onResize:Tf,onViewStateChange:Tf,onInteractionStateChange:Tf,onBeforeRender:Tf,onAfterRender:Tf,onLoad:Tf,onError:n=>yi.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class W2{constructor(e){Se(this,"props",void 0),Se(this,"width",0),Se(this,"height",0),Se(this,"userData",{}),Se(this,"canvas",null),Se(this,"viewManager",null),Se(this,"layerManager",null),Se(this,"effectManager",null),Se(this,"deckRenderer",null),Se(this,"deckPicker",null),Se(this,"eventManager",null),Se(this,"tooltip",null),Se(this,"metrics",void 0),Se(this,"animationLoop",void 0),Se(this,"stats",void 0),Se(this,"viewState",void 0),Se(this,"cursorState",void 0),Se(this,"_needsRedraw",void 0),Se(this,"_pickRequest",void 0),Se(this,"_lastPointerDownInfo",null),Se(this,"_metricsCounter",void 0),Se(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),Se(this,"_onEvent",t=>{const i=Wj[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,t)),!d&&l&&l(s,t)}),Se(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...I5,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&yi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===A8()&&yi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new BI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&V0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,o,s,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&yi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&yi.removed("onLayerClick","onClick")(),e.initialViewState&&!ug(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return t=t||i||r||o||s,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return Wo(this.viewManager),this.viewManager.views}getViewports(e){return Wo(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){Wo(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),o}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),Wo(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const o=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new lpe({width:t,height:i,useDevicePixels:d,autoResizeViewport:!1,gl:r,onCreateContext:h=>aU({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new ZV({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var t;o=a,s=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,LI(e,{enable:!0,copyState:!0})),this.tooltip=new wfe(this.canvas),Ad(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new qV;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Gpe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in Wj)this.eventManager.on(r,this._onEvent);this.viewManager=new Qhe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Zhe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new lfe,this.deckRenderer=new pfe(e),this.deckPicker=new vfe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Ad(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),yi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=vf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}Se(W2,"defaultProps",I5),Se(W2,"VERSION",Zfe.VERSION);const mE={name:"project32",dependencies:[C2],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Wpe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},gE={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function $pe(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wpe;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},D5={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Ju{static get DRAW_MODE(){return D5}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ta("geometry"),drawMode:i=D5.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Xt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Xt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Xt(Number.isFinite(i)),i}}const R5=()=>{},O5={10241:9987,10240:9729,10242:33071,10243:33071};function Jpe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Zpe(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function sy(n){return n&&(n.id||n.url)}function k5(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];n[sy(r)]={...r,x:o,y:t}}}class nme{constructor(e,{onUpdate:t=R5,onError:i=R5}){Se(this,"gl",void 0),Se(this,"onUpdate",void 0),Se(this,"onError",void 0),Se(this,"_loadOptions",null),Se(this,"_texture",null),Se(this,"_externalTexture",null),Se(this,"_mapping",{}),Se(this,"_textureParameters",null),Se(this,"_pendingCount",0),Se(this,"_autoPacking",!1),Se(this,"_xOffset",0),Se(this,"_yOffset",0),Se(this,"_rowHeight",0),Se(this,"_buffer",4),Se(this,"_canvasWidth",1024),Se(this,"_canvasHeight",0),Se(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?sy(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function tme(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:o}=P1(n);for(const s of r){o.index++;const a=e(s,o),c=sy(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function eme({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[sy(l)]){const{height:h,width:f}=l;i+f+e>s&&(k5(t,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,o=Math.max(o,h)}}return a.length>0&&k5(t,a,r),{mapping:t,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:Jpe(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new Go(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||O5})),this._texture.height!==this._canvasHeight&&(this._texture=function Qpe(n,e,t,i){const r=n.width,o=n.height,s=new Go(n.gl,{width:e,height:t,parameters:i});return function loe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=t;const{framebuffer:f,deleteFramebuffer:m}=U0(n);Xt(f);const{gl:v,handle:E}=f,D=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const H=v.bindFramebuffer(36160,E);Xt(e);let Y=null;if(e instanceof xf&&(Y=e,d=Number.isFinite(d)?d:Y.width,h=Number.isFinite(h)?h:Y.height,Y.bind(0),e=Y.target),D)switch(e){case 3553:case 34067:v.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:us(v).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else v.copyTexImage2D(e,o,s,i,r,d,h,0);Y&&Y.unbind(),v.bindFramebuffer(36160,H||null),m&&f.delete()}(n,s,{targetY:0,width:r,height:o}),n.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||O5)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,ny(i.url,f5,this._loadOptions).then(r=>{const o=sy(i),{x:s,y:a,width:c,height:l}=this._mapping[o],d=Zpe(t,r,c,l);this._texture.setSubImageData({data:d,x:s,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const P5=[0,0,0,255],ime={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:P5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class $2 extends Cf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[mE,gE]})}initializeState(){this.state={iconManager:new nme(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:P5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=t,{iconManager:h}=this.state,f=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:t.loadOptions,autoPacking:!f,iconAtlas:s,iconMapping:f?a:null,textureParameters:d}),f?i.iconMapping!==t.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:v}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(v),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:A1[o],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new og(e,{...this.getShaders(),id:this.props.id,geometry:new Ju({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):yi.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[t,i,r,o]}}Se($2,"defaultProps",ime),Se($2,"layerName","IconLayer");const F5=[];class Y2 extends $2{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&yi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:o},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):F5}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):F5}}Se(Y2,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),Se(Y2,"layerName","MultiIconLayer");var sme=g(822),ame=g.n(sme);const cme=32,lme=[];function dme(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function L5(n,e,t,i){let r=0;for(let s=e;s<t;s++){var o;r+=(null===(o=i[n[s]])||void 0===o?void 0:o.width)||0}return r}function B5(n,e,t,i,r,o){let s=e,a=0;for(let c=e;c<t;c++){const l=L5(n,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function fme(n,e,t,i,r=0,o){void 0===o&&(o=n.length);const s=[];return"break-all"===e?B5(n,r,o,t,i,s):function hme(n,e,t,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<t;d++)if((" "===n[d]||" "===n[d+1]||d+1===t)&&(c=d+1),c>a){let h=L5(n,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=B5(n,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(n,r,o,t,i,s),s}function pme(n,e,t,i,r,o){let s=0,a=0;for(let c=e;c<t;c++){const l=n[c],d=i[l];d?(a||(a=d.height),r[c]=s+d.width/2,s+=d.width):(yi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=cme)}o[0]=s,o[1]=a}function j5(n,e,t,i,r){const o=Array.from(n),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let m=0,v=0,E=0;for(let D=0;D<=s;D++){const H=o[D];if(("\n"===H||D===s)&&(E=D),E>v){const Y=d?fme(o,t,i,r,v,E):lme;for(let he=0;he<=Y.length;he++){const Ie=0===he?v:Y[he-1],Le=he<Y.length?Y[he]:E;pme(o,Ie,Le,r,a,f);for(let $e=Ie;$e<Le;$e++)c[$e]=m+f[1]/2,l[$e]=f[0];m+=f[1]*e,h[0]=Math.max(h[0],f[0])}v=E}"\n"===H&&(a[v]=0,c[v]=0,l[v]=0,v++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}class U5{constructor(e=5){Se(this,"limit",void 0),Se(this,"_cache",{}),Se(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const ay={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function gme(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let _E=new U5(3);function yme(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function G5(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class xme{constructor(){Se(this,"props",{...ay}),Se(this,"_key",void 0),Se(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function bme(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=_E.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=_E.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const o=this._generateFontAtlas(this._key,i,r);this._atlas=o,_E.set(this._key,o)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:o,fontSize:s,buffer:a,sdf:c,radius:l,cutoff:d}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");G5(f,r,s,o);const{mapping:m,canvasHeight:v,xOffset:E,yOffset:D}=function ume({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;for(const h of n)if(!o[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*(t+2*i)+i,width:f,height:t},l+=f+2*i}const d=t+2*i;return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:dme(a+(c+1)*d)}}({getFontWidth:H=>f.measureText(H).width,fontHeight:1.2*s,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==v){const H=f.getImageData(0,0,h.width,h.height);h.height=v,f.putImageData(H,0,0)}if(G5(f,r,s,o),c){const H=new(ame())(s,a,l,d,r,o),Y=f.getImageData(0,0,H.size,H.size);for(const he of t)yme(H.draw(he),Y),f.putImageData(Y,m[he].x-a,m[he].y+a)}else for(const H of t)f.fillText(H,m[H].x,m[H].y+.9*s);return{xOffset:E,yOffset:D,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const Ame={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class X2 extends Cf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[mE,gE]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:A1[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new og(e,{...this.getShaders(),id:this.props.id,geometry:new Ju({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}Se(X2,"defaultProps",Ame),Se(X2,"layerName","TextBackgroundLayer");const W5={start:1,middle:0,end:-1},$5={top:1,center:0,bottom:-1},K2=[0,0,0,255],Cme={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:K2},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:ay.characterSet},fontFamily:ay.fontFamily,fontWeight:ay.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:K2},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:K2},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class q2 extends v2{constructor(...e){super(...e),Se(this,"state",void 0),Se(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{size:[f,m]}=j5(h,c,s,a,r);return[(W5["function"==typeof l?l(t,i):l]-1)*f/2,($5["function"==typeof d?d(t,i):d]-1)*m/2,f,m]}),Se(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{x:f,y:m,rowWidth:v,size:[E,D]}=j5(h,c,s,a,r),H=W5["function"==typeof l?l(t,i):l],Y=$5["function"==typeof d?d(t,i):d],he=f.length,Ie=new Array(2*he);let Le=0;for(let $e=0;$e<he;$e++)Ie[Le++]=(H-1)*E/2+(1-H)*(E-v[$e])/2+f[$e],Ie[Le++]=(Y-1)*D/2+m[$e];return Ie})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new xme}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=t.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function mme({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:o}){const s=n.BYTES_PER_ELEMENT,a=t?t/s:1,c=i?i/s:0,l=r[e]||Math.ceil((n.length-c)/a),d=o&&new Set,h=new Array(e);let f=n;if(a>1||c>0){f=new(0,n.constructor)(l);for(let v=0;v<l;v++)f[v]=n[v*a+c]}for(let m=0;m<e;m++){const D=f.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,D),d&&D.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:s,characterSet:c});a=d,o=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:d}=P1(t);s=[0],a=0;for(const h of l){d.index++;const f=Array.from(o(h,d)||"");c&&f.forEach(c.add,c),a+=f.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:v,getBackgroundColor:E,getBorderColor:D,getBorderWidth:H,backgroundPadding:Y,background:he,billboard:Ie,fontSettings:Le,outlineWidth:$e,outlineColor:ot,sizeScale:mt,sizeUnits:pt,sizeMinPixels:ft,sizeMaxPixels:_t,transitions:xt,updateTriggers:lt}=this.props,ht=this.getSubLayerClass("characters",Y2),Mt=this.getSubLayerClass("background",X2);return[he&&new Mt({getFillColor:E,getLineColor:D,getLineWidth:H,padding:Y,getPosition:d,getSize:f,getAngle:m,getPixelOffset:v,billboard:Ie,sizeScale:mt/this.state.fontAtlasManager.props.fontSize,sizeUnits:pt,sizeMinPixels:ft,sizeMaxPixels:_t,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getSize:xt.getSize,getFillColor:xt.getBackgroundColor,getLineColor:xt.getBorderColor,getLineWidth:xt.getBorderWidth,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:lt.getPosition,getAngle:lt.getAngle,getSize:lt.getSize,getFillColor:lt.getBackgroundColor,getLineColor:lt.getBorderColor,getLineWidth:lt.getBorderWidth,getPixelOffset:lt.getPixelOffset,getBoundingRect:{getText:lt.getText,getTextAnchor:lt.getTextAnchor,getAlignmentBaseline:lt.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new ht({sdf:Le.sdf,smoothing:Number.isFinite(Le.smoothing)?Le.smoothing:ay.smoothing,outlineWidth:$e,outlineColor:ot,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:v,billboard:Ie,sizeScale:mt*r,sizeUnits:pt,sizeMinPixels:ft*r,sizeMaxPixels:_t*r,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getColor:xt.getColor,getSize:xt.getSize,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:lt.getText,getPosition:lt.getPosition,getAngle:lt.getAngle,getColor:lt.getColor,getSize:lt.getSize,getPixelOffset:lt.getPixelOffset,getIconOffsets:{getText:lt.getText,getTextAnchor:lt.getTextAnchor,getAlignmentBaseline:lt.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function vme(n){yi.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),_E=new U5(n)}(e)}}Se(q2,"defaultProps",Cme),Se(q2,"layerName","TextLayer");const Y5="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Mme={lightSources:{}};function J2(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const Z2={name:"lights",vs:Y5,fs:Y5,getUniforms:function X5(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mme;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function Tme(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?J2(e):[0,0,0],t.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=J2(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=J2(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return X5({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Ime={};const Rme={name:"phong-lighting",dependencies:[Z2],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function q5(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ime;if(!("material"in n))return{};const{material:e}=n;return e?function Dme(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},Q2=Math.PI/180,bE=new Float32Array(16),J5=new Float32Array(12);function Z5(n,e,t){const i=e[0]*Q2,r=e[1]*Q2,o=e[2]*Q2,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),f=t[0],m=t[1],v=t[2];n[0]=f*h*d,n[1]=f*c*d,n[2]=f*-a,n[3]=m*(-c*l+h*a*s),n[4]=m*(h*l+c*a*s),n[5]=m*d*s,n[6]=v*(c*s+h*a*l),n[7]=v*(-h*s+c*a*l),n[8]=v*d*l}function Q5(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const e6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),f=Array.isArray(s),m=l||!c&&!!a(i[0]);n.constant=m?l:h&&d&&f;const v=n.value;if(n.constant){let E;m?(bE.set(a),E=Q5(bE)):(E=J5,Z5(E,r,o),E.set(s,9)),n.value=new Float32Array(E)}else{let E=e*n.size;const{iterable:D,objectInfo:H}=P1(i,e,t);for(const Y of D){let he;H.index++,m?(bE.set(l?a:a(Y,H)),he=Q5(bE)):(he=J5,Z5(he,h?r:r(Y,H),d?o:o(Y,H)),he.set(f?s:s(Y,H),9)),v[E++]=he[0],v[E++]=he[1],v[E++]=he[2],v[E++]=he[3],v[E++]=he[4],v[E++]=he[5],v[E++]=he[6],v[E++]=he[7],v[E++]=he[8],v[E++]=he[9],v[E++]=he[10],v[E++]=he[11]}}}};function t6(n,e){return e===Ci.CARTESIAN||e===Ci.METER_OFFSETS||e===Ci.DEFAULT&&!n.isGeospatial}function n6(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),yi.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Pme(n,e){if(n.attributes)return n6(n.attributes,e),n instanceof Ju?n:new Ju(n);if(n.positions||n.POSITION)return n6(n,e),new Ju({attributes:n});throw Error("Invalid mesh")}class eR extends Cf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){const e=!fi(this.context.gl),t={};return XI(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[mE,Rme,gE],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:e6}),this.setState({emptyTexture:new Go(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var o;if(null===(o=this.state.model)||void 0===o||o.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const s=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||t6(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new og(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Pme(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}Se(eR,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),Se(eR,"layerName","SimpleMeshLayer");const i6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[Z2]};class gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||ta(this.constructor.name),this.display=!0,this.position=new hs,this.rotation=new hs,this.scale=new hs(1,1,1),this.matrix=new Gn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Xt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Xt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Xt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:o=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){Xt(e),t=t||this.matrix;const i=new Gn(e).multiplyRight(t),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class cy extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;dn.assert(t.every(i=>i instanceof gg),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const o=t.getBounds();if(!o)return;const[s,a]=o,c=new hs(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new hs(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new hs(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Gn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Gn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof cy?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let yE;class tR extends DU{static get ZERO(){return yE||(yE=new tR(0,0,0,0),Object.freeze(yE)),yE}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),Cd(e)&&1===arguments.length?this.copy(e):(Gr.debug&&(pi(e),pi(t),pi(i),pi(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Gr.debug&&(pi(e.x),pi(e.y),pi(e.z),pi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=pi(e)}get w(){return this[3]}set w(e){this[3]=pi(e)}transform(e){return qI(this,this,e),this.check()}transformByMatrix3(e){return function $oe(n,e,t){const i=e[0],r=e[1],o=e[2];n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Woe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return PU(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function r6(){var n=new ia(4);return ia!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function o6(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function s6(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}var c6=L8,qme=function(){var n=RU(),e=OU(1,0,0),t=OU(0,1,0);return function(i,r,o){var s=kU(r,o);return s<-.999999?(R1(n,e,r),function Ooe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&R1(n,t,r),function Noe(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),o6(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(R1(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function yle(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();r6(),r6(),function Fme(){var n=new ia(9);ia!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Jme=[0,0,0,1];class nR extends I1{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function a6(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return o6(this,e,t),this.check()}identity(){return function Lme(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}get z(){return this[2]}set z(e){this[2]=pi(e)}get w(){return this[3]}set w(e){this[3]=pi(e)}len(){return function _le(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function ble(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function vle(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return qme(this,e,t),this.check()}add(e){return function gle(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function Vme(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function Wme(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function Gme(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function xle(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return s6(this,this,e),this.check()}multiplyLeft(e){return s6(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function Bme(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function jme(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function Ume(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return c6(this,this,e),this.check()}slerp(e,t,i){let r,o,s;switch(arguments.length){case 1:({start:r=Jme,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=t;break;default:r=e,o=t,s=i}return function vE(n,e,t,i){var f,m,v,E,D,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>El?(f=Math.acos(m),v=Math.sin(f),E=Math.sin((1-i)*f)/v,D=Math.sin(i*f)/v):(E=1-i,D=i),n[0]=E*r+D*c,n[1]=E*o+D*l,n[2]=E*s+D*d,n[3]=E*a+D*h,n}(this,r,o,s),this.check()}transformVector4(e,t=new tR){return function wle(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),D1(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Zme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Qme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function u6(n){if(!n._animation){const e=Qme[n.componentType],t=Zme[n.type],i=t*n.count,{buffer:r,byteOffset:o}=n.bufferView.data,s=new e(r,o+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=t)a.push(Array.from(s.slice(c,c+t)));n._animation=a}}return n._animation}const ege=new Gn,iR=new nR;class sge{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function oge(n,e,t,i){let{input:r,interpolation:o,output:s}=e;const c=n%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:dn.warn("Bad animation path ".concat(i))()}Xt(t[i].length===s[d].length);const h=r[d],f=r[l];switch(o){case"STEP":!function rge(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,s[d]);break;case"LINEAR":f>h&&function nge(n,e,t,i,r){if("rotation"===e){iR.slerp({start:t,target:i,ratio:r});for(let o=0;o<iR.length;o++)n[e][o]=iR[o]}else for(let o=0;o<t.length;o++)n[e][o]=r*i[o]+(1-r)*t[o]}(t,i,s[d],s[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function ige(n,e,t){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const d=r[l]*a,h=o[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(t,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:dn.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function tge(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=ege.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class age{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),o=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:u6(e.accessors[c]),interpolation:l,output:u6(e.accessors[d])}}),s=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new sge({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class cge extends gg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof og?(this.model=e,this._setModelNodeProps(t)):this.model=new og(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class lge{constructor(e,t){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},XI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new Go(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(dn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function h6(n,e){return fi(n)?"#version 300 es\n".concat(e):e}const fge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pge={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class mge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},pge,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new age(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new cy({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new cy({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new Gn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new cy({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){dn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function hge(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new lge(n,e);dn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new cge(n,{id:t,drawMode:i,vertexCount:r,modules:[i6],parameters:a.parameters,vs:h6(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:h6(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...s,defines:{...a.defines,...s.defines}});return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),dn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new Xi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new na({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:fge[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var ly=g(9125);const yge="3.2.13",rR={};function If(n){return oR.apply(this,arguments)}function oR(){return oR=Lt(function*(n,e=null,t={}){return e&&(n=function vge(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:Yu?t.CDN?(Sl(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(yge,"/dist/libs/").concat(n)):KD?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),rR[n]=rR[n]||function xge(n){return sR.apply(this,arguments)}(n),yield rR[n]}),oR.apply(this,arguments)}function sR(){return sR=Lt(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!Yu)try{return ly&&ly.requireFromFile&&(yield ly.requireFromFile(n))}catch{return null}return KD?importScripts(n):function wge(n,e){if(!Yu)return ly.requireFromString&&ly.requireFromString(n,e);if(KD)return eval.call(Xde,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),sR.apply(this,arguments)}const Ege="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),Age="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let aR,dR;function p6(n){return cR.apply(this,arguments)}function cR(){return cR=Lt(function*(n){const e=n.modules||{};return e.basis?e.basis:(aR=aR||function Sge(n){return lR.apply(this,arguments)}(n),yield aR)}),cR.apply(this,arguments)}function lR(){return lR=Lt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield If("basis_transcoder.js","textures",n),yield If("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function Cge(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,t)}),lR.apply(this,arguments)}function m6(n){return uR.apply(this,arguments)}function uR(){return uR=Lt(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(dR=dR||function Mge(n){return hR.apply(this,arguments)}(n),yield dR)}),uR.apply(this,arguments)}function hR(){return hR=Lt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield If(Age,"textures",n),yield If(Ege,"textures",n)]),e=e||globalThis.BASIS,yield function Tge(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,t)}),hR.apply(this,arguments)}const Ige=["","WEBKIT_","MOZ_"],g6={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let xE=null;var fR,wE,pR,EE,b6,mR,y6,v6;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(fR||(fR={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(wE||(wE={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(pR||(pR={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(EE||(EE={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}(b6||(b6={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(mR||(mR={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(y6||(y6={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(v6||(v6={}));const Aa=[171,75,84,88,32,50,48,187,13,10,26,10],Nge={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function _R(){return _R=Lt(function*(n,e){if("auto"===e.basis.containerFormat){if(function Pge(n){const e=new Uint8Array(n);return!(e.byteLength<Aa.length||e[0]!==Aa[0]||e[1]!==Aa[1]||e[2]!==Aa[2]||e[3]!==Aa[3]||e[4]!==Aa[4]||e[5]!==Aa[5]||e[6]!==Aa[6]||e[7]!==Aa[7]||e[8]!==Aa[8]||e[9]!==Aa[9]||e[10]!==Aa[10]||e[11]!==Aa[11])}(n))return E6((yield m6(e)).KTX2File,n,e);const{BasisFile:t}=yield p6(e);return bR(t,n,e)}if("encoder"===e.basis.module){const t=yield m6(e);return"ktx2"===e.basis.containerFormat?E6(t.KTX2File,n,e):bR(t.BasisFile,n,e)}{const{BasisFile:i}=yield p6(e);return bR(i,n,e)}}),_R.apply(this,arguments)}function bR(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(Lge(i,s,l,t));o.push(c)}return o}finally{i.close(),i.delete()}}function Lge(n,e,t,i){const r=n.getImageWidth(e,t),o=n.getImageHeight(e,t),s=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=A6(i,s),d=n.getImageTranscodedSizeInBytes(e,t,l),h=new Uint8Array(d);if(!n.transcodeImage(h,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function E6(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(Bge(i,s,t));break}return[o]}finally{i.close(),i.delete()}}function Bge(n,e,t){const{alphaFlag:i,height:r,width:o}=n.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=A6(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!n.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,hasAlpha:i,format:a}}function A6(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=S6()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),Nge[t]}function S6(){const n=function Dge(n){if(!xE){n=n||function Rge(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,xE=new Set;for(const e of Ige)for(const t in g6)n&&n.getExtension("".concat(e).concat(t))&&xE.add(g6[t])}return xE}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const jge={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function Fge(n,e){return _R.apply(this,arguments)}};function Df(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const SE=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),C6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Vge}=(C6&&parseFloat(C6[1]),globalThis),yR=typeof Image<"u",vR=typeof ImageBitmap<"u",xR=!!SE||!!Vge;function M6(n){const e=function I6(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Gge=/^data:image\/svg\+xml/,Wge=/\.svg((\?|#).*)?$/;function wR(n){return n&&(Gge.test(n)||Wge.test(n))}function D6(n,e){if(wR(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function R6(n,e,t){return ER.apply(this,arguments)}function ER(){return ER=Lt(function*(n,e,t){const i=function $ge(n,e){if(wR(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return D6(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Yge(n,e){return AR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),ER.apply(this,arguments)}function AR(){return AR=Lt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),AR.apply(this,arguments)}const Xge={};let O6=!0;function SR(){return SR=Lt(function*(n,e,t){let i;i=wR(t)?yield R6(n,e,t):D6(n,t);const r=e&&e.imagebitmap;return yield function qge(n){return CR.apply(this,arguments)}(i,r)}),SR.apply(this,arguments)}function CR(){return CR=Lt(function*(n,e=null){if((function Jge(n){for(const e in n||Xge)return!1;return!0}(e)||!O6)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),O6=!1}return yield createImageBitmap(n)}),CR.apply(this,arguments)}const Ol=!1,uy=!0;function MR(n){const e=hy(n);return function Zge(n){const e=hy(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Ol)?{mimeType:"image/png",width:e.getUint32(16,Ol),height:e.getUint32(20,Ol)}:null}(e)||function t_e(n){const e=hy(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Ol)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function n_e(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,Ol);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Ol),width:e.getUint16(o+7,Ol)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,Ol)}return null}(e)||function Qge(n){const e=hy(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Ol)?{mimeType:"image/gif",width:e.getUint16(6,uy),height:e.getUint16(8,uy)}:null}(e)||function e_e(n){const e=hy(n);return e.byteLength>=14&&16973===e.getUint16(0,Ol)&&e.getUint32(2,uy)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,uy),height:e.getUint32(22,uy)}:null}(e)}function hy(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function TR(){return TR=Lt(function*(n,e){const{mimeType:t}=MR(n)||{},i=globalThis._parseImageNode;return Df(i),yield i(n,t)}),TR.apply(this,arguments)}function IR(){return IR=Lt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function o_e(n){switch(n){case"auto":case"data":return function Hge(){if(vR)return"imagebitmap";if(yR)return"image";if(xR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function zge(n){switch(n){case"auto":return vR||yR||xR;case"imagebitmap":return vR;case"image":return yR;case"data":return xR;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function Kge(n,e,t){return SR.apply(this,arguments)}(n,e,o);break;case"image":a=yield R6(n,e,o);break;case"data":a=yield function i_e(n,e){return TR.apply(this,arguments)}(n,e);break;default:Df(!1)}return"data"===r&&(a=function T6(n){switch(M6(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),IR.apply(this,arguments)}const s_e={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function r_e(n,e,t){return IR.apply(this,arguments)},tests:[n=>!!MR(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function k6(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function P6(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function Sa(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function N6(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function fy(n,e){return Df(n>=0),Df(e>0),n+(e-1)&~(e-1)}function l_e(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+fy(i.byteLength,4)}const L6=["SCALAR","VEC2","VEC3","VEC4"],d_e=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],u_e=new Map(d_e),h_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},f_e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},p_e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function B6(n){return L6[n-1]||L6[0]}function j6(n){const e=u_e.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function U6(n,e){const t=p_e[n.componentType],i=h_e[n.type],o=n.count*i,s=n.count*i*f_e[n.componentType];return Sa(s>=0&&s<=e.byteLength),{ArrayType:t,length:o,byteLength:s}}const m_e={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Xa{constructor(e){Se(this,"gltf",void 0),Se(this,"sourceBuffers",void 0),Se(this,"byteLength",void 0),this.gltf=e||{json:{...m_e},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Sa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:o,length:s}=U6(e,t);return new o(r,t.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Sa(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Sa(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=MR(e),r=t||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Sa(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=fy(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:B6(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const o={size:t.size,componentType:j6(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=l_e(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);t[o]=s}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const o of r)i.min.push(o),i.max.push(o);for(let o=t;o<e.length;o+=t)for(let s=0;s<t;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const __e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",b_e="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",y_e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),v_e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),V6={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},x_e={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function kR(){return kR=Lt(function*(n,e,t,i,r,o="NONE"){const s=yield function CE(){return NR.apply(this,arguments)}();!function ME(n,e,t,i,r,o,s){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,d);const f=e(l,i,r,d,o.length);if(0===f&&s&&s(l,c,r),t.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(s,s.exports[x_e[r]],n,e,t,i,s.exports[V6[o||"NONE"]])}),kR.apply(this,arguments)}let PR;function NR(){return NR=Lt(function*(){return PR||(PR=function E_e(){return FR.apply(this,arguments)}()),PR}),NR.apply(this,arguments)}function FR(){return FR=Lt(function*(){let n=__e;WebAssembly.validate(y_e)&&(n=b_e,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function A_e(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?v_e[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),FR.apply(this,arguments)}const LR="EXT_meshopt_compression",S_e=LR;function C_e(n,e){return BR.apply(this,arguments)}function BR(){return BR=Lt(function*(n,e){var t;const i=new Xa(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const o of n.json.bufferViews||[])r.push(M_e(i,o));yield Promise.all(r),i.removeExtension(LR)}),BR.apply(this,arguments)}function M_e(n,e){return jR.apply(this,arguments)}function jR(){return jR=Lt(function*(n,e){const t=n.getObjectExtension(e,LR);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=t,d=n.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),f=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function w_e(n,e,t,i,r){return kR.apply(this,arguments)}(f,s,o,h,a,c),f}return null}),jR.apply(this,arguments)}const T_e=["image/png","image/jpeg","image/gif"],UR={};const bg="EXT_texture_webp",O_e=bg;function k_e(n,e){const t=new Xa(n);if(!function I_e(n){return void 0===UR[n]&&(UR[n]=function D_e(n){switch(n){case"image/webp":return function R_e(){if(!SE)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return SE;default:if(!SE){const{_parseImageNode:e}=globalThis;return!!e&&T_e.includes(n)}return!0}}(n)),UR[n]}("image/webp")){if(t.getRequiredExtensions().includes(bg))throw new Error("gltf: Required extension ".concat(bg," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,bg);o&&(r.source=o.source),t.removeObjectExtension(r,bg)}t.removeExtension(bg)}const TE="KHR_texture_basisu",P_e=TE;function N_e(n,e){const t=new Xa(n),{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,TE);o&&(r.source=o.source),t.removeObjectExtension(r,TE)}t.removeExtension(TE)}const H6={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class IE{constructor(e,t,i=!1,r=new Map){Se(this,"name",void 0),Se(this,"type",void 0),Se(this,"nullable",void 0),Se(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new IE(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Ki,G6,W6,$6,Y6,X6,K6,q6,J6;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(Ki||(Ki={}));class Rf{static isNull(e){return e&&e.typeId===Ki.Null}static isInt(e){return e&&e.typeId===Ki.Int}static isFloat(e){return e&&e.typeId===Ki.Float}static isBinary(e){return e&&e.typeId===Ki.Binary}static isUtf8(e){return e&&e.typeId===Ki.Utf8}static isBool(e){return e&&e.typeId===Ki.Bool}static isDecimal(e){return e&&e.typeId===Ki.Decimal}static isDate(e){return e&&e.typeId===Ki.Date}static isTime(e){return e&&e.typeId===Ki.Time}static isTimestamp(e){return e&&e.typeId===Ki.Timestamp}static isInterval(e){return e&&e.typeId===Ki.Interval}static isList(e){return e&&e.typeId===Ki.List}static isStruct(e){return e&&e.typeId===Ki.Struct}static isUnion(e){return e&&e.typeId===Ki.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ki.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ki.FixedSizeList}static isMap(e){return e&&e.typeId===Ki.Map}static isDictionary(e){return e&&e.typeId===Ki.Dictionary}get typeId(){return Ki.NONE}compareTo(e){return this===e}}Symbol,Symbol,G6=Symbol.toStringTag;class yg extends Rf{constructor(e,t){super(),Se(this,"isSigned",void 0),Se(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return Ki.Int}get[G6](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class L_e extends yg{constructor(){super(!0,8)}}class B_e extends yg{constructor(){super(!0,16)}}class j_e extends yg{constructor(){super(!0,32)}}class U_e extends yg{constructor(){super(!1,8)}}class V_e extends yg{constructor(){super(!1,16)}}class z_e extends yg{constructor(){super(!1,32)}}W6=Symbol.toStringTag;class Z6 extends Rf{constructor(e){super(),Se(this,"precision",void 0),this.precision=e}get typeId(){return Ki.Float}get[W6](){return"Float"}toString(){return"Float".concat(this.precision)}}class H_e extends Z6{constructor(){super(32)}}class G_e extends Z6{constructor(){super(64)}}Symbol,Symbol,$6=Symbol.toStringTag,Y6=Symbol.toStringTag,X6=Symbol.toStringTag,K6=Symbol.toStringTag,q6=Symbol.toStringTag;class W_e extends Rf{constructor(e,t){super(),Se(this,"listSize",void 0),Se(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return Ki.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[q6](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}J6=Symbol.toStringTag;class vg{constructor(e,t){Se(this,"fields",void 0),Se(this,"metadata",void 0),function K_e(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function q_e(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new vg(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new vg(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof vg){const s=e;t=s.fields,i=ez(ez(new Map,this.metadata),s.metadata)}else t=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of t)r[s.name]=s;const o=Object.values(r);return new vg(o,i)}}function ez(n,e){return new Map([...n||new Map,...e||new Map])}function tz(n,e,t){return function Q6(n,e,t){const i=function $_e(n){switch(n.constructor){case Int8Array:return new L_e;case Uint8Array:return new U_e;case Int16Array:return new B_e;case Uint16Array:return new V_e;case Int32Array:return new j_e;case Uint32Array:return new z_e;case Float32Array:return new H_e;case Float64Array:return new G_e;default:throw new Error("array type not supported")}}(e.value),r=t||function X_e(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new IE(n,new W_e(e.size,new IE("value",i)),!1,r)}(n,e,t?nz(t.metadata):void 0)}function nz(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const iz={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Q_e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class tbe{constructor(e){Se(this,"draco",void 0),Se(this,"decoder",void 0),Se(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const f="DRACO decompression failed: ".concat(s.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(o,r,t),c=this._getMeshData(o,a,t),l=function F_e(n){let e=1/0,t=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],f=a[l+2];e=d<e?d:e,t=h<t?h:t,i=f<i?f:i,r=d>r?d:r,o=h>o?h:o,s=f>s?f:s}return[[e,t,i],[r,o,s]]}(c.attributes),d=function J_e(n,e,t){const i=nz(e.metadata),r=[],o=function Z_e(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in n){const c=tz(s,n[s],o[s]);r.push(c)}if(t){const s=tz("indices",t);r.push(s)}return new vg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,t);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,t);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(t,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function rbe(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=Q_e[t.data_type],r=t.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function nbe(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[s,a]of Object.entries(t.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in iz)if(this.draco[s]===r)return iz[s];const o=t.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);t[o]=this._getDracoMetadataField(e,o)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function ibe(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const DE="1.4.1",obe="https://www.gstatic.com/draco/versioned/decoders/".concat(DE,"/draco_decoder.js"),sbe="https://www.gstatic.com/draco/versioned/decoders/".concat(DE,"/draco_wasm_wrapper.js"),abe="https://www.gstatic.com/draco/versioned/decoders/".concat(DE,"/draco_decoder.wasm");let py;function GR(){return GR=Lt(function*(n){const e=n.modules||{};return py=e.draco3d?py||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):py||function dbe(n){return $R.apply(this,arguments)}(n),yield py}),GR.apply(this,arguments)}function $R(){return $R=Lt(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield If(obe,"draco",n):[e,t]=yield Promise.all([yield If(sbe,"draco",n),yield If(abe,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function ube(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),$R.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(DE,"/javascript/draco_encoder.js");const XR={...H6,parse:function fbe(n,e){return KR.apply(this,arguments)}};function KR(){return KR=Lt(function*(n,e){const{draco:t}=yield function lbe(n){return GR.apply(this,arguments)}(e),i=new tbe(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),KR.apply(this,arguments)}function rz(n){const{buffer:e,size:t,count:i}=function mbe(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function gbe(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:B6(t),componentType:j6(e)}}const Of="KHR_draco_mesh_compression",_be=Of;function bbe(n,e,t){const i=new Xa(n);for(const r of oz(i))i.getObjectExtension(r,Of)}function ybe(n,e,t){return qR.apply(this,arguments)}function qR(){return qR=Lt(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new Xa(n),o=[];for(const s of oz(r))r.getObjectExtension(s,Of)&&o.push(xbe(r,s,e,t));yield Promise.all(o),r.removeExtension(Of)}),qR.apply(this,arguments)}function vbe(n,e={}){const t=new Xa(n);for(const i of t.json.meshes||[])wbe(i),t.addRequiredExtension(Of)}function xbe(n,e,t,i){return JR.apply(this,arguments)}function JR(){return JR=Lt(function*(n,e,t,i){const r=n.getObjectExtension(e,Of);if(!r)return;const o=n.getTypedArrayForBufferView(r.bufferView),s=P6(o.buffer,o.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(s,XR,c,i),d=function pbe(n){const e={};for(const t in n)if("indices"!==t){const r=rz(n[t]);e[t]=r}return e}(l.attributes);for(const[h,f]of Object.entries(d))if(h in e.attributes){const v=n.getAccessor(e.attributes[h]);null!=v&&v.min&&null!=v&&v.max&&(f.min=v.min,f.max=v.max)}e.attributes=d,l.indices&&(e.indices=rz(l.indices)),function Ebe(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),JR.apply(this,arguments)}function wbe(n,e,t=4,i,r){var o;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(o=r.parseSync)||void 0===o?void 0:o.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(s);return{primitives:[{attributes:c,mode:t,extensions:{[Of]:{bufferView:l,attributes:c}}}]}}function*oz(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const kf="KHR_lights_punctual",Abe=kf;function Sbe(n){return ZR.apply(this,arguments)}function ZR(){return ZR=Lt(function*(n){const e=new Xa(n),{json:t}=e,i=e.getExtension(kf);i&&(e.json.lights=i.lights,e.removeExtension(kf));for(const r of t.nodes||[]){const o=e.getObjectExtension(r,kf);o&&(r.light=o.light),e.removeObjectExtension(r,kf)}}),ZR.apply(this,arguments)}function Cbe(n){return QR.apply(this,arguments)}function QR(){return QR=Lt(function*(n){const e=new Xa(n),{json:t}=e;if(t.lights){const i=e.addExtension(kf);Sa(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,kf,i);delete e.json.lights}}),QR.apply(this,arguments)}const gy="KHR_materials_unlit",Mbe=gy;function Tbe(n){return eO.apply(this,arguments)}function eO(){return eO=Lt(function*(n){const e=new Xa(n),{json:t}=e;e.removeExtension(gy);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,gy)}),eO.apply(this,arguments)}function Ibe(n){const e=new Xa(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,gy,{}),e.addExtension(gy))}const _y="KHR_techniques_webgl",Dbe=_y;function Rbe(n){return tO.apply(this,arguments)}function tO(){return tO=Lt(function*(n){const e=new Xa(n),{json:t}=e,i=e.getExtension(_y);if(i){const r=function kbe(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),t.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=t[s.program]}),r}(i,e);for(const o of t.materials||[]){const s=e.getObjectExtension(o,_y);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=Pbe(o.technique,e)),e.removeObjectExtension(o,_y)}e.removeExtension(_y)}}),tO.apply(this,arguments)}function Obe(n,e){return nO.apply(this,arguments)}function nO(){return(nO=Lt(function*(n,e){})).apply(this,arguments)}function Pbe(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const sz=[S,b,k,C,N,_,y];function iO(){return iO=Lt(function*(n,e={},t){const i=sz.filter(o=>az(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,n,e,t)}}),iO.apply(this,arguments)}function az(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const rO="KHR_binary_glTF",cz={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Bbe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class jbe{constructor(){Se(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),Se(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function Lbe(n){const e=new Xa(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,rO);r&&Object.assign(i,r),e.removeObjectExtension(i,rO)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(rO)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in cz)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[t].length;e[t].push(o),this.idToIndexMap[t][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const t in cz)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:o}=t;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),o&&(t.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,t){const i=Bbe[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const o of e.materials){var t,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(t=o.values)||void 0===t?void 0:t.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const Vbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zbe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Hbe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},Gbe={10240:9729,10241:9986,10242:10497,10243:10497};class Ybe{constructor(){Se(this,"baseUri",""),Se(this,"json",{}),Se(this,"buffers",[]),Se(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Sa(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function Wbe(n){return zbe[n]}(e.componentType),e.components=function $be(n){return Vbe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=U6(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=t+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):Gbe,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return Hbe[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const lz=1735152710,oO=12,RE=8,Kbe=1313821514,qbe=5130562,Jbe=0,Zbe=1,Qbe=0,xg=!0;function sO(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),s=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(s),fy(i,4)}function aO(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),fy(i,4)}function cO(){return cO=Lt(function*(n,e,t=0,i,r){var o,s,a,c;(function a0e(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function t0e(n,e=0,t={}){const i=new DataView(n),{magic:r=lz}=t,o=i.getUint32(e,!1);return o===r||o===lz}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function c_e(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function a_e(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?k6(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?k6(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};t=function n0e(n,e,t=0,i={}){const r=new DataView(e),o=function e0e(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),s=r.getUint32(t+4,xg),a=r.getUint32(t+8,xg);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),t+=oO,n.version){case 1:return function i0e(n,e,t){Df(n.header.byteLength>oO+RE);const i=e.getUint32(t+0,xg),r=e.getUint32(t+4,xg);return t+=RE,Df(r===Qbe),sO(n,e,t,i),(t+=i)+aO(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function r0e(n,e,t,i){return Df(n.header.byteLength>oO+RE),function o0e(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,xg),o=e.getUint32(t+4,xg);switch(t+=RE,o){case Kbe:sO(n,e,t,r);break;case qbe:aO(n,e,t,r);break;case Jbe:i.strict||sO(n,e,t,r);break;case Zbe:i.strict||aO(n,e,t,r)}t+=fy(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(s,e,t,i.glb),Sa("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),n._glb=s,n.json=s.json}else Sa(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:s}=n._glb;n.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function Ube(n,e={}){(new jbe).normalize(n,e)}(n,{normalize:null==i||null===(o=i.gltf)||void 0===o?void 0:o.normalize}),function Nbe(n,e={},t){const i=sz.filter(o=>az(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(s=i.gltf)&&void 0!==s&&s.loadBuffers&&n.json.buffers&&(yield function c0e(n,e,t){return lO.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function l0e(n,e,t){return dO.apply(this,arguments)}(n,i,r);l.push(h)}const d=function Fbe(n){return iO.apply(this,arguments)}(n,i,r);return l.push(d),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function Xbe(n,e){return(new Ybe).postProcess(n,e)}(n,i):n}),cO.apply(this,arguments)}function lO(){return lO=Lt(function*(n,e,t){const i=n.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=t;Sa(c);const l=N6(a.uri,e),d=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);n.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===n.buffers[s]&&(n.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),lO.apply(this,arguments)}function dO(){return dO=Lt(function*(n,e,t){const i=function d0e(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],o=[];for(const s of i)o.push(u0e(n,r[s],s,e,t));return yield Promise.all(o)}),dO.apply(this,arguments)}function u0e(n,e,t,i,r){return uO.apply(this,arguments)}function uO(){return uO=Lt(function*(n,e,t,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=N6(e.uri,i);a=yield(yield o(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function F6(n,e,t){const i=n.bufferViews[t];Sa(i);const o=e[i.buffer];return Sa(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=P6(l.buffer,l.byteOffset,l.byteLength)}Sa(a,"glTF image has no data");let c=yield s(a,[s_e,jge],{mimeType:e.mimeType,basis:i.basis||{format:S6()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),uO.apply(this,arguments)}const wg={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function h0e(n){return hO.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function hO(){return hO=Lt(function*(n,e={},t){(e={...wg.options,...e}).gltf={...wg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function s0e(n,e){return cO.apply(this,arguments)}({},n,i,e,t)}),hO.apply(this,arguments)}function fO(){return fO=Lt(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function p0e(n){return pO.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),fO.apply(this,arguments)}function pO(){return pO=Lt(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),pO.apply(this,arguments)}const dz=[255,255,255,255],_0e={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:dz},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[wg]};class mO extends Cf{constructor(...e){super(...e),Se(this,"state",void 0)}getShaders(){const e=[mE,gE];return"pbr"===this.props._lighting&&e.push(i6),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:dz,transition:!0},instanceModelMatrix:e6})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof gg)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function gge(n,e,t){const i=new mge(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function f0e(n){return fO.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(yi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof gg?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&yi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):yi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):yi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof gg&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!fi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:t,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:t6(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}Se(mO,"defaultProps",_0e),Se(mO,"layerName","ScenegraphLayer");class b0e extends Ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ta("sphere-geometry")}=e,{indices:i,attributes:r}=function y0e(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(t+1);if("number"==typeof i){const H=i;i=(Y,he,Ie,Le,$e)=>H}const h=new Float32Array(3*d),f=new Float32Array(3*d),m=new Float32Array(2*d),E=new(d>65535?Uint32Array:Uint16Array)(e*t*6);for(let H=0;H<=e;H++)for(let Y=0;Y<=t;Y++){const he=Y/t,Ie=H/e,Le=Y+H*(t+1),$e=2*Le,ot=3*Le,mt=l*he,pt=s*Ie,ft=Math.sin(mt),_t=Math.cos(mt),xt=Math.sin(pt),ht=_t*xt,Mt=Math.cos(pt),Dt=ft*xt,fn=i(ht,Mt,Dt,he,Ie);h[ot+0]=fn*ht,h[ot+1]=fn*Mt,h[ot+2]=fn*Dt,f[ot+0]=ht,f[ot+1]=Mt,f[ot+2]=Dt,m[$e+0]=he,m[$e+1]=1-Ie}const D=t+1;for(let H=0;H<t;H++)for(let Y=0;Y<e;Y++){const he=6*(H*e+Y);E[he+0]=Y*D+H,E[he+1]=Y*D+H+1,E[he+2]=(Y+1)*D+H,E[he+3]=(Y+1)*D+H,E[he+4]=Y*D+H+1,E[he+5]=(Y+1)*D+H+1}return{indices:{size:1,value:E},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const v0e={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class uz extends Ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ta("truncated-code-geometry")}=e,{indices:i,attributes:r}=function x0e(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-t,i),f=Math.sin,m=Math.cos,v=Math.PI,E=m(h),D=f(h),H=a?-2:0,Y=o+(c?2:0),he=r+1,Ie=new Uint16Array(r*(o+l)*6),Le=v0e[s],$e=new Float32Array(3*d),ot=new Float32Array(3*d),mt=new Float32Array(2*d);let pt=0,ft=0;for(let _t=H;_t<=Y;_t++){let ht,xt=_t/o,lt=i*xt;_t<0?(lt=0,xt=1,ht=e):_t>o?(lt=i,xt=1,ht=t):ht=e+_t/o*(t-e),(-2===_t||_t===o+2)&&(ht=0,xt=0),lt-=i/2;for(let Mt=0;Mt<he;Mt++){const Dt=f(Mt*v*2/r),fn=m(Mt*v*2/r);$e[pt+Le[0]]=Dt*ht,$e[pt+Le[1]]=lt,$e[pt+Le[2]]=fn*ht,ot[pt+Le[0]]=_t<0||_t>o?0:Dt*E,ot[pt+Le[1]]=_t<0?-1:_t>o?1:D,ot[pt+Le[2]]=_t<0||_t>o?0:fn*E,mt[ft+0]=Mt/r,mt[ft+1]=xt,ft+=2,pt+=3}}for(let _t=0;_t<o+l;_t++)for(let xt=0;xt<r;xt++){const lt=6*(_t*r+xt);Ie[lt+0]=he*(_t+0)+0+xt,Ie[lt+1]=he*(_t+0)+1+xt,Ie[lt+2]=he*(_t+1)+1+xt,Ie[lt+3]=he*(_t+0)+0+xt,Ie[lt+4]=he*(_t+1)+1+xt,Ie[lt+5]=he*(_t+1)+0+xt}return{indices:Ie,attributes:{POSITION:{size:3,value:$e},NORMAL:{size:3,value:ot},TEXCOORD_0:{size:2,value:mt}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class w0e extends uz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ta("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class E0e extends uz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ta("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const A0e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),S0e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),C0e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),M0e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),T0e={POSITION:{size:3,value:new Float32Array(S0e)},NORMAL:{size:3,value:new Float32Array(C0e)},TEXCOORD_0:{size:2,value:new Float32Array(M0e)}};class I0e extends Ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ta("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(A0e)},attributes:{...T0e,...e.attributes}})}}class Oc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new xe);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new xe);const i=this.elements,r=e.x,o=e.y,s=e.z;return t.x=i[0]*r+i[1]*o+i[2]*s,t.y=i[3]*r+i[4]*o+i[5]*s,t.z=i[6]*r+i[7]*o+i[8]*s,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new Oc);const i=this.elements,r=e.elements,o=t.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],f=i[6],m=i[7],v=i[8],E=r[0],D=r[1],H=r[2],Y=r[3],he=r[4],Ie=r[5],Le=r[6],$e=r[7],ot=r[8];return o[0]=s*E+a*Y+c*Le,o[1]=s*D+a*he+c*$e,o[2]=s*H+a*Ie+c*ot,o[3]=l*E+d*Y+h*Le,o[4]=l*D+d*he+h*$e,o[5]=l*H+d*Ie+h*ot,o[6]=f*E+m*Y+v*Le,o[7]=f*D+m*he+v*$e,o[8]=f*H+m*Ie+v*ot,t}scale(e,t){void 0===t&&(t=new Oc);const i=this.elements,r=t.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return t}solve(e,t){void 0===t&&(t=new xe);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,f;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{f=4-d,o[f+4*s]+=o[f+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{f=4-d,o[f+4*a]=f<=s?0:o[f+4*a]-o[f+4*s]*m}while(--d)}}while(--c);if(t.z=o[11]/o[10],t.y=(o[7]-o[6]*t.z)/o[5],t.x=(o[3]-o[2]*t.z-o[1]*t.y)/o[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Oc);const r=D0e;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*f}while(--l)}}while(--a);o=2;do{s=o-1;do{const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*f}while(--l)}while(s--)}while(--o);o=2;do{const f=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*f}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,o=e.w,s=t+t,a=i+i,c=r+r,l=t*s,d=t*a,h=t*c,f=i*a,m=i*c,v=r*c,E=o*s,D=o*a,H=o*c,Y=this.elements;return Y[0]=1-(f+v),Y[1]=d-H,Y[2]=h+D,Y[3]=d+H,Y[4]=1-(l+v),Y[5]=m-E,Y[6]=h-D,Y[7]=m+E,Y[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new Oc);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const D0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class xe{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new xe);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return t.x=a*o-c*r,t.y=c*i-s*o,t.z=s*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new xe(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new xe(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Oc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new xe);const t=this.x,i=this.y,r=this.z;let o=Math.sqrt(t*t+i*i+r*r);return o>0?(o=1/o,e.x=t*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new xe);const r=this.y,o=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*o,t}vmul(e,t){return void 0===t&&(t=new xe),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new xe),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new xe),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=R0e,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=O0e;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*t,i.y=o+(e.y-o)*t,i.z=s+(e.z-s)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(hz),hz.almostEquals(e,t)}clone(){return new xe(this.x,this.y,this.z)}}xe.ZERO=new xe(0,0,0),xe.UNIT_X=new xe(1,0,0),xe.UNIT_Y=new xe(0,1,0),xe.UNIT_Z=new xe(0,0,1);const R0e=new xe,O0e=new xe,hz=new xe;class tr{constructor(e){void 0===e&&(e={}),this.lowerBound=new xe,this.upperBound=new xe,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,fz),l=fz),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return t&&(t.vadd(o,o),t.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new tr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||t.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||t.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||t.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return t.x<=r.x&&i.x>=o.x&&t.y<=r.y&&i.y>=o.y&&t.z<=r.z&&i.z>=o.z}getCorners(e,t,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),t.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,t){const i=pz;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToLocal(m,m)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=pz;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToWorld(m,m)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,o=1/t.y,s=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,f=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,f)),v=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,f));return!(v<0||m>v)}}const fz=new xe,pz=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe];class k0e{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class Lr{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new xe),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=P0e;e.tangents(i,N0e),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new Lr);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return t.x=i*d+s*a+r*l-o*c,t.y=r*d+s*c+o*a-i*l,t.z=o*d+s*l+i*c-r*a,t.w=s*d-i*a-r*c-o*l,t}inverse(e){void 0===e&&(e=new Lr);const t=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(t*t+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new Lr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new xe);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;return t.x=d*l+m*-s+h*-c-f*-a,t.y=h*l+m*-a+f*-s-d*-c,t.z=f*l+m*-c+d*-a-h*-s,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,o;void 0===t&&(t="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new Lr(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new Lr);const r=this.x,o=this.y,s=this.z,a=this.w;let f,m,v,E,D,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),v=Math.sin(f),E=Math.sin((1-t)*f)/v,D=Math.sin(t*f)/v):(E=1-t,D=t),i.x=E*r+D*c,i.y=E*o+D*l,i.z=E*s+D*d,i.w=E*a+D*h,i}integrate(e,t,i,r){void 0===r&&(r=new Lr);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,f=.5*t;return r.x+=f*(o*h+s*d-a*l),r.y+=f*(s*h+a*c-o*d),r.z+=f*(a*h+o*l-s*c),r.w+=f*(-o*c-s*l-a*d),r}}const P0e=new xe,N0e=new xe,F0e={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let un=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=F0e,n})();class Ti{constructor(e){void 0===e&&(e={}),this.position=new xe,this.quaternion=new Lr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Ti.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Ti.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new xe),i.vsub(e,r),t.conjugate(gz),gz.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new xe),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new xe),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new xe),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const gz=new Lr;class Pf extends un{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:un.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new xe;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){t[s[c]].vsub(t[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new xe;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];Pf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const o=new xe,s=new xe;t.vsub(e,s),i.vsub(t,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,o,s,a,c,l){const d=new xe;let h=-1,f=-Number.MAX_VALUE;for(let v=0;v<i.faces.length;v++){d.copy(i.faceNormals[v]),o.vmult(d,d);const E=d.dot(s);E>f&&(f=E,h=v)}const m=[];for(let v=0;v<i.faces[h].length;v++){const E=i.vertices[i.faces[h][v]],D=new xe;D.copy(E),o.vmult(D,D),r.vadd(D,D),m.push(D)}h>=0&&this.clipFaceAgainstHull(s,e,t,m,a,c,l)}findSeparatingAxis(e,t,i,r,o,s,a,c){const l=new xe,d=new xe,h=new xe,f=new xe,m=new xe,v=new xe;let E=Number.MAX_VALUE;const D=this;if(D.uniqueAxes)for(let H=0;H!==D.uniqueAxes.length;H++){i.vmult(D.uniqueAxes[H],l);const Y=D.testSepAxis(l,e,t,i,r,o);if(!1===Y)return!1;Y<E&&(E=Y,s.copy(l))}else{const H=a?a.length:D.faces.length;for(let Y=0;Y<H;Y++){l.copy(D.faceNormals[a?a[Y]:Y]),i.vmult(l,l);const Ie=D.testSepAxis(l,e,t,i,r,o);if(!1===Ie)return!1;Ie<E&&(E=Ie,s.copy(l))}}if(e.uniqueAxes)for(let H=0;H!==e.uniqueAxes.length;H++){o.vmult(e.uniqueAxes[H],d);const Y=D.testSepAxis(d,e,t,i,r,o);if(!1===Y)return!1;Y<E&&(E=Y,s.copy(d))}else{const H=c?c.length:e.faces.length;for(let Y=0;Y<H;Y++){d.copy(e.faceNormals[c?c[Y]:Y]),o.vmult(d,d);const Ie=D.testSepAxis(d,e,t,i,r,o);if(!1===Ie)return!1;Ie<E&&(E=Ie,s.copy(d))}}for(let H=0;H!==D.uniqueEdges.length;H++){i.vmult(D.uniqueEdges[H],f);for(let Y=0;Y!==e.uniqueEdges.length;Y++)if(o.vmult(e.uniqueEdges[Y],m),f.cross(m,v),!v.almostZero()){v.normalize();const he=D.testSepAxis(v,e,t,i,r,o);if(!1===he)return!1;he<E&&(E=he,s.copy(v))}}return r.vsub(t,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,t,i,r,o,s){Pf.project(this,e,i,r,gO),Pf.project(t,e,o,s,_O);const c=gO[0],l=gO[1],d=_O[0],h=_O[1];if(c<h||d<l)return!1;const f=c-h,m=d-l;return f<m?f:m}calculateLocalInertia(e,t){const i=new xe,r=new xe;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*s*2*s+2*a*2*a),t.y=1/12*e*(2*o*2*o+2*a*2*a),t.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,o,s,a){const c=new xe,l=new xe,d=new xe,h=new xe,f=new xe,m=new xe,v=new xe,E=new xe,D=this,Y=r,he=[];let Ie=-1,Le=Number.MAX_VALUE;for(let ft=0;ft<D.faces.length;ft++){c.copy(D.faceNormals[ft]),i.vmult(c,c);const _t=c.dot(e);_t<Le&&(Le=_t,Ie=ft)}if(Ie<0)return;const $e=D.faces[Ie];$e.connectedFaces=[];for(let ft=0;ft<D.faces.length;ft++)for(let _t=0;_t<D.faces[ft].length;_t++)-1!==$e.indexOf(D.faces[ft][_t])&&ft!==Ie&&-1===$e.connectedFaces.indexOf(ft)&&$e.connectedFaces.push(ft);const ot=$e.length;for(let ft=0;ft<ot;ft++){const _t=D.vertices[$e[ft]];_t.vsub(D.vertices[$e[(ft+1)%ot]],l),d.copy(l),i.vmult(d,d),t.vadd(d,d),h.copy(this.faceNormals[Ie]),i.vmult(h,h),t.vadd(h,h),d.cross(h,f),f.negate(f),m.copy(_t),i.vmult(m,m),t.vadd(m,m);const lt=$e.connectedFaces[ft];v.copy(this.faceNormals[lt]);const ht=this.getPlaneConstantOfFace(lt);E.copy(v),i.vmult(E,E);const Mt=ht-E.dot(t);for(this.clipFaceAgainstPlane(Y,he,E,Mt);Y.length;)Y.shift();for(;he.length;)Y.push(he.shift())}v.copy(this.faceNormals[Ie]);const mt=this.getPlaneConstantOfFace(Ie);E.copy(v),i.vmult(E,E);const pt=mt-E.dot(t);for(let ft=0;ft<Y.length;ft++){let _t=E.dot(Y[ft])+pt;_t<=o&&(console.log(`clamped: depth=${_t} to minDist=${o}`),_t=o),_t<=s&&_t<=1e-6&&a.push({point:Y[ft],normal:E,depth:_t})}}clipFaceAgainstPlane(e,t,i,r){let o,s;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new xe;h.copy(l),t.push(h)}else{const h=new xe;c.lerp(l,o/(o-s),h),t.push(h)}else if(s<0){const h=new xe;c.lerp(l,o/(o-s),h),t.push(h),t.push(l)}c=l,o=s}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new xe);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)t.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>t.x&&(t.x=o.x),o.y<e.y?e.y=o.y:o.y>t.y&&(t.y=o.y),o.z<e.z?e.z=o.z:o.z>t.z&&(t.z=o.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new xe);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==t;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const o=this.vertices;let s,a,c,l,d,h,f=new xe;for(let m=0;m<o.length;m++)f.copy(o[m]),t.vmult(f,f),e.vadd(f,f),(void 0===s||f.x<s)&&(s=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===d||f.y>d)&&(d=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new xe);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let o=0;o<i;o++){const s=r[o];t.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];t.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new xe;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],d=new xe;e.vsub(l,d);const h=c.dot(d),f=new xe;s.vsub(l,f);const m=c.dot(f);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,t,i,r,o){const s=e.vertices.length,a=B0e;let c=0,l=0;const d=j0e,h=e.vertices;d.setZero(),Ti.vectorToLocalFrame(i,r,t,a),Ti.pointToLocalFrame(i,r,d,d);const f=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const v=h[m].dot(a);v>c&&(c=v),v<l&&(l=v)}if(l-=f,c-=f,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const gO=[],_O=[],B0e=(new xe,new xe),j0e=new xe;class OE extends un{constructor(e){super({type:un.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=xe,o=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Pf({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new xe),OE.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let o=0;o!==i.length;o++)t.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)Qu.set(o[s][0],o[s][1],o[s][2]),t.vmult(Qu,Qu),e.vadd(Qu,Qu),i(Qu.x,Qu.y,Qu.z)}calculateWorldAABB(e,t,i,r){const o=this.halfExtents;kl[0].set(o.x,o.y,o.z),kl[1].set(-o.x,o.y,o.z),kl[2].set(-o.x,-o.y,o.z),kl[3].set(-o.x,-o.y,-o.z),kl[4].set(o.x,-o.y,-o.z),kl[5].set(o.x,o.y,-o.z),kl[6].set(-o.x,o.y,-o.z),kl[7].set(o.x,-o.y,o.z);const s=kl[0];t.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=kl[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const Qu=new xe,kl=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe];class hn extends k0e{constructor(e){void 0===e&&(e={}),super(),this.id=hn.idCounter++,this.index=-1,this.world=null,this.vlambda=new xe,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new xe,this.previousPosition=new xe,this.interpolatedPosition=new xe,this.initPosition=new xe,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new xe,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new xe,this.force=new xe;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?hn.STATIC:hn.DYNAMIC,typeof e.type==typeof hn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=hn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new xe,this.quaternion=new Lr,this.initQuaternion=new Lr,this.previousQuaternion=new Lr,this.interpolatedQuaternion=new Lr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new xe,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new xe,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new xe,this.invInertia=new xe,this.invInertiaWorld=new Oc,this.invMassSolve=0,this.invInertiaSolve=new xe,this.invInertiaWorldSolve=new Oc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new xe(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new xe(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new tr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new xe,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=hn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===hn.SLEEPING&&this.dispatchEvent(hn.wakeupEvent)}sleep(){this.sleepState=hn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===hn.AWAKE&&i<r?(this.sleepState=hn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(hn.sleepyEvent)):t===hn.SLEEPY&&i>r?this.wakeUp():t===hn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(hn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===hn.SLEEPING||this.type===hn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new xe),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new xe,o=new Lr;return t&&r.copy(t),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=t[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=U0e,s=V0e,a=this.quaternion,c=this.aabb,l=z0e;for(let d=0;d!==r;d++){const h=e[d];a.vmult(t[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=H0e,r=G0e;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new xe),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=$0e;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new xe),this.type!==hn.DYNAMIC)return;const i=Y0e,r=X0e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===hn.DYNAMIC&&(this.sleepState===hn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new xe),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=t,r=K0e;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=q0e;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new xe),this.type!==hn.DYNAMIC)return;const i=J0e,r=Z0e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Q0e;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),OE.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new xe;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==hn.DYNAMIC&&this.type!==hn.KINEMATIC||this.sleepState===hn.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*f.x,r.y+=a.y*m*f.y,r.z+=a.z*m*f.z;const v=h.elements,E=this.angularFactor,D=c.x*E.x,H=c.y*E.y,Y=c.z*E.z;o.x+=e*(v[0]*D+v[1]*H+v[2]*Y),o.y+=e*(v[3]*D+v[4]*H+v[5]*Y),o.z+=e*(v[6]*D+v[7]*H+v[8]*Y),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}hn.idCounter=0,hn.COLLIDE_EVENT_NAME="collide",hn.DYNAMIC=1,hn.STATIC=2,hn.KINEMATIC=4,hn.AWAKE=0,hn.SLEEPY=1,hn.SLEEPING=2,hn.wakeupEvent={type:"wakeup"},hn.sleepyEvent={type:"sleepy"},hn.sleepEvent={type:"sleep"};const U0e=new xe,V0e=new Lr,z0e=new tr,H0e=new Oc,G0e=new Oc,$0e=(new Oc,new xe),Y0e=new xe,X0e=new xe,K0e=new xe,q0e=new xe,J0e=new xe,Z0e=new xe,Q0e=new xe;new xe,new xe,new Lr,new xe,new xe,new xe,new xe;class by{constructor(){this.rayFromWorld=new xe,this.rayToWorld=new xe,this.hitNormalWorld=new xe,this.hitPointWorld=new xe,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let _z,bz,yz,vz,xz,wz,Ez;_z=un.types.SPHERE,bz=un.types.PLANE,yz=un.types.BOX,vz=un.types.CYLINDER,xz=un.types.CONVEXPOLYHEDRON,wz=un.types.HEIGHTFIELD,Ez=un.types.TRIMESH;class ro{get[_z](){return this._intersectSphere}get[bz](){return this._intersectPlane}get[yz](){return this._intersectBox}get[vz](){return this._intersectConvex}get[xz](){return this._intersectConvex}get[wz](){return this._intersectHeightfield}get[Ez](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new xe),void 0===t&&(t=new xe),this.from=e.clone(),this.to=t.clone(),this.direction=new xe,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ro.ANY,this.result=new by,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||ro.ANY,this.result=t.result||new by,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Az),xO.length=0,e.broadphase.aabbQuery(e,Az,xO),this.intersectBodies(xO),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=sye,o=aye;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function Eye(n,e,t){t.vsub(n,Nf);const i=Nf.dot(e);return e.scale(i,PE),PE.vadd(n,PE),t.distanceTo(PE)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,o)}_intersectPlane(e,t,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new xe(0,0,1);t.vmult(l,l);const d=new xe;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const v=new xe,E=new xe,D=new xe;s.vsub(i,v);const H=-l.dot(v)/m;c.scale(H,E),s.vadd(E,D),this.reportIntersection(l,D,o,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,o=this.from;t.x=Math.min(r.x,o.x),t.y=Math.min(r.y,o.y),t.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,t,i,r,o){const s=cye;s.from.copy(this.from),s.to.copy(this.to),Ti.pointToLocalFrame(i,t,s.from,s.from),Ti.pointToLocalFrame(i,t,s.to,s.to),s.updateDirection();const a=lye;let c,l,d,h;c=l=0,d=h=e.data.length-1;const f=new tr;s.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let v=l;v<h;v++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,v,f),f.overlapsRay(s)){if(e.getConvexTrianglePillar(m,v,!1),Ti.pointToWorldFrame(i,t,e.pillarOffset,kE),this._intersectConvex(e.pillarConvex,t,kE,r,o,Sz),this.result.shouldStop)return;e.getConvexTrianglePillar(m,v,!0),Ti.pointToWorldFrame(i,t,e.pillarOffset,kE),this._intersectConvex(e.pillarConvex,t,kE,r,o,Sz)}}}_intersectSphere(e,t,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),f=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=dye,v=uye;if(!(f<0))if(0===f)s.lerp(a,f,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,o,r,-1);else{const E=(-d-Math.sqrt(f))/(2*l),D=(-d+Math.sqrt(f))/(2*l);if(E>=0&&E<=1&&(s.lerp(a,E,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,o,r,-1)),this.result.shouldStop)return;D>=0&&D<=1&&(s.lerp(a,D,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,o,r,-1))}}_intersectConvex(e,t,i,r,o,s){const a=hye,c=Cz,l=s&&s.faceList||null,d=e.faces,h=e.vertices,f=e.faceNormals,m=this.direction,v=this.from,D=v.distanceTo(this.to),H=l?l.length:d.length,Y=this.result;for(let he=0;!Y.shouldStop&&he<H;he++){const Ie=l?l[he]:he,Le=d[Ie],$e=f[Ie],ot=t,mt=i;c.copy(h[Le[0]]),ot.vmult(c,c),c.vadd(mt,c),c.vsub(v,c),ot.vmult($e,a);const pt=m.dot(a);if(Math.abs(pt)<this.precision)continue;const ft=a.dot(c)/pt;if(!(ft<0)){m.scale(ft,ra),ra.vadd(v,ra),kc.copy(h[Le[0]]),ot.vmult(kc,kc),mt.vadd(kc,kc);for(let _t=1;!Y.shouldStop&&_t<Le.length-1;_t++){Pl.copy(h[Le[_t]]),Nl.copy(h[Le[_t+1]]),ot.vmult(Pl,Pl),ot.vmult(Nl,Nl),mt.vadd(Pl,Pl),mt.vadd(Nl,Nl);const xt=ra.distanceTo(v);!ro.pointInTriangle(ra,kc,Pl,Nl)&&!ro.pointInTriangle(ra,Pl,kc,Nl)||xt>D||this.reportIntersection(a,ra,o,r,Ie)}}}}_intersectTrimesh(e,t,i,r,o,s){const a=mye,c=xye,l=wye,d=Cz,h=gye,f=_ye,m=bye,v=vye,E=yye,D=e.indices,H=this.from,Y=this.to,he=this.direction;l.position.copy(i),l.quaternion.copy(t),Ti.vectorToLocalFrame(i,t,he,h),Ti.pointToLocalFrame(i,t,H,f),Ti.pointToLocalFrame(i,t,Y,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,m.vsub(f,h),h.normalize();const Ie=f.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let Le=0,$e=c.length;!this.result.shouldStop&&Le!==$e;Le++){const ot=c[Le];e.getNormal(ot,a),e.getVertex(D[3*ot],kc),kc.vsub(f,d);const mt=h.dot(a),pt=a.dot(d)/mt;if(pt<0)continue;h.scale(pt,ra),ra.vadd(f,ra),e.getVertex(D[3*ot+1],Pl),e.getVertex(D[3*ot+2],Nl);const ft=ra.distanceSquared(f);!ro.pointInTriangle(ra,Pl,kc,Nl)&&!ro.pointInTriangle(ra,kc,Pl,Nl)||ft>Ie||(Ti.vectorToWorldFrame(t,a,E),Ti.pointToWorldFrame(i,t,ra,v),this.reportIntersection(E,v,o,r,ot))}c.length=0}reportIntersection(e,t,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case ro.ALL:this.hasHit=!0,l.set(s,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case ro.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c));break;case ro.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,Nf),i.vsub(t,yy),e.vsub(t,wO);const o=Nf.dot(Nf),s=Nf.dot(yy),a=Nf.dot(wO),c=yy.dot(yy),l=yy.dot(wO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}ro.CLOSEST=1,ro.ANY=2,ro.ALL=4;const Az=new tr,xO=[],yy=new xe,wO=new xe,sye=new xe,aye=new Lr,ra=new xe,kc=new xe,Pl=new xe,Nl=new xe;new xe,new by;const Sz={faceList:[0]},kE=new xe,cye=new ro,lye=[],dye=new xe,uye=new xe,hye=new xe,Cz=(new xe,new xe,new xe),mye=new xe,gye=new xe,_ye=new xe,bye=new xe,yye=new xe,vye=new xe;new tr;const xye=[],wye=new Ti,Nf=new xe,PE=new xe;new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new ro,new xe,new xe,new xe,new xe(1,0,0),new xe(0,1,0),new xe(0,0,1),new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new tr,new xe,new tr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new tr,new xe,new Ti,new tr,new xe,new xe,new xe,new xe,new xe,new Lr,new Lr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new tr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new Lr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new tr,new ro;const mo=globalThis.performance||{};if(!mo.now){let n=Date.now();mo.timing&&mo.timing.navigationStart&&(n=mo.timing.navigationStart),mo.now=()=>Date.now()-n}new xe;var jf=g(1979);function Cg(n,e,t){e||(e=new Gn(Gn.IDENTITY));const i=new Gn(Gn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const o=new Gn(Gn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(o)}n.scale&&i.scale(n.scale)}const r=new Gn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const o of n.nodes||n.children||[])if(!1===Cg(o,r,t))return!1;return!0}function Zz(){PV([H6,wg])}function Qz(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||Cg(r,new Gn(Gn.IDENTITY),(o,s)=>o!==t||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function CO(n,e){return MO.apply(this,arguments)}function MO(){return MO=Lt(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(o=>o.blob())):fetch(t);const r=yield sE(i,wg,{DracoLoader:XR,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),Qz(n.scenegraphNode,r)}),MO.apply(this,arguments)}function Mwe(n,e){return TO.apply(this,arguments)}function TO(){return TO=Lt(function*(n,e){return Qz(n,yield e)}),TO.apply(this,arguments)}function IO(){return IO=Lt(function*(n){console.log("Starting Collisioning");const e=n.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new Gn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new tr({lowerBound:new xe(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new xe(...l.map((d,h)=>Math.max(d,c[h])))})}}),t=[];for(const s of n.filter(a=>!!a.scenegraph)){const a=yield ny(s.scenegraph,wg,{DracoLoader:XR,decompress:!0,postProcess:!0});for(const c of a.scenes)Cg(c,new Gn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new tr({lowerBound:new xe(...f.map((v,E)=>Math.min(v,m[E]))),upperBound:new xe(...m.map((v,E)=>Math.max(v,f[E])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of t)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),IO.apply(this,arguments)}function DO(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new b0e;break;case"cone":i=new w0e;break;case"cylinder":i=new E0e;break;default:i=new I0e}return new eR({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Ci.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function eH(n,e,t){if(e&&0!==e.length)return new q2({id:n,pickable:!0,data:e.map(i=>({...i,position:new Gn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}let Iwe=(()=>{class n extends v2{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),Zz()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const s of t.data){const a=s.geometry??"cube";s.scenegraph?i.scenegraph.push(s):void 0!==i[a]&&i[a].push(s)}const r={};for(const s of i.scenegraph)s.scenegraph&&s.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,s.scenegraph)&&(r[s.scenegraph]=CO({scenegraph:s.scenegraph},n.gltfCache));const o=[];for(const[s,a]of Object.entries(i))if("scenegraph"===s)for(const c of a)o.push(new mO({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:Ci.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?Mwe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===s?(o.push(eH("text",a.filter(c=>c.unpickable),{pickable:!1})),o.push(eH("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===s?o.push(DO(s,a,{wireframe:!0,pickable:!1,geometry:s})):(o.push(DO(s,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:s})),o.push(DO(`${s}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:s})));return t.doCollisions&&function Twe(n){IO.apply(this,arguments)}(t.data),o.filter(s=>!!s)}getPickingInfo(t){return t.info}}return n})();function tH(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),tH(t,e);return e}function RO(){return RO=Lt(function*(n,e,t,i){Zz();const r=yield CO({scenegraph:n,scenegraphNode:t},i),o={},s=[];for(const a of r.scenes)Cg(a,e=new Gn(e||Gn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Gn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:d["@id"],transformMatrix:new Gn(e||Gn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new tr({lowerBound:new xe(...f.map((v,E)=>Math.min(v,m[E]))),upperBound:new xe(...m.map((v,E)=>Math.max(v,f[E])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of tH(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new xe(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new Gn(Gn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),RO.apply(this,arguments)}let Rwe=(()=>{class n{constructor(t){this.deckProps=t,this.bodyUILayer=new Iwe({}),this.nodeClickSubject=new V,this.nodeHoverStartSubject=new V,this.nodeHoverStopSubject=new V,this.sceneRotationSubject=new ui([0,0]),this.nodeDragStartSubject=new V,this.nodeDragSubject=new V,this.nodeDragEndSubject=new V,this.nodeClick$=this.nodeClickSubject.pipe(es()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(es()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(es()),this.sceneRotation$=this.sceneRotationSubject.pipe(es()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(es()),this.nodeDrag$=this.nodeDragSubject.pipe(es()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(es());const i={...t,views:["orthographic"===t.camera?new A2({flipY:!1,near:-1e3}):new GV({orbitAxis:"Y"})],controller:t.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};t.legacyLighting&&(i.effects=[new T2({ambientLight:new WV({color:[255,255,255],intensity:10})})]),this.deck=new W2(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:t.minRotationX??-15,maxRotationX:t.maxRotationX??15,target:t.target??[.5,.5,0],rotationX:0,rotationOrbit:t.rotation??0,zoom:t.zoom??9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){var t=this;return Lt(function*(){for(;!t.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(t){if(t?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of t)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new Gn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function Dwe(n,e,t,i){return RO.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",t),(t=t.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new Gn(t.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:t}})}setRotationX(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:t}})}setZoom(t){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:t}})}setTarget(t){this.deck.setProps({viewState:{...this.deck.props.viewState,target:t}})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object?.["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){t.picked&&t.object?.["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(t){if(t.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...t.viewState}}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){t?.object?.["@id"]&&r.next({node:t.object,info:t,e:i})}}return Ge([jf.ak],n.prototype,"_onHover",null),Ge([jf.ak],n.prototype,"_onClick",null),Ge([jf.ak],n.prototype,"_onViewStateChange",null),Ge([jf.ak],n.prototype,"_onDragStart",null),Ge([jf.ak],n.prototype,"_onDrag",null),Ge([jf.ak],n.prototype,"_onDragEnd",null),n})();const Sy=P(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});let iH=(()=>{class n{constructor(){this.bootstrap$=new $m(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Owe(n,e){return n===e}function kO(n,e=Owe){let t=null,i=null;function r(){return function kwe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let Pwe=(()=>{class n{static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n._value={},n})();const rH=new vt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>Pwe.pop()}),oH=new vt("\u0275NGXS_STATE_FACTORY"),sH=new vt("\u0275NGXS_STATE_CONTEXT_FACTORY"),{isArray:Nwe}=Array,{getPrototypeOf:Fwe,prototype:Lwe,keys:Bwe}=Object;function aH(n){if(1===n.length){const e=n[0];if(Nwe(e))return{args:e,keys:null};if(function jwe(n){return n&&"object"==typeof n&&Fwe(n)===Lwe}(e)){const t=Bwe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Uwe}=Array;function Cy(n){return A(e=>function Vwe(n,e){return Uwe(e)?n(...e):n(e)}(n,e))}function cH(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function My(...n){const e=wt(n),{args:t,keys:i}=aH(n),r=new Ye(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;Li(t[d]).subscribe(Q(o,f=>{h||(h=!0,l--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?cH(i,a):a),o.complete())}))}});return e?r.pipe(Cy(e)):r}function Ld(n,e){const t=L(n)?n:()=>n,i=r=>r.error(t());return new Ye(e?r=>e.schedule(i,0,r):i)}function Uf(n){return!!n&&(n instanceof Ye||L(n.lift)&&L(n.subscribe))}function Ei(n,e){return fe((t,i)=>{let r=0;t.subscribe(Q(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Ls(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,es({connector:()=>new $m(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function xi(n){return n<=0?()=>ee:fe((e,t)=>{let i=0;e.subscribe(Q(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function lH(n,e){return e?t=>t.pipe(lH((i,r)=>Li(n(i,r)).pipe(A((o,s)=>e(i,o,r,s))))):fe((t,i)=>{let r=0,o=null,s=!1;t.subscribe(Q(i,a=>{o||(o=Q(i,void 0,()=>{o=null,s&&i.complete()}),Li(n(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function Mg(n){return fe((e,t)=>{let i=!1;e.subscribe(Q(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function qa(n){return fe((e,t)=>{let o,i=null,r=!1;i=e.subscribe(Q(t,void 0,void 0,s=>{o=Li(n(s,qa(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function dr(n){return fe((e,t)=>{Li(n).subscribe(Q(t,()=>t.complete(),U)),!t.closed&&e.subscribe(t)})}function ur(n,e,t){const i=L(n)||e||t?{next:n,error:e,complete:t}:n;return i?fe((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Q(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ee}function Ty(...n){return function zwe(){return z(1)}()(Bi(n,Tt(n)))}function Ca(...n){const e=Tt(n);return fe((t,i)=>{(e?Ty(n,t,e):Ty(n,t)).subscribe(i)})}function Vf(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const dH=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?t:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),n),n},PO=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),NO=n=>n&&"object"==typeof n&&!Array.isArray(n),FO=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(NO(n)&&NO(t))for(const i in t)NO(t[i])?(n[i]||Object.assign(n,{[i]:{}}),FO(n[i],t[i])):Object.assign(n,{[i]:t[i]});return FO(n,...e)};let uH=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return yI(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return nn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return nn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}}return n.\u0275fac=function(t){return new(t||n)(nt(nn),nt(ma))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hH=new vt("ROOT_OPTIONS"),fH=new vt("ROOT_STATE_TOKEN"),pH=new vt("FEATURE_STATE_TOKEN"),mH=new vt("NGXS_PLUGINS"),Bd="NGXS_META",gH="NGXS_OPTIONS_META",LO="NGXS_SELECTOR_META";let zE=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=uH}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:function(t){let i=null;return t?i=new t:(r=nt(hH),i=FO(new n,r)),i;var r},providedIn:"root"}),n})();class Jwe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let Zwe=(()=>{class n{enter(t){return t()}leave(t){return t()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _H=new vt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),Qwe=new vt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=Vt(_m),e=n.get(_H);return n.get(e||(typeof Ii.Zone<"u"?uH:Zwe))}});function BO(n){if(!n.hasOwnProperty(Bd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,Bd,{value:e})}return zf(n)}function zf(n){return n[Bd]}function HE(n){return n[LO]}function bH(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function e1e(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function t1e(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let o=t;for(;++i<r;)o=o+" && "+(t=t+"."+e[i]);return new Function("store","return "+o+";")}(n)}function a1e(...n){return function Tg(n,e,t=d1e){const i=function u1e(n){return n.reduce((e,t)=>(e[Vf(t)]=!0,e),{})}(n),r=e&&function h1e(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(o){return o.pipe(function c1e(n,e){return Ei(t=>{const i=Vf(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function d1e(){return A(n=>n.action)}function GE(n){return e=>new Ye(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let yH=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(nt(Qwe))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vH(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const o=e.pop();o&&n(...o)}t=!1}}}class f1e extends V{constructor(){super(...arguments),this._orderedNext=vH(e=>super.next(e))}next(e){this._orderedNext(e)}}class p1e extends ui{constructor(e){super(e),this._orderedNext=vH(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let xH=(()=>{class n extends f1e{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=wi(n)))(i||n)}}(),n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wH=n=>(...e)=>n.shift()(...e,(...i)=>wH(n)(...i));let EH=(()=>{class n{constructor(t){this._injector=t,this._errorHandler=null}reportErrorSafely(t){null===this._errorHandler&&(this._errorHandler=this._injector.get(ga));try{this._errorHandler.handleError(t)}catch{}}}return n.\u0275fac=function(t){return new(t||n)(nt(wr))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UO=(()=>{class n extends p1e{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VO=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(nt(n,12),nt(mH,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})(),AH=(()=>{class n extends V{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=wi(n)))(i||n)}}(),n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g1e=(()=>{class n{constructor(t,i,r,o,s,a){this._actions=t,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function m1e(n,e){return t=>{let i=!1;return t.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>n.reportErrorSafely(r))}))}}),new Ye(r=>(i=!0,t.pipe(GE(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?$t(this._stateStream.getValue()):My(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return wH([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(Ls())}getActionResultStream(t){return this._actionResults.pipe(Ei(i=>i.action===t&&"DISPATCHED"!==i.status),xi(1),Ls())}createDispatchObservable(t){return t.pipe(lH(i=>{switch(i.status){case"SUCCESSFUL":return $t(this._stateStream.getValue());case"ERRORED":return Ld(i.error);default:return ee}})).pipe(Ls())}}return n.\u0275fac=function(t){return new(t||n)(nt(xH),nt(AH),nt(VO),nt(UO),nt(yH),nt(EH))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Iy=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(nt(UO),nt(g1e),nt(zE))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zO=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();function r(c){return PO(c,t.path)}function o(c,l){const d=dH(c,t.path,l);return i.setState(d),d}function s(c,l){return o(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function _1e(n){return e=>{const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(c);return s(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?s(l,c):o(l,c)},dispatch:c=>i.dispatch(c)}}}return n.\u0275fac=function(t){return new(t||n)(nt(Iy))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();new RegExp("^[a-zA-Z0-9_]+$");class CH{static get type(){return"@@INIT"}}class MH{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new vt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Ig=(()=>{class n{constructor(t,i,r,o,s,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=kO(()=>{const l=this;function d(f){const m=l.statePaths[f];return m?bH(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let m=d(f);return m||((...v)=>(m||(m=d(f)),m?m(...v):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let i={};return i=Array.isArray(t)?t.slice():function s1e(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,i}ngOnDestroy(){var t;null===(t=this._actionsSubscription)||void 0===t||t.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function n1e(n){const e=t=>n.find(r=>r===t)[Bd].name;return n.reduce((t,i)=>{const{name:r,children:o}=i[Bd];return t[r]=(o||[]).map(e),t},{})}(i),o=function o1e(n){const e=[],t={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),t[r]=!0,n[r].forEach(s=>{t[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),s=function r1e(n,e={}){const t=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=t(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function i1e(n){return n.reduce((e,t)=>(e[t[Bd].name]=t,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],f=d[Bd];this.addRuntimeInfoToMeta(f,h);const m={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(d),defaults:n.cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((s,a)=>dH(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new V;this._actionsSubscription=this._actions.pipe(Ei(i=>"DISPATCHED"===i.status),ye(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe(A(()=>({action:r,status:"SUCCESSFUL"})),Mg({action:r,status:"CANCELED"}),qa(o=>$t({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=Vf(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Bi(h)),Uf(h)?(h=h.pipe(ye(f=>f instanceof Promise?Bi(f):Uf(f)?f:$t(f)),Mg({})),l.options.cancelUncompleted&&(h=h.pipe(dr(t.pipe(a1e(i)))))):h=$t({}).pipe(Ls()),o.push(h)}catch(h){o.push(Ld(h))}s=!0}}return o.length||o.push($t({})),My(o)}addToStatesMap(t){const i=[],r=this.statesByName;for(const o of t){const s=zf(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==PO(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(nt(wr),nt(zE),nt(n,12),nt(xH),nt(AH),nt(zO),nt(rH,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();function TH(n){const e=HE(n)||zf(n);return e&&e.makeRootSelector||(()=>n)}let Fl=(()=>{class n{constructor(t,i,r,o,s,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(GE(this._internalExecutionStrategy),Ls({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(A(i),qa(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?$t(void 0):Ld(r)}),je(),GE(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(xi(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(GE(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return TH(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),t):t;this._stateStream.next(s)}}}return n.\u0275fac=function(t){return new(t||n)(nt(UO),nt(Iy),nt(zE),nt(yH),nt(Ig),nt(rH,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WE=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.store=null,n.config=null,n.\u0275fac=function(t){return new(t||n)(nt(Fl),nt(zE))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IH=(()=>{class n{constructor(t,i,r,o,s){this._store=t,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new V}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(Ei(()=>!!i),ur(()=>this._invokeInitOnStates(i.states)),ye(()=>this._bootstrapper.appBootstrapped$),Ei(r=>!!r),qa(r=>(this._internalErrorReporter.reportErrorSafely(r),ee)),dr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>PO(o,i.path)).pipe(Ca(void 0),fe((n,e)=>{let t,i=!1;n.subscribe(Q(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))}),dr(this._destroy$)).subscribe(([o,s])=>{const a=new Jwe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(nt(Fl),nt(EH),nt(Iy),nt(zO),nt(iH))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C1e=(()=>{class n{constructor(t,i,r,o,s=[],a){const c=t.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new CH,c)}}return n.\u0275fac=function(t){return new(t||n)(nt(Ig),nt(Iy),nt(Fl),nt(WE),nt(fH,8),nt(IH))},n.\u0275mod=on({type:n}),n.\u0275inj=tn({}),n})(),M1e=(()=>{class n{constructor(t,i,r,o=[],s){const a=n.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new MH(c.defaults),c))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(nt(Fl),nt(Iy),nt(Ig),nt(pH,8),nt(IH))},n.\u0275mod=on({type:n}),n.\u0275inj=tn({}),n})(),DH=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:C1e,providers:[Ig,VO,...t,...n.ngxsTokenProviders(t,i)]}}static forFeature(t=[]){return{ngModule:M1e,providers:[Ig,VO,...t,{provide:pH,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,i){return[{provide:_H,useValue:i.executionStrategy},{provide:fH,useValue:t},{provide:hH,useValue:i},{provide:Qw,useFactory:n.appBootstrapListenerFactory,multi:!0,deps:[iH]},{provide:sH,useExisting:zO},{provide:oH,useExisting:Ig}]}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=on({type:n}),n.\u0275inj=tn({}),n})();function WO(n,e){return(t,i)=>{const r=BO(t.constructor);Array.isArray(n)||(n=[n]);for(const o of n){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function RH(n){return i=>{const r=i,o=BO(r),s=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[gH]||{}),n)}(s);(function t(i){const{meta:r,inheritedStateClass:o,optionsWithInheritance:s}=i,{children:a,defaults:c,name:l}=s,d="string"==typeof l?l:l&&l.getName()||null;if(o.hasOwnProperty(Bd)){const h=o[Bd]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:o,inheritedStateClass:s,optionsWithInheritance:a}),r[gH]=a}}const T1e=36;function $E(n,...e){return function(t,i){const r=i.toString(),o=`__${r}__selector`,s=function D1e(n,e,t=[]){return e=e||function R1e(n){const e=n.length-1;return n.charCodeAt(e)===T1e?n.slice(0,e):n}(n),"string"==typeof e?bH(t.length?[e,...t]:e.split("."),WE.config):e}(r,n,e);Object.defineProperties(t,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function I1e(n){return WE.store||function qwe(){throw new Error("You have forgotten to import the NGXS module!")}(),WE.store.select(n)}(s))}}})}}const OH="NGXS_SELECTOR_OPTIONS_META",YE={getOptions:n=>n&&n[OH]||{},defineOptions:(n,e)=>{n&&(n[OH]=e)}};function O1e(n,e){const t=function jO(n){return n.hasOwnProperty(LO)||Object.defineProperty(n,LO,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),HE(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function k1e(n,e){return Object.assign(Object.assign(Object.assign(Object.assign({},YE.getOptions(n.containerClass)||{}),YE.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}(r,i()),t}function Dy(n,e,t){const i=function E1e(n,e){const t=e&&e.containerClass,r=kO(function(...s){const a=n.apply(t,s);return a instanceof Function?kO.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=O1e(e,t);return r.makeRootSelector=function w1e(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function A1e(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),s=function S1e(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&zf(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>TH(a)(n));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,n,e);return function(a){const c=r.map(l=>l(a));try{return t(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,n,i),i}function Dg(n){return(e,t,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,t));const r=i?.value,o=Dy(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}let pk;try{pk=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pk=!1}let Ly,Yf,mk,Ir=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Lu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!pk)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(nt(ma))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $f(n){return function kEe(){if(null==Ly&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ly=!0}))}finally{Ly=Ly||!1}return Ly}()?n:!!n.capture}function PEe(){if(null==Yf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Yf=!1,Yf;if("scrollBehavior"in document.documentElement.style)Yf=!0;else{const n=Element.prototype.scrollTo;Yf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Yf}function aA(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ud(n){return n.composedPath?n.composedPath()[0]:n.target}function gk(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Pc(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class WEe extends M{constructor(e,t){super()}schedule(e,t=0){return this}}const dA={setInterval(n,e,...t){const{delegate:i}=dA;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=dA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class yk extends WEe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return dA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&dA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,oe(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class jy{constructor(e,t=jy.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}jy.now=DI.now;class vk extends jy{constructor(e,t=jy.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const uA=new vk(yk),$Ee=uA;function vi(n){return null!=n&&"false"!=`${n}`}function Ja(n,e=0){return function YEe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function hA(n){return Array.isArray(n)?n:[n]}function oo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Vd(n){return n instanceof kn?n.nativeElement:n}function ms(...n){const e=Tt(n),t=wt(n),{args:i,keys:r}=aH(n);if(0===i.length)return Bi([],e);const o=new Ye(KG(i,e,r?s=>cH(r,s):Ee));return t?o.pipe(Cy(t)):o}function KG(n,e,t=Ee){return i=>{qG(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)qG(e,()=>{const l=Bi(n[c],e);let d=!1;l.subscribe(Q(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function qG(n,e,t){n?ge(t,n,e):e()}let gA=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function rAe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function iAe(n){try{return n.frameElement}catch{return null}}(function hAe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===r9(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=r9(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function dAe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function uAe(n){return!function sAe(n){return function cAe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function oAe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function aAe(n){return function lAe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||i9(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Ir))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i9(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function r9(n){if(!i9(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class fAe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(xi(1)).subscribe(e)}}let Mk=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new fAe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(gA),nt(nn),nt(Hn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function o9(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function s9(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const pAe=new vt("cdk-input-modality-detector-options"),mAe={ignoreKeys:[18,17,224,91,16]},kg=$f({passive:!0,capture:!0});let gAe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new ui(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ud(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(o9(s)?"keyboard":"mouse"),this._mostRecentTarget=Ud(s))},this._onTouchstart=s=>{s9(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ud(s))},this._options={...mAe,...o},this.modalityDetected=this._modality.pipe(function wk(n){return Ei((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(je()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,kg),r.addEventListener("mousedown",this._onMousedown,kg),r.addEventListener("touchstart",this._onTouchstart,kg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,kg),document.removeEventListener("mousedown",this._onMousedown,kg),document.removeEventListener("touchstart",this._onTouchstart,kg))}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Ir),nt(nn),nt(Hn),nt(pAe,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const bAe=new vt("cdk-focus-monitor-default-options"),_A=$f({passive:!0,capture:!0});let Kf=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new V,this._rootNodeFocusAndBlurListener=a=>{for(let l=Ud(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=Vd(t);if(!this._platform.isBrowser||1!==r.nodeType)return $t();const o=function FEe(n){if(function NEe(){if(null==mk){const n=typeof document<"u"?document.head:null;mk=!(!n||!n.createShadowRoot&&!n.attachShadow)}return mk}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new V,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Vd(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=Vd(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=Ud(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,_A),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,_A)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,_A),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,_A),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(nt(nn),nt(Ir),nt(gAe),nt(Hn,8),nt(bAe,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const yAe=new vt("cdk-dir-doc",{providedIn:"root",factory:function vAe(){return Vt(Hn)}}),xAe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let qf=(()=>{class n{constructor(t){this.value="ltr",this.change=new Zt,t&&(this.value=function wAe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?xAe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(nt(yAe,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bA(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function Rk(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ja(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}const p9=$f({passive:!0,capture:!0});class NAe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ud(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,p9)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,p9)))}}class zy{static#e=this._eventManager=new NAe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Vd(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...m9,...i.animation},s=i.radius||function LAe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,v="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,E=new PAe(this,d,i,v);d.style.transform="scale3d(1, 1, 1)",E.state=0,i.persistent||(this._mostRecentTransientRipple=E);return!v&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(E),Y=()=>this._destroyRipple(E);d.addEventListener("transitionend",H),d.addEventListener("transitioncancel",Y)}),this._activeRipples.set(E,null),(v||!l)&&this._finishRippleTransition(E),E}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...m9,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Vd(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,_9.forEach(i=>{zy._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{b9.forEach(t=>{this._triggerElement.addEventListener(t,this,g9)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=o9(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!s9(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(_9.forEach(t=>zy._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&b9.forEach(t=>e.removeEventListener(t,this,g9)))}}const GAe=["addListener","removeListener"],WAe=["addEventListener","removeEventListener"],$Ae=["on","off"];function Pg(n,e,t,i){if(L(t)&&(i=t,t=void 0),i)return Pg(n,e,t).pipe(Cy(i));const[r,o]=function KAe(n){return L(n.addEventListener)&&L(n.removeEventListener)}(n)?WAe.map(s=>a=>n[s](e,a,t)):function YAe(n){return L(n.addListener)&&L(n.removeListener)}(n)?GAe.map(T9(n,e)):function XAe(n){return L(n.on)&&L(n.off)}(n)?$Ae.map(T9(n,e)):[];if(!r&&da(n))return ye(s=>Pg(s,e,t))(Li(n));if(!r)throw new TypeError("Invalid event target");return new Ye(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function T9(n,e){return t=>i=>n[t](e,i)}const $y={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=$y;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new M(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=$y;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=$y;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class JAe extends vk{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class qAe extends yk{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=$y.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&($y.cancelAnimationFrame(t),e._scheduled=void 0)}});let Pk,QAe=1;const vA={};function I9(n){return n in vA&&(delete vA[n],!0)}const eSe={setImmediate(n){const e=QAe++;return vA[e]=!0,Pk||(Pk=Promise.resolve()),Pk.then(()=>I9(e)&&n()),e},clearImmediate(n){I9(n)}},{setImmediate:tSe,clearImmediate:nSe}=eSe,xA={setImmediate(...n){const{delegate:e}=xA;return(e?.setImmediate||tSe)(...n)},clearImmediate(n){const{delegate:e}=xA;return(e?.clearImmediate||nSe)(n)},delegate:void 0};new class rSe extends vk{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class iSe extends yk{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=xA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(xA.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function Nk(n=0,e,t=$Ee){let i=-1;return null!=e&&(Xe(e)?t=e:i=e),new Ye(r=>{let o=function aSe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function D9(n,e=uA){return function sSe(n){return fe((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,t.next(l)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(Q(t,l=>{i=!0,r=l,o||Li(n(l)).subscribe(o=Q(t,a,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>Nk(n,e))}let R9=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new V,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ye(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(D9(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):$t()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ei(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Vd(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Pg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(nn),nt(Ir),nt(Hn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fk=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new V,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(D9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Ir),nt(nn),nt(Hn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Lk{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class EA extends Lk{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class AA extends Lk{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class dSe extends Lk{constructor(e){super(),this.element=e instanceof kn?e.nativeElement:e}}class Bk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof EA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof AA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof dSe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class uSe extends Bk{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||wr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let SA=(()=>{class n extends Bk{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Zt,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(He(wc),He(Ho),He(Hn))};static#t=this.\u0275dir=Ut({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[vn]})}return n})();const k9=PEe();class hSe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=oo(-this._previousScrollPosition.left),e.style.top=oo(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),k9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),k9&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class fSe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Ei(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class P9{enable(){}disable(){}attach(){}}function jk(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function N9(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class pSe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();jk(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let mSe=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new P9,this.close=s=>new fSe(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new hSe(this._viewportRuler,this._document),this.reposition=s=>new pSe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(nt(R9),nt(Fk),nt(nn),nt(Hn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Uk{constructor(e){if(this.scrollStrategy=new P9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class gSe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let F9=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_Se=(()=>{class n extends F9{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn),nt(nn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bSe=(()=>{class n extends F9{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ud(o)},this._clickListener=o=>{const s=Ud(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const d=c[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn),nt(Ir),nt(nn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CA=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||gk()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),gk()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Hn),nt(Ir))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Xy{constructor(e,t,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new V,this._attachments=new V,this._detachments=new V,this._locationChanges=M.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new V,this._outsidePointerEvents=new V,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=oo(this._config.width),e.height=oo(this._config.height),e.minWidth=oo(this._config.minWidth),e.minHeight=oo(this._config.minHeight),e.maxWidth=oo(this._config.maxWidth),e.maxHeight=oo(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=hA(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(dr(jr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const L9="cdk-overlay-connected-position-bounding-box",ySe=/([A-Za-z%]+)$/;class vSe{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new V,this._resizeSubscription=M.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(L9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),d=this._getOverlayFit(l,t,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Jf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(L9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=j9(t);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let f=0-a,m=a+o.height-i.height,v=this._subtractOverflows(o.width,0-s,s+o.width-i.width),E=this._subtractOverflows(o.height,f,m),D=v*E;return{visibleArea:D,isCompletelyWithinViewport:o.width*o.height===D,fitsInViewportVertically:E===o.height,fitsInViewportHorizontally:v==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=B9(this._overlayRef.getConfig().minHeight),a=B9(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=j9(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new gSe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,f;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>v&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-v/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>v&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-v/2)}return{top:s,left:h,bottom:a,right:f,width:d,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=oo(i.height),r.top=oo(i.top),r.bottom=oo(i.bottom),r.width=oo(i.width),r.left=oo(i.left),r.right=oo(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=oo(o)),s&&(r.maxWidth=oo(s))}this._lastBoundingBoxSize=i,Jf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Jf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Jf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Jf(i,this._getExactOverlayY(t,e,d)),Jf(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=oo(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=oo(s.maxWidth):o&&(i.maxWidth="")),Jf(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=oo(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=oo(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:N9(e,i),isOriginOutsideView:jk(e,i),isOverlayClipped:N9(t,i),isOverlayOutsideView:jk(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&hA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof kn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Jf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function B9(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(ySe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function j9(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const U9="cdk-global-overlay-wrapper";class xSe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(U9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let m="",v="",E="";c?E="flex-start":"center"===d?(E="center",f?v=h:m=h):f?"left"===d||"end"===d?(E="flex-end",m=h):("right"===d||"start"===d)&&(E="flex-start",v=h):"left"===d||"start"===d?(E="flex-start",m=h):("right"===d||"end"===d)&&(E="flex-end",v=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":v,t.justifyContent=E,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(U9),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let wSe=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new xSe}flexibleConnectedTo(t){return new vSe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Fk),nt(Hn),nt(Ir),nt(CA))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ESe=0,Ll=(()=>{class n{constructor(t,i,r,o,s,a,c,l,d,h,f,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=l,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new Uk(t);return s.direction=s.direction||this._directionality.value,new Xy(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+ESe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(mf)),new uSe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(mSe),nt(CA),nt(wc),nt(wSe),nt(_Se),nt(wr),nt(nn),nt(Hn),nt(qf),nt(E0),nt(bSe),nt(Zr,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zf(n,e){return{type:7,name:n,definitions:e,options:{}}}function Za(n,e=null){return{type:4,styles:e,timings:n}}function go(n){return{type:6,styles:n,offset:null}}function Qa(n,e,t){return{type:0,name:n,styles:e,options:t}}function Nc(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Ky(n){return new Ye(e=>{Li(n()).subscribe(e)})}function a7(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return A(t=>{let i=t;for(let r=0;r<e;r++){const o=i?.[n[r]];if(!(typeof o<"u"))return;i=o}return i})}g(1563);class IA{}class Bl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class FCe{encodeKey(e){return c7(e)}encodeValue(e){return c7(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const BCe=/%(\d[a-f0-9])/gi,jCe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function c7(n){return encodeURIComponent(n).replace(BCe,(e,t)=>jCe[t]??e)}function RA(n){return`${n}`}class nh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new FCe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function LCe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(RA):[RA(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new nh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(RA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(RA(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class UCe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function l7(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function d7(n){return typeof Blob<"u"&&n instanceof Blob}function u7(n){return typeof FormData<"u"&&n instanceof FormData}class Jy{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function VCe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Bl),this.context||(this.context=new UCe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new nh,this.urlWithParams=t}serializeBody(){return null===this.body?null:l7(this.body)||d7(this.body)||u7(this.body)||function zCe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||u7(this.body)?null:d7(this.body)?this.body.type||null:l7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new Jy(t,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var Fg=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Fg||{});class Wk{constructor(e,t=200,i="OK"){this.headers=e.headers||new Bl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Lg extends Wk{constructor(e={}){super(e),this.type=Fg.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Lg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Yk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Bg=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Jy)o=t;else{let c,l;c=r.headers instanceof Bl?r.headers:new Bl(r.headers),r.params&&(l=r.params instanceof nh?r.params:new nh({fromObject:r.params})),o=new Jy(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=$t(o).pipe(function qy(n,e){return L(e)?ye(n,e,1):ye(n,1)}(c=>this.handler.handle(c)));if(t instanceof Jy||"events"===r.observe)return s;const a=s.pipe(Ei(c=>c instanceof Lg));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(A(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(A(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(A(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(A(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new nh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Yk(r,i))}post(t,i,r={}){return this.request("POST",t,Yk(r,i))}put(t,i,r={}){return this.request("PUT",t,Yk(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(nt(IA))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const uMe=["*"];let kA;function Qy(n){return function hMe(){if(void 0===kA&&(kA=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(kA=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return kA}()?.createHTML(n)||n}function A7(n){return Error(`Unable to find icon with the name "${n}"`)}function S7(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function C7(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class ep{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let PA=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new ep(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(Jr.HTML,r);if(!s)throw C7(r);const a=Qy(s);return this._addSvgIconConfig(t,i,new ep("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new ep(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(Jr.HTML,i);if(!o)throw C7(i);const s=Qy(o);return this._addSvgIconSetConfig(t,new ep("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Jr.RESOURCE_URL,t);if(!i)throw S7(t);const r=this._cachedIconsByUrl.get(i);return r?$t(NA(r)):this._loadSvgIconFromConfig(new ep(t,null)).pipe(ur(o=>this._cachedIconsByUrl.set(i,o)),A(o=>NA(o)))}getNamedSvgIcon(t,i=""){const r=M7(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):Ld(A7(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?$t(NA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(A(i=>NA(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?$t(r):My(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(qa(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Jr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),$t(null)})))).pipe(A(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw A7(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(ur(i=>t.svgText=i),A(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?$t(null):this._fetchIcon(t).pipe(ur(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(Qy("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Qy("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function fMe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(Jr.RESOURCE_URL,i);if(!s)throw S7(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(A(l=>Qy(l)),function Ng(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(s)),es());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(M7(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return mMe(o)?new ep(o.url,null,o.options):new ep(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Bg,8),nt(I0),nt(Hn,8),nt(ga))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NA(n){return n.cloneNode(!0)}function M7(n,e){return n+":"+e}function mMe(n){return!(!n.url||!n.options)}const gMe=bA(class{constructor(n){this._elementRef=n}}),_Me=new vt("MAT_ICON_DEFAULT_OPTIONS"),bMe=new vt("mat-icon-location",{providedIn:"root",factory:function yMe(){const n=Vt(Hn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),T7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vMe=T7.map(n=>`[${n}]`).join(", "),xMe=/^url\(['"]?#(.*?)['"]?\)$/;let tp=(()=>{class n extends gMe{get inline(){return this._inline}set inline(t){this._inline=vi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=M.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(vMe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)T7.forEach(s=>{const a=i[o],c=a.getAttribute(s),l=c?c.match(xMe):null;if(l){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(xi(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(He(kn),He(PA),dl("aria-hidden"),He(bMe),He(ga),He(_Me,8))};static#t=this.\u0275cmp=jn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(ki("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Tn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[vn],ngContentSelectors:uMe,decls:1,vars:0,template:function(i,r){1&i&&(Qr(),Ln(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})();function XMe(n,e){}class FA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let N7=(()=>{class n extends Bk{constructor(t,i,r,o,s,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=aA(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=aA();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=aA())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(He(kn),He(Mk),He(Hn,8),He(FA),He(gA),He(nn),He(Xy),He(Kf))};static#t=this.\u0275cmp=jn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Qi(SA,7),2&i){let o;Vn(o=zn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&ki("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[vn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&pn(0,XMe,0,0,"ng-template",0)},dependencies:[SA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class qk{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new V,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Pc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const F7=new vt("DialogScrollStrategy"),KMe=new vt("DialogData"),qMe=new vt("DefaultDialogConfig");let QMe=0,L7=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new V,this._afterOpenedAtThisLevel=new V,this._ariaHiddenElements=new Map,this.afterAllClosed=Ky(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ca(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new FA,...i}).id=i.id||"cdk-dialog-"+QMe++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new qk(s,i),c=this._attachContainer(s,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Jk(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){Jk(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),Jk(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new Uk({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:FA,useValue:r},{provide:qk,useValue:i},{provide:Xy,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=N7;const c=new EA(a,r.viewContainerRef,wr.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,o){if(t instanceof za){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new AA(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new EA(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:KMe,useValue:t.data},{provide:qk,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(qf,null,{optional:!0}))&&a.push({provide:qf,useValue:{value:t.direction,change:$t()}}),wr.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Ll),nt(wr),nt(qMe,8),nt(n,12),nt(CA),nt(F7))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();function Jk(n,e){let t=n.length;for(;t--;)e(n[t])}function tTe(n,e){}class LA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Zk="mdc-dialog--open",B7="mdc-dialog--opening",j7="mdc-dialog--closing";let rTe=(()=>{class n extends N7{constructor(t,i,r,o,s,a,c,l){super(t,i,r,o,s,a,c,l),this._animationStateChanged=new Zt}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(i){return new(i||n)(He(kn),He(Mk),He(Hn,8),He(LA),He(gA),He(nn),He(Xy),He(Kf))};static#t=this.\u0275cmp=jn({type:n,selectors:[["ng-component"]],features:[vn],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const U7="--mat-dialog-transition-duration";function V7(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Ja(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Ja(n.substring(0,n.length-1)):"0"===n?0:null}let oTe=(()=>{class n extends rTe{constructor(t,i,r,o,s,a,c,l,d){super(t,i,r,o,s,a,c,d),this._animationMode=l,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?V7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?V7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(U7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(B7,Zk)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Zk),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Zk),this._animationsEnabled?(this._hostElement.style.setProperty(U7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(j7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(B7,j7)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(i){return new(i||n)(He(kn),He(Mk),He(Hn,8),He(LA),He(gA),He(nn),He(Xy),He(Zr,8),He(Kf))};static#t=this.\u0275cmp=jn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(xd("id",r._config.id),ki("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Tn("_mat-animation-noopable",!r._animationsEnabled))},features:[vn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Rt(0,"div",0)(1,"div",1),pn(2,tTe,0,0,"ng-template",2),Ft()())},dependencies:[SA],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class Qk{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new V,this._beforeClosed=new V,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Ei(r=>"opened"===r.state),xi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ei(r=>"closed"===r.state),xi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),jr(this.backdropClick(),this.keydownEvents().pipe(Ei(r=>27===r.keyCode&&!this.disableClose&&!Pc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function sTe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ei(t=>"closing"===t.state),xi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const z7=new vt("MatMdcDialogData"),aTe=new vt("mat-mdc-dialog-default-options"),H7=new vt("mat-mdc-dialog-scroll-strategy");let dTe=0,uTe=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,c,l,d,h){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new V,this._afterOpenedAtThisLevel=new V,this._idPrefix="mat-dialog-",this.dialogConfigClass=LA,this.afterAllClosed=Ky(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ca(void 0))),this._scrollStrategy=a,this._dialog=i.get(L7)}open(t,i){let r;(i={...this._defaultOptions||new LA,...i}).id=i.id||`${this._idPrefix}${dTe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:FA,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,c)=>(r=new this._dialogRefConstructor(s,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){df()};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),BA=(()=>{class n extends uTe{constructor(t,i,r,o,s,a,c,l){super(t,i,o,a,c,s,Qk,oTe,z7,l),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Ll),nt(wr),nt(E0,8),nt(aTe,8),nt(H7),nt(n,12),nt(CA),nt(Zr,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),hTe=0,G7=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+hTe++}ngOnInit(){this._dialogRef||(this._dialogRef=function fTe(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||n)(He(Qk,8),He(kn),He(BA))};static#t=this.\u0275dir=Ut({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&xd("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]})}return n})(),W7=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ut({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]})}return n})(),X7=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const K7=new vt("CdkAccordion");let pTe=0,mTe=(()=>{class n{get expanded(){return this._expanded}set expanded(t){t=vi(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=vi(t)}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=M.EMPTY,this.closed=new Zt,this.opened=new Zt,this.destroyed=new Zt,this.expandedChange=new Zt,this.id="cdk-accordion-child-"+pTe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(He(K7,12),He(to),He(X7))};static#t=this.\u0275dir=Ut({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[gi([{provide:K7,useValue:void 0}])]})}return n})();const _Te=["body"];function bTe(n,e){}const yTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],vTe=["mat-expansion-panel-header","*","mat-action-row"];function xTe(n,e){1&n&&di(0,"span",2),2&n&&zt("@indicatorRotate",Pn()._getExpandedState())}const wTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ETe=["mat-panel-title","mat-panel-description","*"],q7=new vt("MAT_ACCORDION"),J7="225ms cubic-bezier(0.4,0.0,0.2,1)",Z7={indicatorRotate:Zf("indicatorRotate",[Qa("collapsed, void",go({transform:"rotate(0deg)"})),Qa("expanded",go({transform:"rotate(180deg)"})),Nc("expanded <=> collapsed, void => collapsed",Za(J7))]),bodyExpansion:Zf("bodyExpansion",[Qa("collapsed, void",go({height:"0px",visibility:"hidden"})),Qa("expanded",go({height:"*",visibility:""})),Nc("expanded <=> collapsed, void => collapsed",Za(J7))])},Q7=new vt("MAT_EXPANSION_PANEL");let ATe=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(He(za),He(Q7,8))};static#t=this.\u0275dir=Ut({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),STe=0;const eW=new vt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let tW=(()=>{class n extends mTe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=vi(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,o,s,a,c){super(t,i,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Zt,this.afterCollapse=new Zt,this._inputChanges=new V,this._headerId="mat-expansion-panel-header-"+STe++,this._bodyAnimationDone=new V,this.accordion=t,this._document=s,this._bodyAnimationDone.pipe(je((l,d)=>l.fromState===d.fromState&&l.toState===d.toState)).subscribe(l=>{"void"!==l.fromState&&("expanded"===l.toState?this.afterExpand.emit():"collapsed"===l.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ca(null),Ei(()=>this.expanded&&!this._portal),xi(1)).subscribe(()=>{this._portal=new AA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#e=this.\u0275fac=function(i){return new(i||n)(He(q7,12),He(to),He(X7),He(Ho),He(Hn),He(Zr,8),He(eW,8))};static#t=this.\u0275cmp=jn({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function eo(n,e,t,i){const r=qn();if(r.firstCreatePass){const o=Kr();$3(r,new H3(e,t,i),o.index),function xQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}W3(r,It(),t)}(o,ATe,5),2&i){let s;Vn(s=zn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Qi(_Te,5),2&i){let o;Vn(o=zn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Tn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[gi([{provide:q7,useValue:void 0},{provide:Q7,useExisting:n}]),vn,kr],ngContentSelectors:vTe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(Qr(yTe),Ln(0),Rt(1,"div",0,1),bn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),Rt(3,"div",2),Ln(4,1),pn(5,bTe,0,0,"ng-template",3),Ft(),Ln(6,2),Ft()),2&i&&(Bt(1),zt("@bodyExpansion",r._getExpandedState())("id",r.id),ki("aria-labelledby",r._headerId),Bt(4),zt("cdkPortalOutlet",r._portal))},dependencies:[SA],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Z7.bodyExpansion]},changeDetection:0})}return n})();class CTe{}const MTe=Rk(CTe);let TTe=(()=>{class n extends MTe{constructor(t,i,r,o,s,a,c){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=M.EMPTY;const l=t.accordion?t.accordion._stateChanges.pipe(Ei(d=>!(!d.hideToggle&&!d.togglePosition))):ee;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=jr(t.opened,t.closed,l,t._inputChanges.pipe(Ei(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ei(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Pc(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(He(tW,1),He(kn),He(Kf),He(to),He(eW,8),He(Zr,8),dl("tabindex"))};static#t=this.\u0275cmp=jn({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&bn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(ki("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Uw("height",r._getHeaderHeight()),Tn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[vn],ngContentSelectors:ETe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(Qr(wTe),Rt(0,"span",0),Ln(1),Ln(2,1),Ln(3,2),Ft(),pn(4,xTe,1,1,"span",1)),2&i&&(Tn("mat-content-hide-toggle",!r._showToggle()),Bt(4),zt("ngIf",r._showToggle()))},dependencies:[Tc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Z7.indicatorRotate]},changeDetection:0})}return n})();function nW(n,e,t){return t?nW(n,e).pipe(Cy(t)):new Ye(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=n(r);return L(e)?()=>e(r,o):void 0})}class nP extends Ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,et(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new M;const t=this.getSubject();e.add(this.source.subscribe(Q(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=M.EMPTY)}return e}refCount(){return function tP(){return fe((n,e)=>{let t=null;n._refCount++;const i=Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}()(this)}}const RTe={connector:()=>new V};function iW(n,e=RTe){const{connector:t}=e;return fe((i,r)=>{const o=t();Li(n(function DTe(n){return new Ye(e=>n.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}function iP(...n){const e=wt(n);return fe((t,i)=>{const r=n.length,o=new Array(r);let s=n.map(()=>!1),a=!1;for(let c=0;c<r;c++)Li(n[c]).subscribe(Q(i,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ee))&&(s=null))},U));t.subscribe(Q(i,c=>{if(a){const l=[c,...o];i.next(e?e(...l):l)}}))})}const{isArray:NTe}=Array;function FTe(n){return 1===n.length&&NTe(n[0])?n[0]:n}function oW(...n){const e=wt(n);return e?Ke(oW(...n),Cy(e)):fe((t,i)=>{KG([t,...FTe(n)])(i)})}const BTe=["youtubeContainer"];let cW=(()=>{class n{get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}get disableCookies(){return this._disableCookies.value}set disableCookies(t){this._disableCookies.next(!!t)}constructor(t,i){this._ngZone=t,this._youtubeContainer=new V,this._destroyed=new V,this._playerChanges=new ui(void 0),this._videoId=new ui(void 0),this._height=new ui(390),this._width=new ui(640),this._startSeconds=new ui(void 0),this._endSeconds=new ui(void 0),this._suggestedQuality=new ui(void 0),this._playerVars=new ui(void 0),this._disableCookies=new ui(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Lu(i)}ngOnInit(){if(!this._isBrowser)return;let t=$t(!0);if(!window.YT||!window.YT.Player){const o=new V;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>o.next(!0))},t=o.pipe(xi(1),Ca(!1))}const i=this._disableCookies.pipe(A(o=>o?"https://www.youtube-nocookie.com":void 0)),r=function zTe(n,e,t,i,r,o,s,a){const c=ms([e,t,s]).pipe(iP(ms([r,o])),A(([l,d])=>{const[h,f,m]=l,[v,E]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:v,height:E,host:f}}));return ms([n,c,$t(a)]).pipe(function HTe(n){return Ke(oW(n),function LTe(n){return fe((e,t)=>{let i=!1,r=0;e.subscribe(Q(t,o=>(i||(i=!n(o,r++)))&&t.next(o)))})}(([e,t])=>!t),A(([e])=>e))}(i),function rW(n,e){return fe(function PTe(n,e,t,i,r){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Q(s,d=>{const h=l++;c=a?n(c,d,h):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}(GTe,void 0),je())}(this._youtubeContainer,this._videoId,i,t,this._width,this._height,this._playerVars,this._ngZone).pipe(ur(o=>{this._playerChanges.next(o)}),function VTe(n){return ye(e=>e?lW(e)?$t(e):new Ye(t=>{let i=!1,r=!1;const o=s=>{r=!0,i||(s.target.removeEventListener("onReady",o),t.next(s.target))};return e.addEventListener("onReady",o),()=>{i=!0,r||n(e)}}).pipe(xi(1),Ca(void 0)):$t(void 0))}(o=>{lW(o)||o.destroy()}),dr(this._destroyed),function kTe(n){return n?e=>iW(n)(e):e=>function OTe(n,e){const t=L(n)?n:()=>n;return L(e)?iW(e,{connector:t}):i=>new nP(i,t)}(new V)(e)}());r.subscribe(o=>{this._player=o,o&&this._pendingPlayerState&&this._initializePlayer(o,this._pendingPlayerState),this._pendingPlayerState=void 0}),function jTe(n,e,t){ms([n,e,t]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(r,this._width,this._height),function UTe(n,e){ms([n,e]).subscribe(([t,i])=>t&&i&&t.setPlaybackQuality(i))}(r,this._suggestedQuality),function WTe(n,e,t,i,r,o){const s=ms([t,i]).pipe(A(([d,h])=>({startSeconds:d,endSeconds:h}))),a=s.pipe(rP(n,d=>!!d&&!function $Te(n){const e=n.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(rP(n,(d,h)=>!!d&&d.videoId!==h));jr(n.pipe(rP(ms([e,s]),([d,h],f)=>!(!f||d==f.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(iP(ms([n,e,s,r])),A(([d,h])=>h),dr(o)).subscribe(([d,h,f,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...f}))})}(r,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),r.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,i){const{playbackState:r,playbackRate:o,volume:s,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=o&&t.setPlaybackRate(o),null!=s&&t.setVolume(s),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(Re(i=>i?nW(r=>{i.addEventListener(t,r)},r=>{try{i.removeEventListener&&i.removeEventListener(t,r)}catch{}}):$t()),i=>new Ye(r=>i.subscribe({next:o=>this._ngZone.run(()=>r.next(o)),error:o=>r.error(o),complete:()=>r.complete()})),dr(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(He(nn),He(ma))};static#t=this.\u0275cmp=jn({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Qi(BTe,5),2&i){let o;Vn(o=zn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&di(0,"div",null,0)},encapsulation:2,changeDetection:0})}return n})();function GTe(n,[e,t,i]){if(n&&t&&(n.playerVars!==t.playerVars||n.host!==t.host))n.destroy();else{if(!t)return void(n&&n.destroy());if(n)return n}const r=i.runOutsideAngular(()=>new YT.Player(e,t));return r.videoId=t.videoId,r.playerVars=t.playerVars,r.host=t.host,r}function lW(n){return"getPlayerStatus"in n}function rP(n,e){return Ke(iP(n),Ei(([t,i])=>e(i,t)),A(([t])=>t))}function dW(n=XTe){return fe((e,t)=>{let i=!1;e.subscribe(Q(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function XTe(){return new Sy}let np={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const hW=/[&<>"']/,qTe=new RegExp(hW.source,"g"),fW=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,JTe=new RegExp(fW.source,"g"),ZTe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pW=n=>ZTe[n];function gs(n,e){if(e){if(hW.test(n))return n.replace(qTe,pW)}else if(fW.test(n))return n.replace(JTe,pW);return n}const QTe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function mW(n){return n.replace(QTe,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const eIe=/(^|[^\[])\^/g;function nr(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,r)=>(r=(r=r.source||r).replace(eIe,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}const tIe=/[^\w:]/g,nIe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function gW(n,e,t){if(n){let i;try{i=decodeURIComponent(mW(t)).replace(tIe,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!nIe.test(t)&&(t=function sIe(n,e){jA[" "+n]||(jA[" "+n]=iIe.test(n)?n+"/":VA(n,"/",!0));const t=-1===(n=jA[" "+n]).indexOf(":");return"//"===e.substring(0,2)?t?e:n.replace(rIe,"$1")+e:"/"===e.charAt(0)?t?e:n.replace(oIe,"$1")+e:n+e}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const jA={},iIe=/^[^:]+:\/*[^/]*$/,rIe=/^([^:]+:)[\s\S]*$/,oIe=/^([^:]+:\/*[^/]*)[\s\S]*$/,UA={exec:function(){}};function _W(n,e){const i=n.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function VA(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const o=n.charAt(i-r-1);if(o!==e||t){if(o===e||!t)break;r++}else r++}return n.slice(0,i-r)}function bW(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function yW(n,e,t,i){const r=e.href,o=e.title?gs(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:o,text:gs(s)}}class oP{constructor(e){this.options=e||np}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:VA(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function lIe(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=VA(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,r,o,s,a,c,l,d,h,f,m,v,E=t[1].trim();const D=E.length>1,H={type:"list",raw:"",ordered:D,start:D?+E.slice(0,-1):"",loose:!1,items:[]};E=D?`\\d{1,9}\\${E.slice(-1)}`:`\\${E}`,this.options.pedantic&&(E=D?E:"[*+-]");const Y=new RegExp(`^( {0,3}${E})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(v=!1,(t=Y.exec(e))&&!this.rules.block.hr.test(e));){if(i=t[0],e=e.substring(i.length),d=t[2].split("\n",1)[0].replace(/^\t+/,Ie=>" ".repeat(3*Ie.length)),h=e.split("\n",1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=t[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),v=!0),!v){const Ie=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Le=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),$e=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),ot=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(f=e.split("\n",1)[0],h=f,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!($e.test(h)||ot.test(h)||Ie.test(h)||Le.test(e)));){if(h.search(/[^ ]/)>=s||!h.trim())m+="\n"+h.slice(s);else{if(c||d.search(/[^ ]/)>=4||$e.test(d)||ot.test(d)||Le.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=f+"\n",e=e.substring(f.length+1),d=h.slice(s)}}H.loose||(l?H.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(o="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),H.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:m}),H.raw+=i}H.items[H.items.length-1].raw=i.trimRight(),H.items[H.items.length-1].text=m.trimRight(),H.raw=H.raw.trimRight();const he=H.items.length;for(a=0;a<he;a++)if(this.lexer.state.top=!1,H.items[a].tokens=this.lexer.blockTokens(H.items[a].text,[]),!H.loose){const Ie=H.items[a].tokens.filter($e=>"space"===$e.type),Le=Ie.length>0&&Ie.some($e=>/\n.*\n/.test($e.raw));H.loose=Le}if(H.loose)for(a=0;a<he;a++)H.items[a].loose=!0;return H}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(t[0]):gs(t[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:_W(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];let o,s,a,c,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=_W(i.rows[o],i.header.length).map(l=>({text:l}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:gs(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):gs(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=VA(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function aIe(n,e){if(-1===n.indexOf(e[1]))return-1;const t=n.length;let i=0,r=0;for(;r<t;r++)if("\\"===n[r])r++;else if(n[r]===e[0])i++;else if(n[r]===e[1]&&(i--,i<0))return r;return-1}(t[2],"()");if(s>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),yW(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return yW(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);null!=(r=h.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const f=e.slice(0,s+r.index+(r[0].length-a.length)+c);if(Math.min(s,c)%2){const v=f.slice(1,-1);return{type:"em",raw:f,text:v,tokens:this.lexer.inlineTokens(v)}}const m=f.slice(2,-2);return{type:"strong",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=gs(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return"@"===i[2]?(r=gs(this.options.mangle?t(i[1]):i[1]),o="mailto:"+r):(r=gs(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if("@"===i[2])r=gs(this.options.mangle?t(i[0]):i[0]),o="mailto:"+r;else{let s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=gs(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):gs(i[0]):i[0]:gs(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const In={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:UA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};In.def=nr(In.def).replace("label",In._label).replace("title",In._title).getRegex(),In.bullet=/(?:[*+-]|\d{1,9}[.)])/,In.listItemStart=nr(/^( *)(bull) */).replace("bull",In.bullet).getRegex(),In.list=nr(In.list).replace(/bull/g,In.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+In.def.source+")").getRegex(),In._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",In._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,In.html=nr(In.html,"i").replace("comment",In._comment).replace("tag",In._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),In.paragraph=nr(In._paragraph).replace("hr",In.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",In._tag).getRegex(),In.blockquote=nr(In.blockquote).replace("paragraph",In.paragraph).getRegex(),In.normal={...In},In.gfm={...In.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},In.gfm.table=nr(In.gfm.table).replace("hr",In.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",In._tag).getRegex(),In.gfm.paragraph=nr(In._paragraph).replace("hr",In.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",In.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",In._tag).getRegex(),In.pedantic={...In.normal,html:nr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",In._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:UA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:nr(In.normal._paragraph).replace("hr",In.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",In.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const sn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:UA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:UA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function dIe(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function vW(n){let t,i,e="";const r=n.length;for(t=0;t<r;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}sn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",sn.punctuation=nr(sn.punctuation).replace(/punctuation/g,sn._punctuation).getRegex(),sn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,sn.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,sn._comment=nr(In._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),sn.emStrong.lDelim=nr(sn.emStrong.lDelim).replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimAst=nr(sn.emStrong.rDelimAst,"g").replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimUnd=nr(sn.emStrong.rDelimUnd,"g").replace(/punct/g,sn._punctuation).getRegex(),sn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,sn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,sn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,sn.autolink=nr(sn.autolink).replace("scheme",sn._scheme).replace("email",sn._email).getRegex(),sn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,sn.tag=nr(sn.tag).replace("comment",sn._comment).replace("attribute",sn._attribute).getRegex(),sn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,sn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,sn.link=nr(sn.link).replace("label",sn._label).replace("href",sn._href).replace("title",sn._title).getRegex(),sn.reflink=nr(sn.reflink).replace("label",sn._label).replace("ref",In._label).getRegex(),sn.nolink=nr(sn.nolink).replace("ref",In._label).getRegex(),sn.reflinkSearch=nr(sn.reflinkSearch,"g").replace("reflink",sn.reflink).replace("nolink",sn.nolink).getRegex(),sn.normal={...sn},sn.pedantic={...sn.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:nr(/^!?\[(label)\]\((.*?)\)/).replace("label",sn._label).getRegex(),reflink:nr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sn._label).getRegex()},sn.gfm={...sn.normal,escape:nr(sn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},sn.gfm.url=nr(sn.gfm.url,"i").replace("email",sn.gfm._extended_email).getRegex(),sn.breaks={...sn.gfm,br:nr(sn.br).replace("{2,}","*").getRegex(),text:nr(sn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class oh{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||np,this.options.tokenizer=this.options.tokenizer||new oP,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:In.normal,inline:sn.normal};this.options.pedantic?(t.block=In.pedantic,t.inline=sn.pedantic):this.options.gfm&&(t.block=In.gfm,t.inline=this.options.breaks?sn.breaks:sn.gfm),this.tokenizer.rules=t}static get rules(){return{block:In,inline:sn}}static lex(e,t){return new oh(t).lex(e)}static lexInline(e,t){return new oh(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=t[t.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+bW("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+bW("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,vW)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,vW))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(function(m){f=m.call({lexer:this},h),"number"==typeof f&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,dIe)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return t}}class tv{constructor(e){this.options=e||np}code(e,t,i){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+gs(r)+'">'+(i?e:gs(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:gs(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,i,r){return this.options.headerIds?`<h${t} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${t}>\n`:`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){if(null===(e=gW(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){if(null===(e=gW(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class xW{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class wW{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class sh{constructor(e){this.options=e||np,this.options.renderer=this.options.renderer||new tv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new xW,this.slugger=new wW}static parse(e,t){return new sh(t).parse(e)}static parseInline(e,t){return new sh(t).parseInline(e)}parse(e,t=!0){let r,o,s,a,c,l,d,h,f,m,v,E,D,H,Y,he,Ie,Le,$e,i="";const ot=e.length;for(r=0;r<ot;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&($e=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==$e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=$e||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,mW(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(m.header[o].tokens),{header:!0,align:m.align[o]});for(h+=this.renderer.tablerow(d),f="",a=m.rows.length,o=0;o<a;o++){for(l=m.rows[o],d="",c=l.length,s=0;s<c;s++)d+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:m.align[s]});f+=this.renderer.tablerow(d)}i+=this.renderer.table(h,f);continue;case"blockquote":f=this.parse(m.tokens),i+=this.renderer.blockquote(f);continue;case"list":for(v=m.ordered,E=m.start,D=m.loose,a=m.items.length,f="",o=0;o<a;o++)Y=m.items[o],he=Y.checked,Ie=Y.task,H="",Y.task&&(Le=this.renderer.checkbox(he),D?Y.tokens.length>0&&"paragraph"===Y.tokens[0].type?(Y.tokens[0].text=Le+" "+Y.tokens[0].text,Y.tokens[0].tokens&&Y.tokens[0].tokens.length>0&&"text"===Y.tokens[0].tokens[0].type&&(Y.tokens[0].tokens[0].text=Le+" "+Y.tokens[0].tokens[0].text)):Y.tokens.unshift({type:"text",text:Le}):H+=Le),H+=this.parse(Y.tokens,D),f+=this.renderer.listitem(H,Ie,he);i+=this.renderer.list(f,v,E);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(f=m.tokens?this.parseInline(m.tokens):m.text;r+1<ot&&"text"===e[r+1].type;)m=e[++r],f+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=t?this.renderer.paragraph(f):f;continue;default:{const mt='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(mt);throw new Error(mt)}}return i}parseInline(e,t){t=t||this.renderer;let r,o,s,i="";const a=e.length;for(r=0;r<a;r++)if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=s||"";else switch(o.type){case"escape":case"text":i+=t.text(o.text);break;case"html":i+=t.html(o.text);break;case"link":i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break;case"image":i+=t.image(o.href,o.title,o.text);break;case"strong":i+=t.strong(this.parseInline(o.tokens,t));break;case"em":i+=t.em(this.parseInline(o.tokens,t));break;case"codespan":i+=t.codespan(o.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(o.tokens,t));break;default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class sP{constructor(e){this.options=e||np}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function EW(n,e){return(t,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},s=function uIe(n,e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const r="<p>An error occurred:</p><pre>"+gs(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):t?void t(null,r):r}if(e)return Promise.reject(i);if(!t)throw i;t(i)}}((i={...Dn.defaults,...o}).silent,i.async,r);if(typeof t>"u"||null===t)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(function cIe(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(t=i.hooks.preprocess(t)),c=n(t,i)}catch(h){return s(h)}const l=function(h){let f;if(!h)try{i.walkTokens&&Dn.walkTokens(c,i.walkTokens),f=e(c,i),i.hooks&&(f=i.hooks.postprocess(f))}catch(m){h=m}return i.highlight=a,h?s(h):r(null,f)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return Dn.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(f,m){if(f)return l(f);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(a=>n(a,i)).then(a=>i.walkTokens?Promise.all(Dn.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(t=i.hooks.preprocess(t));const a=n(t,i);i.walkTokens&&Dn.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}function Dn(n,e,t){return EW(oh.lex,sh.parse)(n,e,t)}Dn.options=Dn.setOptions=function(n){return function KTe(n){np=n}(Dn.defaults={...Dn.defaults,...n}),Dn},Dn.getDefaults=function uW(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Dn.defaults=np,Dn.use=function(...n){const e=Dn.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const i={...t};if(i.async=Dn.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...s){let a=r.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),t.renderer){const r=Dn.defaults.renderer||new tv;for(const o in t.renderer){const s=r[o];r[o]=(...a)=>{let c=t.renderer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.renderer=r}if(t.tokenizer){const r=Dn.defaults.tokenizer||new oP;for(const o in t.tokenizer){const s=r[o];r[o]=(...a)=>{let c=t.tokenizer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.tokenizer=r}if(t.hooks){const r=Dn.defaults.hooks||new sP;for(const o in t.hooks){const s=r[o];r[o]=sP.passThroughHooks.has(o)?a=>{if(Dn.defaults.async)return Promise.resolve(t.hooks[o].call(r,a)).then(l=>s.call(r,l));const c=t.hooks[o].call(r,a);return s.call(r,c)}:(...a)=>{let c=t.hooks[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.hooks=r}if(t.walkTokens){const r=Dn.defaults.walkTokens;i.walkTokens=function(o){let s=[];return s.push(t.walkTokens.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}Dn.setOptions(i)})},Dn.walkTokens=function(n,e){let t=[];for(const i of n)switch(t=t.concat(e.call(Dn,i)),i.type){case"table":for(const r of i.header)t=t.concat(Dn.walkTokens(r.tokens,e));for(const r of i.rows)for(const o of r)t=t.concat(Dn.walkTokens(o.tokens,e));break;case"list":t=t.concat(Dn.walkTokens(i.items,e));break;default:Dn.defaults.extensions&&Dn.defaults.extensions.childTokens&&Dn.defaults.extensions.childTokens[i.type]?Dn.defaults.extensions.childTokens[i.type].forEach(function(r){t=t.concat(Dn.walkTokens(i[r],e))}):i.tokens&&(t=t.concat(Dn.walkTokens(i.tokens,e)))}return t},Dn.parseInline=EW(oh.lexInline,sh.parseInline),Dn.Parser=sh,Dn.parser=sh.parse,Dn.Renderer=tv,Dn.TextRenderer=xW,Dn.Lexer=oh,Dn.lexer=oh.lex,Dn.Tokenizer=oP,Dn.Slugger=wW,Dn.Hooks=sP,Dn.parse=Dn;const hIe=["*"];let AW=(()=>{class n{constructor(){this._buttonClick$=new V,this.copied$=this._buttonClick$.pipe(Re(()=>jr($t(!0),Nk(3e3).pipe(function Gk(n){return A(()=>n)}(!1)))),je(),Ls(1)),this.copiedText$=this.copied$.pipe(Ca(!1),A(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=jn({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Rt(0,"button",0),bn("click",function(){return r.onCopyToClipboardClick()}),ba(1,"async"),hi(2),ba(3,"async"),Ft()),2&i&&(Tn("copied",bl(1,3,r.copied$)),Bt(2),Va(bl(3,5,r.copiedText$)))},dependencies:[C0],encapsulation:2,changeDetection:0})}return n})();class mIe{}var aP=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(aP||{});class _Ie{}const SW=new vt("SECURITY_CONTEXT");let cP=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,o,s,a){this.platform=t,this.securityContext=i,this.http=r,this.clipboardOptions=o,this.sanitizer=a,this.DEFAULT_MARKED_OPTIONS={renderer:new tv},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new V,this.reload$=this._reload$.asObservable(),this.options=s}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:o,emoji:s,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions};a&&(this.renderer=this.extendRenderer(l.renderer||new tv));const d=this.trimIndentation(t),h=r?this.decodeHtml(d):d,f=s?this.parseEmoji(h):h,m=this.parseMarked(f,l,o);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:o,clipboardOptions:s,katex:a,katexOptions:c,mermaid:l,mermaidOptions:d}=i;o&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...s}),a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...d}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(A(i=>this.handleExtension(t,i)))}highlight(t){if(!Lu(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!Lu(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendRenderer(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtended)return t;const r=t.code;return t.code=function(o,s,a){return"mermaid"===s?`<div class="mermaid">${o}</div>`:r.call(this,o,s,a)},i.\u0275NgxMarkdownRendererExtended=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),o=r>-1?t.substring(r+4):t,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){return r?Dn.parseInline(t,i):Dn.parse(t,i)}parseEmoji(t){if(!Lu(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(Lu(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!Lu(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:s}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),d=document.createElement("div");d.style.position="relative",l.parentNode.insertBefore(d,l),d.appendChild(l);const h=document.createElement("div");let f,m;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",d.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=o?i.createComponent(o).hostView:s?i.createEmbeddedView(s):i.createComponent(AW).hostView,f.rootNodes.forEach(v=>{v.onmouseover=()=>h.style.opacity="1",h.appendChild(v),m=new ClipboardJS(v,{text:()=>l.innerText})}),f.onDestroy(()=>m.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!Lu(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.init(r))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let o=i;return r.length>0&&(o=isNaN(o)?r.search(/\S|$/):Math.min(r.search(/\S|$/),o)),isNaN(i)&&(i=o),o?r.substring(o):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(nt(ma),nt(SW),nt(Bg,8),nt(mIe,8),nt(_Ie,8),nt(I0))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),CW=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(t){this._srcRelativeLink=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new Zt,this.load=new Zt,this.ready=new Zt,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new V}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(dr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){let r;this.src&&this.srcRelativeLink&&(r={baseUrl:new URL(this.src,location.origin).pathname});const s={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=this.markdownService.parse(t,{decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:r,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t),this.load.emit(t)},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,aP.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,aP.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++){const s=i instanceof Array?i:[i];r.item(o).classList.add(...s)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++)Object.keys(i).forEach(s=>{const a=i[s];if(a){const c=this.toLispCase(s);r.item(o).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let o=0,s=i.length;o<s;o++)r=r.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(He(kn),He(cP),He(Ho))};static#t=this.\u0275cmp=jn({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[kr],ngContentSelectors:hIe,decls:1,vars:0,template:function(i,r){1&i&&(Qr(),Ln(0))},encapsulation:2})}return n})();var MW;!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(MW||(MW={}));let TW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ut({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]})}return n})();function jg(n){return!0===n}function sa(n){return null===n||typeof n>"u"}function _s(n){return!sa(n)}function lP(n){return!!n}function PW(n){return sa(n)?n:JSON.parse(JSON.stringify(n))}function NW(n){return _s(n)&&"object"==typeof n&&function dP(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const lDe="NGXS_COMPUTED_OPTION",BW="NGXS_DATA_META",uP="NGXS_META",jW="NGXS_ARGUMENT_REGISTRY_META";let UW=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new ui(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(nt(Fl,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();function iv(n){return n[BW]}let tc=(()=>{class n{constructor(t,i,r){n.store=t.get(Fl),n.ngZone=t.get(nn),n.factory=i,n.context=r,n.computed=t.get(UW),n.injector=t}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(t){return new(t||n)(nt(wr),nt(oH),nt(sH))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();class Wr{constructor(){Wr.statesCachedMeta.clear()}static createStateContext(e){return tc.context.createStateContext(e)}static ensureMappedState(e){if(sa(tc.factory)||sa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(_s(e.name)?Wr.statesCachedMeta.get(e.name):null)||Wr.ensureMeta(e)}static getRepositoryByInstance(e){const i=iv(Wr.getStateClassByInstance(e))??null;if(sa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=Wr.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=t?.getPayloadTypeByIndex(o);_s(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=Wr.createPayload(t,i),o=function fDe(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new o(r)}static ensureMeta(e){const t=_s(e.name)?tc.factory.states?.find(i=>i.name===e.name):null;return _s(t)&&_s(e.name)&&Wr.statesCachedMeta.set(e.name,t),t}}Wr.statesCachedMeta=new Map,Wr.\u0275fac=function(e){return new(e||Wr)},Wr.\u0275prov=At({token:Wr,factory:Wr.\u0275fac}),new class pDe{constructor(){this.subject=new $m(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function zd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ei((r,o)=>n(r,o,i)):Ee,xi(1),t?Mg(e):dW(()=>new Sy))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new $m(1)}};class gDe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${_s(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function VW(n){return n.NGXS_OPTIONS_META??{name:""}}function zW(n){const e=VW(n),t=e.children??[],r=PW(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(NW(r))return function _De(n,e){return e.reduce((t,i)=>{const r=VW(i);if(function nv(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=zW(i),t},n??{})}(r,t);throw new gDe(r)}return r}function HW(){return`__${lDe}__`}function GW(n){return n[HW()]??null}function WW(){return tc?.computed?.sequenceValue??0}function vDe(n){let e=!1;return Uf(n)&&(e=!0),e}function hP(n){return n[jW]}class xDe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class wDe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(lP(this.argumentMap.has(e))||lP(this.payloadMap.has(e)))throw new xDe(e,t)}}function TDe(n){return{enumerable:!0,configurable:!0,get(){const e=iv(n),t=Wr.ensureMappedState(e.stateMeta);return Wr.createStateContext(t)}}}const PDe={dataActionSubscribeRequired:!0},NDe=new vt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>PDe});let FDe=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[Wr,tc,UW,...t]}}}return n.\u0275fac=function(t){return new(t||n)(nt(Wr,2),nt(tc,2))},n.\u0275mod=on({type:n}),n.\u0275inj=tn({}),n})();function $W(){return(n,e,t)=>{!function hDe(n,e){if(!function nDe(n,e){let t=n,i=!1;if(NW(t))for(;null!==t;){if(jg(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const o=function yDe(n){return sa(GW(n))&&Object.defineProperties(n,{[HW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),GW(n)}(this),s=o?.get(i);if(jg(s?.isObservable))return s?.value;if(sa(s)||s.sequenceId!==WW()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:WW(),isObservable:vDe(c)}),c}return s?.value},t}}const LDe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function fP(n={}){const e=function BDe(n){const e=tc?.injector?.get(NDe,void 0,ai.Optional),t={...LDe};return _s(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function uDe(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=Wr.getRepositoryByInstance(c),h=d.operations;let f=h[s];const m=d.stateMeta,v=hP(o);if(sa(f)){const he=function kDe(n){return String(n).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),Ie=function mDe(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let o="";for(let s=0;s<t.length;s++)_s(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):_s(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==t.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:he,argumentRegistry:v});f=h[s]={type:Ie,options:{cancelUncompleted:e.cancelUncompleted??!1}},_s(f)&&(m.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}Wr.ensureMappedState(m).instance[f.type]=()=>(jg(e.insideZone)?tc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),Uf(l)&&jg(e.subscribeRequired)?$t(null).pipe(A(()=>l)):l);const H=Wr.createAction(f,a,v),Y=tc.store.dispatch(H);return Uf(l)?function bDe(n,e){return My([n,e]).pipe(A(t=>t.pop()))}(Y,l):l},r}}function YW(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function EDe(n,e){const t=n[e];return sa(hP(t))&&Object.defineProperties(t,{[jW]:{enumerable:!0,configurable:!0,value:new wDe}}),hP(t)})(e,t).createPayloadType(r,t,i)}}function UDe(){return n=>{const e=function ODe(n){if(function WIe(n){return!lP(n)}(n.hasOwnProperty(uP))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,uP,{value:e})}return function RDe(n){return n?.[uP]}(n)}(n);if(sa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function CDe(n,e){(function SDe(n){const e=iv(n)??null;return(sa(e)||e?.stateClass!==n)&&function ADe(n){Object.defineProperty(n,BW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),iv(n)}(n)).stateMeta=e}(n,e),function VDe(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>PW(t)},context:TDe(n)})}(n,e,zW(n)),function IDe(n){const t=iv(n)?.stateMeta?.name??null;if(_s(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(_s(this[i]))return this[i];if(sa(tc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=tc.store.select(n).pipe(A(r=>r),Ls({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let zDe=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new V,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})(),HDe=(()=>{class n extends zDe{get snapshot(){return this.getState()}get ctx(){return function DDe(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=wi(n)))(i||n)}}(),n.\u0275prov=At({token:n,factory:n.\u0275fac}),Ge([$W(),Te("design:type",Object),Te("design:paramtypes",[])],n.prototype,"snapshot",null),Ge([fP(),gt(0,YW("patchValue")),Te("design:type",Function),Te("design:paramtypes",[Object]),Te("design:returntype",void 0)],n.prototype,"patchState",null),Ge([fP(),gt(0,YW("stateValue")),Te("design:type",Function),Te("design:paramtypes",[Object]),Te("design:returntype",void 0)],n.prototype,"setState",null),Ge([fP(),Te("design:type",Function),Te("design:paramtypes",[]),Te("design:returntype",void 0)],n.prototype,"reset",null),n})();const aS=new vt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),LP=new vt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Vt(Hn);if(!n)throw new Error("Window is not available");return n}}),eOe=new vt("ngx-data-layer",{providedIn:"root",factory:()=>function QRe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Vt(LP))}),K$=new vt("ngx-gtag-fn",{providedIn:"root",factory:()=>function tOe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Vt(LP),Vt(eOe))});let q$=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,o){try{const s=new Map([["page_path",t]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(t,i,r,o,s){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(nt(aS),nt(Hn),nt(K$))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();new vt("ngx-google-analytics-routing-settings",{factory:()=>({})}),new vt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});class nY extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class OOe{constructor(){this.cancelUncompleted$=new V}cancelPreviousAction(){this.cancelUncompleted$.next()}}const BP="\u0275fac",iY=Symbol("InjectorInstance"),rY=Symbol("FactoryHasBeenDecorated");function oY(n,e){const t=n[iY];return t?t.get(e):null}const NOe={cancelUncompleted:!1};function sY(n=NOe){return(e,t,i)=>{let r;const o=function kOe(n){return n?new OOe:null}(n.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=oY(this,Fl)||function DOe(){throw new nY}(),c=oY(this,nn)||function ROe(){throw new nY}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function IOe(n,e,t){return Bm(e)?function TOe(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):Uf(e)?function MOe(n,e,t){return null!==t&&(e=e.pipe(dr(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,t,{set:a=>r=a,get:()=>s}),function POe(n){if(rY in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[BP]&&function jP(n){const e=n[BP];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[iY]=He(_m),r};t&&(t.factory=i),Object.defineProperty(n,BP,{get:()=>i})}(e),n.constructor.prototype[rY]=!0}(e)}}const Cke=["bodyCanvas"];let Mke=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new Zt,this.nodeDrag=new Zt,this.nodeClick=new Zt,this.nodeHoverStart=new Zt,this.nodeHoverStop=new Zt,this.initialized=new Zt,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:o}=this.bodyCanvas.nativeElement,s=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/s/t.x),Math.log2((o-i.y)/s/t.y));this.zoom=a}}setupBodyUI(){var t=this;return Lt(function*(){const i=t.bodyCanvas.nativeElement,r=new Rwe({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",o=>o.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(o=>t.rotationChange.next(o)),t.bodyUI.nodeDrag$.subscribe(o=>t.nodeDrag.emit(o)),t.bodyUI.nodeClick$.subscribe(o=>t.nodeClick.emit(o)),t.bodyUI.nodeHoverStart$.subscribe(o=>t.nodeHoverStart.emit(o)),t.bodyUI.nodeHoverStop$.subscribe(o=>t.nodeHoverStop.emit(o))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=jn({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Qi(Cke,5,kn),2&i){let o;Vn(o=zn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Js(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&di(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})(),Tke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=on({type:n});static#n=this.\u0275inj=tn({imports:[pr]})}return n})();function Yke(n,e){if(1&n&&(Rt(0,"div",16),di(1,"youtube-player",17),Ft()),2&n){const t=Pn(3);Bt(1),Bw("videoId",t.videoID)}}function Xke(n,e){if(1&n&&(Rt(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),hi(3),Ft()(),Rt(4,"div",13),di(5,"markdown",14),pn(6,Yke,2,1,"div",15),Ft()()),2&n){const t=Pn(),i=t.index,r=t.$implicit;zt("expanded",0===i),Bt(3),Va(r.title),Bt(2),Tn("first",0===i),zt("data",r.content),Bt(1),zt("ngIf",0===i)}}function Kke(n,e){if(1&n&&(Rt(0,"div",9),pn(1,Xke,7,6,"mat-expansion-panel",10),Ft()),2&n){const t=e.$implicit;Bt(1),zt("ngIf",t)}}new vt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name)).filter(n=>!0!==n.disabled);let vY=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(He(Qk),He(z7))};static#t=this.\u0275cmp=jn({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Rt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),hi(5),Ft(),Rt(6,"div",5)(7,"mat-icon",6),bn("click",function(){return r.close()}),hi(8,"clear"),Ft()()(),Rt(9,"mat-dialog-content",7),pn(10,Kke,2,1,"div",8),Ft()()()()),2&i&&(Bt(5),Va(r.infoTitle),Bt(5),zt("ngForOf",r.documentationContents))},dependencies:[Fu,Tc,G7,W7,tp,tW,TTe,cW,CW],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})(),xY=(()=>{class n{constructor(t){this.http=t,this.panelContent=new ui({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(o=>{const s={content:this.parseMarkdown(o),infoTitle:r,videoID:i};this.panelContent.next(s)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const o of r)if(o.length){const s=o.includes("\n\n")?"\n\n":"\r\n\r\n",a=o.split(s);i.push({title:a[0],content:a.splice(1).join(s)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(nt(Bg))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jke=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new Zt,this.closeClicked=new Zt}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=jn({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Js(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Rt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),hi(5),Ft(),Rt(6,"mat-icon",5),bn("click",function(){return r.close()}),hi(7,"clear"),Ft()(),di(8,"img",6),Rt(9,"mat-dialog-content",7)(10,"div",8),hi(11),Ft(),Rt(12,"a",9),bn("click",function(){return r.onDialogButtonClick()}),Ft()()()()()),2&i&&(Bt(5),Va(r.infoTitle),Bt(3),zt("src",r.imageUrl,Fb),Bt(3),Zs(" ",r.message,""),Bt(1),zt("text",r.callToAction))},dependencies:[tp,G7,W7,TW],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})(),xv=(()=>{let n=class Nv extends HDe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function GDe(){return Ei(n=>null!=n)}(),Ls(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(a7(...t),je(),Ls(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(a7(...t),je(),Ls(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=wi(Nv)))(r||Nv)}}();static#t=this.\u0275prov=At({token:Nv,factory:Nv.\u0275fac})};return Ge([$W()],n.prototype,"config$",null),n=Ge([UDe(),RH({name:"globalConfig",defaults:null})],n),n})();!function ePe(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}(),new V;let VP=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),zP=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),HP=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();var GP;class Bc{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return Bc.storage?.length??0}key(e){return Bc.storage?.key(e)??null}getItem(e,t){return Bc.storage?.getItem(e)??t??null}setItem(e,t){try{return Bc.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){Bc.storage?.removeItem(e)}clear(){Bc.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||Bc)};static#n=this.\u0275prov=At({token:Bc,factory:Bc.\u0275fac,providedIn:"root"})}const AY="callToActionPopupShown";let ch=(()=>{let n=class LS{static#e=GP=this;static ctaDatePassed(t,i=Date.now){return+i()>+new Date(t)}constructor(t,i,r,o,s){this.dialog=t,this.ga=i,this.storage=r,this.infoService=o,this.http=s}ngxsOnInit(t){const{expirationDate:i,popupShown:r}=t.getState(),o=this.storage.getItem(AY,`${r}`),s=GP.ctaDatePassed(i);"true"!==o&&!s&&t.dispatch(new zP)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(A(t=>this.infoService.parseMarkdown(t)))}launchLearnMore(t){this.dialog.open(vY,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:t,videoID:"UfxMpzatowE"}})}learnMore(t){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(ur(i=>this.launchLearnMore(i)))}open(t){this.dialog.open(rPe,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(AY,"true"),t.patchState({popupShown:!0})}close(t){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(i){return new(i||LS)(nt(BA),nt(q$),nt(Bc),nt(xY),nt(Bg))};static#n=this.\u0275prov=At({token:LS,factory:LS.\u0275fac})};return Ge([WO(VP)],n.prototype,"learnMore",null),Ge([WO(zP)],n.prototype,"open",null),Ge([WO(HP)],n.prototype,"close",null),n})();ch=GP=Ge([RH({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],ch);let lS=(()=>{class n{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}}return Ge([Dg([ch])],n,"title",null),Ge([Dg([ch])],n,"message",null),Ge([Dg([ch])],n,"callToAction",null),Ge([Dg([ch])],n,"imageUrl",null),Ge([Dg([ch])],n,"expirationDate",null),Ge([Dg([ch])],n,"popupShown",null),n})(),rPe=(()=>{class n{constructor(){this.close=()=>new HP,this.learnMore=()=>new VP}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=jn({type:n,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Rt(0,"ccf-call-to-action",0),bn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),ba(1,"async"),ba(2,"async"),ba(3,"async"),ba(4,"async"),Ft()),2&i&&zt("infoTitle",bl(1,4,r.title$))("message",bl(2,6,r.message$))("callToAction",bl(3,8,r.callToAction$))("imageUrl",bl(4,10,r.imageUrl$))},dependencies:[Jke,C0],changeDetection:0})}return Ge([$E(lS.title)],n.prototype,"title$",void 0),Ge([$E(lS.message)],n.prototype,"message$",void 0),Ge([$E(lS.callToAction)],n.prototype,"callToAction$",void 0),Ge([$E(lS.imageUrl)],n.prototype,"imageUrl$",void 0),Ge([sY()],n.prototype,"close",void 0),Ge([sY()],n.prototype,"learnMore",void 0),n})();const SY="http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity",fPe=[173,255,47,229.5];function aa(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let WP;function jc(){return WP||(WP=function bPe(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=aa(t);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),WP}function yPe(n,e=jc()){return e("readonly",t=>aa(t.get(n)))}function vPe(n,e=jc()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),aa(t.transaction)))}function xPe(n,e=jc()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),aa(t.transaction)))}var wPe=g(5020),dS=g(4938),EPe=g.t(dS,2),APe=g.n(dS),SPe=g(7991),CY=g(5440),uS=g(7184),wv=g(9689),CPe=g(7661);const Ev="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Av="http://www.w3.org/2001/XMLSchema#",YP="http://www.w3.org/2000/10/swap/",js={xsd:{decimal:`${Av}decimal`,boolean:`${Av}boolean`,double:`${Av}double`,integer:`${Av}integer`,string:`${Av}string`},rdf:{type:`${Ev}type`,nil:`${Ev}nil`,first:`${Ev}first`,rest:`${Ev}rest`,langString:`${Ev}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${YP}reify#forSome`,forAll:`${YP}reify#forAll`},log:{implies:`${YP}log#implies`}};function XP(n,e){const t=Object.create(null);for(const r in n)i(r,n[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);t[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in t))throw new Error(`Unknown prefix: ${r}`);return t[r]}return e=e||Fi,i}const{rdf:MPe,xsd:sp}=js;let Sv,TPe=0;const TY=/^"(.*".*)(?="[^"]*$)/,IPe=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,KP={namedNode:function PPe(n){return new IY(n)},blankNode:function NPe(n){return new DPe(n||"n3-"+TPe++)},variable:function LPe(n){return new RPe(n)},literal:function FPe(n,e){if("string"==typeof e)return new Xg(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return""===t&&("boolean"==typeof n?t=sp.boolean:"number"==typeof n&&(Number.isFinite(n)?t=Number.isInteger(n)?sp.integer:sp.double:(t=sp.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new Xg(""===t||t===sp.string?`"${n}"`:`"${n}"^^${t}`)},defaultGraph:function BPe(){return Sv},quad:DY,triple:DY},Fi=KP;class Wd{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Wd?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class IY extends Wd{get termType(){return"NamedNode"}}class Xg extends Wd{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new IY(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?sp.string:MPe.langString}equals(e){return e instanceof Xg?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class DPe extends Wd{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class RPe extends Wd{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function $d(n,e){if(e=e||KP,!n)return e.defaultGraph();switch(n[0]){case"?":return e.variable(n.substr(1));case"_":return e.blankNode(n.substr(2));case'"':if(e===KP)return new Xg(n);if('"'===n[n.length-1])return e.literal(n.substr(1,n.length-2));const t=n.lastIndexOf('"',n.length-1);return e.literal(n.substr(1,t-1),"@"===n[t+1]?n.substr(t+2):e.namedNode(n.substr(t+3)));case"<":const i=IPe.exec(n);return e.quad($d(hS(i[1]),e),$d(hS(i[2]),e),$d(hS(i[3]),e),i[4]&&$d(hS(i[4]),e));default:return e.namedNode(n)}}function Hi(n){if("string"==typeof n)return n;if(n instanceof Wd&&"Quad"!==n.termType)return n.id;if(!n)return Sv.id;switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return`_:${n.value}`;case"Variable":return`?${n.value}`;case"DefaultGraph":return"";case"Literal":return`"${n.value}"${n.language?`@${n.language}`:n.datatype&&n.datatype.value!==sp.string?`^^${n.datatype.value}`:""}`;case"Quad":return`<<${qP(Hi(n.subject))} ${qP(Hi(n.predicate))} ${qP(Hi(n.object))}${function MY(n){return!!n&&"DefaultGraph"===n.termType}(n.graph)?"":` ${Hi(n.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${n.termType}`)}}Sv=new class OPe extends Wd{constructor(){return super(""),Sv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class kPe extends Wd{constructor(e,t,i,r){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=r||Sv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function qP(n){return n.replace(TY,(e,t)=>`"${t.replace(/"/g,'""')}`)}function hS(n){return n.replace(TY,(e,t)=>`"${t.replace(/""/g,'"')}`)}function DY(n,e,t,i){return new kPe(n,e,t,i)}var jPe=g(3410),UPe=g.n(jPe);const{xsd:fS}=js,VPe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,RY={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},zPe=/[\x00-\x20<>\\"\{\}\|\^\`]/,HPe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},GPe=/$0^/;class WPe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const t in this)!(t in HPe)&&this[t]instanceof RegExp&&(this[t]=GPe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",f="",m="",v=null,E=0,D=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(E=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){D=!0;break}case"<":if(v=this._unescapedIri.exec(i))h="IRI",f=v[1];else if(v=this._iri.exec(i)){if(f=this._unescape(v[1]),null===f||zPe.test(f))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",E=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",E=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",E=2);break;case"_":((v=this._blank.exec(i))||t&&(v=this._blank.exec(`${i} `)))&&(h="blank",m="_",f=v[1]);break;case'"':if(v=this._simpleQuotedString.exec(i))f=v[1];else if(({value:f,matchLength:E}=this._parseLiteral(i)),null===f)return s(this);(null!==v||0!==E)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(v=this._simpleApostropheString.exec(i))f=v[1];else if(({value:f,matchLength:E}=this._parseLiteral(i)),null===f)return s(this);(null!==v||0!==E)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(v=this._variable.exec(i))&&(h="var",f=v[0]);break;case"@":"literal"===this._previousMarker&&(v=this._langcode.exec(i))?(h="langcode",f=v[1]):(v=this._keyword.exec(i))&&(h=v[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){h=".",E=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(v=this._number.exec(i)||t&&(v=this._number.exec(`${i} `)))&&(h="literal",f=v[0],m="string"==typeof v[1]?fS.double:"string"==typeof v[2]?fS.decimal:fS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(v=this._sparqlKeyword.exec(i))?h=v[0].toUpperCase():D=!0;break;case"f":case"t":(v=this._boolean.exec(i))?(h="literal",f=v[0],m=fS.boolean):D=!0;break;case"a":(v=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):D=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(E=1,f="="):(E=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(E=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",E=2):(h=d,E=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",E=2);break;default:D=!0}if(D&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(v=this._prefix.exec(i))?((v=this._prefixed.exec(i))||t&&(v=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=v[1]||"",f=this._unescape(v[2])):(h="prefix",f=v[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const H=E||v[0].length,Y=o(h,f,m,l,H);this.previousToken=Y,this._previousMarker=h,i=i.substr(H,i.length)}function o(a,c,l,d,h){const f=i?r-i.length:r,v={type:a,value:c,prefix:l,line:d,start:f,end:f+h};return e(null,v),v}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(VPe,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in RY?RY[a]:(t=!0,"")});return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(t,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}UPe()(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}let OY=0;class kY{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&PY(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),r=/trig/.test(t),o=/triple/.test(t),s=/quad/.test(t),a=this._n3Mode=/n3/.test(t),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new WPe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){OY=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:t,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,i,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,r){this._callback(null,this._quad(e,t,i,r||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=JP}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<t;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<t&&"/"!==e[o];)r=o;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${OY++}_`,this._prefixCallback=i||JP,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=t,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=JP):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function JP(){}function PY(n,e){const t=e.namedNode;n._namedNode=t,n._blankNode=e.blankNode,n._literal=e.literal,n._variable=e.variable,n._quad=e.quad,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=t(js.rdf.first),n.RDF_REST=t(js.rdf.rest),n.RDF_NIL=t(js.rdf.nil),n.N3_FORALL=t(js.r.forAll),n.N3_FORSOME=t(js.r.forSome),n.ABBREVIATIONS={a:t(js.rdf.type),"=":t(js.owl.sameAs),">":t(js.log.implies)},n.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}PY(kY.prototype,Fi);var ZP=g(8905);class QP{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||Fi,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,r;for(const o in t)for(const s in i=t[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,t,i,r){const o=e[t]||(e[t]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,t,i,r){const o=e[t],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[t]}*_findInIndex(e,t,i,r,o,s,a,c){let l,d,h;const f=this._entities,m=$d(c,this._factory),v={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const E in e)if(d=e[E]){v[o]=$d(f[E],this._factory),i&&((l=d,d={})[i]=l[i]);for(const D in d)if(h=d[D]){v[s]=$d(f[D],this._factory);const H=r?r in h?[r]:[]:Object.keys(h);for(let Y=0;Y<H.length;Y++)v[a]=$d(f[H[Y]],this._factory),yield this._factory.quad(v.subject,v.predicate,v.object,m)}}}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let r,o;if(r=e[t])for(o in r)i(o)}_loopByKey1(e,t,i){let r,o;for(r in e)o=e[r],o[t]&&i(r)}_loopBy2Keys(e,t,i,r){let o,s,a;if((o=e[t])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,t,i,r){let s,a,c,o=0;t&&((s=e,e={})[t]=s[t]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Ma(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e($d(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),e=Hi(e),t=Hi(t),i=Hi(i),r=Hi(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),t=s[t]||(s[a[++this._id]=t]=this._id),i=s[i]||(s[a[++this._id]=i]=this._id);const c=this._addToIndex(o.subjects,e,t,i);return this._addToIndex(o.predicates,t,i,e),this._addToIndex(o.objects,i,e,t),this._size=null,c}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,i,r){return e&&e.subject&&({subject:e,predicate:t,object:i,graph:r}=e),!this.readQuads(e,t,i,r).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),e=Hi(e),t=Hi(t),i=Hi(i),r=Hi(r);const o=this._ids,s=this._graphs;let a,c,l;if(!((e=o[e])&&(t=o[t])&&(i=o[i])&&(a=s[r])&&(c=a.subjects[e])&&(l=c[t])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,t,i),this._removeFromIndex(a.predicates,t,i,e),this._removeFromIndex(a.objects,i,e,t),null!==this._size&&this._size--,a.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,i,r){const o=new ZP.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,t,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,r){return[...this.readQuads(e,t,i,r)]}*readQuads(e,t,i,r){e=e&&Hi(e),t=t&&Hi(t),i=i&&Hi(i),r=r&&Hi(r);const o=this._getGraphs(r),s=this._ids;let a,c,l,d;if(!(Ma(e)&&!(c=s[e])||Ma(t)&&!(l=s[t])||Ma(i)&&!(d=s[i])))for(const h in o)(a=o[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,t,i,r){return new eN(this,e,t,i,r)}countQuads(e,t,i,r){e=e&&Hi(e),t=t&&Hi(t),i=i&&Hi(i),r=r&&Hi(r);const o=this._getGraphs(r),s=this._ids;let c,l,d,h,a=0;if(Ma(e)&&!(l=s[e])||Ma(t)&&!(d=s[t])||Ma(i)&&!(h=s[i]))return 0;for(const f in o)(c=o[f])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):t?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,t,i,r,o){this.some(s=>(e(s),!1),t,i,r,o)}every(e,t,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),t,i,r,o);return s&&a}some(e,t,i,r,o){for(const s of this.readQuads(t,i,r,o))if(e(s))return!0;return!1}getSubjects(e,t,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,t,i),r}forSubjects(e,t,i,r){t=t&&Hi(t),i=i&&Hi(i),r=r&&Hi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ma(t)&&!(c=o[t])||Ma(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,t,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,t,i),r}forPredicates(e,t,i,r){t=t&&Hi(t),i=i&&Hi(i),r=r&&Hi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ma(t)&&!(c=o[t])||Ma(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,t,i){const r=[];return this.forObjects(o=>{r.push(o)},e,t,i),r}forObjects(e,t,i,r){t=t&&Hi(t),i=i&&Hi(i),r=r&&Hi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ma(t)&&!(c=o[t])||Ma(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,t,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,t,i),r}forGraphs(e,t,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),t,i,r,o)}createBlankNode(e){let t,i;if(e)for(t=e=`_:${e}`,i=1;this._ids[t];)t=e+i++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},r=t?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,js.rdf.rest,js.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const f=a.graph;let m=a.subject;for(;m&&!l;){const v=this.getQuads(null,null,m,null),E=this.getQuads(m,null,null,null);let D,H=null,Y=null,he=null;for(let Ie=0;Ie<E.length&&!l;Ie++)D=E[Ie],D.graph.equals(f)?d?l=r(m,"has non-list arcs out"):D.predicate.value===js.rdf.first?H?l=r(m,"has multiple rdf:first arcs"):s.push(H=D):D.predicate.value===js.rdf.rest?Y?l=r(m,"has multiple rdf:rest arcs"):s.push(Y=D):v.length?l=r(m,"can't be subject and object"):(d=D,h="subject"):l=r(m,"not confined to single graph");for(let Ie=0;Ie<v.length&&!l;++Ie)D=v[Ie],d?l=r(m,"can't have coreferences"):D.predicate.value===js.rdf.rest?he?l=r(m,"has incoming rdf:rest arcs"):he=D:(d=D,h="object");H?c.unshift(H.object):l=r(m,"has no list head"),m=he&&he.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}function Ma(n){return"string"==typeof n||n instanceof String}class eN extends ZP.Readable{constructor(e,t,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:r,subject:o}=this,s=this._filtered=new QP({factory:e._factory});for(const a of e.readQuads(o,r,i,t))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,r){return new eN(this.filtered,e,t,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var $Pe=g(2821);function hr(n,e,t,i,r){return n.readQuads(e,t,i,r)}function NY(n){const e=n.length;let t=0;return new ZP.Readable({objectMode:!0,read(){this.push(t<e?n[t++]:null)}})}function tN(n,e){return nN.apply(this,arguments)}function nN(){return nN=Lt(function*(n,e){let t;if("string"==typeof n){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.json())}else t=n;if(t){const i=yield CPe.toRDF(t);e.import(NY(i))}return e}),nN.apply(this,arguments)}function iN(){return iN=Lt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new $Pe.RdfXmlParser({dataFactory:Fi,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(t),i.end(),r}return e}),iN.apply(this,arguments)}function rN(){return rN=Lt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new kY({format:"n3"}).parse(t);e.import(NY(i))}return e}),rN.apply(this,arguments)}function oN(n,e){const t=JSON.parse(n),i=new QP;return Object.assign(i,t,{_factory:e??Fi}),i}const Gi=XP({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Fi),qt=(Gi("rdf"),Gi("rdf")("type"),Gi("rdfs"),Gi("rdfs")("label"),Gi("rdfs")("comment"),Gi("rdfs")("isDefinedBy"),Gi("rdfs")("seeAlso"),Gi("ccf")),Yd=(Gi("ccf")("has_registration_location"),Gi("rdfs")("label"),Gi("rdfs")("comment"),qt("url"),qt("sex"),qt("age"),qt("bmi"),Fi.literal("Male"),Fi.literal("Female"),qt("consortium_name"),qt("tissue_provider_name"),qt("tissue_provider_uuid"),qt("comes_from"),qt("subdivided_into_sections"),qt("generates_dataset"),qt("sample_type"),Fi.literal("Tissue Block"),Fi.literal("Tissue Section"),Fi.literal("Non-standard"),qt("section_count"),qt("section_size"),qt("section_size_unit"),qt("section_number"),qt("has_registration_location"),qt("has_ontology_term"),qt("has_cell_type_term"),qt("technology"),qt("thumbnail"),{x:qt,base:Gi("base"),ontologyNode:{label:qt("ccf_pref_label"),parent:qt("ccf_part_of"),children:qt("ccf_part_of"),rui_rank:qt("rui_rank"),synonymLabels:Fi.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:qt("ccf_part_of"),ct_is_a:qt("ccf_ct_isa"),located_in:qt("ccf_located_in"),characterizes:qt("ccf_characterizes"),bm_located_in:qt("ccf_bm_located_in")},spatial:{Female:Gi("base")("VHFemale"),Male:Gi("base")("VHMale"),BothSexes:Gi("base")("VHBothSexes"),FemaleOrgans:Gi("base")("VHFemaleOrgans"),MaleOrgans:Gi("base")("VHMaleOrgans")},SpatialObjectReference:qt("spatial_object_reference"),SpatialEntity:qt("spatial_entity"),SpatialPlacement:qt("spatial_placement"),spatialObjectReference:{file:qt("file_url"),file_format:qt("file_format"),file_subpath:qt("file_subpath")},extractionSet:{label:Gi("rdfs")("label"),rui_rank:qt("rui_rank")},spatialEntity:{label:Gi("rdfs")("label"),description:Gi("rdfs")("comment"),creator:Gi("dcterms")("creator"),creator_first_name:qt("creator_first_name"),creator_last_name:qt("creator_last_name"),creator_middle_name:qt("creator_middle_name"),creator_orcid:qt("creator_orcid"),creation_date:Gi("dcterms")("created"),updated_date:qt("updated_date"),ccf_annotations:qt("collides_with"),representation_of:qt("representation_of"),reference_organ:qt("has_reference_organ"),extraction_set_for:qt("extraction_set_for"),extraction_set:qt("has_extraction_set"),sex:qt("organ_owner_sex"),side:qt("organ_side"),rui_rank:qt("rui_rank"),slice_thickness:qt("slice_thickness"),slice_count:qt("slice_count"),x_dimension:qt("x_dimension"),y_dimension:qt("y_dimension"),z_dimension:qt("z_dimension"),dimension_units:qt("dimension_unit"),object:qt("has_object_reference")},spatialPlacement:{source:qt("placement_for"),target:qt("placement_relative_to"),placement_date:Gi("dcterms")("created"),x_scaling:qt("x_scaling"),y_scaling:qt("y_scaling"),z_scaling:qt("z_scaling"),scaling_units:qt("scaling_unit"),x_rotation:qt("x_rotation"),y_rotation:qt("y_rotation"),z_rotation:qt("z_rotation"),w_rotation:qt("theta_rotation"),rotation_order:qt("rotation_order"),rotation_units:qt("rotation_unit"),x_translation:qt("x_translation"),y_translation:qt("y_translation"),z_translation:qt("z_translation"),translation_units:qt("translation_unit")}}),ei={x:Gi("uberon"),body:Gi("uberon")("0013702")},JPe={x:Gi("cl"),cell:Gi("cl")("0000000")},Cv={x:Gi("fma")},FY=(Gi("lmha"),{body:ei.body,cell:JPe.cell,respiratory_system:ei.x("0001004"),colon:ei.x("0001155"),left_lung:ei.x("0002168"),right_lung:ei.x("0002167"),left_bronchus:ei.x("0002178"),right_bronchus:ei.x("0002177"),kidney:ei.x("0002113"),ureter:ei.x("0000056"),eye:ei.x("0000970"),fallopian_tube:ei.x("0003889"),knee:ei.x("0001465"),ovary:ei.x("0000992"),trachea:ei.x("0003126"),aorta:ei.x("0000947"),blood:ei.x("0000178"),bone_marrow:ei.x("0002371"),male_reproductive_system:ei.x("0000079"),lymph_node:ei.x("0000029"),blood_vasculature:ei.x("0004537"),brain:ei.x("0000955"),eye_left:ei.x("0004548"),eye_right:Cv.x("54449"),fallopian_tube_left:ei.x("0001303"),fallopian_tube_right:ei.x("0001302"),heart:ei.x("0000948"),kidney_left:ei.x("0004538"),kidney_right:ei.x("0004539"),knee_left:Cv.x("24978"),knee_right:Cv.x("24977"),large_intestine:ei.x("0000059"),liver:ei.x("0002107"),lungs:ei.x("0002048"),mesenteric_lymph_node:ei.x("0002509"),ovary_left:Cv.x("7214"),ovary_right:Cv.x("7213"),pancreas:ei.x("0001264"),pelvis:ei.x("0001270"),prostate_gland:ei.x("0002367"),skin:ei.x("0002097"),small_intestine:ei.x("0002108"),spleen:ei.x("0002106"),thymus:ei.x("0002370"),ureter_left:ei.x("0001223"),ureter_right:ei.x("0001222"),urinary_bladder:ei.x("0001255"),uterus:ei.x("0000995")});function sN(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}sN(Yd.spatialObjectReference),sN(Yd.spatialEntity),sN(Yd.spatialPlacement),APe();var BY=g(6990),tNe=g.n(BY);tNe();var gS=g(6030);const Jg=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),_r=(Math,Math,{});function gNe(n,{precision:e=_r.precision||4}={}){return n=function mNe(n){return Math.round(n/_r.EPSILON)*_r.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function lh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tv(n,e,t){const i=_r.EPSILON;t&&(_r.EPSILON=t);try{if(n===e)return!0;if(lh(n)&&lh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Tv(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=_r.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{_r.EPSILON=i}}function Uc(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}_r.EPSILON=1e-12,_r.debug=!1,_r.precision=4,_r.printTypes=!1,_r.printDegrees=!1,_r.printRowMajor=!0;class fN extends(function wNe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Uc(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:lh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(_r)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+gNe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Tv(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(_r.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function qo(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function zY(n,e,t=""){if(_r.debug&&!function ENe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const HY={};function pN(n,e){HY[n]||(HY[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class ANe extends fN{get ELEMENTS(){return Uc(!1),0}copy(e){return Uc(!1),this}get x(){return this[0]}set x(e){this[0]=qo(e)}get y(){return this[1]}set y(e){this[1]=qo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return qo(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return qo(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Uc(e>=0&&e<this.ELEMENTS,"index is out of range"),qo(this[e])}setComponent(e,t){return Uc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var ca=typeof Float32Array<"u"?Float32Array:Array;function GY(){var n=new ca(3);return ca!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function WY(n,e,t){var i=new ca(3);return i[0]=n,i[1]=e,i[2]=t,i}function $Y(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function _S(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function YY(n,e,t){var i=e[0],r=e[1],o=e[2];return n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8],n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});GY();const mN=[0,0,0],XY={};class wn extends ANe{static get ZERO(){return XY.ZERO=XY.ZERO||Object.freeze(new wn(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&lh(e)?this.copy(e):(_r.debug&&(qo(e),qo(t),qo(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return _r.debug&&(qo(e.x),qo(e.y),qo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=qo(e)}angle(e){return function kNe(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&$Y(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return _S(this,this,e),this.check()}rotateX({radians:e,origin:t=mN}){return function DNe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=mN}){return function RNe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=mN}){return function ONe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function TNe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s}(this,this,e),this.check()}transformAsVector(e){return function NNe(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s}(this,this,e),this.check()}transformByMatrix3(e){return YY(this,this,e),this.check()}transformByMatrix2(e){return function FNe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function INe(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,v=o*d-i*f,E=i*h-r*d,D=2*t[3];h*=D,f*=D,v*=2,E*=2,n[0]=a+(d*=D)+(m*=2),n[1]=c+h+v,n[2]=l+f+E}(this,this,e),this.check()}}new wn,new wn;const Iv=new wn,ZY=new wn;class gN{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new wn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=Iv.from(t),this.center=(new wn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new gN(this.center,this.radius)}union(e){const t=this.center,i=this.radius,o=e.radius,s=Iv.copy(e.center).subtract(t),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return ZY.copy(s).scale((-i+c)/a).add(t),this.center.copy(ZY),this.radius=c,this}expand(e){const t=(e=Iv.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function JY(n,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(o,s,a),n[2]=Math.hypot(c,l,d),n}(Iv,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=Iv.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?Jg.OUTSIDE:o<i?Jg.INTERSECTING:Jg.INSIDE}}class VNe extends fN{get ELEMENTS(){return Uc(!1),0}get RANK(){return Uc(!1),0}toString(){let e="[";if(_r.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=qo(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function QY(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1],v=t[2],E=t[3],D=t[4],H=t[5],Y=t[6],he=t[7],Ie=t[8];return n[0]=f*i+m*s+v*l,n[1]=f*r+m*a+v*d,n[2]=f*o+m*c+v*h,n[3]=E*i+D*s+H*l,n[4]=E*r+D*a+H*d,n[5]=E*o+D*c+H*h,n[6]=Y*i+he*s+Ie*l,n[7]=Y*r+he*a+Ie*d,n[8]=Y*o+he*c+Ie*h,n}function eX(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}!function KNe(){var n=new ca(2);ca!=Float32Array&&(n[0]=0,n[1]=0)}();const tX=Object.freeze([1,0,0,0,1,0,0,0,1]),JNe=Object.freeze([0,0,0,0,0,0,0,0,0]),ZNe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),Qg={};class Us extends VNe{static get IDENTITY(){return Qg.IDENTITY=Qg.IDENTITY||Object.freeze(new Us(tX)),Qg.IDENTITY}static get ZERO(){return Qg.ZERO=Qg.ZERO||Object.freeze(new Us(JNe)),Qg.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ZNe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function WNe(n){var r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8];return n[0]*(l*o-s*c)+n[1]*(-l*r+s*a)+n[2]*(c*r-o*a)}(this)}identity(){return this.copy(tX)}fromQuaternion(e){return function XNe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,v=r*c,E=o*s,D=o*a,H=o*c;n[0]=1-h-v,n[3]=d-H,n[6]=f+D,n[1]=d+H,n[4]=1-l-v,n[7]=m-E,n[2]=f-D,n[5]=m+E,n[8]=1-l-h}(this,e),this.check()}transpose(){return function HNe(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function GNe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,f=-d*o+a*c,m=l*o-s*c,v=t*h+i*f+r*m;v&&(n[0]=h*(v=1/v),n[1]=(-d*i+r*l)*v,n[2]=(a*i-r*s)*v,n[3]=f*v,n[4]=(d*t-r*c)*v,n[5]=(-a*t+r*o)*v,n[6]=m*v,n[7]=(-l*t+i*c)*v,n[8]=(s*t-i*o)*v)}(this,this),this.check()}multiplyLeft(e){return QY(this,e,this),this.check()}multiplyRight(e){return QY(this,this,e),this.check()}rotate(e){return function YNe(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=Math.sin(t),m=Math.cos(t);n[0]=m*i+f*s,n[1]=m*r+f*a,n[2]=m*o+f*c,n[3]=m*s-f*i,n[4]=m*a-f*r,n[5]=m*c-f*o,n[6]=l,n[7]=d,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?eX(this,this,e):eX(this,this,[e,e,e]),this.check()}translate(e){return function $Ne(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1];n[0]=i,n[1]=r,n[2]=o,n[3]=s,n[4]=a,n[5]=c,n[6]=f*i+m*s+l,n[7]=f*r+m*a+d,n[8]=f*o+m*c+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function qNe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=YY(t||[-0,-0,-0],e,this);break;case 4:t=function LNe(n,e,t){const i=e[0],r=e[1],o=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return zY(t,e.length),t}transformVector(e,t){return pN("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return pN("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return pN("Matrix3.transformVector"),this.transform(e,t)}}function nX(){var n=new ca(4);return ca!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function iX(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function rX(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}!function QNe(){var n=new ca(4);ca!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var MFe=function(){var n=GY(),e=WY(1,0,0),t=WY(0,1,0);return function(i,r,o){var s=$Y(r,o);return s<-.999999?(_S(n,e,r),function CNe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&_S(n,t,r),function MNe(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),iX(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(_S(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function cFe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();nX(),nX(),function zNe(){var n=new ca(9);ca!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const TFe=[0,0,0,1];class lX extends fN{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function oX(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}identity(){return function pFe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return iX(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=qo(e)}get y(){return this[1]}set y(e){this[1]=qo(e)}get z(){return this[2]}set z(e){this[2]=qo(e)}get w(){return this[3]}set w(e){this[3]=qo(e)}len(){return function sFe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function aFe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function lFe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return MFe(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function rFe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function bFe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function wFe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function xFe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return function dFe(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return Uc(!t),rX(this,this,e),this.check()}multiplyLeft(e,t){return Uc(!t),rX(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function mFe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function gFe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function _Fe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return function oFe(n,e,t){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t}(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=TFe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function bS(n,e,t,i){var f,m,v,E,D,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),v=Math.sin(f),E=Math.sin((1-i)*f)/v,D=Math.sin(i*f)/v):(E=1-i,D=i),n[0]=E*r+D*c,n[1]=E*o+D*l,n[2]=E*s+D*d,n[3]=E*a+D*h,n}(this,e,t,i),this.check()}transformVector4(e,t=e){return function uFe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),zY(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const IFe=new wn,DFe=new wn,yS=new wn,vS=new wn,xS=new wn,RFe=new wn,OFe=new wn;class _N{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new wn).from(e),this.halfAxes=new Us(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new wn(e).len(),new wn(t).len(),new wn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new wn(e).normalize(),o=new wn(t).normalize(),s=new wn(i).normalize();return(new lX).fromMatrix3(new Us([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new lX(i),o=(new Us).fromQuaternion(r);return o[0]=o[0]*t[0],o[1]=o[1]*t[0],o[2]=o[2]*t[0],o[3]=o[3]*t[1],o[4]=o[4]*t[1],o[5]=o[5]*t[1],o[6]=o[6]*t[2],o[7]=o[7]*t[2],o[8]=o[8]*t[2],this.center=(new wn).from(e),this.halfAxes=o,this}clone(){return new _N(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new gN){const t=this.halfAxes,i=t.getColumn(0,yS),r=t.getColumn(1,vS),o=t.getColumn(2,xS),s=IFe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(t)+e.distance;return l<=-c?Jg.OUTSIDE:l>=c?Jg.INSIDE:Jg.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=DFe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,yS),o=i.getColumn(1,vS),s=i.getColumn(2,xS),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(t.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(t.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(t.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,yS),l=a.getColumn(1,vS),d=a.getColumn(2,xS),h=RFe.copy(c).add(l).add(d).add(s),f=OFe.copy(h).subtract(e);let m=t.dot(f);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,yS);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,vS);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,xS);return r.transformAsPoint(e),this.halfAxes=new Us([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const dX=new wn,uX=new wn;class bN{constructor(e=[0,0,1],t=0){this.normal=new wn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Uc(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=dX.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),Uc(Tv(this.normal.len(),1)),this.distance=r,this}clone(e){return new bN(this.normal,this.distance)}equals(e){return Tv(this.distance,e.distance)&&Tv(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=uX.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=dX.from(e);const i=this.getPointDistance(e),r=uX.copy(this.normal).scale(i);return e.subtract(r).to(t)}}new wn([1,0,0]),new wn([0,1,0]),new wn([0,0,1]),new wn,new wn,new bN(new wn(1,0,0),0),new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,new wn,Math,new Us,new Us,new Us,new Us,new Us,new wn,new wn,new wn,new wn,new wn,new Us,new Us,new Us;var mX=g(7659);function SLe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[Yd.ontologyNode.label.id]:"label",[t]:"parent",[Yd.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of function*qPe(n,e,t){for(const[i,r]of Object.entries(t))for(const o of hr(n,e,i,null,null)){const s="Literal"===o.object.termType?(0,wv.fromRdf)(o.object):o.object.id;yield[r,s]}}(n,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=n.getSubjects(t,e,null).map(o=>o.id),i}function gX(n,e,t,i){const r={root:e,nodes:{}},o=new Set;for(const a of hr(n,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=SLe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const s=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,_X(r),r}function _X(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)_X(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}g.n(mX)()(function CLe(n){const e=gX(n,FY.body.id,"body",Yd.asctb.part_of.id);return e.nodes[FY.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");const vX={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"},SS="Unknown Euler angle order",n_=.99999;var Io=function(n){return n[n.ZYX=0]="ZYX",n[n.YXZ=1]="YXZ",n[n.XZY=2]="XZY",n[n.ZXY=3]="ZXY",n[n.YZX=4]="YZX",n[n.XYZ=5]="XYZ",n}(Io||{});class $r extends I1{static get ZYX(){return Io.ZYX}static get YXZ(){return Io.YXZ}static get XZY(){return Io.XZY}static get ZXY(){return Io.ZXY}static get YZX(){return Io.YZX}static get XYZ(){return Io.XYZ}static get RollPitchYaw(){return Io.ZYX}static get DefaultOrder(){return Io.ZYX}static get RotationOrders(){return Io}static rotationOrder(e){return Io[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=$r.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(t*i+o*r);let l=-2*(t*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+o*t),-2*(t*t+s)+1),m=Math.asin(l),v=Math.atan2(c,a);return this.set(f,m,v,$r.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function NLe(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}get z(){return this[2]}set z(e){this[2]=pi(e)}get alpha(){return this[0]}set alpha(e){this[0]=pi(e)}get beta(){return this[1]}set beta(e){this[1]=pi(e)}get gamma(){return this[2]}set gamma(e){this[2]=pi(e)}get phi(){return this[0]}set phi(e){this[0]=pi(e)}get theta(){return this[1]}set theta(e){this[1]=pi(e)}get psi(){return this[2]}set psi(e){this[2]=pi(e)}get roll(){return this[0]}set roll(e){this[0]=pi(e)}get pitch(){return this[1]}set pitch(e){this[1]=pi(e)}get yaw(){return this[2]}set yaw(e){this[2]=pi(e)}get order(){return this[3]}set order(e){this[3]=function FLe(n){if(n<0&&n>=6)throw new Error(SS);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,Io.ZYX)}fromRotationMatrix(e,t=$r.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new nR;switch(this[4]){case Io.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Io.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Io.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Io.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Io.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Io.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(SS)}}_fromRotationMatrix(e,t=$r.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(t=t||this[3]){case $r.XYZ:this[1]=Math.asin(Tr(o,-1,1)),Math.abs(o)<n_?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case $r.YXZ:this[0]=Math.asin(-Tr(c,-1,1)),Math.abs(c)<n_?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case $r.ZXY:this[0]=Math.asin(Tr(d,-1,1)),Math.abs(d)<n_?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case $r.ZYX:this[1]=Math.asin(-Tr(l,-1,1)),Math.abs(l)<n_?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case $r.YZX:this[2]=Math.asin(Tr(s,-1,1)),Math.abs(s)<n_?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case $r.XZY:this[2]=Math.asin(-Tr(r,-1,1)),Math.abs(r)<n_?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(SS)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case $r.XYZ:{const f=s*c,m=s*h,v=l*c,E=l*h;t[0]=a*c,t[4]=-a*h,t[8]=d,t[1]=m+v*d,t[5]=f-E*d,t[9]=-l*a,t[2]=E-f*d,t[6]=v+m*d,t[10]=s*a;break}case $r.YXZ:{const f=a*c,m=a*h,v=d*c,E=d*h;t[0]=f+E*l,t[4]=v*l-m,t[8]=s*d,t[1]=s*h,t[5]=s*c,t[9]=-l,t[2]=m*l-v,t[6]=E+f*l,t[10]=s*a;break}case $r.ZXY:{const f=a*c,m=a*h,v=d*c,E=d*h;t[0]=f-E*l,t[4]=-s*h,t[8]=v+m*l,t[1]=m+v*l,t[5]=s*c,t[9]=E-f*l,t[2]=-s*d,t[6]=l,t[10]=s*a;break}case $r.ZYX:{const f=s*c,m=s*h,v=l*c,E=l*h;t[0]=a*c,t[4]=v*d-m,t[8]=f*d+E,t[1]=a*h,t[5]=E*d+f,t[9]=m*d-v,t[2]=-d,t[6]=l*a,t[10]=s*a;break}case $r.YZX:{const f=s*a,m=s*d,v=l*a,E=l*d;t[0]=a*c,t[4]=E-f*h,t[8]=v*h+m,t[1]=h,t[5]=s*c,t[9]=-l*c,t[2]=-d*c,t[6]=m*h+v,t[10]=f-E*h;break}case $r.XZY:{const f=s*a,m=s*d,v=l*a,E=l*d;t[0]=a*c,t[4]=-h,t[8]=d*c,t[1]=f*h+E,t[5]=s*c,t[9]=m*h-v,t[2]=v*h-m,t[6]=l*c,t[10]=E*h+f;break}default:throw new Error(SS)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new nR(e*r*o-t*i*s,e*i*s+t*r*o,t*i*o-e*r*s,e*i*o+t*r*s)}}const xX={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let CS;const LLe=new Uint8Array(16);function BLe(){if(!CS&&(CS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!CS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return CS(LLe)}const Jo=[];for(let n=0;n<256;++n)Jo.push((n+256).toString(16).slice(1));const ULe=function jLe(n,e,t){if(xX.randomUUID&&!e&&!n)return xX.randomUUID();const i=(n=n||{}).random||(n.rng||BLe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return function wX(n,e=0){return Jo[n[e+0]]+Jo[n[e+1]]+Jo[n[e+2]]+Jo[n[e+3]]+"-"+Jo[n[e+4]]+Jo[n[e+5]]+"-"+Jo[n[e+6]]+Jo[n[e+7]]+"-"+Jo[n[e+8]]+Jo[n[e+9]]+"-"+Jo[n[e+10]]+Jo[n[e+11]]+Jo[n[e+12]]+Jo[n[e+13]]+Jo[n[e+14]]+Jo[n[e+15]]}(i)};function*MS(n,e,t){for(const[i,r]of Object.entries(t))for(const o of hr(n,e,i,null,null)){const s="Literal"===o.object.termType?(0,wv.fromRdf)(o.object):o.object.id;yield[r,s]}}function ap(n,e,t,i){const r={"@id":e,"@type":t};for(const[o,s]of Object.entries(i))for(const a of hr(n,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,wv.fromRdf)(a.object):a.object.id;r[s]=c}return r}const Wi=XP({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Fi),EX={x:Wi("rdf"),type:Wi("rdf")("type")},VLe_label=(Wi("rdfs"),Wi("rdfs")("label")),Jt=(Wi("rdfs")("comment"),Wi("rdfs")("isDefinedBy"),Wi("rdfs")("seeAlso"),Wi("ccf")),ti={id:Wi("ccf")("has_registration_location"),label:Wi("rdfs")("label"),description:Wi("rdfs")("comment"),link:Jt("url"),sex:Jt("sex"),age:Jt("age"),bmi:Jt("bmi"),Male:Fi.literal("Male"),Female:Fi.literal("Female"),consortiumName:Jt("consortium_name"),providerName:Jt("tissue_provider_name"),providerUUID:Jt("tissue_provider_uuid"),donor:Jt("comes_from"),sections:Jt("subdivided_into_sections"),datasets:Jt("generates_dataset"),sampleType:Jt("sample_type"),TissueBlock:Fi.literal("Tissue Block"),TissueSection:Fi.literal("Tissue Section"),NonStandard:Fi.literal("Non-standard"),sectionCount:Jt("section_count"),sectionSize:Jt("section_size"),sectionUnits:Jt("section_size_unit"),sectionNumber:Jt("section_number"),spatialEntity:Jt("has_registration_location"),ontologyTerms:Jt("has_ontology_term"),cellTypeTerms:Jt("has_cell_type_term"),technology:Jt("technology"),thumbnail:Jt("thumbnail")},mi={x:Jt,base:Wi("base"),ontologyNode:{label:Jt("ccf_pref_label"),parent:Jt("ccf_part_of"),children:Jt("ccf_part_of"),rui_rank:Jt("rui_rank"),synonymLabels:Fi.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Jt("ccf_part_of"),ct_is_a:Jt("ccf_ct_isa"),located_in:Jt("ccf_located_in"),characterizes:Jt("ccf_characterizes"),bm_located_in:Jt("ccf_bm_located_in")},spatial:{Female:Wi("base")("VHFemale"),Male:Wi("base")("VHMale"),BothSexes:Wi("base")("VHBothSexes"),FemaleOrgans:Wi("base")("VHFemaleOrgans"),MaleOrgans:Wi("base")("VHMaleOrgans")},SpatialObjectReference:Jt("spatial_object_reference"),SpatialEntity:Jt("spatial_entity"),SpatialPlacement:Jt("spatial_placement"),spatialObjectReference:{file:Jt("file_url"),file_format:Jt("file_format"),file_subpath:Jt("file_subpath")},extractionSet:{label:Wi("rdfs")("label"),rui_rank:Jt("rui_rank")},spatialEntity:{label:Wi("rdfs")("label"),description:Wi("rdfs")("comment"),creator:Wi("dcterms")("creator"),creator_first_name:Jt("creator_first_name"),creator_last_name:Jt("creator_last_name"),creator_middle_name:Jt("creator_middle_name"),creator_orcid:Jt("creator_orcid"),creation_date:Wi("dcterms")("created"),updated_date:Jt("updated_date"),ccf_annotations:Jt("collides_with"),representation_of:Jt("representation_of"),reference_organ:Jt("has_reference_organ"),extraction_set_for:Jt("extraction_set_for"),extraction_set:Jt("has_extraction_set"),sex:Jt("organ_owner_sex"),side:Jt("organ_side"),rui_rank:Jt("rui_rank"),slice_thickness:Jt("slice_thickness"),slice_count:Jt("slice_count"),x_dimension:Jt("x_dimension"),y_dimension:Jt("y_dimension"),z_dimension:Jt("z_dimension"),dimension_units:Jt("dimension_unit"),object:Jt("has_object_reference")},spatialPlacement:{source:Jt("placement_for"),target:Jt("placement_relative_to"),placement_date:Wi("dcterms")("created"),x_scaling:Jt("x_scaling"),y_scaling:Jt("y_scaling"),z_scaling:Jt("z_scaling"),scaling_units:Jt("scaling_unit"),x_rotation:Jt("x_rotation"),y_rotation:Jt("y_rotation"),z_rotation:Jt("z_rotation"),w_rotation:Jt("theta_rotation"),rotation_order:Jt("rotation_order"),rotation_units:Jt("rotation_unit"),x_translation:Jt("x_translation"),y_translation:Jt("y_translation"),z_translation:Jt("z_translation"),translation_units:Jt("translation_unit")}},ni={x:Wi("uberon"),body:Wi("uberon")("0013702")},zLe={x:Wi("cl"),cell:Wi("cl")("0000000")},Ov={x:Wi("fma")},Vc=(Wi("lmha"),{body:ni.body,cell:zLe.cell,respiratory_system:ni.x("0001004"),colon:ni.x("0001155"),left_lung:ni.x("0002168"),right_lung:ni.x("0002167"),left_bronchus:ni.x("0002178"),right_bronchus:ni.x("0002177"),kidney:ni.x("0002113"),ureter:ni.x("0000056"),eye:ni.x("0000970"),fallopian_tube:ni.x("0003889"),knee:ni.x("0001465"),ovary:ni.x("0000992"),trachea:ni.x("0003126"),aorta:ni.x("0000947"),blood:ni.x("0000178"),bone_marrow:ni.x("0002371"),male_reproductive_system:ni.x("0000079"),lymph_node:ni.x("0000029"),blood_vasculature:ni.x("0004537"),brain:ni.x("0000955"),eye_left:ni.x("0004548"),eye_right:Ov.x("54449"),fallopian_tube_left:ni.x("0001303"),fallopian_tube_right:ni.x("0001302"),heart:ni.x("0000948"),kidney_left:ni.x("0004538"),kidney_right:ni.x("0004539"),knee_left:Ov.x("24978"),knee_right:Ov.x("24977"),large_intestine:ni.x("0000059"),liver:ni.x("0002107"),lungs:ni.x("0002048"),mesenteric_lymph_node:ni.x("0002509"),ovary_left:Ov.x("7214"),ovary_right:Ov.x("7213"),pancreas:ni.x("0001264"),pelvis:ni.x("0001270"),prostate_gland:ni.x("0002367"),skin:ni.x("0002097"),small_intestine:ni.x("0002108"),spleen:ni.x("0002106"),thymus:ni.x("0002370"),ureter_left:ni.x("0001223"),ureter_right:ni.x("0001222"),urinary_bladder:ni.x("0001255"),uterus:ni.x("0000995")});function MN(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const TS={spatialObjectReference:MN(mi.spatialObjectReference),spatialEntity:MN(mi.spatialEntity),spatialPlacement:MN(mi.spatialPlacement)};function AX(n,e){const t=ap(n,e,"ExtractionSet",TS.spatialEntity);return t.extractionSites=uS(n.getSubjects(mi.spatialEntity.extraction_set,e,null).map(i=>cp(n,i.id)),["rui_rank"]),t}function cp(n,e){const t=ap(n,e,"SpatialEntity",TS.spatialEntity);return t.object&&(t.object=function HLe(n,e){return ap(n,e,"SpatialObjectReference",TS.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,mi.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,ti.spatialEntity,e,null),t}function YLe(n,e){const t=ap(n,e,"SpatialPlacement",TS.spatialPlacement);return t.source&&(t.source=cp(n,t.source)),t.target&&(t.target=cp(n,t.target)),t}const KLe=(dS||EPe).DirectedGraph;function SX(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),o=[t.x_rotation,t.y_rotation,t.z_rotation].map(MU),s=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(o).scale(s)}class CX{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new KLe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},EX.type,mi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},EX.type,mi.SpatialEntity,null);const t={};for(const i of hr(e,null,mi.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of hr(e,null,mi.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new Gn(Gn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new Gn(Gn.IDENTITY),o=SPe(this.graph,e,t);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&SX(r,YLe(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=CY(e,"placement[0]",CY(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,t),o&&(o=SX(o,r))):i&&(o=this.getTransformationMatrix(i,t)),o){const s=(new $r).fromRotationMatrix(o,$r.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(Eoe),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${ULe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class MX{constructor(e){this.db=e}getSpatialEntity(e){return cp(this.db.store,e)}getExtractionSets(e){return function GLe(n,e){return uS(n.getSubjects(mi.spatialEntity.extraction_set_for,e,null).map(t=>AX(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return AX(this.db.store,e)}getAnatomicalStructures(e){return function WLe(n,e){return uS(n.getSubjects(mi.spatialEntity.reference_organ,e,null).map(t=>cp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function $Le(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(cp(n,t.subject.id))},null,mi.spatialEntity.reference_organ,null,null),uS(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(e?.sex){case"Male":t=mi.spatial.Male.id;break;case"Female":t=mi.spatial.Female.id;break;default:t=mi.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(e?.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return e?.debug&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,t,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(mi.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,t){const i=void 0!==t?.sex&&"both"!==t?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===t?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(t)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(s){if(r)s=new Gn(Gn.IDENTITY).rotateX(MU(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const qLe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function IS(n,e=qLe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:Hl,omit:JLe,set:DS,toNumber:TN}=BY,TX={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},ZLe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},IX=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),QLe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},i_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},IN="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class nBe{constructor(e,t){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=ZLe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=TX}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const s=this.getRuiLocation(e,this.donor);s?this.rui_location=s:this.bad=!0,i_[e.group_uuid]||(i_[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=i_[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const d={},h=[];this.sections=h;const f=[];this.datasets=f;for(const H of r.filter(Y=>"Sample"===Y.entity_type)){const Y=this.getSection(H,e);d[H.submission_id]=Y,h.push(Y),Y.section_number=Y.section_number??h.length}for(const H of r)if("Dataset"===H.entity_type){const Y=this.getDataset(H,t),he=Hl(H,["ingest_metadata","metadata","tissue_id"]);d[he]?d[he].datasets?.push(Y):f.push(Y)}const m=s??{},v=`${m.x_dimension} x ${m.y_dimension} x ${m.z_dimension} ${m.dimension_units}`;this.section_count=m.slice_count||h.length;const E=parseFloat((m.slice_thickness||(m.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=E;const D=m.dimension_units||"millimeter";this.section_units=D,this.description=`${v}, ${E} ${D}, ${this.section_count} Sections`,h.forEach((H,Y)=>{H.description=`${m.x_dimension} x ${m.y_dimension} x ${E} ${D}, ${E} ${D}, ${H.description}`,H.section_number=Y+1})}getSection(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${i_[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=i_[e.group_uuid]||e.group_name,o=e.created_by_user_displayname,s=[...e.data_types,Hl(e,["ingest_metadata","metadata","assay_type"],"")],a=s.join("|").toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":"OTHER",l=this.getDatasetThumbnail(e,t)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${o}, ${r}`,description:`Data/Assay Types: ${s.join(", ")}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,t){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(t?`?token=${t}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=Hl(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>IX.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(t?`?token=${t}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(IX.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=QLe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const t=(e.description||"").toLowerCase();let i;t.includes("female")?i="Female":t.includes("male")&&(i="Male");const r=t.match(/age ([0-9]+)/)??t.match(/ ([0-9]+) years/);let o,s,a;r&&(o=TN(r[1]));const c=Hl(e,"mapped_metadata",Hl(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!o&&c.age_value?.length>0&&(o=c.age_value[0]),!s&&c.body_mass_index_value?.length>0&&(s=c.body_mass_index_value[0]);for(const m of Hl(e,"metadata.organ_donor_data",Hl(e,"metadata.living_donor_data",[])))"Feminine gender"===m.preferred_term||"Female"===m.preferred_term?i="Female":"Masculine gender"===m.preferred_term||"Male"===m.preferred_term?i="Male":"Current chronological age"===m.preferred_term||"Age"===m.preferred_term?o=TN(m.data_value):"Body mass index"===m.preferred_term?s=TN(m.data_value):"Race"===m.grouping_concept_preferred_term&&(a=m.preferred_term);let l="";i&&o?(l+=`${i}, Age ${o}`,s&&(l+=`, BMI ${s.toFixed(1)}`)):i&&(l=i);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=i_[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${d}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:o,sex:i,bmi:s,race:a,consortium_name:this.portal===TX?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=Hl(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?DS(i,["placement","target"],o.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&DS(i,["placement","target"],"Male"===t.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return JLe({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const iBe=1e4,rBe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],oBe={exists:{field:"rui_location"}};function DX(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:t??oBe,_source:{includes:rBe}})}function DN(n,e){return RN.apply(this,arguments)}function RN(){return RN=Lt(function*(n,e){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),RN.apply(this,arguments)}function ON(){return ON=Lt(function*(n,e,t){const i=iBe,r=function sBe(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),o=DX(0,i,t),s=yield DN(n,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(DN(n,{method:"POST",headers:r,body:DX(h,i,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),ON.apply(this,arguments)}function kN(){return kN=Lt(function*(n,e,t,i,r="",o=""){let s;if("static"===e?s=yield DN(n):"search-api"===e&&(s=yield function aBe(n,e,t){return ON.apply(this,arguments)}(n,i,t)),s)return function eBe(n,e,t=!1){const r={},o=Hl(n,"hits.hits",[]).map(a=>Hl(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new nBe(a,e).toJsonLd());for(const a of o){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const s=Object.values(r);return t&&(function tBe(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,t++)}i.samples=r.filter(o=>!0!==o.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(s),console.log(s.map(a=>({"@context":IN,...a})))),IS(JSON.stringify({"@context":IN,"@graph":s}),IN)}(s,i);console.warn(`Unable to load ${n}`)}),kN.apply(this,arguments)}function kv(n,e,t){const i=new Set;for(const r of e)for(const o of hr(n,r,t,null,null))i.add(o.object.id);return i}const hBe={[mi.spatialEntity.x_dimension.id]:"x",[mi.spatialEntity.y_dimension.id]:"y",[mi.spatialEntity.z_dimension.id]:"z"};function pBe(n,e,t,i){const r=e.getTransformationMatrix(t,i);let o;if(r){const s=r.getTranslation(),a=function fBe(n,e){const t=ap(n,e,"Dimensions",hBe);return[t.x,t.y,t.z]}(n,t).map(l=>l/1e3/2),c=(new $r).fromRotationMatrix(r,$r.XYZ).toQuaternion().normalize().calculateW();o=(new _N).fromCenterHalfSizeQuaternion(s,a,c)}return o}function mBe(n,e,t,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of t){const f=pBe(n,e,h,c);f&&f.distanceSquaredTo([r,o,s].map(v=>v/1e3))<=d&&l.add(h)}return l}function Pv(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of hr(n,a,ti.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function RS(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of hr(n,a,ti.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function r_(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function PN(n,e,t){const i=new Set;for(const r of t){const o=Fi.namedNode(r);n.forSubjects(r_(e,i),mi.spatialEntity.ccf_annotations,o,null)}return i}function NN(n,e){const t=function IBe(n,e){const t=new Map;for(const i of n)for(const r of hr(e,i,ti.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id).add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const o=t.get(r);for(const s of hr(e,r,mi.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function kBe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[mi.ontologyNode.label.id]:"label",[t]:"parent",[mi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of MS(n,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=n.getSubjects(t,e,null).map(o=>o.id),i}function RX(n,e,t,i){const r={root:e,nodes:{}},o=new Set;for(const a of hr(n,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=kBe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const s=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,OX(r),r}function OX(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)OX(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const kX=mX(function PBe(n){const e=RX(n,Vc.body.id,"body",mi.asctb.part_of.id);return e.nodes[Vc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");function FN(n,e,t,i){return{"@id":`http://purl.org/ccf/${n}`,id:n,label:e,parent:t??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const OS={[ti.label.id]:"label",[ti.description.id]:"description",[ti.link.id]:"link"},LBe={...OS,[ti.providerName.id]:"providerName"},BBe={...OS,[ti.technology.id]:"technology",[ti.thumbnail.id]:"thumbnail"},jBe={...OS,[ti.sampleType.id]:"sampleType",[ti.sectionNumber.id]:"sectionNumber",[ti.datasets.id]:"datasets"},UBe={...OS,[ti.sampleType.id]:"sampleType",[ti.sectionCount.id]:"sectionCount",[ti.sectionSize.id]:"sectionSize",[ti.sectionUnits.id]:"sectionUnits",[ti.donor.id]:"donor",[ti.spatialEntity.id]:"spatialEntityId",[ti.sections.id]:"sections",[ti.datasets.id]:"datasets"};function VBe(n,e){return ap(n,e,"Donor",LBe)}function PX(n,e){return ap(n,e,"Dataset",BBe)}function zBe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of MS(n,e,jBe))if("datasets"===i){const o=PX(n,r);t[i].push(o)}else t[i]=r;return t}class GBe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const t=Date.now();return this.database.connect().then(function(){var i=Lt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-t})}}function LN(){return LN=Lt(function*(){const n=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(n,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),LN.apply(this,arguments)}const{delMany:KBe,get:NX,setMany:qBe}=I,JBe={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class ZBe{constructor(e=JBe){this.options=e,this.store=new QP(void 0,{factory:Fi}),this.graph=new CX(this),this.scene=new MX(this)}connect(e,t=!1){var i=this;return Lt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=t?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return Lt(function*(){const t=(new Date).getTime(),i=wPe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield NX(r).catch(()=>{});let a;s&&t-new Date(+s).getTime()>36e5?yield KBe([o,r]).catch(()=>{}):a=yield NX(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),qBe([[o,e.serialize()],[r,""+t]]).catch(()=>{}))})()}doConnect(){var e=this;return Lt(function*(){const t=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=oN(r,Fi);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=oN(o,Fi))}else r?.length>0&&i.push(r);i.push(yield function XBe(){return LN.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):t.push(function cBe(n,e,t,i){return kN.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(o=>{if(o)return e.addDataSources([o])}))),t.push(e.addDataSources(i)),yield Promise.all(t),yield e.synchronize()})()}addDataSources(e,t){var i=this;return Lt(function*(){const r=t??i.store;return yield Promise.all(e.map(function(){var o=Lt(function*(s){if("string"==typeof s)if((s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")){const a=s;s=IS(s=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield tN(s,r)}else s.endsWith("n3")?yield function XPe(n,e){return rN.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function YPe(n,e){return iN.apply(this,arguments)}(s,r):(s=IS(s),yield tN(s,r));else s=IS(JSON.stringify(s)),yield tN(s,r)});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return Lt(function*(){return yield new Promise(t=>{setTimeout(t,500)}),e.graph.createGraph(),function WBe(n){const e=kX(n),t=new Map;for(const{subject:i,object:r}of hr(n,null,mi.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;t.set(i.id,[...o].map(a=>Fi.namedNode(a)))}for(const{object:i}of hr(n,null,ti.spatialEntity,null,null))for(const{subject:r}of hr(n,null,mi.spatialPlacement.source,i,null))for(const{object:o}of hr(n,r,mi.spatialPlacement.target,null,null))for(const s of t.get(o.id)??[])n.addQuad(Fi.namedNode(i.id),mi.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function KPe(n){const e=Object.assign({},n);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var t=this;return Lt(function*(){t.store=oN(e,Fi),t.graph=new CX(t),t.scene=new MX(t),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function _Be(n,e,t){let i=function bBe(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),ti.spatialEntity,null,null),e}(n);if(i.size>0&&(i=function MBe(n,e,t=!0){const i=new Set;if(n.forSubjects(r_(e,i),ti.spatialEntity,null,null),!t){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(n,i)),i.size>0&&("Male"===t.sex||"Female"===t.sex)){const r=t.sex;i=Pv(n,i,o=>function yBe(n,e,t){const i=new Set;return n.forSubjects(r_(e,i),ti.sex,ti[t],null),i}(n,o,r))}if(i.size>0&&t.consortiums?.length>0&&(i=Pv(n,i,r=>function vBe(n,e,t){const i=new Set;for(const r of t){const o=Fi.literal(r);n.forSubjects(r_(e,i),ti.consortiumName,o,null)}return i}(n,r,t.consortiums))),i.size>0&&t.tmc?.length>0&&(i=Pv(n,i,r=>function xBe(n,e,t){const i=new Set;for(const r of t){const o=Fi.literal(r);n.forSubjects(r_(e,i),ti.providerName,o,null)}return i}(n,r,t.tmc))),i.size>0&&t.technologies?.length>0&&(i=function gBe(n,e,t){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of hr(n,c,ti.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of hr(n,c,ti.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=t(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(n,i,r=>function wBe(n,e,t){const i=new Set;for(const r of t){const o=Fi.literal(r);n.forSubjects(r_(e,i),ti.technology,o,null)}return i}(n,r,t.technologies))),i.size>0&&t.spatialSearches?.length>0&&(i=RS(n,i,r=>function TBe(n,e,t,i){const r=new Set;for(const o of i)mBe(n,e,t,o).forEach(a=>r.add(a));return r}(n,e,r,t.spatialSearches))),i.size>0&&t.ontologyTerms?.length>0){const r=t.ontologyTerms;-1===r.indexOf(Vc.body.id)&&(i=RS(n,i,o=>PN(n,o,r)))}if(i.size>0&&t.cellTypeTerms?.length>0){const r=t.cellTypeTerms;-1===r.indexOf(Vc.cell.id)&&(i=RS(n,i,o=>function EBe(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,mi.asctb.located_in,null),r===Vc.cell.id&&i.add(Vc.body.id);return PN(n,e,[...i])}(n,o,r)))}if(i.size>0&&t.biomarkerTerms?.length>0){const r=t.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=RS(n,i,o=>function ABe(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,mi.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(Vc.body.id);return PN(n,e,[...i])}(n,o,r)))}if(i.size>0&&2===t.ageRange?.length&&gS(t.ageRange[0])&&gS(t.ageRange[1])){const r=Math.max(...t.ageRange),o=Math.min(...t.ageRange);1===o&&110===r||(i=Pv(n,i,s=>function SBe(n,e,t,i){const r=new Set;for(const o of e)for(const s of hr(n,o,ti.age,null,null)){const a=(0,wv.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}if(i.size>0&&2===t.bmiRange?.length&&gS(t.bmiRange[0])&&gS(t.bmiRange[1])){const r=Math.max(...t.bmiRange),o=Math.min(...t.bmiRange);13===o&&83===r||(i=Pv(n,i,s=>function CBe(n,e,t,i){const r=new Set;for(const o of e)for(const s of hr(n,o,ti.bmi,null,null)){const a=(0,wv.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Fi.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(t=>function XLe(n,e){const t=n.getObjects(Fi.namedNode(e),ti.spatialEntity,null);if(t.length>0)return cp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){var e=this;return Lt(function*(){return e.status||(e.status=new GBe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return Lt(function*(){return function dBe(n){const e=new Set;for(const t of hr(n,null,ti.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return Lt(function*(){return function uBe(n){const e=new Set;for(const t of hr(n,null,ti.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var t=this;return Lt(function*(){return e={...e,hasSpatialEntity:!0},[...t.getIds(e)].map(i=>function HBe(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of MS(n,e,UBe))if("sections"===i){const o=zBe(n,r);t[i].push(o)}else if("datasets"===i){const o=PX(n,r);t[i].push(o)}else t[i]="donor"===i?VBe(n,r):r;return t}(t.store,i))})()}getAggregateResults(e){var t=this;return Lt(function*(){return function lBe(n,e){const t=kv(e,n,ti.donor.id),i=kv(e,t,ti.providerUUID.id),r=new Set;for(const c of n)for(const l of hr(e,c,ti.spatialEntity,null,null))r.add(l.subject.id);const o=kv(e,r,ti.sections.id),s=new Set([...kv(e,r,ti.datasets.id),...kv(e,o,ti.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(t.getIds(e),t.store)})()}getOntologyTermOccurences(e){var t=this;return Lt(function*(){return function DBe(n,e){const t={};return NN(n,e).forEach((r,o)=>{t[o]=r.size}),t}(t.getIds(e),t.store)})()}getCellTypeTermOccurences(e){var t=this;return Lt(function*(){return function OBe(n,e){const t=NN(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of hr(e,null,mi.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[Vc.cell.id]=t.get(Vc.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getBiomarkerTermOccurences(e){var t=this;return Lt(function*(){return function RBe(n,e){const t=NN(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of hr(e,null,mi.asctb.bm_located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r.biomarkers=t.get(Vc.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getOntologyTreeModel(){var e=this;return Lt(function*(){return kX(e.store)})()}getCellTypeTreeModel(){var e=this;return Lt(function*(){return function NBe(n){return RX(n,Vc.cell.id,"cell",mi.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return Lt(function*(){return function FBe(n){const e=mi.x("ccf_biomarker_type"),t={biomarkers:FN("biomarkers","Biomarkers","",[])};for(const i of hr(n,null,e,null,null)){const r=i.object.value,o=i.subject.id;t[r]||(t[r]=FN(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),t.biomarkers.children.push(r)),t[r].children.push(o);const s=FN(o,"",r,[]),a={[mi.ontologyNode.label.id]:"label",[VLe_label.id]:"synonymLabels"};for(const[c,l]of MS(n,o,a))"synonymLabels"===c?l&&l!==s.label&&s.synonymLabels.push(l):s[c]=l;for(const c of Object.values(t))c.children.length>1&&c.children.sort((l,d)=>t[l]?.label.localeCompare(t[d]?.label));t[o]=s}return{root:"biomarkers",nodes:t}}(e.store)})()}getReferenceOrgans(){var e=this;return Lt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var t=this;return Lt(function*(){return t.graph.createGraph(),t.scene.getScene(e)})()}getReferenceOrganScene(e,t){var i=this;return Lt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,t)})()}getSpatialPlacement(e,t){var i=this;return Lt(function*(){return i.graph.getSpatialPlacement(e,t)})()}}function i3e(n,e){return n===e}let r3e=(()=>{class n{constructor(t,i){this.locator=t,this.globalConfig=i,this.subscriptions=new M,this.dataSource=i.getOption("data").pipe(A(r=>({...vX,dataSources:r})),Ei(r=>Object.keys(r).length>0),A(r=>r),je(i3e),Re(r=>function n3e(n,e){return new Ye(t=>{const i=n(),r=e(i);return(r?Li(r):ee).subscribe(t),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),o=>this.connectDataSource(o.source,r))),Ls(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(t){return this.dataSource.pipe(Re(i=>i.getTissueBlockResults(t)),xi(1))}getAggregateResults(t){return this.dataSource.pipe(Re(i=>i.getAggregateResults(t)),xi(1))}getOntologyTermOccurences(t){return this.dataSource.pipe(Re(i=>i.getOntologyTermOccurences(t)),xi(1))}getCellTypeTermOccurences(t){return this.dataSource.pipe(Re(i=>i.getCellTypeTermOccurences(t)),xi(1))}getOntologyTreeModel(){return this.dataSource.pipe(Re(t=>t.getOntologyTreeModel()),xi(1))}getCellTypeTreeModel(){return this.dataSource.pipe(Re(t=>t.getCellTypeTreeModel()),xi(1))}getReferenceOrgans(){return this.dataSource.pipe(Re(t=>t.getReferenceOrgans()),xi(1))}getScene(t){return this.dataSource.pipe(Re(i=>i.getScene(t)),xi(1))}getOrganScene(t,i){return this.dataSource.pipe(Re(r=>r.getReferenceOrganScene(t,i)),xi(1))}createDataSource(){return{source:new ZBe,unsubscribe:()=>{}}}connectDataSource(t,i){return Lt(function*(){(new Date).getTime();return yield t.connect(i,!1),t})()}static#e=this.\u0275fac=function(i){return new(i||n)(nt(w0),nt(xv))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o3e=(()=>{class n{constructor(t,i){this.configState=t,this.source=i,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(A(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(A(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=ms([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(Re(([r,o,s])=>this.chooseScene(r,o))),this.organs$=this.configState.getOption("data").pipe(A(r=>this.selectOrgans(r)),Ls(1)),this.filteredOrgans$=ms([this.organs$,this.referenceOrgans$]).pipe(A(([r,o])=>this.getNeededReferenceOrgans(o,r)),Ls(1)),this.filteredScene$=ms([this.scene$,this.organs$,this.referenceOrgans$]).pipe(A(([r,o,s])=>this.filterSceneNodes(r,o,s)),function mPe(n,e){const t=n.pipe(Ca(""));return i=>ms([i,t]).pipe(A(([r,o])=>r.map(s=>function pPe(n,e,t){return n.entityId!==e?n:{...n,color:t}}(s,o,e))))}(this.highlightID$,fPe),function _Pe(n){const e=n.pipe(Ca(""));return t=>ms([t,e]).pipe(A(([i,r])=>i.map(o=>function gPe(n,e){return n.entityId!==e?n:{...n,zoomToOnLoad:!0}}(o,r))))}(this.zoomToID$),Ls(1))}chooseScene(t,i){const r=t?.map(s=>s[SY]?.placement.target)??[];if(new Set(r).size>1)return this.source.getScene();if(i){const s=i.find(a=>a["@id"]===r[0]);if(s)return this.source.getOrganScene(s.representation_of,{ontologyTerms:[s.reference_organ],sex:s.sex})}return $t([])}selectOrgans(t){const r=(t??[]).map(o=>o[SY].placement.target);return new Set(r)}filterSceneNodes(t,i,r){const o=this.getNeededReferenceOrgans(r,i),s=this.getNeededSkins(o),a=new Set([...i,...s]);return t.filter(l=>!l.reference_organ||a.has(l.reference_organ))}getNeededReferenceOrgans(t,i){return t.filter(r=>i.has(r.reference_organ??""))}getNeededSkins(t){if(1===t.length)return[];const i=new Set;return t.forEach(r=>{"Female"===r.sex?i.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===r.sex&&i.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...i]}static#e=this.\u0275fac=function(i){return new(i||n)(nt(xv),nt(r3e))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const s3e=["bodyUI"];let a3e=(()=>{class n{constructor(t,i,r){this.configState=t,this.sceneSource=i,this.cdr=r,this.onMouseEnter=new Zt,this.onMouseLeave=new Zt,this.onClick=new Zt,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(ur(o=>this.reset()))}reset(){var t=this;return Lt(function*(){const{bodyUI:i}=t;yield new Promise(s=>setTimeout(s,200));const r=yield function nH(n,e){const t="object"==typeof e;return new Promise((i,r)=>{let s,o=!1;n.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):t?i(e.defaultValue):r(new Sy)}})})}(t.organs$.pipe(xi(1))),o=!!i.scene?.find(s=>s.zoomToOnLoad);if(i.rotation=0,i.rotationX=0,!o)if(r&&1===r.length){const{x_dimension:s,y_dimension:a,z_dimension:c}=r[0];i.bounds={x:1.25*s/1e3,y:1.25*a/1e3,z:1.25*c/1e3},i.target=[s/1e3/2,a/1e3/2,c/1e3/2]}else i.bounds={x:2.2,y:2,z:.4},i.target=[0,0,0];t.cdr.detectChanges()})()}static#e=this.\u0275fac=function(i){return new(i||n)(He(xv),He(o3e),He(to))};static#t=this.\u0275cmp=jn({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&Qi(s3e,7),2&i){let o;Vn(o=zn())&&(r.bodyUI=o.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:4,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(i,r){1&i&&(Rt(0,"ccf-body-ui",0,1),bn("nodeClick",function(s){return r.onClick.emit(s)})("nodeHoverStart",function(s){return r.onMouseEnter.emit(s)})("nodeHoverStop",function(s){return r.onMouseLeave.emit(s)}),ba(2,"async"),Ft()),2&i&&zt("scene",bl(2,2,r.scene$))("interactive",!0)},dependencies:[Mke,C0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return n})();function c3e(n,e){if(1&n){const t=function vd(){return It()}();Rt(0,"ccf-root",1),bn("onMouseEnter",function(r){return Pr(t),Vi(Pn().onMouseEnter.emit(r))})("onMouseLeave",function(r){return Pr(t),Vi(Pn().onMouseLeave.emit(r))})("onClick",function(r){return Pr(t),Vi(Pn().onClick.emit(r))}),Ft()}}function l3e(n){return"string"==typeof n&&(n=JSON.parse(n)),n.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let d3e=(()=>{class n extends Mie{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...D0_dbOptions,...globalThis.dbOptions},parse:{data:l3e}}),this.onMouseEnter=new Zt,this.onMouseLeave=new Zt,this.onClick=new Zt}static#e=this.\u0275fac=function(i){return new(i||n)(He(xv),He(to))};static#t=this.\u0275cmp=jn({type:n,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[vn],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&pn(0,c3e,1,0,"ccf-root",0),2&i&&zt("ngIf",r.initialized)},dependencies:[Tc,a3e],encapsulation:2,changeDetection:0})}return n})();const FS=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class f3e{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=Vf(this.action),i=function h3e(n){return FS(n.getHours(),2)+":"+FS(n.getMinutes(),2)+":"+FS(n.getSeconds(),2)+"."+FS(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class p3e{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const FX=new vt("NGXS_LOGGER_PLUGIN_OPTIONS");let m3e=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new p3e(this._options),this._store=this._store||this._injector.get(Fl);const o=new f3e(i,this._store,this._logWriter);return o.dispatched(t),r(t,i).pipe(ur(s=>{o.completed(s)}),qa(s=>{throw o.errored(s),s}))}}return n.\u0275fac=function(t){return new(t||n)(nt(FX),nt(wr))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();const LX=new vt("LOGGER_USER_OPTIONS");function g3e(n){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),n)}let _3e=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:mH,useClass:m3e,multi:!0},{provide:LX,useValue:t},{provide:FX,useFactory:g3e,deps:[LX]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=on({type:n}),n.\u0275inj=tn({}),n})();const b3e=[xv];let y3e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=on({type:n});static#n=this.\u0275inj=tn({imports:[FDe.forRoot(),DH.forRoot(b3e,{developmentMode:!1}),_3e.forRoot({disabled:true})]})}return n})(),v3e=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function Aie(n,e){const t=function _ie(n,e){return e.get(wc).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new xie(n,e.injector),r=function gie(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function uie(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class o extends Eie{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const d=this[c];delete this[c],a.setInputValue(c,d,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,d){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(c){this.ngElementStrategy.setInputValue(s,c,a)},configurable:!0,enumerable:!0})}),o}(d3e,{injector:this.injector});customElements.define("ccf-body-ui-wc",t)}static#e=this.\u0275fac=function(i){return new(i||n)(nt(wr))};static#t=this.\u0275mod=on({type:n});static#n=this.\u0275inj=tn({imports:[rie,y3e,Tke]})}return n})();nie().bootstrapModule(v3e).catch(n=>console.error(n))},2323:te=>{te.exports=function(g,S){var b=S.length;if(0!==b){var k=g.length;g.length+=b;for(var C=0;C<b;C++)g[k+C]=S[C]}}},3982:te=>{"use strict";const{AbortController:J,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;te.exports=J,te.exports.AbortSignal=g,te.exports.default=J},9919:(te,J)=>{"use strict";J.byteLength=function y(M){var $=_(M),K=$[1];return 3*($[0]+K)/4-K},J.toByteArray=function L(M){var $,x,ce=_(M),K=ce[0],ie=ce[1],ne=new b(function I(M,$,ce){return 3*($+ce)/4-ce}(0,K,ie)),q=0,U=ie>0?K-4:K;for(x=0;x<U;x+=4)$=S[M.charCodeAt(x)]<<18|S[M.charCodeAt(x+1)]<<12|S[M.charCodeAt(x+2)]<<6|S[M.charCodeAt(x+3)],ne[q++]=$>>16&255,ne[q++]=$>>8&255,ne[q++]=255&$;return 2===ie&&($=S[M.charCodeAt(x)]<<2|S[M.charCodeAt(x+1)]>>4,ne[q++]=255&$),1===ie&&($=S[M.charCodeAt(x)]<<10|S[M.charCodeAt(x+1)]<<4|S[M.charCodeAt(x+2)]>>2,ne[q++]=$>>8&255,ne[q++]=255&$),ne},J.fromByteArray=function oe(M){for(var $,ce=M.length,K=ce%3,ie=[],q=0,U=ce-K;q<U;q+=16383)ie.push(j(M,q,q+16383>U?U:q+16383));return 1===K?ie.push(g[($=M[ce-1])>>2]+g[$<<4&63]+"=="):2===K&&ie.push(g[($=(M[ce-2]<<8)+M[ce-1])>>10]+g[$>>4&63]+g[$<<2&63]+"="),ie.join("")};for(var g=[],S=[],b=typeof Uint8Array<"u"?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0;C<64;++C)g[C]=k[C],S[k.charCodeAt(C)]=C;function _(M){var $=M.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ce=M.indexOf("=");return-1===ce&&(ce=$),[ce,ce===$?0:4-ce%4]}function P(M){return g[M>>18&63]+g[M>>12&63]+g[M>>6&63]+g[63&M]}function j(M,$,ce){for(var ie=[],ne=$;ne<ce;ne+=3)ie.push(P((M[ne]<<16&16711680)+(M[ne+1]<<8&65280)+(255&M[ne+2])));return ie.join("")}S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63},1979:(te,J)=>{"use strict";var S=function(k){return k.typeOfFunction="function",k.boolTrue=!0,k}(S||{});J.ak=function b(k,C,N){if(!N||typeof N.value!==S.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+C+"> is not a method!");return{configurable:S.boolTrue,get:function(){var _=N.value.bind(this);return Object.defineProperty(this,C,{value:_,configurable:S.boolTrue,writable:S.boolTrue}),_}}}},9007:(te,J,g)=>{"use strict";var S=g(9919),b=g(2601);J.Buffer=_,J.SlowBuffer=function K(X){return+X!=X&&(X=0),_.alloc(+X)},J.INSPECT_MAX_BYTES=50;var k=2147483647;function N(X){if(X>k)throw new RangeError('The value "'+X+'" is invalid for option "size"');var A=new Uint8Array(X);return A.__proto__=_.prototype,A}function _(X,A,F){if("number"==typeof X){if("string"==typeof A)throw new TypeError('The "string" argument must be of type string. Received type number');return P(X)}return y(X,A,F)}function y(X,A,F){if("string"==typeof X)return function j(X,A){if(("string"!=typeof A||""===A)&&(A="utf8"),!_.isEncoding(A))throw new TypeError("Unknown encoding: "+A);var F=0|ie(X,A),de=N(F),pe=de.write(X,A);return pe!==F&&(de=de.slice(0,pe)),de}(X,A);if(ArrayBuffer.isView(X))return oe(X);if(null==X)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(fe(X,ArrayBuffer)||X&&fe(X.buffer,ArrayBuffer))return function M(X,A,F){if(A<0||X.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<A+(F||0))throw new RangeError('"length" is outside of buffer bounds');var de;return(de=void 0===A&&void 0===F?new Uint8Array(X):void 0===F?new Uint8Array(X,A):new Uint8Array(X,A,F)).__proto__=_.prototype,de}(X,A,F);if("number"==typeof X)throw new TypeError('The "value" argument must not be of type number. Received type number');var de=X.valueOf&&X.valueOf();if(null!=de&&de!==X)return _.from(de,A,F);var pe=function $(X){if(_.isBuffer(X)){var A=0|ce(X.length),F=N(A);return 0===F.length||X.copy(F,0,0,A),F}return void 0!==X.length?"number"!=typeof X.length||Q(X.length)?N(0):oe(X):"Buffer"===X.type&&Array.isArray(X.data)?oe(X.data):void 0}(X);if(pe)return pe;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof X[Symbol.toPrimitive])return _.from(X[Symbol.toPrimitive]("string"),A,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}function I(X){if("number"!=typeof X)throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function P(X){return I(X),N(X<0?0:0|ce(X))}function oe(X){for(var A=X.length<0?0:0|ce(X.length),F=N(A),de=0;de<A;de+=1)F[de]=255&X[de];return F}function ce(X){if(X>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return 0|X}function ie(X,A){if(_.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||fe(X,ArrayBuffer))return X.byteLength;if("string"!=typeof X)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var F=X.length,de=arguments.length>2&&!0===arguments[2];if(!de&&0===F)return 0;for(var pe=!1;;)switch(A){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return R(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*F;case"hex":return F>>>1;case"base64":return Fe(X).length;default:if(pe)return de?-1:R(X).length;A=(""+A).toLowerCase(),pe=!0}}function ne(X,A,F){var de=!1;if((void 0===A||A<0)&&(A=0),A>this.length||((void 0===F||F>this.length)&&(F=this.length),F<=0)||(F>>>=0)<=(A>>>=0))return"";for(X||(X="utf8");;)switch(X){case"hex":return Ne(this,A,F);case"utf8":case"utf-8":return Oe(this,A,F);case"ascii":return qe(this,A,F);case"latin1":case"binary":return we(this,A,F);case"base64":return ve(this,A,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,A,F);default:if(de)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),de=!0}}function q(X,A,F){var de=X[A];X[A]=X[F],X[F]=de}function U(X,A,F,de,pe){if(0===X.length)return-1;if("string"==typeof F?(de=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),Q(F=+F)&&(F=pe?0:X.length-1),F<0&&(F=X.length+F),F>=X.length){if(pe)return-1;F=X.length-1}else if(F<0){if(!pe)return-1;F=0}if("string"==typeof A&&(A=_.from(A,de)),_.isBuffer(A))return 0===A.length?-1:x(X,A,F,de,pe);if("number"==typeof A)return A&=255,"function"==typeof Uint8Array.prototype.indexOf?pe?Uint8Array.prototype.indexOf.call(X,A,F):Uint8Array.prototype.lastIndexOf.call(X,A,F):x(X,[A],F,de,pe);throw new TypeError("val must be string, number or Buffer")}function x(X,A,F,de,pe){var yt,ze=1,Ge=X.length,gt=A.length;if(void 0!==de&&("ucs2"===(de=String(de).toLowerCase())||"ucs-2"===de||"utf16le"===de||"utf-16le"===de)){if(X.length<2||A.length<2)return-1;ze=2,Ge/=2,gt/=2,F/=2}function Pt(Z,T){return 1===ze?Z[T]:Z.readUInt16BE(T*ze)}if(pe){var Gt=-1;for(yt=F;yt<Ge;yt++)if(Pt(X,yt)===Pt(A,-1===Gt?0:yt-Gt)){if(-1===Gt&&(Gt=yt),yt-Gt+1===gt)return Gt*ze}else-1!==Gt&&(yt-=yt-Gt),Gt=-1}else for(F+gt>Ge&&(F=Ge-gt),yt=F;yt>=0;yt--){for(var rn=!0,Te=0;Te<gt;Te++)if(Pt(X,yt+Te)!==Pt(A,Te)){rn=!1;break}if(rn)return yt}return-1}function B(X,A,F,de){F=Number(F)||0;var pe=X.length-F;de?(de=Number(de))>pe&&(de=pe):de=pe;var ze=A.length;de>ze/2&&(de=ze/2);for(var Ge=0;Ge<de;++Ge){var gt=parseInt(A.substr(2*Ge,2),16);if(Q(gt))return Ge;X[F+Ge]=gt}return Ge}function O(X,A,F,de){return et(R(A,X.length-F),X,F,de)}function ue(X,A,F,de){return et(function se(X){for(var A=[],F=0;F<X.length;++F)A.push(255&X.charCodeAt(F));return A}(A),X,F,de)}function W(X,A,F,de){return ue(X,A,F,de)}function Ce(X,A,F,de){return et(Fe(A),X,F,de)}function le(X,A,F,de){return et(function V(X,A){for(var F,de,ze=[],Ge=0;Ge<X.length&&!((A-=2)<0);++Ge)de=(F=X.charCodeAt(Ge))>>8,ze.push(F%256),ze.push(de);return ze}(A,X.length-F),X,F,de)}function ve(X,A,F){return S.fromByteArray(0===A&&F===X.length?X:X.slice(A,F))}function Oe(X,A,F){F=Math.min(X.length,F);for(var de=[],pe=A;pe<F;){var Pt,yt,Gt,rn,ze=X[pe],Ge=null,gt=ze>239?4:ze>223?3:ze>191?2:1;if(pe+gt<=F)switch(gt){case 1:ze<128&&(Ge=ze);break;case 2:128==(192&(Pt=X[pe+1]))&&(rn=(31&ze)<<6|63&Pt)>127&&(Ge=rn);break;case 3:yt=X[pe+2],128==(192&(Pt=X[pe+1]))&&128==(192&yt)&&(rn=(15&ze)<<12|(63&Pt)<<6|63&yt)>2047&&(rn<55296||rn>57343)&&(Ge=rn);break;case 4:yt=X[pe+2],Gt=X[pe+3],128==(192&(Pt=X[pe+1]))&&128==(192&yt)&&128==(192&Gt)&&(rn=(15&ze)<<18|(63&Pt)<<12|(63&yt)<<6|63&Gt)>65535&&rn<1114112&&(Ge=rn)}null===Ge?(Ge=65533,gt=1):Ge>65535&&(de.push((Ge-=65536)>>>10&1023|55296),Ge=56320|1023&Ge),de.push(Ge),pe+=gt}return function Je(X){var A=X.length;if(A<=Me)return String.fromCharCode.apply(String,X);for(var F="",de=0;de<A;)F+=String.fromCharCode.apply(String,X.slice(de,de+=Me));return F}(de)}J.kMaxLength=k,!(_.TYPED_ARRAY_SUPPORT=function C(){try{var X=new Uint8Array(1);return X.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===X.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(X,A,F){return y(X,A,F)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(X,A,F){return function L(X,A,F){return I(X),X<=0?N(X):void 0!==A?"string"==typeof F?N(X).fill(A,F):N(X).fill(A):N(X)}(X,A,F)},_.allocUnsafe=function(X){return P(X)},_.allocUnsafeSlow=function(X){return P(X)},_.isBuffer=function(A){return null!=A&&!0===A._isBuffer&&A!==_.prototype},_.compare=function(A,F){if(fe(A,Uint8Array)&&(A=_.from(A,A.offset,A.byteLength)),fe(F,Uint8Array)&&(F=_.from(F,F.offset,F.byteLength)),!_.isBuffer(A)||!_.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===F)return 0;for(var de=A.length,pe=F.length,ze=0,Ge=Math.min(de,pe);ze<Ge;++ze)if(A[ze]!==F[ze]){de=A[ze],pe=F[ze];break}return de<pe?-1:pe<de?1:0},_.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(A,F){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(0===A.length)return _.alloc(0);var de;if(void 0===F)for(F=0,de=0;de<A.length;++de)F+=A[de].length;var pe=_.allocUnsafe(F),ze=0;for(de=0;de<A.length;++de){var Ge=A[de];if(fe(Ge,Uint8Array)&&(Ge=_.from(Ge)),!_.isBuffer(Ge))throw new TypeError('"list" argument must be an Array of Buffers');Ge.copy(pe,ze),ze+=Ge.length}return pe},_.byteLength=ie,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<A;F+=2)q(this,F,F+1);return this},_.prototype.swap32=function(){var A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<A;F+=4)q(this,F,F+3),q(this,F+1,F+2);return this},_.prototype.swap64=function(){var A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<A;F+=8)q(this,F,F+7),q(this,F+1,F+6),q(this,F+2,F+5),q(this,F+3,F+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var A=this.length;return 0===A?"":0===arguments.length?Oe(this,0,A):ne.apply(this,arguments)},_.prototype.equals=function(A){if(!_.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A||0===_.compare(this,A)},_.prototype.inspect=function(){var A="",F=J.INSPECT_MAX_BYTES;return A=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(A+=" ... "),"<Buffer "+A+">"},_.prototype.compare=function(A,F,de,pe,ze){if(fe(A,Uint8Array)&&(A=_.from(A,A.offset,A.byteLength)),!_.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(void 0===F&&(F=0),void 0===de&&(de=A?A.length:0),void 0===pe&&(pe=0),void 0===ze&&(ze=this.length),F<0||de>A.length||pe<0||ze>this.length)throw new RangeError("out of range index");if(pe>=ze&&F>=de)return 0;if(pe>=ze)return-1;if(F>=de)return 1;if(this===A)return 0;for(var Ge=(ze>>>=0)-(pe>>>=0),gt=(de>>>=0)-(F>>>=0),Pt=Math.min(Ge,gt),yt=this.slice(pe,ze),Gt=A.slice(F,de),rn=0;rn<Pt;++rn)if(yt[rn]!==Gt[rn]){Ge=yt[rn],gt=Gt[rn];break}return Ge<gt?-1:gt<Ge?1:0},_.prototype.includes=function(A,F,de){return-1!==this.indexOf(A,F,de)},_.prototype.indexOf=function(A,F,de){return U(this,A,F,de,!0)},_.prototype.lastIndexOf=function(A,F,de){return U(this,A,F,de,!1)},_.prototype.write=function(A,F,de,pe){if(void 0===F)pe="utf8",de=this.length,F=0;else if(void 0===de&&"string"==typeof F)pe=F,de=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(de)?(de>>>=0,void 0===pe&&(pe="utf8")):(pe=de,de=void 0)}var ze=this.length-F;if((void 0===de||de>ze)&&(de=ze),A.length>0&&(de<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var Ge=!1;;)switch(pe){case"hex":return B(this,A,F,de);case"utf8":case"utf-8":return O(this,A,F,de);case"ascii":return ue(this,A,F,de);case"latin1":case"binary":return W(this,A,F,de);case"base64":return Ce(this,A,F,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,A,F,de);default:if(Ge)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),Ge=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Me=4096;function qe(X,A,F){var de="";F=Math.min(X.length,F);for(var pe=A;pe<F;++pe)de+=String.fromCharCode(127&X[pe]);return de}function we(X,A,F){var de="";F=Math.min(X.length,F);for(var pe=A;pe<F;++pe)de+=String.fromCharCode(X[pe]);return de}function Ne(X,A,F){var de=X.length;(!A||A<0)&&(A=0),(!F||F<0||F>de)&&(F=de);for(var pe="",ze=A;ze<F;++ze)pe+=G(X[ze]);return pe}function ke(X,A,F){for(var de=X.slice(A,F),pe="",ze=0;ze<de.length;ze+=2)pe+=String.fromCharCode(de[ze]+256*de[ze+1]);return pe}function Ve(X,A,F){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(X+A>F)throw new RangeError("Trying to access beyond buffer length")}function me(X,A,F,de,pe,ze){if(!_.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>pe||A<ze)throw new RangeError('"value" argument is out of bounds');if(F+de>X.length)throw new RangeError("Index out of range")}function Ee(X,A,F,de,pe,ze){if(F+de>X.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function Ke(X,A,F,de,pe){return A=+A,F>>>=0,pe||Ee(X,0,F,4),b.write(X,A,F,de,23,4),F+4}function at(X,A,F,de,pe){return A=+A,F>>>=0,pe||Ee(X,0,F,8),b.write(X,A,F,de,52,8),F+8}_.prototype.slice=function(A,F){var de=this.length;(A=~~A)<0?(A+=de)<0&&(A=0):A>de&&(A=de),(F=void 0===F?de:~~F)<0?(F+=de)<0&&(F=0):F>de&&(F=de),F<A&&(F=A);var pe=this.subarray(A,F);return pe.__proto__=_.prototype,pe},_.prototype.readUIntLE=function(A,F,de){A>>>=0,F>>>=0,de||Ve(A,F,this.length);for(var pe=this[A],ze=1,Ge=0;++Ge<F&&(ze*=256);)pe+=this[A+Ge]*ze;return pe},_.prototype.readUIntBE=function(A,F,de){A>>>=0,F>>>=0,de||Ve(A,F,this.length);for(var pe=this[A+--F],ze=1;F>0&&(ze*=256);)pe+=this[A+--F]*ze;return pe},_.prototype.readUInt8=function(A,F){return A>>>=0,F||Ve(A,1,this.length),this[A]},_.prototype.readUInt16LE=function(A,F){return A>>>=0,F||Ve(A,2,this.length),this[A]|this[A+1]<<8},_.prototype.readUInt16BE=function(A,F){return A>>>=0,F||Ve(A,2,this.length),this[A]<<8|this[A+1]},_.prototype.readUInt32LE=function(A,F){return A>>>=0,F||Ve(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},_.prototype.readUInt32BE=function(A,F){return A>>>=0,F||Ve(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},_.prototype.readIntLE=function(A,F,de){A>>>=0,F>>>=0,de||Ve(A,F,this.length);for(var pe=this[A],ze=1,Ge=0;++Ge<F&&(ze*=256);)pe+=this[A+Ge]*ze;return pe>=(ze*=128)&&(pe-=Math.pow(2,8*F)),pe},_.prototype.readIntBE=function(A,F,de){A>>>=0,F>>>=0,de||Ve(A,F,this.length);for(var pe=F,ze=1,Ge=this[A+--pe];pe>0&&(ze*=256);)Ge+=this[A+--pe]*ze;return Ge>=(ze*=128)&&(Ge-=Math.pow(2,8*F)),Ge},_.prototype.readInt8=function(A,F){return A>>>=0,F||Ve(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},_.prototype.readInt16LE=function(A,F){A>>>=0,F||Ve(A,2,this.length);var de=this[A]|this[A+1]<<8;return 32768&de?4294901760|de:de},_.prototype.readInt16BE=function(A,F){A>>>=0,F||Ve(A,2,this.length);var de=this[A+1]|this[A]<<8;return 32768&de?4294901760|de:de},_.prototype.readInt32LE=function(A,F){return A>>>=0,F||Ve(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},_.prototype.readInt32BE=function(A,F){return A>>>=0,F||Ve(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},_.prototype.readFloatLE=function(A,F){return A>>>=0,F||Ve(A,4,this.length),b.read(this,A,!0,23,4)},_.prototype.readFloatBE=function(A,F){return A>>>=0,F||Ve(A,4,this.length),b.read(this,A,!1,23,4)},_.prototype.readDoubleLE=function(A,F){return A>>>=0,F||Ve(A,8,this.length),b.read(this,A,!0,52,8)},_.prototype.readDoubleBE=function(A,F){return A>>>=0,F||Ve(A,8,this.length),b.read(this,A,!1,52,8)},_.prototype.writeUIntLE=function(A,F,de,pe){A=+A,F>>>=0,de>>>=0,pe||me(this,A,F,de,Math.pow(2,8*de)-1,0);var Ge=1,gt=0;for(this[F]=255&A;++gt<de&&(Ge*=256);)this[F+gt]=A/Ge&255;return F+de},_.prototype.writeUIntBE=function(A,F,de,pe){A=+A,F>>>=0,de>>>=0,pe||me(this,A,F,de,Math.pow(2,8*de)-1,0);var Ge=de-1,gt=1;for(this[F+Ge]=255&A;--Ge>=0&&(gt*=256);)this[F+Ge]=A/gt&255;return F+de},_.prototype.writeUInt8=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,1,255,0),this[F]=255&A,F+1},_.prototype.writeUInt16LE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,2,65535,0),this[F]=255&A,this[F+1]=A>>>8,F+2},_.prototype.writeUInt16BE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,2,65535,0),this[F]=A>>>8,this[F+1]=255&A,F+2},_.prototype.writeUInt32LE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,4,4294967295,0),this[F+3]=A>>>24,this[F+2]=A>>>16,this[F+1]=A>>>8,this[F]=255&A,F+4},_.prototype.writeUInt32BE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,4,4294967295,0),this[F]=A>>>24,this[F+1]=A>>>16,this[F+2]=A>>>8,this[F+3]=255&A,F+4},_.prototype.writeIntLE=function(A,F,de,pe){if(A=+A,F>>>=0,!pe){var ze=Math.pow(2,8*de-1);me(this,A,F,de,ze-1,-ze)}var Ge=0,gt=1,Pt=0;for(this[F]=255&A;++Ge<de&&(gt*=256);)A<0&&0===Pt&&0!==this[F+Ge-1]&&(Pt=1),this[F+Ge]=(A/gt>>0)-Pt&255;return F+de},_.prototype.writeIntBE=function(A,F,de,pe){if(A=+A,F>>>=0,!pe){var ze=Math.pow(2,8*de-1);me(this,A,F,de,ze-1,-ze)}var Ge=de-1,gt=1,Pt=0;for(this[F+Ge]=255&A;--Ge>=0&&(gt*=256);)A<0&&0===Pt&&0!==this[F+Ge+1]&&(Pt=1),this[F+Ge]=(A/gt>>0)-Pt&255;return F+de},_.prototype.writeInt8=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,1,127,-128),A<0&&(A=255+A+1),this[F]=255&A,F+1},_.prototype.writeInt16LE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,2,32767,-32768),this[F]=255&A,this[F+1]=A>>>8,F+2},_.prototype.writeInt16BE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,2,32767,-32768),this[F]=A>>>8,this[F+1]=255&A,F+2},_.prototype.writeInt32LE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,4,2147483647,-2147483648),this[F]=255&A,this[F+1]=A>>>8,this[F+2]=A>>>16,this[F+3]=A>>>24,F+4},_.prototype.writeInt32BE=function(A,F,de){return A=+A,F>>>=0,de||me(this,A,F,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[F]=A>>>24,this[F+1]=A>>>16,this[F+2]=A>>>8,this[F+3]=255&A,F+4},_.prototype.writeFloatLE=function(A,F,de){return Ke(this,A,F,!0,de)},_.prototype.writeFloatBE=function(A,F,de){return Ke(this,A,F,!1,de)},_.prototype.writeDoubleLE=function(A,F,de){return at(this,A,F,!0,de)},_.prototype.writeDoubleBE=function(A,F,de){return at(this,A,F,!1,de)},_.prototype.copy=function(A,F,de,pe){if(!_.isBuffer(A))throw new TypeError("argument should be a Buffer");if(de||(de=0),!pe&&0!==pe&&(pe=this.length),F>=A.length&&(F=A.length),F||(F=0),pe>0&&pe<de&&(pe=de),pe===de||0===A.length||0===this.length)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),A.length-F<pe-de&&(pe=A.length-F+de);var ze=pe-de;if(this===A&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(F,de,pe);else if(this===A&&de<F&&F<pe)for(var Ge=ze-1;Ge>=0;--Ge)A[Ge+F]=this[Ge+de];else Uint8Array.prototype.set.call(A,this.subarray(de,pe),F);return ze},_.prototype.fill=function(A,F,de,pe){if("string"==typeof A){if("string"==typeof F?(pe=F,F=0,de=this.length):"string"==typeof de&&(pe=de,de=this.length),void 0!==pe&&"string"!=typeof pe)throw new TypeError("encoding must be a string");if("string"==typeof pe&&!_.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(1===A.length){var ze=A.charCodeAt(0);("utf8"===pe&&ze<128||"latin1"===pe)&&(A=ze)}}else"number"==typeof A&&(A&=255);if(F<0||this.length<F||this.length<de)throw new RangeError("Out of range index");if(de<=F)return this;var Ge;if(F>>>=0,de=void 0===de?this.length:de>>>0,A||(A=0),"number"==typeof A)for(Ge=F;Ge<de;++Ge)this[Ge]=A;else{var gt=_.isBuffer(A)?A:_.from(A,pe),Pt=gt.length;if(0===Pt)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Ge=0;Ge<de-F;++Ge)this[Ge+F]=gt[Ge%Pt]}return this};var Ye=/[^+/0-9A-Za-z-_]/g;function G(X){return X<16?"0"+X.toString(16):X.toString(16)}function R(X,A){A=A||1/0;for(var F,de=X.length,pe=null,ze=[],Ge=0;Ge<de;++Ge){if((F=X.charCodeAt(Ge))>55295&&F<57344){if(!pe){if(F>56319){(A-=3)>-1&&ze.push(239,191,189);continue}if(Ge+1===de){(A-=3)>-1&&ze.push(239,191,189);continue}pe=F;continue}if(F<56320){(A-=3)>-1&&ze.push(239,191,189),pe=F;continue}F=65536+(pe-55296<<10|F-56320)}else pe&&(A-=3)>-1&&ze.push(239,191,189);if(pe=null,F<128){if((A-=1)<0)break;ze.push(F)}else if(F<2048){if((A-=2)<0)break;ze.push(F>>6|192,63&F|128)}else if(F<65536){if((A-=3)<0)break;ze.push(F>>12|224,F>>6&63|128,63&F|128)}else{if(!(F<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;ze.push(F>>18|240,F>>12&63|128,F>>6&63|128,63&F|128)}}return ze}function Fe(X){return S.toByteArray(function _e(X){if((X=(X=X.split("=")[0]).trim().replace(Ye,"")).length<2)return"";for(;X.length%4!=0;)X+="=";return X}(X))}function et(X,A,F,de){for(var pe=0;pe<de&&!(pe+F>=A.length||pe>=X.length);++pe)A[pe+F]=X[pe];return pe}function fe(X,A){return X instanceof A||null!=X&&null!=X.constructor&&null!=X.constructor.name&&X.constructor.name===A.name}function Q(X){return X!=X}},1563:(te,J,g)=>{te.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(te,J,g){"use strict";var S,b,k;typeof window<"u"&&window,b=[g(884)],void 0!==(k="function"==typeof(S=function(C){var N=function(){var y,I={},L=[];function P(W){W||(W=document.documentElement);var Ce=window.getComputedStyle(W,null).fontSize;return parseFloat(Ce)||16}function oe(W,Ce){var le=Ce.split(/\d/),ve=le[le.length-1];switch(Ce=parseFloat(Ce),ve){case"px":default:return Ce;case"em":return Ce*P(W);case"rem":return Ce*P();case"vw":return Ce*document.documentElement.clientWidth/100;case"vh":return Ce*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Oe=document.documentElement.clientWidth/100,Me=document.documentElement.clientHeight/100;return Ce*(0,Math["vmin"===ve?"min":"max"])(Oe,Me)}}function M(W,Ce){this.element=W;var le,ve,Oe,Me,Je,qe,we,Ne,ke=["min-width","min-height","max-width","max-height"];this.call=function(){for(le in Oe=function j(W){if(!W.getBoundingClientRect)return{width:W.offsetWidth,height:W.offsetHeight};var Ce=W.getBoundingClientRect();return{width:Math.round(Ce.width),height:Math.round(Ce.height)}}(this.element),qe={},I[Ce])I[Ce].hasOwnProperty(le)&&(Me=oe(this.element,(ve=I[Ce][le]).value),Je="width"===ve.property?Oe.width:Oe.height,we="","min"===ve.mode&&Je>=Me&&(we+=ve.value),"max"===ve.mode&&Je<=Me&&(we+=ve.value),qe[Ne=ve.mode+"-"+ve.property]||(qe[Ne]=""),we&&-1===(" "+qe[Ne]+" ").indexOf(" "+we+" ")&&(qe[Ne]+=" "+we));for(var Ve in ke)ke.hasOwnProperty(Ve)&&(qe[ke[Ve]]?this.element.setAttribute(ke[Ve],qe[ke[Ve]].substr(1)):this.element.removeAttribute(ke[Ve]))}}function $(W,Ce){W.elementQueriesSetupInformation||(W.elementQueriesSetupInformation=new M(W,Ce)),W.elementQueriesSensor||(W.elementQueriesSensor=new C(W,function(){W.elementQueriesSetupInformation.call()}))}function ce(W,Ce,le,ve){if(typeof I[W]>"u"){I[W]=[];var Oe=L.length;y.innerHTML+="\n"+W+" {animation: 0.1s element-queries;}",y.innerHTML+="\n"+W+" > .resize-sensor {min-width: "+Oe+"px;}",L.push(W)}I[W].push({mode:Ce,property:le,value:ve})}function K(W){var Ce;if(document.querySelectorAll&&(Ce=W?W.querySelectorAll.bind(W):document.querySelectorAll.bind(document)),!Ce&&typeof $$<"u"&&(Ce=$$),!Ce&&typeof jQuery<"u"&&(Ce=jQuery),!Ce)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Ce}function ne(W){var Ce=[],le=[],ve=[],Oe=0,Me=-1,Je=[];for(var qe in W.children)if(W.children.hasOwnProperty(qe)&&W.children[qe].tagName&&"img"===W.children[qe].tagName.toLowerCase()){Ce.push(W.children[qe]);var we=W.children[qe].getAttribute("min-width")||W.children[qe].getAttribute("data-min-width"),Ne=W.children[qe].getAttribute("data-src")||W.children[qe].getAttribute("url");ve.push(Ne),le.push({minWidth:we}),we?W.children[qe].style.display="none":(Oe=Ce.length-1,W.children[qe].style.display="block")}function Ve(){var Ee,me=!1;for(Ee in Ce)Ce.hasOwnProperty(Ee)&&le[Ee].minWidth&&W.offsetWidth>le[Ee].minWidth&&(me=Ee);if(me||(me=Oe),Me!==me)if(Je[me])Ce[Me].style.display="none",Ce[me].style.display="block",Me=me;else{var Ke=new Image;Ke.onload=function(){Ce[me].src=ve[me],Ce[Me].style.display="none",Ce[me].style.display="block",Je[me]=!0,Me=me},Ke.src=ve[me]}else Ce[me].src=ve[me]}Me=Oe,W.resizeSensorInstance=new C(W,Ve),Ve()}var U=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,x=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function B(W){var Ce,le,ve,Oe;for(W=W.replace(/'/g,'"');null!==(Ce=U.exec(W));)for(le=Ce[1]+Ce[3],ve=Ce[2];null!==(Oe=x.exec(ve));)ce(le,Oe[1],Oe[2],Oe[3])}function O(W){var Ce="";if(W)if("string"==typeof W)(-1!==(W=W.toLowerCase()).indexOf("min-width")||-1!==W.indexOf("max-width"))&&B(W);else for(var le=0,ve=W.length;le<ve;le++)1===W[le].type?(-1!==(Ce=W[le].selectorText||W[le].cssText).indexOf("min-height")||-1!==Ce.indexOf("max-height")||-1!==Ce.indexOf("min-width")||-1!==Ce.indexOf("max-width"))&&B(Ce):4===W[le].type?O(W[le].cssRules||W[le].rules):3===W[le].type&&W[le].styleSheet.hasOwnProperty("cssRules")&&O(W[le].styleSheet.cssRules)}var ue=!1;this.init=function(){var W="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?W="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?W="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(W="oanimationstart"),document.body.addEventListener(W,function(ve){var Oe=ve.target,Me=Oe&&window.getComputedStyle(Oe,null),Je=Me&&Me.getPropertyValue("animation-name");if(Je&&-1!==Je.indexOf("element-queries")){Oe.elementQueriesSensor=new C(Oe,function(){Oe.elementQueriesSetupInformation&&Oe.elementQueriesSetupInformation.call()});var Ne=window.getComputedStyle(Oe.resizeSensor,null).getPropertyValue("min-width");Ne=parseInt(Ne.replace("px","")),$(ve.target,L[Ne])}}),ue||((y=document.createElement("style")).type="text/css",y.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",y.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(y),ue=!0);for(var Ce=0,le=document.styleSheets.length;Ce<le;Ce++)try{document.styleSheets[Ce].href&&0===document.styleSheets[Ce].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Ce].href),O(document.styleSheets[Ce].cssRules||document.styleSheets[Ce].rules||document.styleSheets[Ce].cssText)}catch{}!function q(){for(var Ce=K()("[data-responsive-image],[responsive-image]"),le=0,ve=Ce.length;le<ve;le++)ne(Ce[le])}()},this.findElementQueriesElements=function(W){!function ie(W){var Ce=K(W);for(var le in I)if(I.hasOwnProperty(le))for(var ve=Ce(le,W),Oe=0,Me=ve.length;Oe<Me;Oe++)$(ve[Oe],le)}(W)},this.update=function(){this.init()}};N.update=function(){N.instance.update()},N.detach=function(y){y.elementQueriesSetupInformation?(y.elementQueriesSensor.detach(),delete y.elementQueriesSetupInformation,delete y.elementQueriesSensor):y.resizeSensorInstance&&(y.resizeSensorInstance.detach(),delete y.resizeSensorInstance)},N.init=function(){N.instance||(N.instance=new N),N.instance.init()};return N.findElementQueriesElements=function(y){N.instance.findElementQueriesElements(y)},N.listen=function(){!function(y){if(document.addEventListener)document.addEventListener("DOMContentLoaded",y,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var I=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(y(),clearInterval(I))},10);else window.onload=y}(N.init)},N})?S.apply(J,b):S)&&(te.exports=k)},884:function(te,J,g){"use strict";var S,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(S=function(){if(typeof window>"u")return null;var k=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),C=k.requestAnimationFrame||k.mozRequestAnimationFrame||k.webkitRequestAnimationFrame||function(j){return k.setTimeout(j,20)},N=k.cancelAnimationFrame||k.mozCancelAnimationFrame||k.webkitCancelAnimationFrame||function(j){k.clearTimeout(j)};function _(j,oe){var M=Object.prototype.toString.call(j),$="[object Array]"===M||"[object NodeList]"===M||"[object HTMLCollection]"===M||"[object Object]"===M||typeof jQuery<"u"&&j instanceof jQuery||typeof Elements<"u"&&j instanceof Elements,ce=0,K=j.length;if($)for(;ce<K;ce++)oe(j[ce]);else oe(j)}function y(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var oe=j.getBoundingClientRect();return{width:Math.round(oe.width),height:Math.round(oe.height)}}function I(j,oe){Object.keys(oe).forEach(function(M){j.style[M]=oe[M]})}var L=function(j,oe){var M=0;function $(){var ie,ne,K=[];this.add=function(q){K.push(q)},this.call=function(q){for(ie=0,ne=K.length;ie<ne;ie++)K[ie].call(this,q)},this.remove=function(q){var U=[];for(ie=0,ne=K.length;ie<ne;ie++)K[ie]!==q&&U.push(K[ie]);K=U},this.length=function(){return K.length}}function ce(K,ie){if(K){if(K.resizedAttached)return void K.resizedAttached.add(ie);K.resizedAttached=new $,K.resizedAttached.add(ie),K.resizeSensor=document.createElement("div"),K.resizeSensor.dir="ltr",K.resizeSensor.className="resize-sensor";var ne={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},q={position:"absolute",left:"0px",top:"0px",transition:"0s"};I(K.resizeSensor,ne);var U=document.createElement("div");U.className="resize-sensor-expand",I(U,ne);var x=document.createElement("div");I(x,q),U.appendChild(x);var B=document.createElement("div");B.className="resize-sensor-shrink",I(B,ne);var O=document.createElement("div");I(O,q),I(O,{width:"200%",height:"200%"}),B.appendChild(O),K.resizeSensor.appendChild(U),K.resizeSensor.appendChild(B),K.appendChild(K.resizeSensor);var ue=window.getComputedStyle(K),W=ue?ue.getPropertyValue("position"):null;"absolute"!==W&&"relative"!==W&&"fixed"!==W&&"sticky"!==W&&(K.style.position="relative");var Ce=!1,le=0,ve=y(K),Oe=0,Me=0,Je=!0;M=0;var we=function(){if(Je){if(0===K.offsetWidth&&0===K.offsetHeight)return void(M||(M=C(function(){M=0,we()})));Je=!1}var me,Ee;Ee=K.offsetHeight,x.style.width=(me=K.offsetWidth)+10+"px",x.style.height=Ee+10+"px",U.scrollLeft=me+10,U.scrollTop=Ee+10,B.scrollLeft=me+10,B.scrollTop=Ee+10};K.resizeSensor.resetSensor=we;var Ne=function(){le=0,Ce&&(Oe=ve.width,Me=ve.height,K.resizedAttached&&K.resizedAttached.call(ve))},ke=function(){ve=y(K),(Ce=ve.width!==Oe||ve.height!==Me)&&!le&&(le=C(Ne)),we()},Ve=function(me,Ee,Ke){me.attachEvent?me.attachEvent("on"+Ee,Ke):me.addEventListener(Ee,Ke)};Ve(U,"scroll",ke),Ve(B,"scroll",ke),M=C(function(){M=0,we()})}}_(j,function(K){ce(K,oe)}),this.detach=function(K){M||(N(M),M=0),L.detach(j,K)},this.reset=function(){j.resizeSensor.resetSensor()}};if(L.reset=function(j){_(j,function(oe){oe.resizeSensor.resetSensor()})},L.detach=function(j,oe){_(j,function(M){M&&(M.resizedAttached&&"function"==typeof oe&&(M.resizedAttached.remove(oe),M.resizedAttached.length())||M.resizeSensor&&(M.contains(M.resizeSensor)&&M.removeChild(M.resizeSensor),delete M.resizeSensor,delete M.resizedAttached))})},typeof MutationObserver<"u"){var P=new MutationObserver(function(j){for(var oe in j)if(j.hasOwnProperty(oe))for(var M=j[oe].addedNodes,$=0;$<M.length;$++)M[$].resizeSensor&&L.reset(M[$])});document.addEventListener("DOMContentLoaded",function(j){P.observe(document.body,{childList:!0,subtree:!0})})}return L})?S.call(J,g,J,te):S)&&(te.exports=b)},2016:te=>{"use strict";var S,J="object"==typeof Reflect?Reflect:null,g=J&&"function"==typeof J.apply?J.apply:function(U,x,B){return Function.prototype.apply.call(U,x,B)};S=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var k=Number.isNaN||function(U){return U!=U};function C(){C.init.call(this)}te.exports=C,te.exports.once=function K(q,U){return new Promise(function(x,B){function O(W){q.removeListener(U,ue),B(W)}function ue(){"function"==typeof q.removeListener&&q.removeListener("error",O),x([].slice.call(arguments))}ne(q,U,ue,{once:!0}),"error"!==U&&function ie(q,U,x){"function"==typeof q.on&&ne(q,"error",U,x)}(q,O,{once:!0})})},C.EventEmitter=C,C.prototype._events=void 0,C.prototype._eventsCount=0,C.prototype._maxListeners=void 0;var N=10;function _(q){if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q)}function y(q){return void 0===q._maxListeners?C.defaultMaxListeners:q._maxListeners}function I(q,U,x,B){var O,ue,W;if(_(x),void 0===(ue=q._events)?(ue=q._events=Object.create(null),q._eventsCount=0):(void 0!==ue.newListener&&(q.emit("newListener",U,x.listener?x.listener:x),ue=q._events),W=ue[U]),void 0===W)W=ue[U]=x,++q._eventsCount;else if("function"==typeof W?W=ue[U]=B?[x,W]:[W,x]:B?W.unshift(x):W.push(x),(O=y(q))>0&&W.length>O&&!W.warned){W.warned=!0;var Ce=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ce.name="MaxListenersExceededWarning",Ce.emitter=q,Ce.type=U,Ce.count=W.length,function b(q){console&&console.warn&&console.warn(q)}(Ce)}return q}function L(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(q,U,x){var B={fired:!1,wrapFn:void 0,target:q,type:U,listener:x},O=L.bind(B);return O.listener=x,B.wrapFn=O,O}function j(q,U,x){var B=q._events;if(void 0===B)return[];var O=B[U];return void 0===O?[]:"function"==typeof O?x?[O.listener||O]:[O]:x?function ce(q){for(var U=new Array(q.length),x=0;x<U.length;++x)U[x]=q[x].listener||q[x];return U}(O):M(O,O.length)}function oe(q){var U=this._events;if(void 0!==U){var x=U[q];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function M(q,U){for(var x=new Array(U),B=0;B<U;++B)x[B]=q[B];return x}function ne(q,U,x,B){if("function"==typeof q.on)B.once?q.once(U,x):q.on(U,x);else{if("function"!=typeof q.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof q);q.addEventListener(U,function O(ue){B.once&&q.removeEventListener(U,O),x(ue)})}}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(q){if("number"!=typeof q||q<0||k(q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+q+".");N=q}}),C.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||k(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},C.prototype.getMaxListeners=function(){return y(this)},C.prototype.emit=function(U){for(var x=[],B=1;B<arguments.length;B++)x.push(arguments[B]);var O="error"===U,ue=this._events;if(void 0!==ue)O=O&&void 0===ue.error;else if(!O)return!1;if(O){var W;if(x.length>0&&(W=x[0]),W instanceof Error)throw W;var Ce=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Ce.context=W,Ce}var le=ue[U];if(void 0===le)return!1;if("function"==typeof le)g(le,this,x);else{var ve=le.length,Oe=M(le,ve);for(B=0;B<ve;++B)g(Oe[B],this,x)}return!0},C.prototype.on=C.prototype.addListener=function(U,x){return I(this,U,x,!1)},C.prototype.prependListener=function(U,x){return I(this,U,x,!0)},C.prototype.once=function(U,x){return _(x),this.on(U,P(this,U,x)),this},C.prototype.prependOnceListener=function(U,x){return _(x),this.prependListener(U,P(this,U,x)),this},C.prototype.off=C.prototype.removeListener=function(U,x){var B,O,ue,W,Ce;if(_(x),void 0===(O=this._events))return this;if(void 0===(B=O[U]))return this;if(B===x||B.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete O[U],O.removeListener&&this.emit("removeListener",U,B.listener||x));else if("function"!=typeof B){for(ue=-1,W=B.length-1;W>=0;W--)if(B[W]===x||B[W].listener===x){Ce=B[W].listener,ue=W;break}if(ue<0)return this;0===ue?B.shift():function $(q,U){for(;U+1<q.length;U++)q[U]=q[U+1];q.pop()}(B,ue),1===B.length&&(O[U]=B[0]),void 0!==O.removeListener&&this.emit("removeListener",U,Ce||x)}return this},C.prototype.removeAllListeners=function(U){var x,B,O;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[U]),this;if(0===arguments.length){var W,ue=Object.keys(B);for(O=0;O<ue.length;++O)"removeListener"!==(W=ue[O])&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=B[U]))this.removeListener(U,x);else if(void 0!==x)for(O=x.length-1;O>=0;O--)this.removeListener(U,x[O]);return this},C.prototype.listeners=function(U){return j(this,U,!0)},C.prototype.rawListeners=function(U){return j(this,U,!1)},C.listenerCount=function(q,U){return"function"==typeof q.listenerCount?q.listenerCount(U):oe.call(q,U)},C.prototype.listenerCount=oe,C.prototype.eventNames=function(){return this._eventsCount>0?S(this._events):[]}},7991:(te,J,g)=>{var S=g(6943),b=g(9151),k=g(2323);function C(j,oe,M){if(!S(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!j.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');if(!j.hasNode(M))throw new Error('graphology-shortest-path: the "'+M+'" target node does not exist in the given graph.');if((oe=""+oe)==(M=""+M))return[oe];var $=j.inboundNeighbors.bind(j),ce=j.outboundNeighbors.bind(j),K={},ie={};K[oe]=null,ie[M]=null;var U,x,B,O,ue,W,Ce,le,ne=[oe],q=[M],ve=!1;e:for(;ne.length&&q.length;)if(ne.length<=q.length){for(U=ne,ne=[],ue=0,Ce=U.length;ue<Ce;ue++)for(W=0,le=(B=ce(x=U[ue])).length;W<le;W++)if((O=B[W])in K||(ne.push(O),K[O]=x),O in ie){ve=!0;break e}}else for(U=q,q=[],ue=0,Ce=U.length;ue<Ce;ue++)for(x=U[ue],B=$(x),W=0,le=B.length;W<le;W++)if(O=B[W],O in ie||(q.push(O),ie[O]=x),O in K){ve=!0;break e}if(!ve)return null;for(var Oe=[];O;)Oe.unshift(O),O=K[O];for(O=ie[Oe[Oe.length-1]];O;)Oe.push(O),O=ie[O];return Oe.length?Oe:null}function N(j,oe){if(!S(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!j.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');var ce,K,ie,ne,q,U,M={},$={};for(M[oe=""+oe]=!0,$[oe]=[oe];Object.keys(M).length;)for(ie in ce=M,M={},ce)for(q=0,U=(K=j.outboundNeighbors(ie)).length;q<U;q++)$[ne=K[q]]||($[ne]=$[ie].concat(ne),M[ne]=!0);return $}function _(j,oe,M){if(!S(oe))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!oe.hasNode(M))throw new Error('graphology-shortest-path: the "'+M+'" source node does not exist in the given graph.');M=""+M;var $=new Set,ce={},K=0;ce[M]=0;for(var ne,q,U,ie=[M];0!==ie.length;){var x=[];for(ne=0,q=ie.length;ne<q;ne++)!$.has(U=ie[ne])&&($.add(U),k(x,oe[j](U)),ce[U]=K);K++,ie=x}return ce}var y=_.bind(null,"outboundNeighbors"),I=_.bind(null,"neighbors");function L(j,oe,M){return arguments.length<3?N(j,oe):C(j,oe,M)}L.bidirectional=C,L.singleSource=N,L.singleSourceLength=y,L.undirectedSingleSourceLength=I,L.brandes=function P(j,oe){oe=""+oe;var ie,ne,q,U,x,B,O,ue,W,M=[],$={},ce={},K=j.nodes();for(B=0,ue=K.length;B<ue;B++)$[U=K[B]]=[],ce[U]=0;var Ce={};ce[oe]=1,Ce[oe]=0;for(var le=b.of(oe);le.size;)for(U=le.dequeue(),M.push(U),ie=Ce[U],ne=ce[U],O=0,W=(q=j.outboundNeighbors(U)).length;O<W;O++)(x=q[O])in Ce||(le.enqueue(x),Ce[x]=ie+1),Ce[x]===ie+1&&(ce[x]+=ne,$[x].push(U));return[M,$,ce]},te.exports=L},6943:te=>{te.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(te){te.exports=function(){"use strict";function J(ge){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(De){return typeof De}:function(De){return De&&"function"==typeof Symbol&&De.constructor===Symbol&&De!==Symbol.prototype?"symbol":typeof De})(ge)}function g(ge,De){ge.prototype=Object.create(De.prototype),ge.prototype.constructor=ge,b(ge,De)}function S(ge){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(De){return De.__proto__||Object.getPrototypeOf(De)})(ge)}function b(ge,De){return(b=Object.setPrototypeOf||function(ye,z){return ye.__proto__=z,ye})(ge,De)}function C(ge,De,ye){return(C=function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(z,ee,be){var Be=[null];Be.push.apply(Be,ee);var Xe=new(Function.bind.apply(z,Be));return be&&b(Xe,be.prototype),Xe}).apply(null,arguments)}function N(ge){var De="function"==typeof Map?new Map:void 0;return(N=function(ye){if(null===ye||-1===Function.toString.call(ye).indexOf("[native code]"))return ye;if("function"!=typeof ye)throw new TypeError("Super expression must either be null or a function");if(void 0!==De){if(De.has(ye))return De.get(ye);De.set(ye,ee)}function ee(){return C(ye,arguments,S(this).constructor)}return ee.prototype=Object.create(ye.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),b(ee,ye)})(ge)}function _(ge){if(void 0===ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}var y=function(){for(var ge=arguments[0],De=1,ye=arguments.length;De<ye;De++)if(arguments[De])for(var z in arguments[De])ge[z]=arguments[De][z];return ge};function I(ge,De,ye,z){var ee=ge._nodes.get(De),be=null;return ee?be="mixed"===z?ee.out&&ee.out[ye]||ee.undirected&&ee.undirected[ye]:"directed"===z?ee.out&&ee.out[ye]:ee.undirected&&ee.undirected[ye]:be}function P(ge){return"object"===J(ge)&&null!==ge&&ge.constructor===Object}function j(ge){var De;for(De in ge)return!1;return!0}function oe(ge,De,ye){Object.defineProperty(ge,De,{enumerable:!1,configurable:!1,writable:!0,value:ye})}function M(ge,De,ye){var z={enumerable:!0,configurable:!0};"function"==typeof ye?z.get=ye:(z.value=ye,z.writable=!1),Object.defineProperty(ge,De,z)}function $(ge){return!(!P(ge)||ge.attributes&&!Array.isArray(ge.attributes))}"function"==typeof Object.assign&&(y=Object.assign);var ce,K={exports:{}},ie="object"==typeof Reflect?Reflect:null,ne=ie&&"function"==typeof ie.apply?ie.apply:function(ge,De,ye){return Function.prototype.apply.call(ge,De,ye)};ce=ie&&"function"==typeof ie.ownKeys?ie.ownKeys:Object.getOwnPropertySymbols?function(ge){return Object.getOwnPropertyNames(ge).concat(Object.getOwnPropertySymbols(ge))}:function(ge){return Object.getOwnPropertyNames(ge)};var q=Number.isNaN||function(ge){return ge!=ge};function U(){U.init.call(this)}K.exports=U,K.exports.once=function(ge,De){return new Promise(function(ye,z){function ee(Be){ge.removeListener(De,be),z(Be)}function be(){"function"==typeof ge.removeListener&&ge.removeListener("error",ee),ye([].slice.call(arguments))}var Be;Me(ge,De,be,{once:!0}),"error"!==De&&("function"==typeof(Be=ge).on&&Me(Be,"error",ee,{once:!0}))})},U.EventEmitter=U,U.prototype._events=void 0,U.prototype._eventsCount=0,U.prototype._maxListeners=void 0;var x=10;function B(ge){if("function"!=typeof ge)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ge)}function O(ge){return void 0===ge._maxListeners?U.defaultMaxListeners:ge._maxListeners}function ue(ge,De,ye,z){var ee,be,Be;if(B(ye),void 0===(be=ge._events)?(be=ge._events=Object.create(null),ge._eventsCount=0):(void 0!==be.newListener&&(ge.emit("newListener",De,ye.listener?ye.listener:ye),be=ge._events),Be=be[De]),void 0===Be)Be=be[De]=ye,++ge._eventsCount;else if("function"==typeof Be?Be=be[De]=z?[ye,Be]:[Be,ye]:z?Be.unshift(ye):Be.push(ye),(ee=O(ge))>0&&Be.length>ee&&!Be.warned){Be.warned=!0;var rt=new Error("Possible EventEmitter memory leak detected. "+Be.length+" "+String(De)+" listeners added. Use emitter.setMaxListeners() to increase limit");rt.name="MaxListenersExceededWarning",rt.emitter=ge,rt.type=De,rt.count=Be.length,console&&console.warn&&console.warn(rt)}return ge}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ce(ge,De,ye){var z={fired:!1,wrapFn:void 0,target:ge,type:De,listener:ye},ee=W.bind(z);return ee.listener=ye,z.wrapFn=ee,ee}function le(ge,De,ye){var z=ge._events;if(void 0===z)return[];var ee=z[De];return void 0===ee?[]:"function"==typeof ee?ye?[ee.listener||ee]:[ee]:ye?function(be){for(var Be=new Array(be.length),Xe=0;Xe<Be.length;++Xe)Be[Xe]=be[Xe].listener||be[Xe];return Be}(ee):Oe(ee,ee.length)}function ve(ge){var De=this._events;if(void 0!==De){var ye=De[ge];if("function"==typeof ye)return 1;if(void 0!==ye)return ye.length}return 0}function Oe(ge,De){for(var ye=new Array(De),z=0;z<De;++z)ye[z]=ge[z];return ye}function Me(ge,De,ye,z){if("function"==typeof ge.on)z.once?ge.once(De,ye):ge.on(De,ye);else{if("function"!=typeof ge.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ge);ge.addEventListener(De,function ee(be){z.once&&ge.removeEventListener(De,ee),ye(be)})}}function Je(ge){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ge}),this.done=!1}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(ge){if("number"!=typeof ge||ge<0||q(ge))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ge+".");x=ge}}),U.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},U.prototype.setMaxListeners=function(ge){if("number"!=typeof ge||ge<0||q(ge))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ge+".");return this._maxListeners=ge,this},U.prototype.getMaxListeners=function(){return O(this)},U.prototype.emit=function(ge){for(var De=[],ye=1;ye<arguments.length;ye++)De.push(arguments[ye]);var z="error"===ge,ee=this._events;if(void 0!==ee)z=z&&void 0===ee.error;else if(!z)return!1;if(z){var be;if(De.length>0&&(be=De[0]),be instanceof Error)throw be;var Be=new Error("Unhandled error."+(be?" ("+be.message+")":""));throw Be.context=be,Be}var Xe=ee[ge];if(void 0===Xe)return!1;if("function"==typeof Xe)ne(Xe,this,De);else{var rt=Xe.length,wt=Oe(Xe,rt);for(ye=0;ye<rt;++ye)ne(wt[ye],this,De)}return!0},U.prototype.addListener=function(ge,De){return ue(this,ge,De,!1)},U.prototype.on=U.prototype.addListener,U.prototype.prependListener=function(ge,De){return ue(this,ge,De,!0)},U.prototype.once=function(ge,De){return B(De),this.on(ge,Ce(this,ge,De)),this},U.prototype.prependOnceListener=function(ge,De){return B(De),this.prependListener(ge,Ce(this,ge,De)),this},U.prototype.removeListener=function(ge,De){var ye,z,ee,be,Be;if(B(De),void 0===(z=this._events))return this;if(void 0===(ye=z[ge]))return this;if(ye===De||ye.listener===De)0==--this._eventsCount?this._events=Object.create(null):(delete z[ge],z.removeListener&&this.emit("removeListener",ge,ye.listener||De));else if("function"!=typeof ye){for(ee=-1,be=ye.length-1;be>=0;be--)if(ye[be]===De||ye[be].listener===De){Be=ye[be].listener,ee=be;break}if(ee<0)return this;0===ee?ye.shift():function(Xe,rt){for(;rt+1<Xe.length;rt++)Xe[rt]=Xe[rt+1];Xe.pop()}(ye,ee),1===ye.length&&(z[ge]=ye[0]),void 0!==z.removeListener&&this.emit("removeListener",ge,Be||De)}return this},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(ge){var De,ye,z;if(void 0===(ye=this._events))return this;if(void 0===ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ye[ge]&&(0==--this._eventsCount?this._events=Object.create(null):delete ye[ge]),this;if(0===arguments.length){var ee,be=Object.keys(ye);for(z=0;z<be.length;++z)"removeListener"!==(ee=be[z])&&this.removeAllListeners(ee);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(De=ye[ge]))this.removeListener(ge,De);else if(void 0!==De)for(z=De.length-1;z>=0;z--)this.removeListener(ge,De[z]);return this},U.prototype.listeners=function(ge){return le(this,ge,!0)},U.prototype.rawListeners=function(ge){return le(this,ge,!1)},U.listenerCount=function(ge,De){return"function"==typeof ge.listenerCount?ge.listenerCount(De):ve.call(ge,De)},U.prototype.listenerCount=ve,U.prototype.eventNames=function(){return this._eventsCount>0?ce(this._events):[]},Je.prototype.next=function(){if(this.done)return{done:!0};var ge=this._next();return ge.done&&(this.done=!0),ge},typeof Symbol<"u"&&(Je.prototype[Symbol.iterator]=function(){return this}),Je.of=function(){var ge=arguments,De=ge.length,ye=0;return new Je(function(){return ye>=De?{done:!0}:{done:!1,value:ge[ye++]}})},Je.empty=function(){var ge=new Je(null);return ge.done=!0,ge},Je.is=function(ge){return ge instanceof Je||"object"==typeof ge&&null!==ge&&"function"==typeof ge.next};var qe=Je,we=function(ge,De){for(var ye,z=arguments.length>1?De:1/0,ee=z!==1/0?new Array(z):[],be=0;;){if(be===z)return ee;if((ye=ge.next()).done)return be!==De?ee.slice(0,be):ee;ee[be++]=ye.value}},Ne=function(ge){function De(ye,z){var ee;return(ee=ge.call(this)||this).name="GraphError",ee.message=ye||"",ee.data=z||{},ee}return g(De,ge),De}(N(Error)),ke=function(ge){function De(ye,z){var ee;return(ee=ge.call(this,ye,z)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ee),De.prototype.constructor),ee}return g(De,ge),De}(Ne),Ve=function(ge){function De(ye,z){var ee;return(ee=ge.call(this,ye,z)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ee),De.prototype.constructor),ee}return g(De,ge),De}(Ne),me=function(ge){function De(ye,z){var ee;return(ee=ge.call(this,ye,z)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ee),De.prototype.constructor),ee}return g(De,ge),De}(Ne);function Ee(ge,De){this.key=ge,this.attributes=De,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Ke(ge,De){this.key=ge,this.attributes=De,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function at(ge,De){this.key=ge,this.attributes=De,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ye(ge,De,ye,z,ee,be){this.key=De,this.attributes=be,this.undirected=ge,this.source=z,this.target=ee,this.generatedKey=ye}function _e(ge,De,ye,z,ee,be,Be){var Xe,rt,wt="out",Tt="in";if(De&&(wt=Tt="undirected"),ge.multi){if(void 0===(rt=(Xe=be[wt])[ee])&&(Xe[ee]=rt=new Set),rt.add(ye),z===ee&&De)return;void 0===(Xe=Be[Tt])[z]&&(Xe[z]=rt)}else{if(be[wt][ee]=ye,z===ee&&De)return;Be[Tt][z]=ye}}Ke.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},at.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var R=[{name:function(ge){return"get".concat(ge,"Attribute")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee){var be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+ee;if(ee=arguments[2],!(be=I(this,Be,Xe,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ye&&be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return be.attributes[ee]}}},{name:function(ge){return"get".concat(ge,"Attributes")},attacher:function(ge,De,ye){ge.prototype[De]=function(z){var ee;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var be=""+z,Be=""+arguments[1];if(!(ee=I(this,be,Be,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(be,'" - "').concat(Be,'").'))}else if(!(ee=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ye&&ee.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return ee.attributes}}},{name:function(ge){return"has".concat(ge,"Attribute")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee){var be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+ee;if(ee=arguments[2],!(be=I(this,Be,Xe,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ye&&be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return be.attributes.hasOwnProperty(ee)}}},{name:function(ge){return"set".concat(ge,"Attribute")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee,be){var Be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xe=""+z,rt=""+ee;if(ee=arguments[2],be=arguments[3],!(Be=I(this,Xe,rt,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Xe,'" - "').concat(rt,'").'))}else if(!(Be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ye&&Be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return Be.attributes[ee]=be,this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:ee}),this}}},{name:function(ge){return"update".concat(ge,"Attribute")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee,be){var Be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xe=""+z,rt=""+ee;if(ee=arguments[2],be=arguments[3],!(Be=I(this,Xe,rt,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Xe,'" - "').concat(rt,'").'))}else if(!(Be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if("function"!=typeof be)throw new ke("Graph.".concat(De,": updater should be a function."));if("mixed"!==ye&&Be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return Be.attributes[ee]=be(Be.attributes[ee]),this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:ee}),this}}},{name:function(ge){return"remove".concat(ge,"Attribute")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee){var be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+ee;if(ee=arguments[2],!(be=I(this,Be,Xe,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ye&&be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return delete be.attributes[ee],this.emit("edgeAttributesUpdated",{key:be.key,type:"remove",attributes:be.attributes,name:ee}),this}}},{name:function(ge){return"replace".concat(ge,"Attributes")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee){var be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+ee;if(ee=arguments[2],!(be=I(this,Be,Xe,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if(!P(ee))throw new ke("Graph.".concat(De,": provided attributes are not a plain object."));if("mixed"!==ye&&be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return be.attributes=ee,this.emit("edgeAttributesUpdated",{key:be.key,type:"replace",attributes:be.attributes}),this}}},{name:function(ge){return"merge".concat(ge,"Attributes")},attacher:function(ge,De,ye){ge.prototype[De]=function(z,ee){var be;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new me("Graph.".concat(De,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(De,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+ee;if(ee=arguments[2],!(be=I(this,Be,Xe,ye)))throw new Ve("Graph.".concat(De,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" edge in the graph.'));if(!P(ee))throw new ke("Graph.".concat(De,": provided attributes are not a plain object."));if("mixed"!==ye&&be.undirected!==("undirected"===ye))throw new Ve("Graph.".concat(De,': could not find the "').concat(z,'" ').concat(ye," edge in the graph."));return y(be.attributes,ee),this.emit("edgeAttributesUpdated",{key:be.key,type:"merge",attributes:be.attributes,data:ee}),this}}}],se=qe,V=function(){var ge,De=arguments,ye=-1;return new se(function z(){if(!ge){if(++ye>=De.length)return{done:!0};ge=De[ye]}var ee=ge.next();return ee.done?(ge=null,z()):ee})},Fe=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function et(ge,De){for(var ye in De)ge.push(De[ye].key)}function fe(ge,De){for(var ye in De)De[ye].forEach(function(z){return ge.push(z.key)})}function Q(ge,De,ye){for(var z in ge)if(z!==ye){var ee=ge[z];De(ee.key,ee.attributes,ee.source.key,ee.target.key,ee.source.attributes,ee.target.attributes,ee.undirected,ee.generatedKey)}}function X(ge,De,ye){for(var z in ge)z!==ye&&ge[z].forEach(function(ee){return De(ee.key,ee.attributes,ee.source.key,ee.target.key,ee.source.attributes,ee.target.attributes,ee.undirected,ee.generatedKey)})}function A(ge,De,ye){for(var z in ge)if(z!==ye){var ee=ge[z];if(De(ee.key,ee.attributes,ee.source.key,ee.target.key,ee.source.attributes,ee.target.attributes,ee.undirected,ee.generatedKey))return!0}return!1}function F(ge,De,ye){var z,ee,be,Be,Xe;for(var rt in ge)if(rt!==ye)for(z=ge[rt].values();!0!==(ee=z.next()).done;)if(Be=(be=ee.value).source,De(be.key,be.attributes,Be.key,(Xe=be.target).key,Be.attributes,Xe.attributes,be.undirected,be.generatedKey))return!0;return!1}function de(ge,De){var ye=Object.keys(ge),z=ye.length,ee=null,be=0;return new qe(function Be(){var Xe;if(ee){var rt=ee.next();if(rt.done)return ee=null,be++,Be();Xe=rt.value}else{if(be>=z)return{done:!0};var wt=ye[be];if(wt===De)return be++,Be();if((Xe=ge[wt])instanceof Set)return ee=Xe.values(),Be();be++}return{done:!1,value:[Xe.key,Xe.attributes,Xe.source.key,Xe.target.key,Xe.source.attributes,Xe.target.attributes]}})}function pe(ge,De,ye){var z=De[ye];z&&ge.push(z.key)}function ze(ge,De,ye){var z=De[ye];z&&z.forEach(function(ee){return ge.push(ee.key)})}function Ge(ge,De,ye){var z=ge[De];if(z){var ee=z.source,be=z.target;ye(z.key,z.attributes,ee.key,be.key,ee.attributes,be.attributes,z.undirected,z.generatedKey)}}function gt(ge,De,ye){var z=ge[De];z&&z.forEach(function(ee){return ye(ee.key,ee.attributes,ee.source.key,ee.target.key,ee.source.attributes,ee.target.attributes,ee.undirected,ee.generatedKey)})}function Pt(ge,De,ye){var z=ge[De];if(z){var ee=z.source,be=z.target;return ye(z.key,z.attributes,ee.key,be.key,ee.attributes,be.attributes,z.undirected,z.generatedKey)}}function yt(ge,De,ye){var z=ge[De];if(z){for(var ee,be,Be=z.values();!0!==(ee=Be.next()).done;)if(ye((be=ee.value).key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes,be.undirected,be.generatedKey))return!0;return!1}}function Gt(ge,De){var ye=ge[De];if(ye instanceof Set){var z=ye.values();return new qe(function(){var ee=z.next();if(ee.done)return ee;var be=ee.value;return{done:!1,value:[be.key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes]}})}return qe.of([ye.key,ye.attributes,ye.source.key,ye.target.key,ye.source.attributes,ye.target.attributes])}var Cn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Do(ge,De){if(void 0!==De)for(var ye in De)ge.add(ye)}function Qo(ge,De,ye){for(var z in De){var ee=De[z];ee instanceof Set&&(ee=ee.values().next().value);var be=ee.source,Xe=be===ge?ee.target:be;ye(Xe.key,Xe.attributes)}}function Ji(ge,De,ye,z){for(var ee in ye){var be=ye[ee];be instanceof Set&&(be=be.values().next().value);var Be=be.source,rt=Be===De?be.target:Be;ge.has(rt.key)||(ge.add(rt.key),z(rt.key,rt.attributes))}}function Yr(ge,De,ye){for(var z in De){var ee=De[z];ee instanceof Set&&(ee=ee.values().next().value);var be=ee.source,Xe=be===ge?ee.target:be;if(ye(Xe.key,Xe.attributes))return!0}return!1}function vs(ge,De,ye,z){for(var ee in ye){var be=ye[ee];be instanceof Set&&(be=be.values().next().value);var Be=be.source,rt=Be===De?be.target:Be;if(!ge.has(rt.key)&&(ge.add(rt.key),z(rt.key,rt.attributes)))return!0}return!1}function zs(ge,De){var ye=Object.keys(De),z=ye.length,ee=0;return new qe(function(){if(ee>=z)return{done:!0};var be=De[ye[ee++]];be instanceof Set&&(be=be.values().next().value);var Be=be.source,rt=Be===ge?be.target:Be;return{done:!1,value:[rt.key,rt.attributes]}})}function Ro(ge,De,ye){var z=Object.keys(ye),ee=z.length,be=0;return new qe(function Be(){if(be>=ee)return{done:!0};var Xe=ye[z[be++]];Xe instanceof Set&&(Xe=Xe.values().next().value);var rt=Xe.source,Tt=rt===De?Xe.target:rt;return ge.has(Tt.key)?Be():(ge.add(Tt.key),{done:!1,value:[Tt.key,Tt.attributes]})})}function Gl(ge,De,ye){for(var z,ee,be,Be,Xe,rt,wt,Tt=De._nodes.values(),jt=De.type;!0!==(z=Tt.next()).done;){if(ee=z.value,"undirected"!==jt)for(be in Be=ee.out)if(rt=(Xe=Be[be]).target,wt=ye(ee.key,rt.key,ee.attributes,rt.attributes,Xe.key,Xe.attributes,Xe.undirected,Xe.generatedKey),ge&&wt)return;if("directed"!==jt)for(be in Be=ee.undirected)if((rt=(Xe=Be[be]).target).key!==be&&(rt=Xe.source),wt=ye(ee.key,rt.key,ee.attributes,rt.attributes,Xe.key,Xe.attributes,Xe.undirected,Xe.generatedKey),ge&&wt)return}}function da(ge,De,ye){for(var z,ee,be,Be,Xe,rt,wt,Tt,jt,en=De._nodes.values(),yn=De.type;!0!==(z=en.next()).done;){if(ee=z.value,"undirected"!==yn)for(be in rt=ee.out)for(Be=rt[be].values();!0!==(Xe=Be.next()).done;)if(Tt=(wt=Xe.value).target,jt=ye(ee.key,Tt.key,ee.attributes,Tt.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),ge&&jt)return;if("directed"!==yn)for(be in rt=ee.undirected)for(Be=rt[be].values();!0!==(Xe=Be.next()).done;)if((Tt=(wt=Xe.value).target).key!==be&&(Tt=wt.source),jt=ye(ee.key,Tt.key,ee.attributes,Tt.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),ge&&jt)return}}function nc(ge,De){var ye={key:ge};return j(De.attributes)||(ye.attributes=y({},De.attributes)),ye}function Wl(ge,De){var ye={source:De.source.key,target:De.target.key};return De.generatedKey||(ye.key=ge),j(De.attributes)||(ye.attributes=y({},De.attributes)),De.undirected&&(ye.undirected=!0),ye}var ph=new Set(["directed","undirected","mixed"]),Hc=new Set(["domain","_events","_eventsCount","_maxListeners"]),tu={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Gc(ge,De,ye){var z=new ge.NodeDataClass(De,ye);return ge._nodes.set(De,z),ge.emit("nodeAdded",{key:De,attributes:ye}),z}function Yl(ge,De,ye,z,ee,be,Be,Xe){if(!z&&"undirected"===ge.type)throw new me("Graph.".concat(De,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(z&&"directed"===ge.type)throw new me("Graph.".concat(De,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xe&&!P(Xe))throw new ke("Graph.".concat(De,': invalid attributes. Expecting an object but got "').concat(Xe,'"'));if(be=""+be,Be=""+Be,Xe=Xe||{},!ge.allowSelfLoops&&be===Be)throw new me("Graph.".concat(De,': source & target are the same ("').concat(be,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var rt=ge._nodes.get(be),wt=ge._nodes.get(Be);if(!rt)throw new Ve("Graph.".concat(De,': source node "').concat(be,'" not found.'));if(!wt)throw new Ve("Graph.".concat(De,': target node "').concat(Be,'" not found.'));var Tt={key:null,undirected:z,source:be,target:Be,attributes:Xe};if(ye&&(ee=ge._edgeKeyGenerator(Tt)),ge._edges.has(ee=""+ee))throw new me("Graph.".concat(De,': the "').concat(ee,'" edge already exists in the graph.'));if(!ge.multi&&(z?void 0!==rt.undirected[Be]:void 0!==rt.out[Be]))throw new me("Graph.".concat(De,': an edge linking "').concat(be,'" to "').concat(Be,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var jt=new Ye(z,ee,ye,rt,wt,Xe);return ge._edges.set(ee,jt),be===Be?z?(rt.undirectedSelfLoops++,ge._undirectedSelfLoopCount++):(rt.directedSelfLoops++,ge._directedSelfLoopCount++):z?(rt.undirectedDegree++,wt.undirectedDegree++):(rt.outDegree++,wt.inDegree++),_e(ge,z,jt,be,Be,rt,wt),z?ge._undirectedSize++:ge._directedSize++,Tt.key=ee,ge.emit("edgeAdded",Tt),ee}function Li(ge,De,ye,z,ee,be,Be,Xe,rt){if(!z&&"undirected"===ge.type)throw new me("Graph.".concat(De,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(z&&"directed"===ge.type)throw new me("Graph.".concat(De,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xe)if(rt){if("function"!=typeof Xe)throw new ke("Graph.".concat(De,': invalid updater function. Expecting a function but got "').concat(Xe,'"'))}else if(!P(Xe))throw new ke("Graph.".concat(De,': invalid attributes. Expecting an object but got "').concat(Xe,'"'));var wt;if(be=""+be,Be=""+Be,rt&&(wt=Xe,Xe=void 0),!ge.allowSelfLoops&&be===Be)throw new me("Graph.".concat(De,': source & target are the same ("').concat(be,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Tt,jt,en=ge._nodes.get(be),yn=ge._nodes.get(Be);if(!ye&&(Tt=ge._edges.get(ee))){if(Tt.source.key!==be||Tt.target.key!==Be||z&&(Tt.source.key!==Be||Tt.target.key!==be))throw new me("Graph.".concat(De,': inconsistency detected when attempting to merge the "').concat(ee,'" edge with "').concat(be,'" source & "').concat(Be,'" target vs. ("').concat(Tt.source.key,'", "').concat(Tt.target.key,'").'));jt=Tt}if(jt||ge.multi||!en||(jt=z?en.undirected[Be]:en.out[Be]),jt)return(rt?wt:Xe)?(rt?(jt.attributes=wt(jt.attributes),ge.emit("edgeAttributesUpdated",{type:"replace",key:jt.key,attributes:jt.attributes})):(y(jt.attributes,Xe),ge.emit("edgeAttributesUpdated",{type:"merge",key:jt.key,attributes:jt.attributes,data:Xe})),jt.key):jt.key;Xe=Xe||{},rt&&wt&&(Xe=wt(Xe));var Dr={key:null,undirected:z,source:be,target:Be,attributes:Xe};if(ye&&(ee=ge._edgeKeyGenerator(Dr)),ge._edges.has(ee=""+ee))throw new me("Graph.".concat(De,': the "').concat(ee,'" edge already exists in the graph.'));return en||(en=Gc(ge,be,{}),be===Be&&(yn=en)),yn||(yn=Gc(ge,Be,{})),Tt=new Ye(z,ee,ye,en,yn,Xe),ge._edges.set(ee,Tt),be===Be?z?(en.undirectedSelfLoops++,ge._undirectedSelfLoopCount++):(en.directedSelfLoops++,ge._directedSelfLoopCount++):z?(en.undirectedDegree++,yn.undirectedDegree++):(en.outDegree++,yn.inDegree++),_e(ge,z,Tt,be,Be,en,yn),z?ge._undirectedSize++:ge._directedSize++,Dr.key=ee,ge.emit("edgeAdded",Dr),ee}var ge,Mi=function(ge){function De(z){var ee;if(ee=ge.call(this)||this,(z=y({},tu,z)).edgeKeyGenerator&&"function"!=typeof z.edgeKeyGenerator)throw new ke("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(z.edgeKeyGenerator,'".'));if("boolean"!=typeof z.multi)throw new ke("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(z.multi,'".'));if(!ph.has(z.type))throw new ke('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(z.type,'".'));if("boolean"!=typeof z.allowSelfLoops)throw new ke("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(z.allowSelfLoops,'".'));var be,Be="mixed"===z.type?Ee:"directed"===z.type?Ke:at;return oe(_(ee),"NodeDataClass",Be),oe(_(ee),"_attributes",{}),oe(_(ee),"_nodes",new Map),oe(_(ee),"_edges",new Map),oe(_(ee),"_directedSize",0),oe(_(ee),"_undirectedSize",0),oe(_(ee),"_directedSelfLoopCount",0),oe(_(ee),"_undirectedSelfLoopCount",0),oe(_(ee),"_edgeKeyGenerator",z.edgeKeyGenerator||(be=0,function(){return be++})),oe(_(ee),"_options",z),Hc.forEach(function(Xe){return oe(_(ee),Xe,ee[Xe])}),M(_(ee),"order",function(){return ee._nodes.size}),M(_(ee),"size",function(){return ee._edges.size}),M(_(ee),"directedSize",function(){return ee._directedSize}),M(_(ee),"undirectedSize",function(){return ee._undirectedSize}),M(_(ee),"selfLoopCount",function(){return ee._directedSelfLoopCount+ee._undirectedSelfLoopCount}),M(_(ee),"directedSelfLoopCount",function(){return ee._directedSelfLoopCount}),M(_(ee),"undirectedSelfLoopCount",function(){return ee._undirectedSelfLoopCount}),M(_(ee),"multi",ee._options.multi),M(_(ee),"type",ee._options.type),M(_(ee),"allowSelfLoops",ee._options.allowSelfLoops),M(_(ee),"implementation",function(){return"graphology"}),ee}g(De,ge);var ye=De.prototype;return ye.hasNode=function(z){return this._nodes.has(""+z)},ye.hasDirectedEdge=function(z,ee){if("undirected"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+z);return!!Be&&!Be.undirected}if(2===arguments.length){ee=""+ee;var Xe=this._nodes.get(z=""+z);if(!Xe)return!1;var rt=Xe.out[ee];return!(!rt||this.multi&&!rt.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ye.hasUndirectedEdge=function(z,ee){if("directed"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+z);return!!Be&&Be.undirected}if(2===arguments.length){ee=""+ee;var Xe=this._nodes.get(z=""+z);if(!Xe)return!1;var rt=Xe.undirected[ee];return!(!rt||this.multi&&!rt.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ye.hasEdge=function(z,ee){if(1===arguments.length)return this._edges.has(""+z);if(2===arguments.length){ee=""+ee;var Be=this._nodes.get(z=""+z);if(!Be)return!1;var Xe=void 0!==Be.out&&Be.out[ee];return Xe||(Xe=void 0!==Be.undirected&&Be.undirected[ee]),!(!Xe||this.multi&&!Xe.size)}throw new ke("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ye.directedEdge=function(z,ee){if("undirected"!==this.type){if(z=""+z,ee=""+ee,this.multi)throw new me("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var be=this._nodes.get(z);if(!be)throw new Ve('Graph.directedEdge: could not find the "'.concat(z,'" source node in the graph.'));if(!this._nodes.has(ee))throw new Ve('Graph.directedEdge: could not find the "'.concat(ee,'" target node in the graph.'));var Be=be.out&&be.out[ee]||void 0;return Be?Be.key:void 0}},ye.undirectedEdge=function(z,ee){if("directed"!==this.type){if(z=""+z,ee=""+ee,this.multi)throw new me("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var be=this._nodes.get(z);if(!be)throw new Ve('Graph.undirectedEdge: could not find the "'.concat(z,'" source node in the graph.'));if(!this._nodes.has(ee))throw new Ve('Graph.undirectedEdge: could not find the "'.concat(ee,'" target node in the graph.'));var Be=be.undirected&&be.undirected[ee]||void 0;return Be?Be.key:void 0}},ye.edge=function(z,ee){if(this.multi)throw new me("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");ee=""+ee;var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.edge: could not find the "'.concat(z,'" source node in the graph.'));if(!this._nodes.has(ee))throw new Ve('Graph.edge: could not find the "'.concat(ee,'" target node in the graph.'));var Be=be.out&&be.out[ee]||be.undirected&&be.undirected[ee]||void 0;if(Be)return Be.key},ye.inDegree=function(z){var ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ee)throw new ke('Graph.inDegree: Expecting a boolean but got "'.concat(ee,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.inDegree: could not find the "'.concat(z,'" node in the graph.'));return"undirected"===this.type?0:be.inDegree+(ee?be.directedSelfLoops:0)},ye.outDegree=function(z){var ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ee)throw new ke('Graph.outDegree: Expecting a boolean but got "'.concat(ee,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.outDegree: could not find the "'.concat(z,'" node in the graph.'));return"undirected"===this.type?0:be.outDegree+(ee?be.directedSelfLoops:0)},ye.directedDegree=function(z){var ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ee)throw new ke('Graph.directedDegree: Expecting a boolean but got "'.concat(ee,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.directedDegree: could not find the "'.concat(z,'" node in the graph.'));if("undirected"===this.type)return 0;var Be=ee?be.directedSelfLoops:0;return be.inDegree+Be+(be.outDegree+Be)},ye.undirectedDegree=function(z){var ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ee)throw new ke('Graph.undirectedDegree: Expecting a boolean but got "'.concat(ee,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.undirectedDegree: could not find the "'.concat(z,'" node in the graph.'));return"directed"===this.type?0:be.undirectedDegree+2*(ee?be.undirectedSelfLoops:0)},ye.degree=function(z){var ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ee)throw new ke('Graph.degree: Expecting a boolean but got "'.concat(ee,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.degree: could not find the "'.concat(z,'" node in the graph.'));var Be=0,Xe=0;return"directed"!==this.type&&(ee&&(Xe=be.undirectedSelfLoops),Be+=be.undirectedDegree+2*Xe),"undirected"!==this.type&&(ee&&(Xe=be.directedSelfLoops),Be+=be.inDegree+be.outDegree+2*Xe),Be},ye.source=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.source: could not find the "'.concat(z,'" edge in the graph.'));return ee.source.key},ye.target=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.target: could not find the "'.concat(z,'" edge in the graph.'));return ee.target.key},ye.extremities=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.extremities: could not find the "'.concat(z,'" edge in the graph.'));return[ee.source.key,ee.target.key]},ye.opposite=function(z,ee){z=""+z;var be=this._edges.get(ee=""+ee);if(!be)throw new Ve('Graph.opposite: could not find the "'.concat(ee,'" edge in the graph.'));var Be=be.source.key,Xe=be.target.key;if(z!==Be&&z!==Xe)throw new Ve('Graph.opposite: the "'.concat(z,'" node is not attached to the "').concat(ee,'" edge (').concat(Be,", ").concat(Xe,")."));return z===Be?Xe:Be},ye.hasExtremity=function(z,ee){ee=""+ee;var be=this._edges.get(z=""+z);if(!be)throw new Ve('Graph.hasExtremity: could not find the "'.concat(z,'" edge in the graph.'));return be.source.key===ee||be.target.key===ee},ye.isUndirected=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.isUndirected: could not find the "'.concat(z,'" edge in the graph.'));return ee.undirected},ye.isDirected=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.isDirected: could not find the "'.concat(z,'" edge in the graph.'));return!ee.undirected},ye.isSelfLoop=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.isSelfLoop: could not find the "'.concat(z,'" edge in the graph.'));return ee.source===ee.target},ye.hasGeneratedKey=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.hasGeneratedKey: could not find the "'.concat(z,'" edge in the graph.'));return ee.generatedKey},ye.addNode=function(z,ee){return function(be,Be,Xe){if(Xe&&!P(Xe))throw new ke('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Xe,'"'));if(Xe=Xe||{},be._nodes.has(Be=""+Be))throw new me('Graph.addNode: the "'.concat(Be,'" node already exist in the graph.'));var rt=new be.NodeDataClass(Be,Xe);return be._nodes.set(Be,rt),be.emit("nodeAdded",{key:Be,attributes:Xe}),rt}(this,z,ee).key},ye.mergeNode=function(z,ee){if(ee&&!P(ee))throw new ke('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(ee,'"'));ee=ee||{};var be=this._nodes.get(z=""+z);return be?(ee&&(y(be.attributes,ee),this.emit("nodeAttributesUpdated",{type:"merge",key:z,attributes:be.attributes,data:ee})),z):(be=new this.NodeDataClass(z,ee),this._nodes.set(z,be),this.emit("nodeAdded",{key:z,attributes:ee}),z)},ye.updateNode=function(z,ee){if(ee&&"function"!=typeof ee)throw new ke('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(ee,'"'));var be=this._nodes.get(z=""+z);if(be)return ee&&(be.attributes=ee(be.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:z,attributes:be.attributes})),z;var Xe=ee?ee({}):{};return be=new this.NodeDataClass(z,Xe),this._nodes.set(z,be),this.emit("nodeAdded",{key:z,attributes:Xe}),z},ye.dropNode=function(z){var ee=this,be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.dropNode: could not find the "'.concat(z,'" node in the graph.'));this.forEachEdge(z,function(Be){ee.dropEdge(Be)}),this._nodes.delete(z),this.emit("nodeDropped",{key:z,attributes:be.attributes})},ye.dropEdge=function(z){var ee;if(arguments.length>1){var be=""+arguments[0],Be=""+arguments[1];if(!(ee=I(this,be,Be,this.type)))throw new Ve('Graph.dropEdge: could not find the "'.concat(be,'" -> "').concat(Be,'" edge in the graph.'))}else if(!(ee=this._edges.get(z=""+z)))throw new Ve('Graph.dropEdge: could not find the "'.concat(z,'" edge in the graph.'));this._edges.delete(ee.key);var rt=ee.source,wt=ee.target,Tt=ee.attributes,jt=ee.undirected;return rt===wt?jt?(rt.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(rt.directedSelfLoops--,this._directedSelfLoopCount--):jt?(rt.undirectedDegree--,wt.undirectedDegree--):(rt.outDegree--,wt.inDegree--),function G(ge,De,ye){var z=ge.multi,ee=ye.source,be=ye.target,Be=ee.key,Xe=be.key,rt=ee[De?"undirected":"out"],wt=De?"undirected":"in";if(Xe in rt)if(z){var Tt=rt[Xe];1===Tt.size?(delete rt[Xe],delete be[wt][Be]):Tt.delete(ye)}else delete rt[Xe];z||delete be[wt][Be]}(this,jt,ee),jt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:z,attributes:Tt,source:rt.key,target:wt.key,undirected:jt}),this},ye.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ye.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ye.getAttribute=function(z){return this._attributes[z]},ye.getAttributes=function(){return this._attributes},ye.hasAttribute=function(z){return this._attributes.hasOwnProperty(z)},ye.setAttribute=function(z,ee){return this._attributes[z]=ee,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:z}),this},ye.updateAttribute=function(z,ee){if("function"!=typeof ee)throw new ke("Graph.updateAttribute: updater should be a function.");return this._attributes[z]=ee(this._attributes[z]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:z}),this},ye.removeAttribute=function(z){return delete this._attributes[z],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:z}),this},ye.replaceAttributes=function(z){if(!P(z))throw new ke("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=z,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ye.mergeAttributes=function(z){if(!P(z))throw new ke("Graph.mergeAttributes: provided attributes are not a plain object.");return y(this._attributes,z),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:z}),this},ye.getNodeAttribute=function(z,ee){var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.getNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));return be.attributes[ee]},ye.getNodeAttributes=function(z){var ee=this._nodes.get(z=""+z);if(!ee)throw new Ve('Graph.getNodeAttributes: could not find the "'.concat(z,'" node in the graph.'));return ee.attributes},ye.hasNodeAttribute=function(z,ee){var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.hasNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));return be.attributes.hasOwnProperty(ee)},ye.setNodeAttribute=function(z,ee,be){var Be=this._nodes.get(z=""+z);if(!Be)throw new Ve('Graph.setNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Be.attributes[ee]=be,this.emit("nodeAttributesUpdated",{key:z,type:"set",attributes:Be.attributes,name:ee}),this},ye.updateNodeAttribute=function(z,ee,be){var Be=this._nodes.get(z=""+z);if(!Be)throw new Ve('Graph.updateNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof be)throw new ke("Graph.updateAttribute: updater should be a function.");var Xe=Be.attributes,rt=be(Xe[ee]);return Xe[ee]=rt,this.emit("nodeAttributesUpdated",{key:z,type:"set",attributes:Be.attributes,name:ee}),this},ye.removeNodeAttribute=function(z,ee){var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.hasNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));return delete be.attributes[ee],this.emit("nodeAttributesUpdated",{key:z,type:"remove",attributes:be.attributes,name:ee}),this},ye.replaceNodeAttributes=function(z,ee){var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.replaceNodeAttributes: could not find the "'.concat(z,'" node in the graph.'));if(!P(ee))throw new ke("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return be.attributes=ee,this.emit("nodeAttributesUpdated",{key:z,type:"replace",attributes:be.attributes}),this},ye.mergeNodeAttributes=function(z,ee){var be=this._nodes.get(z=""+z);if(!be)throw new Ve('Graph.mergeNodeAttributes: could not find the "'.concat(z,'" node in the graph.'));if(!P(ee))throw new ke("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return y(be.attributes,ee),this.emit("nodeAttributesUpdated",{key:z,type:"merge",attributes:be.attributes,data:ee}),this},ye.updateEachNodeAttributes=function(z,ee){if("function"!=typeof z)throw new ke("Graph.updateEachNodeAttributes: expecting an updater function.");if(ee&&!$(ee))throw new ke("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var be,Be,Xe=this._nodes.values();!0!==(be=Xe.next()).done;)(Be=be.value).attributes=z(Be.key,Be.attributes);this.emit("eachNodeAttributesUpdated",{hints:ee||null})},ye.updateEachEdgeAttributes=function(z,ee){if("function"!=typeof z)throw new ke("Graph.updateEachEdgeAttributes: expecting an updater function.");if(ee&&!$(ee))throw new ke("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var be,Be,Xe=this._edges.values();!0!==(be=Xe.next()).done;)(Be=be.value).attributes=z(Be.key,Be.attributes);this.emit("eachEdgeAttributesUpdated",{hints:ee||null})},ye.forEach=function(z){if("function"!=typeof z)throw new ke("Graph.forEach: expecting a callback.");this.multi?da(!1,this,z):Gl(!1,this,z)},ye.forEachUntil=function(z){if("function"!=typeof z)throw new ke("Graph.forEach: expecting a callback.");this.multi?da(!0,this,z):Gl(!0,this,z)},ye.adjacency=function(){return this.multi?(rt=(z=this)._nodes.values(),wt=z.type,Tt="outer",jt=null,new qe(function en(){var yn;if("outer"===Tt)return!0===(yn=rt.next()).done?yn:(ee=yn.value,Tt="directed",en());if("directed"===Tt)return"undirected"===wt?(Tt="undirected",en()):(Be=ee.out,be=Object.keys(ee.out),Xe=0,Tt="inner-directed",en());if("undirected"===Tt){if("directed"===wt)return Tt="outer",en();Be=ee.undirected,be=Object.keys(ee.undirected),Xe=0,Tt="inner-undirected"}if(!jt&&Xe>=be.length)return Tt="inner-undirected"===Tt?"outer":"undirected",en();if(!jt){var bo=be[Xe++];return jt=Be[bo].values(),en()}if((yn=jt.next()).done)return jt=null,en();var Dr=yn.value,ko=Dr.target;return"inner-undirected"===Tt&&ko.key===ee.key&&(ko=Dr.source),{done:!1,value:[ee.key,ko.key,ee.attributes,ko.attributes,Dr.key,Dr.attributes]}})):($c=(en=this)._nodes.values(),Gs=en.type,Br="outer",new qe(function Po(){var Bi;if("outer"===Br)return!0===(Bi=$c.next()).done?Bi:(yn=Bi.value,Br="directed",Po());if("directed"===Br)return"undirected"===Gs?(Br="undirected",Po()):(Dr=yn.out,bo=Object.keys(yn.out),ko=0,Br="inner-directed",Po());if("undirected"===Br){if("directed"===Gs)return Br="outer",Po();Dr=yn.undirected,bo=Object.keys(yn.undirected),ko=0,Br="inner-undirected"}if(ko>=bo.length)return Br="inner-undirected"===Br?"outer":"undirected",Po();var jr=bo[ko++],ui=Dr[jr],$t=ui.target;return"inner-undirected"===Br&&$t.key===yn.key&&($t=ui.source),{done:!1,value:[yn.key,$t.key,yn.attributes,$t.attributes,ui.key,ui.attributes]}}));var en,yn,bo,Dr,ko,$c,Gs,Br,z,ee,be,Be,Xe,rt,wt,Tt,jt},ye.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):we(this._nodes.keys(),this._nodes.size)},ye.forEachNode=function(z){if("function"!=typeof z)throw new ke("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(ee,be){z(be,ee.attributes)})},ye.forEachNodeUntil=function(z){if("function"!=typeof z)throw new ke("Graph.forEachNode: expecting a callback.");for(var ee,be,Be=this._nodes.values();!0!==(ee=Be.next())&&!z((be=ee.value).key,be.attributes););},ye.nodeEntries=function(){var z=this._nodes.values();return new qe(function(){var ee=z.next();if(ee.done)return ee;var be=ee.value;return{value:[be.key,be.attributes],done:!1}})},ye.exportNode=function(z){var ee=this._nodes.get(z=""+z);if(!ee)throw new Ve('Graph.exportNode: could not find the "'.concat(z,'" node in the graph.'));return nc(z,ee)},ye.exportEdge=function(z){var ee=this._edges.get(z=""+z);if(!ee)throw new Ve('Graph.exportEdge: could not find the "'.concat(z,'" edge in the graph.'));return Wl(z,ee)},ye.export=function(){var z=new Array(this._nodes.size),ee=0;this._nodes.forEach(function(Be,Xe){z[ee++]=nc(Xe,Be)});var be=new Array(this._edges.size);return ee=0,this._edges.forEach(function(Be,Xe){be[ee++]=Wl(Xe,Be)}),{attributes:this.getAttributes(),nodes:z,edges:be,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ye.importNode=function(z){var ee=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=function $l(ge){return P(ge)?"key"in ge?!("attributes"in ge)||P(ge.attributes)&&null!==ge.attributes?null:"invalid-attributes":"no-key":"not-object"}(z);if(be){if("not-object"===be)throw new ke('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===be)throw new ke("Graph.importNode: no key provided.");if("invalid-attributes"===be)throw new ke("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Be=z.key,Xe=z.attributes,rt=void 0===Xe?{}:Xe;return ee?this.mergeNode(Be,rt):this.addNode(Be,rt),this},ye.importEdge=function(z){var ee=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=function zc(ge){return P(ge)?"source"in ge?"target"in ge?!("attributes"in ge)||P(ge.attributes)&&null!==ge.attributes?"undirected"in ge&&"boolean"!=typeof ge.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(z);if(be){if("not-object"===be)throw new ke('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===be)throw new ke("Graph.importEdge: missing souce.");if("no-target"===be)throw new ke("Graph.importEdge: missing target.");if("invalid-attributes"===be)throw new ke("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===be)throw new ke("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Be=z.source,Xe=z.target,rt=z.attributes,wt=void 0===rt?{}:rt,Tt=z.undirected,jt=void 0!==Tt&&Tt;return"key"in z?(ee?jt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:jt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,z.key,Be,Xe,wt):(ee?jt?this.mergeUndirectedEdge:this.mergeDirectedEdge:jt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Be,Xe,wt),this},ye.import=function(z){var ee,be,Be,Xe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function L(ge){return null!==ge&&"object"===J(ge)&&"function"==typeof ge.addUndirectedEdgeWithKey&&"function"==typeof ge.dropNode}(z))return this.import(z.export(),Xe),this;if(!P(z))throw new ke("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(z.attributes){if(!P(z.attributes))throw new ke("Graph.import: invalid attributes. Expecting a plain object.");Xe?this.mergeAttributes(z.attributes):this.replaceAttributes(z.attributes)}if(z.nodes){if(Be=z.nodes,!Array.isArray(Be))throw new ke("Graph.import: invalid nodes. Expecting an array.");for(ee=0,be=Be.length;ee<be;ee++)this.importNode(Be[ee],Xe)}if(z.edges){if(Be=z.edges,!Array.isArray(Be))throw new ke("Graph.import: invalid edges. Expecting an array.");for(ee=0,be=Be.length;ee<be;ee++)this.importEdge(Be[ee],Xe)}return this},ye.nullCopy=function(z){return new De(y({},this._options,z))},ye.emptyCopy=function(z){var ee=this.nullCopy(z);return this._nodes.forEach(function(be,Be){var Xe=y({},be.attributes);be=new ee.NodeDataClass(Be,Xe),ee._nodes.set(Be,be)}),ee},ye.copy=function(){var z=new De(this._options);return z.import(this),z},ye.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(z){return z.upgradeToMixed()}),this._options.type="mixed",M(this,"type",this._options.type),oe(this,"NodeDataClass",Ee)),this},ye.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,M(this,"multi",!0),(z=this)._nodes.forEach(function(ee,be){if(ee.out)for(var Be in ee.out){var Xe=new Set;Xe.add(ee.out[Be]),ee.out[Be]=Xe,z._nodes.get(Be).in[be]=Xe}if(ee.undirected)for(var rt in ee.undirected)if(!(rt>be)){var wt=new Set;wt.add(ee.undirected[rt]),ee.undirected[rt]=wt,z._nodes.get(rt).undirected[be]=wt}})),this;var z},ye.clearIndex=function(){return this._nodes.forEach(function(z){void 0!==z.in&&(z.in={},z.out={}),void 0!==z.undirected&&(z.undirected={})}),this},ye.toJSON=function(){return this.export()},ye.toString=function(){return"[object Graph]"},ye.inspect=function(){var z=this,ee={};this._nodes.forEach(function(wt,Tt){ee[Tt]=wt.attributes});var be={},Be={};this._edges.forEach(function(wt,Tt){var jt=wt.undirected?"--":"->",en="",yn="(".concat(wt.source.key,")").concat(jt,"(").concat(wt.target.key,")");wt.generatedKey?z.multi&&(void 0===Be[yn]?Be[yn]=0:Be[yn]++,en+="".concat(Be[yn],". ")):en+="[".concat(Tt,"]: "),be[en+=yn]=wt.attributes});var Xe={};for(var rt in this)this.hasOwnProperty(rt)&&!Hc.has(rt)&&"function"!=typeof this[rt]&&(Xe[rt]=this[rt]);return Xe.attributes=this._attributes,Xe.nodes=ee,Xe.edges=be,oe(Xe,"constructor",this.constructor),Xe},De}(K.exports.EventEmitter);typeof Symbol<"u"&&(Mi.prototype[Symbol.for("nodejs.util.inspect.custom")]=Mi.prototype.inspect),[{name:function(ge){return"".concat(ge,"Edge")},generateKey:!0},{name:function(ge){return"".concat(ge,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ge){return"".concat(ge,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ge){return"".concat(ge,"EdgeWithKey")}},{name:function(ge){return"".concat(ge,"DirectedEdgeWithKey")},type:"directed"},{name:function(ge){return"".concat(ge,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ge){["add","merge","update"].forEach(function(De){var ye=ge.name(De),z="add"===De?Yl:Li;Mi.prototype[ye]=ge.generateKey?function(ee,be,Be){return z(this,ye,!0,"undirected"===(ge.type||this.type),null,ee,be,Be,"update"===De)}:function(ee,be,Be,Xe){return z(this,ye,!1,"undirected"===(ge.type||this.type),ee,be,Be,Xe,"update"===De)}})}),typeof Symbol<"u"&&(Mi.prototype[Symbol.iterator]=Mi.prototype.adjacency),ge=Mi,R.forEach(function(De){var ye=De.name,z=De.attacher;z(ge,ye("Edge"),"mixed"),z(ge,ye("DirectedEdge"),"directed"),z(ge,ye("UndirectedEdge"),"undirected")}),function(ge){Fe.forEach(function(De){var z,ee,be,Be;be=(z=De).type,Be=z.direction,ge.prototype[ee=z.name]=function(Xe,rt){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return[];if(!arguments.length)return function rn(ge,De){if(0===ge.size)return[];if("mixed"===De||De===ge.type)return"function"==typeof Array.from?Array.from(ge._edges.keys()):we(ge._edges.keys(),ge._edges.size);for(var ye,z,be=new Array("undirected"===De?ge.undirectedSize:ge.directedSize),Be="undirected"===De,Xe=ge._edges.values(),rt=0;!0!==(ye=Xe.next()).done;)(z=ye.value).undirected===Be&&(be[rt++]=z.key);return be}(this,be);if(1===arguments.length){var wt=this._nodes.get(Xe=""+Xe);if(void 0===wt)throw new Ve("Graph.".concat(ee,': could not find the "').concat(Xe,'" node in the graph.'));return function ae(ge,De,ye,z){var ee=[],be=ge?fe:et;return"undirected"!==De&&("out"!==ye&&be(ee,z.in),"in"!==ye&&be(ee,z.out),!ye&&z.directedSelfLoops>0&&ee.splice(ee.lastIndexOf(z.key),1)),"directed"!==De&&be(ee,z.undirected),ee}(this.multi,"mixed"===be?this.type:be,Be,wt)}if(2===arguments.length){rt=""+rt;var Tt=this._nodes.get(Xe=""+Xe);if(!Tt)throw new Ve("Graph.".concat(ee,':  could not find the "').concat(Xe,'" source node in the graph.'));if(!this._nodes.has(rt))throw new Ve("Graph.".concat(ee,':  could not find the "').concat(rt,'" target node in the graph.'));return function Wt(ge,De,ye,z,ee){var be=De?ze:pe,Be=[];return"undirected"!==ge&&(void 0!==z.in&&"out"!==ye&&be(Be,z.in,ee),void 0!==z.out&&"in"!==ye&&be(Be,z.out,ee),!ye&&z.directedSelfLoops>0&&Be.splice(Be.lastIndexOf(z.key),1)),"directed"!==ge&&void 0!==z.undirected&&be(Be,z.undirected,ee),Be}(be,this.multi,Be,Tt,rt)}throw new ke("Graph.".concat(ee,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ye,z){var ee=z.name,be=z.type,Be=z.direction,Xe="forEach"+ee[0].toUpperCase()+ee.slice(1,-1);ye.prototype[Xe]=function(rt,wt,Tt){if("mixed"===be||"mixed"===this.type||be===this.type){if(1===arguments.length)return function Te(ge,De,ye){if(0!==ge.size)for(var z,ee,be="mixed"!==De&&De!==ge.type,Be="undirected"===De,Xe=ge._edges.values();!0!==(z=Xe.next()).done;)if(ee=z.value,!be||ee.undirected===Be){var jt=ee.source,en=ee.target;ye(ee.key,ee.attributes,jt.key,en.key,jt.attributes,en.attributes,ee.undirected,ee.generatedKey)}}(this,be,Tt=rt);if(2===arguments.length){Tt=wt;var jt=this._nodes.get(rt=""+rt);if(void 0===jt)throw new Ve("Graph.".concat(Xe,': could not find the "').concat(rt,'" node in the graph.'));return function We(ge,De,ye,z,ee){var be=ge?X:Q;"undirected"!==De&&("out"!==ye&&be(z.in,ee),"in"!==ye&&be(z.out,ee,ye?null:z.key)),"directed"!==De&&be(z.undirected,ee)}(this.multi,"mixed"===be?this.type:be,Be,jt,Tt)}if(3===arguments.length){wt=""+wt;var en=this._nodes.get(rt=""+rt);if(!en)throw new Ve("Graph.".concat(Xe,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(wt))throw new Ve("Graph.".concat(Xe,':  could not find the "').concat(wt,'" target node in the graph.'));return function an(ge,De,ye,z,ee,be){var Be=De?gt:Ge;"undirected"!==ge&&(void 0!==z.in&&"out"!==ye&&Be(z.in,ee,be),z.key!==ee&&void 0!==z.out&&"in"!==ye&&Be(z.out,ee,be)),"directed"!==ge&&void 0!==z.undirected&&Be(z.undirected,ee,be)}(be,this.multi,Be,en,wt,Tt)}throw new ke("Graph.".concat(Xe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ge,De),function(ye,z){var ee=z.name,be=z.type,Be=z.direction,Xe="forEach"+ee[0].toUpperCase()+ee.slice(1,-1)+"Until";ye.prototype[Xe]=function(rt,wt,Tt){if("mixed"===be||"mixed"===this.type||be===this.type){if(1===arguments.length)return function Z(ge,De,ye){if(0!==ge.size)for(var z,ee,be="mixed"!==De&&De!==ge.type,Be="undirected"===De,Xe=ge._edges.values();!0!==(z=Xe.next()).done;)if(ee=z.value,!be||ee.undirected===Be){var jt=ee.source,en=ee.target;if(ye(ee.key,ee.attributes,jt.key,en.key,jt.attributes,en.attributes,ee.undirected,ee.generatedKey))break}}(this,be,Tt=rt);if(2===arguments.length){Tt=wt;var jt=this._nodes.get(rt=""+rt);if(void 0===jt)throw new Ve("Graph.".concat(Xe,': could not find the "').concat(rt,'" node in the graph.'));return function Ze(ge,De,ye,z,ee){var be=ge?F:A;"undirected"!==De&&("out"!==ye&&be(z.in,ee)||"in"!==ye&&be(z.out,ee,ye?null:z.key))||"directed"===De||be(z.undirected,ee)}(this.multi,"mixed"===be?this.type:be,Be,jt,Tt)}if(3===arguments.length){wt=""+wt;var en=this._nodes.get(rt=""+rt);if(!en)throw new Ve("Graph.".concat(Xe,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(wt))throw new Ve("Graph.".concat(Xe,':  could not find the "').concat(wt,'" target node in the graph.'));return function $n(ge,De,ye,z,ee,be){var Be=De?yt:Pt;"undirected"!==ge&&(void 0!==z.in&&"out"!==ye&&Be(z.in,ee,be)||z.key!==ee&&void 0!==z.out&&"in"!==ye&&Be(z.out,ee,be,ye?null:z.key))||"directed"===ge||void 0===z.undirected||Be(z.undirected,ee,be)}(be,this.multi,Be,en,wt,Tt)}throw new ke("Graph.".concat(Xe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ge,De),function(ye,z){var be=z.type,Be=z.direction,Xe=z.name.slice(0,-1)+"Entries";ye.prototype[Xe]=function(rt,wt){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return qe.empty();if(!arguments.length)return function T(ge,De){if(0===ge.size)return qe.empty();var ye="mixed"!==De&&De!==ge.type,z="undirected"===De,ee=ge._edges.values();return new qe(function(){for(var be,Be;;){if((be=ee.next()).done)return be;if(Be=be.value,!ye||Be.undirected===z)break}return{value:[Be.key,Be.attributes,Be.source.key,Be.target.key,Be.source.attributes,Be.target.attributes],done:!1}})}(this,be);if(1===arguments.length){var Tt=this._nodes.get(rt=""+rt);if(!Tt)throw new Ve("Graph.".concat(Xe,': could not find the "').concat(rt,'" node in the graph.'));return function st(ge,De,ye){var z=qe.empty();return"undirected"!==ge&&("out"!==De&&void 0!==ye.in&&(z=V(z,de(ye.in))),"in"!==De&&void 0!==ye.out&&(z=V(z,de(ye.out,De?null:ye.key)))),"directed"!==ge&&void 0!==ye.undirected&&(z=V(z,de(ye.undirected))),z}(be,Be,Tt)}if(2===arguments.length){wt=""+wt;var jt=this._nodes.get(rt=""+rt);if(!jt)throw new Ve("Graph.".concat(Xe,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(wt))throw new Ve("Graph.".concat(Xe,':  could not find the "').concat(wt,'" target node in the graph.'));return function Sn(ge,De,ye,z){var ee=qe.empty();return"undirected"!==ge&&(void 0!==ye.in&&"out"!==De&&z in ye.in&&(ee=V(ee,Gt(ye.in,z))),void 0!==ye.out&&"in"!==De&&z in ye.out&&(ee=V(ee,Gt(ye.out,z)))),"directed"!==ge&&void 0!==ye.undirected&&z in ye.undirected&&(ee=V(ee,Gt(ye.undirected,z))),ee}(be,Be,jt,wt)}throw new ke("Graph.".concat(Xe,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ge,De)})}(Mi),function(ge){Cn.forEach(function(De){var z,ee,be,Be;be=(z=De).type,Be=z.direction,ge.prototype[ee=z.name]=function(Xe){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return[];if(2===arguments.length){var rt=""+arguments[0],wt=""+arguments[1];if(!this._nodes.has(rt))throw new Ve("Graph.".concat(ee,': could not find the "').concat(rt,'" node in the graph.'));if(!this._nodes.has(wt))throw new Ve("Graph.".concat(ee,': could not find the "').concat(wt,'" node in the graph.'));return function _o(ge,De,ye,z,ee){var be=ge._nodes.get(z);if("undirected"!==De){if("out"!==ye&&void 0!==be.in)for(var Be in be.in)if(Be===ee)return!0;if("in"!==ye&&void 0!==be.out)for(var Xe in be.out)if(Xe===ee)return!0}if("directed"!==De&&void 0!==be.undirected)for(var rt in be.undirected)if(rt===ee)return!0;return!1}(this,be,Be,rt,wt)}if(1===arguments.length){var Tt=this._nodes.get(Xe=""+Xe);if(void 0===Tt)throw new Ve("Graph.".concat(ee,': could not find the "').concat(Xe,'" node in the graph.'));return function ys(ge,De,ye){if("mixed"!==ge){if("undirected"===ge)return Object.keys(ye.undirected);if("string"==typeof De)return Object.keys(ye[De])}var z=new Set;return"undirected"!==ge&&("out"!==De&&Do(z,ye.in),"in"!==De&&Do(z,ye.out)),"directed"!==ge&&Do(z,ye.undirected),we(z.values(),z.size)}("mixed"===be?this.type:be,Be,Tt)}throw new ke("Graph.".concat(ee,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function eu(ge,De){var ye=De.name,z=De.type,ee=De.direction,be="forEach"+ye[0].toUpperCase()+ye.slice(1,-1);ge.prototype[be]=function(Be,Xe){if("mixed"===z||"mixed"===this.type||z===this.type){var rt=this._nodes.get(Be=""+Be);if(void 0===rt)throw new Ve("Graph.".concat(be,': could not find the "').concat(Be,'" node in the graph.'));!function(wt,Tt,jt,en){if("mixed"!==wt){if("undirected"===wt)return Qo(jt,jt.undirected,en);if("string"==typeof Tt)return Qo(jt,jt[Tt],en)}var yn=new Set;"undirected"!==wt&&("out"!==Tt&&Ji(yn,jt,jt.in,en),"in"!==Tt&&Ji(yn,jt,jt.out,en)),"directed"!==wt&&Ji(yn,jt,jt.undirected,en)}("mixed"===z?this.type:z,ee,rt,Xe)}}}(ge,De),function hh(ge,De){var ye=De.name,z=De.type,ee=De.direction,be="forEach"+ye[0].toUpperCase()+ye.slice(1,-1)+"Until";ge.prototype[be]=function(Be,Xe){if("mixed"===z||"mixed"===this.type||z===this.type){var rt=this._nodes.get(Be=""+Be);if(void 0===rt)throw new Ve("Graph.".concat(be,': could not find the "').concat(Be,'" node in the graph.'));!function(wt,Tt,jt,en){if("mixed"!==wt){if("undirected"===wt)return Yr(jt,jt.undirected,en);if("string"==typeof Tt)return Yr(jt,jt[Tt],en)}var yn=new Set;"undirected"!==wt&&("out"!==Tt&&vs(yn,jt,jt.in,en)||"in"!==Tt&&vs(yn,jt,jt.out,en))||"directed"===wt||vs(yn,jt,jt.undirected,en)}("mixed"===z?this.type:z,ee,rt,Xe)}}}(ge,De),function fh(ge,De){var z=De.type,ee=De.direction,be=De.name.slice(0,-1)+"Entries";ge.prototype[be]=function(Be){if("mixed"!==z&&"mixed"!==this.type&&z!==this.type)return qe.empty();var Xe=this._nodes.get(Be=""+Be);if(void 0===Xe)throw new Ve("Graph.".concat(be,': could not find the "').concat(Be,'" node in the graph.'));return function(rt,wt,Tt){if("mixed"!==rt){if("undirected"===rt)return zs(Tt,Tt.undirected);if("string"==typeof wt)return zs(Tt,Tt[wt])}var jt=qe.empty(),en=new Set;return"undirected"!==rt&&("out"!==wt&&(jt=V(jt,Ro(en,Tt,Tt.in))),"in"!==wt&&(jt=V(jt,Ro(en,Tt,Tt.out)))),"directed"!==rt&&(jt=V(jt,Ro(en,Tt,Tt.undirected))),jt}("mixed"===z?this.type:z,ee,Xe)}}(ge,De)})}(Mi);var Wc=function(ge){function De(ye){var z=y({type:"directed"},ye);if("multi"in z&&!1!==z.multi)throw new ke("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==z.type)throw new ke('DirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return ge.call(this,z)||this}return g(De,ge),De}(Mi),Hs=function(ge){function De(ye){var z=y({type:"undirected"},ye);if("multi"in z&&!1!==z.multi)throw new ke("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==z.type)throw new ke('UndirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return ge.call(this,z)||this}return g(De,ge),De}(Mi),Ta=function(ge){function De(ye){var z=y({multi:!0},ye);if("multi"in z&&!0!==z.multi)throw new ke("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ge.call(this,z)||this}return g(De,ge),De}(Mi),ua=function(ge){function De(ye){var z=y({type:"directed",multi:!0},ye);if("multi"in z&&!0!==z.multi)throw new ke("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==z.type)throw new ke('MultiDirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return ge.call(this,z)||this}return g(De,ge),De}(Mi),ic=function(ge){function De(ye){var z=y({type:"undirected",multi:!0},ye);if("multi"in z&&!0!==z.multi)throw new ke("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==z.type)throw new ke('MultiUndirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return ge.call(this,z)||this}return g(De,ge),De}(Mi);function Oo(ge){ge.from=function(De,ye){var z=y({},De.options,ye),ee=new ge(z);return ee.import(De),ee}}return Oo(Mi),Oo(Wc),Oo(Hs),Oo(Ta),Oo(ua),Oo(ic),Mi.Graph=Mi,Mi.DirectedGraph=Wc,Mi.UndirectedGraph=Hs,Mi.MultiGraph=Ta,Mi.MultiDirectedGraph=ua,Mi.MultiUndirectedGraph=ic,Mi.InvalidArgumentsGraphError=ke,Mi.NotFoundGraphError=Ve,Mi.UsageGraphError=me,Mi}()},7271:(te,J,g)=>{var S;!function(b,k,C,N){"use strict";var K,_=["","webkit","Moz","MS","ms","o"],y=k.createElement("div"),I="function",L=Math.round,P=Math.abs,j=Date.now;function oe(Re,je,tt){return setTimeout(U(Re,tt),je)}function M(Re,je,tt){return!!Array.isArray(Re)&&($(Re,tt[je],tt),!0)}function $(Re,je,tt){var dt;if(Re)if(Re.forEach)Re.forEach(je,tt);else if(Re.length!==N)for(dt=0;dt<Re.length;)je.call(tt,Re[dt],dt,Re),dt++;else for(dt in Re)Re.hasOwnProperty(dt)&&je.call(tt,Re[dt],dt,Re)}function ce(Re,je,tt){var dt="DEPRECATED METHOD: "+je+"\n"+tt+" AT \n";return function(){var kt=new Error("get-stack-trace"),Ht=kt&&kt.stack?kt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yn=b.console&&(b.console.warn||b.console.log);return Yn&&Yn.call(b.console,dt,Ht),Re.apply(this,arguments)}}K="function"!=typeof Object.assign?function(je){if(je===N||null===je)throw new TypeError("Cannot convert undefined or null to object");for(var tt=Object(je),dt=1;dt<arguments.length;dt++){var kt=arguments[dt];if(kt!==N&&null!==kt)for(var Ht in kt)kt.hasOwnProperty(Ht)&&(tt[Ht]=kt[Ht])}return tt}:Object.assign;var ie=ce(function(je,tt,dt){for(var kt=Object.keys(tt),Ht=0;Ht<kt.length;)(!dt||dt&&je[kt[Ht]]===N)&&(je[kt[Ht]]=tt[kt[Ht]]),Ht++;return je},"extend","Use `assign`."),ne=ce(function(je,tt){return ie(je,tt,!0)},"merge","Use `assign`.");function q(Re,je,tt){var kt,dt=je.prototype;(kt=Re.prototype=Object.create(dt)).constructor=Re,kt._super=dt,tt&&K(kt,tt)}function U(Re,je){return function(){return Re.apply(je,arguments)}}function x(Re,je){return typeof Re==I?Re.apply(je&&je[0]||N,je):Re}function B(Re,je){return Re===N?je:Re}function O(Re,je,tt){$(le(je),function(dt){Re.addEventListener(dt,tt,!1)})}function ue(Re,je,tt){$(le(je),function(dt){Re.removeEventListener(dt,tt,!1)})}function W(Re,je){for(;Re;){if(Re==je)return!0;Re=Re.parentNode}return!1}function Ce(Re,je){return Re.indexOf(je)>-1}function le(Re){return Re.trim().split(/\s+/g)}function ve(Re,je,tt){if(Re.indexOf&&!tt)return Re.indexOf(je);for(var dt=0;dt<Re.length;){if(tt&&Re[dt][tt]==je||!tt&&Re[dt]===je)return dt;dt++}return-1}function Oe(Re){return Array.prototype.slice.call(Re,0)}function Me(Re,je,tt){for(var dt=[],kt=[],Ht=0;Ht<Re.length;){var Yn=je?Re[Ht][je]:Re[Ht];ve(kt,Yn)<0&&dt.push(Re[Ht]),kt[Ht]=Yn,Ht++}return tt&&(dt=je?dt.sort(function(Mn,cn){return Mn[je]>cn[je]}):dt.sort()),dt}function Je(Re,je){for(var tt,dt,kt=je[0].toUpperCase()+je.slice(1),Ht=0;Ht<_.length;){if((dt=(tt=_[Ht])?tt+kt:je)in Re)return dt;Ht++}return N}var qe=1;function Ne(Re){var je=Re.ownerDocument||Re;return je.defaultView||je.parentWindow||b}var Ve="ontouchstart"in b,me=Je(b,"PointerEvent")!==N,Ee=Ve&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ke="touch",Ye="mouse",G=25,R=1,V=4,Fe=8,et=1,fe=2,Q=4,X=8,A=16,F=fe|Q,de=X|A,pe=F|de,ze=["x","y"],Ge=["clientX","clientY"];function gt(Re,je){var tt=this;this.manager=Re,this.callback=je,this.element=Re.element,this.target=Re.options.inputTarget,this.domHandler=function(dt){x(Re.options.enable,[Re])&&tt.handler(dt)},this.init()}function yt(Re,je,tt){var dt=tt.pointers.length,kt=tt.changedPointers.length,Ht=je&R&&dt-kt==0,Yn=je&(V|Fe)&&dt-kt==0;tt.isFirst=!!Ht,tt.isFinal=!!Yn,Ht&&(Re.session={}),tt.eventType=je,function Gt(Re,je){var tt=Re.session,dt=je.pointers,kt=dt.length;tt.firstInput||(tt.firstInput=Z(je)),kt>1&&!tt.firstMultiple?tt.firstMultiple=Z(je):1===kt&&(tt.firstMultiple=!1);var Ht=tt.firstInput,Yn=tt.firstMultiple,Er=Yn?Yn.center:Ht.center,Mn=je.center=T(dt);je.timeStamp=j(),je.deltaTime=je.timeStamp-Ht.timeStamp,je.angle=st(Er,Mn),je.distance=Ze(Er,Mn),function rn(Re,je){var tt=je.center,dt=Re.offsetDelta||{},kt=Re.prevDelta||{},Ht=Re.prevInput||{};(je.eventType===R||Ht.eventType===V)&&(kt=Re.prevDelta={x:Ht.deltaX||0,y:Ht.deltaY||0},dt=Re.offsetDelta={x:tt.x,y:tt.y}),je.deltaX=kt.x+(tt.x-dt.x),je.deltaY=kt.y+(tt.y-dt.y)}(tt,je),je.offsetDirection=We(je.deltaX,je.deltaY);var cn=ae(je.deltaTime,je.deltaX,je.deltaY);je.overallVelocityX=cn.x,je.overallVelocityY=cn.y,je.overallVelocity=P(cn.x)>P(cn.y)?cn.x:cn.y,je.scale=Yn?function an(Re,je){return Ze(je[0],je[1],Ge)/Ze(Re[0],Re[1],Ge)}(Yn.pointers,dt):1,je.rotation=Yn?function Wt(Re,je){return st(je[1],je[0],Ge)+st(Re[1],Re[0],Ge)}(Yn.pointers,dt):0,je.maxPointers=tt.prevInput?je.pointers.length>tt.prevInput.maxPointers?je.pointers.length:tt.prevInput.maxPointers:je.pointers.length,function Te(Re,je){var kt,Ht,Yn,Er,tt=Re.lastInterval||je,dt=je.timeStamp-tt.timeStamp;if(je.eventType!=Fe&&(dt>G||tt.velocity===N)){var Mn=je.deltaX-tt.deltaX,cn=je.deltaY-tt.deltaY,ts=ae(dt,Mn,cn);Ht=ts.x,Yn=ts.y,kt=P(ts.x)>P(ts.y)?ts.x:ts.y,Er=We(Mn,cn),Re.lastInterval=je}else kt=tt.velocity,Ht=tt.velocityX,Yn=tt.velocityY,Er=tt.direction;je.velocity=kt,je.velocityX=Ht,je.velocityY=Yn,je.direction=Er}(tt,je);var ts=Re.element;W(je.srcEvent.target,ts)&&(ts=je.srcEvent.target),je.target=ts}(Re,tt),Re.emit("hammer.input",tt),Re.recognize(tt),Re.session.prevInput=tt}function Z(Re){for(var je=[],tt=0;tt<Re.pointers.length;)je[tt]={clientX:L(Re.pointers[tt].clientX),clientY:L(Re.pointers[tt].clientY)},tt++;return{timeStamp:j(),pointers:je,center:T(je),deltaX:Re.deltaX,deltaY:Re.deltaY}}function T(Re){var je=Re.length;if(1===je)return{x:L(Re[0].clientX),y:L(Re[0].clientY)};for(var tt=0,dt=0,kt=0;kt<je;)tt+=Re[kt].clientX,dt+=Re[kt].clientY,kt++;return{x:L(tt/je),y:L(dt/je)}}function ae(Re,je,tt){return{x:je/Re||0,y:tt/Re||0}}function We(Re,je){return Re===je?et:P(Re)>=P(je)?Re<0?fe:Q:je<0?X:A}function Ze(Re,je,tt){tt||(tt=ze);var dt=je[tt[0]]-Re[tt[0]],kt=je[tt[1]]-Re[tt[1]];return Math.sqrt(dt*dt+kt*kt)}function st(Re,je,tt){return tt||(tt=ze),180*Math.atan2(je[tt[1]]-Re[tt[1]],je[tt[0]]-Re[tt[0]])/Math.PI}gt.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(Ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ue(this.element,this.evEl,this.domHandler),this.evTarget&&ue(this.target,this.evTarget,this.domHandler),this.evWin&&ue(Ne(this.element),this.evWin,this.domHandler)}};var $n={mousedown:R,mousemove:2,mouseup:V},Sn="mousedown",Cn="mousemove mouseup";function Do(){this.evEl=Sn,this.evWin=Cn,this.pressed=!1,gt.apply(this,arguments)}q(Do,gt,{handler:function(je){var tt=$n[je.type];tt&R&&0===je.button&&(this.pressed=!0),2&tt&&1!==je.which&&(tt=V),this.pressed&&(tt&V&&(this.pressed=!1),this.callback(this.manager,tt,{pointers:[je],changedPointers:[je],pointerType:Ye,srcEvent:je}))}});var ys={pointerdown:R,pointermove:2,pointerup:V,pointercancel:Fe,pointerout:Fe},Qo={2:Ke,3:"pen",4:Ye,5:"kinect"},Ji="pointerdown",Yr="pointermove pointerup pointercancel";function vs(){this.evEl=Ji,this.evWin=Yr,gt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(Ji="MSPointerDown",Yr="MSPointerMove MSPointerUp MSPointerCancel"),q(vs,gt,{handler:function(je){var tt=this.store,dt=!1,kt=je.type.toLowerCase().replace("ms",""),Ht=ys[kt],Yn=Qo[je.pointerType]||je.pointerType,Er=Yn==Ke,Mn=ve(tt,je.pointerId,"pointerId");Ht&R&&(0===je.button||Er)?Mn<0&&(tt.push(je),Mn=tt.length-1):Ht&(V|Fe)&&(dt=!0),!(Mn<0)&&(tt[Mn]=je,this.callback(this.manager,Ht,{pointers:tt,changedPointers:[je],pointerType:Yn,srcEvent:je}),dt&&tt.splice(Mn,1))}});var zs={touchstart:R,touchmove:2,touchend:V,touchcancel:Fe};function eu(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,gt.apply(this,arguments)}function hh(Re,je){var tt=Oe(Re.touches),dt=Oe(Re.changedTouches);return je&(V|Fe)&&(tt=Me(tt.concat(dt),"identifier",!0)),[tt,dt]}q(eu,gt,{handler:function(je){var tt=zs[je.type];if(tt===R&&(this.started=!0),this.started){var dt=hh.call(this,je,tt);tt&(V|Fe)&&dt[0].length-dt[1].length==0&&(this.started=!1),this.callback(this.manager,tt,{pointers:dt[0],changedPointers:dt[1],pointerType:Ke,srcEvent:je})}}});var fh={touchstart:R,touchmove:2,touchend:V,touchcancel:Fe},Gl="touchstart touchmove touchend touchcancel";function da(){this.evTarget=Gl,this.targetIds={},gt.apply(this,arguments)}function nc(Re,je){var tt=Oe(Re.touches),dt=this.targetIds;if(je&(2|R)&&1===tt.length)return dt[tt[0].identifier]=!0,[tt,tt];var kt,Ht,Yn=Oe(Re.changedTouches),Er=[],Mn=this.target;if(Ht=tt.filter(function(cn){return W(cn.target,Mn)}),je===R)for(kt=0;kt<Ht.length;)dt[Ht[kt].identifier]=!0,kt++;for(kt=0;kt<Yn.length;)dt[Yn[kt].identifier]&&Er.push(Yn[kt]),je&(V|Fe)&&delete dt[Yn[kt].identifier],kt++;return Er.length?[Me(Ht.concat(Er),"identifier",!0),Er]:void 0}q(da,gt,{handler:function(je){var tt=fh[je.type],dt=nc.call(this,je,tt);dt&&this.callback(this.manager,tt,{pointers:dt[0],changedPointers:dt[1],pointerType:Ke,srcEvent:je})}});var Wl=2500;function zc(){gt.apply(this,arguments);var Re=U(this.handler,this);this.touch=new da(this.manager,Re),this.mouse=new Do(this.manager,Re),this.primaryTouch=null,this.lastTouches=[]}function ph(Re,je){Re&R?(this.primaryTouch=je.changedPointers[0].identifier,Hc.call(this,je)):Re&(V|Fe)&&Hc.call(this,je)}function Hc(Re){var je=Re.changedPointers[0];if(je.identifier===this.primaryTouch){var tt={x:je.clientX,y:je.clientY};this.lastTouches.push(tt);var dt=this.lastTouches;setTimeout(function(){var Ht=dt.indexOf(tt);Ht>-1&&dt.splice(Ht,1)},Wl)}}function tu(Re){for(var je=Re.srcEvent.clientX,tt=Re.srcEvent.clientY,dt=0;dt<this.lastTouches.length;dt++){var kt=this.lastTouches[dt],Ht=Math.abs(je-kt.x),Yn=Math.abs(tt-kt.y);if(Ht<=25&&Yn<=25)return!0}return!1}q(zc,gt,{handler:function(je,tt,dt){var Ht=dt.pointerType==Ye;if(!(Ht&&dt.sourceCapabilities&&dt.sourceCapabilities.firesTouchEvents)){if(dt.pointerType==Ke)ph.call(this,tt,dt);else if(Ht&&tu.call(this,dt))return;this.callback(je,tt,dt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Gc=Je(y.style,"touchAction"),Yl=Gc!==N,Li="compute",Wc="manipulation",Hs="none",Ta="pan-x",ua="pan-y",ic=function De(){if(!Yl)return!1;var Re={},je=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(tt){Re[tt]=!je||b.CSS.supports("touch-action",tt)}),Re}();function Oo(Re,je){this.manager=Re,this.set(je)}Oo.prototype={set:function(Re){Re==Li&&(Re=this.compute()),Yl&&this.manager.element.style&&ic[Re]&&(this.manager.element.style[Gc]=Re),this.actions=Re.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Re=[];return $(this.manager.recognizers,function(je){x(je.options.enable,[je])&&(Re=Re.concat(je.getTouchAction()))}),function ge(Re){if(Ce(Re,Hs))return Hs;var je=Ce(Re,Ta),tt=Ce(Re,ua);return je&&tt?Hs:je||tt?je?Ta:ua:Ce(Re,Wc)?Wc:"auto"}(Re.join(" "))},preventDefaults:function(Re){var je=Re.srcEvent,tt=Re.offsetDirection;if(!this.manager.session.prevented){var dt=this.actions,kt=Ce(dt,Hs)&&!ic[Hs],Ht=Ce(dt,ua)&&!ic[ua],Yn=Ce(dt,Ta)&&!ic[Ta];if(kt&&1===Re.pointers.length&&Re.distance<2&&Re.deltaTime<250)return;return Yn&&Ht||!(kt||Ht&&tt&F||Yn&&tt&de)?void 0:this.preventSrc(je)}je.preventDefault()},preventSrc:function(Re){this.manager.session.prevented=!0,Re.preventDefault()}};var ye=1;function wt(Re){this.options=K({},this.defaults,Re||{}),this.id=function we(){return qe++}(),this.manager=null,this.options.enable=B(this.options.enable,!0),this.state=ye,this.simultaneous={},this.requireFail=[]}function Tt(Re){return 16&Re?"cancel":8&Re?"end":4&Re?"move":2&Re?"start":""}function jt(Re){return Re==A?"down":Re==X?"up":Re==fe?"left":Re==Q?"right":""}function en(Re,je){var tt=je.manager;return tt?tt.get(Re):Re}function yn(){wt.apply(this,arguments)}function bo(){yn.apply(this,arguments),this.pX=null,this.pY=null}function Dr(){yn.apply(this,arguments)}function ko(){wt.apply(this,arguments),this._timer=null,this._input=null}function $c(){yn.apply(this,arguments)}function Gs(){yn.apply(this,arguments)}function Br(){wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Po(Re,je){return(je=je||{}).recognizers=B(je.recognizers,Po.defaults.preset),new ui(Re,je)}function ui(Re,je){this.options=K({},Po.defaults,je||{}),this.options.inputTarget=this.options.inputTarget||Re,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Re,this.input=function Pt(Re){return new(Re.options.inputClass||(me?vs:Ee?da:Ve?zc:Do))(Re,yt)}(this),this.touchAction=new Oo(this,this.options.touchAction),$t(this,!0),$(this.options.recognizers,function(tt){var dt=this.add(new tt[0](tt[1]));tt[2]&&dt.recognizeWith(tt[2]),tt[3]&&dt.requireFailure(tt[3])},this)}function $t(Re,je){var dt,tt=Re.element;tt.style&&($(Re.options.cssProps,function(kt,Ht){dt=Je(tt.style,Ht),je?(Re.oldCssProps[dt]=tt.style[dt],tt.style[dt]=kt):tt.style[dt]=Re.oldCssProps[dt]||""}),je||(Re.oldCssProps={}))}wt.prototype={defaults:{},set:function(Re){return K(this.options,Re),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Re){if(M(Re,"recognizeWith",this))return this;var je=this.simultaneous;return je[(Re=en(Re,this)).id]||(je[Re.id]=Re,Re.recognizeWith(this)),this},dropRecognizeWith:function(Re){return M(Re,"dropRecognizeWith",this)||(Re=en(Re,this),delete this.simultaneous[Re.id]),this},requireFailure:function(Re){if(M(Re,"requireFailure",this))return this;var je=this.requireFail;return-1===ve(je,Re=en(Re,this))&&(je.push(Re),Re.requireFailure(this)),this},dropRequireFailure:function(Re){if(M(Re,"dropRequireFailure",this))return this;Re=en(Re,this);var je=ve(this.requireFail,Re);return je>-1&&this.requireFail.splice(je,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Re){return!!this.simultaneous[Re.id]},emit:function(Re){var je=this,tt=this.state;function dt(kt){je.manager.emit(kt,Re)}tt<8&&dt(je.options.event+Tt(tt)),dt(je.options.event),Re.additionalEvent&&dt(Re.additionalEvent),tt>=8&&dt(je.options.event+Tt(tt))},tryEmit:function(Re){if(this.canEmit())return this.emit(Re);this.state=32},canEmit:function(){for(var Re=0;Re<this.requireFail.length;){if(!(this.requireFail[Re].state&(32|ye)))return!1;Re++}return!0},recognize:function(Re){var je=K({},Re);if(!x(this.options.enable,[this,je]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ye),this.state=this.process(je),30&this.state&&this.tryEmit(je)},process:function(Re){},getTouchAction:function(){},reset:function(){}},q(yn,wt,{defaults:{pointers:1},attrTest:function(Re){var je=this.options.pointers;return 0===je||Re.pointers.length===je},process:function(Re){var je=this.state,tt=Re.eventType,dt=6&je,kt=this.attrTest(Re);return dt&&(tt&Fe||!kt)?16|je:dt||kt?tt&V?8|je:2&je?4|je:2:32}}),q(bo,yn,{defaults:{event:"pan",threshold:10,pointers:1,direction:pe},getTouchAction:function(){var Re=this.options.direction,je=[];return Re&F&&je.push(ua),Re&de&&je.push(Ta),je},directionTest:function(Re){var je=this.options,tt=!0,dt=Re.distance,kt=Re.direction,Ht=Re.deltaX,Yn=Re.deltaY;return kt&je.direction||(je.direction&F?(kt=0===Ht?et:Ht<0?fe:Q,tt=Ht!=this.pX,dt=Math.abs(Re.deltaX)):(kt=0===Yn?et:Yn<0?X:A,tt=Yn!=this.pY,dt=Math.abs(Re.deltaY))),Re.direction=kt,tt&&dt>je.threshold&&kt&je.direction},attrTest:function(Re){return yn.prototype.attrTest.call(this,Re)&&(2&this.state||!(2&this.state)&&this.directionTest(Re))},emit:function(Re){this.pX=Re.deltaX,this.pY=Re.deltaY;var je=jt(Re.direction);je&&(Re.additionalEvent=this.options.event+je),this._super.emit.call(this,Re)}}),q(Dr,yn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Hs]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.scale-1)>this.options.threshold||2&this.state)},emit:function(Re){1!==Re.scale&&(Re.additionalEvent=this.options.event+(Re.scale<1?"in":"out")),this._super.emit.call(this,Re)}}),q(ko,wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Re){var je=this.options,tt=Re.pointers.length===je.pointers,dt=Re.distance<je.threshold,kt=Re.deltaTime>je.time;if(this._input=Re,!dt||!tt||Re.eventType&(V|Fe)&&!kt)this.reset();else if(Re.eventType&R)this.reset(),this._timer=oe(function(){this.state=8,this.tryEmit()},je.time,this);else if(Re.eventType&V)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Re){8===this.state&&(Re&&Re.eventType&V?this.manager.emit(this.options.event+"up",Re):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),q($c,yn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Hs]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.rotation)>this.options.threshold||2&this.state)}}),q(Gs,yn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:F|de,pointers:1},getTouchAction:function(){return bo.prototype.getTouchAction.call(this)},attrTest:function(Re){var tt,je=this.options.direction;return je&(F|de)?tt=Re.overallVelocity:je&F?tt=Re.overallVelocityX:je&de&&(tt=Re.overallVelocityY),this._super.attrTest.call(this,Re)&&je&Re.offsetDirection&&Re.distance>this.options.threshold&&Re.maxPointers==this.options.pointers&&P(tt)>this.options.velocity&&Re.eventType&V},emit:function(Re){var je=jt(Re.offsetDirection);je&&this.manager.emit(this.options.event+je,Re),this.manager.emit(this.options.event,Re)}}),q(Br,wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Wc]},process:function(Re){var je=this.options,tt=Re.pointers.length===je.pointers,dt=Re.distance<je.threshold,kt=Re.deltaTime<je.time;if(this.reset(),Re.eventType&R&&0===this.count)return this.failTimeout();if(dt&&kt&&tt){if(Re.eventType!=V)return this.failTimeout();var Ht=!this.pTime||Re.timeStamp-this.pTime<je.interval,Yn=!this.pCenter||Ze(this.pCenter,Re.center)<je.posThreshold;if(this.pTime=Re.timeStamp,this.pCenter=Re.center,Yn&&Ht?this.count+=1:this.count=1,this._input=Re,0==this.count%je.taps)return this.hasRequireFailures()?(this._timer=oe(function(){this.state=8,this.tryEmit()},je.interval,this),2):8}return 32},failTimeout:function(){return this._timer=oe(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Po.VERSION="2.0.7",Po.defaults={domEvents:!1,touchAction:Li,enable:!0,inputTarget:null,inputClass:null,preset:[[$c,{enable:!1}],[Dr,{enable:!1},["rotate"]],[Gs,{direction:F}],[bo,{direction:F},["swipe"]],[Br],[Br,{event:"doubletap",taps:2},["tap"]],[ko]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ui.prototype={set:function(Re){return K(this.options,Re),Re.touchAction&&this.touchAction.update(),Re.inputTarget&&(this.input.destroy(),this.input.target=Re.inputTarget,this.input.init()),this},stop:function(Re){this.session.stopped=Re?2:1},recognize:function(Re){var je=this.session;if(!je.stopped){this.touchAction.preventDefaults(Re);var tt,dt=this.recognizers,kt=je.curRecognizer;(!kt||kt&&8&kt.state)&&(kt=je.curRecognizer=null);for(var Ht=0;Ht<dt.length;)tt=dt[Ht],2===je.stopped||kt&&tt!=kt&&!tt.canRecognizeWith(kt)?tt.reset():tt.recognize(Re),!kt&&14&tt.state&&(kt=je.curRecognizer=tt),Ht++}},get:function(Re){if(Re instanceof wt)return Re;for(var je=this.recognizers,tt=0;tt<je.length;tt++)if(je[tt].options.event==Re)return je[tt];return null},add:function(Re){if(M(Re,"add",this))return this;var je=this.get(Re.options.event);return je&&this.remove(je),this.recognizers.push(Re),Re.manager=this,this.touchAction.update(),Re},remove:function(Re){if(M(Re,"remove",this))return this;if(Re=this.get(Re)){var je=this.recognizers,tt=ve(je,Re);-1!==tt&&(je.splice(tt,1),this.touchAction.update())}return this},on:function(Re,je){if(Re!==N&&je!==N){var tt=this.handlers;return $(le(Re),function(dt){tt[dt]=tt[dt]||[],tt[dt].push(je)}),this}},off:function(Re,je){if(Re!==N){var tt=this.handlers;return $(le(Re),function(dt){je?tt[dt]&&tt[dt].splice(ve(tt[dt],je),1):delete tt[dt]}),this}},emit:function(Re,je){this.options.domEvents&&function es(Re,je){var tt=k.createEvent("Event");tt.initEvent(Re,!0,!0),tt.gesture=je,je.target.dispatchEvent(tt)}(Re,je);var tt=this.handlers[Re]&&this.handlers[Re].slice();if(tt&&tt.length){je.type=Re,je.preventDefault=function(){je.srcEvent.preventDefault()};for(var dt=0;dt<tt.length;)tt[dt](je),dt++}},destroy:function(){this.element&&$t(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},K(Po,{INPUT_START:R,INPUT_MOVE:2,INPUT_END:V,INPUT_CANCEL:Fe,STATE_POSSIBLE:ye,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:et,DIRECTION_LEFT:fe,DIRECTION_RIGHT:Q,DIRECTION_UP:X,DIRECTION_DOWN:A,DIRECTION_HORIZONTAL:F,DIRECTION_VERTICAL:de,DIRECTION_ALL:pe,Manager:ui,Input:gt,TouchAction:Oo,TouchInput:da,MouseInput:Do,PointerEventInput:vs,TouchMouseInput:zc,SingleTouchInput:eu,Recognizer:wt,AttrRecognizer:yn,Tap:Br,Pan:bo,Swipe:Gs,Pinch:Dr,Rotate:$c,Press:ko,on:O,off:ue,each:$,merge:ne,extend:ie,assign:K,inherit:q,bindFn:U,prefixed:Je}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=Po,(S=function(){return Po}.call(J,g,J,te))!==N&&(te.exports=S)}(window,document)},2601:(te,J)=>{J.read=function(g,S,b,k,C){var N,_,y=8*C-k-1,I=(1<<y)-1,L=I>>1,P=-7,j=b?C-1:0,oe=b?-1:1,M=g[S+j];for(j+=oe,N=M&(1<<-P)-1,M>>=-P,P+=y;P>0;N=256*N+g[S+j],j+=oe,P-=8);for(_=N&(1<<-P)-1,N>>=-P,P+=k;P>0;_=256*_+g[S+j],j+=oe,P-=8);if(0===N)N=1-L;else{if(N===I)return _?NaN:1/0*(M?-1:1);_+=Math.pow(2,k),N-=L}return(M?-1:1)*_*Math.pow(2,N-k)},J.write=function(g,S,b,k,C,N){var _,y,I,L=8*N-C-1,P=(1<<L)-1,j=P>>1,oe=23===C?Math.pow(2,-24)-Math.pow(2,-77):0,M=k?0:N-1,$=k?1:-1,ce=S<0||0===S&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(y=isNaN(S)?1:0,_=P):(_=Math.floor(Math.log(S)/Math.LN2),S*(I=Math.pow(2,-_))<1&&(_--,I*=2),(S+=_+j>=1?oe/I:oe*Math.pow(2,1-j))*I>=2&&(_++,I/=2),_+j>=P?(y=0,_=P):_+j>=1?(y=(S*I-1)*Math.pow(2,C),_+=j):(y=S*Math.pow(2,j-1)*Math.pow(2,C),_=0));C>=8;g[b+M]=255&y,M+=$,y/=256,C-=8);for(_=_<<C|y,L+=C;L>0;g[b+M]=255&_,M+=$,_/=256,L-=8);g[b+M-$]|=128*ce}},6698:te=>{te.exports="function"==typeof Object.create?function(g,S){S&&(g.super_=S,g.prototype=Object.create(S.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,S){if(S){g.super_=S;var b=function(){};b.prototype=S.prototype,g.prototype=new b,g.prototype.constructor=g}}},4198:(te,J,g)=>{"use strict";var S=g(7156).default;const{isArray:b,isObject:k,isString:C}=g(8254),{asArray:N}=g(3521),{prependBase:_}=g(2651),y=g(1874),I=g(1252);function P(oe){throw new y("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:oe})}function j({context:oe,base:M}){if(!oe)return;const $=oe["@context"];if(C($))oe["@context"]=_(M,$);else if(b($))for(let ce=0;ce<$.length;++ce){const K=$[ce];C(K)?$[ce]=_(M,K):k(K)&&j({context:{"@context":K},base:M})}else if(k($))for(const ce in $)j({context:$[ce],base:M})}te.exports=class{constructor({sharedCache:M}){this.perOpCache=new Map,this.sharedCache=M}resolve({activeCtx:M,context:$,documentLoader:ce,base:K,cycles:ie=new Set}){var ne=this;return S(function*(){$&&k($)&&$["@context"]&&($=$["@context"]),$=N($);const q=[];for(const U of $){if(C(U)){let O=ne._get(U);O||(O=yield ne._resolveRemoteContext({activeCtx:M,url:U,documentLoader:ce,base:K,cycles:ie})),b(O)?q.push(...O):q.push(O);continue}if(null===U){q.push(new I({document:null}));continue}k(U)||P($);const x=JSON.stringify(U);let B=ne._get(x);B||(B=new I({document:U}),ne._cacheResolvedContext({key:x,resolved:B,tag:"static"})),q.push(B)}return q})()}_get(M){let $=this.perOpCache.get(M);if(!$){const ce=this.sharedCache.get(M);ce&&($=ce.get("static"),$&&this.perOpCache.set(M,$))}return $}_cacheResolvedContext({key:M,resolved:$,tag:ce}){if(this.perOpCache.set(M,$),void 0!==ce){let K=this.sharedCache.get(M);K||(K=new Map,this.sharedCache.set(M,K)),K.set(ce,$)}return $}_resolveRemoteContext({activeCtx:M,url:$,documentLoader:ce,base:K,cycles:ie}){var ne=this;return S(function*(){$=_(K,$);const{context:q,remoteDoc:U}=yield ne._fetchContext({activeCtx:M,url:$,documentLoader:ce,cycles:ie});j({context:q,base:K=U.documentUrl||$});const x=yield ne.resolve({activeCtx:M,context:q,documentLoader:ce,base:K,cycles:ie});return ne._cacheResolvedContext({key:$,resolved:x,tag:U.tag}),x})()}_fetchContext({activeCtx:M,url:$,documentLoader:ce,cycles:K}){return S(function*(){if(K.size>10)throw new y("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===M.processingMode?"loading remote context failed":"context overflow",max:10});if(K.has($))throw new y("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===M.processingMode?"recursive context inclusion":"context overflow",url:$});let ie,ne;K.add($);try{ne=yield ce($),ie=ne.document||null,C(ie)&&(ie=JSON.parse(ie))}catch(q){throw new y("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:$,cause:q})}if(!k(ie))throw new y("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:$});return ie="@context"in ie?{"@context":ie["@context"]}:{"@context":{}},ne.contextUrl&&(b(ie["@context"])||(ie["@context"]=[ie["@context"]]),ie["@context"].push(ne.contextUrl)),{context:ie,remoteDoc:ne}})()}}},1874:te=>{"use strict";te.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",S="jsonld.Error",b={}){super(g),this.name=S,this.message=g,this.details=b}}},1828:te=>{"use strict";te.exports=J=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(S,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):J.compact(S,b)},g.expand=function(S){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):J.expand(S)},g.flatten=function(S){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):J.flatten(S)},g}},7260:(te,J,g)=>{"use strict";te.exports=g(1986).NQuads},4044:(te,J,g)=>{"use strict";var S=g(7156).default;te.exports=class{constructor(){this._requests={}}wrapLoader(k){const C=this;return C._loader=k,function(){return C.add.apply(C,arguments)}}add(k){var C=this;return S(function*(){let N=C._requests[k];if(N)return Promise.resolve(N);N=C._requests[k]=C._loader(k);try{return yield N}finally{delete C._requests[k]}})()}}},1252:(te,J,g)=>{"use strict";const S=g(1072);te.exports=class{constructor({document:C}){this.document=C,this.cache=new S({max:10})}getProcessed(C){return this.cache.get(C)}setProcessed(C,N){this.cache.set(C,N)}}},8809:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(1874),{isArray:k,isObject:C,isString:N,isUndefined:_}=g(8254),{isList:y,isValue:I,isGraph:L,isSimpleGraph:P,isSubjectReference:j}=g(543),{expandIri:oe,getContextValue:M,isKeyword:$,process:ce,processingMode:K}=g(9611),{removeBase:ie,prependBase:ne}=g(2651),{REGEX_KEYWORD:q,addValue:U,asArray:x,compareShortestLeast:B}=g(3521),O={};function W(Ce,le,ve){if("@nest"!==oe(Ce,le,{vocab:!0},ve))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}te.exports=O,O.compact=function(){var Ce=S(function*({activeCtx:le,activeProperty:ve=null,element:Oe,options:Me={}}){if(k(Oe)){let qe=[];for(let we=0;we<Oe.length;++we){const Ne=yield O.compact({activeCtx:le,activeProperty:ve,element:Oe[we],options:Me});null!==Ne&&qe.push(Ne)}return Me.compactArrays&&1===qe.length&&0===(M(le,ve,"@container")||[]).length&&(qe=qe[0]),qe}const Je=M(le,ve,"@context");if(_(Je)||(le=yield ce({activeCtx:le,localCtx:Je,propagate:!0,overrideProtected:!0,options:Me})),C(Oe)){if(Me.link&&"@id"in Oe&&Me.link.hasOwnProperty(Oe["@id"])){const Ke=Me.link[Oe["@id"]];for(let at=0;at<Ke.length;++at)if(Ke[at].expanded===Oe)return Ke[at].compacted}if(I(Oe)||j(Oe)){const Ke=O.compactValue({activeCtx:le,activeProperty:ve,value:Oe,options:Me});return Me.link&&j(Oe)&&(Me.link.hasOwnProperty(Oe["@id"])||(Me.link[Oe["@id"]]=[]),Me.link[Oe["@id"]].push({expanded:Oe,compacted:Ke})),Ke}if(y(Oe)&&(M(le,ve,"@container")||[]).includes("@list"))return O.compact({activeCtx:le,activeProperty:ve,element:Oe["@list"],options:Me});const qe="@reverse"===ve,we={},Ne=le;!I(Oe)&&!j(Oe)&&(le=le.revertToPreviousContext());const ke=M(Ne,ve,"@context");_(ke)||(le=yield ce({activeCtx:le,localCtx:ke,propagate:!0,overrideProtected:!0,options:Me})),Me.link&&"@id"in Oe&&(Me.link.hasOwnProperty(Oe["@id"])||(Me.link[Oe["@id"]]=[]),Me.link[Oe["@id"]].push({expanded:Oe,compacted:we}));let Ve=Oe["@type"]||[];Ve.length>1&&(Ve=Array.from(Ve).sort());const me=le;for(const Ke of Ve){const at=O.compactIri({activeCtx:me,iri:Ke,relativeTo:{vocab:!0}}),Ye=M(Ne,at,"@context");_(Ye)||(le=yield ce({activeCtx:le,localCtx:Ye,options:Me,propagate:!1}))}const Ee=Object.keys(Oe).sort();for(const Ke of Ee){const at=Oe[Ke];if("@id"!==Ke)if("@type"!==Ke)if("@reverse"!==Ke)if("@preserve"!==Ke)if("@index"!==Ke)if("@graph"!==Ke&&"@list"!==Ke&&"@included"!==Ke&&$(Ke)){const Ye=O.compactIri({activeCtx:le,iri:Ke,relativeTo:{vocab:!0}});U(we,Ye,at)}else{if(!k(at))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===at.length){const Ye=O.compactIri({activeCtx:le,iri:Ke,value:at,relativeTo:{vocab:!0},reverse:qe}),_e=le.mappings.has(Ye)?le.mappings.get(Ye)["@nest"]:null;let G=we;_e&&(W(le,_e,Me),C(we[_e])||(we[_e]={}),G=we[_e]),U(G,Ye,at,{propertyIsArray:!0})}for(const Ye of at){const _e=O.compactIri({activeCtx:le,iri:Ke,value:Ye,relativeTo:{vocab:!0},reverse:qe}),G=le.mappings.has(_e)?le.mappings.get(_e)["@nest"]:null;let R=we;G&&(W(le,G,Me),C(we[G])||(we[G]={}),R=we[G]);const se=M(le,_e,"@container")||[],V=L(Ye),Fe=y(Ye);let et;Fe?et=Ye["@list"]:V&&(et=Ye["@graph"]);let fe=yield O.compact({activeCtx:le,activeProperty:_e,element:Fe||V?et:Ye,options:Me});if(Fe){if(k(fe)||(fe=[fe]),se.includes("@list")){U(R,_e,fe,{valueIsArray:!0,allowDuplicate:!0});continue}fe={[O.compactIri({activeCtx:le,iri:"@list",relativeTo:{vocab:!0}})]:fe},"@index"in Ye&&(fe[O.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=Ye["@index"])}if(V)if(se.includes("@graph")&&(se.includes("@id")||se.includes("@index")&&P(Ye))){let Q;R.hasOwnProperty(_e)?Q=R[_e]:R[_e]=Q={};const X=(se.includes("@id")?Ye["@id"]:Ye["@index"])||O.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}});U(Q,X,fe,{propertyIsArray:!Me.compactArrays||se.includes("@set")})}else se.includes("@graph")&&P(Ye)?(k(fe)&&fe.length>1&&(fe={"@included":fe}),U(R,_e,fe,{propertyIsArray:!Me.compactArrays||se.includes("@set")})):(k(fe)&&1===fe.length&&Me.compactArrays&&(fe=fe[0]),fe={[O.compactIri({activeCtx:le,iri:"@graph",relativeTo:{vocab:!0}})]:fe},"@id"in Ye&&(fe[O.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=Ye["@id"]),"@index"in Ye&&(fe[O.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=Ye["@index"]),U(R,_e,fe,{propertyIsArray:!Me.compactArrays||se.includes("@set")}));else if(se.includes("@language")||se.includes("@index")||se.includes("@id")||se.includes("@type")){let Q,X;if(R.hasOwnProperty(_e)?Q=R[_e]:R[_e]=Q={},se.includes("@language"))I(fe)&&(fe=fe["@value"]),X=Ye["@language"];else if(se.includes("@index")){const A=M(le,_e,"@index")||"@index",F=O.compactIri({activeCtx:le,iri:A,relativeTo:{vocab:!0}});if("@index"===A)X=Ye["@index"],delete fe[F];else{let de;if([X,...de]=x(fe[A]||[]),N(X))switch(de.length){case 0:delete fe[A];break;case 1:fe[A]=de[0];break;default:fe[A]=de}else X=null}}else if(se.includes("@id")){const A=O.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}});X=fe[A],delete fe[A]}else if(se.includes("@type")){const A=O.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}});let F;switch([X,...F]=x(fe[A]||[]),F.length){case 0:delete fe[A];break;case 1:fe[A]=F[0];break;default:fe[A]=F}1===Object.keys(fe).length&&"@id"in Ye&&(fe=yield O.compact({activeCtx:le,activeProperty:_e,element:{"@id":Ye["@id"]},options:Me}))}X||(X=O.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}})),U(Q,X,fe,{propertyIsArray:se.includes("@set")})}else{const Q=!Me.compactArrays||se.includes("@set")||se.includes("@list")||k(fe)&&0===fe.length||"@list"===Ke||"@graph"===Ke;U(R,_e,fe,{propertyIsArray:Q})}}}else{if((M(le,ve,"@container")||[]).includes("@index"))continue;const _e=O.compactIri({activeCtx:le,iri:Ke,relativeTo:{vocab:!0}});U(we,_e,at)}else{const Ye=yield O.compact({activeCtx:le,activeProperty:ve,element:at,options:Me});k(Ye)&&0===Ye.length||U(we,Ke,Ye)}else{const Ye=yield O.compact({activeCtx:le,activeProperty:"@reverse",element:at,options:Me});for(const _e in Ye)if(le.mappings.has(_e)&&le.mappings.get(_e).reverse){const G=Ye[_e],se=(M(le,_e,"@container")||[]).includes("@set")||!Me.compactArrays;U(we,_e,G,{propertyIsArray:se}),delete Ye[_e]}if(Object.keys(Ye).length>0){const _e=O.compactIri({activeCtx:le,iri:Ke,relativeTo:{vocab:!0}});U(we,_e,Ye)}}else{let Ye=x(at).map(V=>O.compactIri({activeCtx:Ne,iri:V,relativeTo:{vocab:!0}}));1===Ye.length&&(Ye=Ye[0]);const _e=O.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}}),se=(M(le,_e,"@container")||[]).includes("@set")&&K(le,1.1)||k(Ye)&&0===at.length;U(we,_e,Ye,{propertyIsArray:se})}else{let Ye=x(at).map(G=>O.compactIri({activeCtx:le,iri:G,relativeTo:{vocab:!1},base:Me.base}));1===Ye.length&&(Ye=Ye[0]),we[O.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=Ye}}return we}return Oe});return function(le){return Ce.apply(this,arguments)}}(),O.compactIri=({activeCtx:Ce,iri:le,value:ve=null,relativeTo:Oe={vocab:!1},reverse:Me=!1,base:Je=null})=>{if(null===le)return le;Ce.isPropertyTermScoped&&Ce.previousContext&&(Ce=Ce.previousContext);const qe=Ce.getInverse();if($(le)&&le in qe&&"@none"in qe[le]&&"@type"in qe[le]["@none"]&&"@none"in qe[le]["@none"]["@type"])return qe[le]["@none"]["@type"]["@none"];if(Oe.vocab&&le in qe){const me=Ce["@language"]||"@none",Ee=[];C(ve)&&"@index"in ve&&!("@graph"in ve)&&Ee.push("@index","@index@set"),C(ve)&&"@preserve"in ve&&(ve=ve["@preserve"][0]),L(ve)?("@index"in ve&&Ee.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ve&&Ee.push("@graph@id","@graph@id@set"),Ee.push("@graph","@graph@set","@set"),"@index"in ve||Ee.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ve||Ee.push("@graph@id","@graph@id@set")):C(ve)&&!I(ve)&&Ee.push("@id","@id@set","@type","@set@type");let Ke="@language",at="@null";if(Me)Ke="@type",at="@reverse",Ee.push("@set");else if(y(ve)){"@index"in ve||Ee.push("@list");const _e=ve["@list"];if(0===_e.length)Ke="@any",at="@none";else{let G=0===_e.length?me:null,R=null;for(let se=0;se<_e.length;++se){const V=_e[se];let Fe="@none",et="@none";if(I(V)?"@direction"in V?Fe=`${(V["@language"]||"").toLowerCase()}_${V["@direction"]}`:"@language"in V?Fe=V["@language"].toLowerCase():"@type"in V?et=V["@type"]:Fe="@null":et="@id",null===G?G=Fe:Fe!==G&&I(V)&&(G="@none"),null===R?R=et:et!==R&&(R="@none"),"@none"===G&&"@none"===R)break}G=G||"@none",R=R||"@none","@none"!==R?(Ke="@type",at=R):at=G}}else{if(I(ve))if("@language"in ve&&!("@index"in ve)){Ee.push("@language","@language@set"),at=ve["@language"];const _e=ve["@direction"];_e&&(at=`${at}_${_e}`)}else"@direction"in ve&&!("@index"in ve)?at=`_${ve["@direction"]}`:"@type"in ve&&(Ke="@type",at=ve["@type"]);else Ke="@type",at="@id";Ee.push("@set")}Ee.push("@none"),C(ve)&&!("@index"in ve)&&Ee.push("@index","@index@set"),I(ve)&&1===Object.keys(ve).length&&Ee.push("@language","@language@set");const Ye=function ue(Ce,le,ve,Oe,Me,Je){null===Je&&(Je="@null");const qe=[];if(("@id"===Je||"@reverse"===Je)&&C(ve)&&"@id"in ve){"@reverse"===Je&&qe.push("@reverse");const Ne=O.compactIri({activeCtx:Ce,iri:ve["@id"],relativeTo:{vocab:!0}});Ce.mappings.has(Ne)&&Ce.mappings.get(Ne)&&Ce.mappings.get(Ne)["@id"]===ve["@id"]?qe.push.apply(qe,["@vocab","@id"]):qe.push.apply(qe,["@id","@vocab"])}else{qe.push(Je);const Ne=qe.find(ke=>ke.includes("_"));Ne&&qe.push(Ne.replace(/^[^_]+_/,"_"))}qe.push("@none");const we=Ce.inverse[le];for(const Ne of Oe){if(!(Ne in we))continue;const ke=we[Ne][Me];for(const Ve of qe)if(Ve in ke)return ke[Ve]}return null}(Ce,le,ve,Ee,Ke,at);if(null!==Ye)return Ye}if(Oe.vocab&&"@vocab"in Ce){const me=Ce["@vocab"];if(0===le.indexOf(me)&&le!==me){const Ee=le.substr(me.length);if(!Ce.mappings.has(Ee))return Ee}}let we=null;const Ne=[];let ke=Ce.fastCurieMap;const Ve=le.length-1;for(let me=0;me<Ve&&le[me]in ke;++me)ke=ke[le[me]],""in ke&&Ne.push(ke[""][0]);for(let me=Ne.length-1;me>=0;--me){const Ee=Ne[me],Ke=Ee.terms;for(const at of Ke){const Ye=at+":"+le.substr(Ee.iri.length);Ce.mappings.get(at)._prefix&&(!Ce.mappings.has(Ye)||null===ve&&Ce.mappings.get(Ye)["@id"]===le)&&(null===we||B(Ye,we)<0)&&(we=Ye)}}if(null!==we)return we;for(const[me,Ee]of Ce.mappings)if(Ee&&Ee._prefix&&le.startsWith(me+":"))throw new b(`Absolute IRI "${le}" confused with prefix "${me}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Ce});if(!Oe.vocab){if("@base"in Ce){if(Ce["@base"]){const me=ie(ne(Je,Ce["@base"]),le);return q.test(me)?`./${me}`:me}return le}return ie(Je,le)}return le},O.compactValue=({activeCtx:Ce,activeProperty:le,value:ve,options:Oe})=>{if(I(ve)){const we=M(Ce,le,"@type"),Ne=M(Ce,le,"@language"),ke=M(Ce,le,"@direction"),Ve=M(Ce,le,"@container")||[],me="@index"in ve&&!Ve.includes("@index");if(!me&&"@none"!==we&&(ve["@type"]===we||"@language"in ve&&ve["@language"]===Ne&&"@direction"in ve&&ve["@direction"]===ke||"@language"in ve&&ve["@language"]===Ne||"@direction"in ve&&ve["@direction"]===ke))return ve["@value"];const Ee=Object.keys(ve).length,Ke=1===Ee||2===Ee&&"@index"in ve&&!me,at="@language"in Ce,Ye=N(ve["@value"]),_e=Ce.mappings.has(le)&&null===Ce.mappings.get(le)["@language"];if(Ke&&"@none"!==we&&(!at||!Ye||_e))return ve["@value"];const G={};return me&&(G[O.compactIri({activeCtx:Ce,iri:"@index",relativeTo:{vocab:!0}})]=ve["@index"]),"@type"in ve?G[O.compactIri({activeCtx:Ce,iri:"@type",relativeTo:{vocab:!0}})]=O.compactIri({activeCtx:Ce,iri:ve["@type"],relativeTo:{vocab:!0}}):"@language"in ve&&(G[O.compactIri({activeCtx:Ce,iri:"@language",relativeTo:{vocab:!0}})]=ve["@language"]),"@direction"in ve&&(G[O.compactIri({activeCtx:Ce,iri:"@direction",relativeTo:{vocab:!0}})]=ve["@direction"]),G[O.compactIri({activeCtx:Ce,iri:"@value",relativeTo:{vocab:!0}})]=ve["@value"],G}const Me=oe(Ce,le,{vocab:!0},Oe),Je=M(Ce,le,"@type"),qe=O.compactIri({activeCtx:Ce,iri:ve["@id"],relativeTo:{vocab:"@vocab"===Je},base:Oe.base});return"@id"===Je||"@vocab"===Je||"@graph"===Me?qe:{[O.compactIri({activeCtx:Ce,iri:"@id",relativeTo:{vocab:!0}})]:qe}}},6982:te=>{"use strict";const J="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";te.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:J,RDF_LIST:J+"List",RDF_FIRST:J+"first",RDF_REST:J+"rest",RDF_NIL:J+"nil",RDF_TYPE:J+"type",RDF_PLAIN_LITERAL:J+"PlainLiteral",RDF_XML_LITERAL:J+"XMLLiteral",RDF_JSON_LITERAL:J+"JSON",RDF_OBJECT:J+"object",RDF_LANGSTRING:J+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(3521),k=g(1874),{isArray:C,isObject:N,isString:_,isUndefined:y}=g(8254),{isAbsolute:I,isRelative:L,prependBase:P}=g(2651),{handleEvent:j}=g(3855),{REGEX_BCP47:oe,REGEX_KEYWORD:M,asArray:$,compareShortestLeast:ce}=g(3521),K=new Map,ne={};function q(x,B,O,ue,W,Ce){if(null===B||!_(B)||ne.isKeyword(B))return B;if(B.match(M))return null;if(ue&&ue.hasOwnProperty(B)&&!0!==W.get(B)&&ne.createTermDefinition({activeCtx:x,localCtx:ue,term:B,defined:W,options:Ce}),(O=O||{}).vocab){const ve=x.mappings.get(B);if(null===ve)return null;if(N(ve)&&"@id"in ve)return ve["@id"]}const le=B.indexOf(":");if(le>0){const ve=B.substr(0,le),Oe=B.substr(le+1);if("_"===ve||0===Oe.indexOf("//"))return B;ue&&ue.hasOwnProperty(ve)&&ne.createTermDefinition({activeCtx:x,localCtx:ue,term:ve,defined:W,options:Ce});const Me=x.mappings.get(ve);if(Me&&Me._prefix)return Me["@id"]+Oe;if(I(B))return B}if(O.vocab&&"@vocab"in x)B=x["@vocab"]+B;else if(O.base){let ve,Oe;"@base"in x?x["@base"]?(Oe=P(Ce.base,x["@base"]),ve=P(Oe,B)):(Oe=x["@base"],ve=B):(Oe=Ce.base,ve=P(Ce.base,B)),B=ve}return B}function U(x,B){if(!x||"object"!=typeof x||!B||"object"!=typeof B)return x===B;const O=Array.isArray(x);if(O!==Array.isArray(B))return!1;if(O){if(x.length!==B.length)return!1;for(let Ce=0;Ce<x.length;++Ce)if(!U(x[Ce],B[Ce]))return!1;return!0}const ue=Object.keys(x),W=Object.keys(B);if(ue.length!==W.length)return!1;for(const Ce in x){let le=x[Ce],ve=B[Ce];if("@container"===Ce&&Array.isArray(le)&&Array.isArray(ve)&&(le=le.slice().sort(),ve=ve.slice().sort()),!U(le,ve))return!1}return!0}te.exports=ne,ne.process=function(){var x=S(function*({activeCtx:B,localCtx:O,options:ue,propagate:W=!0,overrideProtected:Ce=!1,cycles:le=new Set}){if(N(O)&&"@context"in O&&C(O["@context"])&&(O=O["@context"]),0===$(O).length)return B;const Oe=[],Me=[({event:Ne,next:ke})=>{Oe.push(Ne),ke()}];ue.eventHandler&&Me.push(ue.eventHandler);const Je=ue;ue={...ue,eventHandler:Me};const qe=yield ue.contextResolver.resolve({activeCtx:B,context:O,documentLoader:ue.documentLoader,base:ue.base});N(qe[0].document)&&"boolean"==typeof qe[0].document["@propagate"]&&(W=qe[0].document["@propagate"]);let we=B;!W&&!we.previousContext&&(we=we.clone(),we.previousContext=B);for(const Ne of qe){let{document:ke}=Ne;if(B=we,null===ke){if(!Ce&&0!==Object.keys(B.protected).length)throw new k("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});we=B=ne.getInitialContext(ue).clone();continue}const Ve=Ne.getProcessed(B);if(Ve){if(Je.eventHandler)for(const Ee of Ve.events)j({event:Ee,options:Je});we=B=Ve.context;continue}if(N(ke)&&"@context"in ke&&(ke=ke["@context"]),!N(ke))throw new k("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ke});we=we.clone();const me=new Map;if("@version"in ke){if(1.1!==ke["@version"])throw new k("Unsupported JSON-LD version: "+ke["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ke});if(B.processingMode&&"json-ld-1.0"===B.processingMode)throw new k("@version: "+ke["@version"]+" not compatible with "+B.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ke});we.processingMode="json-ld-1.1",we["@version"]=ke["@version"],me.set("@version",!0)}if(we.processingMode=we.processingMode||B.processingMode,"@base"in ke){let Ee=ke["@base"];if(null!==Ee&&!I(Ee)){if(!L(Ee))throw new k('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ke});Ee=P(we["@base"],Ee)}we["@base"]=Ee,me.set("@base",!0)}if("@vocab"in ke){const Ee=ke["@vocab"];if(null===Ee)delete we["@vocab"];else{if(!_(Ee))throw new k('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});if(!I(Ee)&&ne.processingMode(we,1))throw new k('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});{const Ke=q(we,Ee,{vocab:!0,base:!0},void 0,void 0,ue);I(Ke)||ue.eventHandler&&j({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Ke}},options:ue}),we["@vocab"]=Ke}}me.set("@vocab",!0)}if("@language"in ke){const Ee=ke["@language"];if(null===Ee)delete we["@language"];else{if(!_(Ee))throw new k('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ke});Ee.match(oe)||ue.eventHandler&&j({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ee}},options:ue}),we["@language"]=Ee.toLowerCase()}me.set("@language",!0)}if("@direction"in ke){const Ee=ke["@direction"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @direction not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ke});if(null===Ee)delete we["@direction"];else{if("ltr"!==Ee&&"rtl"!==Ee)throw new k('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ke});we["@direction"]=Ee}me.set("@direction",!0)}if("@propagate"in ke){const Ee=ke["@propagate"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @propagate not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if("boolean"!=typeof Ee)throw new k("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:O});me.set("@propagate",!0)}if("@import"in ke){const Ee=ke["@import"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @import not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if(!_(Ee))throw new k("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:O});const Ke=yield ue.contextResolver.resolve({activeCtx:B,context:Ee,documentLoader:ue.documentLoader,base:ue.base});if(1!==Ke.length)throw new k("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:O});const at=Ke[0].getProcessed(B);if(at)ke=at;else{const Ye=Ke[0].document;if("@import"in Ye)throw new k("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:O});for(const _e in Ye)ke.hasOwnProperty(_e)||(ke[_e]=Ye[_e]);Ke[0].setProcessed(B,ke)}me.set("@import",!0)}me.set("@protected",ke["@protected"]||!1);for(const Ee in ke)if(ne.createTermDefinition({activeCtx:we,localCtx:ke,term:Ee,defined:me,options:ue,overrideProtected:Ce}),N(ke[Ee])&&"@context"in ke[Ee]){const Ke=ke[Ee]["@context"];let at=!0;if(_(Ke)){const Ye=P(ue.base,Ke);le.has(Ye)?at=!1:le.add(Ye)}if(at)try{yield ne.process({activeCtx:we.clone(),localCtx:ke[Ee]["@context"],overrideProtected:!0,options:ue,cycles:le})}catch{throw new k("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ke[Ee]["@context"],term:Ee})}}Ne.setProcessed(B,{context:we,events:Oe})}return we});return function(B){return x.apply(this,arguments)}}(),ne.createTermDefinition=({activeCtx:x,localCtx:B,term:O,defined:ue,options:W,overrideProtected:Ce=!1})=>{if(ue.has(O)){if(ue.get(O))return;throw new k("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:B,term:O})}let le;if(ue.set(O,!1),B.hasOwnProperty(O)&&(le=B[O]),"@type"===O&&N(le)&&"@set"===(le["@container"]||"@set")&&ne.processingMode(x,1.1)){const Ne=["@container","@id","@protected"],ke=Object.keys(le);if(0===ke.length||ke.some(Ve=>!Ne.includes(Ve)))throw new k("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:O})}else{if(ne.isKeyword(O))throw new k("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:O});if(O.match(M))return void(W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:O}},options:W}));if(""===O)throw new k("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:B})}const ve=x.mappings.get(O);x.mappings.has(O)&&x.mappings.delete(O);let Oe=!1;if((_(le)||null===le)&&(Oe=!0,le={"@id":le}),!N(le))throw new k("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:B});const Me={};x.mappings.set(O,Me),Me.reverse=!1;const Je=["@container","@id","@language","@reverse","@type"];ne.processingMode(x,1.1)&&Je.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ne in le)if(!Je.includes(Ne))throw new k("Invalid JSON-LD syntax; a term definition must not contain "+Ne,"jsonld.SyntaxError",{code:"invalid term definition",context:B});const qe=O.indexOf(":");if(Me._termHasColon=qe>0,"@reverse"in le){if("@id"in le)throw new k("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});if("@nest"in le)throw new k("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});const Ne=le["@reverse"];if(!_(Ne))throw new k("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(Ne.match(M))return W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ne}},options:W}),void(ve?x.mappings.set(O,ve):x.mappings.delete(O));const ke=q(x,Ne,{vocab:!0,base:!1},B,ue,W);if(!I(ke))throw new k("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});Me["@id"]=ke,Me.reverse=!0}else if("@id"in le){let Ne=le["@id"];if(Ne&&!_(Ne))throw new k("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(null===Ne)Me["@id"]=null;else{if(!ne.isKeyword(Ne)&&Ne.match(M))return W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ne}},options:W}),void(ve?x.mappings.set(O,ve):x.mappings.delete(O));if(Ne!==O){if(Ne=q(x,Ne,{vocab:!0,base:!1},B,ue,W),!I(Ne)&&!ne.isKeyword(Ne))throw new k("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(O.match(/(?::[^:])|\//)&&q(x,O,{vocab:!0,base:!1},B,new Map(ue).set(O,!0),W)!==Ne)throw new k("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});Me["@id"]=Ne,Me._prefix=Oe&&!Me._termHasColon&&null!==Ne.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Me))if(Me._termHasColon){const Ne=O.substr(0,qe);if(B.hasOwnProperty(Ne)&&ne.createTermDefinition({activeCtx:x,localCtx:B,term:Ne,defined:ue,options:W}),x.mappings.has(Ne)){const ke=O.substr(qe+1);Me["@id"]=x.mappings.get(Ne)["@id"]+ke}else Me["@id"]=O}else if("@type"===O)Me["@id"]=O;else{if(!("@vocab"in x))throw new k("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B,term:O});Me["@id"]=x["@vocab"]+O}if((!0===le["@protected"]||!0===ue.get("@protected")&&!1!==le["@protected"])&&(x.protected[O]=!0,Me.protected=!0),ue.set(O,!0),"@type"in le){let Ne=le["@type"];if(!_(Ne))throw new k("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if("@json"===Ne||"@none"===Ne){if(ne.processingMode(x,1))throw new k(`Invalid JSON-LD syntax; an @context @type value must not be "${Ne}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else if("@id"!==Ne&&"@vocab"!==Ne){if(Ne=q(x,Ne,{vocab:!0,base:!1},B,ue,W),!I(Ne))throw new k("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if(0===Ne.indexOf("_:"))throw new k("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}Me["@type"]=Ne}if("@container"in le){const Ne=_(le["@container"])?[le["@container"]]:le["@container"]||[],ke=["@list","@set","@index","@language"];let Ve=!0;const me=Ne.includes("@set");if(ne.processingMode(x,1.1)){if(ke.push("@graph","@id","@type"),Ne.includes("@list")){if(1!==Ne.length)throw new k("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else if(Ne.includes("@graph")){if(Ne.some(Ee=>"@graph"!==Ee&&"@id"!==Ee&&"@index"!==Ee&&"@set"!==Ee))throw new k("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else Ve&=Ne.length<=(me?2:1);if(Ne.includes("@type")&&(Me["@type"]=Me["@type"]||"@id",!["@id","@vocab"].includes(Me["@type"])))throw new k("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else Ve&=!C(le["@container"]),Ve&=Ne.length<=1;if(Ve&=Ne.every(Ee=>ke.includes(Ee)),Ve&=!(me&&Ne.includes("@list")),!Ve)throw new k("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ke.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:B});if(Me.reverse&&!Ne.every(Ee=>["@index","@set"].includes(Ee)))throw new k("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});Me["@container"]=Ne}if("@index"in le){if(!("@container"in le)||!Me["@container"].includes("@index"))throw new k(`Invalid JSON-LD syntax; @index without @index in @container: "${le["@index"]}" on term "${O}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});if(!_(le["@index"])||0===le["@index"].indexOf("@"))throw new k(`Invalid JSON-LD syntax; @index must expand to an IRI: "${le["@index"]}" on term "${O}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});Me["@index"]=le["@index"]}if("@context"in le&&(Me["@context"]=le["@context"]),"@language"in le&&!("@type"in le)){let Ne=le["@language"];if(null!==Ne&&!_(Ne))throw new k("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:B});null!==Ne&&(Ne=Ne.toLowerCase()),Me["@language"]=Ne}if("@prefix"in le){if(O.match(/:|\//))throw new k("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:B});if(ne.isKeyword(Me["@id"]))throw new k("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:B});if("boolean"!=typeof le["@prefix"])throw new k("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:B});Me._prefix=!0===le["@prefix"]}if("@direction"in le){const Ne=le["@direction"];if(null!==Ne&&"ltr"!==Ne&&"rtl"!==Ne)throw new k('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:B});Me["@direction"]=Ne}if("@nest"in le){const Ne=le["@nest"];if(!_(Ne)||"@nest"!==Ne&&0===Ne.indexOf("@"))throw new k("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:B});Me["@nest"]=Ne}const we=Me["@id"];if("@context"===we||"@preserve"===we)throw new k("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:B});if(ve&&ve.protected&&!Ce&&(x.protected[O]=!0,Me.protected=!0,!U(ve,Me)))throw new k("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:B,term:O})},ne.expandIri=(x,B,O,ue)=>q(x,B,O,void 0,void 0,ue),ne.getInitialContext=x=>{const B=JSON.stringify({processingMode:x.processingMode}),O=K.get(B);if(O)return O;const ue={processingMode:x.processingMode,mappings:new Map,inverse:null,getInverse:function W(){const Me=this;if(Me.inverse)return Me.inverse;const Je=Me.inverse={},qe=Me.fastCurieMap={},we={},Ne=(Me["@language"]||"@none").toLowerCase(),ke=Me["@direction"],Ve=Me.mappings,me=[...Ve.keys()].sort(ce);for(const Ee of me){const Ke=Ve.get(Ee);if(null===Ke)continue;let at=Ke["@container"]||"@none";if(at=[].concat(at).sort().join(""),null===Ke["@id"])continue;const Ye=$(Ke["@id"]);for(const _e of Ye){let G=Je[_e];const R=ne.isKeyword(_e);if(G)!R&&!Ke._termHasColon&&we[_e].push(Ee);else if(Je[_e]=G={},!R&&!Ke._termHasColon){we[_e]=[Ee];const se={iri:_e,terms:we[_e]};_e[0]in qe?qe[_e[0]].push(se):qe[_e[0]]=[se]}if(G[at]||(G[at]={"@language":{},"@type":{},"@any":{}}),G=G[at],le(Ee,G["@any"],"@none"),Ke.reverse)le(Ee,G["@type"],"@reverse");else if("@none"===Ke["@type"])le(Ee,G["@any"],"@none"),le(Ee,G["@language"],"@none"),le(Ee,G["@type"],"@none");else if("@type"in Ke)le(Ee,G["@type"],Ke["@type"]);else if("@language"in Ke&&"@direction"in Ke){const se=Ke["@language"],V=Ke["@direction"];le(Ee,G["@language"],se&&V?`${se}_${V}`.toLowerCase():se?se.toLowerCase():V?`_${V}`:"@null")}else"@language"in Ke?le(Ee,G["@language"],(Ke["@language"]||"@null").toLowerCase()):"@direction"in Ke?le(Ee,G["@language"],Ke["@direction"]?`_${Ke["@direction"]}`:"@none"):ke?(le(Ee,G["@language"],`_${ke}`),le(Ee,G["@language"],"@none"),le(Ee,G["@type"],"@none")):(le(Ee,G["@language"],Ne),le(Ee,G["@language"],"@none"),le(Ee,G["@type"],"@none"))}}for(const Ee in qe)Ce(qe,Ee,1);return Je},clone:function ve(){const Me={};return Me.mappings=b.clone(this.mappings),Me.clone=this.clone,Me.inverse=null,Me.getInverse=this.getInverse,Me.protected=b.clone(this.protected),this.previousContext&&(Me.previousContext=this.previousContext.clone()),Me.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Me["@base"]=this["@base"]),"@language"in this&&(Me["@language"]=this["@language"]),"@vocab"in this&&(Me["@vocab"]=this["@vocab"]),Me},revertToPreviousContext:function Oe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===K.size&&K.clear(),K.set(B,ue),ue;function Ce(Me,Je,qe){const we=Me[Je],Ne=Me[Je]={};let ke,Ve;for(const me of we)ke=me.iri,Ve=qe>=ke.length?"":ke[qe],Ve in Ne?Ne[Ve].push(me):Ne[Ve]=[me];for(const me in Ne)""!==me&&Ce(Ne,me,qe+1)}function le(Me,Je,qe){Je.hasOwnProperty(qe)||(Je[qe]=Me)}},ne.getContextValue=(x,B,O)=>{if(null===B)return"@context"===O?void 0:null;if(x.mappings.has(B)){const ue=x.mappings.get(B);if(y(O))return ue;if(ue.hasOwnProperty(O))return ue[O]}return"@language"===O&&O in x||"@direction"===O&&O in x?x[O]:"@context"!==O?null:void 0},ne.processingMode=(x,B)=>B.toString()>="1.1"?!x.processingMode||x.processingMode>="json-ld-"+B.toString():"json-ld-1.0"===x.processingMode,ne.isKeyword=x=>{if(!_(x)||"@"!==x[0])return!1;switch(x){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(te,J,g)=>{"use strict";var S=g(7156).default;const{parseLinkHeader:b,buildHeaders:k}=g(3521),{LINK_HEADER_CONTEXT:C}=g(6982),N=g(1874),_=g(4044),{prependBase:y}=g(2651),I=/(^|(\r\n))link:/i;te.exports=({secure:P,headers:j={},xhr:oe}={headers:{}})=>{return j=k(j),(new _).wrapLoader($);function $(K){return ce.apply(this,arguments)}function ce(){return ce=S(function*(K){if(0!==K.indexOf("http:")&&0!==K.indexOf("https:"))throw new N('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:K});if(P&&0!==K.indexOf("https"))throw new N('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:K});let ie;try{ie=yield function L(P,j,oe){const M=new(P=P||XMLHttpRequest);return new Promise(($,ce)=>{M.onload=()=>$(M),M.onerror=K=>ce(K),M.open("GET",j,!0);for(const K in oe)M.setRequestHeader(K,oe[K]);M.send()})}(oe,K,j)}catch(B){throw new N("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:K,cause:B})}if(ie.status>=400)throw new N("URL could not be dereferenced: "+ie.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:K,httpStatusCode:ie.status});let ne={contextUrl:null,documentUrl:K,document:ie.response},q=null;const U=ie.getResponseHeader("Content-Type");let x;if(I.test(ie.getAllResponseHeaders())&&(x=ie.getResponseHeader("Link")),x&&"application/ld+json"!==U){const B=b(x),O=B[C];if(Array.isArray(O))throw new N("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:K});O&&(ne.contextUrl=O.target),q=B.alternate,q&&"application/ld+json"==q.type&&!(U||"").match(/^application\/(\w*\+)?json$/)&&(ne=yield $(y(K,q.target)))}return ne}),ce.apply(this,arguments)}}},3855:(te,J,g)=>{"use strict";const S=g(1874),{isArray:b}=g(8254),{asArray:k}=g(3521),C={};function N({event:y,handlers:I}){let L=!0;for(let P=0;L&&P<I.length;++P){L=!1;const j=I[P];if(b(j))L=N({event:y,handlers:j});else if("function"==typeof j)j({event:y,next:()=>{L=!0}});else{if("object"!=typeof j)throw new S("Invalid event handler.","jsonld.InvalidEventHandler",{event:y});y.code in j?j[y.code]({event:y,next:()=>{L=!0}}):L=!0}}return L}te.exports=C,C.defaultEventHandler=null,C.setupEventHandler=({options:y={}})=>{const I=[].concat(y.safe?C.safeEventHandler:[],y.eventHandler?k(y.eventHandler):[],C.defaultEventHandler?C.defaultEventHandler:[]);return 0===I.length?null:I},C.handleEvent=({event:y,options:I})=>{N({event:y,handlers:I.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);C.safeEventHandler=function({event:I,next:L}){if("warning"===I.level&&_.has(I.code))throw new S("Safe mode validation error.","jsonld.ValidationError",{event:I});L()},C.logEventHandler=function({event:I,next:L}){console.log(`EVENT: ${I.message}`,{event:I}),L()},C.logWarningEventHandler=function({event:I,next:L}){"warning"===I.level&&console.warn(`WARNING: ${I.message}`,{event:I}),L()},C.unhandledEventHandler=function({event:I}){throw new S("No handler for event.","jsonld.UnhandledEvent",{event:I})},C.setDefaultEventHandler=function({eventHandler:y}={}){C.defaultEventHandler=y?k(y):null}},3860:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(1874),{isArray:k,isObject:C,isEmptyObject:N,isString:_,isUndefined:y}=g(8254),{isList:I,isValue:L,isGraph:P,isSubject:j}=g(543),{expandIri:oe,getContextValue:M,isKeyword:$,process:ce,processingMode:K}=g(9611),{isAbsolute:ie}=g(2651),{REGEX_BCP47:ne,REGEX_KEYWORD:q,addValue:U,asArray:x,getValues:B,validateTypeValue:O}=g(3521),{handleEvent:ue}=g(3855),W={};function Ce({value:we,count:Ne,options:ke}){if(0===Ne||"@value"in we||"@list"in we||1===Ne&&"@id"in we){if(ke.eventHandler){let Ve,me;0===Ne?(Ve="empty object",me="Dropping empty object."):"@value"in we?(Ve="object with only @value",me="Dropping object with only @value."):"@list"in we?(Ve="object with only @list",me="Dropping object with only @list."):1===Ne&&"@id"in we&&(Ve="object with only @id",me="Dropping object with only @id."),ue({event:{type:["JsonLdEvent"],code:Ve,level:"warning",message:me,details:{value:we}},options:ke})}return null}return we}function le(we){return ve.apply(this,arguments)}function ve(){return(ve=S(function*({activeCtx:we,activeProperty:Ne,expandedActiveProperty:ke,element:Ve,expandedParent:me,options:Ee={},insideList:Ke,typeKey:at,typeScopedContext:Ye}){const _e=Object.keys(Ve).sort(),G=[];let R;const se=Ve[at]&&"@json"===oe(we,k(Ve[at])?Ve[at][0]:Ve[at],{vocab:!0},{...Ee,typeExpansion:!0});for(const V of _e){let et,Fe=Ve[V];if("@context"===V)continue;const fe=oe(we,V,{vocab:!0},Ee);if(null===fe||!ie(fe)&&!$(fe)){Ee.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:V,expandedProperty:fe}},options:Ee});continue}if($(fe)){if("@reverse"===ke)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Fe});if(fe in me&&"@included"!==fe&&"@type"!==fe)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:fe})}if("@id"===fe){if(!_(Fe)){if(!Ee.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(C(Fe)){if(!N(Fe))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}else{if(!k(Fe))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(!Fe.every(F=>_(F)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}}U(me,"@id",x(Fe).map(F=>{if(_(F)){const de=oe(we,F,{base:!0},Ee);return Ee.eventHandler&&(null===de?ue(null===F?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:F}},options:Ee}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:F}},options:Ee}):ie(de)||ue({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:F,expandedId:de}},options:Ee})),de}return F}),{propertyIsArray:Ee.isFrame});continue}if("@type"===fe){C(Fe)&&(Fe=Object.fromEntries(Object.entries(Fe).map(([F,de])=>[oe(Ye,F,{vocab:!0}),x(de).map(pe=>oe(Ye,pe,{base:!0,vocab:!0},{...Ee,typeExpansion:!0}))]))),O(Fe,Ee.isFrame),U(me,"@type",x(Fe).map(F=>{if(_(F)){const de=oe(Ye,F,{base:!0,vocab:!0},{...Ee,typeExpansion:!0});return"@json"!==de&&!ie(de)&&Ee.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:F}},options:Ee}),de}return F}),{propertyIsArray:!!Ee.isFrame});continue}if("@included"===fe&&K(we,1.1)){const F=x(yield W.expand({activeCtx:we,activeProperty:Ne,element:Fe,options:Ee}));if(!F.every(de=>j(de)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Fe});U(me,"@included",F,{propertyIsArray:!0});continue}if("@graph"===fe&&!C(Fe)&&!k(Fe))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Fe});if("@value"===fe){R=Fe,se&&K(we,1.1)?me["@value"]=Fe:U(me,"@value",Fe,{propertyIsArray:Ee.isFrame});continue}if("@language"===fe){if(null===Fe)continue;if(!_(Fe)&&!Ee.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Fe});Fe=x(Fe).map(F=>_(F)?F.toLowerCase():F);for(const F of Fe)_(F)&&!F.match(ne)&&Ee.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:F}},options:Ee});U(me,"@language",Fe,{propertyIsArray:Ee.isFrame});continue}if("@direction"===fe){if(!_(Fe)&&!Ee.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});Fe=x(Fe);for(const F of Fe)if(_(F)&&"ltr"!==F&&"rtl"!==F)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});U(me,"@direction",Fe,{propertyIsArray:Ee.isFrame});continue}if("@index"===fe){if(!_(Fe))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Fe});U(me,"@index",Fe);continue}if("@reverse"===fe){if(!C(Fe))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Fe});if(et=yield W.expand({activeCtx:we,activeProperty:"@reverse",element:Fe,options:Ee}),"@reverse"in et)for(const de in et["@reverse"])U(me,de,et["@reverse"][de],{propertyIsArray:!0});let F=me["@reverse"]||null;for(const de in et){if("@reverse"===de)continue;null===F&&(F=me["@reverse"]={}),U(F,de,[],{propertyIsArray:!0});const pe=et[de];for(let ze=0;ze<pe.length;++ze){const Ge=pe[ze];if(L(Ge)||I(Ge))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:et});U(F,de,Ge,{propertyIsArray:!0})}}continue}if("@nest"===fe){G.push(V);continue}let Q=we;const X=M(we,V,"@context");y(X)||(Q=yield ce({activeCtx:we,localCtx:X,propagate:!0,overrideProtected:!0,options:Ee}));const A=M(Q,V,"@container")||[];if(A.includes("@language")&&C(Fe))et=Me(Q,Fe,M(Q,V,"@direction"),Ee);else if(A.includes("@index")&&C(Fe)){const F=A.includes("@graph"),de=M(Q,V,"@index")||"@index",pe="@index"!==de&&oe(we,de,{vocab:!0},Ee);et=yield Je({activeCtx:Q,options:Ee,activeProperty:V,value:Fe,asGraph:F,indexKey:de,propertyIndex:pe})}else if(A.includes("@id")&&C(Fe)){const F=A.includes("@graph");et=yield Je({activeCtx:Q,options:Ee,activeProperty:V,value:Fe,asGraph:F,indexKey:"@id"})}else if(A.includes("@type")&&C(Fe))et=yield Je({activeCtx:Q.revertToPreviousContext(),options:Ee,activeProperty:V,value:Fe,asGraph:!1,indexKey:"@type"});else{const F="@list"===fe;if(F||"@set"===fe){let de=Ne;F&&"@graph"===ke&&(de=null),et=yield W.expand({activeCtx:Q,activeProperty:de,element:Fe,options:Ee,insideList:F})}else et="@json"===M(we,V,"@type")?{"@type":"@json","@value":Fe}:yield W.expand({activeCtx:Q,activeProperty:V,element:Fe,options:Ee,insideList:!1})}if(null!==et||"@value"===fe){if("@list"!==fe&&!I(et)&&A.includes("@list")&&(et={"@list":x(et)}),A.includes("@graph")&&!A.some(F=>"@id"===F||"@index"===F)){if(et=x(et),Ee.isFrame||(et=et.filter(F=>null!==Ce({value:F,count:Object.keys(F).length,options:Ee}))),0===et.length)continue;et=et.map(F=>({"@graph":x(F)}))}if(Q.mappings.has(V)&&Q.mappings.get(V).reverse){const F=me["@reverse"]=me["@reverse"]||{};et=x(et);for(let de=0;de<et.length;++de){const pe=et[de];if(L(pe)||I(pe))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:et});U(F,fe,pe,{propertyIsArray:!0})}continue}U(me,fe,et,{propertyIsArray:!0})}}if("@value"in me&&("@json"!==me["@type"]||!K(we,1.1))&&(C(R)||k(R))&&!Ee.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:R});for(const V of G){const Fe=k(Ve[V])?Ve[V]:[Ve[V]];for(const et of Fe){if(!C(et)||Object.keys(et).some(fe=>"@value"===oe(we,fe,{vocab:!0},Ee)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:et});yield le({activeCtx:we,activeProperty:Ne,expandedActiveProperty:ke,element:et,expandedParent:me,options:Ee,insideList:Ke,typeScopedContext:Ye,typeKey:at})}}})).apply(this,arguments)}function Oe({activeCtx:we,activeProperty:Ne,value:ke,options:Ve}){if(null==ke)return null;const me=oe(we,Ne,{vocab:!0},Ve);if("@id"===me)return oe(we,ke,{base:!0},Ve);if("@type"===me)return oe(we,ke,{vocab:!0,base:!0},{...Ve,typeExpansion:!0});const Ee=M(we,Ne,"@type");if(("@id"===Ee||"@graph"===me)&&_(ke)){const at=oe(we,ke,{base:!0},Ve);return null===at&&ke.match(q)&&Ve.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ne}},options:Ve}),{"@id":at}}if("@vocab"===Ee&&_(ke))return{"@id":oe(we,ke,{vocab:!0,base:!0},Ve)};if($(me))return ke;const Ke={};if(Ee&&!["@id","@vocab","@none"].includes(Ee))Ke["@type"]=Ee;else if(_(ke)){const at=M(we,Ne,"@language");null!==at&&(Ke["@language"]=at);const Ye=M(we,Ne,"@direction");null!==Ye&&(Ke["@direction"]=Ye)}return["boolean","number","string"].includes(typeof ke)||(ke=ke.toString()),Ke["@value"]=ke,Ke}function Me(we,Ne,ke,Ve){const me=[],Ee=Object.keys(Ne).sort();for(const Ke of Ee){const at=oe(we,Ke,{vocab:!0},Ve);let Ye=Ne[Ke];k(Ye)||(Ye=[Ye]);for(const _e of Ye){if(null===_e)continue;if(!_(_e))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});const G={"@value":_e};"@none"!==at&&(Ke.match(ne)||Ve.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ke}},options:Ve}),G["@language"]=Ke.toLowerCase()),ke&&(G["@direction"]=ke),me.push(G)}}return me}function Je(we){return qe.apply(this,arguments)}function qe(){return(qe=S(function*({activeCtx:we,options:Ne,activeProperty:ke,value:Ve,asGraph:me,indexKey:Ee,propertyIndex:Ke}){const at=[],Ye=Object.keys(Ve).sort(),_e="@type"===Ee;for(let G of Ye){if(_e){const V=M(we,G,"@context");y(V)||(we=yield ce({activeCtx:we,localCtx:V,propagate:!1,options:Ne}))}let se,R=Ve[G];k(R)||(R=[R]),R=yield W.expand({activeCtx:we,activeProperty:ke,element:R,options:Ne,insideList:!1,insideIndex:!0}),se=Ke?"@none"===G?"@none":Oe({activeCtx:we,activeProperty:Ee,value:G,options:Ne}):oe(we,G,{vocab:!0},Ne),"@id"===Ee?G=oe(we,G,{base:!0},Ne):_e&&(G=se);for(let V of R){if(me&&!P(V)&&(V={"@graph":[V]}),"@type"===Ee)"@none"===se||(V["@type"]=V["@type"]?[G].concat(V["@type"]):[G]);else{if(L(V)&&!["@language","@type","@index"].includes(Ee))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ee}".`,"jsonld.SyntaxError",{code:"invalid value object",value:V});Ke?"@none"!==se&&U(V,Ke,se,{propertyIsArray:!0,prependValue:!0}):"@none"!==se&&!(Ee in V)&&(V[Ee]=G)}at.push(V)}}return at})).apply(this,arguments)}te.exports=W,W.expand=function(){var we=S(function*({activeCtx:Ne,activeProperty:ke=null,element:Ve,options:me={},insideList:Ee=!1,insideIndex:Ke=!1,typeScopedContext:at=null}){if(null==Ve)return null;if("@default"===ke&&(me=Object.assign({},me,{isFrame:!1})),!k(Ve)&&!C(Ve))return Ee||null!==ke&&"@graph"!==oe(Ne,ke,{vocab:!0},me)?Oe({activeCtx:Ne,activeProperty:ke,value:Ve,options:me}):(me.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Ve}},options:me}),null);if(k(Ve)){let et=[];const fe=M(Ne,ke,"@container")||[];Ee=Ee||fe.includes("@list");for(let Q=0;Q<Ve.length;++Q){let X=yield W.expand({activeCtx:Ne,activeProperty:ke,element:Ve[Q],options:me,insideIndex:Ke,typeScopedContext:at});Ee&&k(X)&&(X={"@list":X}),null!==X&&(k(X)?et=et.concat(X):et.push(X))}return et}const Ye=oe(Ne,ke,{vocab:!0},me),_e=M(Ne,ke,"@context");at=at||(Ne.previousContext?Ne:null);let G=Object.keys(Ve).sort(),R=!Ke;if(R&&at&&G.length<=2&&!G.includes("@context"))for(const et of G){const fe=oe(at,et,{vocab:!0},me);if("@value"===fe){R=!1,Ne=at;break}if("@id"===fe&&1===G.length){R=!1;break}}R&&(Ne=Ne.revertToPreviousContext()),y(_e)||(Ne=yield ce({activeCtx:Ne,localCtx:_e,propagate:!0,overrideProtected:!0,options:me})),"@context"in Ve&&(Ne=yield ce({activeCtx:Ne,localCtx:Ve["@context"],options:me})),at=Ne;let se=null;for(const et of G)if("@type"===oe(Ne,et,{vocab:!0},me)){se=se||et;const Q=Ve[et],X=Array.isArray(Q)?Q.length>1?Q.slice().sort():Q:[Q];for(const A of X){const F=M(at,A,"@context");y(F)||(Ne=yield ce({activeCtx:Ne,localCtx:F,options:me,propagate:!1}))}}let V={};yield le({activeCtx:Ne,activeProperty:ke,expandedActiveProperty:Ye,element:Ve,expandedParent:V,options:me,insideList:Ee,typeKey:se,typeScopedContext:at}),G=Object.keys(V);let Fe=G.length;if("@value"in V){if("@type"in V&&("@language"in V||"@direction"in V))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:V});let et=Fe-1;if("@type"in V&&(et-=1),"@index"in V&&(et-=1),"@language"in V&&(et-=1),"@direction"in V&&(et-=1),0!==et)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:V});const fe=null===V["@value"]?[]:x(V["@value"]),Q=B(V,"@type");if(!K(Ne,1.1)||!Q.includes("@json")||1!==Q.length)if(0===fe.length)me.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:V}},options:me}),V=null;else{if(!fe.every(X=>_(X)||N(X))&&"@language"in V)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:V});if(!Q.every(X=>ie(X)&&!(_(X)&&0===X.indexOf("_:"))||N(X)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:V})}}else if("@type"in V&&!k(V["@type"]))V["@type"]=[V["@type"]];else if("@set"in V||"@list"in V){if(Fe>1&&(2!==Fe||!("@index"in V)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:V});"@set"in V&&(V=V["@set"],G=Object.keys(V),Fe=G.length)}else 1===Fe&&"@language"in V&&(me.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:V}},options:me}),V=null);return C(V)&&!me.keepFreeFloatingNodes&&!Ee&&(null===ke||"@graph"===Ye||(M(Ne,ke,"@container")||[]).includes("@graph"))&&(V=Ce({value:V,count:Fe,options:me})),V});return function(Ne){return we.apply(this,arguments)}}()},8295:(te,J,g)=>{"use strict";const{isSubjectReference:S}=g(543),{createMergedNodeMap:b}=g(9783),k={};te.exports=k,k.flatten=C=>{const N=b(C),_=[],y=Object.keys(N).sort();for(let I=0;I<y.length;++I){const L=N[y[I]];S(L)||_.push(L)}return _}},9193:(te,J,g)=>{"use strict";const{isKeyword:S}=g(9611),b=g(543),k=g(8254),C=g(3521),N=g(2651),_=g(1874),{createNodeMap:y,mergeNodeMapGraphs:I}=g(9783),L={};function P(x){const B={};for(const O in x)void 0!==x[O]&&(B["@"+O]=[x[O]]);return[B]}function j(x,B,O){for(let ue=O.length-1;ue>=0;--ue){const W=O[ue];if(W.graph===B&&W.subject["@id"]===x["@id"])return!0}return!1}function oe(x,B,O){const ue="@"+O;let W=ue in x?x[ue][0]:B[O];if("embed"===O)if(!0===W)W="@once";else if(!1===W)W="@never";else if("@always"!==W&&"@never"!==W&&"@link"!==W&&"@first"!==W&&"@last"!==W&&"@once"!==W)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});return W}function M(x){if(!k.isArray(x)||1!==x.length||!k.isObject(x[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:x});if("@id"in x[0])for(const B of C.asArray(x[0]["@id"]))if(!k.isObject(B)&&!N.isAbsolute(B)||k.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x});if("@type"in x[0])for(const B of C.asArray(x[0]["@type"]))if(!k.isObject(B)&&!N.isAbsolute(B)&&"@json"!==B||k.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x})}function ce(x,B,O,ue){let W=!0,Ce=!1;for(const le in O){let ve=!1;const Oe=C.getValues(B,le),Me=0===C.getValues(O,le).length;if("@id"===le){if(k.isEmptyObject(O["@id"][0]||{})?ve=!0:O["@id"].length>=0&&(ve=O["@id"].includes(Oe[0])),!ue.requireAll)return ve}else if("@type"===le){if(W=!1,Me){if(Oe.length>0)return!1;ve=!0}else if(1===O["@type"].length&&k.isEmptyObject(O["@type"][0]))ve=Oe.length>0;else for(const Je of O["@type"])ve=!(!k.isObject(Je)||!("@default"in Je))||ve||Oe.some(qe=>qe===Je);if(!ue.requireAll)return ve}else{if(S(le))continue;{const Je=C.getValues(O,le)[0];let qe=!1;if(Je&&(M([Je]),qe="@default"in Je),W=!1,0===Oe.length&&qe)continue;if(Oe.length>0&&Me)return!1;if(void 0===Je){if(Oe.length>0)return!1;ve=!0}else if(b.isList(Je)){const we=Je["@list"][0];if(b.isList(Oe[0])){const Ne=Oe[0]["@list"];b.isValue(we)?ve=Ne.some(ke=>U(we,ke)):(b.isSubject(we)||b.isSubjectReference(we))&&(ve=Ne.some(ke=>q(x,we,ke,ue)))}}else ve=b.isValue(Je)?Oe.some(we=>U(Je,we)):b.isSubjectReference(Je)?Oe.some(we=>q(x,Je,we,ue)):!!k.isObject(Je)&&Oe.length>0}}if(!ve&&ue.requireAll)return!1;Ce=Ce||ve}return W||Ce}function K(x,B){const O=x.uniqueEmbeds[x.graph],ue=O[B],W=ue.parent,Ce=ue.property,le={"@id":B};if(k.isArray(W)){for(let Oe=0;Oe<W.length;++Oe)if(C.compareValues(W[Oe],le)){W[Oe]=le;break}}else{const Oe=k.isArray(W[Ce]);C.removeValue(W,Ce,le,{propertyIsArray:Oe}),C.addValue(W,Ce,le,{propertyIsArray:Oe})}const ve=Oe=>{const Me=Object.keys(O);for(const Je of Me)Je in O&&k.isObject(O[Je].parent)&&O[Je].parent["@id"]===Oe&&(delete O[Je],ve(Je))};ve(B)}function ie(x,B){if(k.isArray(x))return x.map(O=>ie(O,B));if(k.isObject(x)){if("@preserve"in x)return x["@preserve"][0];if(b.isValue(x))return x;if(b.isList(x))return x["@list"]=ie(x["@list"],B),x;if("@id"in x){const O=x["@id"];if(B.link.hasOwnProperty(O)){const ue=B.link[O].indexOf(x);if(-1!==ue)return B.link[O][ue];B.link[O].push(x)}else B.link[O]=[x]}for(const O in x)"@id"===O&&B.bnodesToClear.includes(x[O])?delete x["@id"]:x[O]=ie(x[O],B)}return x}function ne(x,B,O){k.isObject(x)?C.addValue(x,B,O,{propertyIsArray:!0}):x.push(O)}function q(x,B,O,ue){if(!("@id"in O))return!1;const W=x.subjects[O["@id"]];return W&&ce(x,W,B,ue)}function U(x,B){const O=B["@value"],ue=B["@type"],W=B["@language"],Ce=x["@value"]?k.isArray(x["@value"])?x["@value"]:[x["@value"]]:[],le=x["@type"]?k.isArray(x["@type"])?x["@type"]:[x["@type"]]:[],ve=x["@language"]?k.isArray(x["@language"])?x["@language"]:[x["@language"]]:[];return 0===Ce.length&&0===le.length&&0===ve.length||!(!Ce.includes(O)&&!k.isEmptyObject(Ce[0])||!(!ue&&0===le.length||le.includes(ue)||ue&&k.isEmptyObject(le[0]))||!(!W&&0===ve.length||ve.includes(W)||W&&k.isEmptyObject(ve[0])))}te.exports=L,L.frameMergedOrDefault=(x,B,O)=>{const ue={options:O,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},W=new C.IdentifierIssuer("_:b");y(x,ue.graphMap,"@default",W),O.merged&&(ue.graphMap["@merged"]=I(ue.graphMap),ue.graph="@merged"),ue.subjects=ue.graphMap[ue.graph];const Ce=[];return L.frame(ue,Object.keys(ue.subjects).sort(),B,Ce),O.pruneBlankNodeIdentifiers&&(O.bnodesToClear=Object.keys(ue.bnodeMap).filter(le=>1===ue.bnodeMap[le].length)),O.link={},ie(Ce,O)},L.frame=(x,B,O,ue,W=null)=>{M(O);const Ce=x.options,le={embed:oe(O=O[0],Ce,"embed"),explicit:oe(O,Ce,"explicit"),requireAll:oe(O,Ce,"requireAll")};x.link.hasOwnProperty(x.graph)||(x.link[x.graph]={});const ve=x.link[x.graph],Oe=function $(x,B,O,ue){const W={};for(const Ce of B){const le=x.graphMap[x.graph][Ce];ce(x,le,O,ue)&&(W[Ce]=le)}return W}(x,B,O,le),Me=Object.keys(Oe).sort();for(const Je of Me){const qe=Oe[Je];if(null===W?x.uniqueEmbeds={[x.graph]:{}}:x.uniqueEmbeds[x.graph]=x.uniqueEmbeds[x.graph]||{},"@link"===le.embed&&Je in ve){ne(ue,W,ve[Je]);continue}const we={"@id":Je};if(0===Je.indexOf("_:")&&C.addValue(x.bnodeMap,Je,we,{propertyIsArray:!0}),ve[Je]=we,("@first"===le.embed||"@last"===le.embed)&&x.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:O});if(x.embedded||!x.uniqueEmbeds[x.graph].hasOwnProperty(Je)){if(x.embedded&&("@never"===le.embed||j(qe,x.graph,x.subjectStack))){ne(ue,W,we);continue}if(x.embedded&&("@first"==le.embed||"@once"==le.embed)&&x.uniqueEmbeds[x.graph].hasOwnProperty(Je)){ne(ue,W,we);continue}if("@last"===le.embed&&Je in x.uniqueEmbeds[x.graph]&&K(x,Je),x.uniqueEmbeds[x.graph][Je]={parent:ue,property:W},x.subjectStack.push({subject:qe,graph:x.graph}),Je in x.graphMap){let Ne=!1,ke=null;"@graph"in O?(ke=O["@graph"][0],Ne=!("@merged"===Je||"@default"===Je),k.isObject(ke)||(ke={})):(Ne="@merged"!==x.graph,ke={}),Ne&&L.frame({...x,graph:Je,embedded:!1},Object.keys(x.graphMap[Je]).sort(),[ke],we,"@graph")}"@included"in O&&L.frame({...x,embedded:!1},B,O["@included"],we,"@included");for(const Ne of Object.keys(qe).sort())if(S(Ne)){if(we[Ne]=C.clone(qe[Ne]),"@type"===Ne)for(const ke of qe["@type"])0===ke.indexOf("_:")&&C.addValue(x.bnodeMap,ke,we,{propertyIsArray:!0})}else if(!le.explicit||Ne in O)for(const ke of qe[Ne]){const Ve=Ne in O?O[Ne]:P(le);if(b.isList(ke)){const me=O[Ne]&&O[Ne][0]&&O[Ne][0]["@list"]?O[Ne][0]["@list"]:P(le),Ee={"@list":[]};ne(we,Ne,Ee);const Ke=ke["@list"];for(const at of Ke)b.isSubjectReference(at)?L.frame({...x,embedded:!0},[at["@id"]],me,Ee,"@list"):ne(Ee,"@list",C.clone(at))}else b.isSubjectReference(ke)?L.frame({...x,embedded:!0},[ke["@id"]],Ve,we,Ne):U(Ve[0],ke)&&ne(we,Ne,C.clone(ke))}for(const Ne of Object.keys(O).sort()){if("@type"===Ne){if(!k.isObject(O[Ne][0])||!("@default"in O[Ne][0]))continue}else if(S(Ne))continue;const ke=O[Ne][0]||{};if(!oe(ke,Ce,"omitDefault")&&!(Ne in we)){let me="@null";"@default"in ke&&(me=C.clone(ke["@default"])),k.isArray(me)||(me=[me]),we[Ne]=[{"@preserve":me}]}}for(const Ne of Object.keys(O["@reverse"]||{}).sort()){const ke=O["@reverse"][Ne];for(const Ve of Object.keys(x.subjects))C.getValues(x.subjects[Ve],Ne).some(Ee=>Ee["@id"]===Je)&&(we["@reverse"]=we["@reverse"]||{},C.addValue(we["@reverse"],Ne,[],{propertyIsArray:!0}),L.frame({...x,embedded:!0},[Ve],ke,we["@reverse"][Ne],W))}ne(ue,W,we),x.subjectStack.pop()}}},L.cleanupNull=(x,B)=>{if(k.isArray(x))return x.map(ue=>L.cleanupNull(ue,B)).filter(ue=>ue);if("@null"===x)return null;if(k.isObject(x)){if("@id"in x){const O=x["@id"];if(B.link.hasOwnProperty(O)){const ue=B.link[O].indexOf(x);if(-1!==ue)return B.link[O][ue];B.link[O].push(x)}else B.link[O]=[x]}for(const O in x)x[O]=L.cleanupNull(x[O],B)}return x}},9767:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(1874),k=g(543),C=g(8254),{REGEX_BCP47:N,addValue:_}=g(3521),{handleEvent:y}=g(3855),{RDF_LIST:I,RDF_FIRST:L,RDF_REST:P,RDF_NIL:j,RDF_TYPE:oe,RDF_JSON_LITERAL:M,XSD_BOOLEAN:$,XSD_DOUBLE:ce,XSD_INTEGER:K,XSD_STRING:ie}=g(6982),ne={};function q(U,x,B,O){if(U.termType.endsWith("Node"))return{"@id":U.value};const ue={"@value":U.value};if(U.language)U.language.match(N)||O.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:U.language}},options:O}),ue["@language"]=U.language;else{let W=U.datatype.value;if(W||(W=ie),W===M){W="@json";try{ue["@value"]=JSON.parse(ue["@value"])}catch(Ce){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:ue["@value"],cause:Ce})}}if(x){if(W===$)"true"===ue["@value"]?ue["@value"]=!0:"false"===ue["@value"]&&(ue["@value"]=!1);else if(C.isNumeric(ue["@value"]))if(W===K){const Ce=parseInt(ue["@value"],10);Ce.toFixed(0)===ue["@value"]&&(ue["@value"]=Ce)}else W===ce&&(ue["@value"]=parseFloat(ue["@value"]));[$,K,ce,ie].includes(W)||(ue["@type"]=W)}else if("i18n-datatype"===B&&W.startsWith("https://www.w3.org/ns/i18n#")){const[,Ce,le]=W.split(/[#_]/);Ce.length>0&&(ue["@language"]=Ce,Ce.match(N)||O.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ce}},options:O})),ue["@direction"]=le}else W!==ie&&(ue["@type"]=W)}return ue}te.exports=ne,ne.fromRDF=function(){var U=S(function*(x,B){const{useRdfType:O=!1,useNativeTypes:ue=!1,rdfDirection:W=null}=B,Ce={},le={"@default":Ce},ve={};if(W){if("compound-literal"===W)throw new b("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:W});if("i18n-datatype"!==W)throw new b("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:W})}for(const Je of x){const qe="DefaultGraph"===Je.graph.termType?"@default":Je.graph.value;qe in le||(le[qe]={}),"@default"!==qe&&!(qe in Ce)&&(Ce[qe]={"@id":qe});const we=le[qe],Ne=Je.subject.value,ke=Je.predicate.value,Ve=Je.object;Ne in we||(we[Ne]={"@id":Ne});const me=we[Ne],Ee=Ve.termType.endsWith("Node");if(Ee&&!(Ve.value in we)&&(we[Ve.value]={"@id":Ve.value}),ke===oe&&!O&&Ee){_(me,"@type",Ve.value,{propertyIsArray:!0});continue}const Ke=q(Ve,ue,W,B);if(_(me,ke,Ke,{propertyIsArray:!0}),Ee)if(Ve.value===j){const at=we[Ve.value];"usages"in at||(at.usages=[]),at.usages.push({node:me,property:ke,value:Ke})}else ve[Ve.value]=!(Ve.value in ve)&&{node:me,property:ke,value:Ke}}for(const Je in le){const qe=le[Je];if(!(j in qe))continue;const we=qe[j];if(we.usages){for(let Ne of we.usages){let ke=Ne.node,Ve=Ne.property,me=Ne.value;const Ee=[],Ke=[];let at=Object.keys(ke).length;for(;Ve===P&&C.isObject(ve[ke["@id"]])&&C.isArray(ke[L])&&1===ke[L].length&&C.isArray(ke[P])&&1===ke[P].length&&(3===at||4===at&&C.isArray(ke["@type"])&&1===ke["@type"].length&&ke["@type"][0]===I)&&(Ee.push(ke[L][0]),Ke.push(ke["@id"]),Ne=ve[ke["@id"]],ke=Ne.node,Ve=Ne.property,me=Ne.value,at=Object.keys(ke).length,k.isBlankNode(ke)););delete me["@id"],me["@list"]=Ee.reverse();for(const Ye of Ke)delete qe[Ye]}delete we.usages}}const Oe=[],Me=Object.keys(Ce).sort();for(const Je of Me){const qe=Ce[Je];if(Je in le){const we=qe["@graph"]=[],Ne=le[Je],ke=Object.keys(Ne).sort();for(const Ve of ke){const me=Ne[Ve];k.isSubjectReference(me)||we.push(me)}}k.isSubjectReference(qe)||Oe.push(qe)}return Oe});return function(x,B){return U.apply(this,arguments)}}()},543:(te,J,g)=>{"use strict";const S=g(8254),b={};te.exports=b,b.isSubject=k=>!(!S.isObject(k)||"@value"in k||"@set"in k||"@list"in k)&&(Object.keys(k).length>1||!("@id"in k)),b.isSubjectReference=k=>S.isObject(k)&&1===Object.keys(k).length&&"@id"in k,b.isValue=k=>S.isObject(k)&&"@value"in k,b.isList=k=>S.isObject(k)&&"@list"in k,b.isGraph=k=>S.isObject(k)&&"@graph"in k&&1===Object.keys(k).filter(C=>"@id"!==C&&"@index"!==C).length,b.isSimpleGraph=k=>b.isGraph(k)&&!("@id"in k),b.isBlankNode=k=>{if(S.isObject(k)){if("@id"in k){const C=k["@id"];return!S.isString(C)||0===C.indexOf("_:")}return 0===Object.keys(k).length||!("@value"in k||"@set"in k||"@list"in k)}return!1}},7661:(te,J,g)=>{var S=g(7156).default;const b=g(1986),k=g(8924),C=g(3521),N=g(4198),_=C.IdentifierIssuer,y=g(1874),I=g(1072),L=g(7260),{expand:P}=g(3860),{flatten:j}=g(8295),{fromRDF:oe}=g(9767),{toRDF:M}=g(240),{frameMergedOrDefault:$,cleanupNull:ce}=g(9193),{isArray:K,isObject:ie,isString:ne}=g(8254),{isSubjectReference:q}=g(543),{expandIri:U,getInitialContext:x,process:B,processingMode:O}=g(9611),{compact:ue,compactIri:W}=g(8809),{createNodeMap:Ce,createMergedNodeMap:le,mergeNodeMaps:ve}=g(9783),{logEventHandler:Oe,logWarningEventHandler:Me,safeEventHandler:Je,setDefaultEventHandler:qe,setupEventHandler:we,strictEventHandler:Ne,unhandledEventHandler:ke}=g(3855),Ve=function(Ee){const Ke={},Ye=new I({max:100});function _e(G,{documentLoader:R=Ee.documentLoader,...se}){if(G&&"compactionMap"in G)throw new y('"compactionMap" not supported.',"jsonld.OptionsError");if(G&&"expansionMap"in G)throw new y('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:R},se,G,{eventHandler:we({options:G})})}return Ee.compact=function(){var G=S(function*(R,se,V){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===se)throw new y("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===R)return null;let Fe;(V=_e(V,{base:ne(R)?R:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new N({sharedCache:Ye})})).link&&(V.skipExpansion=!0),V.compactToRelative||delete V.base,Fe=V.skipExpansion?R:yield Ee.expand(R,V);const et=yield Ee.processContext(x(V),se,V);let fe=yield ue({activeCtx:et,element:Fe,options:V});V.compactArrays&&!V.graph&&K(fe)?1===fe.length?fe=fe[0]:0===fe.length&&(fe={}):V.graph&&ie(fe)&&(fe=[fe]),ie(se)&&"@context"in se&&(se=se["@context"]),se=C.clone(se),K(se)||(se=[se]);const Q=se;se=[];for(let A=0;A<Q.length;++A)(!ie(Q[A])||Object.keys(Q[A]).length>0)&&se.push(Q[A]);const X=se.length>0;if(1===se.length&&(se=se[0]),K(fe)){const A=W({activeCtx:et,iri:"@graph",relativeTo:{vocab:!0}}),F=fe;fe={},X&&(fe["@context"]=se),fe[A]=F}else if(ie(fe)&&X){const A=fe;fe={"@context":se};for(const F in A)fe[F]=A[F]}return fe});return function(R,se,V){return G.apply(this,arguments)}}(),Ee.expand=function(){var G=S(function*(R,se){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const V={},Fe=[];if("expandContext"in(se=_e(se,{keepFreeFloatingNodes:!1,contextResolver:new N({sharedCache:Ye})}))){const X=C.clone(se.expandContext);V.expandContext=ie(X)&&"@context"in X?X:{"@context":X},Fe.push(V.expandContext)}let et;if(ne(R)){const X=yield Ee.get(R,se);et=X.documentUrl,V.input=X.document,X.contextUrl&&(V.remoteContext={"@context":X.contextUrl},Fe.push(V.remoteContext))}else V.input=C.clone(R);"base"in se||(se.base=et||"");let fe=x(se);for(const X of Fe)fe=yield B({activeCtx:fe,localCtx:X,options:se});let Q=yield P({activeCtx:fe,element:V.input,options:se});return ie(Q)&&"@graph"in Q&&1===Object.keys(Q).length?Q=Q["@graph"]:null===Q&&(Q=[]),K(Q)||(Q=[Q]),Q});return function(R,se){return G.apply(this,arguments)}}(),Ee.flatten=function(){var G=S(function*(R,se,V){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");se="function"==typeof se?null:se||null,V=_e(V,{base:ne(R)?R:"",contextResolver:new N({sharedCache:Ye})});const Fe=yield Ee.expand(R,V),et=j(Fe);return null===se?et:(V.graph=!0,V.skipExpansion=!0,yield Ee.compact(et,se,V))});return function(R,se,V){return G.apply(this,arguments)}}(),Ee.frame=function(){var G=S(function*(R,se,V){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(V=_e(V,{base:ne(R)?R:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new N({sharedCache:Ye})}),ne(se)){const pe=yield Ee.get(se,V);if(se=pe.document,pe.contextUrl){let ze=se["@context"];ze?K(ze)?ze.push(pe.contextUrl):ze=[ze,pe.contextUrl]:ze=pe.contextUrl,se["@context"]=ze}}const Fe=se&&se["@context"]||{},et=yield Ee.processContext(x(V),Fe,V);V.hasOwnProperty("omitGraph")||(V.omitGraph=O(et,1.1)),V.hasOwnProperty("pruneBlankNodeIdentifiers")||(V.pruneBlankNodeIdentifiers=O(et,1.1));const fe=yield Ee.expand(R,V),Q={...V};Q.isFrame=!0,Q.keepFreeFloatingNodes=!0;const X=yield Ee.expand(se,Q),A=Object.keys(se).map(pe=>U(et,pe,{vocab:!0}));Q.merged=!A.includes("@graph"),Q.is11=O(et,1.1);const F=$(fe,X,Q);Q.graph=!V.omitGraph,Q.skipExpansion=!0,Q.link={},Q.framing=!0;let de=yield Ee.compact(F,Fe,Q);return Q.link={},de=ce(de,Q),de});return function(R,se,V){return G.apply(this,arguments)}}(),Ee.link=function(){var G=S(function*(R,se,V){const Fe={};return se&&(Fe["@context"]=se),Fe["@embed"]="@link",Ee.frame(R,Fe,V)});return function(R,se,V){return G.apply(this,arguments)}}(),Ee.normalize=Ee.canonize=function(){var G=S(function*(R,se){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(se=_e(se,{base:ne(R)?R:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new N({sharedCache:Ye})}))){if("application/n-quads"!==se.inputFormat&&"application/nquads"!==se.inputFormat)throw new y("Unknown canonicalization input format.","jsonld.CanonizeError");const et=L.parse(R);return b.canonize(et,se)}const V={...se};delete V.format,V.produceGeneralizedRdf=!1;const Fe=yield Ee.toRDF(R,V);return b.canonize(Fe,se)});return function(R,se){return G.apply(this,arguments)}}(),Ee.fromRDF=function(){var G=S(function*(R,se){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");se=_e(se,{format:ne(R)?"application/n-quads":void 0});const{format:V}=se;let{rdfParser:Fe}=se;if(V){if(Fe=Fe||Ke[V],!Fe)throw new y("Unknown input format.","jsonld.UnknownFormat",{format:V})}else Fe=()=>R;const et=yield Fe(R);return oe(et,se)});return function(R,se){return G.apply(this,arguments)}}(),Ee.toRDF=function(){var G=S(function*(R,se){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let V;V=(se=_e(se,{base:ne(R)?R:"",skipExpansion:!1,contextResolver:new N({sharedCache:Ye})})).skipExpansion?R:yield Ee.expand(R,se);const Fe=M(V,se);if(se.format){if("application/n-quads"===se.format||"application/nquads"===se.format)return L.serialize(Fe);throw new y("Unknown output format.","jsonld.UnknownFormat",{format:se.format})}return Fe});return function(R,se){return G.apply(this,arguments)}}(),Ee.createNodeMap=function(){var G=S(function*(R,se){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");se=_e(se,{base:ne(R)?R:"",contextResolver:new N({sharedCache:Ye})});const V=yield Ee.expand(R,se);return le(V,se)});return function(R,se){return G.apply(this,arguments)}}(),Ee.merge=function(){var G=S(function*(R,se,V){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!K(R))throw new TypeError('Could not merge, "docs" must be an array.');se="function"==typeof se?null:se||null,V=_e(V,{contextResolver:new N({sharedCache:Ye})});const Fe=yield Promise.all(R.map(pe=>{const ze={...V};return Ee.expand(pe,ze)}));let et=!0;"mergeNodes"in V&&(et=V.mergeNodes);const fe=V.issuer||new _("_:b"),Q={"@default":{}};for(let pe=0;pe<Fe.length;++pe){const ze=C.relabelBlankNodes(Fe[pe],{issuer:new _("_:b"+pe+"-")}),Ge=et||0===pe?Q:{"@default":{}};if(Ce(ze,Ge,"@default",fe),Ge!==Q)for(const gt in Ge){const Pt=Ge[gt];if(!(gt in Q)){Q[gt]=Pt;continue}const yt=Q[gt];for(const Gt in Pt)Gt in yt||(yt[Gt]=Pt[Gt])}}const X=ve(Q),A=[],F=Object.keys(X).sort();for(let pe=0;pe<F.length;++pe){const ze=X[F[pe]];q(ze)||A.push(ze)}return null===se?A:(V.graph=!0,V.skipExpansion=!0,yield Ee.compact(A,se,V))});return function(R,se,V){return G.apply(this,arguments)}}(),Object.defineProperty(Ee,"documentLoader",{get:()=>Ee._documentLoader,set:G=>Ee._documentLoader=G}),Ee.documentLoader=function(){var G=S(function*(R){throw new y("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:R})});return function(R){return G.apply(this,arguments)}}(),Ee.get=function(){var G=S(function*(R,se){let V;V="function"==typeof se.documentLoader?se.documentLoader:Ee.documentLoader;const Fe=yield V(R);try{if(!Fe.document)throw new y("No remote document found at the given URL.","jsonld.NullRemoteDocument");ne(Fe.document)&&(Fe.document=JSON.parse(Fe.document))}catch(et){throw new y("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:et,remoteDoc:Fe})}return Fe});return function(R,se){return G.apply(this,arguments)}}(),Ee.processContext=function(){var G=S(function*(R,se,V){return V=_e(V,{base:"",contextResolver:new N({sharedCache:Ye})}),null===se?x(V):(se=C.clone(se),ie(se)&&"@context"in se||(se={"@context":se}),B({activeCtx:R,localCtx:se,options:V}))});return function(R,se,V){return G.apply(this,arguments)}}(),Ee.getContextValue=g(9611).getContextValue,Ee.documentLoaders={},Ee.useDocumentLoader=function(G){if(!(G in Ee.documentLoaders))throw new y('Unknown document loader type: "'+G+'"',"jsonld.UnknownDocumentLoader",{type:G});Ee.documentLoader=Ee.documentLoaders[G].apply(Ee,Array.prototype.slice.call(arguments,1))},Ee.registerRDFParser=function(G,R){Ke[G]=R},Ee.unregisterRDFParser=function(G){delete Ke[G]},Ee.registerRDFParser("application/n-quads",L.parse),Ee.registerRDFParser("application/nquads",L.parse),Ee.url=g(2651),Ee.logEventHandler=Oe,Ee.logWarningEventHandler=Me,Ee.safeEventHandler=Je,Ee.setDefaultEventHandler=qe,Ee.strictEventHandler=Ne,Ee.unhandledEventHandler=ke,Ee.util=C,Object.assign(Ee,C),Ee.promises=Ee,Ee.RequestQueue=g(4044),Ee.JsonLdProcessor=g(1828)(Ee),k.setupGlobals(Ee),k.setupDocumentLoaders(Ee),Ee},me=function(){return Ve(function(){return me()})};Ve(me),te.exports=me},9783:(te,J,g)=>{"use strict";const{isKeyword:S}=g(9611),b=g(543),k=g(8254),C=g(3521),N=g(1874),_={};te.exports=_,_.createMergedNodeMap=(y,I)=>{const L=(I=I||{}).issuer||new C.IdentifierIssuer("_:b"),P={"@default":{}};return _.createNodeMap(y,P,"@default",L),_.mergeNodeMaps(P)},_.createNodeMap=(y,I,L,P,j,oe)=>{if(k.isArray(y)){for(const K of y)_.createNodeMap(K,I,L,P,void 0,oe);return}if(!k.isObject(y))return void(oe&&oe.push(y));if(b.isValue(y)){if("@type"in y){let K=y["@type"];0===K.indexOf("_:")&&(y["@type"]=K=P.getId(K))}return void(oe&&oe.push(y))}if(oe&&b.isList(y)){const K=[];return _.createNodeMap(y["@list"],I,L,P,j,K),void oe.push({"@list":K})}if("@type"in y){const K=y["@type"];for(const ie of K)0===ie.indexOf("_:")&&P.getId(ie)}k.isUndefined(j)&&(j=b.isBlankNode(y)?P.getId(y["@id"]):y["@id"]),oe&&oe.push({"@id":j});const M=I[L],$=M[j]=M[j]||{};$["@id"]=j;const ce=Object.keys(y).sort();for(let K of ce){if("@id"===K)continue;if("@reverse"===K){const ne={"@id":j},q=y["@reverse"];for(const U in q){const x=q[U];for(const B of x){let O=B["@id"];b.isBlankNode(B)&&(O=P.getId(O)),_.createNodeMap(B,I,L,P,O),C.addValue(M[O],U,ne,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===K){j in I||(I[j]={}),_.createNodeMap(y[K],I,j,P);continue}if("@included"===K){_.createNodeMap(y[K],I,L,P);continue}if("@type"!==K&&S(K)){if("@index"===K&&K in $&&(y[K]!==$[K]||y[K]["@id"]!==$[K]["@id"]))throw new N("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:$});$[K]=y[K];continue}const ie=y[K];if(0===K.indexOf("_:")&&(K=P.getId(K)),0!==ie.length)for(let ne of ie)if("@type"===K&&(ne=0===ne.indexOf("_:")?P.getId(ne):ne),b.isSubject(ne)||b.isSubjectReference(ne)){if("@id"in ne&&!ne["@id"])continue;const q=b.isBlankNode(ne)?P.getId(ne["@id"]):ne["@id"];C.addValue($,K,{"@id":q},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ne,I,L,P,q)}else if(b.isValue(ne))C.addValue($,K,ne,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(ne)){const q=[];_.createNodeMap(ne["@list"],I,L,P,j,q),ne={"@list":q},C.addValue($,K,ne,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ne,I,L,P,j),C.addValue($,K,ne,{propertyIsArray:!0,allowDuplicate:!1});else C.addValue($,K,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=y=>{const I={};for(const L of Object.keys(y).sort())for(const P of Object.keys(y[L]).sort()){const j=y[L][P];P in I||(I[P]={"@id":P});const oe=I[P];for(const M of Object.keys(j).sort())if(S(M)&&"@type"!==M)oe[M]=C.clone(j[M]);else for(const $ of j[M])C.addValue(oe,M,C.clone($),{propertyIsArray:!0,allowDuplicate:!1})}return I},_.mergeNodeMaps=y=>{const I=y["@default"],L=Object.keys(y).sort();for(const P of L){if("@default"===P)continue;const j=y[P];let oe=I[P];oe?"@graph"in oe||(oe["@graph"]=[]):I[P]=oe={"@id":P,"@graph":[]};const M=oe["@graph"];for(const $ of Object.keys(j).sort()){const ce=j[$];b.isSubjectReference(ce)||M.push(ce)}}return I}},8924:(te,J,g)=>{"use strict";const S=g(627),b={};te.exports=b,b.setupDocumentLoaders=function(k){typeof XMLHttpRequest<"u"&&(k.documentLoaders.xhr=S,k.useDocumentLoader("xhr"))},b.setupGlobals=function(k){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:k.JsonLdProcessor})}},240:(te,J,g)=>{"use strict";const{createNodeMap:S}=g(9783),{isKeyword:b}=g(9611),k=g(543),C=g(5041),N=g(1874),_=g(8254),y=g(3521),{handleEvent:I}=g(3855),{RDF_FIRST:L,RDF_REST:P,RDF_NIL:j,RDF_TYPE:oe,RDF_JSON_LITERAL:M,RDF_LANGSTRING:$,XSD_BOOLEAN:ce,XSD_DOUBLE:K,XSD_INTEGER:ie,XSD_STRING:ne}=g(6982),{isAbsolute:q}=g(2651),U={};function x(ue,W,Ce,le,ve){const Oe=Object.keys(W).sort();for(const Me of Oe){const Je=W[Me],qe=Object.keys(Je).sort();for(let we of qe){const Ne=Je[we];if("@type"===we)we=oe;else if(b(we))continue;for(const ke of Ne){const Ve={termType:Me.startsWith("_:")?"BlankNode":"NamedNode",value:Me};if(!q(Me)){ve.eventHandler&&I({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Me}},options:ve});continue}const me={termType:we.startsWith("_:")?"BlankNode":"NamedNode",value:we};if(!q(we)){ve.eventHandler&&I({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:we}},options:ve});continue}if("BlankNode"===me.termType&&!ve.produceGeneralizedRdf){ve.eventHandler&&I({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:le.getOldIds().find(Ke=>le.getId(Ke)===we)}},options:ve});continue}const Ee=O(ke,le,ue,Ce,ve.rdfDirection,ve);Ee&&ue.push({subject:Ve,predicate:me,object:Ee,graph:Ce})}}}}function O(ue,W,Ce,le,ve,Oe){const Me={};if(k.isValue(ue)){Me.termType="Literal",Me.value=void 0,Me.datatype={termType:"NamedNode"};let Je=ue["@value"];const qe=ue["@type"]||null;if("@json"===qe)Me.value=C(Je),Me.datatype.value=M;else if(_.isBoolean(Je))Me.value=Je.toString(),Me.datatype.value=qe||ce;else if(_.isDouble(Je)||qe===K)_.isDouble(Je)||(Je=parseFloat(Je)),Me.value=Je.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Me.datatype.value=qe||K;else if(_.isNumber(Je))Me.value=Je.toFixed(0),Me.datatype.value=qe||ie;else if("@direction"in ue&&"i18n-datatype"===ve){const we=(ue["@language"]||"").toLowerCase();Me.datatype.value=`https://www.w3.org/ns/i18n#${we}_${ue["@direction"]}`,Me.value=Je}else{if("@direction"in ue&&"compound-literal"===ve)throw new N("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:ve});if("@direction"in ue&&ve)throw new N("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:ve});"@language"in ue?("@direction"in ue&&!ve&&Oe.eventHandler&&I({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Me.value}},options:Oe}),Me.value=Je,Me.datatype.value=qe||$,Me.language=ue["@language"]):("@direction"in ue&&!ve&&Oe.eventHandler&&I({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Me.value}},options:Oe}),Me.value=Je,Me.datatype.value=qe||ne)}}else if(k.isList(ue)){const Je=function B(ue,W,Ce,le,ve,Oe){const Me={termType:"NamedNode",value:L},Je={termType:"NamedNode",value:P},qe={termType:"NamedNode",value:j},we=ue.pop(),Ne=we?{termType:"BlankNode",value:W.getId()}:qe;let ke=Ne;for(const Ve of ue){const me=O(Ve,W,Ce,le,ve,Oe),Ee={termType:"BlankNode",value:W.getId()};Ce.push({subject:ke,predicate:Me,object:me,graph:le}),Ce.push({subject:ke,predicate:Je,object:Ee,graph:le}),ke=Ee}if(we){const Ve=O(we,W,Ce,le,ve,Oe);Ce.push({subject:ke,predicate:Me,object:Ve,graph:le}),Ce.push({subject:ke,predicate:Je,object:qe,graph:le})}return Ne}(ue["@list"],W,Ce,le,ve,Oe);Me.termType=Je.termType,Me.value=Je.value}else{const Je=_.isObject(ue)?ue["@id"]:ue;Me.termType=Je.startsWith("_:")?"BlankNode":"NamedNode",Me.value=Je}return"NamedNode"!==Me.termType||q(Me.value)?Me:(Oe.eventHandler&&I({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Me.value}},options:Oe}),null)}te.exports=U,U.toRDF=(ue,W)=>{const Ce=new y.IdentifierIssuer("_:b"),le={"@default":{}};S(ue,le,"@default",Ce);const ve=[],Oe=Object.keys(le).sort();for(const Me of Oe){let Je;if("@default"===Me)Je={termType:"DefaultGraph",value:""};else{if(!q(Me)){W.eventHandler&&I({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Me}},options:W});continue}Je=Me.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Je.value=Me}x(ve,le[Me],Je,Ce,W)}return ve}},8254:te=>{"use strict";const J={};te.exports=J,J.isArray=Array.isArray,J.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),J.isDouble=g=>J.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),J.isEmptyObject=g=>J.isObject(g)&&0===Object.keys(g).length,J.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),J.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),J.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),J.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),J.isUndefined=g=>typeof g>"u"},2651:(te,J,g)=>{"use strict";const S=g(8254),b={};te.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(C,N)=>{const _={},y=b.parsers[N||"full"],I=y.regex.exec(C);let L=y.keys.length;for(;L--;)_[y.keys[L]]=void 0===I[L]?null:I[L];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=b.removeDotSegments(_.path),_},b.prependBase=(C,N)=>{if(null===C||b.isAbsolute(N))return N;(!C||S.isString(C))&&(C=b.parse(C||""));const _=b.parse(N),y={protocol:C.protocol||""};if(null!==_.authority)y.authority=_.authority,y.path=_.path,y.query=_.query;else if(y.authority=C.authority,""===_.path)y.path=C.path,y.query=null!==_.query?_.query:C.query;else{if(0===_.path.indexOf("/"))y.path=_.path;else{let L=C.path;L=L.substr(0,L.lastIndexOf("/")+1),(L.length>0||C.authority)&&"/"!==L.substr(-1)&&(L+="/"),L+=_.path,y.path=L}y.query=_.query}""!==_.path&&(y.path=b.removeDotSegments(y.path));let I=y.protocol;return null!==y.authority&&(I+="//"+y.authority),I+=y.path,null!==y.query&&(I+="?"+y.query),null!==_.fragment&&(I+="#"+_.fragment),""===I&&(I="./"),I},b.removeBase=(C,N)=>{if(null===C)return N;(!C||S.isString(C))&&(C=b.parse(C||""));let _="";if(""!==C.href?_+=(C.protocol||"")+"//"+(C.authority||""):N.indexOf("//")&&(_+="//"),0!==N.indexOf(_))return N;const y=b.parse(N.substr(_.length)),I=C.normalizedPath.split("/"),L=y.normalizedPath.split("/"),P=y.fragment||y.query?0:1;for(;I.length>0&&L.length>P&&I[0]===L[0];)I.shift(),L.shift();let j="";if(I.length>0){I.pop();for(let oe=0;oe<I.length;++oe)j+="../"}return j+=L.join("/"),null!==y.query&&(j+="?"+y.query),null!==y.fragment&&(j+="#"+y.fragment),""===j&&(j="./"),j},b.removeDotSegments=C=>{if(0===C.length)return"";const N=C.split("/"),_=[];for(;N.length>0;){const y=N.shift(),I=0===N.length;"."!==y?".."!==y?_.push(y):(_.pop(),I&&_.push("")):I&&_.push("")}return"/"===C[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const k=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=C=>S.isString(C)&&k.test(C),b.isRelative=C=>S.isString(C)},3521:(te,J,g)=>{"use strict";const S=g(543),b=g(8254),k=g(1986).IdentifierIssuer,C=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,y=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,I=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,P_headers_accept="application/ld+json, application/json",j={};function oe(M,$){if(b.isArray($))for(let ce=0;ce<$.length;++ce)$[ce]=oe(M,$[ce]);else if(S.isList($))$["@list"]=oe(M,$["@list"]);else if(b.isObject($)){S.isBlankNode($)&&($["@id"]=M.getId($["@id"]));const ce=Object.keys($).sort();for(let K=0;K<ce.length;++K){const ie=ce[K];"@id"!==ie&&($[ie]=oe(M,$[ie]))}}return $}te.exports=j,j.IdentifierIssuer=k,j.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,j.REGEX_KEYWORD=/^@[a-zA-Z]+$/,j.clone=function(M){if(M&&"object"==typeof M){let $;if(b.isArray(M)){$=[];for(let ce=0;ce<M.length;++ce)$[ce]=j.clone(M[ce])}else if(M instanceof Map){$=new Map;for(const[ce,K]of M)$.set(ce,j.clone(K))}else if(M instanceof Set){$=new Set;for(const ce of M)$.add(j.clone(ce))}else if(b.isObject(M)){$={};for(const ce in M)$[ce]=j.clone(M[ce])}else $=M.toString();return $}return M},j.asArray=function(M){return Array.isArray(M)?M:[M]},j.buildHeaders=(M={})=>{if(Object.keys(M).some(ce=>"accept"===ce.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+P_headers_accept+'" is supported.');return Object.assign({Accept:P_headers_accept},M)},j.parseLinkHeader=M=>{const $={},ce=M.match(_);for(let K=0;K<ce.length;++K){let ie=ce[K].match(y);if(!ie)continue;const ne={target:ie[1]},q=ie[2];for(;ie=I.exec(q);)ne[ie[1]]=void 0===ie[2]?ie[3]:ie[2];const U=ne.rel||"";Array.isArray($[U])?$[U].push(ne):$[U]=$.hasOwnProperty(U)?[$[U],ne]:ne}return $},j.validateTypeValue=(M,$)=>{if(!(b.isString(M)||b.isArray(M)&&M.every(ce=>b.isString(ce)))){if($&&b.isObject(M))switch(Object.keys(M).length){case 0:return;case 1:if("@default"in M&&j.asArray(M["@default"]).every(ce=>b.isString(ce)))return}throw new C('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:M})}},j.hasProperty=(M,$)=>{if(M.hasOwnProperty($)){const ce=M[$];return!b.isArray(ce)||ce.length>0}return!1},j.hasValue=(M,$,ce)=>{if(j.hasProperty(M,$)){let K=M[$];const ie=S.isList(K);if(b.isArray(K)||ie){ie&&(K=K["@list"]);for(let ne=0;ne<K.length;++ne)if(j.compareValues(ce,K[ne]))return!0}else if(!b.isArray(ce))return j.compareValues(ce,K)}return!1},j.addValue=(M,$,ce,K)=>{if("propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1),"valueIsArray"in K||(K.valueIsArray=!1),"allowDuplicate"in K||(K.allowDuplicate=!0),"prependValue"in K||(K.prependValue=!1),K.valueIsArray)M[$]=ce;else if(b.isArray(ce)){0===ce.length&&K.propertyIsArray&&!M.hasOwnProperty($)&&(M[$]=[]),K.prependValue&&(ce=ce.concat(M[$]),M[$]=[]);for(let ie=0;ie<ce.length;++ie)j.addValue(M,$,ce[ie],K)}else if(M.hasOwnProperty($)){const ie=!K.allowDuplicate&&j.hasValue(M,$,ce);!b.isArray(M[$])&&(!ie||K.propertyIsArray)&&(M[$]=[M[$]]),ie||(K.prependValue?M[$].unshift(ce):M[$].push(ce))}else M[$]=K.propertyIsArray?[ce]:ce},j.getValues=(M,$)=>[].concat(M[$]||[]),j.removeProperty=(M,$)=>{delete M[$]},j.removeValue=(M,$,ce,K)=>{"propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1);const ie=j.getValues(M,$).filter(ne=>!j.compareValues(ne,ce));0===ie.length?j.removeProperty(M,$):M[$]=1!==ie.length||K.propertyIsArray?ie:ie[0]},j.relabelBlankNodes=(M,$)=>oe(($=$||{}).issuer||new k("_:b"),M),j.compareValues=(M,$)=>!!(M===$||S.isValue(M)&&S.isValue($)&&M["@value"]===$["@value"]&&M["@type"]===$["@type"]&&M["@language"]===$["@language"]&&M["@index"]===$["@index"])||!!(b.isObject(M)&&"@id"in M&&b.isObject($)&&"@id"in $)&&M["@id"]===$["@id"],j.compareShortestLeast=(M,$)=>M.length<$.length?-1:$.length<M.length?1:M===$?0:M<$?-1:1},5041:te=>{"use strict";te.exports=function J(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((S,b,k)=>S+(0===k?"":",")+J(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(g).sort().reduce((S,b,k)=>void 0===g[b]||"symbol"==typeof g[b]?S:S+(0===S.length?"":",")+J(b)+":"+J(g[b]),"")+"}"}},1072:(te,J,g)=>{"use strict";const S=g(4439),b=Symbol("max"),k=Symbol("length"),C=Symbol("lengthCalculator"),N=Symbol("allowStale"),_=Symbol("maxAge"),y=Symbol("dispose"),I=Symbol("noDisposeOnSet"),L=Symbol("lruList"),P=Symbol("cache"),j=Symbol("updateAgeOnGet"),oe=()=>1,$=(U,x,B)=>{const O=U[P].get(x);if(O){const ue=O.value;if(ce(U,ue)){if(ie(U,O),!U[N])return}else B&&(U[j]&&(O.value.now=Date.now()),U[L].unshiftNode(O));return ue.value}},ce=(U,x)=>{if(!x||!x.maxAge&&!U[_])return!1;const B=Date.now()-x.now;return x.maxAge?B>x.maxAge:U[_]&&B>U[_]},K=U=>{if(U[k]>U[b])for(let x=U[L].tail;U[k]>U[b]&&null!==x;){const B=x.prev;ie(U,x),x=B}},ie=(U,x)=>{if(x){const B=x.value;U[y]&&U[y](B.key,B.value),U[k]-=B.length,U[P].delete(B.key),U[L].removeNode(x)}};class ne{constructor(x,B,O,ue,W){this.key=x,this.value=B,this.length=O,this.now=ue,this.maxAge=W||0}}const q=(U,x,B,O)=>{let ue=B.value;ce(U,ue)&&(ie(U,B),U[N]||(ue=void 0)),ue&&x.call(O,ue.value,ue.key,U)};te.exports=class M{constructor(x){if("number"==typeof x&&(x={max:x}),x||(x={}),x.max&&("number"!=typeof x.max||x.max<0))throw new TypeError("max must be a non-negative number");this[b]=x.max||1/0;const O=x.length||oe;if(this[C]="function"!=typeof O?oe:O,this[N]=x.stale||!1,x.maxAge&&"number"!=typeof x.maxAge)throw new TypeError("maxAge must be a number");this[_]=x.maxAge||0,this[y]=x.dispose,this[I]=x.noDisposeOnSet||!1,this[j]=x.updateAgeOnGet||!1,this.reset()}set max(x){if("number"!=typeof x||x<0)throw new TypeError("max must be a non-negative number");this[b]=x||1/0,K(this)}get max(){return this[b]}set allowStale(x){this[N]=!!x}get allowStale(){return this[N]}set maxAge(x){if("number"!=typeof x)throw new TypeError("maxAge must be a non-negative number");this[_]=x,K(this)}get maxAge(){return this[_]}set lengthCalculator(x){"function"!=typeof x&&(x=oe),x!==this[C]&&(this[C]=x,this[k]=0,this[L].forEach(B=>{B.length=this[C](B.value,B.key),this[k]+=B.length})),K(this)}get lengthCalculator(){return this[C]}get length(){return this[k]}get itemCount(){return this[L].length}rforEach(x,B){B=B||this;for(let O=this[L].tail;null!==O;){const ue=O.prev;q(this,x,O,B),O=ue}}forEach(x,B){B=B||this;for(let O=this[L].head;null!==O;){const ue=O.next;q(this,x,O,B),O=ue}}keys(){return this[L].toArray().map(x=>x.key)}values(){return this[L].toArray().map(x=>x.value)}reset(){this[y]&&this[L]&&this[L].length&&this[L].forEach(x=>this[y](x.key,x.value)),this[P]=new Map,this[L]=new S,this[k]=0}dump(){return this[L].map(x=>!ce(this,x)&&{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[L]}set(x,B,O){if((O=O||this[_])&&"number"!=typeof O)throw new TypeError("maxAge must be a number");const ue=O?Date.now():0,W=this[C](B,x);if(this[P].has(x)){if(W>this[b])return ie(this,this[P].get(x)),!1;const ve=this[P].get(x).value;return this[y]&&(this[I]||this[y](x,ve.value)),ve.now=ue,ve.maxAge=O,ve.value=B,this[k]+=W-ve.length,ve.length=W,this.get(x),K(this),!0}const Ce=new ne(x,B,W,ue,O);return Ce.length>this[b]?(this[y]&&this[y](x,B),!1):(this[k]+=Ce.length,this[L].unshift(Ce),this[P].set(x,this[L].head),K(this),!0)}has(x){if(!this[P].has(x))return!1;const B=this[P].get(x).value;return!ce(this,B)}get(x){return $(this,x,!0)}peek(x){return $(this,x,!1)}pop(){const x=this[L].tail;return x?(ie(this,x),x.value):null}del(x){ie(this,this[P].get(x))}load(x){this.reset();const B=Date.now();for(let O=x.length-1;O>=0;O--){const ue=x[O],W=ue.e||0;if(0===W)this.set(ue.k,ue.v);else{const Ce=W-B;Ce>0&&this.set(ue.k,ue.v,Ce)}}}prune(){this[P].forEach((x,B)=>$(this,B,!1))}}},6506:(te,J,g)=>{var k=g(8745)(g(8492),"DataView");te.exports=k},9618:(te,J,g)=>{var S=g(5602),b=g(1499),k=g(2990),C=g(480),N=g(4469);function _(y){var I=-1,L=null==y?0:y.length;for(this.clear();++I<L;){var P=y[I];this.set(P[0],P[1])}}_.prototype.clear=S,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=C,_.prototype.set=N,te.exports=_},3597:(te,J,g)=>{var S=g(9365),b=g(9343),k=g(4779),C=g(1509),N=g(7137);function _(y){var I=-1,L=null==y?0:y.length;for(this.clear();++I<L;){var P=y[I];this.set(P[0],P[1])}}_.prototype.clear=S,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=C,_.prototype.set=N,te.exports=_},1136:(te,J,g)=>{var k=g(8745)(g(8492),"Map");te.exports=k},1811:(te,J,g)=>{var S=g(3413),b=g(5419),k=g(7253),C=g(1115),N=g(6648);function _(y){var I=-1,L=null==y?0:y.length;for(this.clear();++I<L;){var P=y[I];this.set(P[0],P[1])}}_.prototype.clear=S,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=C,_.prototype.set=N,te.exports=_},641:(te,J,g)=>{var k=g(8745)(g(8492),"Promise");te.exports=k},1732:(te,J,g)=>{var k=g(8745)(g(8492),"Set");te.exports=k},5960:(te,J,g)=>{var S=g(1811),b=g(6151),k=g(2154);function C(N){var _=-1,y=null==N?0:N.length;for(this.__data__=new S;++_<y;)this.add(N[_])}C.prototype.add=C.prototype.push=b,C.prototype.has=k,te.exports=C},1339:(te,J,g)=>{var S=g(3597),b=g(9488),k=g(5943),C=g(5456),N=g(4793),_=g(8689);function y(I){var L=this.__data__=new S(I);this.size=L.size}y.prototype.clear=b,y.prototype.delete=k,y.prototype.get=C,y.prototype.has=N,y.prototype.set=_,te.exports=y},1763:(te,J,g)=>{var S=g(8492);te.exports=S.Symbol},2760:(te,J,g)=>{var S=g(8492);te.exports=S.Uint8Array},6413:(te,J,g)=>{var k=g(8745)(g(8492),"WeakMap");te.exports=k},7910:te=>{te.exports=function J(g,S,b){switch(b.length){case 0:return g.call(S);case 1:return g.call(S,b[0]);case 2:return g.call(S,b[0],b[1]);case 3:return g.call(S,b[0],b[1],b[2])}return g.apply(S,b)}},2134:te=>{te.exports=function J(g,S){for(var b=-1,k=null==g?0:g.length,C=0,N=[];++b<k;){var _=g[b];S(_,b,g)&&(N[C++]=_)}return N}},1384:(te,J,g)=>{var S=g(5025),b=g(1955),k=g(2261),C=g(7525),N=g(5188),_=g(4868),I=Object.prototype.hasOwnProperty;te.exports=function L(P,j){var oe=k(P),M=!oe&&b(P),$=!oe&&!M&&C(P),ce=!oe&&!M&&!$&&_(P),K=oe||M||$||ce,ie=K?S(P.length,String):[],ne=ie.length;for(var q in P)(j||I.call(P,q))&&(!K||!("length"==q||$&&("offset"==q||"parent"==q)||ce&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||N(q,ne)))&&ie.push(q);return ie}},3880:te=>{te.exports=function J(g,S){for(var b=-1,k=null==g?0:g.length,C=Array(k);++b<k;)C[b]=S(g[b],b,g);return C}},7853:te=>{te.exports=function J(g,S){for(var b=-1,k=S.length,C=g.length;++b<k;)g[C+b]=S[b];return g}},5916:te=>{te.exports=function J(g,S){for(var b=-1,k=null==g?0:g.length;++b<k;)if(S(g[b],b,g))return!0;return!1}},4056:(te,J,g)=>{var S=g(7826);te.exports=function b(k,C){for(var N=k.length;N--;)if(S(k[N][0],C))return N;return-1}},5103:(te,J,g)=>{var S=g(7794),k=g(9386)(S);te.exports=k},1883:(te,J,g)=>{var S=g(7853),b=g(2241);te.exports=function k(C,N,_,y,I){var L=-1,P=C.length;for(_||(_=b),I||(I=[]);++L<P;){var j=C[L];N>0&&_(j)?N>1?k(j,N-1,_,y,I):S(I,j):y||(I[I.length]=j)}return I}},6483:(te,J,g)=>{var b=g(2086)();te.exports=b},7794:(te,J,g)=>{var S=g(6483),b=g(4614);te.exports=function k(C,N){return C&&S(C,N,b)}},2202:(te,J,g)=>{var S=g(4826),b=g(8916);te.exports=function k(C,N){for(var _=0,y=(N=S(N,C)).length;null!=C&&_<y;)C=C[b(N[_++])];return _&&_==y?C:void 0}},7427:(te,J,g)=>{var S=g(7853),b=g(2261);te.exports=function k(C,N,_){var y=N(C);return b(C)?y:S(y,_(C))}},4590:(te,J,g)=>{var S=g(1763),b=g(5933),k=g(9243),_=S?S.toStringTag:void 0;te.exports=function y(I){return null==I?void 0===I?"[object Undefined]":"[object Null]":_&&_ in Object(I)?b(I):k(I)}},3274:te=>{te.exports=function J(g,S){return null!=g&&S in Object(g)}},3022:(te,J,g)=>{var S=g(4590),b=g(3714);te.exports=function C(N){return b(N)&&"[object Arguments]"==S(N)}},7108:(te,J,g)=>{var S=g(7946),b=g(3714);te.exports=function k(C,N,_,y,I){return C===N||(null==C||null==N||!b(C)&&!b(N)?C!=C&&N!=N:S(C,N,_,y,k,I))}},7946:(te,J,g)=>{var S=g(1339),b=g(7469),k=g(1642),C=g(9462),N=g(2472),_=g(2261),y=g(7525),I=g(4868),P="[object Arguments]",j="[object Array]",oe="[object Object]",$=Object.prototype.hasOwnProperty;te.exports=function ce(K,ie,ne,q,U,x){var B=_(K),O=_(ie),ue=B?j:N(K),W=O?j:N(ie),Ce=(ue=ue==P?oe:ue)==oe,le=(W=W==P?oe:W)==oe,ve=ue==W;if(ve&&y(K)){if(!y(ie))return!1;B=!0,Ce=!1}if(ve&&!Ce)return x||(x=new S),B||I(K)?b(K,ie,ne,q,U,x):k(K,ie,ue,ne,q,U,x);if(!(1&ne)){var Oe=Ce&&$.call(K,"__wrapped__"),Me=le&&$.call(ie,"__wrapped__");if(Oe||Me){var Je=Oe?K.value():K,qe=Me?ie.value():ie;return x||(x=new S),U(Je,qe,ne,q,x)}}return!!ve&&(x||(x=new S),C(K,ie,ne,q,U,x))}},2527:(te,J,g)=>{var S=g(1339),b=g(7108);te.exports=function N(_,y,I,L){var P=I.length,j=P,oe=!L;if(null==_)return!j;for(_=Object(_);P--;){var M=I[P];if(oe&&M[2]?M[1]!==_[M[0]]:!(M[0]in _))return!1}for(;++P<j;){var $=(M=I[P])[0],ce=_[$],K=M[1];if(oe&&M[2]){if(void 0===ce&&!($ in _))return!1}else{var ie=new S;if(L)var ne=L(ce,K,$,_,y,ie);if(!(void 0===ne?b(K,ce,3,L,ie):ne))return!1}}return!0}},1082:(te,J,g)=>{var S=g(6861),b=g(9950),k=g(9794),C=g(7075),_=/^\[object .+?Constructor\]$/,j=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");te.exports=function oe(M){return!(!k(M)||b(M))&&(S(M)?j:_).test(C(M))}},8902:(te,J,g)=>{var S=g(4590),b=g(7765),k=g(3714),ve={};ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Arguments]"]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object Boolean]"]=ve["[object DataView]"]=ve["[object Date]"]=ve["[object Error]"]=ve["[object Function]"]=ve["[object Map]"]=ve["[object Number]"]=ve["[object Object]"]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object WeakMap]"]=!1,te.exports=function Oe(Me){return k(Me)&&b(Me.length)&&!!ve[S(Me)]}},1627:(te,J,g)=>{var S=g(2924),b=g(8526),k=g(5657),C=g(2261),N=g(2692);te.exports=function _(y){return"function"==typeof y?y:null==y?k:"object"==typeof y?C(y)?b(y[0],y[1]):S(y):N(y)}},190:(te,J,g)=>{var S=g(6587),b=g(366),C=Object.prototype.hasOwnProperty;te.exports=function N(_){if(!S(_))return b(_);var y=[];for(var I in Object(_))C.call(_,I)&&"constructor"!=I&&y.push(I);return y}},2839:(te,J,g)=>{var S=g(5103),b=g(2447);te.exports=function k(C,N){var _=-1,y=b(C)?Array(C.length):[];return S(C,function(I,L,P){y[++_]=N(I,L,P)}),y}},2924:(te,J,g)=>{var S=g(2527),b=g(7895),k=g(2265);te.exports=function C(N){var _=b(N);return 1==_.length&&_[0][2]?k(_[0][0],_[0][1]):function(y){return y===N||S(y,N,_)}}},8526:(te,J,g)=>{var S=g(7108),b=g(5440),k=g(2494),C=g(6300),N=g(3921),_=g(2265),y=g(8916);te.exports=function P(j,oe){return C(j)&&N(oe)?_(y(j),oe):function(M){var $=b(M,j);return void 0===$&&$===oe?k(M,j):S(oe,$,3)}}},252:(te,J,g)=>{var S=g(3880),b=g(2202),k=g(1627),C=g(2839),N=g(6389),_=g(1156),y=g(9664),I=g(5657),L=g(2261);te.exports=function P(j,oe,M){oe=oe.length?S(oe,function(K){return L(K)?function(ie){return b(ie,1===K.length?K[0]:K)}:K}):[I];var $=-1;oe=S(oe,_(k));var ce=C(j,function(K,ie,ne){return{criteria:S(oe,function(U){return U(K)}),index:++$,value:K}});return N(ce,function(K,ie){return y(K,ie,M)})}},3400:te=>{te.exports=function J(g){return function(S){return S?.[g]}}},6443:(te,J,g)=>{var S=g(2202);te.exports=function b(k){return function(C){return S(C,k)}}},8951:(te,J,g)=>{var S=g(5657),b=g(2394),k=g(6814);te.exports=function C(N,_){return k(b(N,_,S),N+"")}},8235:(te,J,g)=>{var S=g(1075),b=g(9383),k=g(5657);te.exports=b?function(N,_){return b(N,"toString",{configurable:!0,enumerable:!1,value:S(_),writable:!0})}:k},6389:te=>{te.exports=function J(g,S){var b=g.length;for(g.sort(S);b--;)g[b]=g[b].value;return g}},5025:te=>{te.exports=function J(g,S){for(var b=-1,k=Array(g);++b<g;)k[b]=S(b);return k}},7002:(te,J,g)=>{var S=g(1763),b=g(3880),k=g(2261),C=g(3423),_=S?S.prototype:void 0,y=_?_.toString:void 0;te.exports=function I(L){if("string"==typeof L)return L;if(k(L))return b(L,I)+"";if(C(L))return y?y.call(L):"";var P=L+"";return"0"==P&&1/L==-1/0?"-0":P}},1156:te=>{te.exports=function J(g){return function(S){return g(S)}}},4795:te=>{te.exports=function J(g,S){return g.has(S)}},4826:(te,J,g)=>{var S=g(2261),b=g(6300),k=g(163),C=g(2674);te.exports=function N(_,y){return S(_)?_:b(_,y)?[_]:k(C(_))}},5400:(te,J,g)=>{var S=g(3423);te.exports=function b(k,C){if(k!==C){var N=void 0!==k,_=null===k,y=k==k,I=S(k),L=void 0!==C,P=null===C,j=C==C,oe=S(C);if(!P&&!oe&&!I&&k>C||I&&L&&j&&!P&&!oe||_&&L&&j||!N&&j||!y)return 1;if(!_&&!I&&!oe&&k<C||oe&&N&&y&&!_&&!I||P&&N&&y||!L&&y||!j)return-1}return 0}},9664:(te,J,g)=>{var S=g(5400);te.exports=function b(k,C,N){for(var _=-1,y=k.criteria,I=C.criteria,L=y.length,P=N.length;++_<L;){var j=S(y[_],I[_]);if(j)return _>=P?j:j*("desc"==N[_]?-1:1)}return k.index-C.index}},6189:(te,J,g)=>{var S=g(8492);te.exports=S["__core-js_shared__"]},9386:(te,J,g)=>{var S=g(2447);te.exports=function b(k,C){return function(N,_){if(null==N)return N;if(!S(N))return k(N,_);for(var y=N.length,I=C?y:-1,L=Object(N);(C?I--:++I<y)&&!1!==_(L[I],I,L););return N}}},2086:te=>{te.exports=function J(g){return function(S,b,k){for(var C=-1,N=Object(S),_=k(S),y=_.length;y--;){var I=_[g?y:++C];if(!1===b(N[I],I,N))break}return S}}},9383:(te,J,g)=>{var S=g(8745),b=function(){try{var k=S(Object,"defineProperty");return k({},"",{}),k}catch{}}();te.exports=b},7469:(te,J,g)=>{var S=g(5960),b=g(5916),k=g(4795);te.exports=function _(y,I,L,P,j,oe){var M=1&L,$=y.length,ce=I.length;if($!=ce&&!(M&&ce>$))return!1;var K=oe.get(y),ie=oe.get(I);if(K&&ie)return K==I&&ie==y;var ne=-1,q=!0,U=2&L?new S:void 0;for(oe.set(y,I),oe.set(I,y);++ne<$;){var x=y[ne],B=I[ne];if(P)var O=M?P(B,x,ne,I,y,oe):P(x,B,ne,y,I,oe);if(void 0!==O){if(O)continue;q=!1;break}if(U){if(!b(I,function(ue,W){if(!k(U,W)&&(x===ue||j(x,ue,L,P,oe)))return U.push(W)})){q=!1;break}}else if(x!==B&&!j(x,B,L,P,oe)){q=!1;break}}return oe.delete(y),oe.delete(I),q}},1642:(te,J,g)=>{var S=g(1763),b=g(2760),k=g(7826),C=g(7469),N=g(1575),_=g(8e3),U=S?S.prototype:void 0,x=U?U.valueOf:void 0;te.exports=function B(O,ue,W,Ce,le,ve,Oe){switch(W){case"[object DataView]":if(O.byteLength!=ue.byteLength||O.byteOffset!=ue.byteOffset)return!1;O=O.buffer,ue=ue.buffer;case"[object ArrayBuffer]":return!(O.byteLength!=ue.byteLength||!ve(new b(O),new b(ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return k(+O,+ue);case"[object Error]":return O.name==ue.name&&O.message==ue.message;case"[object RegExp]":case"[object String]":return O==ue+"";case"[object Map]":var Me=N;case"[object Set]":if(Me||(Me=_),O.size!=ue.size&&!(1&Ce))return!1;var qe=Oe.get(O);if(qe)return qe==ue;Ce|=2,Oe.set(O,ue);var we=C(Me(O),Me(ue),Ce,le,ve,Oe);return Oe.delete(O),we;case"[object Symbol]":if(x)return x.call(O)==x.call(ue)}return!1}},9462:(te,J,g)=>{var S=g(6131),C=Object.prototype.hasOwnProperty;te.exports=function N(_,y,I,L,P,j){var oe=1&I,M=S(_),$=M.length;if($!=S(y).length&&!oe)return!1;for(var ie=$;ie--;){var ne=M[ie];if(!(oe?ne in y:C.call(y,ne)))return!1}var q=j.get(_),U=j.get(y);if(q&&U)return q==y&&U==_;var x=!0;j.set(_,y),j.set(y,_);for(var B=oe;++ie<$;){var O=_[ne=M[ie]],ue=y[ne];if(L)var W=oe?L(ue,O,ne,y,_,j):L(O,ue,ne,_,y,j);if(!(void 0===W?O===ue||P(O,ue,I,L,j):W)){x=!1;break}B||(B="constructor"==ne)}if(x&&!B){var Ce=_.constructor,le=y.constructor;Ce!=le&&"constructor"in _&&"constructor"in y&&!("function"==typeof Ce&&Ce instanceof Ce&&"function"==typeof le&&le instanceof le)&&(x=!1)}return j.delete(_),j.delete(y),x}},248:te=>{var J="object"==typeof global&&global&&global.Object===Object&&global;te.exports=J},6131:(te,J,g)=>{var S=g(7427),b=g(771),k=g(4614);te.exports=function C(N){return S(N,k,b)}},4113:(te,J,g)=>{var S=g(29);te.exports=function b(k,C){var N=k.__data__;return S(C)?N["string"==typeof C?"string":"hash"]:N.map}},7895:(te,J,g)=>{var S=g(3921),b=g(4614);te.exports=function k(C){for(var N=b(C),_=N.length;_--;){var y=N[_],I=C[y];N[_]=[y,I,S(I)]}return N}},8745:(te,J,g)=>{var S=g(1082),b=g(1015);te.exports=function k(C,N){var _=b(C,N);return S(_)?_:void 0}},5933:(te,J,g)=>{var S=g(1763),b=Object.prototype,k=b.hasOwnProperty,C=b.toString,N=S?S.toStringTag:void 0;te.exports=function _(y){var I=k.call(y,N),L=y[N];try{y[N]=void 0;var P=!0}catch{}var j=C.call(y);return P&&(I?y[N]=L:delete y[N]),j}},771:(te,J,g)=>{var S=g(2134),b=g(1315),C=Object.prototype.propertyIsEnumerable,N=Object.getOwnPropertySymbols;te.exports=N?function(y){return null==y?[]:(y=Object(y),S(N(y),function(I){return C.call(y,I)}))}:b},2472:(te,J,g)=>{var S=g(6506),b=g(1136),k=g(641),C=g(1732),N=g(6413),_=g(4590),y=g(7075),I="[object Map]",P="[object Promise]",j="[object Set]",oe="[object WeakMap]",M="[object DataView]",$=y(S),ce=y(b),K=y(k),ie=y(C),ne=y(N),q=_;(S&&q(new S(new ArrayBuffer(1)))!=M||b&&q(new b)!=I||k&&q(k.resolve())!=P||C&&q(new C)!=j||N&&q(new N)!=oe)&&(q=function(U){var x=_(U),B="[object Object]"==x?U.constructor:void 0,O=B?y(B):"";if(O)switch(O){case $:return M;case ce:return I;case K:return P;case ie:return j;case ne:return oe}return x}),te.exports=q},1015:te=>{te.exports=function J(g,S){return g?.[S]}},4583:(te,J,g)=>{var S=g(4826),b=g(1955),k=g(2261),C=g(5188),N=g(7765),_=g(8916);te.exports=function y(I,L,P){for(var j=-1,oe=(L=S(L,I)).length,M=!1;++j<oe;){var $=_(L[j]);if(!(M=null!=I&&P(I,$)))break;I=I[$]}return M||++j!=oe?M:!!(oe=null==I?0:I.length)&&N(oe)&&C($,oe)&&(k(I)||b(I))}},5602:(te,J,g)=>{var S=g(893);te.exports=function b(){this.__data__=S?S(null):{},this.size=0}},1499:te=>{te.exports=function J(g){var S=this.has(g)&&delete this.__data__[g];return this.size-=S?1:0,S}},2990:(te,J,g)=>{var S=g(893),C=Object.prototype.hasOwnProperty;te.exports=function N(_){var y=this.__data__;if(S){var I=y[_];return"__lodash_hash_undefined__"===I?void 0:I}return C.call(y,_)?y[_]:void 0}},480:(te,J,g)=>{var S=g(893),k=Object.prototype.hasOwnProperty;te.exports=function C(N){var _=this.__data__;return S?void 0!==_[N]:k.call(_,N)}},4469:(te,J,g)=>{var S=g(893);te.exports=function k(C,N){var _=this.__data__;return this.size+=this.has(C)?0:1,_[C]=S&&void 0===N?"__lodash_hash_undefined__":N,this}},2241:(te,J,g)=>{var S=g(1763),b=g(1955),k=g(2261),C=S?S.isConcatSpreadable:void 0;te.exports=function N(_){return k(_)||b(_)||!!(C&&_&&_[C])}},5188:te=>{var g=/^(?:0|[1-9]\d*)$/;te.exports=function S(b,k){var C=typeof b;return!!(k=k??9007199254740991)&&("number"==C||"symbol"!=C&&g.test(b))&&b>-1&&b%1==0&&b<k}},3817:(te,J,g)=>{var S=g(7826),b=g(2447),k=g(5188),C=g(9794);te.exports=function N(_,y,I){if(!C(I))return!1;var L=typeof y;return!!("number"==L?b(I)&&k(y,I.length):"string"==L&&y in I)&&S(I[y],_)}},6300:(te,J,g)=>{var S=g(2261),b=g(3423),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;te.exports=function N(_,y){if(S(_))return!1;var I=typeof _;return!("number"!=I&&"symbol"!=I&&"boolean"!=I&&null!=_&&!b(_))||C.test(_)||!k.test(_)||null!=y&&_ in Object(y)}},29:te=>{te.exports=function J(g){var S=typeof g;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==g:null===g}},9950:(te,J,g)=>{var C,S=g(6189),b=(C=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";te.exports=function k(C){return!!b&&b in C}},6587:te=>{var J=Object.prototype;te.exports=function g(S){var b=S&&S.constructor;return S===("function"==typeof b&&b.prototype||J)}},3921:(te,J,g)=>{var S=g(9794);te.exports=function b(k){return k==k&&!S(k)}},9365:te=>{te.exports=function J(){this.__data__=[],this.size=0}},9343:(te,J,g)=>{var S=g(4056),k=Array.prototype.splice;te.exports=function C(N){var _=this.__data__,y=S(_,N);return!(y<0||(y==_.length-1?_.pop():k.call(_,y,1),--this.size,0))}},4779:(te,J,g)=>{var S=g(4056);te.exports=function b(k){var C=this.__data__,N=S(C,k);return N<0?void 0:C[N][1]}},1509:(te,J,g)=>{var S=g(4056);te.exports=function b(k){return S(this.__data__,k)>-1}},7137:(te,J,g)=>{var S=g(4056);te.exports=function b(k,C){var N=this.__data__,_=S(N,k);return _<0?(++this.size,N.push([k,C])):N[_][1]=C,this}},3413:(te,J,g)=>{var S=g(9618),b=g(3597),k=g(1136);te.exports=function C(){this.size=0,this.__data__={hash:new S,map:new(k||b),string:new S}}},5419:(te,J,g)=>{var S=g(4113);te.exports=function b(k){var C=S(this,k).delete(k);return this.size-=C?1:0,C}},7253:(te,J,g)=>{var S=g(4113);te.exports=function b(k){return S(this,k).get(k)}},1115:(te,J,g)=>{var S=g(4113);te.exports=function b(k){return S(this,k).has(k)}},6648:(te,J,g)=>{var S=g(4113);te.exports=function b(k,C){var N=S(this,k),_=N.size;return N.set(k,C),this.size+=N.size==_?0:1,this}},1575:te=>{te.exports=function J(g){var S=-1,b=Array(g.size);return g.forEach(function(k,C){b[++S]=[C,k]}),b}},2265:te=>{te.exports=function J(g,S){return function(b){return null!=b&&b[g]===S&&(void 0!==S||g in Object(b))}}},7371:(te,J,g)=>{var S=g(7659);te.exports=function k(C){var N=S(C,function(y){return 500===_.size&&_.clear(),y}),_=N.cache;return N}},893:(te,J,g)=>{var b=g(8745)(Object,"create");te.exports=b},366:(te,J,g)=>{var b=g(3106)(Object.keys,Object);te.exports=b},8849:(te,J,g)=>{te=g.nmd(te);var S=g(248),b=J&&!J.nodeType&&J,k=b&&te&&!te.nodeType&&te,N=k&&k.exports===b&&S.process,_=function(){try{return k&&k.require&&k.require("util").types||N&&N.binding&&N.binding("util")}catch{}}();te.exports=_},9243:te=>{var g=Object.prototype.toString;te.exports=function S(b){return g.call(b)}},3106:te=>{te.exports=function J(g,S){return function(b){return g(S(b))}}},2394:(te,J,g)=>{var S=g(7910),b=Math.max;te.exports=function k(C,N,_){return N=b(void 0===N?C.length-1:N,0),function(){for(var y=arguments,I=-1,L=b(y.length-N,0),P=Array(L);++I<L;)P[I]=y[N+I];I=-1;for(var j=Array(N+1);++I<N;)j[I]=y[I];return j[N]=_(P),S(C,this,j)}}},8492:(te,J,g)=>{var S=g(248),b="object"==typeof self&&self&&self.Object===Object&&self,k=S||b||Function("return this")();te.exports=k},6151:te=>{te.exports=function g(S){return this.__data__.set(S,"__lodash_hash_undefined__"),this}},2154:te=>{te.exports=function J(g){return this.__data__.has(g)}},8e3:te=>{te.exports=function J(g){var S=-1,b=Array(g.size);return g.forEach(function(k){b[++S]=k}),b}},6814:(te,J,g)=>{var S=g(8235),k=g(9531)(S);te.exports=k},9531:te=>{var S=Date.now;te.exports=function b(k){var C=0,N=0;return function(){var _=S(),y=16-(_-N);if(N=_,y>0){if(++C>=800)return arguments[0]}else C=0;return k.apply(void 0,arguments)}}},9488:(te,J,g)=>{var S=g(3597);te.exports=function b(){this.__data__=new S,this.size=0}},5943:te=>{te.exports=function J(g){var S=this.__data__,b=S.delete(g);return this.size=S.size,b}},5456:te=>{te.exports=function J(g){return this.__data__.get(g)}},4793:te=>{te.exports=function J(g){return this.__data__.has(g)}},8689:(te,J,g)=>{var S=g(3597),b=g(1136),k=g(1811);te.exports=function N(_,y){var I=this.__data__;if(I instanceof S){var L=I.__data__;if(!b||L.length<199)return L.push([_,y]),this.size=++I.size,this;I=this.__data__=new k(L)}return I.set(_,y),this.size=I.size,this}},163:(te,J,g)=>{var S=g(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,C=S(function(N){var _=[];return 46===N.charCodeAt(0)&&_.push(""),N.replace(b,function(y,I,L,P){_.push(L?P.replace(k,"$1"):I||y)}),_});te.exports=C},8916:(te,J,g)=>{var S=g(3423);te.exports=function k(C){if("string"==typeof C||S(C))return C;var N=C+"";return"0"==N&&1/C==-1/0?"-0":N}},7075:te=>{var g=Function.prototype.toString;te.exports=function S(b){if(null!=b){try{return g.call(b)}catch{}try{return b+""}catch{}}return""}},1075:te=>{te.exports=function J(g){return function(){return g}}},7826:te=>{te.exports=function J(g,S){return g===S||g!=g&&S!=S}},5440:(te,J,g)=>{var S=g(2202);te.exports=function b(k,C,N){var _=null==k?void 0:S(k,C);return void 0===_?N:_}},2494:(te,J,g)=>{var S=g(3274),b=g(4583);te.exports=function k(C,N){return null!=C&&b(C,N,S)}},5657:te=>{te.exports=function J(g){return g}},1955:(te,J,g)=>{var S=g(3022),b=g(3714),k=Object.prototype,C=k.hasOwnProperty,N=k.propertyIsEnumerable,_=S(function(){return arguments}())?S:function(y){return b(y)&&C.call(y,"callee")&&!N.call(y,"callee")};te.exports=_},2261:te=>{te.exports=Array.isArray},2447:(te,J,g)=>{var S=g(6861),b=g(7765);te.exports=function k(C){return null!=C&&b(C.length)&&!S(C)}},7525:(te,J,g)=>{te=g.nmd(te);var S=g(8492),b=g(5706),k=J&&!J.nodeType&&J,C=k&&te&&!te.nodeType&&te,_=C&&C.exports===k?S.Buffer:void 0;te.exports=(_?_.isBuffer:void 0)||b},6030:(te,J,g)=>{var b=g(8492).isFinite;te.exports=function k(C){return"number"==typeof C&&b(C)}},6861:(te,J,g)=>{var S=g(4590),b=g(9794);te.exports=function y(I){if(!b(I))return!1;var L=S(I);return"[object Function]"==L||"[object GeneratorFunction]"==L||"[object AsyncFunction]"==L||"[object Proxy]"==L}},7765:te=>{te.exports=function g(S){return"number"==typeof S&&S>-1&&S%1==0&&S<=9007199254740991}},9794:te=>{te.exports=function J(g){var S=typeof g;return null!=g&&("object"==S||"function"==S)}},3714:te=>{te.exports=function J(g){return null!=g&&"object"==typeof g}},3423:(te,J,g)=>{var S=g(4590),b=g(3714);te.exports=function C(N){return"symbol"==typeof N||b(N)&&"[object Symbol]"==S(N)}},4868:(te,J,g)=>{var S=g(8902),b=g(1156),k=g(8849),C=k&&k.isTypedArray,N=C?b(C):S;te.exports=N},4614:(te,J,g)=>{var S=g(1384),b=g(190),k=g(2447);te.exports=function C(N){return k(N)?S(N):b(N)}},6990:function(te,J,g){var S;te=g.nmd(te),function(){var b,_="Expected a function",I="__lodash_hash_undefined__",P="__lodash_placeholder__",x=32,O=128,we=1/0,Ne=9007199254740991,me=4294967295,at=[["ary",O],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",x],["partialRight",64],["rearg",256]],Ye="[object Arguments]",_e="[object Array]",R="[object Boolean]",se="[object Date]",Fe="[object Error]",et="[object Function]",fe="[object GeneratorFunction]",Q="[object Map]",X="[object Number]",F="[object Object]",de="[object Promise]",ze="[object RegExp]",Ge="[object Set]",gt="[object String]",Pt="[object Symbol]",Gt="[object WeakMap]",Te="[object ArrayBuffer]",Z="[object DataView]",T="[object Float32Array]",ae="[object Float64Array]",We="[object Int8Array]",Ze="[object Int16Array]",st="[object Int32Array]",Wt="[object Uint8Array]",an="[object Uint8ClampedArray]",$n="[object Uint16Array]",Sn="[object Uint32Array]",Cn=/\b__p \+= '';/g,Do=/\b(__p \+=) '' \+/g,ys=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qo=/&(?:amp|lt|gt|quot|#39);/g,Ji=/[&<>"']/g,Yr=RegExp(Qo.source),vs=RegExp(Ji.source),zs=/<%-([\s\S]+?)%>/g,Ro=/<%([\s\S]+?)%>/g,_o=/<%=([\s\S]+?)%>/g,eu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hh=/^\w*$/,fh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gl=/[\\^$.*+?()[\]{}|]/g,da=RegExp(Gl.source),nc=/^\s+/,Wl=/\s/,$l=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zc=/\{\n\/\* \[wrapped with (.+)\] \*/,ph=/,? & /,Hc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tu=/[()=,{}\[\]\/\s]/,Gc=/\\(\\)?/g,Yl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Li=/\w*$/,Mi=/^[-+]0x[0-9a-f]+$/i,Wc=/^0b[01]+$/i,Hs=/^\[object .+?Constructor\]$/,Ta=/^0o[0-7]+$/i,ua=/^(?:0|[1-9]\d*)$/,ic=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oo=/($^)/,ge=/['\n\r\u2028\u2029\\]/g,De="\\ud800-\\udfff",be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Be="\\u2700-\\u27bf",Xe="a-z\\xdf-\\xf6\\xf8-\\xff",en="A-Z\\xc0-\\xd6\\xd8-\\xde",yn="\\ufe0e\\ufe0f",bo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ko="["+De+"]",$c="["+bo+"]",Gs="["+be+"]",Br="\\d+",Po="["+Be+"]",Bi="["+Xe+"]",jr="[^"+De+bo+Br+Be+Xe+en+"]",ui="\\ud83c[\\udffb-\\udfff]",es="[^"+De+"]",Xl="(?:\\ud83c[\\udde6-\\uddff]){2}",Re="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+en+"]",dt="(?:"+Bi+"|"+jr+")",kt="(?:"+je+"|"+jr+")",Ht="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Er="(?:"+Gs+"|"+ui+")?",Mn="["+yn+"]?",jS=Mn+Er+"(?:\\u200d(?:"+[es,Xl,Re].join("|")+")"+Mn+Er+")*",Fv="(?:"+[Po,Xl,Re].join("|")+")"+jS,Ot="(?:"+[es+Gs+"?",Gs,Xl,Re,ko].join("|")+")",hp=RegExp("['\u2019]","g"),Bn=RegExp(Gs,"g"),Ai=RegExp(ui+"(?="+ui+")|"+Ot+jS,"g"),US=RegExp([je+"?"+Bi+"+"+Ht+"(?="+[$c,je,"$"].join("|")+")",kt+"+"+Yn+"(?="+[$c,je+dt,"$"].join("|")+")",je+"?"+dt+"+"+Ht,je+"+"+Yn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Br,Fv].join("|"),"g"),BN=RegExp("[\\u200d"+De+be+yn+"]"),VS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,h_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xs=-1,ir={};ir[T]=ir[ae]=ir[We]=ir[Ze]=ir[st]=ir[Wt]=ir[an]=ir[$n]=ir[Sn]=!0,ir[Ye]=ir[_e]=ir[Te]=ir[R]=ir[Z]=ir[se]=ir[Fe]=ir[et]=ir[Q]=ir[X]=ir[F]=ir[ze]=ir[Ge]=ir[gt]=ir[Gt]=!1;var $i={};$i[Ye]=$i[_e]=$i[Te]=$i[Z]=$i[R]=$i[se]=$i[T]=$i[ae]=$i[We]=$i[Ze]=$i[st]=$i[Q]=$i[X]=$i[F]=$i[ze]=$i[Ge]=$i[gt]=$i[Pt]=$i[Wt]=$i[an]=$i[$n]=$i[Sn]=!0,$i[Fe]=$i[et]=$i[Gt]=!1;var VN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zN=parseFloat,HN=parseInt,Lv="object"==typeof global&&global&&global.Object===Object&&global,GN="object"==typeof self&&self&&self.Object===Object&&self,ao=Lv||GN||Function("return this")(),zS=J&&!J.nodeType&&J,yo=zS&&te&&!te.nodeType&&te,Rn=yo&&yo.exports===zS,Bv=Rn&&Lv.process,ha=function(){try{return yo&&yo.require&&yo.require("util").types||Bv&&Bv.binding&&Bv.binding("util")}catch{}}(),HS=ha&&ha.isArrayBuffer,At=ha&&ha.isDate,GS=ha&&ha.isMap,tn=ha&&ha.isRegExp,mh=ha&&ha.isSet,jv=ha&&ha.isTypedArray;function ns(ct,Et,bt){switch(bt.length){case 0:return ct.call(Et);case 1:return ct.call(Et,bt[0]);case 2:return ct.call(Et,bt[0],bt[1]);case 3:return ct.call(Et,bt[0],bt[1],bt[2])}return ct.apply(Et,bt)}function WS(ct,Et,bt,Qt){for(var Fn=-1,Si=null==ct?0:ct.length;++Fn<Si;){var Rr=ct[Fn];Et(Qt,Rr,bt(Rr),ct)}return Qt}function No(ct,Et){for(var bt=-1,Qt=null==ct?0:ct.length;++bt<Qt&&!1!==Et(ct[bt],bt,ct););return ct}function fp(ct,Et){for(var bt=null==ct?0:ct.length;bt--&&!1!==Et(ct[bt],bt,ct););return ct}function pp(ct,Et){for(var bt=-1,Qt=null==ct?0:ct.length;++bt<Qt;)if(!Et(ct[bt],bt,ct))return!1;return!0}function rc(ct,Et){for(var bt=-1,Qt=null==ct?0:ct.length,Fn=0,Si=[];++bt<Qt;){var Rr=ct[bt];Et(Rr,bt,ct)&&(Si[Fn++]=Rr)}return Si}function mp(ct,Et){return!(null==ct||!ct.length)&&ql(ct,Et,0)>-1}function ai(ct,Et,bt){for(var Qt=-1,Fn=null==ct?0:ct.length;++Qt<Fn;)if(bt(Et,ct[Qt]))return!0;return!1}function Yi(ct,Et){for(var bt=-1,Qt=null==ct?0:ct.length,Fn=Array(Qt);++bt<Qt;)Fn[bt]=Et(ct[bt],bt,ct);return Fn}function oc(ct,Et){for(var bt=-1,Qt=Et.length,Fn=ct.length;++bt<Qt;)ct[Fn+bt]=Et[bt];return ct}function vo(ct,Et,bt,Qt){var Fn=-1,Si=null==ct?0:ct.length;for(Qt&&Si&&(bt=ct[++Fn]);++Fn<Si;)bt=Et(bt,ct[Fn],Fn,ct);return bt}function Uv(ct,Et,bt,Qt){var Fn=null==ct?0:ct.length;for(Qt&&Fn&&(bt=ct[--Fn]);Fn--;)bt=Et(bt,ct[Fn],Fn,ct);return bt}function Vv(ct,Et){for(var bt=-1,Qt=null==ct?0:ct.length;++bt<Qt;)if(Et(ct[bt],bt,ct))return!0;return!1}var Ii=Hv("length");function gp(ct,Et,bt){var Qt;return bt(ct,function(Fn,Si,Rr){if(Et(Fn,Si,Rr))return Qt=Si,!1}),Qt}function nu(ct,Et,bt,Qt){for(var Fn=ct.length,Si=bt+(Qt?1:-1);Qt?Si--:++Si<Fn;)if(Et(ct[Si],Si,ct))return Si;return-1}function ql(ct,Et,bt){return Et==Et?function vp(ct,Et,bt){for(var Qt=bt-1,Fn=ct.length;++Qt<Fn;)if(ct[Qt]===Et)return Qt;return-1}(ct,Et,bt):nu(ct,zv,bt)}function f_(ct,Et,bt,Qt){for(var Fn=bt-1,Si=ct.length;++Fn<Si;)if(Qt(ct[Fn],Et))return Fn;return-1}function zv(ct){return ct!=ct}function _p(ct,Et){var bt=null==ct?0:ct.length;return bt?Wv(ct,Et)/bt:NaN}function Hv(ct){return function(Et){return null==Et?b:Et[ct]}}function Gv(ct){return function(Et){return null==ct?b:ct[Et]}}function $S(ct,Et,bt,Qt,Fn){return Fn(ct,function(Si,Rr,ji){bt=Qt?(Qt=!1,Si):Et(bt,Si,Rr,ji)}),bt}function Wv(ct,Et){for(var bt,Qt=-1,Fn=ct.length;++Qt<Fn;){var Si=Et(ct[Qt]);Si!==b&&(bt=bt===b?Si:bt+Si)}return bt}function Jl(ct,Et){for(var bt=-1,Qt=Array(ct);++bt<ct;)Qt[bt]=Et(bt);return Qt}function gh(ct){return ct&&ct.slice(0,bh(ct)+1).replace(nc,"")}function ws(ct){return function(Et){return ct(Et)}}function m_(ct,Et){return Yi(Et,function(bt){return ct[bt]})}function _h(ct,Et){return ct.has(Et)}function g_(ct,Et){for(var bt=-1,Qt=ct.length;++bt<Qt&&ql(Et,ct[bt],0)>-1;);return bt}function Zl(ct,Et){for(var bt=ct.length;bt--&&ql(Et,ct[bt],0)>-1;);return bt}var Yc=Gv({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),XS=Gv({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nt(ct){return"\\"+VN[ct]}function Vt(ct){return BN.test(ct)}function Ql(ct){var Et=-1,bt=Array(ct.size);return ct.forEach(function(Qt,Fn){bt[++Et]=[Fn,Qt]}),bt}function Yv(ct,Et){return function(bt){return ct(Et(bt))}}function Xc(ct,Et){for(var bt=-1,Qt=ct.length,Fn=0,Si=[];++bt<Qt;){var Rr=ct[bt];(Rr===Et||Rr===P)&&(ct[bt]=P,Si[Fn++]=bt)}return Si}function yp(ct){var Et=-1,bt=Array(ct.size);return ct.forEach(function(Qt){bt[++Et]=Qt}),bt}function Fo(ct){return Vt(ct)?function y_(ct){for(var Et=Ai.lastIndex=0;Ai.test(ct);)++Et;return Et}(ct):Ii(ct)}function Xn(ct){return Vt(ct)?function Xv(ct){return ct.match(Ai)||[]}(ct):function WN(ct){return ct.split("")}(ct)}function bh(ct){for(var Et=ct.length;Et--&&Wl.test(ct.charAt(Et)););return Et}var b_=Gv({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),vh=function ct(Et){var u,bt=(Et=null==Et?ao:vh.defaults(ao.Object(),Et,vh.pick(ao,h_))).Array,Qt=Et.Date,Fn=Et.Error,Si=Et.Function,Rr=Et.Math,ji=Et.Object,xp=Et.RegExp,KS=Et.String,Ws=Et.TypeError,is=bt.prototype,ed=ji.prototype,wp=Et["__core-js_shared__"],Ep=Si.prototype.toString,Di=ed.hasOwnProperty,JS=0,v_=(u=/[^.]+$/.exec(wp&&wp.keys&&wp.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Ap=ed.toString,ZS=Ep.call(ji),QS=ao._,jn=xp("^"+Ep.call(Di).replace(Gl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sp=Rn?Et.Buffer:b,Kc=Et.Symbol,Cp=Et.Uint8Array,on=Sp?Sp.allocUnsafe:b,Mp=Yv(ji.getPrototypeOf,ji),x_=ji.create,Ut=ed.propertyIsEnumerable,Ur=is.splice,_i=Kc?Kc.isConcatSpreadable:b,Ar=Kc?Kc.iterator:b,Sr=Kc?Kc.toStringTag:b,cc=function(){try{var u=pu(ji,"defineProperty");return u({},"",{}),u}catch{}}(),Es=Et.clearTimeout!==ao.clearTimeout&&Et.clearTimeout,Kv=Qt&&Qt.now!==ao.Date.now&&Qt.now,qv=Et.setTimeout!==ao.setTimeout&&Et.setTimeout,td=Rr.ceil,Tp=Rr.floor,w_=ji.getOwnPropertySymbols,yr=Sp?Sp.isBuffer:b,Kt=Et.isFinite,Wn=is.join,rr=Yv(ji.keys,ji),Ri=Rr.max,Or=Rr.min,xo=Qt.now,iu=Et.parseInt,vr=Rr.random,qc=is.reverse,Jc=pu(Et,"DataView"),On=pu(Et,"Map"),nd=pu(Et,"Promise"),id=pu(Et,"Set"),Ia=pu(Et,"WeakMap"),Zi=pu(ji,"create"),Zc=Ia&&new Ia,pa={},Da=wi(Jc),xh=wi(On),Jv=wi(nd),Qc=wi(id),lc=wi(Ia),el=Kc?Kc.prototype:b,dc=el?el.valueOf:b,ci=el?el.toString:b;function Pe(u){if(fr(u)&&!Un(u)&&!(u instanceof ri)){if(u instanceof Cr)return u;if(Di.call(u,"__wrapped__"))return Mx(u)}return new Cr(u)}var tl=function(){function u(){}return function(p){if(!Oi(p))return{};if(x_)return x_(p);u.prototype=p;var w=new u;return u.prototype=b,w}}();function wh(){}function Cr(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=b}function ri(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function ou(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var re=u[p];this.set(re[0],re[1])}}function Vr(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var re=u[p];this.set(re[0],re[1])}}function uc(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var re=u[p];this.set(re[0],re[1])}}function su(u){var p=-1,w=null==u?0:u.length;for(this.__data__=new uc;++p<w;)this.add(u[p])}function Ra(u){var p=this.__data__=new Vr(u);this.size=p.size}function iC(u,p){var w=Un(u),re=!w&&hl(u),Ae=!w&&!re&&fl(u),Ue=!w&&!re&&!Ae&&bc(u),Qe=w||re||Ae||Ue,it=Qe?Jl(u.length,KS):[],ut=it.length;for(var St in u)(p||Di.call(u,St))&&(!Qe||!("length"==St||Ae&&("offset"==St||"parent"==St)||Ue&&("buffer"==St||"byteLength"==St||"byteOffset"==St)||cl(St,ut)))&&it.push(St);return it}function rC(u){var p=u.length;return p?u[il(0,p-1)]:b}function oF(u,p){return Jp(Bo(u),nl(p,0,u.length))}function od(u){return Jp(Bo(u))}function Oa(u,p,w){(w!==b&&!qs(u[p],w)||w===b&&!(p in u))&&ka(u,p,w)}function Dp(u,p,w){var re=u[p];(!Di.call(u,p)||!qs(re,w)||w===b&&!(p in u))&&ka(u,p,w)}function S_(u,p){for(var w=u.length;w--;)if(qs(u[w][0],p))return w;return-1}function lo(u,p,w,re){return hc(u,function(Ae,Ue,Qe){p(re,Ae,w(Ae),Qe)}),re}function Ah(u,p){return u&&jo(p,qr(p),u)}function ka(u,p,w){"__proto__"==p&&cc?cc(u,p,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[p]=w}function Rp(u,p){for(var w=-1,re=p.length,Ae=bt(re),Ue=null==u;++w<re;)Ae[w]=Ue?b:Rb(u,p[w]);return Ae}function nl(u,p,w){return u==u&&(w!==b&&(u=u<=w?u:w),p!==b&&(u=u>=p?u:p)),u}function As(u,p,w,re,Ae,Ue){var Qe,it=1&p,ut=2&p,St=4&p;if(w&&(Qe=Ae?w(u,re,Ae,Ue):w(u)),Qe!==b)return Qe;if(!Oi(u))return u;var Ct=Un(u);if(Ct){if(Qe=function Nh(u){var p=u.length,w=new u.constructor(p);return p&&"string"==typeof u[0]&&Di.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!it)return Bo(u,Qe)}else{var Nt=Ao(u),Yt=Nt==et||Nt==fe;if(fl(u))return H_(u,it);if(Nt==F||Nt==Ye||Yt&&!Ae){if(Qe=ut||Yt?{}:Ax(u),!it)return ut?function pC(u,p){return jo(u,Ex(u),p)}(u,function $s(u,p){return u&&jo(p,as(p),u)}(Qe,u)):function pc(u,p){return jo(u,wx(u),p)}(u,Ah(Qe,u))}else{if(!$i[Nt])return Ae?u:{};Qe=function Fh(u,p,w){var re=u.constructor;switch(p){case Te:return dd(u);case R:case se:return new re(+u);case Z:return function Pa(u,p){var w=p?dd(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case T:case ae:case We:case Ze:case st:case Wt:case an:case $n:case Sn:return bx(u,w);case Q:return new re;case X:case gt:return new re(u);case ze:return function G_(u){var p=new u.constructor(u.source,Li.exec(u));return p.lastIndex=u.lastIndex,p}(u);case Ge:return new re;case Pt:return function W_(u){return dc?ji(dc.call(u)):{}}(u)}}(u,Nt,it)}}Ue||(Ue=new Ra);var ln=Ue.get(u);if(ln)return ln;Ue.set(u,Qe),Mu(u)?u.forEach(function(An){Qe.add(As(An,p,w,An,u,Ue))}):Eb(u)&&u.forEach(function(An,si){Qe.set(si,As(An,p,w,si,u,Ue))});var Zn=Ct?b:(St?ut?kh:hu:ut?as:qr)(u);return No(Zn||u,function(An,si){Zn&&(An=u[si=An]),Dp(Qe,si,As(An,p,w,si,u,Ue))}),Qe}function M_(u,p,w){var re=w.length;if(null==u)return!re;for(u=ji(u);re--;){var Ae=w[re],Qe=u[Ae];if(Qe===b&&!(Ae in u)||!(0,p[Ae])(Qe))return!1}return!0}function Op(u,p,w){if("function"!=typeof u)throw new Ws(_);return Bh(function(){u.apply(b,w)},p)}function sd(u,p,w,re){var Ae=-1,Ue=mp,Qe=!0,it=u.length,ut=[],St=p.length;if(!it)return ut;w&&(p=Yi(p,ws(w))),re?(Ue=ai,Qe=!1):p.length>=200&&(Ue=_h,Qe=!1,p=new su(p));e:for(;++Ae<it;){var Ct=u[Ae],Nt=null==w?Ct:w(Ct);if(Ct=re||0!==Ct?Ct:0,Qe&&Nt==Nt){for(var Yt=St;Yt--;)if(p[Yt]===Nt)continue e;ut.push(Ct)}else Ue(p,Nt,re)||ut.push(Ct)}return ut}Pe.templateSettings={escape:zs,evaluate:Ro,interpolate:_o,variable:"",imports:{_:Pe}},(Pe.prototype=wh.prototype).constructor=Pe,(Cr.prototype=tl(wh.prototype)).constructor=Cr,(ri.prototype=tl(wh.prototype)).constructor=ri,ou.prototype.clear=function rs(){this.__data__=Zi?Zi(null):{},this.size=0},ou.prototype.delete=function Lo(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p},ou.prototype.get=function E_(u){var p=this.__data__;if(Zi){var w=p[u];return w===I?b:w}return Di.call(p,u)?p[u]:b},ou.prototype.has=function rd(u){var p=this.__data__;return Zi?p[u]!==b:Di.call(p,u)},ou.prototype.set=function Ip(u,p){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Zi&&p===b?I:p,this},Vr.prototype.clear=function A_(){this.__data__=[],this.size=0},Vr.prototype.delete=function eC(u){var p=this.__data__,w=S_(p,u);return!(w<0||(w==p.length-1?p.pop():Ur.call(p,w,1),--this.size,0))},Vr.prototype.get=function tC(u){var p=this.__data__,w=S_(p,u);return w<0?b:p[w][1]},Vr.prototype.has=function XN(u){return S_(this.__data__,u)>-1},Vr.prototype.set=function nC(u,p){var w=this.__data__,re=S_(w,u);return re<0?(++this.size,w.push([u,p])):w[re][1]=p,this},uc.prototype.clear=function KN(){this.size=0,this.__data__={hash:new ou,map:new(On||Vr),string:new ou}},uc.prototype.delete=function qN(u){var p=al(this,u).delete(u);return this.size-=p?1:0,p},uc.prototype.get=function JN(u){return al(this,u).get(u)},uc.prototype.has=function ZN(u){return al(this,u).has(u)},uc.prototype.set=function QN(u,p){var w=al(this,u),re=w.size;return w.set(u,p),this.size+=w.size==re?0:1,this},su.prototype.add=su.prototype.push=function eF(u){return this.__data__.set(u,I),this},su.prototype.has=function tF(u){return this.__data__.has(u)},Ra.prototype.clear=function nF(){this.__data__=new Vr,this.size=0},Ra.prototype.delete=function iF(u){var p=this.__data__,w=p.delete(u);return this.size=p.size,w},Ra.prototype.get=function rF(u){return this.__data__.get(u)},Ra.prototype.has=function Zv(u){return this.__data__.has(u)},Ra.prototype.set=function Qv(u,p){var w=this.__data__;if(w instanceof Vr){var re=w.__data__;if(!On||re.length<199)return re.push([u,p]),this.size=++w.size,this;w=this.__data__=new uc(re)}return w.set(u,p),this.size=w.size,this};var hc=vx(fc),T_=vx(I_,!0);function ex(u,p){var w=!0;return hc(u,function(re,Ae,Ue){return w=!!p(re,Ae,Ue)}),w}function ad(u,p,w){for(var re=-1,Ae=u.length;++re<Ae;){var Ue=u[re],Qe=p(Ue);if(null!=Qe&&(it===b?Qe==Qe&&!Vo(Qe):w(Qe,it)))var it=Qe,ut=Ue}return ut}function cd(u,p){var w=[];return hc(u,function(re,Ae,Ue){p(re,Ae,Ue)&&w.push(re)}),w}function Xr(u,p,w,re,Ae){var Ue=-1,Qe=u.length;for(w||(w=Yp),Ae||(Ae=[]);++Ue<Qe;){var it=u[Ue];p>0&&w(it)?p>1?Xr(it,p-1,w,re,Ae):oc(Ae,it):re||(Ae[Ae.length]=it)}return Ae}var tx=jp(),oC=jp(!0);function fc(u,p){return u&&tx(u,p,qr)}function I_(u,p){return u&&oC(u,p,qr)}function kp(u,p){return rc(p,function(w){return _c(u[w])})}function au(u,p){for(var w=0,re=(p=qn(p,u)).length;null!=u&&w<re;)u=u[La(p[w++])];return w&&w==re?u:b}function D_(u,p,w){var re=p(u);return Un(u)?re:oc(re,w(u))}function uo(u){return null==u?u===b?"[object Undefined]":"[object Null]":Sr&&Sr in ji(u)?function Q_(u){var p=Di.call(u,Sr),w=u[Sr];try{u[Sr]=b;var re=!0}catch{}var Ae=Ap.call(u);return re&&(p?u[Sr]=w:delete u[Sr]),Ae}(u):function Cx(u){return Ap.call(u)}(u)}function R_(u,p){return u>p}function O_(u,p){return null!=u&&Di.call(u,p)}function sF(u,p){return null!=u&&p in ji(u)}function k_(u,p,w){for(var re=w?ai:mp,Ae=u[0].length,Ue=u.length,Qe=Ue,it=bt(Ue),ut=1/0,St=[];Qe--;){var Ct=u[Qe];Qe&&p&&(Ct=Yi(Ct,ws(p))),ut=Or(Ct.length,ut),it[Qe]=!w&&(p||Ae>=120&&Ct.length>=120)?new su(Qe&&Ct):b}Ct=u[0];var Nt=-1,Yt=it[0];e:for(;++Nt<Ae&&St.length<ut;){var ln=Ct[Nt],xn=p?p(ln):ln;if(ln=w||0!==ln?ln:0,!(Yt?_h(Yt,xn):re(St,xn,w))){for(Qe=Ue;--Qe;){var Zn=it[Qe];if(!(Zn?_h(Zn,xn):re(u[Qe],xn,w)))continue e}Yt&&Yt.push(xn),St.push(ln)}}return St}function cu(u,p,w){var re=null==(u=rb(u,p=qn(p,u)))?u:u[La(ho(p))];return null==re?b:ns(re,u,w)}function ix(u){return fr(u)&&uo(u)==Ye}function lu(u,p,w,re,Ae){return u===p||(null==u||null==p||!fr(u)&&!fr(p)?u!=u&&p!=p:function cC(u,p,w,re,Ae,Ue){var Qe=Un(u),it=Un(p),ut=Qe?_e:Ao(u),St=it?_e:Ao(p),Ct=(ut=ut==Ye?F:ut)==F,Nt=(St=St==Ye?F:St)==F,Yt=ut==St;if(Yt&&fl(u)){if(!fl(p))return!1;Qe=!0,Ct=!1}if(Yt&&!Ct)return Ue||(Ue=new Ra),Qe||bc(u)?gc(u,p,w,re,Ae,Ue):function _C(u,p,w,re,Ae,Ue,Qe){switch(w){case Z:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case Te:return!(u.byteLength!=p.byteLength||!Ue(new Cp(u),new Cp(p)));case R:case se:case X:return qs(+u,+p);case Fe:return u.name==p.name&&u.message==p.message;case ze:case gt:return u==p+"";case Q:var it=Ql;case Ge:if(it||(it=yp),u.size!=p.size&&!(1&re))return!1;var St=Qe.get(u);if(St)return St==p;re|=2,Qe.set(u,p);var Ct=gc(it(u),it(p),re,Ae,Ue,Qe);return Qe.delete(u),Ct;case Pt:if(dc)return dc.call(u)==dc.call(p)}return!1}(u,p,ut,w,re,Ae,Ue);if(!(1&w)){var ln=Ct&&Di.call(u,"__wrapped__"),xn=Nt&&Di.call(p,"__wrapped__");if(ln||xn){var Zn=ln?u.value():u,An=xn?p.value():p;return Ue||(Ue=new Ra),Ae(Zn,An,w,re,Ue)}}return!!Yt&&(Ue||(Ue=new Ra),function Gp(u,p,w,re,Ae,Ue){var Qe=1&w,it=hu(u),ut=it.length;if(ut!=hu(p).length&&!Qe)return!1;for(var Nt=ut;Nt--;){var Yt=it[Nt];if(!(Qe?Yt in p:Di.call(p,Yt)))return!1}var ln=Ue.get(u),xn=Ue.get(p);if(ln&&xn)return ln==p&&xn==u;var Zn=!0;Ue.set(u,p),Ue.set(p,u);for(var An=Qe;++Nt<ut;){var si=u[Yt=it[Nt]],li=p[Yt];if(re)var Rs=Qe?re(li,si,Yt,p,u,Ue):re(si,li,Yt,u,p,Ue);if(!(Rs===b?si===li||Ae(si,li,w,re,Ue):Rs)){Zn=!1;break}An||(An="constructor"==Yt)}if(Zn&&!An){var To=u.constructor,Os=p.constructor;To!=Os&&"constructor"in u&&"constructor"in p&&!("function"==typeof To&&To instanceof To&&"function"==typeof Os&&Os instanceof Os)&&(Zn=!1)}return Ue.delete(u),Ue.delete(p),Zn}(u,p,w,re,Ae,Ue))}(u,p,w,re,lu,Ae))}function P_(u,p,w,re){var Ae=w.length,Ue=Ae,Qe=!re;if(null==u)return!Ue;for(u=ji(u);Ae--;){var it=w[Ae];if(Qe&&it[2]?it[1]!==u[it[0]]:!(it[0]in u))return!1}for(;++Ae<Ue;){var ut=(it=w[Ae])[0],St=u[ut],Ct=it[1];if(Qe&&it[2]){if(St===b&&!(ut in u))return!1}else{var Nt=new Ra;if(re)var Yt=re(St,Ct,ut,u,p,Nt);if(!(Yt===b?lu(Ct,St,3,re,Nt):Yt))return!1}}return!0}function lC(u){return!(!Oi(u)||function yC(u){return!!v_&&v_ in u}(u))&&(_c(u)?jn:Hs).test(wi(u))}function ax(u){return"function"==typeof u?u:null==u?cs:"object"==typeof u?Un(u)?dx(u[0],u[1]):Np(u):Aw(u)}function N_(u){if(!ud(u))return rr(u);var p=[];for(var w in ji(u))Di.call(u,w)&&"constructor"!=w&&p.push(w);return p}function Pp(u,p){return u<p}function lx(u,p){var w=-1,re=ss(u)?bt(u.length):[];return hc(u,function(Ae,Ue,Qe){re[++w]=p(Ae,Ue,Qe)}),re}function Np(u){var p=Z_(u);return 1==p.length&&p[0][2]?Lh(p[0][0],p[0][1]):function(w){return w===u||P_(w,u,p)}}function dx(u,p){return Xp(u)&&tb(p)?Lh(La(u),p):function(w){var re=Rb(w,u);return re===b&&re===p?zo(w,u):lu(p,re,3)}}function Ss(u,p,w,re,Ae){u!==p&&tx(p,function(Ue,Qe){if(Ae||(Ae=new Ra),Oi(Ue))!function ux(u,p,w,re,Ae,Ue,Qe){var it=mu(u,w),ut=mu(p,w),St=Qe.get(ut);if(St)Oa(u,w,St);else{var Ct=Ue?Ue(it,ut,w+"",u,p,Qe):b,Nt=Ct===b;if(Nt){var Yt=Un(ut),ln=!Yt&&fl(ut),xn=!Yt&&!ln&&bc(ut);Ct=ut,Yt||ln||xn?Un(it)?Ct=it:Mr(it)?Ct=Bo(it):ln?(Nt=!1,Ct=H_(ut,!0)):xn?(Nt=!1,Ct=bx(ut,!0)):Ct=[]:fd(ut)||hl(ut)?(Ct=it,hl(it)?Ct=Zh(it):(!Oi(it)||_c(it))&&(Ct=Ax(ut))):Nt=!1}Nt&&(Qe.set(ut,Ct),Ae(Ct,ut,re,Ue,Qe),Qe.delete(ut)),Oa(u,w,Ct)}}(u,p,Qe,w,Ss,re,Ae);else{var it=re?re(mu(u,Qe),Ue,Qe+"",u,p,Ae):b;it===b&&(it=Ue),Oa(u,Qe,it)}},as)}function F_(u,p){var w=u.length;if(w)return cl(p+=p<0?w:0,w)?u[p]:b}function Ui(u,p,w){p=p.length?Yi(p,function(Ue){return Un(Ue)?function(Qe){return au(Qe,1===Ue.length?Ue[0]:Ue)}:Ue}):[cs];var re=-1;return p=Yi(p,ws(_n())),function YN(ct,Et){var bt=ct.length;for(ct.sort(Et);bt--;)ct[bt]=ct[bt].value;return ct}(lx(u,function(Ue,Qe,it){return{criteria:Yi(p,function(St){return St(Ue)}),index:++re,value:Ue}}),function(Ue,Qe){return function yx(u,p,w){for(var re=-1,Ae=u.criteria,Ue=p.criteria,Qe=Ae.length,it=w.length;++re<Qe;){var ut=fC(Ae[re],Ue[re]);if(ut)return re>=it?ut:ut*("desc"==w[re]?-1:1)}return u.index-p.index}(Ue,Qe,w)})}function Ch(u,p,w){for(var re=-1,Ae=p.length,Ue={};++re<Ae;){var Qe=p[re],it=au(u,Qe);w(it,Qe)&&du(Ue,qn(Qe,u),it)}return Ue}function B_(u,p,w,re){var Ae=re?f_:ql,Ue=-1,Qe=p.length,it=u;for(u===p&&(p=Bo(p)),w&&(it=Yi(u,ws(w)));++Ue<Qe;)for(var ut=0,St=p[Ue],Ct=w?w(St):St;(ut=Ae(it,Ct,ut,re))>-1;)it!==u&&Ur.call(it,ut,1),Ur.call(u,ut,1);return u}function j_(u,p){for(var w=u?p.length:0,re=w-1;w--;){var Ae=p[w];if(w==re||Ae!==Ue){var Ue=Ae;cl(Ae)?Ur.call(u,Ae,1):Lp(u,Ae)}}return u}function il(u,p){return u+Tp(vr()*(p-u+1))}function U_(u,p){var w="";if(!u||p<1||p>Ne)return w;do{p%2&&(w+=u),(p=Tp(p/2))&&(u+=u)}while(p);return w}function oi(u,p){return qp(ib(u,p,cs),u+"")}function dC(u){return rC(pl(u))}function rl(u,p){var w=pl(u);return Jp(w,nl(p,0,w.length))}function du(u,p,w,re){if(!Oi(u))return u;for(var Ae=-1,Ue=(p=qn(p,u)).length,Qe=Ue-1,it=u;null!=it&&++Ae<Ue;){var ut=La(p[Ae]),St=w;if("__proto__"===ut||"constructor"===ut||"prototype"===ut)return u;if(Ae!=Qe){var Ct=it[ut];(St=re?re(Ct,ut,it):b)===b&&(St=Oi(Ct)?Ct:cl(p[Ae+1])?[]:{})}Dp(it,ut,St),it=it[ut]}return u}var hx=Zc?function(u,p){return Zc.set(u,p),u}:cs,fx=cc?function(u,p){return cc(u,"toString",{configurable:!0,enumerable:!1,value:sf(p),writable:!0})}:cs;function px(u){return Jp(pl(u))}function Ms(u,p,w){var re=-1,Ae=u.length;p<0&&(p=-p>Ae?0:Ae+p),(w=w>Ae?Ae:w)<0&&(w+=Ae),Ae=p>w?0:w-p>>>0,p>>>=0;for(var Ue=bt(Ae);++re<Ae;)Ue[re]=u[re+p];return Ue}function uC(u,p){var w;return hc(u,function(re,Ae,Ue){return!(w=p(re,Ae,Ue))}),!!w}function En(u,p,w){var re=0,Ae=null==u?re:u.length;if("number"==typeof p&&p==p&&Ae<=2147483647){for(;re<Ae;){var Ue=re+Ae>>>1,Qe=u[Ue];null!==Qe&&!Vo(Qe)&&(w?Qe<=p:Qe<p)?re=Ue+1:Ae=Ue}return Ae}return Fp(u,p,cs,w)}function Fp(u,p,w,re){var Ae=0,Ue=null==u?0:u.length;if(0===Ue)return 0;for(var Qe=(p=w(p))!=p,it=null===p,ut=Vo(p),St=p===b;Ae<Ue;){var Ct=Tp((Ae+Ue)/2),Nt=w(u[Ct]),Yt=Nt!==b,ln=null===Nt,xn=Nt==Nt,Zn=Vo(Nt);if(Qe)var An=re||xn;else An=St?xn&&(re||Yt):it?xn&&Yt&&(re||!ln):ut?xn&&Yt&&!ln&&(re||!Zn):!ln&&!Zn&&(re?Nt<=p:Nt<p);An?Ae=Ct+1:Ue=Ct}return Or(Ue,4294967294)}function hC(u,p){for(var w=-1,re=u.length,Ae=0,Ue=[];++w<re;){var Qe=u[w],it=p?p(Qe):Qe;if(!w||!qs(it,ut)){var ut=it;Ue[Ae++]=0===Qe?0:Qe}}return Ue}function mx(u){return"number"==typeof u?u:Vo(u)?NaN:+u}function Ts(u){if("string"==typeof u)return u;if(Un(u))return Yi(u,Ts)+"";if(Vo(u))return ci?ci.call(u):"";var p=u+"";return"0"==p&&1/u==-we?"-0":p}function ol(u,p,w){var re=-1,Ae=mp,Ue=u.length,Qe=!0,it=[],ut=it;if(w)Qe=!1,Ae=ai;else if(Ue>=200){var St=p?null:gC(u);if(St)return yp(St);Qe=!1,Ae=_h,ut=new su}else ut=p?[]:it;e:for(;++re<Ue;){var Ct=u[re],Nt=p?p(Ct):Ct;if(Ct=w||0!==Ct?Ct:0,Qe&&Nt==Nt){for(var Yt=ut.length;Yt--;)if(ut[Yt]===Nt)continue e;p&&ut.push(Nt),it.push(Ct)}else Ae(ut,Nt,w)||(ut!==it&&ut.push(Nt),it.push(Ct))}return it}function Lp(u,p){return null==(u=rb(u,p=qn(p,u)))||delete u[La(ho(p))]}function ld(u,p,w,re){return du(u,p,w(au(u,p)),re)}function Bp(u,p,w,re){for(var Ae=u.length,Ue=re?Ae:-1;(re?Ue--:++Ue<Ae)&&p(u[Ue],Ue,u););return w?Ms(u,re?0:Ue,re?Ue+1:Ae):Ms(u,re?Ue+1:0,re?Ae:Ue)}function gx(u,p){var w=u;return w instanceof ri&&(w=w.value()),vo(p,function(re,Ae){return Ae.func.apply(Ae.thisArg,oc([re],Ae.args))},w)}function V_(u,p,w){var re=u.length;if(re<2)return re?ol(u[0]):[];for(var Ae=-1,Ue=bt(re);++Ae<re;)for(var Qe=u[Ae],it=-1;++it<re;)it!=Ae&&(Ue[Ae]=sd(Ue[Ae]||Qe,u[it],p,w));return ol(Xr(Ue,1),p,w)}function _x(u,p,w){for(var re=-1,Ae=u.length,Ue=p.length,Qe={};++re<Ae;)w(Qe,u[re],re<Ue?p[re]:b);return Qe}function z_(u){return Mr(u)?u:[]}function It(u){return"function"==typeof u?u:cs}function qn(u,p){return Un(u)?u:Xp(u,p)?[u]:Co(bi(u))}var Pr=oi;function Vi(u,p,w){var re=u.length;return w=w===b?re:w,!p&&w>=re?u:Ms(u,p,w)}var Kr=Es||function(u){return ao.clearTimeout(u)};function H_(u,p){if(p)return u.slice();var w=u.length,re=on?on(w):new u.constructor(w);return u.copy(re),re}function dd(u){var p=new u.constructor(u.byteLength);return new Cp(p).set(new Cp(u)),p}function bx(u,p){var w=p?dd(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function fC(u,p){if(u!==p){var w=u!==b,re=null===u,Ae=u==u,Ue=Vo(u),Qe=p!==b,it=null===p,ut=p==p,St=Vo(p);if(!it&&!St&&!Ue&&u>p||Ue&&Qe&&ut&&!it&&!St||re&&Qe&&ut||!w&&ut||!Ae)return 1;if(!re&&!Ue&&!St&&u<p||St&&w&&Ae&&!re&&!Ue||it&&w&&Ae||!Qe&&Ae||!ut)return-1}return 0}function wo(u,p,w,re){for(var Ae=-1,Ue=u.length,Qe=w.length,it=-1,ut=p.length,St=Ri(Ue-Qe,0),Ct=bt(ut+St),Nt=!re;++it<ut;)Ct[it]=p[it];for(;++Ae<Qe;)(Nt||Ae<Ue)&&(Ct[w[Ae]]=u[Ae]);for(;St--;)Ct[it++]=u[Ae++];return Ct}function Na(u,p,w,re){for(var Ae=-1,Ue=u.length,Qe=-1,it=w.length,ut=-1,St=p.length,Ct=Ri(Ue-it,0),Nt=bt(Ct+St),Yt=!re;++Ae<Ct;)Nt[Ae]=u[Ae];for(var ln=Ae;++ut<St;)Nt[ln+ut]=p[ut];for(;++Qe<it;)(Yt||Ae<Ue)&&(Nt[ln+w[Qe]]=u[Ae++]);return Nt}function Bo(u,p){var w=-1,re=u.length;for(p||(p=bt(re));++w<re;)p[w]=u[w];return p}function jo(u,p,w,re){var Ae=!w;w||(w={});for(var Ue=-1,Qe=p.length;++Ue<Qe;){var it=p[Ue],ut=re?re(w[it],u[it],it,w,u):b;ut===b&&(ut=u[it]),Ae?ka(w,it,ut):Dp(w,it,ut)}return w}function Mh(u,p){return function(w,re){var Ae=Un(w)?WS:lo,Ue=p?p():{};return Ae(w,u,_n(re,2),Ue)}}function uu(u){return oi(function(p,w){var re=-1,Ae=w.length,Ue=Ae>1?w[Ae-1]:b,Qe=Ae>2?w[2]:b;for(Ue=u.length>3&&"function"==typeof Ue?(Ae--,Ue):b,Qe&&So(w[0],w[1],Qe)&&(Ue=Ae<3?b:Ue,Ae=1),p=ji(p);++re<Ae;){var it=w[re];it&&u(p,it,re,Ue)}return p})}function vx(u,p){return function(w,re){if(null==w)return w;if(!ss(w))return u(w,re);for(var Ae=w.length,Ue=p?Ae:-1,Qe=ji(w);(p?Ue--:++Ue<Ae)&&!1!==re(Qe[Ue],Ue,Qe););return w}}function jp(u){return function(p,w,re){for(var Ae=-1,Ue=ji(p),Qe=re(p),it=Qe.length;it--;){var ut=Qe[u?it:++Ae];if(!1===w(Ue[ut],ut,Ue))break}return p}}function Y_(u){return function(p){var w=Vt(p=bi(p))?Xn(p):b,re=w?w[0]:p.charAt(0),Ae=w?Vi(w,1).join(""):p.slice(1);return re[u]()+Ae}}function sl(u){return function(p){return vo(jb(mw(p).replace(hp,"")),u,"")}}function Th(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var w=tl(u.prototype),re=u.apply(w,p);return Oi(re)?re:w}}function Up(u){return function(p,w,re){var Ae=ji(p);if(!ss(p)){var Ue=_n(w,3);p=qr(p),w=function(it){return Ue(Ae[it],it,Ae)}}var Qe=u(p,w,re);return Qe>-1?Ae[Ue?p[Qe]:Qe]:b}}function X_(u){return Ys(function(p){var w=p.length,re=w,Ae=Cr.prototype.thru;for(u&&p.reverse();re--;){var Ue=p[re];if("function"!=typeof Ue)throw new Ws(_);if(Ae&&!Qe&&"wrapper"==Ph(Ue))var Qe=new Cr([],!0)}for(re=Qe?re:w;++re<w;){var it=Ph(Ue=p[re]),ut="wrapper"==it?Wp(Ue):b;Qe=ut&&Xs(ut[0])&&424==ut[1]&&!ut[4].length&&1==ut[9]?Qe[Ph(ut[0])].apply(Qe,ut[3]):1==Ue.length&&Xs(Ue)?Qe[it]():Qe.thru(Ue)}return function(){var St=arguments,Ct=St[0];if(Qe&&1==St.length&&Un(Ct))return Qe.plant(Ct).value();for(var Nt=0,Yt=w?p[Nt].apply(this,St):Ct;++Nt<w;)Yt=p[Nt].call(this,Yt);return Yt}})}function Ih(u,p,w,re,Ae,Ue,Qe,it,ut,St){var Ct=p&O,Nt=1&p,Yt=2&p,ln=24&p,xn=512&p,Zn=Yt?b:Th(u);return function An(){for(var si=arguments.length,li=bt(si),Rs=si;Rs--;)li[Rs]=arguments[Rs];if(ln)var To=fu(An),Os=function YS(ct,Et){for(var bt=ct.length,Qt=0;bt--;)ct[bt]===Et&&++Qt;return Qt}(li,To);if(re&&(li=wo(li,re,Ae,ln)),Ue&&(li=Na(li,Ue,Qe,ln)),si-=Os,ln&&si<St){var xr=Xc(li,To);return or(u,p,Ih,An.placeholder,w,li,xr,it,ut,St-si)}var ja=Nt?w:this,xc=Yt?ja[u]:u;return si=li.length,it?li=function xC(u,p){for(var w=u.length,re=Or(p.length,w),Ae=Bo(u);re--;){var Ue=p[re];u[re]=cl(Ue,w)?Ae[Ue]:b}return u}(li,it):xn&&si>1&&li.reverse(),Ct&&ut<si&&(li.length=ut),this&&this!==ao&&this instanceof An&&(xc=Zn||Th(xc)),xc.apply(ja,li)}}function K_(u,p){return function(w,re){return function nx(u,p,w,re){return fc(u,function(Ae,Ue,Qe){p(re,w(Ae),Ue,Qe)}),re}(w,u,p(re),{})}}function Dh(u,p){return function(w,re){var Ae;if(w===b&&re===b)return p;if(w!==b&&(Ae=w),re!==b){if(Ae===b)return re;"string"==typeof w||"string"==typeof re?(w=Ts(w),re=Ts(re)):(w=mx(w),re=mx(re)),Ae=u(w,re)}return Ae}}function Rh(u){return Ys(function(p){return p=Yi(p,ws(_n())),oi(function(w){var re=this;return u(p,function(Ae){return ns(Ae,re,w)})})})}function Vp(u,p){var w=(p=p===b?" ":Ts(p)).length;if(w<2)return w?U_(p,u):p;var re=U_(p,td(u/Fo(p)));return Vt(p)?Vi(Xn(re),0,u).join(""):re.slice(0,u)}function Eo(u){return function(p,w,re){return re&&"number"!=typeof re&&So(p,w,re)&&(w=re=b),p=yc(p),w===b?(w=p,p=0):w=yc(w),function Cs(u,p,w,re){for(var Ae=-1,Ue=Ri(td((p-u)/(w||1)),0),Qe=bt(Ue);Ue--;)Qe[re?Ue:++Ae]=u,u+=w;return Qe}(p,w,re=re===b?p<w?1:-1:yc(re),u)}}function Fa(u){return function(p,w){return"string"==typeof p&&"string"==typeof w||(p=Ds(p),w=Ds(w)),u(p,w)}}function or(u,p,w,re,Ae,Ue,Qe,it,ut,St){var Ct=8&p;p|=Ct?x:64,4&(p&=~(Ct?64:x))||(p&=-4);var Zn=[u,p,Ae,Ct?Ue:b,Ct?Qe:b,Ct?b:Ue,Ct?b:Qe,it,ut,St],An=w.apply(b,Zn);return Xs(u)&&ll(An,Zn),An.placeholder=re,ob(An,u,p)}function Oh(u){var p=Rr[u];return function(w,re){if(w=Ds(w),(re=null==re?0:Or(Jn(re),292))&&Kt(w)){var Ae=(bi(w)+"e").split("e");return+((Ae=(bi(p(Ae[0]+"e"+(+Ae[1]+re)))+"e").split("e"))[0]+"e"+(+Ae[1]-re))}return p(w)}}var gC=id&&1/yp(new id([,-0]))[1]==we?function(u){return new id(u)}:cf;function zp(u){return function(p){var w=Ao(p);return w==Q?Ql(p):w==Ge?function sc(ct){var Et=-1,bt=Array(ct.size);return ct.forEach(function(Qt){bt[++Et]=[Qt,Qt]}),bt}(p):function p_(ct,Et){return Yi(Et,function(bt){return[bt,ct[bt]]})}(p,u(p))}}function mc(u,p,w,re,Ae,Ue,Qe,it){var ut=2&p;if(!ut&&"function"!=typeof u)throw new Ws(_);var St=re?re.length:0;if(St||(p&=-97,re=Ae=b),Qe=Qe===b?Qe:Ri(Jn(Qe),0),it=it===b?it:Jn(it),St-=Ae?Ae.length:0,64&p){var Ct=re,Nt=Ae;re=Ae=b}var Yt=ut?b:Wp(u),ln=[u,p,w,re,Ae,Ct,Nt,Ue,Qe,it];if(Yt&&function vC(u,p){var w=u[1],re=p[1],Ae=w|re;if(!(Ae<131)&&!(re==O&&8==w||re==O&&256==w&&u[7].length<=p[8]||384==re&&p[7].length<=p[8]&&8==w))return u;1&re&&(u[2]=p[2],Ae|=1&w?0:4);var it=p[3];if(it){var ut=u[3];u[3]=ut?wo(ut,it,p[4]):it,u[4]=ut?Xc(u[3],P):p[4]}(it=p[5])&&(u[5]=(ut=u[5])?Na(ut,it,p[6]):it,u[6]=ut?Xc(u[5],P):p[6]),(it=p[7])&&(u[7]=it),re&O&&(u[8]=null==u[8]?p[8]:Or(u[8],p[8])),null==u[9]&&(u[9]=p[9]),u[0]=p[0],u[1]=Ae}(ln,Yt),u=ln[0],p=ln[1],w=ln[2],re=ln[3],Ae=ln[4],!(it=ln[9]=ln[9]===b?ut?0:u.length:Ri(ln[9]-St,0))&&24&p&&(p&=-25),p&&1!=p)xn=8==p||16==p?function xx(u,p,w){var re=Th(u);return function Ae(){for(var Ue=arguments.length,Qe=bt(Ue),it=Ue,ut=fu(Ae);it--;)Qe[it]=arguments[it];var St=Ue<3&&Qe[0]!==ut&&Qe[Ue-1]!==ut?[]:Xc(Qe,ut);return(Ue-=St.length)<w?or(u,p,Ih,Ae.placeholder,b,Qe,St,b,b,w-Ue):ns(this&&this!==ao&&this instanceof Ae?re:u,this,Qe)}}(u,p,it):p!=x&&33!=p||Ae.length?Ih.apply(b,ln):function mC(u,p,w,re){var Ae=1&p,Ue=Th(u);return function Qe(){for(var it=-1,ut=arguments.length,St=-1,Ct=re.length,Nt=bt(Ct+ut),Yt=this&&this!==ao&&this instanceof Qe?Ue:u;++St<Ct;)Nt[St]=re[St];for(;ut--;)Nt[St++]=arguments[++it];return ns(Yt,Ae?w:this,Nt)}}(u,p,w,re);else var xn=function $_(u,p,w){var re=1&p,Ae=Th(u);return function Ue(){return(this&&this!==ao&&this instanceof Ue?Ae:u).apply(re?w:this,arguments)}}(u,p,w);return ob((Yt?hx:ll)(xn,ln),u,p)}function q_(u,p,w,re){return u===b||qs(u,ed[w])&&!Di.call(re,w)?p:u}function J_(u,p,w,re,Ae,Ue){return Oi(u)&&Oi(p)&&(Ue.set(p,u),Ss(u,p,b,J_,Ue),Ue.delete(p)),u}function Hp(u){return fd(u)?b:u}function gc(u,p,w,re,Ae,Ue){var Qe=1&w,it=u.length,ut=p.length;if(it!=ut&&!(Qe&&ut>it))return!1;var St=Ue.get(u),Ct=Ue.get(p);if(St&&Ct)return St==p&&Ct==u;var Nt=-1,Yt=!0,ln=2&w?new su:b;for(Ue.set(u,p),Ue.set(p,u);++Nt<it;){var xn=u[Nt],Zn=p[Nt];if(re)var An=Qe?re(Zn,xn,Nt,p,u,Ue):re(xn,Zn,Nt,u,p,Ue);if(An!==b){if(An)continue;Yt=!1;break}if(ln){if(!Vv(p,function(si,li){if(!_h(ln,li)&&(xn===si||Ae(xn,si,w,re,Ue)))return ln.push(li)})){Yt=!1;break}}else if(xn!==Zn&&!Ae(xn,Zn,w,re,Ue)){Yt=!1;break}}return Ue.delete(u),Ue.delete(p),Yt}function Ys(u){return qp(ib(u,b,SC),u+"")}function hu(u){return D_(u,qr,wx)}function kh(u){return D_(u,as,Ex)}var Wp=Zc?function(u){return Zc.get(u)}:cf;function Ph(u){for(var p=u.name+"",w=pa[p],re=Di.call(pa,p)?w.length:0;re--;){var Ae=w[re],Ue=Ae.func;if(null==Ue||Ue==u)return Ae.name}return p}function fu(u){return(Di.call(Pe,"placeholder")?Pe:u).placeholder}function _n(){var u=Pe.iteratee||af;return u=u===af?ax:u,arguments.length?u(arguments[0],arguments[1]):u}function al(u,p){var w=u.__data__;return function bC(u){var p=typeof u;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u}(p)?w["string"==typeof p?"string":"hash"]:w.map}function Z_(u){for(var p=qr(u),w=p.length;w--;){var re=p[w],Ae=u[re];p[w]=[re,Ae,tb(Ae)]}return p}function pu(u,p){var w=function $v(ct,Et){return null==ct?b:ct[Et]}(u,p);return lC(w)?w:b}var wx=w_?function(u){return null==u?[]:(u=ji(u),rc(w_(u),function(p){return Ut.call(u,p)}))}:gd,Ex=w_?function(u){for(var p=[];u;)oc(p,wx(u)),u=Mp(u);return p}:gd,Ao=uo;function $p(u,p,w){for(var re=-1,Ae=(p=qn(p,u)).length,Ue=!1;++re<Ae;){var Qe=La(p[re]);if(!(Ue=null!=u&&w(u,Qe)))break;u=u[Qe]}return Ue||++re!=Ae?Ue:!!(Ae=null==u?0:u.length)&&Kh(Ae)&&cl(Qe,Ae)&&(Un(u)||hl(u))}function Ax(u){return"function"!=typeof u.constructor||ud(u)?{}:tl(Mp(u))}function Yp(u){return Un(u)||hl(u)||!!(_i&&u&&u[_i])}function cl(u,p){var w=typeof u;return!!(p=p??Ne)&&("number"==w||"symbol"!=w&&ua.test(u))&&u>-1&&u%1==0&&u<p}function So(u,p,w){if(!Oi(w))return!1;var re=typeof p;return!!("number"==re?ss(w)&&cl(p,w.length):"string"==re&&p in w)&&qs(w[p],u)}function Xp(u,p){if(Un(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!Vo(u))||hh.test(u)||!eu.test(u)||null!=p&&u in ji(p)}function Xs(u){var p=Ph(u),w=Pe[p];if("function"!=typeof w||!(p in ri.prototype))return!1;if(u===w)return!0;var re=Wp(w);return!!re&&u===re[0]}(Jc&&Ao(new Jc(new ArrayBuffer(1)))!=Z||On&&Ao(new On)!=Q||nd&&Ao(nd.resolve())!=de||id&&Ao(new id)!=Ge||Ia&&Ao(new Ia)!=Gt)&&(Ao=function(u){var p=uo(u),w=p==F?u.constructor:b,re=w?wi(w):"";if(re)switch(re){case Da:return Z;case xh:return Q;case Jv:return de;case Qc:return Ge;case lc:return Gt}return p});var Kp=wp?_c:Hb;function ud(u){var p=u&&u.constructor;return u===("function"==typeof p&&p.prototype||ed)}function tb(u){return u==u&&!Oi(u)}function Lh(u,p){return function(w){return null!=w&&w[u]===p&&(p!==b||u in ji(w))}}function ib(u,p,w){return p=Ri(p===b?u.length-1:p,0),function(){for(var re=arguments,Ae=-1,Ue=Ri(re.length-p,0),Qe=bt(Ue);++Ae<Ue;)Qe[Ae]=re[p+Ae];Ae=-1;for(var it=bt(p+1);++Ae<p;)it[Ae]=re[Ae];return it[p]=w(Qe),ns(u,this,it)}}function rb(u,p){return p.length<2?u:au(u,Ms(p,0,-1))}function mu(u,p){if(("constructor"!==p||"function"!=typeof u[p])&&"__proto__"!=p)return u[p]}var ll=gu(hx),Bh=qv||function(u,p){return ao.setTimeout(u,p)},qp=gu(fx);function ob(u,p,w){var re=p+"";return qp(u,function eb(u,p){var w=p.length;if(!w)return u;var re=w-1;return p[re]=(w>1?"& ":"")+p[re],p=p.join(w>2?", ":" "),u.replace($l,"{\n/* [wrapped with "+p+"] */\n")}(re,function sb(u,p){return No(at,function(w){var re="_."+w[0];p&w[1]&&!mp(u,re)&&u.push(re)}),u.sort()}(function lF(u){var p=u.match(zc);return p?p[1].split(ph):[]}(re),w)))}function gu(u){var p=0,w=0;return function(){var re=xo(),Ae=16-(re-w);if(w=re,Ae>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(b,arguments)}}function Jp(u,p){var w=-1,re=u.length,Ae=re-1;for(p=p===b?re:p;++w<p;){var Ue=il(w,Ae),Qe=u[Ue];u[Ue]=u[w],u[w]=Qe}return u.length=p,u}var Co=function nb(u){var p=Wh(u,function(re){return 500===w.size&&w.clear(),re}),w=p.cache;return p}(function(u){var p=[];return 46===u.charCodeAt(0)&&p.push(""),u.replace(fh,function(w,re,Ae,Ue){p.push(Ae?Ue.replace(Gc,"$1"):re||w)}),p});function La(u){if("string"==typeof u||Vo(u))return u;var p=u+"";return"0"==p&&1/u==-we?"-0":p}function wi(u){if(null!=u){try{return Ep.call(u)}catch{}try{return u+""}catch{}}return""}function Mx(u){if(u instanceof ri)return u.clone();var p=new Cr(u.__wrapped__,u.__chain__);return p.__actions__=Bo(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}var bu=oi(function(u,p){return Mr(u)?sd(u,Xr(p,1,Mr,!0)):[]}),yu=oi(function(u,p){var w=ho(p);return Mr(w)&&(w=b),Mr(u)?sd(u,Xr(p,1,Mr,!0),_n(w,2)):[]}),Ix=oi(function(u,p){var w=ho(p);return Mr(w)&&(w=b),Mr(u)?sd(u,Xr(p,1,Mr,!0),b,w):[]});function EC(u,p,w){var re=null==u?0:u.length;if(!re)return-1;var Ae=null==w?0:Jn(w);return Ae<0&&(Ae=Ri(re+Ae,0)),nu(u,_n(p,3),Ae)}function AC(u,p,w){var re=null==u?0:u.length;if(!re)return-1;var Ae=re-1;return w!==b&&(Ae=Jn(w),Ae=w<0?Ri(re+Ae,0):Or(Ae,re-1)),nu(u,_n(p,3),Ae,!0)}function SC(u){return null!=u&&u.length?Xr(u,1):[]}function Dx(u){return u&&u.length?u[0]:b}var MC=oi(function(u){var p=Yi(u,z_);return p.length&&p[0]===u[0]?k_(p):[]}),jh=oi(function(u){var p=ho(u),w=Yi(u,z_);return p===ho(w)?p=b:w.pop(),w.length&&w[0]===u[0]?k_(w,_n(p,2)):[]}),TC=oi(function(u){var p=ho(u),w=Yi(u,z_);return(p="function"==typeof p?p:b)&&w.pop(),w.length&&w[0]===u[0]?k_(w,b,p):[]});function ho(u){var p=null==u?0:u.length;return p?u[p-1]:b}var Uh=oi(Ox);function Ox(u,p){return u&&u.length&&p&&p.length?B_(u,p):u}var mF=Ys(function(u,p){var w=null==u?0:u.length,re=Rp(u,p);return j_(u,Yi(p,function(Ae){return cl(Ae,w)?+Ae:Ae}).sort(fC)),re});function Vh(u){return null==u?u:qc.call(u)}var em=oi(function(u){return ol(Xr(u,1,Mr,!0))}),BC=oi(function(u){var p=ho(u);return Mr(p)&&(p=b),ol(Xr(u,1,Mr,!0),_n(p,2))}),Px=oi(function(u){var p=ho(u);return p="function"==typeof p?p:b,ol(Xr(u,1,Mr,!0),b,p)});function db(u){if(!u||!u.length)return[];var p=0;return u=rc(u,function(w){if(Mr(w))return p=Ri(w.length,p),!0}),Jl(p,function(w){return Yi(u,Hv(w))})}function Fx(u,p){if(!u||!u.length)return[];var w=db(u);return null==p?w:Yi(w,function(re){return ns(p,b,re)})}var Au=oi(function(u,p){return Mr(u)?sd(u,p):[]}),zh=oi(function(u){return V_(rc(u,Mr))}),jC=oi(function(u){var p=ho(u);return Mr(p)&&(p=b),V_(rc(u,Mr),_n(p,2))}),_F=oi(function(u){var p=ho(u);return p="function"==typeof p?p:b,V_(rc(u,Mr),b,p)}),Lx=oi(db),VC=oi(function(u){var p=u.length,w=p>1?u[p-1]:b;return w="function"==typeof w?(u.pop(),w):b,Fx(u,w)});function Bx(u){var p=Pe(u);return p.__chain__=!0,p}function hd(u,p){return p(u)}var jx=Ys(function(u){var p=u.length,w=p?u[0]:0,re=this.__wrapped__,Ae=function(Ue){return Rp(Ue,u)};return!(p>1||this.__actions__.length)&&re instanceof ri&&cl(w)?((re=re.slice(w,+w+(p?1:0))).__actions__.push({func:hd,args:[Ae],thisArg:b}),new Cr(re,this.__chain__).thru(function(Ue){return p&&!Ue.length&&Ue.push(b),Ue})):this.thru(Ae)}),ub=Mh(function(u,p,w){Di.call(u,w)?++u[w]:ka(u,w,1)}),hb=Up(EC),EF=Up(AC);function $C(u,p){return(Un(u)?No:hc)(u,_n(p,3))}function zx(u,p){return(Un(u)?fp:T_)(u,_n(p,3))}var nm=Mh(function(u,p,w){Di.call(u,w)?u[w].push(p):ka(u,w,[p])}),Hx=oi(function(u,p,w){var re=-1,Ae="function"==typeof p,Ue=ss(u)?bt(u.length):[];return hc(u,function(Qe){Ue[++re]=Ae?ns(p,Qe,w):cu(Qe,p,w)}),Ue}),Gx=Mh(function(u,p,w){ka(u,w,p)});function Hh(u,p){return(Un(u)?Yi:lx)(u,_n(p,3))}var Wx=Mh(function(u,p,w){u[w?0:1].push(p)},function(){return[[],[]]}),fb=oi(function(u,p){if(null==u)return[];var w=p.length;return w>1&&So(u,p[0],p[1])?p=[]:w>2&&So(p[0],p[1],p[2])&&(p=[p[0]]),Ui(u,Xr(p,1),[])}),sm=Kv||function(){return ao.Date.now()};function Xx(u,p,w){return p=w?b:p,mc(u,O,b,b,b,b,p=u&&null==p?u.length:p)}function pb(u,p){var w;if("function"!=typeof p)throw new Ws(_);return u=Jn(u),function(){return--u>0&&(w=p.apply(this,arguments)),u<=1&&(p=b),w}}var mb=oi(function(u,p,w){var re=1;if(w.length){var Ae=Xc(w,fu(mb));re|=x}return mc(u,re,p,w,Ae)}),Kx=oi(function(u,p,w){var re=3;if(w.length){var Ae=Xc(w,fu(Kx));re|=x}return mc(p,re,u,w,Ae)});function gb(u,p,w){var re,Ae,Ue,Qe,it,ut,St=0,Ct=!1,Nt=!1,Yt=!0;if("function"!=typeof u)throw new Ws(_);function ln(xr){var ja=re,xc=Ae;return re=Ae=b,St=xr,Qe=u.apply(xc,ja)}function An(xr){var ja=xr-ut;return ut===b||ja>=p||ja<0||Nt&&xr-St>=Ue}function si(){var xr=sm();if(An(xr))return li(xr);it=Bh(si,function Zn(xr){var wc=p-(xr-ut);return Nt?Or(wc,Ue-(xr-St)):wc}(xr))}function li(xr){return it=b,Yt&&re?ln(xr):(re=Ae=b,Qe)}function Os(){var xr=sm(),ja=An(xr);if(re=arguments,Ae=this,ut=xr,ja){if(it===b)return function xn(xr){return St=xr,it=Bh(si,p),Ct?ln(xr):Qe}(ut);if(Nt)return Kr(it),it=Bh(si,p),ln(ut)}return it===b&&(it=Bh(si,p)),Qe}return p=Ds(p)||0,Oi(w)&&(Ct=!!w.leading,Ue=(Nt="maxWait"in w)?Ri(Ds(w.maxWait)||0,p):Ue,Yt="trailing"in w?!!w.trailing:Yt),Os.cancel=function Rs(){it!==b&&Kr(it),St=0,re=ut=Ae=it=b},Os.flush=function To(){return it===b?Qe:li(sm())},Os}var _b=oi(function(u,p){return Op(u,1,p)}),Mo=oi(function(u,p,w){return Op(u,Ds(p)||0,w)});function Wh(u,p){if("function"!=typeof u||null!=p&&"function"!=typeof p)throw new Ws(_);var w=function(){var re=arguments,Ae=p?p.apply(this,re):re[0],Ue=w.cache;if(Ue.has(Ae))return Ue.get(Ae);var Qe=u.apply(this,re);return w.cache=Ue.set(Ae,Qe)||Ue,Qe};return w.cache=new(Wh.Cache||uc),w}function $h(u){if("function"!=typeof u)throw new Ws(_);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}Wh.Cache=uc;var qx=Pr(function(u,p){var w=(p=1==p.length&&Un(p[0])?Yi(p[0],ws(_n())):Yi(Xr(p,1),ws(_n()))).length;return oi(function(re){for(var Ae=-1,Ue=Or(re.length,w);++Ae<Ue;)re[Ae]=p[Ae].call(this,re[Ae]);return ns(u,this,re)})}),bb=oi(function(u,p){var w=Xc(p,fu(bb));return mc(u,x,b,p,w)}),yb=oi(function(u,p){var w=Xc(p,fu(yb));return mc(u,64,b,p,w)}),ZC=Ys(function(u,p){return mc(u,256,b,b,b,p)});function qs(u,p){return u===p||u!=u&&p!=p}var Cu=Fa(R_),cm=Fa(function(u,p){return u>=p}),hl=ix(function(){return arguments}())?ix:function(u){return fr(u)&&Di.call(u,"callee")&&!Ut.call(u,"callee")},Un=bt.isArray,lm=HS?ws(HS):function sC(u){return fr(u)&&uo(u)==Te};function ss(u){return null!=u&&Kh(u.length)&&!_c(u)}function Mr(u){return fr(u)&&ss(u)}var fl=yr||Hb,oM=At?ws(At):function aC(u){return fr(u)&&uo(u)==se};function Xh(u){if(!fr(u))return!1;var p=uo(u);return p==Fe||"[object DOMException]"==p||"string"==typeof u.message&&"string"==typeof u.name&&!fd(u)}function _c(u){if(!Oi(u))return!1;var p=uo(u);return p==et||p==fe||"[object AsyncFunction]"==p||"[object Proxy]"==p}function um(u){return"number"==typeof u&&u==Jn(u)}function Kh(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Ne}function Oi(u){var p=typeof u;return null!=u&&("object"==p||"function"==p)}function fr(u){return null!=u&&"object"==typeof u}var Eb=GS?ws(GS):function rx(u){return fr(u)&&Ao(u)==Q};function Ab(u){return"number"==typeof u||fr(u)&&uo(u)==X}function fd(u){if(!fr(u)||uo(u)!=F)return!1;var p=Mp(u);if(null===p)return!0;var w=Di.call(p,"constructor")&&p.constructor;return"function"==typeof w&&w instanceof w&&Ep.call(w)==ZS}var fm=tn?ws(tn):function ox(u){return fr(u)&&uo(u)==ze},Mu=mh?ws(mh):function kr(u){return fr(u)&&Ao(u)==Ge};function qh(u){return"string"==typeof u||!Un(u)&&fr(u)&&uo(u)==gt}function Vo(u){return"symbol"==typeof u||fr(u)&&uo(u)==Pt}var bc=jv?ws(jv):function sx(u){return fr(u)&&Kh(u.length)&&!!ir[uo(u)]},dM=Fa(Pp),rw=Fa(function(u,p){return u<=p});function ow(u){if(!u)return[];if(ss(u))return qh(u)?Xn(u):Bo(u);if(Ar&&u[Ar])return function __(ct){for(var Et,bt=[];!(Et=ct.next()).done;)bt.push(Et.value);return bt}(u[Ar]());var p=Ao(u);return(p==Q?Ql:p==Ge?yp:pl)(u)}function yc(u){return u?(u=Ds(u))===we||u===-we?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Jn(u){var p=yc(u),w=p%1;return p==p?w?p-w:p:0}function Cb(u){return u?nl(Jn(u),0,me):0}function Ds(u){if("number"==typeof u)return u;if(Vo(u))return NaN;if(Oi(u)){var p="function"==typeof u.valueOf?u.valueOf():u;u=Oi(p)?p+"":p}if("string"!=typeof u)return 0===u?u:+u;u=gh(u);var w=Wc.test(u);return w||Ta.test(u)?HN(u.slice(2),w?2:8):Mi.test(u)?NaN:+u}function Zh(u){return jo(u,as(u))}function bi(u){return null==u?"":Ts(u)}var uM=uu(function(u,p){if(ud(p)||ss(p))jo(p,qr(p),u);else for(var w in p)Di.call(p,w)&&Dp(u,w,p[w])}),sw=uu(function(u,p){jo(p,as(p),u)}),Tb=uu(function(u,p,w,re){jo(p,as(p),u,re)}),hM=uu(function(u,p,w,re){jo(p,qr(p),u,re)}),Ib=Ys(Rp),Tu=oi(function(u,p){u=ji(u);var w=-1,re=p.length,Ae=re>2?p[2]:b;for(Ae&&So(p[0],p[1],Ae)&&(re=1);++w<re;)for(var Ue=p[w],Qe=as(Ue),it=-1,ut=Qe.length;++it<ut;){var St=Qe[it],Ct=u[St];(Ct===b||qs(Ct,ed[St])&&!Di.call(u,St))&&(u[St]=Ue[St])}return u}),mm=oi(function(u){return u.push(b,J_),ns(uw,b,u)});function Rb(u,p,w){var re=null==u?b:au(u,p);return re===b?w:re}function zo(u,p){return null!=u&&$p(u,p,sF)}var Ba=K_(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Ap.call(p)),u[p]=w},sf(cs)),bM=K_(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Ap.call(p)),Di.call(u,p)?u[p].push(w):u[p]=[w]},_n),yM=oi(cu);function qr(u){return ss(u)?iC(u):N_(u)}function as(u){return ss(u)?iC(u,!0):function cx(u){if(!Oi(u))return function Sx(u){var p=[];if(null!=u)for(var w in ji(u))p.push(w);return p}(u);var p=ud(u),w=[];for(var re in u)"constructor"==re&&(p||!Di.call(u,re))||w.push(re);return w}(u)}var dw=uu(function(u,p,w){Ss(u,p,w)}),uw=uu(function(u,p,w,re){Ss(u,p,w,re)}),wM=Ys(function(u,p){var w={};if(null==u)return w;var re=!1;p=Yi(p,function(Ue){return Ue=qn(Ue,u),re||(re=Ue.length>1),Ue}),jo(u,kh(u),w),re&&(w=As(w,7,Hp));for(var Ae=p.length;Ae--;)Lp(w,p[Ae]);return w}),AM=Ys(function(u,p){return null==u?{}:function L_(u,p){return Ch(u,p,function(w,re){return zo(u,re)})}(u,p)});function Qh(u,p){if(null==u)return{};var w=Yi(kh(u),function(re){return[re]});return p=_n(p),Ch(u,w,function(re,Ae){return p(re,Ae[0])})}var Ob=zp(qr),kb=zp(as);function pl(u){return null==u?[]:m_(u,qr(u))}var CM=sl(function(u,p,w){return p=p.toLowerCase(),u+(w?pw(p):p)});function pw(u){return bm(bi(u).toLowerCase())}function mw(u){return(u=bi(u))&&u.replace(ic,Yc).replace(Bn,"")}var Nb=sl(function(u,p,w){return u+(w?"-":"")+p.toLowerCase()}),MM=sl(function(u,p,w){return u+(w?" ":"")+p.toLowerCase()}),Jr=Y_("toLowerCase"),OM=sl(function(u,p,w){return u+(w?"_":"")+p.toLowerCase()}),yw=sl(function(u,p,w){return u+(w?" ":"")+bm(p)}),PM=sl(function(u,p,w){return u+(w?" ":"")+p.toUpperCase()}),bm=Y_("toUpperCase");function jb(u,p,w){return u=bi(u),(p=w?b:p)===b?function bp(ct){return VS.test(ct)}(u)?function ac(ct){return ct.match(US)||[]}(u):function $N(ct){return ct.match(Hc)||[]}(u):u.match(p)||[]}var rf=oi(function(u,p){try{return ns(u,b,p)}catch(w){return Xh(w)?w:new Fn(w)}}),NF=Ys(function(u,p){return No(p,function(w){w=La(w),ka(u,w,mb(u[w],u))}),u});function sf(u){return function(){return u}}var ww=X_(),md=X_(!0);function cs(u){return u}function af(u){return ax("function"==typeof u?u:As(u,1))}var Vb=oi(function(u,p){return function(w){return cu(w,u,p)}}),vm=oi(function(u,p){return function(w){return cu(u,w,p)}});function ls(u,p,w){var re=qr(p),Ae=kp(p,re);null==w&&(!Oi(p)||!Ae.length&&re.length)&&(w=p,p=u,u=this,Ae=kp(p,qr(p)));var Ue=!(Oi(w)&&"chain"in w&&!w.chain),Qe=_c(u);return No(Ae,function(it){var ut=p[it];u[it]=ut,Qe&&(u.prototype[it]=function(){var St=this.__chain__;if(Ue||St){var Ct=u(this.__wrapped__);return(Ct.__actions__=Bo(this.__actions__)).push({func:ut,args:arguments,thisArg:u}),Ct.__chain__=St,Ct}return ut.apply(u,oc([this.value()],arguments))})}),u}function cf(){}var BM=Rh(Yi),Ew=Rh(pp),Iu=Rh(Vv);function Aw(u){return Xp(u)?Hv(La(u)):function os(u){return function(p){return au(p,u)}}(u)}var UM=Eo(),zb=Eo(!0);function gd(){return[]}function Hb(){return!1}var LF=Dh(function(u,p){return u+p},0),BF=Oh("ceil"),wm=Dh(function(u,p){return u/p},1),zM=Oh("floor"),Em=Dh(function(u,p){return u*p},1),Ru=Oh("round"),Kb=Dh(function(u,p){return u-p},0);return Pe.after=function qC(u,p){if("function"!=typeof p)throw new Ws(_);return u=Jn(u),function(){if(--u<1)return p.apply(this,arguments)}},Pe.ary=Xx,Pe.assign=uM,Pe.assignIn=sw,Pe.assignInWith=Tb,Pe.assignWith=hM,Pe.at=Ib,Pe.before=pb,Pe.bind=mb,Pe.bindAll=NF,Pe.bindKey=Kx,Pe.castArray=function tM(){if(!arguments.length)return[];var u=arguments[0];return Un(u)?u:[u]},Pe.chain=Bx,Pe.chunk=function Tx(u,p,w){p=(w?So(u,p,w):p===b)?1:Ri(Jn(p),0);var re=null==u?0:u.length;if(!re||p<1)return[];for(var Ae=0,Ue=0,Qe=bt(td(re/p));Ae<re;)Qe[Ue++]=Ms(u,Ae,Ae+=p);return Qe},Pe.compact=function dl(u){for(var p=-1,w=null==u?0:u.length,re=0,Ae=[];++p<w;){var Ue=u[p];Ue&&(Ae[re++]=Ue)}return Ae},Pe.concat=function _u(){var u=arguments.length;if(!u)return[];for(var p=bt(u-1),w=arguments[0],re=u;re--;)p[re-1]=arguments[re];return oc(Un(w)?Bo(w):[w],Xr(p,1))},Pe.cond=function Ub(u){var p=null==u?0:u.length,w=_n();return u=p?Yi(u,function(re){if("function"!=typeof re[1])throw new Ws(_);return[w(re[0]),re[1]]}):[],oi(function(re){for(var Ae=-1;++Ae<p;){var Ue=u[Ae];if(ns(Ue[0],this,re))return ns(Ue[1],this,re)}})},Pe.conforms=function NM(u){return function C_(u){var p=qr(u);return function(w){return M_(w,u,p)}}(As(u,1))},Pe.constant=sf,Pe.countBy=ub,Pe.create=function fM(u,p){var w=tl(u);return null==p?w:Ah(w,p)},Pe.curry=function Uo(u,p,w){var re=mc(u,8,b,b,b,b,b,p=w?b:p);return re.placeholder=Uo.placeholder,re},Pe.curryRight=function am(u,p,w){var re=mc(u,16,b,b,b,b,b,p=w?b:p);return re.placeholder=am.placeholder,re},Pe.debounce=gb,Pe.defaults=Tu,Pe.defaultsDeep=mm,Pe.defer=_b,Pe.delay=Mo,Pe.difference=bu,Pe.differenceBy=yu,Pe.differenceWith=Ix,Pe.drop=function ab(u,p,w){var re=null==u?0:u.length;return re?Ms(u,(p=w||p===b?1:Jn(p))<0?0:p,re):[]},Pe.dropRight=function vu(u,p,w){var re=null==u?0:u.length;return re?Ms(u,0,(p=re-(p=w||p===b?1:Jn(p)))<0?0:p):[]},Pe.dropRightWhile=function dF(u,p){return u&&u.length?Bp(u,_n(p,3),!0,!0):[]},Pe.dropWhile=function wC(u,p){return u&&u.length?Bp(u,_n(p,3),!0):[]},Pe.fill=function uF(u,p,w,re){var Ae=null==u?0:u.length;return Ae?(w&&"number"!=typeof w&&So(u,p,w)&&(w=0,re=Ae),function Sh(u,p,w,re){var Ae=u.length;for((w=Jn(w))<0&&(w=-w>Ae?0:Ae+w),(re=re===b||re>Ae?Ae:Jn(re))<0&&(re+=Ae),re=w>re?0:Cb(re);w<re;)u[w++]=p;return u}(u,p,w,re)):[]},Pe.filter=function wF(u,p){return(Un(u)?rc:cd)(u,_n(p,3))},Pe.flatMap=function AF(u,p){return Xr(Hh(u,p),1)},Pe.flatMapDeep=function SF(u,p){return Xr(Hh(u,p),we)},Pe.flatMapDepth=function CF(u,p,w){return w=w===b?1:Jn(w),Xr(Hh(u,p),w)},Pe.flatten=SC,Pe.flattenDeep=function hF(u){return null!=u&&u.length?Xr(u,we):[]},Pe.flattenDepth=function fF(u,p){return null!=u&&u.length?Xr(u,p=p===b?1:Jn(p)):[]},Pe.flip=function Gh(u){return mc(u,512)},Pe.flow=ww,Pe.flowRight=md,Pe.fromPairs=function xu(u){for(var p=-1,w=null==u?0:u.length,re={};++p<w;){var Ae=u[p];re[Ae[0]]=Ae[1]}return re},Pe.functions=function mM(u){return null==u?[]:kp(u,qr(u))},Pe.functionsIn=function gM(u){return null==u?[]:kp(u,as(u))},Pe.groupBy=nm,Pe.initial=function zr(u){return null!=u&&u.length?Ms(u,0,-1):[]},Pe.intersection=MC,Pe.intersectionBy=jh,Pe.intersectionWith=TC,Pe.invert=Ba,Pe.invertBy=bM,Pe.invokeMap=Hx,Pe.iteratee=af,Pe.keyBy=Gx,Pe.keys=qr,Pe.keysIn=as,Pe.map=Hh,Pe.mapKeys=function vM(u,p){var w={};return p=_n(p,3),fc(u,function(re,Ae,Ue){ka(w,p(re,Ae,Ue),re)}),w},Pe.mapValues=function xM(u,p){var w={};return p=_n(p,3),fc(u,function(re,Ae,Ue){ka(w,Ae,p(re,Ae,Ue))}),w},Pe.matches=function ym(u){return Np(As(u,1))},Pe.matchesProperty=function FM(u,p){return dx(u,As(p,1))},Pe.memoize=Wh,Pe.merge=dw,Pe.mergeWith=uw,Pe.method=Vb,Pe.methodOf=vm,Pe.mixin=ls,Pe.negate=$h,Pe.nthArg=function LM(u){return u=Jn(u),oi(function(p){return F_(p,u)})},Pe.omit=wM,Pe.omitBy=function EM(u,p){return Qh(u,$h(_n(p)))},Pe.once=function JC(u){return pb(2,u)},Pe.orderBy=function Su(u,p,w,re){return null==u?[]:(Un(p)||(p=null==p?[]:[p]),Un(w=re?b:w)||(w=null==w?[]:[w]),Ui(u,p,w))},Pe.over=BM,Pe.overArgs=qx,Pe.overEvery=Ew,Pe.overSome=Iu,Pe.partial=bb,Pe.partialRight=yb,Pe.partition=Wx,Pe.pick=AM,Pe.pickBy=Qh,Pe.property=Aw,Pe.propertyOf=function jM(u){return function(p){return null==u?b:au(u,p)}},Pe.pull=Uh,Pe.pullAll=Ox,Pe.pullAllBy=function pF(u,p,w){return u&&u.length&&p&&p.length?B_(u,p,_n(w,2)):u},Pe.pullAllWith=function IC(u,p,w){return u&&u.length&&p&&p.length?B_(u,p,b,w):u},Pe.pullAt=mF,Pe.range=UM,Pe.rangeRight=zb,Pe.rearg=ZC,Pe.reject=function om(u,p){return(Un(u)?rc:cd)(u,$h(_n(p,3)))},Pe.remove=function Is(u,p){var w=[];if(!u||!u.length)return w;var re=-1,Ae=[],Ue=u.length;for(p=_n(p,3);++re<Ue;){var Qe=u[re];p(Qe,re,u)&&(w.push(Qe),Ae.push(re))}return j_(u,Ae),w},Pe.rest=function Jx(u,p){if("function"!=typeof u)throw new Ws(_);return oi(u,p=p===b?p:Jn(p))},Pe.reverse=Vh,Pe.sampleSize=function YC(u,p,w){return p=(w?So(u,p,w):p===b)?1:Jn(p),(Un(u)?oF:rl)(u,p)},Pe.set=function ef(u,p,w){return null==u?u:du(u,p,w)},Pe.setWith=function hw(u,p,w,re){return re="function"==typeof re?re:b,null==u?u:du(u,p,w,re)},Pe.shuffle=function XC(u){return(Un(u)?od:px)(u)},Pe.slice=function wu(u,p,w){var re=null==u?0:u.length;return re?(w&&"number"!=typeof w&&So(u,p,w)?(p=0,w=re):(p=null==p?0:Jn(p),w=w===b?re:Jn(w)),Ms(u,p,w)):[]},Pe.sortBy=fb,Pe.sortedUniq=function PC(u){return u&&u.length?hC(u):[]},Pe.sortedUniqBy=function NC(u,p){return u&&u.length?hC(u,_n(p,2)):[]},Pe.split=function kM(u,p,w){return w&&"number"!=typeof w&&So(u,p,w)&&(p=w=b),(w=w===b?me:w>>>0)?(u=bi(u))&&("string"==typeof p||null!=p&&!fm(p))&&!(p=Ts(p))&&Vt(u)?Vi(Xn(u),0,w):u.split(p,w):[]},Pe.spread=function QC(u,p){if("function"!=typeof u)throw new Ws(_);return p=null==p?0:Ri(Jn(p),0),oi(function(w){var re=w[p],Ae=Vi(w,0,p);return re&&oc(Ae,re),ns(u,this,Ae)})},Pe.tail=function cb(u){var p=null==u?0:u.length;return p?Ms(u,1,p):[]},Pe.take=function Qp(u,p,w){return u&&u.length?Ms(u,0,(p=w||p===b?1:Jn(p))<0?0:p):[]},Pe.takeRight=function FC(u,p,w){var re=null==u?0:u.length;return re?Ms(u,(p=re-(p=w||p===b?1:Jn(p)))<0?0:p,re):[]},Pe.takeRightWhile=function Eu(u,p){return u&&u.length?Bp(u,_n(p,3),!1,!0):[]},Pe.takeWhile=function LC(u,p){return u&&u.length?Bp(u,_n(p,3)):[]},Pe.tap=function zC(u,p){return p(u),u},Pe.throttle=function eM(u,p,w){var re=!0,Ae=!0;if("function"!=typeof u)throw new Ws(_);return Oi(w)&&(re="leading"in w?!!w.leading:re,Ae="trailing"in w?!!w.trailing:Ae),gb(u,p,{leading:re,maxWait:p,trailing:Ae})},Pe.thru=hd,Pe.toArray=ow,Pe.toPairs=Ob,Pe.toPairsIn=kb,Pe.toPath=function Gb(u){return Un(u)?Yi(u,La):Vo(u)?[u]:Bo(Co(bi(u)))},Pe.toPlainObject=Zh,Pe.transform=function TF(u,p,w){var re=Un(u),Ae=re||fl(u)||bc(u);if(p=_n(p,4),null==w){var Ue=u&&u.constructor;w=Ae?re?new Ue:[]:Oi(u)&&_c(Ue)?tl(Mp(u)):{}}return(Ae?No:fc)(u,function(Qe,it,ut){return p(w,Qe,it,ut)}),w},Pe.unary=function vb(u){return Xx(u,1)},Pe.union=em,Pe.unionBy=BC,Pe.unionWith=Px,Pe.uniq=function lb(u){return u&&u.length?ol(u):[]},Pe.uniqBy=function tm(u,p){return u&&u.length?ol(u,_n(p,2)):[]},Pe.uniqWith=function Nx(u,p){return p="function"==typeof p?p:b,u&&u.length?ol(u,b,p):[]},Pe.unset=function IF(u,p){return null==u||Lp(u,p)},Pe.unzip=db,Pe.unzipWith=Fx,Pe.update=function DF(u,p,w){return null==u?u:ld(u,p,It(w))},Pe.updateWith=function Pb(u,p,w,re){return re="function"==typeof re?re:b,null==u?u:ld(u,p,It(w),re)},Pe.values=pl,Pe.valuesIn=function RF(u){return null==u?[]:m_(u,as(u))},Pe.without=Au,Pe.words=jb,Pe.wrap=function xb(u,p){return bb(It(p),u)},Pe.xor=zh,Pe.xorBy=jC,Pe.xorWith=_F,Pe.zip=Lx,Pe.zipObject=function UC(u,p){return _x(u||[],p||[],Dp)},Pe.zipObjectDeep=function bF(u,p){return _x(u||[],p||[],du)},Pe.zipWith=VC,Pe.entries=Ob,Pe.entriesIn=kb,Pe.extend=sw,Pe.extendWith=Tb,ls(Pe,Pe),Pe.add=LF,Pe.attempt=rf,Pe.camelCase=CM,Pe.capitalize=pw,Pe.ceil=BF,Pe.clamp=function OF(u,p,w){return w===b&&(w=p,p=b),w!==b&&(w=(w=Ds(w))==w?w:0),p!==b&&(p=(p=Ds(p))==p?p:0),nl(Ds(u),p,w)},Pe.clone=function Yh(u){return As(u,4)},Pe.cloneDeep=function iM(u){return As(u,5)},Pe.cloneDeepWith=function Zx(u,p){return As(u,5,p="function"==typeof p?p:b)},Pe.cloneWith=function nM(u,p){return As(u,4,p="function"==typeof p?p:b)},Pe.conformsTo=function Qx(u,p){return null==p||M_(u,p,qr(p))},Pe.deburr=mw,Pe.defaultTo=function xw(u,p){return null==u||u!=u?p:u},Pe.divide=wm,Pe.endsWith=function gw(u,p,w){u=bi(u),p=Ts(p);var re=u.length,Ae=w=w===b?re:nl(Jn(w),0,re);return(w-=p.length)>=0&&u.slice(w,Ae)==p},Pe.eq=qs,Pe.escape=function gm(u){return(u=bi(u))&&vs.test(u)?u.replace(Ji,XS):u},Pe.escapeRegExp=function _w(u){return(u=bi(u))&&da.test(u)?u.replace(Gl,"\\$&"):u},Pe.every=function xF(u,p,w){var re=Un(u)?pp:ex;return w&&So(u,p,w)&&(p=b),re(u,_n(p,3))},Pe.find=hb,Pe.findIndex=EC,Pe.findKey=function Db(u,p){return gp(u,_n(p,3),fc)},Pe.findLast=EF,Pe.findLastIndex=AC,Pe.findLastKey=function aw(u,p){return gp(u,_n(p,3),I_)},Pe.floor=zM,Pe.forEach=$C,Pe.forEachRight=zx,Pe.forIn=function cw(u,p){return null==u?u:tx(u,_n(p,3),as)},Pe.forInRight=function lw(u,p){return null==u?u:oC(u,_n(p,3),as)},Pe.forOwn=function pd(u,p){return u&&fc(u,_n(p,3))},Pe.forOwnRight=function pM(u,p){return u&&I_(u,_n(p,3))},Pe.get=Rb,Pe.gt=Cu,Pe.gte=cm,Pe.has=function _M(u,p){return null!=u&&$p(u,p,O_)},Pe.hasIn=zo,Pe.head=Dx,Pe.identity=cs,Pe.includes=function im(u,p,w,re){u=ss(u)?u:pl(u),w=w&&!re?Jn(w):0;var Ae=u.length;return w<0&&(w=Ri(Ae+w,0)),qh(u)?w<=Ae&&u.indexOf(p,w)>-1:!!Ae&&ql(u,p,w)>-1},Pe.indexOf=function CC(u,p,w){var re=null==u?0:u.length;if(!re)return-1;var Ae=null==w?0:Jn(w);return Ae<0&&(Ae=Ri(re+Ae,0)),ql(u,p,Ae)},Pe.inRange=function fw(u,p,w){return p=yc(p),w===b?(w=p,p=0):w=yc(w),function aF(u,p,w){return u>=Or(p,w)&&u<Ri(p,w)}(u=Ds(u),p,w)},Pe.invoke=yM,Pe.isArguments=hl,Pe.isArray=Un,Pe.isArrayBuffer=lm,Pe.isArrayLike=ss,Pe.isArrayLikeObject=Mr,Pe.isBoolean=function rM(u){return!0===u||!1===u||fr(u)&&uo(u)==R},Pe.isBuffer=fl,Pe.isDate=oM,Pe.isElement=function sM(u){return fr(u)&&1===u.nodeType&&!fd(u)},Pe.isEmpty=function ew(u){if(null==u)return!0;if(ss(u)&&(Un(u)||"string"==typeof u||"function"==typeof u.splice||fl(u)||bc(u)||hl(u)))return!u.length;var p=Ao(u);if(p==Q||p==Ge)return!u.size;if(ud(u))return!N_(u).length;for(var w in u)if(Di.call(u,w))return!1;return!0},Pe.isEqual=function dm(u,p){return lu(u,p)},Pe.isEqualWith=function wb(u,p,w){var re=(w="function"==typeof w?w:b)?w(u,p):b;return re===b?lu(u,p,b,w):!!re},Pe.isError=Xh,Pe.isFinite=function aM(u){return"number"==typeof u&&Kt(u)},Pe.isFunction=_c,Pe.isInteger=um,Pe.isLength=Kh,Pe.isMap=Eb,Pe.isMatch=function cM(u,p){return u===p||P_(u,p,Z_(p))},Pe.isMatchWith=function MF(u,p,w){return w="function"==typeof w?w:b,P_(u,p,Z_(p),w)},Pe.isNaN=function hm(u){return Ab(u)&&u!=+u},Pe.isNative=function lM(u){if(Kp(u))throw new Fn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return lC(u)},Pe.isNil=function nw(u){return null==u},Pe.isNull=function tw(u){return null===u},Pe.isNumber=Ab,Pe.isObject=Oi,Pe.isObjectLike=fr,Pe.isPlainObject=fd,Pe.isRegExp=fm,Pe.isSafeInteger=function pm(u){return um(u)&&u>=-Ne&&u<=Ne},Pe.isSet=Mu,Pe.isString=qh,Pe.isSymbol=Vo,Pe.isTypedArray=bc,Pe.isUndefined=function iw(u){return u===b},Pe.isWeakMap=function Sb(u){return fr(u)&&Ao(u)==Gt},Pe.isWeakSet=function Jh(u){return fr(u)&&"[object WeakSet]"==uo(u)},Pe.join=function Ks(u,p){return null==u?"":Wn.call(u,p)},Pe.kebabCase=Nb,Pe.last=ho,Pe.lastIndexOf=function Rx(u,p,w){var re=null==u?0:u.length;if(!re)return-1;var Ae=re;return w!==b&&(Ae=(Ae=Jn(w))<0?Ri(re+Ae,0):Or(Ae,re-1)),p==p?function fa(ct,Et,bt){for(var Qt=bt+1;Qt--;)if(ct[Qt]===Et)return Qt;return Qt}(u,p,Ae):nu(u,zv,Ae,!0)},Pe.lowerCase=MM,Pe.lowerFirst=Jr,Pe.lt=dM,Pe.lte=rw,Pe.max=function Wb(u){return u&&u.length?ad(u,cs,R_):b},Pe.maxBy=function $b(u,p){return u&&u.length?ad(u,_n(p,2),R_):b},Pe.mean=function Du(u){return _p(u,cs)},Pe.meanBy=function Yb(u,p){return _p(u,_n(p,2))},Pe.min=function Xb(u){return u&&u.length?ad(u,cs,Pp):b},Pe.minBy=function lf(u,p){return u&&u.length?ad(u,_n(p,2),Pp):b},Pe.stubArray=gd,Pe.stubFalse=Hb,Pe.stubObject=function Sw(){return{}},Pe.stubString=function ma(){return""},Pe.stubTrue=function FF(){return!0},Pe.multiply=Em,Pe.nth=function Zp(u,p){return u&&u.length?F_(u,Jn(p)):b},Pe.noConflict=function xm(){return ao._===this&&(ao._=QS),this},Pe.noop=cf,Pe.now=sm,Pe.pad=function TM(u,p,w){u=bi(u);var re=(p=Jn(p))?Fo(u):0;if(!p||re>=p)return u;var Ae=(p-re)/2;return Vp(Tp(Ae),w)+u+Vp(td(Ae),w)},Pe.padEnd=function IM(u,p,w){u=bi(u);var re=(p=Jn(p))?Fo(u):0;return p&&re<p?u+Vp(p-re,w):u},Pe.padStart=function Fb(u,p,w){u=bi(u);var re=(p=Jn(p))?Fo(u):0;return p&&re<p?Vp(p-re,w)+u:u},Pe.parseInt=function bw(u,p,w){return w||null==p?p=0:p&&(p=+p),iu(bi(u).replace(nc,""),p||0)},Pe.random=function SM(u,p,w){if(w&&"boolean"!=typeof w&&So(u,p,w)&&(p=w=b),w===b&&("boolean"==typeof p?(w=p,p=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&p===b?(u=0,p=1):(u=yc(u),p===b?(p=u,u=0):p=yc(p)),u>p){var re=u;u=p,p=re}if(w||u%1||p%1){var Ae=vr();return Or(u+Ae*(p-u+zN("1e-"+((Ae+"").length-1))),p)}return il(u,p)},Pe.reduce=function $x(u,p,w){var re=Un(u)?vo:$S,Ae=arguments.length<3;return re(u,_n(p,4),w,Ae,hc)},Pe.reduceRight=function rm(u,p,w){var re=Un(u)?Uv:$S,Ae=arguments.length<3;return re(u,_n(p,4),w,Ae,T_)},Pe.repeat=function DM(u,p,w){return p=(w?So(u,p,w):p===b)?1:Jn(p),U_(bi(u),p)},Pe.replace=function RM(){var u=arguments,p=bi(u[0]);return u.length<3?p:p.replace(u[1],u[2])},Pe.result=function vc(u,p,w){var re=-1,Ae=(p=qn(p,u)).length;for(Ae||(Ae=1,u=b);++re<Ae;){var Ue=null==u?b:u[La(p[re])];Ue===b&&(re=Ae,Ue=w),u=_c(Ue)?Ue.call(u):Ue}return u},Pe.round=Ru,Pe.runInContext=ct,Pe.sample=function ul(u){return(Un(u)?rC:dC)(u)},Pe.size=function KC(u){if(null==u)return 0;if(ss(u))return qh(u)?Fo(u):u.length;var p=Ao(u);return p==Q||p==Ge?u.size:N_(u).length},Pe.snakeCase=OM,Pe.some=function Yx(u,p,w){var re=Un(u)?Vv:uC;return w&&So(u,p,w)&&(p=b),re(u,_n(p,3))},Pe.sortedIndex=function gF(u,p){return En(u,p)},Pe.sortedIndexBy=function kx(u,p,w){return Fp(u,p,_n(w,2))},Pe.sortedIndexOf=function DC(u,p){var w=null==u?0:u.length;if(w){var re=En(u,p);if(re<w&&qs(u[re],p))return re}return-1},Pe.sortedLastIndex=function RC(u,p){return En(u,p,!0)},Pe.sortedLastIndexBy=function OC(u,p,w){return Fp(u,p,_n(w,2),!0)},Pe.sortedLastIndexOf=function kC(u,p){if(null!=u&&u.length){var re=En(u,p,!0)-1;if(qs(u[re],p))return re}return-1},Pe.startCase=yw,Pe.startsWith=function kF(u,p,w){return u=bi(u),w=null==w?0:nl(Jn(w),0,u.length),p=Ts(p),u.slice(w,w+p.length)==p},Pe.subtract=Kb,Pe.sum=function qb(u){return u&&u.length?Wv(u,cs):0},Pe.sumBy=function Am(u,p){return u&&u.length?Wv(u,_n(p,2)):0},Pe.template=function PF(u,p,w){var re=Pe.templateSettings;w&&So(u,p,w)&&(p=b),u=bi(u),p=Tb({},p,re,q_);var it,ut,Ae=Tb({},p.imports,re.imports,q_),Ue=qr(Ae),Qe=m_(Ae,Ue),St=0,Ct=p.interpolate||Oo,Nt="__p += '",Yt=xp((p.escape||Oo).source+"|"+Ct.source+"|"+(Ct===_o?Yl:Oo).source+"|"+(p.evaluate||Oo).source+"|$","g"),ln="//# sourceURL="+(Di.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xs+"]")+"\n";u.replace(Yt,function(An,si,li,Rs,To,Os){return li||(li=Rs),Nt+=u.slice(St,Os).replace(ge,nt),si&&(it=!0,Nt+="' +\n__e("+si+") +\n'"),To&&(ut=!0,Nt+="';\n"+To+";\n__p += '"),li&&(Nt+="' +\n((__t = ("+li+")) == null ? '' : __t) +\n'"),St=Os+An.length,An}),Nt+="';\n";var xn=Di.call(p,"variable")&&p.variable;if(xn){if(tu.test(xn))throw new Fn("Invalid `variable` option passed into `_.template`")}else Nt="with (obj) {\n"+Nt+"\n}\n";Nt=(ut?Nt.replace(Cn,""):Nt).replace(Do,"$1").replace(ys,"$1;"),Nt="function("+(xn||"obj")+") {\n"+(xn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(it?", __e = _.escape":"")+(ut?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Nt+"return __p\n}";var Zn=rf(function(){return Si(Ue,ln+"return "+Nt).apply(b,Qe)});if(Zn.source=Nt,Xh(Zn))throw Zn;return Zn},Pe.times=function Zr(u,p){if((u=Jn(u))<1||u>Ne)return[];var w=me,re=Or(u,me);p=_n(p),u-=me;for(var Ae=Jl(re,p);++w<u;)p(w);return Ae},Pe.toFinite=yc,Pe.toInteger=Jn,Pe.toLength=Cb,Pe.toLower=function tf(u){return bi(u).toLowerCase()},Pe.toNumber=Ds,Pe.toSafeInteger=function Mb(u){return u?nl(Jn(u),-Ne,Ne):0===u?u:0},Pe.toString=bi,Pe.toUpper=function vt(u){return bi(u).toUpperCase()},Pe.trim=function nf(u,p,w){if((u=bi(u))&&(w||p===b))return gh(u);if(!u||!(p=Ts(p)))return u;var re=Xn(u),Ae=Xn(p);return Vi(re,g_(re,Ae),Zl(re,Ae)+1).join("")},Pe.trimEnd=function _m(u,p,w){if((u=bi(u))&&(w||p===b))return u.slice(0,bh(u)+1);if(!u||!(p=Ts(p)))return u;var re=Xn(u);return Vi(re,0,Zl(re,Xn(p))+1).join("")},Pe.trimStart=function vw(u,p,w){if((u=bi(u))&&(w||p===b))return u.replace(nc,"");if(!u||!(p=Ts(p)))return u;var re=Xn(u);return Vi(re,g_(re,Xn(p))).join("")},Pe.truncate=function Lb(u,p){var w=30,re="...";if(Oi(p)){var Ae="separator"in p?p.separator:Ae;w="length"in p?Jn(p.length):w,re="omission"in p?Ts(p.omission):re}var Ue=(u=bi(u)).length;if(Vt(u)){var Qe=Xn(u);Ue=Qe.length}if(w>=Ue)return u;var it=w-Fo(re);if(it<1)return re;var ut=Qe?Vi(Qe,0,it).join(""):u.slice(0,it);if(Ae===b)return ut+re;if(Qe&&(it+=ut.length-it),fm(Ae)){if(u.slice(it).search(Ae)){var St,Ct=ut;for(Ae.global||(Ae=xp(Ae.source,bi(Li.exec(Ae))+"g")),Ae.lastIndex=0;St=Ae.exec(Ct);)var Nt=St.index;ut=ut.slice(0,Nt===b?it:Nt)}}else if(u.indexOf(Ts(Ae),it)!=it){var Yt=ut.lastIndexOf(Ae);Yt>-1&&(ut=ut.slice(0,Yt))}return ut+re},Pe.unescape=function Bb(u){return(u=bi(u))&&Yr.test(u)?u.replace(Qo,b_):u},Pe.uniqueId=function VM(u){var p=++JS;return bi(u)+p},Pe.upperCase=PM,Pe.upperFirst=bm,Pe.each=$C,Pe.eachRight=zx,Pe.first=Dx,ls(Pe,function(){var u={};return fc(Pe,function(p,w){Di.call(Pe.prototype,w)||(u[w]=p)}),u}(),{chain:!1}),Pe.VERSION="4.17.21",No(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Pe[u].placeholder=Pe}),No(["drop","take"],function(u,p){ri.prototype[u]=function(w){w=w===b?1:Ri(Jn(w),0);var re=this.__filtered__&&!p?new ri(this):this.clone();return re.__filtered__?re.__takeCount__=Or(w,re.__takeCount__):re.__views__.push({size:Or(w,me),type:u+(re.__dir__<0?"Right":"")}),re},ri.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),No(["filter","map","takeWhile"],function(u,p){var w=p+1,re=1==w||3==w;ri.prototype[u]=function(Ae){var Ue=this.clone();return Ue.__iteratees__.push({iteratee:_n(Ae,3),type:w}),Ue.__filtered__=Ue.__filtered__||re,Ue}}),No(["head","last"],function(u,p){var w="take"+(p?"Right":"");ri.prototype[u]=function(){return this[w](1).value()[0]}}),No(["initial","tail"],function(u,p){var w="drop"+(p?"":"Right");ri.prototype[u]=function(){return this.__filtered__?new ri(this):this[w](1)}}),ri.prototype.compact=function(){return this.filter(cs)},ri.prototype.find=function(u){return this.filter(u).head()},ri.prototype.findLast=function(u){return this.reverse().find(u)},ri.prototype.invokeMap=oi(function(u,p){return"function"==typeof u?new ri(this):this.map(function(w){return cu(w,u,p)})}),ri.prototype.reject=function(u){return this.filter($h(_n(u)))},ri.prototype.slice=function(u,p){u=Jn(u);var w=this;return w.__filtered__&&(u>0||p<0)?new ri(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),p!==b&&(w=(p=Jn(p))<0?w.dropRight(-p):w.take(p-u)),w)},ri.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ri.prototype.toArray=function(){return this.take(me)},fc(ri.prototype,function(u,p){var w=/^(?:filter|find|map|reject)|While$/.test(p),re=/^(?:head|last)$/.test(p),Ae=Pe[re?"take"+("last"==p?"Right":""):p],Ue=re||/^find/.test(p);Ae&&(Pe.prototype[p]=function(){var Qe=this.__wrapped__,it=re?[1]:arguments,ut=Qe instanceof ri,St=it[0],Ct=ut||Un(Qe),Nt=function(si){var li=Ae.apply(Pe,oc([si],it));return re&&Yt?li[0]:li};Ct&&w&&"function"==typeof St&&1!=St.length&&(ut=Ct=!1);var Yt=this.__chain__,xn=Ue&&!Yt,Zn=ut&&!this.__actions__.length;if(!Ue&&Ct){Qe=Zn?Qe:new ri(this);var An=u.apply(Qe,it);return An.__actions__.push({func:hd,args:[Nt],thisArg:b}),new Cr(An,Yt)}return xn&&Zn?u.apply(this,it):(An=this.thru(Nt),xn?re?An.value()[0]:An.value():An)})}),No(["pop","push","shift","sort","splice","unshift"],function(u){var p=is[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",re=/^(?:pop|shift)$/.test(u);Pe.prototype[u]=function(){var Ae=arguments;if(re&&!this.__chain__){var Ue=this.value();return p.apply(Un(Ue)?Ue:[],Ae)}return this[w](function(Qe){return p.apply(Un(Qe)?Qe:[],Ae)})}}),fc(ri.prototype,function(u,p){var w=Pe[p];if(w){var re=w.name+"";Di.call(pa,re)||(pa[re]=[]),pa[re].push({name:p,func:w})}}),pa[Ih(b,2).name]=[{name:"wrapper",func:b}],ri.prototype.clone=function ru(){var u=new ri(this.__wrapped__);return u.__actions__=Bo(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Bo(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Bo(this.__views__),u},ri.prototype.reverse=function Eh(){if(this.__filtered__){var u=new ri(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},ri.prototype.value=function co(){var u=this.__wrapped__.value(),p=this.__dir__,w=Un(u),re=p<0,Ae=w?u.length:0,Ue=function cF(u,p,w){for(var re=-1,Ae=w.length;++re<Ae;){var Ue=w[re],Qe=Ue.size;switch(Ue.type){case"drop":u+=Qe;break;case"dropRight":p-=Qe;break;case"take":p=Or(p,u+Qe);break;case"takeRight":u=Ri(u,p-Qe)}}return{start:u,end:p}}(0,Ae,this.__views__),Qe=Ue.start,it=Ue.end,ut=it-Qe,St=re?it:Qe-1,Ct=this.__iteratees__,Nt=Ct.length,Yt=0,ln=Or(ut,this.__takeCount__);if(!w||!re&&Ae==ut&&ln==ut)return gx(u,this.__actions__);var xn=[];e:for(;ut--&&Yt<ln;){for(var Zn=-1,An=u[St+=p];++Zn<Nt;){var si=Ct[Zn],Rs=si.type,To=(0,si.iteratee)(An);if(2==Rs)An=To;else if(!To){if(1==Rs)continue e;break e}}xn[Yt++]=An}return xn},Pe.prototype.at=jx,Pe.prototype.chain=function HC(){return Bx(this)},Pe.prototype.commit=function Ux(){return new Cr(this.value(),this.__chain__)},Pe.prototype.next=function yF(){this.__values__===b&&(this.__values__=ow(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Pe.prototype.plant=function vF(u){for(var p,w=this;w instanceof wh;){var re=Mx(w);re.__index__=0,re.__values__=b,p?Ae.__wrapped__=re:p=re;var Ae=re;w=w.__wrapped__}return Ae.__wrapped__=u,p},Pe.prototype.reverse=function GC(){var u=this.__wrapped__;if(u instanceof ri){var p=u;return this.__actions__.length&&(p=new ri(this)),(p=p.reverse()).__actions__.push({func:hd,args:[Vh],thisArg:b}),new Cr(p,this.__chain__)}return this.thru(Vh)},Pe.prototype.toJSON=Pe.prototype.valueOf=Pe.prototype.value=function WC(){return gx(this.__wrapped__,this.__actions__)},Pe.prototype.first=Pe.prototype.head,Ar&&(Pe.prototype[Ar]=function Vx(){return this}),Pe}();ao._=vh,(S=function(){return vh}.call(J,g,J,te))!==b&&(te.exports=S)}.call(this)},7659:(te,J,g)=>{var S=g(1811);function k(C,N){if("function"!=typeof C||null!=N&&"function"!=typeof N)throw new TypeError("Expected a function");var _=function(){var y=arguments,I=N?N.apply(this,y):y[0],L=_.cache;if(L.has(I))return L.get(I);var P=C.apply(this,y);return _.cache=L.set(I,P)||L,P};return _.cache=new(k.Cache||S),_}k.Cache=S,te.exports=k},2692:(te,J,g)=>{var S=g(3400),b=g(6443),k=g(6300),C=g(8916);te.exports=function N(_){return k(_)?S(C(_)):b(_)}},7184:(te,J,g)=>{var S=g(1883),b=g(252),k=g(8951),C=g(3817),N=k(function(_,y){if(null==_)return[];var I=y.length;return I>1&&C(_,y[0],y[1])?y=[]:I>2&&C(y[0],y[1],y[2])&&(y=[y[0]]),b(_,S(y,1),[])});te.exports=N},1315:te=>{te.exports=function J(){return[]}},5706:te=>{te.exports=function J(){return!1}},2674:(te,J,g)=>{var S=g(7002);te.exports=function b(k){return null==k?"":S(k)}},5249:(te,J,g)=>{var S=g(549),b=S.ARRAY_BUFFER_SUPPORT,k=S.SYMBOL_SUPPORT;te.exports=function(N,_){var y,I,L,P,j;if(!N)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(N)||b&&ArrayBuffer.isView(N)||"string"==typeof N||"[object Arguments]"===N.toString())for(L=0,P=N.length;L<P;L++)_(N[L],L);else if("function"!=typeof N.forEach)if(k&&Symbol.iterator in N&&"function"!=typeof N.next&&(N=N[Symbol.iterator]()),"function"!=typeof N.next)for(I in N)N.hasOwnProperty(I)&&_(N[I],I);else for(y=N,L=0;!0!==(j=y.next()).done;)_(j.value,L),L++;else N.forEach(_)}},2508:te=>{function J(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=function(){return this}),J.of=function(){var g=arguments,S=g.length,b=0;return new J(function(){return b>=S?{done:!0}:{done:!1,value:g[b++]}})},J.empty=function(){return new J(function(){return{done:!0}})},J.fromSequence=function(g){var S=0,b=g.length;return new J(function(){return S>=b?{done:!0}:{done:!1,value:g[S++]}})},J.is=function(g){return g instanceof J||"object"==typeof g&&null!==g&&"function"==typeof g.next},te.exports=J},549:(te,J)=>{J.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",J.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(te,J,g)=>{var S=g(2508),b=g(5249);function k(){this.clear()}k.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},k.prototype.enqueue=function(C){return this.items.push(C),++this.size},k.prototype.dequeue=function(){if(this.size){var C=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,C}},k.prototype.peek=function(){if(this.size)return this.items[this.offset]},k.prototype.forEach=function(C,N){N=arguments.length>1?N:this;for(var _=this.offset,y=0,I=this.items.length;_<I;_++,y++)C.call(N,this.items[_],y,this)},k.prototype.toArray=function(){return this.items.slice(this.offset)},k.prototype.values=function(){var C=this.items,N=this.offset;return new S(function(){if(N>=C.length)return{done:!0};var _=C[N];return N++,{value:_,done:!1}})},k.prototype.entries=function(){var C=this.items,N=this.offset,_=0;return new S(function(){if(N>=C.length)return{done:!0};var y=C[N];return N++,{value:[_++,y],done:!1}})},typeof Symbol<"u"&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.toString=function(){return this.toArray().join(",")},k.prototype.toJSON=function(){return this.toArray()},k.prototype.inspect=function(){var C=this.toArray();return Object.defineProperty(C,"constructor",{value:k,enumerable:!1}),C},typeof Symbol<"u"&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),k.from=function(C){var N=new k;return b(C,function(_){N.enqueue(_)}),N},k.of=function(){return k.from(arguments)},te.exports=k},5020:te=>{te.exports=function J(g,S,b){function k(_,y){if(!S[_]){if(!g[_]){if(C)return C(_,!0);throw new Error("Cannot find module '"+_+"'")}y=S[_]={exports:{}},g[_][0].call(y.exports,function(L){return k(g[_][1][L]||L)},y,y.exports,J,g,S,b)}return S[_].exports}for(var C=void 0,N=0;N<b.length;N++)k(b[N]);return k}({1:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){"use strict";var j=J("crypto");function oe(q,U){var x;return void 0===(x="passthrough"!==(U=ce(q,U)).algorithm?j.createHash(U.algorithm):new ne).write&&(x.write=x.update,x.end=x.update),ie(U,x).dispatch(q),x.update||x.end(""),x.digest?x.digest("buffer"===U.encoding?void 0:U.encoding):(q=x.read(),"buffer"!==U.encoding?q.toString(U.encoding):q)}(S=g.exports=oe).sha1=function(q){return oe(q)},S.keys=function(q){return oe(q,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},S.MD5=function(q){return oe(q,{algorithm:"md5",encoding:"hex"})},S.keysMD5=function(q){return oe(q,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var M=j.getHashes?j.getHashes().slice():["sha1","md5"],$=(M.push("passthrough"),["buffer","hex","binary","base64"]);function ce(q,U){var x={};if(x.algorithm=(U=U||{}).algorithm||"sha1",x.encoding=U.encoding||"hex",x.excludeValues=!!U.excludeValues,x.algorithm=x.algorithm.toLowerCase(),x.encoding=x.encoding.toLowerCase(),x.ignoreUnknown=!0===U.ignoreUnknown,x.respectType=!1!==U.respectType,x.respectFunctionNames=!1!==U.respectFunctionNames,x.respectFunctionProperties=!1!==U.respectFunctionProperties,x.unorderedArrays=!0===U.unorderedArrays,x.unorderedSets=!1!==U.unorderedSets,x.unorderedObjects=!1!==U.unorderedObjects,x.replacer=U.replacer||void 0,x.excludeKeys=U.excludeKeys||void 0,void 0===q)throw new Error("Object argument required.");for(var B=0;B<M.length;++B)M[B].toLowerCase()===x.algorithm.toLowerCase()&&(x.algorithm=M[B]);if(-1===M.indexOf(x.algorithm))throw new Error('Algorithm "'+x.algorithm+'"  not supported. supported values: '+M.join(", "));if(-1===$.indexOf(x.encoding)&&"passthrough"!==x.algorithm)throw new Error('Encoding "'+x.encoding+'"  not supported. supported values: '+$.join(", "));return x}function K(q){if("function"==typeof q)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(q))}function ie(q,U,x){function B(O){return U.update?U.update(O,"utf8"):U.write(O,"utf8")}return x=x||[],{dispatch:function(O){return this["_"+(null===(O=q.replacer?q.replacer(O):O)?"null":typeof O)](O)},_object:function(O){var ue,W=Object.prototype.toString.call(O),Ce=/\[object (.*)\]/i.exec(W);if(Ce=(Ce=Ce?Ce[1]:"unknown:["+W+"]").toLowerCase(),0<=(W=x.indexOf(O)))return this.dispatch("[CIRCULAR:"+W+"]");if(x.push(O),void 0!==C&&C.isBuffer&&C.isBuffer(O))return B("buffer:"),B(O);if("object"===Ce||"function"===Ce||"asyncfunction"===Ce)return W=Object.keys(O),q.unorderedObjects&&(W=W.sort()),!1===q.respectType||K(O)||W.splice(0,0,"prototype","__proto__","constructor"),q.excludeKeys&&(W=W.filter(function(le){return!q.excludeKeys(le)})),B("object:"+W.length+":"),ue=this,W.forEach(function(le){ue.dispatch(le),B(":"),q.excludeValues||ue.dispatch(O[le]),B(",")});if(!this["_"+Ce]){if(q.ignoreUnknown)return B("["+Ce+"]");throw new Error('Unknown object type "'+Ce+'"')}this["_"+Ce](O)},_array:function(O,le){le=void 0!==le?le:!1!==q.unorderedArrays;var W=this;if(B("array:"+O.length+":"),!le||O.length<=1)return O.forEach(function(ve){return W.dispatch(ve)});var Ce=[];return le=O.map(function(ve){var Oe=new ne,Me=x.slice();return ie(q,Oe,Me).dispatch(ve),Ce=Ce.concat(Me.slice(x.length)),Oe.read().toString()}),x=x.concat(Ce),le.sort(),this._array(le,!1)},_date:function(O){return B("date:"+O.toJSON())},_symbol:function(O){return B("symbol:"+O.toString())},_error:function(O){return B("error:"+O.toString())},_boolean:function(O){return B("bool:"+O.toString())},_string:function(O){B("string:"+O.length+":"),B(O.toString())},_function:function(O){B("fn:"),K(O)?this.dispatch("[native]"):this.dispatch(O.toString()),!1!==q.respectFunctionNames&&this.dispatch("function-name:"+String(O.name)),q.respectFunctionProperties&&this._object(O)},_number:function(O){return B("number:"+O.toString())},_xml:function(O){return B("xml:"+O.toString())},_null:function(){return B("Null")},_undefined:function(){return B("Undefined")},_regexp:function(O){return B("regex:"+O.toString())},_uint8array:function(O){return B("uint8array:"),this.dispatch(Array.prototype.slice.call(O))},_uint8clampedarray:function(O){return B("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(O))},_int8array:function(O){return B("int8array:"),this.dispatch(Array.prototype.slice.call(O))},_uint16array:function(O){return B("uint16array:"),this.dispatch(Array.prototype.slice.call(O))},_int16array:function(O){return B("int16array:"),this.dispatch(Array.prototype.slice.call(O))},_uint32array:function(O){return B("uint32array:"),this.dispatch(Array.prototype.slice.call(O))},_int32array:function(O){return B("int32array:"),this.dispatch(Array.prototype.slice.call(O))},_float32array:function(O){return B("float32array:"),this.dispatch(Array.prototype.slice.call(O))},_float64array:function(O){return B("float64array:"),this.dispatch(Array.prototype.slice.call(O))},_arraybuffer:function(O){return B("arraybuffer:"),this.dispatch(new Uint8Array(O))},_url:function(O){return B("url:"+O.toString())},_map:function(O){return B("map:"),O=Array.from(O),this._array(O,!1!==q.unorderedSets)},_set:function(O){return B("set:"),O=Array.from(O),this._array(O,!1!==q.unorderedSets)},_file:function(O){return B("file:"),this.dispatch([O.name,O.size,O.type,O.lastModfied])},_blob:function(){if(q.ignoreUnknown)return B("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return B("domwindow")},_bigint:function(O){return B("bigint:"+O.toString())},_process:function(){return B("process")},_timer:function(){return B("timer")},_pipe:function(){return B("pipe")},_tcp:function(){return B("tcp")},_udp:function(){return B("udp")},_tty:function(){return B("tty")},_statwatcher:function(){return B("statwatcher")},_securecontext:function(){return B("securecontext")},_connection:function(){return B("connection")},_zlib:function(){return B("zlib")},_context:function(){return B("context")},_nodescript:function(){return B("nodescript")},_httpparser:function(){return B("httpparser")},_dataview:function(){return B("dataview")},_signal:function(){return B("signal")},_fsevent:function(){return B("fsevent")},_tlswrap:function(){return B("tlswrap")}}}function ne(){return{buf:"",write:function(q){this.buf+=q},end:function(q){this.buf+=q},read:function(){return this.buf}}}S.writeToStream=function(q,U,x){return void 0===x&&(x=U,U={}),ie(U=ce(q,U),x).dispatch(q)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){!function(j){"use strict";var oe=typeof Uint8Array<"u"?Uint8Array:Array,M="+".charCodeAt(0),$="/".charCodeAt(0),ce="0".charCodeAt(0),K="a".charCodeAt(0),ie="A".charCodeAt(0),ne="-".charCodeAt(0),q="_".charCodeAt(0);function U(x){return(x=x.charCodeAt(0))===M||x===ne?62:x===$||x===q?63:x<ce?-1:x<ce+10?x-ce+26+26:x<ie+26?x-ie:x<K+26?x-K+26:void 0}j.toByteArray=function(x){var B,O;if(0<x.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ue="="===x.charAt((ue=x.length)-2)?2:"="===x.charAt(ue-1)?1:0,W=new oe(3*x.length/4-ue),Ce=0<ue?x.length-4:x.length,le=0;function ve(Oe){W[le++]=Oe}for(B=0;B<Ce;B+=4,0)ve((16711680&(O=U(x.charAt(B))<<18|U(x.charAt(B+1))<<12|U(x.charAt(B+2))<<6|U(x.charAt(B+3))))>>16),ve((65280&O)>>8),ve(255&O);return 2==ue?ve(255&(O=U(x.charAt(B))<<2|U(x.charAt(B+1))>>4)):1==ue&&(ve((O=U(x.charAt(B))<<10|U(x.charAt(B+1))<<4|U(x.charAt(B+2))>>2)>>8&255),ve(255&O)),W},j.fromByteArray=function(x){var B,O,ue,W,Ce=x.length%3,le="";function ve(Oe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Oe)}for(B=0,ue=x.length-Ce;B<ue;B+=3)le+=ve((W=O=(x[B]<<16)+(x[B+1]<<8)+x[B+2])>>18&63)+ve(W>>12&63)+ve(W>>6&63)+ve(63&W);switch(Ce){case 1:le=(le+=ve((O=x[x.length-1])>>2))+ve(O<<4&63)+"==";break;case 2:le=(le=(le+=ve((O=(x[x.length-2]<<8)+x[x.length-1])>>10))+ve(O>>4&63))+ve(O<<2&63)+"="}return le}}(void 0===S?this.base64js={}:S)}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(J,g,S){(function(b,k,M,N,_,y,I,L,P){var j=J("base64-js"),oe=J("ieee754");function M(_e,G,R){if(!(this instanceof M))return new M(_e,G,R);var se,V,Fe,et,fe=typeof _e;if("base64"===G&&"string"==fe)for(_e=(et=_e).trim?et.trim():et.replace(/^\s+|\s+$/g,"");_e.length%4!=0;)_e+="=";if("number"==fe)se=Je(_e);else if("string"==fe)se=M.byteLength(_e,G);else{if("object"!=fe)throw new Error("First argument needs to be a number, array or string.");se=Je(_e.length)}if(M._useTypedArrays?V=M._augment(new Uint8Array(se)):((V=this).length=se,V._isBuffer=!0),M._useTypedArrays&&"number"==typeof _e.byteLength)V._set(_e);else if(qe(et=_e)||M.isBuffer(et)||et&&"object"==typeof et&&"number"==typeof et.length)for(Fe=0;Fe<se;Fe++)V[Fe]=M.isBuffer(_e)?_e.readUInt8(Fe):_e[Fe];else if("string"==fe)V.write(_e,0,G);else if("number"==fe&&!M._useTypedArrays&&!R)for(Fe=0;Fe<se;Fe++)V[Fe]=0;return V}function ie(_e,G,R,Fe){var V;if(Fe||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+1<_e.length,"Trying to read beyond buffer length")),!((Fe=_e.length)<=G))return R?(V=_e[G],G+1<Fe&&(V|=_e[G+1]<<8)):(V=_e[G]<<8,G+1<Fe&&(V|=_e[G+1])),V}function ne(_e,G,R,Fe){var V;if(Fe||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+3<_e.length,"Trying to read beyond buffer length")),!((Fe=_e.length)<=G))return R?(G+2<Fe&&(V=_e[G+2]<<16),G+1<Fe&&(V|=_e[G+1]<<8),V|=_e[G],G+3<Fe&&(V+=_e[G+3]<<24>>>0)):(G+1<Fe&&(V=_e[G+1]<<16),G+2<Fe&&(V|=_e[G+2]<<8),G+3<Fe&&(V|=_e[G+3]),V+=_e[G]<<24>>>0),V}function q(_e,G,R,se){if(se||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+1<_e.length,"Trying to read beyond buffer length")),!(_e.length<=G))return 32768&(se=ie(_e,G,R,!0))?-1*(65535-se+1):se}function U(_e,G,R,se){if(se||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+3<_e.length,"Trying to read beyond buffer length")),!(_e.length<=G))return 2147483648&(se=ne(_e,G,R,!0))?-1*(4294967295-se+1):se}function x(_e,G,R,se){return se||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(G+3<_e.length,"Trying to read beyond buffer length")),oe.read(_e,G,R,23,4)}function B(_e,G,R,se){return se||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(G+7<_e.length,"Trying to read beyond buffer length")),oe.read(_e,G,R,52,8)}function O(_e,G,R,se,V){if(V||(Ye(null!=G,"missing value"),Ye("boolean"==typeof se,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+1<_e.length,"trying to write beyond buffer length"),Ee(G,65535)),!((V=_e.length)<=R))for(var Fe=0,et=Math.min(V-R,2);Fe<et;Fe++)_e[R+Fe]=(G&255<<8*(se?Fe:1-Fe))>>>8*(se?Fe:1-Fe)}function ue(_e,G,R,se,V){if(V||(Ye(null!=G,"missing value"),Ye("boolean"==typeof se,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<_e.length,"trying to write beyond buffer length"),Ee(G,4294967295)),!((V=_e.length)<=R))for(var Fe=0,et=Math.min(V-R,4);Fe<et;Fe++)_e[R+Fe]=G>>>8*(se?Fe:3-Fe)&255}function W(_e,G,R,se,V){V||(Ye(null!=G,"missing value"),Ye("boolean"==typeof se,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+1<_e.length,"Trying to write beyond buffer length"),Ke(G,32767,-32768)),_e.length<=R||O(_e,0<=G?G:65535+G+1,R,se,V)}function Ce(_e,G,R,se,V){V||(Ye(null!=G,"missing value"),Ye("boolean"==typeof se,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<_e.length,"Trying to write beyond buffer length"),Ke(G,2147483647,-2147483648)),_e.length<=R||ue(_e,0<=G?G:4294967295+G+1,R,se,V)}function le(_e,G,R,se,V){V||(Ye(null!=G,"missing value"),Ye("boolean"==typeof se,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<_e.length,"Trying to write beyond buffer length"),at(G,34028234663852886e22,-34028234663852886e22)),_e.length<=R||oe.write(_e,G,R,se,23,4)}function ve(_e,G,R,se,V){V||(Ye(null!=G,"missing value"),Ye("boolean"==typeof se,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+7<_e.length,"Trying to write beyond buffer length"),at(G,17976931348623157e292,-17976931348623157e292)),_e.length<=R||oe.write(_e,G,R,se,52,8)}S.Buffer=M,S.SlowBuffer=M,S.INSPECT_MAX_BYTES=50,M.poolSize=8192,M._useTypedArrays=function(){try{var _e=new ArrayBuffer(0),G=new Uint8Array(_e);return G.foo=function(){return 42},42===G.foo()&&"function"==typeof G.subarray}catch{return!1}}(),M.isEncoding=function(_e){switch(String(_e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.isBuffer=function(_e){return!(null==_e||!_e._isBuffer)},M.byteLength=function(_e,G){var R;switch(_e+="",G||"utf8"){case"hex":R=_e.length/2;break;case"utf8":case"utf-8":R=Ne(_e).length;break;case"ascii":case"binary":case"raw":R=_e.length;break;case"base64":R=ke(_e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":R=2*_e.length;break;default:throw new Error("Unknown encoding")}return R},M.concat=function(_e,G){if(Ye(qe(_e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===_e.length)return new M(0);if(1===_e.length)return _e[0];if("number"!=typeof G)for(V=G=0;V<_e.length;V++)G+=_e[V].length;for(var R=new M(G),se=0,V=0;V<_e.length;V++){var Fe=_e[V];Fe.copy(R,se),se+=Fe.length}return R},M.prototype.write=function(_e,G,R,se){isFinite(G)?isFinite(R)||(se=R,R=void 0):(Q=se,se=G,G=R,R=Q),G=Number(G)||0;var V,Fe,et,fe,Q=this.length-G;switch((!R||Q<(R=Number(R)))&&(R=Q),se=String(se||"utf8").toLowerCase()){case"hex":V=function(X,A,F,de){F=Number(F)||0;var pe=X.length-F;(!de||pe<(de=Number(de)))&&(de=pe),Ye((pe=A.length)%2==0,"Invalid hex string"),pe/2<de&&(de=pe/2);for(var ze=0;ze<de;ze++){var Ge=parseInt(A.substr(2*ze,2),16);Ye(!isNaN(Ge),"Invalid hex string"),X[F+ze]=Ge}return M._charsWritten=2*ze,ze}(this,_e,G,R);break;case"utf8":case"utf-8":Fe=this,et=G,fe=R,V=M._charsWritten=Ve(Ne(_e),Fe,et,fe);break;case"ascii":case"binary":V=function $(_e,G,R,se){return M._charsWritten=Ve(function(V){for(var Fe=[],et=0;et<V.length;et++)Fe.push(255&V.charCodeAt(et));return Fe}(G),_e,R,se)}(this,_e,G,R);break;case"base64":Fe=this,et=G,fe=R,V=M._charsWritten=Ve(ke(_e),Fe,et,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":V=function ce(_e,G,R,se){return M._charsWritten=Ve(function(V){for(var Fe,et,fe=[],Q=0;Q<V.length;Q++)Fe=(et=V.charCodeAt(Q))>>8,fe.push(et%=256),fe.push(Fe);return fe}(G),_e,R,se)}(this,_e,G,R);break;default:throw new Error("Unknown encoding")}return V},M.prototype.toString=function(_e,G,R){var se,V,Fe,et,fe=this;if(_e=String(_e||"utf8").toLowerCase(),G=Number(G)||0,(R=void 0!==R?Number(R):fe.length)===G)return"";switch(_e){case"hex":se=function(Q,X,A){var F=Q.length;(!X||X<0)&&(X=0),(!A||A<0||F<A)&&(A=F);for(var de="",pe=X;pe<A;pe++)de+=we(Q[pe]);return de}(fe,G,R);break;case"utf8":case"utf-8":se=function(Q,X,A){var F="",de="";A=Math.min(Q.length,A);for(var pe=X;pe<A;pe++)Q[pe]<=127?(F+=me(de)+String.fromCharCode(Q[pe]),de=""):de+="%"+Q[pe].toString(16);return F+me(de)}(fe,G,R);break;case"ascii":case"binary":se=function K(_e,G,R){var se="";R=Math.min(_e.length,R);for(var V=G;V<R;V++)se+=String.fromCharCode(_e[V]);return se}(fe,G,R);break;case"base64":V=fe,et=R,se=0===(Fe=G)&&et===V.length?j.fromByteArray(V):j.fromByteArray(V.slice(Fe,et));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":se=function(Q,X,A){for(var F=Q.slice(X,A),de="",pe=0;pe<F.length;pe+=2)de+=String.fromCharCode(F[pe]+256*F[pe+1]);return de}(fe,G,R);break;default:throw new Error("Unknown encoding")}return se},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},M.prototype.copy=function(_e,G,R,se){if(G=G||0,(se=se||0===se?se:this.length)!==(R=R||0)&&0!==_e.length&&0!==this.length){Ye(R<=se,"sourceEnd < sourceStart"),Ye(0<=G&&G<_e.length,"targetStart out of bounds"),Ye(0<=R&&R<this.length,"sourceStart out of bounds"),Ye(0<=se&&se<=this.length,"sourceEnd out of bounds"),se>this.length&&(se=this.length);var V=(se=_e.length-G<se-R?_e.length-G+R:se)-R;if(V<100||!M._useTypedArrays)for(var Fe=0;Fe<V;Fe++)_e[Fe+G]=this[Fe+R];else _e._set(this.subarray(R,R+V),G)}},M.prototype.slice=function(_e,G){var R=this.length;if(_e=Me(_e,R,0),G=Me(G,R,R),M._useTypedArrays)return M._augment(this.subarray(_e,G));for(var se=G-_e,V=new M(se,void 0,!0),Fe=0;Fe<se;Fe++)V[Fe]=this[Fe+_e];return V},M.prototype.get=function(_e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(_e)},M.prototype.set=function(_e,G){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(_e,G)},M.prototype.readUInt8=function(_e,G){if(G||(Ye(null!=_e,"missing offset"),Ye(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return this[_e]},M.prototype.readUInt16LE=function(_e,G){return ie(this,_e,!0,G)},M.prototype.readUInt16BE=function(_e,G){return ie(this,_e,!1,G)},M.prototype.readUInt32LE=function(_e,G){return ne(this,_e,!0,G)},M.prototype.readUInt32BE=function(_e,G){return ne(this,_e,!1,G)},M.prototype.readInt8=function(_e,G){if(G||(Ye(null!=_e,"missing offset"),Ye(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return 128&this[_e]?-1*(255-this[_e]+1):this[_e]},M.prototype.readInt16LE=function(_e,G){return q(this,_e,!0,G)},M.prototype.readInt16BE=function(_e,G){return q(this,_e,!1,G)},M.prototype.readInt32LE=function(_e,G){return U(this,_e,!0,G)},M.prototype.readInt32BE=function(_e,G){return U(this,_e,!1,G)},M.prototype.readFloatLE=function(_e,G){return x(this,_e,!0,G)},M.prototype.readFloatBE=function(_e,G){return x(this,_e,!1,G)},M.prototype.readDoubleLE=function(_e,G){return B(this,_e,!0,G)},M.prototype.readDoubleBE=function(_e,G){return B(this,_e,!1,G)},M.prototype.writeUInt8=function(_e,G,R){R||(Ye(null!=_e,"missing value"),Ye(null!=G,"missing offset"),Ye(G<this.length,"trying to write beyond buffer length"),Ee(_e,255)),G>=this.length||(this[G]=_e)},M.prototype.writeUInt16LE=function(_e,G,R){O(this,_e,G,!0,R)},M.prototype.writeUInt16BE=function(_e,G,R){O(this,_e,G,!1,R)},M.prototype.writeUInt32LE=function(_e,G,R){ue(this,_e,G,!0,R)},M.prototype.writeUInt32BE=function(_e,G,R){ue(this,_e,G,!1,R)},M.prototype.writeInt8=function(_e,G,R){R||(Ye(null!=_e,"missing value"),Ye(null!=G,"missing offset"),Ye(G<this.length,"Trying to write beyond buffer length"),Ke(_e,127,-128)),G>=this.length||this.writeUInt8(0<=_e?_e:255+_e+1,G,R)},M.prototype.writeInt16LE=function(_e,G,R){W(this,_e,G,!0,R)},M.prototype.writeInt16BE=function(_e,G,R){W(this,_e,G,!1,R)},M.prototype.writeInt32LE=function(_e,G,R){Ce(this,_e,G,!0,R)},M.prototype.writeInt32BE=function(_e,G,R){Ce(this,_e,G,!1,R)},M.prototype.writeFloatLE=function(_e,G,R){le(this,_e,G,!0,R)},M.prototype.writeFloatBE=function(_e,G,R){le(this,_e,G,!1,R)},M.prototype.writeDoubleLE=function(_e,G,R){ve(this,_e,G,!0,R)},M.prototype.writeDoubleBE=function(_e,G,R){ve(this,_e,G,!1,R)},M.prototype.fill=function(_e,G,R){if(G=G||0,R=R||this.length,Ye("number"==typeof(_e="string"==typeof(_e=_e||0)?_e.charCodeAt(0):_e)&&!isNaN(_e),"value is not a number"),Ye(G<=R,"end < start"),R!==G&&0!==this.length){Ye(0<=G&&G<this.length,"start out of bounds"),Ye(0<=R&&R<=this.length,"end out of bounds");for(var se=G;se<R;se++)this[se]=_e}},M.prototype.inspect=function(){for(var _e=[],G=this.length,R=0;R<G;R++)if(_e[R]=we(this[R]),R===S.INSPECT_MAX_BYTES){_e[R+1]="...";break}return"<Buffer "+_e.join(" ")+">"},M.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(M._useTypedArrays)return new M(this).buffer;for(var _e=new Uint8Array(this.length),G=0,R=_e.length;G<R;G+=1)_e[G]=this[G];return _e.buffer};var Oe=M.prototype;function Me(_e,G,R){return"number"!=typeof _e?R:G<=(_e=~~_e)?G:0<=_e||0<=(_e+=G)?_e:0}function Je(_e){return(_e=~~Math.ceil(+_e))<0?0:_e}function qe(_e){return(Array.isArray||function(G){return"[object Array]"===Object.prototype.toString.call(G)})(_e)}function we(_e){return _e<16?"0"+_e.toString(16):_e.toString(16)}function Ne(_e){for(var G=[],R=0;R<_e.length;R++){var se=_e.charCodeAt(R);if(se<=127)G.push(_e.charCodeAt(R));else for(var V=R,Fe=(55296<=se&&se<=57343&&R++,encodeURIComponent(_e.slice(V,R+1)).substr(1).split("%")),et=0;et<Fe.length;et++)G.push(parseInt(Fe[et],16))}return G}function ke(_e){return j.toByteArray(_e)}function Ve(_e,G,R,se){for(var V=0;V<se&&!(V+R>=G.length||V>=_e.length);V++)G[V+R]=_e[V];return V}function me(_e){try{return decodeURIComponent(_e)}catch{return String.fromCharCode(65533)}}function Ee(_e,G){Ye("number"==typeof _e,"cannot write a non-number as a number"),Ye(0<=_e,"specified a negative value for writing an unsigned value"),Ye(_e<=G,"value is larger than maximum value for type"),Ye(Math.floor(_e)===_e,"value has a fractional component")}function Ke(_e,G,R){Ye("number"==typeof _e,"cannot write a non-number as a number"),Ye(_e<=G,"value larger than maximum allowed value"),Ye(R<=_e,"value smaller than minimum allowed value"),Ye(Math.floor(_e)===_e,"value has a fractional component")}function at(_e,G,R){Ye("number"==typeof _e,"cannot write a non-number as a number"),Ye(_e<=G,"value larger than maximum allowed value"),Ye(R<=_e,"value smaller than minimum allowed value")}function Ye(_e,G){if(!_e)throw new Error(G||"Failed assertion")}M._augment=function(_e){return _e._isBuffer=!0,_e._get=_e.get,_e._set=_e.set,_e.get=Oe.get,_e.set=Oe.set,_e.write=Oe.write,_e.toString=Oe.toString,_e.toLocaleString=Oe.toString,_e.toJSON=Oe.toJSON,_e.copy=Oe.copy,_e.slice=Oe.slice,_e.readUInt8=Oe.readUInt8,_e.readUInt16LE=Oe.readUInt16LE,_e.readUInt16BE=Oe.readUInt16BE,_e.readUInt32LE=Oe.readUInt32LE,_e.readUInt32BE=Oe.readUInt32BE,_e.readInt8=Oe.readInt8,_e.readInt16LE=Oe.readInt16LE,_e.readInt16BE=Oe.readInt16BE,_e.readInt32LE=Oe.readInt32LE,_e.readInt32BE=Oe.readInt32BE,_e.readFloatLE=Oe.readFloatLE,_e.readFloatBE=Oe.readFloatBE,_e.readDoubleLE=Oe.readDoubleLE,_e.readDoubleBE=Oe.readDoubleBE,_e.writeUInt8=Oe.writeUInt8,_e.writeUInt16LE=Oe.writeUInt16LE,_e.writeUInt16BE=Oe.writeUInt16BE,_e.writeUInt32LE=Oe.writeUInt32LE,_e.writeUInt32BE=Oe.writeUInt32BE,_e.writeInt8=Oe.writeInt8,_e.writeInt16LE=Oe.writeInt16LE,_e.writeInt16BE=Oe.writeInt16BE,_e.writeInt32LE=Oe.writeInt32LE,_e.writeInt32BE=Oe.writeInt32BE,_e.writeFloatLE=Oe.writeFloatLE,_e.writeFloatBE=Oe.writeFloatBE,_e.writeDoubleLE=Oe.writeDoubleLE,_e.writeDoubleBE=Oe.writeDoubleBE,_e.fill=Oe.fill,_e.inspect=Oe.inspect,_e.toArrayBuffer=Oe.toArrayBuffer,_e}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(J,g,S){(function(b,k,j,N,_,y,I,L,P){j=J("buffer").Buffer;var M=new j(4);M.fill(0),g.exports={hash:function($,ce,K,ie){for(var ne=ce(function(O,ue){O.length%4!=0&&(O=j.concat([O,M],O.length+(4-O.length%4)));for(var Ce=[],le=ue?O.readInt32BE:O.readInt32LE,ve=0;ve<O.length;ve+=4)Ce.push(le.call(O,ve));return Ce}($=j.isBuffer($)?$:new j($),ie),8*$.length),q=(ce=ie,new j(K)),U=ce?q.writeInt32BE:q.writeInt32LE,x=0;x<ne.length;x++)U.call(q,ne[x],4*x,!0);return q}}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(J,g,S){(function(b,k,j,N,_,y,I,L,P){j=J("buffer").Buffer;var oe=J("./sha"),M=J("./sha256"),$=J("./rng"),ce={sha1:oe,sha256:M,md5:J("./md5")},K=64,ie=new j(K);function ne(O,ue){var W=ce[O=O||"sha1"],Ce=[];return W||q("algorithm:",O,"is not yet supported"),{update:function(le){return j.isBuffer(le)||(le=new j(le)),Ce.push(le),this},digest:function(le){var ve=j.concat(Ce);return ve=ue?function(Oe,Me,Je){j.isBuffer(Me)||(Me=new j(Me)),j.isBuffer(Je)||(Je=new j(Je)),Me.length>K?Me=Oe(Me):Me.length<K&&(Me=j.concat([Me,ie],K));for(var qe=new j(K),we=new j(K),Ne=0;Ne<K;Ne++)qe[Ne]=54^Me[Ne],we[Ne]=92^Me[Ne];return Je=Oe(j.concat([qe,Je])),Oe(j.concat([we,Je]))}(W,ue,ve):W(ve),Ce=null,le?ve.toString(le):ve}}}function q(){var O=[].slice.call(arguments).join(" ");throw new Error([O,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}ie.fill(0),S.createHash=function(O){return ne(O)},S.createHmac=ne,S.randomBytes=function(O,ue){if(!ue||!ue.call)return new j($(O));try{ue.call(this,void 0,new j($(O)))}catch(W){ue(W)}};var U,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],B=function(O){S[O]=function(){q("sorry,",O,"is not implemented yet")}};for(U in x)B(x[U])}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){var j=J("./helpers");function oe(q,U){q[U>>5]|=128<<U%32,q[14+(U+64>>>9<<4)]=U;for(var x=1732584193,B=-271733879,O=-1732584194,ue=271733878,W=0;W<q.length;W+=16){var Ce=x,le=B,ve=O,Oe=ue;x=$(x,B,O,ue,q[W+0],7,-680876936),ue=$(ue,x,B,O,q[W+1],12,-389564586),O=$(O,ue,x,B,q[W+2],17,606105819),B=$(B,O,ue,x,q[W+3],22,-1044525330),x=$(x,B,O,ue,q[W+4],7,-176418897),ue=$(ue,x,B,O,q[W+5],12,1200080426),O=$(O,ue,x,B,q[W+6],17,-1473231341),B=$(B,O,ue,x,q[W+7],22,-45705983),x=$(x,B,O,ue,q[W+8],7,1770035416),ue=$(ue,x,B,O,q[W+9],12,-1958414417),O=$(O,ue,x,B,q[W+10],17,-42063),B=$(B,O,ue,x,q[W+11],22,-1990404162),x=$(x,B,O,ue,q[W+12],7,1804603682),ue=$(ue,x,B,O,q[W+13],12,-40341101),O=$(O,ue,x,B,q[W+14],17,-1502002290),x=ce(x,B=$(B,O,ue,x,q[W+15],22,1236535329),O,ue,q[W+1],5,-165796510),ue=ce(ue,x,B,O,q[W+6],9,-1069501632),O=ce(O,ue,x,B,q[W+11],14,643717713),B=ce(B,O,ue,x,q[W+0],20,-373897302),x=ce(x,B,O,ue,q[W+5],5,-701558691),ue=ce(ue,x,B,O,q[W+10],9,38016083),O=ce(O,ue,x,B,q[W+15],14,-660478335),B=ce(B,O,ue,x,q[W+4],20,-405537848),x=ce(x,B,O,ue,q[W+9],5,568446438),ue=ce(ue,x,B,O,q[W+14],9,-1019803690),O=ce(O,ue,x,B,q[W+3],14,-187363961),B=ce(B,O,ue,x,q[W+8],20,1163531501),x=ce(x,B,O,ue,q[W+13],5,-1444681467),ue=ce(ue,x,B,O,q[W+2],9,-51403784),O=ce(O,ue,x,B,q[W+7],14,1735328473),x=K(x,B=ce(B,O,ue,x,q[W+12],20,-1926607734),O,ue,q[W+5],4,-378558),ue=K(ue,x,B,O,q[W+8],11,-2022574463),O=K(O,ue,x,B,q[W+11],16,1839030562),B=K(B,O,ue,x,q[W+14],23,-35309556),x=K(x,B,O,ue,q[W+1],4,-1530992060),ue=K(ue,x,B,O,q[W+4],11,1272893353),O=K(O,ue,x,B,q[W+7],16,-155497632),B=K(B,O,ue,x,q[W+10],23,-1094730640),x=K(x,B,O,ue,q[W+13],4,681279174),ue=K(ue,x,B,O,q[W+0],11,-358537222),O=K(O,ue,x,B,q[W+3],16,-722521979),B=K(B,O,ue,x,q[W+6],23,76029189),x=K(x,B,O,ue,q[W+9],4,-640364487),ue=K(ue,x,B,O,q[W+12],11,-421815835),O=K(O,ue,x,B,q[W+15],16,530742520),x=ie(x,B=K(B,O,ue,x,q[W+2],23,-995338651),O,ue,q[W+0],6,-198630844),ue=ie(ue,x,B,O,q[W+7],10,1126891415),O=ie(O,ue,x,B,q[W+14],15,-1416354905),B=ie(B,O,ue,x,q[W+5],21,-57434055),x=ie(x,B,O,ue,q[W+12],6,1700485571),ue=ie(ue,x,B,O,q[W+3],10,-1894986606),O=ie(O,ue,x,B,q[W+10],15,-1051523),B=ie(B,O,ue,x,q[W+1],21,-2054922799),x=ie(x,B,O,ue,q[W+8],6,1873313359),ue=ie(ue,x,B,O,q[W+15],10,-30611744),O=ie(O,ue,x,B,q[W+6],15,-1560198380),B=ie(B,O,ue,x,q[W+13],21,1309151649),x=ie(x,B,O,ue,q[W+4],6,-145523070),ue=ie(ue,x,B,O,q[W+11],10,-1120210379),O=ie(O,ue,x,B,q[W+2],15,718787259),B=ie(B,O,ue,x,q[W+9],21,-343485551),x=ne(x,Ce),B=ne(B,le),O=ne(O,ve),ue=ne(ue,Oe)}return Array(x,B,O,ue)}function M(q,U,x,B,O,ue){return ne((U=ne(ne(U,q),ne(B,ue)))<<O|U>>>32-O,x)}function $(q,U,x,B,O,ue,W){return M(U&x|~U&B,q,U,O,ue,W)}function ce(q,U,x,B,O,ue,W){return M(U&B|x&~B,q,U,O,ue,W)}function K(q,U,x,B,O,ue,W){return M(U^x^B,q,U,O,ue,W)}function ie(q,U,x,B,O,ue,W){return M(x^(U|~B),q,U,O,ue,W)}function ne(q,U){var x=(65535&q)+(65535&U);return(q>>16)+(U>>16)+(x>>16)<<16|65535&x}g.exports=function(q){return j.hash(q,oe,16)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){g.exports=function(oe){for(var M,$=new Array(oe),ce=0;ce<oe;ce++)!(3&ce)&&(M=4294967296*Math.random()),$[ce]=M>>>((3&ce)<<3)&255;return $}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){var j=J("./helpers");function oe(ce,K){ce[K>>5]|=128<<24-K%32,ce[15+(K+64>>9<<4)]=K;for(var ie,ne,q,U=Array(80),x=1732584193,B=-271733879,O=-1732584194,ue=271733878,W=-1009589776,Ce=0;Ce<ce.length;Ce+=16){for(var le=x,ve=B,Oe=O,Me=ue,Je=W,qe=0;qe<80;qe++){U[qe]=qe<16?ce[Ce+qe]:$(U[qe-3]^U[qe-8]^U[qe-14]^U[qe-16],1);var we=M(M($(x,5),(we=B,ne=O,q=ue,(ie=qe)<20?we&ne|~we&q:!(ie<40)&&ie<60?we&ne|we&q|ne&q:we^ne^q)),M(M(W,U[qe]),(ie=qe)<20?1518500249:ie<40?1859775393:ie<60?-1894007588:-899497514));W=ue,ue=O,O=$(B,30),B=x,x=we}x=M(x,le),B=M(B,ve),O=M(O,Oe),ue=M(ue,Me),W=M(W,Je)}return Array(x,B,O,ue,W)}function M(ce,K){var ie=(65535&ce)+(65535&K);return(ce>>16)+(K>>16)+(ie>>16)<<16|65535&ie}function $(ce,K){return ce<<K|ce>>>32-K}g.exports=function(ce){return j.hash(ce,oe,20,!0)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){function j(K,ie){var ne=(65535&K)+(65535&ie);return(K>>16)+(ie>>16)+(ne>>16)<<16|65535&ne}function oe(K,ie){var ne,q=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),U=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);K[ie>>5]|=128<<24-ie%32,K[15+(ie+64>>9<<4)]=ie;for(var B,O,ue=0;ue<K.length;ue+=16){for(var W=U[0],Ce=U[1],le=U[2],ve=U[3],Oe=U[4],Me=U[5],Je=U[6],qe=U[7],we=0;we<64;we++)x[we]=we<16?K[we+ue]:j(j(j($(O=x[we-2],17)^$(O,19)^ce(O,10),x[we-7]),$(O=x[we-15],7)^$(O,18)^ce(O,3)),x[we-16]),ne=j(j(j(j(qe,$(O=Oe,6)^$(O,11)^$(O,25)),Oe&Me^~Oe&Je),q[we]),x[we]),B=j($(B=W,2)^$(B,13)^$(B,22),W&Ce^W&le^Ce&le),qe=Je,Je=Me,Me=Oe,Oe=j(ve,ne),ve=le,le=Ce,Ce=W,W=j(ne,B);U[0]=j(W,U[0]),U[1]=j(Ce,U[1]),U[2]=j(le,U[2]),U[3]=j(ve,U[3]),U[4]=j(Oe,U[4]),U[5]=j(Me,U[5]),U[6]=j(Je,U[6]),U[7]=j(qe,U[7])}return U}var M=J("./helpers"),$=function(K,ie){return K>>>ie|K<<32-ie},ce=function(K,ie){return K>>>ie};g.exports=function(K){return M.hash(K,oe,32,!0)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){S.read=function(j,oe,M,$,ue){var K,ie,ne=8*ue-$-1,q=(1<<ne)-1,U=q>>1,x=-7,B=M?ue-1:0,O=M?-1:1;for(ue=j[oe+B],B+=O,K=ue&(1<<-x)-1,ue>>=-x,x+=ne;0<x;K=256*K+j[oe+B],B+=O,x-=8);for(ie=K&(1<<-x)-1,K>>=-x,x+=$;0<x;ie=256*ie+j[oe+B],B+=O,x-=8);if(0===K)K=1-U;else{if(K===q)return ie?NaN:1/0*(ue?-1:1);ie+=Math.pow(2,$),K-=U}return(ue?-1:1)*ie*Math.pow(2,K-$)},S.write=function(j,oe,M,$,ce,W){var ie,ne,q=8*W-ce-1,U=(1<<q)-1,x=U>>1,B=23===ce?Math.pow(2,-24)-Math.pow(2,-77):0,O=$?0:W-1,ue=$?1:-1;for(W=oe<0||0===oe&&1/oe<0?1:0,oe=Math.abs(oe),isNaN(oe)||oe===1/0?(ne=isNaN(oe)?1:0,ie=U):(ie=Math.floor(Math.log(oe)/Math.LN2),oe*($=Math.pow(2,-ie))<1&&(ie--,$*=2),2<=(oe+=1<=ie+x?B/$:B*Math.pow(2,1-x))*$&&(ie++,$/=2),U<=ie+x?(ne=0,ie=U):1<=ie+x?(ne=(oe*$-1)*Math.pow(2,ce),ie+=x):(ne=oe*Math.pow(2,x-1)*Math.pow(2,ce),ie=0));8<=ce;j[M+O]=255&ne,O+=ue,ne/=256,ce-=8);for(ie=ie<<ce|ne,q+=ce;0<q;j[M+O]=255&ie,O+=ue,ie/=256,q-=8);j[M+O-ue]|=128*W}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(J,g,S){(function(b,k,C,N,_,y,I,L,P){var j,oe,M;function $(){}(b=g.exports={}).nextTick=(oe=typeof window<"u"&&window.setImmediate,M=typeof window<"u"&&window.postMessage&&window.addEventListener,oe?function(ce){return window.setImmediate(ce)}:M?(j=[],window.addEventListener("message",function(ce){var K=ce.source;K!==window&&null!==K||"process-tick"!==ce.data||(ce.stopPropagation(),0<j.length&&j.shift()())},!0),function(ce){j.push(ce),window.postMessage("process-tick","*")}):function(ce){setTimeout(ce,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=$,b.addListener=$,b.once=$,b.off=$,b.removeListener=$,b.removeAllListeners=$,b.emit=$,b.binding=function(ce){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(ce){throw new Error("process.chdir is not supported")}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:te=>{var g,S,J=te.exports={};function b(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}function C($){if(g===setTimeout)return setTimeout($,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout($,0);try{return g($,0)}catch{try{return g.call(null,$,0)}catch{return g.call(this,$,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch{g=b}try{S="function"==typeof clearTimeout?clearTimeout:k}catch{S=k}}();var I,_=[],y=!1,L=-1;function P(){!y||!I||(y=!1,I.length?_=I.concat(_):L=-1,_.length&&j())}function j(){if(!y){var $=C(P);y=!0;for(var ce=_.length;ce;){for(I=_,_=[];++L<ce;)I&&I[L].run();L=-1,ce=_.length}I=null,y=!1,function N($){if(S===clearTimeout)return clearTimeout($);if((S===k||!S)&&clearTimeout)return S=clearTimeout,clearTimeout($);try{return S($)}catch{try{return S.call(null,$)}catch{return S.call(this,$)}}}($)}}function oe($,ce){this.fun=$,this.array=ce}function M(){}J.nextTick=function($){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var K=1;K<arguments.length;K++)ce[K-1]=arguments[K];_.push(new oe($,ce)),1===_.length&&!y&&C(j)},oe.prototype.run=function(){this.fun.apply(null,this.array)},J.title="browser",J.browser=!0,J.env={},J.argv=[],J.version="",J.versions={},J.on=M,J.addListener=M,J.once=M,J.off=M,J.removeListener=M,J.removeAllListeners=M,J.emit=M,J.prependListener=M,J.prependOnceListener=M,J.listeners=function($){return[]},J.binding=function($){throw new Error("process.binding is not supported")},J.cwd=function(){return"/"},J.chdir=function($){throw new Error("process.chdir is not supported")},J.umask=function(){return 0}},3410:te=>{let J;te.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(J||(J=Promise.resolve())).then(g).catch(S=>setTimeout(()=>{throw S},0))},1986:(te,J,g)=>{te.exports=g(7842)},5327:te=>{"use strict";te.exports=class jX{constructor(g,S=new Map,b=0){this.prefix=g,this._existing=S,this.counter=b}clone(){const{prefix:g,_existing:S,counter:b}=this;return new jX(g,new Map(S),b)}getId(g){const S=g&&this._existing.get(g);if(S)return S;const b=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,b),b}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(te,J,g)=>{"use strict";var S=g(7156).default;g(8280);const b=self.crypto||self.msCrypto;te.exports=class{constructor(C){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===C)this.algorithm={name:"SHA-256"};else{if("sha1"!==C)throw new Error(`Unsupported algorithm "${C}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(C){this._content+=C}digest(){var C=this;return S(function*(){const N=(new TextEncoder).encode(C._content),_=new Uint8Array(yield b.subtle.digest(C.algorithm,N));let y="";for(let I=0;I<_.length;++I)y+=_[I].toString(16).padStart(2,"0");return y})()}}},8003:te=>{"use strict";const S="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",k="NamedNode",C="BlankNode",N="Literal",_="DefaultGraph",y={};function I(M,$){return M.subject.termType===$.subject.termType&&M.object.termType===$.object.termType&&M.subject.value===$.subject.value&&M.predicate.value===$.predicate.value&&M.object.value===$.object.value&&(M.object.termType!==N||M.object.datatype.termType===$.object.datatype.termType&&M.object.language===$.object.language&&M.object.datatype.value===$.object.datatype.value)}(()=>{const M="(?:<([^:]+:[^>]*)>)",ce="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",K=ce+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ne="(_:(?:["+ce+"0-9])(?:(?:["+K+".])*(?:["+K+"]))?)",O="[ \\t]+",ue="[ \\t]*",W="(?:"+M+"|"+ne+")"+O,Ce=M+O,le="(?:"+M+"|"+ne+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+M+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+ue,ve="(?:\\.|(?:(?:"+M+"|"+ne+")"+ue+"\\.))";y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp("^"+ue+W+Ce+le+ve+ue+"$")})(),te.exports=class BS{static parse($){const ce=[],K={},ie=$.split(y.eoln);let ne=0;for(const q of ie){if(ne++,y.empty.test(q))continue;const U=q.match(y.quad);if(null===U)throw new Error("N-Quads parse error on line "+ne+".");const x={subject:null,predicate:null,object:null,graph:null};if(x.subject=void 0!==U[1]?{termType:k,value:U[1]}:{termType:C,value:U[2]},x.predicate={termType:k,value:U[3]},void 0!==U[4]?x.object={termType:k,value:U[4]}:void 0!==U[5]?x.object={termType:C,value:U[5]}:(x.object={termType:N,value:void 0,datatype:{termType:k}},void 0!==U[7]?x.object.datatype.value=U[7]:void 0!==U[8]?(x.object.datatype.value=S,x.object.language=U[8]):x.object.datatype.value=b,x.object.value=U[6].replace(j,function($,ce,K,ie){if(ce)switch(ce){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(K)return String.fromCharCode(parseInt(K,16));if(ie)throw new Error("Unsupported U escape")})),x.graph=void 0!==U[9]?{termType:k,value:U[9]}:void 0!==U[10]?{termType:C,value:U[10]}:{termType:_,value:""},x.graph.value in K){let B=!0;const O=K[x.graph.value];for(const ue of O)if(I(ue,x)){B=!1;break}B&&(O.push(x),ce.push(x))}else K[x.graph.value]=[x],ce.push(x)}return ce}static serialize($){Array.isArray($)||($=BS.legacyDatasetToQuads($));const ce=[];for(const K of $)ce.push(BS.serializeQuad(K));return ce.sort().join("")}static serializeQuadComponents($,ce,K,ie){let ne="";return ne+=$.termType===k?`<${$.value}>`:`${$.value}`,ne+=` <${ce.value}> `,K.termType===k?ne+=`<${K.value}>`:K.termType===C?ne+=K.value:(ne+=`"${function P(M){return M.replace(L,function($){switch($){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(K.value)}"`,K.datatype.value===S?K.language&&(ne+=`@${K.language}`):K.datatype.value!==b&&(ne+=`^^<${K.datatype.value}>`)),ie.termType===k?ne+=` <${ie.value}>`:ie.termType===C&&(ne+=` ${ie.value}`),ne+=" .\n",ne}static serializeQuad($){return BS.serializeQuadComponents($.subject,$.predicate,$.object,$.graph)}static legacyDatasetToQuads($){const ce=[],K={"blank node":C,IRI:k,literal:N};for(const ie in $)$[ie].forEach(q=>{const U={};for(const x in q){const B=q[x],O={termType:K[B.type],value:B.value};O.termType===N&&(O.datatype={termType:k},"datatype"in B&&(O.datatype.value=B.datatype),"language"in B?("datatype"in B||(O.datatype.value=S),O.language=B.language):"datatype"in B||(O.datatype.value=b)),U[x]=O}U.graph="@default"===ie?{termType:_,value:""}:{termType:ie.startsWith("_:")?C:k,value:ie},ce.push(U)});return ce}};const L=/["\\\n\r]/g,j=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:te=>{"use strict";te.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let S=0;S<g.length;++S)this.dir.set(g[S],!0)}hasNext(){return!this.done}next(){const{current:g,dir:S}=this,b=g.slice();let k=null,C=0;const N=g.length;for(let _=0;_<N;++_){const y=g[_],I=S.get(y);(null===k||y>k)&&(I&&_>0&&y>g[_-1]||!I&&_<N-1&&y>g[_+1])&&(k=y,C=_)}if(null===k)this.done=!0;else{const _=S.get(k)?C-1:C+1;g[C]=g[_],g[_]=k;for(const y of g)y>k&&S.set(y,!S.get(y))}return b}}},7218:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(5327),k=g(7475),C=g(7790),N=g(8003);function _(y,I){return y.hash<I.hash?-1:y.hash>I.hash?1:0}te.exports=class{constructor({createMessageDigest:I=(()=>new k("sha256")),canonicalIdMap:L=new Map,maxDeepIterations:P=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",L),this.createMessageDigest=I,this.maxDeepIterations=P,this.quads=null,this.deepIterations=null}main(I){var L=this;return S(function*(){L.deepIterations=new Map,L.quads=I;for(const K of I)L._addBlankNodeQuadInfo({quad:K,component:K.subject}),L._addBlankNodeQuadInfo({quad:K,component:K.object}),L._addBlankNodeQuadInfo({quad:K,component:K.graph});const P=new Map,j=[...L.blankNodeInfo.keys()];let oe=0;for(const K of j)++oe%100==0&&(yield L._yield()),yield L._hashAndTrackBlankNode({id:K,hashToBlankNodes:P});const M=[...P.keys()].sort(),$=[];for(const K of M){const ie=P.get(K);ie.length>1?$.push(ie):L.canonicalIssuer.getId(ie[0])}for(const K of $){const ie=[];for(const ne of K){if(L.canonicalIssuer.hasId(ne))continue;const q=new b("_:b");q.getId(ne);const U=yield L.hashNDegreeQuads(ne,q);ie.push(U)}ie.sort(_);for(const ne of ie){const q=ne.issuer.getOldIds();for(const U of q)L.canonicalIssuer.getId(U)}}const ce=[];for(const K of L.quads){const ie=N.serializeQuadComponents(L._componentWithCanonicalId(K.subject),K.predicate,L._componentWithCanonicalId(K.object),L._componentWithCanonicalId(K.graph));ce.push(ie)}return ce.sort(),ce.join("")})()}hashFirstDegreeQuads(I){var L=this;return S(function*(){const P=[],j=L.blankNodeInfo.get(I),oe=j.quads;for(const $ of oe){const ce={subject:null,predicate:$.predicate,object:null,graph:null};ce.subject=L.modifyFirstDegreeComponent(I,$.subject,"subject"),ce.object=L.modifyFirstDegreeComponent(I,$.object,"object"),ce.graph=L.modifyFirstDegreeComponent(I,$.graph,"graph"),P.push(N.serializeQuad(ce))}P.sort();const M=L.createMessageDigest();for(const $ of P)M.update($);return j.hash=yield M.digest(),j.hash})()}hashRelatedBlankNode(I,L,P,j){var oe=this;return S(function*(){let M;M=oe.canonicalIssuer.hasId(I)?oe.canonicalIssuer.getId(I):P.hasId(I)?P.getId(I):oe.blankNodeInfo.get(I).hash;const $=oe.createMessageDigest();return $.update(j),"g"!==j&&$.update(oe.getRelatedPredicate(L)),$.update(M),$.digest()})()}hashNDegreeQuads(I,L){var P=this;return S(function*(){const j=P.deepIterations.get(I)||0;if(j>P.maxDeepIterations)throw new Error(`Maximum deep iterations (${P.maxDeepIterations}) exceeded.`);P.deepIterations.set(I,j+1);const oe=P.createMessageDigest(),M=yield P.createHashToRelated(I,L),$=[...M.keys()].sort();for(const ce of $){oe.update(ce);let ie,K="";const ne=new C(M.get(ce));let q=0;for(;ne.hasNext();){const U=ne.next();++q%3==0&&(yield P._yield());let x=L.clone(),B="";const O=[];let ue=!1;for(const W of U)if(P.canonicalIssuer.hasId(W)?B+=P.canonicalIssuer.getId(W):(x.hasId(W)||O.push(W),B+=x.getId(W)),0!==K.length&&B>K){ue=!0;break}if(!ue){for(const W of O){const Ce=yield P.hashNDegreeQuads(W,x);if(B+=x.getId(W),B+=`<${Ce.hash}>`,x=Ce.issuer,0!==K.length&&B>K){ue=!0;break}}ue||(0===K.length||B<K)&&(K=B,ie=x)}}oe.update(K),L=ie}return{hash:yield oe.digest(),issuer:L}})()}modifyFirstDegreeComponent(I,L){return"BlankNode"!==L.termType?L:{termType:"BlankNode",value:L.value===I?"_:a":"_:z"}}getRelatedPredicate(I){return`<${I.predicate.value}>`}createHashToRelated(I,L){var P=this;return S(function*(){const j=new Map,oe=P.blankNodeInfo.get(I).quads;let M=0;for(const $ of oe)++M%100==0&&(yield P._yield()),yield Promise.all([P._addRelatedBlankNodeHash({quad:$,component:$.subject,position:"s",id:I,issuer:L,hashToRelated:j}),P._addRelatedBlankNodeHash({quad:$,component:$.object,position:"o",id:I,issuer:L,hashToRelated:j}),P._addRelatedBlankNodeHash({quad:$,component:$.graph,position:"g",id:I,issuer:L,hashToRelated:j})]);return j})()}_hashAndTrackBlankNode({id:I,hashToBlankNodes:L}){var P=this;return S(function*(){const j=yield P.hashFirstDegreeQuads(I),oe=L.get(j);oe?oe.push(I):L.set(j,[I])})()}_addBlankNodeQuadInfo({quad:I,component:L}){if("BlankNode"!==L.termType)return;const P=L.value,j=this.blankNodeInfo.get(P);j?j.quads.add(I):this.blankNodeInfo.set(P,{quads:new Set([I]),hash:null})}_addRelatedBlankNodeHash({quad:I,component:L,position:P,id:j,issuer:oe,hashToRelated:M}){var $=this;return S(function*(){if("BlankNode"!==L.termType||L.value===j)return;const ce=L.value,K=yield $.hashRelatedBlankNode(ce,I,oe,P),ie=M.get(K);ie?ie.push(ce):M.set(K,[ce])})()}_componentWithCanonicalId(I){return"BlankNode"!==I.termType||I.value.startsWith(this.canonicalIssuer.prefix)?I:{termType:"BlankNode",value:this.canonicalIssuer.getId(I.value)}}_yield(){return S(function*(){return new Promise(I=>setImmediate(I))})()}}},9123:(te,J,g)=>{"use strict";const S=g(5327),b=g(7475),k=g(7790),C=g(8003);function N(_,y){return _.hash<y.hash?-1:_.hash>y.hash?1:0}te.exports=class{constructor({createMessageDigest:y=(()=>new b("sha256")),canonicalIdMap:I=new Map,maxDeepIterations:L=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new S("_:c14n",I),this.createMessageDigest=y,this.maxDeepIterations=L,this.quads=null,this.deepIterations=null}main(y){this.deepIterations=new Map,this.quads=y;for(const M of y)this._addBlankNodeQuadInfo({quad:M,component:M.subject}),this._addBlankNodeQuadInfo({quad:M,component:M.object}),this._addBlankNodeQuadInfo({quad:M,component:M.graph});const I=new Map,L=[...this.blankNodeInfo.keys()];for(const M of L)this._hashAndTrackBlankNode({id:M,hashToBlankNodes:I});const P=[...I.keys()].sort(),j=[];for(const M of P){const $=I.get(M);$.length>1?j.push($):this.canonicalIssuer.getId($[0])}for(const M of j){const $=[];for(const ce of M){if(this.canonicalIssuer.hasId(ce))continue;const K=new S("_:b");K.getId(ce);const ie=this.hashNDegreeQuads(ce,K);$.push(ie)}$.sort(N);for(const ce of $){const K=ce.issuer.getOldIds();for(const ie of K)this.canonicalIssuer.getId(ie)}}const oe=[];for(const M of this.quads){const $=C.serializeQuadComponents(this._componentWithCanonicalId({component:M.subject}),M.predicate,this._componentWithCanonicalId({component:M.object}),this._componentWithCanonicalId({component:M.graph}));oe.push($)}return oe.sort(),oe.join("")}hashFirstDegreeQuads(y){const I=[],L=this.blankNodeInfo.get(y),P=L.quads;for(const oe of P){const M={subject:null,predicate:oe.predicate,object:null,graph:null};M.subject=this.modifyFirstDegreeComponent(y,oe.subject,"subject"),M.object=this.modifyFirstDegreeComponent(y,oe.object,"object"),M.graph=this.modifyFirstDegreeComponent(y,oe.graph,"graph"),I.push(C.serializeQuad(M))}I.sort();const j=this.createMessageDigest();for(const oe of I)j.update(oe);return L.hash=j.digest(),L.hash}hashRelatedBlankNode(y,I,L,P){let j;j=this.canonicalIssuer.hasId(y)?this.canonicalIssuer.getId(y):L.hasId(y)?L.getId(y):this.blankNodeInfo.get(y).hash;const oe=this.createMessageDigest();return oe.update(P),"g"!==P&&oe.update(this.getRelatedPredicate(I)),oe.update(j),oe.digest()}hashNDegreeQuads(y,I){const L=this.deepIterations.get(y)||0;if(L>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(y,L+1);const P=this.createMessageDigest(),j=this.createHashToRelated(y,I),oe=[...j.keys()].sort();for(const M of oe){P.update(M);let ce,$="";const K=new k(j.get(M));for(;K.hasNext();){const ie=K.next();let ne=I.clone(),q="";const U=[];let x=!1;for(const B of ie)if(this.canonicalIssuer.hasId(B)?q+=this.canonicalIssuer.getId(B):(ne.hasId(B)||U.push(B),q+=ne.getId(B)),0!==$.length&&q>$){x=!0;break}if(!x){for(const B of U){const O=this.hashNDegreeQuads(B,ne);if(q+=ne.getId(B),q+=`<${O.hash}>`,ne=O.issuer,0!==$.length&&q>$){x=!0;break}}x||(0===$.length||q<$)&&($=q,ce=ne)}}P.update($),I=ce}return{hash:P.digest(),issuer:I}}modifyFirstDegreeComponent(y,I){return"BlankNode"!==I.termType?I:{termType:"BlankNode",value:I.value===y?"_:a":"_:z"}}getRelatedPredicate(y){return`<${y.predicate.value}>`}createHashToRelated(y,I){const L=new Map,P=this.blankNodeInfo.get(y).quads;for(const j of P)this._addRelatedBlankNodeHash({quad:j,component:j.subject,position:"s",id:y,issuer:I,hashToRelated:L}),this._addRelatedBlankNodeHash({quad:j,component:j.object,position:"o",id:y,issuer:I,hashToRelated:L}),this._addRelatedBlankNodeHash({quad:j,component:j.graph,position:"g",id:y,issuer:I,hashToRelated:L});return L}_hashAndTrackBlankNode({id:y,hashToBlankNodes:I}){const L=this.hashFirstDegreeQuads(y),P=I.get(L);P?P.push(y):I.set(L,[y])}_addBlankNodeQuadInfo({quad:y,component:I}){if("BlankNode"!==I.termType)return;const L=I.value,P=this.blankNodeInfo.get(L);P?P.quads.add(y):this.blankNodeInfo.set(L,{quads:new Set([y]),hash:null})}_addRelatedBlankNodeHash({quad:y,component:I,position:L,id:P,issuer:j,hashToRelated:oe}){if("BlankNode"!==I.termType||I.value===P)return;const M=I.value,$=this.hashRelatedBlankNode(M,y,j,L),ce=oe.get($);ce?ce.push(M):oe.set($,[M])}_componentWithCanonicalId({component:y}){return"BlankNode"!==y.termType||y.value.startsWith(this.canonicalIssuer.prefix)?y:{termType:"BlankNode",value:this.canonicalIssuer.getId(y.value)}}}},1326:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(7475),k=g(7218);te.exports=class extends k{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(N,_,y){return"BlankNode"!==_.termType?_:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===N?"_:a":"_:z"}}getRelatedPredicate(N){return N.predicate.value}createHashToRelated(N,_){var y=this;return S(function*(){const I=new Map,L=y.blankNodeInfo.get(N).quads;let P=0;for(const j of L){let oe,M;if("BlankNode"===j.subject.termType&&j.subject.value!==N)M=j.subject.value,oe="p";else{if("BlankNode"!==j.object.termType||j.object.value===N)continue;M=j.object.value,oe="r"}++P%100==0&&(yield y._yield());const $=yield y.hashRelatedBlankNode(M,j,_,oe),ce=I.get($);ce?ce.push(M):I.set($,[M])}return I})()}}},9869:(te,J,g)=>{"use strict";const S=g(7475),b=g(9123);te.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new S("sha1")}modifyFirstDegreeComponent(C,N,_){return"BlankNode"!==N.termType?N:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:N.value===C?"_:a":"_:z"}}getRelatedPredicate(C){return C.predicate.value}createHashToRelated(C,N){const _=new Map,y=this.blankNodeInfo.get(C).quads;for(const I of y){let L,P;if("BlankNode"===I.subject.termType&&I.subject.value!==C)P=I.subject.value,L="p";else{if("BlankNode"!==I.object.termType||I.object.value===C)continue;P=I.object.value,L="r"}const j=this.hashRelatedBlankNode(P,I,N,L),oe=_.get(j);oe?oe.push(P):_.set(j,[P])}return _}}},7842:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(7218),k=g(1326),C=g(9123),N=g(9869);let _;try{_=g(7670)}catch{}function y(I){return Array.isArray(I)?I:J.NQuads.legacyDatasetToQuads(I)}J.NQuads=g(8003),J.IdentifierIssuer=g(5327),J._rdfCanonizeNative=function(I){return I&&(_=I),_},J.canonize=function(){var I=S(function*(L,P){const j=y(L);if(P.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((oe,M)=>_.canonize(j,P,($,ce)=>$?M($):oe(ce)))}if("URDNA2015"===P.algorithm)return new b(P).main(j);if("URGNA2012"===P.algorithm){if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new k(P).main(j)}throw"algorithm"in P?new Error("Invalid RDF Dataset Canonicalization algorithm: "+P.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(L,P){return I.apply(this,arguments)}}(),J._canonizeSync=function(I,L){const P=y(I);if(L.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(L.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(P,L)}if("URDNA2015"===L.algorithm)return new C(L).main(P);if("URGNA2012"===L.algorithm){if(L.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new N(L).main(P)}throw"algorithm"in L?new Error("Invalid RDF Dataset Canonicalization algorithm: "+L.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(te,J,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(k,C,N,_){void 0===_&&(_=N),Object.defineProperty(k,_,{enumerable:!0,get:function(){return C[N]}})}:function(k,C,N,_){void 0===_&&(_=N),k[_]=C[N]}),b=this&&this.__exportStar||function(k,C){for(var N in k)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,k,N)};Object.defineProperty(J,"__esModule",{value:!0}),b(g(4740),J),b(g(3613),J),b(g(9379),J),b(g(5565),J),b(g(3283),J),b(g(3905),J),b(g(2234),J)},4740:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.BlankNode=void 0,J.BlankNode=class g{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.DataFactory=void 0;const S=g(4740),b=g(9379),k=g(5565),C=g(3283),N=g(3905),_=g(2234);let y=0;J.DataFactory=class I{constructor(P){this.blankNodeCounter=0,this.blankNodePrefix=(P=P||{}).blankNodePrefix||`df_${y++}_`}namedNode(P){return new C.NamedNode(P)}blankNode(P){return new S.BlankNode(P||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(P,j){return new k.Literal(P,j)}variable(P){return new _.Variable(P)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(P,j,oe,M){return new N.Quad(P,j,oe,M||this.defaultGraph())}fromTerm(P){switch(P.termType){case"NamedNode":return this.namedNode(P.value);case"BlankNode":return this.blankNode(P.value);case"Literal":return P.language?this.literal(P.value,P.language):P.datatype.equals(k.Literal.XSD_STRING)?this.literal(P.value):this.literal(P.value,this.fromTerm(P.datatype));case"Variable":return this.variable(P.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(P.subject),this.fromTerm(P.predicate),this.fromTerm(P.object),this.fromTerm(P.graph))}}fromQuad(P){return this.fromTerm(P)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}J.DefaultGraph=g,g.INSTANCE=new g},5565:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Literal=void 0;const S=g(3283);class b{constructor(C,N){this.termType="Literal",this.value=C,"string"==typeof N?(this.language=N,this.datatype=b.RDF_LANGUAGE_STRING):N?(this.language="",this.datatype=N):(this.language="",this.datatype=b.XSD_STRING)}equals(C){return!!C&&"Literal"===C.termType&&C.value===this.value&&C.language===this.language&&this.datatype.equals(C.datatype)}}J.Literal=b,b.RDF_LANGUAGE_STRING=new S.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new S.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.NamedNode=void 0,J.NamedNode=class g{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Quad=void 0,J.Quad=class g{constructor(b,k,C,N){this.termType="Quad",this.value="",this.subject=b,this.predicate=k,this.object=C,this.graph=N}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Variable=void 0,J.Variable=class g{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(te,J,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(M,$,ce,K){void 0===K&&(K=ce),Object.defineProperty(M,K,{enumerable:!0,get:function(){return $[ce]}})}:function(M,$,ce,K){void 0===K&&(K=ce),M[K]=$[ce]}),b=this&&this.__exportStar||function(M,$){for(var ce in M)"default"!==ce&&!Object.prototype.hasOwnProperty.call($,ce)&&S($,M,ce)};Object.defineProperty(J,"__esModule",{value:!0}),J.getSupportedJavaScriptPrimitives=J.getSupportedRdfDatatypes=J.getTermRaw=J.toRdf=J.fromRdf=void 0;const k=g(2633),C=g(2538),N=g(6374);b(g(2538),J),b(g(1815),J),b(g(6374),J);const _=new k.DataFactory,y=new N.Translator;function I(M,$){return y.fromRdf(M,$)}y.registerHandler(new C.TypeHandlerString,C.TypeHandlerString.TYPES.map(M=>_.namedNode(M)),["string"]),y.registerHandler(new C.TypeHandlerBoolean,[C.TypeHandlerBoolean.TYPE].map(M=>_.namedNode(M)),["boolean"]),y.registerHandler(new C.TypeHandlerNumberDouble,C.TypeHandlerNumberDouble.TYPES.map(M=>_.namedNode(M)),["number"]),y.registerHandler(new C.TypeHandlerNumberInteger,C.TypeHandlerNumberInteger.TYPES.map(M=>_.namedNode(M)),["number"]),y.registerHandler(new C.TypeHandlerDate,C.TypeHandlerDate.TYPES.map(M=>_.namedNode(M)),["object"]),J.fromRdf=I,J.toRdf=function L(M,$){return $&&"namedNode"in $&&($={dataFactory:$}),($=$||{})&&!$.dataFactory&&($.dataFactory=_),y.toRdf(M,$)},J.getTermRaw=function P(M,$){return"Literal"===M.termType?I(M,$):M.value},J.getSupportedRdfDatatypes=function j(){return y.getSupportedRdfDatatypes()},J.getSupportedJavaScriptPrimitives=function oe(){return y.getSupportedJavaScriptPrimitives()}},1815:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},6374:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Translator=void 0,J.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,k,C){for(const N of k)this.supportedRdfDatatypes.push(N),this.fromRdfHandlers[N.value]=b;for(const N of C){let _=this.toRdfHandlers[N];_||(this.toRdfHandlers[N]=_=[]),_.push(b)}}fromRdf(b,k){const C=this.fromRdfHandlers[b.datatype.value];return C?C.fromRdf(b,k):b.value}toRdf(b,k){const C=this.toRdfHandlers[typeof b];if(C)for(const N of C){const _=N.toRdf(b,k);if(_)return _}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerBoolean=void 0;const S=g(6374);class b{fromRdf(C,N){switch(C.value){case"true":case"1":return!0;case"false":case"0":return!1}return N&&S.Translator.incorrectRdfDataType(C),!1}toRdf(C,{datatype:N,dataFactory:_}){return _.literal(C?"true":"false",N||_.namedNode(b.TYPE))}}J.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerDate=void 0;const S=g(6374);class b{fromRdf(C,N){switch(N&&!C.value.match(b.VALIDATORS[C.datatype.value.substr(33,C.datatype.value.length)])&&S.Translator.incorrectRdfDataType(C),C.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(C.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=C.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(C.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(C.value+"-01");default:return new Date(C.value)}}toRdf(C,{datatype:N,dataFactory:_}){if(N=N||_.namedNode(b.TYPES[0]),!(C instanceof Date))return null;const y=C;let I;switch(N.value){case"http://www.w3.org/2001/XMLSchema#gDay":I=String(y.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":I=y.getUTCMonth()+1+"-"+y.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":I=String(y.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":I=y.getUTCFullYear()+"-"+(y.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":I=y.toISOString().replace(/T.*$/,"");break;default:I=y.toISOString()}return _.literal(I,N)}}J.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerNumberDouble=void 0;const S=g(6374);class b{fromRdf(C,N){const _=parseFloat(C.value);return N&&isNaN(_)&&S.Translator.incorrectRdfDataType(C),_}toRdf(C,{datatype:N,dataFactory:_}){return N=N||_.namedNode(b.TYPES[0]),isNaN(C)?_.literal("NaN",N):isFinite(C)?C%1==0?null:_.literal(C.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),N):_.literal(C>0?"INF":"-INF",N)}}J.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerNumberInteger=void 0;const S=g(6374);class b{fromRdf(C,N){const _=parseInt(C.value,10);return N&&(isNaN(_)||C.value.indexOf(".")>=0)&&S.Translator.incorrectRdfDataType(C),_}toRdf(C,{datatype:N,dataFactory:_}){return _.literal(String(C),N||_.namedNode(C<=b.MAX_INT&&C>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}J.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerString=void 0;class g{fromRdf(b){return b.value}toRdf(b,{datatype:k,dataFactory:C}){return C.literal(b,k)}}J.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(te,J,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(k,C,N,_){void 0===_&&(_=N),Object.defineProperty(k,_,{enumerable:!0,get:function(){return C[N]}})}:function(k,C,N,_){void 0===_&&(_=N),k[_]=C[N]}),b=this&&this.__exportStar||function(k,C){for(var N in k)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,k,N)};Object.defineProperty(J,"__esModule",{value:!0}),b(g(88),J),b(g(1600),J),b(g(1511),J),b(g(9199),J),b(g(2210),J)},2821:function(te,J,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(k,C,N,_){void 0===_&&(_=N),Object.defineProperty(k,_,{enumerable:!0,get:function(){return C[N]}})}:function(k,C,N,_){void 0===_&&(_=N),k[_]=C[N]}),b=this&&this.__exportStar||function(k,C){for(var N in k)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,k,N)};Object.defineProperty(J,"__esModule",{value:!0}),b(g(5664),J)},758:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.ParseError=void 0;class g extends Error{constructor(b,k){const C=b.saxStream._parser;super(b.trackPosition?`Line ${C.line+1} column ${C.column+1}: ${k}`:k)}}J.ParseError=g},5664:(te,J,g)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.ParseType=J.RdfXmlParser=void 0;const S=g(7054),b=g(9528),k=g(1793),C=g(758),N=g(2633);class _ extends k.Transform{constructor(L){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},L&&(Object.assign(this,L),this.options=L),this.dataFactory||(this.dataFactory=new N.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(L,P){const j={};let oe=!1;for(const $ in L.attributes)$.startsWith("xmlns")&&(5===$.length?(oe=!0,j[""]=L.attributes[$]):":"===$.charAt(5)&&(oe=!0,j[$.substr(6)]=L.attributes[$]));const M=P&&P.ns?P.ns:[_.DEFAULT_NS];return oe?M.concat([j]):M}static expandPrefixedTerm(L,P,j){const oe=L.indexOf(":");let M,$;oe>=0?(M=L.substr(0,oe),$=L.substr(oe+1)):(M="",$=L);let ce=null,K=null;for(let ie=P.length-1;ie>=0;ie--){const ne=P[ie][M];if(ne){ce=ne;break}K||(K=P[ie][""])}if(!ce){if(M&&"xmlns"!==M)throw new C.ParseError(j,`The prefix '${M}' in term '${L}' was not bound.`);ce=K||""}return{prefix:M,local:$,uri:ce}}static isValidIri(L){return _.IRI_REGEX.test(L)}import(L){const P=new k.PassThrough({readableObjectMode:!0});L.on("error",oe=>j.emit("error",oe)),L.on("data",oe=>P.push(oe)),L.on("end",()=>P.push(null));const j=P.pipe(new _(this.options));return j}_transform(L,P,j){try{this.saxStream.write(L,P)}catch(oe){return j(oe)}j()}newParseError(L){return new C.ParseError(this,L)}valueToUri(L,P){return this.uriToNamedNode(S.resolve(L,P.baseIRI))}uriToNamedNode(L){if(!_.isValidIri(L))throw this.newParseError(`Invalid URI: ${L}`);return this.dataFactory.namedNode(L)}validateNcname(L){if(!_.NCNAME_MATCHER.test(L))throw this.newParseError(`Not a valid NCName: ${L}`)}attachSaxListeners(){this.saxStream.on("error",L=>this.emit("error",L)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(L){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let j=y.RESOURCE;if(P&&(P.hadChildren=!0,j=P.childrenParseType),P&&P.childrenStringTags){const M=L.name;let $="";for(const ne in L.attributes)$+=` ${ne}="${L.attributes[ne]}"`;P.childrenStringTags.push(`<${M}${$}>`);const ie={childrenStringTags:P.childrenStringTags};return ie.childrenStringEmitClosingTag=`</${M}>`,void this.activeTagStack.push(ie)}const oe={};P?(oe.language=P.language,oe.baseIRI=P.baseIRI):oe.baseIRI=this.baseIRI,this.activeTagStack.push(oe),oe.ns=_.parseNamespace(L,P),j===y.RESOURCE?this.onTagResource(L,oe,P,!P):this.onTagProperty(L,oe,P)}onTagResource(L,P,j,oe){const M=_.expandPrefixedTerm(L.name,P.ns,this);P.childrenParseType=y.PROPERTY;let $=!0;if(M.uri===_.RDF){if(!oe&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(M.local)>=0)throw this.newParseError(`Illegal node element name: ${M.local}`);switch(M.local){case"RDF":P.childrenParseType=y.RESOURCE;case"Description":$=!1}}const ce=[],K=[];let ie=null,ne=!1,q=!1,U=null;for(const x in L.attributes){const B=L.attributes[x],O=_.expandPrefixedTerm(x,P.ns,this);if(j&&O.uri===_.RDF)switch(O.local){case"about":if(ie)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${ie} where found.`);ie=B;continue;case"ID":if(ie)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${ie} where found.`);this.validateNcname(B),ie="#"+B,ne=!0;continue;case"nodeID":if(ie)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${ie} where found.`);this.validateNcname(B),ie=B,q=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":U=B;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(O.uri===_.XML){if("lang"===O.local){P.language=""===B?null:B.toLowerCase();continue}if("base"===O.local){P.baseIRI=S.resolve(B,P.baseIRI);continue}}"xml"!==O.prefix&&O.uri&&(ce.push(this.uriToNamedNode(O.uri+O.local)),K.push(B))}if(null!==ie&&(P.subject=q?this.dataFactory.blankNode(ie):this.valueToUri(ie,P),ne&&this.claimNodeId(P.subject)),P.subject||(P.subject=this.dataFactory.blankNode()),$){const x=this.uriToNamedNode(M.uri+M.local);this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),x,j?j.reifiedStatementId:null)}if(j){if(j.predicate)if(j.childrenCollectionSubject){const x=this.dataFactory.blankNode();this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,x,j.reifiedStatementId),this.emitTriple(x,this.dataFactory.namedNode(_.RDF+"first"),P.subject,P.reifiedStatementId),j.childrenCollectionSubject=x,j.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(j.subject,j.predicate,P.subject,j.reifiedStatementId);for(let x=0;x<j.predicateSubPredicates.length;x++)this.emitTriple(P.subject,j.predicateSubPredicates[x],j.predicateSubObjects[x],null);j.predicateSubPredicates=[],j.predicateSubObjects=[],j.predicateEmitted=!0}for(let x=0;x<ce.length;x++){const B=this.dataFactory.literal(K[x],P.datatype||P.language);this.emitTriple(P.subject,ce[x],B,j.reifiedStatementId)}U&&this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(U),null)}}onTagProperty(L,P,j){const oe=_.expandPrefixedTerm(L.name,P.ns,this);if(P.childrenParseType=y.RESOURCE,P.subject=j.subject,oe.uri===_.RDF&&"li"===oe.local?(j.listItemCounter||(j.listItemCounter=1),P.predicate=this.uriToNamedNode(oe.uri+"_"+j.listItemCounter++)):P.predicate=this.uriToNamedNode(oe.uri+oe.local),oe.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(oe.local)>=0)throw this.newParseError(`Illegal property element name: ${oe.local}`);P.predicateSubPredicates=[],P.predicateSubObjects=[];let M=!1,$=!1,ce=null,K=!0;const ie=[],ne=[];for(const q in L.attributes){const U=L.attributes[q],x=_.expandPrefixedTerm(q,P.ns,this);if(x.uri===_.RDF)switch(x.local){case"resource":if(ce)throw this.newParseError(`Found both rdf:resource (${U}) and rdf:nodeID (${ce}).`);if(M)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${U})`);P.hadChildren=!0,ce=U,K=!1;continue;case"datatype":if($)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${U}).`);if(M)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${U})`);P.datatype=this.valueToUri(U,P);continue;case"nodeID":if($)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${U}).`);if(P.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${U}).`);if(M)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${U})`);this.validateNcname(U),P.hadChildren=!0,ce=U,K=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if($)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(P.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${P.datatype.value})`);if(ce)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ce})`);if("Resource"===U){M=!0,P.childrenParseType=y.PROPERTY;const B=this.dataFactory.blankNode();this.emitTriple(P.subject,P.predicate,B,P.reifiedStatementId),P.subject=B,P.predicate=null}else"Collection"===U?(M=!0,P.hadChildren=!0,P.childrenCollectionSubject=P.subject,P.childrenCollectionPredicate=P.predicate,K=!1):"Literal"===U&&(M=!0,P.childrenTagsToString=!0,P.childrenStringTags=[]);continue;case"ID":this.validateNcname(U),P.reifiedStatementId=this.valueToUri("#"+U,P),this.claimNodeId(P.reifiedStatementId);continue}else if(x.uri===_.XML&&"lang"===x.local){P.language=""===U?null:U.toLowerCase();continue}if("xml"!==x.prefix&&"xmlns"!==x.prefix&&x.uri){if(M||P.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${U}`);P.hadChildren=!0,$=!0,ie.push(this.uriToNamedNode(x.uri+x.local)),ne.push(this.dataFactory.literal(U,P.datatype||P.language))}}if(null!==ce){const q=P.subject;P.subject=K?this.dataFactory.blankNode(ce):this.valueToUri(ce,P),this.emitTriple(q,P.predicate,P.subject,P.reifiedStatementId);for(let U=0;U<ie.length;U++)this.emitTriple(P.subject,ie[U],ne[U],null);P.predicateEmitted=!0}else K&&(P.predicateSubPredicates=ie,P.predicateSubObjects=ne,P.predicateEmitted=!1)}emitTriple(L,P,j,oe){this.push(this.dataFactory.quad(L,P,j,this.defaultGraph)),oe&&(this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"subject"),L,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"predicate"),P,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"object"),j,this.defaultGraph)))}claimNodeId(L){if(!this.allowDuplicateRdfIds){if(this.nodeIds[L.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${L.value}'.`);this.nodeIds[L.value]=!0}}onText(L){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;P&&(P.childrenStringTags?P.childrenStringTags.push(L):P.predicate&&(P.text=L))}onCloseTag(){const L=this.activeTagStack.pop();if(L.childrenStringEmitClosingTag&&L.childrenStringTags.push(L.childrenStringEmitClosingTag),L.childrenTagsToString&&(L.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),L.text=L.childrenStringTags.join(""),L.hadChildren=!1),L.childrenCollectionSubject)this.emitTriple(L.childrenCollectionSubject,L.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),L.reifiedStatementId);else if(L.predicate)if(L.hadChildren||L.childrenParseType===y.PROPERTY){if(!L.predicateEmitted){const P=this.dataFactory.blankNode();this.emitTriple(L.subject,L.predicate,P,L.reifiedStatementId);for(let j=0;j<L.predicateSubPredicates.length;j++)this.emitTriple(P,L.predicateSubPredicates[j],L.predicateSubObjects[j],null)}}else this.emitTriple(L.subject,L.predicate,this.dataFactory.literal(L.text||"",L.datatype||L.language),L.reifiedStatementId)}onDoctype(L){L.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(P,j,oe)=>(this.saxStream._parser.ENTITIES[j]=oe,""))}}var y,I;J.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(I=y=J.ParseType||(J.ParseType={}))[I.RESOURCE=0]="RESOURCE",I[I.PROPERTY=1]="PROPERTY"},9987:(te,J,g)=>{"use strict";const{AbortError:S,codes:b}=g(4370),{isNodeStream:k,isWebStream:C,kControllerErrorFunction:N}=g(5428),_=g(4618),{ERR_INVALID_ARG_TYPE:y}=b;te.exports.addAbortSignal=function(P,j){if(((L,P)=>{if("object"!=typeof L||!("aborted"in L))throw new y("signal","AbortSignal",L)})(P),!k(j)&&!C(j))throw new y("stream",["ReadableStream","WritableStream","Stream"],j);return te.exports.addAbortSignalNoValidate(P,j)},te.exports.addAbortSignalNoValidate=function(L,P){if("object"!=typeof L||!("aborted"in L))return P;const j=k(P)?()=>{P.destroy(new S(void 0,{cause:L.reason}))}:()=>{P[N](new S(void 0,{cause:L.reason}))};return L.aborted?j():(L.addEventListener("abort",j),_(P,()=>L.removeEventListener("abort",j))),P}},2960:(te,J,g)=>{"use strict";const{StringPrototypeSlice:S,SymbolIterator:b,TypedArrayPrototypeSet:k,Uint8Array:C}=g(6305),{Buffer:N}=g(1657),{inspect:_}=g(2656);te.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(I){const L={data:I,next:null};this.length>0?this.tail.next=L:this.head=L,this.tail=L,++this.length}unshift(I){const L={data:I,next:this.head};0===this.length&&(this.tail=L),this.head=L,++this.length}shift(){if(0===this.length)return;const I=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,I}clear(){this.head=this.tail=null,this.length=0}join(I){if(0===this.length)return"";let L=this.head,P=""+L.data;for(;null!==(L=L.next);)P+=I+L.data;return P}concat(I){if(0===this.length)return N.alloc(0);const L=N.allocUnsafe(I>>>0);let P=this.head,j=0;for(;P;)k(L,P.data,j),j+=P.data.length,P=P.next;return L}consume(I,L){const P=this.head.data;if(I<P.length){const j=P.slice(0,I);return this.head.data=P.slice(I),j}return I===P.length?this.shift():L?this._getString(I):this._getBuffer(I)}first(){return this.head.data}*[b](){for(let I=this.head;I;I=I.next)yield I.data}_getString(I){let L="",P=this.head,j=0;do{const oe=P.data;if(!(I>oe.length)){I===oe.length?(L+=oe,++j,this.head=P.next?P.next:this.tail=null):(L+=S(oe,0,I),this.head=P,P.data=S(oe,I));break}L+=oe,I-=oe.length,++j}while(null!==(P=P.next));return this.length-=j,L}_getBuffer(I){const L=N.allocUnsafe(I),P=I;let j=this.head,oe=0;do{const M=j.data;if(!(I>M.length)){I===M.length?(k(L,M,P-I),++oe,this.head=j.next?j.next:this.tail=null):(k(L,new C(M.buffer,M.byteOffset,I),P-I),this.head=j,j.data=M.slice(I));break}k(L,M,P-I),I-=M.length,++oe}while(null!==(j=j.next));return this.length-=oe,L}[Symbol.for("nodejs.util.inspect.custom")](I,L){return _(this,{...L,depth:0,customInspect:!1})}}},7721:(te,J,g)=>{"use strict";var S=g(7156).default;const{pipeline:b}=g(4514),k=g(5931),{destroyer:C}=g(5601),{isNodeStream:N,isReadable:_,isWritable:y,isWebStream:I,isTransformStream:L,isWritableStream:P,isReadableStream:j}=g(5428),{AbortError:oe,codes:{ERR_INVALID_ARG_VALUE:M,ERR_MISSING_ARGS:$}}=g(4370),ce=g(4618);te.exports=function(...ie){if(0===ie.length)throw new $("streams");if(1===ie.length)return k.from(ie[0]);const ne=[...ie];if("function"==typeof ie[0]&&(ie[0]=k.from(ie[0])),"function"==typeof ie[ie.length-1]){const Oe=ie.length-1;ie[Oe]=k.from(ie[Oe])}for(let Oe=0;Oe<ie.length;++Oe)if(N(ie[Oe])||I(ie[Oe])){if(Oe<ie.length-1&&!(_(ie[Oe])||j(ie[Oe])||L(ie[Oe])))throw new M(`streams[${Oe}]`,ne[Oe],"must be readable");if(Oe>0&&!(y(ie[Oe])||P(ie[Oe])||L(ie[Oe])))throw new M(`streams[${Oe}]`,ne[Oe],"must be writable")}let q,U,x,B,O;const W=ie[0],Ce=b(ie,function ue(Oe){const Me=B;B=null,Me?Me(Oe):Oe?O.destroy(Oe):!ve&&!le&&O.destroy()}),le=!!(y(W)||P(W)||L(W)),ve=!!(_(Ce)||j(Ce)||L(Ce));if(O=new k({writableObjectMode:!(null==W||!W.writableObjectMode),readableObjectMode:!(null==Ce||!Ce.writableObjectMode),writable:le,readable:ve}),le){if(N(W))O._write=function(Me,Je,qe){W.write(Me,Je)?qe():q=qe},O._final=function(Me){W.end(),U=Me},W.on("drain",function(){if(q){const Me=q;q=null,Me()}});else if(I(W)){const Je=(L(W)?W.writable:W).getWriter();O._write=function(){var qe=S(function*(we,Ne,ke){try{yield Je.ready,Je.write(we).catch(()=>{}),ke()}catch(Ve){ke(Ve)}});return function(we,Ne,ke){return qe.apply(this,arguments)}}(),O._final=function(){var qe=S(function*(we){try{yield Je.ready,Je.close().catch(()=>{}),U=we}catch(Ne){we(Ne)}});return function(we){return qe.apply(this,arguments)}}()}const Oe=L(Ce)?Ce.readable:Ce;ce(Oe,()=>{if(U){const Me=U;U=null,Me()}})}if(ve)if(N(Ce))Ce.on("readable",function(){if(x){const Oe=x;x=null,Oe()}}),Ce.on("end",function(){O.push(null)}),O._read=function(){for(;;){const Oe=Ce.read();if(null===Oe)return void(x=O._read);if(!O.push(Oe))return}};else if(I(Ce)){const Me=(L(Ce)?Ce.readable:Ce).getReader();O._read=S(function*(){for(;;)try{const{value:Je,done:qe}=yield Me.read();if(!O.push(Je))return;if(qe)return void O.push(null)}catch{return}})}return O._destroy=function(Oe,Me){!Oe&&null!==B&&(Oe=new oe),x=null,q=null,U=null,null===B?Me(Oe):(B=Me,N(Ce)&&C(Ce,Oe))},O}},5601:(te,J,g)=>{"use strict";const S=g(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:k},AbortError:C}=g(4370),{Symbol:N}=g(6305),{kDestroyed:_,isDestroyed:y,isFinished:I,isServerRequest:L}=g(5428),P=N("kDestroy"),j=N("kConstruct");function oe(le,ve,Oe){le&&(ve&&!ve.errored&&(ve.errored=le),Oe&&!Oe.errored&&(Oe.errored=le))}function $(le,ve,Oe){let Me=!1;function Je(qe){if(Me)return;Me=!0;const we=le._readableState,Ne=le._writableState;oe(qe,Ne,we),Ne&&(Ne.closed=!0),we&&(we.closed=!0),"function"==typeof Oe&&Oe(qe),qe?S.nextTick(ce,le,qe):S.nextTick(K,le)}try{le._destroy(ve||null,Je)}catch(qe){Je(qe)}}function ce(le,ve){ie(le,ve),K(le)}function K(le){const ve=le._readableState,Oe=le._writableState;Oe&&(Oe.closeEmitted=!0),ve&&(ve.closeEmitted=!0),(null!=Oe&&Oe.emitClose||null!=ve&&ve.emitClose)&&le.emit("close")}function ie(le,ve){const Oe=le._readableState,Me=le._writableState;null!=Me&&Me.errorEmitted||null!=Oe&&Oe.errorEmitted||(Me&&(Me.errorEmitted=!0),Oe&&(Oe.errorEmitted=!0),le.emit("error",ve))}function q(le,ve,Oe){const Me=le._readableState,Je=le._writableState;if(null!=Je&&Je.destroyed||null!=Me&&Me.destroyed)return this;null!=Me&&Me.autoDestroy||null!=Je&&Je.autoDestroy?le.destroy(ve):ve&&(Je&&!Je.errored&&(Je.errored=ve),Me&&!Me.errored&&(Me.errored=ve),Oe?S.nextTick(ie,le,ve):ie(le,ve))}function x(le){let ve=!1;function Oe(Me){if(ve)return void q(le,Me??new k);ve=!0;const Je=le._readableState,qe=le._writableState,we=qe||Je;Je&&(Je.constructed=!0),qe&&(qe.constructed=!0),we.destroyed?le.emit(P,Me):Me?q(le,Me,!0):S.nextTick(B,le)}try{le._construct(Me=>{S.nextTick(Oe,Me)})}catch(Me){S.nextTick(Oe,Me)}}function B(le){le.emit(j)}function O(le){return le?.setHeader&&"function"==typeof le.abort}function ue(le){le.emit("close")}function W(le,ve){le.emit("error",ve),S.nextTick(ue,le)}te.exports={construct:function U(le,ve){if("function"!=typeof le._construct)return;const Oe=le._readableState,Me=le._writableState;Oe&&(Oe.constructed=!1),Me&&(Me.constructed=!1),le.once(j,ve),!(le.listenerCount(j)>1)&&S.nextTick(x,le)},destroyer:function Ce(le,ve){!le||y(le)||(!ve&&!I(le)&&(ve=new C),L(le)?(le.socket=null,le.destroy(ve)):O(le)?le.abort():O(le.req)?le.req.abort():"function"==typeof le.destroy?le.destroy(ve):"function"==typeof le.close?le.close():ve?S.nextTick(W,le,ve):S.nextTick(ue,le),le.destroyed||(le[_]=!0))},destroy:function M(le,ve){const Oe=this._readableState,Me=this._writableState,Je=Me||Oe;return null!=Me&&Me.destroyed||null!=Oe&&Oe.destroyed?("function"==typeof ve&&ve(),this):(oe(le,Me,Oe),Me&&(Me.destroyed=!0),Oe&&(Oe.destroyed=!0),Je.constructed?$(this,le,ve):this.once(P,function(qe){$(this,b(qe,le),ve)}),this)},undestroy:function ne(){const le=this._readableState,ve=this._writableState;le&&(le.constructed=!0,le.closed=!1,le.closeEmitted=!1,le.destroyed=!1,le.errored=null,le.errorEmitted=!1,le.reading=!1,le.ended=!1===le.readable,le.endEmitted=!1===le.readable),ve&&(ve.constructed=!0,ve.destroyed=!1,ve.closed=!1,ve.closeEmitted=!1,ve.errored=null,ve.errorEmitted=!1,ve.finalCalled=!1,ve.prefinished=!1,ve.ended=!1===ve.writable,ve.ending=!1===ve.writable,ve.finished=!1===ve.writable)},errorOrDestroy:q}},5931:(te,J,g)=>{"use strict";const{ObjectDefineProperties:S,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:k,ObjectSetPrototypeOf:C}=g(6305);te.exports=y;const N=g(8383),_=g(9764);C(y.prototype,N.prototype),C(y,N);{const j=k(_.prototype);for(let oe=0;oe<j.length;oe++){const M=j[oe];y.prototype[M]||(y.prototype[M]=_.prototype[M])}}function y(j){if(!(this instanceof y))return new y(j);N.call(this,j),_.call(this,j),j?(this.allowHalfOpen=!1!==j.allowHalfOpen,!1===j.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===j.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let I,P;function L(){return void 0===I&&(I={}),I}S(y.prototype,{writable:{__proto__:null,...b(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(_.prototype,"writableLength")},writableFinished:{__proto__:null,...b(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(j){this._readableState&&this._writableState&&(this._readableState.destroyed=j,this._writableState.destroyed=j)}}}),y.fromWeb=function(j,oe){return L().newStreamDuplexFromReadableWritablePair(j,oe)},y.toWeb=function(j){return L().newReadableWritablePairFromDuplex(j)},y.from=function(j){return P||(P=g(8078)),P(j,"body")}},8078:(te,J,g)=>{var S=g(7156).default,b=g(6737).default,k=g(8186).default;const C=g(42),N=g(1657),{isReadable:_,isWritable:y,isIterable:I,isNodeStream:L,isReadableNodeStream:P,isWritableNodeStream:j,isDuplexNodeStream:oe}=g(5428),M=g(4618),{AbortError:$,codes:{ERR_INVALID_ARG_TYPE:ce,ERR_INVALID_RETURN_VALUE:K}}=g(4370),{destroyer:ie}=g(5601),ne=g(5931),q=g(8383),{createDeferredPromise:U}=g(2656),x=g(55),B=globalThis.Blob||N.Blob,O=typeof B<"u"?function(Me){return Me instanceof B}:function(Me){return!1},ue=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:W}=g(6305);class Ce extends ne{constructor(Me){super(Me),!1===Me?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Me?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function ve(Oe){const Me=Oe.readable&&"function"!=typeof Oe.readable.read?q.wrap(Oe.readable):Oe.readable,Je=Oe.writable;let Ne,ke,Ve,me,Ee,qe=!!_(Me),we=!!y(Je);function Ke(at){const Ye=me;me=null,Ye?Ye(at):at&&Ee.destroy(at)}return Ee=new Ce({readableObjectMode:!(null==Me||!Me.readableObjectMode),writableObjectMode:!(null==Je||!Je.writableObjectMode),readable:qe,writable:we}),we&&(M(Je,at=>{we=!1,at&&ie(Me,at),Ke(at)}),Ee._write=function(at,Ye,_e){Je.write(at,Ye)?_e():Ne=_e},Ee._final=function(at){Je.end(),ke=at},Je.on("drain",function(){if(Ne){const at=Ne;Ne=null,at()}}),Je.on("finish",function(){if(ke){const at=ke;ke=null,at()}})),qe&&(M(Me,at=>{qe=!1,at&&ie(Me,at),Ke(at)}),Me.on("readable",function(){if(Ve){const at=Ve;Ve=null,at()}}),Me.on("end",function(){Ee.push(null)}),Ee._read=function(){for(;;){const at=Me.read();if(null===at)return void(Ve=Ee._read);if(!Ee.push(at))return}}),Ee._destroy=function(at,Ye){!at&&null!==me&&(at=new $),Ve=null,Ne=null,ke=null,null===me?Ye(at):(me=Ye,ie(Je,at),ie(Me,at))},Ee}te.exports=function Oe(Me,Je){if(oe(Me))return Me;if(P(Me))return ve({readable:Me});if(j(Me))return ve({writable:Me});if(L(Me))return ve({writable:!1,readable:!1});if("function"==typeof Me){const{value:we,write:Ne,final:ke,destroy:Ve}=function le(Oe){let{promise:Me,resolve:Je}=U();const qe=new ue,we=qe.signal;return{value:Oe(k(function*(){for(;;){const ke=Me;Me=null;const{chunk:Ve,done:me,cb:Ee}=yield b(ke);if(C.nextTick(Ee),me)return;if(we.aborted)throw new $(void 0,{cause:we.reason});({promise:Me,resolve:Je}=U()),yield Ve}})(),{signal:we}),write(ke,Ve,me){const Ee=Je;Je=null,Ee({chunk:ke,done:!1,cb:me})},final(ke){const Ve=Je;Je=null,Ve({done:!0,cb:ke})},destroy(ke,Ve){qe.abort(),Ve(ke)}}}(Me);if(I(we))return x(Ce,we,{objectMode:!0,write:Ne,final:ke,destroy:Ve});const me=we?.then;if("function"==typeof me){let Ee;const Ke=W(me,we,at=>{if(null!=at)throw new K("nully","body",at)},at=>{ie(Ee,at)});return Ee=new Ce({objectMode:!0,readable:!1,write:Ne,final(at){ke(S(function*(){try{yield Ke,C.nextTick(at,null)}catch(Ye){C.nextTick(at,Ye)}}))},destroy:Ve})}throw new K("Iterable, AsyncIterable or AsyncFunction",Je,we)}if(O(Me))return Oe(Me.arrayBuffer());if(I(Me))return x(Ce,Me,{objectMode:!0,writable:!1});if("object"==typeof Me?.writable||"object"==typeof Me?.readable)return ve({readable:null!=Me&&Me.readable?P(Me?.readable)?Me?.readable:Oe(Me.readable):void 0,writable:null!=Me&&Me.writable?j(Me?.writable)?Me?.writable:Oe(Me.writable):void 0});const qe=Me?.then;if("function"==typeof qe){let we;return W(qe,Me,Ne=>{null!=Ne&&we.push(Ne),we.push(null)},Ne=>{ie(we,Ne)}),we=new Ce({objectMode:!0,writable:!1,read(){}})}throw new ce(Je,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Me)}},4618:(te,J,g)=>{const S=g(42),{AbortError:b,codes:k}=g(4370),{ERR_INVALID_ARG_TYPE:C,ERR_STREAM_PREMATURE_CLOSE:N}=k,{kEmptyObject:_,once:y}=g(2656),{validateAbortSignal:I,validateFunction:L,validateObject:P,validateBoolean:j}=g(2120),{Promise:oe,PromisePrototypeThen:M}=g(6305),{isClosed:$,isReadable:ce,isReadableNodeStream:K,isReadableStream:ie,isReadableFinished:ne,isReadableErrored:q,isWritable:U,isWritableNodeStream:x,isWritableStream:B,isWritableFinished:O,isWritableErrored:ue,isNodeStream:W,willEmitClose:Ce,kIsClosedPromise:le}=g(5428),Oe=()=>{};function Me(we,Ne,ke){var Ve,me;if(2===arguments.length?(ke=Ne,Ne=_):null==Ne?Ne=_:P(Ne,"options"),L(ke,"callback"),I(Ne.signal,"options.signal"),ke=y(ke),ie(we)||B(we))return function Je(we,Ne,ke){let Ve=!1,me=Oe;if(Ne.signal)if(me=()=>{Ve=!0,ke.call(we,new b(void 0,{cause:Ne.signal.reason}))},Ne.signal.aborted)S.nextTick(me);else{const Ke=ke;ke=y((...at)=>{Ne.signal.removeEventListener("abort",me),Ke.apply(we,at)}),Ne.signal.addEventListener("abort",me)}const Ee=(...Ke)=>{Ve||S.nextTick(()=>ke.apply(we,Ke))};return M(we[le].promise,Ee,Ee),Oe}(we,Ne,ke);if(!W(we))throw new C("stream",["ReadableStream","WritableStream","Stream"],we);const Ee=null!==(Ve=Ne.readable)&&void 0!==Ve?Ve:K(we),Ke=null!==(me=Ne.writable)&&void 0!==me?me:x(we),at=we._writableState,Ye=we._readableState,_e=()=>{we.writable||se()};let G=Ce(we)&&K(we)===Ee&&x(we)===Ke,R=O(we,!1);const se=()=>{R=!0,we.destroyed&&(G=!1),(!G||we.readable&&!Ee)&&(!Ee||V)&&ke.call(we)};let V=ne(we,!1);const Fe=()=>{V=!0,we.destroyed&&(G=!1),(!G||we.writable&&!Ke)&&(!Ke||R)&&ke.call(we)},et=de=>{ke.call(we,de)};let fe=$(we);const Q=()=>{fe=!0;const de=ue(we)||q(we);return de&&"boolean"!=typeof de?ke.call(we,de):Ee&&!V&&K(we,!0)&&!ne(we,!1)?ke.call(we,new N):!Ke||R||O(we,!1)?void ke.call(we):ke.call(we,new N)},X=()=>{fe=!0;const de=ue(we)||q(we);if(de&&"boolean"!=typeof de)return ke.call(we,de);ke.call(we)},A=()=>{we.req.on("finish",se)};!function ve(we){return we.setHeader&&"function"==typeof we.abort}(we)?Ke&&!at&&(we.on("end",_e),we.on("close",_e)):(we.on("complete",se),G||we.on("abort",Q),we.req?A():we.on("request",A)),!G&&"boolean"==typeof we.aborted&&we.on("aborted",Q),we.on("end",Fe),we.on("finish",se),!1!==Ne.error&&we.on("error",et),we.on("close",Q),fe?S.nextTick(Q):null!=at&&at.errorEmitted||null!=Ye&&Ye.errorEmitted?G||S.nextTick(X):(!Ee&&(!G||ce(we))&&(R||!1===U(we))||!Ke&&(!G||U(we))&&(V||!1===ce(we))||Ye&&we.req&&we.aborted)&&S.nextTick(X);const F=()=>{ke=Oe,we.removeListener("aborted",Q),we.removeListener("complete",se),we.removeListener("abort",Q),we.removeListener("request",A),we.req&&we.req.removeListener("finish",se),we.removeListener("end",_e),we.removeListener("close",_e),we.removeListener("finish",se),we.removeListener("end",Fe),we.removeListener("error",et),we.removeListener("close",Q)};if(Ne.signal&&!fe){const de=()=>{const pe=ke;F(),pe.call(we,new b(void 0,{cause:Ne.signal.reason}))};if(Ne.signal.aborted)S.nextTick(de);else{const pe=ke;ke=y((...ze)=>{Ne.signal.removeEventListener("abort",de),pe.apply(we,ze)}),Ne.signal.addEventListener("abort",de)}}return F}te.exports=Me,te.exports.finished=function qe(we,Ne){var ke;let Ve=!1;return null===Ne&&(Ne=_),null!==(ke=Ne)&&void 0!==ke&&ke.cleanup&&(j(Ne.cleanup,"cleanup"),Ve=Ne.cleanup),new oe((me,Ee)=>{const Ke=Me(we,Ne,at=>{Ve&&Ke(),at?Ee(at):me()})})}},55:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(42),{PromisePrototypeThen:k,SymbolAsyncIterator:C,SymbolIterator:N}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:I}=g(4370).codes;te.exports=function L(P,j,oe){let M,$;if("string"==typeof j||j instanceof _)return new P({objectMode:!0,...oe,read(){this.push(j),this.push(null)}});if(j&&j[C])$=!0,M=j[C]();else{if(!j||!j[N])throw new y("iterable",["Iterable"],j);$=!1,M=j[N]()}const ce=new P({objectMode:!0,highWaterMark:1,...oe});let K=!1;function ne(){return(ne=S(function*(x){if(null!=x&&"function"==typeof M.throw){const{value:ue,done:W}=yield M.throw(x);if(yield ue,W)return}if("function"==typeof M.return){const{value:ue}=yield M.return();yield ue}})).apply(this,arguments)}function U(){return(U=S(function*(){for(;;){try{const{value:x,done:B}=$?yield M.next():M.next();if(B)ce.push(null);else{const O=x&&"function"==typeof x.then?yield x:x;if(null===O)throw K=!1,new I;if(ce.push(O))continue;K=!1}}catch(x){ce.destroy(x)}break}})).apply(this,arguments)}return ce._read=function(){K||(K=!0,function q(){U.apply(this,arguments)}())},ce._destroy=function(x,B){k(function ie(x){return ne.apply(this,arguments)}(x),()=>b.nextTick(B,x),O=>b.nextTick(B,O||x))},ce}},900:(te,J,g)=>{"use strict";const{ArrayIsArray:S,ObjectSetPrototypeOf:b}=g(6305),{EventEmitter:k}=g(2016);function C(_){k.call(this,_)}function N(_,y,I){if("function"==typeof _.prependListener)return _.prependListener(y,I);_._events&&_._events[y]?S(_._events[y])?_._events[y].unshift(I):_._events[y]=[I,_._events[y]]:_.on(y,I)}b(C.prototype,k.prototype),b(C,k),C.prototype.pipe=function(_,y){const I=this;function L(K){_.writable&&!1===_.write(K)&&I.pause&&I.pause()}function P(){I.readable&&I.resume&&I.resume()}I.on("data",L),_.on("drain",P),!_._isStdio&&(!y||!1!==y.end)&&(I.on("end",oe),I.on("close",M));let j=!1;function oe(){j||(j=!0,_.end())}function M(){j||(j=!0,"function"==typeof _.destroy&&_.destroy())}function $(K){ce(),0===k.listenerCount(this,"error")&&this.emit("error",K)}function ce(){I.removeListener("data",L),_.removeListener("drain",P),I.removeListener("end",oe),I.removeListener("close",M),I.removeListener("error",$),_.removeListener("error",$),I.removeListener("end",ce),I.removeListener("close",ce),_.removeListener("close",ce)}return N(I,"error",$),N(_,"error",$),I.on("end",ce),I.on("close",ce),_.on("close",ce),_.emit("pipe",I),_},te.exports={Stream:C,prependListener:N}},7624:(te,J,g)=>{"use strict";var S=g(7156).default,b=g(8131).default,k=g(8237).default,C=g(6737).default,N=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:y,ERR_INVALID_ARG_TYPE:I,ERR_MISSING_ARGS:L,ERR_OUT_OF_RANGE:P},AbortError:j}=g(4370),{validateAbortSignal:oe,validateInteger:M,validateObject:$}=g(2120),ce=g(6305).Symbol("kWeak"),{finished:K}=g(4618),ie=g(7721),{addAbortSignalNoValidate:ne}=g(9987),{isWritable:q,isNodeStream:U}=g(5428),{ArrayPrototypePush:x,MathFloor:B,Number:O,NumberIsNaN:ue,Promise:W,PromiseReject:Ce,PromisePrototypeThen:le,Symbol:ve}=g(6305),Oe=ve("kEmpty"),Me=ve("kEof");function qe(A,F){if("function"!=typeof A)throw new I("fn",["Function","AsyncFunction"],A);null!=F&&$(F,"options"),null!=F?.signal&&oe(F.signal,"options.signal");let de=1;return null!=F?.concurrency&&(de=B(F.concurrency)),M(de,"concurrency",1),function(){var pe=N(function*(){var Ge,gt;const Pt=new _,yt=this,Gt=[],rn=Pt.signal,Te={signal:rn},Z=()=>Pt.abort();null!=F&&null!==(Ge=F.signal)&&void 0!==Ge&&Ge.aborted&&Z(),null==F||null===(gt=F.signal)||void 0===gt||gt.addEventListener("abort",Z);let T,ae,We=!1;function Ze(){We=!0}function Wt(){return(Wt=S(function*(){try{var Sn,an=!1,$n=!1;try{for(var Do,Cn=k(yt);an=!(Do=yield Cn.next()).done;an=!1){let Ji=Do.value;var ys;if(We)return;if(rn.aborted)throw new j;try{Ji=A(Ji,Te)}catch(Yr){Ji=Ce(Yr)}Ji!==Oe&&("function"==typeof(null===(ys=Ji)||void 0===ys?void 0:ys.catch)&&Ji.catch(Ze),Gt.push(Ji),T&&(T(),T=null),!We&&Gt.length&&Gt.length>=de&&(yield new W(Yr=>{ae=Yr})))}}catch(Ji){$n=!0,Sn=Ji}finally{try{an&&null!=Cn.return&&(yield Cn.return())}finally{if($n)throw Sn}}Gt.push(Me)}catch(Ji){const Yr=Ce(Ji);le(Yr,void 0,Ze),Gt.push(Yr)}finally{var Qo;We=!0,T&&(T(),T=null),null==F||null===(Qo=F.signal)||void 0===Qo||Qo.removeEventListener("abort",Z)}})).apply(this,arguments)}!function st(){Wt.apply(this,arguments)}();try{for(;;){for(;Gt.length>0;){const an=yield C(Gt[0]);if(an===Me)return;if(rn.aborted)throw new j;an!==Oe&&(yield an),Gt.shift(),ae&&(ae(),ae=null)}yield C(new W(an=>{T=an}))}}finally{Pt.abort(),We=!0,ae&&(ae(),ae=null)}});return function ze(){return pe.apply(this,arguments)}}().call(this)}function Ne(A){return ke.apply(this,arguments)}function ke(){return(ke=S(function*(A,F=void 0){var ze,de=!1,pe=!1;try{for(var Ge=k(_e.call(this,A,F));de=!(yield Ge.next()).done;de=!1)return!0}catch(Pt){pe=!0,ze=Pt}finally{try{de&&null!=Ge.return&&(yield Ge.return())}finally{if(pe)throw ze}}return!1})).apply(this,arguments)}function me(){return(me=S(function*(A,F=void 0){if("function"!=typeof A)throw new I("fn",["Function","AsyncFunction"],A);return!(yield Ne.call(this,S(function*(...de){return!(yield A(...de))}),F))})).apply(this,arguments)}function Ke(){return(Ke=S(function*(A,F){var ze,de=!1,pe=!1;try{for(var gt,Ge=k(_e.call(this,A,F));de=!(gt=yield Ge.next()).done;de=!1)return gt.value}catch(Pt){pe=!0,ze=Pt}finally{try{de&&null!=Ge.return&&(yield Ge.return())}finally{if(pe)throw ze}}})).apply(this,arguments)}function Ye(){return Ye=S(function*(A,F){if("function"!=typeof A)throw new I("fn",["Function","AsyncFunction"],A);function pe(){return(pe=S(function*(Gt,rn){return yield A(Gt,rn),Oe})).apply(this,arguments)}var gt,ze=!1,Ge=!1;try{for(var Pt=k(qe.call(this,function de(Gt,rn){return pe.apply(this,arguments)},F));ze=!(yield Pt.next()).done;ze=!1);}catch(Gt){Ge=!0,gt=Gt}finally{try{ze&&null!=Pt.return&&(yield Pt.return())}finally{if(Ge)throw gt}}}),Ye.apply(this,arguments)}function _e(A,F){if("function"!=typeof A)throw new I("fn",["Function","AsyncFunction"],A);function pe(){return(pe=S(function*(ze,Ge){return(yield A(ze,Ge))?ze:Oe})).apply(this,arguments)}return qe.call(this,function de(ze,Ge){return pe.apply(this,arguments)},F)}class G extends L{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function se(){return se=S(function*(A,F,de){var pe;if("function"!=typeof A)throw new I("reducer",["Function","AsyncFunction"],A);null!=de&&$(de,"options"),null!=de?.signal&&oe(de.signal,"options.signal");let ze=arguments.length>1;if(null!=de&&null!==(pe=de.signal)&&void 0!==pe&&pe.aborted){const ae=new j(void 0,{cause:de.signal.reason});throw this.once("error",()=>{}),yield K(this.destroy(ae)),ae}const Ge=new _,gt=Ge.signal;null!=de&&de.signal&&de.signal.addEventListener("abort",()=>Ge.abort(),{once:!0,[ce]:this});let Pt=!1;try{var rn,yt=!1,Gt=!1;try{for(var Z,Te=k(this);yt=!(Z=yield Te.next()).done;yt=!1){const ae=Z.value;var T;if(Pt=!0,null!=de&&null!==(T=de.signal)&&void 0!==T&&T.aborted)throw new j;ze?F=yield A(F,ae,{signal:gt}):(F=ae,ze=!0)}}catch(ae){Gt=!0,rn=ae}finally{try{yt&&null!=Te.return&&(yield Te.return())}finally{if(Gt)throw rn}}if(!Pt&&!ze)throw new G}finally{Ge.abort()}return F}),se.apply(this,arguments)}function Fe(){return(Fe=S(function*(A){null!=A&&$(A,"options"),null!=A?.signal&&oe(A.signal,"options.signal");const F=[];var ze,de=!1,pe=!1;try{for(var gt,Ge=k(this);de=!(gt=yield Ge.next()).done;de=!1){const yt=gt.value;var Pt;if(null!=A&&null!==(Pt=A.signal)&&void 0!==Pt&&Pt.aborted)throw new j(void 0,{cause:A.signal.reason});x(F,yt)}}catch(yt){pe=!0,ze=yt}finally{try{de&&null!=Ge.return&&(yield Ge.return())}finally{if(pe)throw ze}}return F})).apply(this,arguments)}function fe(A){if(A=O(A),ue(A))return 0;if(A<0)throw new P("number",">= 0",A);return A}te.exports.streamReturningOperators={asIndexedPairs:function we(A=void 0){return null!=A&&$(A,"options"),null!=A?.signal&&oe(A.signal,"options.signal"),function(){var F=N(function*(){let pe=0;var gt,ze=!1,Ge=!1;try{for(var yt,Pt=k(this);ze=!(yt=yield C(Pt.next())).done;ze=!1){const rn=yt.value;var Gt;if(null!=A&&null!==(Gt=A.signal)&&void 0!==Gt&&Gt.aborted)throw new j({cause:A.signal.reason});yield[pe++,rn]}}catch(rn){Ge=!0,gt=rn}finally{try{ze&&null!=Pt.return&&(yield C(Pt.return()))}finally{if(Ge)throw gt}}});return function de(){return F.apply(this,arguments)}}().call(this)},drop:function Q(A,F=void 0){return null!=F&&$(F,"options"),null!=F?.signal&&oe(F.signal,"options.signal"),A=fe(A),function(){var de=N(function*(){var ze;if(null!=F&&null!==(ze=F.signal)&&void 0!==ze&&ze.aborted)throw new j;var Pt,Ge=!1,gt=!1;try{for(var Gt,yt=k(this);Ge=!(Gt=yield C(yt.next())).done;Ge=!1){const Te=Gt.value;var rn;if(null!=F&&null!==(rn=F.signal)&&void 0!==rn&&rn.aborted)throw new j;A--<=0&&(yield Te)}}catch(Te){gt=!0,Pt=Te}finally{try{Ge&&null!=yt.return&&(yield C(yt.return()))}finally{if(gt)throw Pt}}});return function pe(){return de.apply(this,arguments)}}().call(this)},filter:_e,flatMap:function et(A,F){const de=qe.call(this,A,F);return function(){var pe=N(function*(){var Pt,Ge=!1,gt=!1;try{for(var Gt,yt=k(de);Ge=!(Gt=yield C(yt.next())).done;Ge=!1){const rn=Gt.value;yield*b(k(rn),C)}}catch(rn){gt=!0,Pt=rn}finally{try{Ge&&null!=yt.return&&(yield C(yt.return()))}finally{if(gt)throw Pt}}});return function ze(){return pe.apply(this,arguments)}}().call(this)},map:qe,take:function X(A,F=void 0){return null!=F&&$(F,"options"),null!=F?.signal&&oe(F.signal,"options.signal"),A=fe(A),function(){var de=N(function*(){var ze;if(null!=F&&null!==(ze=F.signal)&&void 0!==ze&&ze.aborted)throw new j;var Pt,Ge=!1,gt=!1;try{for(var Gt,yt=k(this);Ge=!(Gt=yield C(yt.next())).done;Ge=!1){const Te=Gt.value;var rn;if(null!=F&&null!==(rn=F.signal)&&void 0!==rn&&rn.aborted)throw new j;if(!(A-- >0))return;yield Te}}catch(Te){gt=!0,Pt=Te}finally{try{Ge&&null!=yt.return&&(yield C(yt.return()))}finally{if(gt)throw Pt}}});return function pe(){return de.apply(this,arguments)}}().call(this)},compose:function Je(A,F){if(null!=F&&$(F,"options"),null!=F?.signal&&oe(F.signal,"options.signal"),U(A)&&!q(A))throw new y("stream",A,"must be writable");const de=ie(this,A);return null!=F&&F.signal&&ne(F.signal,de),de}},te.exports.promiseReturningOperators={every:function Ve(A){return me.apply(this,arguments)},forEach:function at(A,F){return Ye.apply(this,arguments)},reduce:function R(A,F,de){return se.apply(this,arguments)},toArray:function V(A){return Fe.apply(this,arguments)},some:Ne,find:function Ee(A,F){return Ke.apply(this,arguments)}}},6973:(te,J,g)=>{"use strict";const{ObjectSetPrototypeOf:S}=g(6305);te.exports=k;const b=g(123);function k(C){if(!(this instanceof k))return new k(C);b.call(this,C)}S(k.prototype,b.prototype),S(k,b),k.prototype._transform=function(C,N,_){_(null,C)}},4514:(te,J,g)=>{var S=g(7156).default,b=g(8186).default,k=g(6737).default,C=g(8131).default,N=g(8237).default;const _=g(42),{ArrayIsArray:y,Promise:I,SymbolAsyncIterator:L}=g(6305),P=g(4618),{once:j}=g(2656),oe=g(5601),M=g(5931),{aggregateTwoErrors:$,codes:{ERR_INVALID_ARG_TYPE:ce,ERR_INVALID_RETURN_VALUE:K,ERR_MISSING_ARGS:ie,ERR_STREAM_DESTROYED:ne,ERR_STREAM_PREMATURE_CLOSE:q},AbortError:U}=g(4370),{validateFunction:x,validateAbortSignal:B}=g(2120),{isIterable:O,isReadable:ue,isReadableNodeStream:W,isNodeStream:Ce,isTransformStream:le,isWebStream:ve,isReadableStream:Oe,isReadableEnded:Me}=g(5428),Je=globalThis.AbortController||g(3982).AbortController;let qe,we;function Ne(V,Fe,et){let fe=!1;return V.on("close",()=>{fe=!0}),{destroy:X=>{fe||(fe=!0,oe.destroyer(V,X||new ne("pipe")))},cleanup:P(V,{readable:Fe,writable:et},X=>{fe=!X})}}function Ve(V){if(O(V))return V;if(W(V))return function me(V){return Ee.apply(this,arguments)}(V);throw new ce("val",["Readable","Iterable","AsyncIterable"],V)}function Ee(){return(Ee=b(function*(V){we||(we=g(8383)),yield*C(N(we.prototype[L].call(V)),k)})).apply(this,arguments)}function Ke(V,Fe,et,fe){return at.apply(this,arguments)}function at(){return(at=S(function*(V,Fe,et,{end:fe}){let Q,X=null;const A=yt=>{if(yt&&(Q=yt),X){const Gt=X;X=null,Gt()}},F=()=>new I((yt,Gt)=>{Q?Gt(Q):X=()=>{Q?Gt(Q):yt()}});Fe.on("drain",A);const de=P(Fe,{readable:!1},A);try{Fe.writableNeedDrain&&(yield F());var Ge,pe=!1,ze=!1;try{for(var Pt,gt=N(V);pe=!(Pt=yield gt.next()).done;pe=!1)Fe.write(Pt.value)||(yield F())}catch(yt){ze=!0,Ge=yt}finally{try{pe&&null!=gt.return&&(yield gt.return())}finally{if(ze)throw Ge}}fe&&Fe.end(),yield F(),et()}catch(yt){et(Q!==yt?$(Q,yt):yt)}finally{de(),Fe.off("drain",A)}})).apply(this,arguments)}function Ye(V,Fe,et,fe){return _e.apply(this,arguments)}function _e(){return(_e=S(function*(V,Fe,et,{end:fe}){le(Fe)&&(Fe=Fe.writable);const Q=Fe.getWriter();try{var F,X=!1,A=!1;try{for(var pe,de=N(V);X=!(pe=yield de.next()).done;X=!1){const ze=pe.value;yield Q.ready,Q.write(ze).catch(()=>{})}}catch(ze){A=!0,F=ze}finally{try{X&&null!=de.return&&(yield de.return())}finally{if(A)throw F}}yield Q.ready,fe&&(yield Q.close()),et()}catch(ze){try{yield Q.abort(ze),et(ze)}catch(Ge){et(Ge)}}})).apply(this,arguments)}function R(V,Fe,et){if(1===V.length&&y(V[0])&&(V=V[0]),V.length<2)throw new ie("streams");const fe=new Je,Q=fe.signal,X=et?.signal,A=[];function F(){Pt(new U)}let de,pe;B(X,"options.signal"),X?.addEventListener("abort",F);const ze=[];let yt,Ge=0;function gt(Z){Pt(Z,0==--Ge)}function Pt(Z,T){if(Z&&(!de||"ERR_STREAM_PREMATURE_CLOSE"===de.code)&&(de=Z),de||T){for(;ze.length;)ze.shift()(de);X?.removeEventListener("abort",F),fe.abort(),T&&(de||A.forEach(ae=>ae()),_.nextTick(Fe,de,pe))}}for(let Z=0;Z<V.length;Z++){const T=V[Z],ae=Z<V.length-1,We=Z>0,Ze=ae||!1!==et?.end,st=Z===V.length-1;if(Ce(T)){let Wt=function(an){an&&"AbortError"!==an.name&&"ERR_STREAM_PREMATURE_CLOSE"!==an.code&&gt(an)};if(Ze){const{destroy:an,cleanup:$n}=Ne(T,ae,We);ze.push(an),ue(T)&&st&&A.push($n)}T.on("error",Wt),ue(T)&&st&&A.push(()=>{T.removeListener("error",Wt)})}if(0===Z)if("function"==typeof T){if(yt=T({signal:Q}),!O(yt))throw new K("Iterable, AsyncIterable or Stream","source",yt)}else yt=O(T)||W(T)||le(T)?T:M.from(T);else if("function"==typeof T){var Gt;if(yt=le(yt)?Ve(null===(Gt=yt)||void 0===Gt?void 0:Gt.readable):Ve(yt),yt=T(yt,{signal:Q}),ae){if(!O(yt,!0))throw new K("AsyncIterable",`transform[${Z-1}]`,yt)}else{var rn;qe||(qe=g(6973));const Wt=new qe({objectMode:!0}),an=null===(rn=yt)||void 0===rn?void 0:rn.then;if("function"==typeof an)Ge++,an.call(yt,Cn=>{pe=Cn,null!=Cn&&Wt.write(Cn),Ze&&Wt.end(),_.nextTick(gt)},Cn=>{Wt.destroy(Cn),_.nextTick(gt,Cn)});else if(O(yt,!0))Ge++,Ke(yt,Wt,gt,{end:Ze});else{if(!Oe(yt)&&!le(yt))throw new K("AsyncIterable or Promise","destination",yt);Ge++,Ke(yt.readable||yt,Wt,gt,{end:Ze})}yt=Wt;const{destroy:$n,cleanup:Sn}=Ne(yt,!1,!0);ze.push($n),st&&A.push(Sn)}}else if(Ce(T)){if(W(yt)){Ge+=2;const Wt=se(yt,T,gt,{end:Ze});ue(T)&&st&&A.push(Wt)}else if(le(yt)||Oe(yt))Ge++,Ke(yt.readable||yt,T,gt,{end:Ze});else{if(!O(yt))throw new ce("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],yt);Ge++,Ke(yt,T,gt,{end:Ze})}yt=T}else if(ve(T)){if(W(yt))Ge++,Ye(Ve(yt),T,gt,{end:Ze});else if(Oe(yt)||O(yt))Ge++,Ye(yt,T,gt,{end:Ze});else{if(!le(yt))throw new ce("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],yt);Ge++,Ye(yt.readable,T,gt,{end:Ze})}yt=T}else yt=M.from(T)}return(null!=Q&&Q.aborted||null!=X&&X.aborted)&&_.nextTick(F),yt}function se(V,Fe,et,{end:fe}){let Q=!1;if(Fe.on("close",()=>{Q||et(new q)}),V.pipe(Fe,{end:!1}),fe){let A=function(){Q=!0,Fe.end()};Me(V)?_.nextTick(A):V.once("end",A)}else et();return P(V,{readable:!0,writable:!1},A=>{const F=V._readableState;A&&"ERR_STREAM_PREMATURE_CLOSE"===A.code&&F&&F.ended&&!F.errored&&!F.errorEmitted?V.once("end",et).once("error",et):et(A)}),P(Fe,{readable:!1,writable:!0},et)}te.exports={pipelineImpl:R,pipeline:function G(...V){return R(V,j(function ke(V){return x(V[V.length-1],"streams[stream.length - 1]"),V.pop()}(V)))}}},8383:(te,J,g)=>{var S=g(6737).default,b=g(8186).default;const k=g(42),{ArrayPrototypeIndexOf:C,NumberIsInteger:N,NumberIsNaN:_,NumberParseInt:y,ObjectDefineProperties:I,ObjectKeys:L,ObjectSetPrototypeOf:P,Promise:j,SafeSet:oe,SymbolAsyncIterator:M,Symbol:$}=g(6305);te.exports=Ke,Ke.ReadableState=Ee;const{EventEmitter:ce}=g(2016),{Stream:K,prependListener:ie}=g(900),{Buffer:ne}=g(1657),{addAbortSignal:q}=g(9987),U=g(4618);let x=g(2656).debuglog("stream",T=>{x=T});const B=g(2960),O=g(5601),{getHighWaterMark:ue,getDefaultHighWaterMark:W}=g(8782),{aggregateTwoErrors:Ce,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:ve,ERR_OUT_OF_RANGE:Oe,ERR_STREAM_PUSH_AFTER_EOF:Me,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Je}}=g(4370),{validateObject:qe}=g(2120),we=$("kPaused"),{StringDecoder:Ne}=g(2024),ke=g(55);P(Ke.prototype,K.prototype),P(Ke,K);const Ve=()=>{},{errorOrDestroy:me}=O;function Ee(T,ae,We){"boolean"!=typeof We&&(We=ae instanceof g(5931)),this.objectMode=!(!T||!T.objectMode),We&&(this.objectMode=this.objectMode||!(!T||!T.readableObjectMode)),this.highWaterMark=T?ue(this,T,"readableHighWaterMark",We):W(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[we]=null,this.errorEmitted=!1,this.emitClose=!T||!1!==T.emitClose,this.autoDestroy=!T||!1!==T.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,T&&T.encoding&&(this.decoder=new Ne(T.encoding),this.encoding=T.encoding)}function Ke(T){if(!(this instanceof Ke))return new Ke(T);const ae=this instanceof g(5931);this._readableState=new Ee(T,this,ae),T&&("function"==typeof T.read&&(this._read=T.read),"function"==typeof T.destroy&&(this._destroy=T.destroy),"function"==typeof T.construct&&(this._construct=T.construct),T.signal&&!ae&&q(T.signal,this)),K.call(this,T),O.construct(this,()=>{this._readableState.needReadable&&et(this,this._readableState)})}function at(T,ae,We,Ze){x("readableAddChunk",ae);const st=T._readableState;let Wt;if(st.objectMode||("string"==typeof ae?st.encoding!==(We=We||st.defaultEncoding)&&(Ze&&st.encoding?ae=ne.from(ae,We).toString(st.encoding):(ae=ne.from(ae,We),We="")):ae instanceof ne?We="":K._isUint8Array(ae)?(ae=K._uint8ArrayToBuffer(ae),We=""):null!=ae&&(Wt=new le("chunk",["string","Buffer","Uint8Array"],ae))),Wt)me(T,Wt);else if(null===ae)st.reading=!1,function se(T,ae){if(x("onEofChunk"),!ae.ended){if(ae.decoder){const We=ae.decoder.end();We&&We.length&&(ae.buffer.push(We),ae.length+=ae.objectMode?1:We.length)}ae.ended=!0,ae.sync?V(T):(ae.needReadable=!1,ae.emittedReadable=!0,Fe(T))}}(T,st);else if(st.objectMode||ae&&ae.length>0)if(Ze)if(st.endEmitted)me(T,new Je);else{if(st.destroyed||st.errored)return!1;Ye(T,st,ae,!0)}else if(st.ended)me(T,new Me);else{if(st.destroyed||st.errored)return!1;st.reading=!1,st.decoder&&!We?(ae=st.decoder.write(ae),st.objectMode||0!==ae.length?Ye(T,st,ae,!1):et(T,st)):Ye(T,st,ae,!1)}else Ze||(st.reading=!1,et(T,st));return!st.ended&&(st.length<st.highWaterMark||0===st.length)}function Ye(T,ae,We,Ze){ae.flowing&&0===ae.length&&!ae.sync&&T.listenerCount("data")>0?(ae.multiAwaitDrain?ae.awaitDrainWriters.clear():ae.awaitDrainWriters=null,ae.dataEmitted=!0,T.emit("data",We)):(ae.length+=ae.objectMode?1:We.length,Ze?ae.buffer.unshift(We):ae.buffer.push(We),ae.needReadable&&V(T)),et(T,ae)}function R(T,ae){return T<=0||0===ae.length&&ae.ended?0:ae.objectMode?1:_(T)?ae.flowing&&ae.length?ae.buffer.first().length:ae.length:T<=ae.length?T:ae.ended?ae.length:0}function V(T){const ae=T._readableState;x("emitReadable",ae.needReadable,ae.emittedReadable),ae.needReadable=!1,ae.emittedReadable||(x("emitReadable",ae.flowing),ae.emittedReadable=!0,k.nextTick(Fe,T))}function Fe(T){const ae=T._readableState;x("emitReadable_",ae.destroyed,ae.length,ae.ended),!ae.destroyed&&!ae.errored&&(ae.length||ae.ended)&&(T.emit("readable"),ae.emittedReadable=!1),ae.needReadable=!ae.flowing&&!ae.ended&&ae.length<=ae.highWaterMark,pe(T)}function et(T,ae){!ae.readingMore&&ae.constructed&&(ae.readingMore=!0,k.nextTick(fe,T,ae))}function fe(T,ae){for(;!ae.reading&&!ae.ended&&(ae.length<ae.highWaterMark||ae.flowing&&0===ae.length);){const We=ae.length;if(x("maybeReadMore read 0"),T.read(0),We===ae.length)break}ae.readingMore=!1}function X(T){const ae=T._readableState;ae.readableListening=T.listenerCount("readable")>0,ae.resumeScheduled&&!1===ae[we]?ae.flowing=!0:T.listenerCount("data")>0?T.resume():ae.readableListening||(ae.flowing=null)}function A(T){x("readable nexttick read 0"),T.read(0)}function de(T,ae){x("resume",ae.reading),ae.reading||T.read(0),ae.resumeScheduled=!1,T.emit("resume"),pe(T),ae.flowing&&!ae.reading&&T.read(0)}function pe(T){const ae=T._readableState;for(x("flow",ae.flowing);ae.flowing&&null!==T.read(););}function ze(T,ae){"function"!=typeof T.read&&(T=Ke.wrap(T,{objectMode:!0}));const We=function Ge(T,ae){return gt.apply(this,arguments)}(T,ae);return We.stream=T,We}function gt(){return(gt=b(function*(T,ae){let st,We=Ve;function Ze(an){this===T?(We(),We=Ve):We=an}T.on("readable",Ze);const Wt=U(T,{writable:!1},an=>{st=an?Ce(st,an):null,We(),We=Ve});try{for(;;){const an=T.destroyed?null:T.read();if(null!==an)yield an;else{if(st)throw st;if(null===st)return;yield S(new j(Ze))}}}catch(an){throw st=Ce(st,an),st}finally{!st&&!1===ae?.destroyOnReturn||void 0!==st&&!T._readableState.autoDestroy?(T.off("readable",Ze),Wt()):O.destroyer(T,null)}})).apply(this,arguments)}function Pt(T,ae){if(0===ae.length)return null;let We;return ae.objectMode?We=ae.buffer.shift():!T||T>=ae.length?(We=ae.decoder?ae.buffer.join(""):1===ae.buffer.length?ae.buffer.first():ae.buffer.concat(ae.length),ae.buffer.clear()):We=ae.buffer.consume(T,ae.decoder),We}function yt(T){const ae=T._readableState;x("endReadable",ae.endEmitted),ae.endEmitted||(ae.ended=!0,k.nextTick(Gt,ae,T))}function Gt(T,ae){if(x("endReadableNT",T.endEmitted,T.length),!T.errored&&!T.closeEmitted&&!T.endEmitted&&0===T.length)if(T.endEmitted=!0,ae.emit("end"),ae.writable&&!1===ae.allowHalfOpen)k.nextTick(rn,ae);else if(T.autoDestroy){const We=ae._writableState;(!We||We.autoDestroy&&(We.finished||!1===We.writable))&&ae.destroy()}}function rn(T){T.writable&&!T.writableEnded&&!T.destroyed&&T.end()}let Te;function Z(){return void 0===Te&&(Te={}),Te}Ke.prototype.destroy=O.destroy,Ke.prototype._undestroy=O.undestroy,Ke.prototype._destroy=function(T,ae){ae(T)},Ke.prototype[ce.captureRejectionSymbol]=function(T){this.destroy(T)},Ke.prototype.push=function(T,ae){return at(this,T,ae,!1)},Ke.prototype.unshift=function(T,ae){return at(this,T,ae,!0)},Ke.prototype.isPaused=function(){const T=this._readableState;return!0===T[we]||!1===T.flowing},Ke.prototype.setEncoding=function(T){const ae=new Ne(T);this._readableState.decoder=ae,this._readableState.encoding=this._readableState.decoder.encoding;const We=this._readableState.buffer;let Ze="";for(const st of We)Ze+=ae.write(st);return We.clear(),""!==Ze&&We.push(Ze),this._readableState.length=Ze.length,this},Ke.prototype.read=function(T){x("read",T),void 0===T?T=NaN:N(T)||(T=y(T,10));const ae=this._readableState,We=T;if(T>ae.highWaterMark&&(ae.highWaterMark=function G(T){if(T>1073741824)throw new Oe("size","<= 1GiB",T);return T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,++T}(T)),0!==T&&(ae.emittedReadable=!1),0===T&&ae.needReadable&&((0!==ae.highWaterMark?ae.length>=ae.highWaterMark:ae.length>0)||ae.ended))return x("read: emitReadable",ae.length,ae.ended),0===ae.length&&ae.ended?yt(this):V(this),null;if(0===(T=R(T,ae))&&ae.ended)return 0===ae.length&&yt(this),null;let st,Ze=ae.needReadable;if(x("need readable",Ze),(0===ae.length||ae.length-T<ae.highWaterMark)&&(Ze=!0,x("length less than watermark",Ze)),ae.ended||ae.reading||ae.destroyed||ae.errored||!ae.constructed)Ze=!1,x("reading, ended or constructing",Ze);else if(Ze){x("do read"),ae.reading=!0,ae.sync=!0,0===ae.length&&(ae.needReadable=!0);try{this._read(ae.highWaterMark)}catch(Wt){me(this,Wt)}ae.sync=!1,ae.reading||(T=R(We,ae))}return st=T>0?Pt(T,ae):null,null===st?(ae.needReadable=ae.length<=ae.highWaterMark,T=0):(ae.length-=T,ae.multiAwaitDrain?ae.awaitDrainWriters.clear():ae.awaitDrainWriters=null),0===ae.length&&(ae.ended||(ae.needReadable=!0),We!==T&&ae.ended&&yt(this)),null!==st&&!ae.errorEmitted&&!ae.closeEmitted&&(ae.dataEmitted=!0,this.emit("data",st)),st},Ke.prototype._read=function(T){throw new ve("_read()")},Ke.prototype.pipe=function(T,ae){const We=this,Ze=this._readableState;1===Ze.pipes.length&&(Ze.multiAwaitDrain||(Ze.multiAwaitDrain=!0,Ze.awaitDrainWriters=new oe(Ze.awaitDrainWriters?[Ze.awaitDrainWriters]:[]))),Ze.pipes.push(T),x("pipe count=%d opts=%j",Ze.pipes.length,ae);const Wt=ae&&!1===ae.end||T===k.stdout||T===k.stderr?zs:$n;function $n(){x("onend"),T.end()}Ze.endEmitted?k.nextTick(Wt):We.once("end",Wt),T.on("unpipe",function an(Ro,_o){x("onunpipe"),Ro===We&&_o&&!1===_o.hasUnpiped&&(_o.hasUnpiped=!0,function Do(){x("cleanup"),T.removeListener("close",Yr),T.removeListener("finish",vs),Sn&&T.removeListener("drain",Sn),T.removeListener("error",Ji),T.removeListener("unpipe",an),We.removeListener("end",$n),We.removeListener("end",zs),We.removeListener("data",Qo),Cn=!0,Sn&&Ze.awaitDrainWriters&&(!T._writableState||T._writableState.needDrain)&&Sn()}())});let Sn,Cn=!1;function ys(){Cn||(1===Ze.pipes.length&&Ze.pipes[0]===T?(x("false write response, pause",0),Ze.awaitDrainWriters=T,Ze.multiAwaitDrain=!1):Ze.pipes.length>1&&Ze.pipes.includes(T)&&(x("false write response, pause",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.add(T)),We.pause()),Sn||(Sn=function Q(T,ae){return function(){const Ze=T._readableState;Ze.awaitDrainWriters===ae?(x("pipeOnDrain",1),Ze.awaitDrainWriters=null):Ze.multiAwaitDrain&&(x("pipeOnDrain",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.delete(ae)),(!Ze.awaitDrainWriters||0===Ze.awaitDrainWriters.size)&&T.listenerCount("data")&&T.resume()}}(We,T),T.on("drain",Sn))}function Qo(Ro){x("ondata");const _o=T.write(Ro);x("dest.write",_o),!1===_o&&ys()}function Ji(Ro){if(x("onerror",Ro),zs(),T.removeListener("error",Ji),0===T.listenerCount("error")){const _o=T._writableState||T._readableState;_o&&!_o.errorEmitted?me(T,Ro):T.emit("error",Ro)}}function Yr(){T.removeListener("finish",vs),zs()}function vs(){x("onfinish"),T.removeListener("close",Yr),zs()}function zs(){x("unpipe"),We.unpipe(T)}return We.on("data",Qo),ie(T,"error",Ji),T.once("close",Yr),T.once("finish",vs),T.emit("pipe",We),!0===T.writableNeedDrain?Ze.flowing&&ys():Ze.flowing||(x("pipe resume"),We.resume()),T},Ke.prototype.unpipe=function(T){const ae=this._readableState;if(0===ae.pipes.length)return this;if(!T){const st=ae.pipes;ae.pipes=[],this.pause();for(let Wt=0;Wt<st.length;Wt++)st[Wt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ze=C(ae.pipes,T);return-1===Ze||(ae.pipes.splice(Ze,1),0===ae.pipes.length&&this.pause(),T.emit("unpipe",this,{hasUnpiped:!1})),this},Ke.prototype.addListener=Ke.prototype.on=function(T,ae){const We=K.prototype.on.call(this,T,ae),Ze=this._readableState;return"data"===T?(Ze.readableListening=this.listenerCount("readable")>0,!1!==Ze.flowing&&this.resume()):"readable"===T&&!Ze.endEmitted&&!Ze.readableListening&&(Ze.readableListening=Ze.needReadable=!0,Ze.flowing=!1,Ze.emittedReadable=!1,x("on readable",Ze.length,Ze.reading),Ze.length?V(this):Ze.reading||k.nextTick(A,this)),We},Ke.prototype.off=Ke.prototype.removeListener=function(T,ae){const We=K.prototype.removeListener.call(this,T,ae);return"readable"===T&&k.nextTick(X,this),We},Ke.prototype.removeAllListeners=function(T){const ae=K.prototype.removeAllListeners.apply(this,arguments);return("readable"===T||void 0===T)&&k.nextTick(X,this),ae},Ke.prototype.resume=function(){const T=this._readableState;return T.flowing||(x("resume"),T.flowing=!T.readableListening,function F(T,ae){ae.resumeScheduled||(ae.resumeScheduled=!0,k.nextTick(de,T,ae))}(this,T)),T[we]=!1,this},Ke.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[we]=!0,this},Ke.prototype.wrap=function(T){let ae=!1;T.on("data",Ze=>{!this.push(Ze)&&T.pause&&(ae=!0,T.pause())}),T.on("end",()=>{this.push(null)}),T.on("error",Ze=>{me(this,Ze)}),T.on("close",()=>{this.destroy()}),T.on("destroy",()=>{this.destroy()}),this._read=()=>{ae&&T.resume&&(ae=!1,T.resume())};const We=L(T);for(let Ze=1;Ze<We.length;Ze++){const st=We[Ze];void 0===this[st]&&"function"==typeof T[st]&&(this[st]=T[st].bind(T))}return this},Ke.prototype[M]=function(){return ze(this)},Ke.prototype.iterator=function(T){return void 0!==T&&qe(T,"options"),ze(this,T)},I(Ke.prototype,{readable:{__proto__:null,get(){const T=this._readableState;return!(!T||!1===T.readable||T.destroyed||T.errorEmitted||T.endEmitted)},set(T){this._readableState&&(this._readableState.readable=!!T)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(T){this._readableState&&(this._readableState.flowing=T)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(T){this._readableState&&(this._readableState.destroyed=T)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),I(Ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[we]},set(T){this[we]=!!T}}}),Ke._fromList=Pt,Ke.from=function(T,ae){return ke(Ke,T,ae)},Ke.fromWeb=function(T,ae){return Z().newStreamReadableFromReadableStream(T,ae)},Ke.toWeb=function(T,ae){return Z().newReadableStreamFromStreamReadable(T,ae)},Ke.wrap=function(T,ae){var We,Ze;return new Ke({objectMode:null===(We=null!==(Ze=T.readableObjectMode)&&void 0!==Ze?Ze:T.objectMode)||void 0===We||We,...ae,destroy(st,Wt){O.destroyer(T,st),Wt(st)}}).wrap(T)}},8782:(te,J,g)=>{"use strict";const{MathFloor:S,NumberIsInteger:b}=g(6305),{ERR_INVALID_ARG_VALUE:k}=g(4370).codes;function N(y){return y?16:16384}te.exports={getHighWaterMark:function _(y,I,L,P){const j=function C(y,I,L){return null!=y.highWaterMark?y.highWaterMark:I?y[L]:null}(I,P,L);if(null!=j){if(!b(j)||j<0)throw new k(P?`options.${L}`:"options.highWaterMark",j);return S(j)}return N(y.objectMode)},getDefaultHighWaterMark:N}},123:(te,J,g)=>{"use strict";const{ObjectSetPrototypeOf:S,Symbol:b}=g(6305);te.exports=y;const{ERR_METHOD_NOT_IMPLEMENTED:k}=g(4370).codes,C=g(5931),{getHighWaterMark:N}=g(8782);S(y.prototype,C.prototype),S(y,C);const _=b("kCallback");function y(P){if(!(this instanceof y))return new y(P);const j=P?N(this,P,"readableHighWaterMark",!0):null;0===j&&(P={...P,highWaterMark:null,readableHighWaterMark:j,writableHighWaterMark:P.writableHighWaterMark||0}),C.call(this,P),this._readableState.sync=!1,this[_]=null,P&&("function"==typeof P.transform&&(this._transform=P.transform),"function"==typeof P.flush&&(this._flush=P.flush)),this.on("prefinish",L)}function I(P){"function"!=typeof this._flush||this.destroyed?(this.push(null),P&&P()):this._flush((j,oe)=>{j?P?P(j):this.destroy(j):(null!=oe&&this.push(oe),this.push(null),P&&P())})}function L(){this._final!==I&&I.call(this)}y.prototype._final=I,y.prototype._transform=function(P,j,oe){throw new k("_transform()")},y.prototype._write=function(P,j,oe){const M=this._readableState,$=this._writableState,ce=M.length;this._transform(P,j,(K,ie)=>{K?oe(K):(null!=ie&&this.push(ie),$.ended||ce===M.length||M.length<M.highWaterMark?oe():this[_]=oe)})},y.prototype._read=function(){if(this[_]){const P=this[_];this[_]=null,P()}}},5428:(te,J,g)=>{"use strict";const{Symbol:S,SymbolAsyncIterator:b,SymbolIterator:k,SymbolFor:C}=g(6305),N=S("kDestroyed"),_=S("kIsErrored"),y=S("kIsReadable"),I=S("kIsDisturbed"),L=C("nodejs.webstream.isClosedPromise"),P=C("nodejs.webstream.controllerErrorFunction");function j(me,Ee=!1){var Ke;return!(!me||"function"!=typeof me.pipe||"function"!=typeof me.on||Ee&&("function"!=typeof me.pause||"function"!=typeof me.resume)||me._writableState&&!1===(null===(Ke=me._readableState)||void 0===Ke?void 0:Ke.readable)||me._writableState&&!me._readableState)}function oe(me){var Ee;return!(!me||"function"!=typeof me.write||"function"!=typeof me.on||me._readableState&&!1===(null===(Ee=me._writableState)||void 0===Ee?void 0:Ee.writable))}function $(me){return me&&(me._readableState||me._writableState||"function"==typeof me.write&&"function"==typeof me.on||"function"==typeof me.pipe&&"function"==typeof me.on)}function ce(me){return!(!me||$(me)||"function"!=typeof me.pipeThrough||"function"!=typeof me.getReader||"function"!=typeof me.cancel)}function K(me){return!(!me||$(me)||"function"!=typeof me.getWriter||"function"!=typeof me.abort)}function ie(me){return!(!me||$(me)||"object"!=typeof me.readable||"object"!=typeof me.writable)}function U(me){if(!$(me))return null;const at=me._writableState||me._readableState;return!!(me.destroyed||me[N]||null!=at&&at.destroyed)}function x(me){if(!oe(me))return null;if(!0===me.writableEnded)return!0;const Ee=me._writableState;return(null==Ee||!Ee.errored)&&("boolean"!=typeof Ee?.ended?null:Ee.ended)}function ue(me,Ee){if(!j(me))return null;const Ke=me._readableState;return(null==Ke||!Ke.errored)&&("boolean"!=typeof Ke?.endEmitted?null:!!(Ke.endEmitted||!1===Ee&&!0===Ke.ended&&0===Ke.length))}function W(me){return me&&null!=me[y]?me[y]:"boolean"!=typeof me?.readable?null:!U(me)&&j(me)&&me.readable&&!ue(me)}function Ce(me){return"boolean"!=typeof me?.writable?null:!U(me)&&oe(me)&&me.writable&&!x(me)}function Je(me){return"boolean"==typeof me._closed&&"boolean"==typeof me._defaultKeepAlive&&"boolean"==typeof me._removedConnection&&"boolean"==typeof me._removedContLen}function qe(me){return"boolean"==typeof me._sent100&&Je(me)}te.exports={kDestroyed:N,isDisturbed:function ke(me){var Ee;return!(!me||!(null!==(Ee=me[I])&&void 0!==Ee?Ee:me.readableDidRead||me.readableAborted))},kIsDisturbed:I,isErrored:function Ve(me){var Ee,Ke,at,Ye,_e,G,R,se,V,Fe;return!(!me||!(null!==(Ee=null!==(Ke=null!==(at=null!==(Ye=null!==(_e=null!==(G=me[_])&&void 0!==G?G:me.readableErrored)&&void 0!==_e?_e:me.writableErrored)&&void 0!==Ye?Ye:null===(R=me._readableState)||void 0===R?void 0:R.errorEmitted)&&void 0!==at?at:null===(se=me._writableState)||void 0===se?void 0:se.errorEmitted)&&void 0!==Ke?Ke:null===(V=me._readableState)||void 0===V?void 0:V.errored)&&void 0!==Ee?Ee:null!==(Fe=me._writableState)&&void 0!==Fe&&Fe.errored))},kIsErrored:_,isReadable:W,kIsReadable:y,kIsClosedPromise:L,kControllerErrorFunction:P,isClosed:function Me(me){if(!$(me))return null;if("boolean"==typeof me.closed)return me.closed;const Ee=me._writableState,Ke=me._readableState;return"boolean"==typeof Ee?.closed||"boolean"==typeof Ke?.closed?Ee?.closed||Ke?.closed:"boolean"==typeof me._closed&&Je(me)?me._closed:null},isDestroyed:U,isDuplexNodeStream:function M(me){return!(!me||"function"!=typeof me.pipe||!me._readableState||"function"!=typeof me.on||"function"!=typeof me.write)},isFinished:function le(me,Ee){return $(me)?!!U(me)||!(!1!==Ee?.readable&&W(me)||!1!==Ee?.writable&&Ce(me)):null},isIterable:function q(me,Ee){return null!=me&&(!0===Ee?"function"==typeof me[b]:!1===Ee?"function"==typeof me[k]:"function"==typeof me[b]||"function"==typeof me[k])},isReadableNodeStream:j,isReadableStream:ce,isReadableEnded:function O(me){if(!j(me))return null;if(!0===me.readableEnded)return!0;const Ee=me._readableState;return!(!Ee||Ee.errored)&&("boolean"!=typeof Ee?.ended?null:Ee.ended)},isReadableFinished:ue,isReadableErrored:function Oe(me){var Ee,Ke;return $(me)?me.readableErrored?me.readableErrored:null!==(Ee=null===(Ke=me._readableState)||void 0===Ke?void 0:Ke.errored)&&void 0!==Ee?Ee:null:null},isNodeStream:$,isWebStream:function ne(me){return ce(me)||K(me)||ie(me)},isWritable:Ce,isWritableNodeStream:oe,isWritableStream:K,isWritableEnded:x,isWritableFinished:function B(me,Ee){if(!oe(me))return null;if(!0===me.writableFinished)return!0;const Ke=me._writableState;return(null==Ke||!Ke.errored)&&("boolean"!=typeof Ke?.finished?null:!!(Ke.finished||!1===Ee&&!0===Ke.ended&&0===Ke.length))},isWritableErrored:function ve(me){var Ee,Ke;return $(me)?me.writableErrored?me.writableErrored:null!==(Ee=null===(Ke=me._writableState)||void 0===Ke?void 0:Ke.errored)&&void 0!==Ee?Ee:null:null},isServerRequest:function we(me){var Ee;return"boolean"==typeof me._consuming&&"boolean"==typeof me._dumped&&void 0===(null===(Ee=me.req)||void 0===Ee?void 0:Ee.upgradeOrConnect)},isServerResponse:qe,willEmitClose:function Ne(me){if(!$(me))return null;const at=me._writableState||me._readableState;return!at&&qe(me)||!!(at&&at.autoDestroy&&at.emitClose&&!1===at.closed)},isTransformStream:ie}},9764:(te,J,g)=>{const S=g(42),{ArrayPrototypeSlice:b,Error:k,FunctionPrototypeSymbolHasInstance:C,ObjectDefineProperty:N,ObjectDefineProperties:_,ObjectSetPrototypeOf:y,StringPrototypeToLowerCase:I,Symbol:L,SymbolHasInstance:P}=g(6305);te.exports=qe,qe.WritableState=Me;const{EventEmitter:j}=g(2016),oe=g(900).Stream,{Buffer:M}=g(1657),$=g(5601),{addAbortSignal:ce}=g(9987),{getHighWaterMark:K,getDefaultHighWaterMark:ie}=g(8782),{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:q,ERR_MULTIPLE_CALLBACK:U,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:ue,ERR_STREAM_WRITE_AFTER_END:W,ERR_UNKNOWN_ENCODING:Ce}=g(4370).codes,{errorOrDestroy:le}=$;function ve(){}y(qe.prototype,oe.prototype),y(qe,oe);const Oe=L("kOnFinished");function Me(Q,X,A){"boolean"!=typeof A&&(A=X instanceof g(5931)),this.objectMode=!(!Q||!Q.objectMode),A&&(this.objectMode=this.objectMode||!(!Q||!Q.writableObjectMode)),this.highWaterMark=Q?K(this,Q,"writableHighWaterMark",A):ie(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Q&&!1===Q.decodeStrings),this.defaultEncoding=Q&&Q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=me.bind(void 0,X),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Je(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Q||!1!==Q.emitClose,this.autoDestroy=!Q||!1!==Q.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function Je(Q){Q.buffered=[],Q.bufferedIndex=0,Q.allBuffers=!0,Q.allNoop=!0}function qe(Q){const X=this instanceof g(5931);if(!X&&!C(qe,this))return new qe(Q);this._writableState=new Me(Q,this,X),Q&&("function"==typeof Q.write&&(this._write=Q.write),"function"==typeof Q.writev&&(this._writev=Q.writev),"function"==typeof Q.destroy&&(this._destroy=Q.destroy),"function"==typeof Q.final&&(this._final=Q.final),"function"==typeof Q.construct&&(this._construct=Q.construct),Q.signal&&ce(Q.signal,this)),oe.call(this,Q),$.construct(this,()=>{const A=this._writableState;A.writing||Ye(this,A),se(this,A)})}function we(Q,X,A,F){const de=Q._writableState;if("function"==typeof A)F=A,A=de.defaultEncoding;else{if(A){if("buffer"!==A&&!M.isEncoding(A))throw new Ce(A)}else A=de.defaultEncoding;"function"!=typeof F&&(F=ve)}if(null===X)throw new ue;if(!de.objectMode)if("string"==typeof X)!1!==de.decodeStrings&&(X=M.from(X,A),A="buffer");else if(X instanceof M)A="buffer";else{if(!oe._isUint8Array(X))throw new ne("chunk",["string","Buffer","Uint8Array"],X);X=oe._uint8ArrayToBuffer(X),A="buffer"}let pe;return de.ending?pe=new W:de.destroyed&&(pe=new B("write")),pe?(S.nextTick(F,pe),le(Q,pe,!0),pe):(de.pendingcb++,function Ne(Q,X,A,F,de){const pe=X.objectMode?1:A.length;X.length+=pe;const ze=X.length<X.highWaterMark;return ze||(X.needDrain=!0),X.writing||X.corked||X.errored||!X.constructed?(X.buffered.push({chunk:A,encoding:F,callback:de}),X.allBuffers&&"buffer"!==F&&(X.allBuffers=!1),X.allNoop&&de!==ve&&(X.allNoop=!1)):(X.writelen=pe,X.writecb=de,X.writing=!0,X.sync=!0,Q._write(A,F,X.onwrite),X.sync=!1),ze&&!X.errored&&!X.destroyed}(Q,de,X,A,F))}function ke(Q,X,A,F,de,pe,ze){X.writelen=F,X.writecb=ze,X.writing=!0,X.sync=!0,X.destroyed?X.onwrite(new B("write")):A?Q._writev(de,X.onwrite):Q._write(de,pe,X.onwrite),X.sync=!1}function Ve(Q,X,A,F){--X.pendingcb,F(A),at(X),le(Q,A)}function me(Q,X){const A=Q._writableState,F=A.sync,de=A.writecb;"function"==typeof de?(A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0,X?(A.errored||(A.errored=X),Q._readableState&&!Q._readableState.errored&&(Q._readableState.errored=X),F?S.nextTick(Ve,Q,A,X,de):Ve(Q,A,X,de)):(A.buffered.length>A.bufferedIndex&&Ye(Q,A),F?null!==A.afterWriteTickInfo&&A.afterWriteTickInfo.cb===de?A.afterWriteTickInfo.count++:(A.afterWriteTickInfo={count:1,cb:de,stream:Q,state:A},S.nextTick(Ee,A.afterWriteTickInfo)):Ke(Q,A,1,de))):le(Q,new U)}function Ee({stream:Q,state:X,count:A,cb:F}){return X.afterWriteTickInfo=null,Ke(Q,X,A,F)}function Ke(Q,X,A,F){for(!X.ending&&!Q.destroyed&&0===X.length&&X.needDrain&&(X.needDrain=!1,Q.emit("drain"));A-- >0;)X.pendingcb--,F();X.destroyed&&at(X),se(Q,X)}function at(Q){if(Q.writing)return;for(let de=Q.bufferedIndex;de<Q.buffered.length;++de){var X;const{chunk:pe,callback:ze}=Q.buffered[de];Q.length-=Q.objectMode?1:pe.length,ze(null!==(X=Q.errored)&&void 0!==X?X:new B("write"))}const A=Q[Oe].splice(0);for(let de=0;de<A.length;de++){var F;A[de](null!==(F=Q.errored)&&void 0!==F?F:new B("end"))}Je(Q)}function Ye(Q,X){if(X.corked||X.bufferProcessing||X.destroyed||!X.constructed)return;const{buffered:A,bufferedIndex:F,objectMode:de}=X,pe=A.length-F;if(!pe)return;let ze=F;if(X.bufferProcessing=!0,pe>1&&Q._writev){X.pendingcb-=pe-1;const Ge=X.allNoop?ve:Pt=>{for(let yt=ze;yt<A.length;++yt)A[yt].callback(Pt)},gt=X.allNoop&&0===ze?A:b(A,ze);gt.allBuffers=X.allBuffers,ke(Q,X,!0,X.length,gt,"",Ge),Je(X)}else{do{const{chunk:Ge,encoding:gt,callback:Pt}=A[ze];A[ze++]=null,ke(Q,X,!1,de?1:Ge.length,Ge,gt,Pt)}while(ze<A.length&&!X.writing);ze===A.length?Je(X):ze>256?(A.splice(0,ze),X.bufferedIndex=0):X.bufferedIndex=ze}X.bufferProcessing=!1}function _e(Q){return Q.ending&&!Q.destroyed&&Q.constructed&&0===Q.length&&!Q.errored&&0===Q.buffered.length&&!Q.finished&&!Q.writing&&!Q.errorEmitted&&!Q.closeEmitted}function se(Q,X,A){_e(X)&&(function R(Q,X){!X.prefinished&&!X.finalCalled&&("function"!=typeof Q._final||X.destroyed?(X.prefinished=!0,Q.emit("prefinish")):(X.finalCalled=!0,function G(Q,X){let A=!1;function F(de){if(A)le(Q,de??U());else if(A=!0,X.pendingcb--,de){const pe=X[Oe].splice(0);for(let ze=0;ze<pe.length;ze++)pe[ze](de);le(Q,de,X.sync)}else _e(X)&&(X.prefinished=!0,Q.emit("prefinish"),X.pendingcb++,S.nextTick(V,Q,X))}X.sync=!0,X.pendingcb++;try{Q._final(F)}catch(de){F(de)}X.sync=!1}(Q,X)))}(Q,X),0===X.pendingcb&&(A?(X.pendingcb++,S.nextTick((F,de)=>{_e(de)?V(F,de):de.pendingcb--},Q,X)):_e(X)&&(X.pendingcb++,V(Q,X))))}function V(Q,X){X.pendingcb--,X.finished=!0;const A=X[Oe].splice(0);for(let F=0;F<A.length;F++)A[F]();if(Q.emit("finish"),X.autoDestroy){const F=Q._readableState;(!F||F.autoDestroy&&(F.endEmitted||!1===F.readable))&&Q.destroy()}}Me.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},N(Me.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),N(qe,P,{__proto__:null,value:function(Q){return!!C(this,Q)||this===qe&&Q&&Q._writableState instanceof Me}}),qe.prototype.pipe=function(){le(this,new x)},qe.prototype.write=function(Q,X,A){return!0===we(this,Q,X,A)},qe.prototype.cork=function(){this._writableState.corked++},qe.prototype.uncork=function(){const Q=this._writableState;Q.corked&&(Q.corked--,Q.writing||Ye(this,Q))},qe.prototype.setDefaultEncoding=function(X){if("string"==typeof X&&(X=I(X)),!M.isEncoding(X))throw new Ce(X);return this._writableState.defaultEncoding=X,this},qe.prototype._write=function(Q,X,A){if(!this._writev)throw new q("_write()");this._writev([{chunk:Q,encoding:X}],A)},qe.prototype._writev=null,qe.prototype.end=function(Q,X,A){const F=this._writableState;let de;if("function"==typeof Q?(A=Q,Q=null,X=null):"function"==typeof X&&(A=X,X=null),null!=Q){const pe=we(this,Q,X);pe instanceof k&&(de=pe)}return F.corked&&(F.corked=1,this.uncork()),de||(F.errored||F.ending?F.finished?de=new O("end"):F.destroyed&&(de=new B("end")):(F.ending=!0,se(this,F,!0),F.ended=!0)),"function"==typeof A&&(de||F.finished?S.nextTick(A,de):F[Oe].push(A)),this},_(qe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Q){this._writableState&&(this._writableState.destroyed=Q)}},writable:{__proto__:null,get(){const Q=this._writableState;return!(!Q||!1===Q.writable||Q.destroyed||Q.errored||Q.ending||Q.ended)},set(Q){this._writableState&&(this._writableState.writable=!!Q)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Q=this._writableState;return!!Q&&!Q.destroyed&&!Q.ending&&Q.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Fe=$.destroy;let et;function fe(){return void 0===et&&(et={}),et}qe.prototype.destroy=function(Q,X){const A=this._writableState;return!A.destroyed&&(A.bufferedIndex<A.buffered.length||A[Oe].length)&&S.nextTick(at,A),Fe.call(this,Q,X),this},qe.prototype._undestroy=$.undestroy,qe.prototype._destroy=function(Q,X){X(Q)},qe.prototype[j.captureRejectionSymbol]=function(Q){this.destroy(Q)},qe.fromWeb=function(Q,X){return fe().newStreamWritableFromWritableStream(Q,X)},qe.toWeb=function(Q){return fe().newWritableStreamFromStreamWritable(Q)}},2120:(te,J,g)=>{"use strict";const{ArrayIsArray:S,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:k,ArrayPrototypeMap:C,NumberIsInteger:N,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:y,NumberMIN_SAFE_INTEGER:I,NumberParseInt:L,ObjectPrototypeHasOwnProperty:P,RegExpPrototypeExec:j,String:oe,StringPrototypeToUpperCase:M,StringPrototypeTrim:$}=g(6305),{hideStackFrames:ce,codes:{ERR_SOCKET_BAD_PORT:K,ERR_INVALID_ARG_TYPE:ie,ERR_INVALID_ARG_VALUE:ne,ERR_OUT_OF_RANGE:q,ERR_UNKNOWN_SIGNAL:U}}=g(4370),{normalizeEncoding:x}=g(2656),{isAsyncFunction:B,isArrayBufferView:O}=g(2656).types,ue={},le=/^[0-7]+$/,Me=ce((pe,ze,Ge=I,gt=y)=>{if("number"!=typeof pe)throw new ie(ze,"number",pe);if(!N(pe))throw new q(ze,"an integer",pe);if(pe<Ge||pe>gt)throw new q(ze,`>= ${Ge} && <= ${gt}`,pe)}),Je=ce((pe,ze,Ge=-2147483648,gt=2147483647)=>{if("number"!=typeof pe)throw new ie(ze,"number",pe);if(!N(pe))throw new q(ze,"an integer",pe);if(pe<Ge||pe>gt)throw new q(ze,`>= ${Ge} && <= ${gt}`,pe)}),qe=ce((pe,ze,Ge=!1)=>{if("number"!=typeof pe)throw new ie(ze,"number",pe);if(!N(pe))throw new q(ze,"an integer",pe);const gt=Ge?1:0,Pt=4294967295;if(pe<gt||pe>Pt)throw new q(ze,`>= ${gt} && <= ${Pt}`,pe)});function we(pe,ze){if("string"!=typeof pe)throw new ie(ze,"string",pe)}const ke=ce((pe,ze,Ge)=>{if(!b(Ge,pe)){const Pt="must be one of: "+k(C(Ge,yt=>"string"==typeof yt?`'${yt}'`:oe(yt)),", ");throw new ne(ze,pe,Pt)}});function Ve(pe,ze){if("boolean"!=typeof pe)throw new ie(ze,"boolean",pe)}function me(pe,ze,Ge){return null!=pe&&P(pe,ze)?pe[ze]:Ge}const Ee=ce((pe,ze,Ge=null)=>{const gt=me(Ge,"allowArray",!1),Pt=me(Ge,"allowFunction",!1);if(!me(Ge,"nullable",!1)&&null===pe||!gt&&S(pe)||"object"!=typeof pe&&(!Pt||"function"!=typeof pe))throw new ie(ze,"Object",pe)}),Ke=ce((pe,ze)=>{if(null!=pe&&"object"!=typeof pe&&"function"!=typeof pe)throw new ie(ze,"a dictionary",pe)}),at=ce((pe,ze,Ge=0)=>{if(!S(pe))throw new ie(ze,"Array",pe);if(pe.length<Ge)throw new ne(ze,pe,`must be longer than ${Ge}`)}),R=ce((pe,ze="buffer")=>{if(!O(pe))throw new ie(ze,["Buffer","TypedArray","DataView"],pe)}),Fe=ce((pe,ze)=>{if(void 0!==pe&&(null===pe||"object"!=typeof pe||!("aborted"in pe)))throw new ie(ze,"AbortSignal",pe)}),et=ce((pe,ze)=>{if("function"!=typeof pe)throw new ie(ze,"Function",pe)}),fe=ce((pe,ze)=>{if("function"!=typeof pe||B(pe))throw new ie(ze,"Function",pe)}),Q=ce((pe,ze)=>{if(void 0!==pe)throw new ie(ze,"undefined",pe)}),A=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function F(pe,ze){if(typeof pe>"u"||!j(A,pe))throw new ne(ze,pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}te.exports={isInt32:function W(pe){return pe===(0|pe)},isUint32:function Ce(pe){return pe===pe>>>0},parseFileMode:function Oe(pe,ze,Ge){if(typeof pe>"u"&&(pe=Ge),"string"==typeof pe){if(null===j(le,pe))throw new ne(ze,pe,"must be a 32-bit unsigned integer or an octal string");pe=L(pe,8)}return qe(pe,ze),pe},validateArray:at,validateStringArray:function Ye(pe,ze){at(pe,ze);for(let Ge=0;Ge<pe.length;Ge++)we(pe[Ge],`${ze}[${Ge}]`)},validateBooleanArray:function _e(pe,ze){at(pe,ze);for(let Ge=0;Ge<pe.length;Ge++)Ve(pe[Ge],`${ze}[${Ge}]`)},validateBoolean:Ve,validateBuffer:R,validateDictionary:Ke,validateEncoding:function se(pe,ze){const Ge=x(ze),gt=pe.length;if("hex"===Ge&&gt%2!=0)throw new ne("encoding",ze,`is invalid for data of length ${gt}`)},validateFunction:et,validateInt32:Je,validateInteger:Me,validateNumber:function Ne(pe,ze,Ge=void 0,gt){if("number"!=typeof pe)throw new ie(ze,"number",pe);if(null!=Ge&&pe<Ge||null!=gt&&pe>gt||(null!=Ge||null!=gt)&&_(pe))throw new q(ze,`${null!=Ge?`>= ${Ge}`:""}${null!=Ge&&null!=gt?" && ":""}${null!=gt?`<= ${gt}`:""}`,pe)},validateObject:Ee,validateOneOf:ke,validatePlainFunction:fe,validatePort:function V(pe,ze="Port",Ge=!0){if("number"!=typeof pe&&"string"!=typeof pe||"string"==typeof pe&&0===$(pe).length||+pe!=+pe>>>0||pe>65535||0===pe&&!Ge)throw new K(ze,pe,Ge);return 0|pe},validateSignalName:function G(pe,ze="signal"){if(we(pe,ze),void 0===ue[pe])throw void 0!==ue[M(pe)]?new U(pe+" (signals must use all capital letters)"):new U(pe)},validateString:we,validateUint32:qe,validateUndefined:Q,validateUnion:function X(pe,ze,Ge){if(!b(Ge,pe))throw new ie(ze,`('${k(Ge,"|")}')`,pe)},validateAbortSignal:Fe,validateLinkHeaderValue:function de(pe){if("string"==typeof pe)return F(pe,"hints"),pe;if(S(pe)){const ze=pe.length;let Ge="";if(0===ze)return Ge;for(let gt=0;gt<ze;gt++){const Pt=pe[gt];F(Pt,"hints"),Ge+=Pt,gt!==ze-1&&(Ge+=", ")}return Ge}throw new ne("hints",pe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(te,J,g)=>{"use strict";const S=g(8110),b=g(16),k=S.Readable.destroy;te.exports=S.Readable,te.exports._uint8ArrayToBuffer=S._uint8ArrayToBuffer,te.exports._isUint8Array=S._isUint8Array,te.exports.isDisturbed=S.isDisturbed,te.exports.isErrored=S.isErrored,te.exports.isReadable=S.isReadable,te.exports.Readable=S.Readable,te.exports.Writable=S.Writable,te.exports.Duplex=S.Duplex,te.exports.Transform=S.Transform,te.exports.PassThrough=S.PassThrough,te.exports.addAbortSignal=S.addAbortSignal,te.exports.finished=S.finished,te.exports.destroy=S.destroy,te.exports.destroy=k,te.exports.pipeline=S.pipeline,te.exports.compose=S.compose,Object.defineProperty(S,"promises",{configurable:!0,enumerable:!0,get:()=>b}),te.exports.Stream=S.Stream,te.exports.default=te.exports},4370:(te,J,g)=>{"use strict";const{format:S,inspect:b,AggregateError:k}=g(2656),C=globalThis.AggregateError||k,N=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],y=/^([A-Z][a-z0-9]*)+$/,L={};function P(ie,ne){if(!ie)throw new L.ERR_INTERNAL_ASSERTION(ne)}function j(ie){let ne="",q=ie.length;const U="-"===ie[0]?1:0;for(;q>=U+4;q-=3)ne=`_${ie.slice(q-3,q)}${ne}`;return`${ie.slice(0,q)}${ne}`}function M(ie,ne,q){q||(q=Error);class U extends q{constructor(...B){super(function oe(ie,ne,q){if("function"==typeof ne)return P(ne.length<=q.length,`Code: ${ie}; The provided arguments length (${q.length}) does not match the required ones (${ne.length}).`),ne(...q);const U=(ne.match(/%[dfijoOs]/g)||[]).length;return P(U===q.length,`Code: ${ie}; The provided arguments length (${q.length}) does not match the required ones (${U}).`),0===q.length?ne:S(ne,...q)}(ie,ne,B))}toString(){return`${this.name} [${ie}]: ${this.message}`}}Object.defineProperties(U.prototype,{name:{value:q.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${ie}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),U.prototype.code=ie,U.prototype[N]=!0,L[ie]=U}function $(ie){return Object.defineProperty(ie,"name",{value:"__node_internal_"+ie.name}),ie}class K extends Error{constructor(ne="The operation was aborted",q=void 0){if(void 0!==q&&"object"!=typeof q)throw new L.ERR_INVALID_ARG_TYPE("options","Object",q);super(ne,q),this.code="ABORT_ERR",this.name="AbortError"}}M("ERR_ASSERTION","%s",Error),M("ERR_INVALID_ARG_TYPE",(ie,ne,q)=>{P("string"==typeof ie,"'name' must be a string"),Array.isArray(ne)||(ne=[ne]);let U="The ";ie.endsWith(" argument")?U+=`${ie} `:U+=`"${ie}" ${ie.includes(".")?"property":"argument"} `,U+="must be ";const x=[],B=[],O=[];for(const W of ne)P("string"==typeof W,"All expected entries have to be of type string"),_.includes(W)?x.push(W.toLowerCase()):y.test(W)?B.push(W):(P("object"!==W,'The value "object" should be written as "Object"'),O.push(W));if(B.length>0){const W=x.indexOf("object");-1!==W&&(x.splice(x,W,1),B.push("Object"))}if(x.length>0){switch(x.length){case 1:U+=`of type ${x[0]}`;break;case 2:U+=`one of type ${x[0]} or ${x[1]}`;break;default:{const W=x.pop();U+=`one of type ${x.join(", ")}, or ${W}`}}(B.length>0||O.length>0)&&(U+=" or ")}if(B.length>0){switch(B.length){case 1:U+=`an instance of ${B[0]}`;break;case 2:U+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const W=B.pop();U+=`an instance of ${B.join(", ")}, or ${W}`}}O.length>0&&(U+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(U+="an "),U+=`${O[0]}`;break;case 2:U+=`one of ${O[0]} or ${O[1]}`;break;default:{const W=O.pop();U+=`one of ${O.join(", ")}, or ${W}`}}if(null==q)U+=`. Received ${q}`;else if("function"==typeof q&&q.name)U+=`. Received function ${q.name}`;else if("object"==typeof q){var ue;null!==(ue=q.constructor)&&void 0!==ue&&ue.name?U+=`. Received an instance of ${q.constructor.name}`:U+=`. Received ${b(q,{depth:-1})}`}else{let W=b(q,{colors:!1});W.length>25&&(W=`${W.slice(0,25)}...`),U+=`. Received type ${typeof q} (${W})`}return U},TypeError),M("ERR_INVALID_ARG_VALUE",(ie,ne,q="is invalid")=>{let U=b(ne);return U.length>128&&(U=U.slice(0,128)+"..."),`The ${ie.includes(".")?"property":"argument"} '${ie}' ${q}. Received ${U}`},TypeError),M("ERR_INVALID_RETURN_VALUE",(ie,ne,q)=>{var U;return`Expected ${ie} to be returned from the "${ne}" function but got ${null!=q&&null!==(U=q.constructor)&&void 0!==U&&U.name?`instance of ${q.constructor.name}`:"type "+typeof q}.`},TypeError),M("ERR_MISSING_ARGS",(...ie)=>{let ne;P(ie.length>0,"At least one arg needs to be specified");const q=ie.length;switch(ie=(Array.isArray(ie)?ie:[ie]).map(U=>`"${U}"`).join(" or "),q){case 1:ne+=`The ${ie[0]} argument`;break;case 2:ne+=`The ${ie[0]} and ${ie[1]} arguments`;break;default:{const U=ie.pop();ne+=`The ${ie.join(", ")}, and ${U} arguments`}}return`${ne} must be specified`},TypeError),M("ERR_OUT_OF_RANGE",(ie,ne,q)=>{let U;return P(ne,'Missing "range" argument'),Number.isInteger(q)&&Math.abs(q)>2**32?U=j(String(q)):"bigint"==typeof q?(U=String(q),(q>2n**32n||q<-(2n**32n))&&(U=j(U)),U+="n"):U=b(q),`The value of "${ie}" is out of range. It must be ${ne}. Received ${U}`},RangeError),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),M("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),M("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),M("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),M("ERR_STREAM_WRITE_AFTER_END","write after end",Error),M("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),te.exports={AbortError:K,aggregateTwoErrors:$(function ce(ie,ne){if(ie&&ne&&ie!==ne){if(Array.isArray(ne.errors))return ne.errors.push(ie),ne;const q=new C([ne,ie],ne.message);return q.code=ne.code,q}return ie||ne}),hideStackFrames:$,codes:L}},6305:te=>{"use strict";te.exports={ArrayIsArray:J=>Array.isArray(J),ArrayPrototypeIncludes:(J,g)=>J.includes(g),ArrayPrototypeIndexOf:(J,g)=>J.indexOf(g),ArrayPrototypeJoin:(J,g)=>J.join(g),ArrayPrototypeMap:(J,g)=>J.map(g),ArrayPrototypePop:(J,g)=>J.pop(g),ArrayPrototypePush:(J,g)=>J.push(g),ArrayPrototypeSlice:(J,g,S)=>J.slice(g,S),Error,FunctionPrototypeCall:(J,g,...S)=>J.call(g,...S),FunctionPrototypeSymbolHasInstance:(J,g)=>Function.prototype[Symbol.hasInstance].call(J,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(J,g)=>Object.defineProperties(J,g),ObjectDefineProperty:(J,g,S)=>Object.defineProperty(J,g,S),ObjectGetOwnPropertyDescriptor:(J,g)=>Object.getOwnPropertyDescriptor(J,g),ObjectKeys:J=>Object.keys(J),ObjectSetPrototypeOf:(J,g)=>Object.setPrototypeOf(J,g),Promise,PromisePrototypeCatch:(J,g)=>J.catch(g),PromisePrototypeThen:(J,g,S)=>J.then(g,S),PromiseReject:J=>Promise.reject(J),ReflectApply:Reflect.apply,RegExpPrototypeTest:(J,g)=>J.test(g),SafeSet:Set,String,StringPrototypeSlice:(J,g,S)=>J.slice(g,S),StringPrototypeToLowerCase:J=>J.toLowerCase(),StringPrototypeToUpperCase:J=>J.toUpperCase(),StringPrototypeTrim:J=>J.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(J,g,S)=>J.set(g,S),Uint8Array}},2656:(te,J,g)=>{"use strict";var S=g(7156).default;const b=g(1657),k=Object.getPrototypeOf(S(function*(){})).constructor,C=globalThis.Blob||b.Blob,N=typeof C<"u"?function(I){return I instanceof C}:function(I){return!1};class _ extends Error{constructor(I){if(!Array.isArray(I))throw new TypeError("Expected input to be an Array, got "+typeof I);let L="";for(let P=0;P<I.length;P++)L+=`    ${I[P].stack}\n`;super(L),this.name="AggregateError",this.errors=I}}te.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(y){let I=!1;return function(...L){I||(I=!0,y.apply(this,L))}},createDeferredPromise:function(){let y,I;return{promise:new Promise((P,j)=>{y=P,I=j}),resolve:y,reject:I}},promisify:y=>new Promise((I,L)=>{y((P,...j)=>P?L(P):I(...j))}),debuglog:()=>function(){},format:(y,...I)=>y.replace(/%([sdifj])/g,function(...[L,P]){const j=I.shift();return"f"===P?j.toFixed(6):"j"===P?JSON.stringify(j):"s"===P&&"object"==typeof j?`${j.constructor!==Object?j.constructor.name:""} {}`.trim():j.toString()}),inspect(y){switch(typeof y){case"string":if(y.includes("'")){if(!y.includes('"'))return`"${y}"`;if(!y.includes("`")&&!y.includes("${"))return`\`${y}\``}return`'${y}'`;case"number":return isNaN(y)?"NaN":Object.is(y,-0)?String(y):y;case"bigint":return`${String(y)}n`;case"boolean":case"undefined":return String(y);case"object":return"{}"}},types:{isAsyncFunction:y=>y instanceof k,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:N},te.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(te,J,g)=>{const{Buffer:S}=g(1657),{ObjectDefineProperty:b,ObjectKeys:k,ReflectApply:C}=g(6305),{promisify:{custom:N}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:y}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:I}}=g(4370),L=g(7721),{pipeline:P}=g(4514),{destroyer:j}=g(5601),oe=g(4618),$=g(16),ce=g(5428),K=te.exports=g(900).Stream;K.isDisturbed=ce.isDisturbed,K.isErrored=ce.isErrored,K.isReadable=ce.isReadable,K.Readable=g(8383);for(const q of k(_)){let x=function(...B){if(new.target)throw I();return K.Readable.from(C(U,this,B))};const U=_[q];b(x,"name",{__proto__:null,value:U.name}),b(x,"length",{__proto__:null,value:U.length}),b(K.Readable.prototype,q,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}for(const q of k(y)){let x=function(...O){if(new.target)throw I();return C(U,this,O)};const U=y[q];b(x,"name",{__proto__:null,value:U.name}),b(x,"length",{__proto__:null,value:U.length}),b(K.Readable.prototype,q,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}K.Writable=g(9764),K.Duplex=g(5931),K.Transform=g(123),K.PassThrough=g(6973),K.pipeline=P;const{addAbortSignal:ie}=g(9987);K.addAbortSignal=ie,K.finished=oe,K.destroy=j,K.compose=L,b(K,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>$}),b(P,N,{__proto__:null,enumerable:!0,get:()=>$.pipeline}),b(oe,N,{__proto__:null,enumerable:!0,get:()=>$.finished}),K.Stream=K,K._isUint8Array=function(U){return U instanceof Uint8Array},K._uint8ArrayToBuffer=function(U){return S.from(U.buffer,U.byteOffset,U.byteLength)}},16:(te,J,g)=>{"use strict";const{ArrayPrototypePop:S,Promise:b}=g(6305),{isIterable:k,isNodeStream:C,isWebStream:N}=g(5428),{pipelineImpl:_}=g(4514),{finished:y}=g(4618);g(8110),te.exports={finished:y,pipeline:function I(...L){return new b((P,j)=>{let oe,M;const $=L[L.length-1];if($&&"object"==typeof $&&!C($)&&!k($)&&!N($)){const ce=S(L);oe=ce.signal,M=ce.end}_(L,(ce,K)=>{ce?j(ce):P(K)},{signal:oe,end:M})})}}},1657:(te,J,g)=>{"use strict";const S=g(9919),b=g(2601),k="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;J.Buffer=y,J.SlowBuffer=function ne(Te){return+Te!=Te&&(Te=0),y.alloc(+Te)},J.INSPECT_MAX_BYTES=50;const C=2147483647;function _(Te){if(Te>C)throw new RangeError('The value "'+Te+'" is invalid for option "size"');const Z=new Uint8Array(Te);return Object.setPrototypeOf(Z,y.prototype),Z}function y(Te,Z,T){if("number"==typeof Te){if("string"==typeof Z)throw new TypeError('The "string" argument must be of type string. Received type number');return j(Te)}return I(Te,Z,T)}function I(Te,Z,T){if("string"==typeof Te)return function oe(Te,Z){if(("string"!=typeof Z||""===Z)&&(Z="utf8"),!y.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);const T=0|q(Te,Z);let ae=_(T);const We=ae.write(Te,Z);return We!==T&&(ae=ae.slice(0,We)),ae}(Te,Z);if(ArrayBuffer.isView(Te))return function $(Te){if(gt(Te,Uint8Array)){const Z=new Uint8Array(Te);return ce(Z.buffer,Z.byteOffset,Z.byteLength)}return M(Te)}(Te);if(null==Te)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te);if(gt(Te,ArrayBuffer)||Te&&gt(Te.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gt(Te,SharedArrayBuffer)||Te&&gt(Te.buffer,SharedArrayBuffer)))return ce(Te,Z,T);if("number"==typeof Te)throw new TypeError('The "value" argument must not be of type number. Received type number');const ae=Te.valueOf&&Te.valueOf();if(null!=ae&&ae!==Te)return y.from(ae,Z,T);const We=function K(Te){if(y.isBuffer(Te)){const Z=0|ie(Te.length),T=_(Z);return 0===T.length||Te.copy(T,0,0,Z),T}return void 0!==Te.length?"number"!=typeof Te.length||Pt(Te.length)?_(0):M(Te):"Buffer"===Te.type&&Array.isArray(Te.data)?M(Te.data):void 0}(Te);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Te[Symbol.toPrimitive])return y.from(Te[Symbol.toPrimitive]("string"),Z,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te)}function L(Te){if("number"!=typeof Te)throw new TypeError('"size" argument must be of type number');if(Te<0)throw new RangeError('The value "'+Te+'" is invalid for option "size"')}function j(Te){return L(Te),_(Te<0?0:0|ie(Te))}function M(Te){const Z=Te.length<0?0:0|ie(Te.length),T=_(Z);for(let ae=0;ae<Z;ae+=1)T[ae]=255&Te[ae];return T}function ce(Te,Z,T){if(Z<0||Te.byteLength<Z)throw new RangeError('"offset" is outside of buffer bounds');if(Te.byteLength<Z+(T||0))throw new RangeError('"length" is outside of buffer bounds');let ae;return ae=void 0===Z&&void 0===T?new Uint8Array(Te):void 0===T?new Uint8Array(Te,Z):new Uint8Array(Te,Z,T),Object.setPrototypeOf(ae,y.prototype),ae}function ie(Te){if(Te>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return 0|Te}function q(Te,Z){if(y.isBuffer(Te))return Te.length;if(ArrayBuffer.isView(Te)||gt(Te,ArrayBuffer))return Te.byteLength;if("string"!=typeof Te)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Te);const T=Te.length,ae=arguments.length>2&&!0===arguments[2];if(!ae&&0===T)return 0;let We=!1;for(;;)switch(Z){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return F(Te).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*T;case"hex":return T>>>1;case"base64":return ze(Te).length;default:if(We)return ae?-1:F(Te).length;Z=(""+Z).toLowerCase(),We=!0}}function U(Te,Z,T){let ae=!1;if((void 0===Z||Z<0)&&(Z=0),Z>this.length||((void 0===T||T>this.length)&&(T=this.length),T<=0)||(T>>>=0)<=(Z>>>=0))return"";for(Te||(Te="utf8");;)switch(Te){case"hex":return ke(this,Z,T);case"utf8":case"utf-8":return Me(this,Z,T);case"ascii":return we(this,Z,T);case"latin1":case"binary":return Ne(this,Z,T);case"base64":return Oe(this,Z,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,Z,T);default:if(ae)throw new TypeError("Unknown encoding: "+Te);Te=(Te+"").toLowerCase(),ae=!0}}function x(Te,Z,T){const ae=Te[Z];Te[Z]=Te[T],Te[T]=ae}function B(Te,Z,T,ae,We){if(0===Te.length)return-1;if("string"==typeof T?(ae=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),Pt(T=+T)&&(T=We?0:Te.length-1),T<0&&(T=Te.length+T),T>=Te.length){if(We)return-1;T=Te.length-1}else if(T<0){if(!We)return-1;T=0}if("string"==typeof Z&&(Z=y.from(Z,ae)),y.isBuffer(Z))return 0===Z.length?-1:O(Te,Z,T,ae,We);if("number"==typeof Z)return Z&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(Te,Z,T):Uint8Array.prototype.lastIndexOf.call(Te,Z,T):O(Te,[Z],T,ae,We);throw new TypeError("val must be string, number or Buffer")}function O(Te,Z,T,ae,We){let $n,Ze=1,st=Te.length,Wt=Z.length;if(void 0!==ae&&("ucs2"===(ae=String(ae).toLowerCase())||"ucs-2"===ae||"utf16le"===ae||"utf-16le"===ae)){if(Te.length<2||Z.length<2)return-1;Ze=2,st/=2,Wt/=2,T/=2}function an(Sn,Cn){return 1===Ze?Sn[Cn]:Sn.readUInt16BE(Cn*Ze)}if(We){let Sn=-1;for($n=T;$n<st;$n++)if(an(Te,$n)===an(Z,-1===Sn?0:$n-Sn)){if(-1===Sn&&(Sn=$n),$n-Sn+1===Wt)return Sn*Ze}else-1!==Sn&&($n-=$n-Sn),Sn=-1}else for(T+Wt>st&&(T=st-Wt),$n=T;$n>=0;$n--){let Sn=!0;for(let Cn=0;Cn<Wt;Cn++)if(an(Te,$n+Cn)!==an(Z,Cn)){Sn=!1;break}if(Sn)return $n}return-1}function ue(Te,Z,T,ae){T=Number(T)||0;const We=Te.length-T;ae?(ae=Number(ae))>We&&(ae=We):ae=We;const Ze=Z.length;let st;for(ae>Ze/2&&(ae=Ze/2),st=0;st<ae;++st){const Wt=parseInt(Z.substr(2*st,2),16);if(Pt(Wt))return st;Te[T+st]=Wt}return st}function W(Te,Z,T,ae){return Ge(F(Z,Te.length-T),Te,T,ae)}function Ce(Te,Z,T,ae){return Ge(function de(Te){const Z=[];for(let T=0;T<Te.length;++T)Z.push(255&Te.charCodeAt(T));return Z}(Z),Te,T,ae)}function le(Te,Z,T,ae){return Ge(ze(Z),Te,T,ae)}function ve(Te,Z,T,ae){return Ge(function pe(Te,Z){let T,ae,We;const Ze=[];for(let st=0;st<Te.length&&!((Z-=2)<0);++st)T=Te.charCodeAt(st),ae=T>>8,We=T%256,Ze.push(We),Ze.push(ae);return Ze}(Z,Te.length-T),Te,T,ae)}function Oe(Te,Z,T){return S.fromByteArray(0===Z&&T===Te.length?Te:Te.slice(Z,T))}function Me(Te,Z,T){T=Math.min(Te.length,T);const ae=[];let We=Z;for(;We<T;){const Ze=Te[We];let st=null,Wt=Ze>239?4:Ze>223?3:Ze>191?2:1;if(We+Wt<=T){let an,$n,Sn,Cn;switch(Wt){case 1:Ze<128&&(st=Ze);break;case 2:an=Te[We+1],128==(192&an)&&(Cn=(31&Ze)<<6|63&an,Cn>127&&(st=Cn));break;case 3:an=Te[We+1],$n=Te[We+2],128==(192&an)&&128==(192&$n)&&(Cn=(15&Ze)<<12|(63&an)<<6|63&$n,Cn>2047&&(Cn<55296||Cn>57343)&&(st=Cn));break;case 4:an=Te[We+1],$n=Te[We+2],Sn=Te[We+3],128==(192&an)&&128==(192&$n)&&128==(192&Sn)&&(Cn=(15&Ze)<<18|(63&an)<<12|(63&$n)<<6|63&Sn,Cn>65535&&Cn<1114112&&(st=Cn))}}null===st?(st=65533,Wt=1):st>65535&&(st-=65536,ae.push(st>>>10&1023|55296),st=56320|1023&st),ae.push(st),We+=Wt}return function qe(Te){const Z=Te.length;if(Z<=Je)return String.fromCharCode.apply(String,Te);let T="",ae=0;for(;ae<Z;)T+=String.fromCharCode.apply(String,Te.slice(ae,ae+=Je));return T}(ae)}J.kMaxLength=C,!(y.TYPED_ARRAY_SUPPORT=function N(){try{const Te=new Uint8Array(1),Z={foo:function(){return 42}};return Object.setPrototypeOf(Z,Uint8Array.prototype),Object.setPrototypeOf(Te,Z),42===Te.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(Te,Z,T){return I(Te,Z,T)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(Te,Z,T){return function P(Te,Z,T){return L(Te),Te<=0?_(Te):void 0!==Z?"string"==typeof T?_(Te).fill(Z,T):_(Te).fill(Z):_(Te)}(Te,Z,T)},y.allocUnsafe=function(Te){return j(Te)},y.allocUnsafeSlow=function(Te){return j(Te)},y.isBuffer=function(Z){return null!=Z&&!0===Z._isBuffer&&Z!==y.prototype},y.compare=function(Z,T){if(gt(Z,Uint8Array)&&(Z=y.from(Z,Z.offset,Z.byteLength)),gt(T,Uint8Array)&&(T=y.from(T,T.offset,T.byteLength)),!y.isBuffer(Z)||!y.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Z===T)return 0;let ae=Z.length,We=T.length;for(let Ze=0,st=Math.min(ae,We);Ze<st;++Ze)if(Z[Ze]!==T[Ze]){ae=Z[Ze],We=T[Ze];break}return ae<We?-1:We<ae?1:0},y.isEncoding=function(Z){switch(String(Z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(Z,T){if(!Array.isArray(Z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Z.length)return y.alloc(0);let ae;if(void 0===T)for(T=0,ae=0;ae<Z.length;++ae)T+=Z[ae].length;const We=y.allocUnsafe(T);let Ze=0;for(ae=0;ae<Z.length;++ae){let st=Z[ae];if(gt(st,Uint8Array))Ze+st.length>We.length?(y.isBuffer(st)||(st=y.from(st)),st.copy(We,Ze)):Uint8Array.prototype.set.call(We,st,Ze);else{if(!y.isBuffer(st))throw new TypeError('"list" argument must be an Array of Buffers');st.copy(We,Ze)}Ze+=st.length}return We},y.byteLength=q,y.prototype._isBuffer=!0,y.prototype.swap16=function(){const Z=this.length;if(Z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<Z;T+=2)x(this,T,T+1);return this},y.prototype.swap32=function(){const Z=this.length;if(Z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<Z;T+=4)x(this,T,T+3),x(this,T+1,T+2);return this},y.prototype.swap64=function(){const Z=this.length;if(Z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<Z;T+=8)x(this,T,T+7),x(this,T+1,T+6),x(this,T+2,T+5),x(this,T+3,T+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){const Z=this.length;return 0===Z?"":0===arguments.length?Me(this,0,Z):U.apply(this,arguments)},y.prototype.equals=function(Z){if(!y.isBuffer(Z))throw new TypeError("Argument must be a Buffer");return this===Z||0===y.compare(this,Z)},y.prototype.inspect=function(){let Z="";const T=J.INSPECT_MAX_BYTES;return Z=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(Z+=" ... "),"<Buffer "+Z+">"},k&&(y.prototype[k]=y.prototype.inspect),y.prototype.compare=function(Z,T,ae,We,Ze){if(gt(Z,Uint8Array)&&(Z=y.from(Z,Z.offset,Z.byteLength)),!y.isBuffer(Z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Z);if(void 0===T&&(T=0),void 0===ae&&(ae=Z?Z.length:0),void 0===We&&(We=0),void 0===Ze&&(Ze=this.length),T<0||ae>Z.length||We<0||Ze>this.length)throw new RangeError("out of range index");if(We>=Ze&&T>=ae)return 0;if(We>=Ze)return-1;if(T>=ae)return 1;if(this===Z)return 0;let st=(Ze>>>=0)-(We>>>=0),Wt=(ae>>>=0)-(T>>>=0);const an=Math.min(st,Wt),$n=this.slice(We,Ze),Sn=Z.slice(T,ae);for(let Cn=0;Cn<an;++Cn)if($n[Cn]!==Sn[Cn]){st=$n[Cn],Wt=Sn[Cn];break}return st<Wt?-1:Wt<st?1:0},y.prototype.includes=function(Z,T,ae){return-1!==this.indexOf(Z,T,ae)},y.prototype.indexOf=function(Z,T,ae){return B(this,Z,T,ae,!0)},y.prototype.lastIndexOf=function(Z,T,ae){return B(this,Z,T,ae,!1)},y.prototype.write=function(Z,T,ae,We){if(void 0===T)We="utf8",ae=this.length,T=0;else if(void 0===ae&&"string"==typeof T)We=T,ae=this.length,T=0;else{if(!isFinite(T))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");T>>>=0,isFinite(ae)?(ae>>>=0,void 0===We&&(We="utf8")):(We=ae,ae=void 0)}const Ze=this.length-T;if((void 0===ae||ae>Ze)&&(ae=Ze),Z.length>0&&(ae<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let st=!1;for(;;)switch(We){case"hex":return ue(this,Z,T,ae);case"utf8":case"utf-8":return W(this,Z,T,ae);case"ascii":case"latin1":case"binary":return Ce(this,Z,T,ae);case"base64":return le(this,Z,T,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,Z,T,ae);default:if(st)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),st=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Je=4096;function we(Te,Z,T){let ae="";T=Math.min(Te.length,T);for(let We=Z;We<T;++We)ae+=String.fromCharCode(127&Te[We]);return ae}function Ne(Te,Z,T){let ae="";T=Math.min(Te.length,T);for(let We=Z;We<T;++We)ae+=String.fromCharCode(Te[We]);return ae}function ke(Te,Z,T){const ae=Te.length;(!Z||Z<0)&&(Z=0),(!T||T<0||T>ae)&&(T=ae);let We="";for(let Ze=Z;Ze<T;++Ze)We+=yt[Te[Ze]];return We}function Ve(Te,Z,T){const ae=Te.slice(Z,T);let We="";for(let Ze=0;Ze<ae.length-1;Ze+=2)We+=String.fromCharCode(ae[Ze]+256*ae[Ze+1]);return We}function me(Te,Z,T){if(Te%1!=0||Te<0)throw new RangeError("offset is not uint");if(Te+Z>T)throw new RangeError("Trying to access beyond buffer length")}function Ee(Te,Z,T,ae,We,Ze){if(!y.isBuffer(Te))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z>We||Z<Ze)throw new RangeError('"value" argument is out of bounds');if(T+ae>Te.length)throw new RangeError("Index out of range")}function Ke(Te,Z,T,ae,We){et(Z,ae,We,Te,T,7);let Ze=Number(Z&BigInt(4294967295));Te[T++]=Ze,Ze>>=8,Te[T++]=Ze,Ze>>=8,Te[T++]=Ze,Ze>>=8,Te[T++]=Ze;let st=Number(Z>>BigInt(32)&BigInt(4294967295));return Te[T++]=st,st>>=8,Te[T++]=st,st>>=8,Te[T++]=st,st>>=8,Te[T++]=st,T}function at(Te,Z,T,ae,We){et(Z,ae,We,Te,T,7);let Ze=Number(Z&BigInt(4294967295));Te[T+7]=Ze,Ze>>=8,Te[T+6]=Ze,Ze>>=8,Te[T+5]=Ze,Ze>>=8,Te[T+4]=Ze;let st=Number(Z>>BigInt(32)&BigInt(4294967295));return Te[T+3]=st,st>>=8,Te[T+2]=st,st>>=8,Te[T+1]=st,st>>=8,Te[T]=st,T+8}function Ye(Te,Z,T,ae,We,Ze){if(T+ae>Te.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function _e(Te,Z,T,ae,We){return Z=+Z,T>>>=0,We||Ye(Te,0,T,4),b.write(Te,Z,T,ae,23,4),T+4}function G(Te,Z,T,ae,We){return Z=+Z,T>>>=0,We||Ye(Te,0,T,8),b.write(Te,Z,T,ae,52,8),T+8}y.prototype.slice=function(Z,T){const ae=this.length;(Z=~~Z)<0?(Z+=ae)<0&&(Z=0):Z>ae&&(Z=ae),(T=void 0===T?ae:~~T)<0?(T+=ae)<0&&(T=0):T>ae&&(T=ae),T<Z&&(T=Z);const We=this.subarray(Z,T);return Object.setPrototypeOf(We,y.prototype),We},y.prototype.readUintLE=y.prototype.readUIntLE=function(Z,T,ae){Z>>>=0,T>>>=0,ae||me(Z,T,this.length);let We=this[Z],Ze=1,st=0;for(;++st<T&&(Ze*=256);)We+=this[Z+st]*Ze;return We},y.prototype.readUintBE=y.prototype.readUIntBE=function(Z,T,ae){Z>>>=0,T>>>=0,ae||me(Z,T,this.length);let We=this[Z+--T],Ze=1;for(;T>0&&(Ze*=256);)We+=this[Z+--T]*Ze;return We},y.prototype.readUint8=y.prototype.readUInt8=function(Z,T){return Z>>>=0,T||me(Z,1,this.length),this[Z]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(Z,T){return Z>>>=0,T||me(Z,2,this.length),this[Z]|this[Z+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(Z,T){return Z>>>=0,T||me(Z,2,this.length),this[Z]<<8|this[Z+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(Z,T){return Z>>>=0,T||me(Z,4,this.length),(this[Z]|this[Z+1]<<8|this[Z+2]<<16)+16777216*this[Z+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(Z,T){return Z>>>=0,T||me(Z,4,this.length),16777216*this[Z]+(this[Z+1]<<16|this[Z+2]<<8|this[Z+3])},y.prototype.readBigUInt64LE=Gt(function(Z){fe(Z>>>=0,"offset");const T=this[Z],ae=this[Z+7];(void 0===T||void 0===ae)&&Q(Z,this.length-8);const We=T+256*this[++Z]+65536*this[++Z]+this[++Z]*2**24,Ze=this[++Z]+256*this[++Z]+65536*this[++Z]+ae*2**24;return BigInt(We)+(BigInt(Ze)<<BigInt(32))}),y.prototype.readBigUInt64BE=Gt(function(Z){fe(Z>>>=0,"offset");const T=this[Z],ae=this[Z+7];(void 0===T||void 0===ae)&&Q(Z,this.length-8);const We=T*2**24+65536*this[++Z]+256*this[++Z]+this[++Z],Ze=this[++Z]*2**24+65536*this[++Z]+256*this[++Z]+ae;return(BigInt(We)<<BigInt(32))+BigInt(Ze)}),y.prototype.readIntLE=function(Z,T,ae){Z>>>=0,T>>>=0,ae||me(Z,T,this.length);let We=this[Z],Ze=1,st=0;for(;++st<T&&(Ze*=256);)We+=this[Z+st]*Ze;return Ze*=128,We>=Ze&&(We-=Math.pow(2,8*T)),We},y.prototype.readIntBE=function(Z,T,ae){Z>>>=0,T>>>=0,ae||me(Z,T,this.length);let We=T,Ze=1,st=this[Z+--We];for(;We>0&&(Ze*=256);)st+=this[Z+--We]*Ze;return Ze*=128,st>=Ze&&(st-=Math.pow(2,8*T)),st},y.prototype.readInt8=function(Z,T){return Z>>>=0,T||me(Z,1,this.length),128&this[Z]?-1*(255-this[Z]+1):this[Z]},y.prototype.readInt16LE=function(Z,T){Z>>>=0,T||me(Z,2,this.length);const ae=this[Z]|this[Z+1]<<8;return 32768&ae?4294901760|ae:ae},y.prototype.readInt16BE=function(Z,T){Z>>>=0,T||me(Z,2,this.length);const ae=this[Z+1]|this[Z]<<8;return 32768&ae?4294901760|ae:ae},y.prototype.readInt32LE=function(Z,T){return Z>>>=0,T||me(Z,4,this.length),this[Z]|this[Z+1]<<8|this[Z+2]<<16|this[Z+3]<<24},y.prototype.readInt32BE=function(Z,T){return Z>>>=0,T||me(Z,4,this.length),this[Z]<<24|this[Z+1]<<16|this[Z+2]<<8|this[Z+3]},y.prototype.readBigInt64LE=Gt(function(Z){fe(Z>>>=0,"offset");const T=this[Z],ae=this[Z+7];return(void 0===T||void 0===ae)&&Q(Z,this.length-8),(BigInt(this[Z+4]+256*this[Z+5]+65536*this[Z+6]+(ae<<24))<<BigInt(32))+BigInt(T+256*this[++Z]+65536*this[++Z]+this[++Z]*2**24)}),y.prototype.readBigInt64BE=Gt(function(Z){fe(Z>>>=0,"offset");const T=this[Z],ae=this[Z+7];(void 0===T||void 0===ae)&&Q(Z,this.length-8);const We=(T<<24)+65536*this[++Z]+256*this[++Z]+this[++Z];return(BigInt(We)<<BigInt(32))+BigInt(this[++Z]*2**24+65536*this[++Z]+256*this[++Z]+ae)}),y.prototype.readFloatLE=function(Z,T){return Z>>>=0,T||me(Z,4,this.length),b.read(this,Z,!0,23,4)},y.prototype.readFloatBE=function(Z,T){return Z>>>=0,T||me(Z,4,this.length),b.read(this,Z,!1,23,4)},y.prototype.readDoubleLE=function(Z,T){return Z>>>=0,T||me(Z,8,this.length),b.read(this,Z,!0,52,8)},y.prototype.readDoubleBE=function(Z,T){return Z>>>=0,T||me(Z,8,this.length),b.read(this,Z,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(Z,T,ae,We){Z=+Z,T>>>=0,ae>>>=0,We||Ee(this,Z,T,ae,Math.pow(2,8*ae)-1,0);let Ze=1,st=0;for(this[T]=255&Z;++st<ae&&(Ze*=256);)this[T+st]=Z/Ze&255;return T+ae},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(Z,T,ae,We){Z=+Z,T>>>=0,ae>>>=0,We||Ee(this,Z,T,ae,Math.pow(2,8*ae)-1,0);let Ze=ae-1,st=1;for(this[T+Ze]=255&Z;--Ze>=0&&(st*=256);)this[T+Ze]=Z/st&255;return T+ae},y.prototype.writeUint8=y.prototype.writeUInt8=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,1,255,0),this[T]=255&Z,T+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,2,65535,0),this[T]=255&Z,this[T+1]=Z>>>8,T+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,2,65535,0),this[T]=Z>>>8,this[T+1]=255&Z,T+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,4,4294967295,0),this[T+3]=Z>>>24,this[T+2]=Z>>>16,this[T+1]=Z>>>8,this[T]=255&Z,T+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,4,4294967295,0),this[T]=Z>>>24,this[T+1]=Z>>>16,this[T+2]=Z>>>8,this[T+3]=255&Z,T+4},y.prototype.writeBigUInt64LE=Gt(function(Z,T=0){return Ke(this,Z,T,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=Gt(function(Z,T=0){return at(this,Z,T,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(Z,T,ae,We){if(Z=+Z,T>>>=0,!We){const an=Math.pow(2,8*ae-1);Ee(this,Z,T,ae,an-1,-an)}let Ze=0,st=1,Wt=0;for(this[T]=255&Z;++Ze<ae&&(st*=256);)Z<0&&0===Wt&&0!==this[T+Ze-1]&&(Wt=1),this[T+Ze]=(Z/st>>0)-Wt&255;return T+ae},y.prototype.writeIntBE=function(Z,T,ae,We){if(Z=+Z,T>>>=0,!We){const an=Math.pow(2,8*ae-1);Ee(this,Z,T,ae,an-1,-an)}let Ze=ae-1,st=1,Wt=0;for(this[T+Ze]=255&Z;--Ze>=0&&(st*=256);)Z<0&&0===Wt&&0!==this[T+Ze+1]&&(Wt=1),this[T+Ze]=(Z/st>>0)-Wt&255;return T+ae},y.prototype.writeInt8=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,1,127,-128),Z<0&&(Z=255+Z+1),this[T]=255&Z,T+1},y.prototype.writeInt16LE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,2,32767,-32768),this[T]=255&Z,this[T+1]=Z>>>8,T+2},y.prototype.writeInt16BE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,2,32767,-32768),this[T]=Z>>>8,this[T+1]=255&Z,T+2},y.prototype.writeInt32LE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,4,2147483647,-2147483648),this[T]=255&Z,this[T+1]=Z>>>8,this[T+2]=Z>>>16,this[T+3]=Z>>>24,T+4},y.prototype.writeInt32BE=function(Z,T,ae){return Z=+Z,T>>>=0,ae||Ee(this,Z,T,4,2147483647,-2147483648),Z<0&&(Z=4294967295+Z+1),this[T]=Z>>>24,this[T+1]=Z>>>16,this[T+2]=Z>>>8,this[T+3]=255&Z,T+4},y.prototype.writeBigInt64LE=Gt(function(Z,T=0){return Ke(this,Z,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=Gt(function(Z,T=0){return at(this,Z,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeFloatLE=function(Z,T,ae){return _e(this,Z,T,!0,ae)},y.prototype.writeFloatBE=function(Z,T,ae){return _e(this,Z,T,!1,ae)},y.prototype.writeDoubleLE=function(Z,T,ae){return G(this,Z,T,!0,ae)},y.prototype.writeDoubleBE=function(Z,T,ae){return G(this,Z,T,!1,ae)},y.prototype.copy=function(Z,T,ae,We){if(!y.isBuffer(Z))throw new TypeError("argument should be a Buffer");if(ae||(ae=0),!We&&0!==We&&(We=this.length),T>=Z.length&&(T=Z.length),T||(T=0),We>0&&We<ae&&(We=ae),We===ae||0===Z.length||0===this.length)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(ae<0||ae>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),Z.length-T<We-ae&&(We=Z.length-T+ae);const Ze=We-ae;return this===Z&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(T,ae,We):Uint8Array.prototype.set.call(Z,this.subarray(ae,We),T),Ze},y.prototype.fill=function(Z,T,ae,We){if("string"==typeof Z){if("string"==typeof T?(We=T,T=0,ae=this.length):"string"==typeof ae&&(We=ae,ae=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!y.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===Z.length){const st=Z.charCodeAt(0);("utf8"===We&&st<128||"latin1"===We)&&(Z=st)}}else"number"==typeof Z?Z&=255:"boolean"==typeof Z&&(Z=Number(Z));if(T<0||this.length<T||this.length<ae)throw new RangeError("Out of range index");if(ae<=T)return this;let Ze;if(T>>>=0,ae=void 0===ae?this.length:ae>>>0,Z||(Z=0),"number"==typeof Z)for(Ze=T;Ze<ae;++Ze)this[Ze]=Z;else{const st=y.isBuffer(Z)?Z:y.from(Z,We),Wt=st.length;if(0===Wt)throw new TypeError('The value "'+Z+'" is invalid for argument "value"');for(Ze=0;Ze<ae-T;++Ze)this[Ze+T]=st[Ze%Wt]}return this};const R={};function se(Te,Z,T){R[Te]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:Z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Te}]`,delete this.name}get code(){return Te}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${Te}]: ${this.message}`}}}function V(Te){let Z="",T=Te.length;const ae="-"===Te[0]?1:0;for(;T>=ae+4;T-=3)Z=`_${Te.slice(T-3,T)}${Z}`;return`${Te.slice(0,T)}${Z}`}function et(Te,Z,T,ae,We,Ze){if(Te>T||Te<Z){const st="bigint"==typeof Z?"n":"";let Wt;throw Wt=Ze>3?0===Z||Z===BigInt(0)?`>= 0${st} and < 2${st} ** ${8*(Ze+1)}${st}`:`>= -(2${st} ** ${8*(Ze+1)-1}${st}) and < 2 ** ${8*(Ze+1)-1}${st}`:`>= ${Z}${st} and <= ${T}${st}`,new R.ERR_OUT_OF_RANGE("value",Wt,Te)}!function Fe(Te,Z,T){fe(Z,"offset"),(void 0===Te[Z]||void 0===Te[Z+T])&&Q(Z,Te.length-(T+1))}(ae,We,Ze)}function fe(Te,Z){if("number"!=typeof Te)throw new R.ERR_INVALID_ARG_TYPE(Z,"number",Te)}function Q(Te,Z,T){throw Math.floor(Te)!==Te?(fe(Te,T),new R.ERR_OUT_OF_RANGE(T||"offset","an integer",Te)):Z<0?new R.ERR_BUFFER_OUT_OF_BOUNDS:new R.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${Z}`,Te)}se("ERR_BUFFER_OUT_OF_BOUNDS",function(Te){return Te?`${Te} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(Te,Z){return`The "${Te}" argument must be of type number. Received type ${typeof Z}`},TypeError),se("ERR_OUT_OF_RANGE",function(Te,Z,T){let ae=`The value of "${Te}" is out of range.`,We=T;return Number.isInteger(T)&&Math.abs(T)>2**32?We=V(String(T)):"bigint"==typeof T&&(We=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(We=V(We)),We+="n"),ae+=` It must be ${Z}. Received ${We}`,ae},RangeError);const X=/[^+/0-9A-Za-z-_]/g;function F(Te,Z){let T;Z=Z||1/0;const ae=Te.length;let We=null;const Ze=[];for(let st=0;st<ae;++st){if(T=Te.charCodeAt(st),T>55295&&T<57344){if(!We){if(T>56319){(Z-=3)>-1&&Ze.push(239,191,189);continue}if(st+1===ae){(Z-=3)>-1&&Ze.push(239,191,189);continue}We=T;continue}if(T<56320){(Z-=3)>-1&&Ze.push(239,191,189),We=T;continue}T=65536+(We-55296<<10|T-56320)}else We&&(Z-=3)>-1&&Ze.push(239,191,189);if(We=null,T<128){if((Z-=1)<0)break;Ze.push(T)}else if(T<2048){if((Z-=2)<0)break;Ze.push(T>>6|192,63&T|128)}else if(T<65536){if((Z-=3)<0)break;Ze.push(T>>12|224,T>>6&63|128,63&T|128)}else{if(!(T<1114112))throw new Error("Invalid code point");if((Z-=4)<0)break;Ze.push(T>>18|240,T>>12&63|128,T>>6&63|128,63&T|128)}}return Ze}function ze(Te){return S.toByteArray(function A(Te){if((Te=(Te=Te.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;Te.length%4!=0;)Te+="=";return Te}(Te))}function Ge(Te,Z,T,ae){let We;for(We=0;We<ae&&!(We+T>=Z.length||We>=Te.length);++We)Z[We+T]=Te[We];return We}function gt(Te,Z){return Te instanceof Z||null!=Te&&null!=Te.constructor&&null!=Te.constructor.name&&Te.constructor.name===Z.name}function Pt(Te){return Te!=Te}const yt=function(){const Te="0123456789abcdef",Z=new Array(256);for(let T=0;T<16;++T){const ae=16*T;for(let We=0;We<16;++We)Z[ae+We]=Te[T]+Te[We]}return Z}();function Gt(Te){return typeof BigInt>"u"?rn:Te}function rn(){throw new Error("BigInt not supported")}},7054:function(te,J,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(k,C,N,_){void 0===_&&(_=N),Object.defineProperty(k,_,{enumerable:!0,get:function(){return C[N]}})}:function(k,C,N,_){void 0===_&&(_=N),k[_]=C[N]}),b=this&&this.__exportStar||function(k,C){for(var N in k)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,k,N)};Object.defineProperty(J,"__esModule",{value:!0}),b(g(361),J)},361:(te,J)=>{"use strict";function S(C){const N=[];let _=0;for(;_<C.length;)switch(C[_]){case"/":if("."===C[_+1])if("."===C[_+2]){if(!k(C[_+3])){N.push([]),_++;break}N.pop(),C[_+3]||N.push([]),_+=3}else{if(!k(C[_+2])){N.push([]),_++;break}C[_+2]||N.push([]),_+=2}else N.push([]),_++;break;case"#":case"?":N.length||N.push([]),N[N.length-1].push(C.substr(_)),_=C.length;break;default:N.length||N.push([]),N[N.length-1].push(C[_]),_++}return"/"+N.map(y=>y.join("")).join("/")}function b(C,N){let _=N+1;N>=0?"/"===C[N+1]&&"/"===C[N+2]&&(_=N+3):"/"===C[0]&&"/"===C[1]&&(_=2);const y=C.indexOf("/",_);return y<0?C:C.substr(0,y)+S(C.substr(y))}function k(C){return!C||"#"===C||"?"===C||"/"===C}Object.defineProperty(J,"__esModule",{value:!0}),J.removeDotSegmentsOfPath=J.removeDotSegments=J.resolve=void 0,J.resolve=function g(C,N){const _=(N=N||"").indexOf("#");if(_>0&&(N=N.substr(0,_)),!C.length){if(N.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${N}' for value '${C}'`);return N}if(C.startsWith("?")){const M=N.indexOf("?");return M>0&&(N=N.substr(0,M)),N+C}if(C.startsWith("#"))return N+C;if(!N.length){const M=C.indexOf(":");if(M<0)throw new Error(`Found invalid relative IRI '${C}' for a missing baseIRI`);return b(C,M)}const y=C.indexOf(":");if(y>=0)return b(C,y);const I=N.indexOf(":");if(I<0)throw new Error(`Found invalid baseIRI '${N}' for value '${C}'`);const L=N.substr(0,I+1);if(0===C.indexOf("//"))return L+b(C,y);let P;if(N.indexOf("//",I)===I+1){if(P=N.indexOf("/",I+3),P<0)return N.length>I+3?N+"/"+b(C,y):L+b(C,y)}else if(P=N.indexOf("/",I+1),P<0)return L+b(C,y);if(0===C.indexOf("/"))return N.substr(0,P)+S(C);let j=N.substr(P);const oe=j.lastIndexOf("/");return oe>=0&&oe<j.length-1&&(j=j.substr(0,oe+1),"."===C[0]&&"."!==C[1]&&"/"!==C[1]&&C[2]&&(C=C.substr(1))),C=S(C=j+C),N.substr(0,P)+C},J.removeDotSegments=S,J.removeDotSegmentsOfPath=b},9528:(te,J,g)=>{!function(S){S.parser=function(G,R){return new k(G,R)},S.SAXParser=k,S.SAXStream=P,S.createStream=function L(G,R){return new P(G,R)},S.MAX_BUFFER_LENGTH=65536;var y,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function k(G,R){if(!(this instanceof k))return new k(G,R);var se=this;(function N(G){for(var R=0,se=b.length;R<se;R++)G[b[R]]=""})(se),se.q=se.c="",se.bufferCheckPosition=S.MAX_BUFFER_LENGTH,se.opt=R||{},se.opt.lowercase=se.opt.lowercase||se.opt.lowercasetags,se.looseCase=se.opt.lowercase?"toLowerCase":"toUpperCase",se.tags=[],se.closed=se.closedRoot=se.sawRoot=!1,se.tag=se.error=null,se.strict=!!G,se.noscript=!(!G&&!se.opt.noscript),se.state=W.BEGIN,se.strictEntities=se.opt.strictEntities,se.ENTITIES=Object.create(se.strictEntities?S.XML_ENTITIES:S.ENTITIES),se.attribList=[],se.opt.xmlns&&(se.ns=Object.create(ce)),se.trackPosition=!1!==se.opt.position,se.trackPosition&&(se.position=se.line=se.column=0),le(se,"onready")}S.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(G){function R(){}return R.prototype=G,new R}),Object.keys||(Object.keys=function(G){var R=[];for(var se in G)G.hasOwnProperty(se)&&R.push(se);return R}),k.prototype={end:function(){qe(this)},write:function _e(G){var R=this;if(this.error)throw this.error;if(R.closed)return Je(R,"Cannot write after close. Assign an onready handler.");if(null===G)return qe(R);"object"==typeof G&&(G=G.toString());for(var se=0,V="";V=Ye(G,se++),R.c=V,V;)switch(R.trackPosition&&(R.position++,"\n"===V?(R.line++,R.column=0):R.column++),R.state){case W.BEGIN:if(R.state=W.BEGIN_WHITESPACE,"\ufeff"===V)continue;at(R,V);continue;case W.BEGIN_WHITESPACE:at(R,V);continue;case W.TEXT:if(R.sawRoot&&!R.closedRoot){for(var Fe=se-1;V&&"<"!==V&&"&"!==V;)(V=Ye(G,se++))&&R.trackPosition&&(R.position++,"\n"===V?(R.line++,R.column=0):R.column++);R.textNode+=G.substring(Fe,se-1)}"<"!==V||R.sawRoot&&R.closedRoot&&!R.strict?(!U(V)&&(!R.sawRoot||R.closedRoot)&&we(R,"Text data outside of root node."),"&"===V?R.state=W.TEXT_ENTITY:R.textNode+=V):(R.state=W.OPEN_WAKA,R.startTagPosition=R.position);continue;case W.SCRIPT:"<"===V?R.state=W.SCRIPT_ENDING:R.script+=V;continue;case W.SCRIPT_ENDING:"/"===V?R.state=W.CLOSE_TAG:(R.script+="<"+V,R.state=W.SCRIPT);continue;case W.OPEN_WAKA:"!"===V?(R.state=W.SGML_DECL,R.sgmlDecl=""):U(V)||(O(K,V)?(R.state=W.OPEN_TAG,R.tagName=V):"/"===V?(R.state=W.CLOSE_TAG,R.tagName=""):"?"===V?(R.state=W.PROC_INST,R.procInstName=R.procInstBody=""):(we(R,"Unencoded <"),R.startTagPosition+1<R.position&&(V=new Array(R.position-R.startTagPosition).join(" ")+V),R.textNode+="<"+V,R.state=W.TEXT));continue;case W.SGML_DECL:(R.sgmlDecl+V).toUpperCase()===j?(ve(R,"onopencdata"),R.state=W.CDATA,R.sgmlDecl="",R.cdata=""):R.sgmlDecl+V==="--"?(R.state=W.COMMENT,R.comment="",R.sgmlDecl=""):(R.sgmlDecl+V).toUpperCase()===oe?(R.state=W.DOCTYPE,(R.doctype||R.sawRoot)&&we(R,"Inappropriately located doctype declaration"),R.doctype="",R.sgmlDecl=""):">"===V?(ve(R,"onsgmldeclaration",R.sgmlDecl),R.sgmlDecl="",R.state=W.TEXT):(x(V)&&(R.state=W.SGML_DECL_QUOTED),R.sgmlDecl+=V);continue;case W.SGML_DECL_QUOTED:V===R.q&&(R.state=W.SGML_DECL,R.q=""),R.sgmlDecl+=V;continue;case W.DOCTYPE:">"===V?(R.state=W.TEXT,ve(R,"ondoctype",R.doctype),R.doctype=!0):(R.doctype+=V,"["===V?R.state=W.DOCTYPE_DTD:x(V)&&(R.state=W.DOCTYPE_QUOTED,R.q=V));continue;case W.DOCTYPE_QUOTED:R.doctype+=V,V===R.q&&(R.q="",R.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:R.doctype+=V,"]"===V?R.state=W.DOCTYPE:x(V)&&(R.state=W.DOCTYPE_DTD_QUOTED,R.q=V);continue;case W.DOCTYPE_DTD_QUOTED:R.doctype+=V,V===R.q&&(R.state=W.DOCTYPE_DTD,R.q="");continue;case W.COMMENT:"-"===V?R.state=W.COMMENT_ENDING:R.comment+=V;continue;case W.COMMENT_ENDING:"-"===V?(R.state=W.COMMENT_ENDED,R.comment=Me(R.opt,R.comment),R.comment&&ve(R,"oncomment",R.comment),R.comment=""):(R.comment+="-"+V,R.state=W.COMMENT);continue;case W.COMMENT_ENDED:">"!==V?(we(R,"Malformed comment"),R.comment+="--"+V,R.state=W.COMMENT):R.state=W.TEXT;continue;case W.CDATA:"]"===V?R.state=W.CDATA_ENDING:R.cdata+=V;continue;case W.CDATA_ENDING:"]"===V?R.state=W.CDATA_ENDING_2:(R.cdata+="]"+V,R.state=W.CDATA);continue;case W.CDATA_ENDING_2:">"===V?(R.cdata&&ve(R,"oncdata",R.cdata),ve(R,"onclosecdata"),R.cdata="",R.state=W.TEXT):"]"===V?R.cdata+="]":(R.cdata+="]]"+V,R.state=W.CDATA);continue;case W.PROC_INST:"?"===V?R.state=W.PROC_INST_ENDING:U(V)?R.state=W.PROC_INST_BODY:R.procInstName+=V;continue;case W.PROC_INST_BODY:if(!R.procInstBody&&U(V))continue;"?"===V?R.state=W.PROC_INST_ENDING:R.procInstBody+=V;continue;case W.PROC_INST_ENDING:">"===V?(ve(R,"onprocessinginstruction",{name:R.procInstName,body:R.procInstBody}),R.procInstName=R.procInstBody="",R.state=W.TEXT):(R.procInstBody+="?"+V,R.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:O(ie,V)?R.tagName+=V:(Ne(R),">"===V?me(R):"/"===V?R.state=W.OPEN_TAG_SLASH:(U(V)||we(R,"Invalid character in tag name"),R.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:">"===V?(me(R,!0),Ee(R)):(we(R,"Forward-slash in opening tag not followed by >"),R.state=W.ATTRIB);continue;case W.ATTRIB:if(U(V))continue;">"===V?me(R):"/"===V?R.state=W.OPEN_TAG_SLASH:O(K,V)?(R.attribName=V,R.attribValue="",R.state=W.ATTRIB_NAME):we(R,"Invalid attribute name");continue;case W.ATTRIB_NAME:"="===V?R.state=W.ATTRIB_VALUE:">"===V?(we(R,"Attribute without value"),R.attribValue=R.attribName,Ve(R),me(R)):U(V)?R.state=W.ATTRIB_NAME_SAW_WHITE:O(ie,V)?R.attribName+=V:we(R,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if("="===V)R.state=W.ATTRIB_VALUE;else{if(U(V))continue;we(R,"Attribute without value"),R.tag.attributes[R.attribName]="",R.attribValue="",ve(R,"onattribute",{name:R.attribName,value:""}),R.attribName="",">"===V?me(R):O(K,V)?(R.attribName=V,R.state=W.ATTRIB_NAME):(we(R,"Invalid attribute name"),R.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(U(V))continue;x(V)?(R.q=V,R.state=W.ATTRIB_VALUE_QUOTED):(we(R,"Unquoted attribute value"),R.state=W.ATTRIB_VALUE_UNQUOTED,R.attribValue=V);continue;case W.ATTRIB_VALUE_QUOTED:if(V!==R.q){"&"===V?R.state=W.ATTRIB_VALUE_ENTITY_Q:R.attribValue+=V;continue}Ve(R),R.q="",R.state=W.ATTRIB_VALUE_CLOSED;continue;case W.ATTRIB_VALUE_CLOSED:U(V)?R.state=W.ATTRIB:">"===V?me(R):"/"===V?R.state=W.OPEN_TAG_SLASH:O(K,V)?(we(R,"No whitespace between attributes"),R.attribName=V,R.attribValue="",R.state=W.ATTRIB_NAME):we(R,"Invalid attribute name");continue;case W.ATTRIB_VALUE_UNQUOTED:if(!B(V)){"&"===V?R.state=W.ATTRIB_VALUE_ENTITY_U:R.attribValue+=V;continue}Ve(R),">"===V?me(R):R.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(R.tagName)">"===V?Ee(R):O(ie,V)?R.tagName+=V:R.script?(R.script+="</"+R.tagName,R.tagName="",R.state=W.SCRIPT):(U(V)||we(R,"Invalid tagname in closing tag"),R.state=W.CLOSE_TAG_SAW_WHITE);else{if(U(V))continue;ue(K,V)?R.script?(R.script+="</"+V,R.state=W.SCRIPT):we(R,"Invalid tagname in closing tag."):R.tagName=V}continue;case W.CLOSE_TAG_SAW_WHITE:if(U(V))continue;">"===V?Ee(R):we(R,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:var fe,Q;switch(R.state){case W.TEXT_ENTITY:fe=W.TEXT,Q="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:fe=W.ATTRIB_VALUE_QUOTED,Q="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:fe=W.ATTRIB_VALUE_UNQUOTED,Q="attribValue"}if(";"===V)if(R.opt.unparsedEntities){var X=Ke(R);R.entity="",R.state=fe,R.write(X)}else R[Q]+=Ke(R),R.entity="",R.state=fe;else O(R.entity.length?q:ne,V)?R.entity+=V:(we(R,"Invalid character in entity name"),R[Q]+="&"+R.entity+V,R.entity="",R.state=fe);continue;default:throw new Error(R,"Unknown state: "+R.state)}return R.position>=R.bufferCheckPosition&&function C(G){for(var R=Math.max(S.MAX_BUFFER_LENGTH,10),se=0,V=0,Fe=b.length;V<Fe;V++){var et=G[b[V]].length;if(et>R)switch(b[V]){case"textNode":Oe(G);break;case"cdata":ve(G,"oncdata",G.cdata),G.cdata="";break;case"script":ve(G,"onscript",G.script),G.script="";break;default:Je(G,"Max buffer length exceeded: "+b[V])}se=Math.max(se,et)}G.bufferCheckPosition=S.MAX_BUFFER_LENGTH-se+G.position}(R),R},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(G){Oe(G),""!==G.cdata&&(ve(G,"oncdata",G.cdata),G.cdata=""),""!==G.script&&(ve(G,"onscript",G.script),G.script="")}(this)}};try{y=g(1793).Stream}catch{y=function(){}}y||(y=function(){});var I=S.EVENTS.filter(function(G){return"error"!==G&&"end"!==G});function P(G,R){if(!(this instanceof P))return new P(G,R);y.apply(this),this._parser=new k(G,R),this.writable=!0,this.readable=!0;var se=this;this._parser.onend=function(){se.emit("end")},this._parser.onerror=function(V){se.emit("error",V),se._parser.error=null},this._decoder=null,I.forEach(function(V){Object.defineProperty(se,"on"+V,{get:function(){return se._parser["on"+V]},set:function(Fe){if(!Fe)return se.removeAllListeners(V),se._parser["on"+V]=Fe,Fe;se.on(V,Fe)},enumerable:!0,configurable:!1})})}(P.prototype=Object.create(y.prototype,{constructor:{value:P}})).write=function(G){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(G)){if(!this._decoder){var R=g(2024).StringDecoder;this._decoder=new R("utf8")}G=this._decoder.write(G)}return this._parser.write(G.toString()),this.emit("data",G),!0},P.prototype.end=function(G){return G&&G.length&&this.write(G),this._parser.end(),!0},P.prototype.on=function(G,R){var se=this;return!se._parser["on"+G]&&-1!==I.indexOf(G)&&(se._parser["on"+G]=function(){var V=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);V.splice(0,0,G),se.emit.apply(se,V)}),y.prototype.on.call(se,G,R)};var j="[CDATA[",oe="DOCTYPE",M="http://www.w3.org/XML/1998/namespace",$="http://www.w3.org/2000/xmlns/",ce={xml:M,xmlns:$},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ie=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function U(G){return" "===G||"\n"===G||"\r"===G||"\t"===G}function x(G){return'"'===G||"'"===G}function B(G){return">"===G||U(G)}function O(G,R){return G.test(R)}function ue(G,R){return!O(G,R)}var G,R,se,W=0;for(var Ce in S.STATE={BEGIN:W++,BEGIN_WHITESPACE:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_CLOSED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},S.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},S.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(S.ENTITIES).forEach(function(G){var R=S.ENTITIES[G],se="number"==typeof R?String.fromCharCode(R):R;S.ENTITIES[G]=se}),S.STATE)S.STATE[S.STATE[Ce]]=Ce;function le(G,R,se){G[R]&&G[R](se)}function ve(G,R,se){G.textNode&&Oe(G),le(G,R,se)}function Oe(G){G.textNode=Me(G.opt,G.textNode),G.textNode&&le(G,"ontext",G.textNode),G.textNode=""}function Me(G,R){return G.trim&&(R=R.trim()),G.normalize&&(R=R.replace(/\s+/g," ")),R}function Je(G,R){return Oe(G),G.trackPosition&&(R+="\nLine: "+G.line+"\nColumn: "+G.column+"\nChar: "+G.c),R=new Error(R),G.error=R,le(G,"onerror",R),G}function qe(G){return G.sawRoot&&!G.closedRoot&&we(G,"Unclosed root tag"),G.state!==W.BEGIN&&G.state!==W.BEGIN_WHITESPACE&&G.state!==W.TEXT&&Je(G,"Unexpected end"),Oe(G),G.c="",G.closed=!0,le(G,"onend"),k.call(G,G.strict,G.opt),G}function we(G,R){if("object"!=typeof G||!(G instanceof k))throw new Error("bad call to strictFail");G.strict&&Je(G,R)}function Ne(G){G.strict||(G.tagName=G.tagName[G.looseCase]());var R=G.tags[G.tags.length-1]||G,se=G.tag={name:G.tagName,attributes:{}};G.opt.xmlns&&(se.ns=R.ns),G.attribList.length=0,ve(G,"onopentagstart",se)}function ke(G,R){var V=G.indexOf(":")<0?["",G]:G.split(":"),Fe=V[0],et=V[1];return R&&"xmlns"===G&&(Fe="xmlns",et=""),{prefix:Fe,local:et}}function Ve(G){if(G.strict||(G.attribName=G.attribName[G.looseCase]()),-1!==G.attribList.indexOf(G.attribName)||G.tag.attributes.hasOwnProperty(G.attribName))G.attribName=G.attribValue="";else{if(G.opt.xmlns){var R=ke(G.attribName,!0),V=R.local;if("xmlns"===R.prefix)if("xml"===V&&G.attribValue!==M)we(G,"xml: prefix must be bound to "+M+"\nActual: "+G.attribValue);else if("xmlns"===V&&G.attribValue!==$)we(G,"xmlns: prefix must be bound to "+$+"\nActual: "+G.attribValue);else{var Fe=G.tag,et=G.tags[G.tags.length-1]||G;Fe.ns===et.ns&&(Fe.ns=Object.create(et.ns)),Fe.ns[V]=G.attribValue}G.attribList.push([G.attribName,G.attribValue])}else G.tag.attributes[G.attribName]=G.attribValue,ve(G,"onattribute",{name:G.attribName,value:G.attribValue});G.attribName=G.attribValue=""}}function me(G,R){if(G.opt.xmlns){var se=G.tag,V=ke(G.tagName);se.prefix=V.prefix,se.local=V.local,se.uri=se.ns[V.prefix]||"",se.prefix&&!se.uri&&(we(G,"Unbound namespace prefix: "+JSON.stringify(G.tagName)),se.uri=V.prefix),se.ns&&(G.tags[G.tags.length-1]||G).ns!==se.ns&&Object.keys(se.ns).forEach(function(gt){ve(G,"onopennamespace",{prefix:gt,uri:se.ns[gt]})});for(var et=0,fe=G.attribList.length;et<fe;et++){var Q=G.attribList[et],X=Q[0],A=Q[1],F=ke(X,!0),de=F.prefix,ze=""===de?"":se.ns[de]||"",Ge={name:X,value:A,prefix:de,local:F.local,uri:ze};de&&"xmlns"!==de&&!ze&&(we(G,"Unbound namespace prefix: "+JSON.stringify(de)),Ge.uri=de),G.tag.attributes[X]=Ge,ve(G,"onattribute",Ge)}G.attribList.length=0}G.tag.isSelfClosing=!!R,G.sawRoot=!0,G.tags.push(G.tag),ve(G,"onopentag",G.tag),R||(G.state=G.noscript||"script"!==G.tagName.toLowerCase()?W.TEXT:W.SCRIPT,G.tag=null,G.tagName=""),G.attribName=G.attribValue="",G.attribList.length=0}function Ee(G){if(!G.tagName)return we(G,"Weird empty close tag."),G.textNode+="</>",void(G.state=W.TEXT);if(G.script){if("script"!==G.tagName)return G.script+="</"+G.tagName+">",G.tagName="",void(G.state=W.SCRIPT);ve(G,"onscript",G.script),G.script=""}var R=G.tags.length,se=G.tagName;G.strict||(se=se[G.looseCase]());for(var V=se;R--&&G.tags[R].name!==V;)we(G,"Unexpected close tag");if(R<0)return we(G,"Unmatched closing tag: "+G.tagName),G.textNode+="</"+G.tagName+">",void(G.state=W.TEXT);G.tagName=se;for(var et=G.tags.length;et-- >R;){var fe=G.tag=G.tags.pop();G.tagName=G.tag.name,ve(G,"onclosetag",G.tagName);var Q={};for(var X in fe.ns)Q[X]=fe.ns[X];G.opt.xmlns&&fe.ns!==(G.tags[G.tags.length-1]||G).ns&&Object.keys(fe.ns).forEach(function(F){ve(G,"onclosenamespace",{prefix:F,uri:fe.ns[F]})})}0===R&&(G.closedRoot=!0),G.tagName=G.attribValue=G.attribName="",G.attribList.length=0,G.state=W.TEXT}function Ke(G){var V,R=G.entity,se=R.toLowerCase(),Fe="";return G.ENTITIES[R]?G.ENTITIES[R]:G.ENTITIES[se]?G.ENTITIES[se]:("#"===(R=se).charAt(0)&&("x"===R.charAt(1)?(R=R.slice(2),Fe=(V=parseInt(R,16)).toString(16)):(R=R.slice(1),Fe=(V=parseInt(R,10)).toString(10))),R=R.replace(/^0+/,""),isNaN(V)||Fe.toLowerCase()!==R?(we(G,"Invalid character entity"),"&"+G.entity+";"):String.fromCodePoint(V))}function at(G,R){"<"===R?(G.state=W.OPEN_WAKA,G.startTagPosition=G.position):U(R)||(we(G,"Non-whitespace before first tag."),G.textNode=R,G.state=W.TEXT)}function Ye(G,R){var se="";return R<G.length&&(se=G.charAt(R)),se}W=S.STATE,String.fromCodePoint||(G=String.fromCharCode,R=Math.floor,se=function(){var Fe=[],Q=-1,X=arguments.length;if(!X)return"";for(var A="";++Q<X;){var F=Number(arguments[Q]);if(!isFinite(F)||F<0||F>1114111||R(F)!==F)throw RangeError("Invalid code point: "+F);F<=65535?Fe.push(F):Fe.push(55296+((F-=65536)>>10),F%1024+56320),(Q+1===X||Fe.length>16384)&&(A+=G.apply(null,Fe),Fe.length=0)}return A},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:se,configurable:!0,writable:!0}):String.fromCodePoint=se)}(J)},8280:function(){!function(te,J){"use strict";if(!te.setImmediate){var C,g=1,S={},b=!1,k=te.document,ce=Object.getPrototypeOf&&Object.getPrototypeOf(te);ce=ce&&ce.setTimeout?ce:te,"[object process]"==={}.toString.call(te.process)?function L(){C=function(K){process.nextTick(function(){I(K)})}}():function P(){if(te.postMessage&&!te.importScripts){var K=!0,ie=te.onmessage;return te.onmessage=function(){K=!1},te.postMessage("","*"),te.onmessage=ie,K}}()?function j(){var K="setImmediate$"+Math.random()+"$",ie=function(ne){ne.source===te&&"string"==typeof ne.data&&0===ne.data.indexOf(K)&&I(+ne.data.slice(K.length))};te.addEventListener?te.addEventListener("message",ie,!1):te.attachEvent("onmessage",ie),C=function(ne){te.postMessage(K+ne,"*")}}():te.MessageChannel?function oe(){var K=new MessageChannel;K.port1.onmessage=function(ie){I(ie.data)},C=function(ie){K.port2.postMessage(ie)}}():k&&"onreadystatechange"in k.createElement("script")?function M(){var K=k.documentElement;C=function(ie){var ne=k.createElement("script");ne.onreadystatechange=function(){I(ie),ne.onreadystatechange=null,K.removeChild(ne),ne=null},K.appendChild(ne)}}():function $(){C=function(K){setTimeout(I,0,K)}}(),ce.setImmediate=function N(K){"function"!=typeof K&&(K=new Function(""+K));for(var ie=new Array(arguments.length-1),ne=0;ne<ie.length;ne++)ie[ne]=arguments[ne+1];return S[g]={callback:K,args:ie},C(g),g++},ce.clearImmediate=_}function _(K){delete S[K]}function I(K){if(b)setTimeout(I,0,K);else{var ie=S[K];if(ie){b=!0;try{!function y(K){var ie=K.callback,ne=K.args;switch(ne.length){case 0:ie();break;case 1:ie(ne[0]);break;case 2:ie(ne[0],ne[1]);break;case 3:ie(ne[0],ne[1],ne[2]);break;default:ie.apply(undefined,ne)}}(ie)}finally{_(K),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(te,J,g)=>{te.exports=k;var S=g(2016).EventEmitter;function k(){S.call(this)}g(6698)(k,S),k.Readable=g(842),k.Writable=g(7597),k.Duplex=g(2232),k.Transform=g(555),k.PassThrough=g(8226),k.finished=g(1227),k.pipeline=g(2345),k.Stream=k,k.prototype.pipe=function(C,N){var _=this;function y($){C.writable&&!1===C.write($)&&_.pause&&_.pause()}function I(){_.readable&&_.resume&&_.resume()}_.on("data",y),C.on("drain",I),!C._isStdio&&(!N||!1!==N.end)&&(_.on("end",P),_.on("close",j));var L=!1;function P(){L||(L=!0,C.end())}function j(){L||(L=!0,"function"==typeof C.destroy&&C.destroy())}function oe($){if(M(),0===S.listenerCount(this,"error"))throw $}function M(){_.removeListener("data",y),C.removeListener("drain",I),_.removeListener("end",P),_.removeListener("close",j),_.removeListener("error",oe),C.removeListener("error",oe),_.removeListener("end",M),_.removeListener("close",M),C.removeListener("close",M)}return _.on("error",oe),C.on("error",oe),_.on("end",M),_.on("close",M),C.on("close",M),C.emit("pipe",_),C}},9555:te=>{"use strict";var g={};function S(_,y,I){I||(I=Error);var P=function(j){function oe(M,$,ce){return j.call(this,function L(j,oe,M){return"string"==typeof y?y:y(j,oe,M)}(M,$,ce))||this}return function J(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,_.__proto__=y}(oe,j),oe}(I);P.prototype.name=I.name,P.prototype.code=_,g[_]=P}function b(_,y){if(Array.isArray(_)){var I=_.length;return _=_.map(function(L){return String(L)}),I>2?"one of ".concat(y," ").concat(_.slice(0,I-1).join(", "),", or ")+_[I-1]:2===I?"one of ".concat(y," ").concat(_[0]," or ").concat(_[1]):"of ".concat(y," ").concat(_[0])}return"of ".concat(y," ").concat(String(_))}S("ERR_INVALID_OPT_VALUE",function(_,y){return'The value "'+y+'" is invalid for option "'+_+'"'},TypeError),S("ERR_INVALID_ARG_TYPE",function(_,y,I){var L,P;if("string"==typeof y&&function k(_,y,I){return _.substr(!I||I<0?0:+I,y.length)===y}(y,"not ")?(L="must not be",y=y.replace(/^not /,"")):L="must be",function C(_,y,I){return(void 0===I||I>_.length)&&(I=_.length),_.substring(I-y.length,I)===y}(_," argument"))P="The ".concat(_," ").concat(L," ").concat(b(y,"type"));else{var j=function N(_,y,I){return"number"!=typeof I&&(I=0),!(I+y.length>_.length)&&-1!==_.indexOf(y,I)}(_,".")?"property":"argument";P='The "'.concat(_,'" ').concat(j," ").concat(L," ").concat(b(y,"type"))}return P+". Received type ".concat(typeof I)},TypeError),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),S("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),S("ERR_STREAM_PREMATURE_CLOSE","Premature close"),S("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),S("ERR_STREAM_WRITE_AFTER_END","write after end"),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),te.exports.q=g},2232:(te,J,g)=>{"use strict";var S=Object.keys||function(P){var j=[];for(var oe in P)j.push(oe);return j};te.exports=y;var b=g(842),k=g(7597);g(6698)(y,b);for(var C=S(k.prototype),N=0;N<C.length;N++){var _=C[N];y.prototype[_]||(y.prototype[_]=k.prototype[_])}function y(P){if(!(this instanceof y))return new y(P);b.call(this,P),k.call(this,P),this.allowHalfOpen=!0,P&&(!1===P.readable&&(this.readable=!1),!1===P.writable&&(this.writable=!1),!1===P.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",I)))}function I(){this._writableState.ended||process.nextTick(L,this)}function L(P){P.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(j){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=j,this._writableState.destroyed=j)}})},8226:(te,J,g)=>{"use strict";te.exports=b;var S=g(555);function b(k){if(!(this instanceof b))return new b(k);S.call(this,k)}g(6698)(b,S),b.prototype._transform=function(k,C,N){N(null,k)}},842:(te,J,g)=>{"use strict";var S;te.exports=le,le.ReadableState=Ce,g(2016);var P,k=function(Q,X){return Q.listeners(X).length},C=g(3951),N=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},L=g(964);P=L&&L.debuglog?L.debuglog("stream"):function(){};var U,x,B,j=g(2998),oe=g(3992),$=g(4962).getHighWaterMark,ce=g(9555).q,K=ce.ERR_INVALID_ARG_TYPE,ie=ce.ERR_STREAM_PUSH_AFTER_EOF,ne=ce.ERR_METHOD_NOT_IMPLEMENTED,q=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(le,C);var O=oe.errorOrDestroy,ue=["error","close","destroy","pause","resume"];function Ce(fe,Q,X){S=S||g(2232),"boolean"!=typeof X&&(X=Q instanceof S),this.objectMode=!!(fe=fe||{}).objectMode,X&&(this.objectMode=this.objectMode||!!fe.readableObjectMode),this.highWaterMark=$(this,fe,"readableHighWaterMark",X),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.destroyed=!1,this.defaultEncoding=fe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,fe.encoding&&(U||(U=g(2024).StringDecoder),this.decoder=new U(fe.encoding),this.encoding=fe.encoding)}function le(fe){if(S=S||g(2232),!(this instanceof le))return new le(fe);this._readableState=new Ce(fe,this,this instanceof S),this.readable=!0,fe&&("function"==typeof fe.read&&(this._read=fe.read),"function"==typeof fe.destroy&&(this._destroy=fe.destroy)),C.call(this)}function ve(fe,Q,X,A,F){P("readableAddChunk",Q);var pe,de=fe._readableState;if(null===Q)de.reading=!1,function Ne(fe,Q){if(P("onEofChunk"),!Q.ended){if(Q.decoder){var X=Q.decoder.end();X&&X.length&&(Q.buffer.push(X),Q.length+=Q.objectMode?1:X.length)}Q.ended=!0,Q.sync?ke(fe):(Q.needReadable=!1,Q.emittedReadable||(Q.emittedReadable=!0,Ve(fe)))}}(fe,de);else if(F||(pe=function Me(fe,Q){var X;return!function I(fe){return N.isBuffer(fe)||fe instanceof _}(Q)&&"string"!=typeof Q&&void 0!==Q&&!fe.objectMode&&(X=new K("chunk",["string","Buffer","Uint8Array"],Q)),X}(de,Q)),pe)O(fe,pe);else if(de.objectMode||Q&&Q.length>0)if("string"!=typeof Q&&!de.objectMode&&Object.getPrototypeOf(Q)!==N.prototype&&(Q=function y(fe){return N.from(fe)}(Q)),A)de.endEmitted?O(fe,new q):Oe(fe,de,Q,!0);else if(de.ended)O(fe,new ie);else{if(de.destroyed)return!1;de.reading=!1,de.decoder&&!X?(Q=de.decoder.write(Q),de.objectMode||0!==Q.length?Oe(fe,de,Q,!1):me(fe,de)):Oe(fe,de,Q,!1)}else A||(de.reading=!1,me(fe,de));return!de.ended&&(de.length<de.highWaterMark||0===de.length)}function Oe(fe,Q,X,A){Q.flowing&&0===Q.length&&!Q.sync?(Q.awaitDrain=0,fe.emit("data",X)):(Q.length+=Q.objectMode?1:X.length,A?Q.buffer.unshift(X):Q.buffer.push(X),Q.needReadable&&ke(fe)),me(fe,Q)}Object.defineProperty(le.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),le.prototype.destroy=oe.destroy,le.prototype._undestroy=oe.undestroy,le.prototype._destroy=function(fe,Q){Q(fe)},le.prototype.push=function(fe,Q){var A,X=this._readableState;return X.objectMode?A=!0:"string"==typeof fe&&((Q=Q||X.defaultEncoding)!==X.encoding&&(fe=N.from(fe,Q),Q=""),A=!0),ve(this,fe,Q,!1,A)},le.prototype.unshift=function(fe){return ve(this,fe,null,!0,!1)},le.prototype.isPaused=function(){return!1===this._readableState.flowing},le.prototype.setEncoding=function(fe){U||(U=g(2024).StringDecoder);var Q=new U(fe);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var X=this._readableState.buffer.head,A="";null!==X;)A+=Q.write(X.data),X=X.next;return this._readableState.buffer.clear(),""!==A&&this._readableState.buffer.push(A),this._readableState.length=A.length,this};var Je=1073741824;function we(fe,Q){return fe<=0||0===Q.length&&Q.ended?0:Q.objectMode?1:fe!=fe?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(fe>Q.highWaterMark&&(Q.highWaterMark=function qe(fe){return fe>=Je?fe=Je:(fe--,fe|=fe>>>1,fe|=fe>>>2,fe|=fe>>>4,fe|=fe>>>8,fe|=fe>>>16,fe++),fe}(fe)),fe<=Q.length?fe:Q.ended?Q.length:(Q.needReadable=!0,0))}function ke(fe){var Q=fe._readableState;P("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(P("emitReadable",Q.flowing),Q.emittedReadable=!0,process.nextTick(Ve,fe))}function Ve(fe){var Q=fe._readableState;P("emitReadable_",Q.destroyed,Q.length,Q.ended),!Q.destroyed&&(Q.length||Q.ended)&&(fe.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,R(fe)}function me(fe,Q){Q.readingMore||(Q.readingMore=!0,process.nextTick(Ee,fe,Q))}function Ee(fe,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&0===Q.length);){var X=Q.length;if(P("maybeReadMore read 0"),fe.read(0),X===Q.length)break}Q.readingMore=!1}function at(fe){var Q=fe._readableState;Q.readableListening=fe.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:fe.listenerCount("data")>0&&fe.resume()}function Ye(fe){P("readable nexttick read 0"),fe.read(0)}function G(fe,Q){P("resume",Q.reading),Q.reading||fe.read(0),Q.resumeScheduled=!1,fe.emit("resume"),R(fe),Q.flowing&&!Q.reading&&fe.read(0)}function R(fe){var Q=fe._readableState;for(P("flow",Q.flowing);Q.flowing&&null!==fe.read(););}function se(fe,Q){return 0===Q.length?null:(Q.objectMode?X=Q.buffer.shift():!fe||fe>=Q.length?(X=Q.decoder?Q.buffer.join(""):1===Q.buffer.length?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):X=Q.buffer.consume(fe,Q.decoder),X);var X}function V(fe){var Q=fe._readableState;P("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,process.nextTick(Fe,Q,fe))}function Fe(fe,Q){if(P("endReadableNT",fe.endEmitted,fe.length),!fe.endEmitted&&0===fe.length&&(fe.endEmitted=!0,Q.readable=!1,Q.emit("end"),fe.autoDestroy)){var X=Q._writableState;(!X||X.autoDestroy&&X.finished)&&Q.destroy()}}function et(fe,Q){for(var X=0,A=fe.length;X<A;X++)if(fe[X]===Q)return X;return-1}le.prototype.read=function(fe){P("read",fe),fe=parseInt(fe,10);var Q=this._readableState,X=fe;if(0!==fe&&(Q.emittedReadable=!1),0===fe&&Q.needReadable&&((0!==Q.highWaterMark?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return P("read: emitReadable",Q.length,Q.ended),0===Q.length&&Q.ended?V(this):ke(this),null;if(0===(fe=we(fe,Q))&&Q.ended)return 0===Q.length&&V(this),null;var F,A=Q.needReadable;return P("need readable",A),(0===Q.length||Q.length-fe<Q.highWaterMark)&&P("length less than watermark",A=!0),Q.ended||Q.reading?P("reading or ended",A=!1):A&&(P("do read"),Q.reading=!0,Q.sync=!0,0===Q.length&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(fe=we(X,Q))),null===(F=fe>0?se(fe,Q):null)?(Q.needReadable=Q.length<=Q.highWaterMark,fe=0):(Q.length-=fe,Q.awaitDrain=0),0===Q.length&&(Q.ended||(Q.needReadable=!0),X!==fe&&Q.ended&&V(this)),null!==F&&this.emit("data",F),F},le.prototype._read=function(fe){O(this,new ne("_read()"))},le.prototype.pipe=function(fe,Q){var X=this,A=this._readableState;switch(A.pipesCount){case 0:A.pipes=fe;break;case 1:A.pipes=[A.pipes,fe];break;default:A.pipes.push(fe)}A.pipesCount+=1,P("pipe count=%d opts=%j",A.pipesCount,Q);var de=Q&&!1===Q.end||fe===process.stdout||fe===process.stderr?Z:ze;function ze(){P("onend"),fe.end()}A.endEmitted?process.nextTick(de):X.once("end",de),fe.on("unpipe",function pe(T,ae){P("onunpipe"),T===X&&ae&&!1===ae.hasUnpiped&&(ae.hasUnpiped=!0,function Pt(){P("cleanup"),fe.removeListener("close",rn),fe.removeListener("finish",Te),fe.removeListener("drain",Ge),fe.removeListener("error",Gt),fe.removeListener("unpipe",pe),X.removeListener("end",ze),X.removeListener("end",Z),X.removeListener("data",yt),gt=!0,A.awaitDrain&&(!fe._writableState||fe._writableState.needDrain)&&Ge()}())});var Ge=function Ke(fe){return function(){var X=fe._readableState;P("pipeOnDrain",X.awaitDrain),X.awaitDrain&&X.awaitDrain--,0===X.awaitDrain&&k(fe,"data")&&(X.flowing=!0,R(fe))}}(X);fe.on("drain",Ge);var gt=!1;function yt(T){P("ondata");var ae=fe.write(T);P("dest.write",ae),!1===ae&&((1===A.pipesCount&&A.pipes===fe||A.pipesCount>1&&-1!==et(A.pipes,fe))&&!gt&&(P("false write response, pause",A.awaitDrain),A.awaitDrain++),X.pause())}function Gt(T){P("onerror",T),Z(),fe.removeListener("error",Gt),0===k(fe,"error")&&O(fe,T)}function rn(){fe.removeListener("finish",Te),Z()}function Te(){P("onfinish"),fe.removeListener("close",rn),Z()}function Z(){P("unpipe"),X.unpipe(fe)}return X.on("data",yt),function W(fe,Q,X){if("function"==typeof fe.prependListener)return fe.prependListener(Q,X);fe._events&&fe._events[Q]?Array.isArray(fe._events[Q])?fe._events[Q].unshift(X):fe._events[Q]=[X,fe._events[Q]]:fe.on(Q,X)}(fe,"error",Gt),fe.once("close",rn),fe.once("finish",Te),fe.emit("pipe",X),A.flowing||(P("pipe resume"),X.resume()),fe},le.prototype.unpipe=function(fe){var Q=this._readableState,X={hasUnpiped:!1};if(0===Q.pipesCount)return this;if(1===Q.pipesCount)return fe&&fe!==Q.pipes||(fe||(fe=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,fe&&fe.emit("unpipe",this,X)),this;if(!fe){var A=Q.pipes,F=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var de=0;de<F;de++)A[de].emit("unpipe",this,{hasUnpiped:!1});return this}var pe=et(Q.pipes,fe);return-1===pe||(Q.pipes.splice(pe,1),Q.pipesCount-=1,1===Q.pipesCount&&(Q.pipes=Q.pipes[0]),fe.emit("unpipe",this,X)),this},le.prototype.addListener=le.prototype.on=function(fe,Q){var X=C.prototype.on.call(this,fe,Q),A=this._readableState;return"data"===fe?(A.readableListening=this.listenerCount("readable")>0,!1!==A.flowing&&this.resume()):"readable"===fe&&!A.endEmitted&&!A.readableListening&&(A.readableListening=A.needReadable=!0,A.flowing=!1,A.emittedReadable=!1,P("on readable",A.length,A.reading),A.length?ke(this):A.reading||process.nextTick(Ye,this)),X},le.prototype.removeListener=function(fe,Q){var X=C.prototype.removeListener.call(this,fe,Q);return"readable"===fe&&process.nextTick(at,this),X},le.prototype.removeAllListeners=function(fe){var Q=C.prototype.removeAllListeners.apply(this,arguments);return("readable"===fe||void 0===fe)&&process.nextTick(at,this),Q},le.prototype.resume=function(){var fe=this._readableState;return fe.flowing||(P("resume"),fe.flowing=!fe.readableListening,function _e(fe,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,process.nextTick(G,fe,Q))}(this,fe)),fe.paused=!1,this},le.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},le.prototype.wrap=function(fe){var Q=this,X=this._readableState,A=!1;for(var F in fe.on("end",function(){if(P("wrapped end"),X.decoder&&!X.ended){var pe=X.decoder.end();pe&&pe.length&&Q.push(pe)}Q.push(null)}),fe.on("data",function(pe){P("wrapped data"),X.decoder&&(pe=X.decoder.write(pe)),X.objectMode&&null==pe||!(X.objectMode||pe&&pe.length)||Q.push(pe)||(A=!0,fe.pause())}),fe)void 0===this[F]&&"function"==typeof fe[F]&&(this[F]=function(ze){return function(){return fe[ze].apply(fe,arguments)}}(F));for(var de=0;de<ue.length;de++)fe.on(ue[de],this.emit.bind(this,ue[de]));return this._read=function(pe){P("wrapped _read",pe),A&&(A=!1,fe.resume())},this},"function"==typeof Symbol&&(le.prototype[Symbol.asyncIterator]=function(){return void 0===x&&(x=g(2590)),x(this)}),Object.defineProperty(le.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(le.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(le.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){this._readableState&&(this._readableState.flowing=Q)}}),le._fromList=se,Object.defineProperty(le.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(le.from=function(fe,Q){return void 0===B&&(B=g(5374)),B(le,fe,Q)})},555:(te,J,g)=>{"use strict";te.exports=I;var S=g(9555).q,b=S.ERR_METHOD_NOT_IMPLEMENTED,k=S.ERR_MULTIPLE_CALLBACK,C=S.ERR_TRANSFORM_ALREADY_TRANSFORMING,N=S.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function y(j,oe){var M=this._transformState;M.transforming=!1;var $=M.writecb;if(null===$)return this.emit("error",new k);M.writechunk=null,M.writecb=null,null!=oe&&this.push(oe),$(j);var ce=this._readableState;ce.reading=!1,(ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}function I(j){if(!(this instanceof I))return new I(j);_.call(this,j),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,j&&("function"==typeof j.transform&&(this._transform=j.transform),"function"==typeof j.flush&&(this._flush=j.flush)),this.on("prefinish",L)}function L(){var j=this;"function"!=typeof this._flush||this._readableState.destroyed?P(this,null,null):this._flush(function(oe,M){P(j,oe,M)})}function P(j,oe,M){if(oe)return j.emit("error",oe);if(null!=M&&j.push(M),j._writableState.length)throw new N;if(j._transformState.transforming)throw new C;return j.push(null)}g(6698)(I,_),I.prototype.push=function(j,oe){return this._transformState.needTransform=!1,_.prototype.push.call(this,j,oe)},I.prototype._transform=function(j,oe,M){M(new b("_transform()"))},I.prototype._write=function(j,oe,M){var $=this._transformState;if($.writecb=M,$.writechunk=j,$.writeencoding=oe,!$.transforming){var ce=this._readableState;($.needTransform||ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}},I.prototype._read=function(j){var oe=this._transformState;null===oe.writechunk||oe.transforming?oe.needTransform=!0:(oe.transforming=!0,this._transform(oe.writechunk,oe.writeencoding,oe.afterTransform))},I.prototype._destroy=function(j,oe){_.prototype._destroy.call(this,j,function(M){oe(M)})}},7597:(te,J,g)=>{"use strict";function b(R){var se=this;this.next=null,this.entry=null,this.finish=function(){!function G(R,se,V){var Fe=R.entry;for(R.entry=null;Fe;){var et=Fe.callback;se.pendingcb--,et(V),Fe=Fe.next}se.corkedRequestsFree.next=R}(se,R)}}var k;te.exports=Ce,Ce.WritableState=ue;var W,C={deprecate:g(496)},N=g(3951),_=g(9007).Buffer,y=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},P=g(3992),oe=g(4962).getHighWaterMark,M=g(9555).q,$=M.ERR_INVALID_ARG_TYPE,ce=M.ERR_METHOD_NOT_IMPLEMENTED,K=M.ERR_MULTIPLE_CALLBACK,ie=M.ERR_STREAM_CANNOT_PIPE,ne=M.ERR_STREAM_DESTROYED,q=M.ERR_STREAM_NULL_VALUES,U=M.ERR_STREAM_WRITE_AFTER_END,x=M.ERR_UNKNOWN_ENCODING,B=P.errorOrDestroy;function O(){}function ue(R,se,V){k=k||g(2232),"boolean"!=typeof V&&(V=se instanceof k),this.objectMode=!!(R=R||{}).objectMode,V&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=oe(this,R,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===R.decodeStrings),this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(et){!function Ne(R,se){var V=R._writableState,Fe=V.sync,et=V.writecb;if("function"!=typeof et)throw new K;if(function we(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}(V),se)!function qe(R,se,V,Fe,et){--se.pendingcb,V?(process.nextTick(et,Fe),process.nextTick(Ye,R,se),R._writableState.errorEmitted=!0,B(R,Fe)):(et(Fe),R._writableState.errorEmitted=!0,B(R,Fe),Ye(R,se))}(R,V,Fe,se,et);else{var fe=Ee(V)||R.destroyed;!fe&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&me(R,V),Fe?process.nextTick(ke,R,V,fe,et):ke(R,V,fe,et)}}(se,et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Ce(R){var se=this instanceof(k=k||g(2232));if(!se&&!W.call(Ce,this))return new Ce(R);this._writableState=new ue(R,this,se),this.writable=!0,R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final)),N.call(this)}function Je(R,se,V,Fe,et,fe,Q){se.writelen=Fe,se.writecb=Q,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new ne("write")):V?R._writev(et,se.onwrite):R._write(et,fe,se.onwrite),se.sync=!1}function ke(R,se,V,Fe){V||function Ve(R,se){0===se.length&&se.needDrain&&(se.needDrain=!1,R.emit("drain"))}(R,se),se.pendingcb--,Fe(),Ye(R,se)}function me(R,se){se.bufferProcessing=!0;var V=se.bufferedRequest;if(R._writev&&V&&V.next){var et=new Array(se.bufferedRequestCount),fe=se.corkedRequestsFree;fe.entry=V;for(var Q=0,X=!0;V;)et[Q]=V,V.isBuf||(X=!1),V=V.next,Q+=1;et.allBuffers=X,Je(R,se,!0,se.length,et,"",fe.finish),se.pendingcb++,se.lastBufferedRequest=null,fe.next?(se.corkedRequestsFree=fe.next,fe.next=null):se.corkedRequestsFree=new b(se),se.bufferedRequestCount=0}else{for(;V;){var A=V.chunk;if(Je(R,se,!1,se.objectMode?1:A.length,A,V.encoding,V.callback),V=V.next,se.bufferedRequestCount--,se.writing)break}null===V&&(se.lastBufferedRequest=null)}se.bufferedRequest=V,se.bufferProcessing=!1}function Ee(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function Ke(R,se){R._final(function(V){se.pendingcb--,V&&B(R,V),se.prefinished=!0,R.emit("prefinish"),Ye(R,se)})}function Ye(R,se){var V=Ee(se);if(V&&(function at(R,se){!se.prefinished&&!se.finalCalled&&("function"!=typeof R._final||se.destroyed?(se.prefinished=!0,R.emit("prefinish")):(se.pendingcb++,se.finalCalled=!0,process.nextTick(Ke,R,se)))}(R,se),0===se.pendingcb&&(se.finished=!0,R.emit("finish"),se.autoDestroy))){var Fe=R._readableState;(!Fe||Fe.autoDestroy&&Fe.endEmitted)&&R.destroy()}return V}g(6698)(Ce,N),ue.prototype.getBuffer=function(){for(var se=this.bufferedRequest,V=[];se;)V.push(se),se=se.next;return V},function(){try{Object.defineProperty(ue.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ce,Symbol.hasInstance,{value:function(se){return!!W.call(this,se)||this===Ce&&se&&se._writableState instanceof ue}})):W=function(se){return se instanceof this},Ce.prototype.pipe=function(){B(this,new ie)},Ce.prototype.write=function(R,se,V){var Fe=this._writableState,et=!1,fe=!Fe.objectMode&&function L(R){return _.isBuffer(R)||R instanceof y}(R);return fe&&!_.isBuffer(R)&&(R=function I(R){return _.from(R)}(R)),"function"==typeof se&&(V=se,se=null),fe?se="buffer":se||(se=Fe.defaultEncoding),"function"!=typeof V&&(V=O),Fe.ending?function le(R,se){var V=new U;B(R,V),process.nextTick(se,V)}(this,V):(fe||function ve(R,se,V,Fe){var et;return null===V?et=new q:"string"!=typeof V&&!se.objectMode&&(et=new $("chunk",["string","Buffer"],V)),!et||(B(R,et),process.nextTick(Fe,et),!1)}(this,Fe,R,V))&&(Fe.pendingcb++,et=function Me(R,se,V,Fe,et,fe){if(!V){var Q=function Oe(R,se,V){return!R.objectMode&&!1!==R.decodeStrings&&"string"==typeof se&&(se=_.from(se,V)),se}(se,Fe,et);Fe!==Q&&(V=!0,et="buffer",Fe=Q)}var X=se.objectMode?1:Fe.length;se.length+=X;var A=se.length<se.highWaterMark;if(A||(se.needDrain=!0),se.writing||se.corked){var F=se.lastBufferedRequest;se.lastBufferedRequest={chunk:Fe,encoding:et,isBuf:V,callback:fe,next:null},F?F.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else Je(R,se,!1,X,Fe,et,fe);return A}(this,Fe,fe,R,se,V)),et},Ce.prototype.cork=function(){this._writableState.corked++},Ce.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&me(this,R))},Ce.prototype.setDefaultEncoding=function(se){if("string"==typeof se&&(se=se.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((se+"").toLowerCase())>-1))throw new x(se);return this._writableState.defaultEncoding=se,this},Object.defineProperty(Ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ce.prototype._write=function(R,se,V){V(new ce("_write()"))},Ce.prototype._writev=null,Ce.prototype.end=function(R,se,V){var Fe=this._writableState;return"function"==typeof R?(V=R,R=null,se=null):"function"==typeof se&&(V=se,se=null),null!=R&&this.write(R,se),Fe.corked&&(Fe.corked=1,this.uncork()),Fe.ending||function _e(R,se,V){se.ending=!0,Ye(R,se),V&&(se.finished?process.nextTick(V):R.once("finish",V)),se.ended=!0,R.writable=!1}(this,Fe,V),this},Object.defineProperty(Ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ce.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(se){this._writableState&&(this._writableState.destroyed=se)}}),Ce.prototype.destroy=P.destroy,Ce.prototype._undestroy=P.undestroy,Ce.prototype._destroy=function(R,se){se(R)}},2590:(te,J,g)=>{"use strict";var S;function b(U,x,B){return x=function k(U){var x=function C(U,x){if("object"!=typeof U||null===U)return U;var B=U[Symbol.toPrimitive];if(void 0!==B){var O=B.call(U,x||"default");if("object"!=typeof O)return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(U)}(U,"string");return"symbol"==typeof x?x:String(x)}(x),x in U?Object.defineProperty(U,x,{value:B,enumerable:!0,configurable:!0,writable:!0}):U[x]=B,U}var N=g(1227),_=Symbol("lastResolve"),y=Symbol("lastReject"),I=Symbol("error"),L=Symbol("ended"),P=Symbol("lastPromise"),j=Symbol("handlePromise"),oe=Symbol("stream");function M(U,x){return{value:U,done:x}}function $(U){var x=U[_];if(null!==x){var B=U[oe].read();null!==B&&(U[P]=null,U[_]=null,U[y]=null,x(M(B,!1)))}}function ce(U){process.nextTick($,U)}var ie=Object.getPrototypeOf(function(){}),ne=Object.setPrototypeOf((b(S={get stream(){return this[oe]},next:function(){var x=this,B=this[I];if(null!==B)return Promise.reject(B);if(this[L])return Promise.resolve(M(void 0,!0));if(this[oe].destroyed)return new Promise(function(Ce,le){process.nextTick(function(){x[I]?le(x[I]):Ce(M(void 0,!0))})});var ue,O=this[P];if(O)ue=new Promise(function K(U,x){return function(B,O){U.then(function(){x[L]?B(M(void 0,!0)):x[j](B,O)},O)}}(O,this));else{var W=this[oe].read();if(null!==W)return Promise.resolve(M(W,!1));ue=new Promise(this[j])}return this[P]=ue,ue}},Symbol.asyncIterator,function(){return this}),b(S,"return",function(){var x=this;return new Promise(function(B,O){x[oe].destroy(null,function(ue){ue?O(ue):B(M(void 0,!0))})})}),S),ie);te.exports=function(x){var B,O=Object.create(ne,(b(B={},oe,{value:x,writable:!0}),b(B,_,{value:null,writable:!0}),b(B,y,{value:null,writable:!0}),b(B,I,{value:null,writable:!0}),b(B,L,{value:x._readableState.endEmitted,writable:!0}),b(B,j,{value:function(W,Ce){var le=O[oe].read();le?(O[P]=null,O[_]=null,O[y]=null,W(M(le,!1))):(O[_]=W,O[y]=Ce)},writable:!0}),B));return O[P]=null,N(x,function(ue){if(ue&&"ERR_STREAM_PREMATURE_CLOSE"!==ue.code){var W=O[y];return null!==W&&(O[P]=null,O[_]=null,O[y]=null,W(ue)),void(O[I]=ue)}var Ce=O[_];null!==Ce&&(O[P]=null,O[_]=null,O[y]=null,Ce(M(void 0,!0))),O[L]=!0}),x.on("readable",ce.bind(null,O)),O}},2998:(te,J,g)=>{"use strict";function S(ce,K){var ie=Object.keys(ce);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(ce);K&&(ne=ne.filter(function(q){return Object.getOwnPropertyDescriptor(ce,q).enumerable})),ie.push.apply(ie,ne)}return ie}function b(ce){for(var K=1;K<arguments.length;K++){var ie=null!=arguments[K]?arguments[K]:{};K%2?S(Object(ie),!0).forEach(function(ne){k(ce,ne,ie[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(ie)):S(Object(ie)).forEach(function(ne){Object.defineProperty(ce,ne,Object.getOwnPropertyDescriptor(ie,ne))})}return ce}function k(ce,K,ie){return(K=y(K))in ce?Object.defineProperty(ce,K,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ce[K]=ie,ce}function N(ce,K){for(var ie=0;ie<K.length;ie++){var ne=K[ie];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ce,y(ne.key),ne)}}function y(ce){var K=function I(ce,K){if("object"!=typeof ce||null===ce)return ce;var ie=ce[Symbol.toPrimitive];if(void 0!==ie){var ne=ie.call(ce,K||"default");if("object"!=typeof ne)return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===K?String:Number)(ce)}(ce,"string");return"symbol"==typeof K?K:String(K)}var P=g(9007).Buffer,oe=g(9862).inspect,M=oe&&oe.custom||"inspect";function $(ce,K,ie){P.prototype.copy.call(ce,K,ie)}te.exports=function(){function ce(){(function C(ce,K){if(!(ce instanceof K))throw new TypeError("Cannot call a class as a function")})(this,ce),this.head=null,this.tail=null,this.length=0}return function _(ce,K,ie){K&&N(ce.prototype,K),ie&&N(ce,ie),Object.defineProperty(ce,"prototype",{writable:!1})}(ce,[{key:"push",value:function(ie){var ne={data:ie,next:null};this.length>0?this.tail.next=ne:this.head=ne,this.tail=ne,++this.length}},{key:"unshift",value:function(ie){var ne={data:ie,next:this.head};0===this.length&&(this.tail=ne),this.head=ne,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ie=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ie}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ie){if(0===this.length)return"";for(var ne=this.head,q=""+ne.data;ne=ne.next;)q+=ie+ne.data;return q}},{key:"concat",value:function(ie){if(0===this.length)return P.alloc(0);for(var ne=P.allocUnsafe(ie>>>0),q=this.head,U=0;q;)$(q.data,ne,U),U+=q.data.length,q=q.next;return ne}},{key:"consume",value:function(ie,ne){var q;return ie<this.head.data.length?(q=this.head.data.slice(0,ie),this.head.data=this.head.data.slice(ie)):q=ie===this.head.data.length?this.shift():ne?this._getString(ie):this._getBuffer(ie),q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ie){var ne=this.head,q=1,U=ne.data;for(ie-=U.length;ne=ne.next;){var x=ne.data,B=ie>x.length?x.length:ie;if(U+=B===x.length?x:x.slice(0,ie),0==(ie-=B)){B===x.length?(++q,this.head=ne.next?ne.next:this.tail=null):(this.head=ne,ne.data=x.slice(B));break}++q}return this.length-=q,U}},{key:"_getBuffer",value:function(ie){var ne=P.allocUnsafe(ie),q=this.head,U=1;for(q.data.copy(ne),ie-=q.data.length;q=q.next;){var x=q.data,B=ie>x.length?x.length:ie;if(x.copy(ne,ne.length-ie,0,B),0==(ie-=B)){B===x.length?(++U,this.head=q.next?q.next:this.tail=null):(this.head=q,q.data=x.slice(B));break}++U}return this.length-=U,ne}},{key:M,value:function(ie,ne){return oe(this,b(b({},ne),{},{depth:0,customInspect:!1}))}}]),ce}()},3992:te=>{"use strict";function g(N,_){k(N,_),S(N)}function S(N){N._writableState&&!N._writableState.emitClose||N._readableState&&!N._readableState.emitClose||N.emit("close")}function k(N,_){N.emit("error",_)}te.exports={destroy:function J(N,_){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(N):N&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(k,this,N)):process.nextTick(k,this,N)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(N||null,function(P){!_&&P?y._writableState?y._writableState.errorEmitted?process.nextTick(S,y):(y._writableState.errorEmitted=!0,process.nextTick(g,y,P)):process.nextTick(g,y,P):_?(process.nextTick(S,y),_(P)):process.nextTick(S,y)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function C(N,_){var y=N._readableState,I=N._writableState;y&&y.autoDestroy||I&&I.autoDestroy?N.destroy(_):N.emit("error",_)}}},1227:(te,J,g)=>{"use strict";var S=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}te.exports=function N(_,y,I){if("function"==typeof y)return N(_,null,y);y||(y={}),I=function b(_){var y=!1;return function(){if(!y){y=!0;for(var I=arguments.length,L=new Array(I),P=0;P<I;P++)L[P]=arguments[P];_.apply(this,L)}}}(I||k);var L=y.readable||!1!==y.readable&&_.readable,P=y.writable||!1!==y.writable&&_.writable,j=function(){_.writable||M()},oe=_._writableState&&_._writableState.finished,M=function(){P=!1,oe=!0,L||I.call(_)},$=_._readableState&&_._readableState.endEmitted,ce=function(){L=!1,$=!0,P||I.call(_)},K=function(U){I.call(_,U)},ie=function(){var U;return L&&!$?((!_._readableState||!_._readableState.ended)&&(U=new S),I.call(_,U)):P&&!oe?((!_._writableState||!_._writableState.ended)&&(U=new S),I.call(_,U)):void 0},ne=function(){_.req.on("finish",M)};return function C(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",M),_.on("abort",ie),_.req?ne():_.on("request",ne)):P&&!_._writableState&&(_.on("end",j),_.on("close",j)),_.on("end",ce),_.on("finish",M),!1!==y.error&&_.on("error",K),_.on("close",ie),function(){_.removeListener("complete",M),_.removeListener("abort",ie),_.removeListener("request",ne),_.req&&_.req.removeListener("finish",M),_.removeListener("end",j),_.removeListener("close",j),_.removeListener("finish",M),_.removeListener("end",ce),_.removeListener("error",K),_.removeListener("close",ie)}}},5374:te=>{te.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(te,J,g)=>{"use strict";var S,k=g(9555).q,C=k.ERR_MISSING_ARGS,N=k.ERR_STREAM_DESTROYED;function _(M){if(M)throw M}function L(M){M()}function P(M,$){return M.pipe($)}te.exports=function oe(){for(var M=arguments.length,$=new Array(M),ce=0;ce<M;ce++)$[ce]=arguments[ce];var K=function j(M){return M.length&&"function"==typeof M[M.length-1]?M.pop():_}($);if(Array.isArray($[0])&&($=$[0]),$.length<2)throw new C("streams");var ie,ne=$.map(function(q,U){var x=U<$.length-1;return function I(M,$,ce,K){K=function b(M){var $=!1;return function(){$||($=!0,M.apply(void 0,arguments))}}(K);var ie=!1;M.on("close",function(){ie=!0}),void 0===S&&(S=g(1227)),S(M,{readable:$,writable:ce},function(q){if(q)return K(q);ie=!0,K()});var ne=!1;return function(q){if(!ie&&!ne){if(ne=!0,function y(M){return M.setHeader&&"function"==typeof M.abort}(M))return M.abort();if("function"==typeof M.destroy)return M.destroy();K(q||new N("pipe"))}}}(q,x,U>0,function(O){ie||(ie=O),O&&ne.forEach(L),!x&&(ne.forEach(L),K(ie))})});return $.reduce(P)}},4962:(te,J,g)=>{"use strict";var S=g(9555).q.ERR_INVALID_OPT_VALUE;te.exports={getHighWaterMark:function k(C,N,_,y){var I=function b(C,N,_){return null!=C.highWaterMark?C.highWaterMark:N?C[_]:null}(N,y,_);if(null!=I){if(!isFinite(I)||Math.floor(I)!==I||I<0)throw new S(y?_:"highWaterMark",I);return Math.floor(I)}return C.objectMode?16:16384}}},3951:(te,J,g)=>{te.exports=g(2016).EventEmitter},2024:(te,J,g)=>{"use strict";var S=g(4282).Buffer,b=S.isEncoding||function(ne){switch((ne=""+ne)&&ne.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function N(ne){var q;switch(this.encoding=function C(ne){var q=function k(ne){if(!ne)return"utf8";for(var q;;)switch(ne){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ne;default:if(q)return;ne=(""+ne).toLowerCase(),q=!0}}(ne);if("string"!=typeof q&&(S.isEncoding===b||!b(ne)))throw new Error("Unknown encoding: "+ne);return q||ne}(ne),this.encoding){case"utf16le":this.text=oe,this.end=M,q=4;break;case"utf8":this.fillLast=L,q=4;break;case"base64":this.text=$,this.end=ce,q=3;break;default:return this.write=K,void(this.end=ie)}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(q)}function _(ne){return ne<=127?0:ne>>5==6?2:ne>>4==14?3:ne>>3==30?4:ne>>6==2?-1:-2}function L(ne){var q=this.lastTotal-this.lastNeed,U=function I(ne,q,U){if(128!=(192&q[0]))return ne.lastNeed=0,"\ufffd";if(ne.lastNeed>1&&q.length>1){if(128!=(192&q[1]))return ne.lastNeed=1,"\ufffd";if(ne.lastNeed>2&&q.length>2&&128!=(192&q[2]))return ne.lastNeed=2,"\ufffd"}}(this,ne);return void 0!==U?U:this.lastNeed<=ne.length?(ne.copy(this.lastChar,q,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ne.copy(this.lastChar,q,0,ne.length),void(this.lastNeed-=ne.length))}function oe(ne,q){if((ne.length-q)%2==0){var U=ne.toString("utf16le",q);if(U){var x=U.charCodeAt(U.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ne[ne.length-1],ne.toString("utf16le",q,ne.length-1)}function M(ne){var q=ne&&ne.length?this.write(ne):"";return this.lastNeed?q+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):q}function $(ne,q){var U=(ne.length-q)%3;return 0===U?ne.toString("base64",q):(this.lastNeed=3-U,this.lastTotal=3,1===U?this.lastChar[0]=ne[ne.length-1]:(this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1]),ne.toString("base64",q,ne.length-U))}function ce(ne){var q=ne&&ne.length?this.write(ne):"";return this.lastNeed?q+this.lastChar.toString("base64",0,3-this.lastNeed):q}function K(ne){return ne.toString(this.encoding)}function ie(ne){return ne&&ne.length?this.write(ne):""}J.StringDecoder=N,N.prototype.write=function(ne){if(0===ne.length)return"";var q,U;if(this.lastNeed){if(void 0===(q=this.fillLast(ne)))return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<ne.length?q?q+this.text(ne,U):this.text(ne,U):q||""},N.prototype.end=function j(ne){var q=ne&&ne.length?this.write(ne):"";return this.lastNeed?q+"\ufffd":q},N.prototype.text=function P(ne,q){var U=function y(ne,q,U){var x=q.length-1;if(x<U)return 0;var B=_(q[x]);return B>=0?(B>0&&(ne.lastNeed=B-1),B):--x<U||-2===B?0:(B=_(q[x]))>=0?(B>0&&(ne.lastNeed=B-2),B):--x<U||-2===B?0:(B=_(q[x]))>=0?(B>0&&(2===B?B=0:ne.lastNeed=B-3),B):0}(this,ne,q);if(!this.lastNeed)return ne.toString("utf8",q);this.lastTotal=U;var x=ne.length-(U-this.lastNeed);return ne.copy(this.lastChar,0,x),ne.toString("utf8",q,x)},N.prototype.fillLast=function(ne){if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ne.length),this.lastNeed-=ne.length}},4282:(te,J,g)=>{var S=g(9007),b=S.Buffer;function k(N,_){for(var y in N)_[y]=N[y]}function C(N,_,y){return b(N,_,y)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?te.exports=S:(k(S,J),J.Buffer=C),C.prototype=Object.create(b.prototype),k(b,C),C.from=function(N,_,y){if("number"==typeof N)throw new TypeError("Argument must not be a number");return b(N,_,y)},C.alloc=function(N,_,y){if("number"!=typeof N)throw new TypeError("Argument must be a number");var I=b(N);return void 0!==_?"string"==typeof y?I.fill(_,y):I.fill(_):I.fill(0),I},C.allocUnsafe=function(N){if("number"!=typeof N)throw new TypeError("Argument must be a number");return b(N)},C.allocUnsafeSlow=function(N){if("number"!=typeof N)throw new TypeError("Argument must be a number");return S.SlowBuffer(N)}},496:te=>{function g(S){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[S];return null!=b&&"true"===String(b).toLowerCase()}te.exports=function J(S,b){if(g("noDeprecation"))return S;var k=!1;return function C(){if(!k){if(g("throwDeprecation"))throw new Error(b);g("traceDeprecation")?console.trace(b):console.warn(b),k=!0}return S.apply(this,arguments)}}},1171:te=>{"use strict";te.exports=function(J){J.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(te,J,g)=>{"use strict";function S(_){var y=this;if(y instanceof S||(y=new S),y.tail=null,y.head=null,y.length=0,_&&"function"==typeof _.forEach)_.forEach(function(P){y.push(P)});else if(arguments.length>0)for(var I=0,L=arguments.length;I<L;I++)y.push(arguments[I]);return y}function b(_,y,I){var L=y===_.head?new N(I,null,y,_):new N(I,y,y.next,_);return null===L.next&&(_.tail=L),null===L.prev&&(_.head=L),_.length++,L}function k(_,y){_.tail=new N(y,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function C(_,y){_.head=new N(y,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function N(_,y,I,L){if(!(this instanceof N))return new N(_,y,I,L);this.list=L,this.value=_,y?(y.next=this,this.prev=y):this.prev=null,I?(I.prev=this,this.next=I):this.next=null}te.exports=S,S.Node=N,S.create=S,S.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var y=_.next,I=_.prev;return y&&(y.prev=I),I&&(I.next=y),_===this.head&&(this.head=y),_===this.tail&&(this.tail=I),_.list.length--,_.next=null,_.prev=null,_.list=null,y},S.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var y=this.head;_.list=this,_.next=y,y&&(y.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},S.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var y=this.tail;_.list=this,_.prev=y,y&&(y.next=_),this.tail=_,this.head||(this.head=_),this.length++}},S.prototype.push=function(){for(var _=0,y=arguments.length;_<y;_++)k(this,arguments[_]);return this.length},S.prototype.unshift=function(){for(var _=0,y=arguments.length;_<y;_++)C(this,arguments[_]);return this.length},S.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},S.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},S.prototype.forEach=function(_,y){y=y||this;for(var I=this.head,L=0;null!==I;L++)_.call(y,I.value,L,this),I=I.next},S.prototype.forEachReverse=function(_,y){y=y||this;for(var I=this.tail,L=this.length-1;null!==I;L--)_.call(y,I.value,L,this),I=I.prev},S.prototype.get=function(_){for(var y=0,I=this.head;null!==I&&y<_;y++)I=I.next;if(y===_&&null!==I)return I.value},S.prototype.getReverse=function(_){for(var y=0,I=this.tail;null!==I&&y<_;y++)I=I.prev;if(y===_&&null!==I)return I.value},S.prototype.map=function(_,y){y=y||this;for(var I=new S,L=this.head;null!==L;)I.push(_.call(y,L.value,this)),L=L.next;return I},S.prototype.mapReverse=function(_,y){y=y||this;for(var I=new S,L=this.tail;null!==L;)I.push(_.call(y,L.value,this)),L=L.prev;return I},S.prototype.reduce=function(_,y){var I,L=this.head;if(arguments.length>1)I=y;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");L=this.head.next,I=this.head.value}for(var P=0;null!==L;P++)I=_(I,L.value,P),L=L.next;return I},S.prototype.reduceReverse=function(_,y){var I,L=this.tail;if(arguments.length>1)I=y;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");L=this.tail.prev,I=this.tail.value}for(var P=this.length-1;null!==L;P--)I=_(I,L.value,P),L=L.prev;return I},S.prototype.toArray=function(){for(var _=new Array(this.length),y=0,I=this.head;null!==I;y++)_[y]=I.value,I=I.next;return _},S.prototype.toArrayReverse=function(){for(var _=new Array(this.length),y=0,I=this.tail;null!==I;y++)_[y]=I.value,I=I.prev;return _},S.prototype.slice=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var I=new S;if(y<_||y<0)return I;_<0&&(_=0),y>this.length&&(y=this.length);for(var L=0,P=this.head;null!==P&&L<_;L++)P=P.next;for(;null!==P&&L<y;L++,P=P.next)I.push(P.value);return I},S.prototype.sliceReverse=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var I=new S;if(y<_||y<0)return I;_<0&&(_=0),y>this.length&&(y=this.length);for(var L=this.length,P=this.tail;null!==P&&L>y;L--)P=P.prev;for(;null!==P&&L>_;L--,P=P.prev)I.push(P.value);return I},S.prototype.splice=function(_,y,...I){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var L=0,P=this.head;null!==P&&L<_;L++)P=P.next;var j=[];for(L=0;P&&L<y;L++)j.push(P.value),P=this.removeNode(P);for(null===P&&(P=this.tail),P!==this.head&&P!==this.tail&&(P=P.prev),L=0;L<I.length;L++)P=b(this,P,I[L]);return j},S.prototype.reverse=function(){for(var _=this.head,y=this.tail,I=_;null!==I;I=I.prev){var L=I.prev;I.prev=I.next,I.next=L}return this.head=y,this.tail=_,this};try{g(1171)(S)}catch{}},643:()=>{},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(te,J,g)=>{var S=g(3801);function b(k){var C,N;function _(I,L){try{var P=k[I](L),j=P.value,oe=j instanceof S;Promise.resolve(oe?j.v:j).then(function(M){if(oe){var $="return"===I?"return":"next";if(!j.k||M.done)return _($,M);M=k[$](M).value}y(P.done?"return":"normal",M)},function(M){_("throw",M)})}catch(M){y("throw",M)}}function y(I,L){switch(I){case"return":C.resolve({value:L,done:!0});break;case"throw":C.reject(L);break;default:C.resolve({value:L,done:!1})}(C=C.next)?_(C.key,C.arg):N=null}this._invoke=function(I,L){return new Promise(function(P,j){var oe={key:I,arg:L,resolve:P,reject:j,next:null};N?N=N.next=oe:(C=N=oe,_(I,L))})},"function"!=typeof k.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(k){return this._invoke("next",k)},b.prototype.throw=function(k){return this._invoke("throw",k)},b.prototype.return=function(k){return this._invoke("return",k)},te.exports=b,te.exports.__esModule=!0,te.exports.default=te.exports},3801:te=>{te.exports=function J(g,S){this.v=g,this.k=S},te.exports.__esModule=!0,te.exports.default=te.exports},8131:(te,J,g)=>{var S=g(3801);te.exports=function b(k){var C={},N=!1;function _(y,I){return N=!0,I=new Promise(function(L){L(k[y](I))}),{done:!1,value:new S(I,1)}}return C[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},C.next=function(y){return N?(N=!1,y):_("next",y)},"function"==typeof k.throw&&(C.throw=function(y){if(N)throw N=!1,y;return _("throw",y)}),"function"==typeof k.return&&(C.return=function(y){return N?(N=!1,y):_("return",y)}),C},te.exports.__esModule=!0,te.exports.default=te.exports},8237:te=>{function g(S){function b(k){if(Object(k)!==k)return Promise.reject(new TypeError(k+" is not an object."));var C=k.done;return Promise.resolve(k.value).then(function(N){return{value:N,done:C}})}return(g=function(C){this.s=C,this.n=C.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(C){var N=this.s.return;return void 0===N?Promise.resolve({value:C,done:!0}):b(N.apply(this.s,arguments))},throw:function(C){var N=this.s.return;return void 0===N?Promise.reject(C):b(N.apply(this.s,arguments))}},new g(S)}te.exports=function J(S){var b,k,C,N=2;for(typeof Symbol<"u"&&(k=Symbol.asyncIterator,C=Symbol.iterator);N--;){if(k&&null!=(b=S[k]))return b.call(S);if(C&&null!=(b=S[C]))return new g(b.call(S));k="@@asyncIterator",C="@@iterator"}throw new TypeError("Object is not async iterable")},te.exports.__esModule=!0,te.exports.default=te.exports},7156:te=>{function J(S,b,k,C,N,_,y){try{var I=S[_](y),L=I.value}catch(P){return void k(P)}I.done?b(L):Promise.resolve(L).then(C,N)}te.exports=function g(S){return function(){var b=this,k=arguments;return new Promise(function(C,N){var _=S.apply(b,k);function y(L){J(_,C,N,y,I,"next",L)}function I(L){J(_,C,N,y,I,"throw",L)}y(void 0)})}},te.exports.__esModule=!0,te.exports.default=te.exports},6737:(te,J,g)=>{var S=g(3801);te.exports=function b(k){return new S(k,0)},te.exports.__esModule=!0,te.exports.default=te.exports},8186:(te,J,g)=>{var S=g(4642);te.exports=function b(k){return function(){return new S(k.apply(this,arguments))}},te.exports.__esModule=!0,te.exports.default=te.exports}},te=>{te(te.s=7055)}]);