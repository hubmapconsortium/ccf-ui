(()=>{"use strict";var e,d={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return d[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=d,e=[],a.O=(n,r,u,l)=>{if(!r){var c=1/0;for(t=0;t<e.length;t++){for(var[r,u,l]=e[t],i=!0,f=0;f<r.length;f++)(!1&l||c>=l)&&Object.keys(a.O).every(b=>a.O[b](r[f]))?r.splice(f--,1):(i=!1,l<c&&(c=l));if(i){e.splice(t--,1);var o=u();void 0!==o&&(n=o)}}return n}l=l||0;for(var t=e.length;t>0&&e[t-1][2]>l;t--)e[t]=e[t-1];e[t]=[r,u,l]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=u=>0===e[u];var n=(u,l)=>{var f,o,[t,c,i]=l,s=0;for(f in c)a.o(c,f)&&(a.m[f]=c[f]);if(i)var _=i(a);for(u&&u(l);s<t.length;s++)a.o(e,o=t[s])&&e[o]&&e[o][0](),e[t[s]]=0;return a.O(_)},r=self.webpackChunkccf_ui=self.webpackChunkccf_ui||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[429],{277:()=>{!function(e){const n=e.performance;function i(I){n&&n.mark&&n.mark(I)}function r(I,p){n&&n.measure&&n.measure(I,p)}i("Zone");const c=e.__Zone_symbol_prefix||"__zone_symbol__";function u(I){return c+I}const f=!0===e[u("forceDuplicateZoneCheck")];if(e.Zone){if(f||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let _=(()=>{class I{constructor(t,o){this._parent=t,this._name=o?o.name||"unnamed":"<root>",this._properties=o&&o.properties||{},this._zoneDelegate=new T(this,this._parent&&this._parent._zoneDelegate,o)}static assertZonePatched(){if(e.Promise!==J.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=I.current;for(;t.parent;)t=t.parent;return t}static get current(){return G.zone}static get currentTask(){return te}static __load_patch(t,o,y=!1){if(J.hasOwnProperty(t)){if(!y&&f)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const P="Zone:"+t;i(P),J[t]=o(e,I,le),r(P,P)}}get parent(){return this._parent}get name(){return this._name}get(t){const o=this.getZoneWith(t);if(o)return o._properties[t]}getZoneWith(t){let o=this;for(;o;){if(o._properties.hasOwnProperty(t))return o;o=o._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,o){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const y=this._zoneDelegate.intercept(this,t,o),P=this;return function(){return P.runGuarded(y,this,arguments,o)}}run(t,o,y,P){G={parent:G,zone:this};try{return this._zoneDelegate.invoke(this,t,o,y,P)}finally{G=G.parent}}runGuarded(t,o=null,y,P){G={parent:G,zone:this};try{try{return this._zoneDelegate.invoke(this,t,o,y,P)}catch(K){if(this._zoneDelegate.handleError(this,K))throw K}}finally{G=G.parent}}runTask(t,o,y){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||z).name+"; Execution: "+this.name+")");if(t.state===j&&(t.type===R||t.type===M))return;const P=t.state!=X;P&&t._transitionTo(X,O),t.runCount++;const K=te;te=t,G={parent:G,zone:this};try{t.type==M&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,o,y)}catch(l){if(this._zoneDelegate.handleError(this,l))throw l}}finally{t.state!==j&&t.state!==Y&&(t.type==R||t.data&&t.data.isPeriodic?P&&t._transitionTo(O,X):(t.runCount=0,this._updateTaskCount(t,-1),P&&t._transitionTo(j,X,j))),G=G.parent,te=K}}scheduleTask(t){if(t.zone&&t.zone!==this){let y=this;for(;y;){if(y===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);y=y.parent}}t._transitionTo(q,j);const o=[];t._zoneDelegates=o,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(y){throw t._transitionTo(Y,q,j),this._zoneDelegate.handleError(this,y),y}return t._zoneDelegates===o&&this._updateTaskCount(t,1),t.state==q&&t._transitionTo(O,q),t}scheduleMicroTask(t,o,y,P){return this.scheduleTask(new m(v,t,o,y,P,void 0))}scheduleMacroTask(t,o,y,P,K){return this.scheduleTask(new m(M,t,o,y,P,K))}scheduleEventTask(t,o,y,P,K){return this.scheduleTask(new m(R,t,o,y,P,K))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||z).name+"; Execution: "+this.name+")");t._transitionTo(A,O,X);try{this._zoneDelegate.cancelTask(this,t)}catch(o){throw t._transitionTo(Y,A),this._zoneDelegate.handleError(this,o),o}return this._updateTaskCount(t,-1),t._transitionTo(j,A),t.runCount=0,t}_updateTaskCount(t,o){const y=t._zoneDelegates;-1==o&&(t._zoneDelegates=null);for(let P=0;P<y.length;P++)y[P]._updateTaskCount(t.type,o)}}return I.__symbol__=u,I})();const g={name:"",onHasTask:(I,p,t,o)=>I.hasTask(t,o),onScheduleTask:(I,p,t,o)=>I.scheduleTask(t,o),onInvokeTask:(I,p,t,o,y,P)=>I.invokeTask(t,o,y,P),onCancelTask:(I,p,t,o)=>I.cancelTask(t,o)};class T{constructor(p,t,o){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=p,this._parentDelegate=t,this._forkZS=o&&(o&&o.onFork?o:t._forkZS),this._forkDlgt=o&&(o.onFork?t:t._forkDlgt),this._forkCurrZone=o&&(o.onFork?this.zone:t._forkCurrZone),this._interceptZS=o&&(o.onIntercept?o:t._interceptZS),this._interceptDlgt=o&&(o.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=o&&(o.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=o&&(o.onInvoke?o:t._invokeZS),this._invokeDlgt=o&&(o.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=o&&(o.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=o&&(o.onHandleError?o:t._handleErrorZS),this._handleErrorDlgt=o&&(o.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=o&&(o.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=o&&(o.onScheduleTask?o:t._scheduleTaskZS),this._scheduleTaskDlgt=o&&(o.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=o&&(o.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=o&&(o.onInvokeTask?o:t._invokeTaskZS),this._invokeTaskDlgt=o&&(o.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=o&&(o.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=o&&(o.onCancelTask?o:t._cancelTaskZS),this._cancelTaskDlgt=o&&(o.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=o&&(o.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const y=o&&o.onHasTask;(y||t&&t._hasTaskZS)&&(this._hasTaskZS=y?o:g,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=p,o.onScheduleTask||(this._scheduleTaskZS=g,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),o.onInvokeTask||(this._invokeTaskZS=g,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),o.onCancelTask||(this._cancelTaskZS=g,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(p,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,p,t):new _(p,t)}intercept(p,t,o){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,p,t,o):t}invoke(p,t,o,y,P){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,p,t,o,y,P):t.apply(o,y)}handleError(p,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,p,t)}scheduleTask(p,t){let o=t;if(this._scheduleTaskZS)this._hasTaskZS&&o._zoneDelegates.push(this._hasTaskDlgtOwner),o=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,p,t),o||(o=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=v)throw new Error("Task is missing scheduleFn.");d(t)}return o}invokeTask(p,t,o,y){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,p,t,o,y):t.callback.apply(o,y)}cancelTask(p,t){let o;if(this._cancelTaskZS)o=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,p,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");o=t.cancelFn(t)}return o}hasTask(p,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,p,t)}catch(o){this.handleError(p,o)}}_updateTaskCount(p,t){const o=this._taskCounts,y=o[p],P=o[p]=y+t;if(P<0)throw new Error("More tasks executed then were scheduled.");0!=y&&0!=P||this.hasTask(this.zone,{microTask:o.microTask>0,macroTask:o.macroTask>0,eventTask:o.eventTask>0,change:p})}}class m{constructor(p,t,o,y,P,K){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=p,this.source=t,this.data=y,this.scheduleFn=P,this.cancelFn=K,!o)throw new Error("callback is not defined");this.callback=o;const l=this;this.invoke=p===R&&y&&y.useG?m.invokeTask:function(){return m.invokeTask.call(e,l,this,arguments)}}static invokeTask(p,t,o){p||(p=this),re++;try{return p.runCount++,p.zone.runTask(p,t,o)}finally{1==re&&L(),re--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(j,q)}_transitionTo(p,t,o){if(this._state!==t&&this._state!==o)throw new Error(`${this.type} '${this.source}': can not transition to '${p}', expecting state '${t}'${o?" or '"+o+"'":""}, was '${this._state}'.`);this._state=p,p==j&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const S=u("setTimeout"),D=u("Promise"),Z=u("then");let E,B=[],V=!1;function d(I){if(0===re&&0===B.length)if(E||e[D]&&(E=e[D].resolve(0)),E){let p=E[Z];p||(p=E.then),p.call(E,L)}else e[S](L,0);I&&B.push(I)}function L(){if(!V){for(V=!0;B.length;){const I=B;B=[];for(let p=0;p<I.length;p++){const t=I[p];try{t.zone.runTask(t,null,null)}catch(o){le.onUnhandledError(o)}}}le.microtaskDrainDone(),V=!1}}const z={name:"NO ZONE"},j="notScheduled",q="scheduling",O="scheduled",X="running",A="canceling",Y="unknown",v="microTask",M="macroTask",R="eventTask",J={},le={symbol:u,currentZoneFrame:()=>G,onUnhandledError:F,microtaskDrainDone:F,scheduleMicroTask:d,showUncaughtError:()=>!_[u("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:F,patchMethod:()=>F,bindArguments:()=>[],patchThen:()=>F,patchMacroTask:()=>F,patchEventPrototype:()=>F,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>F,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>F,wrapWithCurrentZone:()=>F,filterProperties:()=>[],attachOriginToPatched:()=>F,_redefineProperty:()=>F,patchCallbacks:()=>F};let G={parent:null,zone:new _(null,null)},te=null,re=0;function F(){}r("Zone","Zone"),e.Zone=_}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const ue=Object.getOwnPropertyDescriptor,he=Object.defineProperty,de=Object.getPrototypeOf,Be=Object.create,ut=Array.prototype.slice,Se="addEventListener",Oe="removeEventListener",Ze=Zone.__symbol__(Se),Ie=Zone.__symbol__(Oe),se="true",ie="false",ke=Zone.__symbol__("");function Le(e,n){return Zone.current.wrap(e,n)}function Me(e,n,i,r,c){return Zone.current.scheduleMacroTask(e,n,i,r,c)}const x=Zone.__symbol__,Pe="undefined"!=typeof window,pe=Pe?window:void 0,$=Pe&&pe||"object"==typeof self&&self||global,ht=[null];function Ae(e,n){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=Le(e[i],n+"_"+i));return e}function Fe(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const Ue="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,Re=!("nw"in $)&&void 0!==$.process&&"[object process]"==={}.toString.call($.process),je=!Re&&!Ue&&!(!Pe||!pe.HTMLElement),We=void 0!==$.process&&"[object process]"==={}.toString.call($.process)&&!Ue&&!(!Pe||!pe.HTMLElement),Ce={},qe=function(e){if(!(e=e||$.event))return;let n=Ce[e.type];n||(n=Ce[e.type]=x("ON_PROPERTY"+e.type));const i=this||e.target||$,r=i[n];let c;if(je&&i===pe&&"error"===e.type){const u=e;c=r&&r.call(this,u.message,u.filename,u.lineno,u.colno,u.error),!0===c&&e.preventDefault()}else c=r&&r.apply(this,arguments),null!=c&&!c&&e.preventDefault();return c};function Xe(e,n,i){let r=ue(e,n);if(!r&&i&&ue(i,n)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;const c=x("on"+n+"patched");if(e.hasOwnProperty(c)&&e[c])return;delete r.writable,delete r.value;const u=r.get,f=r.set,_=n.substr(2);let g=Ce[_];g||(g=Ce[_]=x("ON_PROPERTY"+_)),r.set=function(T){let m=this;!m&&e===$&&(m=$),m&&(m[g]&&m.removeEventListener(_,qe),f&&f.apply(m,ht),"function"==typeof T?(m[g]=T,m.addEventListener(_,qe,!1)):m[g]=null)},r.get=function(){let T=this;if(!T&&e===$&&(T=$),!T)return null;const m=T[g];if(m)return m;if(u){let S=u&&u.call(this);if(S)return r.set.call(this,S),"function"==typeof T.removeAttribute&&T.removeAttribute(n),S}return null},he(e,n,r),e[c]=!0}function Ye(e,n,i){if(n)for(let r=0;r<n.length;r++)Xe(e,"on"+n[r],i);else{const r=[];for(const c in e)"on"==c.substr(0,2)&&r.push(c);for(let c=0;c<r.length;c++)Xe(e,r[c],i)}}const ne=x("originalInstance");function ve(e){const n=$[e];if(!n)return;$[x(e)]=n,$[e]=function(){const c=Ae(arguments,e);switch(c.length){case 0:this[ne]=new n;break;case 1:this[ne]=new n(c[0]);break;case 2:this[ne]=new n(c[0],c[1]);break;case 3:this[ne]=new n(c[0],c[1],c[2]);break;case 4:this[ne]=new n(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},ae($[e],n);const i=new n(function(){});let r;for(r in i)"XMLHttpRequest"===e&&"responseBlob"===r||function(c){"function"==typeof i[c]?$[e].prototype[c]=function(){return this[ne][c].apply(this[ne],arguments)}:he($[e].prototype,c,{set:function(u){"function"==typeof u?(this[ne][c]=Le(u,e+"."+c),ae(this[ne][c],u)):this[ne][c]=u},get:function(){return this[ne][c]}})}(r);for(r in n)"prototype"!==r&&n.hasOwnProperty(r)&&($[e][r]=n[r])}function ce(e,n,i){let r=e;for(;r&&!r.hasOwnProperty(n);)r=de(r);!r&&e[n]&&(r=e);const c=x(n);let u=null;if(r&&(!(u=r[c])||!r.hasOwnProperty(c))&&(u=r[c]=r[n],Fe(r&&ue(r,n)))){const _=i(u,c,n);r[n]=function(){return _(this,arguments)},ae(r[n],u)}return u}function _t(e,n,i){let r=null;function c(u){const f=u.data;return f.args[f.cbIdx]=function(){u.invoke.apply(this,arguments)},r.apply(f.target,f.args),u}r=ce(e,n,u=>function(f,_){const g=i(f,_);return g.cbIdx>=0&&"function"==typeof _[g.cbIdx]?Me(g.name,_[g.cbIdx],g,c):u.apply(f,_)})}function ae(e,n){e[x("OriginalDelegate")]=n}let $e=!1,He=!1;function mt(){if($e)return He;$e=!0;try{const e=pe.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(He=!0)}catch(e){}return He}Zone.__load_patch("ZoneAwarePromise",(e,n,i)=>{const r=Object.getOwnPropertyDescriptor,c=Object.defineProperty,f=i.symbol,_=[],g=!0===e[f("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],T=f("Promise"),m=f("then");i.onUnhandledError=l=>{if(i.showUncaughtError()){const s=l&&l.rejection;s?console.error("Unhandled Promise rejection:",s instanceof Error?s.message:s,"; Zone:",l.zone.name,"; Task:",l.task&&l.task.source,"; Value:",s,s instanceof Error?s.stack:void 0):console.error(l)}},i.microtaskDrainDone=()=>{for(;_.length;){const l=_.shift();try{l.zone.runGuarded(()=>{throw l.throwOriginal?l.rejection:l})}catch(s){Z(s)}}};const D=f("unhandledPromiseRejectionHandler");function Z(l){i.onUnhandledError(l);try{const s=n[D];"function"==typeof s&&s.call(this,l)}catch(s){}}function B(l){return l&&l.then}function V(l){return l}function E(l){return t.reject(l)}const d=f("state"),L=f("value"),z=f("finally"),j=f("parentPromiseValue"),q=f("parentPromiseState"),X=null,A=!0,Y=!1;function M(l,s){return a=>{try{G(l,s,a)}catch(h){G(l,!1,h)}}}const le=f("currentTaskTrace");function G(l,s,a){const h=function(){let l=!1;return function(a){return function(){l||(l=!0,a.apply(null,arguments))}}}();if(l===a)throw new TypeError("Promise resolved with itself");if(l[d]===X){let w=null;try{("object"==typeof a||"function"==typeof a)&&(w=a&&a.then)}catch(C){return h(()=>{G(l,!1,C)})(),l}if(s!==Y&&a instanceof t&&a.hasOwnProperty(d)&&a.hasOwnProperty(L)&&a[d]!==X)re(a),G(l,a[d],a[L]);else if(s!==Y&&"function"==typeof w)try{w.call(a,h(M(l,s)),h(M(l,!1)))}catch(C){h(()=>{G(l,!1,C)})()}else{l[d]=s;const C=l[L];if(l[L]=a,l[z]===z&&s===A&&(l[d]=l[q],l[L]=l[j]),s===Y&&a instanceof Error){const k=n.currentTask&&n.currentTask.data&&n.currentTask.data.__creationTrace__;k&&c(a,le,{configurable:!0,enumerable:!1,writable:!0,value:k})}for(let k=0;k<C.length;)F(l,C[k++],C[k++],C[k++],C[k++]);if(0==C.length&&s==Y){l[d]=0;let k=a;try{throw new Error("Uncaught (in promise): "+function(l){return l&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l)}(a)+(a&&a.stack?"\n"+a.stack:""))}catch(b){k=b}g&&(k.throwOriginal=!0),k.rejection=a,k.promise=l,k.zone=n.current,k.task=n.currentTask,_.push(k),i.scheduleMicroTask()}}}return l}const te=f("rejectionHandledHandler");function re(l){if(0===l[d]){try{const s=n[te];s&&"function"==typeof s&&s.call(this,{rejection:l[L],promise:l})}catch(s){}l[d]=Y;for(let s=0;s<_.length;s++)l===_[s].promise&&_.splice(s,1)}}function F(l,s,a,h,w){re(l);const C=l[d],k=C?"function"==typeof h?h:V:"function"==typeof w?w:E;s.scheduleMicroTask("Promise.then",()=>{try{const b=l[L],N=!!a&&z===a[z];N&&(a[j]=b,a[q]=C);const H=s.run(k,void 0,N&&k!==E&&k!==V?[]:[b]);G(a,!0,H)}catch(b){G(a,!1,b)}},a)}const p=function(){};class t{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(s){return G(new this(null),A,s)}static reject(s){return G(new this(null),Y,s)}static race(s){let a,h,w=new this((b,N)=>{a=b,h=N});function C(b){a(b)}function k(b){h(b)}for(let b of s)B(b)||(b=this.resolve(b)),b.then(C,k);return w}static all(s){return t.allWithCallback(s)}static allSettled(s){return(this&&this.prototype instanceof t?this:t).allWithCallback(s,{thenCallback:h=>({status:"fulfilled",value:h}),errorCallback:h=>({status:"rejected",reason:h})})}static allWithCallback(s,a){let h,w,C=new this((H,U)=>{h=H,w=U}),k=2,b=0;const N=[];for(let H of s){B(H)||(H=this.resolve(H));const U=b;try{H.then(Q=>{N[U]=a?a.thenCallback(Q):Q,k--,0===k&&h(N)},Q=>{a?(N[U]=a.errorCallback(Q),k--,0===k&&h(N)):w(Q)})}catch(Q){w(Q)}k++,b++}return k-=2,0===k&&h(N),C}constructor(s){const a=this;if(!(a instanceof t))throw new Error("Must be an instanceof Promise.");a[d]=X,a[L]=[];try{s&&s(M(a,A),M(a,Y))}catch(h){G(a,!1,h)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return t}then(s,a){let h=this.constructor[Symbol.species];(!h||"function"!=typeof h)&&(h=this.constructor||t);const w=new h(p),C=n.current;return this[d]==X?this[L].push(C,w,s,a):F(this,C,w,s,a),w}catch(s){return this.then(null,s)}finally(s){let a=this.constructor[Symbol.species];(!a||"function"!=typeof a)&&(a=t);const h=new a(p);h[z]=z;const w=n.current;return this[d]==X?this[L].push(w,h,s,s):F(this,w,h,s,s),h}}t.resolve=t.resolve,t.reject=t.reject,t.race=t.race,t.all=t.all;const o=e[T]=e.Promise;e.Promise=t;const y=f("thenPatched");function P(l){const s=l.prototype,a=r(s,"then");if(a&&(!1===a.writable||!a.configurable))return;const h=s.then;s[m]=h,l.prototype.then=function(w,C){return new t((b,N)=>{h.call(this,b,N)}).then(w,C)},l[y]=!0}return i.patchThen=P,o&&(P(o),ce(e,"fetch",l=>function(l){return function(s,a){let h=l.apply(s,a);if(h instanceof t)return h;let w=h.constructor;return w[y]||P(w),h}}(l))),Promise[n.__symbol__("uncaughtPromiseErrors")]=_,t}),Zone.__load_patch("toString",e=>{const n=Function.prototype.toString,i=x("OriginalDelegate"),r=x("Promise"),c=x("Error"),u=function(){if("function"==typeof this){const T=this[i];if(T)return"function"==typeof T?n.call(T):Object.prototype.toString.call(T);if(this===Promise){const m=e[r];if(m)return n.call(m)}if(this===Error){const m=e[c];if(m)return n.call(m)}}return n.call(this)};u[i]=n,Function.prototype.toString=u;const f=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":f.call(this)}});let me=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){me=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){me=!1}const Et={useG:!0},ee={},Ke={},Je=new RegExp("^"+ke+"(\\w+)(true|false)$"),xe=x("propagationStopped");function Qe(e,n){const i=(n?n(e):e)+ie,r=(n?n(e):e)+se,c=ke+i,u=ke+r;ee[e]={},ee[e][ie]=c,ee[e][se]=u}function Tt(e,n,i){const r=i&&i.add||Se,c=i&&i.rm||Oe,u=i&&i.listeners||"eventListeners",f=i&&i.rmAll||"removeAllListeners",_=x(r),g="."+r+":",S=function(E,d,L){if(E.isRemoved)return;const z=E.callback;"object"==typeof z&&z.handleEvent&&(E.callback=q=>z.handleEvent(q),E.originalDelegate=z),E.invoke(E,d,[L]);const j=E.options;j&&"object"==typeof j&&j.once&&d[c].call(d,L.type,E.originalDelegate?E.originalDelegate:E.callback,j)},D=function(E){if(!(E=E||e.event))return;const d=this||E.target||e,L=d[ee[E.type][ie]];if(L)if(1===L.length)S(L[0],d,E);else{const z=L.slice();for(let j=0;j<z.length&&(!E||!0!==E[xe]);j++)S(z[j],d,E)}},Z=function(E){if(!(E=E||e.event))return;const d=this||E.target||e,L=d[ee[E.type][se]];if(L)if(1===L.length)S(L[0],d,E);else{const z=L.slice();for(let j=0;j<z.length&&(!E||!0!==E[xe]);j++)S(z[j],d,E)}};function B(E,d){if(!E)return!1;let L=!0;d&&void 0!==d.useG&&(L=d.useG);const z=d&&d.vh;let j=!0;d&&void 0!==d.chkDup&&(j=d.chkDup);let q=!1;d&&void 0!==d.rt&&(q=d.rt);let O=E;for(;O&&!O.hasOwnProperty(r);)O=de(O);if(!O&&E[r]&&(O=E),!O||O[_])return!1;const X=d&&d.eventNameToString,A={},Y=O[_]=O[r],v=O[x(c)]=O[c],M=O[x(u)]=O[u],R=O[x(f)]=O[f];let J;function le(s,a){return!me&&"object"==typeof s&&s?!!s.capture:me&&a?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?Object.assign(Object.assign({},s),{passive:!0}):s:{passive:!0}:s}d&&d.prepend&&(J=O[x(d.prepend)]=O[d.prepend]);const p=L?function(s){if(!A.isExisting)return Y.call(A.target,A.eventName,A.capture?Z:D,A.options)}:function(s){return Y.call(A.target,A.eventName,s.invoke,A.options)},t=L?function(s){if(!s.isRemoved){const a=ee[s.eventName];let h;a&&(h=a[s.capture?se:ie]);const w=h&&s.target[h];if(w)for(let C=0;C<w.length;C++)if(w[C]===s){w.splice(C,1),s.isRemoved=!0,0===w.length&&(s.allRemoved=!0,s.target[h]=null);break}}if(s.allRemoved)return v.call(s.target,s.eventName,s.capture?Z:D,s.options)}:function(s){return v.call(s.target,s.eventName,s.invoke,s.options)},y=d&&d.diff?d.diff:function(s,a){const h=typeof a;return"function"===h&&s.callback===a||"object"===h&&s.originalDelegate===a},P=Zone[x("UNPATCHED_EVENTS")],K=e[x("PASSIVE_EVENTS")],l=function(s,a,h,w,C=!1,k=!1){return function(){const b=this||e;let N=arguments[0];d&&d.transferEventName&&(N=d.transferEventName(N));let H=arguments[1];if(!H)return s.apply(this,arguments);if(Re&&"uncaughtException"===N)return s.apply(this,arguments);let U=!1;if("function"!=typeof H){if(!H.handleEvent)return s.apply(this,arguments);U=!0}if(z&&!z(s,H,b,arguments))return;const Q=me&&!!K&&-1!==K.indexOf(N),oe=le(arguments[2],Q);if(P)for(let _e=0;_e<P.length;_e++)if(N===P[_e])return Q?s.call(b,N,H,oe):s.apply(this,arguments);const Ge=!!oe&&("boolean"==typeof oe||oe.capture),st=!(!oe||"object"!=typeof oe)&&oe.once,At=Zone.current;let ze=ee[N];ze||(Qe(N,X),ze=ee[N]);const it=ze[Ge?se:ie];let De,ge=b[it],ct=!1;if(ge){if(ct=!0,j)for(let _e=0;_e<ge.length;_e++)if(y(ge[_e],H))return}else ge=b[it]=[];const at=b.constructor.name,lt=Ke[at];lt&&(De=lt[N]),De||(De=at+a+(X?X(N):N)),A.options=oe,st&&(A.options.once=!1),A.target=b,A.capture=Ge,A.eventName=N,A.isExisting=ct;const be=L?Et:void 0;be&&(be.taskData=A);const fe=At.scheduleEventTask(De,H,be,h,w);return A.target=null,be&&(be.taskData=null),st&&(oe.once=!0),!me&&"boolean"==typeof fe.options||(fe.options=oe),fe.target=b,fe.capture=Ge,fe.eventName=N,U&&(fe.originalDelegate=H),k?ge.unshift(fe):ge.push(fe),C?b:void 0}};return O[r]=l(Y,g,p,t,q),J&&(O.prependListener=l(J,".prependListener:",function(s){return J.call(A.target,A.eventName,s.invoke,A.options)},t,q,!0)),O[c]=function(){const s=this||e;let a=arguments[0];d&&d.transferEventName&&(a=d.transferEventName(a));const h=arguments[2],w=!!h&&("boolean"==typeof h||h.capture),C=arguments[1];if(!C)return v.apply(this,arguments);if(z&&!z(v,C,s,arguments))return;const k=ee[a];let b;k&&(b=k[w?se:ie]);const N=b&&s[b];if(N)for(let H=0;H<N.length;H++){const U=N[H];if(y(U,C))return N.splice(H,1),U.isRemoved=!0,0===N.length&&(U.allRemoved=!0,s[b]=null,"string"==typeof a)&&(s[ke+"ON_PROPERTY"+a]=null),U.zone.cancelTask(U),q?s:void 0}return v.apply(this,arguments)},O[u]=function(){const s=this||e;let a=arguments[0];d&&d.transferEventName&&(a=d.transferEventName(a));const h=[],w=et(s,X?X(a):a);for(let C=0;C<w.length;C++){const k=w[C];h.push(k.originalDelegate?k.originalDelegate:k.callback)}return h},O[f]=function(){const s=this||e;let a=arguments[0];if(a){d&&d.transferEventName&&(a=d.transferEventName(a));const h=ee[a];if(h){const k=s[h[ie]],b=s[h[se]];if(k){const N=k.slice();for(let H=0;H<N.length;H++){const U=N[H];this[c].call(this,a,U.originalDelegate?U.originalDelegate:U.callback,U.options)}}if(b){const N=b.slice();for(let H=0;H<N.length;H++){const U=N[H];this[c].call(this,a,U.originalDelegate?U.originalDelegate:U.callback,U.options)}}}}else{const h=Object.keys(s);for(let w=0;w<h.length;w++){const k=Je.exec(h[w]);let b=k&&k[1];b&&"removeListener"!==b&&this[f].call(this,b)}this[f].call(this,"removeListener")}if(q)return this},ae(O[r],Y),ae(O[c],v),R&&ae(O[f],R),M&&ae(O[u],M),!0}let V=[];for(let E=0;E<n.length;E++)V[E]=B(n[E],i);return V}function et(e,n){if(!n){const u=[];for(let f in e){const _=Je.exec(f);let g=_&&_[1];if(g&&(!n||g===n)){const T=e[f];if(T)for(let m=0;m<T.length;m++)u.push(T[m])}}return u}let i=ee[n];i||(Qe(n),i=ee[n]);const r=e[i[ie]],c=e[i[se]];return r?c?r.concat(c):r.slice():c?c.slice():[]}function yt(e,n){const i=e.Event;i&&i.prototype&&n.patchMethod(i.prototype,"stopImmediatePropagation",r=>function(c,u){c[xe]=!0,r&&r.apply(c,u)})}function gt(e,n,i,r,c){const u=Zone.__symbol__(r);if(n[u])return;const f=n[u]=n[r];n[r]=function(_,g,T){return g&&g.prototype&&c.forEach(function(m){const S=`${i}.${r}::`+m,D=g.prototype;if(D.hasOwnProperty(m)){const Z=e.ObjectGetOwnPropertyDescriptor(D,m);Z&&Z.value?(Z.value=e.wrapWithCurrentZone(Z.value,S),e._redefineProperty(g.prototype,m,Z)):D[m]&&(D[m]=e.wrapWithCurrentZone(D[m],S))}else D[m]&&(D[m]=e.wrapWithCurrentZone(D[m],S))}),f.call(n,_,g,T)},e.attachOriginToPatched(n[r],f)}const Ve=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],wt=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],tt=["load"],nt=["blur","error","focus","load","resize","scroll","messageerror"],Dt=["bounce","finish","start"],rt=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Ee=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],St=["close","error","open","message"],Ot=["error","message"],Te=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Ve,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function ot(e,n,i){if(!i||0===i.length)return n;const r=i.filter(u=>u.target===e);if(!r||0===r.length)return n;const c=r[0].ignoreProperties;return n.filter(u=>-1===c.indexOf(u))}function W(e,n,i,r){e&&Ye(e,ot(e,n,i),r)}Zone.__load_patch("util",(e,n,i)=>{i.patchOnProperties=Ye,i.patchMethod=ce,i.bindArguments=Ae,i.patchMacroTask=_t;const r=n.__symbol__("BLACK_LISTED_EVENTS"),c=n.__symbol__("UNPATCHED_EVENTS");e[c]&&(e[r]=e[c]),e[r]&&(n[r]=n[c]=e[r]),i.patchEventPrototype=yt,i.patchEventTarget=Tt,i.isIEOrEdge=mt,i.ObjectDefineProperty=he,i.ObjectGetOwnPropertyDescriptor=ue,i.ObjectCreate=Be,i.ArraySlice=ut,i.patchClass=ve,i.wrapWithCurrentZone=Le,i.filterProperties=ot,i.attachOriginToPatched=ae,i._redefineProperty=Object.defineProperty,i.patchCallbacks=gt,i.getGlobalObjects=()=>({globalSources:Ke,zoneSymbolEventNames:ee,eventNames:Te,isBrowser:je,isMix:We,isNode:Re,TRUE_STR:se,FALSE_STR:ie,ZONE_SYMBOL_PREFIX:ke,ADD_EVENT_LISTENER_STR:Se,REMOVE_EVENT_LISTENER_STR:Oe})});const Ne=x("zoneTask");function ye(e,n,i,r){let c=null,u=null;i+=r;const f={};function _(T){const m=T.data;return m.args[0]=function(){return T.invoke.apply(this,arguments)},m.handleId=c.apply(e,m.args),T}function g(T){return u.call(e,T.data.handleId)}c=ce(e,n+=r,T=>function(m,S){if("function"==typeof S[0]){const D={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?S[1]||0:void 0,args:S},Z=S[0];S[0]=function(){try{return Z.apply(this,arguments)}finally{D.isPeriodic||("number"==typeof D.handleId?delete f[D.handleId]:D.handleId&&(D.handleId[Ne]=null))}};const B=Me(n,S[0],D,_,g);if(!B)return B;const V=B.data.handleId;return"number"==typeof V?f[V]=B:V&&(V[Ne]=B),V&&V.ref&&V.unref&&"function"==typeof V.ref&&"function"==typeof V.unref&&(B.ref=V.ref.bind(V),B.unref=V.unref.bind(V)),"number"==typeof V||V?V:B}return T.apply(e,S)}),u=ce(e,i,T=>function(m,S){const D=S[0];let Z;"number"==typeof D?Z=f[D]:(Z=D&&D[Ne],Z||(Z=D)),Z&&"string"==typeof Z.type?"notScheduled"!==Z.state&&(Z.cancelFn&&Z.data.isPeriodic||0===Z.runCount)&&("number"==typeof D?delete f[D]:D&&(D[Ne]=null),Z.zone.cancelTask(Z)):T.apply(e,S)})}Zone.__load_patch("legacy",e=>{const n=e[Zone.__symbol__("legacyPatch")];n&&n()}),Zone.__load_patch("queueMicrotask",(e,n,i)=>{i.patchMethod(e,"queueMicrotask",r=>function(c,u){n.current.scheduleMicroTask("queueMicrotask",u[0])})}),Zone.__load_patch("timers",e=>{const n="set",i="clear";ye(e,n,i,"Timeout"),ye(e,n,i,"Interval"),ye(e,n,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{ye(e,"request","cancel","AnimationFrame"),ye(e,"mozRequest","mozCancel","AnimationFrame"),ye(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,n)=>{const i=["alert","prompt","confirm"];for(let r=0;r<i.length;r++)ce(e,i[r],(u,f,_)=>function(g,T){return n.current.run(u,e,T,_)})}),Zone.__load_patch("EventTarget",(e,n,i)=>{(function(e,n){n.patchEventPrototype(e,n)})(e,i),function(e,n){if(Zone[n.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:r,TRUE_STR:c,FALSE_STR:u,ZONE_SYMBOL_PREFIX:f}=n.getGlobalObjects();for(let g=0;g<i.length;g++){const T=i[g],D=f+(T+u),Z=f+(T+c);r[T]={},r[T][u]=D,r[T][c]=Z}const _=e.EventTarget;_&&_.prototype&&n.patchEventTarget(e,[_&&_.prototype])}(e,i);const r=e.XMLHttpRequestEventTarget;r&&r.prototype&&i.patchEventTarget(e,[r.prototype])}),Zone.__load_patch("MutationObserver",(e,n,i)=>{ve("MutationObserver"),ve("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,n,i)=>{ve("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,n,i)=>{ve("FileReader")}),Zone.__load_patch("on_property",(e,n,i)=>{!function(e,n){if(Re&&!We||Zone[e.symbol("patchEvents")])return;const i="undefined"!=typeof WebSocket,r=n.__Zone_ignore_on_properties;if(je){const f=window,_=function(){try{const e=pe.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}()?[{target:f,ignoreProperties:["error"]}]:[];W(f,Te.concat(["messageerror"]),r&&r.concat(_),de(f)),W(Document.prototype,Te,r),void 0!==f.SVGElement&&W(f.SVGElement.prototype,Te,r),W(Element.prototype,Te,r),W(HTMLElement.prototype,Te,r),W(HTMLMediaElement.prototype,wt,r),W(HTMLFrameSetElement.prototype,Ve.concat(nt),r),W(HTMLBodyElement.prototype,Ve.concat(nt),r),W(HTMLFrameElement.prototype,tt,r),W(HTMLIFrameElement.prototype,tt,r);const g=f.HTMLMarqueeElement;g&&W(g.prototype,Dt,r);const T=f.Worker;T&&W(T.prototype,Ot,r)}const c=n.XMLHttpRequest;c&&W(c.prototype,rt,r);const u=n.XMLHttpRequestEventTarget;u&&W(u&&u.prototype,rt,r),"undefined"!=typeof IDBIndex&&(W(IDBIndex.prototype,Ee,r),W(IDBRequest.prototype,Ee,r),W(IDBOpenDBRequest.prototype,Ee,r),W(IDBDatabase.prototype,Ee,r),W(IDBTransaction.prototype,Ee,r),W(IDBCursor.prototype,Ee,r)),i&&W(WebSocket.prototype,St,r)}(i,e)}),Zone.__load_patch("customElements",(e,n,i)=>{!function(e,n){const{isBrowser:i,isMix:r}=n.getGlobalObjects();(i||r)&&e.customElements&&"customElements"in e&&n.patchCallbacks(n,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,n)=>{!function(T){const m=T.XMLHttpRequest;if(!m)return;const S=m.prototype;let Z=S[Ze],B=S[Ie];if(!Z){const v=T.XMLHttpRequestEventTarget;if(v){const M=v.prototype;Z=M[Ze],B=M[Ie]}}const V="readystatechange",E="scheduled";function d(v){const M=v.data,R=M.target;R[u]=!1,R[_]=!1;const J=R[c];Z||(Z=R[Ze],B=R[Ie]),J&&B.call(R,V,J);const le=R[c]=()=>{if(R.readyState===R.DONE)if(!M.aborted&&R[u]&&v.state===E){const te=R[n.__symbol__("loadfalse")];if(0!==R.status&&te&&te.length>0){const re=v.invoke;v.invoke=function(){const F=R[n.__symbol__("loadfalse")];for(let I=0;I<F.length;I++)F[I]===v&&F.splice(I,1);!M.aborted&&v.state===E&&re.call(v)},te.push(v)}else v.invoke()}else!M.aborted&&!1===R[u]&&(R[_]=!0)};return Z.call(R,V,le),R[i]||(R[i]=v),A.apply(R,M.args),R[u]=!0,v}function L(){}function z(v){const M=v.data;return M.aborted=!0,Y.apply(M.target,M.args)}const j=ce(S,"open",()=>function(v,M){return v[r]=0==M[2],v[f]=M[1],j.apply(v,M)}),O=x("fetchTaskAborting"),X=x("fetchTaskScheduling"),A=ce(S,"send",()=>function(v,M){if(!0===n.current[X]||v[r])return A.apply(v,M);{const R={target:v,url:v[f],isPeriodic:!1,args:M,aborted:!1},J=Me("XMLHttpRequest.send",L,R,d,z);v&&!0===v[_]&&!R.aborted&&J.state===E&&J.invoke()}}),Y=ce(S,"abort",()=>function(v,M){const R=function(v){return v[i]}(v);if(R&&"string"==typeof R.type){if(null==R.cancelFn||R.data&&R.data.aborted)return;R.zone.cancelTask(R)}else if(!0===n.current[O])return Y.apply(v,M)})}(e);const i=x("xhrTask"),r=x("xhrSync"),c=x("xhrListener"),u=x("xhrScheduled"),f=x("xhrURL"),_=x("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function(e,n){const i=e.constructor.name;for(let r=0;r<n.length;r++){const c=n[r],u=e[c];if(u){if(!Fe(ue(e,c)))continue;e[c]=(_=>{const g=function(){return _.apply(this,Ae(arguments,i+"."+c))};return ae(g,_),g})(u)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,n)=>{function i(r){return function(c){et(e,r).forEach(f=>{const _=e.PromiseRejectionEvent;if(_){const g=new _(r,{promise:c.promise,reason:c.rejection});f.invoke(g)}})}}e.PromiseRejectionEvent&&(n[x("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),n[x("rejectionHandledHandler")]=i("rejectionhandled"))})},416:(we,ue,he)=>{he(277)}},we=>{we(we.s=416)}]);
/*! (C) Andrea Giammarchi - @WebReflection - ISC Style License */
!function(e,t){"use strict";function n(){var e=C.splice(0,C.length);for(We=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)p(e[n],t)}function o(e){return function(t){Re(t)&&(p(t,e),le.length&&r(t.querySelectorAll(le),e))}}function l(e){var t=Be.call(e,"is"),n=e.nodeName.toUpperCase(),r=ie.call(re,t?ee+t.toUpperCase():J+n);return t&&-1<r&&!a(n,t)?-1:r}function a(e,t){return-1<le.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[X]||2,a=e[$]||3;!rt||o&&o!==t||!t[B]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[B](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=o(e);return function(e){C.push(t,e.target),We&&clearTimeout(We),We=setTimeout(n,1)}}function c(e){nt&&(nt=!1,e.currentTarget.removeEventListener(W,c)),le.length&&r((e.target||g).querySelectorAll(le),e.detail===x?x:_),Ve&&function(){for(var e,t=0,n=Ue.length;t<n;t++)e=Ue[t],ae.contains(e)||(n--,Ue.splice(t--,1),p(e,x))}()}function s(e,t){var n=this;Ge.call(n,e,t),w.call(n,{target:n})}function m(e,t,n){var r=t.apply(e,n),o=l(r);return-1<o&&F(r,oe[o]),n.pop()&&le.length&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],F(t,oe[l(t)])}(r.querySelectorAll(le)),r}function f(e,t){De(e,t),N?N.observe(e,$e):(tt&&(e.setAttribute=s,e[R]=O(e),e[U](Y,w)),e[U](Q,i)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function d(e){throw new Error("A "+e+" type is already registered")}function p(e,t){var n,r,o=l(e);-1<o&&!xe.call(e,"TEMPLATE")&&(I(e,oe[o]),o=0,t!==_||e[_]?t!==x||e[x]||(e[_]=!1,e[x]=!0,r="disconnected",o=1):(e[x]=!1,e[_]=!0,r="connected",o=1,Ve&&ie.call(Ue,e)<0&&Ue.push(e)),o&&(n=e[t+k]||e[r+k])&&n.call(e))}function h(){}function T(e,t,n){var r=n&&n[q]||"",o=t.prototype,l=Ne(o),a=t.observedAttributes||fe,i={prototype:l};Pe(l,z,{value:function(){if(ye)ye=!1;else if(!this[Me]){this[Me]=!0,new t(this),o[z]&&o[z].call(this);var e=Ce[Ae.get(t)];(!ve||e.create.length>1)&&E(this)}}}),Pe(l,B,{value:function(e){-1<ie.call(a,e)&&o[B]&&o[B].apply(this,arguments)}}),o[j]&&Pe(l,Z,{value:o[j]}),o[G]&&Pe(l,K,{value:o[G]}),r&&(i[q]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),g[V](e.toLowerCase(),i),v(e),we[e].r()}function L(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function M(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[B],r=n?e.attributes:fe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function v(e){return(e=e.toUpperCase())in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function H(){Ee&&delete e.customElements,me(e,"customElements",{configurable:!0,value:new h}),me(e,"CustomElementRegistry",{configurable:!0,value:h});for(var t=y.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Me]||(ye=!0,t=Ce[Ae.get(e.constructor)],(e=(r=ve&&1===t.create.length)?Reflect.construct(n,fe,t.constructor):g.createElement.apply(g,t.create))[Me]=!0,ye=!1,r||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){!0,me(n,Me,{value:e[t]})}}}(t[n]));g.createElement=function(e,t){var n=M(t);return n?Xe.call(this,e,Oe(n)):Xe.call(this,e)},Ye||(et=!0,g[V](""))}var g=e.document,b=e.Object,y=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function(e,t){(t=t.toLowerCase())in i||(i[e]=(i[e]||[]).concat(t),i[t]=i[t.toUpperCase()]=e)},i=(b.create||b)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],i[o]=r,t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?i[e]||(l.test(e)?[]:""):function(e){var t,n=[];for(t in i)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return l.test(e)?a(e,t):a(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var C,w,A,O,N,D,I,F,S,V="registerElement",P=1e5*e.Math.random()>>0,R="__"+V+P,U="addEventListener",_="attached",k="Callback",x="detached",q="extends",B="attributeChanged"+k,Z=_+k,j="connected"+k,G="disconnected"+k,z="created"+k,K=x+k,X="ADDITION",$="REMOVAL",Q="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",J="<",ee="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],oe=[],le="",ae=g.documentElement,ie=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ue=b.prototype,ce=ue.hasOwnProperty,se=ue.isPrototypeOf,me=b.defineProperty,fe=[],de=b.getOwnPropertyDescriptor,pe=b.getOwnPropertyNames,he=b.getPrototypeOf,Te=b.setPrototypeOf,Le=!!b.__proto__,Me="__dreCEv1",Ee=e.customElements,ve=!/^force/.test(t.type)&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),He=b.create||b,ge=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ie.call(t,e)]},set:function(r,o){(e=ie.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},ye=!1,Ce=He(null),we=He(null),Ae=new ge,Oe=function(e){return e.toLowerCase()},Ne=b.create||function e(t){return t?(e.prototype=t,new e):this},De=Te||(Le?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,r=pe(t),o=0,l=r.length;o<l;o++)n=r[o],ce.call(e,n)||me(e,n,de(t,n))}return function(t,n){do{e(t,n)}while((n=he(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ie=e.MutationObserver||e.WebKitMutationObserver,Fe=e.HTMLAnchorElement,Se=(e.HTMLElement||e.Element||e.Node).prototype,Ve=!se.call(Se,ae),Pe=Ve?function(e,t,n){return e[t]=n.value,e}:me,Re=Ve?function(e){return 1===e.nodeType}:function(e){return se.call(Se,e)},Ue=Ve&&[],_e=Se.attachShadow,ke=Se.cloneNode,xe=Se.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},qe=Se.dispatchEvent,Be=Se.getAttribute,Ze=Se.hasAttribute,je=Se.removeAttribute,Ge=Se.setAttribute,ze=g.createElement,Ke=g.importNode,Xe=ze,$e=Ie&&{attributes:!0,characterData:!0,attributeOldValue:!0},Qe=Ie||function(e){tt=!1,ae.removeEventListener(Q,Qe)},We=0,Ye=V in g&&!/^force-all/.test(t.type),Je=!0,et=!1,tt=!0,nt=!0,rt=!0;if(Ie&&((S=g.createElement("div")).innerHTML="<div><div></div></div>",new Ie(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(S=de(Se,"innerHTML"))&&S.set;n&&me(Se,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),S=null}).observe(S,{childList:!0,subtree:!0}),S.innerHTML=""),Ye||(Te||Le?(I=function(e,t){se.call(t,e)||f(e,t)},F=f):F=I=function(e,t){e[R]||(e[R]=b(!0),f(e,t))},Ve?(tt=!1,function(){var e=de(Se,U),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=Be.call(this,e),t.newValue=null,t[$]=t.attrChange=2,je.call(this,e),qe.call(this,t)},r=function(e,t){var n=Ze.call(this,e),r=n&&Be.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[X]=o.attrChange=0,qe.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[R],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],(t=new CustomEvent(Q,{bubbles:!0})).attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[X]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,qe.call(n,t))};e.value=function(e,l,a){e===Q&&this[B]&&this.setAttribute!==r&&(this[R]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},me(Se,U,e)}()):Ie||(ae[U](Q,Qe),ae.setAttribute(R,1),ae.removeAttribute(R),tt&&(w=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[R],o[R]=n=O(o),n){if(!(r in t))return A(0,o,r,t[r],n[r],X);if(n[r]!==t[r])return A(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return A(2,o,r,t[r],n[r],$)}},A=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,i(a)},O=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),g[V]=function(e,t){if(n=e.toUpperCase(),Je&&(Je=!1,Ie?(N=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ie(function(r){for(var o,l,a,i=0,u=r.length;i<u;i++)"childList"===(o=r[i]).type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,rt&&l[B]&&"style"!==o.attributeName&&(a=Be.call(l,o.attributeName))!==o.oldValue&&l[B](o.attributeName,o.oldValue,a))})}(o(_),o(x)),(D=function(e){return N.observe(e,{childList:!0,subtree:!0}),e})(g),_e&&(Se.attachShadow=function(){return D(_e.apply(this,arguments))})):(C=[],g[U]("DOMNodeInserted",u(_)),g[U]("DOMNodeRemoved",u(x))),g[U](W,c),g[U]("readystatechange",c),g.importNode=function(e,t){switch(e.nodeType){case 1:return m(g,Ke,[e,!!t]);case 11:for(var n=g.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l++)n.appendChild(g.importNode(r[l],!!t));return n;default:return ke.call(e,!!t)}},Se.cloneNode=function(e){return m(this,ke,[!!e])}),et)return et=!1;if(-2<ie.call(re,ee+n)+ie.call(re,J+n)&&d(e),!te.test(n)||-1<ie.call(ne,n))throw new Error("The type "+e+" is invalid");var n,l,a=function(){return s?g.createElement(f,n):g.createElement(f)},i=t||ue,s=ce.call(i,q),f=s?t[q].toUpperCase():n;return s&&-1<ie.call(re,J+f)&&d(f),l=re.push((s?ee:J)+n)-1,le=le.concat(le.length?",":"",s?f+'[is="'+e.toLowerCase()+'"]':f),a.prototype=oe[l]=ce.call(i,"prototype")?i.prototype:Ne(Se),le.length&&r(g.querySelectorAll(le),_),a},g.createElement=Xe=function(e,t){var n=M(t),r=n?ze.call(g,e,Oe(n)):ze.call(g,e),o=""+e,l=ie.call(re,(n?ee:J)+(n||o).toUpperCase()),i=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=a(o.toUpperCase(),n))),rt=!g.createElement.innerHTMLHelper,i&&F(r,oe[l]),r}),addEventListener("beforeunload",function(){delete g.createElement,delete g.importNode,delete g[V]},!1),h.prototype={constructor:h,define:ve?function(e,t,n){if(n)T(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Ee.define(e,t)}}:T,get:ve?function(e){return Ee.get(e)||L(e)}:L,whenDefined:ve?function(e){return be.race([Ee.whenDefined(e),v(e)])}:v},!Ee||/^force/.test(t.type))H();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[q]="a",(t.prototype=Ne(Fe.prototype)).constructor=t,e.customElements.define(r,t,n),!o.test(g.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Fe,[],e)},{},"document-register-element-a"+P)}catch(e){H()}if(!t.noBuiltIn)try{if(ze.call(g,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Oe=function(e){return{is:e.toLowerCase()}}}}(window);
var fke=Object.defineProperty,pke=Object.defineProperties,gke=Object.getOwnPropertyDescriptors,AC=Object.getOwnPropertySymbols,jq=Object.prototype.hasOwnProperty,Vq=Object.prototype.propertyIsEnumerable,Er=Math.pow,Uq=(jt,Ye,Je)=>Ye in jt?fke(jt,Ye,{enumerable:!0,configurable:!0,writable:!0,value:Je}):jt[Ye]=Je,at=(jt,Ye)=>{for(var Je in Ye||(Ye={}))jq.call(Ye,Je)&&Uq(jt,Je,Ye[Je]);if(AC)for(var Je of AC(Ye))Vq.call(Ye,Je)&&Uq(jt,Je,Ye[Je]);return jt},Cn=(jt,Ye)=>pke(jt,gke(Ye)),zq=(jt,Ye)=>{var Je={};for(var lt in jt)jq.call(jt,lt)&&Ye.indexOf(lt)<0&&(Je[lt]=jt[lt]);if(null!=jt&&AC)for(var lt of AC(jt))Ye.indexOf(lt)<0&&Vq.call(jt,lt)&&(Je[lt]=jt[lt]);return Je};(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{440:(jt,Ye,Je)=>{var lt=Je(52).default;jt.exports=function Q(we,fe,K){function V(L,w){if(!fe[L]){if(!we[L]){if(F)return F(L,!0);var R=new Error("Cannot find module '"+L+"'");throw R.code="MODULE_NOT_FOUND",R}var T=fe[L]={exports:{}};we[L][0].call(T.exports,function(y){return V(we[L][1][y]||y)},T,T.exports,Q,we,fe,K)}return fe[L].exports}for(var F=void 0,Y=0;Y<K.length;Y++)V(K[Y]);return V}({1:[function(Q,we,fe){var K,V;K=this,V=function(K,V,F,Y,L){"use strict";function x(Se,Ue,Ke,Be){return new(Ke||(Ke=Promise))(function(q,ge){function le(gt){try{_t(Be.next(gt))}catch(Ae){ge(Ae)}}function qe(gt){try{_t(Be.throw(gt))}catch(Ae){ge(Ae)}}function _t(gt){gt.done?q(gt.value):function(q){return q instanceof Ke?q:new Ke(function(ge){ge(q)})}(gt.value).then(le,qe)}_t((Be=Be.apply(Se,Ue||[])).next())})}function A(Se,Ue){var Be,X,q,ge,Ke={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return ge={next:le(0),throw:le(1),return:le(2)},"function"==typeof Symbol&&(ge[Symbol.iterator]=function(){return this}),ge;function le(_t){return function(gt){return function(_t){if(Be)throw new TypeError("Generator is already executing.");for(;Ke;)try{if(Be=1,X&&(q=2&_t[0]?X.return:_t[0]?X.throw||((q=X.return)&&q.call(X),0):X.next)&&!(q=q.call(X,_t[1])).done)return q;switch(X=0,q&&(_t=[2&_t[0],q.value]),_t[0]){case 0:case 1:q=_t;break;case 4:return Ke.label++,{value:_t[1],done:!1};case 5:Ke.label++,X=_t[1],_t=[0];continue;case 7:_t=Ke.ops.pop(),Ke.trys.pop();continue;default:if(!(q=(q=Ke.trys).length>0&&q[q.length-1])&&(6===_t[0]||2===_t[0])){Ke=0;continue}if(3===_t[0]&&(!q||_t[1]>q[0]&&_t[1]<q[3])){Ke.label=_t[1];break}if(6===_t[0]&&Ke.label<q[1]){Ke.label=q[1],q=_t;break}if(q&&Ke.label<q[2]){Ke.label=q[2],Ke.ops.push(_t);break}q[2]&&Ke.ops.pop(),Ke.trys.pop();continue}_t=Ue.call(Se,Ke)}catch(gt){_t=[6,gt],X=0}finally{Be=q=0}if(5&_t[0])throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}([_t,gt])}}}function J(Se){var Ue=Se.length,Ke=0;return new L.Readable({objectMode:!0,read:function(){this.push(Ke<Ue?Se[Ke++]:null)}})}K.addJsonLdToStore=function(Se,Ue){return x(this,void 0,void 0,function(){var Ke,Be,X;return A(this,function(q){switch(q.label){case 0:return"string"!=typeof Se?[3,4]:[4,fetch(Se,{redirect:"follow"})];case 1:return(Be=q.sent()).ok?[4,Be.json()]:[3,3];case 2:Ke=q.sent(),q.label=3;case 3:return[3,5];case 4:Ke=Se,q.label=5;case 5:return Ke?[4,V.toRDF(Ke)]:[3,7];case 6:X=q.sent(),Ue.import(J(X)),q.label=7;case 7:return[2,Ue]}})})},K.addN3ToStore=function(Se,Ue){return x(this,void 0,void 0,function(){var Ke,Be,X;return A(this,function(q){switch(q.label){case 0:return"string"==typeof Se&&(null==Se?void 0:Se.startsWith("http"))?[4,fetch(Se,{redirect:"follow"})]:[3,4];case 1:return(Be=q.sent()).ok?[4,Be.text()]:[3,3];case 2:Ke=q.sent(),q.label=3;case 3:return[3,5];case 4:Ke=Se,q.label=5;case 5:return Ke&&(X=new F.Parser({format:"n3"}).parse(Ke),Ue.import(J(X))),[2,Ue]}})})},K.addRdfXmlToStore=function(Se,Ue){return x(this,void 0,void 0,function(){var Ke,Be,X,q;return A(this,function(ge){switch(ge.label){case 0:return"string"==typeof Se&&(null==Se?void 0:Se.startsWith("http"))?[4,fetch(Se,{redirect:"follow"})]:[3,4];case 1:return(Be=ge.sent()).ok?[4,Be.text()]:[3,3];case 2:Ke=ge.sent(),ge.label=3;case 3:return[3,5];case 4:Ke=Se,ge.label=5;case 5:return Ke?(X=new Y.RdfXmlParser({dataFactory:F.DataFactory,strict:!0}),q=new Promise(function(le){X.once("end",function(){return le(Ue)})}),Ue.import(X),X.write(Ke),X.end(),[2,q]):[2,Ue]}})})},K.arrayToStream=J,K.deserializeN3Store=function(Se,Ue){var Ke=JSON.parse(Se),Be=new F.Store;return Object.assign(Be,Ke,{_factory:null!=Ue?Ue:F.DataFactory}),Be},K.readQuads=function(Se,Ue,Ke,Be,X){return Se.readQuads(Ue,Ke,Be,X)},K.serializeN3Store=function(Se){var Ue=Object.assign({},Se);return delete Ue._factory,JSON.stringify(Ue)},K.streamToArray=function(Se){return new Promise(function(Ue,Ke){var Be=[];Se.on("data",function(X){Be.push(X)}).once("end",function(){Ue(Be)}).once("error",function(X){Ke(X)})})},Object.keys(F).forEach(function(Se){"default"!==Se&&!K.hasOwnProperty(Se)&&Object.defineProperty(K,Se,{enumerable:!0,get:function(){return F[Se]}})}),Object.defineProperty(K,"__esModule",{value:!0})},"object"==typeof fe&&void 0!==we?V(fe,Q("jsonld"),Q("n3"),Q("rdfxml-streaming-parser"),Q("readable-stream")):V((K="undefined"!=typeof globalThis?globalThis:K||self).tripleStoreUtils={},K.jsonld,K.n3,K.rdfxmlStreamingParser,K.readablestream)},{jsonld:26,n3:43,"rdfxml-streaming-parser":64,"readable-stream":81}],2:[function(Q,we,fe){"use strict";fe.byteLength=function(A){var E=C(A),H=E[1];return 3*(E[0]+H)/4-H},fe.toByteArray=function(A){var E,G,I=C(A),H=I[0],M=I[1],P=new F(function(A,E,I){return 3*(E+I)/4-I}(0,H,M)),Z=0,S=M>0?H-4:H;for(G=0;G<S;G+=4)E=V[A.charCodeAt(G)]<<18|V[A.charCodeAt(G+1)]<<12|V[A.charCodeAt(G+2)]<<6|V[A.charCodeAt(G+3)],P[Z++]=E>>16&255,P[Z++]=E>>8&255,P[Z++]=255&E;return 2===M&&(E=V[A.charCodeAt(G)]<<2|V[A.charCodeAt(G+1)]>>4,P[Z++]=255&E),1===M&&(E=V[A.charCodeAt(G)]<<10|V[A.charCodeAt(G+1)]<<4|V[A.charCodeAt(G+2)]>>2,P[Z++]=E>>8&255,P[Z++]=255&E),P},fe.fromByteArray=function(A){for(var E,I=A.length,H=I%3,M=[],P=16383,Z=0,S=I-H;Z<S;Z+=P)M.push(b(A,Z,Z+P>S?S:Z+P));return 1===H?M.push(K[(E=A[I-1])>>2]+K[E<<4&63]+"=="):2===H&&M.push(K[(E=(A[I-2]<<8)+A[I-1])>>10]+K[E>>4&63]+K[E<<2&63]+"="),M.join("")};for(var K=[],V=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=0,w=Y.length;L<w;++L)K[L]=Y[L],V[Y.charCodeAt(L)]=L;function C(A){var E=A.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=A.indexOf("=");return-1===I&&(I=E),[I,I===E?0:4-I%4]}function v(A){return K[A>>18&63]+K[A>>12&63]+K[A>>6&63]+K[63&A]}function b(A,E,I){for(var M=[],P=E;P<I;P+=3)M.push(v((A[P]<<16&16711680)+(A[P+1]<<8&65280)+(255&A[P+2])));return M.join("")}V["-".charCodeAt(0)]=62,V["_".charCodeAt(0)]=63},{}],3:[function(Q,we,fe){},{}],4:[function(Q,we,fe){var K=Q("buffer"),V=K.Buffer;function F(L,w){for(var C in L)w[C]=L[C]}function Y(L,w,C){return V(L,w,C)}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?we.exports=K:(F(K,fe),fe.Buffer=Y),F(V,Y),Y.from=function(L,w,C){if("number"==typeof L)throw new TypeError("Argument must not be a number");return V(L,w,C)},Y.alloc=function(L,w,C){if("number"!=typeof L)throw new TypeError("Argument must be a number");var R=V(L);return void 0!==w?"string"==typeof C?R.fill(w,C):R.fill(w):R.fill(0),R},Y.allocUnsafe=function(L){if("number"!=typeof L)throw new TypeError("Argument must be a number");return V(L)},Y.allocUnsafeSlow=function(L){if("number"!=typeof L)throw new TypeError("Argument must be a number");return K.SlowBuffer(L)}},{buffer:6}],5:[function(Q,we,fe){"use strict";var K=Q("safe-buffer").Buffer,V=K.isEncoding||function(M){switch((M=""+M)&&M.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function L(M){var P;switch(this.encoding=function(M){var P=function(M){if(!M)return"utf8";for(var P;;)switch(M){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return M;default:if(P)return;M=(""+M).toLowerCase(),P=!0}}(M);if("string"!=typeof P&&(K.isEncoding===V||!V(M)))throw new Error("Unknown encoding: "+M);return P||M}(M),this.encoding){case"utf16le":this.text=b,this.end=x,P=4;break;case"utf8":this.fillLast=T,P=4;break;case"base64":this.text=A,this.end=E,P=3;break;default:return this.write=I,void(this.end=H)}this.lastNeed=0,this.lastTotal=0,this.lastChar=K.allocUnsafe(P)}function w(M){return M<=127?0:M>>5==6?2:M>>4==14?3:M>>3==30?4:M>>6==2?-1:-2}function T(M){var P=this.lastTotal-this.lastNeed,Z=function(M,P,Z){if(128!=(192&P[0]))return M.lastNeed=0,"\ufffd";if(M.lastNeed>1&&P.length>1){if(128!=(192&P[1]))return M.lastNeed=1,"\ufffd";if(M.lastNeed>2&&P.length>2&&128!=(192&P[2]))return M.lastNeed=2,"\ufffd"}}(this,M);return void 0!==Z?Z:this.lastNeed<=M.length?(M.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(M.copy(this.lastChar,P,0,M.length),void(this.lastNeed-=M.length))}function b(M,P){if((M.length-P)%2==0){var Z=M.toString("utf16le",P);if(Z){var S=Z.charCodeAt(Z.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1],Z.slice(0,-1)}return Z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=M[M.length-1],M.toString("utf16le",P,M.length-1)}function x(M){var P=M&&M.length?this.write(M):"";return this.lastNeed?P+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):P}function A(M,P){var Z=(M.length-P)%3;return 0===Z?M.toString("base64",P):(this.lastNeed=3-Z,this.lastTotal=3,1===Z?this.lastChar[0]=M[M.length-1]:(this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1]),M.toString("base64",P,M.length-Z))}function E(M){var P=M&&M.length?this.write(M):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function I(M){return M.toString(this.encoding)}function H(M){return M&&M.length?this.write(M):""}fe.StringDecoder=L,L.prototype.write=function(M){if(0===M.length)return"";var P,Z;if(this.lastNeed){if(void 0===(P=this.fillLast(M)))return"";Z=this.lastNeed,this.lastNeed=0}else Z=0;return Z<M.length?P?P+this.text(M,Z):this.text(M,Z):P||""},L.prototype.end=function(M){var P=M&&M.length?this.write(M):"";return this.lastNeed?P+"\ufffd":P},L.prototype.text=function(M,P){var Z=function(M,P,Z){var S=P.length-1;if(S<Z)return 0;var G=w(P[S]);return G>=0?(G>0&&(M.lastNeed=G-1),G):--S<Z||-2===G?0:(G=w(P[S]))>=0?(G>0&&(M.lastNeed=G-2),G):--S<Z||-2===G?0:(G=w(P[S]))>=0?(G>0&&(2===G?G=0:M.lastNeed=G-3),G):0}(this,M,P);if(!this.lastNeed)return M.toString("utf8",P);this.lastTotal=Z;var S=M.length-(Z-this.lastNeed);return M.copy(this.lastChar,0,S),M.toString("utf8",P,S)},L.prototype.fillLast=function(M){if(this.lastNeed<=M.length)return M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,M.length),this.lastNeed-=M.length}},{"safe-buffer":4}],6:[function(Q,we,fe){(function(K){(function(){"use strict";var V=Q("base64-js"),F=Q("ieee754");fe.Buffer=C,fe.SlowBuffer=function(U){return+U!=U&&(U=0),C.alloc(+U)},fe.INSPECT_MAX_BYTES=50;var Y=2147483647;function w(U){if(U>Y)throw new RangeError('The value "'+U+'" is invalid for option "size"');var k=new Uint8Array(U);return k.__proto__=C.prototype,k}function C(U,k,z){if("number"==typeof U){if("string"==typeof k)throw new TypeError('The "string" argument must be of type string. Received type number');return v(U)}return R(U,k,z)}function R(U,k,z){if("string"==typeof U)return function(U,k){if(("string"!=typeof k||""===k)&&(k="utf8"),!C.isEncoding(k))throw new TypeError("Unknown encoding: "+k);var z=0|M(U,k),Le=w(z),nt=Le.write(U,k);return nt!==z&&(Le=Le.slice(0,nt)),Le}(U,k);if(ArrayBuffer.isView(U))return x(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(gt(U,ArrayBuffer)||U&&gt(U.buffer,ArrayBuffer))return function(U,k,z){if(k<0||U.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<k+(z||0))throw new RangeError('"length" is outside of buffer bounds');var Le;return(Le=void 0===k&&void 0===z?new Uint8Array(U):void 0===z?new Uint8Array(U,k):new Uint8Array(U,k,z)).__proto__=C.prototype,Le}(U,k,z);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var Le=U.valueOf&&U.valueOf();if(null!=Le&&Le!==U)return C.from(Le,k,z);var nt=function(U){if(C.isBuffer(U)){var k=0|I(U.length),z=w(k);return 0===z.length||U.copy(z,0,0,k),z}return void 0!==U.length?"number"!=typeof U.length||Ae(U.length)?w(0):x(U):"Buffer"===U.type&&Array.isArray(U.data)?x(U.data):void 0}(U);if(nt)return nt;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return C.from(U[Symbol.toPrimitive]("string"),k,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function T(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function v(U){return T(U),w(U<0?0:0|I(U))}function x(U){for(var k=U.length<0?0:0|I(U.length),z=w(k),Le=0;Le<k;Le+=1)z[Le]=255&U[Le];return z}function I(U){if(U>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|U}function M(U,k){if(C.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||gt(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var z=U.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===z)return 0;for(var nt=!1;;)switch(k){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return q(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return qe(U).length;default:if(nt)return Le?-1:q(U).length;k=(""+k).toLowerCase(),nt=!0}}function P(U,k,z){var Le=!1;if((void 0===k||k<0)&&(k=0),k>this.length||((void 0===z||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(k>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return ae(this,k,z);case"utf8":case"utf-8":return ve(this,k,z);case"ascii":return He(this,k,z);case"latin1":case"binary":return J(this,k,z);case"base64":return re(this,k,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,k,z);default:if(Le)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),Le=!0}}function Z(U,k,z){var Le=U[k];U[k]=U[z],U[z]=Le}function S(U,k,z,Le,nt){if(0===U.length)return-1;if("string"==typeof z?(Le=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),Ae(z=+z)&&(z=nt?0:U.length-1),z<0&&(z=U.length+z),z>=U.length){if(nt)return-1;z=U.length-1}else if(z<0){if(!nt)return-1;z=0}if("string"==typeof k&&(k=C.from(k,Le)),C.isBuffer(k))return 0===k.length?-1:G(U,k,z,Le,nt);if("number"==typeof k)return k&=255,"function"==typeof Uint8Array.prototype.indexOf?nt?Uint8Array.prototype.indexOf.call(U,k,z):Uint8Array.prototype.lastIndexOf.call(U,k,z):G(U,[k],z,Le,nt);throw new TypeError("val must be string, number or Buffer")}function G(U,k,z,Le,nt){var Yn,xt=1,Nt=U.length,On=k.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(U.length<2||k.length<2)return-1;xt=2,Nt/=2,On/=2,z/=2}function kn(Ls,gs){return 1===xt?Ls[gs]:Ls.readUInt16BE(gs*xt)}if(nt){var Ti=-1;for(Yn=z;Yn<Nt;Yn++)if(kn(U,Yn)===kn(k,-1===Ti?0:Yn-Ti)){if(-1===Ti&&(Ti=Yn),Yn-Ti+1===On)return Ti*xt}else-1!==Ti&&(Yn-=Yn-Ti),Ti=-1}else for(z+On>Nt&&(z=Nt-On),Yn=z;Yn>=0;Yn--){for(var wi=!0,Xr=0;Xr<On;Xr++)if(kn(U,Yn+Xr)!==kn(k,Xr)){wi=!1;break}if(wi)return Yn}return-1}function ne(U,k,z,Le){z=Number(z)||0;var nt=U.length-z;Le?(Le=Number(Le))>nt&&(Le=nt):Le=nt;var xt=k.length;Le>xt/2&&(Le=xt/2);for(var Nt=0;Nt<Le;++Nt){var On=parseInt(k.substr(2*Nt,2),16);if(Ae(On))return Nt;U[z+Nt]=On}return Nt}function ce(U,k,z,Le){return _t(q(k,U.length-z),U,z,Le)}function se(U,k,z,Le){return _t(function(U){for(var k=[],z=0;z<U.length;++z)k.push(255&U.charCodeAt(z));return k}(k),U,z,Le)}function te(U,k,z,Le){return se(U,k,z,Le)}function Ie(U,k,z,Le){return _t(qe(k),U,z,Le)}function ye(U,k,z,Le){return _t(function(U,k){for(var z,Le,xt=[],Nt=0;Nt<U.length&&!((k-=2)<0);++Nt)Le=(z=U.charCodeAt(Nt))>>8,xt.push(z%256),xt.push(Le);return xt}(k,U.length-z),U,z,Le)}function re(U,k,z){return V.fromByteArray(0===k&&z===U.length?U:U.slice(k,z))}function ve(U,k,z){z=Math.min(U.length,z);for(var Le=[],nt=k;nt<z;){var kn,Yn,Ti,wi,xt=U[nt],Nt=null,On=xt>239?4:xt>223?3:xt>191?2:1;if(nt+On<=z)switch(On){case 1:xt<128&&(Nt=xt);break;case 2:128==(192&(kn=U[nt+1]))&&(wi=(31&xt)<<6|63&kn)>127&&(Nt=wi);break;case 3:Yn=U[nt+2],128==(192&(kn=U[nt+1]))&&128==(192&Yn)&&(wi=(15&xt)<<12|(63&kn)<<6|63&Yn)>2047&&(wi<55296||wi>57343)&&(Nt=wi);break;case 4:Yn=U[nt+2],Ti=U[nt+3],128==(192&(kn=U[nt+1]))&&128==(192&Yn)&&128==(192&Ti)&&(wi=(15&xt)<<18|(63&kn)<<12|(63&Yn)<<6|63&Ti)>65535&&wi<1114112&&(Nt=wi)}null===Nt?(Nt=65533,On=1):Nt>65535&&(Le.push((Nt-=65536)>>>10&1023|55296),Nt=56320|1023&Nt),Le.push(Nt),nt+=On}return function(U){var k=U.length;if(k<=4096)return String.fromCharCode.apply(String,U);for(var z="",Le=0;Le<k;)z+=String.fromCharCode.apply(String,U.slice(Le,Le+=4096));return z}(Le)}fe.kMaxLength=Y,!(C.TYPED_ARRAY_SUPPORT=function(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch(k){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192,C.from=function(U,k,z){return R(U,k,z)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array,C.alloc=function(U,k,z){return function(U,k,z){return T(U),U<=0?w(U):void 0!==k?"string"==typeof z?w(U).fill(k,z):w(U).fill(k):w(U)}(U,k,z)},C.allocUnsafe=function(U){return v(U)},C.allocUnsafeSlow=function(U){return v(U)},C.isBuffer=function(k){return null!=k&&!0===k._isBuffer&&k!==C.prototype},C.compare=function(k,z){if(gt(k,Uint8Array)&&(k=C.from(k,k.offset,k.byteLength)),gt(z,Uint8Array)&&(z=C.from(z,z.offset,z.byteLength)),!C.isBuffer(k)||!C.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===z)return 0;for(var Le=k.length,nt=z.length,xt=0,Nt=Math.min(Le,nt);xt<Nt;++xt)if(k[xt]!==z[xt]){Le=k[xt],nt=z[xt];break}return Le<nt?-1:nt<Le?1:0},C.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(k,z){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(0===k.length)return C.alloc(0);var Le;if(void 0===z)for(z=0,Le=0;Le<k.length;++Le)z+=k[Le].length;var nt=C.allocUnsafe(z),xt=0;for(Le=0;Le<k.length;++Le){var Nt=k[Le];if(gt(Nt,Uint8Array)&&(Nt=C.from(Nt)),!C.isBuffer(Nt))throw new TypeError('"list" argument must be an Array of Buffers');Nt.copy(nt,xt),xt+=Nt.length}return nt},C.byteLength=M,C.prototype._isBuffer=!0,C.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<k;z+=2)Z(this,z,z+1);return this},C.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<k;z+=4)Z(this,z,z+3),Z(this,z+1,z+2);return this},C.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<k;z+=8)Z(this,z,z+7),Z(this,z+1,z+6),Z(this,z+2,z+5),Z(this,z+3,z+4);return this},C.prototype.toLocaleString=C.prototype.toString=function(){var k=this.length;return 0===k?"":0===arguments.length?ve(this,0,k):P.apply(this,arguments)},C.prototype.equals=function(k){if(!C.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||0===C.compare(this,k)},C.prototype.inspect=function(){var k="",z=fe.INSPECT_MAX_BYTES;return k=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(k+=" ... "),"<Buffer "+k+">"},C.prototype.compare=function(k,z,Le,nt,xt){if(gt(k,Uint8Array)&&(k=C.from(k,k.offset,k.byteLength)),!C.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(void 0===z&&(z=0),void 0===Le&&(Le=k?k.length:0),void 0===nt&&(nt=0),void 0===xt&&(xt=this.length),z<0||Le>k.length||nt<0||xt>this.length)throw new RangeError("out of range index");if(nt>=xt&&z>=Le)return 0;if(nt>=xt)return-1;if(z>=Le)return 1;if(this===k)return 0;for(var Nt=(xt>>>=0)-(nt>>>=0),On=(Le>>>=0)-(z>>>=0),kn=Math.min(Nt,On),Yn=this.slice(nt,xt),Ti=k.slice(z,Le),wi=0;wi<kn;++wi)if(Yn[wi]!==Ti[wi]){Nt=Yn[wi],On=Ti[wi];break}return Nt<On?-1:On<Nt?1:0},C.prototype.includes=function(k,z,Le){return-1!==this.indexOf(k,z,Le)},C.prototype.indexOf=function(k,z,Le){return S(this,k,z,Le,!0)},C.prototype.lastIndexOf=function(k,z,Le){return S(this,k,z,Le,!1)},C.prototype.write=function(k,z,Le,nt){if(void 0===z)nt="utf8",Le=this.length,z=0;else if(void 0===Le&&"string"==typeof z)nt=z,Le=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite(Le)?(Le>>>=0,void 0===nt&&(nt="utf8")):(nt=Le,Le=void 0)}var xt=this.length-z;if((void 0===Le||Le>xt)&&(Le=xt),k.length>0&&(Le<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");nt||(nt="utf8");for(var Nt=!1;;)switch(nt){case"hex":return ne(this,k,z,Le);case"utf8":case"utf-8":return ce(this,k,z,Le);case"ascii":return se(this,k,z,Le);case"latin1":case"binary":return te(this,k,z,Le);case"base64":return Ie(this,k,z,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,k,z,Le);default:if(Nt)throw new TypeError("Unknown encoding: "+nt);nt=(""+nt).toLowerCase(),Nt=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function He(U,k,z){var Le="";z=Math.min(U.length,z);for(var nt=k;nt<z;++nt)Le+=String.fromCharCode(127&U[nt]);return Le}function J(U,k,z){var Le="";z=Math.min(U.length,z);for(var nt=k;nt<z;++nt)Le+=String.fromCharCode(U[nt]);return Le}function ae(U,k,z){var Le=U.length;(!k||k<0)&&(k=0),(!z||z<0||z>Le)&&(z=Le);for(var nt="",xt=k;xt<z;++xt)nt+=X(U[xt]);return nt}function _e(U,k,z){for(var Le=U.slice(k,z),nt="",xt=0;xt<Le.length;xt+=2)nt+=String.fromCharCode(Le[xt]+256*Le[xt+1]);return nt}function Te(U,k,z){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+k>z)throw new RangeError("Trying to access beyond buffer length")}function xe(U,k,z,Le,nt,xt){if(!C.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>nt||k<xt)throw new RangeError('"value" argument is out of bounds');if(z+Le>U.length)throw new RangeError("Index out of range")}function Ge(U,k,z,Le,nt,xt){if(z+Le>U.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Se(U,k,z,Le,nt){return k=+k,z>>>=0,nt||Ge(U,0,z,4),F.write(U,k,z,Le,23,4),z+4}function Ue(U,k,z,Le,nt){return k=+k,z>>>=0,nt||Ge(U,0,z,8),F.write(U,k,z,Le,52,8),z+8}C.prototype.slice=function(k,z){var Le=this.length;(k=~~k)<0?(k+=Le)<0&&(k=0):k>Le&&(k=Le),(z=void 0===z?Le:~~z)<0?(z+=Le)<0&&(z=0):z>Le&&(z=Le),z<k&&(z=k);var nt=this.subarray(k,z);return nt.__proto__=C.prototype,nt},C.prototype.readUIntLE=function(k,z,Le){k>>>=0,z>>>=0,Le||Te(k,z,this.length);for(var nt=this[k],xt=1,Nt=0;++Nt<z&&(xt*=256);)nt+=this[k+Nt]*xt;return nt},C.prototype.readUIntBE=function(k,z,Le){k>>>=0,z>>>=0,Le||Te(k,z,this.length);for(var nt=this[k+--z],xt=1;z>0&&(xt*=256);)nt+=this[k+--z]*xt;return nt},C.prototype.readUInt8=function(k,z){return k>>>=0,z||Te(k,1,this.length),this[k]},C.prototype.readUInt16LE=function(k,z){return k>>>=0,z||Te(k,2,this.length),this[k]|this[k+1]<<8},C.prototype.readUInt16BE=function(k,z){return k>>>=0,z||Te(k,2,this.length),this[k]<<8|this[k+1]},C.prototype.readUInt32LE=function(k,z){return k>>>=0,z||Te(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},C.prototype.readUInt32BE=function(k,z){return k>>>=0,z||Te(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},C.prototype.readIntLE=function(k,z,Le){k>>>=0,z>>>=0,Le||Te(k,z,this.length);for(var nt=this[k],xt=1,Nt=0;++Nt<z&&(xt*=256);)nt+=this[k+Nt]*xt;return nt>=(xt*=128)&&(nt-=Math.pow(2,8*z)),nt},C.prototype.readIntBE=function(k,z,Le){k>>>=0,z>>>=0,Le||Te(k,z,this.length);for(var nt=z,xt=1,Nt=this[k+--nt];nt>0&&(xt*=256);)Nt+=this[k+--nt]*xt;return Nt>=(xt*=128)&&(Nt-=Math.pow(2,8*z)),Nt},C.prototype.readInt8=function(k,z){return k>>>=0,z||Te(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},C.prototype.readInt16LE=function(k,z){k>>>=0,z||Te(k,2,this.length);var Le=this[k]|this[k+1]<<8;return 32768&Le?4294901760|Le:Le},C.prototype.readInt16BE=function(k,z){k>>>=0,z||Te(k,2,this.length);var Le=this[k+1]|this[k]<<8;return 32768&Le?4294901760|Le:Le},C.prototype.readInt32LE=function(k,z){return k>>>=0,z||Te(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},C.prototype.readInt32BE=function(k,z){return k>>>=0,z||Te(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},C.prototype.readFloatLE=function(k,z){return k>>>=0,z||Te(k,4,this.length),F.read(this,k,!0,23,4)},C.prototype.readFloatBE=function(k,z){return k>>>=0,z||Te(k,4,this.length),F.read(this,k,!1,23,4)},C.prototype.readDoubleLE=function(k,z){return k>>>=0,z||Te(k,8,this.length),F.read(this,k,!0,52,8)},C.prototype.readDoubleBE=function(k,z){return k>>>=0,z||Te(k,8,this.length),F.read(this,k,!1,52,8)},C.prototype.writeUIntLE=function(k,z,Le,nt){k=+k,z>>>=0,Le>>>=0,nt||xe(this,k,z,Le,Math.pow(2,8*Le)-1,0);var Nt=1,On=0;for(this[z]=255&k;++On<Le&&(Nt*=256);)this[z+On]=k/Nt&255;return z+Le},C.prototype.writeUIntBE=function(k,z,Le,nt){k=+k,z>>>=0,Le>>>=0,nt||xe(this,k,z,Le,Math.pow(2,8*Le)-1,0);var Nt=Le-1,On=1;for(this[z+Nt]=255&k;--Nt>=0&&(On*=256);)this[z+Nt]=k/On&255;return z+Le},C.prototype.writeUInt8=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,1,255,0),this[z]=255&k,z+1},C.prototype.writeUInt16LE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,2,65535,0),this[z]=255&k,this[z+1]=k>>>8,z+2},C.prototype.writeUInt16BE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,2,65535,0),this[z]=k>>>8,this[z+1]=255&k,z+2},C.prototype.writeUInt32LE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,4,4294967295,0),this[z+3]=k>>>24,this[z+2]=k>>>16,this[z+1]=k>>>8,this[z]=255&k,z+4},C.prototype.writeUInt32BE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,4,4294967295,0),this[z]=k>>>24,this[z+1]=k>>>16,this[z+2]=k>>>8,this[z+3]=255&k,z+4},C.prototype.writeIntLE=function(k,z,Le,nt){if(k=+k,z>>>=0,!nt){var xt=Math.pow(2,8*Le-1);xe(this,k,z,Le,xt-1,-xt)}var Nt=0,On=1,kn=0;for(this[z]=255&k;++Nt<Le&&(On*=256);)k<0&&0===kn&&0!==this[z+Nt-1]&&(kn=1),this[z+Nt]=(k/On>>0)-kn&255;return z+Le},C.prototype.writeIntBE=function(k,z,Le,nt){if(k=+k,z>>>=0,!nt){var xt=Math.pow(2,8*Le-1);xe(this,k,z,Le,xt-1,-xt)}var Nt=Le-1,On=1,kn=0;for(this[z+Nt]=255&k;--Nt>=0&&(On*=256);)k<0&&0===kn&&0!==this[z+Nt+1]&&(kn=1),this[z+Nt]=(k/On>>0)-kn&255;return z+Le},C.prototype.writeInt8=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,1,127,-128),k<0&&(k=255+k+1),this[z]=255&k,z+1},C.prototype.writeInt16LE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,2,32767,-32768),this[z]=255&k,this[z+1]=k>>>8,z+2},C.prototype.writeInt16BE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,2,32767,-32768),this[z]=k>>>8,this[z+1]=255&k,z+2},C.prototype.writeInt32LE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,4,2147483647,-2147483648),this[z]=255&k,this[z+1]=k>>>8,this[z+2]=k>>>16,this[z+3]=k>>>24,z+4},C.prototype.writeInt32BE=function(k,z,Le){return k=+k,z>>>=0,Le||xe(this,k,z,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[z]=k>>>24,this[z+1]=k>>>16,this[z+2]=k>>>8,this[z+3]=255&k,z+4},C.prototype.writeFloatLE=function(k,z,Le){return Se(this,k,z,!0,Le)},C.prototype.writeFloatBE=function(k,z,Le){return Se(this,k,z,!1,Le)},C.prototype.writeDoubleLE=function(k,z,Le){return Ue(this,k,z,!0,Le)},C.prototype.writeDoubleBE=function(k,z,Le){return Ue(this,k,z,!1,Le)},C.prototype.copy=function(k,z,Le,nt){if(!C.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!nt&&0!==nt&&(nt=this.length),z>=k.length&&(z=k.length),z||(z=0),nt>0&&nt<Le&&(nt=Le),nt===Le||0===k.length||0===this.length)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(nt<0)throw new RangeError("sourceEnd out of bounds");nt>this.length&&(nt=this.length),k.length-z<nt-Le&&(nt=k.length-z+Le);var xt=nt-Le;if(this===k&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(z,Le,nt);else if(this===k&&Le<z&&z<nt)for(var Nt=xt-1;Nt>=0;--Nt)k[Nt+z]=this[Nt+Le];else Uint8Array.prototype.set.call(k,this.subarray(Le,nt),z);return xt},C.prototype.fill=function(k,z,Le,nt){if("string"==typeof k){if("string"==typeof z?(nt=z,z=0,Le=this.length):"string"==typeof Le&&(nt=Le,Le=this.length),void 0!==nt&&"string"!=typeof nt)throw new TypeError("encoding must be a string");if("string"==typeof nt&&!C.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);if(1===k.length){var xt=k.charCodeAt(0);("utf8"===nt&&xt<128||"latin1"===nt)&&(k=xt)}}else"number"==typeof k&&(k&=255);if(z<0||this.length<z||this.length<Le)throw new RangeError("Out of range index");if(Le<=z)return this;var Nt;if(z>>>=0,Le=void 0===Le?this.length:Le>>>0,k||(k=0),"number"==typeof k)for(Nt=z;Nt<Le;++Nt)this[Nt]=k;else{var On=C.isBuffer(k)?k:C.from(k,nt),kn=On.length;if(0===kn)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(Nt=0;Nt<Le-z;++Nt)this[Nt+z]=On[Nt%kn]}return this};var Ke=/[^+/0-9A-Za-z-_]/g;function X(U){return U<16?"0"+U.toString(16):U.toString(16)}function q(U,k){k=k||1/0;for(var z,Le=U.length,nt=null,xt=[],Nt=0;Nt<Le;++Nt){if((z=U.charCodeAt(Nt))>55295&&z<57344){if(!nt){if(z>56319){(k-=3)>-1&&xt.push(239,191,189);continue}if(Nt+1===Le){(k-=3)>-1&&xt.push(239,191,189);continue}nt=z;continue}if(z<56320){(k-=3)>-1&&xt.push(239,191,189),nt=z;continue}z=65536+(nt-55296<<10|z-56320)}else nt&&(k-=3)>-1&&xt.push(239,191,189);if(nt=null,z<128){if((k-=1)<0)break;xt.push(z)}else if(z<2048){if((k-=2)<0)break;xt.push(z>>6|192,63&z|128)}else if(z<65536){if((k-=3)<0)break;xt.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((k-=4)<0)break;xt.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return xt}function qe(U){return V.toByteArray(function(U){if((U=(U=U.split("=")[0]).trim().replace(Ke,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function _t(U,k,z,Le){for(var nt=0;nt<Le&&!(nt+z>=k.length||nt>=U.length);++nt)k[nt+z]=U[nt];return nt}function gt(U,k){return U instanceof k||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===k.name}function Ae(U){return U!=U}}).call(this)}).call(this,Q("buffer").Buffer)},{"base64-js":2,buffer:6,ieee754:9}],7:[function(Q,we,fe){"use strict";we.exports=function K(V){return null===V||"object"!=typeof V||null!=V.toJSON?JSON.stringify(V):Array.isArray(V)?"["+V.reduce((F,Y,L)=>F+(0===L?"":",")+K(void 0===Y||"symbol"==typeof Y?null:Y),"")+"]":"{"+Object.keys(V).sort().reduce((F,Y,L)=>void 0===V[Y]||"symbol"==typeof V[Y]?F:F+(0===F.length?"":",")+K(Y)+":"+K(V[Y]),"")+"}"}},{}],8:[function(Q,we,fe){"use strict";var F,K="object"==typeof Reflect?Reflect:null,V=K&&"function"==typeof K.apply?K.apply:function(G,ne,ce){return Function.prototype.apply.call(G,ne,ce)};F=K&&"function"==typeof K.ownKeys?K.ownKeys:Object.getOwnPropertySymbols?function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:function(G){return Object.getOwnPropertyNames(G)};var L=Number.isNaN||function(G){return G!=G};function w(){w.init.call(this)}we.exports=w,we.exports.once=function(S,G){return new Promise(function(ne,ce){function se(Ie){S.removeListener(G,te),ce(Ie)}function te(){"function"==typeof S.removeListener&&S.removeListener("error",se),ne([].slice.call(arguments))}Z(S,G,te,{once:!0}),"error"!==G&&function(S,G,ne){"function"==typeof S.on&&Z(S,"error",G,ne)}(S,se,{once:!0})})},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var C=10;function R(S){if("function"!=typeof S)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function T(S){return void 0===S._maxListeners?w.defaultMaxListeners:S._maxListeners}function y(S,G,ne,ce){var se,te,Ie;if(R(ne),void 0===(te=S._events)?(te=S._events=Object.create(null),S._eventsCount=0):(void 0!==te.newListener&&(S.emit("newListener",G,ne.listener?ne.listener:ne),te=S._events),Ie=te[G]),void 0===Ie)Ie=te[G]=ne,++S._eventsCount;else if("function"==typeof Ie?Ie=te[G]=ce?[ne,Ie]:[Ie,ne]:ce?Ie.unshift(ne):Ie.push(ne),(se=T(S))>0&&Ie.length>se&&!Ie.warned){Ie.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+Ie.length+" "+String(G)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=S,ye.type=G,ye.count=Ie.length,function(S){console&&console.warn&&console.warn(S)}(ye)}return S}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(S,G,ne){var ce={fired:!1,wrapFn:void 0,target:S,type:G,listener:ne},se=v.bind(ce);return se.listener=ne,ce.wrapFn=se,se}function x(S,G,ne){var ce=S._events;if(void 0===ce)return[];var se=ce[G];return void 0===se?[]:"function"==typeof se?ne?[se.listener||se]:[se]:ne?function(S){for(var G=new Array(S.length),ne=0;ne<G.length;++ne)G[ne]=S[ne].listener||S[ne];return G}(se):E(se,se.length)}function A(S){var G=this._events;if(void 0!==G){var ne=G[S];if("function"==typeof ne)return 1;if(void 0!==ne)return ne.length}return 0}function E(S,G){for(var ne=new Array(G),ce=0;ce<G;++ce)ne[ce]=S[ce];return ne}function Z(S,G,ne,ce){if("function"==typeof S.on)ce.once?S.once(G,ne):S.on(G,ne);else{if("function"!=typeof S.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(G,function se(te){ce.once&&S.removeEventListener(G,se),ne(te)})}}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(S){if("number"!=typeof S||S<0||L(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");C=S}}),w.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(G){if("number"!=typeof G||G<0||L(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this},w.prototype.getMaxListeners=function(){return T(this)},w.prototype.emit=function(G){for(var ne=[],ce=1;ce<arguments.length;ce++)ne.push(arguments[ce]);var se="error"===G,te=this._events;if(void 0!==te)se=se&&void 0===te.error;else if(!se)return!1;if(se){var Ie;if(ne.length>0&&(Ie=ne[0]),Ie instanceof Error)throw Ie;var ye=new Error("Unhandled error."+(Ie?" ("+Ie.message+")":""));throw ye.context=Ie,ye}var re=te[G];if(void 0===re)return!1;if("function"==typeof re)V(re,this,ne);else{var ve=re.length,Fe=E(re,ve);for(ce=0;ce<ve;++ce)V(Fe[ce],this,ne)}return!0},w.prototype.on=w.prototype.addListener=function(G,ne){return y(this,G,ne,!1)},w.prototype.prependListener=function(G,ne){return y(this,G,ne,!0)},w.prototype.once=function(G,ne){return R(ne),this.on(G,b(this,G,ne)),this},w.prototype.prependOnceListener=function(G,ne){return R(ne),this.prependListener(G,b(this,G,ne)),this},w.prototype.off=w.prototype.removeListener=function(G,ne){var ce,se,te,Ie,ye;if(R(ne),void 0===(se=this._events))return this;if(void 0===(ce=se[G]))return this;if(ce===ne||ce.listener===ne)0==--this._eventsCount?this._events=Object.create(null):(delete se[G],se.removeListener&&this.emit("removeListener",G,ce.listener||ne));else if("function"!=typeof ce){for(te=-1,Ie=ce.length-1;Ie>=0;Ie--)if(ce[Ie]===ne||ce[Ie].listener===ne){ye=ce[Ie].listener,te=Ie;break}if(te<0)return this;0===te?ce.shift():function(S,G){for(;G+1<S.length;G++)S[G]=S[G+1];S.pop()}(ce,te),1===ce.length&&(se[G]=ce[0]),void 0!==se.removeListener&&this.emit("removeListener",G,ye||ne)}return this},w.prototype.removeAllListeners=function(G){var ne,ce,se;if(void 0===(ce=this._events))return this;if(void 0===ce.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ce[G]&&(0==--this._eventsCount?this._events=Object.create(null):delete ce[G]),this;if(0===arguments.length){var Ie,te=Object.keys(ce);for(se=0;se<te.length;++se)"removeListener"!==(Ie=te[se])&&this.removeAllListeners(Ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ne=ce[G]))this.removeListener(G,ne);else if(void 0!==ne)for(se=ne.length-1;se>=0;se--)this.removeListener(G,ne[se]);return this},w.prototype.listeners=function(G){return x(this,G,!0)},w.prototype.rawListeners=function(G){return x(this,G,!1)},w.listenerCount=function(S,G){return"function"==typeof S.listenerCount?S.listenerCount(G):A.call(S,G)},w.prototype.listenerCount=A,w.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},{}],9:[function(Q,we,fe){fe.read=function(K,V,F,Y,L){var w,C,R=8*L-Y-1,T=(1<<R)-1,y=T>>1,v=-7,b=F?L-1:0,x=F?-1:1,A=K[V+b];for(b+=x,w=A&(1<<-v)-1,A>>=-v,v+=R;v>0;w=256*w+K[V+b],b+=x,v-=8);for(C=w&(1<<-v)-1,w>>=-v,v+=Y;v>0;C=256*C+K[V+b],b+=x,v-=8);if(0===w)w=1-y;else{if(w===T)return C?NaN:1/0*(A?-1:1);C+=Math.pow(2,Y),w-=y}return(A?-1:1)*C*Math.pow(2,w-Y)},fe.write=function(K,V,F,Y,L,w){var C,R,T,y=8*w-L-1,v=(1<<y)-1,b=v>>1,x=23===L?Math.pow(2,-24)-Math.pow(2,-77):0,A=Y?0:w-1,E=Y?1:-1,I=V<0||0===V&&1/V<0?1:0;for(V=Math.abs(V),isNaN(V)||V===1/0?(R=isNaN(V)?1:0,C=v):(C=Math.floor(Math.log(V)/Math.LN2),V*(T=Math.pow(2,-C))<1&&(C--,T*=2),(V+=C+b>=1?x/T:x*Math.pow(2,1-b))*T>=2&&(C++,T/=2),C+b>=v?(R=0,C=v):C+b>=1?(R=(V*T-1)*Math.pow(2,L),C+=b):(R=V*Math.pow(2,b-1)*Math.pow(2,L),C=0));L>=8;K[F+A]=255&R,A+=E,R/=256,L-=8);for(C=C<<L|R,y+=L;y>0;K[F+A]=255&C,A+=E,C/=256,y-=8);K[F+A-E]|=128*I}},{}],10:[function(Q,we,fe){we.exports="function"==typeof Object.create?function(V,F){F&&(V.super_=F,V.prototype=Object.create(F.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}))}:function(V,F){if(F){V.super_=F;var Y=function(){};Y.prototype=F.prototype,V.prototype=new Y,V.prototype.constructor=V}}},{}],11:[function(Q,we,fe){"use strict";const{isArray:K,isObject:V,isString:F}=Q("./types"),{asArray:Y}=Q("./util"),{prependBase:L}=Q("./url"),w=Q("./JsonLdError"),C=Q("./ResolvedContext");function T(v){throw new w("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:v})}function y({context:v,base:b}){if(!v)return;const x=v["@context"];if(F(x))v["@context"]=L(b,x);else if(K(x))for(let A=0;A<x.length;++A){const E=x[A];F(E)?x[A]=L(b,E):V(E)&&y({context:{"@context":E},base:b})}else if(V(x))for(const A in x)y({context:x[A],base:b})}we.exports=class{constructor({sharedCache:b}){this.perOpCache=new Map,this.sharedCache=b}resolve({activeCtx:b,context:x,documentLoader:A,base:E,cycles:I=new Set}){var H=this;return lt(function*(){x&&V(x)&&x["@context"]&&(x=x["@context"]),x=Y(x);const M=[];for(const P of x){if(F(P)){let G=H._get(P);G||(G=yield H._resolveRemoteContext({activeCtx:b,url:P,documentLoader:A,base:E,cycles:I})),K(G)?M.push(...G):M.push(G);continue}if(null===P){M.push(new C({document:null}));continue}V(P)||T(x);const Z=JSON.stringify(P);let S=H._get(Z);S||(S=new C({document:P}),H._cacheResolvedContext({key:Z,resolved:S,tag:"static"})),M.push(S)}return M})()}_get(b){let x=this.perOpCache.get(b);if(!x){const A=this.sharedCache.get(b);A&&(x=A.get("static"),x&&this.perOpCache.set(b,x))}return x}_cacheResolvedContext({key:b,resolved:x,tag:A}){if(this.perOpCache.set(b,x),void 0!==A){let E=this.sharedCache.get(b);E||(E=new Map,this.sharedCache.set(b,E)),E.set(A,x)}return x}_resolveRemoteContext({activeCtx:b,url:x,documentLoader:A,base:E,cycles:I}){var H=this;return lt(function*(){x=L(E,x);const{context:M,remoteDoc:P}=yield H._fetchContext({activeCtx:b,url:x,documentLoader:A,cycles:I});y({context:M,base:E=P.documentUrl||x});const Z=yield H.resolve({activeCtx:b,context:M,documentLoader:A,base:E,cycles:I});return H._cacheResolvedContext({key:x,resolved:Z,tag:P.tag}),Z})()}_fetchContext({activeCtx:b,url:x,documentLoader:A,cycles:E}){return lt(function*(){if(E.size>10)throw new w("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===b.processingMode?"loading remote context failed":"context overflow",max:10});if(E.has(x))throw new w("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===b.processingMode?"recursive context inclusion":"context overflow",url:x});let I,H;E.add(x);try{H=yield A(x),I=H.document||null,F(I)&&(I=JSON.parse(I))}catch(M){throw new w("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:x,cause:M})}if(!V(I))throw new w("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:x});return I="@context"in I?{"@context":I["@context"]}:{"@context":{}},H.contextUrl&&(K(I["@context"])||(I["@context"]=[I["@context"]]),I["@context"].push(H.contextUrl)),{context:I,remoteDoc:H}})()}}},{"./JsonLdError":12,"./ResolvedContext":16,"./types":30,"./url":31,"./util":32}],12:[function(Q,we,fe){"use strict";we.exports=class extends Error{constructor(V="An unspecified JSON-LD error occurred.",F="jsonld.Error",Y={}){super(V),this.name=F,this.message=V,this.details=Y}}},{}],13:[function(Q,we,fe){"use strict";we.exports=K=>{class V{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(V,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(V.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:V}),V.compact=function(F,Y){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):K.compact(F,Y)},V.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):K.expand(F)},V.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):K.flatten(F)},V}},{}],14:[function(Q,we,fe){"use strict";we.exports=Q("rdf-canonize").NQuads},{"rdf-canonize":46}],15:[function(Q,we,fe){"use strict";we.exports=class{constructor(){this._requests={}}wrapLoader(V){const F=this;return F._loader=V,function(){return F.add.apply(F,arguments)}}add(V){var F=this;return lt(function*(){let Y=F._requests[V];if(Y)return Promise.resolve(Y);Y=F._requests[V]=F._loader(V);try{return yield Y}finally{delete F._requests[V]}})()}}},{}],16:[function(Q,we,fe){"use strict";const K=Q("lru-cache");we.exports=class{constructor({document:Y}){this.document=Y,this.cache=new K({max:10})}getProcessed(Y){return this.cache.get(Y)}setProcessed(Y,L){this.cache.set(Y,L)}}},{"lru-cache":33}],17:[function(Q,we,fe){"use strict";const K=Q("./JsonLdError"),{isArray:V,isObject:F,isString:Y,isUndefined:L}=Q("./types"),{isList:w,isValue:C,isGraph:R,isSimpleGraph:T,isSubjectReference:y}=Q("./graphTypes"),{expandIri:v,getContextValue:b,isKeyword:x,process:A,processingMode:E}=Q("./context"),{removeBase:I,prependBase:H}=Q("./url"),{addValue:M,asArray:P,compareShortestLeast:Z}=Q("./util"),S={};function ne(ce,se,te){if("@nest"!==v(ce,se,{vocab:!0},te))throw new K("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}we.exports=S,S.compact=function(){var ce=lt(function*({activeCtx:se,activeProperty:te=null,element:Ie,options:ye={},compactionMap:re=(()=>{})}){if(V(Ie)){let Fe=[];for(let Qe=0;Qe<Ie.length;++Qe){let He=yield S.compact({activeCtx:se,activeProperty:te,element:Ie[Qe],options:ye,compactionMap:re});null===He&&(He=yield re({unmappedValue:Ie[Qe],activeCtx:se,activeProperty:te,parent:Ie,index:Qe,options:ye}),void 0===He)||Fe.push(He)}return ye.compactArrays&&1===Fe.length&&0===(b(se,te,"@container")||[]).length&&(Fe=Fe[0]),Fe}const ve=b(se,te,"@context");if(L(ve)||(se=yield A({activeCtx:se,localCtx:ve,propagate:!0,overrideProtected:!0,options:ye})),F(Ie)){if(ye.link&&"@id"in Ie&&ye.link.hasOwnProperty(Ie["@id"])){const xe=ye.link[Ie["@id"]];for(let Ge=0;Ge<xe.length;++Ge)if(xe[Ge].expanded===Ie)return xe[Ge].compacted}if(C(Ie)||y(Ie)){const xe=S.compactValue({activeCtx:se,activeProperty:te,value:Ie,options:ye});return ye.link&&y(Ie)&&(ye.link.hasOwnProperty(Ie["@id"])||(ye.link[Ie["@id"]]=[]),ye.link[Ie["@id"]].push({expanded:Ie,compacted:xe})),xe}if(w(Ie)&&(b(se,te,"@container")||[]).includes("@list"))return S.compact({activeCtx:se,activeProperty:te,element:Ie["@list"],options:ye,compactionMap:re});const Fe="@reverse"===te,Qe={},He=se;!C(Ie)&&!y(Ie)&&(se=se.revertToPreviousContext());const J=b(He,te,"@context");L(J)||(se=yield A({activeCtx:se,localCtx:J,propagate:!0,overrideProtected:!0,options:ye})),ye.link&&"@id"in Ie&&(ye.link.hasOwnProperty(Ie["@id"])||(ye.link[Ie["@id"]]=[]),ye.link[Ie["@id"]].push({expanded:Ie,compacted:Qe}));let ae=Ie["@type"]||[];ae.length>1&&(ae=Array.from(ae).sort());const _e=se;for(const xe of ae){const Ge=S.compactIri({activeCtx:_e,iri:xe,relativeTo:{vocab:!0}}),Se=b(He,Ge,"@context");L(Se)||(se=yield A({activeCtx:se,localCtx:Se,options:ye,propagate:!1}))}const Te=Object.keys(Ie).sort();for(const xe of Te){const Ge=Ie[xe];if("@id"!==xe)if("@type"!==xe)if("@reverse"!==xe)if("@preserve"!==xe)if("@index"!==xe)if("@graph"!==xe&&"@list"!==xe&&"@included"!==xe&&x(xe)){const Se=S.compactIri({activeCtx:se,iri:xe,relativeTo:{vocab:!0}});M(Qe,Se,Ge)}else{if(!V(Ge))throw new K("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Ge.length){const Se=S.compactIri({activeCtx:se,iri:xe,value:Ge,relativeTo:{vocab:!0},reverse:Fe}),Ue=se.mappings.has(Se)?se.mappings.get(Se)["@nest"]:null;let Ke=Qe;Ue&&(ne(se,Ue,ye),F(Qe[Ue])||(Qe[Ue]={}),Ke=Qe[Ue]),M(Ke,Se,Ge,{propertyIsArray:!0})}for(const Se of Ge){const Ue=S.compactIri({activeCtx:se,iri:xe,value:Se,relativeTo:{vocab:!0},reverse:Fe}),Ke=se.mappings.has(Ue)?se.mappings.get(Ue)["@nest"]:null;let Be=Qe;Ke&&(ne(se,Ke,ye),F(Qe[Ke])||(Qe[Ke]={}),Be=Qe[Ke]);const X=b(se,Ue,"@container")||[],q=R(Se),ge=w(Se);let le;ge?le=Se["@list"]:q&&(le=Se["@graph"]);let qe=yield S.compact({activeCtx:se,activeProperty:Ue,element:ge||q?le:Se,options:ye,compactionMap:re});if(ge){if(V(qe)||(qe=[qe]),X.includes("@list")){M(Be,Ue,qe,{valueIsArray:!0,allowDuplicate:!0});continue}qe={[S.compactIri({activeCtx:se,iri:"@list",relativeTo:{vocab:!0}})]:qe},"@index"in Se&&(qe[S.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Se["@index"])}if(q)if(X.includes("@graph")&&(X.includes("@id")||X.includes("@index")&&T(Se))){let _t;Be.hasOwnProperty(Ue)?_t=Be[Ue]:Be[Ue]=_t={};const gt=(X.includes("@id")?Se["@id"]:Se["@index"])||S.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}});M(_t,gt,qe,{propertyIsArray:!ye.compactArrays||X.includes("@set")})}else X.includes("@graph")&&T(Se)?(V(qe)&&qe.length>1&&(qe={"@included":qe}),M(Be,Ue,qe,{propertyIsArray:!ye.compactArrays||X.includes("@set")})):(V(qe)&&1===qe.length&&ye.compactArrays&&(qe=qe[0]),qe={[S.compactIri({activeCtx:se,iri:"@graph",relativeTo:{vocab:!0}})]:qe},"@id"in Se&&(qe[S.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Se["@id"]),"@index"in Se&&(qe[S.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Se["@index"]),M(Be,Ue,qe,{propertyIsArray:!ye.compactArrays||X.includes("@set")}));else if(X.includes("@language")||X.includes("@index")||X.includes("@id")||X.includes("@type")){let _t,gt;if(Be.hasOwnProperty(Ue)?_t=Be[Ue]:Be[Ue]=_t={},X.includes("@language"))C(qe)&&(qe=qe["@value"]),gt=Se["@language"];else if(X.includes("@index")){const Ae=b(se,Ue,"@index")||"@index",U=S.compactIri({activeCtx:se,iri:Ae,relativeTo:{vocab:!0}});if("@index"===Ae)gt=Se["@index"],delete qe[U];else{let k;if([gt,...k]=P(qe[Ae]||[]),Y(gt))switch(k.length){case 0:delete qe[Ae];break;case 1:qe[Ae]=k[0];break;default:qe[Ae]=k}else gt=null}}else if(X.includes("@id")){const Ae=S.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}});gt=qe[Ae],delete qe[Ae]}else if(X.includes("@type")){const Ae=S.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}});let U;switch([gt,...U]=P(qe[Ae]||[]),U.length){case 0:delete qe[Ae];break;case 1:qe[Ae]=U[0];break;default:qe[Ae]=U}1===Object.keys(qe).length&&"@id"in Se&&(qe=yield S.compact({activeCtx:se,activeProperty:Ue,element:{"@id":Se["@id"]},options:ye,compactionMap:re}))}gt||(gt=S.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}})),M(_t,gt,qe,{propertyIsArray:X.includes("@set")})}else{const _t=!ye.compactArrays||X.includes("@set")||X.includes("@list")||V(qe)&&0===qe.length||"@list"===xe||"@graph"===xe;M(Be,Ue,qe,{propertyIsArray:_t})}}}else{if((b(se,te,"@container")||[]).includes("@index"))continue;const Ue=S.compactIri({activeCtx:se,iri:xe,relativeTo:{vocab:!0}});M(Qe,Ue,Ge)}else{const Se=yield S.compact({activeCtx:se,activeProperty:te,element:Ge,options:ye,compactionMap:re});V(Se)&&0===Se.length||M(Qe,xe,Se)}else{const Se=yield S.compact({activeCtx:se,activeProperty:"@reverse",element:Ge,options:ye,compactionMap:re});for(const Ue in Se)if(se.mappings.has(Ue)&&se.mappings.get(Ue).reverse){const Ke=Se[Ue],X=(b(se,Ue,"@container")||[]).includes("@set")||!ye.compactArrays;M(Qe,Ue,Ke,{propertyIsArray:X}),delete Se[Ue]}if(Object.keys(Se).length>0){const Ue=S.compactIri({activeCtx:se,iri:xe,relativeTo:{vocab:!0}});M(Qe,Ue,Se)}}else{let Se=P(Ge).map(q=>S.compactIri({activeCtx:He,iri:q,relativeTo:{vocab:!0}}));1===Se.length&&(Se=Se[0]);const Ue=S.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}}),X=(b(se,Ue,"@container")||[]).includes("@set")&&E(se,1.1)||V(Se)&&0===Ge.length;M(Qe,Ue,Se,{propertyIsArray:X})}else{let Se=P(Ge).map(Ke=>S.compactIri({activeCtx:se,iri:Ke,relativeTo:{vocab:!1},base:ye.base}));1===Se.length&&(Se=Se[0]),Qe[S.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Se}}return Qe}return Ie});return function(se){return ce.apply(this,arguments)}}(),S.compactIri=({activeCtx:ce,iri:se,value:te=null,relativeTo:Ie={vocab:!1},reverse:ye=!1,base:re=null})=>{if(null===se)return se;ce.isPropertyTermScoped&&ce.previousContext&&(ce=ce.previousContext);const ve=ce.getInverse();if(x(se)&&se in ve&&"@none"in ve[se]&&"@type"in ve[se]["@none"]&&"@none"in ve[se]["@none"]["@type"])return ve[se]["@none"]["@type"]["@none"];if(Ie.vocab&&se in ve){const ae=ce["@language"]||"@none",_e=[];F(te)&&"@index"in te&&!("@graph"in te)&&_e.push("@index","@index@set"),F(te)&&"@preserve"in te&&(te=te["@preserve"][0]),R(te)?("@index"in te&&_e.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in te&&_e.push("@graph@id","@graph@id@set"),_e.push("@graph","@graph@set","@set"),"@index"in te||_e.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in te||_e.push("@graph@id","@graph@id@set")):F(te)&&!C(te)&&_e.push("@id","@id@set","@type","@set@type");let Te="@language",xe="@null";if(ye)Te="@type",xe="@reverse",_e.push("@set");else if(w(te)){"@index"in te||_e.push("@list");const Se=te["@list"];if(0===Se.length)Te="@any",xe="@none";else{let Ue=0===Se.length?ae:null,Ke=null;for(let Be=0;Be<Se.length;++Be){const X=Se[Be];let q="@none",ge="@none";if(C(X)?"@direction"in X?q=`${(X["@language"]||"").toLowerCase()}_${X["@direction"]}`:"@language"in X?q=X["@language"].toLowerCase():"@type"in X?ge=X["@type"]:q="@null":ge="@id",null===Ue?Ue=q:q!==Ue&&C(X)&&(Ue="@none"),null===Ke?Ke=ge:ge!==Ke&&(Ke="@none"),"@none"===Ue&&"@none"===Ke)break}Ue=Ue||"@none",Ke=Ke||"@none","@none"!==Ke?(Te="@type",xe=Ke):xe=Ue}}else{if(C(te))if("@language"in te&&!("@index"in te)){_e.push("@language","@language@set"),xe=te["@language"];const Se=te["@direction"];Se&&(xe=`${xe}_${Se}`)}else"@direction"in te&&!("@index"in te)?xe=`_${te["@direction"]}`:"@type"in te&&(Te="@type",xe=te["@type"]);else Te="@type",xe="@id";_e.push("@set")}_e.push("@none"),F(te)&&!("@index"in te)&&_e.push("@index","@index@set"),C(te)&&1===Object.keys(te).length&&_e.push("@language","@language@set");const Ge=function(ce,se,te,Ie,ye,re){null===re&&(re="@null");const ve=[];if(("@id"===re||"@reverse"===re)&&F(te)&&"@id"in te){"@reverse"===re&&ve.push("@reverse");const Qe=S.compactIri({activeCtx:ce,iri:te["@id"],relativeTo:{vocab:!0}});ce.mappings.has(Qe)&&ce.mappings.get(Qe)&&ce.mappings.get(Qe)["@id"]===te["@id"]?ve.push.apply(ve,["@vocab","@id"]):ve.push.apply(ve,["@id","@vocab"])}else{ve.push(re);const Qe=ve.find(He=>He.includes("_"));Qe&&ve.push(Qe.replace(/^[^_]+_/,"_"))}ve.push("@none");const Fe=ce.inverse[se];for(const Qe of Ie){if(!(Qe in Fe))continue;const He=Fe[Qe][ye];for(const J of ve)if(J in He)return He[J]}return null}(ce,se,te,_e,Te,xe);if(null!==Ge)return Ge}if(Ie.vocab&&"@vocab"in ce){const ae=ce["@vocab"];if(0===se.indexOf(ae)&&se!==ae){const _e=se.substr(ae.length);if(!ce.mappings.has(_e))return _e}}let Fe=null;const Qe=[];let He=ce.fastCurieMap;const J=se.length-1;for(let ae=0;ae<J&&se[ae]in He;++ae)He=He[se[ae]],""in He&&Qe.push(He[""][0]);for(let ae=Qe.length-1;ae>=0;--ae){const _e=Qe[ae],Te=_e.terms;for(const xe of Te){const Ge=xe+":"+se.substr(_e.iri.length);ce.mappings.get(xe)._prefix&&(!ce.mappings.has(Ge)||null===te&&ce.mappings.get(Ge)["@id"]===se)&&(null===Fe||Z(Ge,Fe)<0)&&(Fe=Ge)}}if(null!==Fe)return Fe;for(const[ae,_e]of ce.mappings)if(_e&&_e._prefix&&se.startsWith(ae+":"))throw new K(`Absolute IRI "${se}" confused with prefix "${ae}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:ce});return Ie.vocab?se:"@base"in ce?ce["@base"]?I(H(re,ce["@base"]),se):se:I(re,se)},S.compactValue=({activeCtx:ce,activeProperty:se,value:te,options:Ie})=>{if(C(te)){const Fe=b(ce,se,"@type"),Qe=b(ce,se,"@language"),He=b(ce,se,"@direction"),J=b(ce,se,"@container")||[],ae="@index"in te&&!J.includes("@index");if(!ae&&"@none"!==Fe&&(te["@type"]===Fe||"@language"in te&&te["@language"]===Qe&&"@direction"in te&&te["@direction"]===He||"@language"in te&&te["@language"]===Qe||"@direction"in te&&te["@direction"]===He))return te["@value"];const _e=Object.keys(te).length,Te=1===_e||2===_e&&"@index"in te&&!ae,xe="@language"in ce,Ge=Y(te["@value"]),Se=ce.mappings.has(se)&&null===ce.mappings.get(se)["@language"];if(Te&&"@none"!==Fe&&(!xe||!Ge||Se))return te["@value"];const Ue={};return ae&&(Ue[S.compactIri({activeCtx:ce,iri:"@index",relativeTo:{vocab:!0}})]=te["@index"]),"@type"in te?Ue[S.compactIri({activeCtx:ce,iri:"@type",relativeTo:{vocab:!0}})]=S.compactIri({activeCtx:ce,iri:te["@type"],relativeTo:{vocab:!0}}):"@language"in te&&(Ue[S.compactIri({activeCtx:ce,iri:"@language",relativeTo:{vocab:!0}})]=te["@language"]),"@direction"in te&&(Ue[S.compactIri({activeCtx:ce,iri:"@direction",relativeTo:{vocab:!0}})]=te["@direction"]),Ue[S.compactIri({activeCtx:ce,iri:"@value",relativeTo:{vocab:!0}})]=te["@value"],Ue}const ye=v(ce,se,{vocab:!0},Ie),re=b(ce,se,"@type"),ve=S.compactIri({activeCtx:ce,iri:te["@id"],relativeTo:{vocab:"@vocab"===re},base:Ie.base});return"@id"===re||"@vocab"===re||"@graph"===ye?ve:{[S.compactIri({activeCtx:ce,iri:"@id",relativeTo:{vocab:!0}})]:ve}}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],18:[function(Q,we,fe){"use strict";const K="http://www.w3.org/1999/02/22-rdf-syntax-ns#",V="http://www.w3.org/2001/XMLSchema#";we.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:K,RDF_LIST:K+"List",RDF_FIRST:K+"first",RDF_REST:K+"rest",RDF_NIL:K+"nil",RDF_TYPE:K+"type",RDF_PLAIN_LITERAL:K+"PlainLiteral",RDF_XML_LITERAL:K+"XMLLiteral",RDF_JSON_LITERAL:K+"JSON",RDF_OBJECT:K+"object",RDF_LANGSTRING:K+"langString",XSD:V,XSD_BOOLEAN:V+"boolean",XSD_DOUBLE:V+"double",XSD_INTEGER:V+"integer",XSD_STRING:V+"string"}},{}],19:[function(Q,we,fe){"use strict";const K=Q("./util"),V=Q("./JsonLdError"),{isArray:F,isObject:Y,isString:L,isUndefined:w}=Q("./types"),{isAbsolute:C,isRelative:R,prependBase:T}=Q("./url"),{asArray:y,compareShortestLeast:v}=Q("./util"),b=new Map,A=/^@[a-zA-Z]+$/,E={};function I(M,P,Z,S,G,ne){if(null===P||!L(P)||E.isKeyword(P))return P;if(P.match(A))return null;if(S&&S.hasOwnProperty(P)&&!0!==G.get(P)&&E.createTermDefinition({activeCtx:M,localCtx:S,term:P,defined:G,options:ne}),(Z=Z||{}).vocab){const se=M.mappings.get(P);if(null===se)return null;if(Y(se)&&"@id"in se)return se["@id"]}const ce=P.indexOf(":");if(ce>0){const se=P.substr(0,ce),te=P.substr(ce+1);if("_"===se||0===te.indexOf("//"))return P;S&&S.hasOwnProperty(se)&&E.createTermDefinition({activeCtx:M,localCtx:S,term:se,defined:G,options:ne});const Ie=M.mappings.get(se);if(Ie&&Ie._prefix)return Ie["@id"]+te;if(C(P))return P}if(Z.vocab&&"@vocab"in M)return M["@vocab"]+P;if(Z.base&&"@base"in M){if(M["@base"])return T(T(ne.base,M["@base"]),P)}else if(Z.base)return T(ne.base,P);return P}function H(M,P){if(!M||"object"!=typeof M||!P||"object"!=typeof P)return M===P;const Z=Array.isArray(M);if(Z!==Array.isArray(P))return!1;if(Z){if(M.length!==P.length)return!1;for(let ne=0;ne<M.length;++ne)if(!H(M[ne],P[ne]))return!1;return!0}const S=Object.keys(M),G=Object.keys(P);if(S.length!==G.length)return!1;for(const ne in M){let ce=M[ne],se=P[ne];if("@container"===ne&&Array.isArray(ce)&&Array.isArray(se)&&(ce=ce.slice().sort(),se=se.slice().sort()),!H(ce,se))return!1}return!0}we.exports=E,E.process=function(){var M=lt(function*({activeCtx:P,localCtx:Z,options:S,propagate:G=!0,overrideProtected:ne=!1,cycles:ce=new Set}){if(Y(Z)&&"@context"in Z&&F(Z["@context"])&&(Z=Z["@context"]),0===y(Z).length)return P;const te=yield S.contextResolver.resolve({activeCtx:P,context:Z,documentLoader:S.documentLoader,base:S.base});Y(te[0].document)&&"boolean"==typeof te[0].document["@propagate"]&&(G=te[0].document["@propagate"]);let Ie=P;!G&&!Ie.previousContext&&(Ie=Ie.clone(),Ie.previousContext=P);for(const ye of te){let{document:re}=ye;if(P=Ie,null===re){if(!ne&&0!==Object.keys(P.protected).length){const Qe=S&&S.protectedMode||"error";if("error"===Qe)throw new V("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===Qe){console.warn("WARNING: invalid context nullification");const He=ye.getProcessed(P);if(He){Ie=P=He;continue}const J=P;Ie=P=E.getInitialContext(S).clone();for(const[ae,_e]of Object.entries(J.protected))_e&&(P.mappings[ae]=K.clone(J.mappings[ae]));P.protected=K.clone(J.protected),ye.setProcessed(J,Ie);continue}throw new V("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:Z,protectedMode:Qe})}Ie=P=E.getInitialContext(S).clone();continue}const ve=ye.getProcessed(P);if(ve){Ie=P=ve;continue}if(Y(re)&&"@context"in re&&(re=re["@context"]),!Y(re))throw new V("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:re});Ie=Ie.clone();const Fe=new Map;if("@version"in re){if(1.1!==re["@version"])throw new V("Unsupported JSON-LD version: "+re["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:re});if(P.processingMode&&"json-ld-1.0"===P.processingMode)throw new V("@version: "+re["@version"]+" not compatible with "+P.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:re});Ie.processingMode="json-ld-1.1",Ie["@version"]=re["@version"],Fe.set("@version",!0)}if(Ie.processingMode=Ie.processingMode||P.processingMode,"@base"in re){let Qe=re["@base"];if(null!==Qe&&!C(Qe)){if(!R(Qe))throw new V('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:re});Qe=T(Ie["@base"],Qe)}Ie["@base"]=Qe,Fe.set("@base",!0)}if("@vocab"in re){const Qe=re["@vocab"];if(null===Qe)delete Ie["@vocab"];else{if(!L(Qe))throw new V('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:re});if(!C(Qe)&&E.processingMode(Ie,1))throw new V('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:re});Ie["@vocab"]=I(Ie,Qe,{vocab:!0,base:!0},void 0,void 0,S)}Fe.set("@vocab",!0)}if("@language"in re){const Qe=re["@language"];if(null===Qe)delete Ie["@language"];else{if(!L(Qe))throw new V('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:re});Ie["@language"]=Qe.toLowerCase()}Fe.set("@language",!0)}if("@direction"in re){const Qe=re["@direction"];if("json-ld-1.0"===P.processingMode)throw new V("Invalid JSON-LD syntax; @direction not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:re});if(null===Qe)delete Ie["@direction"];else{if("ltr"!==Qe&&"rtl"!==Qe)throw new V('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:re});Ie["@direction"]=Qe}Fe.set("@direction",!0)}if("@propagate"in re){const Qe=re["@propagate"];if("json-ld-1.0"===P.processingMode)throw new V("Invalid JSON-LD syntax; @propagate not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:re});if("boolean"!=typeof Qe)throw new V("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:Z});Fe.set("@propagate",!0)}if("@import"in re){const Qe=re["@import"];if("json-ld-1.0"===P.processingMode)throw new V("Invalid JSON-LD syntax; @import not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:re});if(!L(Qe))throw new V("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:Z});const He=yield S.contextResolver.resolve({activeCtx:P,context:Qe,documentLoader:S.documentLoader,base:S.base});if(1!==He.length)throw new V("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:Z});const J=He[0].getProcessed(P);if(J)re=J;else{const ae=He[0].document;if("@import"in ae)throw new V("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:Z});for(const _e in ae)re.hasOwnProperty(_e)||(re[_e]=ae[_e]);He[0].setProcessed(P,re)}Fe.set("@import",!0)}Fe.set("@protected",re["@protected"]||!1);for(const Qe in re)if(E.createTermDefinition({activeCtx:Ie,localCtx:re,term:Qe,defined:Fe,options:S,overrideProtected:ne}),Y(re[Qe])&&"@context"in re[Qe]){const He=re[Qe]["@context"];let J=!0;if(L(He)){const ae=T(S.base,He);ce.has(ae)?J=!1:ce.add(ae)}if(J)try{yield E.process({activeCtx:Ie.clone(),localCtx:re[Qe]["@context"],overrideProtected:!0,options:S,cycles:ce})}catch(ae){throw new V("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:re[Qe]["@context"],term:Qe})}}ye.setProcessed(P,Ie)}return Ie});return function(P){return M.apply(this,arguments)}}(),E.createTermDefinition=({activeCtx:M,localCtx:P,term:Z,defined:S,options:G,overrideProtected:ne=!1})=>{if(S.has(Z)){if(S.get(Z))return;throw new V("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:P,term:Z})}let ce;if(S.set(Z,!1),P.hasOwnProperty(Z)&&(ce=P[Z]),"@type"===Z&&Y(ce)&&"@set"===(ce["@container"]||"@set")&&E.processingMode(M,1.1)){const Fe=["@container","@id","@protected"],Qe=Object.keys(ce);if(0===Qe.length||Qe.some(He=>!Fe.includes(He)))throw new V("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:Z})}else{if(E.isKeyword(Z))throw new V("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:Z});if(Z.match(A))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:Z});if(""===Z)throw new V("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:P})}const se=M.mappings.get(Z);M.mappings.has(Z)&&M.mappings.delete(Z);let te=!1;if((L(ce)||null===ce)&&(te=!0,ce={"@id":ce}),!Y(ce))throw new V("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:P});const Ie={};M.mappings.set(Z,Ie),Ie.reverse=!1;const ye=["@container","@id","@language","@reverse","@type"];E.processingMode(M,1.1)&&ye.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Fe in ce)if(!ye.includes(Fe))throw new V("Invalid JSON-LD syntax; a term definition must not contain "+Fe,"jsonld.SyntaxError",{code:"invalid term definition",context:P});const re=Z.indexOf(":");if(Ie._termHasColon=re>0,"@reverse"in ce){if("@id"in ce)throw new V("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});if("@nest"in ce)throw new V("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});const Fe=ce["@reverse"];if(!L(Fe))throw new V("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(!E.isKeyword(Fe)&&Fe.match(A))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:Fe}),void(se?M.mappings.set(Z,se):M.mappings.delete(Z));const Qe=I(M,Fe,{vocab:!0,base:!1},P,S,G);if(!C(Qe))throw new V("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});Ie["@id"]=Qe,Ie.reverse=!0}else if("@id"in ce){let Fe=ce["@id"];if(Fe&&!L(Fe))throw new V("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(null===Fe)Ie["@id"]=null;else{if(!E.isKeyword(Fe)&&Fe.match(A))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:Fe}),void(se?M.mappings.set(Z,se):M.mappings.delete(Z));if(Fe!==Z){if(Fe=I(M,Fe,{vocab:!0,base:!1},P,S,G),!C(Fe)&&!E.isKeyword(Fe))throw new V("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(Z.match(/(?::[^:])|\//)&&I(M,Z,{vocab:!0,base:!1},P,new Map(S).set(Z,!0),G)!==Fe)throw new V("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});Ie["@id"]=Fe,Ie._prefix=te&&!Ie._termHasColon&&Fe.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Ie))if(Ie._termHasColon){const Fe=Z.substr(0,re);if(P.hasOwnProperty(Fe)&&E.createTermDefinition({activeCtx:M,localCtx:P,term:Fe,defined:S,options:G}),M.mappings.has(Fe)){const Qe=Z.substr(re+1);Ie["@id"]=M.mappings.get(Fe)["@id"]+Qe}else Ie["@id"]=Z}else if("@type"===Z)Ie["@id"]=Z;else{if(!("@vocab"in M))throw new V("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P,term:Z});Ie["@id"]=M["@vocab"]+Z}if((!0===ce["@protected"]||!0===S.get("@protected")&&!1!==ce["@protected"])&&(M.protected[Z]=!0,Ie.protected=!0),S.set(Z,!0),"@type"in ce){let Fe=ce["@type"];if(!L(Fe))throw new V("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if("@json"===Fe||"@none"===Fe){if(E.processingMode(M,1))throw new V(`Invalid JSON-LD syntax; an @context @type value must not be "${Fe}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else if("@id"!==Fe&&"@vocab"!==Fe){if(Fe=I(M,Fe,{vocab:!0,base:!1},P,S,G),!C(Fe))throw new V("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if(0===Fe.indexOf("_:"))throw new V("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}Ie["@type"]=Fe}if("@container"in ce){const Fe=L(ce["@container"])?[ce["@container"]]:ce["@container"]||[],Qe=["@list","@set","@index","@language"];let He=!0;const J=Fe.includes("@set");if(E.processingMode(M,1.1)){if(Qe.push("@graph","@id","@type"),Fe.includes("@list")){if(1!==Fe.length)throw new V("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else if(Fe.includes("@graph")){if(Fe.some(ae=>"@graph"!==ae&&"@id"!==ae&&"@index"!==ae&&"@set"!==ae))throw new V("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else He&=Fe.length<=(J?2:1);if(Fe.includes("@type")&&(Ie["@type"]=Ie["@type"]||"@id",!["@id","@vocab"].includes(Ie["@type"])))throw new V("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else He&=!F(ce["@container"]),He&=Fe.length<=1;if(He&=Fe.every(ae=>Qe.includes(ae)),He&=!(J&&Fe.includes("@list")),!He)throw new V("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Qe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:P});if(Ie.reverse&&!Fe.every(ae=>["@index","@set"].includes(ae)))throw new V("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});Ie["@container"]=Fe}if("@index"in ce){if(!("@container"in ce)||!Ie["@container"].includes("@index"))throw new V(`Invalid JSON-LD syntax; @index without @index in @container: "${ce["@index"]}" on term "${Z}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});if(!L(ce["@index"])||0===ce["@index"].indexOf("@"))throw new V(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ce["@index"]}" on term "${Z}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});Ie["@index"]=ce["@index"]}if("@context"in ce&&(Ie["@context"]=ce["@context"]),"@language"in ce&&!("@type"in ce)){let Fe=ce["@language"];if(null!==Fe&&!L(Fe))throw new V("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:P});null!==Fe&&(Fe=Fe.toLowerCase()),Ie["@language"]=Fe}if("@prefix"in ce){if(Z.match(/:|\//))throw new V("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:P});if(E.isKeyword(Ie["@id"]))throw new V("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:P});if("boolean"!=typeof ce["@prefix"])throw new V("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:P});Ie._prefix=!0===ce["@prefix"]}if("@direction"in ce){const Fe=ce["@direction"];if(null!==Fe&&"ltr"!==Fe&&"rtl"!==Fe)throw new V('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:P});Ie["@direction"]=Fe}if("@nest"in ce){const Fe=ce["@nest"];if(!L(Fe)||"@nest"!==Fe&&0===Fe.indexOf("@"))throw new V("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:P});Ie["@nest"]=Fe}const ve=Ie["@id"];if("@context"===ve||"@preserve"===ve)throw new V("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:P});if(se&&se.protected&&!ne&&(M.protected[Z]=!0,Ie.protected=!0,!H(se,Ie))){const Fe=G&&G.protectedMode||"error";if("error"===Fe)throw new V(`Invalid JSON-LD syntax; tried to redefine "${Z}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:P,term:Z});if("warn"===Fe)return void console.warn("WARNING: protected term redefinition",{term:Z});throw new V("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,term:Z,protectedMode:Fe})}},E.expandIri=(M,P,Z,S)=>I(M,P,Z,void 0,void 0,S),E.getInitialContext=M=>{const P=JSON.stringify({processingMode:M.processingMode}),Z=b.get(P);if(Z)return Z;const S={processingMode:M.processingMode,mappings:new Map,inverse:null,getInverse:function(){const Ie=this;if(Ie.inverse)return Ie.inverse;const ye=Ie.inverse={},re=Ie.fastCurieMap={},ve={},Fe=(Ie["@language"]||"@none").toLowerCase(),Qe=Ie["@direction"],He=Ie.mappings,J=[...He.keys()].sort(v);for(const ae of J){const _e=He.get(ae);if(null===_e)continue;let Te=_e["@container"]||"@none";if(Te=[].concat(Te).sort().join(""),null===_e["@id"])continue;const xe=y(_e["@id"]);for(const Ge of xe){let Se=ye[Ge];const Ue=E.isKeyword(Ge);if(Se)!Ue&&!_e._termHasColon&&ve[Ge].push(ae);else if(ye[Ge]=Se={},!Ue&&!_e._termHasColon){ve[Ge]=[ae];const Ke={iri:Ge,terms:ve[Ge]};Ge[0]in re?re[Ge[0]].push(Ke):re[Ge[0]]=[Ke]}if(Se[Te]||(Se[Te]={"@language":{},"@type":{},"@any":{}}),Se=Se[Te],ce(ae,Se["@any"],"@none"),_e.reverse)ce(ae,Se["@type"],"@reverse");else if("@none"===_e["@type"])ce(ae,Se["@any"],"@none"),ce(ae,Se["@language"],"@none"),ce(ae,Se["@type"],"@none");else if("@type"in _e)ce(ae,Se["@type"],_e["@type"]);else if("@language"in _e&&"@direction"in _e){const Ke=_e["@language"],Be=_e["@direction"];ce(ae,Se["@language"],Ke&&Be?`${Ke}_${Be}`.toLowerCase():Ke?Ke.toLowerCase():Be?`_${Be}`:"@null")}else"@language"in _e?ce(ae,Se["@language"],(_e["@language"]||"@null").toLowerCase()):"@direction"in _e?ce(ae,Se["@language"],_e["@direction"]?`_${_e["@direction"]}`:"@none"):Qe?(ce(ae,Se["@language"],`_${Qe}`),ce(ae,Se["@language"],"@none"),ce(ae,Se["@type"],"@none")):(ce(ae,Se["@language"],Fe),ce(ae,Se["@language"],"@none"),ce(ae,Se["@type"],"@none"))}}for(const ae in re)ne(re,ae,1);return ye},clone:function(){const Ie={};return Ie.mappings=K.clone(this.mappings),Ie.clone=this.clone,Ie.inverse=null,Ie.getInverse=this.getInverse,Ie.protected=K.clone(this.protected),this.previousContext&&(Ie.previousContext=this.previousContext.clone()),Ie.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Ie["@base"]=this["@base"]),"@language"in this&&(Ie["@language"]=this["@language"]),"@vocab"in this&&(Ie["@vocab"]=this["@vocab"]),Ie},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===b.size&&b.clear(),b.set(P,S),S;function ne(Ie,ye,re){const ve=Ie[ye],Fe=Ie[ye]={};let Qe,He;for(const J of ve)Qe=J.iri,He=re>=Qe.length?"":Qe[re],He in Fe?Fe[He].push(J):Fe[He]=[J];for(const J in Fe)""!==J&&ne(Fe,J,re+1)}function ce(Ie,ye,re){ye.hasOwnProperty(re)||(ye[re]=Ie)}},E.getContextValue=(M,P,Z)=>{if(null===P)return"@context"===Z?void 0:null;if(M.mappings.has(P)){const S=M.mappings.get(P);if(w(Z))return S;if(S.hasOwnProperty(Z))return S[Z]}return"@language"===Z&&Z in M||"@direction"===Z&&Z in M?M[Z]:"@context"!==Z?null:void 0},E.processingMode=(M,P)=>P.toString()>="1.1"?!M.processingMode||M.processingMode>="json-ld-"+P.toString():"json-ld-1.0"===M.processingMode,E.isKeyword=M=>{if(!L(M)||"@"!==M[0])return!1;switch(M){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":12,"./types":30,"./url":31,"./util":32}],20:[function(Q,we,fe){"use strict";const{parseLinkHeader:K,buildHeaders:V}=Q("../util"),{LINK_HEADER_CONTEXT:F}=Q("../constants"),Y=Q("../JsonLdError"),L=Q("../RequestQueue"),{prependBase:w}=Q("../url"),C=/(^|(\r\n))link:/i;function R(T,y,v){const b=new(T=T||XMLHttpRequest);return new Promise((x,A)=>{b.onload=()=>x(b),b.onerror=E=>A(E),b.open("GET",y,!0);for(const E in v)b.setRequestHeader(E,v[E]);b.send()})}we.exports=({secure:T,headers:y={},xhr:v}={headers:{}})=>{return y=V(y),(new L).wrapLoader(x);function x(E){return A.apply(this,arguments)}function A(){return(A=lt(function*(E){if(0!==E.indexOf("http:")&&0!==E.indexOf("https:"))throw new Y('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:E});if(T&&0!==E.indexOf("https"))throw new Y('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:E});let I;try{I=yield R(v,E,y)}catch(S){throw new Y("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:E,cause:S})}if(I.status>=400)throw new Y("URL could not be dereferenced: "+I.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:E,httpStatusCode:I.status});let H={contextUrl:null,documentUrl:E,document:I.response},M=null;const P=I.getResponseHeader("Content-Type");let Z;if(C.test(I.getAllResponseHeaders())&&(Z=I.getResponseHeader("Link")),Z&&"application/ld+json"!==P){const S=K(Z),G=S[F];if(Array.isArray(G))throw new Y("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:E});G&&(H.contextUrl=G.target),M=S.alternate,M&&"application/ld+json"==M.type&&!(P||"").match(/^application\/(\w*\+)?json$/)&&(H=yield x(w(E,M.target)))}return H})).apply(this,arguments)}}},{"../JsonLdError":12,"../RequestQueue":15,"../constants":18,"../url":31,"../util":32}],21:[function(Q,we,fe){"use strict";const K=Q("./JsonLdError"),{isArray:V,isObject:F,isEmptyObject:Y,isString:L,isUndefined:w}=Q("./types"),{isList:C,isValue:R,isGraph:T,isSubject:y}=Q("./graphTypes"),{expandIri:v,getContextValue:b,isKeyword:x,process:A,processingMode:E}=Q("./context"),{isAbsolute:I}=Q("./url"),{addValue:H,asArray:M,getValues:P,validateTypeValue:Z}=Q("./util"),S={};we.exports=S;const G=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function ne(re){return ce.apply(this,arguments)}function ce(){return(ce=lt(function*({activeCtx:re,activeProperty:ve,expandedActiveProperty:Fe,element:Qe,expandedParent:He,options:J={},insideList:ae,typeKey:_e,typeScopedContext:Te,expansionMap:xe}){const Ge=Object.keys(Qe).sort(),Se=[];let Ue;const Ke=Qe[_e]&&"@json"===v(re,V(Qe[_e])?Qe[_e][0]:Qe[_e],{vocab:!0},J);for(const Be of Ge){let q,X=Qe[Be];if("@context"===Be)continue;let ge=v(re,Be,{vocab:!0},J);if((null===ge||!I(ge)&&!x(ge))&&(ge=xe({unmappedProperty:Be,activeCtx:re,activeProperty:ve,parent:Qe,options:J,insideList:ae,value:X,expandedParent:He}),void 0===ge))continue;if(x(ge)){if("@reverse"===Fe)throw new K("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:X});if(ge in He&&"@included"!==ge&&"@type"!==ge)throw new K("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ge})}if("@id"===ge){if(!L(X)){if(!J.isFrame)throw new K('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:X});if(F(X)){if(!Y(X))throw new K('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:X})}else{if(!V(X))throw new K('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:X});if(!X.every(gt=>L(gt)))throw new K('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:X})}}H(He,"@id",M(X).map(gt=>L(gt)?v(re,gt,{base:!0},J):gt),{propertyIsArray:J.isFrame});continue}if("@type"===ge){F(X)&&(X=Object.fromEntries(Object.entries(X).map(([gt,Ae])=>[v(Te,gt,{vocab:!0}),M(Ae).map(U=>v(Te,U,{base:!0,vocab:!0}))]))),Z(X,J.isFrame),H(He,"@type",M(X).map(gt=>L(gt)?v(Te,gt,{base:!0,vocab:!0},J):gt),{propertyIsArray:J.isFrame});continue}if("@included"===ge&&E(re,1.1)){const gt=M(yield S.expand({activeCtx:re,activeProperty:ve,element:X,options:J,expansionMap:xe}));if(!gt.every(Ae=>y(Ae)))throw new K("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:X});H(He,"@included",gt,{propertyIsArray:!0});continue}if("@graph"===ge&&!F(X)&&!V(X))throw new K('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:X});if("@value"===ge){Ue=X,Ke&&E(re,1.1)?He["@value"]=X:H(He,"@value",X,{propertyIsArray:J.isFrame});continue}if("@language"===ge){if(null===X)continue;if(!L(X)&&!J.isFrame)throw new K('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:X});X=M(X).map(gt=>L(gt)?gt.toLowerCase():gt);for(const gt of X)L(gt)&&!gt.match(G)&&console.warn(`@language must be valid BCP47: ${gt}`);H(He,"@language",X,{propertyIsArray:J.isFrame});continue}if("@direction"===ge){if(!L(X)&&!J.isFrame)throw new K('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:X});X=M(X);for(const gt of X)if(L(gt)&&"ltr"!==gt&&"rtl"!==gt)throw new K('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:X});H(He,"@direction",X,{propertyIsArray:J.isFrame});continue}if("@index"===ge){if(!L(X))throw new K('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:X});H(He,"@index",X);continue}if("@reverse"===ge){if(!F(X))throw new K('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:X});if(q=yield S.expand({activeCtx:re,activeProperty:"@reverse",element:X,options:J,expansionMap:xe}),"@reverse"in q)for(const Ae in q["@reverse"])H(He,Ae,q["@reverse"][Ae],{propertyIsArray:!0});let gt=He["@reverse"]||null;for(const Ae in q){if("@reverse"===Ae)continue;null===gt&&(gt=He["@reverse"]={}),H(gt,Ae,[],{propertyIsArray:!0});const U=q[Ae];for(let k=0;k<U.length;++k){const z=U[k];if(R(z)||C(z))throw new K('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});H(gt,Ae,z,{propertyIsArray:!0})}}continue}if("@nest"===ge){Se.push(Be);continue}let le=re;const qe=b(re,Be,"@context");w(qe)||(le=yield A({activeCtx:re,localCtx:qe,propagate:!0,overrideProtected:!0,options:J}));const _t=b(le,Be,"@container")||[];if(_t.includes("@language")&&F(X))q=te(le,X,b(le,Be,"@direction"),J);else if(_t.includes("@index")&&F(X)){const gt=_t.includes("@graph"),Ae=b(le,Be,"@index")||"@index",U="@index"!==Ae&&v(re,Ae,{vocab:!0},J);q=yield Ie({activeCtx:le,options:J,activeProperty:Be,value:X,expansionMap:xe,asGraph:gt,indexKey:Ae,propertyIndex:U})}else if(_t.includes("@id")&&F(X)){const gt=_t.includes("@graph");q=yield Ie({activeCtx:le,options:J,activeProperty:Be,value:X,expansionMap:xe,asGraph:gt,indexKey:"@id"})}else if(_t.includes("@type")&&F(X))q=yield Ie({activeCtx:le.revertToPreviousContext(),options:J,activeProperty:Be,value:X,expansionMap:xe,asGraph:!1,indexKey:"@type"});else{const gt="@list"===ge;if(gt||"@set"===ge){let Ae=ve;gt&&"@graph"===Fe&&(Ae=null),q=yield S.expand({activeCtx:le,activeProperty:Ae,element:X,options:J,insideList:gt,expansionMap:xe})}else q="@json"===b(re,Be,"@type")?{"@type":"@json","@value":X}:yield S.expand({activeCtx:le,activeProperty:Be,element:X,options:J,insideList:!1,expansionMap:xe})}if(null!==q||"@value"===ge||(q=xe({unmappedValue:X,expandedProperty:ge,activeCtx:le,activeProperty:ve,parent:Qe,options:J,insideList:ae,key:Be,expandedParent:He}),void 0!==q)){if("@list"!==ge&&!C(q)&&_t.includes("@list")&&(q={"@list":M(q)}),_t.includes("@graph")&&!_t.some(gt=>"@id"===gt||"@index"===gt)&&(q=M(q).map(gt=>({"@graph":M(gt)}))),le.mappings.has(Be)&&le.mappings.get(Be).reverse){const gt=He["@reverse"]=He["@reverse"]||{};q=M(q);for(let Ae=0;Ae<q.length;++Ae){const U=q[Ae];if(R(U)||C(U))throw new K('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});H(gt,ge,U,{propertyIsArray:!0})}continue}H(He,ge,q,{propertyIsArray:!0})}}if("@value"in He&&("@json"!==He["@type"]||!E(re,1.1))&&(F(Ue)||V(Ue))&&!J.isFrame)throw new K('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ue});for(const Be of Se){const X=V(Qe[Be])?Qe[Be]:[Qe[Be]];for(const q of X){if(!F(q)||Object.keys(q).some(ge=>"@value"===v(re,ge,{vocab:!0},J)))throw new K("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:q});yield ne({activeCtx:re,activeProperty:ve,expandedActiveProperty:Fe,element:q,expandedParent:He,options:J,insideList:ae,typeScopedContext:Te,typeKey:_e,expansionMap:xe})}}})).apply(this,arguments)}function se({activeCtx:re,activeProperty:ve,value:Fe,options:Qe}){if(null==Fe)return null;const He=v(re,ve,{vocab:!0},Qe);if("@id"===He)return v(re,Fe,{base:!0},Qe);if("@type"===He)return v(re,Fe,{vocab:!0,base:!0},Qe);const J=b(re,ve,"@type");if(("@id"===J||"@graph"===He)&&L(Fe))return{"@id":v(re,Fe,{base:!0},Qe)};if("@vocab"===J&&L(Fe))return{"@id":v(re,Fe,{vocab:!0,base:!0},Qe)};if(x(He))return Fe;const ae={};if(J&&!["@id","@vocab","@none"].includes(J))ae["@type"]=J;else if(L(Fe)){const _e=b(re,ve,"@language");null!==_e&&(ae["@language"]=_e);const Te=b(re,ve,"@direction");null!==Te&&(ae["@direction"]=Te)}return["boolean","number","string"].includes(typeof Fe)||(Fe=Fe.toString()),ae["@value"]=Fe,ae}function te(re,ve,Fe,Qe){const He=[],J=Object.keys(ve).sort();for(const ae of J){const _e=v(re,ae,{vocab:!0},Qe);let Te=ve[ae];V(Te)||(Te=[Te]);for(const xe of Te){if(null===xe)continue;if(!L(xe))throw new K("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ve});const Ge={"@value":xe};"@none"!==_e&&(Ge["@language"]=ae.toLowerCase()),Fe&&(Ge["@direction"]=Fe),He.push(Ge)}}return He}function Ie(re){return ye.apply(this,arguments)}function ye(){return(ye=lt(function*({activeCtx:re,options:ve,activeProperty:Fe,value:Qe,expansionMap:He,asGraph:J,indexKey:ae,propertyIndex:_e}){const Te=[],xe=Object.keys(Qe).sort(),Ge="@type"===ae;for(let Se of xe){if(Ge){const Be=b(re,Se,"@context");w(Be)||(re=yield A({activeCtx:re,localCtx:Be,propagate:!1,options:ve}))}let Ke,Ue=Qe[Se];V(Ue)||(Ue=[Ue]),Ue=yield S.expand({activeCtx:re,activeProperty:Fe,element:Ue,options:ve,insideList:!1,insideIndex:!0,expansionMap:He}),Ke=_e?"@none"===Se?"@none":se({activeCtx:re,activeProperty:ae,value:Se,options:ve}):v(re,Se,{vocab:!0},ve),"@id"===ae?Se=v(re,Se,{base:!0},ve):Ge&&(Se=Ke);for(let Be of Ue){if(J&&!T(Be)&&(Be={"@graph":[Be]}),"@type"===ae)"@none"===Ke||(Be["@type"]=Be["@type"]?[Se].concat(Be["@type"]):[Se]);else{if(R(Be)&&!["@language","@type","@index"].includes(ae))throw new K(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${ae}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Be});_e?"@none"!==Ke&&H(Be,_e,Ke,{propertyIsArray:!0,prependValue:!0}):"@none"!==Ke&&!(ae in Be)&&(Be[ae]=Se)}Te.push(Be)}}return Te})).apply(this,arguments)}S.expand=function(){var re=lt(function*({activeCtx:ve,activeProperty:Fe=null,element:Qe,options:He={},insideList:J=!1,insideIndex:ae=!1,typeScopedContext:_e=null,expansionMap:Te=(()=>{})}){if(null==Qe)return null;if("@default"===Fe&&(He=Object.assign({},He,{isFrame:!1})),!V(Qe)&&!F(Qe)){if(!J&&(null===Fe||"@graph"===v(ve,Fe,{vocab:!0},He))){const q=yield Te({unmappedValue:Qe,activeCtx:ve,activeProperty:Fe,options:He,insideList:J});return void 0===q?null:q}return se({activeCtx:ve,activeProperty:Fe,value:Qe,options:He})}if(V(Qe)){let q=[];const ge=b(ve,Fe,"@container")||[];J=J||ge.includes("@list");for(let le=0;le<Qe.length;++le){let qe=yield S.expand({activeCtx:ve,activeProperty:Fe,element:Qe[le],options:He,expansionMap:Te,insideIndex:ae,typeScopedContext:_e});J&&V(qe)&&(qe={"@list":qe}),(null!==qe||(qe=yield Te({unmappedValue:Qe[le],activeCtx:ve,activeProperty:Fe,parent:Qe,index:le,options:He,expandedParent:q,insideList:J}),void 0!==qe))&&(V(qe)?q=q.concat(qe):q.push(qe))}return q}const xe=v(ve,Fe,{vocab:!0},He),Ge=b(ve,Fe,"@context");_e=_e||(ve.previousContext?ve:null);let Se=Object.keys(Qe).sort(),Ue=!ae;if(Ue&&_e&&Se.length<=2&&!Se.includes("@context"))for(const q of Se){const ge=v(_e,q,{vocab:!0},He);if("@value"===ge){Ue=!1,ve=_e;break}if("@id"===ge&&1===Se.length){Ue=!1;break}}Ue&&(ve=ve.revertToPreviousContext()),w(Ge)||(ve=yield A({activeCtx:ve,localCtx:Ge,propagate:!0,overrideProtected:!0,options:He})),"@context"in Qe&&(ve=yield A({activeCtx:ve,localCtx:Qe["@context"],options:He})),_e=ve;let Ke=null;for(const q of Se)if("@type"===v(ve,q,{vocab:!0},He)){Ke=Ke||q;const le=Qe[q],qe=Array.isArray(le)?le.length>1?le.slice().sort():le:[le];for(const _t of qe){const gt=b(_e,_t,"@context");w(gt)||(ve=yield A({activeCtx:ve,localCtx:gt,options:He,propagate:!1}))}}let Be={};yield ne({activeCtx:ve,activeProperty:Fe,expandedActiveProperty:xe,element:Qe,expandedParent:Be,options:He,insideList:J,typeKey:Ke,typeScopedContext:_e,expansionMap:Te}),Se=Object.keys(Be);let X=Se.length;if("@value"in Be){if("@type"in Be&&("@language"in Be||"@direction"in Be))throw new K('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Be});let q=X-1;if("@type"in Be&&(q-=1),"@index"in Be&&(q-=1),"@language"in Be&&(q-=1),"@direction"in Be&&(q-=1),0!==q)throw new K('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Be});const ge=null===Be["@value"]?[]:M(Be["@value"]),le=P(Be,"@type");if(!E(ve,1.1)||!le.includes("@json")||1!==le.length)if(0===ge.length){const qe=yield Te({unmappedValue:Be,activeCtx:ve,activeProperty:Fe,element:Qe,options:He,insideList:J});Be=void 0!==qe?qe:null}else{if(!ge.every(qe=>L(qe)||Y(qe))&&"@language"in Be)throw new K("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Be});if(!le.every(qe=>I(qe)&&!(L(qe)&&0===qe.indexOf("_:"))||Y(qe)))throw new K('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Be})}}else if("@type"in Be&&!V(Be["@type"]))Be["@type"]=[Be["@type"]];else if("@set"in Be||"@list"in Be){if(X>1&&(2!==X||!("@index"in Be)))throw new K('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Be});"@set"in Be&&(Be=Be["@set"],Se=Object.keys(Be),X=Se.length)}else if(1===X&&"@language"in Be){const q=yield Te(Be,{unmappedValue:Be,activeCtx:ve,activeProperty:Fe,element:Qe,options:He,insideList:J});Be=void 0!==q?q:null}if(F(Be)&&!He.keepFreeFloatingNodes&&!J&&(null===Fe||"@graph"===xe)&&(0===X||"@value"in Be||"@list"in Be||1===X&&"@id"in Be)){const q=yield Te({unmappedValue:Be,activeCtx:ve,activeProperty:Fe,element:Qe,options:He,insideList:J});Be=void 0!==q?q:null}return Be});return function(ve){return re.apply(this,arguments)}}()},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],22:[function(Q,we,fe){"use strict";const{isSubjectReference:K}=Q("./graphTypes"),{createMergedNodeMap:V}=Q("./nodeMap"),F={};we.exports=F,F.flatten=Y=>{const L=V(Y),w=[],C=Object.keys(L).sort();for(let R=0;R<C.length;++R){const T=L[C[R]];K(T)||w.push(T)}return w}},{"./graphTypes":25,"./nodeMap":27}],23:[function(Q,we,fe){"use strict";const{isKeyword:K}=Q("./context"),V=Q("./graphTypes"),F=Q("./types"),Y=Q("./util"),L=Q("./url"),w=Q("./JsonLdError"),{createNodeMap:C,mergeNodeMapGraphs:R}=Q("./nodeMap"),T={};function y(S){const G={};for(const ne in S)void 0!==S[ne]&&(G["@"+ne]=[S[ne]]);return[G]}function v(S,G,ne){for(let ce=ne.length-1;ce>=0;--ce){const se=ne[ce];if(se.graph===G&&se.subject["@id"]===S["@id"])return!0}return!1}function b(S,G,ne){const ce="@"+ne;let se=ce in S?S[ce][0]:G[ne];if("embed"===ne)if(!0===se)se="@once";else if(!1===se)se="@never";else if("@always"!==se&&"@never"!==se&&"@link"!==se&&"@first"!==se&&"@last"!==se&&"@once"!==se)throw new w("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:S});return se}function x(S){if(!F.isArray(S)||1!==S.length||!F.isObject(S[0]))throw new w("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:S});if("@id"in S[0])for(const G of Y.asArray(S[0]["@id"]))if(!F.isObject(G)&&!L.isAbsolute(G)||F.isString(G)&&0===G.indexOf("_:"))throw new w("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:S});if("@type"in S[0])for(const G of Y.asArray(S[0]["@type"]))if(!F.isObject(G)&&!L.isAbsolute(G)||F.isString(G)&&0===G.indexOf("_:"))throw new w("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:S})}function E(S,G,ne,ce){let se=!0,te=!1;for(const Ie in ne){let ye=!1;const re=Y.getValues(G,Ie),ve=0===Y.getValues(ne,Ie).length;if("@id"===Ie){if(F.isEmptyObject(ne["@id"][0]||{})?ye=!0:ne["@id"].length>=0&&(ye=ne["@id"].includes(re[0])),!ce.requireAll)return ye}else if("@type"===Ie){if(se=!1,ve){if(re.length>0)return!1;ye=!0}else if(1===ne["@type"].length&&F.isEmptyObject(ne["@type"][0]))ye=re.length>0;else for(const Fe of ne["@type"])ye=!(!F.isObject(Fe)||!("@default"in Fe))||ye||re.some(Qe=>Qe===Fe);if(!ce.requireAll)return ye}else{if(K(Ie))continue;{const Fe=Y.getValues(ne,Ie)[0];let Qe=!1;if(Fe&&(x([Fe]),Qe="@default"in Fe),se=!1,0===re.length&&Qe)continue;if(re.length>0&&ve)return!1;if(void 0===Fe){if(re.length>0)return!1;ye=!0}else if(V.isList(Fe)){const He=Fe["@list"][0];if(V.isList(re[0])){const J=re[0]["@list"];V.isValue(He)?ye=J.some(ae=>Z(He,ae)):(V.isSubject(He)||V.isSubjectReference(He))&&(ye=J.some(ae=>P(S,He,ae,ce)))}}else ye=V.isValue(Fe)?re.some(He=>Z(Fe,He)):V.isSubjectReference(Fe)?re.some(He=>P(S,Fe,He,ce)):!!F.isObject(Fe)&&re.length>0}}if(!ye&&ce.requireAll)return!1;te=te||ye}return se||te}function I(S,G){const ne=S.uniqueEmbeds[S.graph],ce=ne[G],se=ce.parent,te=ce.property,Ie={"@id":G};if(F.isArray(se)){for(let re=0;re<se.length;++re)if(Y.compareValues(se[re],Ie)){se[re]=Ie;break}}else{const re=F.isArray(se[te]);Y.removeValue(se,te,Ie,{propertyIsArray:re}),Y.addValue(se,te,Ie,{propertyIsArray:re})}const ye=re=>{const ve=Object.keys(ne);for(const Fe of ve)Fe in ne&&F.isObject(ne[Fe].parent)&&ne[Fe].parent["@id"]===re&&(delete ne[Fe],ye(Fe))};ye(G)}function H(S,G){if(F.isArray(S))return S.map(ne=>H(ne,G));if(F.isObject(S)){if("@preserve"in S)return S["@preserve"][0];if(V.isValue(S))return S;if(V.isList(S))return S["@list"]=H(S["@list"],G),S;if("@id"in S){const ne=S["@id"];if(G.link.hasOwnProperty(ne)){const ce=G.link[ne].indexOf(S);if(-1!==ce)return G.link[ne][ce];G.link[ne].push(S)}else G.link[ne]=[S]}for(const ne in S)"@id"===ne&&G.bnodesToClear.includes(S[ne])?delete S["@id"]:S[ne]=H(S[ne],G)}return S}function M(S,G,ne){F.isObject(S)?Y.addValue(S,G,ne,{propertyIsArray:!0}):S.push(ne)}function P(S,G,ne,ce){if(!("@id"in ne))return!1;const se=S.subjects[ne["@id"]];return se&&E(S,se,G,ce)}function Z(S,G){const ne=G["@value"],ce=G["@type"],se=G["@language"],te=S["@value"]?F.isArray(S["@value"])?S["@value"]:[S["@value"]]:[],Ie=S["@type"]?F.isArray(S["@type"])?S["@type"]:[S["@type"]]:[],ye=S["@language"]?F.isArray(S["@language"])?S["@language"]:[S["@language"]]:[];return 0===te.length&&0===Ie.length&&0===ye.length||!(!te.includes(ne)&&!F.isEmptyObject(te[0])||!(!ce&&0===Ie.length||Ie.includes(ce)||ce&&F.isEmptyObject(Ie[0]))||!(!se&&0===ye.length||ye.includes(se)||se&&F.isEmptyObject(ye[0])))}we.exports=T,T.frameMergedOrDefault=(S,G,ne)=>{const ce={options:ne,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},se=new Y.IdentifierIssuer("_:b");C(S,ce.graphMap,"@default",se),ne.merged&&(ce.graphMap["@merged"]=R(ce.graphMap),ce.graph="@merged"),ce.subjects=ce.graphMap[ce.graph];const te=[];return T.frame(ce,Object.keys(ce.subjects).sort(),G,te),ne.pruneBlankNodeIdentifiers&&(ne.bnodesToClear=Object.keys(ce.bnodeMap).filter(Ie=>1===ce.bnodeMap[Ie].length)),ne.link={},H(te,ne)},T.frame=(S,G,ne,ce,se=null)=>{x(ne);const te=S.options,Ie={embed:b(ne=ne[0],te,"embed"),explicit:b(ne,te,"explicit"),requireAll:b(ne,te,"requireAll")};S.link.hasOwnProperty(S.graph)||(S.link[S.graph]={});const ye=S.link[S.graph],re=function(S,G,ne,ce){const se={};for(const te of G){const Ie=S.graphMap[S.graph][te];E(S,Ie,ne,ce)&&(se[te]=Ie)}return se}(S,G,ne,Ie),ve=Object.keys(re).sort();for(const Fe of ve){const Qe=re[Fe];if(null===se?S.uniqueEmbeds={[S.graph]:{}}:S.uniqueEmbeds[S.graph]=S.uniqueEmbeds[S.graph]||{},"@link"===Ie.embed&&Fe in ye){M(ce,se,ye[Fe]);continue}const He={"@id":Fe};if(0===Fe.indexOf("_:")&&Y.addValue(S.bnodeMap,Fe,He,{propertyIsArray:!0}),ye[Fe]=He,("@first"===Ie.embed||"@last"===Ie.embed)&&S.is11)throw new w("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:ne});if(S.embedded||!S.uniqueEmbeds[S.graph].hasOwnProperty(Fe)){if(S.embedded&&("@never"===Ie.embed||v(Qe,S.graph,S.subjectStack))){M(ce,se,He);continue}if(S.embedded&&("@first"==Ie.embed||"@once"==Ie.embed)&&S.uniqueEmbeds[S.graph].hasOwnProperty(Fe)){M(ce,se,He);continue}if("@last"===Ie.embed&&Fe in S.uniqueEmbeds[S.graph]&&I(S,Fe),S.uniqueEmbeds[S.graph][Fe]={parent:ce,property:se},S.subjectStack.push({subject:Qe,graph:S.graph}),Fe in S.graphMap){let J=!1,ae=null;"@graph"in ne?(ae=ne["@graph"][0],J=!("@merged"===Fe||"@default"===Fe),F.isObject(ae)||(ae={})):(J="@merged"!==S.graph,ae={}),J&&T.frame(Cn(at({},S),{graph:Fe,embedded:!1}),Object.keys(S.graphMap[Fe]).sort(),[ae],He,"@graph")}"@included"in ne&&T.frame(Cn(at({},S),{embedded:!1}),G,ne["@included"],He,"@included");for(const J of Object.keys(Qe).sort())if(K(J)){if(He[J]=Y.clone(Qe[J]),"@type"===J)for(const ae of Qe["@type"])0===ae.indexOf("_:")&&Y.addValue(S.bnodeMap,ae,He,{propertyIsArray:!0})}else if(!Ie.explicit||J in ne)for(const ae of Qe[J]){const _e=J in ne?ne[J]:y(Ie);if(V.isList(ae)){const Te=ne[J]&&ne[J][0]&&ne[J][0]["@list"]?ne[J][0]["@list"]:y(Ie),xe={"@list":[]};M(He,J,xe);const Ge=ae["@list"];for(const Se of Ge)V.isSubjectReference(Se)?T.frame(Cn(at({},S),{embedded:!0}),[Se["@id"]],Te,xe,"@list"):M(xe,"@list",Y.clone(Se))}else V.isSubjectReference(ae)?T.frame(Cn(at({},S),{embedded:!0}),[ae["@id"]],_e,He,J):Z(_e[0],ae)&&M(He,J,Y.clone(ae))}for(const J of Object.keys(ne).sort()){if("@type"===J){if(!F.isObject(ne[J][0])||!("@default"in ne[J][0]))continue}else if(K(J))continue;const ae=ne[J][0]||{};if(!b(ae,te,"omitDefault")&&!(J in He)){let Te="@null";"@default"in ae&&(Te=Y.clone(ae["@default"])),F.isArray(Te)||(Te=[Te]),He[J]=[{"@preserve":Te}]}}for(const J of Object.keys(ne["@reverse"]||{}).sort()){const ae=ne["@reverse"][J];for(const _e of Object.keys(S.subjects))Y.getValues(S.subjects[_e],J).some(xe=>xe["@id"]===Fe)&&(He["@reverse"]=He["@reverse"]||{},Y.addValue(He["@reverse"],J,[],{propertyIsArray:!0}),T.frame(Cn(at({},S),{embedded:!0}),[_e],ae,He["@reverse"][J],se))}M(ce,se,He),S.subjectStack.pop()}}},T.cleanupNull=(S,G)=>{if(F.isArray(S))return S.map(ce=>T.cleanupNull(ce,G)).filter(ce=>ce);if("@null"===S)return null;if(F.isObject(S)){if("@id"in S){const ne=S["@id"];if(G.link.hasOwnProperty(ne)){const ce=G.link[ne].indexOf(S);if(-1!==ce)return G.link[ne][ce];G.link[ne].push(S)}else G.link[ne]=[S]}for(const ne in S)S[ne]=T.cleanupNull(S[ne],G)}return S}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32}],24:[function(Q,we,fe){"use strict";const K=Q("./JsonLdError"),V=Q("./graphTypes"),F=Q("./types"),Y=Q("./util"),{RDF_LIST:L,RDF_FIRST:w,RDF_REST:C,RDF_NIL:R,RDF_TYPE:T,RDF_JSON_LITERAL:y,XSD_BOOLEAN:v,XSD_DOUBLE:b,XSD_INTEGER:x,XSD_STRING:A}=Q("./constants"),E=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,I={};function H(M,P,Z){if(M.termType.endsWith("Node"))return{"@id":M.value};const S={"@value":M.value};if(M.language)S["@language"]=M.language;else{let G=M.datatype.value;if(G||(G=A),G===y){G="@json";try{S["@value"]=JSON.parse(S["@value"])}catch(ne){throw new K("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:S["@value"],cause:ne})}}if(P){if(G===v)"true"===S["@value"]?S["@value"]=!0:"false"===S["@value"]&&(S["@value"]=!1);else if(F.isNumeric(S["@value"]))if(G===x){const ne=parseInt(S["@value"],10);ne.toFixed(0)===S["@value"]&&(S["@value"]=ne)}else G===b&&(S["@value"]=parseFloat(S["@value"]));[v,x,b,A].includes(G)||(S["@type"]=G)}else if("i18n-datatype"===Z&&G.startsWith("https://www.w3.org/ns/i18n#")){const[,ne,ce]=G.split(/[#_]/);ne.length>0&&(S["@language"]=ne,ne.match(E)||console.warn(`@language must be valid BCP47: ${ne}`)),S["@direction"]=ce}else G!==A&&(S["@type"]=G)}return S}we.exports=I,I.fromRDF=function(){var M=lt(function*(P,{useRdfType:Z=!1,useNativeTypes:S=!1,rdfDirection:G=null}){const ne={},ce={"@default":ne},se={};for(const ye of P){const re="DefaultGraph"===ye.graph.termType?"@default":ye.graph.value;re in ce||(ce[re]={}),"@default"!==re&&!(re in ne)&&(ne[re]={"@id":re});const ve=ce[re],Fe=ye.subject.value,Qe=ye.predicate.value,He=ye.object;Fe in ve||(ve[Fe]={"@id":Fe});const J=ve[Fe],ae=He.termType.endsWith("Node");if(ae&&!(He.value in ve)&&(ve[He.value]={"@id":He.value}),Qe===T&&!Z&&ae){Y.addValue(J,"@type",He.value,{propertyIsArray:!0});continue}const _e=H(He,S,G);if(Y.addValue(J,Qe,_e,{propertyIsArray:!0}),ae)if(He.value===R){const Te=ve[He.value];"usages"in Te||(Te.usages=[]),Te.usages.push({node:J,property:Qe,value:_e})}else se[He.value]=!(He.value in se)&&{node:J,property:Qe,value:_e}}for(const ye in ce){const re=ce[ye];if(!(R in re))continue;const ve=re[R];if(ve.usages){for(let Fe of ve.usages){let Qe=Fe.node,He=Fe.property,J=Fe.value;const ae=[],_e=[];let Te=Object.keys(Qe).length;for(;He===C&&F.isObject(se[Qe["@id"]])&&F.isArray(Qe[w])&&1===Qe[w].length&&F.isArray(Qe[C])&&1===Qe[C].length&&(3===Te||4===Te&&F.isArray(Qe["@type"])&&1===Qe["@type"].length&&Qe["@type"][0]===L)&&(ae.push(Qe[w][0]),_e.push(Qe["@id"]),Fe=se[Qe["@id"]],Qe=Fe.node,He=Fe.property,J=Fe.value,Te=Object.keys(Qe).length,V.isBlankNode(Qe)););delete J["@id"],J["@list"]=ae.reverse();for(const xe of _e)delete re[xe]}delete ve.usages}}const te=[],Ie=Object.keys(ne).sort();for(const ye of Ie){const re=ne[ye];if(ye in ce){const ve=re["@graph"]=[],Fe=ce[ye],Qe=Object.keys(Fe).sort();for(const He of Qe){const J=Fe[He];V.isSubjectReference(J)||ve.push(J)}}V.isSubjectReference(re)||te.push(re)}return te});return function(P,Z){return M.apply(this,arguments)}}()},{"./JsonLdError":12,"./constants":18,"./graphTypes":25,"./types":30,"./util":32}],25:[function(Q,we,fe){"use strict";const K=Q("./types"),V={};we.exports=V,V.isSubject=F=>!(!K.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),V.isSubjectReference=F=>K.isObject(F)&&1===Object.keys(F).length&&"@id"in F,V.isValue=F=>K.isObject(F)&&"@value"in F,V.isList=F=>K.isObject(F)&&"@list"in F,V.isGraph=F=>K.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(Y=>"@id"!==Y&&"@index"!==Y).length,V.isSimpleGraph=F=>V.isGraph(F)&&!("@id"in F),V.isBlankNode=F=>!!K.isObject(F)&&("@id"in F?0===F["@id"].indexOf("_:"):0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F))},{"./types":30}],26:[function(Q,we,fe){const K=Q("rdf-canonize"),V=Q("./platform"),F=Q("./util"),Y=Q("./ContextResolver"),L=F.IdentifierIssuer,w=Q("./JsonLdError"),C=Q("lru-cache"),R=Q("./NQuads"),{expand:T}=Q("./expand"),{flatten:y}=Q("./flatten"),{fromRDF:v}=Q("./fromRdf"),{toRDF:b}=Q("./toRdf"),{frameMergedOrDefault:x,cleanupNull:A}=Q("./frame"),{isArray:E,isObject:I,isString:H}=Q("./types"),{isSubjectReference:M}=Q("./graphTypes"),{expandIri:P,getInitialContext:Z,process:S,processingMode:G}=Q("./context"),{compact:ne,compactIri:ce}=Q("./compact"),{createNodeMap:se,createMergedNodeMap:te,mergeNodeMaps:Ie}=Q("./nodeMap"),ye=function(ve){const Fe={},He=new C({max:100});function J(ae,xe){var Ge=xe,{documentLoader:_e=ve.documentLoader}=Ge,Te=zq(Ge,["documentLoader"]);return Object.assign({},{documentLoader:_e},Te,ae)}return ve.compact=function(){var ae=lt(function*(_e,Te,xe){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===Te)throw new w("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===_e)return null;let Ge;(xe=J(xe,{base:H(_e)?_e:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new L("_:b"),contextResolver:new Y({sharedCache:He})})).link&&(xe.skipExpansion=!0),xe.compactToRelative||delete xe.base,Ge=xe.skipExpansion?_e:yield ve.expand(_e,xe);const Se=yield ve.processContext(Z(xe),Te,xe);let Ue=yield ne({activeCtx:Se,element:Ge,options:xe,compactionMap:xe.compactionMap});xe.compactArrays&&!xe.graph&&E(Ue)?1===Ue.length?Ue=Ue[0]:0===Ue.length&&(Ue={}):xe.graph&&I(Ue)&&(Ue=[Ue]),I(Te)&&"@context"in Te&&(Te=Te["@context"]),Te=F.clone(Te),E(Te)||(Te=[Te]);const Ke=Te;Te=[];for(let X=0;X<Ke.length;++X)(!I(Ke[X])||Object.keys(Ke[X]).length>0)&&Te.push(Ke[X]);const Be=Te.length>0;if(1===Te.length&&(Te=Te[0]),E(Ue)){const X=ce({activeCtx:Se,iri:"@graph",relativeTo:{vocab:!0}}),q=Ue;Ue={},Be&&(Ue["@context"]=Te),Ue[X]=q}else if(I(Ue)&&Be){const X=Ue;Ue={"@context":Te};for(const q in X)Ue[q]=X[q]}return Ue});return function(_e,Te,xe){return ae.apply(this,arguments)}}(),ve.expand=function(){var ae=lt(function*(_e,Te){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(Te=J(Te,{keepFreeFloatingNodes:!1,contextResolver:new Y({sharedCache:He})})).expansionMap&&(Te.expansionMap=void 0);const xe={},Ge=[];if("expandContext"in Te){const Be=F.clone(Te.expandContext);xe.expandContext=I(Be)&&"@context"in Be?Be:{"@context":Be},Ge.push(xe.expandContext)}let Se;if(H(_e)){const Be=yield ve.get(_e,Te);Se=Be.documentUrl,xe.input=Be.document,Be.contextUrl&&(xe.remoteContext={"@context":Be.contextUrl},Ge.push(xe.remoteContext))}else xe.input=F.clone(_e);"base"in Te||(Te.base=Se||"");let Ue=Z(Te);for(const Be of Ge)Ue=yield S({activeCtx:Ue,localCtx:Be,options:Te});let Ke=yield T({activeCtx:Ue,element:xe.input,options:Te,expansionMap:Te.expansionMap});return I(Ke)&&"@graph"in Ke&&1===Object.keys(Ke).length?Ke=Ke["@graph"]:null===Ke&&(Ke=[]),E(Ke)||(Ke=[Ke]),Ke});return function(_e,Te){return ae.apply(this,arguments)}}(),ve.flatten=function(){var ae=lt(function*(_e,Te,xe){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");Te="function"==typeof Te?null:Te||null,xe=J(xe,{base:H(_e)?_e:"",contextResolver:new Y({sharedCache:He})});const Ge=yield ve.expand(_e,xe),Se=y(Ge);return null===Te?Se:(xe.graph=!0,xe.skipExpansion=!0,yield ve.compact(Se,Te,xe))});return function(_e,Te,xe){return ae.apply(this,arguments)}}(),ve.frame=function(){var ae=lt(function*(_e,Te,xe){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(xe=J(xe,{base:H(_e)?_e:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new Y({sharedCache:He})}),H(Te)){const le=yield ve.get(Te,xe);if(Te=le.document,le.contextUrl){let qe=Te["@context"];qe?E(qe)?qe.push(le.contextUrl):qe=[qe,le.contextUrl]:qe=le.contextUrl,Te["@context"]=qe}}const Ge=Te&&Te["@context"]||{},Se=yield ve.processContext(Z(xe),Ge,xe);xe.hasOwnProperty("omitGraph")||(xe.omitGraph=G(Se,1.1)),xe.hasOwnProperty("pruneBlankNodeIdentifiers")||(xe.pruneBlankNodeIdentifiers=G(Se,1.1));const Ue=yield ve.expand(_e,xe),Ke=at({},xe);Ke.isFrame=!0,Ke.keepFreeFloatingNodes=!0;const Be=yield ve.expand(Te,Ke),X=Object.keys(Te).map(le=>P(Se,le,{vocab:!0}));Ke.merged=!X.includes("@graph"),Ke.is11=G(Se,1.1);const q=x(Ue,Be,Ke);Ke.graph=!xe.omitGraph,Ke.skipExpansion=!0,Ke.link={},Ke.framing=!0;let ge=yield ve.compact(q,Ge,Ke);return Ke.link={},ge=A(ge,Ke),ge});return function(_e,Te,xe){return ae.apply(this,arguments)}}(),ve.link=function(){var ae=lt(function*(_e,Te,xe){const Ge={};return Te&&(Ge["@context"]=Te),Ge["@embed"]="@link",ve.frame(_e,Ge,xe)});return function(_e,Te,xe){return ae.apply(this,arguments)}}(),ve.normalize=ve.canonize=function(){var ae=lt(function*(_e,Te){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(Te=J(Te,{base:H(_e)?_e:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new Y({sharedCache:He})}))){if("application/n-quads"!==Te.inputFormat&&"application/nquads"!==Te.inputFormat)throw new w("Unknown canonicalization input format.","jsonld.CanonizeError");const Se=R.parse(_e);return K.canonize(Se,Te)}const xe=at({},Te);delete xe.format,xe.produceGeneralizedRdf=!1;const Ge=yield ve.toRDF(_e,xe);return K.canonize(Ge,Te)});return function(_e,Te){return ae.apply(this,arguments)}}(),ve.fromRDF=function(){var ae=lt(function*(_e,Te){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Te=J(Te,{format:H(_e)?"application/n-quads":void 0});const{format:xe}=Te;let{rdfParser:Ge}=Te;if(xe){if(Ge=Ge||Fe[xe],!Ge)throw new w("Unknown input format.","jsonld.UnknownFormat",{format:xe})}else Ge=()=>_e;const Se=yield Ge(_e);return v(Se,Te)});return function(_e,Te){return ae.apply(this,arguments)}}(),ve.toRDF=function(){var ae=lt(function*(_e,Te){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let xe;xe=(Te=J(Te,{base:H(_e)?_e:"",skipExpansion:!1,contextResolver:new Y({sharedCache:He})})).skipExpansion?_e:yield ve.expand(_e,Te);const Ge=b(xe,Te);if(Te.format){if("application/n-quads"===Te.format||"application/nquads"===Te.format)return R.serialize(Ge);throw new w("Unknown output format.","jsonld.UnknownFormat",{format:Te.format})}return Ge});return function(_e,Te){return ae.apply(this,arguments)}}(),ve.createNodeMap=function(){var ae=lt(function*(_e,Te){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Te=J(Te,{base:H(_e)?_e:"",contextResolver:new Y({sharedCache:He})});const xe=yield ve.expand(_e,Te);return te(xe,Te)});return function(_e,Te){return ae.apply(this,arguments)}}(),ve.merge=function(){var ae=lt(function*(_e,Te,xe){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!E(_e))throw new TypeError('Could not merge, "docs" must be an array.');Te="function"==typeof Te?null:Te||null,xe=J(xe,{contextResolver:new Y({sharedCache:He})});const Ge=yield Promise.all(_e.map(le=>{const qe=at({},xe);return ve.expand(le,qe)}));let Se=!0;"mergeNodes"in xe&&(Se=xe.mergeNodes);const Ue=xe.issuer||new L("_:b"),Ke={"@default":{}};for(let le=0;le<Ge.length;++le){const qe=F.relabelBlankNodes(Ge[le],{issuer:new L("_:b"+le+"-")}),_t=Se||0===le?Ke:{"@default":{}};if(se(qe,_t,"@default",Ue),_t!==Ke)for(const gt in _t){const Ae=_t[gt];if(!(gt in Ke)){Ke[gt]=Ae;continue}const U=Ke[gt];for(const k in Ae)k in U||(U[k]=Ae[k])}}const Be=Ie(Ke),X=[],q=Object.keys(Be).sort();for(let le=0;le<q.length;++le){const qe=Be[q[le]];M(qe)||X.push(qe)}return null===Te?X:(xe.graph=!0,xe.skipExpansion=!0,yield ve.compact(X,Te,xe))});return function(_e,Te,xe){return ae.apply(this,arguments)}}(),Object.defineProperty(ve,"documentLoader",{get:()=>ve._documentLoader,set:ae=>ve._documentLoader=ae}),ve.documentLoader=function(){var ae=lt(function*(_e){throw new w("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:_e})});return function(_e){return ae.apply(this,arguments)}}(),ve.get=function(){var ae=lt(function*(_e,Te){let xe;xe="function"==typeof Te.documentLoader?Te.documentLoader:ve.documentLoader;const Ge=yield xe(_e);try{if(!Ge.document)throw new w("No remote document found at the given URL.","jsonld.NullRemoteDocument");H(Ge.document)&&(Ge.document=JSON.parse(Ge.document))}catch(Se){throw new w("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Se,remoteDoc:Ge})}return Ge});return function(_e,Te){return ae.apply(this,arguments)}}(),ve.processContext=function(){var ae=lt(function*(_e,Te,xe){return xe=J(xe,{base:"",contextResolver:new Y({sharedCache:He})}),null===Te?Z(xe):(Te=F.clone(Te),I(Te)&&"@context"in Te||(Te={"@context":Te}),S({activeCtx:_e,localCtx:Te,options:xe}))});return function(_e,Te,xe){return ae.apply(this,arguments)}}(),ve.getContextValue=Q("./context").getContextValue,ve.documentLoaders={},ve.useDocumentLoader=function(ae){if(!(ae in ve.documentLoaders))throw new w('Unknown document loader type: "'+ae+'"',"jsonld.UnknownDocumentLoader",{type:ae});ve.documentLoader=ve.documentLoaders[ae].apply(ve,Array.prototype.slice.call(arguments,1))},ve.registerRDFParser=function(ae,_e){Fe[ae]=_e},ve.unregisterRDFParser=function(ae){delete Fe[ae]},ve.registerRDFParser("application/n-quads",R.parse),ve.registerRDFParser("application/nquads",R.parse),ve.url=Q("./url"),ve.util=F,Object.assign(ve,F),ve.promises=ve,ve.RequestQueue=Q("./RequestQueue"),ve.JsonLdProcessor=Q("./JsonLdProcessor")(ve),V.setupGlobals(ve),V.setupDocumentLoaders(ve),ve},re=function(){return ye(function(){return re()})};ye(re),we.exports=re},{"./ContextResolver":11,"./JsonLdError":12,"./JsonLdProcessor":13,"./NQuads":14,"./RequestQueue":15,"./compact":17,"./context":19,"./expand":21,"./flatten":22,"./frame":23,"./fromRdf":24,"./graphTypes":25,"./nodeMap":27,"./platform":28,"./toRdf":29,"./types":30,"./url":31,"./util":32,"lru-cache":33,"rdf-canonize":46}],27:[function(Q,we,fe){"use strict";const{isKeyword:K}=Q("./context"),V=Q("./graphTypes"),F=Q("./types"),Y=Q("./util"),L=Q("./JsonLdError"),w={};we.exports=w,w.createMergedNodeMap=(C,R)=>{const T=(R=R||{}).issuer||new Y.IdentifierIssuer("_:b"),y={"@default":{}};return w.createNodeMap(C,y,"@default",T),w.mergeNodeMaps(y)},w.createNodeMap=(C,R,T,y,v,b)=>{if(F.isArray(C)){for(const I of C)w.createNodeMap(I,R,T,y,void 0,b);return}if(!F.isObject(C))return void(b&&b.push(C));if(V.isValue(C)){if("@type"in C){let I=C["@type"];0===I.indexOf("_:")&&(C["@type"]=I=y.getId(I))}return void(b&&b.push(C))}if(b&&V.isList(C)){const I=[];return w.createNodeMap(C["@list"],R,T,y,v,I),void b.push({"@list":I})}if("@type"in C){const I=C["@type"];for(const H of I)0===H.indexOf("_:")&&y.getId(H)}F.isUndefined(v)&&(v=V.isBlankNode(C)?y.getId(C["@id"]):C["@id"]),b&&b.push({"@id":v});const x=R[T],A=x[v]=x[v]||{};A["@id"]=v;const E=Object.keys(C).sort();for(let I of E){if("@id"===I)continue;if("@reverse"===I){const M={"@id":v},P=C["@reverse"];for(const Z in P){const S=P[Z];for(const G of S){let ne=G["@id"];V.isBlankNode(G)&&(ne=y.getId(ne)),w.createNodeMap(G,R,T,y,ne),Y.addValue(x[ne],Z,M,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===I){v in R||(R[v]={}),w.createNodeMap(C[I],R,v,y);continue}if("@included"===I){w.createNodeMap(C[I],R,T,y);continue}if("@type"!==I&&K(I)){if("@index"===I&&I in A&&(C[I]!==A[I]||C[I]["@id"]!==A[I]["@id"]))throw new L("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:A});A[I]=C[I];continue}const H=C[I];if(0===I.indexOf("_:")&&(I=y.getId(I)),0!==H.length)for(let M of H)if("@type"===I&&(M=0===M.indexOf("_:")?y.getId(M):M),V.isSubject(M)||V.isSubjectReference(M)){if("@id"in M&&!M["@id"])continue;const P=V.isBlankNode(M)?y.getId(M["@id"]):M["@id"];Y.addValue(A,I,{"@id":P},{propertyIsArray:!0,allowDuplicate:!1}),w.createNodeMap(M,R,T,y,P)}else if(V.isValue(M))Y.addValue(A,I,M,{propertyIsArray:!0,allowDuplicate:!1});else if(V.isList(M)){const P=[];w.createNodeMap(M["@list"],R,T,y,v,P),M={"@list":P},Y.addValue(A,I,M,{propertyIsArray:!0,allowDuplicate:!1})}else w.createNodeMap(M,R,T,y,v),Y.addValue(A,I,M,{propertyIsArray:!0,allowDuplicate:!1});else Y.addValue(A,I,[],{propertyIsArray:!0})}},w.mergeNodeMapGraphs=C=>{const R={};for(const T of Object.keys(C).sort())for(const y of Object.keys(C[T]).sort()){const v=C[T][y];y in R||(R[y]={"@id":y});const b=R[y];for(const x of Object.keys(v).sort())if(K(x)&&"@type"!==x)b[x]=Y.clone(v[x]);else for(const A of v[x])Y.addValue(b,x,Y.clone(A),{propertyIsArray:!0,allowDuplicate:!1})}return R},w.mergeNodeMaps=C=>{const R=C["@default"],T=Object.keys(C).sort();for(const y of T){if("@default"===y)continue;const v=C[y];let b=R[y];b?"@graph"in b||(b["@graph"]=[]):R[y]=b={"@id":y,"@graph":[]};const x=b["@graph"];for(const A of Object.keys(v).sort()){const E=v[A];V.isSubjectReference(E)||x.push(E)}}return R}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./util":32}],28:[function(Q,we,fe){"use strict";const K=Q("./documentLoaders/xhr"),V={};we.exports=V,V.setupDocumentLoaders=function(F){"undefined"!=typeof XMLHttpRequest&&(F.documentLoaders.xhr=K,F.useDocumentLoader("xhr"))},V.setupGlobals=function(F){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:F.JsonLdProcessor})}},{"./documentLoaders/xhr":20}],29:[function(Q,we,fe){"use strict";const{createNodeMap:K}=Q("./nodeMap"),{isKeyword:V}=Q("./context"),F=Q("./graphTypes"),Y=Q("canonicalize"),L=Q("./types"),w=Q("./util"),{RDF_FIRST:C,RDF_REST:R,RDF_NIL:T,RDF_TYPE:y,RDF_JSON_LITERAL:v,RDF_LANGSTRING:b,XSD_BOOLEAN:x,XSD_DOUBLE:A,XSD_INTEGER:E,XSD_STRING:I}=Q("./constants"),{isAbsolute:H}=Q("./url"),M={};function P(G,ne,ce,se,te){const Ie=Object.keys(ne).sort();for(const ye of Ie){const re=ne[ye],ve=Object.keys(re).sort();for(let Fe of ve){const Qe=re[Fe];if("@type"===Fe)Fe=y;else if(V(Fe))continue;for(const He of Qe){const J={termType:ye.startsWith("_:")?"BlankNode":"NamedNode",value:ye};if(!H(ye))continue;const ae={termType:Fe.startsWith("_:")?"BlankNode":"NamedNode",value:Fe};if(!H(Fe)||"BlankNode"===ae.termType&&!te.produceGeneralizedRdf)continue;const _e=S(He,se,G,ce,te.rdfDirection);_e&&G.push({subject:J,predicate:ae,object:_e,graph:ce})}}}}function S(G,ne,ce,se,te){const Ie={};if(F.isValue(G)){Ie.termType="Literal",Ie.value=void 0,Ie.datatype={termType:"NamedNode"};let ye=G["@value"];const re=G["@type"]||null;"@json"===re?(Ie.value=Y(ye),Ie.datatype.value=v):L.isBoolean(ye)?(Ie.value=ye.toString(),Ie.datatype.value=re||x):L.isDouble(ye)||re===A?(L.isDouble(ye)||(ye=parseFloat(ye)),Ie.value=ye.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ie.datatype.value=re||A):L.isNumber(ye)?(Ie.value=ye.toFixed(0),Ie.datatype.value=re||E):"i18n-datatype"===te&&"@direction"in G?(Ie.datatype.value="https://www.w3.org/ns/i18n#"+(G["@language"]||"")+`_${G["@direction"]}`,Ie.value=ye):"@language"in G?(Ie.value=ye,Ie.datatype.value=re||b,Ie.language=G["@language"]):(Ie.value=ye,Ie.datatype.value=re||I)}else if(F.isList(G)){const ye=function(G,ne,ce,se,te){const Ie={termType:"NamedNode",value:C},ye={termType:"NamedNode",value:R},re={termType:"NamedNode",value:T},ve=G.pop(),Fe=ve?{termType:"BlankNode",value:ne.getId()}:re;let Qe=Fe;for(const He of G){const J=S(He,ne,ce,se,te),ae={termType:"BlankNode",value:ne.getId()};ce.push({subject:Qe,predicate:Ie,object:J,graph:se}),ce.push({subject:Qe,predicate:ye,object:ae,graph:se}),Qe=ae}if(ve){const He=S(ve,ne,ce,se,te);ce.push({subject:Qe,predicate:Ie,object:He,graph:se}),ce.push({subject:Qe,predicate:ye,object:re,graph:se})}return Fe}(G["@list"],ne,ce,se,te);Ie.termType=ye.termType,Ie.value=ye.value}else{const ye=L.isObject(G)?G["@id"]:G;Ie.termType=ye.startsWith("_:")?"BlankNode":"NamedNode",Ie.value=ye}return"NamedNode"!==Ie.termType||H(Ie.value)?Ie:null}we.exports=M,M.toRDF=(G,ne)=>{const ce=new w.IdentifierIssuer("_:b"),se={"@default":{}};K(G,se,"@default",ce);const te=[],Ie=Object.keys(se).sort();for(const ye of Ie){let re;if("@default"===ye)re={termType:"DefaultGraph",value:""};else{if(!H(ye))continue;re=ye.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},re.value=ye}P(te,se[ye],re,ce,ne)}return te}},{"./constants":18,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32,canonicalize:7}],30:[function(Q,we,fe){"use strict";const K={};we.exports=K,K.isArray=Array.isArray,K.isBoolean=V=>"boolean"==typeof V||"[object Boolean]"===Object.prototype.toString.call(V),K.isDouble=V=>K.isNumber(V)&&(-1!==String(V).indexOf(".")||Math.abs(V)>=1e21),K.isEmptyObject=V=>K.isObject(V)&&0===Object.keys(V).length,K.isNumber=V=>"number"==typeof V||"[object Number]"===Object.prototype.toString.call(V),K.isNumeric=V=>!isNaN(parseFloat(V))&&isFinite(V),K.isObject=V=>"[object Object]"===Object.prototype.toString.call(V),K.isString=V=>"string"==typeof V||"[object String]"===Object.prototype.toString.call(V),K.isUndefined=V=>void 0===V},{}],31:[function(Q,we,fe){"use strict";const K=Q("./types"),V={};we.exports=V,V.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},V.parse=(Y,L)=>{const w={},C=V.parsers[L||"full"],R=C.regex.exec(Y);let T=C.keys.length;for(;T--;)w[C.keys[T]]=void 0===R[T]?null:R[T];return("https"===w.scheme&&"443"===w.port||"http"===w.scheme&&"80"===w.port)&&(w.href=w.href.replace(":"+w.port,""),w.authority=w.authority.replace(":"+w.port,""),w.port=null),w.normalizedPath=V.removeDotSegments(w.path),w},V.prependBase=(Y,L)=>{if(null===Y||V.isAbsolute(L))return L;(!Y||K.isString(Y))&&(Y=V.parse(Y||""));const w=V.parse(L),C={protocol:Y.protocol||""};if(null!==w.authority)C.authority=w.authority,C.path=w.path,C.query=w.query;else if(C.authority=Y.authority,""===w.path)C.path=Y.path,C.query=null!==w.query?w.query:Y.query;else{if(0===w.path.indexOf("/"))C.path=w.path;else{let T=Y.path;T=T.substr(0,T.lastIndexOf("/")+1),(T.length>0||Y.authority)&&"/"!==T.substr(-1)&&(T+="/"),T+=w.path,C.path=T}C.query=w.query}""!==w.path&&(C.path=V.removeDotSegments(C.path));let R=C.protocol;return null!==C.authority&&(R+="//"+C.authority),R+=C.path,null!==C.query&&(R+="?"+C.query),null!==w.fragment&&(R+="#"+w.fragment),""===R&&(R="./"),R},V.removeBase=(Y,L)=>{if(null===Y)return L;(!Y||K.isString(Y))&&(Y=V.parse(Y||""));let w="";if(""!==Y.href?w+=(Y.protocol||"")+"//"+(Y.authority||""):L.indexOf("//")&&(w+="//"),0!==L.indexOf(w))return L;const C=V.parse(L.substr(w.length)),R=Y.normalizedPath.split("/"),T=C.normalizedPath.split("/"),y=C.fragment||C.query?0:1;for(;R.length>0&&T.length>y&&R[0]===T[0];)R.shift(),T.shift();let v="";if(R.length>0){R.pop();for(let b=0;b<R.length;++b)v+="../"}return v+=T.join("/"),null!==C.query&&(v+="?"+C.query),null!==C.fragment&&(v+="#"+C.fragment),""===v&&(v="./"),v},V.removeDotSegments=Y=>{if(0===Y.length)return"";const L=Y.split("/"),w=[];for(;L.length>0;){const C=L.shift(),R=0===L.length;"."!==C?".."!==C?w.push(C):(w.pop(),R&&w.push("")):R&&w.push("")}return"/"===Y[0]&&w.length>0&&""!==w[0]&&w.unshift(""),1===w.length&&""===w[0]?"/":w.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;V.isAbsolute=Y=>K.isString(Y)&&F.test(Y),V.isRelative=Y=>K.isString(Y)},{"./types":30}],32:[function(Q,we,fe){"use strict";const K=Q("./graphTypes"),V=Q("./types"),F=Q("rdf-canonize").IdentifierIssuer,Y=Q("./JsonLdError"),L=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,w=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,C=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,R_headers={accept:"application/ld+json, application/json"},T={};function y(v,b){if(V.isArray(b))for(let x=0;x<b.length;++x)b[x]=y(v,b[x]);else if(K.isList(b))b["@list"]=y(v,b["@list"]);else if(V.isObject(b)){K.isBlankNode(b)&&(b["@id"]=v.getId(b["@id"]));const x=Object.keys(b).sort();for(let A=0;A<x.length;++A){const E=x[A];"@id"!==E&&(b[E]=y(v,b[E]))}}return b}we.exports=T,T.IdentifierIssuer=F,T.clone=function(v){if(v&&"object"==typeof v){let b;if(V.isArray(v)){b=[];for(let x=0;x<v.length;++x)b[x]=T.clone(v[x])}else if(v instanceof Map){b=new Map;for(const[x,A]of v)b.set(x,T.clone(A))}else if(v instanceof Set){b=new Set;for(const x of v)b.add(T.clone(x))}else if(V.isObject(v)){b={};for(const x in v)b[x]=T.clone(v[x])}else b=v.toString();return b}return v},T.asArray=function(v){return Array.isArray(v)?v:[v]},T.buildHeaders=(v={})=>{if(Object.keys(v).some(x=>"accept"===x.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+R_headers.accept+'" is supported.');return Object.assign({Accept:R_headers.accept},v)},T.parseLinkHeader=v=>{const b={},x=v.match(L);for(let A=0;A<x.length;++A){let E=x[A].match(w);if(!E)continue;const I={target:E[1]},H=E[2];for(;E=C.exec(H);)I[E[1]]=void 0===E[2]?E[3]:E[2];const M=I.rel||"";Array.isArray(b[M])?b[M].push(I):b[M]=b.hasOwnProperty(M)?[b[M],I]:I}return b},T.validateTypeValue=(v,b)=>{if(!(V.isString(v)||V.isArray(v)&&v.every(x=>V.isString(x)))){if(b&&V.isObject(v))switch(Object.keys(v).length){case 0:return;case 1:if("@default"in v&&T.asArray(v["@default"]).every(x=>V.isString(x)))return}throw new Y('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:v})}},T.hasProperty=(v,b)=>{if(v.hasOwnProperty(b)){const x=v[b];return!V.isArray(x)||x.length>0}return!1},T.hasValue=(v,b,x)=>{if(T.hasProperty(v,b)){let A=v[b];const E=K.isList(A);if(V.isArray(A)||E){E&&(A=A["@list"]);for(let I=0;I<A.length;++I)if(T.compareValues(x,A[I]))return!0}else if(!V.isArray(x))return T.compareValues(x,A)}return!1},T.addValue=(v,b,x,A)=>{if("propertyIsArray"in(A=A||{})||(A.propertyIsArray=!1),"valueIsArray"in A||(A.valueIsArray=!1),"allowDuplicate"in A||(A.allowDuplicate=!0),"prependValue"in A||(A.prependValue=!1),A.valueIsArray)v[b]=x;else if(V.isArray(x)){0===x.length&&A.propertyIsArray&&!v.hasOwnProperty(b)&&(v[b]=[]),A.prependValue&&(x=x.concat(v[b]),v[b]=[]);for(let E=0;E<x.length;++E)T.addValue(v,b,x[E],A)}else if(v.hasOwnProperty(b)){const E=!A.allowDuplicate&&T.hasValue(v,b,x);!V.isArray(v[b])&&(!E||A.propertyIsArray)&&(v[b]=[v[b]]),E||(A.prependValue?v[b].unshift(x):v[b].push(x))}else v[b]=A.propertyIsArray?[x]:x},T.getValues=(v,b)=>[].concat(v[b]||[]),T.removeProperty=(v,b)=>{delete v[b]},T.removeValue=(v,b,x,A)=>{"propertyIsArray"in(A=A||{})||(A.propertyIsArray=!1);const E=T.getValues(v,b).filter(I=>!T.compareValues(I,x));0===E.length?T.removeProperty(v,b):v[b]=1!==E.length||A.propertyIsArray?E:E[0]},T.relabelBlankNodes=(v,b)=>y((b=b||{}).issuer||new F("_:b"),v),T.compareValues=(v,b)=>!!(v===b||K.isValue(v)&&K.isValue(b)&&v["@value"]===b["@value"]&&v["@type"]===b["@type"]&&v["@language"]===b["@language"]&&v["@index"]===b["@index"])||!!(V.isObject(v)&&"@id"in v&&V.isObject(b)&&"@id"in b)&&v["@id"]===b["@id"],T.compareShortestLeast=(v,b)=>v.length<b.length?-1:b.length<v.length?1:v===b?0:v<b?-1:1},{"./JsonLdError":12,"./graphTypes":25,"./types":30,"rdf-canonize":46}],33:[function(Q,we,fe){"use strict";const K=Q("yallist"),V=Symbol("max"),F=Symbol("length"),Y=Symbol("lengthCalculator"),L=Symbol("allowStale"),w=Symbol("maxAge"),C=Symbol("dispose"),R=Symbol("noDisposeOnSet"),T=Symbol("lruList"),y=Symbol("cache"),v=Symbol("updateAgeOnGet"),b=()=>1;const A=(Z,S,G)=>{const ne=Z[y].get(S);if(ne){const ce=ne.value;if(E(Z,ce)){if(H(Z,ne),!Z[L])return}else G&&(Z[v]&&(ne.value.now=Date.now()),Z[T].unshiftNode(ne));return ce.value}},E=(Z,S)=>{if(!S||!S.maxAge&&!Z[w])return!1;const G=Date.now()-S.now;return S.maxAge?G>S.maxAge:Z[w]&&G>Z[w]},I=Z=>{if(Z[F]>Z[V])for(let S=Z[T].tail;Z[F]>Z[V]&&null!==S;){const G=S.prev;H(Z,S),S=G}},H=(Z,S)=>{if(S){const G=S.value;Z[C]&&Z[C](G.key,G.value),Z[F]-=G.length,Z[y].delete(G.key),Z[T].removeNode(S)}};class M{constructor(S,G,ne,ce,se){this.key=S,this.value=G,this.length=ne,this.now=ce,this.maxAge=se||0}}const P=(Z,S,G,ne)=>{let ce=G.value;E(Z,ce)&&(H(Z,G),Z[L]||(ce=void 0)),ce&&S.call(ne,ce.value,ce.key,Z)};we.exports=class{constructor(S){if("number"==typeof S&&(S={max:S}),S||(S={}),S.max&&("number"!=typeof S.max||S.max<0))throw new TypeError("max must be a non-negative number");this[V]=S.max||1/0;const ne=S.length||b;if(this[Y]="function"!=typeof ne?b:ne,this[L]=S.stale||!1,S.maxAge&&"number"!=typeof S.maxAge)throw new TypeError("maxAge must be a number");this[w]=S.maxAge||0,this[C]=S.dispose,this[R]=S.noDisposeOnSet||!1,this[v]=S.updateAgeOnGet||!1,this.reset()}set max(S){if("number"!=typeof S||S<0)throw new TypeError("max must be a non-negative number");this[V]=S||1/0,I(this)}get max(){return this[V]}set allowStale(S){this[L]=!!S}get allowStale(){return this[L]}set maxAge(S){if("number"!=typeof S)throw new TypeError("maxAge must be a non-negative number");this[w]=S,I(this)}get maxAge(){return this[w]}set lengthCalculator(S){"function"!=typeof S&&(S=b),S!==this[Y]&&(this[Y]=S,this[F]=0,this[T].forEach(G=>{G.length=this[Y](G.value,G.key),this[F]+=G.length})),I(this)}get lengthCalculator(){return this[Y]}get length(){return this[F]}get itemCount(){return this[T].length}rforEach(S,G){G=G||this;for(let ne=this[T].tail;null!==ne;){const ce=ne.prev;P(this,S,ne,G),ne=ce}}forEach(S,G){G=G||this;for(let ne=this[T].head;null!==ne;){const ce=ne.next;P(this,S,ne,G),ne=ce}}keys(){return this[T].toArray().map(S=>S.key)}values(){return this[T].toArray().map(S=>S.value)}reset(){this[C]&&this[T]&&this[T].length&&this[T].forEach(S=>this[C](S.key,S.value)),this[y]=new Map,this[T]=new K,this[F]=0}dump(){return this[T].map(S=>!E(this,S)&&{k:S.key,v:S.value,e:S.now+(S.maxAge||0)}).toArray().filter(S=>S)}dumpLru(){return this[T]}set(S,G,ne){if((ne=ne||this[w])&&"number"!=typeof ne)throw new TypeError("maxAge must be a number");const ce=ne?Date.now():0,se=this[Y](G,S);if(this[y].has(S)){if(se>this[V])return H(this,this[y].get(S)),!1;const ye=this[y].get(S).value;return this[C]&&(this[R]||this[C](S,ye.value)),ye.now=ce,ye.maxAge=ne,ye.value=G,this[F]+=se-ye.length,ye.length=se,this.get(S),I(this),!0}const te=new M(S,G,se,ce,ne);return te.length>this[V]?(this[C]&&this[C](S,G),!1):(this[F]+=te.length,this[T].unshift(te),this[y].set(S,this[T].head),I(this),!0)}has(S){if(!this[y].has(S))return!1;const G=this[y].get(S).value;return!E(this,G)}get(S){return A(this,S,!0)}peek(S){return A(this,S,!1)}pop(){const S=this[T].tail;return S?(H(this,S),S.value):null}del(S){H(this,this[y].get(S))}load(S){this.reset();const G=Date.now();for(let ne=S.length-1;ne>=0;ne--){const ce=S[ne],se=ce.e||0;if(0===se)this.set(ce.k,ce.v);else{const te=se-G;te>0&&this.set(ce.k,ce.v,te)}}}prune(){this[y].forEach((S,G)=>A(this,G,!1))}}},{yallist:92}],34:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;const K="http://www.w3.org/1999/02/22-rdf-syntax-ns#",V="http://www.w3.org/2001/XMLSchema#",F="http://www.w3.org/2000/10/swap/";fe.default={xsd:{decimal:`${V}decimal`,boolean:`${V}boolean`,double:`${V}double`,integer:`${V}integer`,string:`${V}string`},rdf:{type:`${K}type`,nil:`${K}nil`,first:`${K}first`,rest:`${K}rest`,langString:`${K}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${F}reify#forSome`,forAll:`${F}reify#forAll`},log:{implies:`${F}log#implies`}}},{}],35:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=fe.Variable=fe.Triple=fe.Term=fe.Quad=fe.NamedNode=fe.Literal=fe.DefaultGraph=fe.BlankNode=void 0,fe.escapeQuotes=S,fe.termFromId=function M(re,ve){if(ve=ve||y,!re)return ve.defaultGraph();switch(re[0]){case"?":return ve.variable(re.substr(1));case"_":return ve.blankNode(re.substr(2));case'"':if(ve===y)return new A(re);if('"'===re[re.length-1])return ve.literal(re.substr(1,re.length-2));const Fe=re.lastIndexOf('"',re.length-1);return ve.literal(re.substr(1,Fe-1),"@"===re[Fe+1]?re.substr(Fe+2):ve.namedNode(re.substr(Fe+3)));case"<":const Qe=T.exec(re);return ve.quad(M(G(Qe[1]),ve),M(G(Qe[2]),ve),M(G(Qe[3]),ve),Qe[4]&&M(G(Qe[4]),ve));default:return ve.namedNode(re)}},fe.termToId=function P(re){if("string"==typeof re)return re;if(re instanceof b&&"Quad"!==re.termType)return re.id;if(!re)return w.id;switch(re.termType){case"NamedNode":return re.value;case"BlankNode":return`_:${re.value}`;case"Variable":return`?${re.value}`;case"DefaultGraph":return"";case"Literal":return`"${re.value}"${re.language?`@${re.language}`:re.datatype&&re.datatype.value!==L.string?`^^${re.datatype.value}`:""}`;case"Quad":return`<<${S(P(re.subject))} ${S(P(re.predicate))} ${S(P(re.object))}${(0,V.isDefaultGraph)(re.graph)?"":` ${P(re.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${re.termType}`)}},fe.unescapeQuotes=G;var re,K=(re=Q("./IRIs"))&&re.__esModule?re:{default:re},V=Q("./N3Util");const{rdf:Y,xsd:L}=K.default;let w,C=0;const R=/^"(.*".*)(?="[^"]*$)/,T=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,y={namedNode:function(re){return new x(re)},blankNode:function(re){return new E(re||"n3-"+C++)},variable:function(re){return new I(re)},literal:function(re,ve){if("string"==typeof ve)return new A(`"${re}"@${ve.toLowerCase()}`);let Fe=ve?ve.value:"";return""===Fe&&("boolean"==typeof re?Fe=L.boolean:"number"==typeof re&&(Number.isFinite(re)?Fe=Number.isInteger(re)?L.integer:L.double:(Fe=L.double,Number.isNaN(re)||(re=re>0?"INF":"-INF")))),new A(""===Fe||Fe===L.string?`"${re}"`:`"${re}"^^${Fe}`)},defaultGraph:function(){return w},quad:ye,triple:ye};fe.default=y;class b{constructor(ve){this.id=ve}get value(){return this.id}equals(ve){return ve instanceof b?this.id===ve.id:!!ve&&this.termType===ve.termType&&this.value===ve.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}fe.Term=b;class x extends b{get termType(){return"NamedNode"}}fe.NamedNode=x;class A extends b{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const ve=this.id;let Fe=ve.lastIndexOf('"')+1;return Fe<ve.length&&"@"===ve[Fe++]?ve.substr(Fe).toLowerCase():""}get datatype(){return new x(this.datatypeString)}get datatypeString(){const ve=this.id,Fe=ve.lastIndexOf('"')+1,Qe=Fe<ve.length?ve[Fe]:"";return"^"===Qe?ve.substr(Fe+2):"@"!==Qe?L.string:Y.langString}equals(ve){return ve instanceof A?this.id===ve.id:!!ve&&!!ve.datatype&&this.termType===ve.termType&&this.value===ve.value&&this.language===ve.language&&this.datatype.value===ve.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}fe.Literal=A;class E extends b{constructor(ve){super(`_:${ve}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}fe.BlankNode=E;class I extends b{constructor(ve){super(`?${ve}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}fe.Variable=I;class H extends b{constructor(){return super(""),w||this}get termType(){return"DefaultGraph"}equals(ve){return this===ve||!!ve&&this.termType===ve.termType}}fe.DefaultGraph=H,w=new H;class Z extends b{constructor(ve,Fe,Qe,He){super(""),this._subject=ve,this._predicate=Fe,this._object=Qe,this._graph=He||w}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(ve){return!!ve&&this._subject.equals(ve.subject)&&this._predicate.equals(ve.predicate)&&this._object.equals(ve.object)&&this._graph.equals(ve.graph)}}function S(re){return re.replace(R,(ve,Fe)=>`"${Fe.replace(/"/g,'""')}`)}function G(re){return re.replace(R,(ve,Fe)=>`"${Fe.replace(/""/g,'"')}`)}function ye(re,ve,Fe,Qe){return new Z(re,ve,Fe,Qe)}fe.Triple=fe.Quad=Z},{"./IRIs":34,"./N3Util":41}],36:[function(Q,we,fe){(function(K){(function(){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var V=Y(Q("./IRIs")),F=Y(Q("queue-microtask"));function Y(b){return b&&b.__esModule?b:{default:b}}const{xsd:L}=V.default,w=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,C={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},R=/[\x00-\x20<>\\"\{\}\|\^\`]/,T={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},y=/$0^/;fe.default=class{constructor(x){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(x=x||{}).lineMode){this._n3Mode=!1;for(const A in this)!(A in T)&&this[A]instanceof RegExp&&(this[A]=y)}else this._n3Mode=!1!==x.n3;this._comments=!!x.comments,this._literalClosingPos=0}_tokenizeToEnd(x,A){let E=this._input,I=E.length;for(;;){let P,Z;for(;P=this._newline.exec(E);)this._comments&&(Z=this._comment.exec(P[0]))&&H("comment",Z[1],"",this._line,P[0].length),E=E.substr(P[0].length,E.length),I=E.length,this._line++;if(!P&&(P=this._whitespace.exec(E))&&(E=E.substr(P[0].length,E.length)),this._endOfFile.test(E))return A&&(this._comments&&(Z=this._comment.exec(E))&&H("comment",Z[1],"",this._line,E.length),E=null,H("eof","","",this._line,0)),this._input=E;const S=this._line,G=E[0];let ne="",ce="",se="",te=null,Ie=0,ye=!1;switch(G){case"^":if(E.length<3)break;if("^"!==E[1]){this._n3Mode&&(Ie=1,ne="^");break}if(this._previousMarker="^^",E=E.substr(2),"<"!==E[0]){ye=!0;break}case"<":if(te=this._unescapedIri.exec(E))ne="IRI",ce=te[1];else if(te=this._iri.exec(E)){if(ce=this._unescape(te[1]),null===ce||R.test(ce))return M(this);ne="IRI"}else E.length>1&&"<"===E[1]?(ne="<<",Ie=2):this._n3Mode&&E.length>1&&"="===E[1]&&(ne="inverse",Ie=2,ce=">");break;case">":E.length>1&&">"===E[1]&&(ne=">>",Ie=2);break;case"_":((te=this._blank.exec(E))||A&&(te=this._blank.exec(`${E} `)))&&(ne="blank",se="_",ce=te[1]);break;case'"':if(te=this._simpleQuotedString.exec(E))ce=te[1];else if(({value:ce,matchLength:Ie}=this._parseLiteral(E)),null===ce)return M(this);(null!==te||0!==Ie)&&(ne="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(te=this._simpleApostropheString.exec(E))ce=te[1];else if(({value:ce,matchLength:Ie}=this._parseLiteral(E)),null===ce)return M(this);(null!==te||0!==Ie)&&(ne="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(te=this._variable.exec(E))&&(ne="var",ce=te[0]);break;case"@":"literal"===this._previousMarker&&(te=this._langcode.exec(E))?(ne="langcode",ce=te[1]):(te=this._keyword.exec(E))&&(ne=te[0]);break;case".":if(1===E.length?A:E[1]<"0"||E[1]>"9"){ne=".",Ie=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(te=this._number.exec(E)||A&&(te=this._number.exec(`${E} `)))&&(ne="literal",ce=te[0],se="string"==typeof te[1]?L.double:"string"==typeof te[2]?L.decimal:L.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(te=this._sparqlKeyword.exec(E))?ne=te[0].toUpperCase():ye=!0;break;case"f":case"t":(te=this._boolean.exec(E))?(ne="literal",ce=te[0],se=L.boolean):ye=!0;break;case"a":(te=this._shortPredicates.exec(E))?(ne="abbreviation",ce="a"):ye=!0;break;case"=":this._n3Mode&&E.length>1&&(ne="abbreviation",">"!==E[1]?(Ie=1,ce="="):(Ie=2,ce=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(Ie=1,ne=G);break;default:ye=!0}if(ye&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(te=this._prefix.exec(E))?((te=this._prefixed.exec(E))||A&&(te=this._prefixed.exec(`${E} `)))&&(ne="prefixed",se=te[1]||"",ce=this._unescape(te[2])):(ne="prefix",ce=te[1]||"")),"^^"===this._previousMarker)switch(ne){case"prefixed":ne="type";break;case"IRI":ne="typeIRI";break;default:ne=""}if(!ne)return A||!/^'''|^"""/.test(E)&&/\n|\r/.test(E)?M(this):this._input=E;const re=Ie||te[0].length,ve=H(ne,ce,se,S,re);this.previousToken=ve,this._previousMarker=ne,E=E.substr(re,E.length)}function H(P,Z,S,G,ne){const ce=E?I-E.length:I,te={type:P,value:Z,prefix:S,line:G,start:ce,end:ce+ne};return x(null,te),te}function M(P){x(P._syntaxError(/^\S*/.exec(E)[0]))}}_unescape(x){let A=!1;const E=x.replace(w,(I,H,M,P)=>{if("string"==typeof H)return String.fromCharCode(Number.parseInt(H,16));if("string"==typeof M){let Z=Number.parseInt(M,16);return Z<=65535?String.fromCharCode(Number.parseInt(M,16)):String.fromCharCode(55296+((Z-=65536)>>10),56320+(1023&Z))}return P in C?C[P]:(A=!0,"")});return A?null:E}_parseLiteral(x){if(x.length>=3){const A=x.match(/^(?:"""|"|'''|'|)/)[0],E=A.length;let I=Math.max(this._literalClosingPos,E);for(;(I=x.indexOf(A,I))>0;){let H=0;for(;"\\"===x[I-H-1];)H++;if(H%2==0){const M=x.substring(E,I),P=M.split(/\r\n|\r|\n/).length-1,Z=I+E;if(1===E&&0!==P||3===E&&this._lineMode)break;return this._line+=P,{value:this._unescape(M),matchLength:Z}}I++}this._literalClosingPos=x.length-E+1}return{value:"",matchLength:0}}_syntaxError(x){this._input=null;const A=new Error(`Unexpected "${x}" on line ${this._line}.`);return A.context={token:void 0,line:this._line,previousToken:this.previousToken},A}_readStartingBom(x){return x.startsWith("\ufeff")?x.substr(1):x}tokenize(x,A){if(this._line=1,"string"==typeof x){if(this._input=this._readStartingBom(x),"function"!=typeof A){const E=[];let I;if(this._tokenizeToEnd((H,M)=>H?I=H:E.push(M),!0),I)throw I;return E}(0,F.default)(()=>this._tokenizeToEnd(A,!0))}else this._pendingBuffer=null,"function"==typeof x.setEncoding&&x.setEncoding("utf8"),x.on("data",E=>{null!==this._input&&0!==E.length&&(this._pendingBuffer&&(E=K.concat([this._pendingBuffer,E]),this._pendingBuffer=null),128&E[E.length-1]?this._pendingBuffer=E:(void 0===this._input?this._input=this._readStartingBom("string"==typeof E?E:E.toString()):this._input+=E,this._tokenizeToEnd(A,!1)))}),x.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(A,!0)}),x.on("error",A)}}}).call(this)}).call(this,Q("buffer").Buffer)},{"./IRIs":34,buffer:6,"queue-microtask":45}],37:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var K=Y(Q("./N3Lexer")),V=Y(Q("./N3DataFactory")),F=Y(Q("./IRIs"));function Y(T){return T&&T.__esModule?T:{default:T}}let L=0;class w{constructor(y){this._contextStack=[],this._graph=null,this._setBase((y=y||{}).baseIRI),y.factory&&R(this,y.factory);const v="string"==typeof y.format?y.format.match(/\w*$/)[0].toLowerCase():"",b=/turtle/.test(v),x=/trig/.test(v),A=/triple/.test(v),E=/quad/.test(v),I=this._n3Mode=/n3/.test(v),H=A||E;(this._supportsNamedGraphs=!(b||I))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(b||x||A||I),this._supportsRDFStar=""===v||/star|\*$/.test(v),H&&(this._resolveRelativeIRI=M=>null),this._blankNodePrefix="string"!=typeof y.blankNodePrefix?"":y.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=y.lexer||new K.default({lineMode:H,n3:I}),this._explicitQuantifiers=!!y.explicitQuantifiers}static _resetBlankNodePrefix(){L=0}_setBase(y){if(y){const v=y.indexOf("#");v>=0&&(y=y.substr(0,v)),this._base=y,this._basePath=y.indexOf("/")<0?y:y.replace(/[^\/?]*(?:\?.*)?$/,""),y=y.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=y[0],this._baseScheme=y[1]}else this._base="",this._basePath=""}_saveContext(y,v,b,x,A){const E=this._n3Mode;this._contextStack.push({subject:b,predicate:x,object:A,graph:v,type:y,inverse:!!E&&this._inversePredicate,blankPrefix:E?this._prefixes._:"",quantified:E?this._quantified:null}),E&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const y=this._contextStack.pop(),v=this._n3Mode;this._subject=y.subject,this._predicate=y.predicate,this._object=y.object,this._graph=y.graph,v&&(this._inversePredicate=y.inverse,this._prefixes._=y.blankPrefix,this._quantified=y.quantified)}_readInTopContext(y){switch(y.type){case"eof":return null!==this._graph?this._error("Unclosed graph",y):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(y)}}_readEntity(y,v){let b;switch(y.type){case"IRI":case"typeIRI":const x=this._resolveIRI(y.value);if(null===x)return this._error("Invalid IRI",y);b=this._namedNode(x);break;case"type":case"prefixed":const A=this._prefixes[y.prefix];if(void 0===A)return this._error(`Undefined prefix "${y.prefix}:"`,y);b=this._namedNode(A+y.value);break;case"blank":b=this._blankNode(this._prefixes[y.prefix]+y.value);break;case"var":b=this._variable(y.value.substr(1));break;default:return this._error(`Expected entity but got ${y.type}`,y)}return!v&&this._n3Mode&&b.id in this._quantified&&(b=this._quantified[b.id]),b}_readSubject(y){switch(this._predicate=null,y.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",y);case"}":return this._readPunctuation(y);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',y);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',y);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",y);if(0===y.prefix.length)return this._literalValue=y.value,this._completeSubjectLiteral;this._subject=this._literal(y.value,this._namedNode(y.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",y);default:if(void 0===(this._subject=this._readEntity(y)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(y){const v=y.type;switch(v){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[y.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${v}`,y):(this._subject=null,"]"===v?this._readBlankNodeTail(y):this._readPunctuation(y));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",y);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",y);default:if(void 0===(this._predicate=this._readEntity(y)))return}return this._readObject}_readObject(y){switch(y.type){case"literal":if(0===y.prefix.length)return this._literalValue=y.value,this._readDataTypeOrLang;this._object=this._literal(y.value,this._namedNode(y.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",y);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",y);default:if(void 0===(this._object=this._readEntity(y)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(y){return"{"===y.type?this._readGraph(y):this._readPredicate(y)}_readGraph(y){return"{"!==y.type?this._error(`Expected graph but got ${y.type}`,y):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(y){return"]"===y.type?(this._subject=null,this._readBlankNodeTail(y)):(this._predicate=null,this._readPredicate(y))}_readBlankNodeTail(y){if("]"!==y.type)return this._readBlankNodePunctuation(y);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const v=null===this._predicate;return this._restoreContext(),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:v?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(y){switch(y.type){case".":case"}":return this._subject=null,this._readPunctuation(y);default:return this._readPredicate(y)}}_readListItem(y){let v=null,b=null,x=this._readListItem;const A=this._subject,E=this._contextStack,I=E[E.length-1];switch(y.type){case"[":this._saveContext("blank",this._graph,b=this._blankNode(),this.RDF_FIRST,this._subject=v=this._blankNode()),x=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,b=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==E.length&&"list"===E[E.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(x=this._readPredicate,this._subject===this.RDF_NIL)return x}else if(x=this._getContextEndReader(),this._object===this.RDF_NIL)return x;b=this.RDF_NIL;break;case"literal":0===y.prefix.length?(this._literalValue=y.value,x=this._readListItemDataTypeOrLang):(v=this._literal(y.value,this._namedNode(y.prefix)),x=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",y);default:if(void 0===(v=this._readEntity(y)))return}if(null===b&&(this._subject=b=this._blankNode()),null===A?null===I.predicate?I.subject=b:I.object=b:this._emit(A,this.RDF_REST,b,this._graph),null!==v){if(this._n3Mode&&("IRI"===y.type||"prefixed"===y.type))return this._saveContext("item",this._graph,b,this.RDF_FIRST,v),this._subject=v,this._predicate=null,this._getPathReader(this._readListItem);this._emit(b,this.RDF_FIRST,v,this._graph)}return x}_readDataTypeOrLang(y){return this._completeObjectLiteral(y,!1)}_readListItemDataTypeOrLang(y){return this._completeObjectLiteral(y,!0)}_completeLiteral(y){let v=this._literal(this._literalValue);switch(y.type){case"type":case"typeIRI":const b=this._readEntity(y);if(void 0===b)return;v=this._literal(this._literalValue,b),y=null;break;case"langcode":v=this._literal(this._literalValue,y.value),y=null}return{token:y,literal:v}}_completeSubjectLiteral(y){return this._subject=this._completeLiteral(y).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(y,v){const b=this._completeLiteral(y);if(b)return this._object=b.literal,v&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===b.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(b.token))}_readFormulaTail(y){return"}"!==y.type?this._readPunctuation(y):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(y){let v,b=this._graph;const x=this._subject,A=this._inversePredicate;switch(y.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",y);if(this._n3Mode)return this._readFormulaTail(y);this._graph=null;case".":this._subject=null,v=this._contextStack.length?this._readSubject:this._readInTopContext,A&&(this._inversePredicate=!1);break;case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(b=this._readEntity(y))){v=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,y)}if(null!==x){const E=this._predicate,I=this._object;A?this._emit(I,E,x,b):this._emit(x,E,I,b)}return v}_readBlankNodePunctuation(y){let v;switch(y.type){case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,y)}return this._emit(this._subject,this._predicate,this._object,this._graph),v}_readQuadPunctuation(y){return"."!==y.type?this._error("Expected dot to follow quad",y):this._readInTopContext}_readPrefix(y){return"prefix"!==y.type?this._error("Expected prefix to follow @prefix",y):(this._prefix=y.value,this._readPrefixIRI)}_readPrefixIRI(y){if("IRI"!==y.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,y);const v=this._readEntity(y);return this._prefixes[this._prefix]=v.value,this._prefixCallback(this._prefix,v),this._readDeclarationPunctuation}_readBaseIRI(y){const v="IRI"===y.type&&this._resolveIRI(y.value);return v?(this._setBase(v),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",y)}_readNamedGraphLabel(y){switch(y.type){case"IRI":case"blank":case"prefixed":return this._readSubject(y),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",y)}}_readNamedGraphBlankLabel(y){return"]"!==y.type?this._error("Invalid graph label",y):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(y){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(y)):"."!==y.type?this._error("Expected declaration to end with a dot",y):this._readInTopContext}_readQuantifierList(y){let v;switch(y.type){case"IRI":case"prefixed":if(void 0!==(v=this._readEntity(y,!0)))break;default:return this._error(`Unexpected ${y.type}`,y)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,v,this.QUANTIFIERS_GRAPH)):this._quantified[v.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(y){return","===y.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(y))}_getPathReader(y){return this._afterPath=y,this._readPath}_readPath(y){switch(y.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const v=this._contextStack,b=v.length&&v[v.length-1];if(b&&"item"===b.type){const x=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,x,this._graph)}return this._afterPath(y)}}_readForwardPath(y){let v,b;const x=this._blankNode();if(void 0!==(b=this._readEntity(y)))return null===this._predicate?(v=this._subject,this._subject=x):(v=this._object,this._object=x),this._emit(v,b,x,this._graph),this._readPath}_readBackwardPath(y){const v=this._blankNode();let b,x;if(void 0!==(b=this._readEntity(y)))return null===this._predicate?(x=this._subject,this._subject=v):(x=this._object,this._object=v),this._emit(v,b,x,this._graph),this._readPath}_readRDFStarTailOrGraph(y){return">>"!==y.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(y))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,y):this._readRDFStarTail(y)}_readRDFStarTail(y){if(">>"!==y.type)return this._error(`Expected >> but got ${y.type}`,y);const v=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=v,this._readPredicate):(this._object=v,this._getContextEndReader())}_getContextEndReader(){const y=this._contextStack;if(!y.length)return this._readPunctuation;switch(y[y.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(y,v,b,x){this._callback(null,this._quad(y,v,b,x||this.DEFAULTGRAPH))}_error(y,v){const b=new Error(`${y} on line ${v.line}.`);b.context={token:v,line:v.line,previousToken:this._lexer.previousToken},this._callback(b),this._callback=C}_resolveIRI(y){return/^[a-z][a-z0-9+.-]*:/i.test(y)?y:this._resolveRelativeIRI(y)}_resolveRelativeIRI(y){if(!y.length)return this._base;switch(y[0]){case"#":return this._base+y;case"?":return this._base.replace(/(?:\?.*)?$/,y);case"/":return("/"===y[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(y);default:return/^[^/:]*:/.test(y)?null:this._removeDotSegments(this._basePath+y)}}_removeDotSegments(y){if(!/(^|\/)\.\.?($|[/#?])/.test(y))return y;const v=y.length;let b="",x=-1,A=-1,E=0,I="/";for(;x<v;){switch(I){case":":if(A<0&&"/"===y[++x]&&"/"===y[++x])for(;(A=x+1)<v&&"/"!==y[A];)x=A;break;case"?":case"#":x=v;break;case"/":if("."===y[x+1])switch(I=y[1+ ++x],I){case"/":b+=y.substring(E,x-1),E=x+1;break;case void 0:case"?":case"#":return b+y.substring(E,x)+y.substr(x+1);case".":if(I=y[1+ ++x],void 0===I||"/"===I||"?"===I||"#"===I){if(b+=y.substring(E,x-2),(E=b.lastIndexOf("/"))>=A&&(b=b.substr(0,E)),"/"!==I)return`${b}/${y.substr(x+1)}`;E=x+1}}}I=y[++x]}return b+y.substring(E)}parse(y,v,b){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${L++}_`,this._prefixCallback=b||C,this._inversePredicate=!1,this._quantified=Object.create(null),!v){const x=[];let A;if(this._callback=(E,I)=>{E?A=E:I&&x.push(I)},this._lexer.tokenize(y).every(E=>this._readCallback=this._readCallback(E)),A)throw A;return x}this._callback=v,this._lexer.tokenize(y,(x,A)=>{null!==x?(this._callback(x),this._callback=C):this._readCallback&&(this._readCallback=this._readCallback(A))})}}function C(){}function R(T,y){const v=y.namedNode;T._namedNode=v,T._blankNode=y.blankNode,T._literal=y.literal,T._variable=y.variable,T._quad=y.quad,T.DEFAULTGRAPH=y.defaultGraph(),T.RDF_FIRST=v(F.default.rdf.first),T.RDF_REST=v(F.default.rdf.rest),T.RDF_NIL=v(F.default.rdf.nil),T.N3_FORALL=v(F.default.r.forAll),T.N3_FORSOME=v(F.default.r.forSome),T.ABBREVIATIONS={a:v(F.default.rdf.type),"=":v(F.default.owl.sameAs),">":v(F.default.log.implies)},T.QUANTIFIERS_GRAPH=v("urn:n3:quantifiers")}fe.default=w,R(w.prototype,V.default)},{"./IRIs":34,"./N3DataFactory":35,"./N3Lexer":36}],38:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var y,K=function(y,v){if(!v&&y&&y.__esModule)return y;if(null===y||"object"!=typeof y&&"function"!=typeof y)return{default:y};var b=L(v);if(b&&b.has(y))return b.get(y);var x={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in y)if("default"!==E&&Object.prototype.hasOwnProperty.call(y,E)){var I=A?Object.getOwnPropertyDescriptor(y,E):null;I&&(I.get||I.set)?Object.defineProperty(x,E,I):x[E]=y[E]}return x.default=y,b&&b.set(y,x),x}(Q("./N3DataFactory")),V=Q("readable-stream"),F=(y=Q("./IRIs"))&&y.__esModule?y:{default:y};function L(y){if("function"!=typeof WeakMap)return null;var v=new WeakMap,b=new WeakMap;return(L=function(x){return x?b:v})(y)}class C{constructor(v,b){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!b&&v&&!v[0]&&(b=v,v=null),this._factory=(b=b||{}).factory||K.default,v&&this.addQuads(v)}get size(){let v=this._size;if(null!==v)return v;v=0;const b=this._graphs;let x,A;for(const E in b)for(const I in x=b[E].subjects)for(const H in A=x[I])v+=Object.keys(A[H]).length;return this._size=v}_addToIndex(v,b,x,A){const E=v[b]||(v[b]={}),I=E[x]||(E[x]={}),H=A in I;return H||(I[A]=null),!H}_removeFromIndex(v,b,x,A){const E=v[b],I=E[x];delete I[A];for(const H in I)return;delete E[x];for(const H in E)return;delete v[b]}*_findInIndex(v,b,x,A,E,I,H,M){let P,Z,S;const ne=!b+!x+!A>1?Object.keys(this._ids):this._entities,ce=(0,K.termFromId)(M,this._factory);b&&((P=v,v={})[b]=P[b]);for(const se in v){const te=ne[se];if(Z=v[se]){x&&((P=Z,Z={})[x]=P[x]);for(const Ie in Z){const ye=ne[Ie];if(S=Z[Ie]){const re=A?A in S?[A]:[]:Object.keys(S);for(let ve=0;ve<re.length;ve++){const Fe={subject:null,predicate:null,object:null};Fe[E]=(0,K.termFromId)(te,this._factory),Fe[I]=(0,K.termFromId)(ye,this._factory),Fe[H]=(0,K.termFromId)(ne[re[ve]],this._factory),yield this._factory.quad(Fe.subject,Fe.predicate,Fe.object,ce)}}}}}}_loop(v,b){for(const x in v)b(x)}_loopByKey0(v,b,x){let A,E;if(A=v[b])for(E in A)x(E)}_loopByKey1(v,b,x){let A,E;for(A in v)E=v[A],E[b]&&x(A)}_loopBy2Keys(v,b,x,A){let E,I,H;if((E=v[b])&&(I=E[x]))for(H in I)A(H)}_countInIndex(v,b,x,A){let I,H,M,E=0;b&&((I=v,v={})[b]=I[b]);for(const P in v)if(H=v[P]){x&&((I=H,H={})[x]=I[x]);for(const Z in H)(M=H[Z])&&(A?A in M&&E++:E+=Object.keys(M).length)}return E}_getGraphs(v){if(!R(v))return this._graphs;const b={};return b[v]=this._graphs[v],b}_uniqueEntities(v){const b=Object.create(null);return x=>{x in b||(b[x]=!0,v((0,K.termFromId)(this._entities[x],this._factory)))}}add(v){return this.addQuad(v),this}addQuad(v,b,x,A){b||(A=v.graph,x=v.object,b=v.predicate,v=v.subject),v=(0,K.termToId)(v),b=(0,K.termToId)(b),x=(0,K.termToId)(x),A=(0,K.termToId)(A);let E=this._graphs[A];E||(E=this._graphs[A]={subjects:{},predicates:{},objects:{}},Object.freeze(E));const I=this._ids,H=this._entities;v=I[v]||(I[H[++this._id]=v]=this._id),b=I[b]||(I[H[++this._id]=b]=this._id),x=I[x]||(I[H[++this._id]=x]=this._id);const M=this._addToIndex(E.subjects,v,b,x);return this._addToIndex(E.predicates,b,x,v),this._addToIndex(E.objects,x,v,b),this._size=null,M}addQuads(v){for(let b=0;b<v.length;b++)this.addQuad(v[b])}delete(v){return this.removeQuad(v),this}has(v,b,x,A){return v&&v.subject&&({subject:v,predicate:b,object:x,graph:A}=v),!this.readQuads(v,b,x,A).next().done}import(v){return v.on("data",b=>{this.addQuad(b)}),v}removeQuad(v,b,x,A){b||(A=v.graph,x=v.object,b=v.predicate,v=v.subject),v=(0,K.termToId)(v),b=(0,K.termToId)(b),x=(0,K.termToId)(x),A=(0,K.termToId)(A);const E=this._ids,I=this._graphs;let H,M,P;if(!((v=E[v])&&(b=E[b])&&(x=E[x])&&(H=I[A])&&(M=H.subjects[v])&&(P=M[b])&&x in P))return!1;for(v in this._removeFromIndex(H.subjects,v,b,x),this._removeFromIndex(H.predicates,b,x,v),this._removeFromIndex(H.objects,x,v,b),null!==this._size&&this._size--,H.subjects)return!0;return delete I[A],!0}removeQuads(v){for(let b=0;b<v.length;b++)this.removeQuad(v[b])}remove(v){return v.on("data",b=>{this.removeQuad(b)}),v}removeMatches(v,b,x,A){const E=new V.Readable({objectMode:!0});return E._read=()=>{for(const I of this.readQuads(v,b,x,A))E.push(I);E.push(null)},this.remove(E)}deleteGraph(v){return this.removeMatches(null,null,null,v)}getQuads(v,b,x,A){return[...this.readQuads(v,b,x,A)]}*readQuads(v,b,x,A){v=v&&(0,K.termToId)(v),b=b&&(0,K.termToId)(b),x=x&&(0,K.termToId)(x),A=A&&(0,K.termToId)(A);const E=this._getGraphs(A),I=this._ids;let H,M,P,Z;if(!(R(v)&&!(M=I[v])||R(b)&&!(P=I[b])||R(x)&&!(Z=I[x])))for(const S in E)(H=E[S])&&(M?Z?yield*this._findInIndex(H.objects,Z,M,P,"object","subject","predicate",S,null,!0):yield*this._findInIndex(H.subjects,M,P,null,"subject","predicate","object",S,null,!0):P?yield*this._findInIndex(H.predicates,P,Z,null,"predicate","object","subject",S,null,!0):Z?yield*this._findInIndex(H.objects,Z,null,null,"object","subject","predicate",S,null,!0):yield*this._findInIndex(H.subjects,null,null,null,"subject","predicate","object",S,null,!0))}match(v,b,x,A){return new T(this,v,b,x,A)}countQuads(v,b,x,A){v=v&&(0,K.termToId)(v),b=b&&(0,K.termToId)(b),x=x&&(0,K.termToId)(x),A=A&&(0,K.termToId)(A);const E=this._getGraphs(A),I=this._ids;let M,P,Z,S,H=0;if(R(v)&&!(P=I[v])||R(b)&&!(Z=I[b])||R(x)&&!(S=I[x]))return 0;for(const G in E)(M=E[G])&&(H+=v?x?this._countInIndex(M.objects,S,P,Z):this._countInIndex(M.subjects,P,Z,S):b?this._countInIndex(M.predicates,Z,S,P):this._countInIndex(M.objects,S,P,Z));return H}forEach(v,b,x,A,E){this.some(I=>(v(I),!1),b,x,A,E)}every(v,b,x,A,E){let I=!1;const H=!this.some(M=>(I=!0,!v(M)),b,x,A,E);return I&&H}some(v,b,x,A,E){for(const I of this.readQuads(b,x,A,E))if(v(I))return!0;return!1}getSubjects(v,b,x){const A=[];return this.forSubjects(E=>{A.push(E)},v,b,x),A}forSubjects(v,b,x,A){b=b&&(0,K.termToId)(b),x=x&&(0,K.termToId)(x),A=A&&(0,K.termToId)(A);const E=this._ids,I=this._getGraphs(A);let H,M,P;if(v=this._uniqueEntities(v),!(R(b)&&!(M=E[b])||R(x)&&!(P=E[x])))for(A in I)(H=I[A])&&(M?P?this._loopBy2Keys(H.predicates,M,P,v):this._loopByKey1(H.subjects,M,v):P?this._loopByKey0(H.objects,P,v):this._loop(H.subjects,v))}getPredicates(v,b,x){const A=[];return this.forPredicates(E=>{A.push(E)},v,b,x),A}forPredicates(v,b,x,A){b=b&&(0,K.termToId)(b),x=x&&(0,K.termToId)(x),A=A&&(0,K.termToId)(A);const E=this._ids,I=this._getGraphs(A);let H,M,P;if(v=this._uniqueEntities(v),!(R(b)&&!(M=E[b])||R(x)&&!(P=E[x])))for(A in I)(H=I[A])&&(M?P?this._loopBy2Keys(H.objects,P,M,v):this._loopByKey0(H.subjects,M,v):P?this._loopByKey1(H.predicates,P,v):this._loop(H.predicates,v))}getObjects(v,b,x){const A=[];return this.forObjects(E=>{A.push(E)},v,b,x),A}forObjects(v,b,x,A){b=b&&(0,K.termToId)(b),x=x&&(0,K.termToId)(x),A=A&&(0,K.termToId)(A);const E=this._ids,I=this._getGraphs(A);let H,M,P;if(v=this._uniqueEntities(v),!(R(b)&&!(M=E[b])||R(x)&&!(P=E[x])))for(A in I)(H=I[A])&&(M?P?this._loopBy2Keys(H.subjects,M,P,v):this._loopByKey1(H.objects,M,v):P?this._loopByKey0(H.predicates,P,v):this._loop(H.objects,v))}getGraphs(v,b,x){const A=[];return this.forGraphs(E=>{A.push(E)},v,b,x),A}forGraphs(v,b,x,A){for(const E in this._graphs)this.some(I=>(v(I.graph),!0),b,x,A,E)}createBlankNode(v){let b,x;if(v)for(b=v=`_:${v}`,x=1;this._ids[b];)b=v+x++;else do{b="_:b"+this._blankNodeIndex++}while(this._ids[b]);return this._ids[b]=++this._id,this._entities[this._id]=b,this._factory.blankNode(b.substr(2))}extractLists({remove:v=!1,ignoreErrors:b=!1}={}){const x={},A=b?()=>!0:(H,M)=>{throw new Error(`${H.value} ${M}`)},E=this.getQuads(null,F.default.rdf.rest,F.default.rdf.nil,null),I=v?[...E]:[];return E.forEach(H=>{const M=[];let Z,S,P=!1;const G=H.graph;let ne=H.subject;for(;ne&&!P;){const ce=this.getQuads(null,null,ne,null),se=this.getQuads(ne,null,null,null);let te,Ie=null,ye=null,re=null;for(let ve=0;ve<se.length&&!P;ve++)te=se[ve],te.graph.equals(G)?Z?P=A(ne,"has non-list arcs out"):te.predicate.value===F.default.rdf.first?Ie?P=A(ne,"has multiple rdf:first arcs"):I.push(Ie=te):te.predicate.value===F.default.rdf.rest?ye?P=A(ne,"has multiple rdf:rest arcs"):I.push(ye=te):ce.length?P=A(ne,"can't be subject and object"):(Z=te,S="subject"):P=A(ne,"not confined to single graph");for(let ve=0;ve<ce.length&&!P;++ve)te=ce[ve],Z?P=A(ne,"can't have coreferences"):te.predicate.value===F.default.rdf.rest?re?P=A(ne,"has incoming rdf:rest arcs"):re=te:(Z=te,S="object");Ie?M.unshift(Ie.object):P=A(ne,"has no list head"),ne=re&&re.subject}P?v=!1:Z&&(x[Z[S].value]=M)}),v&&this.removeQuads(I),x}*[Symbol.iterator](){yield*this.readQuads()}}function R(y){return"string"==typeof y||y instanceof String}fe.default=C;class T extends V.Readable{constructor(v,b,x,A,E){super({objectMode:!0}),Object.assign(this,{n3Store:v,subject:b,predicate:x,object:A,graph:E})}get filtered(){if(!this._filtered){const{n3Store:v,graph:b,object:x,predicate:A,subject:E}=this,I=v.getQuads(E,A,x,b);this._filtered=new C(I,{factory:v._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const v of this)this.push(v);this.push(null)}add(v){return this.filtered.add(v)}delete(v){return this.filtered.delete(v)}has(v){return this.filtered.has(v)}match(v,b,x,A){return new T(this.filtered,v,b,x,A)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}},{"./IRIs":34,"./N3DataFactory":35,"readable-stream":81}],39:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var L,K=(L=Q("./N3Parser"))&&L.__esModule?L:{default:L},V=Q("readable-stream");fe.default=class extends V.Transform{constructor(w){let R,T;super({decodeStrings:!0}),this._readableState.objectMode=!0,new K.default(w).parse({on:(y,v)=>{switch(y){case"data":R=v;break;case"end":T=v}}},(y,v)=>{y&&this.emit("error",y)||v&&this.push(v)},(y,v)=>{this.emit("prefix",y,v)}),this._transform=(y,v,b)=>{R(y),b()},this._flush=y=>{T(),y()}}import(w){return w.on("data",C=>{this.write(C)}),w.on("end",()=>{this.end()}),w.on("error",C=>{this.emit("error",C)}),this}}},{"./N3Parser":37,"readable-stream":81}],40:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var L,K=Q("readable-stream"),V=(L=Q("./N3Writer"))&&L.__esModule?L:{default:L};fe.default=class extends K.Transform{constructor(w){super({encoding:"utf8",writableObjectMode:!0});const C=this._writer=new V.default({write:(R,T,y)=>{this.push(R),y&&y()},end:R=>{this.push(null),R&&R()}},w);this._transform=(R,T,y)=>{C.addQuad(R,y)},this._flush=R=>{C.end(R)}}import(w){return w.on("data",C=>{this.write(C)}),w.on("end",()=>{this.end()}),w.on("error",C=>{this.emit("error",C)}),w.on("prefix",(C,R)=>{this._writer.addPrefix(C,R)}),this}}},{"./N3Writer":42,"readable-stream":81}],41:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.inDefaultGraph=function(v){return C(v.graph)},fe.isBlankNode=function(v){return!!v&&"BlankNode"===v.termType},fe.isDefaultGraph=C,fe.isLiteral=function(v){return!!v&&"Literal"===v.termType},fe.isNamedNode=function(v){return!!v&&"NamedNode"===v.termType},fe.isVariable=function(v){return!!v&&"Variable"===v.termType},fe.prefix=function(v,b){return y({"":v.value||v},b)("")},fe.prefixes=y;var v,K=(v=Q("./N3DataFactory"))&&v.__esModule?v:{default:v};function C(v){return!!v&&"DefaultGraph"===v.termType}function y(v,b){const x=Object.create(null);for(const E in v)A(E,v[E]);function A(E,I){if("string"==typeof I){const H=Object.create(null);x[E]=M=>H[M]||(H[M]=b.namedNode(I+M))}else if(!(E in x))throw new Error(`Unknown prefix: ${E}`);return x[E]}return b=b||K.default,A}},{"./N3DataFactory":35}],42:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var H,K=(H=Q("./IRIs"))&&H.__esModule?H:{default:H},V=function(H,M){if(!M&&H&&H.__esModule)return H;if(null===H||"object"!=typeof H&&"function"!=typeof H)return{default:H};var P=Y(M);if(P&&P.has(H))return P.get(H);var Z={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in H)if("default"!==G&&Object.prototype.hasOwnProperty.call(H,G)){var ne=S?Object.getOwnPropertyDescriptor(H,G):null;ne&&(ne.get||ne.set)?Object.defineProperty(Z,G,ne):Z[G]=H[G]}return Z.default=H,P&&P.set(H,Z),Z}(Q("./N3DataFactory")),F=Q("./N3Util");function Y(H){if("function"!=typeof WeakMap)return null;var M=new WeakMap,P=new WeakMap;return(Y=function(Z){return Z?P:M})(H)}const C=V.default.defaultGraph(),{rdf:R,xsd:T}=K.default,y=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,v=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,b={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class x extends V.Term{equals(){return!1}}function E(H){let M=b[H];return void 0===M&&(1===H.length?(M=H.charCodeAt(0).toString(16),M="\\u0000".substr(0,6-M.length)+M):(M=(1024*(H.charCodeAt(0)-55296)+H.charCodeAt(1)+9216).toString(16),M="\\U00000000".substr(0,10-M.length)+M)),M}function I(H){return H.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}fe.default=class{constructor(M,P){if(this._prefixRegex=/$0^/,M&&"function"!=typeof M.write&&(P=M,M=null),this._lists=(P=P||{}).lists,M)this._outputStream=M,this._endStream=void 0===P.end||!!P.end;else{let Z="";this._outputStream={write(S,G,ne){Z+=S,ne&&ne()},end:S=>{S&&S(null,Z)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(P.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=C,this._prefixIRIs=Object.create(null),P.prefixes&&this.addPrefixes(P.prefixes),P.baseIRI&&(this._baseMatcher=new RegExp(`^${I(P.baseIRI)}${P.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=P.baseIRI.length))}get _inDefaultGraph(){return C.equals(this._graph)}_write(M,P){this._outputStream.write(M,"utf8",P)}_writeQuad(M,P,Z,S,G){try{S.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(C.equals(S)?"":`${this._encodeIriOrBlank(S)} {\n`)),this._graph=S,this._subject=null),M.equals(this._subject)?P.equals(this._predicate)?this._write(`, ${this._encodeObject(Z)}`,G):this._write(`;\n    ${this._encodePredicate(this._predicate=P)} ${this._encodeObject(Z)}`,G):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=M)} ${this._encodePredicate(this._predicate=P)} ${this._encodeObject(Z)}`,G)}catch(ne){G&&G(ne)}}_writeQuadLine(M,P,Z,S,G){delete this._prefixMatch,this._write(this.quadToString(M,P,Z,S),G)}quadToString(M,P,Z,S){return`${this._encodeSubject(M)} ${this._encodeIriOrBlank(P)} ${this._encodeObject(Z)}${S&&S.value?` ${this._encodeIriOrBlank(S)} .\n`:" .\n"}`}quadsToString(M){return M.map(P=>this.quadToString(P.subject,P.predicate,P.object,P.graph)).join("")}_encodeSubject(M){return"Quad"===M.termType?this._encodeQuad(M):this._encodeIriOrBlank(M)}_encodeIriOrBlank(M){if("NamedNode"!==M.termType)return this._lists&&M.value in this._lists&&(M=this.list(this._lists[M.value])),"id"in M?M.id:`_:${M.value}`;let P=M.value;this._baseMatcher&&this._baseMatcher.test(P)&&(P=P.substr(this._baseLength)),y.test(P)&&(P=P.replace(v,E));const Z=this._prefixRegex.exec(P);return Z?Z[1]?this._prefixIRIs[Z[1]]+Z[2]:P:`<${P}>`}_encodeLiteral(M){let P=M.value;if(y.test(P)&&(P=P.replace(v,E)),M.language)return`"${P}"@${M.language}`;if(this._lineMode){if(M.datatype.value===T.string)return`"${P}"`}else switch(M.datatype.value){case T.string:return`"${P}"`;case T.boolean:if("true"===P||"false"===P)return P;break;case T.integer:if(/^[+-]?\d+$/.test(P))return P;break;case T.decimal:if(/^[+-]?\d*\.\d+$/.test(P))return P;break;case T.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(P))return P}return`"${P}"^^${this._encodeIriOrBlank(M.datatype)}`}_encodePredicate(M){return M.value===R.type?"a":this._encodeIriOrBlank(M)}_encodeObject(M){switch(M.termType){case"Quad":return this._encodeQuad(M);case"Literal":return this._encodeLiteral(M);default:return this._encodeIriOrBlank(M)}}_encodeQuad({subject:M,predicate:P,object:Z,graph:S}){return`<<${this._encodeSubject(M)} ${this._encodePredicate(P)} ${this._encodeObject(Z)}${(0,F.isDefaultGraph)(S)?"":` ${this._encodeIriOrBlank(S)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(M,P,Z,S,G){void 0===Z?this._writeQuad(M.subject,M.predicate,M.object,M.graph,P):"function"==typeof S?this._writeQuad(M,P,Z,C,S):this._writeQuad(M,P,Z,S||C,G)}addQuads(M){for(let P=0;P<M.length;P++)this.addQuad(M[P])}addPrefix(M,P,Z){const S={};S[M]=P,this.addPrefixes(S,Z)}addPrefixes(M,P){if(!this._prefixIRIs)return P&&P();let Z=!1;for(let S in M){let G=M[S];"string"!=typeof G&&(G=G.value),Z=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[G]=S+=":",this._write(`@prefix ${S} <${G}>.\n`)}if(Z){let S="",G="";for(const ne in this._prefixIRIs)S+=S?`|${ne}`:ne,G+=(G?"|":"")+this._prefixIRIs[ne];S=I(S),this._prefixRegex=new RegExp(`^(?:${G})[^/]*$|^(${S})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(Z?"\n":"",P)}blank(M,P){let S,G,Z=M;switch(void 0===M?Z=[]:M.termType?Z=[{predicate:M,object:P}]:"length"in M||(Z=[M]),G=Z.length){case 0:return new x("[]");case 1:if(S=Z[0],!(S.object instanceof x))return new x(`[ ${this._encodePredicate(S.predicate)} ${this._encodeObject(S.object)} ]`);default:let ne="[";for(let ce=0;ce<G;ce++)S=Z[ce],S.predicate.equals(M)?ne+=`, ${this._encodeObject(S.object)}`:(ne+=`${(ce?";\n  ":"\n  ")+this._encodePredicate(S.predicate)} ${this._encodeObject(S.object)}`,M=S.predicate);return new x(`${ne}\n]`)}}list(M){const P=M&&M.length||0,Z=new Array(P);for(let S=0;S<P;S++)Z[S]=this._encodeObject(M[S]);return new x(`(${Z.join(" ")})`)}end(M){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let P=M&&((Z,S)=>{P=null,M(Z,S)});if(this._endStream)try{return this._outputStream.end(P)}catch(Z){}P&&P()}}},{"./IRIs":34,"./N3DataFactory":35,"./N3Util":41}],43:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),Object.defineProperty(fe,"BlankNode",{enumerable:!0,get:function(){return R.BlankNode}}),Object.defineProperty(fe,"DataFactory",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(fe,"DefaultGraph",{enumerable:!0,get:function(){return R.DefaultGraph}}),Object.defineProperty(fe,"Lexer",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(fe,"Literal",{enumerable:!0,get:function(){return R.Literal}}),Object.defineProperty(fe,"NamedNode",{enumerable:!0,get:function(){return R.NamedNode}}),Object.defineProperty(fe,"Parser",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(fe,"Quad",{enumerable:!0,get:function(){return R.Quad}}),Object.defineProperty(fe,"Store",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(fe,"StreamParser",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(fe,"StreamWriter",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(fe,"Term",{enumerable:!0,get:function(){return R.Term}}),Object.defineProperty(fe,"Triple",{enumerable:!0,get:function(){return R.Triple}}),fe.Util=void 0,Object.defineProperty(fe,"Variable",{enumerable:!0,get:function(){return R.Variable}}),Object.defineProperty(fe,"Writer",{enumerable:!0,get:function(){return F.default}}),fe.default=void 0,Object.defineProperty(fe,"termFromId",{enumerable:!0,get:function(){return R.termFromId}}),Object.defineProperty(fe,"termToId",{enumerable:!0,get:function(){return R.termToId}});var K=v(Q("./N3Lexer")),V=v(Q("./N3Parser")),F=v(Q("./N3Writer")),Y=v(Q("./N3Store")),L=v(Q("./N3StreamParser")),w=v(Q("./N3StreamWriter")),C=y(Q("./N3Util"));fe.Util=C;var R=y(Q("./N3DataFactory"));function T(x){if("function"!=typeof WeakMap)return null;var A=new WeakMap,E=new WeakMap;return(T=function(I){return I?E:A})(x)}function y(x,A){if(!A&&x&&x.__esModule)return x;if(null===x||"object"!=typeof x&&"function"!=typeof x)return{default:x};var E=T(A);if(E&&E.has(x))return E.get(x);var I={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in x)if("default"!==M&&Object.prototype.hasOwnProperty.call(x,M)){var P=H?Object.getOwnPropertyDescriptor(x,M):null;P&&(P.get||P.set)?Object.defineProperty(I,M,P):I[M]=x[M]}return I.default=x,E&&E.set(x,I),I}function v(x){return x&&x.__esModule?x:{default:x}}fe.default={Lexer:K.default,Parser:V.default,Writer:F.default,Store:Y.default,StreamParser:L.default,StreamWriter:w.default,Util:C,DataFactory:R.default,Term:R.Term,NamedNode:R.NamedNode,Literal:R.Literal,BlankNode:R.BlankNode,Variable:R.Variable,DefaultGraph:R.DefaultGraph,Quad:R.Quad,Triple:R.Triple,termFromId:R.termFromId,termToId:R.termToId}},{"./N3DataFactory":35,"./N3Lexer":36,"./N3Parser":37,"./N3Store":38,"./N3StreamParser":39,"./N3StreamWriter":40,"./N3Util":41,"./N3Writer":42}],44:[function(Q,we,fe){var V,F,K=we.exports={};function Y(){throw new Error("setTimeout has not been defined")}function L(){throw new Error("clearTimeout has not been defined")}function w(I){if(V===setTimeout)return setTimeout(I,0);if((V===Y||!V)&&setTimeout)return V=setTimeout,setTimeout(I,0);try{return V(I,0)}catch(H){try{return V.call(null,I,0)}catch(M){return V.call(this,I,0)}}}!function(){try{V="function"==typeof setTimeout?setTimeout:Y}catch(I){V=Y}try{F="function"==typeof clearTimeout?clearTimeout:L}catch(I){F=L}}();var y,R=[],T=!1,v=-1;function b(){!T||!y||(T=!1,y.length?R=y.concat(R):v=-1,R.length&&x())}function x(){if(!T){var I=w(b);T=!0;for(var H=R.length;H;){for(y=R,R=[];++v<H;)y&&y[v].run();v=-1,H=R.length}y=null,T=!1,function(I){if(F===clearTimeout)return clearTimeout(I);if((F===L||!F)&&clearTimeout)return F=clearTimeout,clearTimeout(I);try{F(I)}catch(H){try{return F.call(null,I)}catch(M){return F.call(this,I)}}}(I)}}function A(I,H){this.fun=I,this.array=H}function E(){}K.nextTick=function(I){var H=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)H[M-1]=arguments[M];R.push(new A(I,H)),1===R.length&&!T&&w(x)},A.prototype.run=function(){this.fun.apply(null,this.array)},K.title="browser",K.browser=!0,K.env={},K.argv=[],K.version="",K.versions={},K.on=E,K.addListener=E,K.once=E,K.off=E,K.removeListener=E,K.removeAllListeners=E,K.emit=E,K.prependListener=E,K.prependOnceListener=E,K.listeners=function(I){return[]},K.binding=function(I){throw new Error("process.binding is not supported")},K.cwd=function(){return"/"},K.chdir=function(I){throw new Error("process.chdir is not supported")},K.umask=function(){return 0}},{}],45:[function(Q,we,fe){(function(K){(function(){let V;we.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:K):F=>(V||(V=Promise.resolve())).then(F).catch(Y=>setTimeout(()=>{throw Y},0))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(Q,we,fe){we.exports=Q("./lib")},{"./lib":55}],47:[function(Q,we,fe){"use strict";we.exports=class Hq{constructor(V,F=new Map,Y=0){this.prefix=V,this._existing=F,this.counter=Y}clone(){const{prefix:V,_existing:F,counter:Y}=this;return new Hq(V,new Map(F),Y)}getId(V){const F=V&&this._existing.get(V);if(F)return F;const Y=this.prefix+this.counter;return this.counter++,V&&this._existing.set(V,Y),Y}hasId(V){return this._existing.has(V)}getOldIds(){return[...this._existing.keys()]}}},{}],48:[function(Q,we,fe){"use strict";Q("setimmediate");const K=self.crypto||self.msCrypto;we.exports=class{constructor(F){if(!K||!K.subtle)throw new Error("crypto.subtle not found.");if("sha256"===F)this.algorithm={name:"SHA-256"};else{if("sha1"!==F)throw new Error(`Unsupport algorithm "${F}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(F){this._content+=F}digest(){var F=this;return lt(function*(){const Y=(new TextEncoder).encode(F._content),L=new Uint8Array(yield K.subtle.digest(F.algorithm,Y));let w="";for(let C=0;C<L.length;++C)w+=L[C].toString(16).padStart(2,"0");return w})()}}},{setimmediate:86}],49:[function(Q,we,fe){"use strict";const F="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",Y="http://www.w3.org/2001/XMLSchema#string",L="NamedNode",w="BlankNode",C="Literal",R="DefaultGraph",T={};function y(E,I){return E.subject.termType===I.subject.termType&&E.object.termType===I.object.termType&&E.subject.value===I.subject.value&&E.predicate.value===I.predicate.value&&E.object.value===I.object.value&&(E.object.termType!==C||E.object.datatype.termType===I.object.datatype.termType&&E.object.language===I.object.language&&E.object.datatype.value===I.object.datatype.value)}T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^[ \\t]*$"),T.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),we.exports=class cF{static parse(I){const H=[],M={},P=I.split(T.eoln);let Z=0;for(const S of P){if(Z++,T.empty.test(S))continue;const G=S.match(T.quad);if(null===G)throw new Error("N-Quads parse error on line "+Z+".");const ne={subject:null,predicate:null,object:null,graph:null};if(ne.subject=void 0!==G[1]?{termType:L,value:G[1]}:{termType:w,value:G[2]},ne.predicate={termType:L,value:G[3]},void 0!==G[4]?ne.object={termType:L,value:G[4]}:void 0!==G[5]?ne.object={termType:w,value:G[5]}:(ne.object={termType:C,value:void 0,datatype:{termType:L}},void 0!==G[7]?ne.object.datatype.value=G[7]:void 0!==G[8]?(ne.object.datatype.value=F,ne.object.language=G[8]):ne.object.datatype.value=Y,ne.object.value=G[6].replace(x,function(I,H,M,P){if(H)switch(H){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(M)return String.fromCharCode(parseInt(M,16));if(P)throw new Error("Unsupported U escape")})),ne.graph=void 0!==G[9]?{termType:L,value:G[9]}:void 0!==G[10]?{termType:w,value:G[10]}:{termType:R,value:""},ne.graph.value in M){let ce=!0;const se=M[ne.graph.value];for(const te of se)if(y(te,ne)){ce=!1;break}ce&&(se.push(ne),H.push(ne))}else M[ne.graph.value]=[ne],H.push(ne)}return H}static serialize(I){Array.isArray(I)||(I=cF.legacyDatasetToQuads(I));const H=[];for(const M of I)H.push(cF.serializeQuad(M));return H.sort().join("")}static serializeQuad(I){const H=I.subject,P=I.object,Z=I.graph;let S="";return S+=H.termType===L?`<${H.value}>`:`${H.value}`,S+=` <${I.predicate.value}> `,P.termType===L?S+=`<${P.value}>`:P.termType===w?S+=P.value:(S+=`"${E=P.value,E.replace(v,function(I){switch(I){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,P.datatype.value===F?P.language&&(S+=`@${P.language}`):P.datatype.value!==Y&&(S+=`^^<${P.datatype.value}>`)),Z.termType===L?S+=` <${Z.value}>`:Z.termType===w&&(S+=` ${Z.value}`),S+=" .\n",S;var E}static legacyDatasetToQuads(I){const H=[],M={"blank node":w,IRI:L,literal:C};for(const P in I)I[P].forEach(S=>{const G={};for(const ne in S){const ce=S[ne],se={termType:M[ce.type],value:ce.value};se.termType===C&&(se.datatype={termType:L},"datatype"in ce&&(se.datatype.value=ce.datatype),"language"in ce?("datatype"in ce||(se.datatype.value=F),se.language=ce.language):"datatype"in ce||(se.datatype.value=Y)),G[ne]=se}G.graph="@default"===P?{termType:R,value:""}:{termType:P.startsWith("_:")?w:L,value:P},H.push(G)});return H}};const v=/["\\\n\r]/g;const x=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],50:[function(Q,we,fe){"use strict";we.exports=class{constructor(V){this.current=V.sort(),this.done=!1,this.dir=new Map;for(let F=0;F<V.length;++F)this.dir.set(V[F],!0)}hasNext(){return!this.done}next(){const{current:V,dir:F}=this,Y=V.slice();let L=null,w=0;const C=V.length;for(let R=0;R<C;++R){const T=V[R],y=F.get(T);(null===L||T>L)&&(y&&R>0&&T>V[R-1]||!y&&R<C-1&&T>V[R+1])&&(L=T,w=R)}if(null===L)this.done=!0;else{const R=F.get(L)?w-1:w+1;V[w]=V[R],V[R]=L;for(const T of V)T>L&&F.set(T,!F.get(T))}return Y}}},{}],51:[function(Q,we,fe){(function(K){(function(){"use strict";const V=Q("./IdentifierIssuer"),F=Q("./MessageDigest"),Y=Q("./Permuter"),L=Q("./NQuads");function w(C,R){return C.hash<R.hash?-1:C.hash>R.hash?1:0}we.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new V("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(R){var T=this;return lt(function*(){T.quads=R;for(const I of R)T._addBlankNodeQuadInfo({quad:I,component:I.subject}),T._addBlankNodeQuadInfo({quad:I,component:I.object}),T._addBlankNodeQuadInfo({quad:I,component:I.graph});const y=new Map,v=[...T.blankNodeInfo.keys()];let b=0;for(const I of v)++b%100==0&&(yield T._yield()),yield T._hashAndTrackBlankNode({id:I,hashToBlankNodes:y});const x=[...y.keys()].sort(),A=[];for(const I of x){const H=y.get(I);H.length>1?A.push(H):T.canonicalIssuer.getId(H[0])}for(const I of A){const H=[];for(const M of I){if(T.canonicalIssuer.hasId(M))continue;const P=new V("_:b");P.getId(M);const Z=yield T.hashNDegreeQuads(M,P);H.push(Z)}H.sort(w);for(const M of H){const P=M.issuer.getOldIds();for(const Z of P)T.canonicalIssuer.getId(Z)}}const E=[];for(const I of T.quads){const H=at({},I);H.subject=T._useCanonicalId({component:H.subject}),H.object=T._useCanonicalId({component:H.object}),H.graph=T._useCanonicalId({component:H.graph}),E.push(L.serializeQuad(H))}return E.sort(),E.join("")})()}hashFirstDegreeQuads(R){var T=this;return lt(function*(){const y=[],v=T.blankNodeInfo.get(R),b=v.quads;for(const A of b){const E={subject:null,predicate:A.predicate,object:null,graph:null};E.subject=T.modifyFirstDegreeComponent(R,A.subject,"subject"),E.object=T.modifyFirstDegreeComponent(R,A.object,"object"),E.graph=T.modifyFirstDegreeComponent(R,A.graph,"graph"),y.push(L.serializeQuad(E))}y.sort();const x=new F(T.hashAlgorithm);for(const A of y)x.update(A);return v.hash=yield x.digest(),v.hash})()}hashRelatedBlankNode(R,T,y,v){var b=this;return lt(function*(){let x;x=b.canonicalIssuer.hasId(R)?b.canonicalIssuer.getId(R):y.hasId(R)?y.getId(R):b.blankNodeInfo.get(R).hash;const A=new F(b.hashAlgorithm);return A.update(v),"g"!==v&&A.update(b.getRelatedPredicate(T)),A.update(x),A.digest()})()}hashNDegreeQuads(R,T){var y=this;return lt(function*(){const v=new F(y.hashAlgorithm),b=yield y.createHashToRelated(R,T),x=[...b.keys()].sort();for(const A of x){v.update(A);let I,E="";const H=new Y(b.get(A));let M=0;for(;H.hasNext();){const P=H.next();++M%3==0&&(yield y._yield());let Z=T.clone(),S="";const G=[];let ne=!1;for(const ce of P)if(y.canonicalIssuer.hasId(ce)?S+=y.canonicalIssuer.getId(ce):(Z.hasId(ce)||G.push(ce),S+=Z.getId(ce)),0!==E.length&&S>E){ne=!0;break}if(!ne){for(const ce of G){const se=yield y.hashNDegreeQuads(ce,Z);if(S+=Z.getId(ce),S+=`<${se.hash}>`,Z=se.issuer,0!==E.length&&S>E){ne=!0;break}}ne||(0===E.length||S<E)&&(E=S,I=Z)}}v.update(E),T=I}return{hash:yield v.digest(),issuer:T}})()}modifyFirstDegreeComponent(R,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===R?"_:a":"_:z"}}getRelatedPredicate(R){return`<${R.predicate.value}>`}createHashToRelated(R,T){var y=this;return lt(function*(){const v=new Map,b=y.blankNodeInfo.get(R).quads;let x=0;for(const A of b)++x%100==0&&(yield y._yield()),yield Promise.all([y._addRelatedBlankNodeHash({quad:A,component:A.subject,position:"s",id:R,issuer:T,hashToRelated:v}),y._addRelatedBlankNodeHash({quad:A,component:A.object,position:"o",id:R,issuer:T,hashToRelated:v}),y._addRelatedBlankNodeHash({quad:A,component:A.graph,position:"g",id:R,issuer:T,hashToRelated:v})]);return v})()}_hashAndTrackBlankNode({id:R,hashToBlankNodes:T}){var y=this;return lt(function*(){const v=yield y.hashFirstDegreeQuads(R),b=T.get(v);b?b.push(R):T.set(v,[R])})()}_addBlankNodeQuadInfo({quad:R,component:T}){if("BlankNode"!==T.termType)return;const y=T.value,v=this.blankNodeInfo.get(y);v?v.quads.add(R):this.blankNodeInfo.set(y,{quads:new Set([R]),hash:null})}_addRelatedBlankNodeHash({quad:R,component:T,position:y,id:v,issuer:b,hashToRelated:x}){var A=this;return lt(function*(){if("BlankNode"!==T.termType||T.value===v)return;const E=T.value,I=yield A.hashRelatedBlankNode(E,R,b,y),H=x.get(I);H?H.push(E):x.set(I,[E])})()}_useCanonicalId({component:R}){return"BlankNode"!==R.termType||R.value.startsWith(this.canonicalIssuer.prefix)?R:{termType:"BlankNode",value:this.canonicalIssuer.getId(R.value)}}_yield(){return lt(function*(){return new Promise(R=>K(R))})()}}}).call(this)}).call(this,Q("timers").setImmediate)},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50,timers:89}],52:[function(Q,we,fe){"use strict";const K=Q("./IdentifierIssuer"),V=Q("./MessageDigest"),F=Q("./Permuter"),Y=Q("./NQuads");function L(w,C){return w.hash<C.hash?-1:w.hash>C.hash?1:0}we.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new K("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(C){this.quads=C;for(const x of C)this._addBlankNodeQuadInfo({quad:x,component:x.subject}),this._addBlankNodeQuadInfo({quad:x,component:x.object}),this._addBlankNodeQuadInfo({quad:x,component:x.graph});const R=new Map,T=[...this.blankNodeInfo.keys()];for(const x of T)this._hashAndTrackBlankNode({id:x,hashToBlankNodes:R});const y=[...R.keys()].sort(),v=[];for(const x of y){const A=R.get(x);A.length>1?v.push(A):this.canonicalIssuer.getId(A[0])}for(const x of v){const A=[];for(const E of x){if(this.canonicalIssuer.hasId(E))continue;const I=new K("_:b");I.getId(E);const H=this.hashNDegreeQuads(E,I);A.push(H)}A.sort(L);for(const E of A){const I=E.issuer.getOldIds();for(const H of I)this.canonicalIssuer.getId(H)}}const b=[];for(const x of this.quads){const A=at({},x);A.subject=this._useCanonicalId({component:A.subject}),A.object=this._useCanonicalId({component:A.object}),A.graph=this._useCanonicalId({component:A.graph}),b.push(Y.serializeQuad(A))}return b.sort(),b.join("")}hashFirstDegreeQuads(C){const R=[],T=this.blankNodeInfo.get(C),y=T.quads;for(const b of y){const x={subject:null,predicate:b.predicate,object:null,graph:null};x.subject=this.modifyFirstDegreeComponent(C,b.subject,"subject"),x.object=this.modifyFirstDegreeComponent(C,b.object,"object"),x.graph=this.modifyFirstDegreeComponent(C,b.graph,"graph"),R.push(Y.serializeQuad(x))}R.sort();const v=new V(this.hashAlgorithm);for(const b of R)v.update(b);return T.hash=v.digest(),T.hash}hashRelatedBlankNode(C,R,T,y){let v;v=this.canonicalIssuer.hasId(C)?this.canonicalIssuer.getId(C):T.hasId(C)?T.getId(C):this.blankNodeInfo.get(C).hash;const b=new V(this.hashAlgorithm);return b.update(y),"g"!==y&&b.update(this.getRelatedPredicate(R)),b.update(v),b.digest()}hashNDegreeQuads(C,R){const T=new V(this.hashAlgorithm),y=this.createHashToRelated(C,R),v=[...y.keys()].sort();for(const b of v){T.update(b);let A,x="";const E=new F(y.get(b));for(;E.hasNext();){const I=E.next();let H=R.clone(),M="";const P=[];let Z=!1;for(const S of I)if(this.canonicalIssuer.hasId(S)?M+=this.canonicalIssuer.getId(S):(H.hasId(S)||P.push(S),M+=H.getId(S)),0!==x.length&&M>x){Z=!0;break}if(!Z){for(const S of P){const G=this.hashNDegreeQuads(S,H);if(M+=H.getId(S),M+=`<${G.hash}>`,H=G.issuer,0!==x.length&&M>x){Z=!0;break}}Z||(0===x.length||M<x)&&(x=M,A=H)}}T.update(x),R=A}return{hash:T.digest(),issuer:R}}modifyFirstDegreeComponent(C,R){return"BlankNode"!==R.termType?R:{termType:"BlankNode",value:R.value===C?"_:a":"_:z"}}getRelatedPredicate(C){return`<${C.predicate.value}>`}createHashToRelated(C,R){const T=new Map,y=this.blankNodeInfo.get(C).quads;for(const v of y)this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:C,issuer:R,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:C,issuer:R,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:C,issuer:R,hashToRelated:T});return T}_hashAndTrackBlankNode({id:C,hashToBlankNodes:R}){const T=this.hashFirstDegreeQuads(C),y=R.get(T);y?y.push(C):R.set(T,[C])}_addBlankNodeQuadInfo({quad:C,component:R}){if("BlankNode"!==R.termType)return;const T=R.value,y=this.blankNodeInfo.get(T);y?y.quads.add(C):this.blankNodeInfo.set(T,{quads:new Set([C]),hash:null})}_addRelatedBlankNodeHash({quad:C,component:R,position:T,id:y,issuer:v,hashToRelated:b}){if("BlankNode"!==R.termType||R.value===y)return;const x=R.value,A=this.hashRelatedBlankNode(x,C,v,T),E=b.get(A);E?E.push(x):b.set(A,[x])}_useCanonicalId({component:C}){return"BlankNode"!==C.termType||C.value.startsWith(this.canonicalIssuer.prefix)?C:{termType:"BlankNode",value:this.canonicalIssuer.getId(C.value)}}}},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50}],53:[function(Q,we,fe){"use strict";const K=Q("./URDNA2015");we.exports=class extends K{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,Y,L){return"BlankNode"!==Y.termType?Y:"graph"===L?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:Y.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,Y){var L=this;return lt(function*(){const w=new Map,C=L.blankNodeInfo.get(F).quads;let R=0;for(const T of C){let y,v;if("BlankNode"===T.subject.termType&&T.subject.value!==F)v=T.subject.value,y="p";else{if("BlankNode"!==T.object.termType||T.object.value===F)continue;v=T.object.value,y="r"}++R%100==0&&(yield L._yield());const b=yield L.hashRelatedBlankNode(v,T,Y,y),x=w.get(b);x?x.push(v):w.set(b,[v])}return w})()}}},{"./URDNA2015":51}],54:[function(Q,we,fe){"use strict";const K=Q("./URDNA2015Sync");we.exports=class extends K{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,Y,L){return"BlankNode"!==Y.termType?Y:"graph"===L?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:Y.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,Y){const L=new Map,w=this.blankNodeInfo.get(F).quads;for(const C of w){let R,T;if("BlankNode"===C.subject.termType&&C.subject.value!==F)T=C.subject.value,R="p";else{if("BlankNode"!==C.object.termType||C.object.value===F)continue;T=C.object.value,R="r"}const y=this.hashRelatedBlankNode(T,C,Y,R),v=L.get(y);v?v.push(T):L.set(y,[T])}return L}}},{"./URDNA2015Sync":52}],55:[function(Q,we,fe){"use strict";const K=Q("./URDNA2015"),V=Q("./URGNA2012"),F=Q("./URDNA2015Sync"),Y=Q("./URGNA2012Sync");let L;try{L=Q("rdf-canonize-native")}catch(C){}const w={};we.exports=w,w.NQuads=Q("./NQuads"),w.IdentifierIssuer=Q("./IdentifierIssuer"),w._rdfCanonizeNative=function(C){return C&&(L=C),L},w.canonize=function(){var C=lt(function*(R,T){if(Array.isArray(R)||(R=w.NQuads.legacyDatasetToQuads(R)),T.useNative){if(!L)throw new Error("rdf-canonize-native not available");return new Promise((y,v)=>L.canonize(R,T,(b,x)=>b?v(b):y(x)))}if("URDNA2015"===T.algorithm)return new K(T).main(R);if("URGNA2012"===T.algorithm)return new V(T).main(R);throw"algorithm"in T?new Error("Invalid RDF Dataset Canonicalization algorithm: "+T.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(R,T){return C.apply(this,arguments)}}(),w._canonizeSync=function(C,R){if(Array.isArray(C)||(C=w.NQuads.legacyDatasetToQuads(C)),R.useNative){if(L)return L.canonizeSync(C,R);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===R.algorithm)return new F(R).main(C);if("URGNA2012"===R.algorithm)return new Y(R).main(C);throw"algorithm"in R?new Error("Invalid RDF Dataset Canonicalization algorithm: "+R.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":47,"./NQuads":49,"./URDNA2015":51,"./URDNA2015Sync":52,"./URGNA2012":53,"./URGNA2012Sync":54,"rdf-canonize-native":3}],56:[function(Q,we,fe){"use strict";var K=this&&this.__createBinding||(Object.create?function(F,Y,L,w){void 0===w&&(w=L),Object.defineProperty(F,w,{enumerable:!0,get:function(){return Y[L]}})}:function(F,Y,L,w){void 0===w&&(w=L),F[w]=Y[L]}),V=this&&this.__exportStar||function(F,Y){for(var L in F)"default"!==L&&!Object.prototype.hasOwnProperty.call(Y,L)&&K(Y,F,L)};Object.defineProperty(fe,"__esModule",{value:!0}),V(Q("./lib/BlankNode"),fe),V(Q("./lib/DataFactory"),fe),V(Q("./lib/DefaultGraph"),fe),V(Q("./lib/Literal"),fe),V(Q("./lib/NamedNode"),fe),V(Q("./lib/Quad"),fe),V(Q("./lib/Variable"),fe)},{"./lib/BlankNode":57,"./lib/DataFactory":58,"./lib/DefaultGraph":59,"./lib/Literal":60,"./lib/NamedNode":61,"./lib/Quad":62,"./lib/Variable":63}],57:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.BlankNode=void 0;fe.BlankNode=class{constructor(F){this.termType="BlankNode",this.value=F}equals(F){return!!F&&"BlankNode"===F.termType&&F.value===this.value}}},{}],58:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.DataFactory=void 0;const K=Q("./BlankNode"),V=Q("./DefaultGraph"),F=Q("./Literal"),Y=Q("./NamedNode"),L=Q("./Quad"),w=Q("./Variable");let C=0;fe.DataFactory=class{constructor(y){this.blankNodeCounter=0,this.blankNodePrefix=(y=y||{}).blankNodePrefix||`df_${C++}_`}namedNode(y){return new Y.NamedNode(y)}blankNode(y){return new K.BlankNode(y||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(y,v){return new F.Literal(y,v)}variable(y){return new w.Variable(y)}defaultGraph(){return V.DefaultGraph.INSTANCE}quad(y,v,b,x){return new L.Quad(y,v,b,x||this.defaultGraph())}fromTerm(y){switch(y.termType){case"NamedNode":return this.namedNode(y.value);case"BlankNode":return this.blankNode(y.value);case"Literal":return y.language?this.literal(y.value,y.language):y.datatype.equals(F.Literal.XSD_STRING)?this.literal(y.value):this.literal(y.value,this.fromTerm(y.datatype));case"Variable":return this.variable(y.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(y.subject),this.fromTerm(y.predicate),this.fromTerm(y.object),this.fromTerm(y.graph))}}fromQuad(y){return this.fromTerm(y)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},{"./BlankNode":57,"./DefaultGraph":59,"./Literal":60,"./NamedNode":61,"./Quad":62,"./Variable":63}],59:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.DefaultGraph=void 0;class K{constructor(){this.termType="DefaultGraph",this.value=""}equals(F){return!!F&&"DefaultGraph"===F.termType}}fe.DefaultGraph=K,K.INSTANCE=new K},{}],60:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Literal=void 0;const K=Q("./NamedNode");class V{constructor(Y,L){this.termType="Literal",this.value=Y,"string"==typeof L?(this.language=L,this.datatype=V.RDF_LANGUAGE_STRING):L?(this.language="",this.datatype=L):(this.language="",this.datatype=V.XSD_STRING)}equals(Y){return!!Y&&"Literal"===Y.termType&&Y.value===this.value&&Y.language===this.language&&Y.datatype.equals(this.datatype)}}fe.Literal=V,V.RDF_LANGUAGE_STRING=new K.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),V.XSD_STRING=new K.NamedNode("http://www.w3.org/2001/XMLSchema#string")},{"./NamedNode":61}],61:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.NamedNode=void 0;fe.NamedNode=class{constructor(F){this.termType="NamedNode",this.value=F}equals(F){return!!F&&"NamedNode"===F.termType&&F.value===this.value}}},{}],62:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Quad=void 0;fe.Quad=class{constructor(F,Y,L,w){this.termType="Quad",this.value="",this.subject=F,this.predicate=Y,this.object=L,this.graph=w}equals(F){return!!F&&("Quad"===F.termType||!F.termType)&&this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)&&this.graph.equals(F.graph)}}},{}],63:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Variable=void 0;fe.Variable=class{constructor(F){this.termType="Variable",this.value=F}equals(F){return!!F&&"Variable"===F.termType&&F.value===this.value}}},{}],64:[function(Q,we,fe){"use strict";var K=this&&this.__createBinding||(Object.create?function(F,Y,L,w){void 0===w&&(w=L),Object.defineProperty(F,w,{enumerable:!0,get:function(){return Y[L]}})}:function(F,Y,L,w){void 0===w&&(w=L),F[w]=Y[L]}),V=this&&this.__exportStar||function(F,Y){for(var L in F)"default"!==L&&!Object.prototype.hasOwnProperty.call(Y,L)&&K(Y,F,L)};Object.defineProperty(fe,"__esModule",{value:!0}),V(Q("./lib/RdfXmlParser"),fe)},{"./lib/RdfXmlParser":66}],65:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.ParseError=void 0;class K extends Error{constructor(F,Y){const L=F.saxStream._parser;super(F.trackPosition?`Line ${L.line+1} column ${L.column+1}: ${Y}`:Y)}}fe.ParseError=K},{}],66:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.ParseType=fe.RdfXmlParser=void 0;const K=Q("relative-to-absolute-iri"),V=Q("sax"),F=Q("stream"),Y=Q("./ParseError"),L=Q("rdf-data-factory");class w extends F.Transform{constructor(T){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},T&&(Object.assign(this,T),this.options=T),this.dataFactory||(this.dataFactory=new L.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=V.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(T,y){const v={};let b=!1;for(const A in T.attributes)A.startsWith("xmlns")&&(5===A.length?(b=!0,v[""]=T.attributes[A]):":"===A.charAt(5)&&(b=!0,v[A.substr(6)]=T.attributes[A]));const x=y&&y.ns?y.ns:[w.DEFAULT_NS];return b?x.concat([v]):x}static expandPrefixedTerm(T,y,v){const b=T.indexOf(":");let x,A;b>=0?(x=T.substr(0,b),A=T.substr(b+1)):(x="",A=T);let E=null,I=null;for(let H=y.length-1;H>=0;H--){const M=y[H][x];if(M){E=M;break}I||(I=y[H][""])}if(!E){if(x&&"xmlns"!==x)throw new Y.ParseError(v,`The prefix '${x}' in term '${T}' was not bound.`);E=I||""}return{prefix:x,local:A,uri:E}}static isValidIri(T){return w.IRI_REGEX.test(T)}import(T){const y=new F.PassThrough({readableObjectMode:!0});T.on("error",b=>v.emit("error",b)),T.on("data",b=>y.push(b)),T.on("end",()=>y.push(null));const v=y.pipe(new w(this.options));return v}_transform(T,y,v){try{this.saxStream.write(T,y)}catch(b){return v(b)}v()}newParseError(T){return new Y.ParseError(this,T)}valueToUri(T,y){return this.uriToNamedNode(K.resolve(T,y.baseIRI))}uriToNamedNode(T){if(!w.isValidIri(T))throw this.newParseError(`Invalid URI: ${T}`);return this.dataFactory.namedNode(T)}validateNcname(T){if(!w.NCNAME_MATCHER.test(T))throw this.newParseError(`Not a valid NCName: ${T}`)}attachSaxListeners(){this.saxStream.on("error",T=>this.emit("error",T)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(T){const y=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let v=C.RESOURCE;if(y&&(y.hadChildren=!0,v=y.childrenParseType),y&&y.childrenStringTags){const x=T.name;let A="";for(const M in T.attributes)A+=` ${M}="${T.attributes[M]}"`;y.childrenStringTags.push(`<${x}${A}>`);const H={childrenStringTags:y.childrenStringTags};return H.childrenStringEmitClosingTag=`</${x}>`,void this.activeTagStack.push(H)}const b={};y?(b.language=y.language,b.baseIRI=y.baseIRI):b.baseIRI=this.baseIRI,this.activeTagStack.push(b),b.ns=w.parseNamespace(T,y),v===C.RESOURCE?this.onTagResource(T,b,y,!y):this.onTagProperty(T,b,y)}onTagResource(T,y,v,b){const x=w.expandPrefixedTerm(T.name,y.ns,this);y.childrenParseType=C.PROPERTY;let A=!0;if(x.uri===w.RDF){if(!b&&w.FORBIDDEN_NODE_ELEMENTS.indexOf(x.local)>=0)throw this.newParseError(`Illegal node element name: ${x.local}`);switch(x.local){case"RDF":y.childrenParseType=C.RESOURCE;case"Description":A=!1}}const E=[],I=[];let H=null,M=!1,P=!1,Z=null;for(const S in T.attributes){const G=T.attributes[S],ne=w.expandPrefixedTerm(S,y.ns,this);if(v&&ne.uri===w.RDF)switch(ne.local){case"about":if(H)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${G} and ${H} where found.`);H=G;continue;case"ID":if(H)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${G} and ${H} where found.`);this.validateNcname(G),H="#"+G,M=!0;continue;case"nodeID":if(H)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${G} and ${H} where found.`);this.validateNcname(G),H=G,P=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":Z=G;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(ne.uri===w.XML){if("lang"===ne.local){y.language=""===G?null:G.toLowerCase();continue}if("base"===ne.local){y.baseIRI=K.resolve(G,y.baseIRI);continue}}"xml"!==ne.prefix&&ne.uri&&(E.push(this.uriToNamedNode(ne.uri+ne.local)),I.push(G))}if(null!==H&&(y.subject=P?this.dataFactory.blankNode(H):this.valueToUri(H,y),M&&this.claimNodeId(y.subject)),y.subject||(y.subject=this.dataFactory.blankNode()),A){const S=this.uriToNamedNode(x.uri+x.local);this.emitTriple(y.subject,this.dataFactory.namedNode(w.RDF+"type"),S,v?v.reifiedStatementId:null)}if(v){if(v.predicate)if(v.childrenCollectionSubject){const S=this.dataFactory.blankNode();this.emitTriple(v.childrenCollectionSubject,v.childrenCollectionPredicate,S,v.reifiedStatementId),this.emitTriple(S,this.dataFactory.namedNode(w.RDF+"first"),y.subject,y.reifiedStatementId),v.childrenCollectionSubject=S,v.childrenCollectionPredicate=this.dataFactory.namedNode(w.RDF+"rest")}else{this.emitTriple(v.subject,v.predicate,y.subject,v.reifiedStatementId);for(let S=0;S<v.predicateSubPredicates.length;S++)this.emitTriple(y.subject,v.predicateSubPredicates[S],v.predicateSubObjects[S],null);v.predicateSubPredicates=[],v.predicateSubObjects=[],v.predicateEmitted=!0}for(let S=0;S<E.length;S++){const G=this.dataFactory.literal(I[S],y.datatype||y.language);this.emitTriple(y.subject,E[S],G,v.reifiedStatementId)}Z&&this.emitTriple(y.subject,this.dataFactory.namedNode(w.RDF+"type"),this.uriToNamedNode(Z),null)}}onTagProperty(T,y,v){const b=w.expandPrefixedTerm(T.name,y.ns,this);if(y.childrenParseType=C.RESOURCE,y.subject=v.subject,b.uri===w.RDF&&"li"===b.local?(v.listItemCounter||(v.listItemCounter=1),y.predicate=this.uriToNamedNode(b.uri+"_"+v.listItemCounter++)):y.predicate=this.uriToNamedNode(b.uri+b.local),b.uri===w.RDF&&w.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(b.local)>=0)throw this.newParseError(`Illegal property element name: ${b.local}`);y.predicateSubPredicates=[],y.predicateSubObjects=[];let x=!1,A=!1,E=null,I=!0;const H=[],M=[];for(const P in T.attributes){const Z=T.attributes[P],S=w.expandPrefixedTerm(P,y.ns,this);if(S.uri===w.RDF)switch(S.local){case"resource":if(E)throw this.newParseError(`Found both rdf:resource (${Z}) and rdf:nodeID (${E}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${Z})`);y.hadChildren=!0,E=Z,I=!1;continue;case"datatype":if(A)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${Z}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${Z})`);y.datatype=this.valueToUri(Z,y);continue;case"nodeID":if(A)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${Z}).`);if(y.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${Z}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${Z})`);this.validateNcname(Z),y.hadChildren=!0,E=Z,I=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(A)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(y.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${y.datatype.value})`);if(E)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${E})`);if("Resource"===Z){x=!0,y.childrenParseType=C.PROPERTY;const G=this.dataFactory.blankNode();this.emitTriple(y.subject,y.predicate,G,y.reifiedStatementId),y.subject=G,y.predicate=null}else"Collection"===Z?(x=!0,y.hadChildren=!0,y.childrenCollectionSubject=y.subject,y.childrenCollectionPredicate=y.predicate,I=!1):"Literal"===Z&&(x=!0,y.childrenTagsToString=!0,y.childrenStringTags=[]);continue;case"ID":this.validateNcname(Z),y.reifiedStatementId=this.valueToUri("#"+Z,y),this.claimNodeId(y.reifiedStatementId);continue}else if(S.uri===w.XML&&"lang"===S.local){y.language=""===Z?null:Z.toLowerCase();continue}if("xml"!==S.prefix&&"xmlns"!==S.prefix&&S.uri){if(x||y.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${Z}`);y.hadChildren=!0,A=!0,H.push(this.uriToNamedNode(S.uri+S.local)),M.push(this.dataFactory.literal(Z,y.datatype||y.language))}}if(null!==E){const P=y.subject;y.subject=I?this.dataFactory.blankNode(E):this.valueToUri(E,y),this.emitTriple(P,y.predicate,y.subject,y.reifiedStatementId);for(let Z=0;Z<H.length;Z++)this.emitTriple(y.subject,H[Z],M[Z],null);y.predicateEmitted=!0}else I&&(y.predicateSubPredicates=H,y.predicateSubObjects=M,y.predicateEmitted=!1)}emitTriple(T,y,v,b){this.push(this.dataFactory.quad(T,y,v,this.defaultGraph)),b&&(this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"type"),this.dataFactory.namedNode(w.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"subject"),T,this.defaultGraph)),this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"predicate"),y,this.defaultGraph)),this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"object"),v,this.defaultGraph)))}claimNodeId(T){if(!this.allowDuplicateRdfIds){if(this.nodeIds[T.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${T.value}'.`);this.nodeIds[T.value]=!0}}onText(T){const y=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;y&&(y.childrenStringTags?y.childrenStringTags.push(T):y.predicate&&(y.text=T))}onCloseTag(){const T=this.activeTagStack.pop();if(T.childrenStringEmitClosingTag&&T.childrenStringTags.push(T.childrenStringEmitClosingTag),T.childrenTagsToString&&(T.datatype=this.dataFactory.namedNode(w.RDF+"XMLLiteral"),T.text=T.childrenStringTags.join(""),T.hadChildren=!1),T.childrenCollectionSubject)this.emitTriple(T.childrenCollectionSubject,T.childrenCollectionPredicate,this.dataFactory.namedNode(w.RDF+"nil"),T.reifiedStatementId);else if(T.predicate)if(T.hadChildren||T.childrenParseType===C.PROPERTY){if(!T.predicateEmitted){const y=this.dataFactory.blankNode();this.emitTriple(T.subject,T.predicate,y,T.reifiedStatementId);for(let v=0;v<T.predicateSubPredicates.length;v++)this.emitTriple(y,T.predicateSubPredicates[v],T.predicateSubObjects[v],null)}}else this.emitTriple(T.subject,T.predicate,this.dataFactory.literal(T.text||"",T.datatype||T.language),T.reifiedStatementId)}onDoctype(T){T.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(y,v,b)=>(this.saxStream._parser.ENTITIES[v]=b,""))}}var C,R;fe.RdfXmlParser=w,w.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,w.MIME_TYPE="application/rdf+xml",w.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",w.XML="http://www.w3.org/XML/1998/namespace",w.XMLNS="http://www.w3.org/2000/xmlns/",w.DEFAULT_NS={xml:w.XML},w.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],w.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],w.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(R=C=fe.ParseType||(fe.ParseType={}))[R.RESOURCE=0]="RESOURCE",R[R.PROPERTY=1]="PROPERTY"},{"./ParseError":65,"rdf-data-factory":56,"relative-to-absolute-iri":82,sax:85,stream:87}],67:[function(Q,we,fe){"use strict";var V={};function F(R,T,y){y||(y=Error);var b=function(x){function A(E,I,H){return x.call(this,function(x,A,E){return"string"==typeof T?T:T(x,A,E)}(E,I,H))||this}return function(R,T){R.prototype=Object.create(T.prototype),R.prototype.constructor=R,R.__proto__=T}(A,x),A}(y);b.prototype.name=y.name,b.prototype.code=R,V[R]=b}function Y(R,T){if(Array.isArray(R)){var y=R.length;return R=R.map(function(v){return String(v)}),y>2?"one of ".concat(T," ").concat(R.slice(0,y-1).join(", "),", or ")+R[y-1]:2===y?"one of ".concat(T," ").concat(R[0]," or ").concat(R[1]):"of ".concat(T," ").concat(R[0])}return"of ".concat(T," ").concat(String(R))}F("ERR_INVALID_OPT_VALUE",function(R,T){return'The value "'+T+'" is invalid for option "'+R+'"'},TypeError),F("ERR_INVALID_ARG_TYPE",function(R,T,y){var v,b;if("string"==typeof T&&function(R,T,y){return R.substr(!y||y<0?0:+y,T.length)===T}(T,"not ")?(v="must not be",T=T.replace(/^not /,"")):v="must be",function(R,T,y){return(void 0===y||y>R.length)&&(y=R.length),R.substring(y-T.length,y)===T}(R," argument"))b="The ".concat(R," ").concat(v," ").concat(Y(T,"type"));else{var x=function(R,T,y){return"number"!=typeof y&&(y=0),!(y+T.length>R.length)&&-1!==R.indexOf(T,y)}(R,".")?"property":"argument";b='The "'.concat(R,'" ').concat(x," ").concat(v," ").concat(Y(T,"type"))}return b+". Received type ".concat(typeof y)},TypeError),F("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),F("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"}),F("ERR_STREAM_PREMATURE_CLOSE","Premature close"),F("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"}),F("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),F("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),F("ERR_STREAM_WRITE_AFTER_END","write after end"),F("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),F("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError),F("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),we.exports.codes=V},{}],68:[function(Q,we,fe){(function(K){(function(){"use strict";var V=Object.keys||function(v){var b=[];for(var x in v)b.push(x);return b};we.exports=R;var F=Q("./_stream_readable"),Y=Q("./_stream_writable");Q("inherits")(R,F);for(var L=V(Y.prototype),w=0;w<L.length;w++){var C=L[w];R.prototype[C]||(R.prototype[C]=Y.prototype[C])}function R(v){if(!(this instanceof R))return new R(v);F.call(this,v),Y.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||K.nextTick(y,this)}function y(v){v.end()}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=b,this._writableState.destroyed=b)}})}).call(this)}).call(this,Q("_process"))},{"./_stream_readable":70,"./_stream_writable":72,_process:44,inherits:10}],69:[function(Q,we,fe){"use strict";we.exports=V;var K=Q("./_stream_transform");function V(F){if(!(this instanceof V))return new V(F);K.call(this,F)}Q("inherits")(V,K),V.prototype._transform=function(F,Y,L){L(null,F)}},{"./_stream_transform":71,inherits:10}],70:[function(Q,we,fe){(function(K,V){(function(){"use strict";var F;we.exports=re,re.ReadableState=ye,Q("events");var L=function(U,k){return U.listeners(k).length},w=Q("./internal/streams/stream"),C=Q("buffer").Buffer,R=V.Uint8Array||function(){};var b,v=Q("util");b=v&&v.debuglog?v.debuglog("stream"):function(){};var G,ne,ce,x=Q("./internal/streams/buffer_list"),A=Q("./internal/streams/destroy"),I=Q("./internal/streams/state").getHighWaterMark,H=Q("../errors").codes,M=H.ERR_INVALID_ARG_TYPE,P=H.ERR_STREAM_PUSH_AFTER_EOF,Z=H.ERR_METHOD_NOT_IMPLEMENTED,S=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Q("inherits")(re,w);var se=A.errorOrDestroy,te=["error","close","destroy","pause","resume"];function ye(Ae,U,k){F=F||Q("./_stream_duplex"),"boolean"!=typeof k&&(k=U instanceof F),this.objectMode=!!(Ae=Ae||{}).objectMode,k&&(this.objectMode=this.objectMode||!!Ae.readableObjectMode),this.highWaterMark=I(this,Ae,"readableHighWaterMark",k),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Ae.emitClose,this.autoDestroy=!!Ae.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ae.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ae.encoding&&(G||(G=Q("string_decoder/").StringDecoder),this.decoder=new G(Ae.encoding),this.encoding=Ae.encoding)}function re(Ae){if(F=F||Q("./_stream_duplex"),!(this instanceof re))return new re(Ae);this._readableState=new ye(Ae,this,this instanceof F),this.readable=!0,Ae&&("function"==typeof Ae.read&&(this._read=Ae.read),"function"==typeof Ae.destroy&&(this._destroy=Ae.destroy)),w.call(this)}function ve(Ae,U,k,z,Le){b("readableAddChunk",U);var xt,nt=Ae._readableState;if(null===U)nt.reading=!1,function(Ae,U){if(b("onEofChunk"),!U.ended){if(U.decoder){var k=U.decoder.end();k&&k.length&&(U.buffer.push(k),U.length+=U.objectMode?1:k.length)}U.ended=!0,U.sync?Te(Ae):(U.needReadable=!1,U.emittedReadable||(U.emittedReadable=!0,xe(Ae)))}}(Ae,nt);else if(Le||(xt=function(Ae,U){var k;return!function(Ae){return C.isBuffer(Ae)||Ae instanceof R}(U)&&"string"!=typeof U&&void 0!==U&&!Ae.objectMode&&(k=new M("chunk",["string","Buffer","Uint8Array"],U)),k}(nt,U)),xt)se(Ae,xt);else if(nt.objectMode||U&&U.length>0)if("string"!=typeof U&&!nt.objectMode&&Object.getPrototypeOf(U)!==C.prototype&&(U=function(Ae){return C.from(Ae)}(U)),z)nt.endEmitted?se(Ae,new S):Fe(Ae,nt,U,!0);else if(nt.ended)se(Ae,new P);else{if(nt.destroyed)return!1;nt.reading=!1,nt.decoder&&!k?(U=nt.decoder.write(U),nt.objectMode||0!==U.length?Fe(Ae,nt,U,!1):Ge(Ae,nt)):Fe(Ae,nt,U,!1)}else z||(nt.reading=!1,Ge(Ae,nt));return!nt.ended&&(nt.length<nt.highWaterMark||0===nt.length)}function Fe(Ae,U,k,z){U.flowing&&0===U.length&&!U.sync?(U.awaitDrain=0,Ae.emit("data",k)):(U.length+=U.objectMode?1:k.length,z?U.buffer.unshift(k):U.buffer.push(k),U.needReadable&&Te(Ae)),Ge(Ae,U)}Object.defineProperty(re.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(U){!this._readableState||(this._readableState.destroyed=U)}}),re.prototype.destroy=A.destroy,re.prototype._undestroy=A.undestroy,re.prototype._destroy=function(Ae,U){U(Ae)},re.prototype.push=function(Ae,U){var z,k=this._readableState;return k.objectMode?z=!0:"string"==typeof Ae&&((U=U||k.defaultEncoding)!==k.encoding&&(Ae=C.from(Ae,U),U=""),z=!0),ve(this,Ae,U,!1,z)},re.prototype.unshift=function(Ae){return ve(this,Ae,null,!0,!1)},re.prototype.isPaused=function(){return!1===this._readableState.flowing},re.prototype.setEncoding=function(Ae){G||(G=Q("string_decoder/").StringDecoder);var U=new G(Ae);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;for(var k=this._readableState.buffer.head,z="";null!==k;)z+=U.write(k.data),k=k.next;return this._readableState.buffer.clear(),""!==z&&this._readableState.buffer.push(z),this._readableState.length=z.length,this};var He=1073741824;function ae(Ae,U){return Ae<=0||0===U.length&&U.ended?0:U.objectMode?1:Ae!=Ae?U.flowing&&U.length?U.buffer.head.data.length:U.length:(Ae>U.highWaterMark&&(U.highWaterMark=function(Ae){return Ae>=He?Ae=He:(Ae--,Ae|=Ae>>>1,Ae|=Ae>>>2,Ae|=Ae>>>4,Ae|=Ae>>>8,Ae|=Ae>>>16,Ae++),Ae}(Ae)),Ae<=U.length?Ae:U.ended?U.length:(U.needReadable=!0,0))}function Te(Ae){var U=Ae._readableState;b("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(b("emitReadable",U.flowing),U.emittedReadable=!0,K.nextTick(xe,Ae))}function xe(Ae){var U=Ae._readableState;b("emitReadable_",U.destroyed,U.length,U.ended),!U.destroyed&&(U.length||U.ended)&&(Ae.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,ge(Ae)}function Ge(Ae,U){U.readingMore||(U.readingMore=!0,K.nextTick(Se,Ae,U))}function Se(Ae,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&0===U.length);){var k=U.length;if(b("maybeReadMore read 0"),Ae.read(0),k===U.length)break}U.readingMore=!1}function Ke(Ae){var U=Ae._readableState;U.readableListening=Ae.listenerCount("readable")>0,U.resumeScheduled&&!U.paused?U.flowing=!0:Ae.listenerCount("data")>0&&Ae.resume()}function Be(Ae){b("readable nexttick read 0"),Ae.read(0)}function q(Ae,U){b("resume",U.reading),U.reading||Ae.read(0),U.resumeScheduled=!1,Ae.emit("resume"),ge(Ae),U.flowing&&!U.reading&&Ae.read(0)}function ge(Ae){var U=Ae._readableState;for(b("flow",U.flowing);U.flowing&&null!==Ae.read(););}function le(Ae,U){return 0===U.length?null:(U.objectMode?k=U.buffer.shift():!Ae||Ae>=U.length?(k=U.decoder?U.buffer.join(""):1===U.buffer.length?U.buffer.first():U.buffer.concat(U.length),U.buffer.clear()):k=U.buffer.consume(Ae,U.decoder),k);var k}function qe(Ae){var U=Ae._readableState;b("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,K.nextTick(_t,U,Ae))}function _t(Ae,U){if(b("endReadableNT",Ae.endEmitted,Ae.length),!Ae.endEmitted&&0===Ae.length&&(Ae.endEmitted=!0,U.readable=!1,U.emit("end"),Ae.autoDestroy)){var k=U._writableState;(!k||k.autoDestroy&&k.finished)&&U.destroy()}}function gt(Ae,U){for(var k=0,z=Ae.length;k<z;k++)if(Ae[k]===U)return k;return-1}re.prototype.read=function(Ae){b("read",Ae),Ae=parseInt(Ae,10);var U=this._readableState,k=Ae;if(0!==Ae&&(U.emittedReadable=!1),0===Ae&&U.needReadable&&((0!==U.highWaterMark?U.length>=U.highWaterMark:U.length>0)||U.ended))return b("read: emitReadable",U.length,U.ended),0===U.length&&U.ended?qe(this):Te(this),null;if(0===(Ae=ae(Ae,U))&&U.ended)return 0===U.length&&qe(this),null;var Le,z=U.needReadable;return b("need readable",z),(0===U.length||U.length-Ae<U.highWaterMark)&&b("length less than watermark",z=!0),U.ended||U.reading?b("reading or ended",z=!1):z&&(b("do read"),U.reading=!0,U.sync=!0,0===U.length&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(Ae=ae(k,U))),null===(Le=Ae>0?le(Ae,U):null)?(U.needReadable=U.length<=U.highWaterMark,Ae=0):(U.length-=Ae,U.awaitDrain=0),0===U.length&&(U.ended||(U.needReadable=!0),k!==Ae&&U.ended&&qe(this)),null!==Le&&this.emit("data",Le),Le},re.prototype._read=function(Ae){se(this,new Z("_read()"))},re.prototype.pipe=function(Ae,U){var k=this,z=this._readableState;switch(z.pipesCount){case 0:z.pipes=Ae;break;case 1:z.pipes=[z.pipes,Ae];break;default:z.pipes.push(Ae)}z.pipesCount+=1,b("pipe count=%d opts=%j",z.pipesCount,U);var nt=U&&!1===U.end||Ae===K.stdout||Ae===K.stderr?gs:Nt;function xt(Bs,Qr){b("onunpipe"),Bs===k&&Qr&&!1===Qr.hasUnpiped&&(Qr.hasUnpiped=!0,b("cleanup"),Ae.removeListener("close",Xr),Ae.removeListener("finish",Ls),Ae.removeListener("drain",On),Ae.removeListener("error",wi),Ae.removeListener("unpipe",xt),k.removeListener("end",Nt),k.removeListener("end",gs),k.removeListener("data",Ti),kn=!0,z.awaitDrain&&(!Ae._writableState||Ae._writableState.needDrain)&&On())}function Nt(){b("onend"),Ae.end()}z.endEmitted?K.nextTick(nt):k.once("end",nt),Ae.on("unpipe",xt);var On=function(Ae){return function(){var k=Ae._readableState;b("pipeOnDrain",k.awaitDrain),k.awaitDrain&&k.awaitDrain--,0===k.awaitDrain&&L(Ae,"data")&&(k.flowing=!0,ge(Ae))}}(k);Ae.on("drain",On);var kn=!1;function Ti(Bs){b("ondata");var Qr=Ae.write(Bs);b("dest.write",Qr),!1===Qr&&((1===z.pipesCount&&z.pipes===Ae||z.pipesCount>1&&-1!==gt(z.pipes,Ae))&&!kn&&(b("false write response, pause",z.awaitDrain),z.awaitDrain++),k.pause())}function wi(Bs){b("onerror",Bs),gs(),Ae.removeListener("error",wi),0===L(Ae,"error")&&se(Ae,Bs)}function Xr(){Ae.removeListener("finish",Ls),gs()}function Ls(){b("onfinish"),Ae.removeListener("close",Xr),gs()}function gs(){b("unpipe"),k.unpipe(Ae)}return k.on("data",Ti),function(Ae,U,k){if("function"==typeof Ae.prependListener)return Ae.prependListener(U,k);Ae._events&&Ae._events[U]?Array.isArray(Ae._events[U])?Ae._events[U].unshift(k):Ae._events[U]=[k,Ae._events[U]]:Ae.on(U,k)}(Ae,"error",wi),Ae.once("close",Xr),Ae.once("finish",Ls),Ae.emit("pipe",k),z.flowing||(b("pipe resume"),k.resume()),Ae},re.prototype.unpipe=function(Ae){var U=this._readableState,k={hasUnpiped:!1};if(0===U.pipesCount)return this;if(1===U.pipesCount)return Ae&&Ae!==U.pipes||(Ae||(Ae=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,Ae&&Ae.emit("unpipe",this,k)),this;if(!Ae){var z=U.pipes,Le=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var nt=0;nt<Le;nt++)z[nt].emit("unpipe",this,{hasUnpiped:!1});return this}var xt=gt(U.pipes,Ae);return-1===xt||(U.pipes.splice(xt,1),U.pipesCount-=1,1===U.pipesCount&&(U.pipes=U.pipes[0]),Ae.emit("unpipe",this,k)),this},re.prototype.addListener=re.prototype.on=function(Ae,U){var k=w.prototype.on.call(this,Ae,U),z=this._readableState;return"data"===Ae?(z.readableListening=this.listenerCount("readable")>0,!1!==z.flowing&&this.resume()):"readable"===Ae&&!z.endEmitted&&!z.readableListening&&(z.readableListening=z.needReadable=!0,z.flowing=!1,z.emittedReadable=!1,b("on readable",z.length,z.reading),z.length?Te(this):z.reading||K.nextTick(Be,this)),k},re.prototype.removeListener=function(Ae,U){var k=w.prototype.removeListener.call(this,Ae,U);return"readable"===Ae&&K.nextTick(Ke,this),k},re.prototype.removeAllListeners=function(Ae){var U=w.prototype.removeAllListeners.apply(this,arguments);return("readable"===Ae||void 0===Ae)&&K.nextTick(Ke,this),U},re.prototype.resume=function(){var Ae=this._readableState;return Ae.flowing||(b("resume"),Ae.flowing=!Ae.readableListening,function(Ae,U){U.resumeScheduled||(U.resumeScheduled=!0,K.nextTick(q,Ae,U))}(this,Ae)),Ae.paused=!1,this},re.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},re.prototype.wrap=function(Ae){var U=this,k=this._readableState,z=!1;for(var Le in Ae.on("end",function(){if(b("wrapped end"),k.decoder&&!k.ended){var xt=k.decoder.end();xt&&xt.length&&U.push(xt)}U.push(null)}),Ae.on("data",function(xt){b("wrapped data"),k.decoder&&(xt=k.decoder.write(xt)),k.objectMode&&null==xt||!(k.objectMode||xt&&xt.length)||U.push(xt)||(z=!0,Ae.pause())}),Ae)void 0===this[Le]&&"function"==typeof Ae[Le]&&(this[Le]=function(Nt){return function(){return Ae[Nt].apply(Ae,arguments)}}(Le));for(var nt=0;nt<te.length;nt++)Ae.on(te[nt],this.emit.bind(this,te[nt]));return this._read=function(xt){b("wrapped _read",xt),z&&(z=!1,Ae.resume())},this},"function"==typeof Symbol&&(re.prototype[Symbol.asyncIterator]=function(){return void 0===ne&&(ne=Q("./internal/streams/async_iterator")),ne(this)}),Object.defineProperty(re.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(re.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(re.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(U){this._readableState&&(this._readableState.flowing=U)}}),re._fromList=le,Object.defineProperty(re.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(re.from=function(Ae,U){return void 0===ce&&(ce=Q("./internal/streams/from")),ce(re,Ae,U)})}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/async_iterator":73,"./internal/streams/buffer_list":74,"./internal/streams/destroy":75,"./internal/streams/from":77,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,events:8,inherits:10,"string_decoder/":88,util:3}],71:[function(Q,we,fe){"use strict";we.exports=R;var K=Q("../errors").codes,V=K.ERR_METHOD_NOT_IMPLEMENTED,F=K.ERR_MULTIPLE_CALLBACK,Y=K.ERR_TRANSFORM_ALREADY_TRANSFORMING,L=K.ERR_TRANSFORM_WITH_LENGTH_0,w=Q("./_stream_duplex");function C(v,b){var x=this._transformState;x.transforming=!1;var A=x.writecb;if(null===A)return this.emit("error",new F);x.writechunk=null,x.writecb=null,null!=b&&this.push(b),A(v);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function R(v){if(!(this instanceof R))return new R(v);w.call(this,v),this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",T)}function T(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?y(this,null,null):this._flush(function(b,x){y(v,b,x)})}function y(v,b,x){if(b)return v.emit("error",b);if(null!=x&&v.push(x),v._writableState.length)throw new L;if(v._transformState.transforming)throw new Y;return v.push(null)}Q("inherits")(R,w),R.prototype.push=function(v,b){return this._transformState.needTransform=!1,w.prototype.push.call(this,v,b)},R.prototype._transform=function(v,b,x){x(new V("_transform()"))},R.prototype._write=function(v,b,x){var A=this._transformState;if(A.writecb=x,A.writechunk=v,A.writeencoding=b,!A.transforming){var E=this._readableState;(A.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},R.prototype._read=function(v){var b=this._transformState;null===b.writechunk||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},R.prototype._destroy=function(v,b){w.prototype._destroy.call(this,v,function(x){b(x)})}},{"../errors":67,"./_stream_duplex":68,inherits:10}],72:[function(Q,we,fe){(function(K,V){(function(){"use strict";function Y(ge){var le=this;this.next=null,this.entry=null,this.finish=function(){!function(ge,le,qe){var _t=ge.entry;for(ge.entry=null;_t;){var gt=_t.callback;le.pendingcb--,gt(qe),_t=_t.next}le.corkedRequestsFree.next=ge}(le,ge)}}var L;we.exports=ye,ye.WritableState=te;var w={deprecate:Q("util-deprecate")},C=Q("./internal/streams/stream"),R=Q("buffer").Buffer,T=V.Uint8Array||function(){};var Ie,b=Q("./internal/streams/destroy"),A=Q("./internal/streams/state").getHighWaterMark,E=Q("../errors").codes,I=E.ERR_INVALID_ARG_TYPE,H=E.ERR_METHOD_NOT_IMPLEMENTED,M=E.ERR_MULTIPLE_CALLBACK,P=E.ERR_STREAM_CANNOT_PIPE,Z=E.ERR_STREAM_DESTROYED,S=E.ERR_STREAM_NULL_VALUES,G=E.ERR_STREAM_WRITE_AFTER_END,ne=E.ERR_UNKNOWN_ENCODING,ce=b.errorOrDestroy;function se(){}function te(ge,le,qe){L=L||Q("./_stream_duplex"),"boolean"!=typeof qe&&(qe=le instanceof L),this.objectMode=!!(ge=ge||{}).objectMode,qe&&(this.objectMode=this.objectMode||!!ge.writableObjectMode),this.highWaterMark=A(this,ge,"writableHighWaterMark",qe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===ge.decodeStrings),this.defaultEncoding=ge.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(gt){!function(ge,le){var qe=ge._writableState,_t=qe.sync,gt=qe.writecb;if("function"!=typeof gt)throw new M;if(function(ge){ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0}(qe),le)!function(ge,le,qe,_t,gt){--le.pendingcb,qe?(K.nextTick(gt,_t),K.nextTick(Be,ge,le),ge._writableState.errorEmitted=!0,ce(ge,_t)):(gt(_t),ge._writableState.errorEmitted=!0,ce(ge,_t),Be(ge,le))}(ge,qe,_t,le,gt);else{var Ae=Se(qe)||ge.destroyed;!Ae&&!qe.corked&&!qe.bufferProcessing&&qe.bufferedRequest&&Ge(ge,qe),_t?K.nextTick(Te,ge,qe,Ae,gt):Te(ge,qe,Ae,gt)}}(le,gt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ge.emitClose,this.autoDestroy=!!ge.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Y(this)}function ye(ge){var le=this instanceof(L=L||Q("./_stream_duplex"));if(!le&&!Ie.call(ye,this))return new ye(ge);this._writableState=new te(ge,this,le),this.writable=!0,ge&&("function"==typeof ge.write&&(this._write=ge.write),"function"==typeof ge.writev&&(this._writev=ge.writev),"function"==typeof ge.destroy&&(this._destroy=ge.destroy),"function"==typeof ge.final&&(this._final=ge.final)),C.call(this)}function Qe(ge,le,qe,_t,gt,Ae){if(!qe){var U=function(ge,le,qe){return!ge.objectMode&&!1!==ge.decodeStrings&&"string"==typeof le&&(le=R.from(le,qe)),le}(le,_t,gt);_t!==U&&(qe=!0,gt="buffer",_t=U)}var k=le.objectMode?1:_t.length;le.length+=k;var z=le.length<le.highWaterMark;if(z||(le.needDrain=!0),le.writing||le.corked){var Le=le.lastBufferedRequest;le.lastBufferedRequest={chunk:_t,encoding:gt,isBuf:qe,callback:Ae,next:null},Le?Le.next=le.lastBufferedRequest:le.bufferedRequest=le.lastBufferedRequest,le.bufferedRequestCount+=1}else He(ge,le,!1,k,_t,gt,Ae);return z}function He(ge,le,qe,_t,gt,Ae,U){le.writelen=_t,le.writecb=U,le.writing=!0,le.sync=!0,le.destroyed?le.onwrite(new Z("write")):qe?ge._writev(gt,le.onwrite):ge._write(gt,Ae,le.onwrite),le.sync=!1}function Te(ge,le,qe,_t){qe||function(ge,le){0===le.length&&le.needDrain&&(le.needDrain=!1,ge.emit("drain"))}(ge,le),le.pendingcb--,_t(),Be(ge,le)}function Ge(ge,le){le.bufferProcessing=!0;var qe=le.bufferedRequest;if(ge._writev&&qe&&qe.next){var gt=new Array(le.bufferedRequestCount),Ae=le.corkedRequestsFree;Ae.entry=qe;for(var U=0,k=!0;qe;)gt[U]=qe,qe.isBuf||(k=!1),qe=qe.next,U+=1;gt.allBuffers=k,He(ge,le,!0,le.length,gt,"",Ae.finish),le.pendingcb++,le.lastBufferedRequest=null,Ae.next?(le.corkedRequestsFree=Ae.next,Ae.next=null):le.corkedRequestsFree=new Y(le),le.bufferedRequestCount=0}else{for(;qe;){var z=qe.chunk;if(He(ge,le,!1,le.objectMode?1:z.length,z,qe.encoding,qe.callback),qe=qe.next,le.bufferedRequestCount--,le.writing)break}null===qe&&(le.lastBufferedRequest=null)}le.bufferedRequest=qe,le.bufferProcessing=!1}function Se(ge){return ge.ending&&0===ge.length&&null===ge.bufferedRequest&&!ge.finished&&!ge.writing}function Ue(ge,le){ge._final(function(qe){le.pendingcb--,qe&&ce(ge,qe),le.prefinished=!0,ge.emit("prefinish"),Be(ge,le)})}function Be(ge,le){var qe=Se(le);if(qe&&(function(ge,le){!le.prefinished&&!le.finalCalled&&("function"!=typeof ge._final||le.destroyed?(le.prefinished=!0,ge.emit("prefinish")):(le.pendingcb++,le.finalCalled=!0,K.nextTick(Ue,ge,le)))}(ge,le),0===le.pendingcb&&(le.finished=!0,ge.emit("finish"),le.autoDestroy))){var _t=ge._readableState;(!_t||_t.autoDestroy&&_t.endEmitted)&&ge.destroy()}return qe}Q("inherits")(ye,C),te.prototype.getBuffer=function(){for(var le=this.bufferedRequest,qe=[];le;)qe.push(le),le=le.next;return qe},function(){try{Object.defineProperty(te.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ge){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Ie=Function.prototype[Symbol.hasInstance],Object.defineProperty(ye,Symbol.hasInstance,{value:function(le){return!!Ie.call(this,le)||this===ye&&le&&le._writableState instanceof te}})):Ie=function(le){return le instanceof this},ye.prototype.pipe=function(){ce(this,new P)},ye.prototype.write=function(ge,le,qe){var _t=this._writableState,gt=!1,Ae=!_t.objectMode&&function(ge){return R.isBuffer(ge)||ge instanceof T}(ge);return Ae&&!R.isBuffer(ge)&&(ge=function(ge){return R.from(ge)}(ge)),"function"==typeof le&&(qe=le,le=null),Ae?le="buffer":le||(le=_t.defaultEncoding),"function"!=typeof qe&&(qe=se),_t.ending?function(ge,le){var qe=new G;ce(ge,qe),K.nextTick(le,qe)}(this,qe):(Ae||function(ge,le,qe,_t){var gt;return null===qe?gt=new S:"string"!=typeof qe&&!le.objectMode&&(gt=new I("chunk",["string","Buffer"],qe)),!gt||(ce(ge,gt),K.nextTick(_t,gt),!1)}(this,_t,ge,qe))&&(_t.pendingcb++,gt=Qe(this,_t,Ae,ge,le,qe)),gt},ye.prototype.cork=function(){this._writableState.corked++},ye.prototype.uncork=function(){var ge=this._writableState;ge.corked&&(ge.corked--,!ge.writing&&!ge.corked&&!ge.bufferProcessing&&ge.bufferedRequest&&Ge(this,ge))},ye.prototype.setDefaultEncoding=function(le){if("string"==typeof le&&(le=le.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((le+"").toLowerCase())>-1))throw new ne(le);return this._writableState.defaultEncoding=le,this},Object.defineProperty(ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ye.prototype._write=function(ge,le,qe){qe(new H("_write()"))},ye.prototype._writev=null,ye.prototype.end=function(ge,le,qe){var _t=this._writableState;return"function"==typeof ge?(qe=ge,ge=null,le=null):"function"==typeof le&&(qe=le,le=null),null!=ge&&this.write(ge,le),_t.corked&&(_t.corked=1,this.uncork()),_t.ending||function(ge,le,qe){le.ending=!0,Be(ge,le),qe&&(le.finished?K.nextTick(qe):ge.once("finish",qe)),le.ended=!0,ge.writable=!1}(this,_t,qe),this},Object.defineProperty(ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(le){!this._writableState||(this._writableState.destroyed=le)}}),ye.prototype.destroy=b.destroy,ye.prototype._undestroy=b.undestroy,ye.prototype._destroy=function(ge,le){le(ge)}}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/destroy":75,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,inherits:10,"util-deprecate":90}],73:[function(Q,we,fe){(function(K){(function(){"use strict";var V;function F(P,Z,S){return Z in P?Object.defineProperty(P,Z,{value:S,enumerable:!0,configurable:!0,writable:!0}):P[Z]=S,P}var Y=Q("./end-of-stream"),L=Symbol("lastResolve"),w=Symbol("lastReject"),C=Symbol("error"),R=Symbol("ended"),T=Symbol("lastPromise"),y=Symbol("handlePromise"),v=Symbol("stream");function b(P,Z){return{value:P,done:Z}}function x(P){var Z=P[L];if(null!==Z){var S=P[v].read();null!==S&&(P[T]=null,P[L]=null,P[w]=null,Z(b(S,!1)))}}function A(P){K.nextTick(x,P)}var I=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((F(V={get stream(){return this[v]},next:function(){var Z=this,S=this[C];if(null!==S)return Promise.reject(S);if(this[R])return Promise.resolve(b(void 0,!0));if(this[v].destroyed)return new Promise(function(se,te){K.nextTick(function(){Z[C]?te(Z[C]):se(b(void 0,!0))})});var ne,G=this[T];if(G)ne=new Promise(function(P,Z){return function(S,G){P.then(function(){Z[R]?S(b(void 0,!0)):Z[y](S,G)},G)}}(G,this));else{var ce=this[v].read();if(null!==ce)return Promise.resolve(b(ce,!1));ne=new Promise(this[y])}return this[T]=ne,ne}},Symbol.asyncIterator,function(){return this}),F(V,"return",function(){var Z=this;return new Promise(function(S,G){Z[v].destroy(null,function(ne){ne?G(ne):S(b(void 0,!0))})})}),V),I);we.exports=function(Z){var S,G=Object.create(H,(F(S={},v,{value:Z,writable:!0}),F(S,L,{value:null,writable:!0}),F(S,w,{value:null,writable:!0}),F(S,C,{value:null,writable:!0}),F(S,R,{value:Z._readableState.endEmitted,writable:!0}),F(S,y,{value:function(ce,se){var te=G[v].read();te?(G[T]=null,G[L]=null,G[w]=null,ce(b(te,!1))):(G[L]=ce,G[w]=se)},writable:!0}),S));return G[T]=null,Y(Z,function(ne){if(ne&&"ERR_STREAM_PREMATURE_CLOSE"!==ne.code){var ce=G[w];return null!==ce&&(G[T]=null,G[L]=null,G[w]=null,ce(ne)),void(G[C]=ne)}var se=G[L];null!==se&&(G[T]=null,G[L]=null,G[w]=null,se(b(void 0,!0))),G[R]=!0}),Z.on("readable",A.bind(null,G)),G}}).call(this)}).call(this,Q("_process"))},{"./end-of-stream":76,_process:44}],74:[function(Q,we,fe){"use strict";function K(x,A){var E=Object.keys(x);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(x);A&&(I=I.filter(function(H){return Object.getOwnPropertyDescriptor(x,H).enumerable})),E.push.apply(E,I)}return E}function F(x,A,E){return A in x?Object.defineProperty(x,A,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[A]=E,x}function L(x,A){for(var E=0;E<A.length;E++){var I=A[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,I.key,I)}}var R=Q("buffer").Buffer,y=Q("util").inspect,v=y&&y.custom||"inspect";function b(x,A,E){R.prototype.copy.call(x,A,E)}we.exports=function(){function x(){(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")})(this,x),this.head=null,this.tail=null,this.length=0}return function(x,A,E){A&&L(x.prototype,A),E&&L(x,E)}(x,[{key:"push",value:function(E){var I={data:E,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(E){var I={data:E,next:this.head};0===this.length&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(0!==this.length){var E=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(0===this.length)return"";for(var I=this.head,H=""+I.data;I=I.next;)H+=E+I.data;return H}},{key:"concat",value:function(E){if(0===this.length)return R.alloc(0);for(var I=R.allocUnsafe(E>>>0),H=this.head,M=0;H;)b(H.data,I,M),M+=H.data.length,H=H.next;return I}},{key:"consume",value:function(E,I){var H;return E<this.head.data.length?(H=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):H=E===this.head.data.length?this.shift():I?this._getString(E):this._getBuffer(E),H}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var I=this.head,H=1,M=I.data;for(E-=M.length;I=I.next;){var P=I.data,Z=E>P.length?P.length:E;if(M+=Z===P.length?P:P.slice(0,E),0==(E-=Z)){Z===P.length?(++H,this.head=I.next?I.next:this.tail=null):(this.head=I,I.data=P.slice(Z));break}++H}return this.length-=H,M}},{key:"_getBuffer",value:function(E){var I=R.allocUnsafe(E),H=this.head,M=1;for(H.data.copy(I),E-=H.data.length;H=H.next;){var P=H.data,Z=E>P.length?P.length:E;if(P.copy(I,I.length-E,0,Z),0==(E-=Z)){Z===P.length?(++M,this.head=H.next?H.next:this.tail=null):(this.head=H,H.data=P.slice(Z));break}++M}return this.length-=M,I}},{key:v,value:function(E,I){return y(this,function(x){for(var A=1;A<arguments.length;A++){var E=null!=arguments[A]?arguments[A]:{};A%2?K(Object(E),!0).forEach(function(I){F(x,I,E[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(E)):K(Object(E)).forEach(function(I){Object.defineProperty(x,I,Object.getOwnPropertyDescriptor(E,I))})}return x}({},I,{depth:0,customInspect:!1}))}}]),x}()},{buffer:6,util:3}],75:[function(Q,we,fe){(function(K){(function(){"use strict";function F(R,T){w(R,T),Y(R)}function Y(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function w(R,T){R.emit("error",T)}we.exports={destroy:function(R,T){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(T?T(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,K.nextTick(w,this,R)):K.nextTick(w,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(x){!T&&x?y._writableState?y._writableState.errorEmitted?K.nextTick(Y,y):(y._writableState.errorEmitted=!0,K.nextTick(F,y,x)):K.nextTick(F,y,x):T?(K.nextTick(Y,y),T(x)):K.nextTick(Y,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(R,T){var y=R._readableState,v=R._writableState;y&&y.autoDestroy||v&&v.autoDestroy?R.destroy(T):R.emit("error",T)}}}).call(this)}).call(this,Q("_process"))},{_process:44}],76:[function(Q,we,fe){"use strict";var K=Q("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function F(){}we.exports=function L(w,C,R){if("function"==typeof C)return L(w,null,C);C||(C={}),R=function(w){var C=!1;return function(){if(!C){C=!0;for(var R=arguments.length,T=new Array(R),y=0;y<R;y++)T[y]=arguments[y];w.apply(this,T)}}}(R||F);var T=C.readable||!1!==C.readable&&w.readable,y=C.writable||!1!==C.writable&&w.writable,v=function(){w.writable||x()},b=w._writableState&&w._writableState.finished,x=function(){y=!1,b=!0,T||R.call(w)},A=w._readableState&&w._readableState.endEmitted,E=function(){T=!1,A=!0,y||R.call(w)},I=function(Z){R.call(w,Z)},H=function(){var Z;return T&&!A?((!w._readableState||!w._readableState.ended)&&(Z=new K),R.call(w,Z)):y&&!b?((!w._writableState||!w._writableState.ended)&&(Z=new K),R.call(w,Z)):void 0},M=function(){w.req.on("finish",x)};return function(w){return w.setHeader&&"function"==typeof w.abort}(w)?(w.on("complete",x),w.on("abort",H),w.req?M():w.on("request",M)):y&&!w._writableState&&(w.on("end",v),w.on("close",v)),w.on("end",E),w.on("finish",x),!1!==C.error&&w.on("error",I),w.on("close",H),function(){w.removeListener("complete",x),w.removeListener("abort",H),w.removeListener("request",M),w.req&&w.req.removeListener("finish",x),w.removeListener("end",v),w.removeListener("close",v),w.removeListener("finish",x),w.removeListener("end",E),w.removeListener("error",I),w.removeListener("close",H)}}},{"../../../errors":67}],77:[function(Q,we,fe){we.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],78:[function(Q,we,fe){"use strict";var K;var F=Q("../../../errors").codes,Y=F.ERR_MISSING_ARGS,L=F.ERR_STREAM_DESTROYED;function w(x){if(x)throw x}function R(x,A,E,I){I=function(x){var A=!1;return function(){A||(A=!0,x.apply(void 0,arguments))}}(I);var H=!1;x.on("close",function(){H=!0}),void 0===K&&(K=Q("./end-of-stream")),K(x,{readable:A,writable:E},function(P){if(P)return I(P);H=!0,I()});var M=!1;return function(P){if(!H&&!M){if(M=!0,function(x){return x.setHeader&&"function"==typeof x.abort}(x))return x.abort();if("function"==typeof x.destroy)return x.destroy();I(P||new L("pipe"))}}}function T(x){x()}function y(x,A){return x.pipe(A)}function v(x){return x.length&&"function"==typeof x[x.length-1]?x.pop():w}we.exports=function(){for(var x=arguments.length,A=new Array(x),E=0;E<x;E++)A[E]=arguments[E];var I=v(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new Y("streams");var H,M=A.map(function(P,Z){var S=Z<A.length-1;return R(P,S,Z>0,function(ne){H||(H=ne),ne&&M.forEach(T),!S&&(M.forEach(T),I(H))})});return A.reduce(y)}},{"../../../errors":67,"./end-of-stream":76}],79:[function(Q,we,fe){"use strict";var K=Q("../../../errors").codes.ERR_INVALID_OPT_VALUE;we.exports={getHighWaterMark:function(Y,L,w,C){var R=function(Y,L,w){return null!=Y.highWaterMark?Y.highWaterMark:L?Y[w]:null}(L,C,w);if(null!=R){if(!isFinite(R)||Math.floor(R)!==R||R<0)throw new K(C?w:"highWaterMark",R);return Math.floor(R)}return Y.objectMode?16:16384}}},{"../../../errors":67}],80:[function(Q,we,fe){we.exports=Q("events").EventEmitter},{events:8}],81:[function(Q,we,fe){(fe=we.exports=Q("./lib/_stream_readable.js")).Stream=fe,fe.Readable=fe,fe.Writable=Q("./lib/_stream_writable.js"),fe.Duplex=Q("./lib/_stream_duplex.js"),fe.Transform=Q("./lib/_stream_transform.js"),fe.PassThrough=Q("./lib/_stream_passthrough.js"),fe.finished=Q("./lib/internal/streams/end-of-stream.js"),fe.pipeline=Q("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":68,"./lib/_stream_passthrough.js":69,"./lib/_stream_readable.js":70,"./lib/_stream_transform.js":71,"./lib/_stream_writable.js":72,"./lib/internal/streams/end-of-stream.js":76,"./lib/internal/streams/pipeline.js":78}],82:[function(Q,we,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),function(V){for(var F in V)fe.hasOwnProperty(F)||(fe[F]=V[F])}(Q("./lib/Resolve"))},{"./lib/Resolve":83}],83:[function(Q,we,fe){"use strict";function V(L){const w=[];let C=0;for(;C<L.length;)switch(L[C]){case"/":if("."===L[C+1])if("."===L[C+2]){if(!Y(L[C+3])){w.push([]),C++;break}w.pop(),L[C+3]||w.push([]),C+=3}else{if(!Y(L[C+2])){w.push([]),C++;break}L[C+2]||w.push([]),C+=2}else w.push([]),C++;break;case"#":case"?":w.length||w.push([]),w[w.length-1].push(L.substr(C)),C=L.length;break;default:w.length||w.push([]),w[w.length-1].push(L[C]),C++}return"/"+w.map(R=>R.join("")).join("/")}function F(L,w){let C=w+1;w>=0?"/"===L[w+1]&&"/"===L[w+2]&&(C=w+3):"/"===L[0]&&"/"===L[1]&&(C=2);const R=L.indexOf("/",C);return R<0?L:L.substr(0,R)+V(L.substr(R))}function Y(L){return!L||"#"===L||"?"===L||"/"===L}Object.defineProperty(fe,"__esModule",{value:!0}),fe.resolve=function(L,w){const C=(w=w||"").indexOf("#");if(C>0&&(w=w.substr(0,C)),!L.length){if(w.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${w}' for value '${L}'`);return w}if(L.startsWith("?")){const A=w.indexOf("?");return A>0&&(w=w.substr(0,A)),w+L}if(L.startsWith("#"))return w+L;if(!w.length){const A=L.indexOf(":");if(A<0)throw new Error(`Found invalid relative IRI '${L}' for a missing baseIRI`);return F(L,A)}const R=L.indexOf(":");if(R>=0)return F(L,R);const T=w.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${w}' for value '${L}'`);const y=w.substr(0,T+1);if(0===L.indexOf("//"))return y+F(L,R);let v;if(w.indexOf("//",T)===T+1){if(v=w.indexOf("/",T+3),v<0)return w.length>T+3?w+"/"+F(L,R):y+F(L,R)}else if(v=w.indexOf("/",T+1),v<0)return y+F(L,R);if(0===L.indexOf("/"))return w.substr(0,v)+V(L);let b=w.substr(v);const x=b.lastIndexOf("/");return x>=0&&x<b.length-1&&(b=b.substr(0,x+1),"."===L[0]&&"."!==L[1]&&"/"!==L[1]&&L[2]&&(L=L.substr(1))),L=V(L=b+L),w.substr(0,v)+L},fe.removeDotSegments=V,fe.removeDotSegmentsOfPath=F},{}],84:[function(Q,we,fe){var K=Q("buffer"),V=K.Buffer;function F(L,w){for(var C in L)w[C]=L[C]}function Y(L,w,C){return V(L,w,C)}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?we.exports=K:(F(K,fe),fe.Buffer=Y),Y.prototype=Object.create(V.prototype),F(V,Y),Y.from=function(L,w,C){if("number"==typeof L)throw new TypeError("Argument must not be a number");return V(L,w,C)},Y.alloc=function(L,w,C){if("number"!=typeof L)throw new TypeError("Argument must be a number");var R=V(L);return void 0!==w?"string"==typeof C?R.fill(w,C):R.fill(w):R.fill(0),R},Y.allocUnsafe=function(L){if("number"!=typeof L)throw new TypeError("Argument must be a number");return V(L)},Y.allocUnsafeSlow=function(L){if("number"!=typeof L)throw new TypeError("Argument must be a number");return K.SlowBuffer(L)}},{buffer:6}],85:[function(Q,we,fe){(function(K){(function(){!function(V){V.parser=function(X,q){return new Y(X,q)},V.SAXParser=Y,V.SAXStream=v,V.createStream=function(X,q){return new v(X,q)},V.MAX_BUFFER_LENGTH=65536;var R,F=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function Y(X,q){if(!(this instanceof Y))return new Y(X,q);var ge=this;(function(X){for(var q=0,ge=F.length;q<ge;q++)X[F[q]]=""})(ge),ge.q=ge.c="",ge.bufferCheckPosition=V.MAX_BUFFER_LENGTH,ge.opt=q||{},ge.opt.lowercase=ge.opt.lowercase||ge.opt.lowercasetags,ge.looseCase=ge.opt.lowercase?"toLowerCase":"toUpperCase",ge.tags=[],ge.closed=ge.closedRoot=ge.sawRoot=!1,ge.tag=ge.error=null,ge.strict=!!X,ge.noscript=!(!X&&!ge.opt.noscript),ge.state=te.BEGIN,ge.strictEntities=ge.opt.strictEntities,ge.ENTITIES=Object.create(ge.strictEntities?V.XML_ENTITIES:V.ENTITIES),ge.attribList=[],ge.opt.xmlns&&(ge.ns=Object.create(I)),ge.trackPosition=!1!==ge.opt.position,ge.trackPosition&&(ge.position=ge.line=ge.column=0),ye(ge,"onready")}V.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(X){function q(){}return q.prototype=X,new q}),Object.keys||(Object.keys=function(X){var q=[];for(var ge in X)X.hasOwnProperty(ge)&&q.push(ge);return q}),Y.prototype={end:function(){He(this)},write:function(X){var q=this;if(this.error)throw this.error;if(q.closed)return Qe(q,"Cannot write after close. Assign an onready handler.");if(null===X)return He(q);"object"==typeof X&&(X=X.toString());for(var ge=0,le="";le=Ke(X,ge++),q.c=le,le;)switch(q.trackPosition&&(q.position++,"\n"===le?(q.line++,q.column=0):q.column++),q.state){case te.BEGIN:if(q.state=te.BEGIN_WHITESPACE,"\ufeff"===le)continue;Ue(q,le);continue;case te.BEGIN_WHITESPACE:Ue(q,le);continue;case te.TEXT:if(q.sawRoot&&!q.closedRoot){for(var qe=ge-1;le&&"<"!==le&&"&"!==le;)(le=Ke(X,ge++))&&q.trackPosition&&(q.position++,"\n"===le?(q.line++,q.column=0):q.column++);q.textNode+=X.substring(qe,ge-1)}"<"!==le||q.sawRoot&&q.closedRoot&&!q.strict?(!S(le)&&(!q.sawRoot||q.closedRoot)&&J(q,"Text data outside of root node."),"&"===le?q.state=te.TEXT_ENTITY:q.textNode+=le):(q.state=te.OPEN_WAKA,q.startTagPosition=q.position);continue;case te.SCRIPT:"<"===le?q.state=te.SCRIPT_ENDING:q.script+=le;continue;case te.SCRIPT_ENDING:"/"===le?q.state=te.CLOSE_TAG:(q.script+="<"+le,q.state=te.SCRIPT);continue;case te.OPEN_WAKA:"!"===le?(q.state=te.SGML_DECL,q.sgmlDecl=""):S(le)||(ce(H,le)?(q.state=te.OPEN_TAG,q.tagName=le):"/"===le?(q.state=te.CLOSE_TAG,q.tagName=""):"?"===le?(q.state=te.PROC_INST,q.procInstName=q.procInstBody=""):(J(q,"Unencoded <"),q.startTagPosition+1<q.position&&(le=new Array(q.position-q.startTagPosition).join(" ")+le),q.textNode+="<"+le,q.state=te.TEXT));continue;case te.SGML_DECL:"[CDATA["===(q.sgmlDecl+le).toUpperCase()?(re(q,"onopencdata"),q.state=te.CDATA,q.sgmlDecl="",q.cdata=""):q.sgmlDecl+le==="--"?(q.state=te.COMMENT,q.comment="",q.sgmlDecl=""):"DOCTYPE"===(q.sgmlDecl+le).toUpperCase()?(q.state=te.DOCTYPE,(q.doctype||q.sawRoot)&&J(q,"Inappropriately located doctype declaration"),q.doctype="",q.sgmlDecl=""):">"===le?(re(q,"onsgmldeclaration",q.sgmlDecl),q.sgmlDecl="",q.state=te.TEXT):(G(le)&&(q.state=te.SGML_DECL_QUOTED),q.sgmlDecl+=le);continue;case te.SGML_DECL_QUOTED:le===q.q&&(q.state=te.SGML_DECL,q.q=""),q.sgmlDecl+=le;continue;case te.DOCTYPE:">"===le?(q.state=te.TEXT,re(q,"ondoctype",q.doctype),q.doctype=!0):(q.doctype+=le,"["===le?q.state=te.DOCTYPE_DTD:G(le)&&(q.state=te.DOCTYPE_QUOTED,q.q=le));continue;case te.DOCTYPE_QUOTED:q.doctype+=le,le===q.q&&(q.q="",q.state=te.DOCTYPE);continue;case te.DOCTYPE_DTD:q.doctype+=le,"]"===le?q.state=te.DOCTYPE:G(le)&&(q.state=te.DOCTYPE_DTD_QUOTED,q.q=le);continue;case te.DOCTYPE_DTD_QUOTED:q.doctype+=le,le===q.q&&(q.state=te.DOCTYPE_DTD,q.q="");continue;case te.COMMENT:"-"===le?q.state=te.COMMENT_ENDING:q.comment+=le;continue;case te.COMMENT_ENDING:"-"===le?(q.state=te.COMMENT_ENDED,q.comment=Fe(q.opt,q.comment),q.comment&&re(q,"oncomment",q.comment),q.comment=""):(q.comment+="-"+le,q.state=te.COMMENT);continue;case te.COMMENT_ENDED:">"!==le?(J(q,"Malformed comment"),q.comment+="--"+le,q.state=te.COMMENT):q.state=te.TEXT;continue;case te.CDATA:"]"===le?q.state=te.CDATA_ENDING:q.cdata+=le;continue;case te.CDATA_ENDING:"]"===le?q.state=te.CDATA_ENDING_2:(q.cdata+="]"+le,q.state=te.CDATA);continue;case te.CDATA_ENDING_2:">"===le?(q.cdata&&re(q,"oncdata",q.cdata),re(q,"onclosecdata"),q.cdata="",q.state=te.TEXT):"]"===le?q.cdata+="]":(q.cdata+="]]"+le,q.state=te.CDATA);continue;case te.PROC_INST:"?"===le?q.state=te.PROC_INST_ENDING:S(le)?q.state=te.PROC_INST_BODY:q.procInstName+=le;continue;case te.PROC_INST_BODY:if(!q.procInstBody&&S(le))continue;"?"===le?q.state=te.PROC_INST_ENDING:q.procInstBody+=le;continue;case te.PROC_INST_ENDING:">"===le?(re(q,"onprocessinginstruction",{name:q.procInstName,body:q.procInstBody}),q.procInstName=q.procInstBody="",q.state=te.TEXT):(q.procInstBody+="?"+le,q.state=te.PROC_INST_BODY);continue;case te.OPEN_TAG:ce(M,le)?q.tagName+=le:(ae(q),">"===le?xe(q):"/"===le?q.state=te.OPEN_TAG_SLASH:(S(le)||J(q,"Invalid character in tag name"),q.state=te.ATTRIB));continue;case te.OPEN_TAG_SLASH:">"===le?(xe(q,!0),Ge(q)):(J(q,"Forward-slash in opening tag not followed by >"),q.state=te.ATTRIB);continue;case te.ATTRIB:if(S(le))continue;">"===le?xe(q):"/"===le?q.state=te.OPEN_TAG_SLASH:ce(H,le)?(q.attribName=le,q.attribValue="",q.state=te.ATTRIB_NAME):J(q,"Invalid attribute name");continue;case te.ATTRIB_NAME:"="===le?q.state=te.ATTRIB_VALUE:">"===le?(J(q,"Attribute without value"),q.attribValue=q.attribName,Te(q),xe(q)):S(le)?q.state=te.ATTRIB_NAME_SAW_WHITE:ce(M,le)?q.attribName+=le:J(q,"Invalid attribute name");continue;case te.ATTRIB_NAME_SAW_WHITE:if("="===le)q.state=te.ATTRIB_VALUE;else{if(S(le))continue;J(q,"Attribute without value"),q.tag.attributes[q.attribName]="",q.attribValue="",re(q,"onattribute",{name:q.attribName,value:""}),q.attribName="",">"===le?xe(q):ce(H,le)?(q.attribName=le,q.state=te.ATTRIB_NAME):(J(q,"Invalid attribute name"),q.state=te.ATTRIB)}continue;case te.ATTRIB_VALUE:if(S(le))continue;G(le)?(q.q=le,q.state=te.ATTRIB_VALUE_QUOTED):(J(q,"Unquoted attribute value"),q.state=te.ATTRIB_VALUE_UNQUOTED,q.attribValue=le);continue;case te.ATTRIB_VALUE_QUOTED:if(le!==q.q){"&"===le?q.state=te.ATTRIB_VALUE_ENTITY_Q:q.attribValue+=le;continue}Te(q),q.q="",q.state=te.ATTRIB_VALUE_CLOSED;continue;case te.ATTRIB_VALUE_CLOSED:S(le)?q.state=te.ATTRIB:">"===le?xe(q):"/"===le?q.state=te.OPEN_TAG_SLASH:ce(H,le)?(J(q,"No whitespace between attributes"),q.attribName=le,q.attribValue="",q.state=te.ATTRIB_NAME):J(q,"Invalid attribute name");continue;case te.ATTRIB_VALUE_UNQUOTED:if(!ne(le)){"&"===le?q.state=te.ATTRIB_VALUE_ENTITY_U:q.attribValue+=le;continue}Te(q),">"===le?xe(q):q.state=te.ATTRIB;continue;case te.CLOSE_TAG:if(q.tagName)">"===le?Ge(q):ce(M,le)?q.tagName+=le:q.script?(q.script+="</"+q.tagName,q.tagName="",q.state=te.SCRIPT):(S(le)||J(q,"Invalid tagname in closing tag"),q.state=te.CLOSE_TAG_SAW_WHITE);else{if(S(le))continue;se(H,le)?q.script?(q.script+="</"+le,q.state=te.SCRIPT):J(q,"Invalid tagname in closing tag."):q.tagName=le}continue;case te.CLOSE_TAG_SAW_WHITE:if(S(le))continue;">"===le?Ge(q):J(q,"Invalid characters in closing tag");continue;case te.TEXT_ENTITY:case te.ATTRIB_VALUE_ENTITY_Q:case te.ATTRIB_VALUE_ENTITY_U:var gt,Ae;switch(q.state){case te.TEXT_ENTITY:gt=te.TEXT,Ae="textNode";break;case te.ATTRIB_VALUE_ENTITY_Q:gt=te.ATTRIB_VALUE_QUOTED,Ae="attribValue";break;case te.ATTRIB_VALUE_ENTITY_U:gt=te.ATTRIB_VALUE_UNQUOTED,Ae="attribValue"}";"===le?(q[Ae]+=Se(q),q.entity="",q.state=gt):ce(q.entity.length?Z:P,le)?q.entity+=le:(J(q,"Invalid character in entity name"),q[Ae]+="&"+q.entity+le,q.entity="",q.state=gt);continue;default:throw new Error(q,"Unknown state: "+q.state)}return q.position>=q.bufferCheckPosition&&function(X){for(var q=Math.max(V.MAX_BUFFER_LENGTH,10),ge=0,le=0,qe=F.length;le<qe;le++){var _t=X[F[le]].length;if(_t>q)switch(F[le]){case"textNode":ve(X);break;case"cdata":re(X,"oncdata",X.cdata),X.cdata="";break;case"script":re(X,"onscript",X.script),X.script="";break;default:Qe(X,"Max buffer length exceeded: "+F[le])}ge=Math.max(ge,_t)}X.bufferCheckPosition=V.MAX_BUFFER_LENGTH-ge+X.position}(q),q},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(X){ve(X),""!==X.cdata&&(re(X,"oncdata",X.cdata),X.cdata=""),""!==X.script&&(re(X,"onscript",X.script),X.script="")}(this)}};try{R=Q("stream").Stream}catch(X){R=function(){}}var T=V.EVENTS.filter(function(X){return"error"!==X&&"end"!==X});function v(X,q){if(!(this instanceof v))return new v(X,q);R.apply(this),this._parser=new Y(X,q),this.writable=!0,this.readable=!0;var ge=this;this._parser.onend=function(){ge.emit("end")},this._parser.onerror=function(le){ge.emit("error",le),ge._parser.error=null},this._decoder=null,T.forEach(function(le){Object.defineProperty(ge,"on"+le,{get:function(){return ge._parser["on"+le]},set:function(qe){if(!qe)return ge.removeAllListeners(le),ge._parser["on"+le]=qe,qe;ge.on(le,qe)},enumerable:!0,configurable:!1})})}(v.prototype=Object.create(R.prototype,{constructor:{value:v}})).write=function(X){if("function"==typeof K&&"function"==typeof K.isBuffer&&K.isBuffer(X)){if(!this._decoder){var q=Q("string_decoder").StringDecoder;this._decoder=new q("utf8")}X=this._decoder.write(X)}return this._parser.write(X.toString()),this.emit("data",X),!0},v.prototype.end=function(X){return X&&X.length&&this.write(X),this._parser.end(),!0},v.prototype.on=function(X,q){var ge=this;return!ge._parser["on"+X]&&-1!==T.indexOf(X)&&(ge._parser["on"+X]=function(){var le=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);le.splice(0,0,X),ge.emit.apply(ge,le)}),R.prototype.on.call(ge,X,q)};var A="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",I={xml:A,xmlns:E},H=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function S(X){return" "===X||"\n"===X||"\r"===X||"\t"===X}function G(X){return'"'===X||"'"===X}function ne(X){return">"===X||S(X)}function ce(X,q){return X.test(q)}function se(X,q){return!ce(X,q)}var X,q,ge,te=0;for(var Ie in V.STATE={BEGIN:te++,BEGIN_WHITESPACE:te++,TEXT:te++,TEXT_ENTITY:te++,OPEN_WAKA:te++,SGML_DECL:te++,SGML_DECL_QUOTED:te++,DOCTYPE:te++,DOCTYPE_QUOTED:te++,DOCTYPE_DTD:te++,DOCTYPE_DTD_QUOTED:te++,COMMENT_STARTING:te++,COMMENT:te++,COMMENT_ENDING:te++,COMMENT_ENDED:te++,CDATA:te++,CDATA_ENDING:te++,CDATA_ENDING_2:te++,PROC_INST:te++,PROC_INST_BODY:te++,PROC_INST_ENDING:te++,OPEN_TAG:te++,OPEN_TAG_SLASH:te++,ATTRIB:te++,ATTRIB_NAME:te++,ATTRIB_NAME_SAW_WHITE:te++,ATTRIB_VALUE:te++,ATTRIB_VALUE_QUOTED:te++,ATTRIB_VALUE_CLOSED:te++,ATTRIB_VALUE_UNQUOTED:te++,ATTRIB_VALUE_ENTITY_Q:te++,ATTRIB_VALUE_ENTITY_U:te++,CLOSE_TAG:te++,CLOSE_TAG_SAW_WHITE:te++,SCRIPT:te++,SCRIPT_ENDING:te++},V.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},V.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(V.ENTITIES).forEach(function(X){var q=V.ENTITIES[X],ge="number"==typeof q?String.fromCharCode(q):q;V.ENTITIES[X]=ge}),V.STATE)V.STATE[V.STATE[Ie]]=Ie;function ye(X,q,ge){X[q]&&X[q](ge)}function re(X,q,ge){X.textNode&&ve(X),ye(X,q,ge)}function ve(X){X.textNode=Fe(X.opt,X.textNode),X.textNode&&ye(X,"ontext",X.textNode),X.textNode=""}function Fe(X,q){return X.trim&&(q=q.trim()),X.normalize&&(q=q.replace(/\s+/g," ")),q}function Qe(X,q){return ve(X),X.trackPosition&&(q+="\nLine: "+X.line+"\nColumn: "+X.column+"\nChar: "+X.c),q=new Error(q),X.error=q,ye(X,"onerror",q),X}function He(X){return X.sawRoot&&!X.closedRoot&&J(X,"Unclosed root tag"),X.state!==te.BEGIN&&X.state!==te.BEGIN_WHITESPACE&&X.state!==te.TEXT&&Qe(X,"Unexpected end"),ve(X),X.c="",X.closed=!0,ye(X,"onend"),Y.call(X,X.strict,X.opt),X}function J(X,q){if("object"!=typeof X||!(X instanceof Y))throw new Error("bad call to strictFail");X.strict&&Qe(X,q)}function ae(X){X.strict||(X.tagName=X.tagName[X.looseCase]());var q=X.tags[X.tags.length-1]||X,ge=X.tag={name:X.tagName,attributes:{}};X.opt.xmlns&&(ge.ns=q.ns),X.attribList.length=0,re(X,"onopentagstart",ge)}function _e(X,q){var le=X.indexOf(":")<0?["",X]:X.split(":"),qe=le[0],_t=le[1];return q&&"xmlns"===X&&(qe="xmlns",_t=""),{prefix:qe,local:_t}}function Te(X){if(X.strict||(X.attribName=X.attribName[X.looseCase]()),-1!==X.attribList.indexOf(X.attribName)||X.tag.attributes.hasOwnProperty(X.attribName))X.attribName=X.attribValue="";else{if(X.opt.xmlns){var q=_e(X.attribName,!0),le=q.local;if("xmlns"===q.prefix)if("xml"===le&&X.attribValue!==A)J(X,"xml: prefix must be bound to "+A+"\nActual: "+X.attribValue);else if("xmlns"===le&&X.attribValue!==E)J(X,"xmlns: prefix must be bound to "+E+"\nActual: "+X.attribValue);else{var qe=X.tag,_t=X.tags[X.tags.length-1]||X;qe.ns===_t.ns&&(qe.ns=Object.create(_t.ns)),qe.ns[le]=X.attribValue}X.attribList.push([X.attribName,X.attribValue])}else X.tag.attributes[X.attribName]=X.attribValue,re(X,"onattribute",{name:X.attribName,value:X.attribValue});X.attribName=X.attribValue=""}}function xe(X,q){if(X.opt.xmlns){var ge=X.tag,le=_e(X.tagName);ge.prefix=le.prefix,ge.local=le.local,ge.uri=ge.ns[le.prefix]||"",ge.prefix&&!ge.uri&&(J(X,"Unbound namespace prefix: "+JSON.stringify(X.tagName)),ge.uri=le.prefix),ge.ns&&(X.tags[X.tags.length-1]||X).ns!==ge.ns&&Object.keys(ge.ns).forEach(function(On){re(X,"onopennamespace",{prefix:On,uri:ge.ns[On]})});for(var _t=0,gt=X.attribList.length;_t<gt;_t++){var Ae=X.attribList[_t],U=Ae[0],k=Ae[1],z=_e(U,!0),Le=z.prefix,xt=""===Le?"":ge.ns[Le]||"",Nt={name:U,value:k,prefix:Le,local:z.local,uri:xt};Le&&"xmlns"!==Le&&!xt&&(J(X,"Unbound namespace prefix: "+JSON.stringify(Le)),Nt.uri=Le),X.tag.attributes[U]=Nt,re(X,"onattribute",Nt)}X.attribList.length=0}X.tag.isSelfClosing=!!q,X.sawRoot=!0,X.tags.push(X.tag),re(X,"onopentag",X.tag),q||(X.state=X.noscript||"script"!==X.tagName.toLowerCase()?te.TEXT:te.SCRIPT,X.tag=null,X.tagName=""),X.attribName=X.attribValue="",X.attribList.length=0}function Ge(X){if(!X.tagName)return J(X,"Weird empty close tag."),X.textNode+="</>",void(X.state=te.TEXT);if(X.script){if("script"!==X.tagName)return X.script+="</"+X.tagName+">",X.tagName="",void(X.state=te.SCRIPT);re(X,"onscript",X.script),X.script=""}var q=X.tags.length,ge=X.tagName;X.strict||(ge=ge[X.looseCase]());for(var le=ge;q--&&X.tags[q].name!==le;)J(X,"Unexpected close tag");if(q<0)return J(X,"Unmatched closing tag: "+X.tagName),X.textNode+="</"+X.tagName+">",void(X.state=te.TEXT);X.tagName=ge;for(var _t=X.tags.length;_t-- >q;){var gt=X.tag=X.tags.pop();X.tagName=X.tag.name,re(X,"onclosetag",X.tagName);var Ae={};for(var U in gt.ns)Ae[U]=gt.ns[U];X.opt.xmlns&&gt.ns!==(X.tags[X.tags.length-1]||X).ns&&Object.keys(gt.ns).forEach(function(z){re(X,"onclosenamespace",{prefix:z,uri:gt.ns[z]})})}0===q&&(X.closedRoot=!0),X.tagName=X.attribValue=X.attribName="",X.attribList.length=0,X.state=te.TEXT}function Se(X){var le,q=X.entity,ge=q.toLowerCase(),qe="";return X.ENTITIES[q]?X.ENTITIES[q]:X.ENTITIES[ge]?X.ENTITIES[ge]:("#"===(q=ge).charAt(0)&&("x"===q.charAt(1)?(q=q.slice(2),qe=(le=parseInt(q,16)).toString(16)):(q=q.slice(1),qe=(le=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),isNaN(le)||qe.toLowerCase()!==q?(J(X,"Invalid character entity"),"&"+X.entity+";"):String.fromCodePoint(le))}function Ue(X,q){"<"===q?(X.state=te.OPEN_WAKA,X.startTagPosition=X.position):S(q)||(J(X,"Non-whitespace before first tag."),X.textNode=q,X.state=te.TEXT)}function Ke(X,q){var ge="";return q<X.length&&(ge=X.charAt(q)),ge}te=V.STATE,String.fromCodePoint||(X=String.fromCharCode,q=Math.floor,ge=function(){var le=16384,qe=[],Ae=-1,U=arguments.length;if(!U)return"";for(var k="";++Ae<U;){var z=Number(arguments[Ae]);if(!isFinite(z)||z<0||z>1114111||q(z)!==z)throw RangeError("Invalid code point: "+z);z<=65535?qe.push(z):qe.push(55296+((z-=65536)>>10),z%1024+56320),(Ae+1===U||qe.length>le)&&(k+=X.apply(null,qe),qe.length=0)}return k},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ge,configurable:!0,writable:!0}):String.fromCodePoint=ge)}(void 0===fe?this.sax={}:fe)}).call(this)}).call(this,Q("buffer").Buffer)},{buffer:6,stream:87,string_decoder:5}],86:[function(Q,we,fe){(function(K,V){(function(){!function(F,Y){"use strict";if(!F.setImmediate){var T,L=1,w={},C=!1,R=F.document,Z=Object.getPrototypeOf&&Object.getPrototypeOf(F);Z=Z&&Z.setTimeout?Z:F,"[object process]"==={}.toString.call(F.process)?T=function(S){K.nextTick(function(){x(S)})}:function(){if(F.postMessage&&!F.importScripts){var S=!0,G=F.onmessage;return F.onmessage=function(){S=!1},F.postMessage("","*"),F.onmessage=G,S}}()?(S="setImmediate$"+Math.random()+"$",G=function(ne){ne.source===F&&"string"==typeof ne.data&&0===ne.data.indexOf(S)&&x(+ne.data.slice(S.length))},F.addEventListener?F.addEventListener("message",G,!1):F.attachEvent("onmessage",G),T=function(ne){F.postMessage(S+ne,"*")}):F.MessageChannel?function(){var S=new MessageChannel;S.port1.onmessage=function(G){x(G.data)},T=function(G){S.port2.postMessage(G)}}():R&&"onreadystatechange"in R.createElement("script")?function(){var S=R.documentElement;T=function(G){var ne=R.createElement("script");ne.onreadystatechange=function(){x(G),ne.onreadystatechange=null,S.removeChild(ne),ne=null},S.appendChild(ne)}}():T=function(S){setTimeout(x,0,S)},Z.setImmediate=function(S){"function"!=typeof S&&(S=new Function(""+S));for(var G=new Array(arguments.length-1),ne=0;ne<G.length;ne++)G[ne]=arguments[ne+1];return w[L]={callback:S,args:G},T(L),L++},Z.clearImmediate=v}var S,G;function v(S){delete w[S]}function x(S){if(C)setTimeout(x,0,S);else{var G=w[S];if(G){C=!0;try{!function(S){var G=S.callback,ne=S.args;switch(ne.length){case 0:G();break;case 1:G(ne[0]);break;case 2:G(ne[0],ne[1]);break;case 3:G(ne[0],ne[1],ne[2]);break;default:G.apply(void 0,ne)}}(G)}finally{v(S),C=!1}}}}}("undefined"==typeof self?void 0===V?this:V:self)}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],87:[function(Q,we,fe){we.exports=F;var K=Q("events").EventEmitter;function F(){K.call(this)}Q("inherits")(F,K),F.Readable=Q("readable-stream/lib/_stream_readable.js"),F.Writable=Q("readable-stream/lib/_stream_writable.js"),F.Duplex=Q("readable-stream/lib/_stream_duplex.js"),F.Transform=Q("readable-stream/lib/_stream_transform.js"),F.PassThrough=Q("readable-stream/lib/_stream_passthrough.js"),F.finished=Q("readable-stream/lib/internal/streams/end-of-stream.js"),F.pipeline=Q("readable-stream/lib/internal/streams/pipeline.js"),F.Stream=F,F.prototype.pipe=function(Y,L){var w=this;function C(A){Y.writable&&!1===Y.write(A)&&w.pause&&w.pause()}function R(){w.readable&&w.resume&&w.resume()}w.on("data",C),Y.on("drain",R),!Y._isStdio&&(!L||!1!==L.end)&&(w.on("end",y),w.on("close",v));var T=!1;function y(){T||(T=!0,Y.end())}function v(){T||(T=!0,"function"==typeof Y.destroy&&Y.destroy())}function b(A){if(x(),0===K.listenerCount(this,"error"))throw A}function x(){w.removeListener("data",C),Y.removeListener("drain",R),w.removeListener("end",y),w.removeListener("close",v),w.removeListener("error",b),Y.removeListener("error",b),w.removeListener("end",x),w.removeListener("close",x),Y.removeListener("close",x)}return w.on("error",b),Y.on("error",b),w.on("end",x),w.on("close",x),Y.on("close",x),Y.emit("pipe",w),Y}},{events:8,inherits:10,"readable-stream/lib/_stream_duplex.js":68,"readable-stream/lib/_stream_passthrough.js":69,"readable-stream/lib/_stream_readable.js":70,"readable-stream/lib/_stream_transform.js":71,"readable-stream/lib/_stream_writable.js":72,"readable-stream/lib/internal/streams/end-of-stream.js":76,"readable-stream/lib/internal/streams/pipeline.js":78}],88:[function(Q,we,fe){arguments[4][5][0].apply(fe,arguments)},{dup:5,"safe-buffer":84}],89:[function(Q,we,fe){(function(K,V){(function(){var F=Q("process/browser.js").nextTick,Y=Function.prototype.apply,L=Array.prototype.slice,w={},C=0;function R(T,y){this._id=T,this._clearFn=y}fe.setTimeout=function(){return new R(Y.call(setTimeout,window,arguments),clearTimeout)},fe.setInterval=function(){return new R(Y.call(setInterval,window,arguments),clearInterval)},fe.clearTimeout=fe.clearInterval=function(T){T.close()},R.prototype.unref=R.prototype.ref=function(){},R.prototype.close=function(){this._clearFn.call(window,this._id)},fe.enroll=function(T,y){clearTimeout(T._idleTimeoutId),T._idleTimeout=y},fe.unenroll=function(T){clearTimeout(T._idleTimeoutId),T._idleTimeout=-1},fe._unrefActive=fe.active=function(T){clearTimeout(T._idleTimeoutId);var y=T._idleTimeout;y>=0&&(T._idleTimeoutId=setTimeout(function(){T._onTimeout&&T._onTimeout()},y))},fe.setImmediate="function"==typeof K?K:function(T){var y=C++,v=!(arguments.length<2)&&L.call(arguments,1);return w[y]=!0,F(function(){w[y]&&(v?T.apply(null,v):T.call(null),fe.clearImmediate(y))}),y},fe.clearImmediate="function"==typeof V?V:function(T){delete w[T]}}).call(this)}).call(this,Q("timers").setImmediate,Q("timers").clearImmediate)},{"process/browser.js":44,timers:89}],90:[function(Q,we,fe){(function(K){(function(){function F(Y){try{if(!K.localStorage)return!1}catch(w){return!1}var L=K.localStorage[Y];return null!=L&&"true"===String(L).toLowerCase()}we.exports=function(Y,L){if(F("noDeprecation"))return Y;var w=!1;return function(){if(!w){if(F("throwDeprecation"))throw new Error(L);F("traceDeprecation")?console.trace(L):console.warn(L),w=!0}return Y.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(Q,we,fe){"use strict";we.exports=function(K){K.prototype[Symbol.iterator]=function*(){for(let V=this.head;V;V=V.next)yield V.value}}},{}],92:[function(Q,we,fe){"use strict";function K(w){var C=this;if(C instanceof K||(C=new K),C.tail=null,C.head=null,C.length=0,w&&"function"==typeof w.forEach)w.forEach(function(y){C.push(y)});else if(arguments.length>0)for(var R=0,T=arguments.length;R<T;R++)C.push(arguments[R]);return C}function V(w,C,R){var T=C===w.head?new L(R,null,C,w):new L(R,C,C.next,w);return null===T.next&&(w.tail=T),null===T.prev&&(w.head=T),w.length++,T}function F(w,C){w.tail=new L(C,w.tail,null,w),w.head||(w.head=w.tail),w.length++}function Y(w,C){w.head=new L(C,null,w.head,w),w.tail||(w.tail=w.head),w.length++}function L(w,C,R,T){if(!(this instanceof L))return new L(w,C,R,T);this.list=T,this.value=w,C?(C.next=this,this.prev=C):this.prev=null,R?(R.prev=this,this.next=R):this.next=null}we.exports=K,K.Node=L,K.create=K,K.prototype.removeNode=function(w){if(w.list!==this)throw new Error("removing node which does not belong to this list");var C=w.next,R=w.prev;return C&&(C.prev=R),R&&(R.next=C),w===this.head&&(this.head=C),w===this.tail&&(this.tail=R),w.list.length--,w.next=null,w.prev=null,w.list=null,C},K.prototype.unshiftNode=function(w){if(w!==this.head){w.list&&w.list.removeNode(w);var C=this.head;w.list=this,w.next=C,C&&(C.prev=w),this.head=w,this.tail||(this.tail=w),this.length++}},K.prototype.pushNode=function(w){if(w!==this.tail){w.list&&w.list.removeNode(w);var C=this.tail;w.list=this,w.prev=C,C&&(C.next=w),this.tail=w,this.head||(this.head=w),this.length++}},K.prototype.push=function(){for(var w=0,C=arguments.length;w<C;w++)F(this,arguments[w]);return this.length},K.prototype.unshift=function(){for(var w=0,C=arguments.length;w<C;w++)Y(this,arguments[w]);return this.length},K.prototype.pop=function(){if(this.tail){var w=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,w}},K.prototype.shift=function(){if(this.head){var w=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,w}},K.prototype.forEach=function(w,C){C=C||this;for(var R=this.head,T=0;null!==R;T++)w.call(C,R.value,T,this),R=R.next},K.prototype.forEachReverse=function(w,C){C=C||this;for(var R=this.tail,T=this.length-1;null!==R;T--)w.call(C,R.value,T,this),R=R.prev},K.prototype.get=function(w){for(var C=0,R=this.head;null!==R&&C<w;C++)R=R.next;if(C===w&&null!==R)return R.value},K.prototype.getReverse=function(w){for(var C=0,R=this.tail;null!==R&&C<w;C++)R=R.prev;if(C===w&&null!==R)return R.value},K.prototype.map=function(w,C){C=C||this;for(var R=new K,T=this.head;null!==T;)R.push(w.call(C,T.value,this)),T=T.next;return R},K.prototype.mapReverse=function(w,C){C=C||this;for(var R=new K,T=this.tail;null!==T;)R.push(w.call(C,T.value,this)),T=T.prev;return R},K.prototype.reduce=function(w,C){var R,T=this.head;if(arguments.length>1)R=C;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");T=this.head.next,R=this.head.value}for(var y=0;null!==T;y++)R=w(R,T.value,y),T=T.next;return R},K.prototype.reduceReverse=function(w,C){var R,T=this.tail;if(arguments.length>1)R=C;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");T=this.tail.prev,R=this.tail.value}for(var y=this.length-1;null!==T;y--)R=w(R,T.value,y),T=T.prev;return R},K.prototype.toArray=function(){for(var w=new Array(this.length),C=0,R=this.head;null!==R;C++)w[C]=R.value,R=R.next;return w},K.prototype.toArrayReverse=function(){for(var w=new Array(this.length),C=0,R=this.tail;null!==R;C++)w[C]=R.value,R=R.prev;return w},K.prototype.slice=function(w,C){(C=C||this.length)<0&&(C+=this.length),(w=w||0)<0&&(w+=this.length);var R=new K;if(C<w||C<0)return R;w<0&&(w=0),C>this.length&&(C=this.length);for(var T=0,y=this.head;null!==y&&T<w;T++)y=y.next;for(;null!==y&&T<C;T++,y=y.next)R.push(y.value);return R},K.prototype.sliceReverse=function(w,C){(C=C||this.length)<0&&(C+=this.length),(w=w||0)<0&&(w+=this.length);var R=new K;if(C<w||C<0)return R;w<0&&(w=0),C>this.length&&(C=this.length);for(var T=this.length,y=this.tail;null!==y&&T>C;T--)y=y.prev;for(;null!==y&&T>w;T--,y=y.prev)R.push(y.value);return R},K.prototype.splice=function(w,C,...R){w>this.length&&(w=this.length-1),w<0&&(w=this.length+w);for(var T=0,y=this.head;null!==y&&T<w;T++)y=y.next;var v=[];for(T=0;y&&T<C;T++)v.push(y.value),y=this.removeNode(y);for(null===y&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev),T=0;T<R.length;T++)y=V(this,y,R[T]);return v},K.prototype.reverse=function(){for(var w=this.head,C=this.tail,R=w;null!==R;R=R.prev){var T=R.prev;R.prev=R.next,R.next=T}return this.head=C,this.tail=w,this};try{Q("./iterator.js")(K)}catch(w){}},{"./iterator.js":91}]},{},[1])(1)},2:jt=>{"use strict";jt.exports=Je,jt.exports.default=Je;var Ye=1e20;function Je(Q,we,fe,K,V,F){this.fontSize=Q||24,this.buffer=void 0===we?3:we,this.cutoff=K||.25,this.fontFamily=V||"sans-serif",this.fontWeight=F||"normal",this.radius=fe||8;var Y=this.size=this.fontSize+2*this.buffer,L=Y+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Y,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(Y/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Et(Q,we,fe,K,V,F){for(var Y=0;Y<we;Y++)je(Q,Y,we,fe,K,V,F);for(var L=0;L<fe;L++)je(Q,L*we,1,we,K,V,F)}function je(Q,we,fe,K,V,F,Y){var L,w,C,R;for(F[0]=0,Y[0]=-Ye,Y[1]=Ye,L=0;L<K;L++)V[L]=Q[we+L*fe];for(L=1,w=0,C=0;L<K;L++){do{C=(V[L]-V[R=F[w]]+L*L-R*R)/(L-R)/2}while(C<=Y[w]&&--w>-1);F[++w]=L,Y[w]=C,Y[w+1]=Ye}for(L=0,w=0;L<K;L++){for(;Y[w+1]<L;)w++;Q[we+L*fe]=V[R=F[w]]+(L-R)*(L-R)}}Je.prototype._draw=function(Q,we){var F,Y,L,w,C,R,T,y,v,fe=this.ctx.measureText(Q),K=fe.width,V=2*this.buffer;we&&this.useMetrics?(C=Math.floor(fe.actualBoundingBoxAscent),y=this.buffer+Math.ceil(fe.actualBoundingBoxAscent),R=this.buffer,T=this.buffer,F=(Y=Math.min(this.size,Math.ceil(fe.actualBoundingBoxRight-fe.actualBoundingBoxLeft)))+V,L=(w=Math.min(this.size-R,Math.ceil(fe.actualBoundingBoxAscent+fe.actualBoundingBoxDescent)))+V,this.ctx.textBaseline="alphabetic"):(F=Y=this.size,L=w=this.size,C=19*this.fontSize/24,R=T=0,y=this.middle,this.ctx.textBaseline="middle"),Y&&w&&(this.ctx.clearRect(T,R,Y,w),this.ctx.fillText(Q,this.buffer,y),v=this.ctx.getImageData(T,R,Y,w));var b=new Uint8ClampedArray(F*L);return function(Q,we,fe,K,V,F,Y){F.fill(Ye,0,we*fe),Y.fill(0,0,we*fe);for(var L=(we-K)/2,w=0;w<V;w++)for(var C=0;C<K;C++){var R=(w+L)*we+C+L,T=Q.data[4*(w*K+C)+3]/255;if(1===T)F[R]=0,Y[R]=Ye;else if(0===T)F[R]=Ye,Y[R]=0;else{var y=Math.max(0,.5-T),v=Math.max(0,T-.5);F[R]=y*y,Y[R]=v*v}}}(v,F,L,Y,w,this.gridOuter,this.gridInner),Et(this.gridOuter,F,L,this.f,this.v,this.z),Et(this.gridInner,F,L,this.f,this.v,this.z),function(Q,we,fe,K,V,F,Y){for(var L=0;L<we*fe;L++){var w=Math.sqrt(K[L])-Math.sqrt(V[L]);Q[L]=Math.round(255-255*(w/F+Y))}}(b,F,L,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:b,metrics:{width:Y,height:w,sdfWidth:F,sdfHeight:L,top:C,left:0,advance:K}}},Je.prototype.draw=function(Q){return this._draw(Q,!1).data},Je.prototype.drawWithMetrics=function(Q){return this._draw(Q,!0)}},322:jt=>{jt.exports=function(Je,lt){var ee=lt.length;if(0!==ee){var Et=Je.length;Je.length+=ee;for(var je=0;je<ee;je++)Je[Et+je]=lt[je]}}},517:(jt,Ye)=>{"use strict";var lt=(()=>{return(Et=lt||(lt={})).typeOfFunction="function",Et.boolTrue=!0,lt;var Et})();function ee(Et,je,Q){if(!Q||typeof Q.value!==lt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+je+"> is not a method!");return{configurable:lt.boolTrue,get:function(){var we=Q.value.bind(this);return Object.defineProperty(this,je,{value:we,configurable:lt.boolTrue,writable:lt.boolTrue}),we}}}Ye.ak=ee,Ye.ZP=ee},266:(jt,Ye,Je)=>{jt.exports={ResizeSensor:Je(835),ElementQueries:Je(845)}},845:function(jt,Ye,Je){"use strict";var lt,ee,Et;"undefined"!=typeof window&&window,ee=[Je(835)],void 0!==(Et="function"==typeof(lt=function(je){var Q=function(){var fe,K={},V=[];function F(M){M||(M=document.documentElement);var P=window.getComputedStyle(M,null).fontSize;return parseFloat(P)||16}function L(M,P){var Z=P.split(/\d/),S=Z[Z.length-1];switch(P=parseFloat(P),S){case"px":return P;case"em":return P*F(M);case"rem":return P*F();case"vw":return P*document.documentElement.clientWidth/100;case"vh":return P*document.documentElement.clientHeight/100;case"vmin":case"vmax":var G=document.documentElement.clientWidth/100,ne=document.documentElement.clientHeight/100;return P*(0,Math["vmin"===S?"min":"max"])(G,ne);default:return P}}function w(M,P){this.element=M;var Z,S,G,ne,ce,se,te,Ie,ye=["min-width","min-height","max-width","max-height"];this.call=function(){for(Z in G=function(M){if(!M.getBoundingClientRect)return{width:M.offsetWidth,height:M.offsetHeight};var P=M.getBoundingClientRect();return{width:Math.round(P.width),height:Math.round(P.height)}}(this.element),se={},K[P])!K[P].hasOwnProperty(Z)||(ne=L(this.element,(S=K[P][Z]).value),ce="width"===S.property?G.width:G.height,te="","min"===S.mode&&ce>=ne&&(te+=S.value),"max"===S.mode&&ce<=ne&&(te+=S.value),se[Ie=S.mode+"-"+S.property]||(se[Ie]=""),te&&-1===(" "+se[Ie]+" ").indexOf(" "+te+" ")&&(se[Ie]+=" "+te));for(var re in ye)!ye.hasOwnProperty(re)||(se[ye[re]]?this.element.setAttribute(ye[re],se[ye[re]].substr(1)):this.element.removeAttribute(ye[re]))}}function C(M,P){M.elementQueriesSetupInformation||(M.elementQueriesSetupInformation=new w(M,P)),M.elementQueriesSensor||(M.elementQueriesSensor=new je(M,function(){M.elementQueriesSetupInformation.call()}))}function R(M,P,Z,S){if(void 0===K[M]){K[M]=[];var G=V.length;fe.innerHTML+="\n"+M+" {animation: 0.1s element-queries;}",fe.innerHTML+="\n"+M+" > .resize-sensor {min-width: "+G+"px;}",V.push(M)}K[M].push({mode:P,property:Z,value:S})}function T(M){var P;if(document.querySelectorAll&&(P=M?M.querySelectorAll.bind(M):document.querySelectorAll.bind(document)),!P&&"undefined"!=typeof $$&&(P=$$),!P&&"undefined"!=typeof jQuery&&(P=jQuery),!P)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return P}function v(M){var P=[],Z=[],S=[],G=0,ne=-1,ce=[];for(var se in M.children)if(M.children.hasOwnProperty(se)&&M.children[se].tagName&&"img"===M.children[se].tagName.toLowerCase()){P.push(M.children[se]);var te=M.children[se].getAttribute("min-width")||M.children[se].getAttribute("data-min-width"),Ie=M.children[se].getAttribute("data-src")||M.children[se].getAttribute("url");S.push(Ie),Z.push({minWidth:te}),te?M.children[se].style.display="none":(G=P.length-1,M.children[se].style.display="block")}function re(){var Fe,ve=!1;for(Fe in P)!P.hasOwnProperty(Fe)||Z[Fe].minWidth&&M.offsetWidth>Z[Fe].minWidth&&(ve=Fe);if(ve||(ve=G),ne!==ve)if(ce[ve])P[ne].style.display="none",P[ve].style.display="block",ne=ve;else{var Qe=new Image;Qe.onload=function(){P[ve].src=S[ve],P[ne].style.display="none",P[ve].style.display="block",ce[ve]=!0,ne=ve},Qe.src=S[ve]}else P[ve].src=S[ve]}ne=G,M.resizeSensorInstance=new je(M,re),re()}var x=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,A=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function E(M){var P,Z,S,G;for(M=M.replace(/'/g,'"');null!==(P=x.exec(M));)for(Z=P[1]+P[3],S=P[2];null!==(G=A.exec(S));)R(Z,G[1],G[2],G[3])}function I(M){var P="";if(M)if("string"==typeof M)(-1!==(M=M.toLowerCase()).indexOf("min-width")||-1!==M.indexOf("max-width"))&&E(M);else for(var Z=0,S=M.length;Z<S;Z++)1===M[Z].type?(-1!==(P=M[Z].selectorText||M[Z].cssText).indexOf("min-height")||-1!==P.indexOf("max-height")||-1!==P.indexOf("min-width")||-1!==P.indexOf("max-width"))&&E(P):4===M[Z].type?I(M[Z].cssRules||M[Z].rules):3===M[Z].type&&M[Z].styleSheet.hasOwnProperty("cssRules")&&I(M[Z].styleSheet.cssRules)}var H=!1;this.init=function(){var M="animationstart";void 0!==document.documentElement.style.webkitAnimationName?M="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?M="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(M="oanimationstart"),document.body.addEventListener(M,function(S){var G=S.target,ne=G&&window.getComputedStyle(G,null),ce=ne&&ne.getPropertyValue("animation-name");if(ce&&-1!==ce.indexOf("element-queries")){G.elementQueriesSensor=new je(G,function(){G.elementQueriesSetupInformation&&G.elementQueriesSetupInformation.call()});var Ie=window.getComputedStyle(G.resizeSensor,null).getPropertyValue("min-width");Ie=parseInt(Ie.replace("px","")),C(S.target,V[Ie])}}),H||((fe=document.createElement("style")).type="text/css",fe.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",fe.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(fe),H=!0);for(var P=0,Z=document.styleSheets.length;P<Z;P++)try{document.styleSheets[P].href&&0===document.styleSheets[P].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[P].href),I(document.styleSheets[P].cssRules||document.styleSheets[P].rules||document.styleSheets[P].cssText)}catch(S){}!function(){for(var P=T()("[data-responsive-image],[responsive-image]"),Z=0,S=P.length;Z<S;Z++)v(P[Z])}()},this.findElementQueriesElements=function(M){!function(M){var P=T(M);for(var Z in K)if(K.hasOwnProperty(Z))for(var S=P(Z,M),G=0,ne=S.length;G<ne;G++)C(S[G],Z)}(M)},this.update=function(){this.init()}};Q.update=function(){Q.instance.update()},Q.detach=function(fe){fe.elementQueriesSetupInformation?(fe.elementQueriesSensor.detach(),delete fe.elementQueriesSetupInformation,delete fe.elementQueriesSensor):fe.resizeSensorInstance&&(fe.resizeSensorInstance.detach(),delete fe.resizeSensorInstance)},Q.init=function(){Q.instance||(Q.instance=new Q),Q.instance.init()};return Q.findElementQueriesElements=function(fe){Q.instance.findElementQueriesElements(fe)},Q.listen=function(){!function(fe){if(document.addEventListener)document.addEventListener("DOMContentLoaded",fe,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var K=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(fe(),clearInterval(K))},10);else window.onload=fe}(Q.init)},Q})?lt.apply(Ye,ee):lt)&&(jt.exports=Et)},835:function(jt,Ye,Je){"use strict";var lt,ee;"undefined"!=typeof window&&window,void 0!==(ee="function"==typeof(lt=function(){if("undefined"==typeof window)return null;var Et="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),je=Et.requestAnimationFrame||Et.mozRequestAnimationFrame||Et.webkitRequestAnimationFrame||function(Y){return Et.setTimeout(Y,20)},Q=Et.cancelAnimationFrame||Et.mozCancelAnimationFrame||Et.webkitCancelAnimationFrame||function(Y){Et.clearTimeout(Y)};function we(Y,L){var w=Object.prototype.toString.call(Y),C="[object Array]"===w||"[object NodeList]"===w||"[object HTMLCollection]"===w||"[object Object]"===w||"undefined"!=typeof jQuery&&Y instanceof jQuery||"undefined"!=typeof Elements&&Y instanceof Elements,R=0,T=Y.length;if(C)for(;R<T;R++)L(Y[R]);else L(Y)}function fe(Y){if(!Y.getBoundingClientRect)return{width:Y.offsetWidth,height:Y.offsetHeight};var L=Y.getBoundingClientRect();return{width:Math.round(L.width),height:Math.round(L.height)}}function K(Y,L){Object.keys(L).forEach(function(w){Y.style[w]=L[w]})}var V=function(Y,L){var w=0;function C(){var y,v,T=[];this.add=function(b){T.push(b)},this.call=function(b){for(y=0,v=T.length;y<v;y++)T[y].call(this,b)},this.remove=function(b){var x=[];for(y=0,v=T.length;y<v;y++)T[y]!==b&&x.push(T[y]);T=x},this.length=function(){return T.length}}function R(T,y){if(T){if(T.resizedAttached)return void T.resizedAttached.add(y);T.resizedAttached=new C,T.resizedAttached.add(y),T.resizeSensor=document.createElement("div"),T.resizeSensor.dir="ltr",T.resizeSensor.className="resize-sensor";var v={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},b={position:"absolute",left:"0px",top:"0px",transition:"0s"};K(T.resizeSensor,v);var x=document.createElement("div");x.className="resize-sensor-expand",K(x,v);var A=document.createElement("div");K(A,b),x.appendChild(A);var E=document.createElement("div");E.className="resize-sensor-shrink",K(E,v);var I=document.createElement("div");K(I,b),K(I,{width:"200%",height:"200%"}),E.appendChild(I),T.resizeSensor.appendChild(x),T.resizeSensor.appendChild(E),T.appendChild(T.resizeSensor);var H=window.getComputedStyle(T),M=H?H.getPropertyValue("position"):null;"absolute"!==M&&"relative"!==M&&"fixed"!==M&&"sticky"!==M&&(T.style.position="relative");var P=!1,Z=0,S=fe(T),G=0,ne=0,ce=!0;w=0;var te=function(){if(ce){if(0===T.offsetWidth&&0===T.offsetHeight)return void(w||(w=je(function(){w=0,te()})));ce=!1}var ve,Fe;Fe=T.offsetHeight,A.style.width=(ve=T.offsetWidth)+10+"px",A.style.height=Fe+10+"px",x.scrollLeft=ve+10,x.scrollTop=Fe+10,E.scrollLeft=ve+10,E.scrollTop=Fe+10};T.resizeSensor.resetSensor=te;var Ie=function(){Z=0,P&&(G=S.width,ne=S.height,T.resizedAttached&&T.resizedAttached.call(S))},ye=function(){S=fe(T),(P=S.width!==G||S.height!==ne)&&!Z&&(Z=je(Ie)),te()},re=function(ve,Fe,Qe){ve.attachEvent?ve.attachEvent("on"+Fe,Qe):ve.addEventListener(Fe,Qe)};re(x,"scroll",ye),re(E,"scroll",ye),w=je(function(){w=0,te()})}}we(Y,function(T){R(T,L)}),this.detach=function(T){w||(Q(w),w=0),V.detach(Y,T)},this.reset=function(){Y.resizeSensor.resetSensor()}};if(V.reset=function(Y){we(Y,function(L){L.resizeSensor.resetSensor()})},V.detach=function(Y,L){we(Y,function(w){!w||w.resizedAttached&&"function"==typeof L&&(w.resizedAttached.remove(L),w.resizedAttached.length())||w.resizeSensor&&(w.contains(w.resizeSensor)&&w.removeChild(w.resizeSensor),delete w.resizeSensor,delete w.resizedAttached)})},"undefined"!=typeof MutationObserver){var F=new MutationObserver(function(Y){for(var L in Y)if(Y.hasOwnProperty(L))for(var w=Y[L].addedNodes,C=0;C<w.length;C++)w[C].resizeSensor&&V.reset(w[C])});document.addEventListener("DOMContentLoaded",function(Y){F.observe(document.body,{childList:!0,subtree:!0})})}return V})?lt.call(Ye,Je,Ye,jt):lt)&&(jt.exports=ee)},445:(jt,Ye,Je)=>{var lt=Je(910),ee=Je(369),Et=Je(322);function je(Y,L,w){if(!lt(Y))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!Y.hasNode(L))throw new Error('graphology-shortest-path: the "'+L+'" source node does not exist in the given graph.');if(!Y.hasNode(w))throw new Error('graphology-shortest-path: the "'+w+'" target node does not exist in the given graph.');if((L=""+L)==(w=""+w))return[L];var C=Y.inboundNeighbors.bind(Y),R=Y.outboundNeighbors.bind(Y),T={},y={};T[L]=null,y[w]=null;var x,A,E,I,H,M,P,Z,v=[L],b=[w],S=!1;e:for(;v.length&&b.length;)if(v.length<=b.length){for(x=v,v=[],H=0,P=x.length;H<P;H++)for(M=0,Z=(E=R(A=x[H])).length;M<Z;M++)if((I=E[M])in T||(v.push(I),T[I]=A),I in y){S=!0;break e}}else for(x=b,b=[],H=0,P=x.length;H<P;H++)for(A=x[H],E=C(A),M=0,Z=E.length;M<Z;M++)if(I=E[M],I in y||(b.push(I),y[I]=A),I in T){S=!0;break e}if(!S)return null;for(var G=[];I;)G.unshift(I),I=T[I];for(I=y[G[G.length-1]];I;)G.push(I),I=y[I];return G.length?G:null}function Q(Y,L){if(!lt(Y))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!Y.hasNode(L))throw new Error('graphology-shortest-path: the "'+L+'" source node does not exist in the given graph.');var R,T,y,v,b,x,w={},C={};for(w[L=""+L]=!0,C[L]=[L];Object.keys(w).length;)for(y in R=w,w={},R)for(b=0,x=(T=Y.outboundNeighbors(y)).length;b<x;b++)C[v=T[b]]||(C[v]=C[y].concat(v),w[v]=!0);return C}function we(Y,L,w){if(!lt(L))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!L.hasNode(w))throw new Error('graphology-shortest-path: the "'+w+'" source node does not exist in the given graph.');w=""+w;var C=new Set,R={},T=0;R[w]=0;for(var v,b,x,y=[w];0!==y.length;){var A=[];for(v=0,b=y.length;v<b;v++)!C.has(x=y[v])&&(C.add(x),Et(A,L[Y](x)),R[x]=T);T++,y=A}return R}var fe=we.bind(null,"outboundNeighbors"),K=we.bind(null,"neighbors");function V(Y,L,w){return arguments.length<3?Q(Y,L):je(Y,L,w)}V.bidirectional=je,V.singleSource=Q,V.singleSourceLength=fe,V.undirectedSingleSourceLength=K,V.brandes=function(Y,L){L=""+L;var y,v,b,x,A,E,I,H,M,w=[],C={},R={},T=Y.nodes();for(E=0,H=T.length;E<H;E++)C[x=T[E]]=[],R[x]=0;var P={};R[L]=1,P[L]=0;for(var Z=ee.of(L);Z.size;)for(x=Z.dequeue(),w.push(x),y=P[x],v=R[x],I=0,M=(b=Y.outboundNeighbors(x)).length;I<M;I++)(A=b[I])in P||(Z.enqueue(A),P[A]=y+1),P[A]===y+1&&(R[A]+=v,C[A].push(x));return[w,C,R]},jt.exports=V},910:jt=>{jt.exports=function(Je){return null!==Je&&"object"==typeof Je&&"function"==typeof Je.addUndirectedEdgeWithKey&&"function"==typeof Je.dropNode&&"boolean"==typeof Je.multi}},698:function(jt){jt.exports=function(){"use strict";function Ye(oe){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(me){return typeof me}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(oe)}function Je(oe,me){oe.prototype=Object.create(me.prototype),oe.prototype.constructor=oe,ee(oe,me)}function lt(oe){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)})(oe)}function ee(oe,me){return(ee=Object.setPrototypeOf||function(ue,N){return ue.__proto__=N,ue})(oe,me)}function Et(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}function je(oe,me,ue){return(je=Et()?Reflect.construct:function(N,j,ie){var Me=[null];Me.push.apply(Me,j);var ze=new(Function.bind.apply(N,Me));return ie&&ee(ze,ie.prototype),ze}).apply(null,arguments)}function Q(oe){var me="function"==typeof Map?new Map:void 0;return(Q=function(ue){if(null===ue||-1===Function.toString.call(ue).indexOf("[native code]"))return ue;if("function"!=typeof ue)throw new TypeError("Super expression must either be null or a function");if(void 0!==me){if(me.has(ue))return me.get(ue);me.set(ue,j)}function j(){return je(ue,arguments,lt(this).constructor)}return j.prototype=Object.create(ue.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),ee(j,ue)})(oe)}function we(oe){if(void 0===oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}var fe=function(){for(var oe=arguments[0],me=1,ue=arguments.length;me<ue;me++)if(arguments[me])for(var N in arguments[me])oe[N]=arguments[me][N];return oe};function K(oe,me,ue,N){var j=oe._nodes.get(me),ie=null;return j?ie="mixed"===N?j.out&&j.out[ue]||j.undirected&&j.undirected[ue]:"directed"===N?j.out&&j.out[ue]:j.undirected&&j.undirected[ue]:ie}function V(oe){return null!==oe&&"object"===Ye(oe)&&"function"==typeof oe.addUndirectedEdgeWithKey&&"function"==typeof oe.dropNode}function F(oe){return"object"===Ye(oe)&&null!==oe&&oe.constructor===Object}function Y(oe){var me;for(me in oe)return!1;return!0}function L(oe,me,ue){Object.defineProperty(oe,me,{enumerable:!1,configurable:!1,writable:!0,value:ue})}function w(oe,me,ue){var N={enumerable:!0,configurable:!0};"function"==typeof ue?N.get=ue:(N.value=ue,N.writable=!1),Object.defineProperty(oe,me,N)}function C(oe){return!(!F(oe)||oe.attributes&&!Array.isArray(oe.attributes))}"function"==typeof Object.assign&&(fe=Object.assign);var R,T={exports:{}},y="object"==typeof Reflect?Reflect:null,v=y&&"function"==typeof y.apply?y.apply:function(oe,me,ue){return Function.prototype.apply.call(oe,me,ue)};R=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(oe){return Object.getOwnPropertyNames(oe).concat(Object.getOwnPropertySymbols(oe))}:function(oe){return Object.getOwnPropertyNames(oe)};var b=Number.isNaN||function(oe){return oe!=oe};function x(){x.init.call(this)}T.exports=x,T.exports.once=function(oe,me){return new Promise(function(ue,N){function j(Me){oe.removeListener(me,ie),N(Me)}function ie(){"function"==typeof oe.removeListener&&oe.removeListener("error",j),ue([].slice.call(arguments))}var Me;ne(oe,me,ie,{once:!0}),"error"!==me&&("function"==typeof(Me=oe).on&&ne(Me,"error",j,{once:!0}))})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var A=10;function E(oe){if("function"!=typeof oe)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof oe)}function I(oe){return void 0===oe._maxListeners?x.defaultMaxListeners:oe._maxListeners}function H(oe,me,ue,N){var j,ie,Me;if(E(ue),void 0===(ie=oe._events)?(ie=oe._events=Object.create(null),oe._eventsCount=0):(void 0!==ie.newListener&&(oe.emit("newListener",me,ue.listener?ue.listener:ue),ie=oe._events),Me=ie[me]),void 0===Me)Me=ie[me]=ue,++oe._eventsCount;else if("function"==typeof Me?Me=ie[me]=N?[ue,Me]:[Me,ue]:N?Me.unshift(ue):Me.push(ue),(j=I(oe))>0&&Me.length>j&&!Me.warned){Me.warned=!0;var st=new Error("Possible EventEmitter memory leak detected. "+Me.length+" "+String(me)+" listeners added. Use emitter.setMaxListeners() to increase limit");st.name="MaxListenersExceededWarning",st.emitter=oe,st.type=me,st.count=Me.length,console&&console.warn&&console.warn(st)}return oe}function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(oe,me,ue){var N={fired:!1,wrapFn:void 0,target:oe,type:me,listener:ue},j=M.bind(N);return j.listener=ue,N.wrapFn=j,j}function Z(oe,me,ue){var N=oe._events;if(void 0===N)return[];var j=N[me];return void 0===j?[]:"function"==typeof j?ue?[j.listener||j]:[j]:ue?function(ie){for(var Me=new Array(ie.length),ze=0;ze<Me.length;++ze)Me[ze]=ie[ze].listener||ie[ze];return Me}(j):G(j,j.length)}function S(oe){var me=this._events;if(void 0!==me){var ue=me[oe];if("function"==typeof ue)return 1;if(void 0!==ue)return ue.length}return 0}function G(oe,me){for(var ue=new Array(me),N=0;N<me;++N)ue[N]=oe[N];return ue}function ne(oe,me,ue,N){if("function"==typeof oe.on)N.once?oe.once(me,ue):oe.on(me,ue);else{if("function"!=typeof oe.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof oe);oe.addEventListener(me,function j(ie){N.once&&oe.removeEventListener(me,j),ue(ie)})}}function ce(oe){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:oe}),this.done=!1}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(oe){if("number"!=typeof oe||oe<0||b(oe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+oe+".");A=oe}}),x.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(oe){if("number"!=typeof oe||oe<0||b(oe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+oe+".");return this._maxListeners=oe,this},x.prototype.getMaxListeners=function(){return I(this)},x.prototype.emit=function(oe){for(var me=[],ue=1;ue<arguments.length;ue++)me.push(arguments[ue]);var N="error"===oe,j=this._events;if(void 0!==j)N=N&&void 0===j.error;else if(!N)return!1;if(N){var ie;if(me.length>0&&(ie=me[0]),ie instanceof Error)throw ie;var Me=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw Me.context=ie,Me}var ze=j[oe];if(void 0===ze)return!1;if("function"==typeof ze)v(ze,this,me);else{var st=ze.length,Ot=G(ze,st);for(ue=0;ue<st;++ue)v(Ot[ue],this,me)}return!0},x.prototype.on=x.prototype.addListener=function(oe,me){return H(this,oe,me,!1)},x.prototype.prependListener=function(oe,me){return H(this,oe,me,!0)},x.prototype.once=function(oe,me){return E(me),this.on(oe,P(this,oe,me)),this},x.prototype.prependOnceListener=function(oe,me){return E(me),this.prependListener(oe,P(this,oe,me)),this},x.prototype.off=x.prototype.removeListener=function(oe,me){var ue,N,j,ie,Me;if(E(me),void 0===(N=this._events))return this;if(void 0===(ue=N[oe]))return this;if(ue===me||ue.listener===me)0==--this._eventsCount?this._events=Object.create(null):(delete N[oe],N.removeListener&&this.emit("removeListener",oe,ue.listener||me));else if("function"!=typeof ue){for(j=-1,ie=ue.length-1;ie>=0;ie--)if(ue[ie]===me||ue[ie].listener===me){Me=ue[ie].listener,j=ie;break}if(j<0)return this;0===j?ue.shift():function(ze,st){for(;st+1<ze.length;st++)ze[st]=ze[st+1];ze.pop()}(ue,j),1===ue.length&&(N[oe]=ue[0]),void 0!==N.removeListener&&this.emit("removeListener",oe,Me||me)}return this},x.prototype.removeAllListeners=function(oe){var me,ue,N;if(void 0===(ue=this._events))return this;if(void 0===ue.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ue[oe]&&(0==--this._eventsCount?this._events=Object.create(null):delete ue[oe]),this;if(0===arguments.length){var j,ie=Object.keys(ue);for(N=0;N<ie.length;++N)"removeListener"!==(j=ie[N])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(me=ue[oe]))this.removeListener(oe,me);else if(void 0!==me)for(N=me.length-1;N>=0;N--)this.removeListener(oe,me[N]);return this},x.prototype.listeners=function(oe){return Z(this,oe,!0)},x.prototype.rawListeners=function(oe){return Z(this,oe,!1)},x.listenerCount=function(oe,me){return"function"==typeof oe.listenerCount?oe.listenerCount(me):S.call(oe,me)},x.prototype.listenerCount=S,x.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]},ce.prototype.next=function(){if(this.done)return{done:!0};var oe=this._next();return oe.done&&(this.done=!0),oe},"undefined"!=typeof Symbol&&(ce.prototype[Symbol.iterator]=function(){return this}),ce.of=function(){var oe=arguments,me=oe.length,ue=0;return new ce(function(){return ue>=me?{done:!0}:{done:!1,value:oe[ue++]}})},ce.empty=function(){var oe=new ce(null);return oe.done=!0,oe},ce.is=function(oe){return oe instanceof ce||"object"==typeof oe&&null!==oe&&"function"==typeof oe.next};var se=ce,te=function(oe,me){for(var ue,N=arguments.length>1?me:1/0,j=N!==1/0?new Array(N):[],ie=0;;){if(ie===N)return j;if((ue=oe.next()).done)return ie!==me?j.slice(0,ie):j;j[ie++]=ue.value}},Ie=function(oe){function me(ue,N){var j;return(j=oe.call(this)||this).name="GraphError",j.message=ue||"",j.data=N||{},j}return Je(me,oe),me}(Q(Error)),ye=function(oe){function me(ue,N){var j;return(j=oe.call(this,ue,N)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(we(j),me.prototype.constructor),j}return Je(me,oe),me}(Ie),re=function(oe){function me(ue,N){var j;return(j=oe.call(this,ue,N)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(we(j),me.prototype.constructor),j}return Je(me,oe),me}(Ie),ve=function(oe){function me(ue,N){var j;return(j=oe.call(this,ue,N)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(we(j),me.prototype.constructor),j}return Je(me,oe),me}(Ie);function Fe(oe,me){this.key=oe,this.attributes=me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Qe(oe,me){this.key=oe,this.attributes=me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function He(oe,me){this.key=oe,this.attributes=me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function J(oe,me,ue,N,j,ie){this.key=me,this.attributes=ie,this.undirected=oe,this.source=N,this.target=j,this.generatedKey=ue}function ae(oe,me,ue,N,j,ie,Me){var ze,st,Ot="out",et="in";if(me&&(Ot=et="undirected"),oe.multi){if(void 0===(st=(ze=ie[Ot])[j])&&(st=new Set,ze[j]=st),st.add(ue),N===j&&me)return;void 0===(ze=Me[et])[N]&&(ze[N]=st)}else{if(ie[Ot][j]=ue,N===j&&me)return;Me[et][N]=ue}}function _e(oe,me,ue){var N=oe.multi,j=ue.source,ie=ue.target,Me=j.key,ze=ie.key,st=j[me?"undirected":"out"],Ot=me?"undirected":"in";if(ze in st)if(N){var et=st[ze];1===et.size?(delete st[ze],delete ie[Ot][Me]):et.delete(ue)}else delete st[ze];N||delete ie[Ot][Me]}Qe.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},He.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var Te=[{name:function(oe){return"get".concat(oe,"Attribute")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Me=""+N,ze=""+j;if(j=arguments[2],!(ie=K(this,Me,ze,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(Me,'" - "').concat(ze,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==ue&&ie.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return ie.attributes[j]}}},{name:function(oe){return"get".concat(oe,"Attributes")},attacher:function(oe,me,ue){oe.prototype[me]=function(N){var j;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ie=""+N,Me=""+arguments[1];if(!(j=K(this,ie,Me,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(ie,'" - "').concat(Me,'").'))}else if(!(j=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==ue&&j.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return j.attributes}}},{name:function(oe){return"has".concat(oe,"Attribute")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Me=""+N,ze=""+j;if(j=arguments[2],!(ie=K(this,Me,ze,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(Me,'" - "').concat(ze,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==ue&&ie.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return ie.attributes.hasOwnProperty(j)}}},{name:function(oe){return"set".concat(oe,"Attribute")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j,ie){var Me;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ze=""+N,st=""+j;if(j=arguments[2],ie=arguments[3],!(Me=K(this,ze,st,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(ze,'" - "').concat(st,'").'))}else if(!(Me=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==ue&&Me.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return Me.attributes[j]=ie,this.emit("edgeAttributesUpdated",{key:Me.key,type:"set",attributes:Me.attributes,name:j}),this}}},{name:function(oe){return"update".concat(oe,"Attribute")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j,ie){var Me;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ze=""+N,st=""+j;if(j=arguments[2],ie=arguments[3],!(Me=K(this,ze,st,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(ze,'" - "').concat(st,'").'))}else if(!(Me=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("function"!=typeof ie)throw new ye("Graph.".concat(me,": updater should be a function."));if("mixed"!==ue&&Me.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return Me.attributes[j]=ie(Me.attributes[j]),this.emit("edgeAttributesUpdated",{key:Me.key,type:"set",attributes:Me.attributes,name:j}),this}}},{name:function(oe){return"remove".concat(oe,"Attribute")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Me=""+N,ze=""+j;if(j=arguments[2],!(ie=K(this,Me,ze,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(Me,'" - "').concat(ze,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==ue&&ie.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return delete ie.attributes[j],this.emit("edgeAttributesUpdated",{key:ie.key,type:"remove",attributes:ie.attributes,name:j}),this}}},{name:function(oe){return"replace".concat(oe,"Attributes")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Me=""+N,ze=""+j;if(j=arguments[2],!(ie=K(this,Me,ze,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(Me,'" - "').concat(ze,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if(!F(j))throw new ye("Graph.".concat(me,": provided attributes are not a plain object."));if("mixed"!==ue&&ie.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return ie.attributes=j,this.emit("edgeAttributesUpdated",{key:ie.key,type:"replace",attributes:ie.attributes}),this}}},{name:function(oe){return"merge".concat(oe,"Attributes")},attacher:function(oe,me,ue){oe.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Me=""+N,ze=""+j;if(j=arguments[2],!(ie=K(this,Me,ze,ue)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(Me,'" - "').concat(ze,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if(!F(j))throw new ye("Graph.".concat(me,": provided attributes are not a plain object."));if("mixed"!==ue&&ie.undirected!==("undirected"===ue))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(ue," edge in the graph."));return fe(ie.attributes,j),this.emit("edgeAttributesUpdated",{key:ie.key,type:"merge",attributes:ie.attributes,data:j}),this}}}],xe=se,Ge=function(){var oe,me=arguments,ue=-1;return new xe(function N(){if(!oe){if(++ue>=me.length)return{done:!0};oe=me[ue]}var j=oe.next();return j.done?(oe=null,N()):j})},Se=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ue(oe,me){for(var ue in me)oe.push(me[ue].key)}function Ke(oe,me){for(var ue in me)me[ue].forEach(function(N){return oe.push(N.key)})}function Be(oe,me,ue){for(var N in oe)if(N!==ue){var j=oe[N];me(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey)}}function X(oe,me,ue){for(var N in oe)N!==ue&&oe[N].forEach(function(j){return me(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey)})}function q(oe,me,ue){for(var N in oe)if(N!==ue){var j=oe[N];if(me(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey))return!0}return!1}function ge(oe,me,ue){var N,j,ie,Me,ze;for(var st in oe)if(st!==ue)for(N=oe[st].values();!0!==(j=N.next()).done;)if(Me=(ie=j.value).source,me(ie.key,ie.attributes,Me.key,(ze=ie.target).key,Me.attributes,ze.attributes,ie.undirected,ie.generatedKey))return!0;return!1}function le(oe,me){var ue=Object.keys(oe),N=ue.length,j=null,ie=0;return new se(function Me(){var ze;if(j){var st=j.next();if(st.done)return j=null,ie++,Me();ze=st.value}else{if(ie>=N)return{done:!0};var Ot=ue[ie];if(Ot===me)return ie++,Me();if((ze=oe[Ot])instanceof Set)return j=ze.values(),Me();ie++}return{done:!1,value:[ze.key,ze.attributes,ze.source.key,ze.target.key,ze.source.attributes,ze.target.attributes]}})}function qe(oe,me,ue){var N=me[ue];N&&oe.push(N.key)}function _t(oe,me,ue){var N=me[ue];N&&N.forEach(function(j){return oe.push(j.key)})}function gt(oe,me,ue){var N=oe[me];if(N){var j=N.source,ie=N.target;ue(N.key,N.attributes,j.key,ie.key,j.attributes,ie.attributes,N.undirected,N.generatedKey)}}function Ae(oe,me,ue){var N=oe[me];N&&N.forEach(function(j){return ue(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey)})}function U(oe,me,ue){var N=oe[me];if(N){var j=N.source,ie=N.target;return ue(N.key,N.attributes,j.key,ie.key,j.attributes,ie.attributes,N.undirected,N.generatedKey)}}function k(oe,me,ue){var N=oe[me];if(N){for(var j,ie,Me=N.values();!0!==(j=Me.next()).done;)if(ue((ie=j.value).key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes,ie.undirected,ie.generatedKey))return!0;return!1}}function z(oe,me){var ue=oe[me];if(ue instanceof Set){var N=ue.values();return new se(function(){var j=N.next();if(j.done)return j;var ie=j.value;return{done:!1,value:[ie.key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes]}})}return se.of([ue.key,ue.attributes,ue.source.key,ue.target.key,ue.source.attributes,ue.target.attributes])}function Le(oe,me){if(0===oe.size)return[];if("mixed"===me||me===oe.type)return"function"==typeof Array.from?Array.from(oe._edges.keys()):te(oe._edges.keys(),oe._edges.size);for(var ue,N,ie=new Array("undirected"===me?oe.undirectedSize:oe.directedSize),Me="undirected"===me,ze=oe._edges.values(),st=0;!0!==(ue=ze.next()).done;)(N=ue.value).undirected===Me&&(ie[st++]=N.key);return ie}function nt(oe,me,ue){if(0!==oe.size)for(var N,j,ie="mixed"!==me&&me!==oe.type,Me="undirected"===me,ze=oe._edges.values();!0!==(N=ze.next()).done;)if(j=N.value,!ie||j.undirected===Me){var Wt=j.source,Ct=j.target;ue(j.key,j.attributes,Wt.key,Ct.key,Wt.attributes,Ct.attributes,j.undirected,j.generatedKey)}}function xt(oe,me,ue){if(0!==oe.size)for(var N,j,ie="mixed"!==me&&me!==oe.type,Me="undirected"===me,ze=oe._edges.values();!0!==(N=ze.next()).done;)if(j=N.value,!ie||j.undirected===Me){var Wt=j.source,Ct=j.target;if(ue(j.key,j.attributes,Wt.key,Ct.key,Wt.attributes,Ct.attributes,j.undirected,j.generatedKey))break}}function Nt(oe,me){if(0===oe.size)return se.empty();var ue="mixed"!==me&&me!==oe.type,N="undirected"===me,j=oe._edges.values();return new se(function(){for(var ie,Me;;){if((ie=j.next()).done)return ie;if(Me=ie.value,!ue||Me.undirected===N)break}return{value:[Me.key,Me.attributes,Me.source.key,Me.target.key,Me.source.attributes,Me.target.attributes],done:!1}})}function On(oe,me,ue,N){var j=[],ie=oe?Ke:Ue;return"undirected"!==me&&("out"!==ue&&ie(j,N.in),"in"!==ue&&ie(j,N.out),!ue&&N.directedSelfLoops>0&&j.splice(j.lastIndexOf(N.key),1)),"directed"!==me&&ie(j,N.undirected),j}function kn(oe,me,ue,N,j){var ie=oe?X:Be;"undirected"!==me&&("out"!==ue&&ie(N.in,j),"in"!==ue&&ie(N.out,j,ue?null:N.key)),"directed"!==me&&ie(N.undirected,j)}function Yn(oe,me,ue,N,j){var ie=oe?ge:q;"undirected"!==me&&("out"!==ue&&ie(N.in,j)||"in"!==ue&&ie(N.out,j,ue?null:N.key))||"directed"===me||ie(N.undirected,j)}function Ti(oe,me,ue){var N=se.empty();return"undirected"!==oe&&("out"!==me&&void 0!==ue.in&&(N=Ge(N,le(ue.in))),"in"!==me&&void 0!==ue.out&&(N=Ge(N,le(ue.out,me?null:ue.key)))),"directed"!==oe&&void 0!==ue.undirected&&(N=Ge(N,le(ue.undirected))),N}function wi(oe,me,ue,N,j){var ie=me?_t:qe,Me=[];return"undirected"!==oe&&(void 0!==N.in&&"out"!==ue&&ie(Me,N.in,j),void 0!==N.out&&"in"!==ue&&ie(Me,N.out,j),!ue&&N.directedSelfLoops>0&&Me.splice(Me.lastIndexOf(N.key),1)),"directed"!==oe&&void 0!==N.undirected&&ie(Me,N.undirected,j),Me}function Xr(oe,me,ue,N,j,ie){var Me=me?Ae:gt;"undirected"!==oe&&(void 0!==N.in&&"out"!==ue&&Me(N.in,j,ie),N.key!==j&&void 0!==N.out&&"in"!==ue&&Me(N.out,j,ie)),"directed"!==oe&&void 0!==N.undirected&&Me(N.undirected,j,ie)}function Ls(oe,me,ue,N,j,ie){var Me=me?k:U;"undirected"!==oe&&(void 0!==N.in&&"out"!==ue&&Me(N.in,j,ie)||N.key!==j&&void 0!==N.out&&"in"!==ue&&Me(N.out,j,ie,ue?null:N.key))||"directed"===oe||void 0===N.undirected||Me(N.undirected,j,ie)}function gs(oe,me,ue,N){var j=se.empty();return"undirected"!==oe&&(void 0!==ue.in&&"out"!==me&&N in ue.in&&(j=Ge(j,z(ue.in,N))),void 0!==ue.out&&"in"!==me&&N in ue.out&&(j=Ge(j,z(ue.out,N)))),"directed"!==oe&&void 0!==ue.undirected&&N in ue.undirected&&(j=Ge(j,z(ue.undirected,N))),j}var Bs=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Qr(oe,me){if(void 0!==me)for(var ue in me)oe.add(ue)}function el(oe,me,ue){if("mixed"!==oe){if("undirected"===oe)return Object.keys(ue.undirected);if("string"==typeof me)return Object.keys(ue[me])}var N=new Set;return"undirected"!==oe&&("out"!==me&&Qr(N,ue.in),"in"!==me&&Qr(N,ue.out)),"directed"!==oe&&Qr(N,ue.undirected),te(N.values(),N.size)}function kl(oe,me,ue){for(var N in me){var j=me[N];j instanceof Set&&(j=j.values().next().value);var ie=j.source,ze=ie===oe?j.target:ie;ue(ze.key,ze.attributes)}}function Sa(oe,me,ue,N){for(var j in ue){var ie=ue[j];ie instanceof Set&&(ie=ie.values().next().value);var Me=ie.source,st=Me===me?ie.target:Me;oe.has(st.key)||(oe.add(st.key),N(st.key,st.attributes))}}function Es(oe,me,ue){for(var N in me){var j=me[N];j instanceof Set&&(j=j.values().next().value);var ie=j.source,ze=ie===oe?j.target:ie;if(ue(ze.key,ze.attributes))return!0}return!1}function Jt(oe,me,ue,N){for(var j in ue){var ie=ue[j];ie instanceof Set&&(ie=ie.values().next().value);var Me=ie.source,st=Me===me?ie.target:Me;if(!oe.has(st.key)&&(oe.add(st.key),N(st.key,st.attributes)))return!0}return!1}function tl(oe,me){var ue=Object.keys(me),N=ue.length,j=0;return new se(function(){if(j>=N)return{done:!0};var ie=me[ue[j++]];ie instanceof Set&&(ie=ie.values().next().value);var Me=ie.source,st=Me===oe?ie.target:Me;return{done:!1,value:[st.key,st.attributes]}})}function ot(oe,me,ue){var N=Object.keys(ue),j=N.length,ie=0;return new se(function Me(){if(ie>=j)return{done:!0};var ze=ue[N[ie++]];ze instanceof Set&&(ze=ze.values().next().value);var st=ze.source,et=st===me?ze.target:st;return oe.has(et.key)?Me():(oe.add(et.key),{done:!1,value:[et.key,et.attributes]})})}function ut(oe,me,ue,N,j){var ie=oe._nodes.get(N);if("undirected"!==me){if("out"!==ue&&void 0!==ie.in)for(var Me in ie.in)if(Me===j)return!0;if("in"!==ue&&void 0!==ie.out)for(var ze in ie.out)if(ze===j)return!0}if("directed"!==me&&void 0!==ie.undirected)for(var st in ie.undirected)if(st===j)return!0;return!1}function $e(oe,me,ue){for(var N,j,ie,Me,ze,st,Ot,et=me._nodes.values(),Wt=me.type;!0!==(N=et.next()).done;){if(j=N.value,"undirected"!==Wt)for(ie in Me=j.out)if(st=(ze=Me[ie]).target,Ot=ue(j.key,st.key,j.attributes,st.attributes,ze.key,ze.attributes,ze.undirected,ze.generatedKey),oe&&Ot)return;if("directed"!==Wt)for(ie in Me=j.undirected)if((st=(ze=Me[ie]).target).key!==ie&&(st=ze.source),Ot=ue(j.key,st.key,j.attributes,st.attributes,ze.key,ze.attributes,ze.undirected,ze.generatedKey),oe&&Ot)return}}function ht(oe,me,ue){for(var N,j,ie,Me,ze,st,Ot,et,Wt,Ct=me._nodes.values(),vn=me.type;!0!==(N=Ct.next()).done;){if(j=N.value,"undirected"!==vn)for(ie in st=j.out)for(Me=st[ie].values();!0!==(ze=Me.next()).done;)if(et=(Ot=ze.value).target,Wt=ue(j.key,et.key,j.attributes,et.attributes,Ot.key,Ot.attributes,Ot.undirected,Ot.generatedKey),oe&&Wt)return;if("directed"!==vn)for(ie in st=j.undirected)for(Me=st[ie].values();!0!==(ze=Me.next()).done;)if((et=(Ot=ze.value).target).key!==ie&&(et=Ot.source),Wt=ue(j.key,et.key,j.attributes,et.attributes,Ot.key,Ot.attributes,Ot.undirected,Ot.generatedKey),oe&&Wt)return}}function it(oe,me){var ue={key:oe};return Y(me.attributes)||(ue.attributes=fe({},me.attributes)),ue}function Tt(oe,me){var ue={source:me.source.key,target:me.target.key};return me.generatedKey||(ue.key=oe),Y(me.attributes)||(ue.attributes=fe({},me.attributes)),me.undirected&&(ue.undirected=!0),ue}function Mt(oe){return F(oe)?"key"in oe?!("attributes"in oe)||F(oe.attributes)&&null!==oe.attributes?null:"invalid-attributes":"no-key":"not-object"}function Dt(oe){return F(oe)?"source"in oe?"target"in oe?!("attributes"in oe)||F(oe.attributes)&&null!==oe.attributes?"undirected"in oe&&"boolean"!=typeof oe.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}var Xt=new Set(["directed","undirected","mixed"]),zn=new Set(["domain","_events","_eventsCount","_maxListeners"]),ai={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Nn(oe,me,ue){var N=new oe.NodeDataClass(me,ue);return oe._nodes.set(me,N),oe.emit("nodeAdded",{key:me,attributes:ue}),N}function bn(oe,me,ue,N,j,ie,Me,ze){if(!N&&"undirected"===oe.type)throw new ve("Graph.".concat(me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(N&&"directed"===oe.type)throw new ve("Graph.".concat(me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(ze&&!F(ze))throw new ye("Graph.".concat(me,': invalid attributes. Expecting an object but got "').concat(ze,'"'));if(ie=""+ie,Me=""+Me,ze=ze||{},!oe.allowSelfLoops&&ie===Me)throw new ve("Graph.".concat(me,': source & target are the same ("').concat(ie,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var st=oe._nodes.get(ie),Ot=oe._nodes.get(Me);if(!st)throw new re("Graph.".concat(me,': source node "').concat(ie,'" not found.'));if(!Ot)throw new re("Graph.".concat(me,': target node "').concat(Me,'" not found.'));var et={key:null,undirected:N,source:ie,target:Me,attributes:ze};if(ue&&(j=oe._edgeKeyGenerator(et)),oe._edges.has(j=""+j))throw new ve("Graph.".concat(me,': the "').concat(j,'" edge already exists in the graph.'));if(!oe.multi&&(N?void 0!==st.undirected[Me]:void 0!==st.out[Me]))throw new ve("Graph.".concat(me,': an edge linking "').concat(ie,'" to "').concat(Me,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Wt=new J(N,j,ue,st,Ot,ze);return oe._edges.set(j,Wt),ie===Me?N?(st.undirectedSelfLoops++,oe._undirectedSelfLoopCount++):(st.directedSelfLoops++,oe._directedSelfLoopCount++):N?(st.undirectedDegree++,Ot.undirectedDegree++):(st.outDegree++,Ot.inDegree++),ae(oe,N,Wt,ie,Me,st,Ot),N?oe._undirectedSize++:oe._directedSize++,et.key=j,oe.emit("edgeAdded",et),j}function $n(oe,me,ue,N,j,ie,Me,ze,st){if(!N&&"undirected"===oe.type)throw new ve("Graph.".concat(me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(N&&"directed"===oe.type)throw new ve("Graph.".concat(me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(ze)if(st){if("function"!=typeof ze)throw new ye("Graph.".concat(me,': invalid updater function. Expecting a function but got "').concat(ze,'"'))}else if(!F(ze))throw new ye("Graph.".concat(me,': invalid attributes. Expecting an object but got "').concat(ze,'"'));var Ot;if(ie=""+ie,Me=""+Me,st&&(Ot=ze,ze=void 0),!oe.allowSelfLoops&&ie===Me)throw new ve("Graph.".concat(me,': source & target are the same ("').concat(ie,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var et,Wt,Ct=oe._nodes.get(ie),vn=oe._nodes.get(Me);if(!ue&&(et=oe._edges.get(j))){if(et.source.key!==ie||et.target.key!==Me||N&&(et.source.key!==Me||et.target.key!==ie))throw new ve("Graph.".concat(me,': inconsistency detected when attempting to merge the "').concat(j,'" edge with "').concat(ie,'" source & "').concat(Me,'" target vs. ("').concat(et.source.key,'", "').concat(et.target.key,'").'));Wt=et}if(Wt||oe.multi||!Ct||(Wt=N?Ct.undirected[Me]:Ct.out[Me]),Wt)return(st?Ot:ze)?(st?(Wt.attributes=Ot(Wt.attributes),oe.emit("edgeAttributesUpdated",{type:"replace",key:Wt.key,attributes:Wt.attributes})):(fe(Wt.attributes,ze),oe.emit("edgeAttributesUpdated",{type:"merge",key:Wt.key,attributes:Wt.attributes,data:ze})),Wt.key):Wt.key;ze=ze||{},st&&Ot&&(ze=Ot(ze));var Jr={key:null,undirected:N,source:ie,target:Me,attributes:ze};if(ue&&(j=oe._edgeKeyGenerator(Jr)),oe._edges.has(j=""+j))throw new ve("Graph.".concat(me,': the "').concat(j,'" edge already exists in the graph.'));return Ct||(Ct=Nn(oe,ie,{}),ie===Me&&(vn=Ct)),vn||(vn=Nn(oe,Me,{})),et=new J(N,j,ue,Ct,vn,ze),oe._edges.set(j,et),ie===Me?N?(Ct.undirectedSelfLoops++,oe._undirectedSelfLoopCount++):(Ct.directedSelfLoops++,oe._directedSelfLoopCount++):N?(Ct.undirectedDegree++,vn.undirectedDegree++):(Ct.outDegree++,vn.inDegree++),ae(oe,N,et,ie,Me,Ct,vn),N?oe._undirectedSize++:oe._directedSize++,Jr.key=j,oe.emit("edgeAdded",Jr),j}var oe,Tn=function(oe){function me(N){var j;if(j=oe.call(this)||this,(N=fe({},ai,N)).edgeKeyGenerator&&"function"!=typeof N.edgeKeyGenerator)throw new ye("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(N.edgeKeyGenerator,'".'));if("boolean"!=typeof N.multi)throw new ye("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(N.multi,'".'));if(!Xt.has(N.type))throw new ye('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(N.type,'".'));if("boolean"!=typeof N.allowSelfLoops)throw new ye("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(N.allowSelfLoops,'".'));var ie,Me="mixed"===N.type?Fe:"directed"===N.type?Qe:He;return L(we(j),"NodeDataClass",Me),L(we(j),"_attributes",{}),L(we(j),"_nodes",new Map),L(we(j),"_edges",new Map),L(we(j),"_directedSize",0),L(we(j),"_undirectedSize",0),L(we(j),"_directedSelfLoopCount",0),L(we(j),"_undirectedSelfLoopCount",0),L(we(j),"_edgeKeyGenerator",N.edgeKeyGenerator||(ie=0,function(){return ie++})),L(we(j),"_options",N),zn.forEach(function(ze){return L(we(j),ze,j[ze])}),w(we(j),"order",function(){return j._nodes.size}),w(we(j),"size",function(){return j._edges.size}),w(we(j),"directedSize",function(){return j._directedSize}),w(we(j),"undirectedSize",function(){return j._undirectedSize}),w(we(j),"selfLoopCount",function(){return j._directedSelfLoopCount+j._undirectedSelfLoopCount}),w(we(j),"directedSelfLoopCount",function(){return j._directedSelfLoopCount}),w(we(j),"undirectedSelfLoopCount",function(){return j._undirectedSelfLoopCount}),w(we(j),"multi",j._options.multi),w(we(j),"type",j._options.type),w(we(j),"allowSelfLoops",j._options.allowSelfLoops),w(we(j),"implementation",function(){return"graphology"}),j}Je(me,oe);var ue=me.prototype;return ue.hasNode=function(N){return this._nodes.has(""+N)},ue.hasDirectedEdge=function(N,j){if("undirected"===this.type)return!1;if(1===arguments.length){var Me=this._edges.get(""+N);return!!Me&&!Me.undirected}if(2===arguments.length){j=""+j;var ze=this._nodes.get(N=""+N);if(!ze)return!1;var st=ze.out[j];return!(!st||this.multi&&!st.size)}throw new ye("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ue.hasUndirectedEdge=function(N,j){if("directed"===this.type)return!1;if(1===arguments.length){var Me=this._edges.get(""+N);return!!Me&&Me.undirected}if(2===arguments.length){j=""+j;var ze=this._nodes.get(N=""+N);if(!ze)return!1;var st=ze.undirected[j];return!(!st||this.multi&&!st.size)}throw new ye("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ue.hasEdge=function(N,j){if(1===arguments.length)return this._edges.has(""+N);if(2===arguments.length){j=""+j;var Me=this._nodes.get(N=""+N);if(!Me)return!1;var ze=void 0!==Me.out&&Me.out[j];return ze||(ze=void 0!==Me.undirected&&Me.undirected[j]),!(!ze||this.multi&&!ze.size)}throw new ye("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ue.directedEdge=function(N,j){if("undirected"!==this.type){if(N=""+N,j=""+j,this.multi)throw new ve("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ie=this._nodes.get(N);if(!ie)throw new re('Graph.directedEdge: could not find the "'.concat(N,'" source node in the graph.'));if(!this._nodes.has(j))throw new re('Graph.directedEdge: could not find the "'.concat(j,'" target node in the graph.'));var Me=ie.out&&ie.out[j]||void 0;return Me?Me.key:void 0}},ue.undirectedEdge=function(N,j){if("directed"!==this.type){if(N=""+N,j=""+j,this.multi)throw new ve("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ie=this._nodes.get(N);if(!ie)throw new re('Graph.undirectedEdge: could not find the "'.concat(N,'" source node in the graph.'));if(!this._nodes.has(j))throw new re('Graph.undirectedEdge: could not find the "'.concat(j,'" target node in the graph.'));var Me=ie.undirected&&ie.undirected[j]||void 0;return Me?Me.key:void 0}},ue.edge=function(N,j){if(this.multi)throw new ve("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");j=""+j;var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.edge: could not find the "'.concat(N,'" source node in the graph.'));if(!this._nodes.has(j))throw new re('Graph.edge: could not find the "'.concat(j,'" target node in the graph.'));var Me=ie.out&&ie.out[j]||ie.undirected&&ie.undirected[j]||void 0;if(Me)return Me.key},ue.inDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new ye('Graph.inDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.inDegree: could not find the "'.concat(N,'" node in the graph.'));return"undirected"===this.type?0:ie.inDegree+(j?ie.directedSelfLoops:0)},ue.outDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new ye('Graph.outDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.outDegree: could not find the "'.concat(N,'" node in the graph.'));return"undirected"===this.type?0:ie.outDegree+(j?ie.directedSelfLoops:0)},ue.directedDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new ye('Graph.directedDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.directedDegree: could not find the "'.concat(N,'" node in the graph.'));if("undirected"===this.type)return 0;var Me=j?ie.directedSelfLoops:0;return ie.inDegree+Me+(ie.outDegree+Me)},ue.undirectedDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new ye('Graph.undirectedDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.undirectedDegree: could not find the "'.concat(N,'" node in the graph.'));return"directed"===this.type?0:ie.undirectedDegree+2*(j?ie.undirectedSelfLoops:0)},ue.degree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new ye('Graph.degree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.degree: could not find the "'.concat(N,'" node in the graph.'));var Me=0,ze=0;return"directed"!==this.type&&(j&&(ze=ie.undirectedSelfLoops),Me+=ie.undirectedDegree+2*ze),"undirected"!==this.type&&(j&&(ze=ie.directedSelfLoops),Me+=ie.inDegree+ie.outDegree+2*ze),Me},ue.source=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.source: could not find the "'.concat(N,'" edge in the graph.'));return j.source.key},ue.target=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.target: could not find the "'.concat(N,'" edge in the graph.'));return j.target.key},ue.extremities=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.extremities: could not find the "'.concat(N,'" edge in the graph.'));return[j.source.key,j.target.key]},ue.opposite=function(N,j){N=""+N;var ie=this._edges.get(j=""+j);if(!ie)throw new re('Graph.opposite: could not find the "'.concat(j,'" edge in the graph.'));var Me=ie.source.key,ze=ie.target.key;if(N!==Me&&N!==ze)throw new re('Graph.opposite: the "'.concat(N,'" node is not attached to the "').concat(j,'" edge (').concat(Me,", ").concat(ze,")."));return N===Me?ze:Me},ue.hasExtremity=function(N,j){j=""+j;var ie=this._edges.get(N=""+N);if(!ie)throw new re('Graph.hasExtremity: could not find the "'.concat(N,'" edge in the graph.'));return ie.source.key===j||ie.target.key===j},ue.isUndirected=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.isUndirected: could not find the "'.concat(N,'" edge in the graph.'));return j.undirected},ue.isDirected=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.isDirected: could not find the "'.concat(N,'" edge in the graph.'));return!j.undirected},ue.isSelfLoop=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.isSelfLoop: could not find the "'.concat(N,'" edge in the graph.'));return j.source===j.target},ue.hasGeneratedKey=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.hasGeneratedKey: could not find the "'.concat(N,'" edge in the graph.'));return j.generatedKey},ue.addNode=function(N,j){return function(ie,Me,ze){if(ze&&!F(ze))throw new ye('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(ze,'"'));if(ze=ze||{},ie._nodes.has(Me=""+Me))throw new ve('Graph.addNode: the "'.concat(Me,'" node already exist in the graph.'));var st=new ie.NodeDataClass(Me,ze);return ie._nodes.set(Me,st),ie.emit("nodeAdded",{key:Me,attributes:ze}),st}(this,N,j).key},ue.mergeNode=function(N,j){if(j&&!F(j))throw new ye('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(j,'"'));j=j||{};var ie=this._nodes.get(N=""+N);return ie?(j&&(fe(ie.attributes,j),this.emit("nodeAttributesUpdated",{type:"merge",key:N,attributes:ie.attributes,data:j})),N):(ie=new this.NodeDataClass(N,j),this._nodes.set(N,ie),this.emit("nodeAdded",{key:N,attributes:j}),N)},ue.updateNode=function(N,j){if(j&&"function"!=typeof j)throw new ye('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(j,'"'));var ie=this._nodes.get(N=""+N);if(ie)return j&&(ie.attributes=j(ie.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:N,attributes:ie.attributes})),N;var ze=j?j({}):{};return ie=new this.NodeDataClass(N,ze),this._nodes.set(N,ie),this.emit("nodeAdded",{key:N,attributes:ze}),N},ue.dropNode=function(N){var j=this,ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.dropNode: could not find the "'.concat(N,'" node in the graph.'));this.forEachEdge(N,function(Me){j.dropEdge(Me)}),this._nodes.delete(N),this.emit("nodeDropped",{key:N,attributes:ie.attributes})},ue.dropEdge=function(N){var j;if(arguments.length>1){var ie=""+arguments[0],Me=""+arguments[1];if(!(j=K(this,ie,Me,this.type)))throw new re('Graph.dropEdge: could not find the "'.concat(ie,'" -> "').concat(Me,'" edge in the graph.'))}else if(!(j=this._edges.get(N=""+N)))throw new re('Graph.dropEdge: could not find the "'.concat(N,'" edge in the graph.'));this._edges.delete(j.key);var st=j.source,Ot=j.target,et=j.attributes,Wt=j.undirected;return st===Ot?Wt?(st.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(st.directedSelfLoops--,this._directedSelfLoopCount--):Wt?(st.undirectedDegree--,Ot.undirectedDegree--):(st.outDegree--,Ot.inDegree--),_e(this,Wt,j),Wt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:N,attributes:et,source:st.key,target:Ot.key,undirected:Wt}),this},ue.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ue.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ue.getAttribute=function(N){return this._attributes[N]},ue.getAttributes=function(){return this._attributes},ue.hasAttribute=function(N){return this._attributes.hasOwnProperty(N)},ue.setAttribute=function(N,j){return this._attributes[N]=j,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:N}),this},ue.updateAttribute=function(N,j){if("function"!=typeof j)throw new ye("Graph.updateAttribute: updater should be a function.");return this._attributes[N]=j(this._attributes[N]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:N}),this},ue.removeAttribute=function(N){return delete this._attributes[N],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:N}),this},ue.replaceAttributes=function(N){if(!F(N))throw new ye("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=N,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ue.mergeAttributes=function(N){if(!F(N))throw new ye("Graph.mergeAttributes: provided attributes are not a plain object.");return fe(this._attributes,N),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:N}),this},ue.getNodeAttribute=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.getNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));return ie.attributes[j]},ue.getNodeAttributes=function(N){var j=this._nodes.get(N=""+N);if(!j)throw new re('Graph.getNodeAttributes: could not find the "'.concat(N,'" node in the graph.'));return j.attributes},ue.hasNodeAttribute=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.hasNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));return ie.attributes.hasOwnProperty(j)},ue.setNodeAttribute=function(N,j,ie){var Me=this._nodes.get(N=""+N);if(!Me)throw new re('Graph.setNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));if(arguments.length<3)throw new ye("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Me.attributes[j]=ie,this.emit("nodeAttributesUpdated",{key:N,type:"set",attributes:Me.attributes,name:j}),this},ue.updateNodeAttribute=function(N,j,ie){var Me=this._nodes.get(N=""+N);if(!Me)throw new re('Graph.updateNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));if(arguments.length<3)throw new ye("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof ie)throw new ye("Graph.updateAttribute: updater should be a function.");var ze=Me.attributes,st=ie(ze[j]);return ze[j]=st,this.emit("nodeAttributesUpdated",{key:N,type:"set",attributes:Me.attributes,name:j}),this},ue.removeNodeAttribute=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.hasNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));return delete ie.attributes[j],this.emit("nodeAttributesUpdated",{key:N,type:"remove",attributes:ie.attributes,name:j}),this},ue.replaceNodeAttributes=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.replaceNodeAttributes: could not find the "'.concat(N,'" node in the graph.'));if(!F(j))throw new ye("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return ie.attributes=j,this.emit("nodeAttributesUpdated",{key:N,type:"replace",attributes:ie.attributes}),this},ue.mergeNodeAttributes=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.mergeNodeAttributes: could not find the "'.concat(N,'" node in the graph.'));if(!F(j))throw new ye("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return fe(ie.attributes,j),this.emit("nodeAttributesUpdated",{key:N,type:"merge",attributes:ie.attributes,data:j}),this},ue.updateEachNodeAttributes=function(N,j){if("function"!=typeof N)throw new ye("Graph.updateEachNodeAttributes: expecting an updater function.");if(j&&!C(j))throw new ye("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ie,Me,ze=this._nodes.values();!0!==(ie=ze.next()).done;)(Me=ie.value).attributes=N(Me.key,Me.attributes);this.emit("eachNodeAttributesUpdated",{hints:j||null})},ue.updateEachEdgeAttributes=function(N,j){if("function"!=typeof N)throw new ye("Graph.updateEachEdgeAttributes: expecting an updater function.");if(j&&!C(j))throw new ye("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ie,Me,ze=this._edges.values();!0!==(ie=ze.next()).done;)(Me=ie.value).attributes=N(Me.key,Me.attributes);this.emit("eachEdgeAttributesUpdated",{hints:j||null})},ue.forEach=function(N){if("function"!=typeof N)throw new ye("Graph.forEach: expecting a callback.");this.multi?ht(!1,this,N):$e(!1,this,N)},ue.forEachUntil=function(N){if("function"!=typeof N)throw new ye("Graph.forEach: expecting a callback.");this.multi?ht(!0,this,N):$e(!0,this,N)},ue.adjacency=function(){return this.multi?(st=(N=this)._nodes.values(),Ot=N.type,et="outer",Wt=null,new se(function Ct(){var vn;if("outer"===et)return!0===(vn=st.next()).done?vn:(j=vn.value,et="directed",Ct());if("directed"===et)return"undirected"===Ot?(et="undirected",Ct()):(Me=j.out,ie=Object.keys(j.out),ze=0,et="inner-directed",Ct());if("undirected"===et){if("directed"===Ot)return et="outer",Ct();Me=j.undirected,ie=Object.keys(j.undirected),ze=0,et="inner-undirected"}if(!Wt&&ze>=ie.length)return et="inner-undirected"===et?"outer":"undirected",Ct();if(!Wt){var Ss=ie[ze++];return Wt=Me[Ss].values(),Ct()}if((vn=Wt.next()).done)return Wt=null,Ct();var Jr=vn.value,Qs=Jr.target;return"inner-undirected"===et&&Qs.key===j.key&&(Qs=Jr.source),{done:!1,value:[j.key,Qs.key,j.attributes,Qs.attributes,Jr.key,Jr.attributes]}})):(Ll=(Ct=this)._nodes.values(),po=Ct.type,jr="outer",new se(function js(){var xc;if("outer"===jr)return!0===(xc=Ll.next()).done?xc:(vn=xc.value,jr="directed",js());if("directed"===jr)return"undirected"===po?(jr="undirected",js()):(Jr=vn.out,Ss=Object.keys(vn.out),Qs=0,jr="inner-directed",js());if("undirected"===jr){if("directed"===po)return jr="outer",js();Jr=vn.undirected,Ss=Object.keys(vn.undirected),Qs=0,jr="inner-undirected"}if(Qs>=Ss.length)return jr="inner-undirected"===jr?"outer":"undirected",js();var Sn=Ss[Qs++],go=Jr[Sn],Bl=go.target;return"inner-undirected"===jr&&Bl.key===vn.key&&(Bl=go.source),{done:!1,value:[vn.key,Bl.key,vn.attributes,Bl.attributes,go.key,go.attributes]}}));var Ct,vn,Ss,Jr,Qs,Ll,po,jr,N,j,ie,Me,ze,st,Ot,et,Wt},ue.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):te(this._nodes.keys(),this._nodes.size)},ue.forEachNode=function(N){if("function"!=typeof N)throw new ye("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(j,ie){N(ie,j.attributes)})},ue.forEachNodeUntil=function(N){if("function"!=typeof N)throw new ye("Graph.forEachNode: expecting a callback.");for(var j,ie,Me=this._nodes.values();!0!==(j=Me.next())&&!N((ie=j.value).key,ie.attributes););},ue.nodeEntries=function(){var N=this._nodes.values();return new se(function(){var j=N.next();if(j.done)return j;var ie=j.value;return{value:[ie.key,ie.attributes],done:!1}})},ue.exportNode=function(N){var j=this._nodes.get(N=""+N);if(!j)throw new re('Graph.exportNode: could not find the "'.concat(N,'" node in the graph.'));return it(N,j)},ue.exportEdge=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.exportEdge: could not find the "'.concat(N,'" edge in the graph.'));return Tt(N,j)},ue.export=function(){var N=new Array(this._nodes.size),j=0;this._nodes.forEach(function(Me,ze){N[j++]=it(ze,Me)});var ie=new Array(this._edges.size);return j=0,this._edges.forEach(function(Me,ze){ie[j++]=Tt(ze,Me)}),{attributes:this.getAttributes(),nodes:N,edges:ie,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ue.importNode=function(N){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ie=Mt(N);if(ie){if("not-object"===ie)throw new ye('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===ie)throw new ye("Graph.importNode: no key provided.");if("invalid-attributes"===ie)throw new ye("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Me=N.key,ze=N.attributes,st=void 0===ze?{}:ze;return j?this.mergeNode(Me,st):this.addNode(Me,st),this},ue.importEdge=function(N){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ie=Dt(N);if(ie){if("not-object"===ie)throw new ye('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===ie)throw new ye("Graph.importEdge: missing souce.");if("no-target"===ie)throw new ye("Graph.importEdge: missing target.");if("invalid-attributes"===ie)throw new ye("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===ie)throw new ye("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Me=N.source,ze=N.target,st=N.attributes,Ot=void 0===st?{}:st,et=N.undirected,Wt=void 0!==et&&et;return"key"in N?(j?Wt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Wt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,N.key,Me,ze,Ot):(j?Wt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Wt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Me,ze,Ot),this},ue.import=function(N){var j,ie,Me,ze=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(V(N))return this.import(N.export(),ze),this;if(!F(N))throw new ye("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(N.attributes){if(!F(N.attributes))throw new ye("Graph.import: invalid attributes. Expecting a plain object.");ze?this.mergeAttributes(N.attributes):this.replaceAttributes(N.attributes)}if(N.nodes){if(Me=N.nodes,!Array.isArray(Me))throw new ye("Graph.import: invalid nodes. Expecting an array.");for(j=0,ie=Me.length;j<ie;j++)this.importNode(Me[j],ze)}if(N.edges){if(Me=N.edges,!Array.isArray(Me))throw new ye("Graph.import: invalid edges. Expecting an array.");for(j=0,ie=Me.length;j<ie;j++)this.importEdge(Me[j],ze)}return this},ue.nullCopy=function(N){return new me(fe({},this._options,N))},ue.emptyCopy=function(N){var j=this.nullCopy(N);return this._nodes.forEach(function(ie,Me){var ze=fe({},ie.attributes);ie=new j.NodeDataClass(Me,ze),j._nodes.set(Me,ie)}),j},ue.copy=function(){var N=new me(this._options);return N.import(this),N},ue.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(N){return N.upgradeToMixed()}),this._options.type="mixed",w(this,"type",this._options.type),L(this,"NodeDataClass",Fe)),this},ue.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,w(this,"multi",!0),(N=this)._nodes.forEach(function(j,ie){if(j.out)for(var Me in j.out){var ze=new Set;ze.add(j.out[Me]),j.out[Me]=ze,N._nodes.get(Me).in[ie]=ze}if(j.undirected)for(var st in j.undirected)if(!(st>ie)){var Ot=new Set;Ot.add(j.undirected[st]),j.undirected[st]=Ot,N._nodes.get(st).undirected[ie]=Ot}})),this;var N},ue.clearIndex=function(){return this._nodes.forEach(function(N){void 0!==N.in&&(N.in={},N.out={}),void 0!==N.undirected&&(N.undirected={})}),this},ue.toJSON=function(){return this.export()},ue.toString=function(){return"[object Graph]"},ue.inspect=function(){var N=this,j={};this._nodes.forEach(function(Ot,et){j[et]=Ot.attributes});var ie={},Me={};this._edges.forEach(function(Ot,et){var Wt=Ot.undirected?"--":"->",Ct="",vn="(".concat(Ot.source.key,")").concat(Wt,"(").concat(Ot.target.key,")");Ot.generatedKey?N.multi&&(void 0===Me[vn]?Me[vn]=0:Me[vn]++,Ct+="".concat(Me[vn],". ")):Ct+="[".concat(et,"]: "),ie[Ct+=vn]=Ot.attributes});var ze={};for(var st in this)this.hasOwnProperty(st)&&!zn.has(st)&&"function"!=typeof this[st]&&(ze[st]=this[st]);return ze.attributes=this._attributes,ze.nodes=j,ze.edges=ie,L(ze,"constructor",this.constructor),ze},me}(T.exports.EventEmitter);"undefined"!=typeof Symbol&&(Tn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Tn.prototype.inspect),[{name:function(oe){return"".concat(oe,"Edge")},generateKey:!0},{name:function(oe){return"".concat(oe,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(oe){return"".concat(oe,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(oe){return"".concat(oe,"EdgeWithKey")}},{name:function(oe){return"".concat(oe,"DirectedEdgeWithKey")},type:"directed"},{name:function(oe){return"".concat(oe,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(oe){["add","merge","update"].forEach(function(me){var ue=oe.name(me),N="add"===me?bn:$n;Tn.prototype[ue]=oe.generateKey?function(j,ie,Me){return N(this,ue,!0,"undirected"===(oe.type||this.type),null,j,ie,Me,"update"===me)}:function(j,ie,Me,ze){return N(this,ue,!1,"undirected"===(oe.type||this.type),j,ie,Me,ze,"update"===me)}})}),"undefined"!=typeof Symbol&&(Tn.prototype[Symbol.iterator]=Tn.prototype.adjacency),oe=Tn,Te.forEach(function(me){var ue=me.name,N=me.attacher;N(oe,ue("Edge"),"mixed"),N(oe,ue("DirectedEdge"),"directed"),N(oe,ue("UndirectedEdge"),"undirected")}),function(oe){Se.forEach(function(me){var N,j,ie,Me;ie=(N=me).type,Me=N.direction,oe.prototype[j=N.name]=function(ze,st){if("mixed"!==ie&&"mixed"!==this.type&&ie!==this.type)return[];if(!arguments.length)return Le(this,ie);if(1===arguments.length){var Ot=this._nodes.get(ze=""+ze);if(void 0===Ot)throw new re("Graph.".concat(j,': could not find the "').concat(ze,'" node in the graph.'));return On(this.multi,"mixed"===ie?this.type:ie,Me,Ot)}if(2===arguments.length){st=""+st;var et=this._nodes.get(ze=""+ze);if(!et)throw new re("Graph.".concat(j,':  could not find the "').concat(ze,'" source node in the graph.'));if(!this._nodes.has(st))throw new re("Graph.".concat(j,':  could not find the "').concat(st,'" target node in the graph.'));return wi(ie,this.multi,Me,et,st)}throw new ye("Graph.".concat(j,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ue,N){var j=N.name,ie=N.type,Me=N.direction,ze="forEach"+j[0].toUpperCase()+j.slice(1,-1);ue.prototype[ze]=function(st,Ot,et){if("mixed"===ie||"mixed"===this.type||ie===this.type){if(1===arguments.length)return nt(this,ie,et=st);if(2===arguments.length){et=Ot;var Wt=this._nodes.get(st=""+st);if(void 0===Wt)throw new re("Graph.".concat(ze,': could not find the "').concat(st,'" node in the graph.'));return kn(this.multi,"mixed"===ie?this.type:ie,Me,Wt,et)}if(3===arguments.length){Ot=""+Ot;var Ct=this._nodes.get(st=""+st);if(!Ct)throw new re("Graph.".concat(ze,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Ot))throw new re("Graph.".concat(ze,':  could not find the "').concat(Ot,'" target node in the graph.'));return Xr(ie,this.multi,Me,Ct,Ot,et)}throw new ye("Graph.".concat(ze,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(oe,me),function(ue,N){var j=N.name,ie=N.type,Me=N.direction,ze="forEach"+j[0].toUpperCase()+j.slice(1,-1)+"Until";ue.prototype[ze]=function(st,Ot,et){if("mixed"===ie||"mixed"===this.type||ie===this.type){if(1===arguments.length)return xt(this,ie,et=st);if(2===arguments.length){et=Ot;var Wt=this._nodes.get(st=""+st);if(void 0===Wt)throw new re("Graph.".concat(ze,': could not find the "').concat(st,'" node in the graph.'));return Yn(this.multi,"mixed"===ie?this.type:ie,Me,Wt,et)}if(3===arguments.length){Ot=""+Ot;var Ct=this._nodes.get(st=""+st);if(!Ct)throw new re("Graph.".concat(ze,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Ot))throw new re("Graph.".concat(ze,':  could not find the "').concat(Ot,'" target node in the graph.'));return Ls(ie,this.multi,Me,Ct,Ot,et)}throw new ye("Graph.".concat(ze,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(oe,me),function(ue,N){var ie=N.type,Me=N.direction,ze=N.name.slice(0,-1)+"Entries";ue.prototype[ze]=function(st,Ot){if("mixed"!==ie&&"mixed"!==this.type&&ie!==this.type)return se.empty();if(!arguments.length)return Nt(this,ie);if(1===arguments.length){var et=this._nodes.get(st=""+st);if(!et)throw new re("Graph.".concat(ze,': could not find the "').concat(st,'" node in the graph.'));return Ti(ie,Me,et)}if(2===arguments.length){Ot=""+Ot;var Wt=this._nodes.get(st=""+st);if(!Wt)throw new re("Graph.".concat(ze,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Ot))throw new re("Graph.".concat(ze,':  could not find the "').concat(Ot,'" target node in the graph.'));return gs(ie,Me,Wt,Ot)}throw new ye("Graph.".concat(ze,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(oe,me)})}(Tn),function(oe){Bs.forEach(function(me){var N,j,ie,Me;ie=(N=me).type,Me=N.direction,oe.prototype[j=N.name]=function(ze){if("mixed"!==ie&&"mixed"!==this.type&&ie!==this.type)return[];if(2===arguments.length){var st=""+arguments[0],Ot=""+arguments[1];if(!this._nodes.has(st))throw new re("Graph.".concat(j,': could not find the "').concat(st,'" node in the graph.'));if(!this._nodes.has(Ot))throw new re("Graph.".concat(j,': could not find the "').concat(Ot,'" node in the graph.'));return ut(this,ie,Me,st,Ot)}if(1===arguments.length){var et=this._nodes.get(ze=""+ze);if(void 0===et)throw new re("Graph.".concat(j,': could not find the "').concat(ze,'" node in the graph.'));return el("mixed"===ie?this.type:ie,Me,et)}throw new ye("Graph.".concat(j,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function(oe,me){var ue=me.name,N=me.type,j=me.direction,ie="forEach"+ue[0].toUpperCase()+ue.slice(1,-1);oe.prototype[ie]=function(Me,ze){if("mixed"===N||"mixed"===this.type||N===this.type){var st=this._nodes.get(Me=""+Me);if(void 0===st)throw new re("Graph.".concat(ie,': could not find the "').concat(Me,'" node in the graph.'));!function(Ot,et,Wt,Ct){if("mixed"!==Ot){if("undirected"===Ot)return kl(Wt,Wt.undirected,Ct);if("string"==typeof et)return kl(Wt,Wt[et],Ct)}var vn=new Set;"undirected"!==Ot&&("out"!==et&&Sa(vn,Wt,Wt.in,Ct),"in"!==et&&Sa(vn,Wt,Wt.out,Ct)),"directed"!==Ot&&Sa(vn,Wt,Wt.undirected,Ct)}("mixed"===N?this.type:N,j,st,ze)}}}(oe,me),function(oe,me){var ue=me.name,N=me.type,j=me.direction,ie="forEach"+ue[0].toUpperCase()+ue.slice(1,-1)+"Until";oe.prototype[ie]=function(Me,ze){if("mixed"===N||"mixed"===this.type||N===this.type){var st=this._nodes.get(Me=""+Me);if(void 0===st)throw new re("Graph.".concat(ie,': could not find the "').concat(Me,'" node in the graph.'));!function(Ot,et,Wt,Ct){if("mixed"!==Ot){if("undirected"===Ot)return Es(Wt,Wt.undirected,Ct);if("string"==typeof et)return Es(Wt,Wt[et],Ct)}var vn=new Set;"undirected"!==Ot&&("out"!==et&&Jt(vn,Wt,Wt.in,Ct)||"in"!==et&&Jt(vn,Wt,Wt.out,Ct))||"directed"===Ot||Jt(vn,Wt,Wt.undirected,Ct)}("mixed"===N?this.type:N,j,st,ze)}}}(oe,me),function(oe,me){var N=me.type,j=me.direction,ie=me.name.slice(0,-1)+"Entries";oe.prototype[ie]=function(Me){if("mixed"!==N&&"mixed"!==this.type&&N!==this.type)return se.empty();var ze=this._nodes.get(Me=""+Me);if(void 0===ze)throw new re("Graph.".concat(ie,': could not find the "').concat(Me,'" node in the graph.'));return function(st,Ot,et){if("mixed"!==st){if("undirected"===st)return tl(et,et.undirected);if("string"==typeof Ot)return tl(et,et[Ot])}var Wt=se.empty(),Ct=new Set;return"undirected"!==st&&("out"!==Ot&&(Wt=Ge(Wt,ot(Ct,et,et.in))),"in"!==Ot&&(Wt=Ge(Wt,ot(Ct,et,et.out)))),"directed"!==st&&(Wt=Ge(Wt,ot(Ct,et,et.undirected))),Wt}("mixed"===N?this.type:N,j,ze)}}(oe,me)})}(Tn);var lr=function(oe){function me(ue){var N=fe({type:"directed"},ue);if("multi"in N&&!1!==N.multi)throw new ye("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==N.type)throw new ye('DirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return oe.call(this,N)||this}return Je(me,oe),me}(Tn),cr=function(oe){function me(ue){var N=fe({type:"undirected"},ue);if("multi"in N&&!1!==N.multi)throw new ye("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==N.type)throw new ye('UndirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return oe.call(this,N)||this}return Je(me,oe),me}(Tn),Xn=function(oe){function me(ue){var N=fe({multi:!0},ue);if("multi"in N&&!0!==N.multi)throw new ye("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return oe.call(this,N)||this}return Je(me,oe),me}(Tn),$i=function(oe){function me(ue){var N=fe({type:"directed",multi:!0},ue);if("multi"in N&&!0!==N.multi)throw new ye("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==N.type)throw new ye('MultiDirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return oe.call(this,N)||this}return Je(me,oe),me}(Tn),xa=function(oe){function me(ue){var N=fe({type:"undirected",multi:!0},ue);if("multi"in N&&!0!==N.multi)throw new ye("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==N.type)throw new ye('MultiUndirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return oe.call(this,N)||this}return Je(me,oe),me}(Tn);function Zr(oe){oe.from=function(me,ue){var N=fe({},me.options,ue),j=new oe(N);return j.import(me),j}}return Zr(Tn),Zr(lr),Zr(cr),Zr(Xn),Zr($i),Zr(xa),Tn.Graph=Tn,Tn.DirectedGraph=lr,Tn.UndirectedGraph=cr,Tn.MultiGraph=Xn,Tn.MultiDirectedGraph=$i,Tn.MultiUndirectedGraph=xa,Tn.InvalidArgumentsGraphError=ye,Tn.NotFoundGraphError=re,Tn.UsageGraphError=ve,Tn}()},524:(jt,Ye,Je)=>{var lt;!function(ee,Et,je,Q){"use strict";var T,we=["","webkit","Moz","MS","ms","o"],fe=Et.createElement("div"),V=Math.round,F=Math.abs,Y=Date.now;function L(Ee,Pe,Ze){return setTimeout(x(Ee,Ze),Pe)}function w(Ee,Pe,Ze){return!!Array.isArray(Ee)&&(C(Ee,Ze[Pe],Ze),!0)}function C(Ee,Pe,Ze){var bt;if(Ee)if(Ee.forEach)Ee.forEach(Pe,Ze);else if(Ee.length!==Q)for(bt=0;bt<Ee.length;)Pe.call(Ze,Ee[bt],bt,Ee),bt++;else for(bt in Ee)Ee.hasOwnProperty(bt)&&Pe.call(Ze,Ee[bt],bt,Ee)}function R(Ee,Pe,Ze){var bt="DEPRECATED METHOD: "+Pe+"\n"+Ze+" AT \n";return function(){var Gt=new Error("get-stack-trace"),Yt=Gt&&Gt.stack?Gt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",li=ee.console&&(ee.console.warn||ee.console.log);return li&&li.call(ee.console,bt,Yt),Ee.apply(this,arguments)}}T="function"!=typeof Object.assign?function(Pe){if(Pe===Q||null===Pe)throw new TypeError("Cannot convert undefined or null to object");for(var Ze=Object(Pe),bt=1;bt<arguments.length;bt++){var Gt=arguments[bt];if(Gt!==Q&&null!==Gt)for(var Yt in Gt)Gt.hasOwnProperty(Yt)&&(Ze[Yt]=Gt[Yt])}return Ze}:Object.assign;var y=R(function(Pe,Ze,bt){for(var Gt=Object.keys(Ze),Yt=0;Yt<Gt.length;)(!bt||bt&&Pe[Gt[Yt]]===Q)&&(Pe[Gt[Yt]]=Ze[Gt[Yt]]),Yt++;return Pe},"extend","Use `assign`."),v=R(function(Pe,Ze){return y(Pe,Ze,!0)},"merge","Use `assign`.");function b(Ee,Pe,Ze){var Gt,bt=Pe.prototype;(Gt=Ee.prototype=Object.create(bt)).constructor=Ee,Gt._super=bt,Ze&&T(Gt,Ze)}function x(Ee,Pe){return function(){return Ee.apply(Pe,arguments)}}function A(Ee,Pe){return"function"==typeof Ee?Ee.apply(Pe&&Pe[0]||Q,Pe):Ee}function E(Ee,Pe){return Ee===Q?Pe:Ee}function I(Ee,Pe,Ze){C(Z(Pe),function(bt){Ee.addEventListener(bt,Ze,!1)})}function H(Ee,Pe,Ze){C(Z(Pe),function(bt){Ee.removeEventListener(bt,Ze,!1)})}function M(Ee,Pe){for(;Ee;){if(Ee==Pe)return!0;Ee=Ee.parentNode}return!1}function P(Ee,Pe){return Ee.indexOf(Pe)>-1}function Z(Ee){return Ee.trim().split(/\s+/g)}function S(Ee,Pe,Ze){if(Ee.indexOf&&!Ze)return Ee.indexOf(Pe);for(var bt=0;bt<Ee.length;){if(Ze&&Ee[bt][Ze]==Pe||!Ze&&Ee[bt]===Pe)return bt;bt++}return-1}function G(Ee){return Array.prototype.slice.call(Ee,0)}function ne(Ee,Pe,Ze){for(var bt=[],Gt=[],Yt=0;Yt<Ee.length;){var li=Pe?Ee[Yt][Pe]:Ee[Yt];S(Gt,li)<0&&bt.push(Ee[Yt]),Gt[Yt]=li,Yt++}return Ze&&(bt=Pe?bt.sort(function(es,xs){return es[Pe]>xs[Pe]}):bt.sort()),bt}function ce(Ee,Pe){for(var Ze,bt,Gt=Pe[0].toUpperCase()+Pe.slice(1),Yt=0;Yt<we.length;){if((bt=(Ze=we[Yt])?Ze+Gt:Pe)in Ee)return bt;Yt++}return Q}var se=1;function Ie(Ee){var Pe=Ee.ownerDocument||Ee;return Pe.defaultView||Pe.parentWindow||ee}var re="ontouchstart"in ee,ve=ce(ee,"PointerEvent")!==Q,Fe=re&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Qe="touch",J="mouse",_t=["x","y"],gt=["clientX","clientY"];function Ae(Ee,Pe){var Ze=this;this.manager=Ee,this.callback=Pe,this.element=Ee.element,this.target=Ee.options.inputTarget,this.domHandler=function(bt){A(Ee.options.enable,[Ee])&&Ze.handler(bt)},this.init()}function k(Ee,Pe,Ze){var bt=Ze.pointers.length,Gt=Ze.changedPointers.length,Yt=1&Pe&&bt-Gt==0,li=12&Pe&&bt-Gt==0;Ze.isFirst=!!Yt,Ze.isFinal=!!li,Yt&&(Ee.session={}),Ze.eventType=Pe,function(Ee,Pe){var Ze=Ee.session,bt=Pe.pointers,Gt=bt.length;Ze.firstInput||(Ze.firstInput=xt(Pe)),Gt>1&&!Ze.firstMultiple?Ze.firstMultiple=xt(Pe):1===Gt&&(Ze.firstMultiple=!1);var Yt=Ze.firstInput,li=Ze.firstMultiple,Vr=li?li.center:Yt.center,es=Pe.center=Nt(bt);Pe.timeStamp=Y(),Pe.deltaTime=Pe.timeStamp-Yt.timeStamp,Pe.angle=Ti(Vr,es),Pe.distance=Yn(Vr,es),function(Ee,Pe){var Ze=Pe.center,bt=Ee.offsetDelta||{},Gt=Ee.prevDelta||{},Yt=Ee.prevInput||{};(1===Pe.eventType||4===Yt.eventType)&&(Gt=Ee.prevDelta={x:Yt.deltaX||0,y:Yt.deltaY||0},bt=Ee.offsetDelta={x:Ze.x,y:Ze.y}),Pe.deltaX=Gt.x+(Ze.x-bt.x),Pe.deltaY=Gt.y+(Ze.y-bt.y)}(Ze,Pe),Pe.offsetDirection=kn(Pe.deltaX,Pe.deltaY);var xs=On(Pe.deltaTime,Pe.deltaX,Pe.deltaY);Pe.overallVelocityX=xs.x,Pe.overallVelocityY=xs.y,Pe.overallVelocity=F(xs.x)>F(xs.y)?xs.x:xs.y,Pe.scale=li?function(Ee,Pe){return Yn(Pe[0],Pe[1],gt)/Yn(Ee[0],Ee[1],gt)}(li.pointers,bt):1,Pe.rotation=li?function(Ee,Pe){return Ti(Pe[1],Pe[0],gt)+Ti(Ee[1],Ee[0],gt)}(li.pointers,bt):0,Pe.maxPointers=Ze.prevInput?Pe.pointers.length>Ze.prevInput.maxPointers?Pe.pointers.length:Ze.prevInput.maxPointers:Pe.pointers.length,function(Ee,Pe){var Gt,Yt,li,Vr,Ze=Ee.lastInterval||Pe,bt=Pe.timeStamp-Ze.timeStamp;if(8!=Pe.eventType&&(bt>25||Ze.velocity===Q)){var es=Pe.deltaX-Ze.deltaX,xs=Pe.deltaY-Ze.deltaY,Qn=On(bt,es,xs);Yt=Qn.x,li=Qn.y,Gt=F(Qn.x)>F(Qn.y)?Qn.x:Qn.y,Vr=kn(es,xs),Ee.lastInterval=Pe}else Gt=Ze.velocity,Yt=Ze.velocityX,li=Ze.velocityY,Vr=Ze.direction;Pe.velocity=Gt,Pe.velocityX=Yt,Pe.velocityY=li,Pe.direction=Vr}(Ze,Pe);var Qn=Ee.element;M(Pe.srcEvent.target,Qn)&&(Qn=Pe.srcEvent.target),Pe.target=Qn}(Ee,Ze),Ee.emit("hammer.input",Ze),Ee.recognize(Ze),Ee.session.prevInput=Ze}function xt(Ee){for(var Pe=[],Ze=0;Ze<Ee.pointers.length;)Pe[Ze]={clientX:V(Ee.pointers[Ze].clientX),clientY:V(Ee.pointers[Ze].clientY)},Ze++;return{timeStamp:Y(),pointers:Pe,center:Nt(Pe),deltaX:Ee.deltaX,deltaY:Ee.deltaY}}function Nt(Ee){var Pe=Ee.length;if(1===Pe)return{x:V(Ee[0].clientX),y:V(Ee[0].clientY)};for(var Ze=0,bt=0,Gt=0;Gt<Pe;)Ze+=Ee[Gt].clientX,bt+=Ee[Gt].clientY,Gt++;return{x:V(Ze/Pe),y:V(bt/Pe)}}function On(Ee,Pe,Ze){return{x:Pe/Ee||0,y:Ze/Ee||0}}function kn(Ee,Pe){return Ee===Pe?1:F(Ee)>=F(Pe)?Ee<0?2:4:Pe<0?8:16}function Yn(Ee,Pe,Ze){Ze||(Ze=_t);var bt=Pe[Ze[0]]-Ee[Ze[0]],Gt=Pe[Ze[1]]-Ee[Ze[1]];return Math.sqrt(bt*bt+Gt*Gt)}function Ti(Ee,Pe,Ze){return Ze||(Ze=_t),180*Math.atan2(Pe[Ze[1]]-Ee[Ze[1]],Pe[Ze[0]]-Ee[Ze[0]])/Math.PI}Ae.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(Ie(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&H(this.element,this.evEl,this.domHandler),this.evTarget&&H(this.target,this.evTarget,this.domHandler),this.evWin&&H(Ie(this.element),this.evWin,this.domHandler)}};var Ls={mousedown:1,mousemove:2,mouseup:4},gs="mousedown",Bs="mousemove mouseup";function Qr(){this.evEl=gs,this.evWin=Bs,this.pressed=!1,Ae.apply(this,arguments)}b(Qr,Ae,{handler:function(Pe){var Ze=Ls[Pe.type];1&Ze&&0===Pe.button&&(this.pressed=!0),2&Ze&&1!==Pe.which&&(Ze=4),this.pressed&&(4&Ze&&(this.pressed=!1),this.callback(this.manager,Ze,{pointers:[Pe],changedPointers:[Pe],pointerType:J,srcEvent:Pe}))}});var el={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},kl={2:Qe,3:"pen",4:J,5:"kinect"},Sa="pointerdown",Es="pointermove pointerup pointercancel";function Jt(){this.evEl=Sa,this.evWin=Es,Ae.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ee.MSPointerEvent&&!ee.PointerEvent&&(Sa="MSPointerDown",Es="MSPointerMove MSPointerUp MSPointerCancel"),b(Jt,Ae,{handler:function(Pe){var Ze=this.store,bt=!1,Gt=Pe.type.toLowerCase().replace("ms",""),Yt=el[Gt],li=kl[Pe.pointerType]||Pe.pointerType,Vr=li==Qe,es=S(Ze,Pe.pointerId,"pointerId");1&Yt&&(0===Pe.button||Vr)?es<0&&(Ze.push(Pe),es=Ze.length-1):12&Yt&&(bt=!0),!(es<0)&&(Ze[es]=Pe,this.callback(this.manager,Yt,{pointers:Ze,changedPointers:[Pe],pointerType:li,srcEvent:Pe}),bt&&Ze.splice(es,1))}});var tl={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",ut="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=ot,this.evWin=ut,this.started=!1,Ae.apply(this,arguments)}function be(Ee,Pe){var Ze=G(Ee.touches),bt=G(Ee.changedTouches);return 12&Pe&&(Ze=ne(Ze.concat(bt),"identifier",!0)),[Ze,bt]}b(ft,Ae,{handler:function(Pe){var Ze=tl[Pe.type];if(1===Ze&&(this.started=!0),this.started){var bt=be.call(this,Pe,Ze);12&Ze&&bt[0].length-bt[1].length==0&&(this.started=!1),this.callback(this.manager,Ze,{pointers:bt[0],changedPointers:bt[1],pointerType:Qe,srcEvent:Pe})}}});var Ce={touchstart:1,touchmove:2,touchend:4,touchcancel:8},$e="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=$e,this.targetIds={},Ae.apply(this,arguments)}function it(Ee,Pe){var Ze=G(Ee.touches),bt=this.targetIds;if(3&Pe&&1===Ze.length)return bt[Ze[0].identifier]=!0,[Ze,Ze];var Gt,Yt,li=G(Ee.changedTouches),Vr=[],es=this.target;if(Yt=Ze.filter(function(xs){return M(xs.target,es)}),1===Pe)for(Gt=0;Gt<Yt.length;)bt[Yt[Gt].identifier]=!0,Gt++;for(Gt=0;Gt<li.length;)bt[li[Gt].identifier]&&Vr.push(li[Gt]),12&Pe&&delete bt[li[Gt].identifier],Gt++;return Vr.length?[ne(Yt.concat(Vr),"identifier",!0),Vr]:void 0}function Dt(){Ae.apply(this,arguments);var Ee=x(this.handler,this);this.touch=new ht(this.manager,Ee),this.mouse=new Qr(this.manager,Ee),this.primaryTouch=null,this.lastTouches=[]}function Xt(Ee,Pe){1&Ee?(this.primaryTouch=Pe.changedPointers[0].identifier,zn.call(this,Pe)):12&Ee&&zn.call(this,Pe)}function zn(Ee){var Pe=Ee.changedPointers[0];if(Pe.identifier===this.primaryTouch){var Ze={x:Pe.clientX,y:Pe.clientY};this.lastTouches.push(Ze);var bt=this.lastTouches;setTimeout(function(){var Yt=bt.indexOf(Ze);Yt>-1&&bt.splice(Yt,1)},2500)}}function ai(Ee){for(var Pe=Ee.srcEvent.clientX,Ze=Ee.srcEvent.clientY,bt=0;bt<this.lastTouches.length;bt++){var Gt=this.lastTouches[bt],Yt=Math.abs(Pe-Gt.x),li=Math.abs(Ze-Gt.y);if(Yt<=25&&li<=25)return!0}return!1}b(ht,Ae,{handler:function(Pe){var Ze=Ce[Pe.type],bt=it.call(this,Pe,Ze);!bt||this.callback(this.manager,Ze,{pointers:bt[0],changedPointers:bt[1],pointerType:Qe,srcEvent:Pe})}}),b(Dt,Ae,{handler:function(Pe,Ze,bt){var Yt=bt.pointerType==J;if(!(Yt&&bt.sourceCapabilities&&bt.sourceCapabilities.firesTouchEvents)){if(bt.pointerType==Qe)Xt.call(this,Ze,bt);else if(Yt&&ai.call(this,bt))return;this.callback(Pe,Ze,bt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Nn=ce(fe.style,"touchAction"),bn=Nn!==Q,$n="compute",lr="manipulation",cr="none",Xn="pan-x",$i="pan-y",xa=function(){if(!bn)return!1;var Ee={},Pe=ee.CSS&&ee.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ze){Ee[Ze]=!Pe||ee.CSS.supports("touch-action",Ze)}),Ee}();function Zr(Ee,Pe){this.manager=Ee,this.set(Pe)}function Ot(Ee){this.options=T({},this.defaults,Ee||{}),this.id=se++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function et(Ee){return 16&Ee?"cancel":8&Ee?"end":4&Ee?"move":2&Ee?"start":""}function Wt(Ee){return 16==Ee?"down":8==Ee?"up":2==Ee?"left":4==Ee?"right":""}function Ct(Ee,Pe){var Ze=Pe.manager;return Ze?Ze.get(Ee):Ee}function vn(){Ot.apply(this,arguments)}function Ss(){vn.apply(this,arguments),this.pX=null,this.pY=null}function Jr(){vn.apply(this,arguments)}function Qs(){Ot.apply(this,arguments),this._timer=null,this._input=null}function Ll(){vn.apply(this,arguments)}function po(){vn.apply(this,arguments)}function jr(){Ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function js(Ee,Pe){return(Pe=Pe||{}).recognizers=E(Pe.recognizers,js.defaults.preset),new go(Ee,Pe)}function go(Ee,Pe){this.options=T({},js.defaults,Pe||{}),this.options.inputTarget=this.options.inputTarget||Ee,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ee,this.input=function(Ee){return new(Ee.options.inputClass||(ve?Jt:Fe?ht:re?Dt:Qr))(Ee,k)}(this),this.touchAction=new Zr(this,this.options.touchAction),Bl(this,!0),C(this.options.recognizers,function(Ze){var bt=this.add(new Ze[0](Ze[1]));Ze[2]&&bt.recognizeWith(Ze[2]),Ze[3]&&bt.requireFailure(Ze[3])},this)}function Bl(Ee,Pe){var bt,Ze=Ee.element;Ze.style&&(C(Ee.options.cssProps,function(Gt,Yt){bt=ce(Ze.style,Yt),Pe?(Ee.oldCssProps[bt]=Ze.style[bt],Ze.style[bt]=Gt):Ze.style[bt]=Ee.oldCssProps[bt]||""}),Pe||(Ee.oldCssProps={}))}Zr.prototype={set:function(Ee){Ee==$n&&(Ee=this.compute()),bn&&this.manager.element.style&&xa[Ee]&&(this.manager.element.style[Nn]=Ee),this.actions=Ee.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ee=[];return C(this.manager.recognizers,function(Pe){A(Pe.options.enable,[Pe])&&(Ee=Ee.concat(Pe.getTouchAction()))}),function(Ee){if(P(Ee,cr))return cr;var Pe=P(Ee,Xn),Ze=P(Ee,$i);return Pe&&Ze?cr:Pe||Ze?Pe?Xn:$i:P(Ee,lr)?lr:"auto"}(Ee.join(" "))},preventDefaults:function(Ee){var Pe=Ee.srcEvent,Ze=Ee.offsetDirection;if(!this.manager.session.prevented){var bt=this.actions,Gt=P(bt,cr)&&!xa[cr],Yt=P(bt,$i)&&!xa[$i],li=P(bt,Xn)&&!xa[Xn];if(Gt&&1===Ee.pointers.length&&Ee.distance<2&&Ee.deltaTime<250)return;return li&&Yt||!(Gt||Yt&&6&Ze||li&&24&Ze)?void 0:this.preventSrc(Pe)}Pe.preventDefault()},preventSrc:function(Ee){this.manager.session.prevented=!0,Ee.preventDefault()}},Ot.prototype={defaults:{},set:function(Ee){return T(this.options,Ee),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ee){if(w(Ee,"recognizeWith",this))return this;var Pe=this.simultaneous;return Pe[(Ee=Ct(Ee,this)).id]||(Pe[Ee.id]=Ee,Ee.recognizeWith(this)),this},dropRecognizeWith:function(Ee){return w(Ee,"dropRecognizeWith",this)||(Ee=Ct(Ee,this),delete this.simultaneous[Ee.id]),this},requireFailure:function(Ee){if(w(Ee,"requireFailure",this))return this;var Pe=this.requireFail;return-1===S(Pe,Ee=Ct(Ee,this))&&(Pe.push(Ee),Ee.requireFailure(this)),this},dropRequireFailure:function(Ee){if(w(Ee,"dropRequireFailure",this))return this;Ee=Ct(Ee,this);var Pe=S(this.requireFail,Ee);return Pe>-1&&this.requireFail.splice(Pe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ee){return!!this.simultaneous[Ee.id]},emit:function(Ee){var Pe=this,Ze=this.state;function bt(Gt){Pe.manager.emit(Gt,Ee)}Ze<8&&bt(Pe.options.event+et(Ze)),bt(Pe.options.event),Ee.additionalEvent&&bt(Ee.additionalEvent),Ze>=8&&bt(Pe.options.event+et(Ze))},tryEmit:function(Ee){if(this.canEmit())return this.emit(Ee);this.state=32},canEmit:function(){for(var Ee=0;Ee<this.requireFail.length;){if(!(33&this.requireFail[Ee].state))return!1;Ee++}return!0},recognize:function(Ee){var Pe=T({},Ee);if(!A(this.options.enable,[this,Pe]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(Pe),30&this.state&&this.tryEmit(Pe)},process:function(Ee){},getTouchAction:function(){},reset:function(){}},b(vn,Ot,{defaults:{pointers:1},attrTest:function(Ee){var Pe=this.options.pointers;return 0===Pe||Ee.pointers.length===Pe},process:function(Ee){var Pe=this.state,Ze=Ee.eventType,bt=6&Pe,Gt=this.attrTest(Ee);return bt&&(8&Ze||!Gt)?16|Pe:bt||Gt?4&Ze?8|Pe:2&Pe?4|Pe:2:32}}),b(Ss,vn,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var Ee=this.options.direction,Pe=[];return 6&Ee&&Pe.push($i),24&Ee&&Pe.push(Xn),Pe},directionTest:function(Ee){var Pe=this.options,Ze=!0,bt=Ee.distance,Gt=Ee.direction,Yt=Ee.deltaX,li=Ee.deltaY;return Gt&Pe.direction||(6&Pe.direction?(Gt=0===Yt?1:Yt<0?2:4,Ze=Yt!=this.pX,bt=Math.abs(Ee.deltaX)):(Gt=0===li?1:li<0?8:16,Ze=li!=this.pY,bt=Math.abs(Ee.deltaY))),Ee.direction=Gt,Ze&&bt>Pe.threshold&&Gt&Pe.direction},attrTest:function(Ee){return vn.prototype.attrTest.call(this,Ee)&&(2&this.state||!(2&this.state)&&this.directionTest(Ee))},emit:function(Ee){this.pX=Ee.deltaX,this.pY=Ee.deltaY;var Pe=Wt(Ee.direction);Pe&&(Ee.additionalEvent=this.options.event+Pe),this._super.emit.call(this,Ee)}}),b(Jr,vn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[cr]},attrTest:function(Ee){return this._super.attrTest.call(this,Ee)&&(Math.abs(Ee.scale-1)>this.options.threshold||2&this.state)},emit:function(Ee){1!==Ee.scale&&(Ee.additionalEvent=this.options.event+(Ee.scale<1?"in":"out")),this._super.emit.call(this,Ee)}}),b(Qs,Ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Ee){var Pe=this.options,Ze=Ee.pointers.length===Pe.pointers,bt=Ee.distance<Pe.threshold,Gt=Ee.deltaTime>Pe.time;if(this._input=Ee,!bt||!Ze||12&Ee.eventType&&!Gt)this.reset();else if(1&Ee.eventType)this.reset(),this._timer=L(function(){this.state=8,this.tryEmit()},Pe.time,this);else if(4&Ee.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Ee){8===this.state&&(Ee&&4&Ee.eventType?this.manager.emit(this.options.event+"up",Ee):(this._input.timeStamp=Y(),this.manager.emit(this.options.event,this._input)))}}),b(Ll,vn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[cr]},attrTest:function(Ee){return this._super.attrTest.call(this,Ee)&&(Math.abs(Ee.rotation)>this.options.threshold||2&this.state)}}),b(po,vn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ss.prototype.getTouchAction.call(this)},attrTest:function(Ee){var Ze,Pe=this.options.direction;return 30&Pe?Ze=Ee.overallVelocity:6&Pe?Ze=Ee.overallVelocityX:24&Pe&&(Ze=Ee.overallVelocityY),this._super.attrTest.call(this,Ee)&&Pe&Ee.offsetDirection&&Ee.distance>this.options.threshold&&Ee.maxPointers==this.options.pointers&&F(Ze)>this.options.velocity&&4&Ee.eventType},emit:function(Ee){var Pe=Wt(Ee.offsetDirection);Pe&&this.manager.emit(this.options.event+Pe,Ee),this.manager.emit(this.options.event,Ee)}}),b(jr,Ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[lr]},process:function(Ee){var Pe=this.options,Ze=Ee.pointers.length===Pe.pointers,bt=Ee.distance<Pe.threshold,Gt=Ee.deltaTime<Pe.time;if(this.reset(),1&Ee.eventType&&0===this.count)return this.failTimeout();if(bt&&Gt&&Ze){if(4!=Ee.eventType)return this.failTimeout();var Yt=!this.pTime||Ee.timeStamp-this.pTime<Pe.interval,li=!this.pCenter||Yn(this.pCenter,Ee.center)<Pe.posThreshold;if(this.pTime=Ee.timeStamp,this.pCenter=Ee.center,li&&Yt?this.count+=1:this.count=1,this._input=Ee,0==this.count%Pe.taps)return this.hasRequireFailures()?(this._timer=L(function(){this.state=8,this.tryEmit()},Pe.interval,this),2):8}return 32},failTimeout:function(){return this._timer=L(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),js.VERSION="2.0.7",js.defaults={domEvents:!1,touchAction:$n,enable:!0,inputTarget:null,inputClass:null,preset:[[Ll,{enable:!1}],[Jr,{enable:!1},["rotate"]],[po,{direction:6}],[Ss,{direction:6},["swipe"]],[jr],[jr,{event:"doubletap",taps:2},["tap"]],[Qs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},go.prototype={set:function(Ee){return T(this.options,Ee),Ee.touchAction&&this.touchAction.update(),Ee.inputTarget&&(this.input.destroy(),this.input.target=Ee.inputTarget,this.input.init()),this},stop:function(Ee){this.session.stopped=Ee?2:1},recognize:function(Ee){var Pe=this.session;if(!Pe.stopped){this.touchAction.preventDefaults(Ee);var Ze,bt=this.recognizers,Gt=Pe.curRecognizer;(!Gt||Gt&&8&Gt.state)&&(Gt=Pe.curRecognizer=null);for(var Yt=0;Yt<bt.length;)Ze=bt[Yt],2===Pe.stopped||Gt&&Ze!=Gt&&!Ze.canRecognizeWith(Gt)?Ze.reset():Ze.recognize(Ee),!Gt&&14&Ze.state&&(Gt=Pe.curRecognizer=Ze),Yt++}},get:function(Ee){if(Ee instanceof Ot)return Ee;for(var Pe=this.recognizers,Ze=0;Ze<Pe.length;Ze++)if(Pe[Ze].options.event==Ee)return Pe[Ze];return null},add:function(Ee){if(w(Ee,"add",this))return this;var Pe=this.get(Ee.options.event);return Pe&&this.remove(Pe),this.recognizers.push(Ee),Ee.manager=this,this.touchAction.update(),Ee},remove:function(Ee){if(w(Ee,"remove",this))return this;if(Ee=this.get(Ee)){var Pe=this.recognizers,Ze=S(Pe,Ee);-1!==Ze&&(Pe.splice(Ze,1),this.touchAction.update())}return this},on:function(Ee,Pe){if(Ee!==Q&&Pe!==Q){var Ze=this.handlers;return C(Z(Ee),function(bt){Ze[bt]=Ze[bt]||[],Ze[bt].push(Pe)}),this}},off:function(Ee,Pe){if(Ee!==Q){var Ze=this.handlers;return C(Z(Ee),function(bt){Pe?Ze[bt]&&Ze[bt].splice(S(Ze[bt],Pe),1):delete Ze[bt]}),this}},emit:function(Ee,Pe){this.options.domEvents&&function(Ee,Pe){var Ze=Et.createEvent("Event");Ze.initEvent(Ee,!0,!0),Ze.gesture=Pe,Pe.target.dispatchEvent(Ze)}(Ee,Pe);var Ze=this.handlers[Ee]&&this.handlers[Ee].slice();if(Ze&&Ze.length){Pe.type=Ee,Pe.preventDefault=function(){Pe.srcEvent.preventDefault()};for(var bt=0;bt<Ze.length;)Ze[bt](Pe),bt++}},destroy:function(){this.element&&Bl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},T(js,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:go,Input:Ae,TouchAction:Zr,TouchInput:ht,MouseInput:Qr,PointerEventInput:Jt,TouchMouseInput:Dt,SingleTouchInput:ft,Recognizer:Ot,AttrRecognizer:vn,Tap:jr,Pan:Ss,Swipe:po,Pinch:Jr,Rotate:Ll,Press:Qs,on:I,off:H,each:C,merge:v,extend:y,assign:T,inherit:b,bindFn:x,prefixed:ce}),(void 0!==ee?ee:"undefined"!=typeof self?self:{}).Hammer=js,(lt=function(){return js}.call(Ye,Je,Ye,jt))!==Q&&(jt.exports=lt)}(window,document)},815:function(jt,Ye,Je){var lt;jt=Je.nmd(jt),function(){var ee,we="Expected a function",K="__lodash_hash_undefined__",F="__lodash_placeholder__",A=32,I=128,te=1/0,Ie=9007199254740991,ve=4294967295,He=[["ary",I],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",A],["partialRight",64],["rearg",256]],J="[object Arguments]",ae="[object Array]",Te="[object Boolean]",xe="[object Date]",Se="[object Error]",Ue="[object Function]",Ke="[object GeneratorFunction]",Be="[object Map]",X="[object Number]",ge="[object Object]",le="[object Promise]",_t="[object RegExp]",gt="[object Set]",Ae="[object String]",U="[object Symbol]",z="[object WeakMap]",nt="[object ArrayBuffer]",xt="[object DataView]",Nt="[object Float32Array]",On="[object Float64Array]",kn="[object Int8Array]",Yn="[object Int16Array]",Ti="[object Int32Array]",wi="[object Uint8Array]",Xr="[object Uint8ClampedArray]",Ls="[object Uint16Array]",gs="[object Uint32Array]",Bs=/\b__p \+= '';/g,Qr=/\b(__p \+=) '' \+/g,el=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kl=/&(?:amp|lt|gt|quot|#39);/g,Sa=/[&<>"']/g,Es=RegExp(kl.source),Jt=RegExp(Sa.source),tl=/<%-([\s\S]+?)%>/g,ot=/<%([\s\S]+?)%>/g,ut=/<%=([\s\S]+?)%>/g,ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,ht=RegExp($e.source),it=/^\s+/,Tt=/\s/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,Xt=/,? & /,zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ai=/[()=,{}\[\]\/\s]/,Nn=/\\(\\)?/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$n=/\w*$/,Tn=/^[-+]0x[0-9a-f]+$/i,lr=/^0b[01]+$/i,cr=/^\[object .+?Constructor\]$/,Xn=/^0o[0-7]+$/i,$i=/^(?:0|[1-9]\d*)$/,xa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zr=/($^)/,oe=/['\n\r\u2028\u2029\\]/g,me="\\ud800-\\udfff",ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",ze="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",Ss="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qs="["+me+"]",Ll="["+Ss+"]",po="["+ie+"]",jr="\\d+",js="["+Me+"]",xc="["+ze+"]",Sn="[^"+me+Ss+jr+Me+ze+Ct+"]",go="\\ud83c[\\udffb-\\udfff]",Ca="[^"+me+"]",wd="(?:\\ud83c[\\udde6-\\uddff]){2}",Ee="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="["+Ct+"]",bt="(?:"+xc+"|"+Sn+")",Gt="(?:"+Pe+"|"+Sn+")",Yt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",li="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Vr="(?:"+po+"|"+go+")?",es="["+vn+"]?",TC=es+Vr+"(?:\\u200d(?:"+[Ca,wd,Ee].join("|")+")"+es+Vr+")*",Ed="(?:"+[js,wd,Ee].join("|")+")"+TC,tr="(?:"+[Ca+po+"?",po,wd,Ee,Qs].join("|")+")",fp=RegExp("['\u2019]","g"),Jm=RegExp(po,"g"),Dh=RegExp(go+"(?="+go+")|"+tr+TC,"g"),sv=RegExp([Pe+"?"+xc+"+"+Yt+"(?="+[Ll,Pe,"$"].join("|")+")",Gt+"+"+li+"(?="+[Ll,Pe+bt,"$"].join("|")+")",Pe+"?"+bt+"+"+Yt,Pe+"+"+li,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jr,Ed].join("|"),"g"),MC=RegExp("[\\u200d"+me+ie+vn+"]"),jl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ih=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],DC=-1,ln={};ln[Nt]=ln[On]=ln[kn]=ln[Yn]=ln[Ti]=ln[wi]=ln[Xr]=ln[Ls]=ln[gs]=!0,ln[J]=ln[ae]=ln[nt]=ln[Te]=ln[xt]=ln[xe]=ln[Se]=ln[Ue]=ln[Be]=ln[X]=ln[ge]=ln[_t]=ln[gt]=ln[Ae]=ln[z]=!1;var ur={};ur[J]=ur[ae]=ur[nt]=ur[xt]=ur[Te]=ur[xe]=ur[Nt]=ur[On]=ur[kn]=ur[Yn]=ur[Ti]=ur[Be]=ur[X]=ur[ge]=ur[_t]=ur[gt]=ur[Ae]=ur[U]=ur[wi]=ur[Xr]=ur[Ls]=ur[gs]=!0,ur[Se]=ur[Ue]=ur[z]=!1;var on={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},IC=parseFloat,cv=parseInt,Rt="object"==typeof global&&global&&global.Object===Object&&global,Vs="object"==typeof self&&self&&self.Object===Object&&self,Vi=Rt||Vs||Function("return this")(),Vl=Ye&&!Ye.nodeType&&Ye,Aa=Vl&&jt&&!jt.nodeType&&jt,Oo=Aa&&Aa.exports===Vl,e_=Oo&&Rt.process,Sr=function(){try{return Aa&&Aa.require&&Aa.require("util").types||e_&&e_.binding&&e_.binding("util")}catch(It){}}(),nn=Sr&&Sr.isArrayBuffer,hi=Sr&&Sr.isDate,pr=Sr&&Sr.isMap,mo=Sr&&Sr.isRegExp,Cc=Sr&&Sr.isSet,as=Sr&&Sr.isTypedArray;function ls(ct,It,St){switch(St.length){case 0:return ct.call(It);case 1:return ct.call(It,St[0]);case 2:return ct.call(It,St[0],St[1]);case 3:return ct.call(It,St[0],St[1],St[2])}return ct.apply(It,St)}function Ur(ct,It,St,hn){for(var Dn=-1,Li=null==ct?0:ct.length;++Dn<Li;){var ts=ct[Dn];It(hn,ts,St(ts),ct)}return hn}function Us(ct,It){for(var St=-1,hn=null==ct?0:ct.length;++St<hn&&!1!==It(ct[St],St,ct););return ct}function Sd(ct,It){for(var St=null==ct?0:ct.length;St--&&!1!==It(ct[St],St,ct););return ct}function ti(ct,It){for(var St=-1,hn=null==ct?0:ct.length;++St<hn;)if(!It(ct[St],St,ct))return!1;return!0}function Ta(ct,It){for(var St=-1,hn=null==ct?0:ct.length,Dn=0,Li=[];++St<hn;){var ts=ct[St];It(ts,St,ct)&&(Li[Dn++]=ts)}return Li}function Ul(ct,It){return!(null==ct||!ct.length)&&nl(ct,It,0)>-1}function Oh(ct,It,St){for(var hn=-1,Dn=null==ct?0:ct.length;++hn<Dn;)if(St(It,ct[hn]))return!0;return!1}function Yi(ct,It){for(var St=-1,hn=null==ct?0:ct.length,Dn=Array(hn);++St<hn;)Dn[St]=It(ct[St],St,ct);return Dn}function zr(ct,It){for(var St=-1,hn=It.length,Dn=ct.length;++St<hn;)ct[Dn+St]=It[St];return ct}function _u(ct,It,St,hn){var Dn=-1,Li=null==ct?0:ct.length;for(hn&&Li&&(St=ct[++Dn]);++Dn<Li;)St=It(St,ct[Dn],Dn,ct);return St}function xd(ct,It,St,hn){var Dn=null==ct?0:ct.length;for(hn&&Dn&&(St=ct[--Dn]);Dn--;)St=It(St,ct[Dn],Dn,ct);return St}function Ro(ct,It){for(var St=-1,hn=null==ct?0:ct.length;++St<hn;)if(It(ct[St],St,ct))return!0;return!1}var dr=t_("length");function Rh(ct,It,St){var hn;return St(ct,function(Dn,Li,ts){if(It(Dn,Li,ts))return hn=Li,!1}),hn}function Cd(ct,It,St,hn){for(var Dn=ct.length,Li=St+(hn?1:-1);hn?Li--:++Li<Dn;)if(It(ct[Li],Li,ct))return Li;return-1}function nl(ct,It,St){return It==It?function(ct,It,St){for(var hn=St-1,Dn=ct.length;++hn<Dn;)if(ct[hn]===It)return hn;return-1}(ct,It,St):Cd(ct,Ac,St)}function pp(ct,It,St,hn){for(var Dn=St-1,Li=ct.length;++Dn<Li;)if(hn(ct[Dn],It))return Dn;return-1}function Ac(ct){return ct!=ct}function Cs(ct,It){var St=null==ct?0:ct.length;return St?Ad(ct,It)/St:NaN}function t_(ct){return function(It){return null==It?ee:It[ct]}}function Qo(ct){return function(It){return null==ct?ee:ct[It]}}function Zo(ct,It,St,hn,Dn){return Dn(ct,function(Li,ts,Ki){St=hn?(hn=!1,Li):It(St,Li,ts,Ki)}),St}function Ad(ct,It){for(var St,hn=-1,Dn=ct.length;++hn<Dn;){var Li=It(ct[hn]);Li!==ee&&(St=St===ee?Li:St+Li)}return St}function Td(ct,It){for(var St=-1,hn=Array(ct);++St<ct;)hn[St]=It(St);return hn}function uv(ct){return ct&&ct.slice(0,Tc(ct)+1).replace(it,"")}function Jo(ct){return function(It){return ct(It)}}function i_(ct,It){return Yi(It,function(St){return ct[St]})}function Nh(ct,It){return ct.has(It)}function NC(ct,It){for(var St=-1,hn=ct.length;++St<hn&&nl(It,ct[St],0)>-1;);return St}function PC(ct,It){for(var St=ct.length;St--&&nl(It,ct[St],0)>-1;);return St}function dF(ct,It){for(var St=ct.length,hn=0;St--;)ct[St]===It&&++hn;return hn}var hF=Qo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),fF=Qo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function pF(ct){return"\\"+on[ct]}function Ph(ct){return MC.test(ct)}function dv(ct){var It=-1,St=Array(ct.size);return ct.forEach(function(hn,Dn){St[++It]=[Dn,hn]}),St}function FC(ct,It){return function(St){return ct(It(St))}}function yu(ct,It){for(var St=-1,hn=ct.length,Dn=0,Li=[];++St<hn;){var ts=ct[St];(ts===It||ts===F)&&(ct[St]=F,Li[Dn++]=St)}return Li}function r_(ct){var It=-1,St=Array(ct.size);return ct.forEach(function(hn){St[++It]=hn}),St}function Fh(ct){return Ph(ct)?function(ct){for(var It=Dh.lastIndex=0;Dh.test(ct);)++It;return It}(ct):dr(ct)}function il(ct){return Ph(ct)?function(ct){return ct.match(Dh)||[]}(ct):function(ct){return ct.split("")}(ct)}function Tc(ct){for(var It=ct.length;It--&&Tt.test(ct.charAt(It)););return It}var o_=Qo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),kh=function ct(It){var d,St=(It=null==It?Vi:kh.defaults(Vi.Object(),It,kh.pick(Vi,Ih))).Array,hn=It.Date,Dn=It.Error,Li=It.Function,ts=It.Math,Ki=It.Object,a_=It.RegExp,l_=It.String,Da=It.TypeError,gr=St.prototype,bu=Ki.prototype,gp=It["__core-js_shared__"],xr=Li.prototype.toString,Xi=bu.hasOwnProperty,vF=0,Lh=(d=/[^.]+$/.exec(gp&&gp.keys&&gp.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",Zs=bu.toString,BC=xr.call(Ki),c_=Vi._,Md=a_("^"+xr.call(Xi).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zs=Oo?It.Buffer:ee,zl=It.Symbol,Dd=It.Uint8Array,pv=zs?zs.allocUnsafe:ee,Ia=FC(Ki.getPrototypeOf,Ki),u_=Ki.create,mp=bu.propertyIsEnumerable,Bn=gr.splice,jC=zl?zl.isConcatSpreadable:ee,Bh=zl?zl.iterator:ee,vu=zl?zl.toStringTag:ee,_p=function(){try{var d=Lc(Ki,"defineProperty");return d({},"",{}),d}catch(f){}}(),gv=It.clearTimeout!==Vi.clearTimeout&&It.clearTimeout,VC=hn&&hn.now!==Vi.Date.now&&hn.now,UC=It.setTimeout!==Vi.setTimeout&&It.setTimeout,Vt=ts.ceil,Ei=ts.floor,Cr=Ki.getOwnPropertySymbols,cs=zs?zs.isBuffer:ee,d_=It.isFinite,jh=gr.join,rl=FC(Ki.keys,Ki),Hr=ts.max,ms=ts.min,wF=hn.now,zC=It.parseInt,Vh=ts.random,yp=gr.reverse,As=Lc(It,"DataView"),_o=Lc(It,"Map"),bp=Lc(It,"Promise"),Oa=Lc(It,"Set"),No=Lc(It,"WeakMap"),Uh=Lc(Ki,"create"),zh=No&&new No,Id={},HC=Ru(As),h_=Ru(_o),f_=Ru(bp),mv=Ru(Oa),p_=Ru(No),vp=zl?zl.prototype:ee,Od=vp?vp.valueOf:ee,Hh=vp?vp.toString:ee;function De(d){if(Mr(d)&&!Rn(d)&&!(d instanceof fi)){if(d instanceof Po)return d;if(Xi.call(d,"__wrapped__"))return nf(d)}return new Po(d)}var wu=function(){function d(){}return function(f){if(!Tr(f))return{};if(u_)return u_(f);d.prototype=f;var _=new d;return d.prototype=ee,_}}();function Gh(){}function Po(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=ee}function fi(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ve,this.__views__=[]}function yo(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var B=d[f];this.set(B[0],B[1])}}function Hl(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var B=d[f];this.set(B[0],B[1])}}function sl(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var B=d[f];this.set(B[0],B[1])}}function Ra(d){var f=-1,_=null==d?0:d.length;for(this.__data__=new sl;++f<_;)this.add(d[f])}function Na(d){var f=this.__data__=new Hl(d);this.size=f.size}function Wh(d,f){var _=Rn(d),B=!_&&pl(d),de=!_&&!B&&gl(d),Ne=!_&&!B&&!de&&cf(d),Xe=_||B||de||Ne,tt=Xe?Td(d.length,l_):[],dt=tt.length;for(var kt in d)(f||Xi.call(d,kt))&&(!Xe||!("length"==kt||de&&("offset"==kt||"parent"==kt)||Ne&&("buffer"==kt||"byteLength"==kt||"byteOffset"==kt)||Bo(kt,dt)))&&tt.push(kt);return tt}function y_(d){var f=d.length;return f?d[Gl(0,f-1)]:ee}function vv(d,f){return Wd(eo(d),Eu(f,0,d.length))}function Rd(d){return Wd(eo(d))}function b_(d,f,_){(_!==ee&&!In(d[f],_)||_===ee&&!(f in d))&&al(d,f,_)}function ol(d,f,_){var B=d[f];(!Xi.call(d,f)||!In(B,_)||_===ee&&!(f in d))&&al(d,f,_)}function Nd(d,f){for(var _=d.length;_--;)if(In(d[_][0],f))return _;return-1}function Cp(d,f,_,B){return Ic(d,function(de,Ne,Xe){f(B,de,_(de),Xe)}),B}function JC(d,f){return d&&Fa(f,Os(f),d)}function al(d,f,_){"__proto__"==f&&_p?_p(d,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[f]=_}function v_(d,f){for(var _=-1,B=f.length,de=St(B),Ne=null==d;++_<B;)de[_]=Ne?ee:hf(d,f[_]);return de}function Eu(d,f,_){return d==d&&(_!==ee&&(d=d<=_?d:_),f!==ee&&(d=d>=f?d:f)),d}function Hs(d,f,_,B,de,Ne){var Xe,tt=1&f,dt=2&f,kt=4&f;if(_&&(Xe=de?_(d,B,de,Ne):_(d)),Xe!==ee)return Xe;if(!Tr(d))return d;var Lt=Rn(d);if(Lt){if(Xe=function(d){var f=d.length,_=new d.constructor(f);return f&&"string"==typeof d[0]&&Xi.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!tt)return eo(d,Xe)}else{var zt=$s(d),en=zt==Ue||zt==Ke;if(gl(d))return Np(d,tt);if(zt==ge||zt==J||en&&!de){if(Xe=dt||en?{}:Hv(d),!tt)return dt?function(d,f){return Fa(d,Vv(d),f)}(d,function(d,f){return d&&Fa(f,no(f),d)}(Xe,d)):function(d,f){return Fa(d,k_(d),f)}(d,JC(Xe,d))}else{if(!ur[zt])return de?d:{};Xe=function(d,f,_){var B=d.constructor;switch(f){case nt:return Mu(d);case Te:case xe:return new B(+d);case xt:return function(d,f){var _=f?Mu(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case Nt:case On:case kn:case Yn:case Ti:case wi:case Xr:case Ls:case gs:return O_(d,_);case Be:return new B;case X:case Ae:return new B(d);case _t:return function(d){var f=new d.constructor(d.source,$n.exec(d));return f.lastIndex=d.lastIndex,f}(d);case gt:return new B;case U:return function(d){return Od?Ki(Od.call(d)):{}}(d)}}(d,zt,tt)}}Ne||(Ne=new Na);var wn=Ne.get(d);if(wn)return wn;Ne.set(d,Xe),bT(d)?d.forEach(function(jn){Xe.add(Hs(jn,f,_,jn,d,Ne))}):gT(d)&&d.forEach(function(jn,mi){Xe.set(mi,Hs(jn,f,_,mi,d,Ne))});var gi=Lt?ee:(kt?dt?P_:Yl:dt?no:Os)(d);return Us(gi||d,function(jn,mi){gi&&(jn=d[mi=jn]),ol(Xe,mi,Hs(jn,f,_,mi,d,Ne))}),Xe}function Ap(d,f,_){var B=_.length;if(null==d)return!B;for(d=Ki(d);B--;){var de=_[B],Xe=d[de];if(Xe===ee&&!(de in d)||!(0,f[de])(Xe))return!1}return!0}function qh(d,f,_){if("function"!=typeof d)throw new Da(we);return ef(function(){d.apply(ee,_)},f)}function Dc(d,f,_,B){var de=-1,Ne=Ul,Xe=!0,tt=d.length,dt=[],kt=f.length;if(!tt)return dt;_&&(f=Yi(f,Jo(_))),B?(Ne=Oh,Xe=!1):f.length>=200&&(Ne=Nh,Xe=!1,f=new Ra(f));e:for(;++de<tt;){var Lt=d[de],zt=null==_?Lt:_(Lt);if(Lt=B||0!==Lt?Lt:0,Xe&&zt==zt){for(var en=kt;en--;)if(f[en]===zt)continue e;dt.push(Lt)}else Ne(f,zt,B)||dt.push(Lt)}return dt}De.templateSettings={escape:tl,evaluate:ot,interpolate:ut,variable:"",imports:{_:De}},(De.prototype=Gh.prototype).constructor=De,(Po.prototype=wu(Gh.prototype)).constructor=Po,(fi.prototype=wu(Gh.prototype)).constructor=fi,yo.prototype.clear=function(){this.__data__=Uh?Uh(null):{},this.size=0},yo.prototype.delete=function(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f},yo.prototype.get=function(d){var f=this.__data__;if(Uh){var _=f[d];return _===K?ee:_}return Xi.call(f,d)?f[d]:ee},yo.prototype.has=function(d){var f=this.__data__;return Uh?f[d]!==ee:Xi.call(f,d)},yo.prototype.set=function(d,f){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=Uh&&f===ee?K:f,this},Hl.prototype.clear=function(){this.__data__=[],this.size=0},Hl.prototype.delete=function(d){var f=this.__data__,_=Nd(f,d);return!(_<0||(_==f.length-1?f.pop():Bn.call(f,_,1),--this.size,0))},Hl.prototype.get=function(d){var f=this.__data__,_=Nd(f,d);return _<0?ee:f[_][1]},Hl.prototype.has=function(d){return Nd(this.__data__,d)>-1},Hl.prototype.set=function(d,f){var _=this.__data__,B=Nd(_,d);return B<0?(++this.size,_.push([d,f])):_[B][1]=f,this},sl.prototype.clear=function(){this.size=0,this.__data__={hash:new yo,map:new(_o||Hl),string:new yo}},sl.prototype.delete=function(d){var f=Gs(this,d).delete(d);return this.size-=f?1:0,f},sl.prototype.get=function(d){return Gs(this,d).get(d)},sl.prototype.has=function(d){return Gs(this,d).has(d)},sl.prototype.set=function(d,f){var _=Gs(this,d),B=_.size;return _.set(d,f),this.size+=_.size==B?0:1,this},Ra.prototype.add=Ra.prototype.push=function(d){return this.__data__.set(d,K),this},Ra.prototype.has=function(d){return this.__data__.has(d)},Na.prototype.clear=function(){this.__data__=new Hl,this.size=0},Na.prototype.delete=function(d){var f=this.__data__,_=f.delete(d);return this.size=f.size,_},Na.prototype.get=function(d){return this.__data__.get(d)},Na.prototype.has=function(d){return this.__data__.has(d)},Na.prototype.set=function(d,f){var _=this.__data__;if(_ instanceof Hl){var B=_.__data__;if(!_o||B.length<199)return B.push([d,f]),this.size=++_.size,this;_=this.__data__=new sl(B)}return _.set(d,f),this.size=_.size,this};var Ic=ul(ll),E_=ul(Tp,!0);function Ev(d,f){var _=!0;return Ic(d,function(B,de,Ne){return _=!!f(B,de,Ne)}),_}function Yh(d,f,_){for(var B=-1,de=d.length;++B<de;){var Ne=d[B],Xe=f(Ne);if(null!=Xe&&(tt===ee?Xe==Xe&&!ca(Xe):_(Xe,tt)))var tt=Xe,dt=Ne}return dt}function xv(d,f){var _=[];return Ic(d,function(B,de,Ne){f(B,de,Ne)&&_.push(B)}),_}function Ts(d,f,_,B,de){var Ne=-1,Xe=d.length;for(_||(_=_A),de||(de=[]);++Ne<Xe;){var tt=d[Ne];f>0&&_(tt)?f>1?Ts(tt,f-1,_,B,de):zr(de,tt):B||(de[de.length]=tt)}return de}var Pd=Ov(),Fd=Ov(!0);function ll(d,f){return d&&Pd(d,f,Os)}function Tp(d,f){return d&&Fd(d,f,Os)}function Kh(d,f){return Ta(f,function(_){return la(d[_])})}function ea(d,f){for(var _=0,B=(f=Pc(f,d)).length;null!=d&&_<B;)d=d[ni(f[_++])];return _&&_==B?d:ee}function nr(d,f,_){var B=f(d);return Rn(d)?B:zr(B,_(d))}function Ms(d){return null==d?d===ee?"[object Undefined]":"[object Null]":vu&&vu in Ki(d)?function(d){var f=Xi.call(d,vu),_=d[vu];try{d[vu]=ee;var B=!0}catch(Ne){}var de=Zs.call(d);return B&&(f?d[vu]=_:delete d[vu]),de}(d):function(d){return Zs.call(d)}(d)}function Fo(d,f){return d>f}function kd(d,f){return null!=d&&Xi.call(d,f)}function Ld(d,f){return null!=d&&f in Ki(d)}function Su(d,f,_){for(var B=_?Oh:Ul,de=d[0].length,Ne=d.length,Xe=Ne,tt=St(Ne),dt=1/0,kt=[];Xe--;){var Lt=d[Xe];Xe&&f&&(Lt=Yi(Lt,Jo(f))),dt=ms(Lt.length,dt),tt[Xe]=!_&&(f||de>=120&&Lt.length>=120)?new Ra(Xe&&Lt):ee}Lt=d[0];var zt=-1,en=tt[0];e:for(;++zt<de&&kt.length<dt;){var wn=Lt[zt],Ln=f?f(wn):wn;if(wn=_||0!==wn?wn:0,!(en?Nh(en,Ln):B(kt,Ln,_))){for(Xe=Ne;--Xe;){var gi=tt[Xe];if(!(gi?Nh(gi,Ln):B(d[Xe],Ln,_)))continue e}en&&en.push(Ln),kt.push(wn)}}return kt}function Pa(d,f,_){var B=null==(d=V_(d,f=Pc(f,d)))?d:d[ni(sa(f))];return null==B?ee:ls(B,d,_)}function eA(d){return Mr(d)&&Ms(d)==J}function Mp(d,f,_,B,de){return d===f||(null==d||null==f||!Mr(d)&&!Mr(f)?d!=d&&f!=f:function(d,f,_,B,de,Ne){var Xe=Rn(d),tt=Rn(f),dt=Xe?ae:$s(d),kt=tt?ae:$s(f),Lt=(dt=dt==J?ge:dt)==ge,zt=(kt=kt==J?ge:kt)==ge,en=dt==kt;if(en&&gl(d)){if(!gl(f))return!1;Xe=!0,Lt=!1}if(en&&!Lt)return Ne||(Ne=new Na),Xe||cf(d)?jp(d,f,_,B,de,Ne):function(d,f,_,B,de,Ne,Xe){switch(_){case xt:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case nt:return!(d.byteLength!=f.byteLength||!Ne(new Dd(d),new Dd(f)));case Te:case xe:case X:return In(+d,+f);case Se:return d.name==f.name&&d.message==f.message;case _t:case Ae:return d==f+"";case Be:var tt=dv;case gt:if(tt||(tt=r_),d.size!=f.size&&!(1&B))return!1;var kt=Xe.get(d);if(kt)return kt==f;B|=2,Xe.set(d,f);var Lt=jp(tt(d),tt(f),B,de,Ne,Xe);return Xe.delete(d),Lt;case U:if(Od)return Od.call(d)==Od.call(f)}return!1}(d,f,dt,_,B,de,Ne);if(!(1&_)){var wn=Lt&&Xi.call(d,"__wrapped__"),Ln=zt&&Xi.call(f,"__wrapped__");if(wn||Ln){var gi=wn?d.value():d,jn=Ln?f.value():f;return Ne||(Ne=new Na),de(gi,jn,_,B,Ne)}}return!!en&&(Ne||(Ne=new Na),function(d,f,_,B,de,Ne){var Xe=1&_,tt=Yl(d),dt=tt.length;if(dt!=Yl(f).length&&!Xe)return!1;for(var zt=dt;zt--;){var en=tt[zt];if(!(Xe?en in f:Xi.call(f,en)))return!1}var wn=Ne.get(d),Ln=Ne.get(f);if(wn&&Ln)return wn==f&&Ln==d;var gi=!0;Ne.set(d,f),Ne.set(f,d);for(var jn=Xe;++zt<dt;){var mi=d[en=tt[zt]],Mi=f[en];if(B)var wo=Xe?B(Mi,mi,en,f,d,Ne):B(mi,Mi,en,d,f,Ne);if(!(wo===ee?mi===Mi||de(mi,Mi,_,B,Ne):wo)){gi=!1;break}jn||(jn="constructor"==en)}if(gi&&!jn){var qs=d.constructor,ua=f.constructor;qs!=ua&&"constructor"in d&&"constructor"in f&&!("function"==typeof qs&&qs instanceof qs&&"function"==typeof ua&&ua instanceof ua)&&(gi=!1)}return Ne.delete(d),Ne.delete(f),gi}(d,f,_,B,de,Ne))}(d,f,_,B,Mp,de))}function x_(d,f,_,B){var de=_.length,Ne=de,Xe=!B;if(null==d)return!Ne;for(d=Ki(d);de--;){var tt=_[de];if(Xe&&tt[2]?tt[1]!==d[tt[0]]:!(tt[0]in d))return!1}for(;++de<Ne;){var dt=(tt=_[de])[0],kt=d[dt],Lt=tt[1];if(Xe&&tt[2]){if(kt===ee&&!(dt in d))return!1}else{var zt=new Na;if(B)var en=B(kt,Lt,dt,d,f,zt);if(!(en===ee?Mp(Lt,kt,3,B,zt):en))return!1}}return!0}function C_(d){return!(!Tr(d)||function(d){return!!Lh&&Lh in d}(d))&&(la(d)?Md:cr).test(Ru(d))}function iA(d){return"function"==typeof d?d:null==d?io:"object"==typeof d?Rn(d)?jd(d[0],d[1]):sA(d):ku(d)}function Cv(d){if(!zp(d))return rl(d);var f=[];for(var _ in Ki(d))Xi.call(d,_)&&"constructor"!=_&&f.push(_);return f}function Av(d,f){return d<f}function rA(d,f){var _=-1,B=bo(d)?St(d.length):[];return Ic(d,function(de,Ne,Xe){B[++_]=f(de,Ne,Xe)}),B}function sA(d){var f=ia(d);return 1==f.length&&f[0][2]?bA(f[0][0],f[0][1]):function(_){return _===d||x_(_,d,f)}}function jd(d,f){return ra(d)&&yA(f)?bA(ni(d),f):function(_){var B=hf(_,d);return B===ee&&B===f?eg(_,d):Mp(f,B,3)}}function A_(d,f,_,B,de){d!==f&&Pd(f,function(Ne,Xe){if(de||(de=new Na),Tr(Ne))!function(d,f,_,B,de,Ne,Xe){var tt=U_(d,_),dt=U_(f,_),kt=Xe.get(dt);if(kt)b_(d,_,kt);else{var Lt=Ne?Ne(tt,dt,_+"",d,f,Xe):ee,zt=Lt===ee;if(zt){var en=Rn(dt),wn=!en&&gl(dt),Ln=!en&&!wn&&cf(dt);Lt=dt,en||wn||Ln?Rn(tt)?Lt=tt:Ar(tt)?Lt=eo(tt):wn?(zt=!1,Lt=Np(dt,!0)):Ln?(zt=!1,Lt=O_(dt,!0)):Lt=[]:Jp(dt)||pl(dt)?(Lt=tt,pl(tt)?Lt=Fw(tt):(!Tr(tt)||la(tt))&&(Lt=Hv(dt))):zt=!1}zt&&(Xe.set(dt,Lt),de(Lt,dt,B,Ne,Xe),Xe.delete(dt)),b_(d,_,Lt)}}(d,f,Xe,_,A_,B,de);else{var tt=B?B(U_(d,Xe),Ne,Xe+"",d,f,de):ee;tt===ee&&(tt=Ne),b_(d,Xe,tt)}},no)}function xu(d,f){var _=d.length;if(_)return Bo(f+=f<0?_:0,_)?d[f]:ee}function Xh(d,f,_){f=f.length?Yi(f,function(Ne){return Rn(Ne)?function(Xe){return ea(Xe,1===Ne.length?Ne[0]:Ne)}:Ne}):[io];var B=-1;return f=Yi(f,Jo(Fn())),function(ct,It){var St=ct.length;for(ct.sort(function(Ne,Xe){return function(d,f,_){for(var B=-1,de=d.criteria,Ne=f.criteria,Xe=de.length,tt=_.length;++B<Xe;){var dt=Fc(de[B],Ne[B]);if(dt)return B>=tt?dt:dt*("desc"==_[B]?-1:1)}return d.index-f.index}(Ne,Xe,_)});St--;)ct[St]=ct[St].value;return ct}(rA(d,function(Ne,Xe,tt){return{criteria:Yi(f,function(kt){return kt(Ne)}),index:++B,value:Ne}}))}function Tv(d,f,_){for(var B=-1,de=f.length,Ne={};++B<de;){var Xe=f[B],tt=ea(d,Xe);_(tt,Xe)&&Ip(Ne,Pc(Xe,d),tt)}return Ne}function na(d,f,_,B){var de=B?pp:nl,Ne=-1,Xe=f.length,tt=d;for(d===f&&(f=eo(f)),_&&(tt=Yi(d,Jo(_)));++Ne<Xe;)for(var dt=0,kt=f[Ne],Lt=_?_(kt):kt;(dt=de(tt,Lt,dt,B))>-1;)tt!==d&&Bn.call(tt,dt,1),Bn.call(d,dt,1);return d}function Qh(d,f){for(var _=d?f.length:0,B=_-1;_--;){var de=f[_];if(_==B||de!==Ne){var Ne=de;Bo(de)?Bn.call(d,de,1):Cu(d,de)}}return d}function Gl(d,f){return d+Ei(Vh()*(f-d+1))}function Dp(d,f){var _="";if(!d||f<1||f>Ie)return _;do{f%2&&(_+=d),(f=Ei(f/2))&&(d+=d)}while(f);return _}function pi(d,f){return Hp(vA(d,f,io),d+"")}function oA(d){return y_(th(d))}function IF(d,f){var _=th(d);return Wd(_,Eu(f,0,_.length))}function Ip(d,f,_,B){if(!Tr(d))return d;for(var de=-1,Ne=(f=Pc(f,d)).length,Xe=Ne-1,tt=d;null!=tt&&++de<Ne;){var dt=ni(f[de]),kt=_;if("__proto__"===dt||"constructor"===dt||"prototype"===dt)return d;if(de!=Xe){var Lt=tt[dt];(kt=B?B(Lt,dt,tt):ee)===ee&&(kt=Tr(Lt)?Lt:Bo(f[de+1])?[]:{})}ol(tt,dt,kt),tt=tt[dt]}return d}var T_=zh?function(d,f){return zh.set(d,f),d}:io,ko=_p?function(d,f){return _p(d,"toString",{configurable:!0,enumerable:!1,value:My(f),writable:!0})}:io;function M_(d){return Wd(th(d))}function Ds(d,f,_){var B=-1,de=d.length;f<0&&(f=-f>de?0:de+f),(_=_>de?de:_)<0&&(_+=de),de=f>_?0:_-f>>>0,f>>>=0;for(var Ne=St(de);++B<de;)Ne[B]=d[B+f];return Ne}function OF(d,f){var _;return Ic(d,function(B,de,Ne){return!(_=f(B,de,Ne))}),!!_}function Zh(d,f,_){var B=0,de=null==d?B:d.length;if("number"==typeof f&&f==f&&de<=2147483647){for(;B<de;){var Ne=B+de>>>1,Xe=d[Ne];null!==Xe&&!ca(Xe)&&(_?Xe<=f:Xe<f)?B=Ne+1:de=Ne}return de}return D_(d,f,io,_)}function D_(d,f,_,B){var de=0,Ne=null==d?0:d.length;if(0===Ne)return 0;for(var Xe=(f=_(f))!=f,tt=null===f,dt=ca(f),kt=f===ee;de<Ne;){var Lt=Ei((de+Ne)/2),zt=_(d[Lt]),en=zt!==ee,wn=null===zt,Ln=zt==zt,gi=ca(zt);if(Xe)var jn=B||Ln;else jn=kt?Ln&&(B||en):tt?Ln&&en&&(B||!wn):dt?Ln&&en&&!wn&&(B||!gi):!wn&&!gi&&(B?zt<=f:zt<f);jn?de=Lt+1:Ne=Lt}return ms(Ne,4294967294)}function Mv(d,f){for(var _=-1,B=d.length,de=0,Ne=[];++_<B;){var Xe=d[_],tt=f?f(Xe):Xe;if(!_||!In(tt,dt)){var dt=tt;Ne[de++]=0===Xe?0:Xe}}return Ne}function Dv(d){return"number"==typeof d?d:ca(d)?NaN:+d}function Lo(d){if("string"==typeof d)return d;if(Rn(d))return Yi(d,Lo)+"";if(ca(d))return Hh?Hh.call(d):"";var f=d+"";return"0"==f&&1/d==-te?"-0":f}function Rc(d,f,_){var B=-1,de=Ul,Ne=d.length,Xe=!0,tt=[],dt=tt;if(_)Xe=!1,de=Oh;else if(Ne>=200){var kt=f?null:N_(d);if(kt)return r_(kt);Xe=!1,de=Nh,dt=new Ra}else dt=f?[]:tt;e:for(;++B<Ne;){var Lt=d[B],zt=f?f(Lt):Lt;if(Lt=_||0!==Lt?Lt:0,Xe&&zt==zt){for(var en=dt.length;en--;)if(dt[en]===zt)continue e;f&&dt.push(zt),tt.push(Lt)}else de(dt,zt,_)||(dt!==tt&&dt.push(zt),tt.push(Lt))}return tt}function Cu(d,f){return null==(d=V_(d,f=Pc(f,d)))||delete d[ni(sa(f))]}function Op(d,f,_,B){return Ip(d,f,_(ea(d,f)),B)}function Au(d,f,_,B){for(var de=d.length,Ne=B?de:-1;(B?Ne--:++Ne<de)&&f(d[Ne],Ne,d););return _?Ds(d,B?0:Ne,B?Ne+1:de):Ds(d,B?Ne+1:0,B?de:Ne)}function aA(d,f){var _=d;return _ instanceof fi&&(_=_.value()),_u(f,function(B,de){return de.func.apply(de.thisArg,zr([B],de.args))},_)}function Tu(d,f,_){var B=d.length;if(B<2)return B?Rc(d[0]):[];for(var de=-1,Ne=St(B);++de<B;)for(var Xe=d[de],tt=-1;++tt<B;)tt!=de&&(Ne[de]=Dc(Ne[de]||Xe,d[tt],f,_));return Rc(Ts(Ne,1),f,_)}function Rp(d,f,_){for(var B=-1,de=d.length,Ne=f.length,Xe={};++B<de;)_(Xe,d[B],B<Ne?f[B]:ee);return Xe}function Nc(d){return Ar(d)?d:[]}function I_(d){return"function"==typeof d?d:io}function Pc(d,f){return Rn(d)?d:ra(d,f)?[d]:qv(zi(d))}var lA=pi;function cl(d,f,_){var B=d.length;return _=_===ee?B:_,!f&&_>=B?d:Ds(d,f,_)}var cA=gv||function(d){return Vi.clearTimeout(d)};function Np(d,f){if(f)return d.slice();var _=d.length,B=pv?pv(_):new d.constructor(_);return d.copy(B),B}function Mu(d){var f=new d.constructor(d.byteLength);return new Dd(f).set(new Dd(d)),f}function O_(d,f){var _=f?Mu(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function Fc(d,f){if(d!==f){var _=d!==ee,B=null===d,de=d==d,Ne=ca(d),Xe=f!==ee,tt=null===f,dt=f==f,kt=ca(f);if(!tt&&!kt&&!Ne&&d>f||Ne&&Xe&&dt&&!tt&&!kt||B&&Xe&&dt||!_&&dt||!de)return 1;if(!B&&!Ne&&!kt&&d<f||kt&&_&&de&&!B&&!Ne||tt&&_&&de||!Xe&&de||!dt)return-1}return 0}function Ud(d,f,_,B){for(var de=-1,Ne=d.length,Xe=_.length,tt=-1,dt=f.length,kt=Hr(Ne-Xe,0),Lt=St(dt+kt),zt=!B;++tt<dt;)Lt[tt]=f[tt];for(;++de<Xe;)(zt||de<Ne)&&(Lt[_[de]]=d[de]);for(;kt--;)Lt[tt++]=d[de++];return Lt}function Iv(d,f,_,B){for(var de=-1,Ne=d.length,Xe=-1,tt=_.length,dt=-1,kt=f.length,Lt=Hr(Ne-tt,0),zt=St(Lt+kt),en=!B;++de<Lt;)zt[de]=d[de];for(var wn=de;++dt<kt;)zt[wn+dt]=f[dt];for(;++Xe<tt;)(en||de<Ne)&&(zt[wn+_[Xe]]=d[de++]);return zt}function eo(d,f){var _=-1,B=d.length;for(f||(f=St(B));++_<B;)f[_]=d[_];return f}function Fa(d,f,_,B){var de=!_;_||(_={});for(var Ne=-1,Xe=f.length;++Ne<Xe;){var tt=f[Ne],dt=B?B(_[tt],d[tt],tt,_,d):ee;dt===ee&&(dt=d[tt]),de?al(_,tt,dt):ol(_,tt,dt)}return _}function ns(d,f){return function(_,B){var de=Rn(_)?Ur:Cp,Ne=f?f():{};return de(_,d,Fn(B,2),Ne)}}function $l(d){return pi(function(f,_){var B=-1,de=_.length,Ne=de>1?_[de-1]:ee,Xe=de>2?_[2]:ee;for(Ne=d.length>3&&"function"==typeof Ne?(de--,Ne):ee,Xe&&Ws(_[0],_[1],Xe)&&(Ne=de<3?ee:Ne,de=1),f=Ki(f);++B<de;){var tt=_[B];tt&&d(f,tt,B,Ne)}return f})}function ul(d,f){return function(_,B){if(null==_)return _;if(!bo(_))return d(_,B);for(var de=_.length,Ne=f?de:-1,Xe=Ki(_);(f?Ne--:++Ne<de)&&!1!==B(Xe[Ne],Ne,Xe););return _}}function Ov(d){return function(f,_,B){for(var de=-1,Ne=Ki(f),Xe=B(f),tt=Xe.length;tt--;){var dt=Xe[d?tt:++de];if(!1===_(Ne[dt],dt,Ne))break}return f}}function Pp(d){return function(f){var _=Ph(f=zi(f))?il(f):ee,B=_?_[0]:f.charAt(0),de=_?cl(_,1).join(""):f.slice(1);return B[d]()+de}}function Wl(d){return function(f){return _u(Ay(by(f).replace(fp,"")),d,"")}}function Hd(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=wu(d.prototype),B=d.apply(_,f);return Tr(B)?B:_}}function Nv(d){return function(f,_,B){var de=Ki(f);if(!bo(f)){var Ne=Fn(_,3);f=Os(f),_=function(tt){return Ne(de[tt],tt,de)}}var Xe=d(f,_,B);return Xe>-1?de[Ne?f[Xe]:Xe]:ee}}function Iu(d){return dl(function(f){var _=f.length,B=_,de=Po.prototype.thru;for(d&&f.reverse();B--;){var Ne=f[B];if("function"!=typeof Ne)throw new Da(we);if(de&&!Xe&&"wrapper"==Vp(Ne))var Xe=new Po([],!0)}for(B=Xe?B:_;++B<_;){var tt=Vp(Ne=f[B]),dt="wrapper"==tt?F_(Ne):ee;Xe=dt&&Up(dt[0])&&424==dt[1]&&!dt[4].length&&1==dt[9]?Xe[Vp(dt[0])].apply(Xe,dt[3]):1==Ne.length&&Up(Ne)?Xe[tt]():Xe.thru(Ne)}return function(){var kt=arguments,Lt=kt[0];if(Xe&&1==kt.length&&Rn(Lt))return Xe.plant(Lt).value();for(var zt=0,en=_?f[zt].apply(this,kt):Lt;++zt<_;)en=f[zt].call(this,en);return en}})}function kc(d,f,_,B,de,Ne,Xe,tt,dt,kt){var Lt=f&I,zt=1&f,en=2&f,wn=24&f,Ln=512&f,gi=en?ee:Hd(d);return function jn(){for(var mi=arguments.length,Mi=St(mi),wo=mi;wo--;)Mi[wo]=arguments[wo];if(wn)var qs=$d(jn),ua=dF(Mi,qs);if(B&&(Mi=Ud(Mi,B,de,wn)),Ne&&(Mi=Iv(Mi,Ne,Xe,wn)),mi-=ua,wn&&mi<kt){var Hi=yu(Mi,qs);return kv(d,f,kc,jn.placeholder,_,Mi,Hi,tt,dt,kt-mi)}var yl=zt?_:this,Uc=en?yl[d]:d;return mi=Mi.length,tt?Mi=wA(Mi,tt):Ln&&mi>1&&Mi.reverse(),Lt&&dt<mi&&(Mi.length=dt),this&&this!==Vi&&this instanceof jn&&(Uc=gi||Hd(Uc)),Uc.apply(yl,Mi)}}function Pv(d,f){return function(_,B){return function(d,f,_,B){return ll(d,function(de,Ne,Xe){f(B,_(de),Ne,Xe)}),B}(_,d,f(B),{})}}function R_(d,f){return function(_,B){var de;if(_===ee&&B===ee)return f;if(_!==ee&&(de=_),B!==ee){if(de===ee)return B;"string"==typeof _||"string"==typeof B?(_=Lo(_),B=Lo(B)):(_=Dv(_),B=Dv(B)),de=d(_,B)}return de}}function Fp(d){return dl(function(f){return f=Yi(f,Jo(Fn())),pi(function(_){var B=this;return d(f,function(de){return ls(de,B,_)})})})}function kp(d,f){var _=(f=f===ee?" ":Lo(f)).length;if(_<2)return _?Dp(f,d):f;var B=Dp(f,Vt(d/Fh(f)));return Ph(f)?cl(il(B),0,d).join(""):B.slice(0,d)}function Fv(d){return function(f,_,B){return B&&"number"!=typeof B&&Ws(f,_,B)&&(_=B=ee),f=ml(f),_===ee?(_=f,f=0):_=ml(_),function(d,f,_,B){for(var de=-1,Ne=Hr(Vt((f-d)/(_||1)),0),Xe=St(Ne);Ne--;)Xe[B?Ne:++de]=d,d+=_;return Xe}(f,_,B=B===ee?f<_?1:-1:ml(B),d)}}function Lp(d){return function(f,_){return"string"==typeof f&&"string"==typeof _||(f=vo(f),_=vo(_)),d(f,_)}}function kv(d,f,_,B,de,Ne,Xe,tt,dt,kt){var Lt=8&f;f|=Lt?A:64,4&(f&=~(Lt?64:A))||(f&=-4);var gi=[d,f,de,Lt?Ne:ee,Lt?Xe:ee,Lt?ee:Ne,Lt?ee:Xe,tt,dt,kt],jn=_.apply(ee,gi);return Up(d)&&Wv(jn,gi),jn.placeholder=B,tf(jn,d,f)}function Gd(d){var f=ts[d];return function(_,B){if(_=vo(_),(B=null==B?0:ms(Jn(B),292))&&d_(_)){var de=(zi(_)+"e").split("e");return+((de=(zi(f(de[0]+"e"+(+de[1]+B)))+"e").split("e"))[0]+"e"+(+de[1]-B))}return f(_)}}var N_=Oa&&1/r_(new Oa([,-0]))[1]==te?function(d){return new Oa(d)}:Oy;function Ou(d){return function(f){var _=$s(f);return _==Be?dv(f):_==gt?function(ct){var It=-1,St=Array(ct.size);return ct.forEach(function(hn){St[++It]=[hn,hn]}),St}(f):function(ct,It){return Yi(It,function(St){return[St,ct[St]]})}(f,d(f))}}function ql(d,f,_,B,de,Ne,Xe,tt){var dt=2&f;if(!dt&&"function"!=typeof d)throw new Da(we);var kt=B?B.length:0;if(kt||(f&=-97,B=de=ee),Xe=Xe===ee?Xe:Hr(Jn(Xe),0),tt=tt===ee?tt:Jn(tt),kt-=de?de.length:0,64&f){var Lt=B,zt=de;B=de=ee}var en=dt?ee:F_(d),wn=[d,f,_,B,de,Lt,zt,Ne,Xe,tt];if(en&&function(d,f){var _=d[1],B=f[1],de=_|B;if(!(de<131||(B==I&&8==_||B==I&&256==_&&d[7].length<=f[8]||384==B&&f[7].length<=f[8]&&8==_)))return d;1&B&&(d[2]=f[2],de|=1&_?0:4);var tt=f[3];if(tt){var dt=d[3];d[3]=dt?Ud(dt,tt,f[4]):tt,d[4]=dt?yu(d[3],F):f[4]}(tt=f[5])&&(d[5]=(dt=d[5])?Iv(dt,tt,f[6]):tt,d[6]=dt?yu(d[5],F):f[6]),(tt=f[7])&&(d[7]=tt),B&I&&(d[8]=null==d[8]?f[8]:ms(d[8],f[8])),null==d[9]&&(d[9]=f[9]),d[0]=f[0],d[1]=de}(wn,en),d=wn[0],f=wn[1],_=wn[2],B=wn[3],de=wn[4],!(tt=wn[9]=wn[9]===ee?dt?0:d.length:Hr(wn[9]-kt,0))&&24&f&&(f&=-25),f&&1!=f)Ln=8==f||16==f?function(d,f,_){var B=Hd(d);return function de(){for(var Ne=arguments.length,Xe=St(Ne),tt=Ne,dt=$d(de);tt--;)Xe[tt]=arguments[tt];var kt=Ne<3&&Xe[0]!==dt&&Xe[Ne-1]!==dt?[]:yu(Xe,dt);return(Ne-=kt.length)<_?kv(d,f,kc,de.placeholder,ee,Xe,kt,ee,ee,_-Ne):ls(this&&this!==Vi&&this instanceof de?B:d,this,Xe)}}(d,f,tt):f!=A&&33!=f||de.length?kc.apply(ee,wn):function(d,f,_,B){var de=1&f,Ne=Hd(d);return function Xe(){for(var tt=-1,dt=arguments.length,kt=-1,Lt=B.length,zt=St(Lt+dt),en=this&&this!==Vi&&this instanceof Xe?Ne:d;++kt<Lt;)zt[kt]=B[kt];for(;dt--;)zt[kt++]=arguments[++tt];return ls(en,de?_:this,zt)}}(d,f,_,B);else var Ln=function(d,f,_){var B=1&f,de=Hd(d);return function Ne(){return(this&&this!==Vi&&this instanceof Ne?de:d).apply(B?_:this,arguments)}}(d,f,_);return tf((en?T_:Wv)(Ln,wn),d,f)}function Lv(d,f,_,B){return d===ee||In(d,bu[_])&&!Xi.call(B,_)?f:d}function hA(d,f,_,B,de,Ne){return Tr(d)&&Tr(f)&&(Ne.set(f,d),A_(d,f,ee,hA,Ne),Ne.delete(f)),d}function Bp(d){return Jp(d)?ee:d}function jp(d,f,_,B,de,Ne){var Xe=1&_,tt=d.length,dt=f.length;if(tt!=dt&&!(Xe&&dt>tt))return!1;var kt=Ne.get(d),Lt=Ne.get(f);if(kt&&Lt)return kt==f&&Lt==d;var zt=-1,en=!0,wn=2&_?new Ra:ee;for(Ne.set(d,f),Ne.set(f,d);++zt<tt;){var Ln=d[zt],gi=f[zt];if(B)var jn=Xe?B(gi,Ln,zt,f,d,Ne):B(Ln,gi,zt,d,f,Ne);if(jn!==ee){if(jn)continue;en=!1;break}if(wn){if(!Ro(f,function(mi,Mi){if(!Nh(wn,Mi)&&(Ln===mi||de(Ln,mi,_,B,Ne)))return wn.push(Mi)})){en=!1;break}}else if(Ln!==gi&&!de(Ln,gi,_,B,Ne)){en=!1;break}}return Ne.delete(d),Ne.delete(f),en}function dl(d){return Hp(vA(d,ee,Is),d+"")}function Yl(d){return nr(d,Os,k_)}function P_(d){return nr(d,no,Vv)}var F_=zh?function(d){return zh.get(d)}:Oy;function Vp(d){for(var f=d.name+"",_=Id[f],B=Xi.call(Id,f)?_.length:0;B--;){var de=_[B],Ne=de.func;if(null==Ne||Ne==d)return de.name}return f}function $d(d){return(Xi.call(De,"placeholder")?De:d).placeholder}function Fn(){var d=De.iteratee||Fu;return d=d===Fu?iA:d,arguments.length?d(arguments[0],arguments[1]):d}function Gs(d,f){var _=d.__data__;return function(d){var f=typeof d;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==d:null===d}(f)?_["string"==typeof f?"string":"hash"]:_.map}function ia(d){for(var f=Os(d),_=f.length;_--;){var B=f[_],de=d[B];f[_]=[B,de,yA(de)]}return f}function Lc(d,f){var _=function(ct,It){return null==ct?ee:ct[It]}(d,f);return C_(_)?_:ee}var k_=Cr?function(d){return null==d?[]:(d=Ki(d),Ta(Cr(d),function(f){return mp.call(d,f)}))}:Vc,Vv=Cr?function(d){for(var f=[];d;)zr(f,k_(d)),d=Ia(d);return f}:Vc,$s=Ms;function zv(d,f,_){for(var B=-1,de=(f=Pc(f,d)).length,Ne=!1;++B<de;){var Xe=ni(f[B]);if(!(Ne=null!=d&&_(d,Xe)))break;d=d[Xe]}return Ne||++B!=de?Ne:!!(de=null==d?0:d.length)&&uy(de)&&Bo(Xe,de)&&(Rn(d)||pl(d))}function Hv(d){return"function"!=typeof d.constructor||zp(d)?{}:wu(Ia(d))}function _A(d){return Rn(d)||pl(d)||!!(jC&&d&&d[jC])}function Bo(d,f){var _=typeof d;return!!(f=null==f?Ie:f)&&("number"==_||"symbol"!=_&&$i.test(d))&&d>-1&&d%1==0&&d<f}function Ws(d,f,_){if(!Tr(_))return!1;var B=typeof f;return!!("number"==B?bo(_)&&Bo(f,_.length):"string"==B&&f in _)&&In(_[f],d)}function ra(d,f){if(Rn(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!ca(d))||be.test(d)||!ft.test(d)||null!=f&&d in Ki(f)}function Up(d){var f=Vp(d),_=De[f];if("function"!=typeof _||!(f in fi.prototype))return!1;if(d===_)return!0;var B=F_(_);return!!B&&d===B[0]}(As&&$s(new As(new ArrayBuffer(1)))!=xt||_o&&$s(new _o)!=Be||bp&&$s(bp.resolve())!=le||Oa&&$s(new Oa)!=gt||No&&$s(new No)!=z)&&($s=function(d){var f=Ms(d),_=f==ge?d.constructor:ee,B=_?Ru(_):"";if(B)switch(B){case HC:return xt;case h_:return Be;case f_:return le;case mv:return gt;case p_:return z}return f});var $v=gp?la:Ny;function zp(d){var f=d&&d.constructor;return d===("function"==typeof f&&f.prototype||bu)}function yA(d){return d==d&&!Tr(d)}function bA(d,f){return function(_){return null!=_&&_[d]===f&&(f!==ee||d in Ki(_))}}function vA(d,f,_){return f=Hr(f===ee?d.length-1:f,0),function(){for(var B=arguments,de=-1,Ne=Hr(B.length-f,0),Xe=St(Ne);++de<Ne;)Xe[de]=B[f+de];de=-1;for(var tt=St(f+1);++de<f;)tt[de]=B[de];return tt[f]=_(Xe),ls(d,this,tt)}}function V_(d,f){return f.length<2?d:ea(d,Ds(f,0,-1))}function wA(d,f){for(var _=d.length,B=ms(f.length,_),de=eo(d);B--;){var Ne=f[B];d[B]=Bo(Ne,_)?de[Ne]:ee}return d}function U_(d,f){if(("constructor"!==f||"function"!=typeof d[f])&&"__proto__"!=f)return d[f]}var Wv=z_(T_),ef=UC||function(d,f){return Vi.setTimeout(d,f)},Hp=z_(ko);function tf(d,f,_){var B=f+"";return Hp(d,function(d,f){var _=f.length;if(!_)return d;var B=_-1;return f[B]=(_>1?"& ":"")+f[B],f=f.join(_>2?", ":" "),d.replace(Mt,"{\n/* [wrapped with "+f+"] */\n")}(B,function(d,f){return Us(He,function(_){var B="_."+_[0];f&_[1]&&!Ul(d,B)&&d.push(B)}),d.sort()}(function(d){var f=d.match(Dt);return f?f[1].split(Xt):[]}(B),_)))}function z_(d){var f=0,_=0;return function(){var B=wF(),de=16-(B-_);if(_=B,de>0){if(++f>=800)return arguments[0]}else f=0;return d.apply(ee,arguments)}}function Wd(d,f){var _=-1,B=d.length,de=B-1;for(f=f===ee?B:f;++_<f;){var Ne=Gl(_,de),Xe=d[Ne];d[Ne]=d[_],d[_]=Xe}return d.length=f,d}var f,_,qv=(f=lf(function(d){var f=[];return 46===d.charCodeAt(0)&&f.push(""),d.replace(Ce,function(_,B,de,Ne){f.push(de?Ne.replace(Nn,"$1"):B||_)}),f},function(B){return 500===_.size&&_.clear(),B}),_=f.cache,f);function ni(d){if("string"==typeof d||ca(d))return d;var f=d+"";return"0"==f&&1/d==-te?"-0":f}function Ru(d){if(null!=d){try{return xr.call(d)}catch(f){}try{return d+""}catch(f){}}return""}function nf(d){if(d instanceof fi)return d.clone();var f=new Po(d.__wrapped__,d.__chain__);return f.__actions__=eo(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}var CA=pi(function(d,f){return Ar(d)?Dc(d,Ts(f,1,Ar,!0)):[]}),AA=pi(function(d,f){var _=sa(f);return Ar(_)&&(_=ee),Ar(d)?Dc(d,Ts(f,1,Ar,!0),Fn(_,2)):[]}),TA=pi(function(d,f){var _=sa(f);return Ar(_)&&(_=ee),Ar(d)?Dc(d,Ts(f,1,Ar,!0),ee,_):[]});function G_(d,f,_){var B=null==d?0:d.length;if(!B)return-1;var de=null==_?0:Jn(_);return de<0&&(de=Hr(B+de,0)),Cd(d,Fn(f,3),de)}function $_(d,f,_){var B=null==d?0:d.length;if(!B)return-1;var de=B-1;return _!==ee&&(de=Jn(_),de=_<0?Hr(B+de,0):ms(de,B-1)),Cd(d,Fn(f,3),de,!0)}function Is(d){return null!=d&&d.length?Ts(d,1):[]}function Kv(d){return d&&d.length?d[0]:ee}var Qv=pi(function(d){var f=Yi(d,Nc);return f.length&&f[0]===d[0]?Su(f):[]}),IA=pi(function(d){var f=sa(d),_=Yi(d,Nc);return f===sa(_)?f=ee:_.pop(),_.length&&_[0]===d[0]?Su(_,Fn(f,2)):[]}),Zv=pi(function(d){var f=sa(d),_=Yi(d,Nc);return(f="function"==typeof f?f:ee)&&_.pop(),_.length&&_[0]===d[0]?Su(_,ee,f):[]});function sa(d){var f=null==d?0:d.length;return f?d[f-1]:ee}var q_=pi(Y_);function Y_(d,f){return d&&d.length&&f&&f.length?na(d,f):d}var ew=dl(function(d,f){var _=null==d?0:d.length,B=v_(d,f);return Qh(d,Yi(f,function(de){return Bo(de,_)?+de:de}).sort(Fc)),B});function K_(d){return null==d?d:yp.call(d)}var iw=pi(function(d){return Rc(Ts(d,1,Ar,!0))}),zA=pi(function(d){var f=sa(d);return Ar(f)&&(f=ee),Rc(Ts(d,1,Ar,!0),Fn(f,2))}),HA=pi(function(d){var f=sa(d);return f="function"==typeof f?f:ee,Rc(Ts(d,1,Ar,!0),ee,f)});function rw(d){if(!d||!d.length)return[];var f=0;return d=Ta(d,function(_){if(Ar(_))return f=Hr(_.length,f),!0}),Td(f,function(_){return Yi(d,t_(_))})}function $A(d,f){if(!d||!d.length)return[];var _=rw(d);return null==f?_:Yi(_,function(B){return ls(f,ee,B)})}var sw=pi(function(d,f){return Ar(d)?Dc(d,f):[]}),VF=pi(function(d){return Tu(Ta(d,Ar))}),jo=pi(function(d){var f=sa(d);return Ar(f)&&(f=ee),Tu(Ta(d,Ar),Fn(f,2))}),X_=pi(function(d){var f=sa(d);return f="function"==typeof f?f:ee,Tu(Ta(d,Ar),ee,f)}),Q_=pi(rw),of=pi(function(d){var f=d.length,_=f>1?d[f-1]:ee;return _="function"==typeof _?(d.pop(),_):ee,$A(d,_)});function Z_(d){var f=De(d);return f.__chain__=!0,f}function Yd(d,f){return f(d)}var J_=dl(function(d){var f=d.length,_=f?d[0]:0,B=this.__wrapped__,de=function(Ne){return v_(Ne,d)};return!(f>1||this.__actions__.length)&&B instanceof fi&&Bo(_)?((B=B.slice(_,+_+(f?1:0))).__actions__.push({func:Yd,args:[de],thisArg:ee}),new Po(B,this.__chain__).thru(function(Ne){return f&&!Ne.length&&Ne.push(ee),Ne})):this.thru(de)}),YA=ns(function(d,f,_){Xi.call(d,_)?++d[_]:al(d,_,1)}),QA=Nv(G_),ZA=Nv($_);function iy(d,f){return(Rn(d)?Us:Ic)(d,Fn(f,3))}function Wp(d,f){return(Rn(d)?Sd:E_)(d,Fn(f,3))}var eT=ns(function(d,f,_){Xi.call(d,_)?d[_].push(f):al(d,_,[f])}),dw=pi(function(d,f,_){var B=-1,de="function"==typeof f,Ne=bo(d)?St(d.length):[];return Ic(d,function(Xe){Ne[++B]=de?ls(f,Xe,_):Pa(Xe,f,_)}),Ne}),hw=ns(function(d,f,_){al(d,_,f)});function fl(d,f){return(Rn(d)?Yi:rA)(d,Fn(f,3))}var pw=ns(function(d,f,_){d[_?0:1].push(f)},function(){return[[],[]]}),Yp=pi(function(d,f){if(null==d)return[];var _=f.length;return _>1&&Ws(d,f[0],f[1])?f=[]:_>2&&Ws(f[0],f[1],f[2])&&(f=[f[0]]),Xh(d,Ts(f,1),[])}),Nu=VC||function(){return Vi.Date.now()};function Kp(d,f,_){return f=_?ee:f,ql(d,I,ee,ee,ee,ee,f=d&&null==f?d.length:f)}function sy(d,f){var _;if("function"!=typeof f)throw new Da(we);return d=Jn(d),function(){return--d>0&&(_=f.apply(this,arguments)),d<=1&&(f=ee),_}}var af=pi(function(d,f,_){var B=1;if(_.length){var de=yu(_,$d(af));B|=A}return ql(d,B,f,_,de)}),Xd=pi(function(d,f,_){var B=3;if(_.length){var de=yu(_,$d(Xd));B|=A}return ql(f,B,d,_,de)});function ww(d,f,_){var B,de,Ne,Xe,tt,dt,kt=0,Lt=!1,zt=!1,en=!0;if("function"!=typeof d)throw new Da(we);function wn(Hi){var yl=B,Uc=de;return B=de=ee,kt=Hi,Xe=d.apply(Uc,yl)}function Ln(Hi){return kt=Hi,tt=ef(mi,f),Lt?wn(Hi):Xe}function jn(Hi){var yl=Hi-dt;return dt===ee||yl>=f||yl<0||zt&&Hi-kt>=Ne}function mi(){var Hi=Nu();if(jn(Hi))return Mi(Hi);tt=ef(mi,function(Hi){var cM=f-(Hi-dt);return zt?ms(cM,Ne-(Hi-kt)):cM}(Hi))}function Mi(Hi){return tt=ee,en&&B?wn(Hi):(B=de=ee,Xe)}function ua(){var Hi=Nu(),yl=jn(Hi);if(B=arguments,de=this,dt=Hi,yl){if(tt===ee)return Ln(dt);if(zt)return cA(tt),tt=ef(mi,f),wn(dt)}return tt===ee&&(tt=ef(mi,f)),Xe}return f=vo(f)||0,Tr(_)&&(Lt=!!_.leading,Ne=(zt="maxWait"in _)?Hr(vo(_.maxWait)||0,f):Ne,en="trailing"in _?!!_.trailing:en),ua.cancel=function(){tt!==ee&&cA(tt),kt=0,B=dt=de=tt=ee},ua.flush=function(){return tt===ee?Xe:Mi(Nu())},ua}var rT=pi(function(d,f){return qh(d,1,f)}),Ew=pi(function(d,f,_){return qh(d,vo(f)||0,_)});function lf(d,f){if("function"!=typeof d||null!=f&&"function"!=typeof f)throw new Da(we);var _=function(){var B=arguments,de=f?f.apply(this,B):B[0],Ne=_.cache;if(Ne.has(de))return Ne.get(de);var Xe=d.apply(this,B);return _.cache=Ne.set(de,Xe)||Ne,Xe};return _.cache=new(lf.Cache||sl),_}function ly(d){if("function"!=typeof d)throw new Da(we);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}lf.Cache=sl;var sT=lA(function(d,f){var _=(f=1==f.length&&Rn(f[0])?Yi(f[0],Jo(Fn())):Yi(Ts(f,1),Jo(Fn()))).length;return pi(function(B){for(var de=-1,Ne=ms(B.length,_);++de<Ne;)B[de]=f[de].call(this,B[de]);return ls(d,this,B)})}),Xp=pi(function(d,f){var _=yu(f,$d(Xp));return ql(d,A,ee,f,_)}),xw=pi(function(d,f){var _=yu(f,$d(xw));return ql(d,64,ee,f,_)}),oT=dl(function(d,f){return ql(d,256,ee,ee,ee,f)});function In(d,f){return d===f||d!=d&&f!=f}var Zt=Lp(Fo),Tw=Lp(function(d,f){return d>=f}),pl=eA(function(){return arguments}())?eA:function(d){return Mr(d)&&Xi.call(d,"callee")&&!mp.call(d,"callee")},Rn=St.isArray,Mw=nn?Jo(nn):function(d){return Mr(d)&&Ms(d)==nt};function bo(d){return null!=d&&uy(d.length)&&!la(d)}function Ar(d){return Mr(d)&&bo(d)}var gl=cs||Ny,Dw=hi?Jo(hi):function(d){return Mr(d)&&Ms(d)==xe};function La(d){if(!Mr(d))return!1;var f=Ms(d);return f==Se||"[object DOMException]"==f||"string"==typeof d.message&&"string"==typeof d.name&&!Jp(d)}function la(d){if(!Tr(d))return!1;var f=Ms(d);return f==Ue||f==Ke||"[object AsyncFunction]"==f||"[object Proxy]"==f}function Zp(d){return"number"==typeof d&&d==Jn(d)}function uy(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Ie}function Tr(d){var f=typeof d;return null!=d&&("object"==f||"function"==f)}function Mr(d){return null!=d&&"object"==typeof d}var gT=pr?Jo(pr):function(d){return Mr(d)&&$s(d)==Be};function yT(d){return"number"==typeof d||Mr(d)&&Ms(d)==X}function Jp(d){if(!Mr(d)||Ms(d)!=ge)return!1;var f=Ia(d);if(null===f)return!0;var _=Xi.call(f,"constructor")&&f.constructor;return"function"==typeof _&&_ instanceof _&&xr.call(_)==BC}var Nw=mo?Jo(mo):function(d){return Mr(d)&&Ms(d)==_t},bT=Cc?Jo(Cc):function(d){return Mr(d)&&$s(d)==gt};function hy(d){return"string"==typeof d||!Rn(d)&&Mr(d)&&Ms(d)==Ae}function ca(d){return"symbol"==typeof d||Mr(d)&&Ms(d)==U}var cf=as?Jo(as):function(d){return Mr(d)&&uy(d.length)&&!!ln[Ms(d)]},Bc=Lp(Av),fy=Lp(function(d,f){return d<=f});function Pw(d){if(!d)return[];if(bo(d))return hy(d)?il(d):eo(d);if(Bh&&d[Bh])return function(ct){for(var It,St=[];!(It=ct.next()).done;)St.push(It.value);return St}(d[Bh]());var f=$s(d);return(f==Be?dv:f==gt?r_:th)(d)}function ml(d){return d?(d=vo(d))===te||d===-te?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function Jn(d){var f=ml(d),_=f%1;return f==f?_?f-_:f:0}function py(d){return d?Eu(Jn(d),0,ve):0}function vo(d){if("number"==typeof d)return d;if(ca(d))return NaN;if(Tr(d)){var f="function"==typeof d.valueOf?d.valueOf():d;d=Tr(f)?f+"":f}if("string"!=typeof d)return 0===d?d:+d;d=uv(d);var _=lr.test(d);return _||Xn.test(d)?cv(d.slice(2),_?2:8):Tn.test(d)?NaN:+d}function Fw(d){return Fa(d,no(d))}function zi(d){return null==d?"":Lo(d)}var vT=$l(function(d,f){if(zp(f)||bo(f))Fa(f,Os(f),d);else for(var _ in f)Xi.call(f,_)&&ol(d,_,f[_])}),wT=$l(function(d,f){Fa(f,no(f),d)}),Qd=$l(function(d,f,_,B){Fa(f,no(f),d,B)}),ET=$l(function(d,f,_,B){Fa(f,Os(f),d,B)}),kw=dl(v_),xT=pi(function(d,f){d=Ki(d);var _=-1,B=f.length,de=B>2?f[2]:ee;for(de&&Ws(f[0],f[1],de)&&(B=1);++_<B;)for(var Ne=f[_],Xe=no(Ne),tt=-1,dt=Xe.length;++tt<dt;){var kt=Xe[tt],Lt=d[kt];(Lt===ee||In(Lt,bu[kt])&&!Xi.call(d,kt))&&(d[kt]=Ne[kt])}return d}),uf=pi(function(d){return d.push(ee,hA),ls(zw,ee,d)});function hf(d,f,_){var B=null==d?ee:ea(d,f);return B===ee?_:B}function eg(d,f){return null!=d&&zv(d,f,Ld)}var tg=Pv(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=Zs.call(f)),d[f]=_},My(io)),AT=Pv(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=Zs.call(f)),Xi.call(d,f)?d[f].push(_):d[f]=[_]},Fn),jw=pi(Pa);function Os(d){return bo(d)?Wh(d):Cv(d)}function no(d){return bo(d)?Wh(d,!0):function(d){if(!Tr(d))return function(d){var f=[];if(null!=d)for(var _ in Ki(d))f.push(_);return f}(d);var f=zp(d),_=[];for(var B in d)"constructor"==B&&(f||!Xi.call(d,B))||_.push(B);return _}(d)}var Uw=$l(function(d,f,_){A_(d,f,_)}),zw=$l(function(d,f,_,B){A_(d,f,_,B)}),MT=dl(function(d,f){var _={};if(null==d)return _;var B=!1;f=Yi(f,function(Ne){return Ne=Pc(Ne,d),B||(B=Ne.length>1),Ne}),Fa(d,P_(d),_),B&&(_=Hs(_,7,Bp));for(var de=f.length;de--;)Cu(_,f[de]);return _}),DT=dl(function(d,f){return null==d?{}:function(d,f){return Tv(d,f,function(_,B){return eg(d,B)})}(d,f)});function Hw(d,f){if(null==d)return{};var _=Yi(P_(d),function(B){return[B]});return f=Fn(f),Tv(d,_,function(B,de){return f(B,de[0])})}var IT=Ou(Os),$w=Ou(no);function th(d){return null==d?[]:i_(d,Os(d))}var FT=Wl(function(d,f,_){return f=f.toLowerCase(),d+(_?yy(f):f)});function yy(d){return ig(zi(d).toLowerCase())}function by(d){return(d=zi(d))&&d.replace(xa,hF).replace(Jm,"")}var LT=Wl(function(d,f,_){return d+(_?"-":"")+f.toLowerCase()}),BT=Wl(function(d,f,_){return d+(_?" ":"")+f.toLowerCase()}),QF=Pp("toLowerCase"),HT=Wl(function(d,f,_){return d+(_?"_":"")+f.toLowerCase()}),Ey=Wl(function(d,f,_){return d+(_?" ":"")+ig(f)}),Qw=Wl(function(d,f,_){return d+(_?" ":"")+f.toUpperCase()}),ig=Pp("toUpperCase");function Ay(d,f,_){return d=zi(d),(f=_?ee:f)===ee?function(ct){return jl.test(ct)}(d)?function(ct){return ct.match(sv)||[]}(d):function(ct){return ct.match(zn)||[]}(d):d.match(f)||[]}var Ty=pi(function(d,f){try{return ls(d,ee,f)}catch(_){return La(_)?_:new Dn(_)}}),Zw=dl(function(d,f){return Us(f,function(_){_=ni(_),al(d,_,af(d[_],d))}),d});function My(d){return function(){return d}}var JF=Iu(),Pu=Iu(!0);function io(d){return d}function Fu(d){return iA("function"==typeof d?d:Hs(d,1))}var Dy=pi(function(d,f){return function(_){return Pa(_,d,f)}}),Jw=pi(function(d,f){return function(_){return Pa(d,_,f)}});function Iy(d,f,_){var B=Os(f),de=Kh(f,B);null==_&&(!Tr(f)||!de.length&&B.length)&&(_=f,f=d,d=this,de=Kh(f,Os(f)));var Ne=!(Tr(_)&&"chain"in _&&!_.chain),Xe=la(d);return Us(de,function(tt){var dt=f[tt];d[tt]=dt,Xe&&(d.prototype[tt]=function(){var kt=this.__chain__;if(Ne||kt){var Lt=d(this.__wrapped__),zt=Lt.__actions__=eo(this.__actions__);return zt.push({func:dt,args:arguments,thisArg:d}),Lt.__chain__=kt,Lt}return dt.apply(d,zr([this.value()],arguments))})}),d}function Oy(){}var QT=Fp(Yi),ZT=Fp(ti),tE=Fp(Ro);function ku(d){return ra(d)?t_(ni(d)):function(d){return function(f){return ea(f,d)}}(d)}var JT=Fv(),eM=Fv(!0);function Vc(){return[]}function Ny(){return!1}var Wn=R_(function(d,f){return d+f},0),Py=Gd("ceil"),tk=R_(function(d,f){return d/f},1),Ql=Gd("floor"),sE=R_(function(d,f){return d*f},1),oE=Gd("round"),aE=R_(function(d,f){return d-f},0);return De.after=function(d,f){if("function"!=typeof f)throw new Da(we);return d=Jn(d),function(){if(--d<1)return f.apply(this,arguments)}},De.ary=Kp,De.assign=vT,De.assignIn=wT,De.assignInWith=Qd,De.assignWith=ET,De.at=kw,De.before=sy,De.bind=af,De.bindAll=Zw,De.bindKey=Xd,De.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return Rn(d)?d:[d]},De.chain=Z_,De.chunk=function(d,f,_){f=(_?Ws(d,f,_):f===ee)?1:Hr(Jn(f),0);var B=null==d?0:d.length;if(!B||f<1)return[];for(var de=0,Ne=0,Xe=St(Vt(B/f));de<B;)Xe[Ne++]=Ds(d,de,de+=f);return Xe},De.compact=function(d){for(var f=-1,_=null==d?0:d.length,B=0,de=[];++f<_;){var Ne=d[f];Ne&&(de[B++]=Ne)}return de},De.concat=function(){var d=arguments.length;if(!d)return[];for(var f=St(d-1),_=arguments[0],B=d;B--;)f[B-1]=arguments[B];return zr(Rn(_)?eo(_):[_],Ts(f,1))},De.cond=function(d){var f=null==d?0:d.length,_=Fn();return d=f?Yi(d,function(B){if("function"!=typeof B[1])throw new Da(we);return[_(B[0]),B[1]]}):[],pi(function(B){for(var de=-1;++de<f;){var Ne=d[de];if(ls(Ne[0],this,B))return ls(Ne[1],this,B)}})},De.conforms=function(d){return function(d){var f=Os(d);return function(_){return Ap(_,d,f)}}(Hs(d,1))},De.constant=My,De.countBy=YA,De.create=function(d,f){var _=wu(d);return null==f?_:JC(_,f)},De.curry=function vw(d,f,_){var B=ql(d,8,ee,ee,ee,ee,ee,f=_?ee:f);return B.placeholder=vw.placeholder,B},De.curryRight=function oy(d,f,_){var B=ql(d,16,ee,ee,ee,ee,ee,f=_?ee:f);return B.placeholder=oy.placeholder,B},De.debounce=ww,De.defaults=xT,De.defaultsDeep=uf,De.defer=rT,De.delay=Ew,De.difference=CA,De.differenceBy=AA,De.differenceWith=TA,De.drop=function(d,f,_){var B=null==d?0:d.length;return B?Ds(d,(f=_||f===ee?1:Jn(f))<0?0:f,B):[]},De.dropRight=function(d,f,_){var B=null==d?0:d.length;return B?Ds(d,0,(f=B-(f=_||f===ee?1:Jn(f)))<0?0:f):[]},De.dropRightWhile=function(d,f){return d&&d.length?Au(d,Fn(f,3),!0,!0):[]},De.dropWhile=function(d,f){return d&&d.length?Au(d,Fn(f,3),!0):[]},De.fill=function(d,f,_,B){var de=null==d?0:d.length;return de?(_&&"number"!=typeof _&&Ws(d,f,_)&&(_=0,B=de),function(d,f,_,B){var de=d.length;for((_=Jn(_))<0&&(_=-_>de?0:de+_),(B=B===ee||B>de?de:Jn(B))<0&&(B+=de),B=_>B?0:py(B);_<B;)d[_++]=f;return d}(d,f,_,B)):[]},De.filter=function(d,f){return(Rn(d)?Ta:xv)(d,Fn(f,3))},De.flatMap=function(d,f){return Ts(fl(d,f),1)},De.flatMapDeep=function(d,f){return Ts(fl(d,f),te)},De.flatMapDepth=function(d,f,_){return _=_===ee?1:Jn(_),Ts(fl(d,f),_)},De.flatten=Is,De.flattenDeep=function(d){return null!=d&&d.length?Ts(d,te):[]},De.flattenDepth=function(d,f){return null!=d&&d.length?Ts(d,f=f===ee?1:Jn(f)):[]},De.flip=function(d){return ql(d,512)},De.flow=JF,De.flowRight=Pu,De.fromPairs=function(d){for(var f=-1,_=null==d?0:d.length,B={};++f<_;){var de=d[f];B[de[0]]=de[1]}return B},De.functions=function(d){return null==d?[]:Kh(d,Os(d))},De.functionsIn=function(d){return null==d?[]:Kh(d,no(d))},De.groupBy=eT,De.initial=function(d){return null!=d&&d.length?Ds(d,0,-1):[]},De.intersection=Qv,De.intersectionBy=IA,De.intersectionWith=Zv,De.invert=tg,De.invertBy=AT,De.invokeMap=dw,De.iteratee=Fu,De.keyBy=hw,De.keys=Os,De.keysIn=no,De.map=fl,De.mapKeys=function(d,f){var _={};return f=Fn(f,3),ll(d,function(B,de,Ne){al(_,f(B,de,Ne),B)}),_},De.mapValues=function(d,f){var _={};return f=Fn(f,3),ll(d,function(B,de,Ne){al(_,de,f(B,de,Ne))}),_},De.matches=function(d){return sA(Hs(d,1))},De.matchesProperty=function(d,f){return jd(d,Hs(f,1))},De.memoize=lf,De.merge=Uw,De.mergeWith=zw,De.method=Dy,De.methodOf=Jw,De.mixin=Iy,De.negate=ly,De.nthArg=function(d){return d=Jn(d),pi(function(f){return xu(f,d)})},De.omit=MT,De.omitBy=function(d,f){return Hw(d,ly(Fn(f)))},De.once=function(d){return sy(2,d)},De.orderBy=function(d,f,_,B){return null==d?[]:(Rn(f)||(f=null==f?[]:[f]),Rn(_=B?ee:_)||(_=null==_?[]:[_]),Xh(d,f,_))},De.over=QT,De.overArgs=sT,De.overEvery=ZT,De.overSome=tE,De.partial=Xp,De.partialRight=xw,De.partition=pw,De.pick=DT,De.pickBy=Hw,De.property=ku,De.propertyOf=function(d){return function(f){return null==d?ee:ea(d,f)}},De.pull=q_,De.pullAll=Y_,De.pullAllBy=function(d,f,_){return d&&d.length&&f&&f.length?na(d,f,Fn(_,2)):d},De.pullAllWith=function(d,f,_){return d&&d.length&&f&&f.length?na(d,f,ee,_):d},De.pullAt=ew,De.range=JT,De.rangeRight=eM,De.rearg=oT,De.reject=function(d,f){return(Rn(d)?Ta:xv)(d,ly(Fn(f,3)))},De.remove=function(d,f){var _=[];if(!d||!d.length)return _;var B=-1,de=[],Ne=d.length;for(f=Fn(f,3);++B<Ne;){var Xe=d[B];f(Xe,B,d)&&(_.push(Xe),de.push(B))}return Qh(d,de),_},De.rest=function(d,f){if("function"!=typeof d)throw new Da(we);return pi(d,f=f===ee?f:Jn(f))},De.reverse=K_,De.sampleSize=function(d,f,_){return f=(_?Ws(d,f,_):f===ee)?1:Jn(f),(Rn(d)?vv:IF)(d,f)},De.set=function(d,f,_){return null==d?d:Ip(d,f,_)},De.setWith=function(d,f,_,B){return B="function"==typeof B?B:ee,null==d?d:Ip(d,f,_,B)},De.shuffle=function(d){return(Rn(d)?Rd:M_)(d)},De.slice=function(d,f,_){var B=null==d?0:d.length;return B?(_&&"number"!=typeof _&&Ws(d,f,_)?(f=0,_=B):(f=null==f?0:Jn(f),_=_===ee?B:Jn(_)),Ds(d,f,_)):[]},De.sortBy=Yp,De.sortedUniq=function(d){return d&&d.length?Mv(d):[]},De.sortedUniqBy=function(d,f){return d&&d.length?Mv(d,Fn(f,2)):[]},De.split=function(d,f,_){return _&&"number"!=typeof _&&Ws(d,f,_)&&(f=_=ee),(_=_===ee?ve:_>>>0)?(d=zi(d))&&("string"==typeof f||null!=f&&!Nw(f))&&!(f=Lo(f))&&Ph(d)?cl(il(d),0,_):d.split(f,_):[]},De.spread=function(d,f){if("function"!=typeof d)throw new Da(we);return f=null==f?0:Hr(Jn(f),0),pi(function(_){var B=_[f],de=cl(_,0,f);return B&&zr(de,B),ls(d,this,de)})},De.tail=function(d){var f=null==d?0:d.length;return f?Ds(d,1,f):[]},De.take=function(d,f,_){return d&&d.length?Ds(d,0,(f=_||f===ee?1:Jn(f))<0?0:f):[]},De.takeRight=function(d,f,_){var B=null==d?0:d.length;return B?Ds(d,(f=B-(f=_||f===ee?1:Jn(f)))<0?0:f,B):[]},De.takeRightWhile=function(d,f){return d&&d.length?Au(d,Fn(f,3),!1,!0):[]},De.takeWhile=function(d,f){return d&&d.length?Au(d,Fn(f,3)):[]},De.tap=function(d,f){return f(d),d},De.throttle=function(d,f,_){var B=!0,de=!0;if("function"!=typeof d)throw new Da(we);return Tr(_)&&(B="leading"in _?!!_.leading:B,de="trailing"in _?!!_.trailing:de),ww(d,f,{leading:B,maxWait:f,trailing:de})},De.thru=Yd,De.toArray=Pw,De.toPairs=IT,De.toPairsIn=$w,De.toPath=function(d){return Rn(d)?Yi(d,ni):ca(d)?[d]:eo(qv(zi(d)))},De.toPlainObject=Fw,De.transform=function(d,f,_){var B=Rn(d),de=B||gl(d)||cf(d);if(f=Fn(f,4),null==_){var Ne=d&&d.constructor;_=de?B?new Ne:[]:Tr(d)&&la(Ne)?wu(Ia(d)):{}}return(de?Us:ll)(d,function(Xe,tt,dt){return f(_,Xe,tt,dt)}),_},De.unary=function(d){return Kp(d,1)},De.union=iw,De.unionBy=zA,De.unionWith=HA,De.uniq=function(d){return d&&d.length?Rc(d):[]},De.uniqBy=function(d,f){return d&&d.length?Rc(d,Fn(f,2)):[]},De.uniqWith=function(d,f){return f="function"==typeof f?f:ee,d&&d.length?Rc(d,ee,f):[]},De.unset=function(d,f){return null==d||Cu(d,f)},De.unzip=rw,De.unzipWith=$A,De.update=function(d,f,_){return null==d?d:Op(d,f,I_(_))},De.updateWith=function(d,f,_,B){return B="function"==typeof B?B:ee,null==d?d:Op(d,f,I_(_),B)},De.values=th,De.valuesIn=function(d){return null==d?[]:i_(d,no(d))},De.without=sw,De.words=Ay,De.wrap=function(d,f){return Xp(I_(f),d)},De.xor=VF,De.xorBy=jo,De.xorWith=X_,De.zip=Q_,De.zipObject=function(d,f){return Rp(d||[],f||[],ol)},De.zipObjectDeep=function(d,f){return Rp(d||[],f||[],Ip)},De.zipWith=of,De.entries=IT,De.entriesIn=$w,De.extend=wT,De.extendWith=Qd,Iy(De,De),De.add=Wn,De.attempt=Ty,De.camelCase=FT,De.capitalize=yy,De.ceil=Py,De.clamp=function(d,f,_){return _===ee&&(_=f,f=ee),_!==ee&&(_=(_=vo(_))==_?_:0),f!==ee&&(f=(f=vo(f))==f?f:0),Eu(vo(d),f,_)},De.clone=function(d){return Hs(d,4)},De.cloneDeep=function(d){return Hs(d,5)},De.cloneDeepWith=function(d,f){return Hs(d,5,f="function"==typeof f?f:ee)},De.cloneWith=function(d,f){return Hs(d,4,f="function"==typeof f?f:ee)},De.conformsTo=function(d,f){return null==f||Ap(d,f,Os(f))},De.deburr=by,De.defaultTo=function(d,f){return null==d||d!=d?f:d},De.divide=tk,De.endsWith=function(d,f,_){d=zi(d),f=Lo(f);var B=d.length,de=_=_===ee?B:Eu(Jn(_),0,B);return(_-=f.length)>=0&&d.slice(_,de)==f},De.eq=In,De.escape=function(d){return(d=zi(d))&&Jt.test(d)?d.replace(Sa,fF):d},De.escapeRegExp=function(d){return(d=zi(d))&&ht.test(d)?d.replace($e,"\\$&"):d},De.every=function(d,f,_){var B=Rn(d)?ti:Ev;return _&&Ws(d,f,_)&&(f=ee),B(d,Fn(f,3))},De.find=QA,De.findIndex=G_,De.findKey=function(d,f){return Rh(d,Fn(f,3),ll)},De.findLast=ZA,De.findLastIndex=$_,De.findLastKey=function(d,f){return Rh(d,Fn(f,3),Tp)},De.floor=Ql,De.forEach=iy,De.forEachRight=Wp,De.forIn=function(d,f){return null==d?d:Pd(d,Fn(f,3),no)},De.forInRight=function(d,f){return null==d?d:Fd(d,Fn(f,3),no)},De.forOwn=function(d,f){return d&&ll(d,Fn(f,3))},De.forOwnRight=function(d,f){return d&&Tp(d,Fn(f,3))},De.get=hf,De.gt=Zt,De.gte=Tw,De.has=function(d,f){return null!=d&&zv(d,f,kd)},De.hasIn=eg,De.head=Kv,De.identity=io,De.includes=function(d,f,_,B){d=bo(d)?d:th(d),_=_&&!B?Jn(_):0;var de=d.length;return _<0&&(_=Hr(de+_,0)),hy(d)?_<=de&&d.indexOf(f,_)>-1:!!de&&nl(d,f,_)>-1},De.indexOf=function(d,f,_){var B=null==d?0:d.length;if(!B)return-1;var de=null==_?0:Jn(_);return de<0&&(de=Hr(B+de,0)),nl(d,f,de)},De.inRange=function(d,f,_){return f=ml(f),_===ee?(_=f,f=0):_=ml(_),function(d,f,_){return d>=ms(f,_)&&d<Hr(f,_)}(d=vo(d),f,_)},De.invoke=jw,De.isArguments=pl,De.isArray=Rn,De.isArrayBuffer=Mw,De.isArrayLike=bo,De.isArrayLikeObject=Ar,De.isBoolean=function(d){return!0===d||!1===d||Mr(d)&&Ms(d)==Te},De.isBuffer=gl,De.isDate=Dw,De.isElement=function(d){return Mr(d)&&1===d.nodeType&&!Jp(d)},De.isEmpty=function(d){if(null==d)return!0;if(bo(d)&&(Rn(d)||"string"==typeof d||"function"==typeof d.splice||gl(d)||cf(d)||pl(d)))return!d.length;var f=$s(d);if(f==Be||f==gt)return!d.size;if(zp(d))return!Cv(d).length;for(var _ in d)if(Xi.call(d,_))return!1;return!0},De.isEqual=function(d,f){return Mp(d,f)},De.isEqualWith=function(d,f,_){var B=(_="function"==typeof _?_:ee)?_(d,f):ee;return B===ee?Mp(d,f,ee,_):!!B},De.isError=La,De.isFinite=function(d){return"number"==typeof d&&d_(d)},De.isFunction=la,De.isInteger=Zp,De.isLength=uy,De.isMap=gT,De.isMatch=function(d,f){return d===f||x_(d,f,ia(f))},De.isMatchWith=function(d,f,_){return _="function"==typeof _?_:ee,x_(d,f,ia(f),_)},De.isNaN=function(d){return yT(d)&&d!=+d},De.isNative=function(d){if($v(d))throw new Dn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return C_(d)},De.isNil=function(d){return null==d},De.isNull=function(d){return null===d},De.isNumber=yT,De.isObject=Tr,De.isObjectLike=Mr,De.isPlainObject=Jp,De.isRegExp=Nw,De.isSafeInteger=function(d){return Zp(d)&&d>=-Ie&&d<=Ie},De.isSet=bT,De.isString=hy,De.isSymbol=ca,De.isTypedArray=cf,De.isUndefined=function(d){return d===ee},De.isWeakMap=function(d){return Mr(d)&&$s(d)==z},De.isWeakSet=function(d){return Mr(d)&&"[object WeakSet]"==Ms(d)},De.join=function(d,f){return null==d?"":jh.call(d,f)},De.kebabCase=LT,De.last=sa,De.lastIndexOf=function(d,f,_){var B=null==d?0:d.length;if(!B)return-1;var de=B;return _!==ee&&(de=(de=Jn(_))<0?Hr(B+de,0):ms(de,B-1)),f==f?function(ct,It,St){for(var hn=St+1;hn--;)if(ct[hn]===It)return hn;return hn}(d,f,de):Cd(d,Ac,de,!0)},De.lowerCase=BT,De.lowerFirst=QF,De.lt=Bc,De.lte=fy,De.max=function(d){return d&&d.length?Yh(d,io,Fo):ee},De.maxBy=function(d,f){return d&&d.length?Yh(d,Fn(f,2),Fo):ee},De.mean=function(d){return Cs(d,io)},De.meanBy=function(d,f){return Cs(d,Fn(f,2))},De.min=function(d){return d&&d.length?Yh(d,io,Av):ee},De.minBy=function(d,f){return d&&d.length?Yh(d,Fn(f,2),Av):ee},De.stubArray=Vc,De.stubFalse=Ny,De.stubObject=function(){return{}},De.stubString=function(){return""},De.stubTrue=function(){return!0},De.multiply=sE,De.nth=function(d,f){return d&&d.length?xu(d,Jn(f)):ee},De.noConflict=function(){return Vi._===this&&(Vi._=c_),this},De.noop=Oy,De.now=Nu,De.pad=function(d,f,_){d=zi(d);var B=(f=Jn(f))?Fh(d):0;if(!f||B>=f)return d;var de=(f-B)/2;return kp(Ei(de),_)+d+kp(Vt(de),_)},De.padEnd=function(d,f,_){d=zi(d);var B=(f=Jn(f))?Fh(d):0;return f&&B<f?d+kp(f-B,_):d},De.padStart=function(d,f,_){d=zi(d);var B=(f=Jn(f))?Fh(d):0;return f&&B<f?kp(f-B,_)+d:d},De.parseInt=function(d,f,_){return _||null==f?f=0:f&&(f=+f),zC(zi(d).replace(it,""),f||0)},De.random=function(d,f,_){if(_&&"boolean"!=typeof _&&Ws(d,f,_)&&(f=_=ee),_===ee&&("boolean"==typeof f?(_=f,f=ee):"boolean"==typeof d&&(_=d,d=ee)),d===ee&&f===ee?(d=0,f=1):(d=ml(d),f===ee?(f=d,d=0):f=ml(f)),d>f){var B=d;d=f,f=B}if(_||d%1||f%1){var de=Vh();return ms(d+de*(f-d+IC("1e-"+((de+"").length-1))),f)}return Gl(d,f)},De.reduce=function(d,f,_){var B=Rn(d)?_u:Zo,de=arguments.length<3;return B(d,Fn(f,4),_,de,Ic)},De.reduceRight=function(d,f,_){var B=Rn(d)?xd:Zo,de=arguments.length<3;return B(d,Fn(f,4),_,de,E_)},De.repeat=function(d,f,_){return f=(_?Ws(d,f,_):f===ee)?1:Jn(f),Dp(zi(d),f)},De.replace=function(){var d=arguments,f=zi(d[0]);return d.length<3?f:f.replace(d[1],d[2])},De.result=function(d,f,_){var B=-1,de=(f=Pc(f,d)).length;for(de||(de=1,d=ee);++B<de;){var Ne=null==d?ee:d[ni(f[B])];Ne===ee&&(B=de,Ne=_),d=la(Ne)?Ne.call(d):Ne}return d},De.round=oE,De.runInContext=ct,De.sample=function(d){return(Rn(d)?y_:oA)(d)},De.size=function(d){if(null==d)return 0;if(bo(d))return hy(d)?Fh(d):d.length;var f=$s(d);return f==Be||f==gt?d.size:Cv(d).length},De.snakeCase=HT,De.some=function(d,f,_){var B=Rn(d)?Ro:OF;return _&&Ws(d,f,_)&&(f=ee),B(d,Fn(f,3))},De.sortedIndex=function(d,f){return Zh(d,f)},De.sortedIndexBy=function(d,f,_){return D_(d,f,Fn(_,2))},De.sortedIndexOf=function(d,f){var _=null==d?0:d.length;if(_){var B=Zh(d,f);if(B<_&&In(d[B],f))return B}return-1},De.sortedLastIndex=function(d,f){return Zh(d,f,!0)},De.sortedLastIndexBy=function(d,f,_){return D_(d,f,Fn(_,2),!0)},De.sortedLastIndexOf=function(d,f){if(null!=d&&d.length){var B=Zh(d,f,!0)-1;if(In(d[B],f))return B}return-1},De.startCase=Ey,De.startsWith=function(d,f,_){return d=zi(d),_=null==_?0:Eu(Jn(_),0,d.length),f=Lo(f),d.slice(_,_+f.length)==f},De.subtract=aE,De.sum=function(d){return d&&d.length?Ad(d,io):0},De.sumBy=function(d,f){return d&&d.length?Ad(d,Fn(f,2)):0},De.template=function(d,f,_){var B=De.templateSettings;_&&Ws(d,f,_)&&(f=ee),d=zi(d),f=Qd({},f,B,Lv);var tt,dt,de=Qd({},f.imports,B.imports,Lv),Ne=Os(de),Xe=i_(de,Ne),kt=0,Lt=f.interpolate||Zr,zt="__p += '",en=a_((f.escape||Zr).source+"|"+Lt.source+"|"+(Lt===ut?bn:Zr).source+"|"+(f.evaluate||Zr).source+"|$","g"),wn="//# sourceURL="+(Xi.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++DC+"]")+"\n";d.replace(en,function(jn,mi,Mi,wo,qs,ua){return Mi||(Mi=wo),zt+=d.slice(kt,ua).replace(oe,pF),mi&&(tt=!0,zt+="' +\n__e("+mi+") +\n'"),qs&&(dt=!0,zt+="';\n"+qs+";\n__p += '"),Mi&&(zt+="' +\n((__t = ("+Mi+")) == null ? '' : __t) +\n'"),kt=ua+jn.length,jn}),zt+="';\n";var Ln=Xi.call(f,"variable")&&f.variable;if(Ln){if(ai.test(Ln))throw new Dn("Invalid `variable` option passed into `_.template`")}else zt="with (obj) {\n"+zt+"\n}\n";zt=(dt?zt.replace(Bs,""):zt).replace(Qr,"$1").replace(el,"$1;"),zt="function("+(Ln||"obj")+") {\n"+(Ln?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(tt?", __e = _.escape":"")+(dt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+zt+"return __p\n}";var gi=Ty(function(){return Li(Ne,wn+"return "+zt).apply(ee,Xe)});if(gi.source=zt,La(gi))throw gi;return gi},De.times=function(d,f){if((d=Jn(d))<1||d>Ie)return[];var _=ve,B=ms(d,ve);f=Fn(f),d-=ve;for(var de=Td(B,f);++_<d;)f(_);return de},De.toFinite=ml,De.toInteger=Jn,De.toLength=py,De.toLower=function(d){return zi(d).toLowerCase()},De.toNumber=vo,De.toSafeInteger=function(d){return d?Eu(Jn(d),-Ie,Ie):0===d?d:0},De.toString=zi,De.toUpper=function(d){return zi(d).toUpperCase()},De.trim=function(d,f,_){if((d=zi(d))&&(_||f===ee))return uv(d);if(!d||!(f=Lo(f)))return d;var B=il(d),de=il(f);return cl(B,NC(B,de),PC(B,de)+1).join("")},De.trimEnd=function(d,f,_){if((d=zi(d))&&(_||f===ee))return d.slice(0,Tc(d)+1);if(!d||!(f=Lo(f)))return d;var B=il(d);return cl(B,0,PC(B,il(f))+1).join("")},De.trimStart=function(d,f,_){if((d=zi(d))&&(_||f===ee))return d.replace(it,"");if(!d||!(f=Lo(f)))return d;var B=il(d);return cl(B,NC(B,il(f))).join("")},De.truncate=function(d,f){var _=30,B="...";if(Tr(f)){var de="separator"in f?f.separator:de;_="length"in f?Jn(f.length):_,B="omission"in f?Lo(f.omission):B}var Ne=(d=zi(d)).length;if(Ph(d)){var Xe=il(d);Ne=Xe.length}if(_>=Ne)return d;var tt=_-Fh(B);if(tt<1)return B;var dt=Xe?cl(Xe,0,tt).join(""):d.slice(0,tt);if(de===ee)return dt+B;if(Xe&&(tt+=dt.length-tt),Nw(de)){if(d.slice(tt).search(de)){var kt,Lt=dt;for(de.global||(de=a_(de.source,zi($n.exec(de))+"g")),de.lastIndex=0;kt=de.exec(Lt);)var zt=kt.index;dt=dt.slice(0,zt===ee?tt:zt)}}else if(d.indexOf(Lo(de),tt)!=tt){var en=dt.lastIndexOf(de);en>-1&&(dt=dt.slice(0,en))}return dt+B},De.unescape=function(d){return(d=zi(d))&&Es.test(d)?d.replace(kl,o_):d},De.uniqueId=function(d){var f=++vF;return zi(d)+f},De.upperCase=Qw,De.upperFirst=ig,De.each=iy,De.eachRight=Wp,De.first=Kv,Iy(De,function(){var d={};return ll(De,function(f,_){Xi.call(De.prototype,_)||(d[_]=f)}),d}(),{chain:!1}),De.VERSION="4.17.21",Us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){De[d].placeholder=De}),Us(["drop","take"],function(d,f){fi.prototype[d]=function(_){_=_===ee?1:Hr(Jn(_),0);var B=this.__filtered__&&!f?new fi(this):this.clone();return B.__filtered__?B.__takeCount__=ms(_,B.__takeCount__):B.__views__.push({size:ms(_,ve),type:d+(B.__dir__<0?"Right":"")}),B},fi.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),Us(["filter","map","takeWhile"],function(d,f){var _=f+1,B=1==_||3==_;fi.prototype[d]=function(de){var Ne=this.clone();return Ne.__iteratees__.push({iteratee:Fn(de,3),type:_}),Ne.__filtered__=Ne.__filtered__||B,Ne}}),Us(["head","last"],function(d,f){var _="take"+(f?"Right":"");fi.prototype[d]=function(){return this[_](1).value()[0]}}),Us(["initial","tail"],function(d,f){var _="drop"+(f?"":"Right");fi.prototype[d]=function(){return this.__filtered__?new fi(this):this[_](1)}}),fi.prototype.compact=function(){return this.filter(io)},fi.prototype.find=function(d){return this.filter(d).head()},fi.prototype.findLast=function(d){return this.reverse().find(d)},fi.prototype.invokeMap=pi(function(d,f){return"function"==typeof d?new fi(this):this.map(function(_){return Pa(_,d,f)})}),fi.prototype.reject=function(d){return this.filter(ly(Fn(d)))},fi.prototype.slice=function(d,f){d=Jn(d);var _=this;return _.__filtered__&&(d>0||f<0)?new fi(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),f!==ee&&(_=(f=Jn(f))<0?_.dropRight(-f):_.take(f-d)),_)},fi.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},fi.prototype.toArray=function(){return this.take(ve)},ll(fi.prototype,function(d,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),B=/^(?:head|last)$/.test(f),de=De[B?"take"+("last"==f?"Right":""):f],Ne=B||/^find/.test(f);!de||(De.prototype[f]=function(){var Xe=this.__wrapped__,tt=B?[1]:arguments,dt=Xe instanceof fi,kt=tt[0],Lt=dt||Rn(Xe),zt=function(mi){var Mi=de.apply(De,zr([mi],tt));return B&&en?Mi[0]:Mi};Lt&&_&&"function"==typeof kt&&1!=kt.length&&(dt=Lt=!1);var en=this.__chain__,wn=!!this.__actions__.length,Ln=Ne&&!en,gi=dt&&!wn;if(!Ne&&Lt){Xe=gi?Xe:new fi(this);var jn=d.apply(Xe,tt);return jn.__actions__.push({func:Yd,args:[zt],thisArg:ee}),new Po(jn,en)}return Ln&&gi?d.apply(this,tt):(jn=this.thru(zt),Ln?B?jn.value()[0]:jn.value():jn)})}),Us(["pop","push","shift","sort","splice","unshift"],function(d){var f=gr[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",B=/^(?:pop|shift)$/.test(d);De.prototype[d]=function(){var de=arguments;if(B&&!this.__chain__){var Ne=this.value();return f.apply(Rn(Ne)?Ne:[],de)}return this[_](function(Xe){return f.apply(Rn(Xe)?Xe:[],de)})}}),ll(fi.prototype,function(d,f){var _=De[f];if(_){var B=_.name+"";Xi.call(Id,B)||(Id[B]=[]),Id[B].push({name:f,func:_})}}),Id[kc(ee,2).name]=[{name:"wrapper",func:ee}],fi.prototype.clone=function(){var d=new fi(this.__wrapped__);return d.__actions__=eo(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=eo(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=eo(this.__views__),d},fi.prototype.reverse=function(){if(this.__filtered__){var d=new fi(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},fi.prototype.value=function(){var d=this.__wrapped__.value(),f=this.__dir__,_=Rn(d),B=f<0,de=_?d.length:0,Ne=function(d,f,_){for(var B=-1,de=_.length;++B<de;){var Ne=_[B],Xe=Ne.size;switch(Ne.type){case"drop":d+=Xe;break;case"dropRight":f-=Xe;break;case"take":f=ms(f,d+Xe);break;case"takeRight":d=Hr(d,f-Xe)}}return{start:d,end:f}}(0,de,this.__views__),Xe=Ne.start,tt=Ne.end,dt=tt-Xe,kt=B?tt:Xe-1,Lt=this.__iteratees__,zt=Lt.length,en=0,wn=ms(dt,this.__takeCount__);if(!_||!B&&de==dt&&wn==dt)return aA(d,this.__actions__);var Ln=[];e:for(;dt--&&en<wn;){for(var gi=-1,jn=d[kt+=f];++gi<zt;){var mi=Lt[gi],wo=mi.type,qs=(0,mi.iteratee)(jn);if(2==wo)jn=qs;else if(!qs){if(1==wo)continue e;break e}}Ln[en++]=jn}return Ln},De.prototype.at=J_,De.prototype.chain=function(){return Z_(this)},De.prototype.commit=function(){return new Po(this.value(),this.__chain__)},De.prototype.next=function(){this.__values__===ee&&(this.__values__=Pw(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?ee:this.__values__[this.__index__++]}},De.prototype.plant=function(d){for(var f,_=this;_ instanceof Gh;){var B=nf(_);B.__index__=0,B.__values__=ee,f?de.__wrapped__=B:f=B;var de=B;_=_.__wrapped__}return de.__wrapped__=d,f},De.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof fi){var f=d;return this.__actions__.length&&(f=new fi(this)),(f=f.reverse()).__actions__.push({func:Yd,args:[K_],thisArg:ee}),new Po(f,this.__chain__)}return this.thru(K_)},De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=function(){return aA(this.__wrapped__,this.__actions__)},De.prototype.first=De.prototype.head,Bh&&(De.prototype[Bh]=function(){return this}),De}();Vi._=kh,(lt=function(){return kh}.call(Ye,Je,Ye,jt))!==ee&&(jt.exports=lt)}.call(this)},478:function(jt){jt.exports=function(){"use strict";function Ye(ot,ut){for(var ft=0;ft<ut.length;ft++){var be=ut[ft];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(ot,be.key,be)}}function ee(ot,ut){(null==ut||ut>ot.length)&&(ut=ot.length);for(var ft=0,be=new Array(ut);ft<ut;ft++)be[ft]=ot[ft];return be}function Et(ot,ut){var ft="undefined"!=typeof Symbol&&ot[Symbol.iterator]||ot["@@iterator"];if(ft)return(ft=ft.call(ot)).next.bind(ft);if(Array.isArray(ot)||(ft=function(ot,ut){if(ot){if("string"==typeof ot)return ee(ot,ut);var ft=Object.prototype.toString.call(ot).slice(8,-1);if("Object"===ft&&ot.constructor&&(ft=ot.constructor.name),"Map"===ft||"Set"===ft)return Array.from(ot);if("Arguments"===ft||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return ee(ot,ut)}}(ot))||ut&&ot&&"number"==typeof ot.length){ft&&(ot=ft);var be=0;return function(){return be>=ot.length?{done:!0}:{done:!1,value:ot[be++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je={exports:{}};function Q(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}je.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Q,changeDefaults:function(ot){je.exports.defaults=ot}};var fe=/[&<>"']/,K=/[&<>"']/g,V=/[<>"']|&(?!#?\w+;)/,F=/[<>"']|&(?!#?\w+;)/g,Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},L=function(ut){return Y[ut]};var C=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function R(ot){return ot.replace(C,function(ut,ft){return"colon"===(ft=ft.toLowerCase())?":":"#"===ft.charAt(0)?"x"===ft.charAt(1)?String.fromCharCode(parseInt(ft.substring(2),16)):String.fromCharCode(+ft.substring(1)):""})}var T=/(^|[^\[])\^/g;var v=/[^\w:]/g,b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var A={},E=/^[^:]+:\/*[^/]*$/,I=/^([^:]+:)[\s\S]*$/,H=/^([^:]+:\/*[^/]*)[\s\S]*$/;function M(ot,ut){A[" "+ot]||(A[" "+ot]=E.test(ot)?ot+"/":G(ot,"/",!0));var ft=-1===(ot=A[" "+ot]).indexOf(":");return"//"===ut.substring(0,2)?ft?ut:ot.replace(I,"$1")+ut:"/"===ut.charAt(0)?ft?ut:ot.replace(H,"$1")+ut:ot+ut}function G(ot,ut,ft){var be=ot.length;if(0===be)return"";for(var Ce=0;Ce<be;){var $e=ot.charAt(be-Ce-1);if($e!==ut||ft){if($e===ut||!ft)break;Ce++}else Ce++}return ot.substr(0,be-Ce)}var te_escape=function(ot,ut){if(ut){if(fe.test(ot))return ot.replace(K,L)}else if(V.test(ot))return ot.replace(F,L);return ot},te_unescape=R,te_edit=function(ot,ut){ot=ot.source||ot,ut=ut||"";var ft={replace:function(Ce,$e){return $e=($e=$e.source||$e).replace(T,"$1"),ot=ot.replace(Ce,$e),ft},getRegex:function(){return new RegExp(ot,ut)}};return ft},te_cleanUrl=function(ot,ut,ft){if(ot){var be;try{be=decodeURIComponent(R(ft)).replace(v,"").toLowerCase()}catch(Ce){return null}if(0===be.indexOf("javascript:")||0===be.indexOf("vbscript:")||0===be.indexOf("data:"))return null}ut&&!b.test(ft)&&(ft=M(ut,ft));try{ft=encodeURI(ft).replace(/%25/g,"%")}catch(Ce){return null}return ft},te_noopTest={exec:function(){}},te_merge=function(ot){for(var ft,be,ut=1;ut<arguments.length;ut++)for(be in ft=arguments[ut])Object.prototype.hasOwnProperty.call(ft,be)&&(ot[be]=ft[be]);return ot},te_checkSanitizeDeprecation=function(ot){ot&&ot.sanitize&&!ot.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},te_repeatString=function(ot,ut){if(ut<1)return"";for(var ft="";ut>1;)1&ut&&(ft+=ot),ut>>=1,ot+=ot;return ft+ot},Ie=je.exports.defaults,ye=G,re=function(ot,ut){var be=ot.replace(/\|/g,function($e,ht,it){for(var Tt=!1,Mt=ht;--Mt>=0&&"\\"===it[Mt];)Tt=!Tt;return Tt?"|":" |"}).split(/ \|/),Ce=0;if(be.length>ut)be.splice(ut);else for(;be.length<ut;)be.push("");for(;Ce<be.length;Ce++)be[Ce]=be[Ce].trim().replace(/\\\|/g,"|");return be},ve=te_escape,Fe=function(ot,ut){if(-1===ot.indexOf(ut[1]))return-1;for(var ft=ot.length,be=0,Ce=0;Ce<ft;Ce++)if("\\"===ot[Ce])Ce++;else if(ot[Ce]===ut[0])be++;else if(ot[Ce]===ut[1]&&--be<0)return Ce;return-1};function Qe(ot,ut,ft){var be=ut.href,Ce=ut.title?ve(ut.title):null,$e=ot[1].replace(/\\([\[\]])/g,"$1");return"!"!==ot[0].charAt(0)?{type:"link",raw:ft,href:be,title:Ce,text:$e}:{type:"image",raw:ft,href:be,title:Ce,text:ve($e)}}var J=function(){function ot(ft){this.options=ft||Ie}var ut=ot.prototype;return ut.space=function(be){var Ce=this.rules.block.newline.exec(be);if(Ce)return Ce[0].length>1?{type:"space",raw:Ce[0]}:{raw:"\n"}},ut.code=function(be){var Ce=this.rules.block.code.exec(be);if(Ce){var $e=Ce[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:Ce[0],codeBlockStyle:"indented",text:this.options.pedantic?$e:ye($e,"\n")}}},ut.fences=function(be){var Ce=this.rules.block.fences.exec(be);if(Ce){var $e=Ce[0],ht=function(ot,ut){var ft=ot.match(/^(\s+)(?:```)/);if(null===ft)return ut;var be=ft[1];return ut.split("\n").map(function(Ce){var $e=Ce.match(/^\s+/);return null===$e?Ce:$e[0].length>=be.length?Ce.slice(be.length):Ce}).join("\n")}($e,Ce[3]||"");return{type:"code",raw:$e,lang:Ce[2]?Ce[2].trim():Ce[2],text:ht}}},ut.heading=function(be){var Ce=this.rules.block.heading.exec(be);if(Ce){var $e=Ce[2].trim();if(/#$/.test($e)){var ht=ye($e,"#");(this.options.pedantic||!ht||/ $/.test(ht))&&($e=ht.trim())}return{type:"heading",raw:Ce[0],depth:Ce[1].length,text:$e}}},ut.nptable=function(be){var Ce=this.rules.block.nptable.exec(be);if(Ce){var $e={type:"table",header:re(Ce[1].replace(/^ *| *\| *$/g,"")),align:Ce[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:Ce[3]?Ce[3].replace(/\n$/,"").split("\n"):[],raw:Ce[0]};if($e.header.length===$e.align.length){var it,ht=$e.align.length;for(it=0;it<ht;it++)$e.align[it]=/^ *-+: *$/.test($e.align[it])?"right":/^ *:-+: *$/.test($e.align[it])?"center":/^ *:-+ *$/.test($e.align[it])?"left":null;for(ht=$e.cells.length,it=0;it<ht;it++)$e.cells[it]=re($e.cells[it],$e.header.length);return $e}}},ut.hr=function(be){var Ce=this.rules.block.hr.exec(be);if(Ce)return{type:"hr",raw:Ce[0]}},ut.blockquote=function(be){var Ce=this.rules.block.blockquote.exec(be);if(Ce){var $e=Ce[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:Ce[0],text:$e}}},ut.list=function(be){var Ce=this.rules.block.list.exec(be);if(Ce){var Xt,zn,ai,Nn,bn,$n,Tn,lr,cr,$e=Ce[0],ht=Ce[2],it=ht.length>1,Tt={type:"list",raw:$e,ordered:it,start:it?+ht.slice(0,-1):"",loose:!1,items:[]},Mt=Ce[0].match(this.rules.block.item),Dt=!1,Xn=Mt.length;ai=this.rules.block.listItemStart.exec(Mt[0]);for(var $i=0;$i<Xn;$i++){if($e=Xt=Mt[$i],this.options.pedantic||(cr=Xt.match(new RegExp("\\n\\s*\\n {0,"+(ai[0].length-1)+"}\\S")))&&(bn=Xt.length-cr.index+Mt.slice($i+1).join("\n").length,Tt.raw=Tt.raw.substring(0,Tt.raw.length-bn),$e=Xt=Xt.substring(0,cr.index),Xn=$i+1),$i!==Xn-1){if(Nn=this.rules.block.listItemStart.exec(Mt[$i+1]),this.options.pedantic?Nn[1].length>ai[1].length:Nn[1].length>=ai[0].length||Nn[1].length>3){Mt.splice($i,2,Mt[$i]+(!this.options.pedantic&&Nn[1].length<ai[0].length&&!Mt[$i].match(/\n$/)?"":"\n")+Mt[$i+1]),$i--,Xn--;continue}(!this.options.pedantic||this.options.smartLists?Nn[2][Nn[2].length-1]!==ht[ht.length-1]:it===(1===Nn[2].length))&&(bn=Mt.slice($i+1).join("\n").length,Tt.raw=Tt.raw.substring(0,Tt.raw.length-bn),$i=Xn-1),ai=Nn}zn=Xt.length,~(Xt=Xt.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(zn-=Xt.length,Xt=Xt.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+zn+"}","gm"),"")),Xt=ye(Xt,"\n"),$i!==Xn-1&&($e+="\n"),$n=Dt||/\n\n(?!\s*$)/.test($e),$i!==Xn-1&&(Dt="\n\n"===$e.slice(-2),$n||($n=Dt)),$n&&(Tt.loose=!0),this.options.gfm&&(lr=void 0,(Tn=/^\[[ xX]\] /.test(Xt))&&(lr=" "!==Xt[1],Xt=Xt.replace(/^\[[ xX]\] +/,""))),Tt.items.push({type:"list_item",raw:$e,task:Tn,checked:lr,loose:$n,text:Xt})}return Tt}},ut.html=function(be){var Ce=this.rules.block.html.exec(be);if(Ce)return{type:this.options.sanitize?"paragraph":"html",raw:Ce[0],pre:!this.options.sanitizer&&("pre"===Ce[1]||"script"===Ce[1]||"style"===Ce[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Ce[0]):ve(Ce[0]):Ce[0]}},ut.def=function(be){var Ce=this.rules.block.def.exec(be);if(Ce)return Ce[3]&&(Ce[3]=Ce[3].substring(1,Ce[3].length-1)),{type:"def",tag:Ce[1].toLowerCase().replace(/\s+/g," "),raw:Ce[0],href:Ce[2],title:Ce[3]}},ut.table=function(be){var Ce=this.rules.block.table.exec(be);if(Ce){var $e={type:"table",header:re(Ce[1].replace(/^ *| *\| *$/g,"")),align:Ce[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:Ce[3]?Ce[3].replace(/\n$/,"").split("\n"):[]};if($e.header.length===$e.align.length){$e.raw=Ce[0];var it,ht=$e.align.length;for(it=0;it<ht;it++)$e.align[it]=/^ *-+: *$/.test($e.align[it])?"right":/^ *:-+: *$/.test($e.align[it])?"center":/^ *:-+ *$/.test($e.align[it])?"left":null;for(ht=$e.cells.length,it=0;it<ht;it++)$e.cells[it]=re($e.cells[it].replace(/^ *\| *| *\| *$/g,""),$e.header.length);return $e}}},ut.lheading=function(be){var Ce=this.rules.block.lheading.exec(be);if(Ce)return{type:"heading",raw:Ce[0],depth:"="===Ce[2].charAt(0)?1:2,text:Ce[1]}},ut.paragraph=function(be){var Ce=this.rules.block.paragraph.exec(be);if(Ce)return{type:"paragraph",raw:Ce[0],text:"\n"===Ce[1].charAt(Ce[1].length-1)?Ce[1].slice(0,-1):Ce[1]}},ut.text=function(be){var Ce=this.rules.block.text.exec(be);if(Ce)return{type:"text",raw:Ce[0],text:Ce[0]}},ut.escape=function(be){var Ce=this.rules.inline.escape.exec(be);if(Ce)return{type:"escape",raw:Ce[0],text:ve(Ce[1])}},ut.tag=function(be,Ce,$e){var ht=this.rules.inline.tag.exec(be);if(ht)return!Ce&&/^<a /i.test(ht[0])?Ce=!0:Ce&&/^<\/a>/i.test(ht[0])&&(Ce=!1),!$e&&/^<(pre|code|kbd|script)(\s|>)/i.test(ht[0])?$e=!0:$e&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ht[0])&&($e=!1),{type:this.options.sanitize?"text":"html",raw:ht[0],inLink:Ce,inRawBlock:$e,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ht[0]):ve(ht[0]):ht[0]}},ut.link=function(be){var Ce=this.rules.inline.link.exec(be);if(Ce){var $e=Ce[2].trim();if(!this.options.pedantic&&/^</.test($e)){if(!/>$/.test($e))return;var ht=ye($e.slice(0,-1),"\\");if(($e.length-ht.length)%2==0)return}else{var it=Fe(Ce[2],"()");if(it>-1){var Mt=(0===Ce[0].indexOf("!")?5:4)+Ce[1].length+it;Ce[2]=Ce[2].substring(0,it),Ce[0]=Ce[0].substring(0,Mt).trim(),Ce[3]=""}}var Dt=Ce[2],Xt="";if(this.options.pedantic){var zn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Dt);zn&&(Dt=zn[1],Xt=zn[3])}else Xt=Ce[3]?Ce[3].slice(1,-1):"";return Dt=Dt.trim(),/^</.test(Dt)&&(Dt=this.options.pedantic&&!/>$/.test($e)?Dt.slice(1):Dt.slice(1,-1)),Qe(Ce,{href:Dt&&Dt.replace(this.rules.inline._escapes,"$1"),title:Xt&&Xt.replace(this.rules.inline._escapes,"$1")},Ce[0])}},ut.reflink=function(be,Ce){var $e;if(($e=this.rules.inline.reflink.exec(be))||($e=this.rules.inline.nolink.exec(be))){var ht=($e[2]||$e[1]).replace(/\s+/g," ");if(!(ht=Ce[ht.toLowerCase()])||!ht.href){var it=$e[0].charAt(0);return{type:"text",raw:it,text:it}}return Qe($e,ht,$e[0])}},ut.emStrong=function(be,Ce,$e){void 0===$e&&($e="");var ht=this.rules.inline.emStrong.lDelim.exec(be);if(ht&&(!ht[3]||!$e.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var it=ht[1]||ht[2]||"";if(!it||it&&(""===$e||this.rules.inline.punctuation.exec($e))){var Mt,Dt,Tt=ht[0].length-1,Xt=Tt,zn=0,ai="*"===ht[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(ai.lastIndex=0,Ce=Ce.slice(-1*be.length+Tt);null!=(ht=ai.exec(Ce));)if(Mt=ht[1]||ht[2]||ht[3]||ht[4]||ht[5]||ht[6]){if(Dt=Mt.length,ht[3]||ht[4]){Xt+=Dt;continue}if((ht[5]||ht[6])&&Tt%3&&!((Tt+Dt)%3)){zn+=Dt;continue}if(!((Xt-=Dt)>0))return Dt=Math.min(Dt,Dt+Xt+zn),Math.min(Tt,Dt)%2?{type:"em",raw:be.slice(0,Tt+ht.index+Dt+1),text:be.slice(1,Tt+ht.index+Dt)}:{type:"strong",raw:be.slice(0,Tt+ht.index+Dt+1),text:be.slice(2,Tt+ht.index+Dt-1)}}}}},ut.codespan=function(be){var Ce=this.rules.inline.code.exec(be);if(Ce){var $e=Ce[2].replace(/\n/g," "),ht=/[^ ]/.test($e),it=/^ /.test($e)&&/ $/.test($e);return ht&&it&&($e=$e.substring(1,$e.length-1)),$e=ve($e,!0),{type:"codespan",raw:Ce[0],text:$e}}},ut.br=function(be){var Ce=this.rules.inline.br.exec(be);if(Ce)return{type:"br",raw:Ce[0]}},ut.del=function(be){var Ce=this.rules.inline.del.exec(be);if(Ce)return{type:"del",raw:Ce[0],text:Ce[2]}},ut.autolink=function(be,Ce){var ht,it,$e=this.rules.inline.autolink.exec(be);if($e)return it="@"===$e[2]?"mailto:"+(ht=ve(this.options.mangle?Ce($e[1]):$e[1])):ht=ve($e[1]),{type:"link",raw:$e[0],text:ht,href:it,tokens:[{type:"text",raw:ht,text:ht}]}},ut.url=function(be,Ce){var $e;if($e=this.rules.inline.url.exec(be)){var ht,it;if("@"===$e[2])it="mailto:"+(ht=ve(this.options.mangle?Ce($e[0]):$e[0]));else{var Tt;do{Tt=$e[0],$e[0]=this.rules.inline._backpedal.exec($e[0])[0]}while(Tt!==$e[0]);ht=ve($e[0]),it="www."===$e[1]?"http://"+ht:ht}return{type:"link",raw:$e[0],text:ht,href:it,tokens:[{type:"text",raw:ht,text:ht}]}}},ut.inlineText=function(be,Ce,$e){var it,ht=this.rules.inline.text.exec(be);if(ht)return it=Ce?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ht[0]):ve(ht[0]):ht[0]:ve(this.options.smartypants?$e(ht[0]):ht[0]),{type:"text",raw:ht[0],text:it}},ot}(),ae=te_noopTest,_e=te_edit,Te=te_merge,xe={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:ae,table:ae,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};xe.def=_e(xe.def).replace("label",xe._label).replace("title",xe._title).getRegex(),xe.bullet=/(?:[*+-]|\d{1,9}[.)])/,xe.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,xe.item=_e(xe.item,"gm").replace(/bull/g,xe.bullet).getRegex(),xe.listItemStart=_e(/^( *)(bull) */).replace("bull",xe.bullet).getRegex(),xe.list=_e(xe.list).replace(/bull/g,xe.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+xe.def.source+")").getRegex(),xe._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xe._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,xe.html=_e(xe.html,"i").replace("comment",xe._comment).replace("tag",xe._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),xe.paragraph=_e(xe._paragraph).replace("hr",xe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xe._tag).getRegex(),xe.blockquote=_e(xe.blockquote).replace("paragraph",xe.paragraph).getRegex(),xe.normal=Te({},xe),xe.gfm=Te({},xe.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),xe.gfm.nptable=_e(xe.gfm.nptable).replace("hr",xe.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xe._tag).getRegex(),xe.gfm.table=_e(xe.gfm.table).replace("hr",xe.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xe._tag).getRegex(),xe.pedantic=Te({},xe.normal,{html:_e("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",xe._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ae,paragraph:_e(xe.normal._paragraph).replace("hr",xe.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",xe.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Ge={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ae,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ae,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Ge.punctuation=_e(Ge.punctuation).replace(/punctuation/g,Ge._punctuation).getRegex(),Ge.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ge.escapedEmSt=/\\\*|\\_/g,Ge._comment=_e(xe._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ge.emStrong.lDelim=_e(Ge.emStrong.lDelim).replace(/punct/g,Ge._punctuation).getRegex(),Ge.emStrong.rDelimAst=_e(Ge.emStrong.rDelimAst,"g").replace(/punct/g,Ge._punctuation).getRegex(),Ge.emStrong.rDelimUnd=_e(Ge.emStrong.rDelimUnd,"g").replace(/punct/g,Ge._punctuation).getRegex(),Ge._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ge._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ge._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ge.autolink=_e(Ge.autolink).replace("scheme",Ge._scheme).replace("email",Ge._email).getRegex(),Ge._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ge.tag=_e(Ge.tag).replace("comment",Ge._comment).replace("attribute",Ge._attribute).getRegex(),Ge._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ge._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ge._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ge.link=_e(Ge.link).replace("label",Ge._label).replace("href",Ge._href).replace("title",Ge._title).getRegex(),Ge.reflink=_e(Ge.reflink).replace("label",Ge._label).getRegex(),Ge.reflinkSearch=_e(Ge.reflinkSearch,"g").replace("reflink",Ge.reflink).replace("nolink",Ge.nolink).getRegex(),Ge.normal=Te({},Ge),Ge.pedantic=Te({},Ge.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_e(/^!?\[(label)\]\((.*?)\)/).replace("label",Ge._label).getRegex(),reflink:_e(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ge._label).getRegex()}),Ge.gfm=Te({},Ge.normal,{escape:_e(Ge.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ge.gfm.url=_e(Ge.gfm.url,"i").replace("email",Ge.gfm._extended_email).getRegex(),Ge.breaks=Te({},Ge.gfm,{br:_e(Ge.br).replace("{2,}","*").getRegex(),text:_e(Ge.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Se={block:xe,inline:Ge},Ue=J,Ke=je.exports.defaults,Be=Se.block,X=Se.inline,q=te_repeatString;function ge(ot){return ot.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function le(ot){var ft,be,ut="",Ce=ot.length;for(ft=0;ft<Ce;ft++)be=ot.charCodeAt(ft),Math.random()>.5&&(be="x"+be.toString(16)),ut+="&#"+be+";";return ut}var qe=function(){function ot(ft){this.tokens=[],this.tokens.links=Object.create(null),this.options=ft||Ke,this.options.tokenizer=this.options.tokenizer||new Ue,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var be={block:Be.normal,inline:X.normal};this.options.pedantic?(be.block=Be.pedantic,be.inline=X.pedantic):this.options.gfm&&(be.block=Be.gfm,be.inline=this.options.breaks?X.breaks:X.gfm),this.tokenizer.rules=be}ot.lex=function(be,Ce){return new ot(Ce).lex(be)},ot.lexInline=function(be,Ce){return new ot(Ce).inlineTokens(be)};var ut=ot.prototype;return ut.lex=function(be){return be=be.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(be,this.tokens,!0),this.inline(this.tokens),this.tokens},ut.blockTokens=function(be,Ce,$e){var it,Tt,Mt,Dt,Xt,zn,ht=this;for(void 0===Ce&&(Ce=[]),void 0===$e&&($e=!0),this.options.pedantic&&(be=be.replace(/^ +$/gm,""));be;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Nn){return!!(it=Nn.call(ht,be,Ce))&&(be=be.substring(it.raw.length),Ce.push(it),!0)}))){if(it=this.tokenizer.space(be)){be=be.substring(it.raw.length),it.type&&Ce.push(it);continue}if(it=this.tokenizer.code(be)){be=be.substring(it.raw.length),(Dt=Ce[Ce.length-1])&&"paragraph"===Dt.type?(Dt.raw+="\n"+it.raw,Dt.text+="\n"+it.text):Ce.push(it);continue}if(it=this.tokenizer.fences(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if(it=this.tokenizer.heading(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if(it=this.tokenizer.nptable(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if(it=this.tokenizer.hr(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if(it=this.tokenizer.blockquote(be)){be=be.substring(it.raw.length),it.tokens=this.blockTokens(it.text,[],$e),Ce.push(it);continue}if(it=this.tokenizer.list(be)){for(be=be.substring(it.raw.length),Mt=it.items.length,Tt=0;Tt<Mt;Tt++)it.items[Tt].tokens=this.blockTokens(it.items[Tt].text,[],!1);Ce.push(it);continue}if(it=this.tokenizer.html(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if($e&&(it=this.tokenizer.def(be))){be=be.substring(it.raw.length),this.tokens.links[it.tag]||(this.tokens.links[it.tag]={href:it.href,title:it.title});continue}if(it=this.tokenizer.table(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if(it=this.tokenizer.lheading(be)){be=be.substring(it.raw.length),Ce.push(it);continue}if(Xt=be,this.options.extensions&&this.options.extensions.startBlock&&function(){var Nn=1/0,bn=be.slice(1),$n=void 0;ht.options.extensions.startBlock.forEach(function(Tn){"number"==typeof($n=Tn.call(this,bn))&&$n>=0&&(Nn=Math.min(Nn,$n))}),Nn<1/0&&Nn>=0&&(Xt=be.substring(0,Nn+1))}(),$e&&(it=this.tokenizer.paragraph(Xt))){Dt=Ce[Ce.length-1],zn&&"paragraph"===Dt.type?(Dt.raw+="\n"+it.raw,Dt.text+="\n"+it.text):Ce.push(it),zn=Xt.length!==be.length,be=be.substring(it.raw.length);continue}if(it=this.tokenizer.text(be)){be=be.substring(it.raw.length),(Dt=Ce[Ce.length-1])&&"text"===Dt.type?(Dt.raw+="\n"+it.raw,Dt.text+="\n"+it.text):Ce.push(it);continue}if(be){var ai="Infinite loop on byte: "+be.charCodeAt(0);if(this.options.silent){console.error(ai);break}throw new Error(ai)}}return Ce},ut.inline=function(be){var Ce,$e,ht,it,Tt,Mt,Dt=be.length;for(Ce=0;Ce<Dt;Ce++)switch(Mt=be[Ce],Mt.type){case"paragraph":case"text":case"heading":Mt.tokens=[],this.inlineTokens(Mt.text,Mt.tokens);break;case"table":for(Mt.tokens={header:[],cells:[]},it=Mt.header.length,$e=0;$e<it;$e++)Mt.tokens.header[$e]=[],this.inlineTokens(Mt.header[$e],Mt.tokens.header[$e]);for(it=Mt.cells.length,$e=0;$e<it;$e++)for(Tt=Mt.cells[$e],Mt.tokens.cells[$e]=[],ht=0;ht<Tt.length;ht++)Mt.tokens.cells[$e][ht]=[],this.inlineTokens(Tt[ht],Mt.tokens.cells[$e][ht]);break;case"blockquote":this.inline(Mt.tokens);break;case"list":for(it=Mt.items.length,$e=0;$e<it;$e++)this.inline(Mt.items[$e].tokens)}return be},ut.inlineTokens=function(be,Ce,$e,ht){var it=this;void 0===Ce&&(Ce=[]),void 0===$e&&($e=!1),void 0===ht&&(ht=!1);var Tt,Mt,Dt,zn,ai,Nn,Xt=be;if(this.tokens.links){var bn=Object.keys(this.tokens.links);if(bn.length>0)for(;null!=(zn=this.tokenizer.rules.inline.reflinkSearch.exec(Xt));)bn.includes(zn[0].slice(zn[0].lastIndexOf("[")+1,-1))&&(Xt=Xt.slice(0,zn.index)+"["+q("a",zn[0].length-2)+"]"+Xt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(zn=this.tokenizer.rules.inline.blockSkip.exec(Xt));)Xt=Xt.slice(0,zn.index)+"["+q("a",zn[0].length-2)+"]"+Xt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(zn=this.tokenizer.rules.inline.escapedEmSt.exec(Xt));)Xt=Xt.slice(0,zn.index)+"++"+Xt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;be;)if(ai||(Nn=""),ai=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Tn){return!!(Tt=Tn.call(it,be,Ce))&&(be=be.substring(Tt.raw.length),Ce.push(Tt),!0)}))){if(Tt=this.tokenizer.escape(be)){be=be.substring(Tt.raw.length),Ce.push(Tt);continue}if(Tt=this.tokenizer.tag(be,$e,ht)){be=be.substring(Tt.raw.length),$e=Tt.inLink,ht=Tt.inRawBlock,(Mt=Ce[Ce.length-1])&&"text"===Tt.type&&"text"===Mt.type?(Mt.raw+=Tt.raw,Mt.text+=Tt.text):Ce.push(Tt);continue}if(Tt=this.tokenizer.link(be)){be=be.substring(Tt.raw.length),"link"===Tt.type&&(Tt.tokens=this.inlineTokens(Tt.text,[],!0,ht)),Ce.push(Tt);continue}if(Tt=this.tokenizer.reflink(be,this.tokens.links)){be=be.substring(Tt.raw.length),Mt=Ce[Ce.length-1],"link"===Tt.type?(Tt.tokens=this.inlineTokens(Tt.text,[],!0,ht),Ce.push(Tt)):Mt&&"text"===Tt.type&&"text"===Mt.type?(Mt.raw+=Tt.raw,Mt.text+=Tt.text):Ce.push(Tt);continue}if(Tt=this.tokenizer.emStrong(be,Xt,Nn)){be=be.substring(Tt.raw.length),Tt.tokens=this.inlineTokens(Tt.text,[],$e,ht),Ce.push(Tt);continue}if(Tt=this.tokenizer.codespan(be)){be=be.substring(Tt.raw.length),Ce.push(Tt);continue}if(Tt=this.tokenizer.br(be)){be=be.substring(Tt.raw.length),Ce.push(Tt);continue}if(Tt=this.tokenizer.del(be)){be=be.substring(Tt.raw.length),Tt.tokens=this.inlineTokens(Tt.text,[],$e,ht),Ce.push(Tt);continue}if(Tt=this.tokenizer.autolink(be,le)){be=be.substring(Tt.raw.length),Ce.push(Tt);continue}if(!$e&&(Tt=this.tokenizer.url(be,le))){be=be.substring(Tt.raw.length),Ce.push(Tt);continue}if(Dt=be,this.options.extensions&&this.options.extensions.startInline&&function(){var Tn=1/0,lr=be.slice(1),cr=void 0;it.options.extensions.startInline.forEach(function(Xn){"number"==typeof(cr=Xn.call(this,lr))&&cr>=0&&(Tn=Math.min(Tn,cr))}),Tn<1/0&&Tn>=0&&(Dt=be.substring(0,Tn+1))}(),Tt=this.tokenizer.inlineText(Dt,ht,ge)){be=be.substring(Tt.raw.length),"_"!==Tt.raw.slice(-1)&&(Nn=Tt.raw.slice(-1)),ai=!0,(Mt=Ce[Ce.length-1])&&"text"===Mt.type?(Mt.raw+=Tt.raw,Mt.text+=Tt.text):Ce.push(Tt);continue}if(be){var $n="Infinite loop on byte: "+be.charCodeAt(0);if(this.options.silent){console.error($n);break}throw new Error($n)}}return Ce},function(ot,ut,ft){ut&&Ye(ot.prototype,ut),ft&&Ye(ot,ft)}(ot,null,[{key:"rules",get:function(){return{block:Be,inline:X}}}]),ot}(),_t=je.exports.defaults,gt=te_cleanUrl,Ae=te_escape,U=function(){function ot(ft){this.options=ft||_t}var ut=ot.prototype;return ut.code=function(be,Ce,$e){var ht=(Ce||"").match(/\S*/)[0];if(this.options.highlight){var it=this.options.highlight(be,ht);null!=it&&it!==be&&($e=!0,be=it)}return be=be.replace(/\n$/,"")+"\n",ht?'<pre><code class="'+this.options.langPrefix+Ae(ht,!0)+'">'+($e?be:Ae(be,!0))+"</code></pre>\n":"<pre><code>"+($e?be:Ae(be,!0))+"</code></pre>\n"},ut.blockquote=function(be){return"<blockquote>\n"+be+"</blockquote>\n"},ut.html=function(be){return be},ut.heading=function(be,Ce,$e,ht){return this.options.headerIds?"<h"+Ce+' id="'+this.options.headerPrefix+ht.slug($e)+'">'+be+"</h"+Ce+">\n":"<h"+Ce+">"+be+"</h"+Ce+">\n"},ut.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},ut.list=function(be,Ce,$e){var ht=Ce?"ol":"ul";return"<"+ht+(Ce&&1!==$e?' start="'+$e+'"':"")+">\n"+be+"</"+ht+">\n"},ut.listitem=function(be){return"<li>"+be+"</li>\n"},ut.checkbox=function(be){return"<input "+(be?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ut.paragraph=function(be){return"<p>"+be+"</p>\n"},ut.table=function(be,Ce){return Ce&&(Ce="<tbody>"+Ce+"</tbody>"),"<table>\n<thead>\n"+be+"</thead>\n"+Ce+"</table>\n"},ut.tablerow=function(be){return"<tr>\n"+be+"</tr>\n"},ut.tablecell=function(be,Ce){var $e=Ce.header?"th":"td";return(Ce.align?"<"+$e+' align="'+Ce.align+'">':"<"+$e+">")+be+"</"+$e+">\n"},ut.strong=function(be){return"<strong>"+be+"</strong>"},ut.em=function(be){return"<em>"+be+"</em>"},ut.codespan=function(be){return"<code>"+be+"</code>"},ut.br=function(){return this.options.xhtml?"<br/>":"<br>"},ut.del=function(be){return"<del>"+be+"</del>"},ut.link=function(be,Ce,$e){if(null===(be=gt(this.options.sanitize,this.options.baseUrl,be)))return $e;var ht='<a href="'+Ae(be)+'"';return Ce&&(ht+=' title="'+Ce+'"'),ht+">"+$e+"</a>"},ut.image=function(be,Ce,$e){if(null===(be=gt(this.options.sanitize,this.options.baseUrl,be)))return $e;var ht='<img src="'+be+'" alt="'+$e+'"';return Ce&&(ht+=' title="'+Ce+'"'),ht+(this.options.xhtml?"/>":">")},ut.text=function(be){return be},ot}(),k=function(){function ot(){}var ut=ot.prototype;return ut.strong=function(be){return be},ut.em=function(be){return be},ut.codespan=function(be){return be},ut.del=function(be){return be},ut.html=function(be){return be},ut.text=function(be){return be},ut.link=function(be,Ce,$e){return""+$e},ut.image=function(be,Ce,$e){return""+$e},ut.br=function(){return""},ot}(),z=function(){function ot(){this.seen={}}var ut=ot.prototype;return ut.serialize=function(be){return be.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ut.getNextSafeSlug=function(be,Ce){var $e=be,ht=0;if(this.seen.hasOwnProperty($e)){ht=this.seen[be];do{$e=be+"-"+ ++ht}while(this.seen.hasOwnProperty($e))}return Ce||(this.seen[be]=ht,this.seen[$e]=0),$e},ut.slug=function(be,Ce){void 0===Ce&&(Ce={});var $e=this.serialize(be);return this.getNextSafeSlug($e,Ce.dryrun)},ot}(),Le=U,nt=k,xt=z,Nt=je.exports.defaults,On=te_unescape,Yn=qe,Ti=function(){function ot(ft){this.options=ft||Nt,this.options.renderer=this.options.renderer||new Le,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new nt,this.slugger=new xt}ot.parse=function(be,Ce){return new ot(Ce).parse(be)},ot.parseInline=function(be,Ce){return new ot(Ce).parseInline(be)};var ut=ot.prototype;return ut.parse=function(be,Ce){void 0===Ce&&(Ce=!0);var ht,it,Tt,Mt,Dt,Xt,zn,ai,Nn,bn,$n,Tn,lr,cr,Xn,$i,xa,Zr,oe,$e="",me=be.length;for(ht=0;ht<me;ht++)if(bn=be[ht],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[bn.type]&&(!1!==(oe=this.options.extensions.renderers[bn.type].call(this,bn))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(bn.type)))$e+=oe||"";else switch(bn.type){case"space":continue;case"hr":$e+=this.renderer.hr();continue;case"heading":$e+=this.renderer.heading(this.parseInline(bn.tokens),bn.depth,On(this.parseInline(bn.tokens,this.textRenderer)),this.slugger);continue;case"code":$e+=this.renderer.code(bn.text,bn.lang,bn.escaped);continue;case"table":for(ai="",zn="",Mt=bn.header.length,it=0;it<Mt;it++)zn+=this.renderer.tablecell(this.parseInline(bn.tokens.header[it]),{header:!0,align:bn.align[it]});for(ai+=this.renderer.tablerow(zn),Nn="",Mt=bn.cells.length,it=0;it<Mt;it++){for(zn="",Dt=(Xt=bn.tokens.cells[it]).length,Tt=0;Tt<Dt;Tt++)zn+=this.renderer.tablecell(this.parseInline(Xt[Tt]),{header:!1,align:bn.align[Tt]});Nn+=this.renderer.tablerow(zn)}$e+=this.renderer.table(ai,Nn);continue;case"blockquote":Nn=this.parse(bn.tokens),$e+=this.renderer.blockquote(Nn);continue;case"list":for($n=bn.ordered,Tn=bn.start,lr=bn.loose,Mt=bn.items.length,Nn="",it=0;it<Mt;it++)$i=(Xn=bn.items[it]).checked,xa=Xn.task,cr="",Xn.task&&(Zr=this.renderer.checkbox($i),lr?Xn.tokens.length>0&&"text"===Xn.tokens[0].type?(Xn.tokens[0].text=Zr+" "+Xn.tokens[0].text,Xn.tokens[0].tokens&&Xn.tokens[0].tokens.length>0&&"text"===Xn.tokens[0].tokens[0].type&&(Xn.tokens[0].tokens[0].text=Zr+" "+Xn.tokens[0].tokens[0].text)):Xn.tokens.unshift({type:"text",text:Zr}):cr+=Zr),cr+=this.parse(Xn.tokens,lr),Nn+=this.renderer.listitem(cr,xa,$i);$e+=this.renderer.list(Nn,$n,Tn);continue;case"html":$e+=this.renderer.html(bn.text);continue;case"paragraph":$e+=this.renderer.paragraph(this.parseInline(bn.tokens));continue;case"text":for(Nn=bn.tokens?this.parseInline(bn.tokens):bn.text;ht+1<me&&"text"===be[ht+1].type;)Nn+="\n"+((bn=be[++ht]).tokens?this.parseInline(bn.tokens):bn.text);$e+=Ce?this.renderer.paragraph(Nn):Nn;continue;default:var ue='Token with "'+bn.type+'" type was not found.';if(this.options.silent)return void console.error(ue);throw new Error(ue)}return $e},ut.parseInline=function(be,Ce){Ce=Ce||this.renderer;var ht,it,Tt,$e="",Mt=be.length;for(ht=0;ht<Mt;ht++)if(it=be[ht],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[it.type]&&(!1!==(Tt=this.options.extensions.renderers[it.type].call(this,it))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(it.type)))$e+=Tt||"";else switch(it.type){case"escape":$e+=Ce.text(it.text);break;case"html":$e+=Ce.html(it.text);break;case"link":$e+=Ce.link(it.href,it.title,this.parseInline(it.tokens,Ce));break;case"image":$e+=Ce.image(it.href,it.title,it.text);break;case"strong":$e+=Ce.strong(this.parseInline(it.tokens,Ce));break;case"em":$e+=Ce.em(this.parseInline(it.tokens,Ce));break;case"codespan":$e+=Ce.codespan(it.text);break;case"br":$e+=Ce.br();break;case"del":$e+=Ce.del(this.parseInline(it.tokens,Ce));break;case"text":$e+=Ce.text(it.text);break;default:var Dt='Token with "'+it.type+'" type was not found.';if(this.options.silent)return void console.error(Dt);throw new Error(Dt)}return $e},ot}(),wi=J,Xr=U,Ls=k,gs=z,Bs=te_merge,Qr=te_checkSanitizeDeprecation,el=te_escape,kl=je.exports.getDefaults,Sa=je.exports.changeDefaults,Es=je.exports.defaults;function Jt(ot,ut,ft){if(null==ot)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof ot)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ot)+", string expected");if("function"==typeof ut&&(ft=ut,ut=null),ut=Bs({},Jt.defaults,ut||{}),Qr(ut),ft){var Ce,be=ut.highlight;try{Ce=Yn.lex(ot,ut)}catch(Tt){return ft(Tt)}var $e=function(Mt){var Dt;if(!Mt)try{ut.walkTokens&&Jt.walkTokens(Ce,ut.walkTokens),Dt=Ti.parse(Ce,ut)}catch(Xt){Mt=Xt}return ut.highlight=be,Mt?ft(Mt):ft(null,Dt)};if(!be||be.length<3||(delete ut.highlight,!Ce.length))return $e();var ht=0;return Jt.walkTokens(Ce,function(Tt){"code"===Tt.type&&(ht++,setTimeout(function(){be(Tt.text,Tt.lang,function(Mt,Dt){if(Mt)return $e(Mt);null!=Dt&&Dt!==Tt.text&&(Tt.text=Dt,Tt.escaped=!0),0==--ht&&$e()})},0))}),void(0===ht&&$e())}try{var it=Yn.lex(ot,ut);return ut.walkTokens&&Jt.walkTokens(it,ut.walkTokens),Ti.parse(it,ut)}catch(Tt){if(Tt.message+="\nPlease report this to https://github.com/markedjs/marked.",ut.silent)return"<p>An error occurred:</p><pre>"+el(Tt.message+"",!0)+"</pre>";throw Tt}}return Jt.options=Jt.setOptions=function(ot){return Bs(Jt.defaults,ot),Sa(Jt.defaults),Jt},Jt.getDefaults=kl,Jt.defaults=Es,Jt.use=function(){for(var ot=this,ut=arguments.length,ft=new Array(ut),be=0;be<ut;be++)ft[be]=arguments[be];var ht,Ce=Bs.apply(void 0,[{}].concat(ft)),$e=Jt.defaults.extensions||{renderers:{},childTokens:{}};ft.forEach(function(it){if(it.extensions&&(ht=!0,it.extensions.forEach(function(Mt){if(!Mt.name)throw new Error("extension name required");if(Mt.renderer){var Dt=$e.renderers?$e.renderers[Mt.name]:null;$e.renderers[Mt.name]=Dt?function(){for(var Xt=arguments.length,zn=new Array(Xt),ai=0;ai<Xt;ai++)zn[ai]=arguments[ai];var Nn=Mt.renderer.apply(this,zn);return!1===Nn&&(Nn=Dt.apply(this,zn)),Nn}:Mt.renderer}if(Mt.tokenizer){if(!Mt.level||"block"!==Mt.level&&"inline"!==Mt.level)throw new Error("extension level must be 'block' or 'inline'");$e[Mt.level]?$e[Mt.level].unshift(Mt.tokenizer):$e[Mt.level]=[Mt.tokenizer],Mt.start&&("block"===Mt.level?$e.startBlock?$e.startBlock.push(Mt.start):$e.startBlock=[Mt.start]:"inline"===Mt.level&&($e.startInline?$e.startInline.push(Mt.start):$e.startInline=[Mt.start]))}Mt.childTokens&&($e.childTokens[Mt.name]=Mt.childTokens)})),it.renderer&&function(){var Mt=Jt.defaults.renderer||new Xr,Dt=function(ai){var Nn=Mt[ai];Mt[ai]=function(){for(var bn=arguments.length,$n=new Array(bn),Tn=0;Tn<bn;Tn++)$n[Tn]=arguments[Tn];var lr=it.renderer[ai].apply(Mt,$n);return!1===lr&&(lr=Nn.apply(Mt,$n)),lr}};for(var Xt in it.renderer)Dt(Xt);Ce.renderer=Mt}(),it.tokenizer&&function(){var Mt=Jt.defaults.tokenizer||new wi,Dt=function(ai){var Nn=Mt[ai];Mt[ai]=function(){for(var bn=arguments.length,$n=new Array(bn),Tn=0;Tn<bn;Tn++)$n[Tn]=arguments[Tn];var lr=it.tokenizer[ai].apply(Mt,$n);return!1===lr&&(lr=Nn.apply(Mt,$n)),lr}};for(var Xt in it.tokenizer)Dt(Xt);Ce.tokenizer=Mt}(),it.walkTokens){var Tt=Jt.defaults.walkTokens;Ce.walkTokens=function(Mt){it.walkTokens.call(ot,Mt),Tt&&Tt(Mt)}}ht&&(Ce.extensions=$e),Jt.setOptions(Ce)})},Jt.walkTokens=function(ot,ut){for(var Ce,ft=function(){var ht=Ce.value;switch(ut(ht),ht.type){case"table":for(var Tt,it=Et(ht.tokens.header);!(Tt=it()).done;)Jt.walkTokens(Tt.value,ut);for(var Xt,Dt=Et(ht.tokens.cells);!(Xt=Dt()).done;)for(var Nn,ai=Et(Xt.value);!(Nn=ai()).done;)Jt.walkTokens(Nn.value,ut);break;case"list":Jt.walkTokens(ht.items,ut);break;default:Jt.defaults.extensions&&Jt.defaults.extensions.childTokens&&Jt.defaults.extensions.childTokens[ht.type]?Jt.defaults.extensions.childTokens[ht.type].forEach(function($n){Jt.walkTokens(ht[$n],ut)}):ht.tokens&&Jt.walkTokens(ht.tokens,ut)}},be=Et(ot);!(Ce=be()).done;)ft()},Jt.parseInline=function(ot,ut){if(null==ot)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof ot)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ot)+", string expected");ut=Bs({},Jt.defaults,ut||{}),Qr(ut);try{var ft=Yn.lexInline(ot,ut);return ut.walkTokens&&Jt.walkTokens(ft,ut.walkTokens),Ti.parseInline(ft,ut)}catch(be){if(be.message+="\nPlease report this to https://github.com/markedjs/marked.",ut.silent)return"<p>An error occurred:</p><pre>"+el(be.message+"",!0)+"</pre>";throw be}},Jt.Parser=Ti,Jt.parser=Ti.parse,Jt.Renderer=Xr,Jt.TextRenderer=Ls,Jt.Lexer=Yn,Jt.lexer=Yn.lex,Jt.Tokenizer=wi,Jt.Slugger=gs,Jt.parse=Jt,Jt}()},369:(jt,Ye,Je)=>{var lt=Je(284),ee=Je(830);function Et(){this.clear()}Et.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},Et.prototype.enqueue=function(je){return this.items.push(je),++this.size},Et.prototype.dequeue=function(){if(this.size){var je=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,je}},Et.prototype.peek=function(){if(this.size)return this.items[this.offset]},Et.prototype.forEach=function(je,Q){Q=arguments.length>1?Q:this;for(var we=this.offset,fe=0,K=this.items.length;we<K;we++,fe++)je.call(Q,this.items[we],fe,this)},Et.prototype.toArray=function(){return this.items.slice(this.offset)},Et.prototype.values=function(){var je=this.items,Q=this.offset;return new lt(function(){if(Q>=je.length)return{done:!0};var we=je[Q];return Q++,{value:we,done:!1}})},Et.prototype.entries=function(){var je=this.items,Q=this.offset,we=0;return new lt(function(){if(Q>=je.length)return{done:!0};var fe=je[Q];return Q++,{value:[we++,fe],done:!1}})},"undefined"!=typeof Symbol&&(Et.prototype[Symbol.iterator]=Et.prototype.values),Et.prototype.toString=function(){return this.toArray().join(",")},Et.prototype.toJSON=function(){return this.toArray()},Et.prototype.inspect=function(){var je=this.toArray();return Object.defineProperty(je,"constructor",{value:Et,enumerable:!1}),je},"undefined"!=typeof Symbol&&(Et.prototype[Symbol.for("nodejs.util.inspect.custom")]=Et.prototype.inspect),Et.from=function(je){var Q=new Et;return ee(je,function(we){Q.enqueue(we)}),Q},Et.of=function(){return Et.from(arguments)},jt.exports=Et},104:jt=>{jt.exports=function Ye(Je,lt,ee){function Et(we,fe){if(!lt[we]){if(!Je[we]){if(je)return je(we,!0);throw new Error("Cannot find module '"+we+"'")}fe=lt[we]={exports:{}},Je[we][0].call(fe.exports,function(V){return Et(Je[we][1][V]||V)},fe,fe.exports,Ye,Je,lt,ee)}return lt[we].exports}for(var je=void 0,Q=0;Q<ee.length;Q++)Et(ee[Q]);return Et}({1:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){"use strict";var Y=Ye("crypto");function L(b,x){var A;return void 0===(A="passthrough"!==(x=R(b,x)).algorithm?Y.createHash(x.algorithm):new v).write&&(A.write=A.update,A.end=A.update),y(x,A).dispatch(b),A.update||A.end(""),A.digest?A.digest("buffer"===x.encoding?void 0:x.encoding):(b=A.read(),"buffer"!==x.encoding?b.toString(x.encoding):b)}(lt=Je.exports=L).sha1=function(b){return L(b)},lt.keys=function(b){return L(b,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},lt.MD5=function(b){return L(b,{algorithm:"md5",encoding:"hex"})},lt.keysMD5=function(b){return L(b,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var w=Y.getHashes?Y.getHashes().slice():["sha1","md5"],C=(w.push("passthrough"),["buffer","hex","binary","base64"]);function R(b,x){var A={};if(A.algorithm=(x=x||{}).algorithm||"sha1",A.encoding=x.encoding||"hex",A.excludeValues=!!x.excludeValues,A.algorithm=A.algorithm.toLowerCase(),A.encoding=A.encoding.toLowerCase(),A.ignoreUnknown=!0===x.ignoreUnknown,A.respectType=!1!==x.respectType,A.respectFunctionNames=!1!==x.respectFunctionNames,A.respectFunctionProperties=!1!==x.respectFunctionProperties,A.unorderedArrays=!0===x.unorderedArrays,A.unorderedSets=!1!==x.unorderedSets,A.unorderedObjects=!1!==x.unorderedObjects,A.replacer=x.replacer||void 0,A.excludeKeys=x.excludeKeys||void 0,void 0===b)throw new Error("Object argument required.");for(var E=0;E<w.length;++E)w[E].toLowerCase()===A.algorithm.toLowerCase()&&(A.algorithm=w[E]);if(-1===w.indexOf(A.algorithm))throw new Error('Algorithm "'+A.algorithm+'"  not supported. supported values: '+w.join(", "));if(-1===C.indexOf(A.encoding)&&"passthrough"!==A.algorithm)throw new Error('Encoding "'+A.encoding+'"  not supported. supported values: '+C.join(", "));return A}function T(b){if("function"==typeof b)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(b))}function y(b,x,A){function E(I){return x.update?x.update(I,"utf8"):x.write(I,"utf8")}return A=A||[],{dispatch:function(I){return this["_"+(null===(I=b.replacer?b.replacer(I):I)?"null":typeof I)](I)},_object:function(I){var H,M=Object.prototype.toString.call(I),P=/\[object (.*)\]/i.exec(M);if(P=(P=P?P[1]:"unknown:["+M+"]").toLowerCase(),0<=(M=A.indexOf(I)))return this.dispatch("[CIRCULAR:"+M+"]");if(A.push(I),void 0!==je&&je.isBuffer&&je.isBuffer(I))return E("buffer:"),E(I);if("object"===P||"function"===P||"asyncfunction"===P)return M=Object.keys(I),b.unorderedObjects&&(M=M.sort()),!1===b.respectType||T(I)||M.splice(0,0,"prototype","__proto__","constructor"),b.excludeKeys&&(M=M.filter(function(Z){return!b.excludeKeys(Z)})),E("object:"+M.length+":"),H=this,M.forEach(function(Z){H.dispatch(Z),E(":"),b.excludeValues||H.dispatch(I[Z]),E(",")});if(!this["_"+P]){if(b.ignoreUnknown)return E("["+P+"]");throw new Error('Unknown object type "'+P+'"')}this["_"+P](I)},_array:function(I,H){H=void 0!==H?H:!1!==b.unorderedArrays;var M=this;if(E("array:"+I.length+":"),!H||I.length<=1)return I.forEach(function(Z){return M.dispatch(Z)});var P=[];return H=I.map(function(Z){var S=new v,G=A.slice();return y(b,S,G).dispatch(Z),P=P.concat(G.slice(A.length)),S.read().toString()}),A=A.concat(P),H.sort(),this._array(H,!1)},_date:function(I){return E("date:"+I.toJSON())},_symbol:function(I){return E("symbol:"+I.toString())},_error:function(I){return E("error:"+I.toString())},_boolean:function(I){return E("bool:"+I.toString())},_string:function(I){E("string:"+I.length+":"),E(I.toString())},_function:function(I){E("fn:"),T(I)?this.dispatch("[native]"):this.dispatch(I.toString()),!1!==b.respectFunctionNames&&this.dispatch("function-name:"+String(I.name)),b.respectFunctionProperties&&this._object(I)},_number:function(I){return E("number:"+I.toString())},_xml:function(I){return E("xml:"+I.toString())},_null:function(){return E("Null")},_undefined:function(){return E("Undefined")},_regexp:function(I){return E("regex:"+I.toString())},_uint8array:function(I){return E("uint8array:"),this.dispatch(Array.prototype.slice.call(I))},_uint8clampedarray:function(I){return E("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(I))},_int8array:function(I){return E("int8array:"),this.dispatch(Array.prototype.slice.call(I))},_uint16array:function(I){return E("uint16array:"),this.dispatch(Array.prototype.slice.call(I))},_int16array:function(I){return E("int16array:"),this.dispatch(Array.prototype.slice.call(I))},_uint32array:function(I){return E("uint32array:"),this.dispatch(Array.prototype.slice.call(I))},_int32array:function(I){return E("int32array:"),this.dispatch(Array.prototype.slice.call(I))},_float32array:function(I){return E("float32array:"),this.dispatch(Array.prototype.slice.call(I))},_float64array:function(I){return E("float64array:"),this.dispatch(Array.prototype.slice.call(I))},_arraybuffer:function(I){return E("arraybuffer:"),this.dispatch(new Uint8Array(I))},_url:function(I){return E("url:"+I.toString())},_map:function(I){return E("map:"),I=Array.from(I),this._array(I,!1!==b.unorderedSets)},_set:function(I){return E("set:"),I=Array.from(I),this._array(I,!1!==b.unorderedSets)},_file:function(I){return E("file:"),this.dispatch([I.name,I.size,I.type,I.lastModfied])},_blob:function(){if(b.ignoreUnknown)return E("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return E("domwindow")},_bigint:function(I){return E("bigint:"+I.toString())},_process:function(){return E("process")},_timer:function(){return E("timer")},_pipe:function(){return E("pipe")},_tcp:function(){return E("tcp")},_udp:function(){return E("udp")},_tty:function(){return E("tty")},_statwatcher:function(){return E("statwatcher")},_securecontext:function(){return E("securecontext")},_connection:function(){return E("connection")},_zlib:function(){return E("zlib")},_context:function(){return E("context")},_nodescript:function(){return E("nodescript")},_httpparser:function(){return E("httpparser")},_dataview:function(){return E("dataview")},_signal:function(){return E("signal")},_fsevent:function(){return E("fsevent")},_tlswrap:function(){return E("tlswrap")}}}function v(){return{buf:"",write:function(b){this.buf+=b},end:function(b){this.buf+=b},read:function(){return this.buf}}}lt.writeToStream=function(b,x,A){return void 0===A&&(A=x,x={}),y(x=R(b,x),A).dispatch(b)}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){!function(Y){"use strict";var L="undefined"!=typeof Uint8Array?Uint8Array:Array,w="+".charCodeAt(0),C="/".charCodeAt(0),R="0".charCodeAt(0),T="a".charCodeAt(0),y="A".charCodeAt(0),v="-".charCodeAt(0),b="_".charCodeAt(0);function x(A){return(A=A.charCodeAt(0))===w||A===v?62:A===C||A===b?63:A<R?-1:A<R+10?A-R+26+26:A<y+26?A-y:A<T+26?A-T+26:void 0}Y.toByteArray=function(A){var E,I;if(0<A.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var H="="===A.charAt((H=A.length)-2)?2:"="===A.charAt(H-1)?1:0,M=new L(3*A.length/4-H),P=0<H?A.length-4:A.length,Z=0;function S(G){M[Z++]=G}for(E=0;E<P;E+=4,0)S((16711680&(I=x(A.charAt(E))<<18|x(A.charAt(E+1))<<12|x(A.charAt(E+2))<<6|x(A.charAt(E+3))))>>16),S((65280&I)>>8),S(255&I);return 2==H?S(255&(I=x(A.charAt(E))<<2|x(A.charAt(E+1))>>4)):1==H&&(S((I=x(A.charAt(E))<<10|x(A.charAt(E+1))<<4|x(A.charAt(E+2))>>2)>>8&255),S(255&I)),M},Y.fromByteArray=function(A){var E,I,H,M,P=A.length%3,Z="";function S(G){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(G)}for(E=0,H=A.length-P;E<H;E+=3)Z+=S((M=I=(A[E]<<16)+(A[E+1]<<8)+A[E+2])>>18&63)+S(M>>12&63)+S(M>>6&63)+S(63&M);switch(P){case 1:Z=(Z+=S((I=A[A.length-1])>>2))+S(I<<4&63)+"==";break;case 2:Z=(Z=(Z+=S((I=(A[A.length-2]<<8)+A[A.length-1])>>10))+S(I>>4&63))+S(I<<2&63)+"="}return Z}}(void 0===lt?this.base64js={}:lt)}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){var Y=Ye("base64-js"),L=Ye("ieee754");function je(J,ae,_e){if(!(this instanceof je))return new je(J,ae,_e);var Te,xe,Ge,Se,Ue=typeof J;if("base64"===ae&&"string"==Ue)for(J=(Se=J).trim?Se.trim():Se.replace(/^\s+|\s+$/g,"");J.length%4!=0;)J+="=";if("number"==Ue)Te=ne(J);else if("string"==Ue)Te=je.byteLength(J,ae);else{if("object"!=Ue)throw new Error("First argument needs to be a number, array or string.");Te=ne(J.length)}if(je._useTypedArrays?xe=je._augment(new Uint8Array(Te)):((xe=this).length=Te,xe._isBuffer=!0),je._useTypedArrays&&"number"==typeof J.byteLength)xe._set(J);else if(ce(Se=J)||je.isBuffer(Se)||Se&&"object"==typeof Se&&"number"==typeof Se.length)for(Ge=0;Ge<Te;Ge++)xe[Ge]=je.isBuffer(J)?J.readUInt8(Ge):J[Ge];else if("string"==Ue)xe.write(J,0,ae);else if("number"==Ue&&!je._useTypedArrays&&!_e)for(Ge=0;Ge<Te;Ge++)xe[Ge]=0;return xe}function T(J,ae,_e,Te){var xe;if(Te||(He("boolean"==typeof _e,"missing or invalid endian"),He(null!=ae,"missing offset"),He(ae+1<J.length,"Trying to read beyond buffer length")),!((Te=J.length)<=ae))return _e?(xe=J[ae],ae+1<Te&&(xe|=J[ae+1]<<8)):(xe=J[ae]<<8,ae+1<Te&&(xe|=J[ae+1])),xe}function y(J,ae,_e,Te){var xe;if(Te||(He("boolean"==typeof _e,"missing or invalid endian"),He(null!=ae,"missing offset"),He(ae+3<J.length,"Trying to read beyond buffer length")),!((Te=J.length)<=ae))return _e?(ae+2<Te&&(xe=J[ae+2]<<16),ae+1<Te&&(xe|=J[ae+1]<<8),xe|=J[ae],ae+3<Te&&(xe+=J[ae+3]<<24>>>0)):(ae+1<Te&&(xe=J[ae+1]<<16),ae+2<Te&&(xe|=J[ae+2]<<8),ae+3<Te&&(xe|=J[ae+3]),xe+=J[ae]<<24>>>0),xe}function v(J,ae,_e,Te){if(Te||(He("boolean"==typeof _e,"missing or invalid endian"),He(null!=ae,"missing offset"),He(ae+1<J.length,"Trying to read beyond buffer length")),!(J.length<=ae))return 32768&(Te=T(J,ae,_e,!0))?-1*(65535-Te+1):Te}function b(J,ae,_e,Te){if(Te||(He("boolean"==typeof _e,"missing or invalid endian"),He(null!=ae,"missing offset"),He(ae+3<J.length,"Trying to read beyond buffer length")),!(J.length<=ae))return 2147483648&(Te=y(J,ae,_e,!0))?-1*(4294967295-Te+1):Te}function x(J,ae,_e,Te){return Te||(He("boolean"==typeof _e,"missing or invalid endian"),He(ae+3<J.length,"Trying to read beyond buffer length")),L.read(J,ae,_e,23,4)}function A(J,ae,_e,Te){return Te||(He("boolean"==typeof _e,"missing or invalid endian"),He(ae+7<J.length,"Trying to read beyond buffer length")),L.read(J,ae,_e,52,8)}function E(J,ae,_e,Te,xe){if(xe||(He(null!=ae,"missing value"),He("boolean"==typeof Te,"missing or invalid endian"),He(null!=_e,"missing offset"),He(_e+1<J.length,"trying to write beyond buffer length"),ve(ae,65535)),!((xe=J.length)<=_e))for(var Ge=0,Se=Math.min(xe-_e,2);Ge<Se;Ge++)J[_e+Ge]=(ae&255<<8*(Te?Ge:1-Ge))>>>8*(Te?Ge:1-Ge)}function I(J,ae,_e,Te,xe){if(xe||(He(null!=ae,"missing value"),He("boolean"==typeof Te,"missing or invalid endian"),He(null!=_e,"missing offset"),He(_e+3<J.length,"trying to write beyond buffer length"),ve(ae,4294967295)),!((xe=J.length)<=_e))for(var Ge=0,Se=Math.min(xe-_e,4);Ge<Se;Ge++)J[_e+Ge]=ae>>>8*(Te?Ge:3-Ge)&255}function H(J,ae,_e,Te,xe){xe||(He(null!=ae,"missing value"),He("boolean"==typeof Te,"missing or invalid endian"),He(null!=_e,"missing offset"),He(_e+1<J.length,"Trying to write beyond buffer length"),Fe(ae,32767,-32768)),J.length<=_e||E(J,0<=ae?ae:65535+ae+1,_e,Te,xe)}function M(J,ae,_e,Te,xe){xe||(He(null!=ae,"missing value"),He("boolean"==typeof Te,"missing or invalid endian"),He(null!=_e,"missing offset"),He(_e+3<J.length,"Trying to write beyond buffer length"),Fe(ae,2147483647,-2147483648)),J.length<=_e||I(J,0<=ae?ae:4294967295+ae+1,_e,Te,xe)}function P(J,ae,_e,Te,xe){xe||(He(null!=ae,"missing value"),He("boolean"==typeof Te,"missing or invalid endian"),He(null!=_e,"missing offset"),He(_e+3<J.length,"Trying to write beyond buffer length"),Qe(ae,34028234663852886e22,-34028234663852886e22)),J.length<=_e||L.write(J,ae,_e,Te,23,4)}function Z(J,ae,_e,Te,xe){xe||(He(null!=ae,"missing value"),He("boolean"==typeof Te,"missing or invalid endian"),He(null!=_e,"missing offset"),He(_e+7<J.length,"Trying to write beyond buffer length"),Qe(ae,17976931348623157e292,-17976931348623157e292)),J.length<=_e||L.write(J,ae,_e,Te,52,8)}lt.Buffer=je,lt.SlowBuffer=je,lt.INSPECT_MAX_BYTES=50,je.poolSize=8192,je._useTypedArrays=function(){try{var J=new ArrayBuffer(0),ae=new Uint8Array(J);return ae.foo=function(){return 42},42===ae.foo()&&"function"==typeof ae.subarray}catch(_e){return!1}}(),je.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},je.isBuffer=function(J){return!(null==J||!J._isBuffer)},je.byteLength=function(J,ae){var _e;switch(J+="",ae||"utf8"){case"hex":_e=J.length/2;break;case"utf8":case"utf-8":_e=te(J).length;break;case"ascii":case"binary":case"raw":_e=J.length;break;case"base64":_e=Ie(J).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":_e=2*J.length;break;default:throw new Error("Unknown encoding")}return _e},je.concat=function(J,ae){if(He(ce(J),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===J.length)return new je(0);if(1===J.length)return J[0];if("number"!=typeof ae)for(xe=ae=0;xe<J.length;xe++)ae+=J[xe].length;for(var _e=new je(ae),Te=0,xe=0;xe<J.length;xe++){var Ge=J[xe];Ge.copy(_e,Te),Te+=Ge.length}return _e},je.prototype.write=function(J,ae,_e,Te){isFinite(ae)?isFinite(_e)||(Te=_e,_e=void 0):(Ke=Te,Te=ae,ae=_e,_e=Ke),ae=Number(ae)||0;var xe,Ge,Se,Ue,Ke=this.length-ae;switch((!_e||Ke<(_e=Number(_e)))&&(_e=Ke),Te=String(Te||"utf8").toLowerCase()){case"hex":xe=function(Be,X,q,ge){q=Number(q)||0;var le=Be.length-q;(!ge||le<(ge=Number(ge)))&&(ge=le),He((le=X.length)%2==0,"Invalid hex string"),le/2<ge&&(ge=le/2);for(var qe=0;qe<ge;qe++){var _t=parseInt(X.substr(2*qe,2),16);He(!isNaN(_t),"Invalid hex string"),Be[q+qe]=_t}return je._charsWritten=2*qe,qe}(this,J,ae,_e);break;case"utf8":case"utf-8":Ge=this,Se=ae,Ue=_e,xe=je._charsWritten=ye(te(J),Ge,Se,Ue);break;case"ascii":case"binary":xe=function(J,ae,_e,Te){return je._charsWritten=ye(function(xe){for(var Ge=[],Se=0;Se<xe.length;Se++)Ge.push(255&xe.charCodeAt(Se));return Ge}(ae),J,_e,Te)}(this,J,ae,_e);break;case"base64":Ge=this,Se=ae,Ue=_e,xe=je._charsWritten=ye(Ie(J),Ge,Se,Ue);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":xe=function(J,ae,_e,Te){return je._charsWritten=ye(function(xe){for(var Ge,Se,Ue=[],Ke=0;Ke<xe.length;Ke++)Ge=(Se=xe.charCodeAt(Ke))>>8,Ue.push(Se%=256),Ue.push(Ge);return Ue}(ae),J,_e,Te)}(this,J,ae,_e);break;default:throw new Error("Unknown encoding")}return xe},je.prototype.toString=function(J,ae,_e){var Te,xe,Ge,Se,Ue=this;if(J=String(J||"utf8").toLowerCase(),ae=Number(ae)||0,(_e=void 0!==_e?Number(_e):Ue.length)===ae)return"";switch(J){case"hex":Te=function(Ke,Be,X){var q=Ke.length;(!Be||Be<0)&&(Be=0),(!X||X<0||q<X)&&(X=q);for(var ge="",le=Be;le<X;le++)ge+=se(Ke[le]);return ge}(Ue,ae,_e);break;case"utf8":case"utf-8":Te=function(Ke,Be,X){var q="",ge="";X=Math.min(Ke.length,X);for(var le=Be;le<X;le++)Ke[le]<=127?(q+=re(ge)+String.fromCharCode(Ke[le]),ge=""):ge+="%"+Ke[le].toString(16);return q+re(ge)}(Ue,ae,_e);break;case"ascii":case"binary":Te=function(J,ae,_e){var Te="";_e=Math.min(J.length,_e);for(var xe=ae;xe<_e;xe++)Te+=String.fromCharCode(J[xe]);return Te}(Ue,ae,_e);break;case"base64":xe=Ue,Se=_e,Te=0===(Ge=ae)&&Se===xe.length?Y.fromByteArray(xe):Y.fromByteArray(xe.slice(Ge,Se));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Te=function(Ke,Be,X){for(var q=Ke.slice(Be,X),ge="",le=0;le<q.length;le+=2)ge+=String.fromCharCode(q[le]+256*q[le+1]);return ge}(Ue,ae,_e);break;default:throw new Error("Unknown encoding")}return Te},je.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},je.prototype.copy=function(J,ae,_e,Te){if(ae=ae||0,(Te=Te||0===Te?Te:this.length)!==(_e=_e||0)&&0!==J.length&&0!==this.length){He(_e<=Te,"sourceEnd < sourceStart"),He(0<=ae&&ae<J.length,"targetStart out of bounds"),He(0<=_e&&_e<this.length,"sourceStart out of bounds"),He(0<=Te&&Te<=this.length,"sourceEnd out of bounds"),Te>this.length&&(Te=this.length);var xe=(Te=J.length-ae<Te-_e?J.length-ae+_e:Te)-_e;if(xe<100||!je._useTypedArrays)for(var Ge=0;Ge<xe;Ge++)J[Ge+ae]=this[Ge+_e];else J._set(this.subarray(_e,_e+xe),ae)}},je.prototype.slice=function(J,ae){var _e=this.length;if(J=G(J,_e,0),ae=G(ae,_e,_e),je._useTypedArrays)return je._augment(this.subarray(J,ae));for(var Te=ae-J,xe=new je(Te,void 0,!0),Ge=0;Ge<Te;Ge++)xe[Ge]=this[Ge+J];return xe},je.prototype.get=function(J){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(J)},je.prototype.set=function(J,ae){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(J,ae)},je.prototype.readUInt8=function(J,ae){if(ae||(He(null!=J,"missing offset"),He(J<this.length,"Trying to read beyond buffer length")),!(J>=this.length))return this[J]},je.prototype.readUInt16LE=function(J,ae){return T(this,J,!0,ae)},je.prototype.readUInt16BE=function(J,ae){return T(this,J,!1,ae)},je.prototype.readUInt32LE=function(J,ae){return y(this,J,!0,ae)},je.prototype.readUInt32BE=function(J,ae){return y(this,J,!1,ae)},je.prototype.readInt8=function(J,ae){if(ae||(He(null!=J,"missing offset"),He(J<this.length,"Trying to read beyond buffer length")),!(J>=this.length))return 128&this[J]?-1*(255-this[J]+1):this[J]},je.prototype.readInt16LE=function(J,ae){return v(this,J,!0,ae)},je.prototype.readInt16BE=function(J,ae){return v(this,J,!1,ae)},je.prototype.readInt32LE=function(J,ae){return b(this,J,!0,ae)},je.prototype.readInt32BE=function(J,ae){return b(this,J,!1,ae)},je.prototype.readFloatLE=function(J,ae){return x(this,J,!0,ae)},je.prototype.readFloatBE=function(J,ae){return x(this,J,!1,ae)},je.prototype.readDoubleLE=function(J,ae){return A(this,J,!0,ae)},je.prototype.readDoubleBE=function(J,ae){return A(this,J,!1,ae)},je.prototype.writeUInt8=function(J,ae,_e){_e||(He(null!=J,"missing value"),He(null!=ae,"missing offset"),He(ae<this.length,"trying to write beyond buffer length"),ve(J,255)),ae>=this.length||(this[ae]=J)},je.prototype.writeUInt16LE=function(J,ae,_e){E(this,J,ae,!0,_e)},je.prototype.writeUInt16BE=function(J,ae,_e){E(this,J,ae,!1,_e)},je.prototype.writeUInt32LE=function(J,ae,_e){I(this,J,ae,!0,_e)},je.prototype.writeUInt32BE=function(J,ae,_e){I(this,J,ae,!1,_e)},je.prototype.writeInt8=function(J,ae,_e){_e||(He(null!=J,"missing value"),He(null!=ae,"missing offset"),He(ae<this.length,"Trying to write beyond buffer length"),Fe(J,127,-128)),ae>=this.length||this.writeUInt8(0<=J?J:255+J+1,ae,_e)},je.prototype.writeInt16LE=function(J,ae,_e){H(this,J,ae,!0,_e)},je.prototype.writeInt16BE=function(J,ae,_e){H(this,J,ae,!1,_e)},je.prototype.writeInt32LE=function(J,ae,_e){M(this,J,ae,!0,_e)},je.prototype.writeInt32BE=function(J,ae,_e){M(this,J,ae,!1,_e)},je.prototype.writeFloatLE=function(J,ae,_e){P(this,J,ae,!0,_e)},je.prototype.writeFloatBE=function(J,ae,_e){P(this,J,ae,!1,_e)},je.prototype.writeDoubleLE=function(J,ae,_e){Z(this,J,ae,!0,_e)},je.prototype.writeDoubleBE=function(J,ae,_e){Z(this,J,ae,!1,_e)},je.prototype.fill=function(J,ae,_e){if(ae=ae||0,_e=_e||this.length,He("number"==typeof(J="string"==typeof(J=J||0)?J.charCodeAt(0):J)&&!isNaN(J),"value is not a number"),He(ae<=_e,"end < start"),_e!==ae&&0!==this.length){He(0<=ae&&ae<this.length,"start out of bounds"),He(0<=_e&&_e<=this.length,"end out of bounds");for(var Te=ae;Te<_e;Te++)this[Te]=J}},je.prototype.inspect=function(){for(var J=[],ae=this.length,_e=0;_e<ae;_e++)if(J[_e]=se(this[_e]),_e===lt.INSPECT_MAX_BYTES){J[_e+1]="...";break}return"<Buffer "+J.join(" ")+">"},je.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(je._useTypedArrays)return new je(this).buffer;for(var J=new Uint8Array(this.length),ae=0,_e=J.length;ae<_e;ae+=1)J[ae]=this[ae];return J.buffer};var S=je.prototype;function G(J,ae,_e){return"number"!=typeof J?_e:ae<=(J=~~J)?ae:0<=J||0<=(J+=ae)?J:0}function ne(J){return(J=~~Math.ceil(+J))<0?0:J}function ce(J){return(Array.isArray||function(ae){return"[object Array]"===Object.prototype.toString.call(ae)})(J)}function se(J){return J<16?"0"+J.toString(16):J.toString(16)}function te(J){for(var ae=[],_e=0;_e<J.length;_e++){var Te=J.charCodeAt(_e);if(Te<=127)ae.push(J.charCodeAt(_e));else for(var xe=_e,Ge=(55296<=Te&&Te<=57343&&_e++,encodeURIComponent(J.slice(xe,_e+1)).substr(1).split("%")),Se=0;Se<Ge.length;Se++)ae.push(parseInt(Ge[Se],16))}return ae}function Ie(J){return Y.toByteArray(J)}function ye(J,ae,_e,Te){for(var xe=0;xe<Te&&!(xe+_e>=ae.length||xe>=J.length);xe++)ae[xe+_e]=J[xe];return xe}function re(J){try{return decodeURIComponent(J)}catch(ae){return String.fromCharCode(65533)}}function ve(J,ae){He("number"==typeof J,"cannot write a non-number as a number"),He(0<=J,"specified a negative value for writing an unsigned value"),He(J<=ae,"value is larger than maximum value for type"),He(Math.floor(J)===J,"value has a fractional component")}function Fe(J,ae,_e){He("number"==typeof J,"cannot write a non-number as a number"),He(J<=ae,"value larger than maximum allowed value"),He(_e<=J,"value smaller than minimum allowed value"),He(Math.floor(J)===J,"value has a fractional component")}function Qe(J,ae,_e){He("number"==typeof J,"cannot write a non-number as a number"),He(J<=ae,"value larger than maximum allowed value"),He(_e<=J,"value smaller than minimum allowed value")}function He(J,ae){if(!J)throw new Error(ae||"Failed assertion")}je._augment=function(J){return J._isBuffer=!0,J._get=J.get,J._set=J.set,J.get=S.get,J.set=S.set,J.write=S.write,J.toString=S.toString,J.toLocaleString=S.toString,J.toJSON=S.toJSON,J.copy=S.copy,J.slice=S.slice,J.readUInt8=S.readUInt8,J.readUInt16LE=S.readUInt16LE,J.readUInt16BE=S.readUInt16BE,J.readUInt32LE=S.readUInt32LE,J.readUInt32BE=S.readUInt32BE,J.readInt8=S.readInt8,J.readInt16LE=S.readInt16LE,J.readInt16BE=S.readInt16BE,J.readInt32LE=S.readInt32LE,J.readInt32BE=S.readInt32BE,J.readFloatLE=S.readFloatLE,J.readFloatBE=S.readFloatBE,J.readDoubleLE=S.readDoubleLE,J.readDoubleBE=S.readDoubleBE,J.writeUInt8=S.writeUInt8,J.writeUInt16LE=S.writeUInt16LE,J.writeUInt16BE=S.writeUInt16BE,J.writeUInt32LE=S.writeUInt32LE,J.writeUInt32BE=S.writeUInt32BE,J.writeInt8=S.writeInt8,J.writeInt16LE=S.writeInt16LE,J.writeInt16BE=S.writeInt16BE,J.writeInt32LE=S.writeInt32LE,J.writeInt32BE=S.writeInt32BE,J.writeFloatLE=S.writeFloatLE,J.writeFloatBE=S.writeFloatBE,J.writeDoubleLE=S.writeDoubleLE,J.writeDoubleBE=S.writeDoubleBE,J.fill=S.fill,J.inspect=S.inspect,J.toArrayBuffer=S.toArrayBuffer,J}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){je=Ye("buffer").Buffer;var L=new je(4);L.fill(0),Je.exports={hash:function(w,C,R,T){for(var y=C(function(E,I){E.length%4!=0&&(E=je.concat([E,L],E.length+(4-E.length%4)));for(var M=[],P=I?E.readInt32BE:E.readInt32LE,Z=0;Z<E.length;Z+=4)M.push(P.call(E,Z));return M}(w=je.isBuffer(w)?w:new je(w),T),8*w.length),v=(C=T,new je(R)),b=C?v.writeInt32BE:v.writeInt32LE,x=0;x<y.length;x++)b.call(v,y[x],4*x,!0);return v}}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){je=Ye("buffer").Buffer;var Y=Ye("./sha"),L=Ye("./sha256"),w=Ye("./rng"),C={sha1:Y,sha256:L,md5:Ye("./md5")},R=64,T=new je(R);function y(E,I){var H=C[E=E||"sha1"],M=[];return H||v("algorithm:",E,"is not yet supported"),{update:function(P){return je.isBuffer(P)||(P=new je(P)),M.push(P),this},digest:function(P){var Z=je.concat(M);return Z=I?function(S,G,ne){je.isBuffer(G)||(G=new je(G)),je.isBuffer(ne)||(ne=new je(ne)),G.length>R?G=S(G):G.length<R&&(G=je.concat([G,T],R));for(var ce=new je(R),se=new je(R),te=0;te<R;te++)ce[te]=54^G[te],se[te]=92^G[te];return ne=S(je.concat([ce,ne])),S(je.concat([se,ne]))}(H,I,Z):H(Z),M=null,P?Z.toString(P):Z}}}function v(){var E=[].slice.call(arguments).join(" ");throw new Error([E,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}T.fill(0),lt.createHash=function(E){return y(E)},lt.createHmac=y,lt.randomBytes=function(E,I){if(!I||!I.call)return new je(w(E));try{I.call(this,void 0,new je(w(E)))}catch(H){I(H)}};var b,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],A=function(E){lt[E]=function(){v("sorry,",E,"is not implemented yet")}};for(b in x)A(x[b])}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){var Y=Ye("./helpers");function L(b,x){b[x>>5]|=128<<x%32,b[14+(x+64>>>9<<4)]=x;for(var A=1732584193,E=-271733879,I=-1732584194,H=271733878,M=0;M<b.length;M+=16){var P=A,Z=E,S=I,G=H;A=C(A,E,I,H,b[M+0],7,-680876936),H=C(H,A,E,I,b[M+1],12,-389564586),I=C(I,H,A,E,b[M+2],17,606105819),E=C(E,I,H,A,b[M+3],22,-1044525330),A=C(A,E,I,H,b[M+4],7,-176418897),H=C(H,A,E,I,b[M+5],12,1200080426),I=C(I,H,A,E,b[M+6],17,-1473231341),E=C(E,I,H,A,b[M+7],22,-45705983),A=C(A,E,I,H,b[M+8],7,1770035416),H=C(H,A,E,I,b[M+9],12,-1958414417),I=C(I,H,A,E,b[M+10],17,-42063),E=C(E,I,H,A,b[M+11],22,-1990404162),A=C(A,E,I,H,b[M+12],7,1804603682),H=C(H,A,E,I,b[M+13],12,-40341101),I=C(I,H,A,E,b[M+14],17,-1502002290),A=R(A,E=C(E,I,H,A,b[M+15],22,1236535329),I,H,b[M+1],5,-165796510),H=R(H,A,E,I,b[M+6],9,-1069501632),I=R(I,H,A,E,b[M+11],14,643717713),E=R(E,I,H,A,b[M+0],20,-373897302),A=R(A,E,I,H,b[M+5],5,-701558691),H=R(H,A,E,I,b[M+10],9,38016083),I=R(I,H,A,E,b[M+15],14,-660478335),E=R(E,I,H,A,b[M+4],20,-405537848),A=R(A,E,I,H,b[M+9],5,568446438),H=R(H,A,E,I,b[M+14],9,-1019803690),I=R(I,H,A,E,b[M+3],14,-187363961),E=R(E,I,H,A,b[M+8],20,1163531501),A=R(A,E,I,H,b[M+13],5,-1444681467),H=R(H,A,E,I,b[M+2],9,-51403784),I=R(I,H,A,E,b[M+7],14,1735328473),A=T(A,E=R(E,I,H,A,b[M+12],20,-1926607734),I,H,b[M+5],4,-378558),H=T(H,A,E,I,b[M+8],11,-2022574463),I=T(I,H,A,E,b[M+11],16,1839030562),E=T(E,I,H,A,b[M+14],23,-35309556),A=T(A,E,I,H,b[M+1],4,-1530992060),H=T(H,A,E,I,b[M+4],11,1272893353),I=T(I,H,A,E,b[M+7],16,-155497632),E=T(E,I,H,A,b[M+10],23,-1094730640),A=T(A,E,I,H,b[M+13],4,681279174),H=T(H,A,E,I,b[M+0],11,-358537222),I=T(I,H,A,E,b[M+3],16,-722521979),E=T(E,I,H,A,b[M+6],23,76029189),A=T(A,E,I,H,b[M+9],4,-640364487),H=T(H,A,E,I,b[M+12],11,-421815835),I=T(I,H,A,E,b[M+15],16,530742520),A=y(A,E=T(E,I,H,A,b[M+2],23,-995338651),I,H,b[M+0],6,-198630844),H=y(H,A,E,I,b[M+7],10,1126891415),I=y(I,H,A,E,b[M+14],15,-1416354905),E=y(E,I,H,A,b[M+5],21,-57434055),A=y(A,E,I,H,b[M+12],6,1700485571),H=y(H,A,E,I,b[M+3],10,-1894986606),I=y(I,H,A,E,b[M+10],15,-1051523),E=y(E,I,H,A,b[M+1],21,-2054922799),A=y(A,E,I,H,b[M+8],6,1873313359),H=y(H,A,E,I,b[M+15],10,-30611744),I=y(I,H,A,E,b[M+6],15,-1560198380),E=y(E,I,H,A,b[M+13],21,1309151649),A=y(A,E,I,H,b[M+4],6,-145523070),H=y(H,A,E,I,b[M+11],10,-1120210379),I=y(I,H,A,E,b[M+2],15,718787259),E=y(E,I,H,A,b[M+9],21,-343485551),A=v(A,P),E=v(E,Z),I=v(I,S),H=v(H,G)}return Array(A,E,I,H)}function w(b,x,A,E,I,H){return v((x=v(v(x,b),v(E,H)))<<I|x>>>32-I,A)}function C(b,x,A,E,I,H,M){return w(x&A|~x&E,b,x,I,H,M)}function R(b,x,A,E,I,H,M){return w(x&E|A&~E,b,x,I,H,M)}function T(b,x,A,E,I,H,M){return w(x^A^E,b,x,I,H,M)}function y(b,x,A,E,I,H,M){return w(A^(x|~E),b,x,I,H,M)}function v(b,x){var A=(65535&b)+(65535&x);return(b>>16)+(x>>16)+(A>>16)<<16|65535&A}Je.exports=function(b){return Y.hash(b,L,16)}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){Je.exports=function(L){for(var w,C=new Array(L),R=0;R<L;R++)0==(3&R)&&(w=4294967296*Math.random()),C[R]=w>>>((3&R)<<3)&255;return C}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){var Y=Ye("./helpers");function L(R,T){R[T>>5]|=128<<24-T%32,R[15+(T+64>>9<<4)]=T;for(var y,v,b,x=Array(80),A=1732584193,E=-271733879,I=-1732584194,H=271733878,M=-1009589776,P=0;P<R.length;P+=16){for(var Z=A,S=E,G=I,ne=H,ce=M,se=0;se<80;se++){x[se]=se<16?R[P+se]:C(x[se-3]^x[se-8]^x[se-14]^x[se-16],1);var te=w(w(C(A,5),(te=E,v=I,b=H,(y=se)<20?te&v|~te&b:!(y<40)&&y<60?te&v|te&b|v&b:te^v^b)),w(w(M,x[se]),(y=se)<20?1518500249:y<40?1859775393:y<60?-1894007588:-899497514));M=H,H=I,I=C(E,30),E=A,A=te}A=w(A,Z),E=w(E,S),I=w(I,G),H=w(H,ne),M=w(M,ce)}return Array(A,E,I,H,M)}function w(R,T){var y=(65535&R)+(65535&T);return(R>>16)+(T>>16)+(y>>16)<<16|65535&y}function C(R,T){return R<<T|R>>>32-T}Je.exports=function(R){return Y.hash(R,L,20,!0)}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){function Y(T,y){var v=(65535&T)+(65535&y);return(T>>16)+(y>>16)+(v>>16)<<16|65535&v}function L(T,y){var v,b=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),A=new Array(64);T[y>>5]|=128<<24-y%32,T[15+(y+64>>9<<4)]=y;for(var E,I,H=0;H<T.length;H+=16){for(var M=x[0],P=x[1],Z=x[2],S=x[3],G=x[4],ne=x[5],ce=x[6],se=x[7],te=0;te<64;te++)A[te]=te<16?T[te+H]:Y(Y(Y(C(I=A[te-2],17)^C(I,19)^R(I,10),A[te-7]),C(I=A[te-15],7)^C(I,18)^R(I,3)),A[te-16]),v=Y(Y(Y(Y(se,C(I=G,6)^C(I,11)^C(I,25)),G&ne^~G&ce),b[te]),A[te]),E=Y(C(E=M,2)^C(E,13)^C(E,22),M&P^M&Z^P&Z),se=ce,ce=ne,ne=G,G=Y(S,v),S=Z,Z=P,P=M,M=Y(v,E);x[0]=Y(M,x[0]),x[1]=Y(P,x[1]),x[2]=Y(Z,x[2]),x[3]=Y(S,x[3]),x[4]=Y(G,x[4]),x[5]=Y(ne,x[5]),x[6]=Y(ce,x[6]),x[7]=Y(se,x[7])}return x}var w=Ye("./helpers"),C=function(T,y){return T>>>y|T<<32-y},R=function(T,y){return T>>>y};Je.exports=function(T){return w.hash(T,L,32,!0)}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){lt.read=function(Y,L,w,C,R){var T,y,v=8*R-C-1,b=(1<<v)-1,x=b>>1,A=-7,E=w?R-1:0,I=w?-1:1;for(R=Y[L+E],E+=I,T=R&(1<<-A)-1,R>>=-A,A+=v;0<A;T=256*T+Y[L+E],E+=I,A-=8);for(y=T&(1<<-A)-1,T>>=-A,A+=C;0<A;y=256*y+Y[L+E],E+=I,A-=8);if(0===T)T=1-x;else{if(T===b)return y?NaN:1/0*(R?-1:1);y+=Math.pow(2,C),T-=x}return(R?-1:1)*y*Math.pow(2,T-C)},lt.write=function(Y,L,w,C,R,T){var y,v,b=8*T-R-1,x=(1<<b)-1,A=x>>1,E=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,I=C?0:T-1,H=C?1:-1;for(T=L<0||0===L&&1/L<0?1:0,L=Math.abs(L),isNaN(L)||L===1/0?(v=isNaN(L)?1:0,y=x):(y=Math.floor(Math.log(L)/Math.LN2),L*(C=Math.pow(2,-y))<1&&(y--,C*=2),2<=(L+=1<=y+A?E/C:E*Math.pow(2,1-A))*C&&(y++,C/=2),x<=y+A?(v=0,y=x):1<=y+A?(v=(L*C-1)*Math.pow(2,R),y+=A):(v=L*Math.pow(2,A-1)*Math.pow(2,R),y=0));8<=R;Y[w+I]=255&v,I+=H,v/=256,R-=8);for(y=y<<R|v,b+=R;0<b;Y[w+I]=255&y,I+=H,y/=256,b-=8);Y[w+I-H]|=128*T}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(Ye,Je,lt){(function(ee,Et,je,Q,we,fe,K,V,F){var Y,L,w;function C(){}(ee=Je.exports={}).nextTick=(L="undefined"!=typeof window&&window.setImmediate,w="undefined"!=typeof window&&window.postMessage&&window.addEventListener,L?function(R){return window.setImmediate(R)}:w?(Y=[],window.addEventListener("message",function(R){var T=R.source;T!==window&&null!==T||"process-tick"!==R.data||(R.stopPropagation(),0<Y.length&&Y.shift()())},!0),function(R){Y.push(R),window.postMessage("process-tick","*")}):function(R){setTimeout(R,0)}),ee.title="browser",ee.browser=!0,ee.env={},ee.argv=[],ee.on=C,ee.addListener=C,ee.once=C,ee.off=C,ee.removeListener=C,ee.removeAllListeners=C,ee.emit=C,ee.binding=function(R){throw new Error("process.binding is not supported")},ee.cwd=function(){return"/"},ee.chdir=function(R){throw new Error("process.chdir is not supported")}}).call(this,Ye("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ye("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},830:jt=>{var Ye="undefined"!=typeof ArrayBuffer,Je="undefined"!=typeof Symbol;function lt(ee,Et){var je,Q,we,fe,K;if(!ee)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof Et)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(ee)||Ye&&ArrayBuffer.isView(ee)||"string"==typeof ee||"[object Arguments]"===ee.toString())for(we=0,fe=ee.length;we<fe;we++)Et(ee[we],we);else if("function"!=typeof ee.forEach)if(Je&&Symbol.iterator in ee&&"function"!=typeof ee.next&&(ee=ee[Symbol.iterator]()),"function"!=typeof ee.next)for(Q in ee)ee.hasOwnProperty(Q)&&Et(ee[Q],Q);else for(je=ee,we=0;!0!==(K=je.next()).done;)Et(K.value,we),we++;else ee.forEach(Et)}lt.forEachWithNullKeys=function(ee,Et){var je,Q,we,fe,K;if(!ee)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if("function"!=typeof Et)throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(ee)||Ye&&ArrayBuffer.isView(ee)||"string"==typeof ee||"[object Arguments]"===ee.toString())for(we=0,fe=ee.length;we<fe;we++)Et(ee[we],null);else if(ee instanceof Set)ee.forEach(function(V){Et(V,null)});else if("function"!=typeof ee.forEach)if(Je&&Symbol.iterator in ee&&"function"!=typeof ee.next&&(ee=ee[Symbol.iterator]()),"function"!=typeof ee.next)for(Q in ee)ee.hasOwnProperty(Q)&&Et(ee[Q],Q);else for(je=ee,we=0;!0!==(K=je.next()).done;)Et(K.value,null),we++;else ee.forEach(Et)},jt.exports=lt},284:jt=>{function Ye(Je){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:Je}),this.done=!1}Ye.prototype.next=function(){if(this.done)return{done:!0};var Je=this._next();return Je.done&&(this.done=!0),Je},"undefined"!=typeof Symbol&&(Ye.prototype[Symbol.iterator]=function(){return this}),Ye.of=function(){var Je=arguments,lt=Je.length,ee=0;return new Ye(function(){return ee>=lt?{done:!0}:{done:!1,value:Je[ee++]}})},Ye.empty=function(){var Je=new Ye(null);return Je.done=!0,Je},Ye.is=function(Je){return Je instanceof Ye||"object"==typeof Je&&null!==Je&&"function"==typeof Je.next},jt.exports=Ye},310:(jt,Ye,Je)=>{"use strict";var lt=Je(948);Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.isMobile=function(){return void 0!==ee.window.orientation},Ye.default=function(fe){if(!fe&&!(0,Et.default)())return"Node";if((0,je.default)(fe))return"Electron";var K="undefined"!=typeof navigator?navigator:{},V=fe||K.userAgent||"";if(V.indexOf("Edge")>-1)return"Edge";var F=-1!==V.indexOf("MSIE "),Y=-1!==V.indexOf("Trident/");return F||Y?"IE":ee.window.chrome?"Chrome":ee.window.safari?"Safari":ee.window.mozInnerScreenX?"Firefox":"Unknown"};var ee=Je(151),Et=lt(Je(602)),je=lt(Je(344))},151:(jt,Ye,Je)=>{"use strict";var lt=Je(948);Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.console=Ye.process=Ye.document=Ye.global=Ye.window=Ye.self=void 0;var ee=lt(Je(321)),Et={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,ee.default)(process))&&process};Ye.self=Et.self||Et.window||Et.global,Ye.window=Et.window||Et.self||Et.global,Ye.global=Et.global||Et.self||Et.window,Ye.document=Et.document||{},Ye.process=Et.process||{};var V=console;Ye.console=V},761:(jt,Ye,Je)=>{"use strict";var ee=Je(948),Et=Je(321);Object.defineProperty(Ye,"CO",{enumerable:!0,get:function(){return je.global}}),Object.defineProperty(Ye,"qs",{enumerable:!0,get:function(){return we.default}});var je=Je(151),we=(V(Je(602)),V(Je(310)));ee(Je(344));function K(F){if("function"!=typeof WeakMap)return null;var Y=new WeakMap,L=new WeakMap;return(K=function(C){return C?L:Y})(F)}function V(F,Y){if(!Y&&F&&F.__esModule)return F;if(null===F||"object"!==Et(F)&&"function"!=typeof F)return{default:F};var L=K(Y);if(L&&L.has(F))return L.get(F);var w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in F)if("default"!==R&&Object.prototype.hasOwnProperty.call(F,R)){var T=C?Object.getOwnPropertyDescriptor(F,R):null;T&&(T.get||T.set)?Object.defineProperty(w,R,T):w[R]=F[R]}return w.default=F,L&&L.set(F,w),w}},602:(jt,Ye,Je)=>{"use strict";var lt=Je(948);Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.default=je,Ye.isBrowserMainThread=function(){return je()&&"undefined"!=typeof document};var ee=lt(Je(321)),Et=lt(Je(344));function je(){return!("object"===("undefined"==typeof process?"undefined":(0,ee.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,Et.default)()}},344:(jt,Ye,Je)=>{"use strict";var lt=Je(948);Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.default=function(je){if("undefined"!=typeof window&&"object"===(0,ee.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,ee.default)(process.versions)&&Boolean(process.versions.electron))return!0;var Q="object"===("undefined"==typeof navigator?"undefined":(0,ee.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,we=je||Q;return!!(we&&we.indexOf("Electron")>=0)};var ee=lt(Je(321))},991:function(jt,Ye,Je){"use strict";var lt=this&&this.__createBinding||(Object.create?function(Et,je,Q,we){void 0===we&&(we=Q),Object.defineProperty(Et,we,{enumerable:!0,get:function(){return je[Q]}})}:function(Et,je,Q,we){void 0===we&&(we=Q),Et[we]=je[Q]}),ee=this&&this.__exportStar||function(Et,je){for(var Q in Et)"default"!==Q&&!Object.prototype.hasOwnProperty.call(je,Q)&&lt(je,Et,Q)};Object.defineProperty(Ye,"__esModule",{value:!0}),ee(Je(180),Ye),ee(Je(103),Ye),ee(Je(965),Ye),ee(Je(595),Ye),ee(Je(417),Ye),ee(Je(451),Ye),ee(Je(735),Ye)},180:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.BlankNode=void 0,Ye.BlankNode=class{constructor(ee){this.termType="BlankNode",this.value=ee}equals(ee){return!!ee&&"BlankNode"===ee.termType&&ee.value===this.value}}},103:(jt,Ye,Je)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.DataFactory=void 0;const lt=Je(180),ee=Je(965),Et=Je(595),je=Je(417),Q=Je(451),we=Je(735);let fe=0;Ye.DataFactory=class{constructor(F){this.blankNodeCounter=0,this.blankNodePrefix=(F=F||{}).blankNodePrefix||`df_${fe++}_`}namedNode(F){return new je.NamedNode(F)}blankNode(F){return new lt.BlankNode(F||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(F,Y){return new Et.Literal(F,Y)}variable(F){return new we.Variable(F)}defaultGraph(){return ee.DefaultGraph.INSTANCE}quad(F,Y,L,w){return new Q.Quad(F,Y,L,w||this.defaultGraph())}fromTerm(F){switch(F.termType){case"NamedNode":return this.namedNode(F.value);case"BlankNode":return this.blankNode(F.value);case"Literal":return F.language?this.literal(F.value,F.language):F.datatype.equals(Et.Literal.XSD_STRING)?this.literal(F.value):this.literal(F.value,this.fromTerm(F.datatype));case"Variable":return this.variable(F.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(F.subject),this.fromTerm(F.predicate),this.fromTerm(F.object),this.fromTerm(F.graph))}}fromQuad(F){return this.fromTerm(F)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},965:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.DefaultGraph=void 0;class Je{constructor(){this.termType="DefaultGraph",this.value=""}equals(ee){return!!ee&&"DefaultGraph"===ee.termType}}Ye.DefaultGraph=Je,Je.INSTANCE=new Je},595:(jt,Ye,Je)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Literal=void 0;const lt=Je(417);class ee{constructor(je,Q){this.termType="Literal",this.value=je,"string"==typeof Q?(this.language=Q,this.datatype=ee.RDF_LANGUAGE_STRING):Q?(this.language="",this.datatype=Q):(this.language="",this.datatype=ee.XSD_STRING)}equals(je){return!!je&&"Literal"===je.termType&&je.value===this.value&&je.language===this.language&&je.datatype.equals(this.datatype)}}Ye.Literal=ee,ee.RDF_LANGUAGE_STRING=new lt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),ee.XSD_STRING=new lt.NamedNode("http://www.w3.org/2001/XMLSchema#string")},417:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.NamedNode=void 0,Ye.NamedNode=class{constructor(ee){this.termType="NamedNode",this.value=ee}equals(ee){return!!ee&&"NamedNode"===ee.termType&&ee.value===this.value}}},451:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Quad=void 0,Ye.Quad=class{constructor(ee,Et,je,Q){this.termType="Quad",this.value="",this.subject=ee,this.predicate=Et,this.object=je,this.graph=Q}equals(ee){return!!ee&&("Quad"===ee.termType||!ee.termType)&&this.subject.equals(ee.subject)&&this.predicate.equals(ee.predicate)&&this.object.equals(ee.object)&&this.graph.equals(ee.graph)}}},735:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Variable=void 0,Ye.Variable=class{constructor(ee){this.termType="Variable",this.value=ee}equals(ee){return!!ee&&"Variable"===ee.termType&&ee.value===this.value}}},609:function(jt,Ye,Je){"use strict";var lt=this&&this.__createBinding||(Object.create?function(w,C,R,T){void 0===T&&(T=R),Object.defineProperty(w,T,{enumerable:!0,get:function(){return C[R]}})}:function(w,C,R,T){void 0===T&&(T=R),w[T]=C[R]}),ee=this&&this.__exportStar||function(w,C){for(var R in w)"default"!==R&&!Object.prototype.hasOwnProperty.call(C,R)&&lt(C,w,R)};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.getSupportedJavaScriptPrimitives=Ye.getSupportedRdfDatatypes=Ye.getTermRaw=Ye.toRdf=Ye.fromRdf=void 0;const Et=Je(991),je=Je(938),Q=Je(60);ee(Je(938),Ye),ee(Je(871),Ye),ee(Je(60),Ye);const we=new Et.DataFactory,fe=new Q.Translator;function K(w,C){return fe.fromRdf(w,C)}fe.registerHandler(new je.TypeHandlerString,je.TypeHandlerString.TYPES.map(w=>we.namedNode(w)),["string"]),fe.registerHandler(new je.TypeHandlerBoolean,[je.TypeHandlerBoolean.TYPE].map(w=>we.namedNode(w)),["boolean"]),fe.registerHandler(new je.TypeHandlerNumberDouble,je.TypeHandlerNumberDouble.TYPES.map(w=>we.namedNode(w)),["number"]),fe.registerHandler(new je.TypeHandlerNumberInteger,je.TypeHandlerNumberInteger.TYPES.map(w=>we.namedNode(w)),["number"]),fe.registerHandler(new je.TypeHandlerDate,je.TypeHandlerDate.TYPES.map(w=>we.namedNode(w)),["object"]),Ye.fromRdf=K,Ye.toRdf=function(w,C){return C&&"namedNode"in C&&(C={dataFactory:C}),(C=C||{})&&!C.dataFactory&&(C.dataFactory=we),fe.toRdf(w,C)},Ye.getTermRaw=function(w,C){return"Literal"===w.termType?K(w,C):w.value},Ye.getSupportedRdfDatatypes=function(){return fe.getSupportedRdfDatatypes()},Ye.getSupportedJavaScriptPrimitives=function(){return fe.getSupportedJavaScriptPrimitives()}},871:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0})},60:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Translator=void 0,Ye.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(ee){throw new Error(`Invalid RDF ${ee.datatype.value} value: '${ee.value}'`)}registerHandler(ee,Et,je){for(const Q of Et)this.supportedRdfDatatypes.push(Q),this.fromRdfHandlers[Q.value]=ee;for(const Q of je){let we=this.toRdfHandlers[Q];we||(this.toRdfHandlers[Q]=we=[]),we.push(ee)}}fromRdf(ee,Et){const je=this.fromRdfHandlers[ee.datatype.value];return je?je.fromRdf(ee,Et):ee.value}toRdf(ee,Et){const je=this.toRdfHandlers[typeof ee];if(je)for(const Q of je){const we=Q.toRdf(ee,Et);if(we)return we}throw new Error(`Invalid JavaScript value: '${ee}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},727:(jt,Ye,Je)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.TypeHandlerBoolean=void 0;const lt=Je(60);class ee{fromRdf(je,Q){switch(je.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return Q&&lt.Translator.incorrectRdfDataType(je),!1}toRdf(je,{datatype:Q,dataFactory:we}){return we.literal(je?"true":"false",Q||we.namedNode(ee.TYPE))}}Ye.TypeHandlerBoolean=ee,ee.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},525:(jt,Ye,Je)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.TypeHandlerDate=void 0;const lt=Je(60);class ee{fromRdf(je,Q){switch(Q&&!je.value.match(ee.VALIDATORS[je.datatype.value.substr(33,je.datatype.value.length)])&&lt.Translator.incorrectRdfDataType(je),je.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(je.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const we=je.value.split("-");return new Date(0,parseInt(we[0],10)-1,parseInt(we[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(je.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(je.value+"-01");default:return new Date(je.value)}}toRdf(je,{datatype:Q,dataFactory:we}){if(Q=Q||we.namedNode(ee.TYPES[0]),!(je instanceof Date))return null;const fe=je;let K;switch(Q.value){case"http://www.w3.org/2001/XMLSchema#gDay":K=String(fe.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":K=fe.getUTCMonth()+1+"-"+fe.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":K=String(fe.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":K=fe.getUTCFullYear()+"-"+(fe.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":K=fe.toISOString().replace(/T.*$/,"");break;default:K=fe.toISOString()}return we.literal(K,Q)}}Ye.TypeHandlerDate=ee,ee.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],ee.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},554:(jt,Ye,Je)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.TypeHandlerNumberDouble=void 0;const lt=Je(60);class ee{fromRdf(je,Q){const we=parseFloat(je.value);return Q&&isNaN(we)&&lt.Translator.incorrectRdfDataType(je),we}toRdf(je,{datatype:Q,dataFactory:we}){return Q=Q||we.namedNode(ee.TYPES[0]),isNaN(je)?we.literal("NaN",Q):isFinite(je)?je%1==0?null:we.literal(je.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Q):we.literal(je>0?"INF":"-INF",Q)}}Ye.TypeHandlerNumberDouble=ee,ee.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},750:(jt,Ye,Je)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.TypeHandlerNumberInteger=void 0;const lt=Je(60);class ee{fromRdf(je,Q){const we=parseInt(je.value,10);return Q&&(isNaN(we)||je.value.indexOf(".")>=0)&&lt.Translator.incorrectRdfDataType(je),we}toRdf(je,{datatype:Q,dataFactory:we}){return we.literal(String(je),Q||we.namedNode(je<=ee.MAX_INT&&je>=ee.MIN_INT?ee.TYPES[0]:ee.TYPES[1]))}}Ye.TypeHandlerNumberInteger=ee,ee.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],ee.MAX_INT=2147483647,ee.MIN_INT=-2147483648},608:(jt,Ye)=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.TypeHandlerString=void 0;class Je{fromRdf(ee){return ee.value}toRdf(ee,{datatype:Et,dataFactory:je}){return je.literal(ee,Et)}}Ye.TypeHandlerString=Je,Je.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},938:function(jt,Ye,Je){"use strict";var lt=this&&this.__createBinding||(Object.create?function(Et,je,Q,we){void 0===we&&(we=Q),Object.defineProperty(Et,we,{enumerable:!0,get:function(){return je[Q]}})}:function(Et,je,Q,we){void 0===we&&(we=Q),Et[we]=je[Q]}),ee=this&&this.__exportStar||function(Et,je){for(var Q in Et)"default"!==Q&&!Object.prototype.hasOwnProperty.call(je,Q)&&lt(je,Et,Q)};Object.defineProperty(Ye,"__esModule",{value:!0}),ee(Je(727),Ye),ee(Je(525),Ye),ee(Je(554),Ye),ee(Je(750),Ye),ee(Je(608),Ye)},303:(jt,Ye,Je)=>{"use strict";var lt={};Je.r(lt),Je.d(lt,{decode:()=>Xme,encode:()=>Qme});var ee={};Je.r(ee),Je.d(ee,{decode:()=>n_e,encode:()=>i_e});var Et={};Je.r(Et),Je.d(Et,{decode:()=>r_e,encode:()=>s_e});var je={};function Q(n){return"function"==typeof n}Je.r(je),Je.d(je,{decode:()=>o_e,encode:()=>a_e});let we=!1;const fe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else we&&console.log("RxJS: Back to a better error behavior. Thank you. <3");we=n},get useDeprecatedSynchronousErrorHandling(){return we}};function K(n){setTimeout(()=>{throw n},0)}const V={closed:!0,next(n){},error(n){if(fe.useDeprecatedSynchronousErrorHandling)throw n;K(n)},complete(){}},F=Array.isArray||(n=>n&&"number"==typeof n.length);function Y(n){return null!==n&&"object"==typeof n}const w=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class C{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof C)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Q(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof w?R(o.errors):[o]}}if(F(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(Y(l))try{l.unsubscribe()}catch(c){e=e||[],c instanceof w?e=e.concat(R(c.errors)):e.push(c)}}}if(e)throw new w(e)}add(e){let t=e;if(!e)return C.EMPTY;switch(typeof e){case"function":t=new C(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof C)){const s=t;t=new C,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof C){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function R(n){return n.reduce((e,t)=>e.concat(t instanceof w?t.errors:t),[])}C.EMPTY=((n=new C).closed=!0,n);const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class v extends C{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=V;break;case 1:if(!e){this.destination=V;break}if("object"==typeof e){e instanceof v?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new b(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new b(this,e,t,i)}}[T](){return this}static create(e,t,i){const r=new v(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class b extends v{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;Q(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==V&&(o=Object.create(t),Q(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;fe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=fe;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):K(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;K(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);fe.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),fe.useDeprecatedSynchronousErrorHandling)throw i;K(i)}}__tryOrSetError(e,t,i){if(!fe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return fe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(K(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const E="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(n){return n}function H(...n){return M(n)}function M(n){return 0===n.length?I:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let P=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof v)return n;if(n[T])return n[T]()}return n||e||t?new v(n,e,t):new v(V)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||fe.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),fe.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){fe.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof v?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=Z(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[E](){return this}pipe(...t){return 0===t.length?this:M(t)(this)}toPromise(t){return new(t=Z(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Z(n){if(n||(n=fe.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const G=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ne extends C{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class ce extends v{constructor(e){super(e),this.destination=e}}let se=(()=>{class n extends P{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[T](){return new ce(this)}lift(t){const i=new te(this,this);return i.operator=t,i}next(t){if(this.closed)throw new G;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new G;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new G;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new G;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new G;return this.hasError?(t.error(this.thrownError),C.EMPTY):this.isStopped?(t.complete(),C.EMPTY):(this.observers.push(t),new ne(this,t))}asObservable(){const t=new P;return t.source=this,t}}return n.create=(e,t)=>new te(e,t),n})();class te extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):C.EMPTY}}function Ie(n){return n&&"function"==typeof n.schedule}function ye(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new re(n,e))}}class re{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new ve(e,this.project,this.thisArg))}}class ve extends v{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Fe=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},J="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",xe=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ge(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Se=n=>{if(n&&"function"==typeof n[E])return(n=>e=>{const t=n[E]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(xe(n))return Fe(n);if(Ge(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,K),e))(n);if(n&&"function"==typeof n[J])return(n=>e=>{const t=n[J]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${Y(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Be(n,e){return new P(t=>{const i=new C;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function qe(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[E]}(n))return function(n,e){return new P(t=>{const i=new C;return i.add(e.schedule(()=>{const r=n[E]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Ge(n))return function(n,e){return new P(t=>{const i=new C;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(xe(n))return Be(n,e);if(function(n){return n&&"function"==typeof n[J]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new P(t=>{const i=new C;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[J](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof P?n:new P(Se(n))}class _t extends v{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ae extends v{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function k(n,e){if(e.closed)return;if(n instanceof P)return n.subscribe(e);let t;try{t=Se(n)(e)}catch(i){e.error(i)}return t}function z(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(z((r,s)=>qe(n(r,s)).pipe(ye((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new Le(n,t)))}class Le{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new nt(e,this.project,this.concurrent))}}class nt extends Ae{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new _t(this),i=this.destination;i.add(t);const r=k(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Nt(n=Number.POSITIVE_INFINITY){return z(I,n)}function On(n,e){return e?Be(n,e):new P(Fe(n))}function kn(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Ie(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof P?n[0]:Nt(e)(On(n,t))}function Yn(){return function(e){return e.lift(new Ti(e))}}class Ti{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new wi(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class wi extends v{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Xr extends P{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new C,e.add(this.source.subscribe(new gs(this.getSubject(),this))),e.closed&&(this._connection=null,e=C.EMPTY)),e}refCount(){return Yn()(this)}}const Ls=(()=>{const n=Xr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class gs extends ce{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function el(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new kl(r,e));const s=Object.create(i,Ls);return s.source=i,s.subjectFactory=r,s}}class kl{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function Sa(){return new se}function Es(){return n=>Yn()(el(Sa)(n))}function Jt(n){for(let e in n)if(n[e]===Jt)return e;throw Error("Could not find renamed property on target object.")}function tl(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ot(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ot).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ut(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ft=Jt({__forward_ref__:Jt});function be(n){return n.__forward_ref__=be,n.toString=function(){return ot(this())},n}function Ce(n){return $e(n)?n():n}function $e(n){return"function"==typeof n&&n.hasOwnProperty(ft)&&n.__forward_ref__===be}class it extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function Dt(n){return"string"==typeof n?n:null==n?"":String(n)}function Xt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Dt(n)}function bn(n,e){const t=e?` in ${e}`:"";throw new it("201",`No provider for ${Xt(n)} found${t}`)}function ie(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function et(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function vn(n){return Ss(n,po)||Ss(n,js)}function Ss(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ll(n){return n&&(n.hasOwnProperty(jr)||n.hasOwnProperty(xc))?n[jr]:null}const po=Jt({\u0275prov:Jt}),jr=Jt({\u0275inj:Jt}),js=Jt({ngInjectableDef:Jt}),xc=Jt({ngInjectorDef:Jt});var Sn=(()=>((Sn=Sn||{})[Sn.Default=0]="Default",Sn[Sn.Host=1]="Host",Sn[Sn.Self=2]="Self",Sn[Sn.SkipSelf=4]="SkipSelf",Sn[Sn.Optional=8]="Optional",Sn))();let go;function Ca(n){const e=go;return go=n,e}function wd(n,e,t){const i=vn(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Sn.Optional?null:void 0!==e?e:void bn(ot(n),"Injector")}function Pe(n){return{toString:n}.toString()}var Ze=(()=>((Ze=Ze||{})[Ze.OnPush=0]="OnPush",Ze[Ze.Default=1]="Default",Ze))(),Yt=(()=>((Yt=Yt||{})[Yt.Emulated=0]="Emulated",Yt[Yt.None=2]="None",Yt[Yt.ShadowDom=3]="ShadowDom",Yt))();const li="undefined"!=typeof globalThis&&globalThis,Vr="undefined"!=typeof window&&window,es="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xs="undefined"!=typeof global&&global,Qn=li||xs||Vr||es,Ed={},tr=[],fp=Jt({\u0275cmp:Jt}),Jm=Jt({\u0275dir:Jt}),Dh=Jt({\u0275pipe:Jt}),sv=Jt({\u0275mod:Jt}),MC=Jt({\u0275loc:Jt}),jl=Jt({\u0275fac:Jt}),Ih=Jt({__NG_ELEMENT_ID__:Jt});let DC=0;function ln(n){return Pe(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ze.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||tr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Yt.Emulated,id:"c",styles:n.styles||tr,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=DC++,i.inputs=cv(n.inputs,t),i.outputs=cv(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(ov):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(av):null,i})}function ov(n){return Vi(n)||function(n){return n[Jm]||null}(n)}function av(n){return function(n){return n[Dh]||null}(n)}const lv={};function on(n){return Pe(()=>{const e={type:n.type,bootstrap:n.bootstrap||tr,declarations:n.declarations||tr,imports:n.imports||tr,exports:n.exports||tr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(lv[n.id]=n.type),e})}function cv(n,e){if(null==n)return Ed;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Rt=ln;function Vs(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Vi(n){return n[fp]||null}function Oo(n,e){const t=n[sv]||null;if(!t&&!0===e)throw new Error(`Type ${ot(n)} does not have '\u0275mod' property.`);return t}function Qo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zo(n){return Array.isArray(n)&&!0===n[1]}function n_(n){return 0!=(8&n.flags)}function Ad(n){return 2==(2&n.flags)}function Td(n){return 1==(1&n.flags)}function Ma(n){return null!==n.template}function uv(n){return 0!=(512&n[2])}function Tc(n,e){return n.hasOwnProperty(jl)?n[jl]:null}class o_{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ui(){return fv}function fv(n){return n.type.prototype.ngOnChanges&&(n.setInput=LC),kC}function kC(){const n=ct(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Ed)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function LC(n,e,t,i){const r=ct(n)||function(n,e){return n[kh]=e}(n,{previous:Ed,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new o_(l&&l.currentValue,e,o===Ed),n[i]=e}Ui.ngInherit=!0;const kh="__ngSimpleChanges__";function ct(n){return n[kh]||null}let Ki;function gr(n){return!!n.listen}const bu={createRenderer:(n,e)=>void 0!==Ki?Ki:"undefined"!=typeof document?document:void 0};function xr(n){for(;Array.isArray(n);)n=n[0];return n}function Lh(n,e){return xr(e[n])}function Zs(n,e){return xr(e[n.index])}function c_(n,e){return n.data[e]}function zs(n,e){const t=e[n];return Qo(t)?t:t[0]}function zl(n){return 4==(4&n[2])}function Dd(n){return 128==(128&n[2])}function Ia(n,e){return null==e?null:n[e]}function u_(n){n[18]=0}function mp(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Bn={lFrame:wu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gv(){return Bn.bindingsEnabled}function Vt(){return Bn.lFrame.lView}function Ei(){return Bn.lFrame.tView}function Cr(n){return Bn.lFrame.contextLView=n,n[8]}function cs(){let n=d_();for(;null!==n&&64===n.type;)n=n.parent;return n}function d_(){return Bn.lFrame.currentTNode}function rl(n,e){const t=Bn.lFrame;t.currentTNode=n,t.isParent=e}function Hr(){return Bn.lFrame.isParent}function ms(){Bn.lFrame.isParent=!1}function Vh(){return Bn.isInCheckNoChangesMode}function yp(n){Bn.isInCheckNoChangesMode=n}function Oa(){return Bn.lFrame.bindingIndex++}function No(n){const e=Bn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Id(n,e){const t=Bn.lFrame;t.bindingIndex=t.bindingRootIndex=n,h_(e)}function h_(n){Bn.lFrame.currentDirectiveIndex=n}function f_(n){const e=Bn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function mv(){return Bn.lFrame.currentQueryIndex}function p_(n){Bn.lFrame.currentQueryIndex=n}function vp(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Od(n,e,t){if(t&Sn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Sn.Host||(r=vp(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Bn.lFrame=De();return i.currentTNode=e,i.lView=n,!0}function Hh(n){const e=De(),t=n[1];Bn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function De(){const n=Bn.lFrame,e=null===n?null:n.child;return null===e?wu(n):e}function wu(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Gh(){const n=Bn.lFrame;return Bn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Po=Gh;function fi(){const n=Gh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Js(){return Bn.lFrame.selectedIndex}function yo(n){Bn.lFrame.selectedIndex=n}function kr(){const n=Bn.lFrame;return c_(n.tView,n.selectedIndex)}function wp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Ep(n,e,t){sl(n,e,3,t)}function Sp(n,e,t,i){(3&n[2])===t&&sl(n,e,t,i)}function g_(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function sl(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(KC(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function KC(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class $h{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function xp(n,e,t){const i=gr(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];__(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function bv(n){return 3===n||4===n||6===n}function __(n){return 64===n.charCodeAt(0)}function Wh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||y_(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function y_(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function vv(n){return-1!==n}function Rd(n){return 32767&n}function ol(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Nd=!0;function Cp(n){const e=Nd;return Nd=n,e}let v_=0;function Hs(n,e){const t=Ap(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,w_(i.data,n),w_(e,null),w_(i.blueprint,null));const r=qh(n,e),s=n.injectorIndex;if(vv(r)){const o=Rd(r),a=ol(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function w_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ap(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function qh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Dc(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ih)&&(i=t[Ih]),null==i&&(i=t[Ih]=v_++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function E_(n,e,t){if(t&Sn.Optional)return n;bn(e,"NodeInjector")}function Ev(n,e,t,i){if(t&Sn.Optional&&void 0===i&&(i=null),0==(t&(Sn.Self|Sn.Host))){const r=n[9],s=Ca(void 0);try{return r?r.get(e,i,t&Sn.Optional):wd(e,i,t&Sn.Optional)}finally{Ca(s)}}return E_(i,e,t)}function Yh(n,e,t,i=Sn.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ih)?n[Ih]:void 0;return"number"==typeof e?e>=0?255&e:xv:e}(t);if("function"==typeof s){if(!Od(e,n,i))return i&Sn.Host?E_(r,t,i):Ev(e,t,i,r);try{const o=s(i);if(null!=o||i&Sn.Optional)return o;bn(t)}finally{Po()}}else if("number"==typeof s){let o=null,a=Ap(n,e),l=-1,c=i&Sn.Host?e[16][6]:null;for((-1===a||i&Sn.SkipSelf)&&(l=-1===a?qh(n,e):e[a+8],-1!==l&&Kh(i,!1)?(o=e[1],a=Rd(l),e=ol(l,e)):a=-1);-1!==a;){const u=e[1];if(Tp(s,a,u.data)){const h=Ts(a,e,t,o,i,c);if(h!==Sv)return h}l=e[a+8],-1!==l&&Kh(i,e[1].data[a+8]===c)&&Tp(s,a,e)?(o=u,a=Rd(l),e=ol(l,e)):a=-1}}}return Ev(e,t,i,r)}const Sv={};function xv(){return new ea(cs(),Vt())}function Ts(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Pd(a,o,t,null==i?Ad(a)&&Nd:i!=o&&0!=(3&a.type),r&Sn.Host&&s===a);return null!==u?Fd(e,o,u,a):Sv}function Pd(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<p;g++){const m=o[g];if(g<l&&t===m||g>=l&&m.type===t)return g}if(r){const g=o[l];if(g&&Ma(g)&&g.type===t)return l}return null}function Fd(n,e,t,i){let r=n[t];const s=e.data;if(function(n){return n instanceof $h}(r)){const o=r;o.resolving&&function(n,e){throw new it("200",`Circular dependency in DI detected for ${n}`)}(Xt(s[t]));const a=Cp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ca(o.injectImpl):null;Od(n,i,Sn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=fv(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Ca(l),Cp(a),o.resolving=!1,Po()}}return r}function Tp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Kh(n,e){return!(n&Sn.Self||n&Sn.Host&&e)}class ea{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Yh(this._tNode,this._lView,e,void 0,t)}}function nr(n){return Pe(()=>{const e=n.prototype.constructor,t=e[jl]||Ms(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[jl]||Ms(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Ms(n){return $e(n)?()=>{const e=Ms(Ce(n));return e&&e()}:Tc(n)}function Fo(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(bv(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(cs(),n)}const Ld="__parameters__";function Pa(n,e,t){return Pe(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(Ld)?l[Ld]:Object.defineProperty(l,Ld,{value:[]})[Ld];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ht{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=et({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const xu=Function;function ta(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),ta(i,e)):e!==n&&e.push(i)}return e}function na(n,e){n.forEach(t=>Array.isArray(t)?na(t,e):e(t))}function Qh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Oc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function ko(n,e,t){let i=Ds(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function M_(n,e){const t=Ds(n,e);if(t>=0)return n[1|t]}function Ds(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Tu={},Rp="__NG_DI_FLAG__",Nc="ngTempTokenPath",Pc=/\n/gm,cl="__source",Np=Jt({provide:String,useValue:Jt});let Mu;function Vd(n){const e=Mu;return Mu=n,e}function uA(n,e=Sn.Default){if(void 0===Mu)throw new Error("inject() must be called from an injection context");return null===Mu?wd(n,void 0,e):Mu.get(n,e&Sn.Optional?null:void 0,e)}function ke(n,e=Sn.Default){return(go||uA)(Ce(n),e)}const Fc=ke;function Du(n){const e=[];for(let t=0;t<n.length;t++){const i=Ce(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=Sn.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Iv(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ke(r,s))}else e.push(ke(i))}return e}function Ud(n,e){return n[Rp]=e,n.prototype[Rp]=e,n}function Iv(n){return n[Rp]}function eo(n,e,t,i){const r=n[Nc];throw e[cl]&&r.unshift(e[cl]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=ot(e);if(Array.isArray(e))r=e.map(ot).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ot(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Pc,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Nc]=null,n}const zd=Ud(Pa("Inject",n=>({token:n})),-1),ns=Ud(Pa("Optional"),8),ul=Ud(Pa("SkipSelf"),4);let Gd;function Ou(n){var e;return(null===(e=function(){if(void 0===Gd&&(Gd=null,Qn.trustedTypes))try{Gd=Qn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Gd}())||void 0===e?void 0:e.createHTML(n))||n}class Yl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class P_ extends Yl{getTypeName(){return"HTML"}}class F_ extends Yl{getTypeName(){return"Style"}}class Vp extends Yl{getTypeName(){return"Script"}}class $d extends Yl{getTypeName(){return"URL"}}class Fn extends Yl{getTypeName(){return"ResourceURL"}}function Gs(n){return n instanceof Yl?n.changingThisBreaksApplicationSecurity:n}function ia(n,e){const t=Lc(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function Lc(n){return n instanceof Yl&&n.getTypeName()||null}class zv{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ou(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class gA{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ou(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Ou(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const mA=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_A=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bo(n){return(n=String(n)).match(mA)||n.match(_A)?n:"unsafe:"+n}function Ws(n){return(n=String(n)).split(",").map(e=>Bo(e.trim())).join(", ")}function ra(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Jh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Up=ra("area,br,col,hr,img,wbr"),Gv=ra("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$v=ra("rp,rt"),L_=Jh(Up,Jh(Gv,ra("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jh($v,ra("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jh($v,Gv)),B_=ra("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),j_=ra("srcset"),V_=Jh(B_,j_,ra("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ra("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wA=ra("script,style,template");class U_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!L_.hasOwnProperty(t))return this.sanitizedSomething=!0,!wA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!V_.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;B_[a]&&(l=Bo(l)),j_[a]&&(l=Ws(l)),this.buf.push(" ",o,'="',Hp(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();L_.hasOwnProperty(t)&&!Up.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Hp(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Wv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ef=/([^\#-~ |!])/g;function Hp(n){return n.replace(/&/g,"&amp;").replace(Wv,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ef,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tf;function z_(n,e){let t=null;try{tf=tf||function(n){const e=new gA(n);return function(){try{return!!(new window.DOMParser).parseFromString(Ou(""),"text/html")}catch(n){return!1}}()?new zv(e):e}(n);let i=e?String(e):"";t=tf.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=tf.getInertBodyElement(i)}while(i!==s);return Ou((new U_).sanitizeChildren(Wd(t)||t))}finally{if(t){const i=Wd(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Wd(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ni=(()=>((ni=ni||{})[ni.NONE=0]="NONE",ni[ni.HTML=1]="HTML",ni[ni.STYLE=2]="STYLE",ni[ni.SCRIPT=3]="SCRIPT",ni[ni.URL=4]="URL",ni[ni.RESOURCE_URL=5]="RESOURCE_URL",ni))();function nf(n){const e=function(){const n=Vt();return n&&n[12]}();return e?e.sanitize(ni.URL,n)||"":ia(n,"URL")?Gs(n):Bo(Dt(n))}const $_="__ngContext__";function Is(n,e){n[$_]=e}function W_(n){const e=function(n){return n[$_]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Gp(n){return n.ngOriginalError}function PA(n,...e){n.error(...e)}class oa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),r=function(n){return n&&n.ngErrorLogger||PA}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Gp(e)):null}_findOriginalError(e){let t=e&&Gp(e);for(;t&&Gp(t);)t=Gp(t);return t||null}}const iw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Qn))();function hl(n){return n instanceof Function?n():n}var jo=(()=>((jo=jo||{})[jo.Important=1]="Important",jo[jo.DashCase=2]="DashCase",jo))();function Q_(n,e){return undefined(n,e)}function of(n){const e=n[3];return Zo(e)?e[3]:e}function Yd(n){return lw(n[13])}function J_(n){return lw(n[4])}function lw(n){for(;null!==n&&!Zo(n);)n=n[4];return n}function Kd(n,e,t,i,r){if(null!=i){let s,o=!1;Zo(i)?s=i:Qo(i)&&(o=!0,i=i[0]);const a=xr(i);0===n&&null!==t?null==r?fw(e,t,a):fl(e,t,a,r||null,!0):1===n&&null!==t?fl(e,t,a,r||null,!0):2===n?function(n,e,t){const i=qp(n,e);i&&function(n,e,t,i){gr(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,i,r){const s=t[7];s!==xr(t)&&Kd(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Xd(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function ty(n,e,t){return gr(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function uw(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,mp(r,-1)),t.splice(i,1)}function ny(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&uw(r,i),e>0&&(n[t-1][4]=i[4]);const s=Gl(n,10+e);!function(n,e){Xd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function iy(n,e){if(!(256&e[2])){const t=e[11];gr(t)&&t.destroyNode&&Xd(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Wp(n[1],n);for(;e;){let t=null;if(Qo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Qo(e)&&Wp(e[1],e),e=e[3];null===e&&(e=n),Qo(e)&&Wp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Wp(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof $h)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):xr(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&gr(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Zo(e[3])){t!==e[3]&&uw(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function dw(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Yt.None||r===Yt.Emulated)return null}return Zs(i,t)}(n,e.parent,t)}function fl(n,e,t,i,r){gr(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function fw(n,e,t){gr(n)?n.appendChild(e,t):e.appendChild(t)}function pw(n,e,t,i,r){null!==i?fl(n,e,t,i,r):fw(n,e,t)}function qp(n,e){return gr(n)?n.parentNode(e):e.parentNode}function gw(n,e,t){return _w(n,e,t)}let _w=function(n,e,t){return 40&n.type?Zs(n,t):null};function Yp(n,e,t,i){const r=dw(n,i,e),s=e[11],a=gw(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)pw(s,r,t[l],a,!1);else pw(s,r,t,a,!1)}function Nu(n,e){if(null!==e){const t=e.type;if(3&t)return Zs(e,n);if(4&t)return Kp(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Nu(n,i);{const r=n[e.index];return Zo(r)?Kp(-1,r):xr(r)}}if(32&t)return Q_(e,n)()||xr(n[e.index]);{const i=bw(n,e);return null!==i?Array.isArray(i)?i[0]:Nu(of(n[16]),i):Nu(n,e.next)}}return null}function bw(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Kp(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Nu(i,r)}return e[7]}function af(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Is(xr(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)af(n,e,t.child,i,r,s,!1),Kd(e,n,r,a,s);else if(32&l){const c=Q_(t,i);let u;for(;u=c();)Kd(e,n,r,u,s);Kd(e,n,r,a,s)}else 16&l?oy(n,e,i,t,r,s):Kd(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Xd(n,e,t,i,r,s){af(t,i,n.firstChild,e,r,s,!1)}function oy(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Kd(e,n,r,l[c],s);else af(n,e,l,o[3],r,s,!0)}function Ew(n,e,t){gr(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function ay(n,e,t){gr(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function lf(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const Sw="ng-template";function sT(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==lf(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Xp(n){return 4===n.type&&n.value!==Sw}function xw(n,e,t){return e===(4!==n.type||t?n.value:Sw)}function oT(n,e,t){let i=4;const r=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(bv(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!xw(n,l,t)||""===l&&1===e.length){if(ka(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!sT(n.attrs,c,t)){if(ka(i))return!1;o=!0}continue}const h=aT(8&i?"class":l,r,Xp(n),t);if(-1===h){if(ka(i))return!1;o=!0;continue}if(""!==c){let p;p=h>s?"":r[h+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==lf(g,c,0)||2&i&&c!==p){if(ka(i))return!1;o=!0}}}}else{if(!o&&!ka(i)&&!ka(l))return!1;if(o&&ka(l))continue;o=!1,i=l|1&i}}return ka(i)||o}function ka(n){return 0==(1&n)}function aT(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Cw(n,e,t=!1){for(let i=0;i<e.length;i++)if(oT(n,e[i],t))return!0;return!1}function dT(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Aw(n,e){return n?":not("+e.trim()+")":e}function hT(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ka(o)&&(e+=Aw(s,r),r=""),i=o,s=s||!ka(i);t++}return""!==r&&(e+=Aw(s,r)),e}const In={};function Zt(n){Tw(Ei(),Vt(),Js()+n,Vh())}function Tw(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Ep(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Sp(e,s,0,t)}yo(t)}function pl(n,e){return n<<17|e<<2}function Rn(n){return n>>17&32767}function Ar(n){return 2|n}function Kl(n){return(131068&n)>>2}function gl(n,e){return-131069&n|e<<2}function cy(n){return 1|n}function kw(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];p_(r),o.contentQueries(2,e[s],s)}}}function uf(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,u_(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Zd(n,e,t,i,r){let s=n.data[e];if(null===s)s=function(n,e,t,i,r){const s=d_(),o=Hr(),l=n.data[e]=function(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),Bn.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function(){const n=Bn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return rl(s,!0),s}function Jd(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function df(n,e,t){Hh(e);try{const i=n.viewQuery;null!==i&&Cy(1,i,t);const r=n.template;null!==r&&Lw(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&kw(n,e),n.staticViewQueries&&Cy(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)zT(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,fi()}}function eh(n,e,t,i){const r=e[2];if(256==(256&r))return;Hh(e);const s=Vh();try{u_(e),function(n){Bn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Lw(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Ep(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Sp(e,c,0,null),g_(e,0)}if(function(n){for(let e=Yd(n);null!==e;e=J_(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&mp(s,1),r[2]|=1024}}}(e),function(n){for(let e=Yd(n);null!==e;e=J_(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Dd(i)&&eh(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&kw(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Ep(e,c)}else{const c=n.contentHooks;null!==c&&Sp(e,c,1),g_(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)yo(~r);else{const s=r,o=t[++i],a=t[++i];Id(o,s),a(2,e[s])}}}finally{yo(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)UT(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Cy(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&Ep(e,c)}else{const c=n.viewHooks;null!==c&&Sp(e,c,2),g_(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,mp(e[3],-1))}finally{fi()}}function CT(n,e,t,i){const r=e[10],s=!Vh(),o=zl(e);try{s&&!o&&r.begin&&r.begin(),o&&df(n,e,i),eh(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function Lw(n,e,t,i,r){const s=Js(),o=2&i;try{yo(-1),o&&e.length>20&&Tw(n,e,20,Vh()),t(i,r)}finally{yo(s)}}function hf(n,e,t){!gv()||(function(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Hs(t,e),Is(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Ma(l);c&&kT(e,t,l);const u=Fd(e,n,a,t);Is(u,e),null!==o&&LT(0,a-r,u,l,0,o),c&&(zs(t.index,e)[8]=u)}}(n,e,t,Zs(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=Bn.lFrame.currentDirectiveIndex;try{yo(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];h_(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&qw(c,u)}}finally{yo(-1),h_(a)}}(n,e,t))}function my(n,e,t=Zs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function eg(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=tg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function tg(n,e,t,i,r,s,o,a,l,c){const u=20+i,h=u+r,p=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:In);return t}(u,h),g="function"==typeof c?c():c;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function Vw(n,e,t,i){const r=Qw(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&ig(n).push(i,r.length-1))}function Uw(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Vo(n,e,t,i,r,s,o,a){const l=Zs(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(Zw(n,t,u,i,r),Ad(e)&&function(n,e){const t=zs(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,gr(s)?s.setProperty(l,i,r):__(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function _y(n,e,t,i){let r=!1;if(gv()){const s=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];Cw(t,o.selectors,!1)&&(r||(r=[]),Dc(Hs(t,e),n,o.type),Ma(o)?(Yw(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,yy(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const h=s[u];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=Jd(n,e,s.length,null);for(let u=0;u<s.length;u++){const h=s[u];t.mergedAttrs=Wh(t.mergedAttrs,h.hostAttrs),by(n,t,e,c,h),FT(c,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const p=h.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],h=u.inputs,p=null===s||Xp(e)?null:BT(h,s);o.push(p),a=Uw(h,c,a),l=Uw(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new it("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Wh(t.mergedAttrs,t.attrs),r}function Ww(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function qw(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Yw(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function FT(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ma(e)&&(t[""]=n)}}function yy(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function by(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Tc(r.type)),o=new $h(s,Ma(r),null);n.blueprint[i]=o,t[i]=o,Ww(n,e,0,i,Jd(n,t,r.hostVars,In),r)}function kT(n,e,t){const i=Zs(e,n),r=eg(t),s=n[10],o=ng(n,uf(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function _l(n,e,t,i,r,s){const o=Zs(n,e);!function(n,e,t,i,r,s,o){if(null==s)gr(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?Dt(s):o(s,i||"",r);gr(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function LT(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?i.setInput(t,h,c,u):t[u]=h}}}function BT(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function Kw(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function UT(n,e){const t=zs(e,n);if(Dd(t)){const i=t[1];80&t[2]?eh(i,t,i.template,t[8]):t[5]>0&&wy(t)}}function wy(n){for(let i=Yd(n);null!==i;i=J_(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];eh(o,s,o.template,s[8])}else s[5]>0&&wy(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=zs(t[i],n);Dd(r)&&r[5]>0&&wy(r)}}function zT(n,e){const t=zs(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),df(i,t,t[8])}function ng(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Ey(n){for(;n;){n[2]|=64;const e=of(n);if(uv(n)&&!e)return n;n=e}return null}function xy(n,e,t){const i=e[10];i.begin&&i.begin();try{eh(n,e,n.template,t)}catch(r){throw Ty(e,r),r}finally{i.end&&i.end()}}function Xw(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=W_(t),r=i[1];CT(r,i,r.template,t)}}(n[8])}function Cy(n,e,t){p_(0),e(n,t)}const qT=(()=>Promise.resolve(null))();function Qw(n){return n[7]||(n[7]=[])}function ig(n){return n.cleanup||(n.cleanup=[])}function Ay(n,e,t){return(null===n||Ma(n))&&(t=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Ty(n,e){const t=n[9],i=t?t.get(oa,null):null;i&&i.handleError(e)}function Zw(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Xl(n,e,t){const i=Lh(e,n);!function(n,e,t){gr(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function rg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=ut(r,a):2==s&&(i=ut(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const Pu=new Ht("INJECTOR",-1);class io{get(e,t=Tu){if(t===Tu){const i=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw i.name="NullInjectorError",i}return t}}const Fu=new Ht("Set Injector scope."),ff={},XT={};let Dy;function Jw(){return void 0===Dy&&(Dy=new io),Dy}function eE(n,e=null,t=null,i){return new Oy(n,t,e||Jw(),i)}class Oy{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&na(t,a=>this.processProvider(a,e,t)),na([e],a=>this.processInjectorType(a,[],s)),this.records.set(Pu,ku(void 0,this));const o=this.records.get(Fu);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:ot(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Tu,i=Sn.Default){this.assertNotDestroyed();const r=Vd(this),s=Ca(void 0);try{if(!(i&Sn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ht}(e)&&vn(e);a=l&&this.injectableDefInScope(l)?ku(Ry(e),ff):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Sn.Self?Jw():this.parent).get(e,t=i&Sn.Optional&&t===Tu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Nc]=o[Nc]||[]).unshift(ot(e)),r)throw o;return eo(o,e,"R3InjectorError",this.source)}throw o}finally{Ca(s),Vd(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(ot(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=Ce(e)))return!1;let r=Ll(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Ll(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{na(r.imports,h=>{this.processInjectorType(h,t,i)&&(void 0===u&&(u=[]),u.push(h))})}finally{}if(void 0!==u)for(let h=0;h<u.length;h++){const{ngModule:p,providers:g}=u[h];na(g,m=>this.processProvider(m,p,g||tr))}}this.injectorDefTypes.add(o);const l=Tc(o)||(()=>new o);this.records.set(o,ku(l,ff));const c=r.providers;if(null!=c&&!a){const u=e;na(c,h=>this.processProvider(h,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Vc(e=Ce(e))?e:Ce(e&&e.provide);const s=function(n,e,t){return nE(n)?ku(void 0,n.useValue):ku(tE(n),ff)}(e);if(Vc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=ku(void 0,ff,!0),o.factory=()=>Du(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===ff&&(t.value=XT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ce(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Ry(n){const e=vn(n),t=null!==e?e.factory:Tc(n);if(null!==t)return t;if(n instanceof Ht)throw new Error(`Token ${ot(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=Oc(e,"?");throw new Error(`Can't resolve all parameters for ${ot(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[po]||n[js]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function tE(n,e,t){let i;if(Vc(n)){const r=Ce(n);return Tc(r)||Ry(r)}if(nE(n))i=()=>Ce(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Du(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>ke(Ce(n.useExisting));else{const r=Ce(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Tc(r)||Ry(r);i=()=>new r(...Du(n.deps))}return i}function ku(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nE(n){return null!==n&&"object"==typeof n&&Np in n}function Vc(n){return"function"==typeof n}const iE=function(n,e,t){return function(n,e=null,t=null,i){const r=eE(n,e,t,i);return r._resolveInjectorDefTypes(),r}({name:t},e,n,t)};class Wn{static create(e,t){return Array.isArray(e)?iE(e,t,""):iE(e.providers,e.parent,e.name||"")}}function Gq(n,e){wp(W_(n)[1],cs())}function An(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Ma(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=uM(n.inputs),o.declaredInputs=uM(n.declaredInputs),o.outputs=uM(n.outputs);const a=r.hostBindings;a&&Yq(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Wq(n,l),c&&qq(n,c),tl(n.inputs,r.inputs),tl(n.declaredInputs,r.declaredInputs),tl(n.outputs,r.outputs),Ma(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===An&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Wh(r.hostAttrs,t=Wh(t,r.hostAttrs))}}(i)}function uM(n){return n===Ed?{}:n===tr?[]:n}function Wq(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function qq(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function Yq(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}Wn.THROW_IF_NOT_FOUND=Tu,Wn.NULL=new io,Wn.\u0275prov=et({token:Wn,providedIn:"any",factory:()=>ke(Pu)}),Wn.__NG_ELEMENT_ID__=-1;let lE=null;function sg(){if(!lE){const n=Qn.Symbol;if(n&&n.iterator)lE=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(lE=i)}}}return lE}class Zl{constructor(e){this.wrapped=e}static wrap(e){return new Zl(e)}static unwrap(e){return Zl.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Zl}}function Ly(n){return!!dM(n)&&(Array.isArray(n)||!(n instanceof Map)&&sg()in n)}function dM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Eo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Bi(n,e,t,i){const r=Vt();return Eo(r,Oa(),e)&&(Ei(),_l(kr(),r,n,e,t,i)),Bi}function ag(n,e,t,i){return Eo(n,Oa(),t)?e+Dt(t)+i:In}function Di(n,e,t,i,r,s,o,a){const l=Vt(),c=Ei(),u=n+20,h=c.firstCreatePass?function(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Zd(e,n,4,o||null,Ia(c,a));_y(e,t,u,Ia(c,l)),wp(e,u);const h=u.tViews=tg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];rl(h,!1);const p=l[11].createComment("");Yp(c,l,p,h),Is(p,l),ng(l,l[u]=Kw(p,l,p,h)),Td(h)&&hf(c,l,h),null!=o&&my(l,h,a)}function Oe(n,e=Sn.Default){const t=Vt();return null===t?ke(n,e):Yh(cs(),t,Ce(n),e)}function rn(n,e,t){const i=Vt();return Eo(i,Oa(),e)&&Vo(Ei(),kr(),i,n,e,i[11],t,!1),rn}function mM(n,e,t,i,r){const o=r?"class":"style";Zw(n,t,e.inputs[o],o,i)}function Pt(n,e,t,i){const r=Vt(),s=Ei(),o=20+n,a=r[11],l=r[o]=ty(a,e,Bn.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,i,r,s,o){const a=e.consts,c=Zd(e,n,2,r,Ia(a,s));return _y(e,t,c,Ia(a,o)),null!==c.attrs&&rg(c,c.attrs,!1),null!==c.mergedAttrs&&rg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];rl(c,!0);const u=c.mergedAttrs;null!==u&&xp(a,l,u);const h=c.classes;null!==h&&ay(a,l,h);const p=c.styles;null!==p&&Ew(a,l,p),64!=(64&c.flags)&&Yp(s,r,l,c),0===Bn.lFrame.elementDepthCount&&Is(l,r),Bn.lFrame.elementDepthCount++,Td(c)&&(hf(s,r,c),function(n,e,t){if(n_(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&my(r,c)}function Ft(){let n=cs();Hr()?ms():(n=n.parent,rl(n,!1));const e=n;Bn.lFrame.elementDepthCount--;const t=Ei();t.firstCreatePass&&(wp(t,n),n_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&mM(t,e,Vt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&mM(t,e,Vt(),e.stylesWithoutHost,!1)}function bi(n,e,t,i){Pt(n,e,t,i),Ft()}function yg(n){return!!n&&"function"==typeof n.then}function Dk(n){return!!n&&"function"==typeof n.subscribe}const hE=Dk;function Un(n,e,t,i){const r=Vt(),s=Ei(),o=cs();return Ik(s,r,r[11],o,n,e,!!t,i),Un}function fE(n,e){const t=cs(),i=Vt(),r=Ei();return Ik(r,i,Ay(f_(r.data),t,i),t,n,e,!1),fE}function Ik(n,e,t,i,r,s,o,a){const l=Td(i),u=n.firstCreatePass&&ig(n),h=e[8],p=Qw(e);let g=!0;if(3&i.type||a){const O=Zs(i,e),W=a?a(O):O,$=p.length,pe=a?Re=>a(xr(Re[i.index])):i.index;if(gr(t)){let Re=null;if(!a&&l&&(Re=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=s,Re.__ngLastListenerFn__=s,g=!1;else{s=_M(i,e,h,s,!1);const Ve=t.listen(W,r,s);p.push(s,Ve),u&&u.push(r,pe,$,$+1)}}else s=_M(i,e,h,s,!0),W.addEventListener(r,s,o),p.push(s),u&&u.push(r,pe,$,o)}else s=_M(i,e,h,s,!1);const m=i.outputs;let D;if(g&&null!==m&&(D=m[r])){const O=D.length;if(O)for(let W=0;W<O;W+=2){const We=e[D[W]][D[W+1]].subscribe(s),rt=p.length;p.push(s,We),u&&u.push(r,i.index,rt,-(rt+1))}}}function Ok(n,e,t,i){try{return!1!==t(i)}catch(r){return Ty(n,r),!1}}function _M(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?zs(n.index,e):e;0==(32&e[2])&&Ey(a);let l=Ok(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=Ok(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ci(n=1){return function(n){return(Bn.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Bn.lFrame.contextLView))[8]}(n)}function MY(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Cw(n,s,!0):dT(i,s))return r}else t=r}return t}function is(n){const e=Vt()[16][6];if(!e.projection){const i=e.projection=Oc(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?MY(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function si(n,e=0,t){const i=Vt(),r=Ei(),s=Zd(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),ms(),64!=(64&s.flags)&&function(n,e,t){oy(e[11],0,e,t,dw(n,t,e),gw(t.parent||e[6],t,e))}(r,i,s)}function pE(n,e,t){return yM(n,"",e,"",t),pE}function yM(n,e,t,i,r){const s=Vt(),o=ag(s,e,t,i);return o!==In&&Vo(Ei(),kr(),s,n,o,s[11],r,!1),yM}function Vk(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Rn(s):Kl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];OY(n[a],e)&&(l=!0,n[a+1]=i?cy(u):Ar(u)),a=i?Rn(u):Kl(u)}l&&(n[t+1]=i?Ar(s):cy(s))}function OY(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ds(n,e)>=0}const Rs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Uk(n){return n.substring(Rs.key,Rs.keyEnd)}function zk(n,e){const t=Rs.textEnd;return t===e?-1:(e=Rs.keyEnd=function(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Rs.key=e,t),bg(n,e,t))}function bg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function jy(n,e,t){return ec(n,e,t,!1),jy}function vi(n,e){return ec(n,e,null,!0),vi}function vl(n){!function(n,e,t,i){const r=Ei(),s=No(2);r.firstUpdatePass&&Yk(r,null,s,i);const o=Vt();if(t!==In&&Eo(o,s,t)){const a=r.data[Js()];if(Zk(a,i)&&!qk(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ut(l,t||"")),mM(r,a,o,t,i)}else!function(n,e,t,i,r,s,o,a){r===In&&(r=tr);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const p=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let D,m=null;u===h?(l+=2,c+=2,p!==g&&(m=h,D=g)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,D=g),null!==m&&Xk(n,e,t,i,m,D,o,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(n,e,t){if(null==t||""===t)return tr;const i=[],r=Gs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(ko,Gc,n,!0)}function Gc(n,e){for(let t=function(n){return function(n){Rs.key=0,Rs.keyEnd=0,Rs.value=0,Rs.valueEnd=0,Rs.textEnd=n.length}(n),zk(n,bg(n,0,Rs.textEnd))}(e);t>=0;t=zk(e,t))ko(n,Uk(e),!0)}function ec(n,e,t,i){const r=Vt(),s=Ei(),o=No(2);s.firstUpdatePass&&Yk(s,n,o,i),e!==In&&Eo(r,o,e)&&Xk(s,s.data[Js()],r,r[11],n,r[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ot(Gs(n)))),n}(e,t),i,o)}function qk(n,e){return e>=n.expandoStartIndex}function Yk(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Js()],o=qk(n,t);Zk(s,i)&&null===e&&!o&&(e=!1),e=function(n,e,t,i){const r=f_(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Vy(t=bM(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=bM(r,n,e,t,i),null===s){let l=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Kl(i))return n[Rn(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=bM(null,n,e,l[1],i),l=Vy(l,e.attrs,i),function(n,e,t,i){n[Rn(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Vy(i,n[s].hostAttrs,t);return Vy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Rn(o),l=Kl(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const h=t;u=h[1],(null===u||Ds(h,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const p=Rn(n[a+1]);n[i+1]=pl(p,a),0!==p&&(n[p+1]=gl(n[p+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=pl(a,0),0!==a&&(n[a+1]=gl(n[a+1],i)),a=i;else n[i+1]=pl(l,0),0===a?a=i:n[l+1]=gl(n[l+1],i),l=i;c&&(n[i+1]=Ar(n[i+1])),Vk(n,u,i,!0),Vk(n,u,i,!1),function(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ds(s,e)>=0&&(t[i+1]=cy(t[i+1]))}(e,u,n,i,s),o=pl(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function bM(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Vy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Vy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ko(n,o,!!t||e[++s]))}return void 0===n?null:n}function Xk(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];gE(function(n){return 1==(1&n)}(c)?Qk(l,e,t,r,Kl(c),o):void 0)||(gE(s)||function(n){return 2==(2&n)}(c)&&(s=Qk(l,null,t,r,a,o)),function(n,e,t,i,r){const s=gr(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:jo.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=jo.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Lh(Js(),t),r,s))}function Qk(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let p=t[r+1];p===In&&(p=h?tr:void 0);let g=h?M_(p,i):u===i?p:void 0;if(c&&!gE(g)&&(g=M_(l,i)),gE(g)&&(a=g,o))return a;const m=n[r+1];r=o?Rn(m):Kl(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=M_(l,i))}return a}function gE(n){return void 0!==n}function Zk(n,e){return 0!=(n.flags&(e?16:32))}function Oi(n,e=""){const t=Vt(),i=Ei(),r=n+20,s=i.firstCreatePass?Zd(i,r,1,e,null):i.data[r],o=t[r]=function(n,e){return gr(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Yp(i,t,o,s),rl(s,!1)}function da(n){return ha("",n,""),da}function ha(n,e,t){const i=Vt(),r=ag(i,n,e,t);return r!==In&&Xl(i,Js(),r),ha}function Lu(n,e,t){const i=Vt();return Eo(i,Oa(),e)&&Vo(Ei(),kr(),i,n,e,i[11],t,!0),Lu}function mE(n,e,t){const i=Vt();if(Eo(i,Oa(),e)){const s=Ei(),o=kr();Vo(s,o,i,n,e,Ay(f_(s.data),o,i),t,!0)}return mE}const gf=void 0;var dK=["en",[["a","p"],["AM","PM"],gf],[["AM","PM"],gf,gf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gf,"{1} 'at' {0}",gf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let vg={};function mL(n){return n in vg||(vg[n]=Qn.ng&&Qn.ng.common&&Qn.ng.common.locales&&Qn.ng.common.locales[n]),vg[n]}var cn=(()=>((cn=cn||{})[cn.LocaleId=0]="LocaleId",cn[cn.DayPeriodsFormat=1]="DayPeriodsFormat",cn[cn.DayPeriodsStandalone=2]="DayPeriodsStandalone",cn[cn.DaysFormat=3]="DaysFormat",cn[cn.DaysStandalone=4]="DaysStandalone",cn[cn.MonthsFormat=5]="MonthsFormat",cn[cn.MonthsStandalone=6]="MonthsStandalone",cn[cn.Eras=7]="Eras",cn[cn.FirstDayOfWeek=8]="FirstDayOfWeek",cn[cn.WeekendRange=9]="WeekendRange",cn[cn.DateFormat=10]="DateFormat",cn[cn.TimeFormat=11]="TimeFormat",cn[cn.DateTimeFormat=12]="DateTimeFormat",cn[cn.NumberSymbols=13]="NumberSymbols",cn[cn.NumberFormats=14]="NumberFormats",cn[cn.CurrencyCode=15]="CurrencyCode",cn[cn.CurrencySymbol=16]="CurrencySymbol",cn[cn.CurrencyName=17]="CurrencyName",cn[cn.Currencies=18]="Currencies",cn[cn.Directionality=19]="Directionality",cn[cn.PluralCase=20]="PluralCase",cn[cn.ExtraData=21]="ExtraData",cn))();const _E="en-US";let _L=_E;function wM(n){ie(n,"Expected localeId to be defined"),"string"==typeof n&&(_L=n.toLowerCase().replace(/_/g,"-"))}function xM(n,e,t,i,r){if(n=Ce(n),Array.isArray(n))for(let s=0;s<n.length;s++)xM(n[s],e,t,i,r);else{const s=Ei(),o=Vt();let a=Vc(n)?n:Ce(n.provide),l=tE(n);const c=cs(),u=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(Vc(n)||!n.multi){const g=new $h(l,r,Oe),m=AM(a,e,r?u:u+p,h);-1===m?(Dc(Hs(c,o),s,a),CM(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)):(t[m]=g,o[m]=g)}else{const g=AM(a,e,u+p,h),m=AM(a,e,u,u+p),D=g>=0&&t[g],O=m>=0&&t[m];if(r&&!O||!r&&!D){Dc(Hs(c,o),s,a);const W=function(n,e,t,i,r){const s=new $h(n,t,Oe);return s.multi=[],s.index=e,s.componentProviders=0,UL(s,r,i&&!t),s}(r?lX:aX,t.length,r,i,l);!r&&O&&(t[m].providerFactory=W),CM(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(W),o.push(W)}else CM(s,n,g>-1?g:m,UL(t[r?m:g],l,!r&&i));!r&&i&&O&&t[m].componentProviders++}}}function CM(n,e,t,i){const r=Vc(e);if(r||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const l=a.indexOf(t);-1===l?a.push(t,[i,o]):a[l+1].push(i,o)}else a.push(t,o)}}}function UL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function AM(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function aX(n,e,t,i){return TM(this.multi,[])}function lX(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Fd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),TM(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],TM(r,s);return s}function TM(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Hn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=Ei();if(i.firstCreatePass){const r=Ma(n);xM(t,i.data,i.blueprint,r,!0),xM(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class zL{}const GL="ngComponent";class dX{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${ot(n)}. Did you add it to @NgModule.entryComponents?`);return e[GL]=n,e}(e)}}class wl{}function EE(...n){}function Eg(n,e){return new En(Zs(n,e))}wl.NULL=new dX;const pX=function(){return Eg(cs(),Vt())};let En=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=pX,n})();function $L(n){return n instanceof En?n.nativeElement:n}class mf{}let DM=(()=>{class n{}return n.\u0275prov=et({token:n,providedIn:"root",factory:()=>null}),n})();class ju{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const WL=new ju("12.2.5");class qL{constructor(){}supports(e){return Ly(e)}create(e){return new vX(e)}}const bX=(n,e)=>e;class vX{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bX}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<KL(i,r,s)?t:i,a=KL(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){const g=p<s.length?s[p]:s[p]=0,m=g+p;u<=m&&m<c&&(s[p]=g+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ly(e))throw new Error(`Error trying to diff '${ot(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[sg()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new wX(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new YL),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class wX{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EX{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class YL{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new EX,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KL(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class XL{constructor(){}supports(e){return e instanceof Map||dM(e)}create(){return new SX}}class SX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||dM(e)))throw new Error(`Error trying to diff '${ot(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new xX(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class xX{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function QL(){return new Sg([new qL])}let Sg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||QL()),deps:[[n,new ul,new ns]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=et({token:n,providedIn:"root",factory:QL}),n})();function ZL(){return new xg([new XL])}let xg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ZL()),deps:[[n,new ul,new ns]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=et({token:n,providedIn:"root",factory:ZL}),n})();function SE(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(xr(s)),Zo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&SE(l[1],l,c,i)}const o=t.type;if(8&o)SE(n,e,t.child,i);else if(32&o){const a=Q_(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=bw(e,t);if(Array.isArray(a))i.push(...a);else{const l=of(e[16]);SE(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class $y{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return SE(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Zo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(ny(e,i),Gl(t,i))}this._attachedToViewContainer=!1}iy(this._lView[1],this._lView)}onDestroy(e){Vw(this._lView[1],this._lView,null,e)}markForCheck(){Ey(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){yp(!0);try{xy(n,e,t)}finally{yp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){Xd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class AX extends $y{constructor(e){super(e),this._view=e}detectChanges(){Xw(this._view)}checkNoChanges(){!function(n){yp(!0);try{Xw(n)}finally{yp(!1)}}(this._view)}get context(){return null}}const MX=function(n){return function(n,e,t){if(Ad(n)&&!t){const i=zs(n.index,e);return new $y(i,i)}return 47&n.type?new $y(e[16],e):null}(cs(),Vt(),16==(16&n))};let Dr=(()=>{class n{}return n.__NG_ELEMENT_ID__=MX,n})();const OX=[new XL],NX=new Sg([new qL]),PX=new xg(OX),kX=function(){return xE(cs(),Vt())};let zo=(()=>{class n{}return n.__NG_ELEMENT_ID__=kX,n})();const LX=zo,BX=class extends LX{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=uf(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),df(t,i,e),new $y(i)}};function xE(n,e){return 4&n.type?new BX(e,n,Eg(n,e)):null}class $c{}const UX=function(){return n3(cs(),Vt())};let Ns=(()=>{class n{}return n.__NG_ELEMENT_ID__=UX,n})();const HX=Ns,e3=class extends HX{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Eg(this._hostTNode,this._hostLView)}get injector(){return new ea(this._hostTNode,this._hostLView)}get parentInjector(){const e=qh(this._hostTNode,this._hostLView);if(vv(e)){const t=ol(e,this._hostLView),i=Rd(e);return new ea(t[1].data[i+8],t)}return new ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=t3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=i||this.parentInjector;if(!s&&null==e.ngModule&&o){const l=o.get($c,null);l&&(s=l)}const a=e.create(o,r,void 0,s);return this.insert(a.hostView,t),a}insert(e,t){const i=e._lView,r=i[1];if(function(n){return Zo(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=i[3],p=new e3(h,h[6],h[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Qh(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=Kp(s,o),l=i[11],c=qp(l,o[7]);return null!==c&&function(n,e,t,i,r,s){i[0]=r,i[6]=e,Xd(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),Qh(IM(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=t3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=ny(this._lContainer,t);i&&(Gl(IM(this._lContainer),t),iy(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=ny(this._lContainer,t);return i&&null!=Gl(IM(this._lContainer),t)?new $y(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function t3(n){return n[8]}function IM(n){return n[8]||(n[8]=[])}function n3(n,e){let t;const i=e[n.index];if(Zo(i))t=i;else{let r;if(8&n.type)r=xr(i);else{const s=e[11];r=s.createComment("");const o=Zs(n,e);fl(s,qp(s,o),r,function(n,e){return gr(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=Kw(i,e,r,n),ng(e,t)}return new e3(t,n,e)}const Mg={};class S3 extends wl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Vi(e);return new C3(t,this.ngModule)}}function x3(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const jQ=new Ht("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>iw});class C3 extends zL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(hT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return x3(this.componentDef.inputs)}get outputs(){return x3(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const s=n.get(t,Mg,r);return s!==Mg||i===Mg?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(mf,bu),a=s.get(DM,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function(n,e,t){if(gr(n))return n.selectRootElement(e,t===Yt.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):ty(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),h=this.componentDef.onPush?576:528,p=function(n,e){return{components:[],scheduler:n||iw,clean:qT,playerHandler:e||null,flags:0}}(),g=tg(0,null,null,1,0,null,null,null,null,null),m=uf(null,g,p,h,null,null,o,l,a,s);let D,O;Hh(m);try{const W=function(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Zd(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(rg(l,c,!0),null!==n&&(xp(r,n,c),null!==l.classes&&ay(r,n,l.classes),null!==l.styles&&Ew(r,n,l.styles)));const u=i.createRenderer(n,e),h=uf(t,eg(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(Dc(Hs(l,t),o,e.type),Yw(o,l),yy(l,t.length,1)),ng(t,h),t[20]=h}(u,this.componentDef,m,o,l);if(u)if(i)xp(l,u,["ng-version",WL.full]);else{const{attrs:$,classes:pe}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ka(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);$&&xp(l,u,$),pe&&pe.length>0&&ay(l,u,pe.join(" "))}if(O=c_(g,20),void 0!==t){const $=O.projection=[];for(let pe=0;pe<this.ngContentSelectors.length;pe++){const Re=t[pe];$.push(null!=Re?Array.from(Re):null)}}D=function(n,e,t,i,r){const s=t[1],o=function(n,e,t){const i=cs();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),by(n,i,e,Jd(n,e,1,null),t));const r=Fd(e,n,i.directiveStart,i);Is(r,e);const s=Zs(i,e);return s&&Is(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=cs();e.contentQueries(1,o,l.directiveStart)}const a=cs();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(yo(a.index),Ww(t[1],a,0,a.directiveStart,a.directiveEnd,e),qw(e,o)),o}(W,this.componentDef,m,p,[Gq]),df(g,m,null)}finally{fi()}return new zQ(this.componentType,D,Eg(O,m),m,O)}}class zQ extends class{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new AX(r),this.componentType=e}get injector(){return new ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Dg=new Map;class $Q extends $c{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new S3(this);const i=Oo(e),r=function(n){return n[MC]||null}(e);r&&wM(r),this._bootstrapComponents=hl(i.bootstrap),this._r3Injector=eE(e,t,[{provide:$c,useValue:this},{provide:wl,useValue:this.componentFactoryResolver}],ot(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Wn.THROW_IF_NOT_FOUND,i=Sn.Default){return e===Wn||e===$c||e===Pu?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class HM extends class{}{constructor(e){super(),this.moduleType=e,null!==Oo(e)&&function(n){const e=new Set;!function t(i){const r=Oo(i,!0),s=r.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${ot(e)} vs ${ot(e.name)}`)}(s,Dg.get(s),i),Dg.set(s,i));const o=hl(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new $Q(this.moduleType,e)}}function D3(n,e,t,i,r,s){const o=e+t;return Eo(n,o,r)?function(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function(n,e){const t=n[e];return t===In?void 0:t}(n,o+1)}function xl(n,e){const t=Ei();let i;const r=n+20;t.firstCreatePass?(i=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}throw new it("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Tc(i.type)),o=Ca(Oe);try{const a=Cp(!1),l=s();return Cp(a),function(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Vt(),r,l),l}finally{Ca(o)}}function Vu(n,e,t){const i=n+20,r=Vt(),s=function(n,e){return n[e]}(r,i);return function(n,e){Zl.isWrapped(e)&&(e=Zl.unwrap(e),n[Bn.lFrame.bindingIndex]=In);return e}(r,function(n,e){return n[1].data[e].pure}(r,i)?D3(r,function(){const n=Bn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,s.transform,t,s):s.transform(t))}function GM(n){return e=>{setTimeout(n,void 0,e)}}const sn=class extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const h=e;a=null===(r=h.next)||void 0===r?void 0:r.bind(h),l=null===(s=h.error)||void 0===s?void 0:s.bind(h),c=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(l=GM(l),a&&(a=GM(a)),c&&(c=GM(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof C&&e.add(u),u}};function oZ(){return this._results[sg()]()}class bf{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=sg(),i=bf.prototype;i[t]||(i[t]=oZ)}get changes(){return this._changes||(this._changes=new sn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=ta(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class $M{constructor(e){this.queryList=e,this.matches=null}clone(){return new $M(this.queryList)}setDirty(){this.queryList.setDirty()}}class WM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new WM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==B3(e,t).matches&&this.queries[t].setDirty()}}class P3{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class qM{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new qM(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class YM{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new YM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,cZ(t,s)),this.matchTNodeWithReadOption(e,t,Pd(t,e,s,!1,!1))}else i===zo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Pd(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===En||r===Ns||r===zo&&4&t.type)this.addMatch(t.index,-2);else{const s=Pd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function cZ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function dZ(n,e,t,i){return-1===t?function(n,e){return 11&n.type?Eg(n,e):4&n.type?xE(n,e):null}(e,n):-2===t?function(n,e,t){return t===En?Eg(e,n):t===zo?xE(e,n):t===Ns?n3(e,n):void 0}(n,e,i):Fd(n,n[1],t,e)}function F3(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:dZ(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function KM(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=F3(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=10;h<u.length;h++){const p=u[h];p[17]===p[3]&&KM(p[1],p,c,i)}if(null!==u[9]){const h=u[9];for(let p=0;p<h.length;p++){const g=h[p];KM(g[1],g,c,i)}}}}}return i}function ii(n){const e=Vt(),t=Ei(),i=mv();p_(i+1);const r=B3(t,i);if(n.dirty&&zl(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?KM(t,e,i,[]):F3(t,e,r,i);n.reset(s,$L),n.notifyOnChanges()}return!0}return!1}function ss(n,e,t){const i=Ei();i.firstCreatePass&&(L3(i,new P3(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),k3(i,Vt(),e)}function ri(){return function(n,e){return n[19].queries[e].queryList}(Vt(),mv())}function k3(n,e,t){const i=new bf(4==(4&t));Vw(n,e,i,i.destroy),null===e[19]&&(e[19]=new WM),e[19].queries.push(new $M(i))}function L3(n,e,t){null===n.queries&&(n.queries=new qM),n.queries.track(new YM(e,t))}function B3(n,e){return n.queries.getByIndex(e)}const vf=new Ht("Application Initializer");let Og=(()=>{class n{constructor(t){this.appInits=t,this.resolve=EE,this.reject=EE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(yg(s))t.push(s);else if(hE(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ke(vf,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const r0=new Ht("AppId"),zZ={provide:r0,useFactory:function(){return`${tD()}${tD()}${tD()}`},deps:[]};function tD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nB=new Ht("Platform Initializer"),Wc=new Ht("Platform ID"),RE=new Ht("appBootstrapListener");let NE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const Uu=new Ht("LocaleId"),iB=new Ht("DefaultCurrencyCode");class GZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const nD=function(n){return new HM(n)},$Z=nD,WZ=function(n){return Promise.resolve(nD(n))},rB=function(n){const e=nD(n),i=hl(Oo(n).declarations).reduce((r,s)=>{const o=Vi(s);return o&&r.push(new C3(o)),r},[]);return new GZ(e,i)},qZ=rB,YZ=function(n){return Promise.resolve(rB(n))};let wf=(()=>{class n{constructor(){this.compileModuleSync=$Z,this.compileModuleAsync=WZ,this.compileModuleAndAllComponentsSync=qZ,this.compileModuleAndAllComponentsAsync=YZ}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const sB=new Ht("compilerOptions"),XZ=(()=>Promise.resolve(0))();function iD(n){"undefined"==typeof Zone?XZ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sn(!1),this.onMicrotaskEmpty=new sn(!1),this.onStable=new sn(!1),this.onError=new sn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=Qn.requestAnimationFrame,e=Qn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Qn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,sD(n),n.isCheckStableRunning=!0,rD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),sD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return oB(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),aB(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return oB(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),aB(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,sD(n),rD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,ZZ,EE,EE);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const ZZ={};function rD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function oB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aB(n){n._nesting--,rD(n)}class tJ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sn,this.onMicrotaskEmpty=new sn,this.onStable=new sn,this.onError=new sn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let oD=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gn.assertNotInAngularZone(),iD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iD(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(ke(gn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),lB=(()=>{class n{constructor(){this._applications=new Map,aD.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return aD.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class nJ{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let aD=new nJ,cB=!0,uB=!1;function Ba(){return uB=!0,cB}let rc;const dB=new Ht("AllowMultipleToken");function hB(n,e,t=[]){const i=`Platform: ${e}`,r=new Ht(i);return(s=[])=>{let o=cD();if(!o||o.injector.get(dB,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:Fu,useValue:"platform"});!function(n){if(rc&&!rc.destroyed&&!rc.injector.get(dB,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rc=n.get(fB);const e=n.get(nB,null);e&&e.forEach(t=>t())}(Wn.create({providers:a,name:i}))}return function(n){const e=cD();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function cD(){return rc&&!rc.destroyed?rc:null}let fB=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new tJ:("zone.js"===n?void 0:n)||new gn({enableLongStackTrace:Ba(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:gn,useValue:a}];return a.run(()=>{const c=Wn.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),h=u.injector.get(oa,null);if(!h)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const p=a.onError.subscribe({next:g=>{h.handleError(g)}});u.onDestroy(()=>{uD(this._modules,u),p.unsubscribe()})}),function(n,e,t){try{const i=t();return yg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(h,a,()=>{const p=u.injector.get(Og);return p.runInitializers(),p.donePromise.then(()=>(wM(u.injector.get(Uu,_E)||_E),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=pB({},i);return function(n,e,t){const i=new HM(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(ih);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${ot(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ke(Wn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();function pB(n,e){return Array.isArray(e)?e.reduce(pB,n):Object.assign(Object.assign({},n),e)}let ih=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new P(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new P(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{gn.assertNotInAngularZone(),iD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{gn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=kn(a,l.pipe(Es()))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof zL?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get($c),a=r.create(Wn.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(oD,null),u=c&&a.injector.get(lB);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),uD(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;uD(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(RE,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(ke(gn),ke(Wn),ke(oa),ke(wl),ke(Og))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();function uD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const DJ=hB(null,"core",[{provide:Wc,useValue:"unknown"},{provide:fB,deps:[Wn]},{provide:lB,deps:[]},{provide:NE,deps:[]}]),PJ=[{provide:ih,useClass:ih,deps:[gn,Wn,oa,wl,Og]},{provide:jQ,deps:[gn],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Og,useClass:Og,deps:[[new ns,vf]]},{provide:wf,useClass:wf,deps:[]},zZ,{provide:Sg,useFactory:function(){return NX},deps:[]},{provide:xg,useFactory:function(){return PX},deps:[]},{provide:Uu,useFactory:function(n){return wM(n=n||"undefined"!=typeof $localize&&$localize.locale||_E),n},deps:[[new zd(Uu),new ns,new ul]]},{provide:iB,useValue:"USD"}];let kJ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ke(ih))},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({providers:PJ}),n})(),GE=null;function qc(){return GE}const pn=new Ht("DocumentToken");let xf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({factory:Fee,token:n,providedIn:"platform"}),n})();function Fee(){return ke(zB)}let zB=(()=>{class n extends xf{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qc().getBaseHref(this._doc)}onPopState(t){const i=qc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=qc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){HB()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){HB()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({factory:Lee,token:n,providedIn:"platform"}),n})();function HB(){return!!window.history.pushState}function Lee(){return new zB(ke(pn))}function CD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function GB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Hu(n){return n&&"?"!==n[0]?"?"+n:n}let Cf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({factory:Bee,token:n,providedIn:"root"}),n})();function Bee(n){const e=ke(pn).location;return new $B(ke(xf),e&&e.origin||"")}const AD=new Ht("appBaseHref");let $B=(()=>{class n extends Cf{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Hu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Hu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Hu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ke(xf),ke(AD,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),Pg=(()=>{class n{constructor(t,i){this._subject=new sn,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=GB(WB(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Hu(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,WB(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hu(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hu(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.\u0275fac=function(t){return new(t||n)(ke(Cf),ke(xf))},n.normalizeQueryParams=Hu,n.joinWithSlash=CD,n.stripTrailingSlash=GB,n.\u0275prov=et({factory:Vee,token:n,providedIn:"root"}),n})();function Vee(){return new Pg(ke(Cf),ke(xf))}function WB(n){return n.replace(/\/index.html$/,"")}var _s=(()=>((_s=_s||{})[_s.Zero=0]="Zero",_s[_s.One=1]="One",_s[_s.Two=2]="Two",_s[_s.Few=3]="Few",_s[_s.Many=4]="Many",_s[_s.Other=5]="Other",_s))();const Yee=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=mL(e);if(t)return t;const i=e.split("-")[0];if(t=mL(i),t)return t;if("en"===i)return dK;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[cn.PluralCase]};class eS{}let Ste=(()=>{class n extends eS{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(Yee(i||this.locale)(t)){case _s.Zero:return"zero";case _s.One:return"one";case _s.Two:return"two";case _s.Few:return"few";case _s.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(ke(Uu))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class Cte{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Af=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new Cte(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new nj(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new nj(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Oe(Ns),Oe(zo),Oe(Sg))},n.\u0275dir=Rt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class nj{constructor(e,t){this.record=e,this.view=t}}let lc=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Tte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ij("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ij("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Oe(Ns),Oe(zo))},n.\u0275dir=Rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Tte{constructor(){this.$implicit=null,this.ngIf=null}}function ij(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ot(e)}'.`)}class Ote{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Rte{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const Nte=new Rte,Pte=new Ote;let h0=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(yg(t))return Nte;if(Dk(t))return Pte;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${ot(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(Oe(Dr,16))},n.\u0275pipe=Vs({name:"async",type:n,pure:!1}),n})(),qr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({providers:[{provide:eS,useClass:Ste}]}),n})();const uj="browser";function Tf(n){return n===uj}class jD extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){GE||(GE=n)}(new jD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(f0=f0||document.querySelector("base"),f0?f0.getAttribute("href"):null);return null==t?null:function(n){nS=nS||document.createElement("a"),nS.setAttribute("href",n);const e=nS.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){f0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let nS,f0=null;const pj=new Ht("TRANSITION_ID"),rne=[{provide:vf,useFactory:function(n,e,t){return()=>{t.get(Og).donePromise.then(()=>{const i=qc(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[pj,pn,Wn],multi:!0}];class VD{static init(){!function(n){aD=n}(new VD)}addToWindow(e){Qn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Qn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qn.getAllAngularRootElements=()=>e.getAllRootElements(),Qn.frameworkStabilizers||(Qn.frameworkStabilizers=[]),Qn.frameworkStabilizers.push(i=>{const r=Qn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?qc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let sne=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const p0=new Ht("EventManagerPlugins");let rS=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ke(p0),ke(gn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class UD{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=qc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let mj=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),g0=(()=>{class n extends mj{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(_j),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_j))}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();function _j(n){qc().remove(n)}const zD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},HD=/%COMP%/g;function sS(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?sS(n,r,t):(r=r.replace(HD,n),t.push(r))}return t}function vj(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let oS=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new GD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Yt.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new vne(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Yt.ShadowDom:return new wne(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=sS(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ke(rS),ke(g0),ke(r0))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class GD{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(zD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=zD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=zD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(jo.DashCase|jo.Important)?e.style.setProperty(t,i,r&jo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&jo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vj(i)):this.eventManager.addEventListener(e,t,vj(i))}}class vne extends GD{constructor(e,t,i,r){super(e),this.component=i;const s=sS(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(HD,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(HD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class wne extends GD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=sS(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ene=(()=>{class n extends UD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const Sj=["alt","control","meta","shift"],Dne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xj={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ine={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let One=(()=>{class n extends UD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(Sj.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&xj.hasOwnProperty(e)&&(e=xj[e]))}return Dne[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Sj.forEach(s=>{s!=r&&Ine[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),Mf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({factory:function(){return ke(WD)},token:n,providedIn:"root"}),n})(),WD=(()=>{class n extends Mf{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case ni.NONE:return i;case ni.HTML:return ia(i,"HTML")?Gs(i):z_(this._doc,String(i)).toString();case ni.STYLE:return ia(i,"Style")?Gs(i):i;case ni.SCRIPT:if(ia(i,"Script"))return Gs(i);throw new Error("unsafe value used in a script context");case ni.URL:return Lc(i),ia(i,"URL")?Gs(i):Bo(String(i));case ni.RESOURCE_URL:if(ia(i,"ResourceURL"))return Gs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function(n){return new P_(n)}(t)}bypassSecurityTrustStyle(t){return function(n){return new F_(n)}(t)}bypassSecurityTrustScript(t){return function(n){return new Vp(n)}(t)}bypassSecurityTrustUrl(t){return function(n){return new $d(n)}(t)}bypassSecurityTrustResourceUrl(t){return function(n){return new Fn(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({factory:function(){return function(n){return new WD(n.get(pn))}(ke(Pu))},token:n,providedIn:"root"}),n})();const jne=hB(DJ,"browser",[{provide:Wc,useValue:uj},{provide:nB,useValue:function(){jD.makeCurrent(),VD.init()},multi:!0},{provide:pn,useFactory:function(){return function(n){Ki=n}(document),document},deps:[]}]),Vne=[[],{provide:Fu,useValue:"root"},{provide:oa,useFactory:function(){return new oa},deps:[]},{provide:p0,useClass:Ene,multi:!0,deps:[pn,gn,Wc]},{provide:p0,useClass:One,multi:!0,deps:[pn]},[],{provide:oS,useClass:oS,deps:[rS,g0,r0]},{provide:mf,useExisting:oS},{provide:mj,useExisting:g0},{provide:g0,useClass:g0,deps:[pn]},{provide:oD,useClass:oD,deps:[gn]},{provide:rS,useClass:rS,deps:[p0,gn]},{provide:class{},useClass:sne,deps:[]},[]];let qD=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:r0,useValue:t.appId},{provide:pj,useExisting:r0},rne]}}}return n.\u0275fac=function(t){return new(t||n)(ke(n,12))},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({providers:Vne,imports:[qr,kJ]}),n})();"undefined"!=typeof window&&window;class Yne extends C{constructor(e,t){super()}schedule(e,t=0){return this}}class aS extends Yne{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let Aj=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class uc extends Aj{constructor(e,t=Aj.now){super(e,()=>uc.delegate&&uc.delegate!==this?uc.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return uc.delegate&&uc.delegate!==this?uc.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Qne=new class extends uc{}(class extends aS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),Yc=new P(n=>n.complete());function lS(n){return n?function(n){return new P(e=>n.schedule(()=>e.complete()))}(n):Yc}function fn(...n){let e=n[n.length-1];return Ie(e)?(n.pop(),Be(n,e)):On(n)}function Fg(n,e){return new P(e?t=>e.schedule(Jne,0,{error:n,subscriber:t}):t=>t.error(n))}function Jne({error:n,subscriber:e}){e.error(n)}class pa{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return fn(this.value);case"E":return Fg(this.error);case"C":return lS()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new pa("N",e):pa.undefinedValueNotification}static createError(e){return new pa("E",void 0,e)}static createComplete(){return pa.completeNotification}}pa.completeNotification=new pa("C"),pa.undefinedValueNotification=new pa("N",void 0);class cS extends v{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(cS.dispatch,this.delay,new tie(e,this.destination)))}_next(e){this.scheduleMessage(pa.createNext(e))}_error(e){this.scheduleMessage(pa.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(pa.createComplete()),this.unsubscribe()}}class tie{constructor(e,t){this.notification=e,this.destination=t}}class kg extends se{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new nie(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new G;if(this.isStopped||this.hasError?o=C.EMPTY:(this.observers.push(e),o=new ne(this,e)),r&&e.add(e=new cS(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Qne).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class nie{constructor(e,t){this.time=e,this.value=t}}function Ir(n,e){return"function"==typeof e?t=>t.pipe(Ir((i,r)=>qe(n(i,r)).pipe(ye((s,o)=>e(i,s,r,o))))):t=>t.lift(new iie(n))}class iie{constructor(e){this.project=e}call(e,t){return t.subscribe(new rie(e,this.project))}}class rie extends Ae{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new _t(this),r=this.destination;r.add(i),this.innerSubscription=k(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const uS={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if("undefined"==typeof window)return uS.schedule(n,0);if(void 0===window.requestAnimationFrame)return uS.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let KD;function pie(n,e,t){let i=t;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function(n,e){if(!KD){const t=Element.prototype;KD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&KD.call(n,e)}(n,r)||(i=s,0))),i}class mie{constructor(e,t){this.componentFactory=t.get(wl).resolveComponentFactory(e)}create(e){return new _ie(this.componentFactory,e)}}class _ie{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new kg(1),this.events=this.eventEmitters.pipe(Ir(i=>kn(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(gn),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=uS.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?function(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Wn.create({providers:[],parent:this.injector}),i=function(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],l=pie(a,e,r);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Dr),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(ih).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(ye(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=uS.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new o_(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class yie extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const vie={initialConfig:{},parse:{},rename:{}};class wie{constructor(e,t){this.configState=e,this.storedChanges={},this.options=Object.assign(Object.assign({},vie),t)}addChanges(e){this.storedChanges=Object.assign(Object.assign({},this.storedChanges),e)}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s=i.snapshot,o=Object.assign(Object.assign(Object.assign({},r),s),t);for(const[a,l]of Object.entries(e))this.processChange(a,l,o);i.setConfig(o)}processChange(e,t,i){var r,s;const{options:{parse:o,rename:a}}=this,l=null!==(r=a[e])&&void 0!==r?r:e,c=t.currentValue,u=null!==(s=o[e])&&void 0!==s?s:o[l];if(null==c)delete i[l];else if(u)try{i[l]=u(c)}catch(h){console.warn(`Failed to parse ${e} = ${c}`,h.message)}else i[l]=c}}let Eie=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new wie(this.configState,this.options)}ngOnInit(){var t;this._init=setTimeout(()=>this.initialize(),null!==(t=this.options.initialDelay)&&void 0!==t?t:0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return n.\u0275fac=function(t){!function(){throw new Error("invalid")}()},n.\u0275dir=Rt({type:n,features:[Ui]}),n})();var XD;const m0={production:!0,disableDbWorker:!0,acceptableViewerDomains:["https://portal.hubmapconsortium.org","https://portal.test.hubmapconsortium.org"],dbOptions:{ccfOwlUrl:"https://ccf-api.hubmapconsortium.org/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:null!==(XD=localStorage.getItem("HUBMAP_TOKEN"))&&void 0!==XD?XD:""},googleAnalyticsToken:"portal.hubmapconsortium.org"===window.location.hostname?"G-1WRJHN9FM6":"G-J9HWV9QPJ4"};function rr(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function Mj(n,e){return function(t,i){e(t,i,n)}}function dc(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function Fi(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function Oj(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function ZD(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Oj()}const Rj="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",hS=ZD();class Aie{constructor(e,t,i="sessionStorage"){this.storage=function(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(e){return null}}(i),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function JD(n,e,t,i=600){const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}const Nj={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function Pj(n){return"string"==typeof n?Nj[n.toUpperCase()]||Nj.WHITE:n}function fS(n,e){if(!n)throw new Error(e||"Assertion failed")}const hc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},_0=hc.window||hc.self||hc.global,Fj=hc.process||{};function Lg(){let n;if(hS&&_0.performance)n=_0.performance.now();else if(Fj.hrtime){const e=Fj.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}console;const Bg={debug:hS&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Nie={enabled:!0,level:0};function Tl(){}const kj={},Lj={once:!0};function Pie(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}let eI=(()=>{class n{constructor({id:t}={id:""}){this.id=t,this.VERSION=Rj,this._startTs=Lg(),this._deltaTs=Lg(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new Aie("__probe-".concat(this.id,"__"),Nie),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,e=["constructor"]){const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Lg()-this._startTs).toPrecision(10))}getDelta(){return Number((Lg()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}assert(t,i){fS(t,i)}warn(t){return this._getLogFunction(0,t,Bg.warn,arguments,Lj)}error(t){return this._getLogFunction(0,t,Bg.error,arguments)}deprecated(t,i){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(t,i){return this.error("`".concat(t,"` has been removed. Use `").concat(i,"` instead"))}probe(t,i){return this._getLogFunction(t,i,Bg.log,arguments,{time:!0,once:!0})}log(t,i){return this._getLogFunction(t,i,Bg.debug,arguments)}info(t,i){return this._getLogFunction(t,i,console.info,arguments)}once(t,i){return this._getLogFunction(t,i,Bg.debug||Bg.info,arguments,Lj)}table(t,i,r){return i?this._getLogFunction(t,i,console.table||Tl,r&&[r],{tag:Pie(i)}):Tl}image({logLevel:t,priority:i,image:r,message:s="",scale:o=1}){return this._shouldLog(t||i)?hS?function({image:n,message:e="",scale:t=1}){if("string"==typeof n){const r=new Image;return r.onload=()=>{const s=JD(r,e,t);console.log(...s)},r.src=n,Tl}const i=n.nodeName||"";if("img"===i.toLowerCase())return console.log(...JD(n,e,t)),Tl;if("canvas"===i.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...JD(r,e,t)),r.src=n.toDataURL(),Tl}return Tl}({image:r,message:s,scale:o}):function({image:n,message:e="",scale:t=1}){let i=null;try{i=Je(307)}catch(r){}return i?()=>i(n,{fit:"box",width:"".concat(Math.round(80*t),"%")}).then(r=>console.log(r)):Tl}({image:r,message:s,scale:o}):Tl}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(t){return this._storage.config[t]}set(t,i){this._storage.updateConfiguration({[t]:i})}time(t,i){return this._getLogFunction(t,i,console.time?console.time:console.info)}timeEnd(t,i){return this._getLogFunction(t,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,i){return this._getLogFunction(t,i,console.timeStamp||Tl)}group(t,i,r={collapsed:!1}){r=jj({logLevel:t,message:i,opts:r});const{collapsed:s}=r;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,i,r={}){return this.group(t,i,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Tl)}withGroup(t,i,r){this.group(t,i)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Bj(t)}_getLogFunction(t,i,r,s=[],o){if(this._shouldLog(t)){o=jj({logLevel:t,message:i,args:s,opts:o}),fS(r=r||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Lg();const a=o.tag||o.message;if(o.once){if(kj[a])return Tl;kj[a]=Lg()}return i=function(n,e,t){if("string"==typeof e){const i=t.time?function(n,e=8){const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function(n,e,t){return!hS&&"string"==typeof n&&(e&&(e=Pj(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=Pj(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),r.bind(console,i,...o.args)}return Tl}}return n.VERSION=Rj,n})();function Bj(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return fS(Number.isFinite(e)&&e>=0),e}function jj(n){const{logLevel:e,message:t}=n;n.logLevel=Bj(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(n.args=i,typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return fS("string"===r||"object"===r),Object.assign(n,n.opts)}const Ri=new eI({id:"deck"}),ji={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ji,"IDENTITY",{get:()=>Ri.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const Kc={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Vj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},mn=new eI({id:"luma.gl"});function $o(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function pS(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function Si(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function gS(n){return $o(pS(n),"Invalid WebGLRenderingContext"),n}function Co(n){return $o(Si(n),"Requires WebGL2"),n}const y0={};const b0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(b0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Df=function(e){const t=this;this.gl=e,function(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(y0[i]=!0)}while(0!==i);for(i in y0)if(y0[i])return delete y0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const p=h.attribs[s];return p.buffer=t.currentArrayBuffer,p.size=o,p.type=a,p.normalized=l,p.stride=c,p.offset=u,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{globalThis.console&&globalThis.console.log&&globalThis.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Df.prototype.VERTEX_ARRAY_BINDING_OES=34229,Df.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new b0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Df.prototype.createVertexArrayOES=function(){const e=new b0(this);return this.vertexArrayObjects.push(e),e},Df.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Df.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof b0&&e.hasBeenBound&&e.ext===this)},Df.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function(n,e){y0[n]=!0,void 0!==e&&function(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=r?r.attribs[l]:null;if((!r||c.enabled!==u.enabled)&&(c.enabled?i.enableVertexAttribArray.call(t,l):i.disableVertexAttribArray.call(t,l)),c.enabled){let h=!1;(!r||c.buffer!==u.buffer)&&(o!==c.buffer&&(i.bindBuffer.call(t,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&i.vertexAttribPointer.call(t,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const Uj="OES_element_index",zj="WEBGL_draw_buffers",Hj="WEBGL_debug_renderer_info",br=n=>Si(n)?void 0:0,tre={3074:n=>Si(n)?void 0:36064,35723:n=>Si(n)?void 0:4352,35977:br,32937:br,36795:(n,e)=>{const t=Si(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(Hj);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(Hj);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:br,35071:br,37447:br,36063:(n,e)=>{if(!Si(n)){const t=n.getExtension(zj);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:br,35374:br,35377:br,34852:n=>{if(!Si(n)){const e=n.getExtension(zj);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(Uj)?2147483647:65535,33001:n=>n.getExtension(Uj)?16777216:65535,33e3:n=>16777216,37157:br,35373:br,35657:br,36183:br,37137:br,34045:br,35978:br,35979:br,35968:br,35376:br,35375:br,35659:br,37154:br,35371:br,35658:br,35076:br,35077:br,35380:br},Gj="ANGLE_instanced_arrays",$j={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{$o(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Gj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){$o(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{$o(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{$o(!1)},deleteQuery:()=>{$o(!1)},beginQuery:()=>{$o(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},tI={readBuffer:(n,e,t)=>{Si(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function(n,e){return{webgl2:Si(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!Si(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>{if(!Si(n))switch(r){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,i,r)},getTexParameter(n,e,t,i){switch(i){case 34046:const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function(n,e,t){const i=tre[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function fre(n,{extension:e,target:t,target2:i}){const r=$j[e];$o(r);const{meta:s={}}=r,{suffix:o=""}=s,a=n.getExtension(e);for(const l of Object.keys(r)){const c=`${l}${o}`;let u=null;"meta"===l||"function"==typeof n[l]||(a&&"function"==typeof a[c]?u=(...h)=>a[c](...h):"function"==typeof r[l]&&(u=r[l].bind(t))),u&&(t[l]=u,i[l]=u)}}globalThis.polyfillContext=function(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Df(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&fre(n,{extension:t,target:n.luma,target2:n})}(n,$j),function(n,{target:e,target2:t}){Object.keys(tI).forEach(i=>{if("function"==typeof tI[i]){const r=n[i]?n[i].bind(n):()=>{},s=tI[i].bind(null,n,r);e[i]=s,t[i]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const nI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},oh=(n,e,t)=>e?n.enable(t):n.disable(t),Wj=(n,e,t)=>n.hint(t,e),ja=(n,e,t)=>n.pixelStorei(t,e);function v0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const mre={3042:oh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:oh,2885:(n,e)=>n.cullFace(e),2929:oh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:oh,35723:Wj,36006:(n,e)=>{const t=Si(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:Wj,2849:(n,e)=>n.lineWidth(e),32823:oh,32824:"polygonOffset",10752:"polygonOffset",35977:oh,32938:"sampleCoverage",32939:"sampleCoverage",3089:oh,3088:(n,e)=>n.scissor(...e),2960:oh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:ja,3317:ja,37440:ja,37441:ja,37443:ja,3330:ja,3332:ja,3331:ja,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:ja,32878:ja,3316:ja,3315:ja,32877:ja,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=v0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=v0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=v0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=v0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=v0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function os(n,e,t){return void 0!==e[n]?e[n]:t[n]}const _re={blendEquation:(n,e,t)=>n.blendEquationSeparate(os(32777,e,t),os(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(os(32969,e,t),os(32968,e,t),os(32971,e,t),os(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(os(32824,e,t),os(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(os(32938,e,t),os(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,os(2962,e,t),os(2967,e,t),os(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,os(34816,e,t),os(36003,e,t),os(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,os(2964,e,t),os(2965,e,t),os(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,os(34817,e,t),os(34818,e,t),os(34819,e,t))},qj={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},Xc=(n,e)=>n.isEnabled(e),Yj={3042:Xc,2884:Xc,2929:Xc,3024:Xc,32823:Xc,32926:Xc,32928:Xc,3089:Xc,2960:Xc,35977:Xc};function Kj(n){for(const e in n)return!1;return!0}function yre(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function Xj(n,e){const t=n[e].bind(n);n[e]=function(...r){const s=r[0];return s in n.state.cache&&n.state.enable?n.state.cache[s]:t(...r)},Object.defineProperty(n[e],"name",{value:`${e}-from-cache`,configurable:!1})}function bre(n,e,t){const i=n[e].bind(n);n[e]=function(...s){const{valueChanged:o,oldValue:a}=t(n.state._updateCache,...s);return o&&i(...s),a},Object.defineProperty(n[e],"name",{value:`${e}-to-cache`,configurable:!1})}class wre{constructor(e,{copyState:t=!1,log:i=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(n,e){if("number"==typeof(e=e||nI)){const r=e,s=Yj[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=Yj[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},nI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){$o(this.stateStack.length>0),$u(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){$o(void 0!==s);const o=e[s],a=this.cache[s];yre(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function Qj(n,e={}){const{enable:t=!0,copyState:i}=e;if($o(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new wre(n,{copyState:i}),function(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const s in qj)bre(n,s,qj[s]);Xj(n,"getParameter"),Xj(n,"isEnabled")}return n.state.enable=t,n}function Zj(n){$o(n.state),n.state.pop()}function $u(n,e){if($o(pS(n),"setParameters requires a WebGL context"),Kj(e))return;const t={};for(const r in e){const s=Number(r),o=mre[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)_re[r](n,e,i)}function fc(n,e,t){if(Kj(e))return t(n);const{nocatch:i=!0}=e;let r;if(function(n){n.state||Qj(n,{copyState:!1}),n.state.push()}(n),$u(n,e),i)r=t(n),Zj(n);else try{r=t(n)}finally{Zj(n)}return r}function mS(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent;return!!(e&&e.indexOf("Electron")>=0)}()}function jg(n){const{luma:e}=n;if(n.canvas&&e){const{clientWidth:t}=e.canvasSizeInfo;return t?n.drawingBufferWidth/t:1}return 1}function iI(n,e,t=!0){return function(n,e,t,i,r){const s=Jj(n[0],e,t);let o=eV(n[1],e,i,r),a=Jj(n[0]+1,e,t);const l=a===t-1?a:a-1;let c;return a=eV(n[1]+1,e,i,r),r?(a=0===a?a:a+1,c=o,o=a):c=a===i-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}(e,jg(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function Jj(n,e,t){return Math.min(Math.round(n*e),t-1)}function eV(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const rI=mS(),Mre=rI&&"undefined"!=typeof document,tV={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function nV(n={}){$o(rI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},tV,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function({canvas:n,width:e=800,height:t=600,onError:i}){let r;return"string"==typeof n?(Mre&&"complete"===document.readyState||i(`createGLContext called on canvas '${n}' before page was loaded`),r=document.getElementById(n)):n?r=n:(r=document.createElement("canvas"),r.id="lumagl-canvas",r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(t)?`${t}px`:"100%",document.body.insertBefore(r,document.body.firstChild)),r}({canvas:s,width:e,height:t,onError:i});return r=function(n,e){const{onError:t}=e;let i=null;const r=l=>i=l.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${i||"Unknown error"}`)}(o,n),r?(r=sI(r,n),function(n){const e=Si(n)?"WebGL2":"WebGL1",t=function(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);mn.info(1,`${e}${n.debug?" debug":""} context ${t?`(${t.vendor},${t.renderer})`:""}`)()}(r),r):null}function sI(n,e={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},tV,e);const{manageState:t,debug:i}=e;return t&&Qj(n,{copyState:!1,log:(...r)=>mn.log(1,...r)()}),rI&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),mn.level=Math.max(mn.level,1)):mn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function iV(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class rV{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=iV(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(iV()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class oI{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof rV?e:new rV(t,i)),this.stats[t]}}const w0="8.5.12",If=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new oI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==w0)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${w0}`);function tn(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function aI(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return tn(void 0!==i,`Accessing undefined constant GL.${e}`),i}function ah(n,e){e=Number(e);for(const t in n)if(n[t]===e)return`GL.${t}`;return String(e)}globalThis.luma||(mS()&&mn.log(1,`luma.gl ${w0} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=globalThis.luma||{VERSION:w0,version:w0,log:mn,stats:If,globals:{modules:{},nodeIO:{}}}),globalThis;const lI={};function ga(n="id"){return lI[n]=lI[n]||1,`${n}-${lI[n]++}`}function sV(n){return tn("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function Vg(n){let e=!0;for(const t in n){e=!1;break}return e}function oV(n,e,t,i){const r=`See luma.gl ${t} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw mn.removed(`Calling removed method ${e}.${o}: `,r)(),new Error(o)})})}const Ug="Resource subclass must define virtual methods";class Wu{get[Symbol.toStringTag](){return"Resource"}constructor(e,t={}){gS(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||ga(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){tn(e=aI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Si(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension)){const a=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1;return s?l:a}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=Si(this.gl),o={},a=t||Object.keys(r);for(const l of a){const c=r[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const h=i?ah(this.gl,l):l;o[h]=this.getParameter(l,e),i&&"GLenum"===c.type&&(o[h]=ah(this.gl,o[h]))}}return o}setParameter(e,t){tn(e=aI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Si(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=aI(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return oV(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(Ug)}_deleteHandle(){throw new Error(Ug)}_bindHandle(e){throw new Error(Ug)}_getOptsFromHandle(){throw new Error(Ug)}_getParameter(e,t){throw new Error(Ug)}_setParameter(e,t){throw new Error(Ug)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=If.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];If.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this[Symbol.toStringTag]){const i=If.get("Memory Usage");i.get("GPU Memory").addCount(e),i.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this[Symbol.toStringTag]){const t=If.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function cI(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function E0(n,{clamped:e=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Vre({data:n,width:e,height:t}){const i=Math.round(e/2),r=Math.round(t/2),s=new Uint8Array(i*r*4);for(let o=0;o<r;o++)for(let a=0;a<i;a++)for(let l=0;l<4;l++)s[4*(o*i+a)+l]=n[4*(2*o*e+2*a)+l];return{data:s,width:i,height:r}}function uI(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)a in e&&mn.removed(`${n}.${a}`,i[a]?`${n}.${i[a]}`:"N/A")();for(const a in r)a in e&&mn.deprecated(`${n}.${a}`,`${n}.${r[a]}`)();let o=null;for(const a in s)if(a in e){const l=s[a];mn.deprecated(`${n}.${a}`,`${n}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const Ure={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},zre={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ma{static getBytesPerElement(e){return E0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return tn(e.size),E0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new ma(...[Ure,...e])}constructor(...e){e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ma.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ma.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=uI("Accessor",e,zre)).type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const lV={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Hre={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:lV},Gre={removedProps:lV};class hr extends Wu{get[Symbol.toStringTag](){return"Buffer"}constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/ma.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/ma.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=uI("Buffer",e,Hre),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=uI("Buffer",e,Gre))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ma(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;tn(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(Co(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:i=0,size:r}){const{gl:s}=this;return Co(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,t,i,r),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}={}){Co(this.gl);const s=E0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,r||o),c=a+l);const u=Math.min(o,l);return tn((r=r||u)<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}={}){return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(tn(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,i=e.byteLength+t){tn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=cI(e);return tn(s),this.setAccessor(new ma(this.accessor,{type:s})),this}_setByteLength(e,t=this.usage){tn(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/E0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ma(this.accessor,{type:cI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return mn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return mn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return mn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return mn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ma(this.accessor,e),this}}const dI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},cV={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},uV={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},qre=[9729,9728],dV=globalThis.WebGLBuffer||function(){};class Of extends Wu{get[Symbol.toStringTag](){return"Texture"}static isSupported(e,t={}){const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function(n,e){const t=dI[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=Si(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function(n,e){const t=dI[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=ga("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then($=>this.initialize(Object.assign({},e,{pixels:$,data:$}))),this;const i="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u}=e;t||(t=r);let{width:h,height:p,dataFormat:g,type:m,compressed:D=!1,mipmaps:O=!0}=e;const{depth:W=0}=e;return({width:h,height:p,compressed:D,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:D,data:t,width:h,height:p})),this.width=h,this.height=p,this.depth=W,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),O&&this._isNPOT()&&(mn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),O=!1,this._updateForNPOT(l)),this.mipmaps=O,this.setImageData({data:t,width:h,height:p,depth:W,format:s,type:m,dataFormat:g,border:o,mipmaps:O,parameters:c,compressed:D}),O&&this.generateMipmap(),this.setParameters(l),a&&(this.data=t),i&&(this._video={video:t,parameters:l,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:i=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(e={}){return this._isNPOT()?(mn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),fc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:h=this.width,height:p=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;c||(c=i),({type:u,dataFormat:g,compressed:m,width:h,height:p}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:c,width:h,height:p}));const{gl:D}=this;D.bindTexture(this.target,this.handle);let O=null;({data:c,dataType:O}=this._getDataType({data:c,compressed:m}));let W,$=0;return fc(this.gl,l,()=>{switch(O){case"null":D.texImage2D(t,r,s,h,p,o,g,u,c);break;case"typed-array":D.texImage2D(t,r,s,h,p,o,g,u,c,a);break;case"buffer":W=Co(D),W.bindBuffer(35052,c.handle||c),W.texImage2D(t,r,s,h,p,o,g,u,a),W.bindBuffer(35052,null);break;case"browser-object":Si(D)?D.texImage2D(t,r,s,h,p,o,g,u,c):D.texImage2D(t,r,s,g,u,c);break;case"compressed":for(const[pe,Re]of c.entries())D.compressedTexImage2D(t,pe,Re.format,Re.width,Re.height,o,Re.data),$+=Re.levelSize;break;default:tn(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===O?$:c&&c.byteLength?c.byteLength:this.width*this.height*(cV[this.dataFormat]||4)*(uV[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:i=null,x:r=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:p=!1,offset:g=0,border:m=this.border,parameters:D={}}){if(({type:u,dataFormat:h,compressed:p,width:o,height:a}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:p,data:i,width:o,height:a})),tn(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=t),i&&i.data){const O=i;i=O.data,o=O.shape[0],a=O.shape[1]}i instanceof hr&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),fc(this.gl,D,()=>{if(p)this.gl.compressedTexSubImage2D(e,l,r,s,o,a,c,i);else if(null===i)this.gl.texSubImage2D(e,l,r,s,o,a,h,u,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,l,r,s,o,a,h,u,i,g);else if(i instanceof dV){const O=Co(this.gl);O.bindBuffer(35052,i),O.texSubImage2D(e,l,r,s,o,a,h,u,g),O.bindBuffer(35052,null)}else Si(this.gl)?Co(this.gl).texSubImage2D(e,l,r,s,o,a,h,u,i):this.gl.texSubImage2D(e,l,r,s,h,u,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return mn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof hr?{data:e.handle,dataType:"buffer"}:e instanceof dV?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:l}=e;const c=dI[t];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:l,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},tn(r,"Could not deduced texture size"),tn(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),tn(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:tn(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Si(this.gl)||!this.width||!this.height||sV(this.width)&&sV(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===qre.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Yre(n,e){return tn("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error(`Could not load image ${n}.`)),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class _a extends Of{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Of.isSupported(e,t)}constructor(e,t={}){gS(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Yre(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Rf="EXT_color_buffer_float",hV={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Rf,bpp:2},33327:{gl2:Rf,bpp:4},34842:{gl2:Rf,bpp:8},33326:{gl2:Rf,bpp:4},33328:{gl2:Rf,bpp:8},34836:{gl2:Rf,bpp:16},35898:{gl2:Rf,bpp:4}};class zg extends Wu{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e,{format:t}={format:null}){return!t||function(n,e,t){const i=t[e];if(!i)return!1;const r=Si(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,hV)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:i=1,samples:r=0}){return tn(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&Si(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,t,i):this.gl.renderbufferStorage(36161,e,t,i),this.format=e,this.width=t,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*hV[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const _V="clear: bad arguments";function fI(n,{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}={}){const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),tn(0!==o,_V),fc(n,s,()=>{n.clear(o)})}function yV(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function oi(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){yV(s,i,r,o,a,"next",l)}function a(l){yV(s,i,r,o,a,"throw",l)}o(void 0)})}}const pI=[34069,34070,34071,34072,34073,34074];let tse=(()=>{class n extends Of{get[Symbol.toStringTag](){return"TextureCube"}constructor(t,i={}){gS(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(t={}){const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage({face:t,data:i,x:r=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:t,data:i,x:r,y:s,mipmapLevel:o})}setCubeMapImageData({width:t,height:i,pixels:r,data:s,border:o=0,format:a=6408,type:l=5121}){var c=this;return oi(function*(){const{gl:u}=c,h=r||s,p=yield Promise.all(pI.map(g=>{const m=h[g];return Promise.all(Array.isArray(m)?m:[m])}));c.bind(),pI.forEach((g,m)=>{p[m].length>1&&!1!==c.opts.mipmaps&&mn.warn(`${c.id} has mipmap and multiple LODs.`)(),p[m].forEach((D,O)=>{t&&i?u.texImage2D(g,O,a,t,i,o,a,l,D):u.texImage2D(g,O,a,a,l,D)})}),c.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:u=5121}=t,{gl:h}=this,p=o||a;return this.bind(),p instanceof Promise?p.then(g=>this.setImageDataForFace(Object.assign({},t,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,c,r,s,l,c,u,p):h.texImage2D(i,0,c,c,u,p),this}}return n.FACES=pI,n})();class nse extends Of{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Si(e)}constructor(e,t={}){Co(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:i,height:r,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:u,parameters:h={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),fc(this.gl,h,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,u),u instanceof hr&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,c))}),this._trackAllocatedMemory(u&&u.byteLength?u.byteLength:this.width*this.height*this.depth*(cV[this.dataFormat]||4)*(uV[this.type]||1),"Texture"),this.loaded=!0,this}}function bV(n,e){tn(n instanceof _a||n instanceof tse||n instanceof nse);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e))}function ise(n,e){const{gl:t,width:i,height:r,id:s}=n;return new Fs(t,Object.assign({},e,{id:`framebuffer-for-${s}`,width:i,height:r,attachments:{36064:n}}))}function _S(n,e={}){const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=S0(n);tn(u);const{gl:p,handle:g,attachments:m}=u;a=a||u.width,l=l||u.height,36064===s&&null===g&&(s=1028),tn(m[s]),c=c||m[s].type,o=function(n,e,t,i,r){if(n)return n;return new(E0(e=e||5121,{clamped:!1}))(i*r*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return tn(!1),0}}(t))}(o,c,r,a,l),c=c||cI(o);const D=p.bindFramebuffer(36160,g);return p.readPixels(t,i,a,l,r,c,o),p.bindFramebuffer(36160,D||null),h&&u.delete(),o}function gI(n,{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}={}){let i=_S(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=Vre({data:i,width:r,height:s}));!function({data:n,width:e,height:t,bytesPerPixel:i=4,temp:r}){const s=e*i;r=r||new Uint8Array(s);for(let o=0;o<t/2;++o){const a=o*s,l=(t-o-1)*s;r.set(n.subarray(a,a+s)),n.copyWithin(a,l,l+s),n.set(r,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),l=a.createImageData(r,s);return l.data.set(i),a.putImageData(l,0,0),o.toDataURL()}function S0(n){return n instanceof Fs?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:ise(n),deleteFramebuffer:!0}}const vV="Multiple render targets not supported";class Fs extends Wu{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e,t={}){const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Fs(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Co(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Co(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:i=null,color:r=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:c}){if(tn(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,i)for(const u in i){const h=i[u];(Array.isArray(h)?h[0]:h).resize({width:e,height:t})}else i=this._createDefaultAttachments(r,s,o,e,t);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:r,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),i&&this._setDrawBuffers(i),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:t,height:i}=e;if(null===this.handle)return tn(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&mn.log(2,`Resizing framebuffer ${this.id} to ${t}x${i}`)();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e,{clearAttachments:t=!1,resizeAttachments:i=!0}={}){const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){tn(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=r[a];let c=l;if(c)if(c instanceof zg)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,h=0,p=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:p})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});else this._unattach(a);i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function(n){return(Fs.STATUS||{})[n]||`Framebuffer error ${n}`}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(e={}){const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&fI(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,l)=>{!function(n,{framebuffer:e=null,buffer:t=6144,drawBuffer:i=0,value:r=[0,0,0,0]}={}){Co(n),fc(n,{framebuffer:e},()=>{switch(t){case 6144:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:tn(!1,_V)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return mn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return mn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return mn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return mn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return mn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return mn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:i=0,width:r,height:s}){const o=Co(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===t&&0===i&&void 0===r&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,i,r,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ah(this.gl,r)),r}getAttachmentParameters(e=36064,t,i=this.constructor.ATTACHMENT_PARAMETERS||[]){const r={};for(const s of i)r[t?ah(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(e=!0){const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?ah(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return"undefined"!=typeof window&&window.open(gI(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>mn.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const i=gI(this,{targetMaxHeight:100});return mn.image({logLevel:e,message:t,image:i},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new _a(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new zg(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new zg(this.gl,{id:`${this.id}-depth`,format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&tn(!1),o}_unattach(e){const t=this.attachments[e];!t||(t instanceof zg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:i}=this;i.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:i,level:r}){const{gl:s}=this;switch(s.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:Co(s).framebufferTextureLayer(36160,e,t.target,r,i);break;case 34067:const a=function(n){return n<34069?n+34069:n}(i);s.framebufferTexture2D(36160,e,a,t.handle,r);break;case 3553:s.framebufferTexture2D(36160,e,3553,t.handle,r);break;default:tn(!1,"Illegal texture type")}s.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=function(n){return Si(n)?n:null}(this.gl);t?t.readBuffer(e):tn(36064===e||1029===e,vV),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=Co(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):tn(1===e.length&&(36064===e[0]||1029===e[0]),vV)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in wV)void 0===n.luma.caps[e]&&(n.luma.caps[e]=SV(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Fs.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const wV={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const e=new _a(n,{format:6408,type:5126,dataFormat:6408}),t=new Fs(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function mI(n,e){return EV(n,e)}function EV(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>SV(n,t))}function SV(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function(n,e){const t=wV[e];let i;tn(t,e);const r=Si(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&Boolean(n.getExtension(s))}else"string"==typeof r?i=Boolean(n.getExtension(r)):"boolean"==typeof r?i=r:tn(!1);return i}(n,e)),n.luma.caps[e]||mn.log(2,`Feature: ${e} not supported`)(),n.luma.caps[e]}class _I{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return at(at({},this.source.getAccessor()),this.opts)}}const x0=new class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,u=t*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h;l&&(h=l*i+s);const p=this._allocate(c,u,a,h);return e&&o?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.props.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return i&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.props.poolSize)&&t.splice(s,0,i),t.length>this.props.poolSize&&t.shift()}},gse=1/Math.PI*180,mse=1/180*Math.PI,Or={};function yse(n,{precision:e=Or.precision||4}={}){return n=function(n){return Math.round(n/Or.EPSILON)*Or.EPSILON}(n),`${parseFloat(n.toPrecision(e))}`}function lh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function qu(n,e,t){if(lh(n)){t=t||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let i=0;i<t.length&&i<n.length;++i)t[i]=e(n[i],i,t);return t}return e(n)}function xV(n){return function(n,e){return qu(n,t=>t*mse,void 0)}(n)}function vse(n){return function(n,e){return qu(n,t=>t*gse,void 0)}(n)}function Va(n,e,t){return qu(n,i=>Math.max(e,Math.min(t,i)))}function yS(n,e,t){return lh(n)?n.map((i,r)=>yS(i,e[r],t)):t*e+(1-t)*n}function C0(n,e,t){const i=Or.EPSILON;t&&(Or.EPSILON=t);try{if(n===e)return!0;if(lh(n)&&lh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!C0(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Or.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Or.EPSILON=i}}function Yu(n,e){if(!n)throw new Error(`math.gl assertion ${e}`)}Or.EPSILON=1e-12,Or.debug=!1,Or.precision=4,Or.printTypes=!1,Or.printDegrees=!1,Or.printRowMajor=!0;class bS extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Yu(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:lh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Or)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+yse(this[i],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!C0(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Or.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function sr(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function vS(n,e,t=""){if(Or.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error(`math.gl: ${t} some fields set to invalid numbers'`);return n}const CV={};function yI(n,e){CV[n]||(CV[n]=!0,console.warn(`${n} has been removed in version ${e}, see upgrade guide for more information`))}class Ase extends bS{get ELEMENTS(){return Yu(!1),0}copy(e){return Yu(!1),this}get x(){return this[0]}set x(e){this[0]=sr(e)}get y(){return this[1]}set y(e){this[1]=sr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return sr(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return sr(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Yu(e>=0&&e<this.ELEMENTS,"index is out of range"),sr(this[e])}setComponent(e,t){return Yu(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Qc=1e-6,ya="undefined"!=typeof Float32Array?Float32Array:Array;function AV(){var n=new ya(3);return ya!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function TV(n,e,t){var i=new ya(3);return i[0]=n,i[1]=e,i[2]=t,i}function MV(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function A0(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function bI(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}function vI(n,e,t){var i=e[0],r=e[1],s=e[2];return n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8],n}function DV(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],l=e[1],c=e[2],u=r*c-s*l,h=s*a-i*c,p=i*l-r*a,g=r*p-s*h,m=s*u-i*p,D=i*h-r*u,O=2*t[3];return h*=O,p*=O,m*=2,D*=2,n[0]=a+(u*=O)+(g*=2),n[1]=l+h+m,n[2]=c+p+D,n}function IV(n,e,t,i){var r=[],s=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2],n}function OV(n,e,t,i){var r=[],s=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2],n}function RV(n,e,t,i){var r=[],s=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2],n}function NV(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&MV(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function PV(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}AV();const wI=[0,0,0],FV={};class Ao extends Ase{static get ZERO(){return FV.ZERO=FV.ZERO||Object.freeze(new Ao(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&lh(e)?this.copy(e):(Or.debug&&(sr(e),sr(t),sr(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Or.debug&&(sr(e.x),sr(e.y),sr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=sr(e)}angle(e){return NV(this,e)}cross(e){return A0(this,this,e),this.check()}rotateX({radians:e,origin:t=wI}){return IV(this,this,t,e),this.check()}rotateY({radians:e,origin:t=wI}){return OV(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=wI}){return RV(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return bI(this,this,e),this.check()}transformAsVector(e){return PV(this,this,e),this.check()}transformByMatrix3(e){return vI(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return DV(this,this,e),this.check()}}const kV=new Ao;function Hg(n,e,t,i){kV.set(n,e,t);const r=kV.len();return{distance:i/r,normal:new Ao(-n/r,-e/r,-t/r)}}function jse(n){return n-Math.fround(n)}let M0;function EI(n,{size:e=1,startIndex:t=0,endIndex:i}){Number.isFinite(i)||(i=n.length);const r=(i-t)/e;M0=x0.allocate(M0,r,{type:Float32Array,size:2*e});let s=t,o=0;for(;s<i;){for(let a=0;a<e;a++){const l=n[s++];M0[o+a]=l,M0[o+a+e]=jse(l)}o+=2*e}return M0.subarray(0,r*e*2)}function wS(n){return n.stride||n.size*n.bytesPerElement}function LV(n,e){e.offset&&Ri.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=wS(n),s=("vertexOffset"in e?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return Cn(at({},e),{offset:s,stride:t})}function pc(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const BV=[],jV=[];function ES(n,e=0,t=1/0){let i=BV;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(jV.length=n.length,i=jV):i=BV,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function VV(n){return n&&n[Symbol.asyncIterator]}function SI(n,e=(()=>!0)){return Array.isArray(n)?UV(n,e,[]):e(n)?[n]:[]}function UV(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?UV(r,e,t):e(r)&&t.push(r)}return t}function Hse({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const Gse=[],SS=[[0,1/0]];function xI({source:n,target:e,start:t=0,end:i,size:r,getData:s}){const o=n.length,a=(i=i||e.length)-t;if(o>a)return void e.set(n.subarray(0,a),t);if(e.set(n,t),!s)return;let l=o;for(;l<a;){const c=s(l,n);for(let u=0;u<r;u++)e[t+l]=c[u]||0,l++}}const qse={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function zV(n,e){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",at(at(at({},qse[n.type]),e),n)):null}function HV(n,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function GV(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function $V(n){n.push(n.shift())}function CI(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function WV({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,l=t.byteOffset,c=t.startIndices,u=r&&c,h=CI(t,e),p=t.state.constant;if(!u&&i>=h)return;const g=p?t.value:t.getBuffer().getData({srcByteOffset:l});if(t.settings.normalized&&!p){const W=s;s=($,pe)=>t._normalizeConstant(W($,pe))}const m=p?(W,$)=>s(g,$):(W,$)=>s(g.subarray(W,W+a),$),D=n.getData({length:i}),O=new Float32Array(h);(function({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return xI({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const l=i&&((u,h)=>i(u+a,h)),c=Math.min(r.length,s.length);for(let u=1;u<c;u++){const h=r[u]*t,p=s[u]*t;xI({source:n.subarray(o,h),target:e,start:a,end:p,size:t,getData:l}),o=h,a=p}a<e.length&&xI({source:[],target:e,start:a,size:t,getData:l})})({source:D,target:O,sourceStartIndices:r,targetStartIndices:c,size:a,getData:m}),n.byteLength<O.byteLength+l&&n.reallocate(O.byteLength+l),n.subData({data:O,offset:l})}class AI extends class{constructor(e,t){this.gl=e,this.id=t.id,this.size=t.size;const i=t.logicalType||t.type,r=5130===i;let{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),t.defaultValue=s;let o=i;r?o=5126:!o&&t.isIndexed?o=e&&mI(e,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),t.logicalType=i,t.type=o;let a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.shaderAttributes={},this.doublePrecision=r,r&&!1===t.fp64&&(a=Float32Array),t.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new hr(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*wS(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),x0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function(n,e){const t=LV(n,e);return{high:t,low:Cn(at({},t),{offset:t.offset+4*n.size})}}(this.getAccessor(),t||{});return i[e]=new _I(this,s.high),i["".concat(e,"64Low")]=r?new _I(this,s.low):new Float32Array(this.size),i}if(t){const i=LV(this.getAccessor(),t);return{[e]:new _I(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:t}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof hr&&(e={buffer:e});const i=at(at({},this.settings),e);if(t.bufferAccessor=i,e.constant){let r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),t.constant&&this._areValuesEqual(r,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){const r=e.buffer;t.externalBuffer=r,t.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;i.type=e.type||r.accessor.type,i.bytesPerElement=r.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=wS(i)}else if(e.value){this._checkExternalBuffer(e);let r=e.value;t.externalBuffer=null,t.constant=!1,this.value=r,i.bytesPerElement=r.BYTES_PER_ELEMENT,i.stride=wS(i);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&r instanceof Float64Array&&(r=EI(r,i));const a=r.byteLength+o+2*i.stride;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:r,offset:o}),i.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?EI(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:i}=this,r=i.allocatedValue,s=x0.allocate(r,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?EI(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const i=this.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Ri.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}{constructor(e,t={}){super(e,t);const{transition:i=!1,noAlloc:r=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=t;Object.assign(this.settings,{transition:i,noAlloc:r,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:SS,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return zV(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function(n,e){if(n===SS||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=SS}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Gse}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate({numInstances:e,copy:t.updateRanges!==SS}),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(r,this,{data:t,startRow:c,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else for(const[c,u]of s){const h=Number.isFinite(c)?this.getVertexOffset(c):0,p=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;return e?!r.noAlloc&&(i.binaryValue===e?(this.clearNeedsUpdate(),!0):(i.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),r.transform||t!==this.startIndices?(pc(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function(n,{size:e,stride:t,offset:i,startIndices:r,nested:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:e,l=i?i/o:0,c=Math.floor((n.length-l)/a);return(u,{index:h,target:p})=>{if(!r){const O=h*a+l;for(let W=0;W<e;W++)p[W]=n[O+W];return p}const g=r[h],m=r[h+1]||c;let D;if(s){D=new Array(m-g);for(let O=g;O<m;O++){const W=O*a+l;p=new Array(e);for(let $=0;$<e;$++)p[$]=n[W+$];D[O-g]=p}}else if(a===e)D=n.subarray(g*e+l,m*e+l);else{D=new n.constructor((m-g)*e);let O=0;for(let W=g;W<m;W++){const $=W*a+l;for(let pe=0;pe<e;pe++)D[O++]=n[$+pe]}}return D}}(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:e.size&&e.size!==this.size}),!1):(this.clearNeedsUpdate(),this.setData(e),!0))):(i.binaryValue=null,i.binaryAccessor=null,!1)}getVertexOffset(e){const{startIndices:t}=this;return(t?t[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:p,transform:g}=a,m=l.binaryAccessor||("function"==typeof p?p:s[p]);pc("function"==typeof m,'accessor "'.concat(p,'" is not a function'));let D=e.getVertexOffset(i);const{iterable:O,objectInfo:W}=ES(t,i,r);for(const $ of O){W.index++;let pe=m($,W);if(g&&(pe=g.call(this,pe)),h){const Re=(W.index<h.length-1?h[W.index+1]:o)-h[W.index];if(pe&&Array.isArray(pe[0])){let Ve=D;for(const We of pe)e._normalizeValue(We,c,Ve),Ve+=u}else pe&&pe.length>u?c.set(pe,D):(e._normalizeValue(pe,W.target,0),Hse({target:c,source:W.target,start:D,count:Re}));D+=Re*u}else e._normalizeValue(pe,c,D),D+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let TI={};function To(n){Ri.level>0&&TI[n]&&TI[n].call(...arguments)}function Ua(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const qV="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Xse=`#version 300 es\n${qV}`;function YV(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function KV(n={}){const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?Xse:e>300?`#version ${e}\n${qV}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,e){switch(e){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return Ua(!1),null}}(t,i);return e>=300?`#version ${e} ${300===e?"es":""}\nin ${i} ${t};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${s};\n}`:`varying ${i} ${t};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class XV extends Wu{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Si(e)}constructor(e,t={}){Co(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Vg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,mn.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof hr?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,i=0,r){const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,i,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class eoe{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof hr?i:i.buffer:null}getData(e={}){const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&tn(Si(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const s=this.feedbackMap[r];r in t&&(i[s]=r)}Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:l,accessor:c}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:l,accessor:c})}}return i}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,{model:t}){const{program:i}=t;e.transformFeedback=new XV(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],tn(i[s]instanceof hr)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new hr(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function QV(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const D0="vs",ioe={[D0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},xS="__LUMA_INJECT_DECLARATIONS__",ZV=/void\s+main\s*\([^)]*\)\s*\{\n?/,JV=/}\n?[^{}]*$/,DI=[];function eU(n,e,t,i=!1){const r=e===D0;for(const s in t){const o=t[s];o.sort((l,c)=>l.order-c.order),DI.length=o.length;for(let l=0,c=o.length;l<c;++l)DI[l]=o[l].injection;const a=`${DI.join("\n")}\n`;switch(s){case"vs:#decl":r&&(n=n.replace(xS,a));break;case"vs:#main-start":r&&(n=n.replace(ZV,l=>l+a));break;case"vs:#main-end":r&&(n=n.replace(JV,l=>a+l));break;case"fs:#decl":r||(n=n.replace(xS,a));break;case"fs:#main-start":r||(n=n.replace(ZV,l=>l+a));break;case"fs:#main-end":r||(n=n.replace(JV,l=>a+l));break;default:n=n.replace(s,l=>l+a)}}return n=n.replace(xS,""),i&&(n=n.replace(/\}\s*$/,s=>s+ioe[e])),n}function II(n){const e={};return Ua(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?`${e[i]}\n${t[i]}`:t[i]}),e}const roe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},CS="transform_uSize_",tU="transform_position";const hoe={10241:9728,10240:9728,10242:33071,10243:33071};class poe{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function({sourceTextureMap:n,targetTextureVarying:e,targetTexture:t}){const i={};let r,s;e&&(({width:r,height:s}=t),i[`${CS}${e}`]=[r,s]);for(const o in n)({width:r,height:s}=n[o]),i[`${CS}${o}`]=[r,s];return i}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:c,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],i=_S(t);if(!e)return i;const r=i.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ua(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let l=0;l<i.length;l+=4)for(let c=0;c<s;c++)o[a++]=i[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof _a)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new hr(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new Fs(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(hoe)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=bV(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function({vs:n,sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}){let s=Object.keys(e).length,o=null;const a={};let l=n,c={};if(s>0||t){const u=l.split("\n"),h=u.slice();if(u.forEach((p,g,m)=>{if(s>0){const D=function(n,e){const t={},i=function(n){return YV(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=function(n){const e=`transform_uSampler_${n}`,t=`${CS}${n}`;return{samplerName:e,sizeName:t,uniformDeclerations:`  uniform sampler2D ${e};\n  uniform vec2 ${t};`}}(s),h=`  ${r} ${s} = transform_getInput(${a}, ${l}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ua(!1),null}}(r)};\n`;return t[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:t}}return null}(p,e);if(D){const{updatedLine:O,inject:W}=D;h[g]=O,c=II([c,W]),Object.assign(a,D.samplerTextureMap),s--}}t&&!o&&(o=function(n,e){const t=YV(n,["varying","out"]);return t&&t.name===e?t.type:null}(p,t))}),t){tn(i);const p=`${CS}${t}`;c=II([c,{"vs:#decl":`uniform vec2 ${p};\n`,"vs:#main-start":`     vec2 ${tU} = transform_getPos(${p});\n     gl_Position = vec4(${tU}, 0, 1.);\n`}])}l=h.join("\n")}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),c=II([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:r,fs:e._fs||KV({version:QV(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[roe].concat(e.modules||[]):e.modules,uniforms:s,inject:c}}}const OI={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function moe(n){let e=nU(n);return"object"===e?n?"type"in n?Object.assign({},n,OI[n.type]):"value"in n?(e=nU(n.value),Object.assign({type:e},n,OI[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},OI[e])}function nU(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class RI{constructor({name:e,vs:t,fs:i,dependencies:r=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}){Ua("string"==typeof e),this.name=e,this.vs=t||u,this.fs=i||h,this.getModuleUniforms=o,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];const r=t.slice(0,2);"string"==typeof i&&(i={order:0,injection:i}),e[r][t]=i}return e}(c),s&&(this.uniforms=function(n){const e={};for(const t in n){const r=moe(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Ua(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}_defaultGetUniforms(e={}){const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ua(s.validate(e[r],s),`${this.name}: invalid ${r}`),t[r]=e[r]):t[r]=s.value}return t}}function voe(n){return function(n){const e={},t={};return NI({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(rU(n))}function NI({modules:n,level:e,moduleMap:t,moduleDepth:i}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const r of n)t[r.name]=r,(void 0===i[r.name]||i[r.name]<e)&&(i[r.name]=e);for(const r of n)r.dependencies&&NI({modules:r.dependencies,level:e+1,moduleMap:t,moduleDepth:i})}function rU(n,e){return n.map(t=>(t instanceof RI||(Ua("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${t}' and use it directly.`),Ua(t.name,"shader module has no name"),(t=new RI(t)).dependencies=rU(t.dependencies)),t))}const PI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Nf={};function Moe(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(PI).forEach(n=>{Nf[n]=n});const FI={};function sU(n,e,t={}){const i=PI[e];if(Ua(i,e),!function(n={}){const e="undefined"!=typeof window&&window.navigator||{},t=n.userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in FI)return FI[e];const o=`#extension GL_${i[0]} : ${t.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const l=n.getShaderParameter(a,35713);return n.deleteShader(a),FI[e]=l,l}function AS(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function(n,e){const t=PI[e];Ua(t,e);const i=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&t[1]||t[0],r="string"==typeof i?Boolean(n.getExtension(i)):i;return Ua(!1===r||!0===r),r}(n,t))}function Gg(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const oU=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Roe=[...oU,[Gg("attribute"),"in $1"],[Gg("varying"),"out $1"]],Noe=[...oU,[Gg("varying"),"in $1"]],aU=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Poe=[...aU,[Gg("in"),"attribute $1"],[Gg("out"),"varying $1"]],Foe=[...aU,[Gg("in"),"varying $1"]],kI="gl_FragColor",LI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,koe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function TS(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Voe=`\n\n${xS}\n\n`,lU={[D0]:"vertex",fs:"fragment"};function cU(n,{id:e,source:t,type:i,modules:r,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:u}){Ua("string"==typeof t,"shader source must be a string");const h=i===D0,p=t.split("\n");let g=100,m="",D=t;0===p[0].indexOf("#version ")?(g=300,m=p[0],D=p.slice(1).join("\n")):m=`#version ${g}`;const O={};r.forEach(We=>{Object.assign(O,We.getDefines())}),Object.assign(O,s);let W=c?`${m}\n${function({id:n,source:e,type:t}){return n&&"string"==typeof n&&-1===e.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${lU[t]}\n\n`:""}({id:e,source:t,type:i})}\n${function({type:n}){return`\n#define SHADER_TYPE_${lU[n].toUpperCase()}\n`}({type:i})}\n${function(n){switch(function(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:Moe(t,i),vendor:t,renderer:i,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n)}\n${function(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return AS(n,Nf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),AS(n,Nf.GLSL_DERIVATIVES)&&sU(n,Nf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),AS(n,Nf.GLSL_FRAG_DATA)&&sU(n,Nf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),AS(n,Nf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n)}\n${function(n={}){let e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+=`#define ${i.toUpperCase()} ${n[i]}\n`)}return 0===e&&(t+="\n"),t}(O)}\n${h?"":"precision highp float;\n\n"}\n`:`${m}\n`;const $=function(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(o),pe={},Re={},Ve={};for(const We in a){const rt="string"==typeof a[We]?{injection:a[We],order:0}:a[We],wt=We.match(/^(v|f)s:(#)?([\w-]+)$/);if(wt){const At=wt[3];wt[2]?"decl"===At?Re[We]=[rt]:Ve[We]=[rt]:pe[We]=[rt]}else Ve[We]=[rt]}for(const We of r){u&&We.checkDeprecations(D,u),W+=We.getModuleSource(i,g);const wt=We.injections[i];for(const vt in wt){const At=vt.match(/^(v|f)s:#([\w-]+)$/);if(At){const $t="decl"===At[2]?Re:Ve;$t[vt]=$t[vt]||[],$t[vt].push(wt[vt])}else pe[vt]=pe[vt]||[],pe[vt].push(wt[vt])}}return W+=Voe,W=eU(W,i,Re),W+=function(n,e){let t="";for(const i in n){const r=n[i];if(t+=`void ${r.signature} {\n`,r.header&&(t+=`  ${r.header}`),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+=`  ${o.injection}\n`}r.footer&&(t+=`  ${r.footer}`),t+="}\n"}return t}($[i],pe),W+=D,W=eU(W,i,Ve),W=function(n,e,t){switch(e){case 300:return t?TS(n,Roe):function(n){const e=(n=TS(n,Noe)).match(LI);if(e){const t=e[1];n=n.replace(new RegExp(`\\b${kI}\\b`,"g"),t)}else{const t="fragmentColor";n=n.replace(koe,i=>`out vec4 ${t};\n${i}`).replace(new RegExp(`\\b${kI}\\b`,"g"),t)}return n}(n);case 100:return t?TS(n,Poe):function(n){const e=(n=TS(n,Foe)).match(LI);if(e){const t=e[1];n=n.replace(LI,"").replace(new RegExp(`\\b${t}\\b`,"g"),kI)}return n}(n);default:throw new Error(`unknown GLSL version ${e}`)}}(W,l?100:g,h),W}function Hoe(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const Koe={5126:Rr.bind(null,"uniform1fv",za,1,Mo),35664:Rr.bind(null,"uniform2fv",za,2,Mo),35665:Rr.bind(null,"uniform3fv",za,3,Mo),35666:Rr.bind(null,"uniform4fv",za,4,Mo),5124:Rr.bind(null,"uniform1iv",ch,1,Mo),35667:Rr.bind(null,"uniform2iv",ch,2,Mo),35668:Rr.bind(null,"uniform3iv",ch,3,Mo),35669:Rr.bind(null,"uniform4iv",ch,4,Mo),35670:Rr.bind(null,"uniform1iv",ch,1,Mo),35671:Rr.bind(null,"uniform2iv",ch,2,Mo),35672:Rr.bind(null,"uniform3iv",ch,3,Mo),35673:Rr.bind(null,"uniform4iv",ch,4,Mo),35674:Rr.bind(null,"uniformMatrix2fv",za,4,Ku),35675:Rr.bind(null,"uniformMatrix3fv",za,9,Ku),35676:Rr.bind(null,"uniformMatrix4fv",za,16,Ku),35678:ro,35680:ro,5125:Rr.bind(null,"uniform1uiv",MS,1,Mo),36294:Rr.bind(null,"uniform2uiv",MS,2,Mo),36295:Rr.bind(null,"uniform3uiv",MS,3,Mo),36296:Rr.bind(null,"uniform4uiv",MS,4,Mo),35685:Rr.bind(null,"uniformMatrix2x3fv",za,6,Ku),35686:Rr.bind(null,"uniformMatrix2x4fv",za,8,Ku),35687:Rr.bind(null,"uniformMatrix3x2fv",za,6,Ku),35688:Rr.bind(null,"uniformMatrix3x4fv",za,12,Ku),35689:Rr.bind(null,"uniformMatrix4x2fv",za,8,Ku),35690:Rr.bind(null,"uniformMatrix4x3fv",za,12,Ku),35678:ro,35680:ro,35679:ro,35682:ro,36289:ro,36292:ro,36293:ro,36298:ro,36299:ro,36300:ro,36303:ro,36306:ro,36307:ro,36308:ro,36311:ro},Xoe={},Qoe={},Zoe={},uU=[0];function BI(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(uU[0]=n,n=uU);const r=n.length;if(r%e&&mn.warn(`Uniform size should be multiples of ${e}`,n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function za(n,e){return BI(n,e,Float32Array,Xoe)}function ch(n,e){return BI(n,e,Int32Array,Qoe)}function MS(n,e){return BI(n,e,Uint32Array,Zoe)}function dU(n,e,t){const i=Koe[t.type];if(!i)throw new Error(`Unknown GLSL uniform type ${t.type}`);return i().bind(null,n,e)}function Joe(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function tae(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Of||n instanceof zg)||n instanceof Fs&&Boolean(n.texture)}function nae(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function ro(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Rr(n,e,t,i){let r=null,s=null;return(o,a,l)=>{const c=e(l,t),u=c.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{tn(s===u,"Uniform length cannot change.");for(let p=0;p<u;++p)if(c[p]!==r[p]){h=!0;break}}return h&&(i(o,n,a,c),r.set(c)),h}}function Mo(n,e,t,i){n[e](t,i)}function Ku(n,e,t,i){n[e](t,!1,i)}function DS(n,e="unnamed"){const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function fU(n,e){let t="";for(let i=0;i<e.length;i++){const r=e[i];if((n[i+3]||n[i+2]||n[i+1])&&(t+=`${r}\n`,n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0;t+=pU(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,l)}}return t}function pU(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return`${t}${n}`}class I0 extends Wu{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return tn(!1),"unknown"}}constructor(e,t){gS(e),tn("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:DS(t.source,null)||t.id||ga(`unnamed ${I0.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=DS(e,null);t&&(this.id=ga(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${I0.getTypeName(this.shaderType)}:${this.id}`}getName(){return DS(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||DS(e)||"(unnamed)",l=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)} shader ${a}`;for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const p=h.split(":"),g=p[0],m=parseInt(p[2],10);if(isNaN(m))throw new Error(`GLSL compilation error in ${l}: ${n}`);"WARNING"!==g?s[m]=h:o[m]=h}const c=function(n,e=1,t=": "){const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return pU(a,r-a.length)+t+s})}(e);return{shaderName:l,errors:fU(s,c),warnings:fU(o,c)}}(i,this.source,this.shaderType,this.id);throw mn.error(`GLSL compilation errors in ${r}\n${s}`)(),mn.warn(`GLSL compilation warnings in ${r}\n${o}`)(),new Error(`GLSL compilation errors in ${r}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class jI extends I0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class VI extends I0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ks=5126,O0=5124,R0=5125,UI={[ks]:[ks,1,"float"],35664:[ks,2,"vec2"],35665:[ks,3,"vec3"],35666:[ks,4,"vec4"],[O0]:[O0,1,"int"],35667:[O0,2,"ivec2"],35668:[O0,3,"ivec3"],35669:[O0,4,"ivec4"],[R0]:[R0,1,"uint"],36294:[R0,2,"uvec2"],36295:[R0,3,"uvec3"],36296:[R0,4,"uvec4"],35670:[ks,1,"bool"],35671:[ks,2,"bvec2"],35672:[ks,3,"bvec3"],35673:[ks,4,"bvec4"],35674:[ks,8,"mat2"],35685:[ks,8,"mat2x3"],35686:[ks,8,"mat2x4"],35675:[ks,12,"mat3"],35687:[ks,12,"mat3x2"],35688:[ks,12,"mat3x4"],35676:[ks,16,"mat4"],35689:[ks,16,"mat4x2"],35690:[ks,16,"mat4x3"]};function vU(n){const e=UI[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function wU(n,e){switch(n){case 5120:case 5121:case 5122:case 5123:n=ks}for(const t in UI){const[i,r,s]=UI[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class kae{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),l=t.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!Si(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=vU(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const l={location:e,name:t,accessor:new ma(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=vU(i),l={location:e,name:t,accessor:new ma({type:s,size:r*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Lae=35981,Bae=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class SU extends Wu{get[Symbol.toStringTag](){return"Program"}constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",Bae),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=Lae}=e;return this.hash=t||"",this.vs="string"==typeof i?new jI(this.gl,{id:`${e.id}-vs`,source:i}):i,this.fs="string"==typeof r?new VI(this.gl,{id:`${e.id}-fs`,source:r}):r,tn(this.vs instanceof jI),tn(this.fs instanceof VI),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Co(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new kae(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:i,offset:r=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:p,framebuffer:g,parameters:m={},uniforms:D,samplers:O}){if((D||O)&&(mn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(D||{})),mn.priority>=e){const W=g?g.id:"default",$=`mode=${ah(this.gl,t)} verts=${i} instances=${c} indexType=${ah(this.gl,l)} isInstanced=${u} isIndexed=${a} Framebuffer=${W}`;mn.log(e,$)()}return tn(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||u&&0===c||(h.bindForDraw(i,c,()=>{if(void 0!==g&&(m=Object.assign({},m,{framebuffer:g})),p){const W=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return tn(!1),0}}(t);p.begin(W)}this._bindTextures(),fc(this.gl,m,()=>{a&&u?this.gl2.drawElementsInstanced(t,i,l,r,c):a&&Si(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(t,s,o,i,l,r):a?this.gl.drawElements(t,i,l,r):u?this.gl2.drawArraysInstanced(t,r,i,c):this.gl.drawArrays(t,r,i)}),p&&p.end()}),0))}setUniforms(e={}){mn.priority>=2&&function(n,e,t){for(const i in n){const r=n[i];if((!t||Boolean(t[i]))&&!tae(r))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${i}`,r),new Error(`${e} Bad uniform ${i}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof Fs&&(s=s.texture),s instanceof Of)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=r;a.bind(l),s=l,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&nae(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new jI({handle:r});break;case 35632:i.fs=new VI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=ga(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),mn.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),mn.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||mn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=Joe(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=dU(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,`${r}[${o}]`),this._uniformSetters[`${r}[${o}]`]=dU(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class N0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new N0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(t),h=this._getHash(i),p=c.map(pe=>this._getHash(pe.name)).sort(),g=o.map(pe=>this._getHash(pe)),m=Object.keys(r).sort(),D=Object.keys(s).sort(),O=[],W=[];for(const pe of m)O.push(this._getHash(pe)),O.push(this._getHash(r[pe]));for(const pe of D)W.push(this._getHash(pe)),W.push(this._getHash(s[pe]));const $=`${u}/${h}D${O.join("/")}M${p.join("/")}I${W.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[$]){const pe=function(n,e){const{vs:t,fs:i}=e,r=voe(e.modules||[]);return{gl:n,vs:cU(n,Object.assign({},e,{source:t,type:D0,modules:r})),fs:cU(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Hoe(r)}}(this.gl,{vs:t,fs:i,modules:c,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[$]=new SU(this.gl,{hash:$,vs:pe.vs,fs:pe.fs,varyings:o,bufferMode:a}),this._getUniforms[$]=pe.getUniforms||(Re=>{}),this._useCounts[$]=0}return this._useCounts[$]++,this._programCache[$]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;t[r++]=a,i[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;i[l]||(t[r++]=a,i[l]=!0)}return t.length=r,t}}let OS=null;class Ha extends Wu{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e,t={}){return!t.constantAttributeZero||Si(e)||"Chrome"===function(n){if(!ZD())return"Node";if(Oj(n))return"Electron";const t=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":_0.chrome?"Chrome":_0.safari?"Safari":_0.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ha(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ha.MAX_ATTRIBUTES=Ha.MAX_ATTRIBUTES||e.getParameter(34921),Ha.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Ha._setConstantFloatArray(e,t,i);break;case Int32Array:Ha._setConstantIntArray(e,t,i);break;case Uint32Array:Ha._setConstantUintArray(e,t,i);break;default:tn(!1)}}constructor(e,t={}){super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ha.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return tn(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),c?(tn(Si(h)),p.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,l,o,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,u||0)}),this}enable(e,t=!0){return!t&&0===e&&!Ha.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new hr(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function(n,e){return new n(function(n){return(!OS||OS.byteLength<n)&&(OS=new ArrayBuffer(n)),OS}(n.BYTES_PER_ELEMENT*e),0,e)}(t.constructor,s);(function({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:tn(!1)}}static _setConstantIntArray(e,t,i){switch(tn(Si(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:tn(!1)}}static _setConstantUintArray(e,t,i){switch(tn(Si(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:tn(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return tn(Number.isFinite(t)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(t,e);default:return this.gl.getVertexAttrib(t,e)}})}}const $ae=/^(.+)__LOCATION_([0-9]+)$/,Wae=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class qae{constructor(e,t={}){this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ha(e),oV(this,"VertexArray","v6.0",Wae),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,i={}){if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t,i={}){const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new hr(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof hr&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof hr&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,mn.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const u=ma.resolve(l.accessor,this.accessors[o]||{},i,r),{size:h,type:p}=u;return tn(Number.isFinite(h)&&Number.isFinite(p)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=$ae.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof hr)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof hr)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof hr))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(Ha.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Ha.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof hr){const a=i;if(o){const l=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,t={}){return mn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function P0(n,e={}){const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=","+(o%i==0?" ":"")),r+=P0(n[o],e);return`${r}${n.length>t?"...":"]"}`}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function xU(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let c,u,h,s="NOT PROVIDED",o=1,a=0,l=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),c=-1!==s.indexOf("nt")),e instanceof hr){const p=e,{data:g,changed:m}=p.getDebugData();let D;return u=m?"*":"",h=g,l=p.byteLength,a=l/g.BYTES_PER_ELEMENT/o,t?D=`${t.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${ah(r,s)})`:(c=!0,D=`${l} bytes`),{[i]:`${u}${P0(h,{size:o,isInteger:c})}`,"Format ":D}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=-1!==s.indexOf("nt"),{[i]:`${P0(h,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function Xae(n,e){const{type:t,size:i}=e,r=wU(t,i);return r?`${n} (${r.name})`:n}function CU({header:n="Uniforms",program:e,uniforms:t,undefinedOnly:i=!1}){tn(e);const s=".*Matrix",a={},l=Object.keys(e._uniformSetters).sort();let c=0;for(const p of l)!p.match(".*_.*")&&!p.match(s)&&zI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)p.match(s)&&zI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)a[p]||zI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;let u=0;const h={};if(!i)for(const p in t){const g=t[p];a[p]||(u++,h[p]={Type:`NOT USED: ${g}`,[n]:P0(g)})}return{table:a,count:c,unusedTable:h,unusedCount:u}}function zI({table:n,header:e,uniforms:t,uniformName:i,undefinedOnly:r}){const s=t[i],o=function(n){return null!=n}(s);return!(r&&o||(n[i]={[e]:o?P0(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function AU(n){const{type:e,size:t}=n.accessor,i=wU(e,t);return i?`${i.name} ${n.name}`:n.name}const Jae={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function tle(n,e){const{attributeMap:t=Jae}=e||{};return t&&t[n]||n}function nle(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}tn(Number.isFinite(e.size),`attribute ${n} needs size`)}const TU=()=>{},sle={};class Yg{constructor(e,t={}){const{id:i=ga("model")}=t;tn(pS(e)),this.id=i,this.gl=e,this.id=t.id||ga("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||N0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},tn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return tn(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return tn(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=tle(s,undefined);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const l=o.value,c=at({},o);delete c.value,i[a]=[new hr(n,l),c],nle(s,c)}}if(r){const s=r.value||r;tn(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new hr(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(Vg(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return fI(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;let c;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),mn.priority>=2&&(c=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:p=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&mn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:D,instanceCount:O}=this,{onBeforeRender:W=TU,onAfterRender:$=TU}=this.props;W(),this.program.setUniforms(this.uniforms);const pe=this.program.draw(Object.assign(sle,e,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:p,isInstanced:D,instanceCount:O,offset:h?g:0}));return $(),mn.priority>=2&&this._logDrawCallEnd(c,l,i),pe}transform(e={}){const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return mn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}tn(t instanceof SU,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new qae(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof hr&&t.delete()}}_setAnimationProps(e){this.animated&&tn(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(Vg(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new XV(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),mn.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:mn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function({vertexArray:n,header:e="Attributes"}){if(!n.configuration)return{};const t={};n.elements&&(t.ELEMENT_ARRAY_BUFFER=xU(n,n.elements,null,e));const i=n.values;for(const r in i){const s=n._getAttributeInfo(r);if(s){let o=`${r}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${r}: ${Xae(s.name,a)}`),t[o]=xU(n,i[r],a,e)}}return t}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=CU({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:u}=CU({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&mn.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&mn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(n){const e={},t=`Accessors for ${n.id}`;for(const i of n.attributeInfos)i&&(e[`in ${AU(i)}`]={[t]:JSON.stringify(i.accessor)});for(const i of n.varyingInfos)i&&(e[`out ${AU(i)}`]={[t]:JSON.stringify(i.accessor)});return e}(this.vertexArray.configuration);mn.table(e,s)(),mn.table(e,o)(),mn.table(e+1,h)(),r&&r.log({logLevel:2,message:`Rendered to ${r.id}`}),mn.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class HI{static isSupported(e){return Si(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();tn(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new Yg(t,Object.assign({},e,{fs:e.fs||KV({version:QV(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(n){return!(Vg(n.feedbackBuffers)&&Vg(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new eoe(e,t)),function(n){return!(Vg(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new poe(e,t)),tn(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}function RS(){}const lle={onStart:RS,onUpdate:RS,onInterrupt:RS,onEnd:RS};class F0{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=at(at({},lle),e),this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const mle={interpolation:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="interpolation",this.transition=new F0(i),this.attribute=t,this.attributeInTransition=new AI(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(n,e){const t=GV(e.size);return new HI(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new hr(e,r),new hr(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();const{buffers:r,attribute:s}=this;$V(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)WV(at({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=CI(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:HV(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{time:t,settings:{duration:i,easing:r}}=this.transition,s=r(t/i);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},spring:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="spring",this.transition=new F0(i),this.attribute=t,this.attributeInTransition=new AI(e,Cn(at({},t.settings),{normalized:!1})),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(n){return new _a(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(n,e){return new Fs(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(n,e,t){const i=GV(e.size);return new HI(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new hr(e,r),new hr(e,r),new hr(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)WV(at({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=CI(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:HV(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),$V(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),_S(i)[0]>0||r.end(),!0)}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}};class _le{constructor(e,{id:t,timeline:i}){this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=HI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);!o||this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void Ri.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=mle[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Ri.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const MU="attributeManager.invalidate";class Sle{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new _le(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,t){this._add(e,t)}addInstanced(e,t){this._add(e,t,{instanced:1})}remove(e){for(let t=0;t<e.length;t++){const i=e[t];void 0!==this.attributes[i]&&(this.attributes[i].delete(),delete this.attributes[i])}}invalidate(e,t){const i=this._invalidateTrigger(e,t);To(MU,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);To(MU,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}={}){let l=!1;To("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],h=u.settings.accessor;u.startIndices=i,s[c]&&Ri.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(o[h],e.startIndices)||!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:t,data:e,props:s,context:a})),this.needsRedraw|=u.needsRedraw()}l&&To("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r=at({},i.getAttributes());for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}getAccessors(){return this.updateTriggers}_add(e,t,i={}){t&&Ri.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const r in e)this.attributes[r]=this._createAttribute(r,e[r],i);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r=Cn(at({},t),{id:e,isIndexed:t.isIndexed||t.elements||!1,constant:t.constant||!1,size:(t.elements?1:t.size)||1,value:t.value||null,divisor:t.instanced||i.instanced?1:t.divisor||0});return new AI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;To("attribute.updateStart",t),t.allocate(i)&&To("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,To("attribute.updateEnd",t,i))}}function IU(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function OU(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const Tle={interpolation:class extends F0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=yS(t,i,o)}},spring:class extends F0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=IU(n[o],e[o],t[o],i,r);return s}return IU(n,e,t,i,r)}(s,o,t,i,r);const l=OU(a,t),c=OU(a,o);l<1e-5&&c<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class Mle{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;t=c,this.remove(e)}if(!(r=zV(r)))return;const o=Tle[r.type];if(!o)return void Ri.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start(Cn(at({},r),{fromValue:t,toValue:i})),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const NS={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},{COMPONENT:Dle}=NS;function Rle(n,e){if(!n.transitions)return null;const t={},i=$I(n);for(const r in n.transitions){const s=i[r],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&GI(n[r],e[r],s)&&(t[r]=!0)}return t}function RU({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}={}){if(e===n)return null;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=GI(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=GI(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return null}function GI(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Fle(n,e){if(null===e)return"oldProps is null, initial diff";const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function NU(n,e,t){let i=n.updateTriggers[t];i=null==i?{}:i;let r=e.updateTriggers[t];return r=null==r?{}:r,RU({oldProps:r,newProps:i,triggerName:t})}function $I(n){const e=n[Dle],t=e&&e.constructor;return t?t._propTypes:{}}function Ule(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function PS(n){let t,e={};return i=>{for(const r in i)if(!Ule(i[r],e[r])){t=n(i),e=i;break}return t}}function zle(n,e){if(!e)return n;const t=at(at({},n),e);if("defines"in e&&(t.defines=at(at({},n.defines),e.defines)),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i=at({},n.inject);for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function WI(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],g=e[11],m=e[12],D=e[13],O=e[14],W=e[15],$=t*a-i*o,pe=t*l-r*o,Re=t*c-s*o,Ve=i*l-r*a,We=i*c-s*a,rt=r*c-s*l,wt=u*D-h*m,vt=u*O-p*m,At=u*W-g*m,Bt=h*O-p*D,$t=h*W-g*D,mt=p*W-g*O,yt=$*mt-pe*$t+Re*Bt+Ve*At-We*vt+rt*wt;return yt?(n[0]=(a*mt-l*$t+c*Bt)*(yt=1/yt),n[1]=(r*$t-i*mt-s*Bt)*yt,n[2]=(D*rt-O*We+W*Ve)*yt,n[3]=(p*We-h*rt-g*Ve)*yt,n[4]=(l*At-o*mt-c*vt)*yt,n[5]=(t*mt-r*At+s*vt)*yt,n[6]=(O*Re-m*rt-W*pe)*yt,n[7]=(u*rt-p*Re+g*pe)*yt,n[8]=(o*$t-a*At+c*wt)*yt,n[9]=(i*At-t*$t-s*wt)*yt,n[10]=(m*We-D*Re+W*$)*yt,n[11]=(h*Re-u*We-g*$)*yt,n[12]=(a*vt-o*Bt-l*wt)*yt,n[13]=(t*Bt-i*vt+r*wt)*yt,n[14]=(D*pe-m*Ve-O*$)*yt,n[15]=(u*Ve-h*pe+p*$)*yt,n):null}function Pf(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],g=e[10],m=e[11],D=e[12],O=e[13],W=e[14],$=e[15],pe=t[0],Re=t[1],Ve=t[2],We=t[3];return n[0]=pe*i+Re*a+Ve*h+We*D,n[1]=pe*r+Re*l+Ve*p+We*O,n[2]=pe*s+Re*c+Ve*g+We*W,n[3]=pe*o+Re*u+Ve*m+We*$,n[4]=(pe=t[4])*i+(Re=t[5])*a+(Ve=t[6])*h+(We=t[7])*D,n[5]=pe*r+Re*l+Ve*p+We*O,n[6]=pe*s+Re*c+Ve*g+We*W,n[7]=pe*o+Re*u+Ve*m+We*$,n[8]=(pe=t[8])*i+(Re=t[9])*a+(Ve=t[10])*h+(We=t[11])*D,n[9]=pe*r+Re*l+Ve*p+We*O,n[10]=pe*s+Re*c+Ve*g+We*W,n[11]=pe*o+Re*u+Ve*m+We*$,n[12]=(pe=t[12])*i+(Re=t[13])*a+(Ve=t[14])*h+(We=t[15])*D,n[13]=pe*r+Re*l+Ve*p+We*O,n[14]=pe*s+Re*c+Ve*g+We*W,n[15]=pe*o+Re*u+Ve*m+We*$,n}function FS(n,e,t){var o,a,l,c,u,h,p,g,m,D,O,W,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],p=e[6],g=e[7],m=e[8],D=e[9],O=e[10],W=e[11],n[0]=o=e[0],n[1]=a,n[2]=l,n[3]=c,n[4]=u,n[5]=h,n[6]=p,n[7]=g,n[8]=m,n[9]=D,n[10]=O,n[11]=W,n[12]=o*i+u*r+m*s+e[12],n[13]=a*i+h*r+D*s+e[13],n[14]=l*i+p*r+O*s+e[14],n[15]=c*i+g*r+W*s+e[15]),n}function kS(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function PU(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],p=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+c*i,n[5]=o*r+u*i,n[6]=a*r+h*i,n[7]=l*r+p*i,n[8]=c*r-s*i,n[9]=u*r-o*i,n[10]=h*r-a*i,n[11]=p*r-l*i,n}function FU(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],p=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+c*i,n[1]=o*r+u*i,n[2]=a*r+h*i,n[3]=l*r+p*i,n[4]=c*r-s*i,n[5]=u*r-o*i,n[6]=h*r-a*i,n[7]=p*r-l*i,n}function LU(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function LS(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}function BU(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=t[3],u=c*i+a*s-l*r,h=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;return n[0]=u*c+g*-o+h*-l-p*-a,n[1]=h*c+g*-a+p*-o-u*-l,n[2]=p*c+g*-l+u*-a-h*-o,n[3]=e[3],n}!function(){var n=new ya(4);ya!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const jU=[0,0,0,0],fce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],pce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gce=[0,0,0],mce=[0,0,0],_ce=PS(function({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=function(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=jU,l=jU,c=n.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:p}=VU(n,e,t);return p&&(l=n.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=LS([],l,o),s=i||s,o=Pf([],r,s),o=Pf([],o,fce)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}(n,t,i),u=n.getDistanceScales(),h=[n.width*e,n.height*e],p=n.projectionMatrix.transform([0,0,-n.focalDistance,1])[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:gce,project_uScale:n.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(c){const m=n.getDistanceScales(c);switch(t){case ji.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case ji.LNGLAT:case ji.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case ji.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function VU(n,e,t=mce){let r,i=t,s=!0;switch(r=e===ji.LNGLAT_OFFSETS||e===ji.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Kc.WEB_MERCATOR:(e===ji.LNGLAT||e===ji.CARTESIAN)&&(s=!1);break;case Kc.WEB_MERCATOR_AUTO_OFFSET:e===ji.LNGLAT?i=r:e===ji.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Kc.IDENTITY:i=n.position.map(Math.fround);break;case Kc.GLOBE:s=!1,r=null;break;default:s=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}class wce extends bS{get ELEMENTS(){return Yu(!1),0}get RANK(){return Yu(!1),0}toString(){let e="[";if(Or.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=` ${this[i*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=sr(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function BS(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function UU(n,e){return n[0]=-e[0],n[1]=-e[1],n}function zU(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}!function(){var n=new ya(2);ya!=Float32Array&&(n[0]=0,n[1]=0)}();const HU=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Cce=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ace=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Xg={};class qn extends wce{static get IDENTITY(){return Xg.IDENTITY=Xg.IDENTITY||Object.freeze(new qn(HU)),Xg.IDENTITY}static get ZERO(){return Xg.ZERO=Xg.ZERO||Object.freeze(new qn(Cce)),Xg.ZERO}get INDICES(){return Ace}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,l,c,u,h,p,g,m,D,O){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=p,this[12]=g,this[13]=m,this[14]=D,this[15]=O,this.check()}setRowMajor(e,t,i,r,s,o,a,l,c,u,h,p,g,m,D,O){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=t,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=D,this[12]=r,this[13]=l,this[14]=p,this[15]=O,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(HU)}fromQuaternion(e){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,u=i*o,h=i*a,p=r*o,g=r*a,m=r*l,D=s*o,O=s*a,W=s*l;n[0]=1-h-m,n[1]=u+W,n[2]=p-O,n[3]=0,n[4]=u-W,n[5]=1-c-m,n[6]=g+D,n[7]=0,n[8]=p+O,n[9]=g-D,n[10]=1-c-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:i,top:r,near:s,far:o}){return o===1/0?qn._computeInfinitePerspectiveOffCenter(this,e,t,i,r,s):function(n,e,t,i,r,s,o){var a=1/(t-e),l=1/(r-i),c=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*l,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*l,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*c,n[15]=0}(this,e,t,i,r,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,i,r,s,o){const l=2*o/(s-r),c=(i+t)/(i-t),u=(s+r)/(s-r),g=-2*o;return e[0]=2*o/(i-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,t,i){return 1===arguments.length&&({eye:e,center:t,up:i}=e),function(n,e,t,i){var r,s,o,a,l,c,u,h,p,g,m=e[0],D=e[1],O=e[2],W=i[0],$=i[1],pe=i[2],Re=t[0],Ve=t[1],We=t[2];Math.abs(m-Re)<Qc&&Math.abs(D-Ve)<Qc&&Math.abs(O-We)<Qc?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=m-Re,h=D-Ve,p=O-We,r=$*(p*=g=1/Math.hypot(u,h,p))-pe*(h*=g),s=pe*(u*=g)-W*p,o=W*h-$*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-p*s,l=p*r-u*o,c=u*s-h*r,(g=Math.hypot(a,l,c))?(a*=g=1/g,l*=g,c*=g):(a=0,l=0,c=0),n[0]=r,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=l,n[6]=h,n[7]=0,n[8]=o,n[9]=c,n[10]=p,n[11]=0,n[12]=-(r*m+s*D+o*O),n[13]=-(a*m+l*D+c*O),n[14]=-(u*m+h*D+p*O),n[15]=1)}(this,e,t=t||[0,0,0],i=i||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:i,top:r,near:s=.1,far:o=500}){return function(n,e,t,i,r,s,o){var a=1/(e-t),l=1/(i-r),c=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*l,n[14]=(o+s)*c,n[15]=1}(this,e,t,i,r,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:i=1,near:r=.1,far:s=500}){if(e>2*Math.PI)throw Error("radians");const a=i*Math.tan(e/2),l=a*t;return(new qn).ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:s})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return function(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(this,e,i,r,s),this.check()}determinant(){return function(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8],u=n[9],h=n[10],p=n[11],g=n[12],m=n[13],D=n[14],O=n[15];return(e*o-t*s)*(h*O-p*D)-(e*a-i*s)*(u*O-p*m)+(e*l-r*s)*(u*D-h*m)+(t*a-i*o)*(c*O-p*g)-(t*l-r*o)*(c*D-h*g)+(i*l-r*a)*(c*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return WI(this,this),this.check()}multiplyLeft(e){return Pf(this,e,this),this.check()}multiplyRight(e){return Pf(this,this,e),this.check()}rotateX(e){return PU(this,this,e),this.check()}rotateY(e){return function(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],p=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-c*i,n[1]=o*r-u*i,n[2]=a*r-h*i,n[3]=l*r-p*i,n[8]=s*i+c*r,n[9]=o*i+u*r,n[10]=a*i+h*r,n[11]=l*i+p*r}(this,this,e),this.check()}rotateZ(e){return FU(this,this,e),this.check()}rotateXYZ([e,t,i]){return this.rotateX(e).rotateY(t).rotateZ(i)}rotateAxis(e,t){return function(n,e,t,i){var l,c,u,h,p,g,m,D,O,W,$,pe,Re,Ve,We,rt,wt,vt,At,Bt,$t,mt,yt,Ut,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Qc||(r*=a=1/a,s*=a,o*=a,l=Math.sin(t),c=Math.cos(t),p=e[1],g=e[2],m=e[3],O=e[5],W=e[6],$=e[7],Re=e[9],Ve=e[10],We=e[11],At=r*s*(u=1-c)-o*l,Bt=s*s*u+c,$t=o*s*u+r*l,mt=r*o*u+s*l,yt=s*o*u-r*l,Ut=o*o*u+c,n[0]=(h=e[0])*(rt=r*r*u+c)+(D=e[4])*(wt=s*r*u+o*l)+(pe=e[8])*(vt=o*r*u-s*l),n[1]=p*rt+O*wt+Re*vt,n[2]=g*rt+W*wt+Ve*vt,n[3]=m*rt+$*wt+We*vt,n[4]=h*At+D*Bt+pe*$t,n[5]=p*At+O*Bt+Re*$t,n[6]=g*At+W*Bt+Ve*$t,n[7]=m*At+$*Bt+We*$t,n[8]=h*mt+D*yt+pe*Ut,n[9]=p*mt+O*yt+Re*Ut,n[10]=g*mt+W*yt+Ve*Ut,n[11]=m*mt+$*yt+We*Ut,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?kS(this,this,e):kS(this,this,[e,e,e]),this.check()}translate(e){return FS(this,this,e),this.check()}transform(e,t){return 4===e.length?(vS(t=LS(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;switch(i){case 2:t=function(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:t=bI(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return vS(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:t=PV(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return vS(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}transformPoint(e,t){return yI("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return yI("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return yI("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function Qg(n,e){const t=LS([],e,n);return LU(t,t,1/t[3]),t}function GU(n,e){const t=n%e;return t<0?e+t:t}function $U(n,e,t){return n<e?e:n>t?t:n}const qI=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function Xu(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const gc=Math.PI,WU=gc/4,mc=gc/180,YI=180/gc,KI=4003e4,jS=85.051129;function VS([n,e]){return Xu(Number.isFinite(n)),Xu(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude"),[512*(n*mc+gc)/(2*gc),512*(gc+Math.log(Math.tan(WU+e*mc*.5)))/(2*gc)]}function Zg([n,e]){const t=n/512*(2*gc)-gc,i=2*(Math.atan(Math.exp(e/512*(2*gc)-gc))-WU);return[t*YI,i*YI]}function XI({latitude:n,longitude:e,highPrecision:t=!1}){Xu(Number.isFinite(n)&&Number.isFinite(e));const i={},s=Math.cos(n*mc),o=512/360,a=o/s,l=512/KI/s;if(i.unitsPerMeter=[l,l,l],i.metersPerUnit=[1/l,1/l,1/l],i.unitsPerDegree=[o,a,l],i.degreesPerUnit=[1/o,1/a,1/l],t){const c=mc*Math.tan(n*mc)/s,h=512/KI*c,p=h/a*l;i.unitsPerDegree2=[0,o*c/2,h],i.unitsPerMeter2=[p,0,p]}return i}function qU(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=XI({longitude:t,latitude:i,highPrecision:!0}),u=VS(n);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const h=Zg(u),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function KU(n){return 2*Math.atan(.5/n)*YI}function XU(n,e){const[t,i,r=0]=n;return Xu(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Qg(e,[t,i,r,1])}function L0(n,e,t=0){const[i,r,s]=n;if(Xu(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Qg(e,[i,r,s,1]);const o=Qg(e,[i,r,0,1]),a=Qg(e,[i,r,1,1]),l=o[2],c=a[2];return zU([],o,a,l===c?0:((t||0)-l)/(c-l))}const QU=Math.PI/180;function ZU(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Qg(i,[e,0,1,1]),s=Qg(i,[e,n.height,1,1]),c=Zg(zU([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return c[2]=t,c}const Bce=Math.PI/180,jce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ZI=[0,0,0],Uce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};let Jg=(()=>{class n{constructor(t={}){const{id:i=null,x:r=0,y:s=0,width:o=1,height:a=1}=t;this.id=i||this.constructor.displayName||"viewport",this.x=r,this.y=s,this.width=o||1,this.height=a||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Kc.WEB_MERCATOR:Kc.WEB_MERCATOR_AUTO_OFFSET:Kc.IDENTITY}equals(t){return t instanceof n&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&C0(t.projectionMatrix,this.projectionMatrix)&&C0(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:i=!0}={}){const s=XU(this.projectPosition(t),this.pixelProjectionMatrix),[o,a]=s,l=i?a:this.height-a;return 2===t.length?[o,l]:[o,l,s[2]]}unproject(t,{topLeft:i=!0,targetZ:r}={}){const[s,o,a]=t,u=L0([s,i?o:this.height-o,a],this.pixelUnprojectionMatrix,r&&r*this.distanceScales.unitsPerMeter[2]),[h,p,g]=this.unprojectPosition(u);return Number.isFinite(a)?[h,p,g]:Number.isFinite(r)?[h,p,r]:[h,p]}projectPosition(t){const[i,r]=this.projectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[i,r]=this.unprojectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return this.isGeospatial?VS(t):t}unprojectFlat(t){return this.isGeospatial?Zg(t):t}getBounds(t={}){const i={targetZ:t.z||0},r=this.unproject([0,0],i),s=this.unproject([this.width,0],i),o=this.unproject([0,this.height],i),a=this.unproject([this.width,this.height],i);return[Math.min(r[0],s[0],o[0],a[0]),Math.min(r[1],s[1],o[1],a[1]),Math.max(r[0],s[0],o[0],a[0]),Math.max(r[1],s[1],o[1],a[1])]}getDistanceScales(t=null){return t?XI({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:i,width:r=1,height:s=1}){return t<this.x+this.width&&this.x<t+r&&i<this.y+this.height&&this.y<i+s}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){const e={};return e.left=Hg(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),e.right=Hg(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),e.bottom=Hg(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),e.top=Hg(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),e.near=Hg(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),e.far=Hg(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),e}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,i){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:t,fovyRadians:i,aspect:r,focalDistance:s,near:o,far:a}){return t?(new qn).orthographic({fovy:i,aspect:r,focalDistance:s,near:o,far:a}):(new qn).perspective({fovy:i,aspect:r,near:o,far:a})}_initViewMatrix(t){const{viewMatrix:i=jce,longitude:r=null,latitude:s=null,zoom:o=null,position:a=null,modelMatrix:l=null,focalDistance:c=1,distanceScales:u=null}=t;this.isGeospatial=Number.isFinite(s)&&Number.isFinite(r),this.zoom=o,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){Xu(Number.isFinite(n));const e=Math.cos(n*mc);return function(n){return qI(n)}(KI*e)-9}({latitude:s})+Math.log2(c):0);const h=Math.pow(2,this.zoom);this.scale=h,this.distanceScales=this.isGeospatial?XI({latitude:s,longitude:r}):u||Uce,this.focalDistance=c,this.distanceScales.metersPerUnit=new Ao(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new Ao(this.distanceScales.unitsPerMeter),this.position=ZI,this.meterOffset=ZI,a&&(this.position=a,this.modelMatrix=l,this.meterOffset=l?l.transformVector(a):a),this.isGeospatial?(this.longitude=r,this.latitude=s,this.center=this._getCenterInWorld({longitude:r,latitude:s})):this.center=a?this.projectPosition(a):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new qn).multiplyRight(this.viewMatrixUncentered).translate(new Ao(this.center||ZI).negate())}_getCenterInWorld({longitude:t,latitude:i}){const{meterOffset:r,distanceScales:s}=this,o=new Ao(this.projectPosition([t,i,0]));if(r){const a=new Ao(r).scale(s.unitsPerMeter);o.add(a)}return o}_initProjectionMatrix(t){const{projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,focalDistance:c=1}=t;this.projectionMatrix=i||this._createProjectionMatrix({orthographic:r,fovyRadians:s||o*Bce,aspect:this.width/this.height,focalDistance:c,near:a,far:l})}_initPixelMatrices(){const t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Pf(t,t,this.projectionMatrix),Pf(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=WI([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];kS(i,i,[this.width/2,-this.height/2,1]),FS(i,i,[1,-1,0]),Pf(r,i,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=i,this.pixelUnprojectionMatrix=WI([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ri.warn("Pixel project matrix not invertible")()}}return n.displayName="Viewport",n})(),i4=(()=>{class n extends Jg{constructor(t={}){const{latitude:i=0,longitude:r=0,zoom:s=11,pitch:o=0,bearing:a=0,nearZMultiplier:l=.1,farZMultiplier:c=1.01,orthographic:u=!1,repeat:h=!1,worldOffset:p=0}=t;let{width:g,height:m,altitude:D=1.5}=t;const O=Math.pow(2,s);g=g||1,m=m||1,D=Math.max(.75,D);const{fov:W,aspect:$,focalDistance:pe,near:Re,far:Ve}=function({width:n,height:e,fovy:t=KU(1.5),altitude:i,pitch:r=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==i&&(t=KU(i));const a=.5*t*mc,l=function(n){return.5/Math.tan(.5*n*mc)}(t),c=r*mc,u=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/e,focalDistance:l,near:s,far:(Math.sin(c)*u+l)*o}}({width:g,height:m,pitch:o,altitude:D,nearZMultiplier:l,farZMultiplier:c});let We=function({height:n,pitch:e,bearing:t,altitude:i,scale:r,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return FS(o,o,[0,0,-i]),PU(o,o,-e*mc),FU(o,o,t*mc),kS(o,o,[r/=n,r,r]),s&&FS(o,o,function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),o}({height:m,pitch:o,bearing:a,scale:O,altitude:D});p&&(We=(new qn).translate([512*p,0,0]).multiplyLeft(We)),super(Cn(at({},t),{width:g,height:m,viewMatrix:We,longitude:r,latitude:i,zoom:s,orthographic:u,fovyRadians:W,aspect:$,focalDistance:pe,near:Re,far:Ve})),this.latitude=i,this.longitude=r,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=D,this.orthographic=u,this._subViewports=h?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),i=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360);for(let s=i;s<=r;s++){const o=s?new n(Cn(at({},this),{worldOffset:s})):this;this._subViewports.push(o)}}return this._subViewports}addMetersToLngLat(t,i){return qU(t,i)}panByPosition(t,i){const r=L0(i,this.pixelUnprojectionMatrix),o=BS([],this.projectFlat(t),UU([],r)),a=BS([],this.center,o),[l,c]=this.unprojectFlat(a);return{longitude:l,latitude:c}}getBounds(t={}){const i=function(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let l,c;return(n.fovy?.5*n.fovy*QU:Math.atan(.5/n.altitude))>(90-n.pitch)*QU-.01?(l=ZU(n,0,e),c=ZU(n,t,e)):(l=r([0,0],s),c=r([t,0],s)),[o,a,c,l]}(this,t.z||0);return[Math.min(i[0][0],i[1][0],i[2][0],i[3][0]),Math.min(i[0][1],i[1][1],i[2][1],i[3][1]),Math.max(i[0][0],i[1][0],i[2][0],i[3][0]),Math.max(i[0][1],i[1][1],i[2][1],i[3][1])]}fitBounds(t,i={}){const{width:r,height:s}=this,{longitude:o,latitude:a,zoom:l}=function({width:n,height:e,bounds:t,minExtent:i=0,maxZoom:r=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[c,u]]=t;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:Xu(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const h=VS([a,$U(u,-jS,jS)]),p=VS([c,$U(l,-jS,jS)]),g=[Math.max(Math.abs(p[0]-h[0]),i),Math.max(Math.abs(p[1]-h[1]),i)],m=[n-s.left-s.right-2*Math.abs(o[0]),e-s.top-s.bottom-2*Math.abs(o[1])];Xu(m[0]>0&&m[1]>0);const D=m[0]/g[0],O=m[1]/g[1],Re=Zg([(p[0]+h[0])/2+(s.right-s.left)/2/D,(p[1]+h[1])/2+(s.bottom-s.top)/2/O]),Ve=Math.min(r,qI(Math.abs(Math.min(D,O))));return Xu(Number.isFinite(Ve)),{longitude:Re[0],latitude:Re[1],zoom:Ve}}(at({width:r,height:s,bounds:t},i));return new n({width:r,height:s,longitude:o,latitude:a,zoom:l})}}return n.displayName="WebMercatorViewport",n})();function JI(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof i4){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function r4(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,l=0]=n;switch(t&&([o,a,l]=LS([],[o,a,l,1],t)),i){case ji.LNGLAT:return JI([o,a,l],e,s);case ji.LNGLAT_OFFSETS:return JI([o+r[0],a+r[1],l+(r[2]||0)],e,s);case ji.METER_OFFSETS:return JI(qU(r,[o,a,l]),e,s);case ji.CARTESIAN:default:return e.isGeospatial?[o+r[0],a+r[1],l+r[2]]:e.projectPosition([o,a,l])}}const Gce={10241:9987,10240:9729,10242:33071,10243:33071},eO={},qce={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>Boolean(n)===Boolean(e)},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||j0(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>tO(n,e)},accessor:{validate(n,e){const t=US(n);return"function"===t||t===US(e.value)},equal:(n,e,t)=>"function"==typeof e||tO(n,e)},array:{validate:(n,e)=>e.optional&&!n||j0(n),equal:(n,e,t)=>t.compare?tO(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t?t.props:{};return i&&n?i(n):n}},image:{transform:(n,e,t)=>function(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof _a)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new _a(t,Cn(at({},e),{parameters:at(at(at({},Gce),i),n.props.textureParameters)}));return eO[r.id]=!0,r}(t,n),release:n=>{!function(n){!n||!(n instanceof _a)||eO[n.id]&&(n.delete(),delete eO[n.id])}(n)}}};function tO(n,e){if(n===e)return!0;if(!j0(n)||!j0(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Kce(n,e){switch(US(e)){case"object":return B0(n,e);case"array":return B0(n,{type:"array",value:e,compare:!1});case"boolean":return B0(n,{type:"boolean",value:e});case"number":return B0(n,{type:"number",value:e});case"function":return B0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function B0(n,e){return"type"in e?at(at({name:n},qce[e.type]),e):"value"in e?at({name:n,type:US(e.value)},e):{name:n,type:"object",value:e}}function j0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function US(n){return j0(n)?"array":null===n?"null":typeof n}const{COMPONENT:nO,ASYNC_ORIGINAL:zS,ASYNC_RESOLVED:V0,ASYNC_DEFAULTS:HS}=NS;function Xce(){const n=this,e=s4(n.constructor),t=Object.create(e);t[nO]=n,t[zS]={},t[V0]={};for(let i=0;i<arguments.length;++i){const r=arguments[i];for(const s in r)t[s]=r[s]}return Object.freeze(t),t}function s4(n){return GS(n,"_mergedDefaultProps")||(function(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=s4(t),s=function(n){const e={},t={},i={};for(const[r,s]of Object.entries(n))if(s&&s.deprecatedFor)i[r]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{const o=Kce(r,s);e[r]=o,t[r]=o.value}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(GS(n,"defaultProps")||{}),o=function(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function(n){const e=GS(n,"layerName")||GS(n,"componentName");return e||Ri.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a=at(at({},t._propTypes),s.propTypes);!function(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=tue(o))}n[HS]=t,n[zS]={},Object.defineProperties(n,i)}(o,a);const l=at(at({},t._deprecatedProps),s.deprecatedProps);(function(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])o4(this,s)||(this[s]=i);Ri.deprecated(r,e[t].join("/"))()}})})(o,l),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=l}(n),n._mergedDefaultProps)}function tue(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||VV(e)?this[zS][n]=e:this[V0][n]=e},get(){if(this[V0]){if(n in this[V0])return this[V0][n]||this[HS][n];if(n in this[zS]){const e=this[nO]&&this[nO].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[HS][n]}}return this[HS][n]}}}function o4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function GS(n,e){return o4(n,e)&&n[e]}function iO(n){var e;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(e=n[Symbol.asyncIterator]),null==e&&Symbol.iterator&&(e=n[Symbol.iterator])),null==e&&(e=n["@@asyncIterator"]),null==e&&(e=n["@@iterator"]),null==e)throw new TypeError("Object is not async iterable");return e.call(n)}const{ASYNC_ORIGINAL:iue,ASYNC_RESOLVED:rue,ASYNC_DEFAULTS:sue}=NS,oue=Object.freeze({});class a4{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=oue,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[rue]||{},i=e[iue]||e,r=e[sue]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var i;const r=null===(i=this.layer)||void 0===i?void 0:i.props.fetch;r&&(t=r(t,{propName:e,layer:this.layer}))}if(t instanceof Promise)return void this._watchPromise(e,t);if(VV(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){const i=this.asyncProps[e];t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{var o;s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r);const a=null===(o=this.layer)||void 0===o?void 0:o.props.onDataLoad;"data"===e&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;null===(o=this.layer)||void 0===o||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}_resolveAsyncIterable(e,t){var i=this;return oi(function*(){var r;"data"!==e&&i._setPropValue(e,t);const s=i.asyncProps[e];s.pendingLoadCount++;const o=s.pendingLoadCount;let a=[],l=0;var h,c=!0,u=!1;try{for(var g,m,p=iO(t);c=(g=yield p.next()).done,m=yield g.value,!c;c=!0){const O=m,{dataTransform:W}=i.component?i.component.props:{};a=W?W(O,a):a.concat(O),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:l,endRow:a.length}]}),l=a.length,i._setAsyncPropValue(e,a,o)}}catch(O){u=!0,h=O}finally{try{!c&&null!=p.return&&(yield p.return())}finally{if(u)throw h}}const D=null===(r=i.layer)||void 0===r?void 0:r.props.onDataLoad;D&&D(a,{propName:e,layer:i.layer})})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:l4,ASYNC_RESOLVED:c4,ASYNC_DEFAULTS:aue}=NS,lue={};let cue=0,uue=(()=>{class n{constructor(){this.props=Xce.apply(this,arguments),this.id=this.props.id,this.count=cue++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(t){const{props:i}=this,r={};for(const s in i[aue])s in i[c4]?r[s]=i[c4][s]:s in i[l4]&&(r[s]=i[l4][s]);return new this.constructor(at(at(at({},i),r),t))}get stats(){return this.internalState.stats}_initState(){this.internalState=new a4({})}}return n.componentName="Component",n.defaultProps=lue,n})();class due extends a4{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const _c=n=>"function"==typeof n,uh=n=>null!==n&&"object"==typeof n,d4=n=>uh(n)&&n.constructor==={}.constructor,hue=n=>n&&"function"==typeof n[Symbol.iterator],fue=n=>n&&"function"==typeof n[Symbol.asyncIterator],U0=n=>"undefined"!=typeof Response&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,em=n=>"undefined"!=typeof Blob&&n instanceof Blob,h4=n=>(n=>"undefined"!=typeof ReadableStream&&n instanceof ReadableStream||uh(n)&&_c(n.tee)&&_c(n.cancel)&&_c(n.getReader))(n)||(n=>uh(n)&&_c(n.read)&&_c(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function Ff(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function rO(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function sO(n){var e,t;let i;return Ff(n,"null loader"),Ff(rO(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=Cn(at({},n=n[0]),{options:at(at({},n.options),i)})),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const Zc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},oO=Zc.global||Zc.self||Zc.window||{},bue="object"!=typeof process||"[object process]"!==String(process)||process.browser,f4="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);f4&&parseFloat(f4[1]);const lO={};function vue(n){for(const e in lO)n.startsWith(e)&&(n=n.replace(e,lO[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n=`${n}`),n}const wue=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Eue=/^([-\w.]+\/[-\w.+]+)/;function Sue(n){const e=Eue.exec(n);return e?e[1]:n}function p4(n){const e=wue.exec(n);return e?e[1]:""}const xue=/\?.*/;function $S(n){if(U0(n)){const e=cO(n.url||"");return{url:e,type:Sue(n.headers.get("content-type")||"")||p4(e)}}return em(n)?{url:cO(n.name||""),type:n.type||""}:"string"==typeof n?{url:cO(n),type:p4(n)}:{url:"",type:""}}function Cue(n){return U0(n)?n.headers["content-length"]||-1:em(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function cO(n){return n.replace(xue,"")}function g4(n){return uO.apply(this,arguments)}function uO(){return(uO=oi(function*(n){if(U0(n))return n;const e={},t=Cue(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=$S(n);r&&(e["content-type"]=r);const s=yield Mue(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o})).apply(this,arguments)}function Aue(n){return dO.apply(this,arguments)}function dO(){return(dO=oi(function*(n){if(!n.ok){const e=yield Tue(n);throw new Error(e)}})).apply(this,arguments)}function Tue(n){return hO.apply(this,arguments)}function hO(){return(hO=oi(function*(n){let e=`Failed to fetch resource ${n.url} (${n.status}): `;try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=` ${yield n.text()}`),e+=i,e=e.length>60?`${e.slice(60)}...`:e}catch(t){}return e})).apply(this,arguments)}function Mue(n){return fO.apply(this,arguments)}function fO(){return(fO=oi(function*(n){if("string"==typeof n)return`data:,${n.slice(0,5)}`;if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}return n instanceof ArrayBuffer?`data:base64,${Due(n.slice(0,5))}`:null})).apply(this,arguments)}function Due(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function m4(n,e){return pO.apply(this,arguments)}function pO(){return(pO=oi(function*(n,e){if("string"==typeof n){n=vue(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(t=e.fetch),yield fetch(n,t)}return yield g4(n)})).apply(this,arguments)}function Kn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const _4=new eI({id:"loaders.gl"});class Iue{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const y4={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){Kn(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Rue={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function gO(){oO.loaders=oO.loaders||{};const{loaders:n}=oO;return n._state=n._state||{},n._state}const mO=()=>{const n=gO();return n.globalOptions=n.globalOptions||at({},y4),n.globalOptions};function Nue(n,e,t,i){return t=t||[],function(n,e){v4(n,null,y4,Rue,e);for(const t of e)v4(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function(n,e,t){const r=at({},n.options||{});return function(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new Iue),E4(r,mO()),E4(r,e),r}(e,n,i)}function b4(n,e){const t=mO(),i=n||t;return"function"==typeof i.fetch?i.fetch:uh(i.fetch)?r=>m4(r,i):null!=e&&e.fetch?null==e?void 0:e.fetch:m4}function v4(n,e,t,i,r){const s=e||"Top level",o=e?`${e}.`:"";for(const a in n){const l=!e&&uh(n[a]),c="baseUri"===a&&!e,u="workerUrl"===a&&e;if(!(a in t)&&!c&&!u)if(a in i)_4.warn(`${s} loader option '${o}${a}' no longer supported, use '${i[a]}'`)();else if(!l){const h=Fue(a,r);_4.warn(`${s} loader option '${o}${a}' not recognized. ${h}`)()}}}function Fue(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return`Did you mean '${r.id}.${s}'?`;const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||`Did you mean '${r.id}.${s}'?`)}return i}function E4(n,e){for(const t in e)t in e&&(n[t]=d4(e[t])&&d4(n[t])?at(at({},n[t]),e[t]):e[t])}function Jc(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}function Bue(n,e="3.0.12"){return Jc(n,"no worker provided"),!(!e||!n.version)}const eu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},jue=eu.global||eu.self||eu.window||{},_O="object"!=typeof process||"[object process]"!==String(process)||process.browser,yO="function"==typeof importScripts,Vue="undefined"!=typeof window&&void 0!==window.orientation,S4="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),bO=(S4&&parseFloat(S4[1]),new Map);function x4(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function C4(n,e=!0,t){const i=t||new Set;if(n)if(A4(n))i.add(n);else if(A4(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)C4(n[r],e,i);return void 0===t?Array.from(i):[]}function A4(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}const vO=()=>{};class T4{static isSupported(){return"undefined"!=typeof Worker}constructor(e){Kn(this,"name",void 0),Kn(this,"source",void 0),Kn(this,"url",void 0),Kn(this,"terminated",!1),Kn(this,"worker",void 0),Kn(this,"onMessage",void 0),Kn(this,"onError",void 0),Kn(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Jc(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=vO,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=vO,this.onError=vO,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||C4(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=function(n){Jc(n.source&&!n.url||!n.source&&n.url);let e=bO.get(n.source||n.url);return e||(n.url&&(e=function(n){return n.startsWith("http")?x4(function(n){return`try {\n  importScripts('${n}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}(n)):n}(n.url),bO.set(n.url,e)),n.source&&(e=x4(n.source),bO.set(n.source,e))),Jc(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}}class Gue{constructor(e,t){Kn(this,"name",void 0),Kn(this,"workerThread",void 0),Kn(this,"isRunning",void 0),Kn(this,"result",void 0),Kn(this,"_resolve",void 0),Kn(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Jc(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Jc(this.isRunning),this.isRunning=!1,this._reject(e)}}class $ue{constructor(e){Kn(this,"name","unnamed"),Kn(this,"source",void 0),Kn(this,"url",void 0),Kn(this,"maxConcurrency",1),Kn(this,"maxMobileConcurrency",1),Kn(this,"onDebug",()=>{}),Kn(this,"reuseWorkers",!0),Kn(this,"props",{}),Kn(this,"jobQueue",[]),Kn(this,"idleQueue",[]),Kn(this,"count",0),Kn(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=at(at({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return oi(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return oi(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new Gue(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new T4({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Vue?this.maxMobileConcurrency:this.maxConcurrency}}const Wue={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class Qu{static isSupported(){return T4.isSupported()}static getWorkerFarm(e={}){return Qu._workerFarm=Qu._workerFarm||new Qu({}),Qu._workerFarm.setProps(e),Qu._workerFarm}constructor(e){Kn(this,"props",void 0),Kn(this,"workerPools",new Map),this.props=at({},Wue),this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props=at(at({},this.props),e);for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new $ue({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function Yue(n,e={}){const i=`${n.id}-worker.js`;let r=(e[n.id]||{}).workerUrl;if("test"===e._workerType&&(r=`modules/${n.module}/dist/${i}`),!r){let s=n.version;"latest"===s&&(s="latest"),r=`https://unpkg.com/@loaders.gl/${n.module}${s?`@${s}`:""}/dist/${i}`}return Jc(r),r}function Kue(n,e){return!!Qu.isSupported()&&n.worker&&(null==e?void 0:e.worker)}function Xue(n,e,t,i,r){return wO.apply(this,arguments)}function wO(){return(wO=oi(function*(n,e,t,i,r){const s=n.id,o=Yue(n,t),l=Qu.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t));const c=yield l.startJob("process-on-worker",Que.bind(null,r));return c.postMessage("process",{input:e,options:t}),yield(yield c.result).result})).apply(this,arguments)}function Que(n,e,t,i){return EO.apply(this,arguments)}function EO(){return(EO=oi(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(i.error);break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn(`parse-with-worker unknown message ${t}`)}})).apply(this,arguments)}Kn(Qu,"_workerFarm",void 0);var D4=Je(521);function I4(n){if(function(n){return n&&"object"==typeof n&&n.isBuffer}(n)&&(n=function(n){return D4.toArrayBuffer?D4.toArrayBuffer(n):n}(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function tde(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}function O4(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function nde(n){return xO.apply(this,arguments)}function xO(){return(xO=oi(function*(n){const e=[];var r,t=!0,i=!1;try{for(var o,a,s=iO(n);t=(o=yield s.next()).done,a=yield o.value,!t;t=!0)e.push(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return tde(...e)})).apply(this,arguments)}const sde=262144;function R4(n){this.wrapped=n}function z0(n){return new R4(n)}function H0(n){var e,t;function r(o,a){try{var l=n[o](a),c=l.value,u=c instanceof R4;Promise.resolve(u?c.wrapped:c).then(function(h){u?r("return"===o?"return":"next",h):s(l.done?"return":"normal",h)},function(h){r("throw",h)})}catch(h){s("throw",h)}}function s(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?r(e.key,e.arg):t=null}this._invoke=function(o,a){return new Promise(function(l,c){var u={key:o,arg:a,resolve:l,reject:c,next:null};t?t=t.next=u:(e=t=u,r(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function AO(n){return function(){return new H0(n.apply(this,arguments))}}function TO(){return(TO=AO(function*(n,e){const t=(null==e?void 0:e.chunkSize)||1048576;let i=0;for(;i<n.size;){const r=i+t,s=yield z0(n.slice(i,r).arrayBuffer());i=r,yield s}})).apply(this,arguments)}function N4(n,e){return bue?function(n,e){return MO.apply(this,arguments)}(n,e):function(n,e){return DO.apply(this,arguments)}(n,e)}function MO(){return(MO=AO(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield z0(r);if(s)return;yield I4(o)}}catch(r){t.releaseLock()}})).apply(this,arguments)}function DO(){return(DO=AO(function*(n,e){var r,t=!0,i=!1;try{for(var o,a,s=iO(n);t=(o=yield z0(s.next())).done,a=yield z0(o.value),!t;t=!0)yield I4(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield z0(s.return()))}finally{if(i)throw r}}})).apply(this,arguments)}function dde(n,e){if("string"==typeof n)return function*(n,e){const t=(null==e?void 0:e.chunkSize)||262144;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*(n,e={}){const{chunkSize:t=sde}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(em(n))return function(n,e){return TO.apply(this,arguments)}(n,e);if(h4(n))return N4(n,e);if(U0(n))return N4(n.body,e);throw new Error("makeIterator")}H0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},H0.prototype.next=function(n){return this._invoke("next",n)},H0.prototype.throw=function(n){return this._invoke("throw",n)},H0.prototype.return=function(n){return this._invoke("return",n)};const IO="Cannot convert supplied data type";function hde(n,e,t){if(e.text&&"string"==typeof n)return n;if((n=>n&&"object"==typeof n&&n.isBuffer)(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(IO)}function fde(n,e,t){return OO.apply(this,arguments)}function OO(){return(OO=oi(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return hde(n,e);if(em(n)&&(n=yield g4(n)),U0(n)){const r=n;return yield Aue(r),e.binary?yield r.arrayBuffer():yield r.text()}if(h4(n)&&(n=dde(n,t)),hue(n)||fue(n))return nde(n);throw new Error(IO)})).apply(this,arguments)}function gde(n,e,t=null){if(t)return t;const i=at({fetch:b4(e,n)},n);return Array.isArray(i.loaders)||(i.loaders=null),i}function mde(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}const P4=()=>{const n=gO();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function F4(n){const e=P4();n=Array.isArray(n)?n:[n];for(const t of n){const i=sO(t);e.find(r=>i===r)||e.unshift(i)}}const yde=/\.([^.]+)$/;function bde(n){return PO.apply(this,arguments)}function PO(){return(PO=oi(function*(n,e=[],t,i){if(!L4(n))return null;let r=k4(n,e,Cn(at({},t),{nothrow:!0}),i);if(r)return r;if(em(n)&&(r=k4(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(B4(n));return r})).apply(this,arguments)}function k4(n,e=[],t,i){if(!L4(n))return null;if(e&&!Array.isArray(e))return sO(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...P4()),function(n){for(const e of n)sO(e)}(r);const s=function(n,e,t,i){const{url:r,type:s}=$S(n),o=r||(null==i?void 0:i.url);let a=null;return null!=t&&t.mimeType&&(a=FO(e,null==t?void 0:t.mimeType)),a=a||function(n,e){const t=e&&yde.exec(e),i=t&&t[1];return i?function(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),a=a||FO(e,s),a=a||function(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(Cde(e,t))return t}else if(ArrayBuffer.isView(e)){if(j4(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&j4(e,0,t))return t;return null}(e,n),a=a||FO(e,null==t?void 0:t.fallbackMimeType),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error(B4(n));return s}function L4(n){return!(n instanceof Response&&204===n.status)}function B4(n){const{url:e,type:t}=$S(n);let i="No valid loader found";return n&&(i+=` data: "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?kO(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?kO(n,0,e):""}(n)}", contentType: "${t}"`),e&&(i+=` url: ${e}`),i}function FO(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e===`application/x.${t.id}`)return t;return null}function Cde(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function j4(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function(n,e,t,i){if(i instanceof ArrayBuffer)return function(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===kO(n,e,i.length);default:return!1}}(n,e,t,r))}function kO(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function WS(n,e,t,i){return LO.apply(this,arguments)}function LO(){return(LO=oi(function*(n,e,t,i){Jc(!i||"object"==typeof i),e&&!Array.isArray(e)&&!rO(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=$S(n),o=mde(e,i),a=yield bde(n,o,t);return a?(i=gde({url:r,parse:WS,loaders:o},t=Nue(t,a,o,r),i),yield Mde(a,n,t,i)):null})).apply(this,arguments)}function Mde(n,e,t,i){return BO.apply(this,arguments)}function BO(){return(BO=oi(function*(n,e,t,i){if(Bue(n),e=yield fde(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(Kue(n,t))return yield Xue(n,e,t,i,WS);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Jc(!n.parseSync),new Error(`${n.id} loader - no parser found and worker is disabled`)})).apply(this,arguments)}function G0(n,e,t,i){return jO.apply(this,arguments)}function jO(){return(jO=oi(function*(n,e,t,i){!Array.isArray(e)&&!rO(e)&&(t=e,e=void 0);const r=b4(t);let s=n;return"string"==typeof n&&(s=yield r(n)),em(n)&&(s=yield r(n)),yield WS(s,e,t)})).apply(this,arguments)}const V4=Er(2,24)-1,Pde=Object.freeze([]),Fde=PS(({oldViewport:n,viewport:e})=>n.equals(e));let tu=new Uint8ClampedArray(0);const kde={data:{type:"data",value:Pde,async:!0},dataComparator:null,_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r=Cn(at({},r),{fetch:Cn(at({},null===(a=r)||void 0===a?void 0:a.fetch),{signal:s})}));let l=o.contains(n);return!l&&!r&&(o.add({resourceId:n,data:G0(n,i),persistent:!1}),l=!0),l?o.subscribe({resourceId:n,onChange:c=>t.internalState.reloadAsyncProp(e,c),consumerId:t.id,requestId:e}):G0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ji.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};let $0=(()=>{class n extends uue{toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}raiseError(t,i){var r,s,o,a;i&&(t.message="".concat(i,": ").concat(t.message)),(null===(r=(s=this.props).onError)||void 0===r?void 0:r.call(s,t))||null===(o=this.context)||void 0===o||null===(a=o.onError)||void 0===a||a.call(o,t,this)}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(t=!0){this.internalState&&(this.internalState.needsRedraw=t)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(t){const{viewport:i}=this.context,r=r4(t,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,o,a]=XU(r,i.pixelProjectionMatrix);return 2===t.length?[s,o]:[s,o,a]}unproject(t){const{viewport:i}=this.context;return i.unproject(t)}projectPosition(t){return function(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(n){const e=at({},n);let{coordinateSystem:t}=n;const{viewport:i,coordinateOrigin:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return t===ji.DEFAULT&&(t=i.isGeospatial?ji.LNGLAT:ji.CARTESIAN),void 0===s&&(e.fromCoordinateSystem=t),void 0===o&&(e.fromCoordinateOrigin=r),e.coordinateSystem=t,e}(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=VU(t,i,r),h=r4(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(l||c));return h}(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ji.DEFAULT||t===ji.LNGLAT||t===ji.CARTESIAN}onHover(t,i){return!!this.props.onHover&&this.props.onHover(t,i)}onClick(t,i){return!!this.props.onClick&&this.props.onClick(t,i)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,i=[]){return i[0]=t+1&255,i[1]=t+1>>8&255,i[2]=t+1>>8>>8&255,i}decodePickingColor(t){pc(t instanceof Uint8Array);const[i,r,s]=t;return i+256*r+65536*s-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(t){for(const i of this.props.extensions)t=zle(t,i.getShaders.call(this,i));return t}shouldUpdateState({changeFlags:s}){return s.propsOrDataChanged}updateState({oldProps:t,props:i,changeFlags:s}){const o=this.getAttributeManager();if(s.dataChanged&&o){const{dataChanged:c}=s;if(Array.isArray(c))for(const u of c)o.invalidateAll(u);else o.invalidateAll()}const l=i.highlightedObjectIndex>=0||i.pickable;if((t.highlightedObjectIndex>=0||t.pickable)!==l&&o){const{pickingColors:c,instancePickingColors:u}=o.attributes,h=c||u;h&&(l&&h.constant&&(h.constant=!1,o.invalidate(h.id)),!h.value&&!l&&(h.constant=!0,h.value=[0,0,0]))}}finalizeState(){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(t){for(const i of this.getModels())i.draw(t)}getPickingInfo({info:t}){const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}activateViewport(t){const i=this.internalState.viewport;this.internalState.viewport=t,(!i||!Fde({oldViewport:i,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all",i=""){const r=this.getAttributeManager();!r||("all"===t?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const i of this.getModels())this._setModelAttributes(i,t)}_updateAttributes(t){const i=this.getAttributeManager();if(!i)return;const r=this.getNumInstances(t),s=this.getStartIndices(t);i.update({data:t.data,numInstances:r,startIndices:s,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});const o=i.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const i=t.update(),r=Object.create(this.props);for(const s in i)Object.defineProperty(r,s,{value:i[s]});return r}return this.props}calculateInstancePickingColors(t,{numInstances:i}){if(t.constant)return;const r=Math.floor(tu.length/3);if(this.internalState.usesPickingColorCache=!0,r<i){i>V4&&Ri.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),tu=x0.allocate(tu,i,{size:3,copy:!0,maxCount:Math.max(i,V4)});const s=Math.floor(tu.length/3),o=[];for(let a=r;a<s;a++)this.encodePickingColor(a,o),tu[3*a+0]=o[0],tu[3*a+1]=o[1],tu[3*a+2]=o[2]}t.value=tu.subarray(0,3*i)}_setModelAttributes(t,i){const o=this.getAttributeManager().getShaderAttributes(i,t.userData.excludeAttributes||{});t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,s=i||r,o=s.getVertexOffset(t),a=s.getVertexOffset(t+1);s.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;this.internalState.usesPickingColorCache&&r.value.buffer!==tu.buffer&&(r.value=tu.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}getNumInstances(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(t.data)}getStartIndices(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){To("layer.initialize",this),this._initState(),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const t=this.needsUpdate();To("layer.update",this,t),t&&this._updateState()}_updateState(){const t=this.props,i=this.context.viewport,r=this._updateUniformTransition();this.internalState.propsInTransition=r,this.context.viewport=this.internalState.viewport||i,this.props=r;try{const s=this._getUpdateParams(),o=this.getModels();if(this.context.gl)this.updateState(s);else try{this.updateState(s)}catch(l){}for(const l of this.props.extensions)l.updateState.call(this,s,l);const a=this.getModels()[0]!==o[0];this._updateModules(s,a),this.isComposite?this._renderLayers(s):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=i,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){To("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}drawLayer({moduleParameters:t=null,uniforms:i={},parameters:r={}}){this._updateAttributeTransition();const s=this.props;this.props=this.internalState.propsInTransition||s;const{opacity:o}=this.props;i.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(i)||[0,0];$u(this.context.gl,{polygonOffset:l}),fc(this.context.gl,r,()=>{const c={moduleParameters:t,uniforms:i,parameters:r,context:this.context};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=s}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(t){const{changeFlags:i}=this.internalState;for(const s in t)if(t[s]){let o=!1;switch(s){case"dataChanged":Array.isArray(i[s])&&(i[s]=Array.isArray(t[s])?i[s].concat(t[s]):t[s],o=!0);default:i[s]||(i[s]=t[s],o=!0)}o&&To("layer.changeFlag",this,s,t)}const r=i.dataChanged||i.updateTriggersChanged||i.propsChanged||i.extensionsChanged;i.propsOrDataChanged=r,i.somethingChanged=r||t.viewportChanged||t.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(t,i){const r=function(n,e){const t=RU({newProps:n,oldProps:e,propTypes:$I(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(n,e){if(null===e)return"oldProps is null, initial diff";let t=null;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function(n,e){if(null===e)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&NU(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&NU(n,e,r)&&(t[r]=!0,i=t);return i}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Fle(n,e),transitionsChanged:Rle(n,e)}}(t,i);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged)this.internalState.uniformTransitions.add(s,i[s],t[s],t.transitions[s]);return this.setChangeFlags(r)}validateProps(){!function(n){const e=$I(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}setModuleParameters(t){for(const i of this.getModels())i.updateModuleSettings(t)}updateAutoHighlight(t){this.props.autoHighlight&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const i={pickingSelectedColor:t.picked?t.color:null},{highlightColor:r}=this.props;t.picked&&"function"==typeof r&&(i.pickingHighlightColor=r(t)),this.setModuleParameters(i),this.setNeedsRedraw()}_updateModules({props:t,oldProps:i},r){const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=t;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==o||i.highlightColor!==a){const l={};s||(l.pickingSelectedColor=null),Array.isArray(a)&&(l.pickingHighlightColor=a),Number.isInteger(o)&&(l.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let i=!1;i=i||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const r=this.getAttributeManager(),s=r&&r.getNeedsRedraw(t);return i=i||s,i}_getAttributeManager(){return new Sle(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){pc(!this.internalState&&!this.state),pc(isFinite(this.props.coordinateSystem));const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new due({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ri.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Mle(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(t){To("layer.matched",this,this===t);const{state:i,internalState:r}=t;this!==t&&(this.internalState=r,this.internalState.layer=this,this.state=i,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}return n.layerName="Layer",n.defaultProps=kde,n})(),U4=(()=>{class n extends $0{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:i}=t;return i&&i.__source&&i.__source.parent&&i.__source.parent.id===this.id&&(t.object=i.__source.object,t.index=i.__source.index),t}renderLayers(){return null}filterSubLayer(t){return!0}shouldRenderSubLayer(t,i){return i&&i.length}getSubLayerClass(t,i){const{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||i}getSubLayerRow(t,i,r){return t.__source={parent:this,object:i,index:r},t}getSubLayerAccessor(t){if("function"==typeof t){const i={data:this.props.data,target:[]};return(r,s)=>r&&r.__source?(i.index=r.__source.index,t(r.__source.object,i)):t(r,s)}return t}getSubLayerProps(t={}){const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:g,positionFormat:m,modelMatrix:D,extensions:O,fetch:W,_subLayerProps:$}=this.props,pe={opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:g,positionFormat:m,modelMatrix:D,extensions:O,fetch:W},Re=$&&$[t.id],Ve=Re&&Re.updateTriggers,We=t.id||"sublayer";if(Re){const rt=this.constructor._propTypes,wt=t.type?t.type._propTypes:{};for(const vt in Re){const At=wt[vt]||rt[vt];At&&"accessor"===At.type&&(Re[vt]=this.getSubLayerAccessor(Re[vt]))}}Object.assign(pe,t,Re),pe.id="".concat(this.props.id,"-").concat(We),pe.updateTriggers=at(at({all:this.props.updateTriggers.all},t.updateTriggers),Ve);for(const rt of O){const wt=rt.getSubLayerProps.call(this,rt);wt&&Object.assign(pe,wt,{updateTriggers:Object.assign(pe.updateTriggers,wt.updateTriggers)})}return pe}_updateAutoHighlight(t){for(const i of this.getSubLayers())i.updateAutoHighlight(t)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:t}=this.internalState;const i=!t||this.needsUpdate();i&&(t=this.renderLayers(),t=SI(t,Boolean),this.internalState.subLayers=t),To("compositeLayer.renderLayers",this,i,t);for(const r of t)r.parent=this}}return n.layerName="CompositeLayer",n})();const Bde=/([0-9]+\.?[0-9]*)(%|px)/;function qS(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=n.match(Bde);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function YS(n,e){return n.relative?Math.round(n.position*e):n.position}function W0(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&W0(i,r)))return!1}return!0}class VO{constructor(e={}){const{id:t=null,x:i=0,y:r=0,width:s="100%",height:o="100%",projectionMatrix:a=null,fovy:l=50,near:c=.1,far:u=1e3,modelMatrix:h=null,viewportInstance:p=null,type:g=Jg}=e;pc(!p||p instanceof Jg),this.viewportInstance=p,this.id=t||this.constructor.displayName||"view",this.type=g,this.props=Cn(at({},e),{id:this.id,projectionMatrix:a,fovy:l,near:c,far:u,modelMatrix:h}),this._parseDimensions({x:i,y:r,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):W0(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return this._getViewport(i,r)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t=at({},e);for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){return{x:YS(this._x,e),y:YS(this._y,t),width:YS(this._width,e),height:YS(this._height,t)}}_getControllerProps(e){let t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),at(at({},e),t)):null}_getViewport(e,t){const{type:i}=this;return new i(at(at(at({},e),this.props),t))}_parseDimensions({x:e,y:t,width:i,height:r}){this._x=qS(e),this._y=qS(t),this._width=qS(i),this._height=qS(r)}}const q0=()=>{},z4={transitionEasing:n=>n,transitionInterruption:1,onTransitionStart:q0,onTransitionInterrupt:q0,onTransitionEnd:q0};class jde{constructor(e,t={}){this.ControllerState=e,this.props=at(at({},z4),t),this.propsInTransition=null,this.transition=new F0(t.timeline),this.onViewStateChange=t.onViewStateChange||q0,this.onStateChange=t.onStateChange||q0,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(e=at(at({},z4),e),this.props=e,this._shouldIgnoreViewportChange(i,e))return t;if(this._isTransitionEnabled(e)){const{interruption:r,endProps:s}=this.transition.settings,o=at(at({},i),2===r?s:this.propsInTransition||i);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&Boolean(i)}_isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(i),{transitionInterpolator:s}=t,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(t)}}_onTransitionUpdate(e){const{time:t,settings:{interpolator:i,startProps:r,endProps:s,duration:o,easing:a}}=e,l=a(t/o),c=i.interpolateProps(r,s,l);this.propsInTransition=new this.ControllerState(at(at({},this.props),c)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}const H4=["longitude","latitude","zoom","bearing","pitch"],Ude=["longitude","latitude","zoom"];class G4 extends class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare||Object.keys(t))if(!(i in e)||!(i in t)||!C0(e[i],t[i]))return!1;return!0}initializeProps(e,t){let i;if(this._propsToExtract){const r={},s={};for(const o of this._propsToExtract)r[o]=e[o],s[o]=t[o];i={start:r,end:s}}else i={start:e,end:t};return this._checkRequiredProps(i.start),this._checkRequiredProps(i.end),i}interpolateProps(e,t,i){return t}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(t=>{const i=e[t];pc(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}{constructor(e={}){super((Array.isArray(e)?e:e.transitionProps)||{compare:H4,extract:H4,required:Ude}),this.opts=e}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),l=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(l),aroundPosition:l,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=yS(e[s]||0,t[s]||0,i);if(t.aroundPosition){const s=this.opts.makeViewport(at(at({},t),r));Object.assign(r,s.panByPosition(t.aroundPosition,yS(e.around,t.around,i)))}return r}}const dh={transitionDuration:0},zde={transitionDuration:300,transitionEasing:n=>n,transitionInterruption:1},XS=n=>1-(1-n)*(1-n),tm_WHEEL=["wheel"],tm_PAN=["panstart","panmove","panend"],tm_PINCH=["pinchstart","pinchmove","pinchend"],tm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],tm_DOUBLE_TAP=["doubletap"],tm_KEYBOARD=["keydown"];class UO{constructor(e,t={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new jde(e,Cn(at({},t),{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));const i=this.linearTransitionProps;this._transition=i&&Cn(at({},zde),{transitionInterpolator:new G4({transitionProps:i})}),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:t}=this;this.controllerState=new t(at(at({makeViewport:this.makeViewport},this.controllerStateProps),this._state));const i=this._eventStartBlocked;switch(e.type){case"panstart":return!i&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!i&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!i&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:t,y:i}=this.controllerStateProps,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.controllerStateProps;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:t}=e;!0===t&&(t=300),this.inertia=t;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=Boolean(this.onViewStateChange);this.toggleEvents(tm_WHEEL,u&&i),this.toggleEvents(tm_PAN,u&&(r||s)),this.toggleEvents(tm_PINCH,u&&(a||l)),this.toggleEvents(tm_TRIPLE_PAN,u&&l),this.toggleEvents(tm_DOUBLE_TAP,u&&o),this.toggleEvents(tm_KEYBOARD,u&&c),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t={},i={}){const r=at(at({},e.getViewportProps()),t),s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,dh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,dh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,Cn(at({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:XS}),{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,dh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,Cn(at({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:XS}),{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,Cn(at({},this._getTransitionProps({around:t})),{transitionDuration:r?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,dh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,dh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,Cn(at({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:XS}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(i,dh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,dh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t,_lastPinchEvent:i}=this;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),l=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,Cn(at({},this._getTransitionProps({around:r})),{transitionDuration:t,transitionEasing:XS}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),c.isZooming=!0;break;case"Equal":l=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":t?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":t?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(r),c.isPanning=!0);break;case"ArrowUp":t?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(r),c.isPanning=!0);break;case"ArrowDown":t?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{_transition:t}=this;return t?e?Cn(at({},t),{transitionInterpolator:new G4(Cn(at({},e),{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):t:dh}}class $4{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const hh_target=[0,0,0];class QS extends $4{constructor({makeViewport:e,width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=hh_target,zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:u=-(1/0),maxZoom:h=Infinity,startPanPosition:p,startRotatePos:g,startRotationX:m,startRotationOrbit:D,startZoomPosition:O,startZoom:W}){super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:h}),this._state={startPanPosition:p,startRotatePos:g,startRotationX:m,startRotationOrbit:D,startZoomPosition:O,startZoom:W},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this._state.startPanPosition||t;if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:l}=this._viewportProps;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let c;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),c={rotationX:s+(e[1]-r[1])/l*180,rotationOrbit:o+180*u}}else c={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i=at({},this._viewportProps),{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){const{zoom:r}=this._viewportProps;let{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=r,o=this._unproject(t)||this._unproject(e));const a=this._calculateNewZoom({scale:i,startZoom:s}),l=this.makeViewport(Cn(at({},this._viewportProps),{zoom:a}));return this._getUpdatedState(at({zoom:a},l.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Number.isFinite(t)||(t=this._viewportProps.zoom),Va(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this._viewportProps;return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new QS(at(at(at({},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Va(r,i,t),e.rotationX=Va(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function(n,e){const t=n%360;return t<0?360+t:t}(a+180)-180),e}}class Gde extends UO{constructor(e){super(QS,e)}get linearTransitionProps(){return["target","zoom","rotationX","rotationOrbit"]}}class $de extends UO{constructor(e){e.dragMode=e.dragMode||"pan",super(QS,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const Wde=(new qn).lookAt({eye:[0,0,1]});function qde({width:n,height:e,near:t,far:i}){return n=n||1,e=e||1,(new qn).ortho({left:-n/2,right:n/2,bottom:-e/2,top:e/2,near:t,far:i})}class Yde extends Jg{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,c=Math.pow(2,o);super(Cn(at({},e),{longitude:null,position:a,viewMatrix:Wde.clone().scale([c,c*(l?-1:1),c]),projectionMatrix:qde({width:t,height:i,near:r,far:s}),zoom:o}))}panByPosition(e,t){const r=BS([],e,UU([],L0(t,this.pixelUnprojectionMatrix)));return{target:BS([],this.center,r)}}}let Kde=(()=>{class n extends VO{constructor(t){super(Cn(at({},t),{type:Yde}))}get controller(){return this._getControllerProps({type:$de})}}return n.displayName="OrthographicView",n})();const ZS=Math.PI/180;function Xde({height:n,fovy:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o=.5/Math.tan(e*ZS/2),a="Z"===t?[0,0,1]:[0,1,0],l="Z"===t?[0,-o,0]:[0,0,o],c=(new qn).lookAt({eye:l,up:a});c.rotateX(i*ZS),"Z"===t?c.rotateZ(r*ZS):c.rotateY(r*ZS);const u=Math.pow(2,s)/(n||1);return c.scale(u),c}class Qde extends Jg{constructor(e){const{height:t,fovy:i,orbitAxis:r,target:s=[0,0,0],rotationX:o=0,rotationOrbit:a=0,zoom:l=0}=e;super(Cn(at({},e),{longitude:null,viewMatrix:Xde({height:t,fovy:i,orbitAxis:r,rotationX:o,rotationOrbit:a,zoom:l}),fovy:i,position:s,zoom:l})),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,l,c]=L0([i,o,s],this.pixelUnprojectionMatrix);return[a,l,c]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}let Zde=(()=>{class n extends VO{constructor(t={}){const{orbitAxis:i="Z"}=t;super(Cn(at({},t),{orbitAxis:i,type:Qde}))}get controller(){return this._getControllerProps({type:Gde})}}return n.displayName="OrbitView",n})();const Jde=[255,255,255],ehe=1;let the=0;class W4{constructor(e={}){const{color:t=Jde}=e,{intensity:i=ehe}=e;this.id=e.id||"ambient-".concat(the++),this.color=t,this.intensity=i,this.type="ambient"}}const nhe=[255,255,255],ihe=1,rhe=[0,0,-1];let she=0;class q4{constructor(e={}){const{color:t=nhe}=e,{intensity:i=ihe}=e,{direction:r=rhe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(she++),this.color=t,this.intensity=i,this.type="directional",this.direction=new Ao(r).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class Y4{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props=at({},e)}preRender(){}getModuleParameters(){}cleanup(){}}class zO extends class{constructor(e,t={}){const{id:i="pass"}=t;this.id=i,this.gl=e,this.props=at({},t)}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}{render(e){return $u(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:t,views:i,onViewportActive:r,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;s&&function(n){$u(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(o);const a=[];for(const l of t){const c=l.viewport||l,u=i&&i[c.id];r(c);const h=this._getDrawLayerParams(c,e);e.view=u;const p=c.subViewports||[c];for(const g of p){e.viewport=g;const m=this._drawLayersInViewport(o,e,h);a.push(m)}}return a}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,effects:s,moduleParameters:o}){const a=[],l=K4(),c={viewport:e,isPicking:i.startsWith("picking"),renderPass:i};for(let u=0;u<t.length;u++){const h=t[u],p=this._shouldDrawLayer(h,c,r),m={shouldDrawLayer:p,layerRenderIndex:l(h,p)};p&&(m.moduleParameters=this._getModuleParameters(h,s,i,o),m.layerParameters=this.getLayerParameters(h,u)),a[u]=m}return a}_drawLayersInViewport(e,{layers:t,pass:i,viewport:r,view:s},o){const a=function(n,{viewport:e}){const t=n.canvas?n.canvas.clientHeight||n.canvas.height:100,i=e,r=jg(n);return[i.x*r,(t-i.y-i.height)*r,i.width*r,i.height*r]}(e,{viewport:r});if(s&&s.props.clear){const c=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;fc(e,{scissorTest:!0,scissor:a},()=>fI(e,c))}const l={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};$u(e,{viewport:a});for(let c=0;c<t.length;c++){const u=t[c],{shouldDrawLayer:h,layerRenderIndex:p,moduleParameters:g,layerParameters:m}=o[c];if(h&&u.props.pickable&&l.pickableCount++,u.isComposite)l.compositeCount++;else if(h){l.visibleCount++,g.viewport=r;try{u.drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:m})}catch(D){u.raiseError(D,"drawing ".concat(u," to ").concat(i))}}}return l}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t){return e.props.parameters}_shouldDrawLayer(e,t,i){if(!this.shouldDrawLayer(e)||!e.props.visible||(t.layer=e,i&&!i(t)))return!1;let s=e.parent;for(;s;){if(!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:jg(this.gl)});if(t)for(const o of t)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,t),r)}}function K4(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in t){const u=t[l]=t[l]||K4(e[l],e);c=u(r,s),t[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),t[a]=null):c=n;return s&&c>=n&&(n=c+1),e[a]=c,c};return i}class che extends zO{constructor(e,t){super(e,t),this.shadowMap=new _a(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new zg(e,{format:33189,width:1,height:1}),this.fbo=new Fs(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;fc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=jg(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render(Cn(at({},e),{target:t,pass:"shadow"}))})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const dhe=Object.keys(ji).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(ji[n],";")).join(""),hhe=Object.keys(Kc).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Kc[n],";")).join(""),fhe="".concat(dhe,"\n").concat(hhe,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),phe={},HO={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:fhe,getUniforms:function(n=phe){return n.viewport?function({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=ji.DEFAULT,coordinateOrigin:r,autoWrapLongitude:s=!1}={}){i===ji.DEFAULT&&(i=n.isGeospatial?ji.LNGLAT:ji.CARTESIAN);const o=_ce({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||pce,o}(n):{}}},yhe=PS(function({viewport:n,center:e}){return new qn(n.viewProjectionMatrix).invert().transform(e)}),bhe=PS(function({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function(n,e){const[t,i,r]=n,s=L0([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Ao(n.center).negate()),l=s.map(u=>a.transform(u)),c=(new qn).ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});t.push(c.multiplyRight(o))}return t}),vhe=[0,0,0,1],whe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],GO={name:"shadow",dependencies:[HO],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>{if(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0){const{shadowEnabled:t=!0}=n;return t&&n.shadowMatrices&&n.shadowMatrices.length>0?function(n={},e={}){const t={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||vhe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},i=yhe({viewport:n.viewport,center:e.project_uCenter}),r=[],s=bhe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let o=0;o<n.shadowMatrices.length;o++){const a=s[o],l=a.clone().translate(new Ao(n.viewport.center).negate());e.project_uCoordinateSystem===ji.LNGLAT&&e.project_uProjectionMode===Kc.WEB_MERCATOR?(s[o]=l,r[o]=i):(s[o]=a.clone().multiplyRight(whe),r[o]=l.transform(i))}for(let o=0;o<s.length;o++)t["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],t["shadow_uProjectCenters[".concat(o,"]")]=r[o],t["shadow_uShadowMap".concat(o)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[o]:n.dummyShadowMap;return t}(n,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},Ahe={color:[255,255,255],intensity:1},X4=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],The=[0,0,0,200/255];class $O extends Y4{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=The,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=N0.getDefaultProgramManager(e),GO&&this.programManager.addDefaultModule(GO)),this.dummyShadowMap||(this.dummyShadowMap=new _a(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(GO),this.programManager=null)}_createLightMatrix(){const e=[];for(const t of this.directionalLights){const i=(new qn).lookAt({eye:new Ao(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new che(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new W4(Ahe),this.directionalLights.push(new q4(X4[0]),new q4(X4[1])))}}let Mhe=1,Dhe=1;class Q4{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=Mhe++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Dhe++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Ihe{constructor(e,t,i){this.id=e,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=G0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Ohe{constructor({gl:e,protocol:t}){this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new Ihe(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i];r.resource&&r.resource.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),i&&(o[t]=a,a.onChange=r,a.resource=i,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Rhe=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},HO],Nhe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Phe(n){const e=N0.getDefaultProgramManager(n);for(const t of Rhe)e.addDefaultModule(t);for(const t of Nhe)e.addShaderHook(t);return e}const Lhe=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class Bhe{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Ohe({gl:e,protocol:"deck://"}),this.context=Cn(at({},Lhe),{layerManager:this,gl:e,deck:t,programManager:e&&Phe(e),stats:i||new oI({id:"deck.gl"}),viewport:r||new Jg({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new Q4,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){To("layerManager.setLayers",this,t,e),this.lastRenderedLayers=e,e=SI(e,Boolean);for(const i of e)i.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return To("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?Ri.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&Ri.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite&&r.getSubLayers()}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class jhe{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return"string"==typeof e?this.views.find(t=>t.id===e):e}getViewState(e){const t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=SI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!W0(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ri.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)(at({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height})},t))}_updateController(e,t,i,r){let s=e.controller;return s?(s=Cn(at(at(at({},t),e.props),s),{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height}),r?r.setProps(s):r=this._createController(e,s),r):null}_rebuildViewports(){const{width:e,height:t,views:i}=this,r=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=i.length;o--;){const a=i[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:t,viewState:l});let u=r[a.id];a.controller&&!u&&(s=!0),(s||!a.controller)&&u&&(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,l,c,u),this._viewports.unshift(c)}for(const o in r)r[o]&&!this.controllers[o]&&r[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class Uhe extends $4{constructor({makeViewport:e,width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,maxZoom:u=20,minZoom:h=0,maxPitch:p=60,minPitch:g=0,startPanLngLat:m,startZoomLngLat:D,startRotatePos:O,startBearing:W,startPitch:$,startZoom:pe,normalize:Re}={}){pc(Number.isFinite(s)),pc(Number.isFinite(r)),pc(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:u,minZoom:h,maxPitch:p,minPitch:g,normalize:Re}),this._state={startPanLngLat:m,startZoomLngLat:D,startRotatePos:O,startBearing:W,startPitch:$,startZoom:pe},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this._state.startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this._state;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return a=e?this._calculateNewPitchAndBearing(Cn(at({},this._getRotationParams(e,r)),{startBearing:s,startPitch:o})):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this._state;Number.isFinite(r)||(r=this._viewportProps.zoom,s=this._unproject(t)||this._unproject(e));const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport(Cn(at({},this._viewportProps),{zoom:o}));return this._getUpdatedState(at({zoom:o},a.panByPosition(s,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i=at({},this._viewportProps),{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}_zoomFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor(at(at(at({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Va(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Va(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,function({width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s=0,bearing:o=0}){(t<-180||t>180)&&(t=GU(t+180,360)-180),(o<-180||o>180)&&(o=GU(o+180,360)-180);const a=qI(e/512);if(r<=a)r=a,i=0;else{const l=e/2/Math.pow(2,r),c=Zg([0,l])[1];if(i<c)i=c;else{const u=Zg([0,512-l])[1];i>u&&(i=u)}}return{width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s,bearing:o}}(e)),e}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Va(t+Math.log2(e),r,i)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:t,startBearing:i,startPitch:r}){t=Va(t,-1,1);const{minPitch:s,maxPitch:o}=this._viewportProps;let l=r;return t>0?l=r+t*(o-r):t<0&&(l=r-t*(s-r)),{pitch:l,bearing:i+180*e}}_getRotationParams(e,t){const i=e[0]-t[0],r=e[1]-t[1],s=e[1],o=t[1],{width:a,height:l}=this._viewportProps,c=i/a;let u=0;return r>0?Math.abs(l-o)>5&&(u=r/(o-l)*1.2):r<0&&o>5&&(u=1-s/o),u=Math.min(1,Math.max(-1,u)),{deltaScaleX:c,deltaScaleY:u}}}class zhe extends UO{constructor(e){e.dragMode=e.dragMode||"pan",super(Uhe,e)}setProps(e){const t=this.controllerStateProps;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState(at(at({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}let Hhe=(()=>{class n extends VO{constructor(t){super(Cn(at({},t),{type:i4}))}get controller(){return this._getControllerProps({type:zhe})}}return n.displayName="MapView",n})();const Ghe=new $O;class $he{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!W0(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof $O)||this._internalEffects.push(Ghe)}}class Whe extends zO{}const J4={blendFunc:[1,0,32771,0],blendEquation:32774};class e5 extends zO{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},pass:h="picking",redrawReason:p,pickZ:g}){const m=this.gl;return this.pickZ=g,fc(m,Cn(at({scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},J4),{blend:!g}),()=>{super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pass:h,redrawReason:p})})}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t){const i=this.pickZ?{blend:!1}:Cn(at({},J4),{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return at(at({},e.props.parameters),i)}}class Yhe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Whe(e),this.pickLayersPass=new e5(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||Fs.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(Cn(at({},e),{target:i}));this._postRender(e.effects,e),this.renderCount++,To("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new Fs(this.gl),new Fs(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const Khe={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Xhe({pickedColors:n,layers:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){if(n){const{x:o,y:a,width:l,height:c}=s;let u=r*r,h=-1,p=0;for(let g=0;g<c;g++){const m=g+a-i,D=m*m;if(D>u)p+=4*l;else for(let O=0;O<l;O++){if(n[p+3]-1>=0){const $=O+o-t,pe=$*$+D;pe<=u&&(u=pe,h=p)}p+=4}}if(h>=0){const g=n[h+3]-1,m=n.slice(h,h+4),D=e[g];if(D){const O=D.decodePickingColor(m),W=Math.floor(h/4/l);return{pickedColor:m,pickedLayer:D,pickedObjectIndex:O,pickedX:o+(h/4-W*l),pickedY:a+W}}Ri.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Khe}function t5({pickInfo:n,mode:e,viewports:t,layerFilter:i,pixelRatio:r,x:s,y:o,z:a}){const l=n&&n.pickedLayer,u=function(n,e,t){for(let i=n.length-1;i>=0;i--){const r=n[i];if(r.containsPixel(e)&&(!t||t(r)))return r}return n[0]}(t,{x:s,y:o},i&&l&&(p=>i({layer:l,viewport:p,isPicking:!0,renderPass:"picking:".concat(e)}))),h=u&&u.unproject([s-u.x,o-u.y],{targetZ:a});return{color:null,layer:null,viewport:u,index:-1,picked:!1,x:s,y:o,pixel:[s,o],coordinate:h,devicePixel:n&&[n.pickedX,n.pickedY],pixelRatio:r}}function Zhe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===i){const h=t.index,p=t.layerId,g=o&&o.props.id;if(g!==p||a!==h){if(g!==p){const m=r.find(D=>D.props.id===p);m&&l.unshift(m)}t.layerId=g,t.index=a,t.info=null}}const c=t5(n),u=new Map;return u.set(null,c),l.forEach(h=>{let p=at({},c);h===o&&(p.color=s,p.index=a,p.picked=!0),p=n5({layer:h,info:p,mode:i}),h===o&&"hover"===i&&(t.info=p),u.set(p.layer.id,p),"hover"===i&&p.layer.updateAutoHighlight(p)}),u}function n5({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class efe{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new e5(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?i.find(p=>p.id===o):null,c=a&&r.find(p=>p.id===a)||r[0],u=c&&c.unproject([e-c.x,t-c.y]),h={x:e,y:t,viewport:c,coordinate:u,layer:l};return l?at(at({},s),h):Object.assign(h,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new Fs(e),Fs.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new Fs(e),this.depthFBO.attach({36064:new _a(e,{format:Si(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length>255?(Ri.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u}){if(!(e=this._getPickable(e)))return{result:[],emptyInfo:t5({viewports:i,x:r,y:s})};this._resizeBuffer();const h=jg(this.gl),p=iI(this.gl,[r,s],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(o*h),{width:D,height:O}=this.pickingFBO,W=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:D,deviceHeight:O});let $;const pe=[],Re={};for(let Ve=0;Ve<a;Ve++){const rt=Xhe({pickedColors:W&&this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:u,deviceRect:W,pass:"picking:".concat(l),redrawReason:l}),layers:e,deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:W});let wt;if(rt.pickedLayer&&c&&this.depthFBO&&(wt=this._drawAndSample({layers:[rt.pickedLayer],views:t,viewports:i,onViewportActive:u,deviceRect:{x:rt.pickedX,y:rt.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0})[0]*i[0].distanceScales.metersPerUnit[2]+i[0].position[2]),rt.pickedColor&&Ve+1<a){const vt=rt.pickedColor[3]-1;Re[vt]=!0,e[vt].disablePickingIndex(rt.pickedObjectIndex)}$=Zhe({pickInfo:rt,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,layerFilter:this.layerFilter,viewports:i,x:r,y:s,z:wt,pixelRatio:h});for(const vt of $.values())vt.layer&&pe.push(vt);if(!rt.pickedColor)break}for(const Ve in Re)e[Ve].restorePickingColors();return{result:pe,emptyInfo:$&&$.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u}){if(!(e=this._getPickable(e)))return[];this._resizeBuffer();const h=jg(this.gl),p=iI(this.gl,[r,s],!0),g=p.x,m=p.y+p.height,D=iI(this.gl,[r+o,s+a],!0),W=D.y,Re=function({pickedColors:n,layers:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4){const r=n[i+3]-1;if(r>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e[r];a?t.set(o,{pickedColor:s,pickedLayer:a,pickedObjectIndex:a.decodePickingColor(s)}):Ri.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}({pickedColors:this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:u,deviceRect:{x:g,y:W,width:D.x+D.width-g,height:m-W},pass:"picking:".concat(l),redrawReason:l}),layers:e}),Ve=new Map,We=Number.isFinite(c);for(let rt=0;rt<Re.length&&!(We&&Ve.size>=c);rt++){const wt=Re[rt];let vt={color:wt.pickedColor,layer:null,index:wt.pickedObjectIndex,picked:!0,x:r,y:s,width:o,height:a,pixelRatio:h};vt=n5({layer:wt.pickedLayer,info:vt,mode:l}),Ve.has(vt.object)||Ve.set(vt.object,vt)}return Array.from(Ve.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,pass:o,redrawReason:a,pickZ:l}){if(e.length<1)return null;const c=l?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:c,deviceRect:s,pass:o,redrawReason:a,pickZ:l});const{x:u,y:h,width:p,height:g}=s,m=new(l?Float32Array:Uint8Array)(p*g*4);return _S(c,{sourceX:u,sourceY:h,sourceWidth:p,sourceHeight:g,target:m}),m}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),l=Math.min(r,e+i+1)-o,c=Math.min(s,t+i+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const tfe={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class nfe{constructor(e){const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,tfe),t.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,i){const r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}remove(){this.el&&this.el.remove()}}function i5(n,e){if(!n)throw new Error(e)}const nu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},r5=nu.global||nu.self||nu.window,rfe="object"!=typeof process||"[object process]"!==String(process)||process.browser,s5="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:sfe}=(s5&&parseFloat(s5[1]),r5),WO="undefined"!=typeof Image,qO="undefined"!=typeof ImageBitmap,ofe=Boolean(sfe),YO=!!rfe||ofe;function o5(n){const e=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}function a5(n){switch(o5(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}const cfe=/^data:image\/svg\+xml/,ufe=/\.svg((\?|#).*)?$/;function KO(n){return n&&(cfe.test(n)||ufe.test(n))}function dfe(n,e){if(KO(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return c5(n,e)}function c5(n,e){if(KO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function u5(n,e,t){return XO.apply(this,arguments)}function XO(){return(XO=oi(function*(n,e,t){const i=dfe(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield hfe(s||i,e)}finally{s&&r.revokeObjectURL(s)}})).apply(this,arguments)}function hfe(n,e){return QO.apply(this,arguments)}function QO(){return(QO=oi(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error(`Could not load image ${n}: ${s}`))}catch(s){r(s)}})})).apply(this,arguments)}const ffe={};let d5=!0;function pfe(n,e,t){return ZO.apply(this,arguments)}function ZO(){return(ZO=oi(function*(n,e,t){let i;i=KO(t)?yield u5(n,e,t):c5(n,t);const r=e&&e.imagebitmap;return yield gfe(i,r)})).apply(this,arguments)}function gfe(n){return JO.apply(this,arguments)}function JO(){return(JO=oi(function*(n,e=null){if((mfe(e)||!d5)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),d5=!1}return yield createImageBitmap(n)})).apply(this,arguments)}function mfe(n){for(const e in n||ffe)return!1;return!0}const iu=!1,Y0=!0;function eR(n){const e=K0(n);return function(n){const e=K0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,iu)?{mimeType:"image/png",width:e.getUint32(16,iu),height:e.getUint32(20,iu)}:null}(e)||function(n){const e=K0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,iu)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,iu);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,iu),width:e.getUint16(s+7,iu)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,iu)}return null}(e)||function(n){const e=K0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,iu)?{mimeType:"image/gif",width:e.getUint16(6,Y0),height:e.getUint16(8,Y0)}:null}(e)||function(n){const e=K0(n);return e.byteLength>=14&&16973===e.getUint16(0,iu)&&e.getUint32(2,Y0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Y0),height:e.getUint32(22,Y0)}:null}(e)}function K0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function Efe(n,e){const{mimeType:t}=eR(n)||{},{_parseImageNode:i}=r5;return i5(i),i(n,t,e)}function tR(){return(tR=oi(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{};let a;switch(xfe(r)){case"imagebitmap":a=yield pfe(n,e,s);break;case"image":a=yield u5(n,e,s);break;case"data":a=yield Efe(n,e);break;default:i5(!1)}return"data"===r&&(a=a5(a)),a})).apply(this,arguments)}function xfe(n){switch(n){case"auto":case"data":return function(){if(qO)return"imagebitmap";if(WO)return"image";if(YO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return qO||WO||YO;case"imagebitmap":return qO;case"image":return WO;case"data":return YO;default:throw new Error(`@loaders.gl/images: image ${n} not supported in this environment`)}}(n),n}}const nR={id:"image",module:"images",name:"Images",version:"3.0.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,e,t){return tR.apply(this,arguments)},tests:[n=>Boolean(eR(new DataView(n)))],options:{image:{type:"auto",decode:!0}}};var nm=Je(761);const Afe={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},X0="8.5.8",JS=nm.CO.deck&&nm.CO.deck.VERSION;if(JS&&JS!==X0)throw new Error("deck.gl - multiple versions detected: ".concat(JS," vs ").concat(X0));JS||(Ri.log(1,"deck.gl ".concat(X0))(),nm.CO.deck=Object.assign(nm.CO.deck||{},{VERSION:X0,version:X0,log:Ri,_registerLoggers:function(n){TI=n}}),F4([Afe,[nR,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Tfe=nm.CO.deck;class ex extends Wu{get[Symbol.toStringTag](){return"Query"}static isSupported(e,t=[]){const i=Si(e),r=EV(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:tn(!1)}return s}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return ex.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const h5=mS()&&"undefined"!=typeof document;let Lfe=0;class Bfe{constructor(e={}){const{onCreateContext:t=(O=>nV(O)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:g=!0,stats:m=If.get("animation-loop-"+Lfe++)}=e;let{useDevicePixels:D=!0}=e;"useDevicePixelRatio"in e&&(mn.deprecated("useDevicePixelRatio","useDevicePixels")(),D=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:g,useDevicePixels:D}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return tn("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=ex.isSupported(this.gl,["timers"])?new ex(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return oi(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return mn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=h5?new Promise((e,t)=>{h5&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?sI(this.props.gl,e):this.onCreateContext(e),!pS(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){$u(n,nI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,e={}){if(n.canvas)return void function(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(mn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),l=Math.floor(r*o);n.canvas.width=a,n.canvas.height=l,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==l)&&(mn.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,function(n){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels),e);const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Fs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var jfe=Je(524),tx=Je.n(jfe);const Vfe={mousedown:1,mousemove:2,mouseup:4};(function(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function(n,e){for(let t=0;t<n.length;t++)if(n[t].pointerId===i.pointerId)return!0;return!1}(r)||r.push(i)),e.call(this,i)}})(tx().PointerEventInput),function(n){n.prototype.handler=function(t){let i=Vfe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(tx().MouseInput);const Gfe=tx().Manager,ru=tx(),$fe=ru?[[ru.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[ru.Rotate,{enable:!1}],[ru.Pinch,{enable:!1}],[ru.Swipe,{enable:!1}],[ru.Pan,{threshold:0,enable:!1}],[ru.Press,{enable:!1}],[ru.Tap,{event:"doubletap",taps:2,enable:!1}],[ru.Tap,{event:"anytap",enable:!1}],[ru.Tap,{enable:!1}]]:null,g5={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Wfe={doubletap:["tap"]},qfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},rR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Yfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},m5={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Kfe="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",im="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let _5=!1;try{const n={get passive(){return _5=!0,!0}};im.addEventListener("test",n,n),im.removeEventListener("test",n,n)}catch(n){}const Xfe=-1!==Kfe.indexOf("firefox"),{WHEEL_EVENTS:Qfe}=rR,b5=4.000244140625;class epe{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.events=Qfe.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!_5&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;im.WheelEvent&&(Xfe&&e.deltaMode===im.WheelEvent.DOM_DELTA_PIXEL&&(t/=im.devicePixelRatio),e.deltaMode===im.WheelEvent.DOM_DELTA_LINE&&(t*=40));const i={x:e.clientX,y:e.clientY};0!==t&&t%b5==0&&(t=Math.floor(t/b5)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,i)}_onWheel(e,t,i){this.callback({type:"wheel",center:i,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:tpe}=rR,v5="pointermove",w5="pointerover",E5="pointerout",S5="pointerleave";class npe{constructor(e,t,i={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=tpe.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===v5&&(this.enableMoveEvent=t),e===w5&&(this.enableOverEvent=t),e===E5&&(this.enableOutEvent=t),e===S5&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:w5,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:E5,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:S5,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:v5,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:ipe}=rR,x5="keydown";class rpe{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=ipe.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===x5&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:x5,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}const A5="contextmenu";class spe{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===A5&&(this.options.enable=t)}handleEvent(e){!this.options.enable||this.callback({type:A5,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const ope={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},T5={srcElement:"root",priority:0};class ype{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;i&&("object"!=typeof i||i.addEventListener)&&(i={srcElement:i}),i=i?Object.assign({},T5,i):T5;let l=a.get(i.srcElement);l||(l=[],a.set(i.srcElement,l));const c={type:e,handler:t,srcElement:i.srcElement,priority:i.priority};r&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let i=e.srcEvent.target;for(;i&&i!==t.rootElement;){if(this._emit(t,i),t.handled)return;i=i.parentNode}this._emit(t,"root")}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let l=0;l<i.length;l++){const{type:c,handler:u,once:h}=i[l];if(u(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(i[l]),r)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(n){const e=ope[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===r,o=2===r,a=3===r):2===e?(s=Boolean(1&t),o=Boolean(4&t),a=Boolean(2&t)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}(e),function(n,e){const{srcEvent:t}=n;if(!n.center&&!Number.isFinite(t.clientX))return null;const i=n.center||{x:t.clientX,y:t.clientY},r=e.getBoundingClientRect();return{center:i,offsetCenter:{x:(i.x-r.left-e.clientLeft)/(r.width/e.offsetWidth||1),y:(i.y-r.top-e.clientTop)/(r.height/e.offsetHeight||1)}}}(e,t),{handled:!1,rootElement:t})}}const bpe={events:null,recognizers:null,recognizerOptions:{},Manager:Gfe,touchAction:"none",tabIndex:0};class vpe{constructor(e=null,t={}){this.options=Object.assign({},bpe,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:i}=t;i&&this.on(i)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||$fe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(g5).forEach(r=>{const s=this.manager.get(r);s&&g5[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new epe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new npe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new rpe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new spe(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=Wfe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,l=m5[e]||e;let c=a.get(l);c||(c=new ype(this),a.set(l,c),c.recognizerName=Yfe[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,t,i,r,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(m5[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of i.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:t}=e,i=qfe[t.type];i&&this.manager.emit(i,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function Lf(){}const M5={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Lf,onResize:Lf,onViewStateChange:Lf,onInteractionStateChange:Lf,onBeforeRender:Lf,onAfterRender:Lf,onLoad:Lf,onError:(n,e)=>Ri.error(n)(),_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",debug:!1,drawPickingColors:!1};class ix{constructor(e){e=at(at({},M5),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&Ri.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,nm.qs)()&&Ri.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new oI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&x0.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ri.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ri.removed("onLayerClick","onClick")(),e.initialViewState&&!W0(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});!t||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e](at({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport},i));return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),pc(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:i}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u,autoResizeDrawingBuffer:h}=e;return new Bfe({width:t,height:i,useDevicePixels:u,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:r,onCreateContext:p=>nV(Cn(at(at({},s),p),{canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()})),onInitialize:p=>this._setGLContext(p.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Hhe({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let r=i,s=!1;for(const o of t)r=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip){const o=this.props.getTooltip(r);this.tooltip.setTooltip(o,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,sI(e,{enable:!0,copyState:!0})),this.tooltip=new nfe(this.canvas),$u(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new Q4;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new vpe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in Vj)this.eventManager.on(r,this._onEvent);this.viewManager=new jhe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Bhe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new $he,this.deckRenderer=new Yhe(e),this.deckPicker=new efe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;$u(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(at({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ri.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=Cn(at({},this.viewState),{[e.viewId]:t}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=Vj[e.type],i=e.offsetCenter;if(!t||!i)return;const r=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[t.handler]||o.props[t.handler]),l=this.props[t.handler];let c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=If.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ix.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(Y4)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},ix.defaultProps=M5,ix.VERSION=Tfe.VERSION;const rx={name:"project32",dependencies:[HO],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},xpe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},sx=at({inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=xpe){const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=Boolean(n.pickingActive),e.picking_uAttribute=Boolean(n.pickingAttribute)),e}}),D5={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class fh{static get DRAW_MODE(){return D5}constructor(e={}){const{id:t=ga("geometry"),drawMode:i=D5.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?at({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,tn(ArrayBuffer.isView(r.value),`${this._print(i)}: must be typed array or object with value as typed array`),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(tn(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(i=Math.min(i,o.length/a))}return tn(Number.isFinite(i)),i}}const I5=()=>{},Ipe={10241:9987,10240:9729,10242:33071,10243:33071};function Ope(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Rpe(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function Q0(n){return n&&(n.id||n.url)}function O5(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];n[Q0(r)]=Cn(at({},r),{x:s,y:t})}}class kpe{constructor(e,{onUpdate:t=I5,onError:i=I5}){this.gl=e,this.onUpdate=t,this.onError=i,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?Q0(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,data:s,getIcon:o}){e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),o&&(this._getIcon=o),r&&(this._mapping=r),i&&this._updateIconAtlas(i),this._autoPacking&&(s||o)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(s))}get isLoaded(){return 0===this._pendingCount}_updateIconAtlas(e){var t;null===(t=this._texture)||void 0===t||t.delete(),this._texture=null,this._externalTexture=e,this.onUpdate()}_updateAutoPacking(e){const t=Object.values(function(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:s}=ES(n);for(const o of r){s.index++;const a=e(o,s),l=Q0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[l]&&(!t[l]||a.url!==t[l].url)&&(i[l]=Cn(at({},a),{source:o,sourceIndex:s.index}))}return i}(e,this._getIcon,this._mapping)||{});if(t.length>0){const{mapping:i,xOffset:r,yOffset:s,rowHeight:o,canvasHeight:a}=function({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<n.length;l++){const c=n[l];if(!t[Q0(c)]){const{height:h,width:p}=c;i+p+e>o&&(O5(t,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:c,xOffset:i}),i=i+p+e,s=Math.max(s,h)}}return a.length>0&&O5(t,a,r),{mapping:t,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Ope(s+r+e)}}({icons:t,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=i,this._xOffset=r,this._yOffset=s,this._canvasHeight=a,this._texture||(this._texture=new _a(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:Ipe})),this._texture.height!==this._canvasHeight&&(this._texture=function(n,e,t,i){const r=e.width,s=e.height,o=bV(e,{width:t,height:i});return function(n,e,t={}){const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=t;let{targetX:a,targetY:l,targetZ:c,width:u,height:h}=t;const{framebuffer:p,deleteFramebuffer:g}=S0(n);tn(p);const{gl:m,handle:D}=p,O=void 0!==a||void 0!==l||void 0!==c;a=a||0,l=l||0,c=c||0;const W=m.bindFramebuffer(36160,D);tn(e);let $=null;if(e instanceof Of&&($=e,u=Number.isFinite(u)?u:$.width,h=Number.isFinite(h)?h:$.height,$.bind(0),e=$.target),O)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,l,i,r,u,h);break;case 35866:case 32879:Co(m).copyTexSubImage3D(e,s,a,l,c,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);$&&$.unbind(),m.bindFramebuffer(36160,W||null),g&&p.delete()}(e,o,{targetY:0,width:r,height:s}),e.delete(),o}(0,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(t)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,G0(i.url,nR,this._loadOptions).then(r=>{const s=Q0(i),{x:o,y:a,width:l,height:c}=this._mapping[s],u=Rpe(t,r,l,c);this._texture.setSubImageData({data:u,x:o,y:a,width:l,height:c}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const R5=[0,0,0,255],Lpe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:R5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};let Bpe=(()=>{class n extends $0{getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[rx,sx]})}initializeState(){this.state={iconManager:new kpe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:R5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState({oldProps:t,props:i,changeFlags:r}){super.updateState({props:i,oldProps:t,changeFlags:r});const s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c}=i,{iconManager:u}=this.state;u.setProps({loadOptions:i.loadOptions});let h=!1;if(o||this.internalState.isAsyncPropLoading("iconAtlas")?(t.iconAtlas!==i.iconAtlas&&u.setProps({iconAtlas:o,autoPacking:!1}),t.iconMapping!==i.iconMapping&&(u.setProps({iconMapping:a}),h=!0)):u.setProps({autoPacking:!0}),(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.setProps({data:l,getIcon:c}),h&&(s.invalidate("instanceOffsets"),s.invalidate("instanceIconFrames"),s.invalidate("instanceColorModes")),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(){super.finalizeState(),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:i,sizeMinPixels:r,sizeMaxPixels:s,sizeUnits:o,billboard:a,alphaCutoff:l}=this.props,{iconManager:c}=this.state,{viewport:u}=this.context,h=c.getTexture();h&&this.state.model.setUniforms(t).setUniforms({iconsTexture:h,iconsTextureDim:[h.width,h.height],sizeScale:i*("pixels"===o?u.metersPerPixel:1),sizeMinPixels:r,sizeMaxPixels:s,billboard:a,alphaCutoff:l}).draw()}_getModel(t){return new Yg(t,Cn(at({},this.getShaders()),{id:this.props.id,geometry:new fh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}_onUpdate(){this.setNeedsRedraw()}_onError(t){const{onIconError:i}=this.getCurrentLayer().props;i?i(t):Ri.error(t.error)()}getInstanceOffset(t){const i=this.state.iconManager.getIconMapping(t);return[i.width/2-i.anchorX||0,i.height/2-i.anchorY||0]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const i=this.state.iconManager.getIconMapping(t);return[i.x||0,i.y||0,i.width||0,i.height||0]}}return n.layerName="IconLayer",n.defaultProps=Lpe,n})();const P5=[],Vpe={getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};let Upe=(()=>{class n extends Bpe{getShaders(){return Cn(at({},super.getShaders()),{fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(i,{index:r,target:s})=>this.encodePickingColor(r,s)}})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;let{outlineColor:s}=i;s!==r.outlineColor&&(s=s.map(o=>o/255),s[3]=Number.isFinite(s[3])?s[3]:1,this.setState({outlineColor:s})),!i.sdf&&i.outlineWidth&&Ri.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:i,smoothing:r,outlineWidth:s}=this.props,{outlineColor:o}=this.state;t.uniforms=Cn(at({},t.uniforms),{buffer:.75,outlineBuffer:s?Math.max(r,.75*(1-s)):-1,gamma:r,sdf:Boolean(i),outlineColor:o}),super.draw(t)}getInstanceOffset(t){return t?Array.from(t).map(i=>super.getInstanceOffset(i)):P5}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).map(i=>super.getInstanceIconFrame(i)):P5}}return n.layerName="MultiIconLayer",n.defaultProps=Vpe,n})();var zpe=Je(2),Hpe=Je.n(zpe);const $pe=[];function Wpe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function F5(n,e,t,i){let r=0;for(let s=e;s<t;s++){const o=n[s];let a=null;const l=i&&i[o];l&&(a=l.width),r+=a}return r}function k5(n,e,t,i,r,s){let o=e,a=0;for(let l=e;l<t;l++){const c=F5(n,l,l+1,r);a+c>i&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function Kpe(n,e,t,i,r=0,s){void 0===s&&(s=n.length);const o=[];return"break-all"===e?k5(n,r,s,t,i,o):function(n,e,t,i,r,s){let o=e,a=e,l=e,c=0;for(let u=e;u<t;u++)if((" "===n[u]||" "===n[u+1]||u+1===t)&&(l=u+1),l>a){let h=F5(n,a,l,r);c+h>i&&(o<a&&(s.push(a),o=a,c=0),h>i&&(h=k5(n,a,l,i,r,s),o=s[s.length-1])),a=l,c+=h}}(n,r,s,t,i,o),o}function Xpe(n,e,t,i,r,s){let o=0,a=0;for(let l=e;l<t;l++){const c=n[l],u=i[c];u?(a||(a=u.height),r[l]=o+u.width/2,o+=u.width):(Ri.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),r[l]=o,o+=32)}s[0]=o,s[1]=a}function L5(n,e,t,i,r){const s=(n=Array.from(n)).length,o=new Array(s),a=new Array(s),l=new Array(s),c=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,u=[0,0],h=[];let p=0,g=0,m=0;for(let D=0;D<=s;D++){const O=n[D];if(("\n"===O||D===s)&&(m=D),m>g){const W=c?Kpe(n,t,i,r,g,m):$pe;for(let $=0;$<=W.length;$++){const pe=0===$?g:W[$-1],Re=$<W.length?W[$]:m;Xpe(n,pe,Re,r,o,h);for(let Ve=pe;Ve<Re;Ve++)a[Ve]=p+h[1]/2,l[Ve]=h[0];p+=h[1]*e,u[0]=Math.max(u[0],h[0])}g=m}"\n"===O&&(o[g]=0,a[g]=0,l[g]=0,g++)}return u[1]=p,{x:o,y:a,rowWidth:l,size:u}}const B5=function(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),j5="Monaco, monospace",aR=new class{constructor(e=5){this.limit=e,this.clear()}clear(){this._cache={},this._order=[]}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}_deleteCache(e){delete this._cache[e]}_deleteOrder(e){const t=this._order.findIndex(i=>i===e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}(3),nge=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function rge(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function q5(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="baseline",n.textAlign="left"}class sge{constructor(){this.props={fontFamily:j5,fontWeight:"normal",characterSet:B5,fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12},this._key=null,this._atlas=null}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){nge.forEach(o=>{o in e&&(this.props[o]=e[o])});const t=this._key;this._key=this._getKey();const i=function(n,e){const t=aR.get(n);if(!t)return e;const i=[];let s=Object.keys(t.mapping);s=new Set(s);let o=e;return o instanceof Array&&(o=new Set(o)),o.forEach(a=>{s.has(a)||i.push(a)}),i}(this._key,this.props.characterSet),r=aR.get(this._key);if(r&&0===i.length)return void(this._key!==t&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,aR.set(this._key,s)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:l,radius:c,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const p=h.getContext("2d");q5(p,r,o,s);const{mapping:g,canvasHeight:m,xOffset:D,yOffset:O}=function({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o,u=0;for(const p of n)if(!s[p]){const g=e(p,u++);c+g+2*i>r&&(c=0,l++),s[p]={x:c+i,y:a+l*(t+2*i)+i,width:g,height:t},c+=g+2*i}const h=t+2*i;return{mapping:s,xOffset:c,yOffset:a+l*h,canvasHeight:Wpe(a+(l+1)*h)}}(at({getFontWidth:W=>p.measureText(W).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024},i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}));if(h.height!==m){const W=p.getImageData(0,0,h.width,h.height);h.height=m,p.putImageData(W,0,0)}if(q5(p,r,o,s),l){const W=new(Hpe())(o,a,c,u,r,s),$=p.getImageData(0,0,W.size,W.size);for(const pe of t)rge(W.draw(pe),$),p.putImageData($,g[pe].x-a,g[pe].y+a)}else for(const W of t)p.fillText(W,g[W].x,g[W].y+.9*o);return{xOffset:D,yOffset:O,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const lge={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};let cge=(()=>{class n extends $0{getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[rx,sx]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),r.extensionsChanged){var s;const{gl:o}=this.context;null===(s=this.state.model)||void 0===s||s.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{viewport:i}=this.context,{billboard:r,sizeScale:s,sizeUnits:o,sizeMinPixels:a,sizeMaxPixels:l,getLineWidth:c}=this.props;let{padding:u}=this.props;const h="pixels"===o?i.metersPerPixel:1;u.length<4&&(u=[u[0],u[1],u[0],u[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(c),padding:u,sizeScale:s*h,sizeMinPixels:a,sizeMaxPixels:l}).draw()}_getModel(t){return new Yg(t,Cn(at({},this.getShaders()),{id:this.props.id,geometry:new fh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0}))}}return n.layerName="TextBackgroundLayer",n.defaultProps=lge,n})();const Y5={fontSize:64,buffer:4,sdf:!1,radius:12,cutoff:.25,smoothing:.1},K5={start:1,middle:0,end:-1},X5={top:1,center:0,bottom:-1},lR=[0,0,0,255],dge=["fontSize","buffer","sdf","radius","cutoff"],hge={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:lR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:B5},fontFamily:j5,fontWeight:"normal",lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:lR},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:lR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};let fge=(()=>{class n extends U4{initializeState(){this.state={styleVersion:0,fontAtlasManager:new sge}}updateState({props:t,oldProps:i,changeFlags:r}){const o=this.state.characterSet;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();const a=o!==this.state.characterSet||this._fontChanged(i,t);a&&this._updateFontAtlas(i,t),(a||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(t,i){const{fontSettings:r,fontFamily:s,fontWeight:o}=i,{fontAtlasManager:a,characterSet:l}=this.state;a.setProps(Cn(at(at({},Y5),r),{characterSet:l,fontFamily:s,fontWeight:o}))}_fontChanged(t,i){if(t.fontFamily!==i.fontFamily||t.fontWeight!==i.fontWeight)return!0;if(t.fontSettings===i.fontSettings)return!1;const r=t.fontSettings||{},s=i.fontSettings||{};return dge.some(o=>r[o]!==s[o])}_updateText(){const{data:t,characterSet:i}=this.props,r=t.attributes&&t.attributes.getText;let a,{getText:s}=this.props,{startIndices:o}=t;const l="auto"===i&&new Set;if(r&&o){const{texts:c,characterCount:u}=function({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:1,l=i?i/o:0,c=r[e]||Math.ceil((n.length-l)/a),u=s&&new Set,h=new Array(e);let p=n;if(a>1||l>0){p=new n.constructor(c);for(let g=0;g<c;g++)p[g]=n[g*a+l]}for(let g=0;g<e;g++){const O=p.subarray(r[g],r[g+1]||c);h[g]=String.fromCodePoint.apply(null,O),u&&O.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:c}}(Cn(at({},ArrayBuffer.isView(r)?{value:r}:r),{length:t.length,startIndices:o,characterSet:l}));a=u,s=(h,{index:p})=>c[p]}else{const{iterable:c,objectInfo:u}=ES(t);o=[0],a=0;for(const h of c){u.index++;const p=Array.from(s(h,u)||"");l&&p.forEach(l.add,l),a+=p.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||i})}getBoundingRect(t,i){const r=this.state.fontAtlasManager.mapping,{getText:s}=this.state,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{size:[p,g]}=L5(h,l,o,a,r);return[(K5["function"==typeof c?c(t,i):c]-1)*p/2,(X5["function"==typeof u?u(t,i):u]-1)*g/2,p,g]}getIconOffsets(t,i){const r=this.state.fontAtlasManager.mapping,{getText:s}=this.state,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{x:p,y:g,rowWidth:m,size:[D,O]}=L5(h,l,o,a,r),W=K5["function"==typeof c?c(t,i):c],$=X5["function"==typeof u?u(t,i):u],pe=p.length,Re=new Array(2*pe);let Ve=0;for(let We=0;We<pe;We++)Re[Ve++]=(W-1)*D/2+(1-W)*(D-m[We])/2+p[We],Re[Ve++]=($-1)*O/2+g[We];return Re}renderLayers(){const{startIndices:t,numInstances:i,getText:r,fontAtlasManager:{scale:s,texture:o,mapping:a},styleVersion:l}=this.state,{data:c,_dataDiff:u,getPosition:h,getColor:p,getSize:g,getAngle:m,getPixelOffset:D,getBackgroundColor:O,getBorderColor:W,getBorderWidth:$,backgroundPadding:pe,background:Re,billboard:Ve,fontSettings:We,outlineWidth:rt,outlineColor:wt,sizeScale:vt,sizeUnits:At,sizeMinPixels:Bt,sizeMaxPixels:$t,transitions:mt,updateTriggers:yt}=this.props,Ut=this.getSubLayerClass("characters",Upe),pt=this.getSubLayerClass("background",cge);return[Re&&new pt({getFillColor:O,getLineColor:W,getLineWidth:$,padding:pe,getPosition:h,getSize:g,getAngle:m,getPixelOffset:D,billboard:Ve,sizeScale:vt/this.state.fontAtlasManager.props.fontSize,sizeUnits:At,sizeMinPixels:Bt,sizeMaxPixels:$t,transitions:mt&&{getPosition:mt.getPosition,getAngle:mt.getAngle,getSize:mt.getSize,getFillColor:mt.getBackgroundColor,getLineColor:mt.getBorderColor,getLineWidth:mt.getBorderWidth,getPixelOffset:mt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:yt.getPosition,getAngle:yt.getAngle,getSize:yt.getSize,getFillColor:yt.getBackgroundColor,getLineColor:yt.getBorderColor,getLineWidth:yt.getBorderWidth,getPixelOffset:yt.getPixelOffset,getBoundingRect:{getText:yt.getText,getTextAnchor:yt.getTextAnchor,getAlignmentBaseline:yt.getAlignmentBaseline,styleVersion:l}}}),{data:c.attributes?{length:c.length,attributes:c.attributes.background||{}}:c,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new Ut({sdf:We.sdf,smoothing:Number.isFinite(We.smoothing)?We.smoothing:Y5.smoothing,outlineWidth:rt,outlineColor:wt,iconAtlas:o,iconMapping:a,getPosition:h,getColor:p,getSize:g,getAngle:m,getPixelOffset:D,billboard:Ve,sizeScale:vt*s,sizeUnits:At,sizeMinPixels:Bt*s,sizeMaxPixels:$t*s,transitions:mt&&{getPosition:mt.getPosition,getAngle:mt.getAngle,getColor:mt.getColor,getSize:mt.getSize,getPixelOffset:mt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:yt.getText,getPosition:yt.getPosition,getAngle:yt.getAngle,getColor:yt.getColor,getSize:yt.getSize,getPixelOffset:yt.getPixelOffset,getIconOffsets:{getText:yt.getText,getTextAnchor:yt.getTextAnchor,getAlignmentBaseline:yt.getAlignmentBaseline,styleVersion:l}}}),{data:c,_dataDiff:u,startIndices:t,numInstances:i,getIconOffsets:this.getIconOffsets.bind(this),getIcon:r})]}}return n.layerName="TextLayer",n.defaultProps=hge,n})();const Q5="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",pge={lightSources:{}};function cR({color:n=[0,0,0],intensity:e=1}={}){return n.map(t=>t*e/255)}const uR={name:"lights",vs:Q5,fs:Q5,getUniforms:function Z5(n=pge){if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function({ambientLight:n,pointLights:e=[],directionalLights:t=[]}){const i={};return i["lighting_uAmbientLight.color"]=n?cR(n):[0,0,0],e.forEach((r,s)=>{i[`lighting_uPointLight[${s}].color`]=cR(r),i[`lighting_uPointLight[${s}].position`]=r.position,i[`lighting_uPointLight[${s}].attenuation`]=r.attenuation||[1,0,0]}),i.lighting_uPointLightCount=e.length,t.forEach((r,s)=>{i[`lighting_uDirectionalLight[${s}].color`]=cR(r),i[`lighting_uDirectionalLight[${s}].direction`]=r.direction}),i.lighting_uDirectionalLightCount=t.length,i}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return Z5({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},mge={};const yge={name:"phong-lighting",dependencies:[uR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=mge){if(!("material"in n))return{};const{material:e}=n;return e?function(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},dR=Math.PI/180,ox=new Float32Array(16),tz=new Float32Array(12);function nz(n,e,t){const i=e[0]*dR,r=e[1]*dR,s=e[2]*dR,o=Math.sin(s),a=Math.sin(i),l=Math.sin(r),c=Math.cos(s),u=Math.cos(i),h=Math.cos(r),p=t[0],g=t[1],m=t[2];n[0]=p*h*u,n[1]=p*l*u,n[2]=p*-a,n[3]=g*(-l*c+h*a*o),n[4]=g*(h*c+l*a*o),n[5]=g*u*o,n[6]=m*(l*o+h*a*c),n[7]=m*(-h*o+l*a*c),n[8]=m*u*c}function iz(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const rz={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,l=Array.isArray(a),c=l&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),p=Array.isArray(o),g=c||!l&&Boolean(a(i[0]));n.constant=g?c:h&&u&&p;const m=n.value;if(n.constant){let D;g?(ox.set(a),D=iz(ox)):(D=tz,nz(D,r,s),D.set(o,9)),n.value=new Float32Array(D)}else{let D=e*n.size;const{iterable:O,objectInfo:W}=ES(i,e,t);for(const $ of O){let pe;W.index++,g?(ox.set(c?a:a($,W)),pe=iz(ox)):(pe=tz,nz(pe,h?r:r($,W),u?s:s($,W)),pe.set(p?o:o($,W),9)),m[D++]=pe[0],m[D++]=pe[1],m[D++]=pe[2],m[D++]=pe[3],m[D++]=pe[4],m[D++]=pe[5],m[D++]=pe[6],m[D++]=pe[7],m[D++]=pe[8],m[D++]=pe[9],m[D++]=pe[10],m[D++]=pe[11]}}}};function sz(n,e){return e===ji.CARTESIAN||e===ji.METER_OFFSETS||e===ji.DEFAULT&&!n.isGeospatial}function oz(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Ri.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function wge(n,e){if(n.attributes)return oz(n.attributes,e),n instanceof fh?n:new fh(n);if(n.positions||n.POSITION)return oz(n,e),new fh({attributes:n});throw Error("Invalid mesh")}const Ege={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};let Sge=(()=>{class n extends $0{getShaders(){const t=!Si(this.context.gl),i={};return mI(this.context.gl,"GLSL_DERIVATIVES")&&(i.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[rx,yge,sx],transpileToGLSL100:t,defines:i})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:rz}),this.setState({emptyTexture:new _a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(){super.finalizeState(),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;const{viewport:i}=this.context,{sizeScale:r,coordinateSystem:s,_instanced:o}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:r,composeModelMatrix:!o||sz(i,s),flatShading:!this.state.hasNormals}).draw()}getModel(t){const i=new Yg(this.context.gl,Cn(at({},this.getShaders()),{id:this.props.id,geometry:wge(t,this.props._useMeshColors),isInstanced:!0})),{texture:r}=this.props,{emptyTexture:s}=this.state;return i.setUniforms({sampler:r||s,hasTexture:Boolean(r)}),i}setTexture(t){const{emptyTexture:i,model:r}=this.state;null==r||r.setUniforms({sampler:t||i,hasTexture:Boolean(t)})}}return n.layerName="SimpleMeshLayer",n.defaultProps=Ege,n})();const az={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[uR]};class rm{constructor(e={}){const{id:t}=e;this.id=t||ga(this.constructor.name),this.display=!0,this.position=new Ao,this.rotation=new Ao,this.scale=new Ao(1,1,1),this.matrix=new qn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return tn(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return tn(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return tn(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e,t=!0){t?this.matrix.copy(e):this.matrix=e}setMatrixComponents({position:e,rotation:t,scale:i,update:r=!0}){return e&&this.setPosition(e),t&&this.setRotation(t),i&&this.setScale(i),r&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(e={}){const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){tn(e),t=t||this.matrix;const i=new qn(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class Z0 extends rm{constructor(e={}){e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;mn.assert(t.every(i=>i instanceof rm),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(...e){for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e,{worldMatrix:t=new qn}={}){const i=new qn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof Z0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}function lz(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],g=t[1],m=t[2],D=t[3],O=t[4],W=t[5],$=t[6],pe=t[7],Re=t[8];return n[0]=p*i+g*o+m*c,n[1]=p*r+g*a+m*u,n[2]=p*s+g*l+m*h,n[3]=D*i+O*o+W*c,n[4]=D*r+O*a+W*u,n[5]=D*s+O*l+W*h,n[6]=$*i+pe*o+Re*c,n[7]=$*r+pe*a+Re*u,n[8]=$*s+pe*l+Re*h,n}function cz(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function uz(){var n=new ya(4);return ya!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function dz(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function hR(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function ax(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],u=t[3];return n[0]=i*u+o*a+r*c-s*l,n[1]=r*u+o*l+s*a-i*c,n[2]=s*u+o*c+i*l-r*a,n[3]=o*u-i*a-r*l-s*c,n}function hz(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l+o*a,n[1]=r*l+s*a,n[2]=s*l-r*a,n[3]=o*l-i*a,n}function fz(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l-s*a,n[1]=r*l+o*a,n[2]=s*l+i*a,n[3]=o*l-r*a,n}function pz(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l+r*a,n[1]=r*l-i*a,n[2]=s*l+o*a,n[3]=o*l-s*a,n}function gz(n,e){var t=e[0],i=e[1],r=e[2];return n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r)),n}function J0(n,e,t,i){var p,g,m,D,O,r=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],u=t[2],h=t[3];return(g=r*l+s*c+o*u+a*h)<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>Qc?(p=Math.acos(g),m=Math.sin(p),D=Math.sin((1-i)*p)/m,O=Math.sin(i*p)/m):(D=1-i,O=i),n[0]=D*r+O*l,n[1]=D*s+O*c,n[2]=D*o+O*u,n[3]=D*a+O*h,n}function mz(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;return n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a,n}function _z(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function fR(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}var yz=function(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},pR=LU,gR=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},bz=function(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a),n},vz=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},wz=function(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r},Sz=function(){var n=AV(),e=TV(1,0,0),t=TV(0,1,0);return function(i,r,s){var o=MV(r,s);return o<-.999999?(A0(n,e,r),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&A0(n,t,r),function(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),hR(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(A0(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();uz(),uz(),function(){var n=new ya(9);ya!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Nge=[0,0,0,1];class mR extends bS{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return fR(this,e),this.check()}identity(){return dz(this),this.check()}fromAxisRotation(e,t){return hR(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=sr(e)}get y(){return this[1]}set y(e){this[1]=sr(e)}get z(){return this[2]}set z(e){this[2]=sr(e)}get w(){return this[3]}set w(e){this[3]=sr(e)}len(){return vz(this)}lengthSquared(){return wz(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return gR(this,e)}rotationTo(e,t){return Sz(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return yz(this,this,e),this.check()}calculateW(){return gz(this,this),this.check()}conjugate(){return _z(this,this),this.check()}invert(){return mz(this,this),this.check()}lerp(e,t,i){return bz(this,e,t,i),this.check()}multiplyRight(e,t){return Yu(!t),ax(this,this,e),this.check()}multiplyLeft(e,t){return Yu(!t),ax(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return hz(this,this,e),this.check()}rotateY(e){return fz(this,this,e),this.check()}rotateZ(e){return pz(this,this,e),this.check()}scale(e){return pR(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=Nge,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return J0(this,e,t,i),this.check()}transformVector4(e,t=e){return BU(t,e,this),vS(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const Pge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Fge={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function xz(n){if(!n._animation){const e=Fge[n.componentType],t=Pge[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=t)a.push(Array.from(o.slice(l,l+t)));n._animation=a}}return n._animation}const kge=new qn,_R=new mR;class zge{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:r,target:s,path:o})=>{(function(n,{input:e,interpolation:t,output:i},r,s){const a=n%e[e.length-1],l=e.findIndex(p=>p>=a),c=Math.max(0,l-1);if(!Array.isArray(r[s]))switch(s){case"translation":r[s]=[0,0,0];break;case"rotation":r[s]=[0,0,0,1];break;case"scale":r[s]=[1,1,1];break;default:mn.warn(`Bad animation path ${s}`)()}tn(r[s].length===i[c].length);const u=e[c],h=e[l];switch(t){case"STEP":!function(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(r,s,i[c]);break;case"LINEAR":h>u&&function(n,e,t,i,r){if("rotation"===e){_R.slerp({start:t,target:i,ratio:r});for(let s=0;s<_R.length;s++)n[e][s]=_R[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(r,s,i[c],i[l],(a-u)/(h-u));break;case"CUBICSPLINE":h>u&&function(n,e,{p0:t,outTangent0:i,inTangent1:r,p1:s,tDiff:o,ratio:a}){for(let l=0;l<n[e].length;l++){const c=i[l]*o,u=r[l]*o;n[e][l]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*t[l]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*c+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[l]+(Math.pow(a,3)-Math.pow(a,2))*u}}(r,s,{p0:i[3*c+1],outTangent0:i[3*c+2],inTangent1:i[3*l+0],p1:i[3*l+1],tDiff:h-u,ratio:(a-u)/(h-u)});break;default:mn.warn(`Interpolation ${t} not supported`)()}})(i,r,s,o),function(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=kge.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class Hge{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||`Animation-${i}`,s=t.samplers.map(({input:a,interpolation:l="LINEAR",output:c})=>({input:xz(e.accessors[a]),interpolation:l,output:xz(e.accessors[c])})),o=t.channels.map(({sampler:a,target:l})=>({sampler:s[a],target:e.nodes[l.node],path:l.path}));return new zge({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class Gge extends rm{constructor(e,t={}){super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof Yg?(this.model=e,this._setModelNodeProps(t)):this.model=new Yg(e,t),this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(...e){return this.model.draw(...e)}setUniforms(...e){return this.model.setUniforms(...e),this}setAttributes(...e){return this.model.setAttributes(...e),this}updateModuleSettings(...e){return this.model.updateModuleSettings(...e),this}_setModelNodeProps(e){this.model.setProps(e)}}class $ge{constructor(e,{attributes:t,material:i,pbrDebug:r,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},mI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),r&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(t.NORMAL,"HAS_NORMALS"),this.defineIfPresent(t.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(t.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(r,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t,i=null){const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new _a(this.gl,at({id:e.name||e.id,parameters:at(at({},e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[t]=l,this.defineIfPresent(i,i),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(mn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function Cz(n,e){return Si(n)?`#version 300 es\n${e}`:e}const Kge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Xge={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Qge{constructor(e,t={}){this.gl=e,this.options=Object.assign({},Xge,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Hge(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new Z0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new Z0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new qn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new Z0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){mn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){return function(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new $ge(n,e);mn.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(u=>u.buffer));const c=new Gge(n,Object.assign({id:t,drawMode:i,vertexCount:r,modules:[az],defines:a.defines,parameters:a.parameters,vs:Cz(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:Cz(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},o));return c.setProps({attributes:s}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:e.name||`${i.name||i.id}-primitive-${t}`,drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),mn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new hr(this.gl,{id:`from-${i.id}`,data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new ma({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Kge[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function Az(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function Ga(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function Tz(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error(`'baseUri' must be provided to resolve relative url ${n}`);return i.substr(0,i.lastIndexOf("/")+1)+n}function Mz(n,e,t){const i=n.bufferViews[t];Ga(i);const s=e[i.buffer];return Ga(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}const Dz={name:"Draco",id:"draco",module:"draco",version:"3.0.12",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class sm{constructor(e,t){Kn(this,"fields",void 0),Kn(this,"metadata",void 0),function(n,e){if(!n)throw new Error("loader assertion failed.")}(Array.isArray(e)),function(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new sm(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new sm(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof sm){const o=e;t=o.fields,i=Iz(Iz(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new sm(s,i)}}function Iz(n,e){return new Map([...n||new Map,...e||new Map])}let Lr,Oz,Rz,Nz,Pz,Fz,kz,Lz;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(Lr||(Lr={}));class yR{static isNull(e){return e&&e.typeId===Lr.Null}static isInt(e){return e&&e.typeId===Lr.Int}static isFloat(e){return e&&e.typeId===Lr.Float}static isBinary(e){return e&&e.typeId===Lr.Binary}static isUtf8(e){return e&&e.typeId===Lr.Utf8}static isBool(e){return e&&e.typeId===Lr.Bool}static isDecimal(e){return e&&e.typeId===Lr.Decimal}static isDate(e){return e&&e.typeId===Lr.Date}static isTime(e){return e&&e.typeId===Lr.Time}static isTimestamp(e){return e&&e.typeId===Lr.Timestamp}static isInterval(e){return e&&e.typeId===Lr.Interval}static isList(e){return e&&e.typeId===Lr.List}static isStruct(e){return e&&e.typeId===Lr.Struct}static isUnion(e){return e&&e.typeId===Lr.Union}static isFixedSizeBinary(e){return e&&e.typeId===Lr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Lr.FixedSizeList}static isMap(e){return e&&e.typeId===Lr.Map}static isDictionary(e){return e&&e.typeId===Lr.Dictionary}get typeId(){return Lr.NONE}compareTo(e){return this===e}}Symbol,Symbol,Oz=Symbol.toStringTag;class om extends yR{constructor(e,t){super(),Kn(this,"isSigned",void 0),Kn(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return Lr.Int}get[Oz](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class ame extends om{constructor(){super(!0,8)}}class lme extends om{constructor(){super(!0,16)}}class cme extends om{constructor(){super(!0,32)}}class ume extends om{constructor(){super(!1,8)}}class dme extends om{constructor(){super(!1,16)}}class hme extends om{constructor(){super(!1,32)}}Rz=Symbol.toStringTag;class Bz extends yR{constructor(e){super(),Kn(this,"precision",void 0),this.precision=e}get typeId(){return Lr.Float}get[Rz](){return"Float"}toString(){return`Float${this.precision}`}}class fme extends Bz{constructor(){super(32)}}class pme extends Bz{constructor(){super(64)}}Symbol,Symbol,Nz=Symbol.toStringTag,Pz=Symbol.toStringTag,Fz=Symbol.toStringTag,kz=Symbol.toStringTag,Lz=Symbol.toStringTag;class gme extends yR{constructor(e,t){super(),Kn(this,"listSize",void 0),Kn(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return Lr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Lz](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}class lx{constructor(e,t,i=!1,r=new Map){Kn(this,"name",void 0),Kn(this,"type",void 0),Kn(this,"nullable",void 0),Kn(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new lx(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${this.metadata}`:""}`}}function jz(n,e,t){const i=t?Vz(t.metadata):void 0,r=function(n){switch(n.constructor){case Int8Array:return new ame;case Uint8Array:return new ume;case Int16Array:return new lme;case Uint16Array:return new dme;case Int32Array:return new cme;case Uint32Array:return new hme;case Float32Array:return new fme;case Float64Array:return new pme;default:throw new Error("array type not supported")}}(e.value);return new lx(n,new gme(e.size,new lx("value",r)),!1,i)}function Vz(n){const e=new Map;for(const t in n)e.set(`${t}.string`,JSON.stringify(n[t]));return e}const Uz={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},bme={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class wme{constructor(e){Kn(this,"draco",void 0),Kn(this,"decoder",void 0),Kn(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const p=`DRACO decompression failed: ${o.error_msg()}`;throw new Error(p)}const a=this._getDracoLoaderData(s,r,t),l=this._getMeshData(s,a,t),c=function(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const u=a[c],h=a[c+1],p=a[c+2];e=u<e?u:e,t=h<t?h:t,i=p<i?p:i,r=u>r?u:r,s=h>s?h:s,o=p>o?p:o}return[[e,t,i],[r,s,o]]}(l.attributes),u=function(n,e,t){const i=Vz(e.metadata),r=[],s=function(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const l=jz(o,n[o],s[o]);r.push(l)}if(t){const o=jz("indices",t);r.push(o)}return new sm(r,i)}(l.attributes,a,l.indices);return Cn(at({loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:c}},l),{schema:u})}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const l=this._getOctahedronTransform(s,t);l&&(i[s.unique_id()].octahedron_transform=l)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:l}=this._getAttributeValues(t,s);r[o]={value:a,size:l,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=bme[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,l=function(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let c;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,l,a,u),c=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:c,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in Uz)if(this.draco[o]===r)return Uz[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:`CUSTOM_ATTRIBUTE_${i}`}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}var cx=Je(125);const ER={};function SR(n){return xR.apply(this,arguments)}function xR(){return(xR=oi(function*(n,e=null,t={}){return e&&(n=Ame(n,e,t)),ER[n]=ER[n]||Tme(n),yield ER[n]})).apply(this,arguments)}function Ame(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:_O?t.CDN?(Jc(t.CDN.startsWith("http")),`${t.CDN}/${e}@3.0.12/dist/libs/${n}`):yO?`../src/libs/${n}`:`modules/${e}/src/libs/${n}`:`modules/${e}/dist/libs/${n}`}function Tme(n){return CR.apply(this,arguments)}function CR(){return(CR=oi(function*(n){return n.endsWith("wasm")?yield(yield fetch(n)).arrayBuffer():_O?yO?importScripts(n):Mme(yield(yield fetch(n)).text(),n):cx.requireFromFile&&(yield cx.requireFromFile(n))})).apply(this,arguments)}function Mme(n,e){if(!_O)return cx.requireFromString&&cx.requireFromString(n,e);if(yO)return eval.call(jue,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch(i){t.text=n}return document.body.appendChild(t),null}const Dme="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.js",Ime="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_wasm_wrapper.js",Ome="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.wasm";let eb;function Nme(n){return AR.apply(this,arguments)}function AR(){return(AR=oi(function*(n){const e=n.modules||{};return eb=e.draco3d?eb||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):eb||Pme(n),yield eb})).apply(this,arguments)}function Pme(n){return MR.apply(this,arguments)}function MR(){return(MR=oi(function*(n){let e,t;switch(n.draco&&n.draco.decoderType){case"js":e=yield SR(Dme,"draco",n);break;case"wasm":default:[e,t]=yield Promise.all([yield SR(Ime,"draco",n),yield SR(Ome,"draco",n)])}return e=e||globalThis.DracoDecoderModule,yield Fme(e,t)})).apply(this,arguments)}function Fme(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(Cn(at({},t),{onModuleLoaded:r=>i({draco:r})}))})}const IR=Cn(at({},Dz),{parse:function(n,e){return OR.apply(this,arguments)}});function OR(){return(OR=oi(function*(n,e){const{draco:t}=yield Nme(e),i=new wme(t);try{return i.parseSync(n,null==e?void 0:e.draco)}finally{i.destroy()}})).apply(this,arguments)}function nb(n,e){return Ff(n>=0),Ff(e>0),n+(e-1)&~(e-1)}function Bme(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+nb(i.byteLength,4)}const zz=["SCALAR","VEC2","VEC3","VEC4"],jme=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Vme=new Map(jme),Ume={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zme={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Hme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Hz(n){return zz[n-1]||zz[0]}function Gz(n){const e=Vme.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function $z(n,e){const t=Hme[n.componentType],i=Ume[n.type],s=n.count*i,o=n.count*i*zme[n.componentType];return Ga(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const Gme={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class gh{constructor(e){Kn(this,"gltf",void 0),Kn(this,"sourceBuffers",void 0),Kn(this,"byteLength",void 0),this.gltf=e||{json:at({},Gme),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error(`glTF file error: Could not find ${e}[${t}]`);return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Ga(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=$z(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Ga(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Ga(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const l=this._addIndices(i);a.primitives[0].indices=l}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=eR(e),r=t||(null==i?void 0:i.mimeType),o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Ga(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=nb(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:Hz(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:Gz(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Bme(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Wz="KHR_binary_glTF",ib="KHR_draco_mesh_compression",am="KHR_lights_punctual",dx="KHR_materials_unlit",hx="KHR_techniques_webgl";function qme(n){const e={};for(const t in n){const i=n[t];if("indices"!==t){const r=qz(i);e[t]=r}}return e}function qz(n){const{buffer:e,size:t,count:i}=function(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:Hz(t),componentType:Gz(e)}}function Xme(n,e,t){return RR.apply(this,arguments)}function RR(){return(RR=oi(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new gh(n),s=[];for(const o of t_e(r))r.getObjectExtension(o,ib)&&s.push(Zme(r,o,e,t));yield Promise.all(s),r.removeExtension(ib)})).apply(this,arguments)}function Qme(n,e={}){const t=new gh(n);for(const i of t.json.meshes||[])Jme(i),t.addRequiredExtension(ib)}function Zme(n,e,t,i){return NR.apply(this,arguments)}function NR(){return(NR=oi(function*(n,e,t,i){const r=n.getObjectExtension(e,ib);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=O4(s.buffer,s.byteOffset),{parse:a}=i,l=at({},t);delete l["3d-tiles"];const c=yield a(o,IR,l,i),u=qme(c.attributes);for(const[h,p]of Object.entries(u))if(h in e.attributes){const m=n.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(p.min=m.min,p.max=m.max)}e.attributes=u,c.indices&&(e.indices=qz(c.indices)),e_e(e)})).apply(this,arguments)}function Jme(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(o);return{primitives:[{attributes:l,mode:t,extensions:{[ib]:{bufferView:c,attributes:l}}}]}}function e_e(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*t_e(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}function n_e(n){return PR.apply(this,arguments)}function PR(){return(PR=oi(function*(n){const e=new gh(n),{json:t}=e;e.removeExtension(dx);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,dx)})).apply(this,arguments)}function i_e(n){const e=new gh(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,dx,{}),e.addExtension(dx))}function r_e(n){return FR.apply(this,arguments)}function FR(){return(FR=oi(function*(n){const e=new gh(n),{json:t}=e,i=e.getExtension(am);i&&(e.json.lights=i.lights,e.removeExtension(am));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,am);s&&(r.light=s.light),e.removeObjectExtension(r,am)}})).apply(this,arguments)}function s_e(n){return kR.apply(this,arguments)}function kR(){return(kR=oi(function*(n){const e=new gh(n),{json:t}=e;if(t.lights){const i=e.addExtension(am);Ga(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,am,i);delete e.json.lights}})).apply(this,arguments)}function o_e(n){return LR.apply(this,arguments)}function LR(){return(LR=oi(function*(n){const e=new gh(n),{json:t}=e,i=e.getExtension(hx);if(i){const r=l_e(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,hx);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=c_e(s.technique,e)),e.removeObjectExtension(s,hx)}e.removeExtension(hx)}})).apply(this,arguments)}function a_e(n,e){return BR.apply(this,arguments)}function BR(){return(BR=oi(function*(n,e){})).apply(this,arguments)}function l_e(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}function c_e(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const Yz={KHR_draco_mesh_compression:lt,KHR_materials_unlit:ee,KHR_lights_punctual:Et,KHR_techniques_webgl:je};function u_e(n){return jR.apply(this,arguments)}function jR(){return(jR=oi(function*(n,e={},t){for(const r in Yz){var i;const s=(null==e||null===(i=e.gltf)||void 0===i?void 0:i.excludeExtensions)||{};r in s&&!s[r]||(yield Yz[r].decode(n,e,t))}})).apply(this,arguments)}const Kz={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},h_e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class f_e{constructor(e){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${i.asset.version}`)}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function(n){const e=new gh(n),{json:t}=e;for(const i of t.images||[]){const r=e.removeObjectExtension(i,Wz);r&&Object.assign(i,r)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(Wz)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in Kz)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in Kz)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn(`gltf v1: json doesn't contain attribute ${t}`),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=h_e[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error(`gltf v1: failed to resolve ${t} with id ${e}`);return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const t of e.materials){t.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const i=t.values&&t.values.tex,r=e.textures.findIndex(s=>s.id===i);-1!==r&&(t.pbrMetallicRoughness.baseColorTexture={index:r})}}}function p_e(n,e={}){return(new f_e).normalize(n,e)}const g_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},m_e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ml={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},__e={magFilter:Ml.TEXTURE_MAG_FILTER,minFilter:Ml.TEXTURE_MIN_FILTER,wrapS:Ml.TEXTURE_WRAP_S,wrapT:Ml.TEXTURE_WRAP_T},y_e={[Ml.TEXTURE_MAG_FILTER]:Ml.LINEAR,[Ml.TEXTURE_MIN_FILTER]:Ml.NEAREST_MIPMAP_LINEAR,[Ml.TEXTURE_WRAP_S]:Ml.REPEAT,[Ml.TEXTURE_WRAP_]:Ml.REPEAT};class w_e{postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Ga(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn(`glTF file error: Could not find ${e}[${t}]`),i}_resolveScene(e,t){return e.id=e.id||`scene-${t}`,e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||`node-${t}`,e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||`skin-${t}`,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||`mesh-${t}`,e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i=at({},i)).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||`material-${t}`,e.normalTexture&&(e.normalTexture=at({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=at({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=at({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=at({},e.pbrMetallicRoughness);const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture=at({},i.baseColorTexture),i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture=at({},i.metallicRoughnessTexture),i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||`accessor-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function(n){return m_e[n]}(e.componentType),e.components=function(n){return g_e[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=$z(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset,a=i.arrayBuffer.slice(o,o+s);e.value=new r(a)}return e}_resolveTexture(e,t){return e.id=e.id||`texture-${t}`,e.sampler="sampler"in e?this.getSampler(e.sampler):y_e,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||`sampler-${t}`,e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return __e[e]}_resolveImage(e,t){e.id=e.id||`image-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){e.id=e.id||`bufferView-${t}`;const i=e.buffer;e.buffer=this.buffers[i];let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),e.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),e}_resolveCamera(e,t){return e.id=e.id||`camera-${t}`,e}}function E_e(n,e){return(new w_e).postProcess(n,e)}const Xz=1735152710,lm=!0;function UR(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),nb(i,4)}function zR(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),nb(i,4)}function P_e(n,e){return HR.apply(this,arguments)}function HR(){return(HR=oi(function*(n,e,t=0,i,r){var s,o,a,l;F_e(n,e,t,i),p_e(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize});const c=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield k_e(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=L_e(n,i,r);c.push(h)}const u=u_e(n,i,r);return c.push(u),yield Promise.all(c),null!=i&&null!==(l=i.gltf)&&void 0!==l&&l.postProcess?E_e(n,i):n})).apply(this,arguments)}function F_e(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function(n,e=0,t={}){const i=new DataView(n),{magic:r=Xz}=t,s=i.getUint32(e,!1);return s===r||s===Xz}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function(n){try{return JSON.parse(n)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?Az(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?Az(n,0,e):""}(n)}"`)}}(e);else if(e instanceof ArrayBuffer){const o={};t=function(n,e,t=0,i={}){const r=new DataView(e),s=function(n,e=0){return`${String.fromCharCode(n.getUint8(e+0))}${String.fromCharCode(n.getUint8(e+1))}${String.fromCharCode(n.getUint8(e+2))}${String.fromCharCode(n.getUint8(e+3))}`}(r,t+0),o=r.getUint32(t+4,lm),a=r.getUint32(t+8,lm);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=12,n.version){case 1:return function(n,e,t){Ff(n.header.byteLength>20);const i=e.getUint32(t+0,lm),r=e.getUint32(t+4,lm);return t+=8,Ff(0===r),UR(n,e,t,i),(t+=i)+zR(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function(n,e,t,i){return Ff(n.header.byteLength>20),function(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,lm),s=e.getUint32(t+4,lm);switch(t+=8,s){case 1313821514:UR(n,e,t,r);break;case 5130562:zR(n,e,t,r);break;case 0:i.strict||UR(n,e,t,r);break;case 1:i.strict||zR(n,e,t,r)}t+=nb(r,4)}}(n,e,t,{}),t+n.header.byteLength}(n,r,t);default:throw new Error(`Invalid GLB version ${n.version}. Only supports v1 and v2.`)}}(o,e,t,i.glb),Ga("glTF"===o.type,`Invalid GLB magic string ${o.type}`),n._glb=o,n.json=o.json}else Ga(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function k_e(n,e,t){return GR.apply(this,arguments)}function GR(){return(GR=oi(function*(n,e,t){for(let s=0;s<n.json.buffers.length;++s){const o=n.json.buffers[s];if(o.uri){var i,r;const{fetch:a}=t;Ga(a);const l=Tz(o.uri,e),c=yield null==t||null===(i=t.fetch)||void 0===i?void 0:i.call(t,l),u=yield null==c||null===(r=c.arrayBuffer)||void 0===r?void 0:r.call(c);n.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete o.uri}}})).apply(this,arguments)}function L_e(n,e,t){return $R.apply(this,arguments)}function $R(){return($R=oi(function*(n,e,t){const i=n.json.images||[],r=[];for(let s=0;s<i.length;++s)r.push(B_e(n,i[s],s,e,t));return yield Promise.all(r)})).apply(this,arguments)}function B_e(n,e,t,i,r){return WR.apply(this,arguments)}function WR(){return(WR=oi(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri){const c=Tz(e.uri,i);a=yield(yield s(c)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const c=Mz(n.json,n.buffers,e.bufferView);a=O4(c.buffer,c.byteOffset,c.byteLength)}Ga(a,"glTF image has no data");const l=yield o(a,nR,{},r);n.images[t]=l})).apply(this,arguments)}const cm={name:"glTF",id:"gltf",module:"gltf",version:"3.0.12",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return qR.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function qR(){return(qR=oi(function*(n,e={},t){(e=at(at({},cm.options),e)).gltf=at(at({},cm.options.gltf),e.gltf);const{byteOffset:i=0}=e;return yield P_e({},n,i,e,t)})).apply(this,arguments)}function YR(){return(YR=oi(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield U_e(()=>e.some(t=>!t.loaded))})).apply(this,arguments)}function U_e(n){return KR.apply(this,arguments)}function KR(){return(KR=oi(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))})).apply(this,arguments)}const Qz=[255,255,255,255],G_e={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:Qz},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[cm]};let $_e=(()=>{class n extends $0{getShaders(){const t=[rx,sx];return"pbr"===this.props._lighting&&t.push(az),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:Qz,transition:!0},instanceModelMatrix:rz})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;i.scenegraph!==r.scenegraph?this._updateScenegraph(i):i._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,i._animations)}finalizeState(){super.finalizeState(),this._deleteScenegraph()}_updateScenegraph(t){const{gl:i}=this.context;let r=null;if(t.scenegraph instanceof rm)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const l=t.scenegraph,c=function(n,e,t){const i=new Qge(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(i,l,this._getModelOptions());r=at({gltf:l},c),function(n){return YR.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else t.scenegraph&&(Ri.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);const s={layer:this,gl:i},o=t.getScene(r,s),a=t.getAnimator(r,s);o instanceof rm?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,a,t._animations),this.setState({scenegraph:o,animator:a})):null!==o&&Ri.warn("invalid scenegraph:",o)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const i=this.getAttributeManager().getAttributes();t.traverse(r=>{this._setModelAttributes(r.model,i)})}}_applyAnimationsProp(t,i,r){if(!t||!i||!r)return;const s=i.getAnimations();Object.keys(r).sort().forEach(o=>{const a=r[o];if("*"===o)s.forEach(l=>{Object.assign(l,a)});else if(Number.isFinite(Number(o))){const l=Number(o);l>=0&&l<s.length?Object.assign(s[l],a):Ri.warn("animation ".concat(o," not found"))()}else{const l=s.find(({name:c})=>c===o);l?Object.assign(l,a):Ri.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof rm&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let i=null;return t&&(i="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:at({isInstanced:!0,transpileToGLSL100:!Si(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(i=>{this._setModelAttributes(i.model,t)})}draw({moduleParameters:t=null,parameters:i={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:s}=this.context,{sizeScale:o,sizeMinPixels:a,sizeMaxPixels:l,opacity:c,coordinateSystem:u}=this.props,h=this.getNumInstances();this.state.scenegraph.traverse((p,{worldMatrix:g})=>{p.model.setInstanceCount(h),p.updateModuleSettings(t),p.draw({parameters:i,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:a,sizeMaxPixels:l,composeModelMatrix:sz(s,u),sceneModelMatrix:g,u_Camera:p.model.getUniforms().project_uCameraPosition}})})}}return n.layerName="ScenegraphLayer",n.defaultProps=G_e,n})();class W_e extends fh{constructor(e={}){const{id:t=ga("sphere-geometry")}=e,{indices:i,attributes:r}=function(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const o=Math.PI-0,c=2*Math.PI-0,u=(e+1)*(t+1);if("number"==typeof i){const W=i;i=($,pe,Re,Ve,We)=>W}const h=new Float32Array(3*u),p=new Float32Array(3*u),g=new Float32Array(2*u),D=new(u>65535?Uint32Array:Uint16Array)(e*t*6);for(let W=0;W<=e;W++)for(let $=0;$<=t;$++){const pe=$/t,Re=W/e,Ve=$+W*(t+1),We=2*Ve,rt=3*Ve,wt=c*pe,vt=o*Re,At=Math.sin(wt),Bt=Math.cos(wt),$t=Math.sin(vt),yt=Bt*$t,Ut=Math.cos(vt),pt=At*$t,qt=i(yt,Ut,pt,pe,Re);h[rt+0]=qt*yt,h[rt+1]=qt*Ut,h[rt+2]=qt*pt,p[rt+0]=yt,p[rt+1]=Ut,p[rt+2]=pt,g[We+0]=pe,g[We+1]=1-Re}const O=t+1;for(let W=0;W<t;W++)for(let $=0;$<e;$++){const pe=6*(W*e+$);D[pe+0]=$*O+W,D[pe+1]=$*O+W+1,D[pe+2]=($+1)*O+W,D[pe+3]=($+1)*O+W,D[pe+4]=$*O+W+1,D[pe+5]=($+1)*O+W+1}return{indices:{size:1,value:D},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:g}}}}(e);super(Cn(at({},e),{id:t,indices:i,attributes:at(at({},r),e.attributes)}))}}const Y_e={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class Zz extends fh{constructor(e={}){const{id:t=ga("truncated-code-geometry")}=e,{indices:i,attributes:r}=function(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:l=!1}=n,c=(a?2:0)+(l?2:0),u=(r+1)*(s+1+c),h=Math.atan2(e-t,i),p=Math.sin,g=Math.cos,m=Math.PI,D=g(h),O=p(h),W=a?-2:0,$=s+(l?2:0),pe=r+1,Re=new Uint16Array(r*(s+c)*6),Ve=Y_e[o],We=new Float32Array(3*u),rt=new Float32Array(3*u),wt=new Float32Array(2*u);let vt=0,At=0;for(let Bt=W;Bt<=$;Bt++){let yt,$t=Bt/s,mt=i*$t;Bt<0?(mt=0,$t=1,yt=e):Bt>s?(mt=i,$t=1,yt=t):yt=e+Bt/s*(t-e),(-2===Bt||Bt===s+2)&&(yt=0,$t=0),mt-=i/2;for(let Ut=0;Ut<pe;Ut++){const pt=p(Ut*m*2/r),qt=g(Ut*m*2/r);We[vt+Ve[0]]=pt*yt,We[vt+Ve[1]]=mt,We[vt+Ve[2]]=qt*yt,rt[vt+Ve[0]]=Bt<0||Bt>s?0:pt*D,rt[vt+Ve[1]]=Bt<0?-1:Bt>s?1:O,rt[vt+Ve[2]]=Bt<0||Bt>s?0:qt*D,wt[At+0]=Ut/r,wt[At+1]=$t,At+=2,vt+=3}}for(let Bt=0;Bt<s+c;Bt++)for(let $t=0;$t<r;$t++){const mt=6*(Bt*r+$t);Re[mt+0]=pe*(Bt+0)+0+$t,Re[mt+1]=pe*(Bt+0)+1+$t,Re[mt+2]=pe*(Bt+1)+1+$t,Re[mt+3]=pe*(Bt+0)+0+$t,Re[mt+4]=pe*(Bt+1)+1+$t,Re[mt+5]=pe*(Bt+1)+0+$t}return{indices:Re,attributes:{POSITION:{size:3,value:We},NORMAL:{size:3,value:rt},TEXCOORD_0:{size:2,value:wt}}}}(e);super(Cn(at({},e),{id:t,indices:i,attributes:at(at({},r),e.attributes)}))}}class X_e extends Zz{constructor(e={}){const{id:t=ga("cone-geometry"),radius:i=1,cap:r=!0}=e;super(Cn(at({},e),{id:t,topRadius:0,topCap:Boolean(r),bottomCap:Boolean(r),bottomRadius:i}))}}class Q_e extends Zz{constructor(e={}){const{id:t=ga("cylinder-geometry"),radius:i=1}=e;super(Cn(at({},e),{id:t,bottomRadius:i,topRadius:i}))}}const Z_e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),J_e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),eye=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),tye=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),nye={POSITION:{size:3,value:new Float32Array(J_e)},NORMAL:{size:3,value:new Float32Array(eye)},TEXCOORD_0:{size:2,value:new Float32Array(tye)}};class iye extends fh{constructor(e={}){const{id:t=ga("cube-geometry")}=e;super(Cn(at({},e),{id:t,indices:{size:1,value:new Uint16Array(Z_e)},attributes:at(at({},nye),e.attributes)}))}}class su{constructor(e=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e=new he){const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t=new he){const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t=new su){const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],p=i[6],g=i[7],m=i[8],D=r[0],O=r[1],W=r[2],$=r[3],pe=r[4],Re=r[5],Ve=r[6],We=r[7],rt=r[8];return s[0]=o*D+a*$+l*Ve,s[1]=o*O+a*pe+l*We,s[2]=o*W+a*Re+l*rt,s[3]=c*D+u*$+h*Ve,s[4]=c*O+u*pe+h*We,s[5]=c*W+u*Re+h*rt,s[6]=p*D+g*$+m*Ve,s[7]=p*O+g*pe+m*We,s[8]=p*W+g*Re+m*rt,t}scale(e,t=new su){const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t=new he){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let l=3;const c=l;let u,p;do{if(o=c-l,0===s[o+4*o])for(a=o+1;a<c;a++)if(0!==s[o+4*a]){u=4;do{p=4-u,s[p+4*o]+=s[p+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<c;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{p=4-u,s[p+4*a]=p<=o?0:s[p+4*a]-s[p+4*o]*g}while(--u)}}while(--l);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e=new su){const r=rye;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const l=a;let c,h;do{if(s=l-a,0===r[s+6*s])for(o=s+1;o<l;o++)if(0!==r[s+6*o]){c=6;do{h=6-c,r[h+6*s]+=r[h+6*o]}while(--c);break}if(0!==r[s+6*s])for(o=s+1;o<l;o++){const p=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*p}while(--c)}}while(--a);s=2;do{o=s-1;do{const p=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=r[h+6*o]-r[h+6*s]*p}while(--c)}while(o--)}while(--s);s=2;do{const p=1/r[s+6*s];c=6;do{h=6-c,r[h+6*s]=r[h+6*s]*p}while(--c)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,l=r+r,c=t*o,u=t*a,h=t*l,p=i*a,g=i*l,m=r*l,D=s*o,O=s*a,W=s*l,$=this.elements;return $[0]=1-(p+m),$[1]=u-W,$[2]=h+O,$[3]=u+W,$[4]=1-(c+m),$[5]=g-D,$[6]=h-O,$[7]=g+D,$[8]=1-(c+p),this}transpose(e=new su){const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const rye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class he{constructor(e=0,t=0,i=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=i}cross(e,t=new he){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*s-l*r,t.y=l*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new he(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new he(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new su([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e=new he){const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t=new he){const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t=new he){return t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i=new he){return i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e=new he){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=sye,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=oye;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t=1e-6){return!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e=1e-6){return!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(Jz),Jz.almostEquals(e,t)}clone(){return new he(this.x,this.y,this.z)}}he.ZERO=void 0,he.UNIT_X=void 0,he.UNIT_Y=void 0,he.UNIT_Z=void 0,he.ZERO=new he(0,0,0),he.UNIT_X=new he(1,0,0),he.UNIT_Y=new he(0,1,0),he.UNIT_Z=new he(0,0,1);const sye=new he,oye=new he,Jz=new he;class mr{constructor(e={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new he,this.upperBound=new he,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,e8),c=e8),c.x>o.x&&(o.x=c.x),c.x<s.x&&(s.x=c.x),c.y>o.y&&(o.y=c.y),c.y<s.y&&(s.y=c.y),c.z>o.z&&(o.z=c.z),c.z<s.z&&(s.z=c.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new mr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,l){const c=this.lowerBound,u=this.upperBound;e.copy(c),t.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),r.set(c.x,u.y,u.z),s.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(e,t){const i=t8;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];e.pointToLocal(g,g)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=t8;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];e.pointToWorld(g,g)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,l=(this.upperBound.x-i.x)*r,c=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,p=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,p)),m=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,p));return!(m<0||g>m)}}const e8=new he,t8=[new he,new he,new he,new he,new he,new he,new he,new he];class hs{constructor(e=0,t=0,i=0,r=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e=new he){this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=lye;e.tangents(i,cye),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Er(e.length(),2)*Er(t.length(),2))+e.dot(t),this.normalize()}return this}mult(e,t=new hs){const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,l=e.y,c=e.z,u=e.w;return t.x=i*u+o*a+r*c-s*l,t.y=r*u+o*l+s*a-i*c,t.z=s*u+o*c+i*l-r*a,t.w=o*u-i*a-r*l-s*c,t}inverse(e=new hs){const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e=new hs){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t=new he){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*s-l*r,h=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;return t.x=u*c+g*-o+h*-l-p*-a,t.y=h*c+g*-a+p*-o-u*-l,t.z=p*c+g*-l+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t="YZX"){let i,r,s;const o=this.x,a=this.y,l=this.z,c=this.w;switch(t){case"YZX":const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,c),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=l*l;i=Math.atan2(2*a*c-2*o*l,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*c-2*a*l,1-2*h-2*g)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r="XYZ"){const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(t/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"YXZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"ZXY"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"ZYX"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"YZX"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a-l*c*u):"XZY"===r&&(this.x=l*o*a-s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a+l*c*u),this}clone(){return new hs(this.x,this.y,this.z,this.w)}slerp(e,t,i=new hs){const r=this.x,s=this.y,o=this.z,a=this.w;let p,g,m,D,O,l=e.x,c=e.y,u=e.z,h=e.w;return g=r*l+s*c+o*u+a*h,g<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>1e-6?(p=Math.acos(g),m=Math.sin(p),D=Math.sin((1-t)*p)/m,O=Math.sin(t*p)/m):(D=1-t,O=t),i.x=D*r+O*l,i.y=D*s+O*c,i.z=D*o+O*u,i.w=D*a+O*h,i}integrate(e,t,i,r=new hs){const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,p=.5*t;return r.x+=p*(s*h+o*u-a*c),r.y+=p*(o*h+a*l-s*u),r.z+=p*(a*h+s*c-o*l),r.w+=p*(-s*l-o*c-a*u),r}}const lye=new he,cye=new he,uye={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let _n=(()=>{class n{constructor(t={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,i){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,i,r,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=uye,n})();class Gi{constructor(e={}){this.position=void 0,this.quaternion=void 0,this.position=new he,this.quaternion=new hs,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Gi.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Gi.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t=new he){return this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r=new he){return i.vsub(e,r),t.conjugate(i8),i8.vmult(r,r),r}static pointToWorldFrame(e,t,i,r=new he){return t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i=new he){return e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r=new he){return t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const i8=new hs;class Bf extends _n{constructor(e={}){const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:_n.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new he;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let l=0;l!==a;l++){t[o[l]].vsub(t[o[(l+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error("Vertex "+this.faces[e][r]+" not found!");const t=this.faceNormals[e]||new he;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(".faceNormals["+e+"] = Vec3("+t.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let r=0;r<this.faces[e].length;r++)console.warn(".vertices["+this.faces[e][r]+"] = Vec3("+this.vertices[this.faces[e][r]].toString()+")")}}}getFaceNormal(e,t){const i=this.faces[e];Bf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new he,o=new he;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,l,c){const u=new he;let h=-1,p=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const D=u.dot(o);D>p&&(p=D,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const D=i.vertices[i.faces[h][m]],O=new he;O.copy(D),s.vmult(O,O),r.vadd(O,O),g.push(O)}h>=0&&this.clipFaceAgainstHull(o,e,t,g,a,l,c)}findSeparatingAxis(e,t,i,r,s,o,a,l){const c=new he,u=new he,h=new he,p=new he,g=new he,m=new he;let D=Number.MAX_VALUE;const O=this;if(O.uniqueAxes)for(let W=0;W!==O.uniqueAxes.length;W++){i.vmult(O.uniqueAxes[W],c);const $=O.testSepAxis(c,e,t,i,r,s);if(!1===$)return!1;$<D&&(D=$,o.copy(c))}else{const W=a?a.length:O.faces.length;for(let $=0;$<W;$++){c.copy(O.faceNormals[a?a[$]:$]),i.vmult(c,c);const Re=O.testSepAxis(c,e,t,i,r,s);if(!1===Re)return!1;Re<D&&(D=Re,o.copy(c))}}if(e.uniqueAxes)for(let W=0;W!==e.uniqueAxes.length;W++){s.vmult(e.uniqueAxes[W],u);const $=O.testSepAxis(u,e,t,i,r,s);if(!1===$)return!1;$<D&&(D=$,o.copy(u))}else{const W=l?l.length:e.faces.length;for(let $=0;$<W;$++){u.copy(e.faceNormals[l?l[$]:$]),s.vmult(u,u);const Re=O.testSepAxis(u,e,t,i,r,s);if(!1===Re)return!1;Re<D&&(D=Re,o.copy(u))}}for(let W=0;W!==O.uniqueEdges.length;W++){i.vmult(O.uniqueEdges[W],p);for(let $=0;$!==e.uniqueEdges.length;$++)if(s.vmult(e.uniqueEdges[$],g),p.cross(g,m),!m.almostZero()){m.normalize();const pe=O.testSepAxis(m,e,t,i,r,s);if(!1===pe)return!1;pe<D&&(D=pe,o.copy(m))}}return r.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){Bf.project(this,e,i,r,XR),Bf.project(t,e,s,o,QR);const l=XR[0],c=XR[1],u=QR[0],h=QR[1];if(l<h||u<c)return!1;const p=l-h,g=u-c;return p<g?p:g}calculateLocalInertia(e,t){const i=new he,r=new he;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const l=new he,c=new he,u=new he,h=new he,p=new he,g=new he,m=new he,D=new he,O=this,$=r,pe=[];let Re=-1,Ve=Number.MAX_VALUE;for(let At=0;At<O.faces.length;At++){l.copy(O.faceNormals[At]),i.vmult(l,l);const Bt=l.dot(e);Bt<Ve&&(Ve=Bt,Re=At)}if(Re<0)return;const We=O.faces[Re];We.connectedFaces=[];for(let At=0;At<O.faces.length;At++)for(let Bt=0;Bt<O.faces[At].length;Bt++)-1!==We.indexOf(O.faces[At][Bt])&&At!==Re&&-1===We.connectedFaces.indexOf(At)&&We.connectedFaces.push(At);const rt=We.length;for(let At=0;At<rt;At++){const Bt=O.vertices[We[At]];Bt.vsub(O.vertices[We[(At+1)%rt]],c),u.copy(c),i.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[Re]),i.vmult(h,h),t.vadd(h,h),u.cross(h,p),p.negate(p),g.copy(Bt),i.vmult(g,g),t.vadd(g,g);const mt=We.connectedFaces[At];m.copy(this.faceNormals[mt]);const yt=this.getPlaneConstantOfFace(mt);D.copy(m),i.vmult(D,D);const Ut=yt-D.dot(t);for(this.clipFaceAgainstPlane($,pe,D,Ut);$.length;)$.shift();for(;pe.length;)$.push(pe.shift())}m.copy(this.faceNormals[Re]);const wt=this.getPlaneConstantOfFace(Re);D.copy(m),i.vmult(D,D);const vt=wt-D.dot(t);for(let At=0;At<$.length;At++){let Bt=D.dot($[At])+vt;if(Bt<=s&&(console.log("clamped: depth="+Bt+" to minDist="+s),Bt=s),Bt<=o){const $t=$[At];Bt<=1e-6&&a.push({point:$t,normal:D,depth:Bt})}}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],c=e[0];s=i.dot(l)+r;for(let u=0;u<a;u++){if(c=e[u],o=i.dot(c)+r,s<0)if(o<0){const h=new he;h.copy(c),t.push(h)}else{const h=new he;l.lerp(c,s/(s-o),h),t.push(h)}else if(o<0){const h=new he;l.lerp(c,s/(s-o),h),t.push(h),t.push(c)}l=c,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new he);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new he);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,l,c,u,h,p=new he;for(let g=0;g<s.length;g++){p.copy(s[g]),t.vmult(p,p),e.vadd(p,p);const m=p;(void 0===o||m.x<o)&&(o=m.x),(void 0===c||m.x>c)&&(c=m.x),(void 0===a||m.y<a)&&(a=m.y),(void 0===u||m.y>u)&&(u=m.y),(void 0===l||m.z<l)&&(l=m.z),(void 0===h||m.z>h)&&(h=m.z)}i.set(o,a,l),r.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e=new he){const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new he;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=r[o];const l=t[i[o][0]],c=new he;e.vsub(l,c);const u=a.dot(c),h=new he;s.vsub(l,h);const p=a.dot(h);if(u<0&&p>0||u>0&&p<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=dye;let l=0,c=0;const u=hye,h=e.vertices;u.setZero(),Gi.vectorToLocalFrame(i,r,t,a),Gi.pointToLocalFrame(i,r,u,u);const p=u.dot(a);c=l=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>l&&(l=m),m<c&&(c=m)}if(c-=p,l-=p,c>l){const g=c;c=l,l=g}s[0]=l,s[1]=c}}const XR=[],QR=[],dye=new he,hye=new he;class px extends _n{constructor(e){super({type:_n.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=he,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],l=new Bf({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t=new he){return px.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)mh.set(s[o][0],s[o][1],s[o][2]),t.vmult(mh,mh),e.vadd(mh,mh),i(mh.x,mh.y,mh.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;ou[0].set(s.x,s.y,s.z),ou[1].set(-s.x,s.y,s.z),ou[2].set(-s.x,-s.y,s.z),ou[3].set(-s.x,-s.y,-s.z),ou[4].set(s.x,-s.y,-s.z),ou[5].set(s.x,s.y,-s.z),ou[6].set(-s.x,s.y,-s.z),ou[7].set(s.x,-s.y,s.z);const o=ou[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=ou[a];t.vmult(l,l),e.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>r.x&&(r.x=c),u>r.y&&(r.y=u),h>r.z&&(r.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const mh=new he,ou=[new he,new he,new he,new he,new he,new he,new he,new he];class yn extends class{constructor(){this._listeners=void 0}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}{constructor(e={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=yn.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new he,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new he,this.previousPosition=new he,this.interpolatedPosition=new he,this.initPosition=new he,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new he,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new he,this.force=new he;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?yn.STATIC:yn.DYNAMIC,typeof e.type==typeof yn.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=yn.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new he,this.quaternion=new hs,this.initQuaternion=new hs,this.previousQuaternion=new hs,this.interpolatedQuaternion=new hs,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new he,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new he,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new he,this.invInertia=new he,this.invInertiaWorld=new su,this.invMassSolve=0,this.invInertiaSolve=new he,this.invInertiaWorldSolve=new su,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new he(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new he(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new mr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new he,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=yn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===yn.SLEEPING&&this.dispatchEvent(yn.wakeupEvent)}sleep(){this.sleepState=yn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=Er(this.sleepSpeedLimit,2);t===yn.AWAKE&&i<r?(this.sleepState=yn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(yn.sleepyEvent)):t===yn.SLEEPY&&i>r?this.wakeUp():t===yn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(yn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===yn.SLEEPING||this.type===yn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t=new he){return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t=new he){return this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t=new he){return this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t=new he){return this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new he,s=new hs;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),l=o.boundingSphereRadius;a+l>r&&(r=a+l)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=fye,o=pye,a=this.quaternion,l=this.aabb,c=gye;for(let u=0;u!==r;u++){const h=e[u];a.vmult(t[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,c.lowerBound,c.upperBound),0===u?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=mye,r=_ye;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t=new he){if(this.type!==yn.DYNAMIC)return;this.sleepState===yn.SLEEPING&&this.wakeUp();const i=yye;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t=new he){if(this.type!==yn.DYNAMIC)return;const i=bye,r=vye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===yn.DYNAMIC&&(this.sleepState===yn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t=new he){if(this.type!==yn.DYNAMIC)return;this.sleepState===yn.SLEEPING&&this.wakeUp();const i=t,r=wye;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=Eye;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t=new he){if(this.type!==yn.DYNAMIC)return;const i=Sye,r=xye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Cye;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),px.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new he;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==yn.DYNAMIC&&this.type!==yn.KINEMATIC||this.sleepState===yn.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*p.x,r.y+=a.y*g*p.y,r.z+=a.z*g*p.z;const m=h.elements,D=this.angularFactor,O=l.x*D.x,W=l.y*D.y,$=l.z*D.z;s.x+=e*(m[0]*O+m[1]*W+m[2]*$),s.y+=e*(m[3]*O+m[4]*W+m[5]*$),s.z+=e*(m[6]*O+m[7]*W+m[8]*$),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}yn.idCounter=0,yn.COLLIDE_EVENT_NAME="collide",yn.DYNAMIC=1,yn.STATIC=2,yn.KINEMATIC=4,yn.AWAKE=0,yn.SLEEPY=1,yn.SLEEPING=2,yn.wakeupEvent={type:"wakeup"},yn.sleepyEvent={type:"sleepy"},yn.sleepEvent={type:"sleep"};const fye=new he,pye=new hs,gye=new mr,mye=new su,_ye=new su,yye=new he,bye=new he,vye=new he,wye=new he,Eye=new he,Sye=new he,xye=new he,Cye=new he;new he,new he;class gx{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new he,this.rayToWorld=new he,this.hitNormalWorld=new he,this.hitPointWorld=new he,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let r8,s8,o8,a8,l8,c8,u8;r8=_n.types.SPHERE,s8=_n.types.PLANE,o8=_n.types.BOX,a8=_n.types.CYLINDER,l8=_n.types.CONVEXPOLYHEDRON,c8=_n.types.HEIGHTFIELD,u8=_n.types.TRIMESH;class bs{get[r8](){return this._intersectSphere}get[s8](){return this._intersectPlane}get[o8](){return this._intersectBox}get[a8](){return this._intersectConvex}get[l8](){return this._intersectConvex}get[c8](){return this._intersectHeightfield}get[u8](){return this._intersectTrimesh}constructor(e=new he,t=new he){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=e.clone(),this.to=t.clone(),this.direction=new he,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=bs.ANY,this.result=new gx,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||bs.ANY,this.result=t.result||new gx,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(d8),tN.length=0,e.broadphase.aabbQuery(e,d8,tN),this.intersectBodies(tN),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||0==(this.collisionFilterGroup&e.collisionFilterMask)||0==(e.collisionFilterGroup&this.collisionFilterMask))return;const r=Rye,s=Nye;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if((!i||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(l,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function(n,e,t){t.vsub(n,jf);const i=jf.dot(e);return e.scale(i,_x),_x.vadd(n,_x),t.distanceTo(_x)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,l=this.direction,c=new he(0,0,1);t.vmult(c,c);const u=new he;o.vsub(i,u);const h=u.dot(c);if(a.vsub(i,u),h*u.dot(c)>0||o.distanceTo(a)<h)return;const g=c.dot(l);if(Math.abs(g)<this.precision)return;const m=new he,D=new he,O=new he;o.vsub(i,m);const W=-c.dot(m)/g;l.scale(W,D),o.vadd(D,O),this.reportIntersection(c,O,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=Pye;o.from.copy(this.from),o.to.copy(this.to),Gi.pointToLocalFrame(i,t,o.from,o.from),Gi.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=Fye;let l,c,u,h;l=c=0,u=h=e.data.length-1;const p=new mr;o.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=l;g<u;g++)for(let m=c;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,p),p.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),Gi.pointToWorldFrame(i,t,e.pillarOffset,mx),this._intersectConvex(e.pillarConvex,t,mx,r,s,h8),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),Gi.pointToWorldFrame(i,t,e.pillarOffset,mx),this._intersectConvex(e.pillarConvex,t,mx,r,s,h8)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=e.radius,c=Er(a.x-o.x,2)+Er(a.y-o.y,2)+Er(a.z-o.z,2),u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=Er(o.x-i.x,2)+Er(o.y-i.y,2)+Er(o.z-i.z,2)-Er(l,2),p=Er(u,2)-4*c*h,g=kye,m=Lye;if(!(p<0))if(0===p)o.lerp(a,p,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const D=(-u-Math.sqrt(p))/(2*c),O=(-u+Math.sqrt(p))/(2*c);if(D>=0&&D<=1&&(o.lerp(a,D,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;O>=0&&O<=1&&(o.lerp(a,O,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=Bye,l=f8,c=o&&o.faceList||null,u=e.faces,h=e.vertices,p=e.faceNormals,g=this.direction,m=this.from,O=m.distanceTo(this.to),W=c?c.length:u.length,$=this.result;for(let pe=0;!$.shouldStop&&pe<W;pe++){const Re=c?c[pe]:pe,Ve=u[Re],We=p[Re],rt=t,wt=i;l.copy(h[Ve[0]]),rt.vmult(l,l),l.vadd(wt,l),l.vsub(m,l),rt.vmult(We,a);const vt=g.dot(a);if(Math.abs(vt)<this.precision)continue;const At=a.dot(l)/vt;if(!(At<0)){g.scale(At,ba),ba.vadd(m,ba),yc.copy(h[Ve[0]]),rt.vmult(yc,yc),wt.vadd(yc,yc);for(let Bt=1;!$.shouldStop&&Bt<Ve.length-1;Bt++){au.copy(h[Ve[Bt]]),lu.copy(h[Ve[Bt+1]]),rt.vmult(au,au),rt.vmult(lu,lu),wt.vadd(au,au),wt.vadd(lu,lu);const $t=ba.distanceTo(m);!bs.pointInTriangle(ba,yc,au,lu)&&!bs.pointInTriangle(ba,au,yc,lu)||$t>O||this.reportIntersection(a,ba,s,r,Re)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=jye,l=$ye,c=Wye,u=f8,h=Vye,p=Uye,g=zye,m=Gye,D=Hye,O=e.indices,W=this.from,$=this.to,pe=this.direction;c.position.copy(i),c.quaternion.copy(t),Gi.vectorToLocalFrame(i,t,pe,h),Gi.pointToLocalFrame(i,t,W,p),Gi.pointToLocalFrame(i,t,$,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,g.vsub(p,h),h.normalize();const Re=p.distanceSquared(g);e.tree.rayQuery(this,c,l);for(let Ve=0,We=l.length;!this.result.shouldStop&&Ve!==We;Ve++){const rt=l[Ve];e.getNormal(rt,a),e.getVertex(O[3*rt],yc),yc.vsub(p,u);const wt=h.dot(a),vt=a.dot(u)/wt;if(vt<0)continue;h.scale(vt,ba),ba.vadd(p,ba),e.getVertex(O[3*rt+1],au),e.getVertex(O[3*rt+2],lu);const At=ba.distanceSquared(p);!bs.pointInTriangle(ba,au,yc,lu)&&!bs.pointInTriangle(ba,yc,au,lu)||At>Re||(Gi.vectorToWorldFrame(t,a,D),Gi.pointToWorldFrame(i,t,ba,m),this.reportIntersection(D,m,s,r,rt))}l.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,l=o.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=void 0!==s?s:-1,this.mode){case bs.ALL:this.hasHit=!0,c.set(o,a,e,t,i,r,l),c.hasHit=!0,this.callback(c);break;case bs.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l));break;case bs.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l),c.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,jf),i.vsub(t,rb),e.vsub(t,nN);const s=jf.dot(jf),o=jf.dot(rb),a=jf.dot(nN),l=rb.dot(rb),c=rb.dot(nN);let u,h;return(u=l*a-o*c)>=0&&(h=s*c-o*a)>=0&&u+h<s*l-o*o}}bs.CLOSEST=1,bs.ANY=2,bs.ALL=4;const d8=new mr,tN=[],rb=new he,nN=new he,Rye=new he,Nye=new hs,ba=new he,yc=new he,au=new he,lu=new he,h8={faceList:[0]},mx=new he,Pye=new bs,Fye=[],kye=new he,Lye=new he,Bye=new he,f8=new he,jye=new he,Vye=new he,Uye=new he,zye=new he,Hye=new he,Gye=new he;new mr;const $ye=[],Wye=new Gi,jf=new he,_x=new he;let M8,D8,I8,O8,R8,N8,P8,F8,k8,L8,B8,j8,V8,U8,z8,H8,G8,$8,W8,q8,Y8,K8,X8,Q8,Z8;new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new bs,new he,new he,new he(1,0,0),new he(0,1,0),new he(0,0,1),new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new mr,new he,new mr,new he,new he,new he,new he,new he,new he,new he,new mr,new he,new Gi,new mr;const Nr={sphereSphere:_n.types.SPHERE,spherePlane:_n.types.SPHERE|_n.types.PLANE,boxBox:_n.types.BOX|_n.types.BOX,sphereBox:_n.types.SPHERE|_n.types.BOX,planeBox:_n.types.PLANE|_n.types.BOX,convexConvex:_n.types.CONVEXPOLYHEDRON,sphereConvex:_n.types.SPHERE|_n.types.CONVEXPOLYHEDRON,planeConvex:_n.types.PLANE|_n.types.CONVEXPOLYHEDRON,boxConvex:_n.types.BOX|_n.types.CONVEXPOLYHEDRON,sphereHeightfield:_n.types.SPHERE|_n.types.HEIGHTFIELD,boxHeightfield:_n.types.BOX|_n.types.HEIGHTFIELD,convexHeightfield:_n.types.CONVEXPOLYHEDRON|_n.types.HEIGHTFIELD,sphereParticle:_n.types.PARTICLE|_n.types.SPHERE,planeParticle:_n.types.PLANE|_n.types.PARTICLE,boxParticle:_n.types.BOX|_n.types.PARTICLE,convexParticle:_n.types.PARTICLE|_n.types.CONVEXPOLYHEDRON,cylinderCylinder:_n.types.CYLINDER,sphereCylinder:_n.types.SPHERE|_n.types.CYLINDER,planeCylinder:_n.types.PLANE|_n.types.CYLINDER,boxCylinder:_n.types.BOX|_n.types.CYLINDER,convexCylinder:_n.types.CONVEXPOLYHEDRON|_n.types.CYLINDER,heightfieldCylinder:_n.types.HEIGHTFIELD|_n.types.CYLINDER,particleCylinder:_n.types.PARTICLE|_n.types.CYLINDER,sphereTrimesh:_n.types.SPHERE|_n.types.TRIMESH,planeTrimesh:_n.types.PLANE|_n.types.TRIMESH};M8=Nr.sphereSphere,D8=Nr.spherePlane,I8=Nr.boxBox,O8=Nr.sphereBox,R8=Nr.planeBox,N8=Nr.convexConvex,P8=Nr.sphereConvex,F8=Nr.planeConvex,k8=Nr.boxConvex,L8=Nr.sphereHeightfield,B8=Nr.boxHeightfield,j8=Nr.convexHeightfield,V8=Nr.sphereParticle,U8=Nr.planeParticle,z8=Nr.boxParticle,H8=Nr.convexParticle,G8=Nr.cylinderCylinder,$8=Nr.sphereCylinder,W8=Nr.planeCylinder,q8=Nr.boxCylinder,Y8=Nr.convexCylinder,K8=Nr.heightfieldCylinder,X8=Nr.particleCylinder,Q8=Nr.sphereTrimesh,Z8=Nr.planeTrimesh,new he,new he,new he,new he,new he,new hs,new hs,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new mr,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new he,new hs,new he,new he,new he,new he,new he,new he,new he,new he,new mr,new bs;const Xs=globalThis.performance||{};if(!Xs.now){let n=Date.now();Xs.timing&&Xs.timing.navigationStart&&(n=Xs.timing.navigationStart),Xs.now=()=>Date.now()-n}var Hf=Je(517);class Br extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new G;return this._value}next(e){super.next(this._value=e)}}function fm(n,e,t){e||(e=new qn(qn.IDENTITY));const i=new qn(qn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new qn(qn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new qn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===fm(s,r,t))return!1;return!0}function r6(){F4([Dz,cm])}function s6(n,e){var t;const i=null===(t=e.nodes)||void 0===t?void 0:t.find(r=>r.name===n);if(i){let r=!1;for(const s of e.scenes)r||fm(s,new qn(qn.IDENTITY),(o,a)=>o!==i||(o.matrix=a,o.translation=void 0,o.rotation=void 0,o.scale=void 0,r=!0,!1));return e.scene={id:n,name:n,nodes:[i]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function sN(n,e){return Fi(this,void 0,void 0,function*(){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield WS(i,cm,{DracoLoader:IR,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),s6(n.scenegraphNode,r)})}function qve(n,e){return Fi(this,void 0,void 0,function*(){return s6(n,yield e)})}function oN(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new W_e;break;case"cone":i=new X_e;break;case"cylinder":i=new Q_e;break;case"cube":default:i=new iye}return new Sge(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:ji.CARTESIAN,data:e,mesh:i,wireframe:!1,getTransformMatrix:r=>r.transformMatrix,getColor:r=>r.color||[255,255,255,229.5]},t))}}function o6(n,e,t){if(e&&0!==e.length)return new fge(Object.assign({id:n,pickable:!0,data:e.map(i=>Object.assign(Object.assign({},i),{position:new qn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color},t))}let Kve=(()=>{class n extends U4{initializeState(){const{data:t}=this.props;this.setState({data:null!=t?t:[],zoomOpacity:.8,doCollisions:!1}),r6()}renderLayers(){var t,i;const r=this.state,s={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const l of r.data){const c=null!==(t=l.geometry)&&void 0!==t?t:"cube";l.scenegraph?s.scenegraph.push(l):void 0!==s[c]&&s[c].push(l)}const o={};for(const l of s.scenegraph)l.scenegraph&&l.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,l.scenegraph)&&(o[l.scenegraph]=sN({scenegraph:l.scenegraph},n.gltfCache));const a=[];for(const[l,c]of Object.entries(s))if("scenegraph"===l)for(const u of c)a.push(new $_e({id:"models-"+u["@id"],opacity:u.zoomBasedOpacity?r.zoomOpacity:void 0!==u.opacity?u.opacity:1,pickable:!u.unpickable,coordinateSystem:ji.CARTESIAN,data:[u],scenegraph:u.scenegraphNode?qve(u.scenegraphNode,o[u.scenegraph]):u.scenegraph,_lighting:u._lighting,getTransformMatrix:u.transformMatrix,getColor:null!==(i=u.color)&&void 0!==i?i:[0,255,0,127.5],parameters:{depthMask:!u.zoomBasedOpacity&&(void 0===u.opacity||1===u.opacity)}}));else"text"===l?(a.push(o6("text",c.filter(u=>u.unpickable),{pickable:!1})),a.push(o6("textPickable",c.filter(u=>!u.unpickable),{pickable:!0}))):"wireframe"===l?a.push(oN(l,c,{wireframe:!0,pickable:!1,geometry:l})):(a.push(oN(l,c.filter(u=>u.unpickable),{wireframe:!1,pickable:!1,geometry:l})),a.push(oN(`${l}Pickable`,c.filter(u=>!u.unpickable),{wireframe:!1,pickable:!0,geometry:l})));return r.doCollisions&&function(n){Fi(this,void 0,void 0,function*(){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new qn(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),c=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new mr({lowerBound:new he(...l.map((u,h)=>Math.min(u,c[h]))),upperBound:new he(...c.map((u,h)=>Math.max(u,l[h])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield G0(o.scenegraph,cm,{DracoLoader:IR,decompress:!0,postProcess:!0});for(const l of a.scenes)fm(l,new qn(o.transformMatrix),(c,u)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:c.name,entityId:o.entityId,bbox:new mr({lowerBound:new he(...p.map((m,D)=>Math.min(m,g[D]))),upperBound:new he(...g.map((m,D)=>Math.max(m,p[D])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const l of t)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i})}(r.data),a.filter(l=>!!l)}getPickingInfo(t){return t.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function a6(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),a6(t,e);return e}let Qve=(()=>{class n{constructor(t){var i,r,s,o,a;this.deckProps=t,this.bodyUILayer=new Kve({}),this.nodeClickSubject=new se,this.nodeHoverStartSubject=new se,this.nodeHoverStopSubject=new se,this.sceneRotationSubject=new Br([0,0]),this.nodeDragStartSubject=new se,this.nodeDragSubject=new se,this.nodeDragEndSubject=new se,this.nodeClick$=this.nodeClickSubject.pipe(Es()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Es()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Es()),this.sceneRotation$=this.sceneRotationSubject.pipe(Es()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Es()),this.nodeDrag$=this.nodeDragSubject.pipe(Es()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Es());const l=Object.assign(Object.assign({},t),{views:["orthographic"===t.camera?new Kde({flipY:!1,near:-1e3}):new Zde({orbitAxis:"Y"})],controller:void 0===t.interactive||t.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:c=>{var u;return null!==(u=this.cursor)&&void 0!==u?u:c.isDragging?"grabbing":"grab"}});t.legacyLighting&&(l.effects=[new $O({ambientLight:new W4({color:[255,255,255],intensity:10})})]),this.deck=new ix(l),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(i=t.minRotationX)&&void 0!==i?i:-15,maxRotationX:null!==(r=t.maxRotationX)&&void 0!==r?r:15,target:null!==(s=t.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=t.rotation)&&void 0!==o?o:0,zoom:null!==(a=t.zoom)&&void 0!==a?a:9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return Fi(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if((null==t?void 0:t.length)>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of t)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new qn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,e,t,i){return Fi(this,void 0,void 0,function*(){r6();const r=yield sN({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"},undefined),s={},o=[];for(const a of r.scenes)fm(a,e=new qn(e||qn.IDENTITY),(l,c)=>{const u={"@id":l.name||l.id,"@type":"ProcessedNode",transformMatrix:new qn(c),geometry:"wireframe",node:l};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:u["@id"],transformMatrix:new qn(e||qn.IDENTITY),tooltip:l.name||l.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:l}),l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=c.transformAsPoint(h.attributes.POSITION.min,[]),g=c.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new mr({lowerBound:new he(...p.map((m,D)=>Math.min(m,g[D]))),upperBound:new he(...g.map((m,D)=>Math.max(m,p[D])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(l=>!l.bbox)){for(const l of a6(a.node).map(c=>s[c]).filter(c=>c.bbox))a.bbox?a.bbox.extend(l.bbox):a.bbox=l.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const l=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(l)).clone().vmul(new he(.5,.5,.5)),p=a.center=l.clone().vadd(h);a.transformMatrix=new qn(qn.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s})})(r,s).then(o=>{console.log("results",o),console.log("data",t),(t=t.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new qn(t.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object&&t.object["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){var r,s;t.picked&&t.object&&t.object["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:null!==(s=null===(r=null==i?void 0:i.srcEvent)||void 0===r?void 0:r.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(t){var i;if(null===(i=t.interactionState)||void 0===i?void 0:i.isZooming){const r=this.bodyUILayer.state,s=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);r.zoomOpacity!==s&&this.bodyUILayer.setState({data:r.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},t.viewState)}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){var s;(null===(s=null==t?void 0:t.object)||void 0===s?void 0:s["@id"])&&r.next({node:t.object,info:t,e:i})}}return rr([Hf.ZP],n.prototype,"_onHover",null),rr([Hf.ZP],n.prototype,"_onClick",null),rr([Hf.ZP],n.prototype,"_onViewStateChange",null),rr([Hf.ZP],n.prototype,"_onDragStart",null),rr([Hf.ZP],n.prototype,"_onDrag",null),rr([Hf.ZP],n.prototype,"_onDragEnd",null),n})();function Zve(n,e){return n===e}function Jve(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function xx(n,e=Zve){let t=null,i=null;function r(){return Jve(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}const twe=xx(function(){const n=cD();if(!n)return!1;const e=n.injector.get(sB,null);return!!e&&e.some(i=>(i&&i.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let aN=(()=>{class n{constructor(){this.bootstrap$=new kg(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const lN=new Ht("INITIAL_STATE_TOKEN");let nwe=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const l6=new Ht("Internals.StateContextFactory"),c6=new Ht("Internals.StateFactory");function ub(...n){if(1===n.length){const e=n[0];if(F(e))return Cx(e,null);if(Y(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Cx(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Cx(n=1===n.length&&F(n[0])?n[0]:n,null).pipe(ye(t=>e(...t)))}return Cx(n,null)}function Cx(n,e){return new P(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=qe(n[a]);let c=!1;t.add(l.subscribe({next:u=>{c||(c=!0,o++),r[a]=u},error:u=>t.error(u),complete:()=>{s++,(s===i||!c)&&(o===i&&t.next(e?e.reduce((u,h,p)=>(u[h]=r[p],u),{}):r),t.complete())}}))}})}function Qi(n,e){return function(i){return i.lift(new iwe(n,e))}}class iwe{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new rwe(e,this.predicate,this.thisArg))}}class rwe extends v{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function $a(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(u){let h;s++,!r||a?(a=!1,r=new kg(n,e,i),h=r.subscribe(this),o=u.subscribe({next(p){r.next(p)},error(p){a=!0,r.error(p)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):h=r.subscribe(this),this.add(()=>{s--,h.unsubscribe(),h=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}const u6=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Wi(n){return e=>0===n?lS():e.lift(new owe(n))}class owe{constructor(e){if(this.total=e,this.total<0)throw new u6}call(e,t){return t.subscribe(new awe(e,this.total))}}class awe extends v{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function d6(n,e){return e?t=>t.pipe(d6((i,r)=>qe(n(i,r)).pipe(ye((s,o)=>e(i,s,r,o))))):t=>t.lift(new lwe(n))}class lwe{constructor(e){this.project=e}call(e,t){return t.subscribe(new cwe(e,this.project))}}class cwe extends Ae{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new _t(this),i=this.destination;i.add(t);const r=k(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function Ax(n=null){return e=>e.lift(new uwe(n))}class uwe{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new dwe(e,this.defaultValue))}}class dwe extends v{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function bc(n){return function(t){const i=new hwe(n),r=t.lift(i);return i.caught=r}}class hwe{constructor(e){this.selector=e}call(e,t){return t.subscribe(new fwe(e,this.selector,this.caught))}}class fwe extends Ae{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new _t(this);this.add(i);const r=k(t,i);r!==i&&this.add(r)}}}function _r(n){return e=>e.lift(new pwe(n))}class pwe{constructor(e){this.notifier=e}call(e,t){const i=new gwe(e),r=k(this.notifier,new _t(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class gwe extends Ae{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function _h(){}function Yr(n,e,t){return function(r){return r.lift(new mwe(n,e,t))}}class mwe{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new _we(e,this.nextOrObserver,this.error,this.complete))}}class _we extends v{constructor(e,t,i,r){super(e),this._tapNext=_h,this._tapError=_h,this._tapComplete=_h,this._tapError=i||_h,this._tapComplete=r||_h,Q(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||_h,this._tapError=t.error||_h,this._tapComplete=t.complete||_h)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function rd(n,e){return t=>t.lift(new ywe(n,e))}class ywe{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new bwe(e,this.compare,this.keySelector))}}class bwe extends v{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}const Wa={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,e,t)=>`State name '${n}' from ${e} already exists in ${t}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let h6=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return function(n){return"server"===n}(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return gn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return gn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof gn||console.warn(Wa.ZONE_WARNING())}}return n.\u0275fac=function(t){return new(t||n)(ke(gn),ke(Wc))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const f6=new Ht("ROOT_STATE_TOKEN"),p6=new Ht("FEATURE_STATE_TOKEN"),g6=new Ht("NGXS_PLUGINS"),m6=new Ht("NG_TEST_MODE"),_6=new Ht("NG_DEV_MODE"),sd="NGXS_META",y6="NGXS_OPTIONS_META",cN="NGXS_SELECTOR_META";let Gf=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=h6}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class vwe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}const b6=new Ht("NGXS_EXECUTION_STRATEGY");function $f(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const v6=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},Tx=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),uN=n=>n&&"object"==typeof n&&!Array.isArray(n),dN=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(uN(n)&&uN(t))for(const i in t)uN(t[i])?(n[i]||Object.assign(n,{[i]:{}}),dN(n[i],t[i])):Object.assign(n,{[i]:t[i]});return dN(n,...e)};function hN(n){if(!n.hasOwnProperty(sd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,sd,{value:e})}return db(n)}function db(n){return n[sd]}function pN(n){return n[cN]}function w6(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}(n)}function E6(n,e){const t=Tx(e.currentAppState,n.path),i=Tx(e.newAppState,n.path);return new vwe(t,i,!n.isInitialised)}function Mwe(...n){return function(n,e,t=Owe){const i=function(n){return n.reduce((e,t)=>(e[$f(t)]=!0,e),{})}(n),r=e&&function(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function(n,e){return Qi(t=>{const i=$f(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function Owe(){return ye(n=>n.action)}function Mx(n){return e=>new P(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let Dx=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(b6))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class Pwe extends se{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let Ix=(()=>{class n extends Pwe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=nr(n)))(i||n)}}(),n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),Fwe=(()=>{class n extends P{constructor(t,i){super(r=>{const s=t.pipe(Mx(i)).subscribe({next:o=>r.next(o),error:o=>r.error(o),complete:()=>r.complete()});r.add(s)})}}return n.\u0275fac=function(t){return new(t||n)(ke(Ix),ke(Dx))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const S6=n=>(...e)=>n.shift()(...e,(...i)=>S6(n)(...i));let Ox=(()=>{class n extends Br{constructor(){super({})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),gN=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(ke(n,12),ke(g6,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),mN=(()=>{class n extends se{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=nr(n)))(i||n)}}(),n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),x6=(()=>{class n{constructor(t,i,r,s,o,a){this._injector=t,this._actions=i,this._actionResults=r,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){const i=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return i.subscribe({error:r=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(oa),this._errorHandler.handleError(r)}catch(s){}})}),i.pipe(Mx(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?fn(this._stateStream.getValue()):ub(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){if(!$f(t))return Fg(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const r=this._stateStream.getValue();return S6([...this._pluginManager.plugins,(o,a)=>{o!==r&&this._stateStream.next(o);const l=this.getActionResultStream(a);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(r,t).pipe($a())}getActionResultStream(t){return this._actionResults.pipe(Qi(i=>i.action===t&&"DISPATCHED"!==i.status),Wi(1),$a())}createDispatchObservable(t){return t.pipe(d6(i=>{switch(i.status){case"SUCCESSFUL":return fn(this._stateStream.getValue());case"ERRORED":return Fg(i.error);default:return Yc}})).pipe($a())}}return n.\u0275fac=function(t){return new(t||n)(ke(Wn),ke(Ix),ke(mN),ke(gN),ke(Ox),ke(Dx))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const C6=n=>{Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(i){t.call(n,i)&&(!e||"caller"!==i&&"callee"!==i&&"arguments"!==i)&&null!==n[i]&&("object"==typeof n[i]||"function"==typeof n[i])&&!Object.isFrozen(n[i])&&C6(n[i])}),n};let A6=(()=>{class n{constructor(t,i){this.isDevMode=t,this.isTestMode=i}}return n.\u0275fac=function(t){return new(t||n)(ke(_6),ke(m6))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),T6=(()=>{class n{constructor(t,i){this._host=t,this._config=i}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(Wa.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(Wa.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(t){return new(t||n)(ke(A6),ke(Gf))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),gm=(()=>{class n{constructor(t,i,r,s){this._stateStream=t,this._dispatcher=i,this._config=r,s.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:i=>{const r=C6(i);return t.setState(r)},dispatch:i=>t.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign({},r,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(ke(Ox),ke(x6),ke(Gf),ke(T6))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),Rx=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();function r(l){return Tx(l,t.path)}function s(l,c){const u=v6(l,t.path,c),h=t.instance;if(h.ngxsOnChanges){const p=E6(t,{currentAppState:l,newAppState:u});h.ngxsOnChanges(p)}return i.setState(u),u}function o(l,c){return s(l,c(r(l)))}return{getState:()=>r(i.getState()),patchState:l=>o(i.getState(),function(n){return e=>{if(Array.isArray(n))throw new Error(Wa.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(Wa.PATCHING_PRIMITIVE());const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(l)),setState(l){const c=i.getState();return function(l){return"function"==typeof l}(l)?o(c,l):s(c,l)},dispatch:l=>i.dispatch(l)}}}return n.\u0275fac=function(t){return new(t||n)(ke(gm))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class Nx{static stateNameErrorMessage(e){return Wa.STATE_NAME(e)}static checkCorrectStateName(e){if(!e)throw new Error(Wa.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}static checkStateNameIsUnique(e,t){const r=this.getValidStateMeta(e).name,s=t[r];if(s&&s!==e)throw new Error(Wa.STATE_UNIQUE(r,e.name,s.name));return r}static getValidStateMeta(e){const t=db(e);if(!t)throw new Error(Wa.STATE_DECORATOR());return t}}Nx.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let mm=(()=>{class n{constructor(t,i,r,s,o,a,l){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=xx(()=>{const c=this;function u(p){const g=c.statePaths[p];return g?w6(g.split("."),c._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let g=u(p);return g||((...m)=>(g||(g=u(p)),g?g(...m):void 0))},getSelectorOptions:p=>Object.assign({},c._config.selectorOptions,p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let i={};return i=Array.isArray(t)?t.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,i}static checkStatesAreValid(t){t.forEach(Nx.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){n.checkStatesAreValid(t);const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function(n){const e=t=>{const i=n.find(r=>r===t);if(!i)throw new Error(`Child state not found: ${t}. \r\nYou may have forgotten to add states to module`);return i[sd].name};return n.reduce((t,i)=>{const{name:r,children:s}=i[sd];return t[r]=(s||[]).map(e),t},{})}(i),s=function(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${r}': ${s.join(" -> ")}`);t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function(n){return n.reduce((e,t)=>(e[t[sd].name]=t,e),{})}(i),l=[];for(const c of s){const u=a[c],h=o[c],p=u[sd];this.addRuntimeInfoToMeta(p,h);const g={name:c,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(u),defaults:n.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(c,h)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>v6(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(Qi(t=>"DISPATCHED"===t.status),z(({action:t})=>this.invokeActions(this._actions,t).pipe(ye(()=>({action:t,status:"SUCCESSFUL"})),Ax({action:t,status:"CANCELED"}),bc(i=>fn({action:t,status:"ERRORED",error:i}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,i){const r=$f(i),s=[];for(const o of this.states){const a=o.actions[r];if(a)for(const l of a){const c=this._stateContextFactory.createStateContext(o);try{let u=o.instance[l.fn](c,i);u instanceof Promise&&(u=qe(u)),u instanceof P?(u=u.pipe(Ax({})),l.options.cancelUncompleted&&(u=u.pipe(_r(t.pipe(Mwe(i)))))):u=fn({}).pipe($a()),s.push(u)}catch(u){s.push(Fg(u))}}}return s.length||s.push(fn({})),ub(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=Nx.checkStateNameIsUnique(s,r);!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==Tx(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(ke(Wn),ke(Gf),ke(n,12),ke(Ix),ke(mN),ke(Rx),ke(lN,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),_N=(()=>{class n{constructor(t,i,r){this.internalStateOperations=t,this.stateContextFactory=i,this.bootstrapper=r}ngxsBootstrap(t,i){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(Qi(()=>!!i),Yr(()=>this.invokeInit(i.states)),z(()=>this.bootstrapper.appBootstrapped$),Qi(r=>!!r)).subscribe(()=>this.invokeBootstrap(i.states))}invokeInit(t){for(const i of t){const r=i.instance;if(r.ngxsOnChanges){const a=E6(i,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});r.ngxsOnChanges(a)}r.ngxsOnInit&&r.ngxsOnInit(this.getStateContext(i)),i.isInitialised=!0}}invokeBootstrap(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this.getStateContext(i))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(gm),ke(Rx),ke(aN))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const Px_getOptions=n=>n&&n.NGXS_SELECTOR_OPTIONS_META||{};function Lwe(n,e,t){const i=t&&t.containerClass,s=xx(function(...c){const u=e.apply(i,c);return u instanceof Function?xx.apply(null,[u]):u});Object.setPrototypeOf(s,e);const o=function(n,e){const t=function(n){return n.hasOwnProperty(cN)||Object.defineProperty(n,cN,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),pN(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function(n,e){return Object.assign({},Px_getOptions(n.containerClass)||{},Px_getOptions(n.originalFn)||{},n.getSelectorOptions()||{},e)}(r,i()),t}(e,t);return o.makeRootSelector=l=>{const{argumentSelectorFunctions:c,selectorOptions:u}=function(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i);return{selectorOptions:r,argumentSelectorFunctions:function(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&db(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>D6(a)(n))}}(l,o,n);return function(p){const g=c.map(m=>m(p));try{return s(...g)}catch(m){if(m instanceof TypeError&&u.suppressErrors)return;throw m}}},s}function D6(n){const e=pN(n)||db(n);return e&&e.makeRootSelector||(()=>n)}let cu=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(ye(i),bc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?fn(void 0):Fg(r)}),rd(),Mx(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(Wi(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(Mx(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return D6(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(ke(Ox),ke(gm),ke(Gf),ke(Dx),ke(mm),ke(lN,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),hb=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(ke(cu),ke(Gf))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class zwe{static get type(){return"@@INIT"}}class Hwe{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}const Fx=new kg(1);let $we=(()=>{class n{constructor(t,i,r,s,o=[],a){!function(){try{const n=window.ng,t=!(n.probe&&n.coreTokens)&&Ba();Fx.next(t)}catch(n){Fx.next(!1)}finally{Fx.complete()}}();const l=t.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(l),t.connectActionHandlers(),a.ngxsBootstrap(new zwe,l)}}return n.\u0275fac=function(t){return new(t||n)(ke(mm),ke(gm),ke(cu),ke(hb),ke(f6,8),ke(_N))},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({}),n})(),Wwe=(()=>{class n{constructor(t,i,r,s=[],o){const a=n.flattenStates(s),l=r.addAndReturnDefaults(a);l.states.length&&(i.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new Hwe(l.defaults),l))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(ke(cu),ke(gm),ke(mm),ke(p6,8),ke(_N))},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({}),n})();class Wo{static forRoot(e=[],t={}){return{ngModule:$we,providers:[mm,Rx,Fwe,Ix,aN,T6,A6,_N,x6,mN,gm,Dx,cu,Ox,hb,gN,...e,...Wo.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:Wwe,providers:[mm,gN,...e,{provide:p6,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:m6,useValue:twe},{provide:_6,useValue:Ba},{provide:b6,useClass:t.executionStrategy||h6},{provide:f6,useValue:e},{provide:Wo.ROOT_OPTIONS,useValue:t},{provide:Gf,useFactory:Wo.ngxsConfigFactory,deps:[Wo.ROOT_OPTIONS]},{provide:RE,useFactory:Wo.appBootstrapListenerFactory,multi:!0,deps:[aN]},{provide:lN,useFactory:Wo.getInitialState},{provide:l6,useExisting:Rx},{provide:c6,useExisting:mm}]}static ngxsConfigFactory(e){return dN(new Gf,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return nwe.pop()}}function yN(n,e){return(t,i)=>{if(t.hasOwnProperty("prototype"))throw new Error(Wa.ACTION_DECORATOR());const s=hN(t.constructor);Array.isArray(n)||(n=[n]);for(const o of n){const a=o.type;s.actions[a]||(s.actions[a]=[]),s.actions[a].push({fn:i,options:e||{},type:a})}}}function I6(n){return i=>{!function(n){Fx.subscribe(e=>{e&&(n.\u0275prov||console.warn(Wa.UNDECORATED_STATE_IN_IVY(n.name)))})}(i);const r=i,s=hN(r),o=Object.getPrototypeOf(r),a=function(i){return Object.assign({},i[y6]||{},n)}(o);(function(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:l,name:c}=o,u="string"==typeof c?c:c&&c.getName()||null;Nx.checkCorrectStateName(u),s.hasOwnProperty(sd)&&(r.actions=Object.assign({},r.actions,(s[sd]||{}).actions)),r.children=a,r.defaults=l,r.name=u})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[y6]=a}}function kx(n,...e){return function(t,i){const r=i.toString(),s=`__${r}__selector`,o=function(n,e,t=[]){return"string"==typeof(e=e||function(n){const e=n.length-1;return 36===n.charCodeAt(e)?n.slice(0,e):n}(n))?w6(t.length?[e,...t]:e.split("."),hb.config):e}(r,n,e);Object.defineProperties(t,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function(n){if(!hb.store)throw new Error(Wa.SELECT_FACTORY_NOT_CONNECTED());return hb.store.select(n)}(o))}}})}}function _m(n){return(e,t,i)=>{if(!i||null===i.value)throw new Error(Wa.SELECTOR_DECORATOR());const s=i.value,o=Lwe(n,s,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),a={configurable:!0,get:()=>o};return a.originalFn=s,a}}function Dl(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}Wo.\u0275fac=function(e){return new(e||Wo)},Wo.\u0275mod=on({type:Wo}),Wo.\u0275inj=Ct({}),Wo.ROOT_OPTIONS=new Ht("ROOT_OPTIONS");const Kx=new uc(aS);class iSe{constructor(e){this.total=e}call(e,t){return t.subscribe(new rSe(e,this.total))}}class rSe extends v{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function xi(n){return null!=n&&"false"!=`${n}`}function Xx(n){return Array.isArray(n)?n:[n]}function vs(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ad(n){return n instanceof En?n.nativeElement:n}let HN;try{HN="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){HN=!1}let Eb,qf,GN,Zi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Tf(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!HN)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(ke(Wc))},n.\u0275prov=et({factory:function(){return new n(ke(Wc))},token:n,providedIn:"root"}),n})();function vm(n){return function(){if(null==Eb&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Eb=!0}))}finally{Eb=Eb||!1}return Eb}()?n:!!n.capture}function jH(){if(null==qf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qf=!1,qf;if("scrollBehavior"in document.documentElement.style)qf=!0;else{const n=Element.prototype.scrollTo;qf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return qf}function Zx(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Yf(n){return n.composedPath?n.composedPath()[0]:n.target}let KH=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===QH(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=QH(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||XH(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(ke(Zi))},n.\u0275prov=et({factory:function(){return new n(ke(Zi))},token:n,providedIn:"root"}),n})();function XH(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function QH(n){if(!XH(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class xSe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Wi(1)).subscribe(e)}}let ZH=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new xSe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(ke(KH),ke(gn),ke(pn))},n.\u0275prov=et({factory:function(){return new n(ke(KH),ke(gn),ke(pn))},token:n,providedIn:"root"}),n})();"undefined"!=typeof Element&&Element;const tG=new Ht("cdk-input-modality-detector-options"),DSe={ignoreKeys:[18,17,224,91,16]},wm=vm({passive:!0,capture:!0});let iG=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Br(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Yf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function(n){return 0===n.offsetX&&0===n.offsetY}(o)?"keyboard":"mouse"),this._mostRecentTarget=Yf(o))},this._onTouchstart=o=>{!function(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(o)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Yf(o)):this._modality.next("keyboard")},this._options=Object.assign(Object.assign({},DSe),s),this.modalityDetected=this._modality.pipe(function(n){return e=>e.lift(new iSe(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(rd()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,wm),r.addEventListener("mousedown",this._onMousedown,wm),r.addEventListener("touchstart",this._onTouchstart,wm)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,wm),document.removeEventListener("mousedown",this._onMousedown,wm),document.removeEventListener("touchstart",this._onTouchstart,wm))}}return n.\u0275fac=function(t){return new(t||n)(ke(Zi),ke(gn),ke(pn),ke(tG,8))},n.\u0275prov=et({factory:function(){return new n(ke(Zi),ke(gn),ke(pn),ke(tG,8))},token:n,providedIn:"root"}),n})();const oG=new Ht("cdk-focus-monitor-default-options"),t1=vm({passive:!0,capture:!0});let du=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new se,this._rootNodeFocusAndBlurListener=a=>{const l=Yf(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=ad(t);if(!this._platform.isBrowser||1!==r.nodeType)return fn(null);const s=function(n){if(function(){if(null==GN){const n="undefined"!=typeof document?document.head:null;GN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return GN}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new se,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=ad(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ad(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,i,r){r?t.classList.add(i):t.classList.remove(i)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){this._toggleClass(t,"cdk-focused",!!i),this._toggleClass(t,"cdk-touch-focused","touch"===i),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(t,"cdk-mouse-focused","mouse"===i),this._toggleClass(t,"cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Yf(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,t1),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,t1)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(_r(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,t1),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,t1),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(ke(gn),ke(Zi),ke(iG),ke(pn,8),ke(oG,8))},n.\u0275prov=et({factory:function(){return new n(ke(gn),ke(Zi),ke(iG),ke(pn,8),ke(oG,8))},token:n,providedIn:"root"}),n})();const uG=new Ht("cdk-dir-doc",{providedIn:"root",factory:function(){return Fc(pn)}});let Il=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new sn,t){const r=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(ke(uG,8))},n.\u0275prov=et({factory:function(){return new n(ke(uG,8))},token:n,providedIn:"root"}),n})();function n1(...n){return Nt(1)(fn(...n))}function ao(...n){const e=n[n.length-1];return Ie(e)?(n.pop(),t=>n1(n,t,e)):t=>n1(n,t)}function Em(n,e){return{type:7,name:n,definitions:e,options:{}}}function cd(n,e=null){return{type:4,styles:e,timings:n}}function fs(n){return{type:6,styles:n,offset:null}}function vc(n,e,t){return{type:0,name:n,styles:e,options:t}}function ud(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function pG(n){Promise.resolve(null).then(n)}class Sm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function mG(){return"undefined"!=typeof window&&void 0!==window.document}function XN(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let eP=(n,e)=>!1,tP=(n,e)=>!1,bG=(n,e,t)=>[];const vG=XN();(vG||"undefined"!=typeof Element)&&(eP=mG()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),tP=(()=>{if(vG||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):tP}})(),bG=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let Kf=null,wG=!1;function nP(n){Kf||(Kf=("undefined"!=typeof document?document.body:null)||{},wG=!!Kf.style&&"WebkitAppearance"in Kf.style);let e=!0;return Kf.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Kf.style,!e&&wG&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Kf.style)),e}const iP=tP,rP=eP,sP=bG;let SG=(()=>{class n{validateStyleProperty(t){return nP(t)}matchesElement(t,i){return iP(t,i)}containsElement(t,i){return rP(t,i)}query(t,i,r){return sP(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Sm(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class r1{}r1.NOOP=new SG;function TG(n,e,t){return t?e+":"+t+";":""}function MG(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=TG(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=TG(0,GSe(t),n.style[t]));n.setAttribute("style",e)}function hu(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=uP(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),XN()&&MG(n))}function Qf(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=uP(t);n.style[i]=""}),XN()&&MG(n))}const HSe=/-+([a-z0-9])/g;function uP(n){return n.replace(HSe,(...e)=>e[1].toUpperCase())}function GSe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Am{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=Am.initialStylesByElement.get(e);r||Am.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&hu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hu(this._element,this._initialStyles),this._endStyles&&(hu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Am.initialStylesByElement.delete(this._element),this._startStyles&&(Qf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qf(this._element,this._endStyles),this._endStyles=null),hu(this._element,this._initialStyles),this._state=3)}}Am.initialStylesByElement=new WeakMap;const Nl=new Ht("AnimationModuleType");function Mb(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function CP(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?function(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t):this.defaultTabIndex}}}let ep;try{ep="undefined"!=typeof Intl}catch(n){ep=!1}function hd(n,e,t,i){return Q(t)&&(i=t,t=void 0),i?hd(n,e,t).pipe(ye(r=>F(r)?i(...r):i(r))):new P(r=>{A$(n,e,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function A$(n,e,t,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)A$(n[o],e,t,i,r)}i.add(s)}new class extends uc{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends aS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let z1e=1;const H1e=Promise.resolve(),C1={};function T$(n){return n in C1&&(delete C1[n],!0)}const M$={setImmediate(n){const e=z1e++;return C1[e]=!0,H1e.then(()=>T$(e)&&n()),e},clearImmediate(n){T$(n)}};new class extends uc{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends aS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=M$.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(M$.clearImmediate(t),e.scheduled=void 0)}});function Tm(n){return!!n&&(n instanceof P||"function"==typeof n.lift&&"function"==typeof n.subscribe)}class Y1e{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new K1e(e,this.durationSelector))}}class K1e extends Ae{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=k(t,new _t(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function D$(n){return!F(n)&&n-parseFloat(n)+1>=0}function Q1e(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function A1(n,e=Kx){return function(n){return function(t){return t.lift(new Y1e(n))}}(()=>function(n=0,e,t){let i=-1;return D$(e)?i=Number(e)<1?1:Number(e):Ie(e)&&(t=e),Ie(t)||(t=Kx),new P(r=>{const s=D$(n)?n:+n-t.now();return t.schedule(Q1e,s,{index:0,period:i,subscriber:r})})}(n,e))}let O$=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Mm=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new P(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(A1(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):fn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Qi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ad(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>hd(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(ke(gn),ke(Zi),ke(pn,8))},n.\u0275prov=et({factory:function(){return new n(ke(gn),ke(Zi),ke(pn,8))},token:n,providedIn:"root"}),n})(),Dm=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new se,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(A1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(ke(Zi),ke(gn),ke(pn,8))},n.\u0275prov=et({factory:function(){return new n(ke(Zi),ke(gn),ke(pn,8))},token:n,providedIn:"root"}),n})();class IP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class M1 extends IP{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Im extends IP{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class pCe extends IP{constructor(e){super(),this.element=e instanceof En?e.nativeElement:e}}class D1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof M1?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Im?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof pCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class gCe extends D1{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let tp=(()=>{class n extends D1{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new sn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(Oe(wl),Oe(Ns),Oe(pn))},n.\u0275dir=Rt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[An]}),n})();const B$=jH();class bCe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=vs(-this._previousScrollPosition.left),e.style.top=vs(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),B$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),B$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class vCe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class j${enable(){}disable(){}attach(){}}function OP(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function V$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class wCe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();OP(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ECe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new j$,this.close=o=>new vCe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new bCe(this._viewportRuler,this._document),this.reposition=o=>new wCe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(ke(Mm),ke(Dm),ke(gn),ke(pn))},n.\u0275prov=et({factory:function(){return new n(ke(Mm),ke(Dm),ke(gn),ke(pn))},token:n,providedIn:"root"}),n})();class O1{constructor(e){if(this.scrollStrategy=new j$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class SCe{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class xCe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let U$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({factory:function(){return new n(ke(pn))},token:n,providedIn:"root"}),n})(),CCe=(()=>{class n extends U${constructor(t){super(t),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=et({factory:function(){return new n(ke(pn))},token:n,providedIn:"root"}),n})(),ACe=(()=>{class n extends U${constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._clickListener=r=>{const s=Yf(r),o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){const l=o[a];if(!(l._outsidePointerEvents.observers.length<1)&&l.hasAttached()){if(l.overlayElement.contains(s))break;l._outsidePointerEvents.next(r)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(ke(pn),ke(Zi))},n.\u0275prov=et({factory:function(){return new n(ke(pn),ke(Zi))},token:n,providedIn:"root"}),n})();const Sh="undefined"!=typeof window?window:{},z$=void 0!==Sh.__karma__&&!!Sh.__karma__||void 0!==Sh.jasmine&&!!Sh.jasmine||void 0!==Sh.jest&&!!Sh.jest||void 0!==Sh.Mocha&&!!Sh.Mocha;let Ob=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||z$){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].parentNode.removeChild(r[s])}const i=this._document.createElement("div");i.classList.add(t),z$?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(ke(pn),ke(Zi))},n.\u0275prov=et({factory:function(){return new n(ke(pn),ke(Zi))},token:n,providedIn:"root"}),n})();class TCe{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new se,this._attachments=new se,this._detachments=new se,this._locationChanges=C.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._keydownEvents=new se,this._outsidePointerEvents=new se,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Wi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=vs(this._config.width),e.height=vs(this._config.height),e.minWidth=vs(this._config.minWidth),e.minHeight=vs(this._config.minHeight),e.maxWidth=vs(this._config.maxWidth),e.maxHeight=vs(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(!e)return;let t,i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const r=e.classList;Xx(t).forEach(s=>{s&&(i?r.add(s):r.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(_r(kn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const H$="cdk-overlay-connected-position-bounding-box",MCe=/([A-Za-z%]+)$/;class G${constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new se,this._resizeSubscription=C.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(H$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=[];let s;for(let o of this._preferredPositions){let a=this._getOriginPoint(e,o),l=this._getOverlayPoint(a,t,o),c=this._getOverlayFit(l,t,i,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,a);this._canFitWithFlexibleDimensions(c,l,i)?r.push({position:o,origin:a,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(a,o)}):(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:l,originPoint:a,position:o,overlayRect:t})}if(r.length){let o=null,a=-1;for(const l of r){const c=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);c>a&&(a=c,o=l)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&np(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(H$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,r;if("center"==t.originX)i=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,o=this._isRtl()?e.left:e.right;i="start"==t.originX?s:o}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:r}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=q$(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),D=this._subtractOverflows(s.height,p,g),O=m*D;return{visibleArea:O,isCompletelyWithinViewport:s.width*s.height===O,fitsInViewportVertically:D===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=W$(this._overlayRef.getConfig().minHeight),a=W$(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=q$(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new xCe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=vs(i.height),r.top=vs(i.top),r.bottom=vs(i.bottom),r.width=vs(i.width),r.left=vs(i.left),r.right=vs(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=vs(s)),o&&(r.maxWidth=vs(o))}this._lastBoundingBoxSize=i,np(this._boundingBox.style,r)}_resetBoundingBoxStyles(){np(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){np(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();np(i,this._getExactOverlayY(t,e,u)),np(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=vs(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=vs(o.maxWidth):s&&(i.maxWidth="")),np(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=vs(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=vs(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:V$(e,i),isOriginOutsideView:OP(e,i),isOverlayClipped:V$(t,i),isOverlayOutsideView:OP(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Xx(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof En)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function np(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function W$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(MCe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function q$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class DCe{constructor(e,t,i,r,s,o,a){this._preferredPositions=[],this._positionStrategy=new G$(i,r,s,o,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,i,r){const s=new SCe(e,t,i,r);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const Y$="cdk-global-overlay-wrapper";class ICe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Y$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Y$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let OCe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new ICe}connectedTo(t,i,r){return new DCe(i,r,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new G$(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(ke(Dm),ke(pn),ke(Zi),ke(Ob))},n.\u0275prov=et({factory:function(){return new n(ke(Dm),ke(pn),ke(Zi),ke(Ob))},token:n,providedIn:"root"}),n})(),RCe=0,wc=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,h,p){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=p}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new O1(t);return o.direction=o.direction||this._directionality.value,new TCe(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+RCe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ih)),new gCe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(ke(ECe),ke(Ob),ke(wl),ke(OCe),ke(CCe),ke(Wn),ke(gn),ke(pn),ke(Il),ke(Pg),ke(ACe))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();function c7(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return t=>ye(function(n,e){return i=>{let r=i;for(let s=0;s<e;s++){const o=null!=r?r[n[s]]:void 0;if(void 0===o)return;r=o}return r}}(n,e))(t)}Je(266);class u7 extends v{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class LAe extends v{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function d7(n,e,t,i,r=new LAe(n,t,i)){if(!r.closed)return e instanceof P?e.subscribe(r):Se(e)(r)}const h7={};function Yo(...n){let e,t;return Ie(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&F(n[0])&&(n=n[0]),On(n,t).lift(new f7(e))}class f7{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new BAe(e,this.resultSelector))}}class BAe extends u7{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(h7),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(d7(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===h7?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class tTe{constructor(e){this.callback=e}call(e,t){return t.subscribe(new nTe(e,this.callback))}}class nTe extends v{constructor(e,t){super(e),this.add(new C(t))}}class w7{}class fd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof fd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new fd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof fd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class iTe{encodeKey(e){return S7(e)}encodeValue(e){return S7(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sTe=/%(\d[a-f0-9])/gi,oTe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function S7(n){return encodeURIComponent(n).replace(sTe,(e,t)=>{var i;return null!==(i=oTe[t])&&void 0!==i?i:e})}function x7(n){return`${n}`}class xh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iTe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new xh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(x7(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(x7(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aTe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function C7(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function A7(n){return"undefined"!=typeof Blob&&n instanceof Blob}function T7(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Rb{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new fd),this.context||(this.context=new aTe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new xh,this.urlWithParams=t}serializeBody(){return null===this.body?null:C7(this.body)||A7(this.body)||T7(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||T7(this.body)?null:A7(this.body)?this.body.type||null:C7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),u)),new Rb(i,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:s,withCredentials:a})}}var ws=(()=>((ws=ws||{})[ws.Sent=0]="Sent",ws[ws.UploadProgress=1]="UploadProgress",ws[ws.ResponseHeader=2]="ResponseHeader",ws[ws.DownloadProgress=3]="DownloadProgress",ws[ws.Response=4]="Response",ws[ws.User=5]="User",ws))();class N1 extends class{constructor(e,t=200,i="OK"){this.headers=e.headers||new fd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ws.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new N1({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function BP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ip=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Rb)s=t;else{let l,c;l=r.headers instanceof fd?r.headers:new fd(r.headers),r.params&&(c=r.params instanceof xh?r.params:new xh({fromObject:r.params})),s=new Rb(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=fn(s).pipe(function(n,e){return z(n,e,1)}(l=>this.handler.handle(l)));if(t instanceof Rb||"events"===r.observe)return o;const a=o.pipe(Qi(l=>l instanceof N1));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ye(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ye(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ye(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ye(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new xh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,BP(r,i))}post(t,i,r={}){return this.request("POST",t,BP(r,i))}put(t,i,r={}){return this.request("PUT",t,BP(r,i))}}return n.\u0275fac=function(t){return new(t||n)(ke(w7))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const _Te=["*"];function N7(n){return Error(`Unable to find icon with the name "${n}"`)}function P7(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function F7(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class rp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let P1=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new rp(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(ni.HTML,r);if(!o)throw F7(r);return this._addSvgIconConfig(t,i,new rp("",o,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new rp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(ni.HTML,i);if(!s)throw F7(i);return this._addSvgIconSetConfig(t,new rp("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(ni.RESOURCE_URL,t);if(!i)throw P7(t);const r=this._cachedIconsByUrl.get(i);return r?fn(F1(r)):this._loadSvgIconFromConfig(new rp(t,null)).pipe(Yr(s=>this._cachedIconsByUrl.set(i,s)),ye(s=>F1(s)))}getNamedSvgIcon(t,i=""){const r=k7(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Fg(N7(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?fn(F1(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(ye(i=>F1(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?fn(r):ub(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(bc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ni.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),fn(null)})))).pipe(ye(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw N7(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Yr(i=>t.svgText=i),ye(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?fn(null):this._fetchIcon(t).pipe(Yr(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString("<svg></svg>");return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString("<svg></svg>"),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(ni.RESOURCE_URL,r);if(!a)throw P7(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(function(n){return e=>e.lift(new tTe(n))}(()=>this._inProgressUrlFetches.delete(a)),Es());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(k7(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return vTe(s)?new rp(s.url,null,s.options):new rp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(ke(ip,8),ke(Mf),ke(pn,8),ke(oa))},n.\u0275prov=et({factory:function(){return new n(ke(ip,8),ke(Mf),ke(pn,8),ke(oa))},token:n,providedIn:"root"}),n})();function F1(n){return n.cloneNode(!0)}function k7(n,e){return n+":"+e}function vTe(n){return!(!n.url||!n.options)}const wTe=Mb(class{constructor(n){this._elementRef=n}}),ETe=new Ht("mat-icon-location",{providedIn:"root",factory:function(){const n=Fc(pn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),L7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],CTe=L7.map(n=>`[${n}]`).join(", "),ATe=/^url\(['"]?#(.*?)['"]?\)$/;let Nm=(()=>{class n extends wTe{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=C.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=xi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=t.querySelectorAll("style");for(let s=0;s<i.length;s++)i[s].textContent+=" ";const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&t.removeChild(r)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(CTe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)L7.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(ATe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Wi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(Oe(En),Oe(P1),Fo("aria-hidden"),Oe(ETe),Oe(oa))},n.\u0275cmp=ln({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Bi("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),vi("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[An],ngContentSelectors:_Te,decls:1,vars:0,template:function(t,i){1&t&&(is(),si(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})();function LTe(n,e){}class HP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const BTe={dialogContainer:Em("dialogContainer",[vc("void, exit",fs({opacity:0,transform:"scale(0.7)"})),vc("enter",fs({transform:"none"})),ud("* => enter",cd("150ms cubic-bezier(0, 0, 0.2, 1)",fs({transform:"none",opacity:1}))),ud("* => void, * => exit",cd("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",fs({opacity:0})))])};let jTe=(()=>{class n extends D1{constructor(t,i,r,s,o,a){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._focusMonitor=a,this._animationStateChanged=new sn,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=l=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(l)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=Zx(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=Zx())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Zx();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(Oe(En),Oe(ZH),Oe(Dr),Oe(pn,8),Oe(HP),Oe(du))},n.\u0275dir=Rt({type:n,viewQuery:function(t,i){if(1&t&&ss(tp,7),2&t){let r;ii(r=ri())&&(i._portalOutlet=r.first)}},features:[An]}),n})(),VTe=(()=>{class n extends jTe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=nr(n)))(i||n)}}(),n.\u0275cmp=ln({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&fE("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(Lu("id",i._id),Bi("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),mE("@dialogContainer",i._state))},features:[An],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Di(0,LTe,0,0,"ng-template",0)},directives:[tp],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[BTe.dialogContainer]}}),n})(),UTe=0;class k1{constructor(e,t,i="mat-dialog-"+UTe++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new se,this._afterClosed=new se,this._beforeClosed=new se,this._state=0,t._id=i,t._animationStateChanged.pipe(Qi(r=>"opened"===r.state),Wi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Qi(r=>"closed"===r.state),Wi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Qi(r=>27===r.keyCode&&!this.disableClose&&!Dl(r))).subscribe(r=>{r.preventDefault(),GP(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():GP(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Qi(t=>"closing"===t.state),Wi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function GP(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const V7=new Ht("MatDialogData"),zTe=new Ht("mat-dialog-default-options"),U7=new Ht("mat-dialog-scroll-strategy");let $Te=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._ariaHiddenElements=new Map,this.afterAllClosed=function(n){return new P(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?qe(t):lS()).subscribe(e)})}(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ao(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){(i=function(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new HP)).id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new O1({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=Wn.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:HP,useValue:i}]}),o=new M1(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof zo)i.attachTemplatePortal(new Im(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new M1(t,s.viewContainerRef,a));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(Il,null,Sn.Optional))&&o.push({provide:Il,useValue:{value:t.direction,change:fn()}}),Wn.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){return new(t||n)(Oe(wc),Oe(Wn),Oe(void 0),Oe(void 0),Oe(Ob),Oe(void 0),Oe(xu),Oe(xu),Oe(Ht))},n.\u0275dir=Rt({type:n}),n})(),Pb=(()=>{class n extends $Te{constructor(t,i,r,s,o,a,l){super(t,i,s,a,l,o,k1,VTe,V7)}}return n.\u0275fac=function(t){return new(t||n)(ke(wc),ke(Wn),ke(Pg,8),ke(zTe,8),ke(U7),ke(n,12),ke(Ob))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),qTe=0,z7=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+qTe++}ngOnInit(){this._dialogRef||(this._dialogRef=function(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(Oe(k1,8),Oe(En),Oe(Pb))},n.\u0275dir=Rt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&Lu("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),H7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Rt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})();const WP=new Ht("CdkAccordion");let XTe=0,ZTe=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=C.EMPTY,this.closed=new sn,this.opened=new sn,this.destroyed=new sn,this.expandedChange=new sn,this.id="cdk-accordion-child-"+XTe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=xi(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=xi(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(Oe(WP,12),Oe(Dr),Oe(O$))},n.\u0275dir=Rt({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Hn([{provide:WP,useValue:void 0}])]}),n})();const eMe=["body"];function tMe(n,e){}const nMe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],iMe=["mat-expansion-panel-header","*","mat-action-row"];function rMe(n,e){1&n&&bi(0,"span",2),2&n&&rn("@indicatorRotate",ci()._getExpandedState())}const sMe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],oMe=["mat-panel-title","mat-panel-description","*"],qP=new Ht("MAT_ACCORDION"),$7="225ms cubic-bezier(0.4,0.0,0.2,1)",W7={indicatorRotate:Em("indicatorRotate",[vc("collapsed, void",fs({transform:"rotate(0deg)"})),vc("expanded",fs({transform:"rotate(180deg)"})),ud("expanded <=> collapsed, void => collapsed",cd($7))]),bodyExpansion:Em("bodyExpansion",[vc("collapsed, void",fs({height:"0px",visibility:"hidden"})),vc("expanded",fs({height:"*",visibility:"visible"})),ud("expanded <=> collapsed, void => collapsed",cd($7))])};let aMe=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(Oe(zo))},n.\u0275dir=Rt({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),lMe=0;const q7=new Ht("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Y7=(()=>{class n extends ZTe{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new sn,this.afterCollapse=new sn,this._inputChanges=new se,this._headerId="mat-expansion-panel-header-"+lMe++,this._bodyAnimationDone=new se,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(rd((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=xi(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(ao(null),Qi(()=>this.expanded&&!this._portal),Wi(1)).subscribe(()=>{this._portal=new Im(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(Oe(qP,12),Oe(Dr),Oe(O$),Oe(Ns),Oe(pn),Oe(Nl,8),Oe(q7,8))},n.\u0275cmp=ln({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&function(n,e,t,i){const r=Ei();if(r.firstCreatePass){const s=cs();L3(r,new P3(e,t,i),s.index),function(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}k3(r,Vt(),t)}(r,aMe,5),2&t){let s;ii(s=ri())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&ss(eMe,5),2&t){let r;ii(r=ri())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&vi("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Hn([{provide:qP,useValue:void 0}]),An,Ui],ngContentSelectors:iMe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(is(nMe),si(0),Pt(1,"div",0,1),Un("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),Pt(3,"div",2),si(4,1),Di(5,tMe,0,0,"ng-template",3),Ft(),si(6,2),Ft()),2&t&&(Zt(1),rn("@bodyExpansion",i._getExpandedState())("id",i.id),Bi("aria-labelledby",i._headerId),Zt(4),rn("cdkPortalOutlet",i._portal))},directives:[tp],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[W7.bodyExpansion]},changeDetection:0}),n})();class uMe{}const dMe=CP(uMe);let K7=(()=>{class n extends dMe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=C.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Qi(u=>!(!u.hideToggle&&!u.togglePosition))):Yc;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=kn(t.opened,t.closed,c,t._inputChanges.pipe(Qi(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Qi(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Dl(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(Oe(Y7,1),Oe(En),Oe(du),Oe(Dr),Oe(q7,8),Oe(Nl,8),Fo("tabindex"))},n.\u0275cmp=ln({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&Un("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(Bi("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),jy("height",i._getHeaderHeight()),vi("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[An],ngContentSelectors:oMe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(is(sMe),Pt(0,"span",0),si(1),si(2,1),si(3,2),Ft(),Di(4,rMe,1,1,"span",1)),2&t&&(Zt(4),rn("ngIf",i._showToggle()))},directives:[lc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}\n'],encapsulation:2,data:{animation:[W7.indicatorRotate]},changeDetection:0}),n})();var X7=Je(478);Object.create(Error.prototype);const mMe=["*"];var B1=(()=>(function(n){n.LineHighlight="line-highlight",n.LineNumbers="line-numbers"}(B1||(B1={})),B1))();class yMe{}const Z7=new Ht("SECURITY_CONTEXT");let YP=(()=>{class n{constructor(t,i,r,s,o){this.platform=t,this.securityContext=i,this.http=r,this.sanitizer=o,this.initialMarkedOptions={renderer:new X7.Renderer},this.options=s}get options(){return this._options}set options(t){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),t)}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}compile(t,i=!1,r=!1,s=this.options){const o=this.trimIndentation(t),a=i?this.decodeHtml(o):o,l=r?this.renderEmoji(a):a,c=X7.parse(l,s);return this.sanitizer.sanitize(this.securityContext,c)||""}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(ye(i=>this.handleExtension(t,i)))}highlight(t){if(Tf(this.platform)&&"undefined"!=typeof Prism){t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}}renderKatex(t,i){if(!Tf(this.platform))return t;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return t.replace(/\$([^\s][^$]*?[^\s])\$/gm,(r,s)=>katex.renderToString(s,i))}decodeHtml(t){if(!Tf(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}handleExtension(t,i){const r=t?t.split("?")[0].split(".").splice(-1).join():"";return"md"!==r?"```"+r+"\n"+i+"\n```":i}renderEmoji(t){if(!Tf(this.platform))return t;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}}return n.\u0275fac=function(t){return new(t||n)(ke(Wc),ke(Z7),ke(ip,8),ke(yMe,8),ke(Mf))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),J7=(()=>{class n{constructor(t,i){this.element=t,this.markdownService=i,this.error=new sn,this.load=new sn,this.ready=new sn,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(t,i=!1){let r=this.markdownService.compile(t,i,this.emoji);r=this.katex?this.markdownService.renderKatex(r,this.katexOptions):r,this.element.nativeElement.innerHTML=r,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(t=>{this.render(t),this.load.emit(t)},t=>this.error.emit(t))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,B1.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const l=this.toLispCase(o);r.item(s).setAttribute(l,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}}return n.\u0275fac=function(t){return new(t||n)(Oe(En),Oe(YP))},n.\u0275cmp=ln({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start"},outputs:{error:"error",load:"load",ready:"ready"},features:[Ui],ngContentSelectors:mMe,decls:1,vars:0,template:function(t,i){1&t&&(is(),si(0))},encapsulation:2}),n})();function e9(n,e,t){return t?e9(n,e).pipe(ye(i=>F(i)?t(...i):t(i))):new P(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o);let s;try{s=n(r)}catch(o){return void i.error(o)}if(Q(e))return()=>e(r,s)})}function KP(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new CMe(n,t))}}class CMe{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new AMe(e,this.observables,this.project))}}class AMe extends u7{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(d7(this,t[s],void 0,s))}notifyNext(e,t,i){this.values[i]=t;const r=this.toRespond;if(r.length>0){const s=r.indexOf(i);-1!==s&&r.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class TMe{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new MMe(e,this.accumulator,this.seed,this.hasSeed))}}class MMe extends v{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}class OMe{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new RMe(e,this.predicate))}}class RMe extends v{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const NMe=["youtubeContainer"];let i9=(()=>{class n{constructor(t,i){this._ngZone=t,this._youtubeContainer=new se,this._destroyed=new se,this._playerChanges=new Br(void 0),this._videoId=new Br(void 0),this._height=new Br(390),this._width=new Br(640),this._startSeconds=new Br(void 0),this._endSeconds=new Br(void 0),this._suggestedQuality=new Br(void 0),this._playerVars=new Br(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Tf(i)}get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}ngOnInit(){if(!this._isBrowser)return;let t=fn(!0);if(!window.YT||!window.YT.Player){const r=new se;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>r.next(!0))},t=r.pipe(Wi(1),ao(!1))}const i=function(n,e,t,i,r,s,o){const a=Yo([e,s]).pipe(KP(Yo([i,r])),ye(([l,c])=>{const[u,h]=l,[p,g]=c;return u?{videoId:u,playerVars:h,width:p,height:g}:void 0}));return Yo([n,a,fn(o)]).pipe(function(n){return H(function(...n){let e=null;return"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&F(n[0])&&(n=n[0].slice()),t=>t.lift.call(qe([t,...n]),new f7(e))}(n),function(n){return e=>e.lift(new OMe(n))}(([e,t])=>!t),ye(([e])=>e))}(t),function(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new TMe(n,e,t))}}(jMe,void 0),rd())}(this._youtubeContainer,this._videoId,t,this._width,this._height,this._playerVars,this._ngZone).pipe(Yr(r=>{this._playerChanges.next(r)}),z(e=>e?r9(e)?fn(e):new P(t=>{let i=!1,r=!1;const s=o=>{r=!0,i||(o.target.removeEventListener("onReady",s),t.next(o.target))};return e.addEventListener("onReady",s),()=>{i=!0,r||(r=>{r9(r)||r.destroy()})(e)}}).pipe(Wi(1),ao(void 0)):fn(void 0)),_r(this._destroyed),el(new se));i.subscribe(r=>{this._player=r,r&&this._pendingPlayerState&&this._initializePlayer(r,this._pendingPlayerState),this._pendingPlayerState=void 0}),function(n,e,t){Yo([n,e,t]).subscribe(([i,r,s])=>i&&i.setSize(r,s))}(i,this._width,this._height),function(n,e){Yo([n,e]).subscribe(([t,i])=>t&&i&&t.setPlaybackQuality(i))}(i,this._suggestedQuality),function(n,e,t,i,r,s){const o=Yo([t,i]).pipe(ye(([u,h])=>({startSeconds:u,endSeconds:h}))),a=o.pipe(QP(n,u=>!!u&&!function(n){const e=n.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(u))),l=e.pipe(QP(n,(u,h)=>!!u&&u.videoId!==h));kn(n.pipe(QP(Yo([e,o]),([u,h],p)=>!(!p||u==p.videoId&&!h.startSeconds&&!h.endSeconds))),l,a).pipe(KP(Yo([n,e,o,r])),ye(([u,h])=>h),_r(s)).subscribe(([u,h,p,g])=>{!h||!u||(u.videoId=h,u.cueVideoById(Object.assign({videoId:h,suggestedQuality:g},p)))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}createEventsBoundInZone(){return{}}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:l}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=s&&t.setPlaybackRate(s),null!=o&&t.setVolume(o),null!=a&&(a?t.mute():t.unMute()),null!=l&&t.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(Ir(i=>i?e9(r=>{i.addEventListener(t,r)},r=>{try{i.removeEventListener&&i.removeEventListener(t,r)}catch(s){}}):fn()),i=>new P(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),_r(this._destroyed))}}return n.\u0275fac=function(t){return new(t||n)(Oe(gn),Oe(Wc))},n.\u0275cmp=ln({type:n,selectors:[["youtube-player"]],viewQuery:function(t,i){if(1&t&&ss(NMe,5),2&t){let r;ii(r=ri())&&(i.youtubeContainer=r.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(t,i){1&t&&bi(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();function jMe(n,[e,t,i]){if(n&&t&&n.playerVars!==t.playerVars)n.destroy();else{if(!t)return void(n&&n.destroy());if(n)return n}const r=i.runOutsideAngular(()=>new YT.Player(e,t));return r.videoId=t.videoId,r.playerVars=t.playerVars,r}function r9(n){return"getPlayerStatus"in n}function QP(n,e){return H(KP(n),Qi(([t,i])=>e(i,t)),ye(([t])=>t))}let KMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Rt({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-card-sm-image"]}),n})();function kb(n){return!0===n}function Xa(n){return null==n}function Qa(n){return!Xa(n)}function ZP(n){return Boolean(n)}function l9(n){return Xa(n)?n:JSON.parse(JSON.stringify(n))}const V1=n=>{const t=n instanceof Date;if("object"!=typeof n||null===n||t)return n;Object.freeze(n);const r="function"==typeof n,s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(o=>{s.call(n,o)&&(!r||"caller"!==o&&"callee"!==o&&"arguments"!==o)&&null!==n[o]&&("object"==typeof n[o]||"function"==typeof n[o])&&!Object.isFrozen(n[o])&&V1(n[o])}),n};function c9(n){return Qa(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const h9="NGXS_DATA_META",e2="NGXS_META",f9="NGXS_ARGUMENT_REGISTRY_META";let p9=(()=>{class n{constructor(t){this.sequence$=new Br(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(ke(cu,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();function Lb(n){return n[h9]}let Za=(()=>{class n{constructor(t,i,r){n.store=t.get(cu),n.ngZone=t.get(gn),n.factory=i,n.context=r,n.computed=t.get(p9)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(t){return new(t||n)(ke(Wn),ke(c6),ke(l6))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();class ps{constructor(){ps.statesCachedMeta.clear()}static createStateContext(e){return Za.context.createStateContext(e)}static ensureMappedState(e){if(Xa(Za.factory)||Xa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Qa(e.name)?ps.statesCachedMeta.get(e.name):null)||ps.ensureMeta(e)}static getRepositoryByInstance(e){var t;const r=null!==(t=Lb(ps.getStateClassByInstance(e)))&&void 0!==t?t:null;if(Xa(r))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return r}static getStateClassByInstance(e){return(null!=e?e:{}).constructor}static clearMetaByInstance(e){const t=ps.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(let s=0;s<r.length;s++){const o=null==t?void 0:t.getPayloadTypeByIndex(s);Qa(o)&&(i[o]=r[s])}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=ps.createPayload(t,i);return new(function(n){return class{constructor(t){t&&Object.keys(t).forEach(i=>{this[i]=t[i]})}static get type(){return n}}}(e.type))(r)}static ensureMeta(e){var t;const i=Qa(e.name)?null===(t=Za.factory.states)||void 0===t?void 0:t.find(r=>r.name===e.name):null;return Qa(i)&&Qa(e.name)&&ps.statesCachedMeta.set(e.name,i),i}}ps.statesCachedMeta=new Map,ps.\u0275fac=function(e){return new(e||ps)},ps.\u0275prov=et({token:ps,factory:ps.\u0275fac}),new kg(1);class mDe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Qa(null==e?void 0:e.constructor)?e.constructor.name:e} to PlainObject`)}}function g9(n){var e;return null!==(e=n.NGXS_OPTIONS_META)&&void 0!==e?e:{name:""}}function m9(n){var e;const t=g9(n),i=null!==(e=t.children)&&void 0!==e?e:[],s=l9(void 0===t.defaults?{}:t.defaults);if(i.length){if(c9(s))return function(n,e){return e.reduce((t,i)=>{const r=g9(i);if(function(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=m9(i),t},null!=n?n:{})}(s,i);throw new mDe(s)}return s}function y9(n){var e;return null!==(e=n.__NGXS_COMPUTED_OPTION__)&&void 0!==e?e:null}function b9(){var n,e;return null!==(e=null===(n=null==Za?void 0:Za.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==e?e:0}function vDe(n){let e=!1;return Tm(n)&&(e=!0),e}function t2(n){return n[f9]}class wDe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class EDe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){var t;return null!==(t=this.payloadMap.get(e))&&void 0!==t?t:null}getArgumentNameByIndex(e){var t;return null!==(t=this.argumentMap.get(e))&&void 0!==t?t:null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(ZP(this.argumentMap.has(e))||ZP(this.payloadMap.has(e)))throw new wDe(e,t)}}function MDe(n){return{enumerable:!0,configurable:!0,get(){const e=Lb(n),t=ps.ensureMappedState(e.stateMeta);return ps.createStateContext(t)}}}function v9(){return(n,e,t)=>{!function(n,e){if(!function(n,e){var t;let i=n,r=!1;if(c9(i))for(;null!==i;){if(kb(null==i?void 0:i.hasOwnProperty(e))){r=!!(null===(t=Object.getOwnPropertyDescriptor(i,e))||void 0===t?void 0:t.get);break}i=Object.getPrototypeOf(i)}return r}(n,null==e?void 0:e.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function(n){return Xa(y9(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),y9(n)}(this),o=null==s?void 0:s.get(i);if(kb(null==o?void 0:o.isObservable))return null==o?void 0:o.value;if(Xa(o)||o.sequenceId!==b9()){s.delete(i);const l=i.apply(this,r);return s.set(i,{value:l,sequenceId:b9(),isObservable:vDe(l)}),l}return o.value},t}}const PDe={cancelUncompleted:!0,insideZone:!1};function n2(n=PDe){return(e,t,i)=>{!function(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(e,i);const r=i.value,s=t.toString();return i.value=function(...o){const a=this;let l=null;const c=ps.getRepositoryByInstance(a),u=c.operations;let h=u[s];const p=c.stateMeta,g=t2(r);if(Xa(h)){const $=function(n){var e,t,i;return null!==(i=null===(t=null===(e=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===e?void 0:e[0])||void 0===t?void 0:t.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==i?i:[]}(r),pe=function(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)Qa(null==r?void 0:r.getArgumentNameByIndex(o))?s+=null==r?void 0:r.getArgumentNameByIndex(o):Qa(null==r?void 0:r.getPayloadTypeByIndex(o))?s+=null==r?void 0:r.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:p.path,methodName:s,argumentsNames:$,argumentRegistry:g});h=u[s]={type:pe,options:{cancelUncompleted:n.cancelUncompleted}},p.actions[h.type]=[{type:h.type,options:h.options,fn:h.type}]}ps.ensureMappedState(p).instance[h.type]=()=>{var $;return kb(n.insideZone)?null===($=Za.ngZone)||void 0===$||$.run(()=>{l=r.apply(a,o)}):l=r.apply(a,o),Tm(l)?fn(null).pipe(ye(()=>l)):l};const O=ps.createAction(h,o,g),W=Za.store.dispatch(O);return Tm(l)?function(n,e){return ub([n,e]).pipe(ye(t=>t.pop()))}(W,l):l},i}}function w9(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function(n,e){const t=n[e];return Xa(t2(t))&&Object.defineProperties(t,{[f9]:{enumerable:!0,configurable:!0,value:new EDe}}),t2(t)})(e,t).createPayloadType(r,t,i)}}function kDe(){return n=>{const e=function(n){if(function(n){return!ZP(n)}(n.hasOwnProperty(e2))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,e2,{value:e})}return function(n){var e;return null===(e=n)||void 0===e?void 0:e[e2]}(n)}(n);if(Xa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,e){(function(n){var e;const t=null!==(e=Lb(n))&&void 0!==e?e:null;return(Xa(t)||(null==t?void 0:t.stateClass)!==n)&&function(n){Object.defineProperty(n,h9,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Lb(n)}(n)).stateMeta=e}(n,e),function(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>l9(t)},context:MDe(n)})}(n,e,m9(n)),function(n){var e,t;const i=Lb(n),r=null!==(t=null===(e=null==i?void 0:i.stateMeta)||void 0===e?void 0:e.name)&&void 0!==t?t:null;if(Qa(r)){const s=`__${r}__selector`;Object.defineProperties(n.prototype,{[s]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Qa(this[s]))return this[s];if(Xa(Za.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[s]=Za.store.select(n).pipe(ye(o=>Ba()?V1(o):o),$a({refCount:!0,bufferSize:1})),this[s]}}})}}(n)}}let BDe=(()=>{class n{constructor(){this.browserStorageEvents$=new se,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){var r;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var i;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(i=this.ngxsDataDoCheck)||void 0===i||i.call(this))}markAsDirtyAfterReset(){var i;this.dirty=!0,null===(i=this.ngxsDataAfterReset)||void 0===i||i.call(this)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),jDe=(()=>{class n extends BDe{get snapshot(){return function(n){return Ba()?V1(n):n}(this.getState())}get ctx(){return function(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>Ba()?V1(n.getState()):n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}})}(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=nr(n)))(i||n)}}(),n.\u0275prov=et({token:n,factory:n.\u0275fac}),rr([v9(),dc("design:type",Object),dc("design:paramtypes",[])],n.prototype,"snapshot",null),rr([n2(),Mj(0,w9("patchValue")),dc("design:type",Function),dc("design:paramtypes",[Object]),dc("design:returntype",void 0)],n.prototype,"patchState",null),rr([n2(),Mj(0,w9("stateValue")),dc("design:type",Function),dc("design:paramtypes",[Object]),dc("design:returntype",void 0)],n.prototype,"setState",null),rr([n2(),dc("design:type",Function),dc("design:paramtypes",[]),dc("design:returntype",void 0)],n.prototype,"reset",null),n})();const jm=new Ht("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),A2=new Ht("ngx-window",{providedIn:"root",factory:()=>function(n){return Tf(n)?window:null}(Fc(Wc))}),ZOe=new Ht("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(Fc(A2))}),T2=new Ht("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Fc(A2),Fc(ZOe))});let M2=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){(this.settings.enableTracing||Ba())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o){try{const a=new Map;i&&a.set("event_category",i),r&&a.set("event_label",r),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",t,l):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(ke(jm),ke(pn),ke(T2))},n.\u0275prov=et({factory:function(){return new n(ke(jm),ke(pn),ke(T2))},token:n,providedIn:"root"}),n})();new Ht("ngx-google-analytics-routing-settings",{factory:()=>({})}),new Ht("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});class IW extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}function bRe(){throw new IW}function vRe(){throw new IW}function O2(n,e,t){e.run(()=>n.dispatch(t))}function SRe(n,e,t,i){return yg(t)?function(n,e,t){return t.then(i=>(O2(n,e,i),i))}(n,e,t):Tm(t)?function(n,e,t,i){return null!==i&&(t=t.pipe(_r(i.cancelUncompleted$))),t.subscribe({next:r=>O2(n,e,r)}),t}(n,e,t,i):(O2(n,e,t),t)}class xRe{constructor(){this.cancelUncompleted$=new se}cancelPreviousAction(){this.cancelUncompleted$.next()}}const R2="\u0275fac",OW=Symbol("InjectorInstance"),RW=Symbol("FactoryHasBeenDecorated");function NW(n,e){const t=n[OW];return t?t.get(e):null}const TRe={cancelUncompleted:!1};function PW(n=TRe){return(e,t,i)=>{let r;const s=function(n){return n?new xRe:null}(n.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=NW(this,cu)||bRe(),l=NW(this,gn)||vRe(),c=r.apply(this,arguments);return l.runOutsideAngular(()=>SRe(a,l,c,s))}"function"==typeof(null==i?void 0:i.value)?(r=i.value,i.value=o):Object.defineProperty(e,t,{set:a=>r=a,get:()=>o}),function(n){if(RW in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[R2]&&function(n){const e=n[R2];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[OW]=Oe(Pu),r};t&&(t.factory=i),Object.defineProperty(n,R2,{get:()=>i})}(e),n.constructor.prototype[RW]=!0}(e)}}const tNe=["bodyCanvas"];let nNe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new sn,this.nodeDrag=new sn,this.nodeClick=new sn,this.nodeHoverStart=new sn,this.nodeHoverStop=new sn,this.initialized=new sn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){var i;this._scene=t,null===(i=this.bodyUI)||void 0===i||i.setScene(t)}get rotation(){return this._rotation}set rotation(t){var i;this._rotation=t,null===(i=this.bodyUI)||void 0===i||i.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){var i;this._rotationX=t,null===(i=this.bodyUI)||void 0===i||i.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){var i;this._zoom=t,null===(i=this.bodyUI)||void 0===i||i.setZoom(t)}get target(){return this._target}set target(t){var i;this._target=t,null===(i=this.bodyUI)||void 0===i||i.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t;return Fi(this,void 0,void 0,function*(){const i=this.bodyCanvas.nativeElement,r=new Qve({id:"body-ui",canvas:i,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),this.bodyUI=r,window.bodyUI=r,(null===(t=this.scene)||void 0===t?void 0:t.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.target&&this.bodyUI.setTarget(this.target),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))],this.initialized.emit()})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ln({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(t,i){if(1&t&&ss(tNe,5,En),2&t){let r;ii(r=ri())&&(i.bodyCanvas=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&vl(i.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(t,i){1&t&&bi(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),iNe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({imports:[[qr]]}),n})();function ENe(n,e){if(1&n&&(Pt(0,"div",16),bi(1,"youtube-player",17),Ft()),2&n){const t=ci(3);Zt(1),pE("videoId",t.videoID)}}function SNe(n,e){if(1&n&&(Pt(0,"mat-expansion-panel",11),Pt(1,"mat-expansion-panel-header"),Pt(2,"h2",12),Oi(3),Ft(),Ft(),Pt(4,"div",13),bi(5,"markdown",14),Di(6,ENe,2,1,"div",15),Ft(),Ft()),2&n){const t=ci(),i=t.index,r=t.$implicit;rn("expanded",0===i),Zt(3),da(r.title),Zt(2),vi("first",0===i),rn("data",r.content),Zt(1),rn("ngIf",0===i)}}function xNe(n,e){if(1&n&&(Pt(0,"div",9),Di(1,SNe,7,6,"mat-expansion-panel",10),Ft()),2&n){const t=e.$implicit;Zt(1),rn("ngIf",t)}}new Ht("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name)).filter(n=>!0!==n.disabled);let WW=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){var t;null===(t=document.getElementsByClassName("modal-animated")[0])||void 0===t||t.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return n.\u0275fac=function(t){return new(t||n)(Oe(k1),Oe(V7))},n.\u0275cmp=ln({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(t,i){1&t&&(Pt(0,"div",0),Pt(1,"div",1),Pt(2,"div",2),Pt(3,"div",3),Pt(4,"h2",4),Oi(5),Ft(),Pt(6,"div",5),Pt(7,"mat-icon",6),Un("click",function(){return i.close()}),Oi(8,"clear"),Ft(),Ft(),Ft(),Pt(9,"mat-dialog-content",7),Di(10,xNe,2,1,"div",8),Ft(),Ft(),Ft(),Ft()),2&t&&(Zt(5),da(i.infoTitle),Zt(5),rn("ngForOf",i.documentationContents))},directives:[z7,Nm,H7,Af,lc,Y7,K7,J7,i9],styles:[".mat-dialog-container{padding:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:3rem;text-align:left}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"]}),n})(),qW=(()=>{class n{constructor(t){this.http=t,this.panelContent=new Br({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}}return n.\u0275fac=function(t){return new(t||n)(ke(ip))},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ANe=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new sn,this.closeClicked=new sn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ln({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(t,i){2&t&&vl(i.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(t,i){1&t&&(Pt(0,"div",0),Pt(1,"div",1),Pt(2,"div",2),Pt(3,"div",3),Pt(4,"p",4),Oi(5),Ft(),Pt(6,"mat-icon",5),Un("click",function(){return i.close()}),Oi(7,"clear"),Ft(),Ft(),bi(8,"img",6),Pt(9,"mat-dialog-content",7),Pt(10,"div",8),Oi(11),Ft(),Pt(12,"a",9),Un("click",function(){return i.onDialogButtonClick()}),Ft(),Ft(),Ft(),Ft(),Ft()),2&t&&(Zt(5),da(i.infoTitle),Zt(3),rn("src",i.imageUrl,nf),Zt(3),ha(" ",i.message,""),Zt(1),rn("text",i.callToAction))},directives:[z7,Nm,KMe,H7],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;-o-object-fit:cover;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),n})(),Yb=(()=>{let n=class extends jDe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(Qi(n=>null!=n),$a(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(c7(...t),rd(),$a(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(c7(...t),rd(),$a(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}};return n.\u0275fac=function(){let e;return function(i){return(e||(e=nr(n)))(i||n)}}(),n.\u0275prov=et({token:n,factory:n.\u0275fac}),rr([v9()],n.prototype,"config$",null),n=rr([kDe(),I6({name:"globalConfig",defaults:null})],n),n})();!function(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}(),new se;let k2=(()=>{class n{}return n.type="[CallToAction] Learn More",n})(),L2=(()=>{class n{}return n.type="[CallToAction] Open Dialog",n})(),B2=(()=>{class n{}return n.type="[CallToAction] Close Dialog",n})();var j2;class wa{get length(){var e,t;return null!==(t=null===(e=wa.storage)||void 0===e?void 0:e.length)&&void 0!==t?t:0}key(e){var t,i;return null!==(i=null===(t=wa.storage)||void 0===t?void 0:t.key(e))&&void 0!==i?i:null}getItem(e,t){var i,r,s;return null!==(s=null!==(r=null===(i=wa.storage)||void 0===i?void 0:i.getItem(e))&&void 0!==r?r:t)&&void 0!==s?s:null}setItem(e,t){var i;try{return null===(i=wa.storage)||void 0===i||i.setItem(e,t),!0}catch(r){return!1}}removeItem(e){var t;null===(t=wa.storage)||void 0===t||t.removeItem(e)}clear(){var e;null===(e=wa.storage)||void 0===e||e.clear()}}wa.storage=(()=>{let n;try{n=window.localStorage;const e="__storage_test__";return n.setItem(e,e),n.removeItem(e),n}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&n&&0!==n.length?n:void 0}})(),wa.\u0275fac=function(e){return new(e||wa)},wa.\u0275prov=et({token:wa,factory:wa.\u0275fac,providedIn:"root"});const XW="callToActionPopupShown";let Do=j2=class{constructor(e,t,i,r,s){this.dialog=e,this.ga=t,this.storage=i,this.infoService=r,this.http=s}static ctaDatePassed(e,t=Date.now){return+t()>+new Date(e)}ngxsOnInit(e){const{expirationDate:t,popupShown:i}=e.getState(),r=this.storage.getItem(XW,`${i}`),s=j2.ctaDatePassed(t);"true"!==r&&!s&&e.dispatch(new L2)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(ye(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(WW,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Yr(t=>this.launchLearnMore(t)))}open(e){this.dialog.open(NNe,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(XW,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}};Do.\u0275fac=function(e){return new(e||Do)(ke(Pb),ke(M2),ke(wa),ke(qW),ke(ip))},Do.\u0275prov=et({token:Do,factory:Do.\u0275fac}),rr([yN(k2)],Do.prototype,"learnMore",null),rr([yN(L2)],Do.prototype,"open",null),rr([yN(B2)],Do.prototype,"close",null),Do=j2=rr([I6({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Do);let oC=(()=>{class n{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}}return rr([_m([Do])],n,"title",null),rr([_m([Do])],n,"message",null),rr([_m([Do])],n,"callToAction",null),rr([_m([Do])],n,"imageUrl",null),rr([_m([Do])],n,"expirationDate",null),rr([_m([Do])],n,"popupShown",null),n})(),NNe=(()=>{class n{constructor(){this.close=()=>new B2,this.learnMore=()=>new k2}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ln({type:n,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(t,i){1&t&&(Pt(0,"ccf-call-to-action",0),Un("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),xl(1,"async"),xl(2,"async"),xl(3,"async"),xl(4,"async"),Ft()),2&t&&rn("infoTitle",Vu(1,4,i.title$))("message",Vu(2,6,i.message$))("callToAction",Vu(3,8,i.callToAction$))("imageUrl",Vu(4,10,i.imageUrl$))},directives:[ANe],pipes:[h0],styles:[""],changeDetection:0}),rr([kx(oC.title)],n.prototype,"title$",void 0),rr([kx(oC.message)],n.prototype,"message$",void 0),rr([kx(oC.callToAction)],n.prototype,"callToAction$",void 0),rr([kx(oC.imageUrl)],n.prototype,"imageUrl$",void 0),rr([PW()],n.prototype,"close",void 0),rr([PW()],n.prototype,"learnMore",void 0),n})();const QW="http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity",BNe=[173,255,47,229.5];var HNe=Je(104),GNe=Je.n(HNe),xn=Je(440),$Ne=Je(698),WNe=Je(445),qNe=Je.n(WNe),fr=Je(815),Kb=Je(609);const or=xn.Util.prefixes({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},xn.DataFactory),un=(or("rdf"),or("rdf")("type"),or("rdfs"),or("rdfs")("label"),or("rdfs")("comment"),or("rdfs")("isDefinedBy"),or("rdfs")("seeAlso"),or("ccf")),co_label=(or("ccf")("has_registration_location"),or("rdfs")("label")),co_description=or("rdfs")("comment"),co_link=un("url"),co_providerName=(un("sex"),un("age"),un("bmi"),xn.DataFactory.literal("Male"),xn.DataFactory.literal("Female"),un("consortium_name"),un("tissue_provider_name")),co_donor=(un("tissue_provider_uuid"),un("comes_from")),co_sections=un("subdivided_into_sections"),co_datasets=un("generates_dataset"),co_sampleType=un("sample_type"),co_sectionCount=(xn.DataFactory.literal("Tissue Block"),xn.DataFactory.literal("Tissue Section"),xn.DataFactory.literal("Non-standard"),un("section_count")),co_sectionSize=un("section_size"),co_sectionUnits=un("section_size_unit"),co_sectionNumber=un("section_number"),co_spatialEntity=un("has_registration_location"),co_technology=(un("has_ontology_term"),un("has_cell_type_term"),un("technology")),co_thumbnail=un("thumbnail"),md={x:un,base:or("base"),ontologyNode:{label:un("ccf_pref_label"),parent:un("ccf_part_of"),children:un("ccf_part_of"),rui_rank:un("rui_rank"),synonymLabels:xn.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:un("ccf_part_of"),ct_is_a:un("ccf_ct_isa"),located_in:un("ccf_located_in"),characterizes:un("ccf_characterizes")},spatial:{Female:or("base")("VHFemale"),Male:or("base")("VHMale"),BothSexes:or("base")("VHBothSexes"),FemaleOrgans:or("base")("VHFemaleOrgans"),MaleOrgans:or("base")("VHMaleOrgans")},SpatialObjectReference:un("spatial_object_reference"),SpatialEntity:un("spatial_entity"),SpatialPlacement:un("spatial_placement"),spatialObjectReference:{file:un("file_url"),file_format:un("file_format"),file_subpath:un("file_subpath")},extractionSet:{label:or("rdfs")("label"),rui_rank:un("rui_rank")},spatialEntity:{label:or("rdfs")("label"),description:or("rdfs")("comment"),creator:or("dcterms")("creator"),creator_first_name:un("creator_first_name"),creator_last_name:un("creator_last_name"),creator_orcid:un("creator_orcid"),creation_date:or("dcterms")("created"),updated_date:un("updated_date"),ccf_annotations:un("collides_with"),representation_of:un("representation_of"),reference_organ:un("has_reference_organ"),extraction_set_for:un("extraction_set_for"),extraction_set:un("has_extraction_set"),sex:un("organ_owner_sex"),side:un("organ_side"),rui_rank:un("rui_rank"),slice_thickness:un("slice_thickness"),slice_count:un("slice_count"),x_dimension:un("x_dimension"),y_dimension:un("y_dimension"),z_dimension:un("z_dimension"),dimension_units:un("dimension_unit"),object:un("has_object_reference")},spatialPlacement:{source:un("placement_for"),target:un("placement_relative_to"),placement_date:or("dcterms")("created"),x_scaling:un("x_scaling"),y_scaling:un("y_scaling"),z_scaling:un("z_scaling"),scaling_units:un("scaling_unit"),x_rotation:un("x_rotation"),y_rotation:un("y_rotation"),z_rotation:un("z_rotation"),w_rotation:un("theta_rotation"),rotation_order:un("rotation_order"),rotation_units:un("rotation_unit"),x_translation:un("x_translation"),y_translation:un("y_translation"),z_translation:un("z_translation"),translation_units:un("translation_unit")}},ui={x:or("uberon"),body:or("uberon")("0013702")},XNe={x:or("cl"),cell:or("cl")("0000000")},Xb={x:or("fma")},ZW=(or("lmha"),{body:ui.body,cell:XNe.cell,respiratory_system:ui.x("0001004"),colon:ui.x("0001155"),left_lung:ui.x("0002168"),right_lung:ui.x("0002167"),left_bronchus:ui.x("0002178"),right_bronchus:ui.x("0002177"),kidney:ui.x("0002113"),ureter:ui.x("0000056"),eye:ui.x("0000970"),fallopian_tube:ui.x("0003889"),knee:ui.x("0001465"),ovary:ui.x("0000992"),trachea:ui.x("0003126"),aorta:ui.x("0000947"),blood:ui.x("0000178"),bone_marrow:ui.x("0002371"),male_reproductive_system:ui.x("0000079"),lymph_node:ui.x("0000029"),blood_vasculature:ui.x("0004537"),brain:ui.x("0000955"),eye_left:ui.x("0004548"),eye_right:Xb.x("54449"),fallopian_tube_left:ui.x("0001303"),fallopian_tube_right:ui.x("0001302"),heart:ui.x("0000948"),kidney_left:ui.x("0004538"),kidney_right:ui.x("0004539"),knee_left:Xb.x("24978"),knee_right:Xb.x("24977"),large_intestine:ui.x("0000059"),liver:ui.x("0002107"),lungs:ui.x("0002048"),mesenteric_lymph_node:ui.x("0002509"),ovary_left:Xb.x("7214"),ovary_right:Xb.x("7213"),pancreas:ui.x("0001264"),pelvis:ui.x("0001270"),prostate_gland:ui.x("0002367"),skin:ui.x("0002097"),small_intestine:ui.x("0002108"),spleen:ui.x("0002106"),thymus:ui.x("0002370"),ureter_left:ui.x("0001223"),ureter_right:ui.x("0001222"),urinary_bladder:ui.x("0001255"),uterus:ui.x("0000995")});function V2(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}V2(md.spatialObjectReference),V2(md.spatialEntity),V2(md.spatialPlacement),new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]);const zm=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Pr=(Math,Math,{});function hPe(n,{precision:e=Pr.precision||4}={}){return n=function(n){return Math.round(n/Pr.EPSILON)*Pr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Ah(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Zb(n,e,t){const i=Pr.EPSILON;t&&(Pr.EPSILON=t);try{if(n===e)return!0;if(Ah(n)&&Ah(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Zb(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Pr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Pr.EPSILON=i}}function Ec(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}Pr.EPSILON=1e-12,Pr.debug=!1,Pr.precision=4,Pr.printTypes=!1,Pr.printDegrees=!1,Pr.printRowMajor=!0;class H2 extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Ec(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Ah(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Pr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+hPe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Zb(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Pr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function uo(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function nq(n,e,t=""){if(Pr.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const iq={};function G2(n,e){iq[n]||(iq[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class vPe extends H2{get ELEMENTS(){return Ec(!1),0}copy(e){return Ec(!1),this}get x(){return this[0]}set x(e){this[0]=uo(e)}get y(){return this[1]}set y(e){this[1]=uo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return uo(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return uo(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Ec(e>=0&&e<this.ELEMENTS,"index is out of range"),uo(this[e])}setComponent(e,t){return Ec(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}const $2=[0,0,0],rq={};class Pn extends vPe{static get ZERO(){return rq.ZERO=rq.ZERO||Object.freeze(new Pn(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Ah(e)?this.copy(e):(Pr.debug&&(uo(e),uo(t),uo(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Pr.debug&&(uo(e.x),uo(e.y),uo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=uo(e)}angle(e){return NV(this,e)}cross(e){return A0(this,this,e),this.check()}rotateX({radians:e,origin:t=$2}){return IV(this,this,t,e),this.check()}rotateY({radians:e,origin:t=$2}){return OV(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=$2}){return RV(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return bI(this,this,e),this.check()}transformAsVector(e){return function(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return vI(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return DV(this,this,e),this.check()}}new Pn,new Pn;const Jb=new Pn,aq=new Pn;class W2{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new Pn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=Jb.from(t),this.center=(new Pn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new W2(this.center,this.radius)}union(e){const t=this.center,i=this.radius,s=e.radius,o=Jb.copy(e.center).subtract(t),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const l=.5*(i+a+s);return aq.copy(o).scale((-i+l)/a).add(t),this.center.copy(aq),this.radius=l,this}expand(e){const t=(e=Jb.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function(n,e){var s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(s,o,a),n[2]=Math.hypot(l,c,u),n}(Jb,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=Jb.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?zm.OUTSIDE:s<i?zm.INTERSECTING:zm.INSIDE}}class CPe extends H2{get ELEMENTS(){return Ec(!1),0}get RANK(){return Ec(!1),0}toString(){let e="[";if(Pr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=uo(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}const lq=Object.freeze([1,0,0,0,1,0,0,0,1]),APe=Object.freeze([0,0,0,0,0,0,0,0,0]),TPe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),Hm={};class Xo extends CPe{static get IDENTITY(){return Hm.IDENTITY=Hm.IDENTITY||Object.freeze(new Xo(lq)),Hm.IDENTITY}static get ZERO(){return Hm.ZERO=Hm.ZERO||Object.freeze(new Xo(APe)),Hm.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return TPe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,s,o,a,l,c){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this.check()}setRowMajor(e,t,i,r,s,o,a,l,c){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=s,this[5]=l,this[6]=i,this[7]=o,this[8]=c,this.check()}determinant(){return function(n){var r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8];return n[0]*(c*s-o*l)+n[1]*(-c*r+o*a)+n[2]*(l*r-s*a)}(this)}identity(){return this.copy(lq)}fromQuaternion(e){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,u=i*o,h=i*a,p=r*o,g=r*a,m=r*l,D=s*o,O=s*a,W=s*l;n[0]=1-h-m,n[3]=u-W,n[6]=p+O,n[1]=u+W,n[4]=1-c-m,n[7]=g-D,n[2]=p-O,n[5]=g+D,n[8]=1-c-h}(this,e),this.check()}transpose(){return function(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,p=-u*s+a*l,g=c*s-o*l,m=t*h+i*p+r*g;m&&(n[0]=h*(m=1/m),n[1]=(-u*i+r*c)*m,n[2]=(a*i-r*o)*m,n[3]=p*m,n[4]=(u*t-r*l)*m,n[5]=(-a*t+r*s)*m,n[6]=g*m,n[7]=(-c*t+i*l)*m,n[8]=(o*t-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return lz(this,e,this),this.check()}multiplyRight(e){return lz(this,this,e),this.check()}rotate(e){return function(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=Math.sin(t),g=Math.cos(t);n[0]=g*i+p*o,n[1]=g*r+p*a,n[2]=g*s+p*l,n[3]=g*o-p*i,n[4]=g*a-p*r,n[5]=g*l-p*s,n[6]=c,n[7]=u,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?cz(this,this,e):cz(this,this,[e,e,e]),this.check()}translate(e){return function(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=t[0],g=t[1];n[0]=i,n[1]=r,n[2]=s,n[3]=o,n[4]=a,n[5]=l,n[6]=p*i+g*o+c,n[7]=p*r+g*a+u,n[8]=p*s+g*l+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=vI(t||[-0,-0,-0],e,this);break;case 4:t=function(n,e,t){const i=e[0],r=e[1],s=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return nq(t,e.length),t}transformVector(e,t){return G2("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return G2("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return G2("Matrix3.transformVector"),this.transform(e,t)}}const MPe=[0,0,0,1];class cq extends H2{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return fR(this,e),this.check()}identity(){return dz(this),this.check()}fromAxisRotation(e,t){return hR(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=uo(e)}get y(){return this[1]}set y(e){this[1]=uo(e)}get z(){return this[2]}set z(e){this[2]=uo(e)}get w(){return this[3]}set w(e){this[3]=uo(e)}len(){return vz(this)}lengthSquared(){return wz(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return gR(this,e)}rotationTo(e,t){return Sz(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return yz(this,this,e),this.check()}calculateW(){return gz(this,this),this.check()}conjugate(){return _z(this,this),this.check()}invert(){return mz(this,this),this.check()}lerp(e,t,i){return bz(this,e,t,i),this.check()}multiplyRight(e,t){return Ec(!t),ax(this,this,e),this.check()}multiplyLeft(e,t){return Ec(!t),ax(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return hz(this,this,e),this.check()}rotateY(e){return fz(this,this,e),this.check()}rotateZ(e){return pz(this,this,e),this.check()}scale(e){return pR(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=MPe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return J0(this,e,t,i),this.check()}transformVector4(e,t=e){return BU(t,e,this),nq(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const DPe=new Pn,IPe=new Pn,cC=new Pn,uC=new Pn,dC=new Pn,OPe=new Pn,RPe=new Pn;class q2{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new Pn).from(e),this.halfAxes=new Xo(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Pn(e).len(),new Pn(t).len(),new Pn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Pn(e).normalize(),s=new Pn(t).normalize(),o=new Pn(i).normalize();return(new cq).fromMatrix3(new Xo([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new cq(i),s=(new Xo).fromQuaternion(r);return s[0]=s[0]*t[0],s[1]=s[1]*t[0],s[2]=s[2]*t[0],s[3]=s[3]*t[1],s[4]=s[4]*t[1],s[5]=s[5]*t[1],s[6]=s[6]*t[2],s[7]=s[7]*t[2],s[8]=s[8]*t[2],this.center=(new Pn).from(e),this.halfAxes=s,this}clone(){return new q2(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new W2){const t=this.halfAxes,i=t.getColumn(0,cC),r=t.getColumn(1,uC),s=t.getColumn(2,dC),o=DPe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,l=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),c=i.dot(t)+e.distance;return c<=-l?zm.OUTSIDE:c>=l?zm.INSIDE:zm.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=IPe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,cC),s=i.getColumn(1,uC),o=i.getColumn(2,dC),a=r.magnitude(),l=s.magnitude(),c=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(t.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(t.dot(s))-l,h>0&&(u+=h*h),h=Math.abs(t.dot(o))-c,h>0&&(u+=h*h),u}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,l=a.getColumn(0,cC),c=a.getColumn(1,uC),u=a.getColumn(2,dC),h=OPe.copy(l).add(c).add(u).add(o),p=RPe.copy(h).subtract(e);let g=t.dot(p);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).add(c).subtract(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).subtract(c).add(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).subtract(c).subtract(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).add(c).add(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).add(c).subtract(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).subtract(c).add(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).subtract(c).subtract(u),p.copy(h).subtract(e),g=t.dot(p),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,cC);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,uC);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,dC);return r.transformAsPoint(e),this.halfAxes=new Xo([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const uq=new Pn,dq=new Pn;class Y2{constructor(e=[0,0,1],t=0){this.normal=new Pn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Ec(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=uq.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),Ec(Zb(this.normal.len(),1)),this.distance=r,this}clone(e){return new Y2(this.normal,this.distance)}equals(e){return Zb(this.distance,e.distance)&&Zb(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=dq.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=uq.from(e);const i=this.getPointDistance(e),r=dq.copy(this.normal).scale(i);return e.subtract(r).to(t)}}function E2e(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[md.ontologyNode.label.id]:"label",[t]:"parent",[md.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of function*(n,e,t){for(const[i,r]of Object.entries(t))for(const s of(0,xn.readQuads)(n,e,i,null,null)){const o="Literal"===s.object.termType?(0,Kb.fromRdf)(s.object):s.object.id;yield[r,o]}}(n,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=n.getSubjects(t,e,null).map(s=>s.id),i}function _q(n,e,t,i){const r={root:e,nodes:{}},s=new Set;for(const a of(0,xn.readQuads)(n,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=E2e(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const o=n.getSubjects(i,e,null).map(a=>a.id).sort((a,l)=>r.nodes[a].label.localeCompare(r.nodes[l].label));return r.nodes[e].children=o,yq(r),r}function yq(n,e,t=new Set){const i=n.nodes[null!=e?e:n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)yq(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}new Pn([1,0,0]),new Pn([0,1,0]),new Pn([0,0,1]),new Pn,new Pn,new Y2(new Pn(1,0,0),0),new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,Math,new Xo,new Xo,new Xo,new Xo,new Xo,new Pn,new Pn,new Pn,new Pn,new Pn,new Xo,new Xo,new Xo,(0,fr.memoize)(function(n){const e=_q(n,ZW.body.id,"body",md.asctb.part_of.id);return e.nodes[ZW.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");const pC={[co_label.id]:"label",[co_description.id]:"description",[co_link.id]:"link"};Object.assign(Object.assign({},pC),{[co_providerName.id]:"providerName"}),Object.assign(Object.assign({},pC),{[co_technology.id]:"technology",[co_thumbnail.id]:"thumbnail"}),Object.assign(Object.assign({},pC),{[co_sampleType.id]:"sampleType",[co_sectionNumber.id]:"sectionNumber",[co_datasets.id]:"datasets"}),Object.assign(Object.assign({},pC),{[co_sampleType.id]:"sampleType",[co_sectionCount.id]:"sectionCount",[co_sectionSize.id]:"sectionSize",[co_sectionUnits.id]:"sectionUnits",[co_donor.id]:"donor",[co_spatialEntity.id]:"spatialEntityId",[co_sections.id]:"sections",[co_datasets.id]:"datasets"});const vq={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};function mu(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let tF;function Sc(){return tF||(tF=function(n,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise(t=>{const i=()=>indexedDB.databases().finally(t);e=setInterval(i,100),i()}).finally(()=>clearInterval(e))}().then(()=>{const i=indexedDB.open("keyval-store");return i.onupgradeneeded=()=>i.result.createObjectStore(e),mu(i)});return(i,r)=>t.then(s=>r(s.transaction(e,i).objectStore(e)))}(0,"keyval")),tF}function wq(n,e=Sc()){return e("readonly",t=>mu(t.get(n)))}const gC="Unknown Euler angle order",$m=.99999;class Ji extends bS{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return Ji.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(e){return Ji.RotationOrders[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=Ji.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,l=2*(t*i+s*r);let c=-2*(t*r-s*i);c=c>1?1:c,c=c<-1?-1:c;const p=Math.atan2(2*(i*r+s*t),-2*(t*t+o)+1),g=Math.asin(c),m=Math.atan2(l,a);return new Ji(p,g,m,Ji.RollPitchYaw)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=sr(e)}get y(){return this[1]}set y(e){this[1]=sr(e)}get z(){return this[2]}set z(e){this[2]=sr(e)}get alpha(){return this[0]}set alpha(e){this[0]=sr(e)}get beta(){return this[1]}set beta(e){this[1]=sr(e)}get gamma(){return this[2]}set gamma(e){this[2]=sr(e)}get phi(){return this[0]}set phi(e){this[0]=sr(e)}get theta(){return this[1]}set theta(e){this[1]=sr(e)}get psi(){return this[2]}set psi(e){this[2]=sr(e)}get roll(){return this[0]}set roll(e){this[0]=sr(e)}get pitch(){return this[1]}set pitch(e){this[1]=sr(e)}get yaw(){return this[2]}set yaw(e){this[2]=sr(e)}get order(){return this[3]}set order(e){this[3]=function(n){if(n<0&&n>=6)throw new Error(gC);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,Ji.ZYX)}fromRotationMatrix(e,t=Ji.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new mR;switch(this[4]){case Ji.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Ji.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Ji.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Ji.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Ji.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Ji.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(gC)}}_fromRotationMatrix(e,t=Ji.DefaultOrder){const i=e.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],u=i[2],h=i[6],p=i[10];switch(t=t||this[3]){case Ji.XYZ:this[1]=Math.asin(Va(o,-1,1)),Math.abs(o)<$m?(this[0]=Math.atan2(-c,p),this[2]=Math.atan2(-s,r)):(this[0]=Math.atan2(h,l),this[2]=0);break;case Ji.YXZ:this[0]=Math.asin(-Va(c,-1,1)),Math.abs(c)<$m?(this[1]=Math.atan2(o,p),this[2]=Math.atan2(a,l)):(this[1]=Math.atan2(-u,r),this[2]=0);break;case Ji.ZXY:this[0]=Math.asin(Va(h,-1,1)),Math.abs(h)<$m?(this[1]=Math.atan2(-u,p),this[2]=Math.atan2(-s,l)):(this[1]=0,this[2]=Math.atan2(a,r));break;case Ji.ZYX:this[1]=Math.asin(-Va(u,-1,1)),Math.abs(u)<$m?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(a,r)):(this[0]=0,this[2]=Math.atan2(-s,l));break;case Ji.YZX:this[2]=Math.asin(Va(a,-1,1)),Math.abs(a)<$m?(this[0]=Math.atan2(-c,l),this[1]=Math.atan2(-u,r)):(this[0]=0,this[1]=Math.atan2(o,p));break;case Ji.XZY:this[2]=Math.asin(-Va(s,-1,1)),Math.abs(s)<$m?(this[0]=Math.atan2(h,l),this[1]=Math.atan2(o,r)):(this[0]=Math.atan2(-c,p),this[1]=0);break;default:throw new Error(gC)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),l=Math.cos(s),c=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case Ji.XYZ:{const p=o*l,g=o*h,m=c*l,D=c*h;t[0]=a*l,t[4]=-a*h,t[8]=u,t[1]=g+m*u,t[5]=p-D*u,t[9]=-c*a,t[2]=D-p*u,t[6]=m+g*u,t[10]=o*a;break}case Ji.YXZ:{const p=a*l,g=a*h,m=u*l,D=u*h;t[0]=p+D*c,t[4]=m*c-g,t[8]=o*u,t[1]=o*h,t[5]=o*l,t[9]=-c,t[2]=g*c-m,t[6]=D+p*c,t[10]=o*a;break}case Ji.ZXY:{const p=a*l,g=a*h,m=u*l,D=u*h;t[0]=p-D*c,t[4]=-o*h,t[8]=m+g*c,t[1]=g+m*c,t[5]=o*l,t[9]=D-p*c,t[2]=-o*u,t[6]=c,t[10]=o*a;break}case Ji.ZYX:{const p=o*l,g=o*h,m=c*l,D=c*h;t[0]=a*l,t[4]=m*u-g,t[8]=p*u+D,t[1]=a*h,t[5]=D*u+p,t[9]=g*u-m,t[2]=-u,t[6]=c*a,t[10]=o*a;break}case Ji.YZX:{const p=o*a,g=o*u,m=c*a,D=c*u;t[0]=a*l,t[4]=D-p*h,t[8]=m*h+g,t[1]=h,t[5]=o*l,t[9]=-c*l,t[2]=-u*l,t[6]=g*h+m,t[10]=p-D*h;break}case Ji.XZY:{const p=o*a,g=o*u,m=c*a,D=c*u;t[0]=a*l,t[4]=-h,t[8]=u*l,t[1]=p*h+D,t[5]=o*l,t[9]=g*h-m,t[2]=m*h-g,t[6]=c*l,t[10]=D*h+p;break}default:throw new Error(gC)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new mR(e*r*s-t*i*o,e*i*o+t*r*s,t*i*s-e*r*o,e*i*s+t*r*o)}}var mC,L2e=new Uint8Array(16);function B2e(){if(!mC&&!(mC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mC(L2e)}const j2e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,U2e=function(n){return"string"==typeof n&&j2e.test(n)};for(var ho=[],iF=0;iF<256;++iF)ho.push((iF+256).toString(16).substr(1));const $2e=function(n,e,t){var i=(n=n||{}).random||(n.rng||B2e)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(var r=0;r<16;++r)e[t+r]=i[r];return e}return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(ho[n[e+0]]+ho[n[e+1]]+ho[n[e+2]]+ho[n[e+3]]+"-"+ho[n[e+4]]+ho[n[e+5]]+"-"+ho[n[e+6]]+ho[n[e+7]]+"-"+ho[n[e+8]]+ho[n[e+9]]+"-"+ho[n[e+10]]+ho[n[e+11]]+ho[n[e+12]]+ho[n[e+13]]+ho[n[e+14]]+ho[n[e+15]]).toLowerCase();if(!U2e(t))throw TypeError("Stringified UUID is invalid");return t}(i)};function*rF(n,e,t){for(const[i,r]of Object.entries(t))for(const s of(0,xn.readQuads)(n,e,i,null,null)){const o="Literal"===s.object.termType?(0,Kb.fromRdf)(s.object):s.object.id;yield[r,o]}}function dp(n,e,t,i){const r={"@id":e,"@type":t};for(const[s,o]of Object.entries(i))for(const a of(0,xn.readQuads)(n,r["@id"],s,null,null)){const l="Literal"===a.object.termType?(0,Kb.fromRdf)(a.object):a.object.id;r[o]=l}return r}const ar=xn.Util.prefixes({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},xn.DataFactory),Eq={x:ar("rdf"),type:ar("rdf")("type")},dn=(ar("rdfs"),ar("rdfs")("label"),ar("rdfs")("comment"),ar("rdfs")("isDefinedBy"),ar("rdfs")("seeAlso"),ar("ccf")),yi={id:ar("ccf")("has_registration_location"),label:ar("rdfs")("label"),description:ar("rdfs")("comment"),link:dn("url"),sex:dn("sex"),age:dn("age"),bmi:dn("bmi"),Male:xn.DataFactory.literal("Male"),Female:xn.DataFactory.literal("Female"),consortiumName:dn("consortium_name"),providerName:dn("tissue_provider_name"),providerUUID:dn("tissue_provider_uuid"),donor:dn("comes_from"),sections:dn("subdivided_into_sections"),datasets:dn("generates_dataset"),sampleType:dn("sample_type"),TissueBlock:xn.DataFactory.literal("Tissue Block"),TissueSection:xn.DataFactory.literal("Tissue Section"),NonStandard:xn.DataFactory.literal("Non-standard"),sectionCount:dn("section_count"),sectionSize:dn("section_size"),sectionUnits:dn("section_size_unit"),sectionNumber:dn("section_number"),spatialEntity:dn("has_registration_location"),ontologyTerms:dn("has_ontology_term"),cellTypeTerms:dn("has_cell_type_term"),technology:dn("technology"),thumbnail:dn("thumbnail")},ki={x:dn,base:ar("base"),ontologyNode:{label:dn("ccf_pref_label"),parent:dn("ccf_part_of"),children:dn("ccf_part_of"),rui_rank:dn("rui_rank"),synonymLabels:xn.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:dn("ccf_part_of"),ct_is_a:dn("ccf_ct_isa"),located_in:dn("ccf_located_in"),characterizes:dn("ccf_characterizes")},spatial:{Female:ar("base")("VHFemale"),Male:ar("base")("VHMale"),BothSexes:ar("base")("VHBothSexes"),FemaleOrgans:ar("base")("VHFemaleOrgans"),MaleOrgans:ar("base")("VHMaleOrgans")},SpatialObjectReference:dn("spatial_object_reference"),SpatialEntity:dn("spatial_entity"),SpatialPlacement:dn("spatial_placement"),spatialObjectReference:{file:dn("file_url"),file_format:dn("file_format"),file_subpath:dn("file_subpath")},extractionSet:{label:ar("rdfs")("label"),rui_rank:dn("rui_rank")},spatialEntity:{label:ar("rdfs")("label"),description:ar("rdfs")("comment"),creator:ar("dcterms")("creator"),creator_first_name:dn("creator_first_name"),creator_last_name:dn("creator_last_name"),creator_orcid:dn("creator_orcid"),creation_date:ar("dcterms")("created"),updated_date:dn("updated_date"),ccf_annotations:dn("collides_with"),representation_of:dn("representation_of"),reference_organ:dn("has_reference_organ"),extraction_set_for:dn("extraction_set_for"),extraction_set:dn("has_extraction_set"),sex:dn("organ_owner_sex"),side:dn("organ_side"),rui_rank:dn("rui_rank"),slice_thickness:dn("slice_thickness"),slice_count:dn("slice_count"),x_dimension:dn("x_dimension"),y_dimension:dn("y_dimension"),z_dimension:dn("z_dimension"),dimension_units:dn("dimension_unit"),object:dn("has_object_reference")},spatialPlacement:{source:dn("placement_for"),target:dn("placement_relative_to"),placement_date:ar("dcterms")("created"),x_scaling:dn("x_scaling"),y_scaling:dn("y_scaling"),z_scaling:dn("z_scaling"),scaling_units:dn("scaling_unit"),x_rotation:dn("x_rotation"),y_rotation:dn("y_rotation"),z_rotation:dn("z_rotation"),w_rotation:dn("theta_rotation"),rotation_order:dn("rotation_order"),rotation_units:dn("rotation_unit"),x_translation:dn("x_translation"),y_translation:dn("y_translation"),z_translation:dn("z_translation"),translation_units:dn("translation_unit")}},di={x:ar("uberon"),body:ar("uberon")("0013702")},q2e={x:ar("cl"),cell:ar("cl")("0000000")},nv={x:ar("fma")},bd=(ar("lmha"),{body:di.body,cell:q2e.cell,respiratory_system:di.x("0001004"),colon:di.x("0001155"),left_lung:di.x("0002168"),right_lung:di.x("0002167"),left_bronchus:di.x("0002178"),right_bronchus:di.x("0002177"),kidney:di.x("0002113"),ureter:di.x("0000056"),eye:di.x("0000970"),fallopian_tube:di.x("0003889"),knee:di.x("0001465"),ovary:di.x("0000992"),trachea:di.x("0003126"),aorta:di.x("0000947"),blood:di.x("0000178"),bone_marrow:di.x("0002371"),male_reproductive_system:di.x("0000079"),lymph_node:di.x("0000029"),blood_vasculature:di.x("0004537"),brain:di.x("0000955"),eye_left:di.x("0004548"),eye_right:nv.x("54449"),fallopian_tube_left:di.x("0001303"),fallopian_tube_right:di.x("0001302"),heart:di.x("0000948"),kidney_left:di.x("0004538"),kidney_right:di.x("0004539"),knee_left:nv.x("24978"),knee_right:nv.x("24977"),large_intestine:di.x("0000059"),liver:di.x("0002107"),lungs:di.x("0002048"),mesenteric_lymph_node:di.x("0002509"),ovary_left:nv.x("7214"),ovary_right:nv.x("7213"),pancreas:di.x("0001264"),pelvis:di.x("0001270"),prostate_gland:di.x("0002367"),skin:di.x("0002097"),small_intestine:di.x("0002108"),spleen:di.x("0002106"),thymus:di.x("0002370"),ureter_left:di.x("0001223"),ureter_right:di.x("0001222"),urinary_bladder:di.x("0001255"),uterus:di.x("0000995")});function sF(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const _C={spatialObjectReference:sF(ki.spatialObjectReference),spatialEntity:sF(ki.spatialEntity),spatialPlacement:sF(ki.spatialPlacement)};function Sq(n,e){const t=dp(n,e,"ExtractionSet",_C.spatialEntity);return t.extractionSites=(0,fr.sortBy)(n.getSubjects(ki.spatialEntity.extraction_set,e,null).map(i=>hp(n,i.id)),["rui_rank"]),t}function hp(n,e){const t=dp(n,e,"SpatialEntity",_C.spatialEntity);return t.object&&(t.object=function(n,e){return dp(n,e,"SpatialObjectReference",_C.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,ki.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,yi.spatialEntity,e,null),t}function Z2e(n,e){const t=dp(n,e,"SpatialPlacement",_C.spatialPlacement);return t.source&&(t.source=hp(n,t.source)),t.target&&(t.target=hp(n,t.target)),t}function xq(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;case"meter":default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(xV),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(s).scale(o)}class Cq{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new $Ne.DirectedGraph;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},Eq.type,ki.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},Eq.type,ki.SpatialEntity,null);const t={};for(const i of(0,xn.readQuads)(e,null,ki.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of(0,xn.readQuads)(e,null,ki.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new qn(qn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new qn(qn.IDENTITY),s=qNe()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&xq(r,Z2e(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,fr.get)(e,"placement[0]",(0,fr.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,t),s&&(s=xq(s,r))):i&&(s=this.getTransformationMatrix(i,t)),s){const o=(new Ji).fromRotationMatrix(s,Ji.XYZ),a=s.getTranslation().map(u=>1e3*u),l=o.toVector3().map(vse),c=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${$2e()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:c[0],y_scaling:c[1],z_scaling:c[2],scaling_units:"ratio",x_rotation:l[0],y_rotation:l[1],z_rotation:l[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class Aq{constructor(e){this.db=e}getSpatialEntity(e){return hp(this.db.store,e)}getExtractionSets(e){return function(n,e){return(0,fr.sortBy)(n.getSubjects(ki.spatialEntity.extraction_set_for,e,null).map(t=>Sq(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return Sq(this.db.store,e)}getAnatomicalStructures(e){return function(n,e){return(0,fr.sortBy)(n.getSubjects(ki.spatialEntity.reference_organ,e,null).map(t=>hp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(hp(n,t.subject.id))},null,ki.spatialEntity.reference_organ,null,null),(0,fr.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(null==e?void 0:e.sex){case"Male":t=ki.spatial.Male.id;break;case"Female":t=ki.spatial.Female.id;break;case"Both":default:t=ki.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(null==e?void 0:e.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return(null==e?void 0:e.debug)&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,t,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),(null==e?void 0:e.debug)&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ki.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,t){var i,r;const s=void 0!==(null==t?void 0:t.sex)&&"both"!==(null===(i=null==t?void 0:t.sex)||void 0===i?void 0:i.toLowerCase()),o=this.getReferenceOrgans().filter(a=>a.representation_of===e&&(!s||a.sex===(null==t?void 0:t.sex)));if(o.length>0){const a=o[0],c=this.getSceneNode(a,a,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===a.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),u=(null!==(r=this.db.getSpatialEntities(t))&&void 0!==r?r:[]).map(h=>this.getSceneNode(h,a,{color:[255,255,255,229.5]}));return[c].concat(u).filter(h=>void 0!==h)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){var r,s,o,a;const l=null===(s=null===(r=null==e?void 0:e.object)||void 0===r?void 0:r.file_format)||void 0===s?void 0:s.startsWith("model/gltf");let u=this.db.graph.getTransformationMatrix(l&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(u){if(l)u=new qn(qn.IDENTITY).rotateX(xV(90)).multiplyLeft(u);else{let h;switch(e.dimension_units){case"centimeter":h=.01;break;case"millimeter":h=.001;break;case"meter":default:h=1}const p=[e.x_dimension,e.y_dimension,e.z_dimension].map(g=>g*h/2);u.scale(p)}return Object.assign({"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:l?null===(o=e.object)||void 0===o?void 0:o.file:void 0,scenegraphNode:l?null===(a=e.object)||void 0===a?void 0:a.file_subpath:void 0,transformMatrix:u,tooltip:e.label},i)}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const eFe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function yC(n,e=eFe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>(null==r?void 0:r.startsWith("http://purl.obolibrary.org/obo/FMA_"))?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const bC="https://entity.api.hubmapconsortium.org/entities/",Tq=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),tFe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Wm={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},oF="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class rFe{constructor(e,t="",i="",r){var s,o;if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const c=this.data.descendants||[],u=(this.data.ancestors||[]).find(We=>"Donor"===We.entity_type);this.donor=this.getDonor(u,i);const h=this.getRuiLocation(e,this.donor);h?this.rui_location=h:this.bad=!0,Wm[e.group_uuid]||(Wm[e.group_uuid]=e.group_name);const p=new Date(e.last_modified_timestamp).toLocaleDateString(),g=Wm[e.group_uuid]||e.group_name,m=e.created_by_user_displayname;this["@id"]=bC+e.uuid,this.label=`Registered ${p}, ${m}, ${g}`,this.link=`${i}browse/sample/${e.uuid}`;const D={},O=[];this.sections=O;const W=[];this.datasets=W;for(const We of c.filter(rt=>"Sample"===rt.entity_type)){const rt=this.getSection(We,e,i);D[We.submission_id]=rt,O.push(rt),rt.section_number=null!==(s=rt.section_number)&&void 0!==s?s:O.length}for(const We of c)if("Dataset"===We.entity_type){const rt=this.getDataset(We,t,i,r),wt=(0,fr.get)(We,["ingest_metadata","metadata","tissue_id"]);D[wt]?null===(o=D[wt].datasets)||void 0===o||o.push(rt):W.push(rt)}const $=null!=h?h:{},pe=`${$.x_dimension} x ${$.y_dimension} x ${$.z_dimension} ${$.dimension_units}`;this.section_count=$.slice_count||O.length;const Re=parseFloat(($.slice_thickness||($.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=Re;const Ve=$.dimension_units||"millimeter";this.section_units=Ve,this.description=`${pe}, ${Re} ${Ve}, ${this.section_count} Sections`,O.forEach((We,rt)=>{We.description=`${$.x_dimension} x ${$.y_dimension} x ${Re} ${Ve}, ${Re} ${Ve}, ${We.description}`,We.section_number=rt+1})}getSection(e,t,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":bC+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${Wm[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",i="",r){var s;const o=new Date(e.last_modified_timestamp).toLocaleDateString(),a=Wm[e.group_uuid]||e.group_name,l=e.created_by_user_displayname,c=[...e.data_types,(0,fr.get)(e,["ingest_metadata","metadata","assay_type"],"")],u=c.join("|").toLowerCase();let h,p="assets/icons/ico-unknown.svg";return-1!==u.indexOf("10x")?(h="10x",p="assets/icons/ico-bulk-10x.svg"):-1!==u.indexOf("af")?(h="AF",p="assets/icons/ico-spatial-af.svg"):-1!==u.indexOf("codex")?(h="CODEX",p="assets/icons/ico-spatial-codex.svg"):-1!==u.indexOf("imc")?(h="IMC",p="assets/icons/ico-spatial-imc.svg"):-1!==u.indexOf("lc")&&-1===u.indexOf("af")?(h="LC",p="assets/icons/ico-bulk-lc.svg"):h=-1!==u.indexOf("maldi")?"MALDI":-1!==u.indexOf("pas")?"PAS":"OTHER",p=null!==(s=this.getDatasetThumbnail(e,t,r))&&void 0!==s?s:p,{"@id":bC+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${l}, ${a}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:h,thumbnail:p}}getDatasetThumbnail(e,t,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${t}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=(0,fr.get)(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>Tq.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${t}/${e.uuid}/${s.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const s=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(Tq.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=tFe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,t){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const s=i.match(/age ([0-9]+)/);let o,a;s&&(o=(0,fr.toNumber)(s[1]));for(const p of(0,fr.get)(e,"metadata.organ_donor_data",(0,fr.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?o=(0,fr.toNumber)(p.data_value):"Body mass index"===p.preferred_term&&(a=(0,fr.toNumber)(p.data_value));let l="";r&&o&&(l+=`${r}, Age ${o}`,a&&(l+=`, BMI ${a.toFixed(1)}`));const c=new Date(e.last_modified_timestamp).toLocaleDateString(),u=Wm[e.group_uuid]||e.group_name;return{"@id":bC+e.uuid,"@type":"Donor",label:l,description:`Entered ${c}, ${e.created_by_user_displayname}, ${u}`,link:`${t}browse/donor/${e.uuid}`,age:o,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:u,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){var i;let r,s=e.rui_location;if(s&&("string"==typeof s&&(s=JSON.parse(s)),s.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):s["@id"]&&(r=s),s["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),r){const o=null!==(i=(0,fr.get)(r,["placement","target"]))&&void 0!==i?i:"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,fr.set)(r,["placement","target"],o.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&(0,fr.set)(r,["placement","target"],"Male"===t.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return r}getTissueBlock(){return(0,fr.omit)(Object.assign({},this),["data","bad","donor"])}toJsonLd(){return Object.assign(Object.assign({},this.donor),{samples:[this.getTissueBlock()]})}}const oFe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],aFe={exists:{field:"rui_location"}};function Mq(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:null!=t?t:aFe,_source:{includes:oFe}})}function aF(n,e){return Fi(this,void 0,void 0,function*(){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch(t){return}})}function Dq(n,e,t,i,r="",s=""){return Fi(this,void 0,void 0,function*(){let o;if("static"===e?o=yield aF(n):"search-api"===e&&(o=yield function(n,e,t){return Fi(this,void 0,void 0,function*(){const i=1e4,r=function(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),s=Mq(0,i,t),o=yield aF(n,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const l=[];for(let h=i;h<a;h+=i)l.push(aF(n,{method:"POST",headers:r,body:Mq(h,i,t)}));const c=yield Promise.all(l);if(c.some(h=>!h))return;const u=c.map(h=>h.hits.hits);return Object.assign(Object.assign({},o),{hits:Object.assign(Object.assign({},o.hits),{hits:o.hits.hits.concat(...u)})})})}(n,i,t)),o)return function(n,e="",t="",i,r=!1){const o={},a=(0,fr.get)(n,"hits.hits",[]).map(c=>(0,fr.get)(c,"_source",{})).sort((c,u)=>c.uuid.localeCompare(u.uuid)).map(c=>new rFe(c,e,t,i).toJsonLd());for(const c of a){const u=c["@id"];o[u]?o[u].samples.push(c.samples[0]):o[u]=c}const l=Object.values(o);return r&&(function(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(c=>c["@id"]===o)&&(r[s].deleteMe=!0,t++)}i.samples=r.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(l),console.log(l.map(c=>Object.assign({"@context":oF},c)))),yC(JSON.stringify({"@context":oF,"@graph":l}),oF)}(o,r,s,i);console.warn(`Unable to load ${n} as HuBMAP Data`)})}function iv(n,e,t){const i=new Set;for(const r of e)for(const s of(0,xn.readQuads)(n,r,t,null,null))i.add(s.object.id);return i}const fFe={[ki.spatialEntity.x_dimension.id]:"x",[ki.spatialEntity.y_dimension.id]:"y",[ki.spatialEntity.z_dimension.id]:"z"};function gFe(n,e,t,i){const r=e.getTransformationMatrix(t,i);let s;if(r){const o=r.getTranslation(),a=function(n,e){const t=dp(n,e,"Dimensions",fFe);return[t.x,t.y,t.z]}(n,t).map(c=>c/1e3/2),l=(new Ji).fromRotationMatrix(r,Ji.XYZ).toQuaternion().normalize().calculateW();s=(new q2).fromCenterHalfSizeQuaternion(o,a,l)}return s}function mFe(n,e,t,i){const{x:r,y:s,z:o,radius:a,target:l}=i,c=new Set,u=a/1e3*(a/1e3);for(const h of t){const p=gFe(n,e,h,l);p&&p.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&c.add(h)}return c}function vC(n,e,t){var i,r;const s=new Map,o=new Set;for(const c of e)for(const u of(0,xn.readQuads)(n,c,yi.donor,null,null))o.add(u.object.id),s.has(u.object.id)?null===(i=s.get(u.object.id))||void 0===i||i.push(c):s.set(u.object.id,[c]);const a=t(o),l=new Set;for(const c of a)for(const u of null!==(r=s.get(c))&&void 0!==r?r:[])l.add(u);return l}function lF(n,e,t){var i,r;const s=new Map,o=new Set;for(const c of e)for(const u of(0,xn.readQuads)(n,c,yi.spatialEntity,null,null))o.add(u.object.id),s.has(u.object.id)?null===(i=s.get(u.object.id))||void 0===i||i.push(c):s.set(u.object.id,[c]);const a=t(o),l=new Set;for(const c of a)for(const u of null!==(r=s.get(c))&&void 0!==r?r:[])l.add(u);return l}function rv(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function Iq(n,e,t){const i=new Set;for(const r of t){const s=xn.DataFactory.namedNode(r);n.forSubjects(rv(e,i),ki.spatialEntity.ccf_annotations,s,null)}return i}function Oq(n,e){const t=function(n,e){const t=new Map;for(const i of n)for(const r of(0,xn.readQuads)(e,i,yi.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id).add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const s=t.get(r);for(const o of(0,xn.readQuads)(e,r,ki.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s.forEach(l=>a.add(l))}else i.set(o.object.id,new Set(s))}return i}function OFe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[ki.ontologyNode.label.id]:"label",[t]:"parent",[ki.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of rF(n,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=n.getSubjects(t,e,null).map(s=>s.id),i}function Rq(n,e,t,i){const r={root:e,nodes:{}},s=new Set;for(const a of(0,xn.readQuads)(n,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=OFe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const o=n.getSubjects(i,e,null).map(a=>a.id).sort((a,l)=>r.nodes[a].label.localeCompare(r.nodes[l].label));return r.nodes[e].children=o,Nq(r),r}function Nq(n,e,t=new Set){const i=n.nodes[null!=e?e:n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)Nq(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const Pq=(0,fr.memoize)(function(n){const e=Rq(n,bd.body.id,"body",ki.asctb.part_of.id);return e.nodes[bd.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>""),wC={[yi.label.id]:"label",[yi.description.id]:"description",[yi.link.id]:"link"},PFe=Object.assign(Object.assign({},wC),{[yi.providerName.id]:"providerName"}),FFe=Object.assign(Object.assign({},wC),{[yi.technology.id]:"technology",[yi.thumbnail.id]:"thumbnail"}),kFe=Object.assign(Object.assign({},wC),{[yi.sampleType.id]:"sampleType",[yi.sectionNumber.id]:"sectionNumber",[yi.datasets.id]:"datasets"}),LFe=Object.assign(Object.assign({},wC),{[yi.sampleType.id]:"sampleType",[yi.sectionCount.id]:"sectionCount",[yi.sectionSize.id]:"sectionSize",[yi.sectionUnits.id]:"sectionUnits",[yi.donor.id]:"donor",[yi.spatialEntity.id]:"spatialEntityId",[yi.sections.id]:"sections",[yi.datasets.id]:"datasets"});function BFe(n,e){return dp(n,e,"Donor",PFe)}function Fq(n,e){return dp(n,e,"Dataset",FFe)}function jFe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of rF(n,e,kFe))if("datasets"===i){const s=Fq(n,r);t[i].push(s)}else t[i]=r;return t}class UFe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){this.status="Loading",this.message="Loading database";const e=Date.now();return this.database.connect().then(t=>Fi(this,void 0,void 0,function*(){t?(this.message="Building scene",this.timestamp=(new Date).toISOString(),yield this.database.getScene(),this.message="Building tissue block results",this.timestamp=(new Date).toISOString(),yield this.database.getTissueBlockResults(),this.message="Aggregating results",this.timestamp=(new Date).toISOString(),yield this.database.getAggregateResults(),this.status="Ready",this.message="Database successfully loaded",this.timestamp=(new Date).toISOString()):(this.status="Error",this.message="Unknown error while loading database",this.timestamp=(new Date).toISOString())})).catch(t=>{var i;this.status="Error",this.message=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-e})}}const HFe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class GFe{constructor(e=HFe){this.options=e,this.store=new xn.Store(void 0,{factory:xn.DataFactory}),this.graph=new Cq(this),this.scene=new Aq(this)}connect(e,t=!1){return Fi(this,void 0,void 0,function*(){return e&&(this.options=e),this.initializing||(this.initializing=t?this.cachedConnect():this.doConnect()),yield this.initializing,this.store.size>0})}cachedConnect(){return Fi(this,void 0,void 0,function*(){const e=(new Date).getTime(),t=GNe()(this.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),i=`ccf-database.last_modified.${t}`,r=`ccf-database.${t}`,s=yield wq(i).catch(()=>{});let o;s&&e-new Date(+s).getTime()>36e5?yield function(n,e=Sc()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),mu(t.transaction)))}([r,i]).catch(()=>{}):o=yield wq(r).catch(()=>{}),o?yield this.deserialize(o):(yield this.doConnect(),function(n,e=Sc()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),mu(t.transaction)))}([[r,this.serialize()],[i,""+e]]).catch(()=>{}))})}doConnect(){var e,t;return Fi(this,void 0,void 0,function*(){const i=[],r=null!==(t=null===(e=this.options.dataSources)||void 0===e?void 0:e.concat())&&void 0!==t?t:[],s=this.options.ccfOwlUrl;if(s.startsWith("{"))this.store=(0,xn.deserializeN3Store)(s,xn.DataFactory);else if(s.endsWith(".n3store.json")){const o=yield fetch(s).then(a=>a.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(this.store=(0,xn.deserializeN3Store)(o,xn.DataFactory))}else(null==s?void 0:s.length)>0&&r.push(s);this.options.hubmapDataUrl&&(this.options.hubmapDataUrl.endsWith("jsonld")?r.push(this.options.hubmapDataUrl):i.push(Dq(this.options.hubmapDataUrl,this.options.hubmapDataService,this.options.hubmapQuery,this.options.hubmapToken,this.options.hubmapAssetsUrl,this.options.hubmapPortalUrl).then(o=>{if(o)return this.addDataSources([o])}))),i.push(this.addDataSources(r)),yield Promise.all(i),yield this.synchronize()})}addDataSources(e,t){return Fi(this,void 0,void 0,function*(){const i=null!=t?t:this.store;return yield Promise.all(e.map(r=>Fi(this,void 0,void 0,function*(){"string"==typeof r?(r.startsWith("http")||r.startsWith("assets/"))&&r.includes("jsonld")?(r=yC(r=yield fetch(r).then(s=>s.text())),yield(0,xn.addJsonLdToStore)(r,i)):r.endsWith("n3")?yield(0,xn.addN3ToStore)(r,i):r.endsWith("rdf")||r.endsWith("owl")||r.endsWith("xml")?yield(0,xn.addRdfXmlToStore)(r,i):(r=yC(r),yield(0,xn.addJsonLdToStore)(r,i)):(r=yC(JSON.stringify(r)),yield(0,xn.addJsonLdToStore)(r,i))}))),this})}synchronize(){return Fi(this,void 0,void 0,function*(){return yield new Promise(e=>{setTimeout(e,500)}),this.graph.createGraph(),function(n){var e,t,i;const r=Pq(n),s=new Map;for(const{subject:o,object:a}of(0,xn.readQuads)(n,null,ki.spatialEntity.representation_of,null,null)){const l=new Set([a.id]);let c=null===(e=r.nodes[a.id])||void 0===e?void 0:e.parent;for(;c&&!l.has(c);)l.add(c),c=null===(t=r.nodes[c])||void 0===t?void 0:t.parent;s.set(o.id,[...l].map(u=>xn.DataFactory.namedNode(u)))}for(const{object:o}of(0,xn.readQuads)(n,null,yi.spatialEntity,null,null))for(const{subject:a}of(0,xn.readQuads)(n,null,ki.spatialPlacement.source,o,null))for(const{object:l}of(0,xn.readQuads)(n,a,ki.spatialPlacement.target,null,null))for(const c of null!==(i=s.get(l.id))&&void 0!==i?i:[])n.addQuad(xn.DataFactory.namedNode(o.id),ki.spatialEntity.ccf_annotations,c)}(this.store),this})}serialize(){return(0,xn.serializeN3Store)(this.store)}deserialize(e){return Fi(this,void 0,void 0,function*(){this.store=(0,xn.deserializeN3Store)(e,xn.DataFactory),this.graph=new Cq(this),this.scene=new Aq(this),yield new Promise(t=>{setTimeout(t,10)})})}getIds(e={}){return function(n,e,t){var i,r,s,o,a,l,c;let u=function(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),yi.spatialEntity,null,null),e}(n);if(u.size>0&&(u=function(n,e,t=!0){const i=new Set;if(n.forSubjects(rv(e,i),yi.spatialEntity,null,null),!t){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(n,u)),u.size>0&&("Male"===t.sex||"Female"===t.sex)){const h=t.sex;u=vC(n,u,p=>function(n,e,t){const i=new Set;return n.forSubjects(rv(e,i),yi.sex,yi[t],null),i}(n,p,h))}if(u.size>0&&(null===(i=t.tmc)||void 0===i?void 0:i.length)>0&&(u=vC(n,u,h=>function(n,e,t){const i=new Set;for(const r of t){const s=xn.DataFactory.literal(r);n.forSubjects(rv(e,i),yi.providerName,s,null)}return i}(n,h,t.tmc))),u.size>0&&(null===(r=t.technologies)||void 0===r?void 0:r.length)>0&&(u=function(n,e,t){var i,r;const s=new Map,o=new Set,a=new Set(e);for(const u of e)for(const h of(0,xn.readQuads)(n,u,yi.sections,null,null))a.add(h.object.id);for(const u of a)for(const h of(0,xn.readQuads)(n,u,yi.datasets,null,null))o.add(h.object.id),s.has(h.object.id)?null===(i=s.get(h.object.id))||void 0===i||i.push(u):s.set(h.object.id,[u]);const l=t(o),c=new Set;for(const u of l)for(const h of null!==(r=s.get(u))&&void 0!==r?r:[])c.add(h);return c}(n,u,h=>function(n,e,t){const i=new Set;for(const r of t){const s=xn.DataFactory.literal(r);n.forSubjects(rv(e,i),yi.technology,s,null)}return i}(n,h,t.technologies))),u.size>0&&(null===(s=t.spatialSearches)||void 0===s?void 0:s.length)>0&&(u=lF(n,u,h=>function(n,e,t,i){const r=new Set;for(const s of i)mFe(n,e,t,s).forEach(a=>r.add(a));return r}(n,e,h,t.spatialSearches))),u.size>0&&(null===(o=t.ontologyTerms)||void 0===o?void 0:o.length)>0){const h=t.ontologyTerms;-1===h.indexOf(bd.body.id)&&(u=lF(n,u,p=>Iq(n,p,h)))}if(u.size>0&&(null===(a=t.cellTypeTerms)||void 0===a?void 0:a.length)>0){const h=t.cellTypeTerms;-1===h.indexOf(bd.cell.id)&&(u=lF(n,u,p=>function(n,e,t){const i=new Set;for(const r of t)n.forObjects(s=>{i.add(s.id)},r,ki.asctb.located_in,null),r===bd.cell.id&&i.add(bd.body.id);return Iq(n,e,[...i])}(n,p,h)))}if(u.size>0&&2===(null===(l=t.ageRange)||void 0===l?void 0:l.length)&&(0,fr.isFinite)(t.ageRange[0])&&(0,fr.isFinite)(t.ageRange[1])){const h=Math.max(...t.ageRange),p=Math.min(...t.ageRange);1===p&&110===h||(u=vC(n,u,g=>function(n,e,t,i){const r=new Set;for(const s of e)for(const o of(0,xn.readQuads)(n,s,yi.age,null,null)){const a=(0,Kb.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,g,p,h)))}if(u.size>0&&2===(null===(c=t.bmiRange)||void 0===c?void 0:c.length)&&(0,fr.isFinite)(t.bmiRange[0])&&(0,fr.isFinite)(t.bmiRange[1])){const h=Math.max(...t.bmiRange),p=Math.min(...t.bmiRange);13===p&&83===h||(u=vC(n,u,g=>function(n,e,t,i){const r=new Set;for(const s of e)for(const o of(0,xn.readQuads)(n,s,yi.bmi,null,null)){const a=(0,Kb.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,g,p,h)))}return u}(this.store,this.graph,e)}get(e){return this.store.getQuads(xn.DataFactory.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>function(n,e){const t=n.getObjects(xn.DataFactory.namedNode(e),yi.spatialEntity,null);if(t.length>0)return hp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){return Fi(this,void 0,void 0,function*(){return this.status||(this.status=new UFe(this)),this.status.toJson()})}getDatasetTechnologyNames(){return Fi(this,void 0,void 0,function*(){return function(n){const e=new Set;for(const t of(0,xn.readQuads)(n,null,yi.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(this.store)})}getProviderNames(){return Fi(this,void 0,void 0,function*(){return function(n){const e=new Set;for(const t of(0,xn.readQuads)(n,null,yi.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(this.store)})}getTissueBlockResults(e){return Fi(this,void 0,void 0,function*(){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>function(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of rF(n,e,LFe))if("sections"===i){const s=jFe(n,r);t[i].push(s)}else if("datasets"===i){const s=Fq(n,r);t[i].push(s)}else t[i]="donor"===i?BFe(n,r):r;return t}(this.store,t))})}getAggregateResults(e){return Fi(this,void 0,void 0,function*(){return function(n,e){const t=iv(e,n,yi.donor.id),i=iv(e,t,yi.providerUUID.id),r=new Set;for(const l of n)for(const c of(0,xn.readQuads)(e,l,yi.spatialEntity,null,null))r.add(c.subject.id);const s=iv(e,r,yi.sections.id),o=new Set([...iv(e,r,yi.datasets.id),...iv(e,s,yi.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([l,c])=>({label:l,count:c}))}(this.getIds(e),this.store)})}getOntologyTermOccurences(e){return Fi(this,void 0,void 0,function*(){return function(n,e){const t={};return Oq(n,e).forEach((r,s)=>{t[s]=r.size}),t}(this.getIds(e),this.store)})}getCellTypeTermOccurences(e){return Fi(this,void 0,void 0,function*(){return function(n,e){var t,i;const r=Oq(n,e),s=new Map;for(const a of r.keys()){const l=r.get(a);for(const c of(0,xn.readQuads)(e,null,ki.asctb.located_in,a,null)){const u=c.subject.id;if(s.has(u)){const h=s.get(u);l.forEach(p=>h.add(p))}else s.set(u,new Set(l))}}const o={};return s.forEach((a,l)=>{o[l]=a.size}),o[bd.cell.id]=null!==(i=null===(t=r.get(bd.body.id))||void 0===t?void 0:t.size)&&void 0!==i?i:0,o}(this.getIds(e),this.store)})}getOntologyTreeModel(){return Fi(this,void 0,void 0,function*(){return Pq(this.store)})}getCellTypeTreeModel(){return Fi(this,void 0,void 0,function*(){return function(n){return Rq(n,bd.cell.id,"cell",ki.asctb.ct_is_a.id)}(this.store)})}getReferenceOrgans(){return Fi(this,void 0,void 0,function*(){return this.scene.getReferenceOrgans()})}getScene(e){return Fi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getScene(e)})}getReferenceOrganScene(e,t){return Fi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getReferenceOrganScene(e,t)})}getSpatialPlacement(e,t){return Fi(this,void 0,void 0,function*(){return this.graph.getSpatialPlacement(e,t)})}}function YFe(n,e){return n===e}let KFe=(()=>{class n{constructor(t,i){this.locator=t,this.globalConfig=i,this.subscriptions=new C,this.dataSource=i.getOption("data").pipe(ye(r=>Object.assign(Object.assign({},vq),{dataSources:r})),Qi(r=>Object.keys(r).length>0),ye(r=>r),rd(YFe),Ir(r=>function(n,e){return new P(t=>{let i,r;try{i=n()}catch(a){return void t.error(a)}try{r=e(i)}catch(a){return void t.error(a)}const o=(r?qe(r):Yc).subscribe(t);return()=>{o.unsubscribe(),i&&i.unsubscribe()}})}(()=>this.createDataSource(),s=>this.connectDataSource(s.source,r))),$a(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(t){return this.dataSource.pipe(Ir(i=>i.getTissueBlockResults(t)),Wi(1))}getAggregateResults(t){return this.dataSource.pipe(Ir(i=>i.getAggregateResults(t)),Wi(1))}getOntologyTermOccurences(t){return this.dataSource.pipe(Ir(i=>i.getOntologyTermOccurences(t)),Wi(1))}getCellTypeTermOccurences(t){return this.dataSource.pipe(Ir(i=>i.getCellTypeTermOccurences(t)),Wi(1))}getOntologyTreeModel(){return this.dataSource.pipe(Ir(t=>t.getOntologyTreeModel()),Wi(1))}getCellTypeTreeModel(){return this.dataSource.pipe(Ir(t=>t.getCellTypeTreeModel()),Wi(1))}getReferenceOrgans(){return this.dataSource.pipe(Ir(t=>t.getReferenceOrgans()),Wi(1))}getScene(t){return this.dataSource.pipe(Ir(i=>i.getScene(t)),Wi(1))}getOrganScene(t,i){return this.dataSource.pipe(Ir(r=>r.getReferenceOrganScene(t,i)),Wi(1))}createDataSource(){return{source:new GFe,unsubscribe:()=>{}}}connectDataSource(t,i){return Fi(this,void 0,void 0,function*(){const r=(new Date).getTime();return yield t.connect(i,!1),m0.production||(console.info(`Loaded CCF database in ${((new Date).getTime()-r)/1e3}s`),console.log(t)),t})}}return n.\u0275fac=function(t){return new(t||n)(ke(Cf),ke(Yb))},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XFe=(()=>{class n{constructor(t,i){this.configState=t,this.source=i,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(ye(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(ye(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=Yo([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(Ir(([r,s,o])=>this.chooseScene(r,s))),this.organs$=this.configState.getOption("data").pipe(ye(r=>this.selectOrgans(r)),$a(1)),this.filteredOrgans$=Yo([this.organs$,this.referenceOrgans$]).pipe(ye(([r,s])=>this.getNeededReferenceOrgans(s,r)),$a(1)),this.filteredScene$=Yo([this.scene$,this.organs$,this.referenceOrgans$]).pipe(ye(([r,s,o])=>this.filterSceneNodes(r,s,o)),function(n,e){const t=n.pipe(ao(""));return i=>Yo([i,t]).pipe(ye(([r,s])=>r.map(o=>function(n,e,t){return n.entityId!==e?n:Object.assign(Object.assign({},n),{color:t})}(o,s,e))))}(this.highlightID$,BNe),function(n){const e=n.pipe(ao(""));return t=>Yo([t,e]).pipe(ye(([i,r])=>i.map(s=>function(n,e){return n.entityId!==e?n:Object.assign(Object.assign({},n),{zoomToOnLoad:!0})}(s,r))))}(this.zoomToID$),$a(1))}chooseScene(t,i){var r;const s=null!==(r=null==t?void 0:t.map(a=>{const l=a[QW];return null==l?void 0:l.placement.target}))&&void 0!==r?r:[];if(new Set(s).size>1)return this.source.getScene();if(i){const a=i.find(l=>l["@id"]===s[0]);if(a)return this.source.getOrganScene(a.representation_of,{ontologyTerms:[a.reference_organ],sex:a.sex})}return fn([])}selectOrgans(t){const r=(null!=t?t:[]).map(s=>s[QW].placement.target);return new Set(r)}filterSceneNodes(t,i,r){const s=this.getNeededReferenceOrgans(r,i),o=this.getNeededSkins(s),a=new Set([...i,...o]);return t.filter(c=>!c.reference_organ||a.has(c.reference_organ))}getNeededReferenceOrgans(t,i){return t.filter(r=>{var s;return i.has(null!==(s=r.reference_organ)&&void 0!==s?s:"")})}getNeededSkins(t){if(1===t.length)return[];const i=new Set;return t.forEach(r=>{"Female"===r.sex?i.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===r.sex&&i.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...i]}}return n.\u0275fac=function(t){return new(t||n)(ke(Yb),ke(KFe))},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QFe=["bodyUI"];let ZFe=(()=>{class n{constructor(t,i,r){this.configState=t,this.sceneSource=i,this.cdr=r,this.onMouseEnter=new sn,this.onMouseLeave=new sn,this.onClick=new sn,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(Yr(s=>this.reset()))}reset(){var t,i;return Fi(this,void 0,void 0,function*(){const{bodyUI:r}=this;yield new Promise(a=>setTimeout(a,200));const s=yield this.organs$.pipe(Wi(1)).toPromise(),o=null!==(i=!!(null===(t=r.scene)||void 0===t?void 0:t.find(a=>a.zoomToOnLoad)))&&void 0!==i&&i;if(r.rotation=0,r.rotationX=0,!o)if(1===s.length){const{x_dimension:a,y_dimension:l,z_dimension:c}=s[0];r.bounds={x:1.25*a/1e3,y:1.25*l/1e3,z:1.25*c/1e3},r.target=[a/1e3/2,l/1e3/2,c/1e3/2]}else r.bounds={x:2.2,y:2,z:.4},r.target=[0,0,0];this.cdr.detectChanges()})}}return n.\u0275fac=function(t){return new(t||n)(Oe(Yb),Oe(XFe),Oe(Dr))},n.\u0275cmp=ln({type:n,selectors:[["ccf-root"]],viewQuery:function(t,i){if(1&t&&ss(QFe,7),2&t){let r;ii(r=ri())&&(i.bodyUI=r.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:4,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(t,i){1&t&&(Pt(0,"ccf-body-ui",0,1),Un("nodeClick",function(s){return i.onClick.emit(s)})("nodeHoverStart",function(s){return i.onMouseEnter.emit(s)})("nodeHoverStop",function(s){return i.onMouseLeave.emit(s)}),xl(2,"async"),Ft()),2&t&&rn("scene",Vu(2,2,i.scene$))("interactive",!0)},directives:[nNe],pipes:[h0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),n})();function JFe(n,e){if(1&n){const t=Vt();Pt(0,"ccf-root",1),Un("onMouseEnter",function(r){return Cr(t),ci().onMouseEnter.emit(r)})("onMouseLeave",function(r){return Cr(t),ci().onMouseLeave.emit(r)})("onClick",function(r){return Cr(t),ci().onClick.emit(r)}),Ft()}}function eke(n){return n.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let tke=(()=>{class n extends Eie{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:Object.assign(Object.assign({},m0.dbOptions),globalThis.dbOptions),parse:{data:eke}}),this.onMouseEnter=new sn,this.onMouseLeave=new sn,this.onClick=new sn}}return n.\u0275fac=function(t){return new(t||n)(Oe(Yb),Oe(Dr))},n.\u0275cmp=ln({type:n,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[An],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(t,i){1&t&&Di(0,JFe,1,0,"ccf-root",0),2&t&&rn("ngIf",i.initialized)},directives:[lc,ZFe],encapsulation:2,changeDetection:0}),n})(),nke=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[ps,Za,p9,...t]}}}return n.\u0275fac=function(t){return new(t||n)(ke(ps,2),ke(Za,2))},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({}),n})();const CC=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class ske{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=$f(this.action),i=function(n){return CC(n.getHours(),2)+":"+CC(n.getMinutes(),2)+":"+CC(n.getSeconds(),2)+"."+CC(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class oke{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch(i){console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch(e){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const kq=new Ht("NGXS_LOGGER_PLUGIN_OPTIONS");let ake=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new oke(this._options),this._store=this._store||this._injector.get(cu);const s=new ske(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(Yr(o=>{s.completed(o)}),bc(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(ke(kq),ke(Wn))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})();const Lq=new Ht("LOGGER_USER_OPTIONS");function lke(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let cke=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:g6,useClass:ake,multi:!0},{provide:Lq,useValue:t},{provide:kq,useFactory:lke,deps:[Lq]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({}),n})();const uke=[Yb];let dke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({imports:[[nke.forRoot(),Wo.forRoot(uke,{developmentMode:!m0.production}),cke.forRoot({disabled:m0.production})]]}),n})(),hke=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function(n,e){const t=function(n,e){return e.get(wl).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new mie(n,e.injector),r=function(n){const e={};return n.forEach(({propName:t,templateName:i})=>{e[function(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=t}),e}(t);class s extends yie{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:l})=>{if(!this.hasOwnProperty(l))return;const c=this[l];delete this[l],a.setInputValue(l,c)})}return this._ngElementStrategy}attributeChangedCallback(a,l,c,u){this.ngElementStrategy.setInputValue(r[a],c)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=function(n,e,t){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(r),t.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(tke,{injector:this.injector});customElements.define("ccf-body-ui-wc",t)}}return n.\u0275fac=function(t){return new(t||n)(ke(Wn))},n.\u0275mod=on({type:n}),n.\u0275inj=Ct({providers:[],imports:[[qD,dke,iNe]]}),n})();m0.production&&function(){if(uB)throw new Error("Cannot enable prod mode after platform setup.");cB=!1}(),jne().bootstrapModule(hke).catch(n=>console.error(n))},52:jt=>{function Ye(lt,ee,Et,je,Q,we,fe){try{var K=lt[we](fe),V=K.value}catch(F){return void Et(F)}K.done?ee(V):Promise.resolve(V).then(je,Q)}jt.exports=function(lt){return function(){var ee=this,Et=arguments;return new Promise(function(je,Q){var we=lt.apply(ee,Et);function fe(V){Ye(we,je,Q,fe,K,"next",V)}function K(V){Ye(we,je,Q,fe,K,"throw",V)}fe(void 0)})}},jt.exports.default=jt.exports,jt.exports.__esModule=!0},948:jt=>{jt.exports=function(Je){return Je&&Je.__esModule?Je:{default:Je}},jt.exports.default=jt.exports,jt.exports.__esModule=!0},321:jt=>{function Ye(Je){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(jt.exports=Ye=function(ee){return typeof ee},jt.exports.default=jt.exports,jt.exports.__esModule=!0):(jt.exports=Ye=function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},jt.exports.default=jt.exports,jt.exports.__esModule=!0),Ye(Je)}jt.exports=Ye,jt.exports.default=jt.exports,jt.exports.__esModule=!0},380:jt=>{function Ye(Je){return Promise.resolve().then(()=>{var lt=new Error("Cannot find module '"+Je+"'");throw lt.code="MODULE_NOT_FOUND",lt})}Ye.keys=()=>[],Ye.resolve=Ye,Ye.id=380,jt.exports=Ye},521:()=>{},125:()=>{},307:()=>{}},jt=>{jt(jt.s=303)}]);