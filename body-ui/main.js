(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[179],{822:te=>{"use strict";te.exports=g,te.exports.default=g;var Z=1e20;function g(P,_,y,T,F,N){this.fontSize=P||24,this.buffer=void 0===_?3:_,this.cutoff=T||.25,this.fontFamily=F||"sans-serif",this.fontWeight=N||"normal",this.radius=y||8;var U=this.size=this.fontSize+2*this.buffer,se=U+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=U,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(se*se),this.gridInner=new Float64Array(se*se),this.f=new Float64Array(se),this.z=new Float64Array(se+1),this.v=new Uint16Array(se),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(U/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function k(P,_,y,T,F,N){for(var U=0;U<_;U++)A(P,U,_,y,T,F,N);for(var se=0;se<y;se++)A(P,se*_,1,_,T,F,N)}function A(P,_,y,T,F,N,U){var se,S,$,ce;for(N[0]=0,U[0]=-Z,U[1]=Z,se=0;se<T;se++)F[se]=P[_+se*y];for(se=1,S=0,$=0;se<T;se++){do{$=(F[se]-F[ce=N[S]]+se*se-ce*ce)/(se-ce)/2}while($<=U[S]&&--S>-1);N[++S]=se,U[S]=$,U[S+1]=Z}for(se=0,S=0;se<T;se++){for(;U[S+1]<se;)S++;P[_+se*y]=F[ce=N[S]]+(se-ce)*(se-ce)}}g.prototype._draw=function(P,_){var N,U,se,S,$,ce,X,ie,ee,y=this.ctx.measureText(P),T=y.width,F=2*this.buffer;_&&this.useMetrics?($=Math.floor(y.actualBoundingBoxAscent),ie=this.buffer+Math.ceil(y.actualBoundingBoxAscent),ce=this.buffer,X=this.buffer,N=(U=Math.min(this.size,Math.ceil(y.actualBoundingBoxRight-y.actualBoundingBoxLeft)))+F,se=(S=Math.min(this.size-ce,Math.ceil(y.actualBoundingBoxAscent+y.actualBoundingBoxDescent)))+F,this.ctx.textBaseline="alphabetic"):(N=U=this.size,se=S=this.size,$=19*this.fontSize/24,ce=X=0,ie=this.middle,this.ctx.textBaseline="middle"),U&&S&&(this.ctx.clearRect(X,ce,U,S),this.ctx.fillText(P,this.buffer,ie),ee=this.ctx.getImageData(X,ce,U,S));var K=new Uint8ClampedArray(N*se);return function E(P,_,y,T,F,N,U){N.fill(Z,0,_*y),U.fill(0,0,_*y);for(var se=(_-T)/2,S=0;S<F;S++)for(var $=0;$<T;$++){var ce=(S+se)*_+$+se,X=P.data[4*(S*T+$)+3]/255;if(1===X)N[ce]=0,U[ce]=Z;else if(0===X)N[ce]=Z,U[ce]=0;else{var ie=Math.max(0,.5-X),ee=Math.max(0,X-.5);N[ce]=ie*ie,U[ce]=ee*ee}}}(ee,N,se,U,S,this.gridOuter,this.gridInner),k(this.gridOuter,N,se,this.f,this.v,this.z),k(this.gridInner,N,se,this.f,this.v,this.z),function b(P,_,y,T,F,N,U){for(var se=0;se<_*y;se++){var S=Math.sqrt(T[se])-Math.sqrt(F[se]);P[se]=Math.round(255-255*(S/N+U))}}(K,N,se,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:K,metrics:{width:U,height:S,sdfWidth:N,sdfHeight:se,top:$,left:0,advance:T}}},g.prototype.draw=function(P){return this._draw(P,!1).data},g.prototype.drawWithMetrics=function(P){return this._draw(P,!0)}},7467:(te,Z,g)=>{"use strict";var E={};g.r(E),g.d(E,{decode:()=>twe,name:()=>ewe});var b={};g.r(b),g.d(b,{name:()=>awe,preprocess:()=>cwe});var k={};g.r(k),g.d(k,{name:()=>lwe,preprocess:()=>dwe});var A={};g.r(A),g.d(A,{decode:()=>eEe,encode:()=>tEe,name:()=>Zwe,preprocess:()=>Qwe});var P={};g.r(P),g.d(P,{decode:()=>oEe,encode:()=>aEe,name:()=>sEe});var _={};g.r(_),g.d(_,{decode:()=>lEe,encode:()=>dEe,name:()=>cEe});var y={};g.r(y),g.d(y,{decode:()=>hEe,encode:()=>fEe,name:()=>uEe});var T={};function F(t){return"function"==typeof t}function N(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}g.r(T),g.d(T,{delMany:()=>J3e,get:()=>K3e,setMany:()=>q3e});const U=N(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function se(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class S{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(F(i))try{i()}catch(s){e=s instanceof U?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{X(s)}catch(o){e=e??[],o instanceof U?e=[...e,...o.errors]:e.push(o)}}if(e)throw new U(e)}}add(e){var n;if(e&&e!==this)if(this.closed)X(e);else{if(e instanceof S){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&se(n,e)}remove(e){const{_finalizers:n}=this;n&&se(n,e),e instanceof S&&e._removeParent(this)}}S.EMPTY=(()=>{const t=new S;return t.closed=!0,t})();const $=S.EMPTY;function ce(t){return t instanceof S||t&&"closed"in t&&F(t.remove)&&F(t.add)&&F(t.unsubscribe)}function X(t){F(t)?t():t.unsubscribe()}const ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ee={setTimeout(t,e,...n){const{delegate:i}=ee;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=ee;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function K(t){ee.setTimeout(()=>{const{onUnhandledError:e}=ie;if(!e)throw t;e(t)})}function V(){}const x=ue("C",void 0,void 0);function ue(t,e,n){return{kind:t,value:e,error:n}}let W=null;function Ce(t){if(ie.useDeprecatedSynchronousErrorHandling){const e=!W;if(e&&(W={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=W;if(W=null,n)throw i}}else t()}class xe extends S{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ce(e)&&e.add(this)):this.destination=Ve}static create(e,n,i){return new Xe(e,n,i)}next(e){this.isStopped?ke(function I(t){return ue("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ke(function B(t){return ue("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ke(x,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ie=Function.prototype.bind;function Re(t,e){return Ie.call(t,e)}class et{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Se(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Se(i)}else Se(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Se(n)}}}class Xe extends xe{constructor(e,n,i){let r;if(super(),F(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&ie.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Re(e.next,s),error:e.error&&Re(e.error,s),complete:e.complete&&Re(e.complete,s)}):r=e}this.destination=new et(r)}}function Se(t){ie.useDeprecatedSynchronousErrorHandling?function le(t){ie.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=t)}(t):K(t)}function ke(t,e){const{onStoppedNotification:n}=ie;n&&ee.setTimeout(()=>n(t,e))}const Ve={closed:!0,next:V,error:function Ne(t){throw t},complete:V},me="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ae(t){return t}function Ke(...t){return ot(t)}function ot(t){return 0===t.length?Ae:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function O(t){return t&&t instanceof xe||function G(t){return t&&F(t.next)&&F(t.error)&&F(t.complete)}(t)&&ce(t)}(n)?n:new Xe(n,i,r);return Ce(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=_e(i))((r,s)=>{const o=new Xe({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[me](){return this}pipe(...n){return ot(n)(this)}toPromise(n){return new(n=_e(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function _e(t){var e;return null!==(e=t??ie.Promise)&&void 0!==e?e:Promise}const oe=N(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let z=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Le(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new oe}next(n){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?$:(this.currentObservers=null,s.push(n),new S(()=>{this.currentObservers=null,se(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new Le(e,n),t})();class Le extends z{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:$}}class Ye extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function he(t){return F(t?.lift)}function Q(t){return e=>{if(he(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function H(t,e,n,i,r){return new D(t,e,n,i,r)}class D extends xe{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function M(t,e){return Q((n,i)=>{let r=0;n.subscribe(H(i,s=>{i.next(t.call(e,s,r++))}))})}function ct(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function Dt(t,e){return function(n,i){e(n,i,t)}}function J(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function gn(t){return this instanceof gn?(this.v=t,this):new gn(t)}function Ps(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function st(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Ba=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ql(t){return F(t?.then)}function ed(t){return F(t[me])}function Jc(t){return Symbol.asyncIterator&&F(t?.[Symbol.asyncIterator])}function gu(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _u=function td(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Zc(t){return F(t?.[_u])}function nd(t){return function As(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){i[p]&&(r[p]=function(m){return new Promise(function(v,R){s.push([p,m,v,R])>1||a(p,m)})})}function a(p,m){try{!function c(p){p.value instanceof gn?Promise.resolve(p.value.v).then(l,d):h(s[0][2],p)}(i[p](m))}catch(v){h(s[0][3],v)}}function l(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield gn(n.read());if(r)return yield gn(void 0);yield yield gn(i)}}finally{n.releaseLock()}})}function Qc(t){return F(t?.getReader)}function Sn(t){if(t instanceof We)return t;if(null!=t){if(ed(t))return function el(t){return new We(e=>{const n=t[me]();if(F(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Ba(t))return function Yo(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ql(t))return function ja(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,K)})}(t);if(Jc(t))return Va(t);if(Zc(t))return function Ua(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Qc(t))return function Ls(t){return Va(nd(t))}(t)}throw gu(t)}function Va(t){return new We(e=>{(function be(t,e){var n,i,r,s;return function C(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(d){try{l(i.next(d))}catch(h){o(h)}}function c(d){try{l(i.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(d.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Ps(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Te(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function j(t,e,n=1/0){return F(e)?j((i,r)=>M((s,o)=>e(i,s,r,o))(Sn(t(i,r))),n):("number"==typeof e&&(n=e),Q((i,r)=>function we(t,e,n,i,r,s,o,a){const c=[];let l=0,d=0,h=!1;const p=()=>{h&&!c.length&&!l&&e.complete()},m=R=>l<i?v(R):c.push(R),v=R=>{s&&e.next(R),l++;let L=!1;Sn(n(R,d++)).subscribe(H(e,Y=>{r?.(Y),s?m(Y):e.next(Y)},()=>{L=!0},void 0,()=>{if(L)try{for(l--;c.length&&l<i;){const Y=c.shift();o?Te(e,o,()=>v(Y)):v(Y)}p()}catch(Y){e.error(Y)}}))};return t.subscribe(H(e,m,()=>{h=!0,p()})),()=>{a?.()}}(i,r,t,n)))}function re(t=1/0){return j(Ae,t)}const fe=new We(t=>t.complete());function rt(t){return t&&F(t.schedule)}function xt(t){return t[t.length-1]}function Tt(t){return F(xt(t))?t.pop():void 0}function Ft(t){return rt(xt(t))?t.pop():void 0}function bn(t,e=0){return Q((n,i)=>{n.subscribe(H(i,r=>Te(i,t,()=>i.next(r),e),()=>Te(i,t,()=>i.complete(),e),r=>Te(i,t,()=>i.error(r),e)))})}function fs(t,e=0){return Q((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function Nr(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{Te(n,e,()=>{const i=t[Symbol.asyncIterator]();Te(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Gi(t,e){return e?function nl(t,e){if(null!=t){if(ed(t))return function Pr(t,e){return Sn(t).pipe(fs(e),bn(e))}(t,e);if(Ba(t))return function tl(t,e){return new We(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(Ql(t))return function Fs(t,e){return Sn(t).pipe(fs(e),bn(e))}(t,e);if(Jc(t))return Nr(t,e);if(Zc(t))return function ha(t,e){return new We(n=>{let i;return Te(n,e,()=>{i=t[_u](),Te(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>F(i?.return)&&i.return()})}(t,e);if(Qc(t))return function Bs(t,e){return Nr(nd(t),e)}(t,e)}throw gu(t)}(t,e):Sn(t)}function ir(...t){const e=Ft(t),n=function rn(t,e){return"number"==typeof xt(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Sn(i[0]):re(n)(Gi(i,e)):fe}function Yt(...t){return Gi(t,Ft(t))}function no(t={}){const{connector:e=(()=>new z),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,d=h=!1},v=()=>{const R=o;m(),R?.unsubscribe()};return Q((R,L)=>{l++,!h&&!d&&p();const Y=c=c??e();L.add(()=>{l--,0===l&&!h&&!d&&(a=id(v,r))}),Y.subscribe(L),!o&&l>0&&(o=new Xe({next:q=>Y.next(q),error:q=>{h=!0,p(),a=id(m,n,q),Y.error(q)},complete:()=>{d=!0,p(),a=id(m,i),Y.complete()}}),Sn(R).subscribe(o))})(s)}}function id(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Xe({next:()=>{i.unsubscribe(),t()}});return Sn(e(...n)).subscribe(i)}function De(t,e){return Q((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(H(i,c=>{r?.unsubscribe();let l=0;const d=s++;Sn(t(c,d)).subscribe(r=H(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Be(t,e=Ae){return t=t??tt,Q((n,i)=>{let r,s=!0;n.subscribe(H(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function tt(t,e){return t===e}function dt(t){for(let e in t)if(t[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function kt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Vt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Kn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Sr=dt({__forward_ref__:dt});function Cn(t){return t.__forward_ref__=Cn,t.toString=function(){return Vt(this())},t}function ln(t){return io(t)?t():t}function io(t){return"function"==typeof t&&t.hasOwnProperty(Sr)&&t.__forward_ref__===Cn}function P_(t){return t&&!!t.\u0275providers}const nx="https://g.co/ng/security#xss";class Rt extends Error{constructor(e,n){super(function Mp(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Bn(t){return"string"==typeof t?t:null==t?"":String(t)}function N_(t,e){throw new Rt(-201,!1)}function Cs(t,e){null==t&&function Dn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function St(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Lh(t){return ro(t,Ip)||ro(t,pc)}function ro(t,e){return t.hasOwnProperty(e)?t[e]:null}function js(t){return t&&(t.hasOwnProperty(Dp)||t.hasOwnProperty(Rp))?t[Dp]:null}const Ip=dt({\u0275prov:dt}),Dp=dt({\u0275inj:dt}),pc=dt({ngInjectableDef:dt}),Rp=dt({ngInjectorDef:dt});var ei=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ei||{});let Wi;function Ts(t){const e=Wi;return Wi=t,e}function ox(t,e,n){const i=Lh(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&ei.Optional?null:void 0!==e?e:void N_(Vt(t))}const Si=globalThis,od={},F_="__NG_DI_FLAG__",Fh="ngTempTokenPath",B_=/\n/gm,j_="__source";let ad;function il(t){const e=ad;return ad=t,e}function DC(t,e=ei.Default){if(void 0===ad)throw new Rt(-203,!1);return null===ad?ox(t,void 0,e):ad.get(t,e&ei.Optional?null:void 0,e)}function nt(t,e=ei.Default){return(function mc(){return Wi}()||DC)(ln(t),e)}function Ut(t,e=ei.Default){return nt(t,Pp(e))}function Pp(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function U_(t){const e=[];for(let n=0;n<t.length;n++){const i=ln(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Rt(900,!1);let r,s=ei.Default;for(let o=0;o<i.length;o++){const a=i[o],c=fx(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(nt(r,s))}else e.push(nt(i))}return e}function cd(t,e){return t[F_]=e,t.prototype[F_]=e,t}function fx(t){return t[F_]}function gc(t){return{toString:t}.toString()}var Lp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Lp||{}),pa=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pa||{});const Us={},qn=[],jh=dt({\u0275cmp:dt}),V_=dt({\u0275dir:dt}),z_=dt({\u0275pipe:dt}),px=dt({\u0275mod:dt}),_c=dt({\u0275fac:dt}),Uh=dt({__NG_ELEMENT_ID__:dt}),Vh=dt({__NG_ENV_ID__:dt});function lt(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function wt(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Qt(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function gt(t){return 3===t||4===t||6===t}function Qt(t){return 64===t.charCodeAt(0)}function On(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Ei(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Ei(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}const Lr="ng-template";function Fi(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if("string"==typeof s&&r){const o=t[i++];if(n&&"class"===s&&-1!==lt(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<t.length&&"string"==typeof(s=t[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Fp(t){return 4===t.type&&t.value!==Lr}function RC(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function Ko(t,e,n){let i=4;const r=t.attrs||[],s=function jp(t){for(let e=0;e<t.length;e++)if(gt(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!RC(t,c,n)||""===c&&1===e.length){if(so(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!Fi(t.attrs,l,n)){if(so(i))return!1;o=!0}continue}const h=OC(8&i?"class":c,r,Fp(t),n);if(-1===h){if(so(i))return!1;o=!0;continue}if(""!==l){let p;p=h>s?"":r[h+1].toLowerCase();const m=8&i?p:null;if(m&&-1!==lt(m,l,0)||2&i&&l!==p){if(so(i))return!1;o=!0}}}}else{if(!o&&!so(i)&&!so(c))return!1;if(o&&so(c))continue;o=!1,i=c|1&i}}return so(i)||o}function so(t){return 0==(1&t)}function OC(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Mi(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function ld(t,e,n=!1){for(let i=0;i<e.length;i++)if(Ko(t,e[i],n))return!0;return!1}function kC(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function G_(t,e){return t?":not("+e.trim()+")":e}function Up(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!so(o)&&(e+=G_(s,r),r=""),i=o,s=s||!so(i);n++}return""!==r&&(e+=G_(s,r)),e}function $n(t){return gc(()=>{const e=mx(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Lp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pa.Emulated,styles:t.styles||qn,_:null,schemas:t.schemas||null,tView:null,id:""};gx(n);const i=t.dependencies;return n.directiveDefs=dd(i,!1),n.pipeDefs=dd(i,!0),n.id=function W_(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function sl(t){return mi(t)||Cr(t)}function zp(t){return null!==t}function dn(t){return gc(()=>({type:t.type,bootstrap:t.bootstrap||qn,declarations:t.declarations||qn,imports:t.imports||qn,exports:t.exports||qn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function H_(t,e){if(null==t)return Us;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}function jt(t){return gc(()=>{const e=mx(t);return gx(e),e})}function Wr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function mi(t){return t[jh]||null}function Cr(t){return t[V_]||null}function Tr(t){return t[z_]||null}function mx(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Us,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||qn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:H_(t.inputs,e),outputs:H_(t.outputs)}}function gx(t){t.features?.forEach(e=>e(t))}function dd(t,e){if(!t)return null;const n=e?Tr:sl;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(zp)}const Mr=0,Kt=1,jn=2,sr=3,Ii=4,Fr=5,Ms=6,yu=7,yr=8,ol=9,al=10,Rn=11,ud=12,hd=13,za=14,Ki=15,cl=16,ma=17,Ga=18,zh=19,_x=20,ll=21,yc=22,fd=23,dl=24,ci=25,ul=1,Gh=2,Ir=7,vu=9,ms=11;function oo(t){return Array.isArray(t)&&"object"==typeof t[ul]}function ao(t){return Array.isArray(t)&&!0===t[ul]}function $_(t){return 0!=(4&t.flags)}function pd(t){return t.componentOffset>-1}function Wp(t){return 1==(1&t.flags)}function $r(t){return!!t.template}function X_(t){return 0!=(512&t[jn])}function md(t,e){return t.hasOwnProperty(_c)?t[_c]:null}let VC=Si.WeakRef??class xx{constructor(e){this.ref=e}deref(){return this.ref}},gd=0,Dr=null,Yp=!1;function Xr(t){const e=Dr;return Dr=t,e}class Y_{constructor(){this.id=gd++,this.ref=function xc(t){return new VC(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Yp;Yp=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{Yp=e}}producerAccessed(){if(Yp)throw new Error("");if(null===Dr)return;let e=Dr.producers.get(this.id);void 0===e?(e={consumerNode:Dr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Dr.trackingVersion},Dr.producers.set(this.id,e),this.consumers.set(Dr.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Dr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Dr?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let K_=null;function hl(t){const e=Xr(null);try{return t()}finally{Xr(e)}}const Z_=()=>{};class Vs extends Y_{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=Z_,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Xr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Z_,this.watch(this.registerOnCleanup)}finally{Xr(e)}}cleanup(){this.cleanupFn()}}class Qp{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Br(){return Ax}function Ax(t){return t.type.prototype.ngOnChanges&&(t.setInput=Q_),zC}function zC(){const t=Au(this),e=t?.current;if(e){const n=t.previous;if(n===Us)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Q_(t,e,n,i){const r=this.declaredInputs[n],s=Au(t)||function Cx(t,e){return t[Sx]=e}(t,{previous:Us,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new Qp(c&&c.currentValue,e,a===Us),t[i]=e}Br.ngInherit=!0;const Sx="__ngSimpleChanges__";function Au(t){return t[Sx]||null}const co=function(t,e,n){};function Li(t){for(;Array.isArray(t);)t=t[Mr];return t}function em(t,e){return Li(e[t])}function lo(t,e){return Li(e[t.index])}function tb(t,e){return t.data[e]}function Io(t,e){const n=e[t];return oo(n)?n:n[Mr]}function wc(t,e){return null==e?null:t[e]}function $h(t){t[ma]=0}function WC(t){1024&t[jn]||(t[jn]|=1024,rb(t,1))}function ib(t){1024&t[jn]&&(t[jn]&=-1025,rb(t,-1))}function rb(t,e){let n=t[sr];if(null===n)return;n[Fr]+=e;let i=n;for(n=n[sr];null!==n&&(1===e&&1===i[Fr]||-1===e&&0===i[Fr]);)n[Fr]+=e,i=n,n=n[sr]}const kn={lFrame:zs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ti(){return kn.bindingsEnabled}function Su(){return null!==kn.skipHydrationRootTNode}function At(){return kn.lFrame.lView}function yi(){return kn.lFrame.tView}function ur(t){return kn.lFrame.contextLView=t,t[yr]}function vr(t){return kn.lFrame.contextLView=null,t}function ns(){let t=ab();for(;null!==t&&64===t.type;)t=t.parent;return t}function ab(){return kn.lFrame.currentTNode}function _s(t,e){const n=kn.lFrame;n.currentTNode=t,n.isParent=e}function Yh(){return kn.lFrame.isParent}function nm(){kn.lFrame.isParent=!1}function Do(){return kn.lFrame.bindingIndex++}function Ec(t){const e=kn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Nx(t,e){const n=kn.lFrame;n.bindingIndex=n.bindingRootIndex=t,db(e)}function db(t){kn.lFrame.currentDirectiveIndex=t}function Lx(){return kn.lFrame.currentQueryIndex}function om(t){kn.lFrame.currentQueryIndex=t}function Fx(t){const e=t[Kt];return 2===e.type?e.declTNode:1===e.type?t[Ms]:null}function Bx(t,e,n){if(n&ei.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&ei.Host||(r=Fx(s),null===r||(s=s[za],10&r.type))););if(null===r)return!1;e=r,t=s}const i=kn.lFrame=hb();return i.currentTNode=e,i.lView=t,!0}function am(t){const e=hb(),n=t[Kt];kn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hb(){const t=kn.lFrame,e=null===t?null:t.child;return null===e?zs(t):e}function zs(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function _a(){const t=kn.lFrame;return kn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const jx=_a;function fb(){const t=_a();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ds(){return kn.lFrame.selectedIndex}function ml(t){kn.lFrame.selectedIndex=t}function hr(){const t=kn.lFrame;return tb(t.tView,t.selectedIndex)}let mb=!0;function bd(){return mb}function Ac(t){mb=t}function Mu(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function yd(t,e,n){Kh(t,e,3,n)}function um(t,e,n,i){(3&t[jn])===n&&Kh(t,e,n,i)}function hm(t,e){let n=t[jn];(3&n)===e&&(n&=8191,n+=1,t[jn]=n)}function Kh(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&t[ma]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[ma]+=65536),(a<s||-1==s)&&(_b(t,n,e,c),t[ma]=(4294901760&t[ma])+c+2),c++}function gb(t,e){co(4,t,e);const n=Xr(null);try{e.call(t)}finally{Xr(n),co(5,t,e)}}function _b(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];r?t[jn]>>13<t[ma]>>16&&(3&t[jn])===e&&(t[jn]+=8192,gb(a,s)):gb(a,s)}const Iu=-1;class Du{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function qh(t){return t!==Iu}function vd(t){return 32767&t}function _l(t,e){let n=function bb(t){return t>>16}(t),i=e;for(;n>0;)i=i[za],n--;return i}let bl=!0;function xn(t){const e=bl;return bl=t,e}const pm=255,yl=5;let tT=0;const qo={};function Kr(t,e){const n=zx(t,e);if(-1!==n)return n;const i=e[Kt];i.firstCreatePass&&(t.injectorIndex=e.length,vb(i.data,t),vb(e,null),vb(i.blueprint,null));const r=Jh(t,e),s=t.injectorIndex;if(qh(r)){const o=vd(r),a=_l(r,e),c=a[Kt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function vb(t,e){t.push(0,0,0,0,0,0,0,0,e)}function zx(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Jh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=Ab(r),null===i)return Iu;if(n++,r=r[za],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Iu}function xb(t,e,n){!function Vx(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Uh)&&(i=n[Uh]),null==i&&(i=n[Uh]=tT++);const r=i&pm;e.data[t+(r>>yl)]|=1<<r}(t,e,n)}function Hx(t,e,n){if(n&ei.Optional||void 0!==t)return t;N_()}function Wx(t,e,n,i){if(n&ei.Optional&&void 0===i&&(i=null),!(n&(ei.Self|ei.Host))){const r=t[ol],s=Ts(void 0);try{return r?r.get(e,i,n&ei.Optional):ox(e,i,n&ei.Optional)}finally{Ts(s)}}return Hx(i,0,n)}function $x(t,e,n,i=ei.Default,r){if(null!==t){if(2048&e[jn]&&!(i&ei.Self)){const o=function iT(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[jn]&&!(512&o[jn]);){const a=Xa(s,o,n,i|ei.Self,qo);if(a!==qo)return a;let c=s.parent;if(!c){const l=o[_x];if(l){const d=l.get(n,qo,i);if(d!==qo)return d}c=Ab(o),o=o[za]}s=c}return r}(t,e,n,i,qo);if(o!==qo)return o}const s=Xa(t,e,n,i,qo);if(s!==qo)return s}return Wx(e,n,i,r)}function Xa(t,e,n,i,r){const s=function wb(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Uh)?t[Uh]:void 0;return"number"==typeof e?e>=0?e&pm:nT:e}(n);if("function"==typeof s){if(!Bx(e,t,i))return i&ei.Host?Hx(r,0,i):Wx(e,n,i,r);try{let o;if(o=s(i),null!=o||i&ei.Optional)return o;N_()}finally{jx()}}else if("number"==typeof s){let o=null,a=zx(t,e),c=Iu,l=i&ei.Host?e[Ki][Ms]:null;for((-1===a||i&ei.SkipSelf)&&(c=-1===a?Jh(t,e):e[a+8],c!==Iu&&Yx(i,!1)?(o=e[Kt],a=vd(c),e=_l(c,e)):a=-1);-1!==a;){const d=e[Kt];if(Xx(s,a,d.data)){const h=Gs(a,e,n,o,i,l);if(h!==qo)return h}c=e[a+8],c!==Iu&&Yx(i,e[Kt].data[a+8]===l)&&Xx(s,a,e)?(o=d,a=vd(c),e=_l(c,e)):a=-1}}return r}function Gs(t,e,n,i,r,s){const o=e[Kt],a=o.data[t+8],d=Ru(a,o,n,null==i?pd(a)&&bl:i!=o&&0!=(3&a.type),r&ei.Host&&s===a);return null!==d?xd(e,o,d,a):qo}function Ru(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,d=s>>20,p=r?a+d:t.directiveEnd;for(let m=i?a:a+d;m<p;m++){const v=o[m];if(m<c&&n===v||m>=c&&v.type===n)return m}if(r){const m=o[c];if(m&&$r(m)&&m.type===n)return c}return null}function xd(t,e,n,i){let r=t[n];const s=e.data;if(function Sc(t){return t instanceof Du}(r)){const o=r;o.resolving&&function wC(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Rt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function wi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Bn(t)}(s[n]));const a=xn(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ts(o.injectImpl):null;Bx(t,i,ei.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function dm(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Ax(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Ts(l),xn(a),o.resolving=!1,jx()}}return r}function Xx(t,e,n){return!!(n[e+(t>>yl)]&1<<t)}function Yx(t,e){return!(t&ei.Self||t&ei.Host&&e)}class Rs{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return $x(this._tNode,this._lView,e,Pp(i),n)}}function nT(){return new Rs(ns(),At())}function Bi(t){return gc(()=>{const e=t.prototype.constructor,n=e[_c]||Eb(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[_c]||Eb(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Eb(t){return io(t)?()=>{const e=Eb(ln(t));return e&&e()}:md(t)}function Ab(t){const e=t[Kt],n=e.type;return 2===n?e.declTNode:1===n?t[Ms]:null}function Tc(t){return function Gx(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(gt(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(ns(),t)}const vl="__parameters__";function Ed(t,e,n){return gc(()=>{const i=function Zh(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,d){const h=c.hasOwnProperty(vl)?c[vl]:Object.defineProperty(c,vl,{value:[]})[vl];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Lu(t,e){t.forEach(n=>Array.isArray(n)?Lu(n,e):e(n))}function qx(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ef(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Fu(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function uo(t,e,n){let i=Bu(t,e);return i>=0?t[1|i]=n:(i=~i,function uT(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function Sb(t,e){const n=Bu(t,e);if(n>=0)return t[1|n]}function Bu(t,e){return function Zx(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const ju=cd(Ed("Optional"),8),Uu=cd(Ed("SkipSelf"),4);function Em(t){return 128==(128&t.flags)}var xl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xl||{});const Rb=new Map;let NT=0;const kb="__ngContext__";function Os(t,e){oo(e)?(t[kb]=e[zh],function FT(t){Rb.set(t[zh],t)}(e)):t[kb]=e}let Cm;function Tm(t,e){return Cm(t,e)}function af(t){const e=t[sr];return ao(e)?e[sr]:e}function cf(t){return _w(t[ud])}function gw(t){return _w(t[Ii])}function _w(t){for(;null!==t&&!ao(t);)t=t[Ii];return t}function wl(t,e,n,i,r){if(null!=i){let s,o=!1;ao(i)?s=i:oo(i)&&(o=!0,i=i[Mr]);const a=Li(i);0===t&&null!==n?null==r?Hs(e,n,a):Ad(e,n,a,r||null,!0):1===t&&null!==n?Ad(e,n,a,r||null,!0):2===t?function Ji(t,e,n){const i=Rm(t,e);i&&function QT(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function nM(t,e,n,i,r){const s=n[Ir];s!==Li(n)&&wl(e,t,i,s,r);for(let a=ms;a<n.length;a++){const c=n[a];hf(c[Kt],c,t,e,i,s)}}(e,t,s,n,r)}}function Im(t,e,n){return t.createElement(e,n)}function yw(t,e){const n=t[vu],i=n.indexOf(e);ib(e),n.splice(i,1)}function Dm(t,e){if(t.length<=ms)return;const n=ms+e,i=t[n];if(i){const r=i[cl];null!==r&&r!==t&&yw(r,i),e>0&&(t[n-1][Ii]=i[Ii]);const s=ef(t,ms+e);!function HT(t,e){hf(t,e,e[Rn],2,null,null),e[Mr]=null,e[Ms]=null}(i[Kt],i);const o=s[Ga];null!==o&&o.detachView(s[Kt]),i[sr]=null,i[Ii]=null,i[jn]&=-129}return i}function Lb(t,e){if(!(256&e[jn])){const n=e[Rn];e[fd]?.destroy(),e[dl]?.destroy(),n.destroyNode&&hf(t,e,n,3,null,null),function XT(t){let e=t[ud];if(!e)return Ro(t[Kt],t);for(;e;){let n=null;if(oo(e))n=e[ud];else{const i=e[ms];i&&(n=i)}if(!n){for(;e&&!e[Ii]&&e!==t;)oo(e)&&Ro(e[Kt],e),e=e[sr];null===e&&(e=t),oo(e)&&Ro(e[Kt],e),n=e&&e[Ii]}e=n}}(e)}}function Ro(t,e){if(!(256&e[jn])){e[jn]&=-129,e[jn]|=256,function ZT(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof Du)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];co(4,a,c);try{c.call(a)}finally{co(5,a,c)}}else{co(4,r,s);try{s.call(r)}finally{co(5,r,s)}}}}}(t,e),function JT(t,e){const n=t.cleanup,i=e[yu];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else n[s].call(i[n[s+1]]);null!==i&&(e[yu]=null);const r=e[ll];if(null!==r){e[ll]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(t,e),1===e[Kt].type&&e[Rn].destroy();const n=e[cl];if(null!==n&&ao(e[sr])){n!==e[sr]&&yw(n,e);const i=e[Ga];null!==i&&i.detachView(t)}!function BT(t){Rb.delete(t[zh])}(e)}}function Ic(t,e,n){return function Un(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[Mr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===pa.None||s===pa.Emulated)return null}return lo(i,n)}}(t,e.parent,n)}function Ad(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Hs(t,e,n){t.appendChild(e,n)}function xr(t,e,n,i,r){null!==i?Ad(t,e,n,i,r):Hs(t,e,n)}function Rm(t,e){return t.parentNode(e)}function vw(t,e,n){return ww(t,e,n)}let df,km,jb,ww=function xw(t,e,n){return 40&t.type?lo(t,n):null};function Qo(t,e,n,i){const r=Ic(t,i,e),s=e[Rn],a=vw(i.parent||e[Ms],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)xr(s,r,n[c],a,!1);else xr(s,r,n,a,!1);void 0!==df&&df(s,i,e,n,r)}function Gu(t,e){if(null!==e){const n=e.type;if(3&n)return lo(e,t);if(4&n)return qi(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Gu(t,i);{const r=t[e.index];return ao(r)?qi(-1,r):Li(r)}}if(32&n)return Tm(e,t)()||Li(t[e.index]);{const i=uf(t,e);return null!==i?Array.isArray(i)?i[0]:Gu(af(t[Ki]),i):Gu(t,e.next)}}return null}function uf(t,e){return null!==e?t[Ki][Ms].projection[e.projection]:null}function qi(t,e){const n=ms+t+1;if(n<e.length){const i=e[n],r=i[Kt].firstChild;if(null!==r)return Gu(i,r)}return e[Ir]}function Bb(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],c=n.type;if(o&&0===e&&(a&&Os(Li(a),i),n.flags|=2),32!=(32&n.flags))if(8&c)Bb(t,e,n.child,i,r,s,!1),wl(e,t,r,a,s);else if(32&c){const l=Tm(n,i);let d;for(;d=l();)wl(e,t,r,d,s);wl(e,t,r,a,s)}else 16&c?Aw(t,e,i,n,r,s):wl(e,t,r,a,s);n=o?n.projectionNext:n.next}}function hf(t,e,n,i,r,s){Bb(n,i,t.firstChild,e,r,s,!1)}function Aw(t,e,n,i,r,s){const o=n[Ki],c=o[Ms].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)wl(e,t,r,c[l],s);else{let l=c;const d=o[sr];Em(i)&&(l.flags|=128),Bb(t,e,l,d,r,s,!0)}}function Hu(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Om(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&wt(t,e,i),null!==r&&Hu(t,e,r),null!==s&&function Sw(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function Dc(t){return function Pm(){if(void 0===km&&(km=null,Si.trustedTypes))try{km=Si.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return km}()?.createHTML(t)||t}class El{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nx})`}}class oM extends El{getTypeName(){return"HTML"}}class Ti extends El{getTypeName(){return"Style"}}class aM extends El{getTypeName(){return"Script"}}class Cw extends El{getTypeName(){return"URL"}}class Nm extends El{getTypeName(){return"ResourceURL"}}function Po(t){return t instanceof El?t.changingThisBreaksApplicationSecurity:t}function Ya(t,e){const n=function cM(t){return t instanceof El&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nx})`)}return n===e}class pM{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Dc(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class mM{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Dc(e),n}}const _M=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Xu(t){return(t=String(t)).match(_M)?t:"unsafe:"+t}function Rc(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Cd(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Mw=Rc("area,br,col,hr,img,wbr"),Iw=Rc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dw=Rc("rp,rt"),Vb=Cd(Mw,Cd(Iw,Rc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cd(Dw,Rc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cd(Dw,Iw)),zb=Rc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rw=Cd(zb,Rc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Rc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yM=Rc("script,style,template");class Ow{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!Vb.hasOwnProperty(n))return this.sanitizedSomething=!0,!yM.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!Rw.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;zb[a]&&(c=Xu(c)),this.buf.push(" ",o,'="',kw(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();Vb.hasOwnProperty(n)&&!Mw.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(kw(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const vM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xM=/([^\#-~ |!])/g;function kw(t){return t.replace(/&/g,"&amp;").replace(vM,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(xM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pf;function Gb(t,e){let n=null;try{pf=pf||function Tw(t){const e=new mM(t);return function gM(){try{return!!(new window.DOMParser).parseFromString(Dc(""),"text/html")}catch{return!1}}()?new pM(e):e}(t);let i=e?String(e):"";n=pf.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=pf.getInertBodyElement(i)}while(i!==s);return Dc((new Ow).sanitizeChildren(Hb(n)||n))}finally{if(n){const i=Hb(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Hb(t){return"content"in t&&function wM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var is=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(is||{});function Wb(t){const e=function mf(){const t=At();return t&&t[al].sanitizer}();return e?e.sanitize(is.URL,t)||"":Ya(t,"URL")?Po(t):Xu(Bn(t))}class bt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=St({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gf=new bt("ENVIRONMENT_INITIALIZER"),Lm=new bt("INJECTOR",-1),Lw=new bt("INJECTOR_DEF_TYPES");class Xb{get(e,n=od){if(n===od){const i=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw i.name="NullInjectorError",i}return n}}function TM(...t){return{\u0275providers:Fw(0,t),\u0275fromNgModule:!0}}function Fw(t,...e){const n=[],i=new Set;let r;const s=o=>{n.push(o)};return Lu(e,o=>{const a=o;Fm(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Bw(r,s),n}function Bw(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];Kb(r,s=>{e(s,i)})}}function Fm(t,e,n,i){if(!(t=ln(t)))return!1;let r=null,s=js(t);const o=!s&&mi(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const c=t.ngModule;if(s=js(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Fm(l,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{Lu(s.imports,d=>{Fm(d,e,n,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&Bw(l,e)}if(!a){const l=md(r)||(()=>new r);e({provide:r,useFactory:l,deps:qn},r),e({provide:Lw,useValue:r,multi:!0},r),e({provide:gf,useValue:()=>nt(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=t;Kb(c,d=>{e(d,l)})}}}return r!==t&&void 0!==t.providers}function Kb(t,e){for(let n of t)P_(n)&&(n=n.\u0275providers),Array.isArray(n)?Kb(n,e):e(n)}const MM=dt({provide:String,useValue:dt});function qb(t){return null!==t&&"object"==typeof t&&MM in t}function Td(t){return"function"==typeof t}const Jb=new bt("Set Injector scope."),Bm={},DM={};let Zb;function Ku(){return void 0===Zb&&(Zb=new Xb),Zb}class Lo{}class _f extends Lo{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bf(e,o=>this.processProvider(o)),this.records.set(Lm,qu(void 0,this)),r.has("environment")&&this.records.set(Lo,qu(void 0,this));const s=this.records.get(Jb);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Lw.multi,qn,ei.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=il(this),i=Ts(void 0);try{return e()}finally{il(n),Ts(i)}}get(e,n=od,i=ei.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Vh))return e[Vh](this);i=Pp(i);const s=il(this),o=Ts(void 0);try{if(!(i&ei.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function fo(t){return"function"==typeof t||"object"==typeof t&&t instanceof bt}(e)&&Lh(e);c=l&&this.injectableDefInScope(l)?qu(Qb(e),Bm):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&ei.Self?Ku():this.parent).get(e,n=i&ei.Optional&&n===od?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Fh]=a[Fh]||[]).unshift(Vt(e)),s)throw a;return function rl(t,e,n,i){const r=t[Fh];throw e[j_]&&r.unshift(e[j_]),t.message=function Np(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=Vt(e);if(Array.isArray(e))r=e.map(Vt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Vt(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(B_,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Fh]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ts(o),il(s)}}resolveInjectorInitializers(){const e=il(this),n=Ts(void 0);try{const r=this.get(gf.multi,qn,ei.Self);for(const s of r)s()}finally{il(e),Ts(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(Vt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Rt(205,!1)}processProvider(e){let n=Td(e=ln(e))?e:ln(e&&e.provide);const i=function OM(t){return qb(t)?qu(void 0,t.useValue):qu(jm(t),Bm)}(e);if(Td(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=qu(void 0,Bm,!0),r.factory=()=>U_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Bm&&(n.value=DM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function PM(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ln(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Qb(t){const e=Lh(t),n=null!==e?e.factory:md(t);if(null!==n)return n;if(t instanceof bt)throw new Rt(204,!1);if(t instanceof Function)return function RM(t){const e=t.length;if(e>0)throw Fu(e,"?"),new Rt(204,!1);const n=function TC(t){return t&&(t[Ip]||t[pc])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Rt(204,!1)}function jm(t,e,n){let i;if(Td(t)){const r=ln(t);return md(r)||Qb(r)}if(qb(t))i=()=>ln(t.useValue);else if(function Uw(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...U_(t.deps||[]));else if(function jw(t){return!(!t||!t.useExisting)}(t))i=()=>nt(ln(t.useExisting));else{const r=ln(t&&(t.useClass||t.provide));if(!function kM(t){return!!t.deps}(t))return md(r)||Qb(r);i=()=>new r(...U_(t.deps))}return i}function qu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bf(t,e){for(const n of t)Array.isArray(n)?bf(n,e):n&&P_(n)?bf(n.\u0275providers,e):e(n)}const yf=new bt("AppId",{providedIn:"root",factory:()=>NM}),NM="ng",Vw=new bt("Platform Initializer"),ya=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rs=new bt("AnimationModuleType"),vf=new bt("CSP nonce",{providedIn:"root",factory:()=>function $u(){if(void 0!==jb)return jb;if(typeof document<"u")return document;throw new Rt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ww=(t,e,n)=>null;function ry(t,e,n=!1){return Ww(t,e,n)}class Ee{}class je{}class Ct{resolveComponentFactory(e){throw function Qe(t){const e=Error(`No component factory found for ${Vt(t)}.`);return e.ngComponent=t,e}(e)}}let Et=(()=>{class e{}return e.NULL=new Ct,e})();function Pt(){return Xt(ns(),At())}function Xt(t,e){return new Mt(lo(t,e))}let Mt=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=Pt,e})();function Tn(t){return t instanceof Mt?t.nativeElement:t}class Qn{}let gi=(()=>{var t;class e{}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>null}),e})();class jr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ws=new jr("16.2.1"),$s={};function iB(t,e=null,n=null,i){const r=rB(t,e,n,i);return r.resolveInjectorInitializers(),r}function rB(t,e=null,n=null,i,r=new Set){const s=[n||qn,TM(t)];return i=i||("object"==typeof t?void 0:Vt(t)),new _f(s,e||Ku(),i||null,r)}let wr=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return iB({name:""},r,i,"");{const s=i.name??"";return iB({name:s},i.parent,i.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=od,t.NULL=new Xb,t.\u0275prov=St({token:t,providedIn:"any",factory:()=>nt(Lm)}),t.__NG_ELEMENT_ID__=-1,e})();let HM=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Rt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>new t}),e})();function oy(t){for(;t;){t[jn]|=64;const e=af(t);if(X_(t)&&!e)return t;t=e}return null}function WM(t){return t.ngOriginalError}class Oc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&WM(e);for(;n&&WM(n);)n=WM(n);return n||null}}const lB=new bt("",{providedIn:"root",factory:()=>!1});class fB extends Y_{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){oy(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=Xr(this);this.trackingVersion++;try{e(n,i)}finally{Xr(r)}}destroy(){this.trackingVersion++}}let Kw=null;function pB(){return Kw??=new fB,Kw}function mB(t,e){return t[e]??pB()}function gB(t,e){const n=pB();n.hasReadASignal&&(t[e]=Kw,n.lView=t,Kw=new fB)}const Zn={};function Wt(t){_B(yi(),At(),Ds()+t,!1)}function _B(t,e,n,i){if(!i)if(3==(3&e[jn])){const s=t.preOrderCheckHooks;null!==s&&yd(e,s,n)}else{const s=t.preOrderHooks;null!==s&&um(e,s,0,n)}ml(n)}function Ge(t,e=ei.Default){const n=At();return null===n?nt(t,e):$x(ns(),n,ln(t),e)}function Cf(){throw new Error("invalid")}function qw(t,e,n,i,r,s,o,a,c,l,d){const h=e.blueprint.slice();return h[Mr]=r,h[jn]=140|i,(null!==l||t&&2048&t[jn])&&(h[jn]|=2048),$h(h),h[sr]=h[za]=t,h[yr]=n,h[al]=o||t&&t[al],h[Rn]=a||t&&t[Rn],h[ol]=c||t&&t[ol]||null,h[Ms]=s,h[zh]=function LT(){return NT++}(),h[yc]=d,h[_x]=l,h[Ki]=2==e.type?t[Ki]:h,h}function $m(t,e,n,i,r){let s=t.data[e];if(null===s)s=function $M(t,e,n,i,r){const s=ab(),o=Yh(),c=t.data[e]=function gJ(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Su()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,i,r),function pl(){return kn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function gs(){const t=kn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _s(s,!0),s}function ay(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function bB(t,e,n,i,r){const s=mB(e,fd),o=Ds(),a=2&i;try{if(ml(-1),a&&e.length>ci&&_B(t,e,ci,!1),co(a?2:0,r),a)s.runInContext(n,i,r);else{const l=Xr(null);try{n(i,r)}finally{Xr(l)}}}finally{a&&null===e[fd]&&gB(e,fd),ml(o),co(a?3:1,r)}}function XM(t,e,n){if($_(e)){const i=Xr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Xr(i)}}}function YM(t,e,n){ti()&&(function EJ(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;pd(n)&&function DJ(t,e,n){const i=lo(e,t),r=yB(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Jw(t,qw(t,r,null,o,i,e,null,t[al].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Kr(n,e),Os(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const c=t.data[a],l=xd(e,t,a,n);Os(l,e),null!==o&&RJ(0,a-r,l,c,0,o),$r(c)&&(Io(n.index,e)[yr]=xd(e,t,a,n))}}(t,e,n,lo(n,e)),64==(64&n.flags)&&AB(t,e,n))}function KM(t,e,n=lo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function yB(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=qM(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function qM(t,e,n,i,r,s,o,a,c,l,d){const h=ci+i,p=h+r,m=function dJ(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Zn);return n}(h,p),v="function"==typeof l?l():l;return m[Kt]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}let vB=t=>null;function xB(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const s=t[r];null===i?wB(n,e,r,s):i.hasOwnProperty(r)&&wB(n,e,i[r],s)}return n}function wB(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function va(t,e,n,i,r,s,o,a){const c=lo(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(tI(t,n,d,i,r),pd(e)&&function yJ(t,e){const n=Io(e,t);16&n[jn]||(n[jn]|=64)}(n,e.index)):3&e.type&&(i=function bJ(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function JM(t,e,n,i){if(ti()){const r=null===i?null:{"":-1},s=function SJ(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(ld(e,o.selectors,!1))if(i||(i=[]),$r(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),ZM(t,e,a.length)}else i.unshift(o),ZM(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&EB(t,e,n,o,r,a),r&&function CJ(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new Rt(-301,!1);i.push(e[r],s)}}}(n,i,r)}n.mergedAttrs=On(n.mergedAttrs,n.attrs)}function EB(t,e,n,i,r,s){for(let l=0;l<i.length;l++)xb(Kr(n,e),t,i[l].type);!function MJ(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=ay(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=On(n.mergedAttrs,d.hostAttrs),IJ(t,n,e,c,d),TJ(c,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function _J(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=s[d],p=n?n.get(h):null,v=p?p.outputs:null;c=xB(h.inputs,d,c,p?p.inputs:null),l=xB(h.outputs,d,l,v);const R=null===c||null===o||Fp(e)?null:OJ(c,d,o);a.push(R)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,s)}function AB(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function lb(){return kn.lFrame.currentDirectiveIndex}();try{ml(s);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];db(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&AJ(c,l)}}finally{ml(-1),db(o)}}function AJ(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ZM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TJ(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;$r(e)&&(n[""]=t)}}function IJ(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=md(r.type)),o=new Du(s,$r(r),Ge);t.blueprint[i]=o,n[i]=o,function xJ(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function wJ(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,ay(t,n,r.hostVars,Zn),r)}function Al(t,e,n,i,r,s){const o=lo(t,e);!function QM(t,e,n,i,r,s,o){if(null==s)t.removeAttribute(e,r,n);else{const a=null==o?Bn(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}(e[Rn],o,s,t.value,n,i,r)}function RJ(t,e,n,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)SB(i,n,o[a++],o[a++],o[a++])}function SB(t,e,n,i,r){const s=Xr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{Xr(s)}}function OJ(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function CB(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function TB(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const o=t.data[s];om(n[i]),o.contentQueries(2,e[s],s)}}}function Jw(t,e){return t[ud]?t[hd][Ii]=e:t[ud]=e,t[hd]=e,e}function eI(t,e,n){om(0);const i=Xr(null);try{e(t,n)}finally{Xr(i)}}function MB(t){return t[yu]||(t[yu]=[])}function IB(t){return t.cleanup||(t.cleanup=[])}function RB(t,e){const n=t[ol],i=n?n.get(Oc,null):null;i&&i.handleError(e)}function tI(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];SB(t.data[o],e[o],i,a,r)}}function kJ(t,e){const n=Io(e,t),i=n[Kt];!function PJ(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[Mr];null!==r&&null===n[yc]&&(n[yc]=ry(r,n[ol])),nI(i,n,n[yr])}function nI(t,e,n){am(e);try{const i=t.viewQuery;null!==i&&eI(1,i,n);const r=t.template;null!==r&&bB(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&TB(t,e),t.staticViewQueries&&eI(2,t.viewQuery,n);const s=t.components;null!==s&&function NJ(t,e){for(let n=0;n<e.length;n++)kJ(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[jn]&=-5,fb()}}let OB=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,s){const o=typeof Zone>"u"?null:Zone.current,a=new Vs(i,d=>{this.all.has(d)&&this.queue.set(d,o)},s);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>new t}),e})();function Zw(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Kn(r,a):2==s&&(i=Kn(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function cy(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(Li(s)),ao(s)){for(let a=ms;a<s.length;a++){const c=s[a],l=c[Kt].firstChild;null!==l&&cy(c[Kt],c,l,i)}s[Ir]!==s[Mr]&&i.push(s[Ir])}const o=n.type;if(8&o)cy(t,e,n.child,i);else if(32&o){const a=Tm(n,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=uf(e,n);if(Array.isArray(a))i.push(...a);else{const c=af(e[Ki]);cy(c[Kt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Qw(t,e,n,i=!0){const r=e[al],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{kB(t,e,t.template,n)}catch(c){throw i&&RB(e,c),c}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function kB(t,e,n,i){const r=e[jn];if(256!=(256&r)){e[al].effectManager?.flush(),am(e);try{$h(e),function sm(t){return kn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&bB(t,e,n,2,i);const o=3==(3&r);if(o){const l=t.preOrderCheckHooks;null!==l&&yd(e,l,null)}else{const l=t.preOrderHooks;null!==l&&um(e,l,0,null),hm(e,0)}if(function BJ(t){for(let e=cf(t);null!==e;e=gw(e)){if(!e[Gh])continue;const n=e[vu];for(let i=0;i<n.length;i++){WC(n[i])}}}(e),PB(e,2),null!==t.contentQueries&&TB(t,e),o){const l=t.contentCheckHooks;null!==l&&yd(e,l)}else{const l=t.contentHooks;null!==l&&um(e,l,1),hm(e,1)}!function lJ(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=mB(e,dl);try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)ml(~s);else{const o=s,a=n[++r],c=n[++r];Nx(a,o),i.runInContext(c,2,e[o])}}}finally{null===e[dl]&&gB(e,dl),ml(-1)}}(t,e);const a=t.components;null!==a&&LB(e,a,0);const c=t.viewQuery;if(null!==c&&eI(2,c,i),o){const l=t.viewCheckHooks;null!==l&&yd(e,l)}else{const l=t.viewHooks;null!==l&&um(e,l,2),hm(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[jn]&=-73,ib(e)}finally{fb()}}}function PB(t,e){for(let n=cf(t);null!==n;n=gw(n))for(let i=ms;i<n.length;i++)NB(n[i],e)}function jJ(t,e,n){NB(Io(e,t),n)}function NB(t,e){if(!function Dx(t){return 128==(128&t[jn])}(t))return;const n=t[Kt];if(80&t[jn]&&0===e||1024&t[jn]||2===e)kB(n,t,n.template,t[yr]);else if(t[Fr]>0){PB(t,1);const r=t[Kt].components;null!==r&&LB(t,r,1)}}function LB(t,e,n){for(let i=0;i<e.length;i++)jJ(t,e[i],n)}class ly{get rootNodes(){const e=this._lView,n=e[Kt];return cy(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yr]}set context(e){this._lView[yr]=e}get destroyed(){return 256==(256&this._lView[jn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[sr];if(ao(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(Dm(e,i),ef(n,i))}this._attachedToViewContainer=!1}Lb(this._lView[Kt],this._lView)}onDestroy(e){!function Ox(t,e){if(256==(256&t[jn]))throw new Rt(911,!1);null===t[ll]&&(t[ll]=[]),t[ll].push(e)}(this._lView,e)}markForCheck(){oy(this._cdRefInjectingView||this._lView)}detach(){this._lView[jn]&=-129}reattach(){this._lView[jn]|=128}detectChanges(){Qw(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $T(t,e){hf(t,e,e[Rn],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Rt(902,!1);this._appRef=e}}class UJ extends ly{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Qw(e[Kt],e,e[yr],!1)}checkNoChanges(){}get context(){return null}}class FB extends Et{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=mi(e);return new dy(n,this.ngModule)}}function BB(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class zJ{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Pp(i);const r=this.injector.get(e,$s,i);return r!==$s||n===$s?r:this.parentInjector.get(e,n,i)}}class dy extends je{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=BB(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return BB(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function PC(t){return t.map(Up).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let s=(r=r||this.ngModule)instanceof Lo?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new zJ(e,s):e,a=o.get(Qn,null);if(null===a)throw new Rt(407,!1);const h={rendererFactory:a,sanitizer:o.get(gi,null),effectManager:o.get(OB,null),afterRenderEventManager:o.get(HM,null)},p=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=i?function uJ(t,e,n,i){const s=i.get(lB,!1)||n===pa.ShadowDom,o=t.selectRootElement(e,s);return function hJ(t){vB(t)}(o),o}(p,i,this.componentDef.encapsulation,o):Im(p,m,function VJ(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(m)),Y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let q=null;null!==v&&(q=ry(v,o,!0));const pe=qM(0,null,null,1,0,null,null,null,null,null,null),Me=qw(null,pe,null,Y,null,null,h,p,o,null,q);let Ue,Ze;am(Me);try{const at=this.componentDef;let mt,pt=null;at.findHostDirectiveDefs?(mt=[],pt=new Map,at.findHostDirectiveDefs(at,mt,pt),mt.push(at)):mt=[at];const ht=function HJ(t,e){const n=t[Kt],i=ci;return t[i]=e,$m(n,i,2,"#host",null)}(Me,v),yt=function WJ(t,e,n,i,r,s,o){const a=r[Kt];!function $J(t,e,n,i){for(const r of t)e.mergedAttrs=On(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Zw(e,e.mergedAttrs,!0),null!==n&&Om(i,n,e))}(i,t,e,o);let c=null;null!==e&&(c=ry(e,r[ol]));const l=s.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=qw(r,yB(n),null,d,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&ZM(a,t,i.length-1),Jw(r,h),r[t.index]=h}(ht,v,at,mt,Me,h,p);Ze=tb(pe,ci),v&&function YJ(t,e,n,i){if(i)wt(t,n,["ng-version",Ws.full]);else{const{attrs:r,classes:s}=function NC(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!so(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&wt(t,n,r),s&&s.length>0&&Hu(t,n,s.join(" "))}}(p,at,v,i),void 0!==n&&function KJ(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(Ze,this.ngContentSelectors,n),Ue=function XJ(t,e,n,i,r,s){const o=ns(),a=r[Kt],c=lo(o,r);EB(a,r,o,n,null,i);for(let d=0;d<n.length;d++)Os(xd(r,a,o.directiveStart+d,o),r);AB(a,r,o),c&&Os(c,r);const l=xd(r,a,o.directiveStart+o.componentOffset,o);if(t[yr]=r[yr]=l,null!==s)for(const d of s)d(l,e);return XM(a,o,t),l}(yt,at,mt,pt,Me,[qJ]),nI(pe,Me,null)}finally{fb()}return new GJ(this.componentType,Ue,Xt(Ze,Me),Me,Ze)}}class GJ extends Ee{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new UJ(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;tI(s[Kt],s,r,e,n),this.previousInputValues.set(e,n),oy(Io(this._tNode.index,s))}}get injector(){return new Rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function qJ(){const t=ns();Mu(At()[Kt],t)}function yn(t){let e=function jB(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if($r(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Rt(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const o=t;o.inputs=eE(t.inputs),o.inputTransforms=eE(t.inputTransforms),o.declaredInputs=eE(t.declaredInputs),o.outputs=eE(t.outputs);const a=r.hostBindings;a&&eZ(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&ZJ(t,c),l&&QJ(t,l),kt(t.inputs,r.inputs),kt(t.declaredInputs,r.declaredInputs),kt(t.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),kt(o.inputTransforms,r.inputTransforms)),$r(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===yn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function JJ(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=On(r.hostAttrs,n=On(n,r.hostAttrs))}}(i)}function eE(t){return t===Us?{}:t===qn?[]:t}function ZJ(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function QJ(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,s)=>{e(i,r,s),n(i,r,s)}:e}function eZ(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function tE(t){return!!function iI(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function po(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Di(t,e,n,i){const r=At();return po(r,Do(),e)&&(yi(),Al(hr(),r,t,e,n,i)),Di}function Ym(t,e,n,i){return po(t,Do(),n)?e+Bn(n)+i:Zn}function vn(t,e,n,i,r,s,o,a){const c=At(),l=yi(),d=t+ci,h=l.firstCreatePass?function SZ(t,e,n,i,r,s,o,a,c){const l=e.consts,d=$m(e,t,4,o||null,wc(l,a));JM(e,n,d,wc(l,c)),Mu(e,d);const h=d.tView=qM(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,n,i,r,s,o):l.data[d];_s(h,!1);const p=n3(l,c,h,t);bd()&&Qo(l,c,p,h),Os(p,c),Jw(c,c[d]=CB(p,c,p,h)),Wp(h)&&YM(l,c,h),null!=o&&KM(c,h,a)}let n3=function r3(t,e,n,i){return Ac(!0),e[Rn].createComment("")};function Gt(t,e,n){const i=At();return po(i,Do(),e)&&va(yi(),hr(),i,t,e,i[Rn],n,!1),Gt}function lI(t,e,n,i,r){const o=r?"class":"style";tI(t,n,e.inputs[o],o,i)}function Bt(t,e,n,i){const r=At(),s=yi(),o=ci+t,a=r[Rn],c=s.firstCreatePass?function IZ(t,e,n,i,r,s){const o=e.consts,c=$m(e,t,2,i,wc(o,r));return JM(e,n,c,wc(o,s)),null!==c.attrs&&Zw(c,c.attrs,!1),null!==c.mergedAttrs&&Zw(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,n,i):s.data[o],l=s3(s,r,c,a,e,t);r[o]=l;const d=Wp(c);return _s(c,!0),Om(a,l,c),32!=(32&c.flags)&&bd()&&Qo(s,r,l,c),0===function sb(){return kn.lFrame.elementDepthCount}()&&Os(l,r),function XC(){kn.lFrame.elementDepthCount++}(),d&&(YM(s,r,c),XM(s,c,r)),null!==i&&KM(r,c),Bt}function zt(){let t=ns();Yh()?nm():(t=t.parent,_s(t,!1));const e=t;(function YC(t){return kn.skipHydrationRootTNode===t})(e)&&function qC(){kn.skipHydrationRootTNode=null}(),function ob(){kn.lFrame.elementDepthCount--}();const n=yi();return n.firstCreatePass&&(Mu(n,t),$_(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Ux(t){return 0!=(8&t.flags)}(e)&&lI(n,e,At(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function eT(t){return 0!=(16&t.flags)}(e)&&lI(n,e,At(),e.stylesWithoutHost,!1),zt}function li(t,e,n,i){return Bt(t,e,n,i),zt(),li}let s3=(t,e,n,i,r,s)=>(Ac(!0),Im(i,r,function pb(){return kn.lFrame.currentNamespace}()));function ng(t){return!!t&&"function"==typeof t.then}function c3(t){return!!t&&"function"==typeof t.subscribe}function Pn(t,e,n,i){const r=At(),s=yi(),o=ns();return function d3(t,e,n,i,r,s,o){const a=Wp(i),l=t.firstCreatePass&&IB(t),d=e[yr],h=MB(e);let p=!0;if(3&i.type||o){const R=lo(i,e),L=o?o(R):R,Y=h.length,q=o?Me=>o(Li(Me[i.index])):i.index;let pe=null;if(!o&&a&&(pe=function NZ(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[yu],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==pe)(pe.__ngLastListenerFn__||pe).__ngNextListenerFn__=s,pe.__ngLastListenerFn__=s,p=!1;else{s=h3(i,e,d,s,!1);const Me=n.listen(L,r,s);h.push(s,Me),l&&l.push(r,q,Y,Y+1)}}else s=h3(i,e,d,s,!1);const m=i.outputs;let v;if(p&&null!==m&&(v=m[r])){const R=v.length;if(R)for(let L=0;L<R;L+=2){const Ue=e[v[L]][v[L+1]].subscribe(s),Ze=h.length;h.push(s,Ue),l&&l.push(r,i.index,Ze,-(Ze+1))}}}(s,r,r[Rn],o,t,e,i),Pn}function u3(t,e,n,i){try{return co(6,e,n),!1!==n(i)}catch(r){return RB(t,r),!1}finally{co(7,e,n)}}function h3(t,e,n,i,r){return function s(o){if(o===Function)return i;oy(t.componentOffset>-1?Io(t.index,e):e);let c=u3(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=u3(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function Nn(t=1){return function cm(t){return(kn.lFrame.contextLView=function Cu(t,e){for(;t>0;)e=e[za],t--;return e}(t,kn.lFrame.contextLView))[yr]}(t)}function LZ(t,e){let n=null;const i=function Bp(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?ld(t,s,!0):kC(i,s))return r}else n=r}return n}function ss(t){const e=At()[Ki][Ms];if(!e.projection){const i=e.projection=Fu(t?t.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=t?LZ(s,t):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ln(t,e=0,n){const i=At(),r=yi(),s=$m(r,ci+t,16,null,n||null);null===s.projection&&(s.projection=e),nm(),(!i[yc]||Su())&&32!=(32&s.flags)&&function tM(t,e,n){Aw(e[Rn],0,e,n,Ic(t,n,e),vw(n.parent||e[Ms],n,e))}(r,i,s)}function oE(t,e,n){return dI(t,"",e,"",n),oE}function dI(t,e,n,i,r){const s=At(),o=Ym(s,e,n,i);return o!==Zn&&va(yi(),hr(),s,t,o,s[Rn],r,!1),dI}function aE(t,e){return t<<17|e<<2}function Zu(t){return t>>17&32767}function uI(t){return 2|t}function Mf(t){return(131068&t)>>2}function hI(t,e){return-131069&t|e<<2}function fI(t){return 1|t}function x3(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?Zu(s):Mf(s),c=!1;for(;0!==a&&(!1===c||o);){const d=t[a+1];zZ(t[a],e)&&(c=!0,t[a+1]=i?fI(d):uI(d)),a=i?Zu(d):Mf(d)}c&&(t[n+1]=i?uI(s):fI(s))}function zZ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Bu(t,e)>=0}const ys={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function w3(t){return t.substring(ys.key,ys.keyEnd)}function E3(t,e){const n=ys.textEnd;return n===e?-1:(e=ys.keyEnd=function $Z(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ys.key=e,n),ig(t,e,n))}function ig(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function cE(t,e,n){return Nc(t,e,n,!1),cE}function Xn(t,e){return Nc(t,e,null,!0),Xn}function Ja(t){!function Lc(t,e,n,i){const r=yi(),s=Ec(2);r.firstUpdatePass&&I3(r,null,s,i);const o=At();if(n!==Zn&&po(o,s,n)){const a=r.data[Ds()];if(k3(a,i)&&!M3(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Kn(c,n||"")),lI(r,a,o,n,i)}else!function nQ(t,e,n,i,r,s,o,a){r===Zn&&(r=qn);let c=0,l=0,d=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==d||null!==h;){const p=c<r.length?r[c+1]:void 0,m=l<s.length?s[l+1]:void 0;let R,v=null;d===h?(c+=2,l+=2,p!==m&&(v=h,R=m)):null===h||null!==d&&d<h?(c+=2,v=d):(l+=2,v=h,R=m),null!==v&&R3(t,e,n,i,v,R,o,a),d=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[Rn],o[s+1],o[s+1]=function eQ(t,e,n){if(null==n||""===n)return qn;const i=[],r=Po(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}(tQ,Cl,t,!0)}function Cl(t,e){for(let n=function HZ(t){return function S3(t){ys.key=0,ys.keyEnd=0,ys.value=0,ys.valueEnd=0,ys.textEnd=t.length}(t),E3(t,ig(t,0,ys.textEnd))}(e);n>=0;n=E3(e,n))uo(t,w3(e),!0)}function Nc(t,e,n,i){const r=At(),s=yi(),o=Ec(2);s.firstUpdatePass&&I3(s,t,o,i),e!==Zn&&po(r,o,e)&&R3(s,s.data[Ds()],r,r[Rn],t,r[o+1]=function iQ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Vt(Po(t)))),t}(e,n),i,o)}function M3(t,e){return e>=t.expandoStartIndex}function I3(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[Ds()],o=M3(t,n);k3(s,i)&&null===e&&!o&&(e=!1),e=function qZ(t,e,n,i){const r=function ub(t){const e=kn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=_y(n=pI(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=pI(r,t,e,n,i),null===s){let c=function JZ(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Mf(i))return t[Zu(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=pI(null,t,e,c[1],i),c=_y(c,e.attrs,i),function ZZ(t,e,n,i){t[Zu(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else s=function QZ(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=_y(i,t[s].hostAttrs,n);return _y(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function UZ(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Zu(o),c=Mf(o);t[i]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||Bu(n,d)>0)&&(l=!0)):d=n,r)if(0!==c){const p=Zu(t[a+1]);t[i+1]=aE(p,a),0!==p&&(t[p+1]=hI(t[p+1],i)),t[a+1]=function BZ(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=aE(a,0),0!==a&&(t[a+1]=hI(t[a+1],i)),a=i;else t[i+1]=aE(c,0),0===a?a=i:t[c+1]=hI(t[c+1],i),c=i;l&&(t[i+1]=uI(t[i+1])),x3(t,d,i,!0),x3(t,d,i,!1),function VZ(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Bu(s,e)>=0&&(n[i+1]=fI(n[i+1]))}(e,d,t,i,s),o=aE(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function pI(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=_y(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function _y(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),uo(t,o,!!n||e[++s]))}return void 0===t?null:t}function tQ(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&uo(t,i,n)}function R3(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],d=function jZ(t){return 1==(1&t)}(l)?O3(c,e,n,r,Mf(l),o):void 0;lE(d)||(lE(s)||function FZ(t){return 2==(2&t)}(l)&&(s=O3(c,null,n,r,a,o)),function iM(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:xl.DashCase;null==r?t.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=xl.Important),t.setStyle(n,i,r,s))}}(i,o,em(Ds(),n),r,s))}function O3(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let p=n[r+1];p===Zn&&(p=h?qn:void 0);let m=h?Sb(p,i):d===i?p:void 0;if(l&&!lE(m)&&(m=Sb(c,i)),lE(m)&&(a=m,o))return a;const v=t[r+1];r=o?Zu(v):Mf(v)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Sb(c,i))}return a}function lE(t){return void 0!==t}function k3(t,e){return 0!=(t.flags&(e?8:16))}function Ri(t,e=""){const n=At(),i=yi(),r=t+ci,s=i.firstCreatePass?$m(i,r,1,e,null):i.data[r],o=P3(i,n,s,e,t);n[r]=o,bd()&&Qo(i,n,o,s),_s(s,!1)}let P3=(t,e,n,i,r)=>(Ac(!0),function lf(t,e){return t.createText(e)}(e[Rn],i));function Za(t){return xa("",t,""),Za}function xa(t,e,n){const i=At(),r=Ym(i,t,e,n);return r!==Zn&&function Id(t,e,n){const i=em(e,t);!function bw(t,e,n){t.setValue(e,n)}(t[Rn],i,n)}(i,Ds(),r),xa}function Rd(t,e,n){const i=At();return po(i,Do(),e)&&va(yi(),hr(),i,t,e,i[Rn],n,!0),Rd}const sg="en-US";let ej=sg;function bI(t,e,n,i,r){if(t=ln(t),Array.isArray(t))for(let s=0;s<t.length;s++)bI(t[s],e,n,i,r);else{const s=yi(),o=At(),a=ns();let c=Td(t)?t:ln(t.provide);const l=jm(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(Td(t)||!t.multi){const m=new Du(l,r,Ge),v=vI(c,e,r?d:d+p,h);-1===v?(xb(Kr(a,o),s,c),yI(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[v]=m,o[v]=m)}else{const m=vI(c,e,d+p,h),v=vI(c,e,d,d+p),L=v>=0&&n[v];if(r&&!L||!r&&!(m>=0&&n[m])){xb(Kr(a,o),s,c);const Y=function Aee(t,e,n,i,r){const s=new Du(t,n,Ge);return s.multi=[],s.index=e,s.componentProviders=0,Sj(s,r,i&&!n),s}(r?Eee:wee,n.length,r,i,l);!r&&L&&(n[v].providerFactory=Y),yI(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(Y),o.push(Y)}else yI(s,t,m>-1?m:v,Sj(n[r?v:m],l,!r&&i));!r&&i&&L&&n[v].componentProviders++}}}function yI(t,e,n,i){const r=Td(e),s=function IM(t){return!!t.useClass}(e);if(r||s){const c=(s?ln(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[i,c]):l[d+1].push(i,c)}else l.push(n,c)}}}function Sj(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function vI(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function wee(t,e,n,i){return xI(this.multi,[])}function Eee(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=xd(n,n[Kt],this.providerFactory.index,i);s=a.slice(0,o),xI(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],xI(r,s);return s}function xI(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function fi(t,e=[]){return n=>{n.providersResolver=(i,r)=>function xee(t,e,n){const i=yi();if(i.firstCreatePass){const r=$r(t);bI(n,i.data,i.blueprint,r,!0),bI(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Df{}class Cj{}class wI extends Df{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new FB(this);const r=function Mo(t,e){const n=t[px]||null;if(!n&&!0===e)throw new Error(`Type ${Vt(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Md(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=rB(e,n,[{provide:Df,useValue:this},{provide:Et,useValue:this.componentFactoryResolver},...i],Vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class EI extends Cj{constructor(e){super(),this.moduleType=e}create(e){return new wI(this.moduleType,e,[])}}function Lj(t,e,n,i,r,s){const o=e+n;return po(t,o,r)?function Sl(t,e,n){return t[e]=n}(t,o+1,s?i.call(s,r):i(r)):function Ey(t,e){const n=t[e];return n===Zn?void 0:n}(t,o+1)}function wa(t,e){const n=yi();let i;const r=t+ci;n.firstCreatePass?(i=function $ee(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=md(i.type)),a=Ts(Ge);try{const c=xn(!1),l=s();return xn(c),function MZ(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,At(),r,l),l}finally{Ts(a)}}function Tl(t,e,n){const i=t+ci,r=At(),s=function fl(t,e){return t[e]}(r,i);return function Ay(t,e){return t[Kt].data[e].pure}(r,i)?Lj(r,function Is(){const t=kn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function SI(t){return e=>{setTimeout(t,void 0,e)}}const en=class qee extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=SI(s),r&&(r=SI(r)),o&&(o=SI(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof S&&e.add(a),a}};function Jee(){return this._results[Symbol.iterator]()}class Sy{get changes(){return this._changes||(this._changes=new en)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Sy.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Jee)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Jo(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function dT(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Qee(t,e,n,i=!0){const r=e[Kt];if(function KT(t,e,n,i){const r=ms+i,s=n.length;i>0&&(n[r-1][Ii]=e),i<s-ms?(e[Ii]=n[r],qx(n,ms+i,e)):(n.push(e),e[Ii]=null),e[sr]=n;const o=e[cl];null!==o&&n!==o&&function qT(t,e){const n=t[vu];e[Ki]!==e[sr][sr][Ki]&&(t[Gh]=!0),null===n?t[vu]=[e]:n.push(e)}(o,e);const a=e[Ga];null!==a&&a.insertView(t),e[jn]|=128}(r,e,t,n),i){const s=qi(n,t),o=e[Rn],a=Rm(o,t[Ir]);null!==a&&function WT(t,e,n,i,r,s){i[Mr]=r,i[Ms]=e,hf(t,i,n,1,r,s)}(r,t[Ms],o,e,a,s)}}let Qa=(()=>{class e{}return e.__NG_ELEMENT_ID__=nte,e})();const ete=Qa,tte=class extends ete{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function Zee(t,e,n,i){const r=e.tView,a=qw(t,r,n,4096&t[jn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[cl]=t[e.index];const l=t[Ga];return null!==l&&(a[Ga]=l.createEmbeddedView(r)),nI(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new ly(r)}};function nte(){return mE(ns(),At())}function mE(t,e){return 4&t.type?new tte(e,t,Xt(t,e)):null}let Xs=(()=>{class e{}return e.__NG_ELEMENT_ID__=cte,e})();function cte(){return Xj(ns(),At())}const lte=Xs,Wj=class extends lte{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Xt(this._hostTNode,this._hostLView)}get injector(){return new Rs(this._hostTNode,this._hostLView)}get parentInjector(){const e=Jh(this._hostTNode,this._hostLView);if(qh(e)){const n=_l(e,this._hostLView),i=vd(e);return new Rs(n[Kt].data[i+8],n)}return new Rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=$j(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-ms}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,s){const o=e&&!function Qh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const R=n||{};a=R.index,i=R.injector,r=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const c=o?e:new dy(mi(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const L=(o?l:this.parentInjector).get(Lo,null);L&&(s=L)}mi(c.componentType??{});const m=c.create(l,r,null,s);return this.insertImpl(m.hostView,a,false),m}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function Rx(t){return ao(t[sr])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[sr],d=new Wj(l,l[Ms],l[sr]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return Qee(a,r,o,!i),e.attachToViewContainerRef(),qx(CI(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=$j(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=Dm(this._lContainer,n);i&&(ef(CI(this._lContainer),n),Lb(i[Kt],i))}detach(e){const n=this._adjustIndex(e,-1),i=Dm(this._lContainer,n);return i&&null!=ef(CI(this._lContainer),n)?new ly(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function $j(t){return t[8]}function CI(t){return t[8]||(t[8]=[])}function Xj(t,e){let n;const i=e[t.index];return ao(i)?n=i:(n=CB(i,e,null,t),e[t.index]=n,Jw(e,n)),Yj(n,e,t,i),new Wj(n,t,e)}let Yj=function Kj(t,e,n,i){if(t[Ir])return;let r;r=8&n.type?Li(i):function dte(t,e){const n=t[Rn],i=n.createComment(""),r=lo(e,t);return Ad(n,Rm(n,r),i,function eM(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Ir]=r};class TI{constructor(e){this.queryList=e,this.matches=null}clone(){return new TI(this.queryList)}setDirty(){this.queryList.setDirty()}}class MI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new MI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==e4(e,n).matches&&this.queries[n].setDirty()}}class qj{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class II{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new II(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class DI{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new DI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,fte(n,s)),this.matchTNodeWithReadOption(e,n,Ru(n,e,s,!1,!1))}else i===Qa?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ru(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Mt||r===Xs||r===Qa&&4&n.type)this.addMatch(n.index,-2);else{const s=Ru(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function fte(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function mte(t,e,n,i){return-1===n?function pte(t,e){return 11&t.type?Xt(t,e):4&t.type?mE(t,e):null}(e,t):-2===n?function gte(t,e,n){return n===Mt?Xt(e,t):n===Qa?mE(e,t):n===Xs?Xj(e,t):void 0}(t,e,i):xd(t,t[Kt],n,e)}function Jj(t,e,n,i){const r=e[Ga].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:mte(e,s[l],o[c+1],n.metadata.read))}r.matches=a}return r.matches}function RI(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=Jj(t,e,r,n);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],d=e[-c];for(let h=ms;h<d.length;h++){const p=d[h];p[cl]===p[sr]&&RI(p[Kt],p,l,i)}if(null!==d[vu]){const h=d[vu];for(let p=0;p<h.length;p++){const m=h[p];RI(m[Kt],m,l,i)}}}}}return i}function Vn(t){const e=At(),n=yi(),i=Lx();om(i+1);const r=e4(n,i);if(t.dirty&&function nb(t){return 4==(4&t[jn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?RI(n,e,i,[]):Jj(n,e,r,i);t.reset(s,Tn),t.notifyOnChanges()}return!0}return!1}function Zi(t,e,n){const i=yi();i.firstCreatePass&&(Qj(i,new qj(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),Zj(i,At(),e)}function zn(){return function _te(t,e){return t[Ga].queries[e].queryList}(At(),Lx())}function Zj(t,e,n){const i=new Sy(4==(4&n));(function mJ(t,e,n,i){const r=MB(e);r.push(n),t.firstCreatePass&&IB(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[Ga]&&(e[Ga]=new MI),e[Ga].queries.push(new TI(i))}function Qj(t,e,n){null===t.queries&&(t.queries=new II),t.queries.track(new DI(e,n))}function e4(t,e){return t.queries.getByIndex(e)}const FI=new bt("Application Initializer");let BI=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Ut(FI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const s of this.appInits){const o=s();if(ng(o))i.push(o);else if(c3(o)){const a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Ml=new bt("LocaleId",{providedIn:"root",factory:()=>Ut(Ml,ei.Optional|ei.SkipSelf)||function jte(){return typeof $localize<"u"&&$localize.locale||sg}()});let bE=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ye(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function x4(...t){}class on{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new en(!1),this.onMicrotaskEmpty=new en(!1),this.onStable=new en(!1),this.onError=new en(!1),typeof Zone>"u")throw new Rt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function lne(){const t="function"==typeof Si.requestAnimationFrame;let e=Si[t?"requestAnimationFrame":"setTimeout"],n=Si[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function hne(t){const e=()=>{!function une(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Si,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zI(t),t.isCheckStableRunning=!0,VI(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return w4(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),E4(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return w4(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),E4(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,zI(t),VI(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!on.isInAngularZone())throw new Rt(909,!1)}static assertNotInAngularZone(){if(on.isInAngularZone())throw new Rt(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,dne,x4,x4);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const dne={};function VI(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function w4(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function E4(t){t._nesting--,VI(t)}class fne{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new en,this.onMicrotaskEmpty=new en,this.onStable=new en,this.onError=new en}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const A4=new bt("",{providedIn:"root",factory:S4});function S4(){const t=Ut(on);let e=!0;return ir(new We(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new We(r=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{on.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=t.onUnstable.subscribe(()=>{on.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(no()))}const C4=new bt(""),vE=new bt("");let WI,GI=(()=>{var t;class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,WI||(function pne(t){WI=t}(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{on.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(on),nt(HI),nt(vE))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),HI=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return WI?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Qu=null;const T4=new bt("AllowMultipleToken"),$I=new bt("PlatformDestroyListeners"),xE=new bt("appBootstrapListener");function D4(t,e,n=[]){const i=`Platform: ${e}`,r=new bt(i);return(s=[])=>{let o=XI();if(!o||o.injector.get(T4,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function _ne(t){if(Qu&&!Qu.get(T4,!1))throw new Rt(400,!1);(function M4(){!function q_(t){K_=t}(()=>{throw new Rt(600,!1)})})(),Qu=t;const e=t.get(O4);(function I4(t){t.get(Vw,null)?.forEach(n=>n())})(t)}(function R4(t=[],e){return wr.create({name:e,providers:[{provide:Jb,useValue:"platform"},{provide:$I,useValue:new Set([()=>Qu=null])},...t]})}(a,i))}return function yne(t){const e=XI();if(!e)throw new Rt(401,!1);return e}()}}function XI(){return Qu?.get(O4)??null}let O4=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const s=function vne(t="zone.js",e){return"noop"===t?new fne:"zone.js"===t?new on(e):t}(r?.ngZone,function k4(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{const o=function Cee(t,e,n){return new wI(t,e,n)}(i.moduleType,this.injector,function B4(t){return[{provide:on,useFactory:t},{provide:gf,multi:!0,useFactory:()=>{const e=Ut(wne,{optional:!0});return()=>e.initialize()}},{provide:F4,useFactory:xne},{provide:A4,useFactory:S4}]}(()=>s)),a=o.injector.get(Oc,null);return s.runOutsideAngular(()=>{const c=s.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{wE(this._modules,o),c.unsubscribe()})}),function P4(t,e,n){try{const i=n();return ng(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,s,()=>{const c=o.injector.get(BI);return c.runInitializers(),c.donePromise.then(()=>(function tj(t){Cs(t,"Expected localeId to be defined"),"string"==typeof t&&(ej=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ml,sg)||sg),this._moduleDoBootstrap(o),o))})})}bootstrapModule(i,r=[]){const s=N4({},r);return function mne(t,e,n){const i=new EI(n);return Promise.resolve(i)}(0,0,i).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(i){const r=i.injector.get(Rf);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!i.instance.ngDoBootstrap)throw new Rt(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Rt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get($I,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(wr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function N4(t,e){return Array.isArray(e)?e.reduce(N4,t):{...t,...e}}let Rf=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ut(F4),this.zoneIsStable=Ut(A4),this.componentTypes=[],this.components=[],this.isStable=Ut(bE).hasPendingTasks.pipe(De(i=>i?Yt(!1):this.zoneIsStable),Be(),no()),this._injector=Ut(Lo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const s=i instanceof je;if(!this._injector.get(BI).done)throw!s&&function bc(t){const e=mi(t)||Cr(t)||Tr(t);return null!==e&&e.standalone}(i),new Rt(405,!1);let a;a=s?i:this._injector.get(Et).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const c=function gne(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Df),d=a.create(wr.NULL,[],r||a.selector,c),h=d.location.nativeElement,p=d.injector.get(C4,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),wE(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Rt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;wE(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(xE,[]);r.push(...this._bootstrapListeners),r.forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>wE(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Rt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function wE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const F4=new bt("",{providedIn:"root",factory:()=>Ut(Oc).handleError.bind(void 0)});function xne(){const t=Ut(on),e=Ut(Oc);return n=>t.runOutsideAngular(()=>e.handleError(n))}let wne=(()=>{var t;class e{constructor(){this.zone=Ut(on),this.applicationRef=Ut(Rf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let as=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ane,e})();function Ane(t){return function Sne(t,e,n){if(pd(t)&&!n){const i=Io(t.index,e);return new ly(i,i)}return 47&t.type?new ly(e[Ki],e):null}(ns(),At(),16==(16&t))}class z4{constructor(){}supports(e){return tE(e)}create(e){return new Rne(e)}}const Dne=(t,e)=>e;class Rne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Dne}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<H4(i,r,s)?n:i,a=H4(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,d=c-r;if(l!=d){for(let p=0;p<l;p++){const m=p<s.length?s[p]:s[p]=0,v=m+p;d<=v&&v<l&&(s[p]=m+1)}s[o.previousIndex]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!tE(e))throw new Rt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function aZ(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new One(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new G4),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G4),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class One{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class G4{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new kne,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function H4(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function $4(){return new SE([new z4])}let SE=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||$4()),deps:[[e,new Uu,new ju]]}}find(i){const r=this.factories.find(s=>s.supports(i));if(null!=r)return r;throw new Rt(901,!1)}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:$4}),e})();const Bne=D4(null,"core",[]);let jne=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Rf))},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),e})(),QI=null;function eh(){return QI}class Zne{}const Gn=new bt("DocumentToken");let tU=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return Ut(Qne)},providedIn:"platform"}),e})(),Qne=(()=>{var t;class e extends tU{constructor(){super(),this._doc=Ut(Gn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return eh().getBaseHref(this._doc)}onPopState(i){const r=eh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=eh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function nU(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function iU(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Pf(t){return t&&"?"!==t[0]?"?"+t:t}let Dy=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return Ut(tie)},providedIn:"root"}),e})();const eie=new bt("appBaseHref");let tie=(()=>{var t;class e extends Dy{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ut(Gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return nU(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+Pf(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){const a=this.prepareExternalUrl(s+Pf(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){const a=this.prepareExternalUrl(s+Pf(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(tU),nt(eie,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Ry=(()=>{var t;class e{constructor(i){this._subject=new en,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function rie(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(iU(rU(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Pf(r))}normalize(i){return e.stripTrailingSlash(function iie(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,rU(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Pf(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Pf(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}}return(t=e).normalizeQueryParams=Pf,t.joinWithSlash=nU,t.stripTrailingSlash=iU,t.\u0275fac=function(i){return new(i||t)(nt(Dy))},t.\u0275prov=St({token:t,factory:function(){return function nie(){return new Ry(nt(Dy))}()},providedIn:"root"}),e})();function rU(t){return t.replace(/\/index.html$/,"")}class Gie{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Nf=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Gie(s.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,a),gU(c,s)}});for(let s=0,o=r.length;s<o;s++){const c=r.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{gU(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Xs),Ge(Qa),Ge(SE))},t.\u0275dir=jt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function gU(t,e){t.context.$implicit=e.item}let Il=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new Hie,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){_U("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){_U("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Xs),Ge(Qa))},t.\u0275dir=jt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Hie{constructor(){this.$implicit=null,this.ngIf=null}}function _U(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Vt(e)}'.`)}class Xie{createSubscription(e,n){return hl(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){hl(()=>e.unsubscribe())}}class Yie{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const Kie=new Yie,qie=new Xie;let Py=(()=>{var t;class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(ng(i))return Kie;if(c3(i))return qie;throw function Bc(t,e){return new Rt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(as,16))},t.\u0275pipe=Wr({name:"async",type:t,pure:!1,standalone:!0}),e})(),Rr=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),e})();const AU="browser";function th(t){return t===AU}function mD(t){return"server"===t}class Bre extends Zne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class bD extends Bre{static makeCurrent(){!function Jne(t){QI||(QI=t)}(new bD)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function jre(){return Ly=Ly||document.querySelector("base"),Ly?Ly.getAttribute("href"):null}();return null==n?null:function Ure(t){UE=UE||document.createElement("a"),UE.setAttribute("href",t);const e=UE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ly=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fU(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let UE,Ly=null,zre=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const yD=new bt("EventManagerPlugins");let DU=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Rt(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(yD),nt(on))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();class RU{constructor(e){this._doc=e}}const vD="ng-app-id";let OU=(()=>{var t;class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mD(o),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${vD}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){const s=this.styleRef;if(s.has(i)){const o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(vD),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(vD,this.appId),a}}addStyleToHost(i,r){const s=this.getStyleElement(i,r);i.appendChild(s);const o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn),nt(yf),nt(vf,8),nt(ya))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const xD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wD=/%COMP%/g,$re=new bt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function PU(t,e){return e.map(n=>n.replace(wD,t))}let NU=(()=>{var t;class e{constructor(i,r,s,o,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=mD(c),this.defaultRenderer=new ED(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===pa.ShadowDom&&(r={...r,encapsulation:pa.Emulated});const s=this.getOrCreateRenderer(i,r);return s instanceof FU?s.applyToHost(i):s instanceof AD&&s.applyStyles(),s}getOrCreateRenderer(i,r){const s=this.rendererByCompId;let o=s.get(r.id);if(!o){const a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case pa.Emulated:o=new FU(l,d,r,this.appId,h,a,c,p);break;case pa.ShadowDom:return new qre(l,d,i,r,a,c,this.nonce,p);default:o=new AD(l,d,r,h,a,c,p)}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(DU),nt(OU),nt(yf),nt($re),nt(Gn),nt(ya),nt(on),nt(vf))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();class ED{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(xD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(LU(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(LU(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Rt(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=xD[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=xD[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(xl.DashCase|xl.Important)?e.style.setProperty(n,i,r&xl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&xl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=eh().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function LU(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class qre extends ED{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=PU(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class AD extends ED{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?PU(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class FU extends AD{constructor(e,n,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=function Xre(t){return"_ngcontent-%COMP%".replace(wD,t)}(l),this.hostAttr=function Yre(t){return"_nghost-%COMP%".replace(wD,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Jre=(()=>{var t;class e extends RU{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const BU=["alt","control","meta","shift"],Zre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qre={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ese=(()=>{var t;class e extends RU{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,s){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>eh().onAndCancel(i,o.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),BU.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=Zre[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),BU.forEach(a=>{a!==s&&(0,Qre[a])(i)&&(o+=a+".")}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const UU=[{provide:ya,useValue:AU},{provide:Vw,useValue:function tse(){bD.makeCurrent()},multi:!0},{provide:Gn,useFactory:function ise(){return function sM(t){jb=t}(document),document},deps:[]}],rse=D4(Bne,"browser",UU),sse=new bt(""),VU=[{provide:vE,useClass:class Vre{addToWindow(e){Si.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Rt(5103,!1);return s},Si.getAllAngularTestabilities=()=>e.getAllTestabilities(),Si.getAllAngularRootElements=()=>e.getAllRootElements(),Si.frameworkStabilizers||(Si.frameworkStabilizers=[]),Si.frameworkStabilizers.push(i=>{const r=Si.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?eh().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:C4,useClass:GI,deps:[on,HI,vE]},{provide:GI,useClass:GI,deps:[on,HI,vE]}],zU=[{provide:Jb,useValue:"root"},{provide:Oc,useFactory:function nse(){return new Oc},deps:[]},{provide:yD,useClass:Jre,multi:!0,deps:[Gn,on,ya]},{provide:yD,useClass:ese,multi:!0,deps:[Gn]},NU,OU,DU,{provide:Qn,useExisting:NU},{provide:class SU{},useClass:zre,deps:[]},[]];let ose=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:yf,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(sse,12))},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({providers:[...zU,...VU],imports:[Rr,jne]}),e})();typeof window<"u"&&window;let Fy=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(i){let r=null;return r=i?new(i||t):nt($U),r},providedIn:"root"}),e})(),$U=(()=>{var t;class e extends Fy{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case is.NONE:return r;case is.HTML:return Ya(r,"HTML")?Po(r):Gb(this._doc,String(r)).toString();case is.STYLE:return Ya(r,"Style")?Po(r):r;case is.SCRIPT:if(Ya(r,"Script"))return Po(r);throw new Rt(5200,!1);case is.URL:return Ya(r,"URL")?Po(r):Xu(String(r));case is.RESOURCE_URL:if(Ya(r,"ResourceURL"))return Po(r);throw new Rt(5201,!1);default:throw new Rt(5202,!1)}}bypassSecurityTrustHtml(i){return function lM(t){return new oM(t)}(i)}bypassSecurityTrustStyle(i){return function dM(t){return new Ti(t)}(i)}bypassSecurityTrustScript(i){return function uM(t){return new aM(t)}(i)}bypassSecurityTrustUrl(i){return function hM(t){return new Cw(t)}(i)}bypassSecurityTrustResourceUrl(i){return function fM(t){return new Nm(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn))},t.\u0275prov=St({token:t,factory:function(i){let r=null;return r=i?new i:function hse(t){return new $U(t.get(Gn))}(nt(wr)),r},providedIn:"root"}),e})();const CD={now:()=>(CD.delegate||Date).now(),delegate:void 0};class dg extends z{constructor(e=1/0,n=1/0,i=CD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}const VE={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return VE.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return VE.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let TD;function xse(t,e,n){let i=n;return function pse(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,s)=>!("*"===r||!function gse(t,e){if(!TD){const n=Element.prototype;TD=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&TD.call(t,e)}(t,r)||(i=s,0))),i}class Ese{constructor(e,n){this.componentFactory=n.get(Et).resolveComponentFactory(e)}create(e){return new Ase(this.componentFactory,e)}}class Ase{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new dg(1),this.events=this.eventEmitters.pipe(De(i=>ir(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(on),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=VE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function _se(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=wr.create({providers:[],parent:this.injector}),i=function vse(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=n.length;s<o;++s){const a=n[s],c=xse(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(as),this.implementsOnChanges=function mse(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Rf).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(M(o=>({name:r,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=VE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Qp(s,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Sse extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const Tse={initialConfig:{},parse:{},rename:{}};class Mse{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...Tse,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,n,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=n.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[o]=a}}let Ise=(()=>{var t;class e{constructor(i,r,s={}){this.configState=i,this.cdr=r,this.options=s,this.initialized=!1,this.configManager=new Mse(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return(t=e).\u0275fac=function(i){Cf()},t.\u0275dir=jt({type:t,features:[Br]}),e})();const By_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""};function YU(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Lt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(c){YU(s,i,r,o,a,"next",c)}function a(c){YU(s,i,r,o,a,"throw",c)}o(void 0)})}}function jy(t){return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ve(t,e,n){return(e=function Rse(t){var e=function Dse(t,e){if("object"!==jy(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==jy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jy(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KU(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function nc(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||KU()}window;const qU=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";nc();class kse{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ve(this,"storage",void 0),ve(this,"id",void 0),ve(this,"config",void 0),this.storage=function Ose(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function MD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let zE;var t;function JU(t){return"string"==typeof t?zE[t.toUpperCase()]||zE.WHITE:t}function GE(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=zE||(zE={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const ih={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},HE=ih.window||ih.self||ih.global,Uy=ih.process||{};function ug(){let t;var e,n;if(nc&&"performance"in HE)t=null==HE||null===(e=HE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Uy){var i;const r=null==Uy||null===(i=Uy.hrtime)||void 0===i?void 0:i.call(Uy);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const hg={debug:nc&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Use={enabled:!0,level:0};function ic(){}const ZU={},QU={once:!0};class fg{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ve(this,"id",void 0),ve(this,"VERSION",qU),ve(this,"_startTs",ug()),ve(this,"_deltaTs",ug()),ve(this,"_storage",void 0),ve(this,"userData",{}),ve(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new kse("__probe-".concat(this.id,"__"),Use),this.timeStamp("".concat(this.id," started")),function jse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(s=>r===s)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ug()-this._startTs).toPrecision(10))}getDelta(){return Number((ug()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){GE(e,n)}warn(e){return this._getLogFunction(0,e,hg.warn,arguments,QU)}error(e){return this._getLogFunction(0,e,hg.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,hg.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,hg.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,n,hg.debug||hg.info,arguments,QU)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||ic,i&&[i],{tag:Hse(n)}):ic}image(e){let{logLevel:n,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(n||i)?nc?function Gse(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=MD(s,n,i);console.log(...o)},s.src=e,ic}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...MD(e,n,i)),ic;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...MD(s,n,i)),s.src=e.toDataURL(),ic}return ic}({image:r,message:s,scale:o}):function zse(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),ic}({image:r,message:s,scale:o}):ic}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||ic)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=t8({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ic)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=e8(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=t8({logLevel:e,message:n,args:r,opts:s}),GE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=ug();const o=s.tag||s.message;if(s.once){if(ZU[o])return ic;ZU[o]=ug()}return n=function Vse(t,e,n){if("string"==typeof e){const i=n.time?function Nse(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Pse(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Bse(t,e,n){return!nc&&"string"==typeof t&&(e&&(e=JU(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=JU(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),i.bind(console,n,...s.args)}return ic}}function e8(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return GE(Number.isFinite(e)&&e>=0),e}function t8(t){const{logLevel:e,message:n}=t;t.logLevel=e8(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return GE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Hse(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ve(fg,"VERSION",qU);const _i=new fg({id:"deck"}),Ai={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ai,"IDENTITY",{get:()=>(_i.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Dl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},WE={common:0,meters:1,pixels:2},n8={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},_n=new fg({id:"luma.gl"});function Vo(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const $se="Requires WebGL2";function $E(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function pi(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function XE(t){return Vo($E(t),"Invalid WebGLRenderingContext"),t}function mo(t){return Vo(pi(t),$se),t}const zy={};const Gy=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(Gy.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Lf=function(e){const n=this;this.gl=e,function Jse(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(zy[i]=!0)}while(0!==i);for(i in zy)if(zy[i])return delete zy[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const p=h.attribs[s];return p.buffer=n.currentArrayBuffer,p.size=o,p.type=a,p.normalized=c,p.stride=l,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Kse(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Lf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Lf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new Gy(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Lf.prototype.createVertexArrayOES=function(){const e=new Gy(this);return this.vertexArrayObjects.push(e),e},Lf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Lf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Gy&&e.hasBeenBound&&e.ext===this)},Lf.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function qse(t,e){zy[t]=!0,void 0!==e&&function Yse(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const i8="OES_element_index",r8="WEBGL_draw_buffers",s8="WEBGL_debug_renderer_info",cr=t=>pi(t)?void 0:0,coe={3074:t=>pi(t)?void 0:36064,35723:t=>pi(t)?void 0:4352,35977:cr,32937:cr,36795:(t,e)=>{const n=pi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(s8);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(s8);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:cr,35071:cr,37447:cr,36063:(t,e)=>{if(!pi(t)){const n=t.getExtension(r8);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:cr,35374:cr,35377:cr,34852:t=>{if(!pi(t)){const e=t.getExtension(r8);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(i8)?2147483647:65535,33001:t=>t.getExtension(i8)?16777216:65535,33e3:t=>16777216,37157:cr,35373:cr,35657:cr,36183:cr,37137:cr,34045:cr,35978:cr,35979:cr,35968:cr,35376:cr,35375:cr,35659:cr,37154:cr,35371:cr,35658:cr,35076:cr,35077:cr,35380:cr},o8="ANGLE_instanced_arrays",a8={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Vo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[o8]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Vo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Vo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Vo(!1)},deleteQuery:()=>{Vo(!1)},beginQuery:()=>{Vo(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},ID={readBuffer:(t,e,n)=>{pi(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function moe(t,e){return{webgl2:pi(t),ext:t.getExtension(e)}}(t,o8);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!pi(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>pi(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function loe(t,e,n){const i=coe[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function voe(t,e){let{extension:n,target:i,target2:r}=e;const s=a8[n];Vo(s);const{meta:o={}}=s,{suffix:a=""}=o,c=t.getExtension(n);for(const l of Object.keys(s)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function goe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Zse(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Lf(this)),this.__OESVertexArrayObject))}}(t),function _oe(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function yoe(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&voe(t,{extension:n,target:t.luma,target2:t})}(t,a8),function boe(t,e){let{target:n,target2:i}=e;Object.keys(ID).forEach(r=>{if("function"==typeof ID[r]){const s=t[r]?t[r].bind(t):()=>{},o=ID[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const DD={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},rh=(t,e,n)=>e?t.enable(n):t.disable(n),c8=(t,e,n)=>t.hint(n,e),Aa=(t,e,n)=>t.pixelStorei(n,e);function Hy(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Eoe={3042:rh,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:rh,2885:(t,e)=>t.cullFace(e),2929:rh,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:rh,35723:c8,36006:(t,e)=>{const n=pi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:c8,2849:(t,e)=>t.lineWidth(e),32823:rh,32824:"polygonOffset",10752:"polygonOffset",35977:rh,32938:"sampleCoverage",32939:"sampleCoverage",3089:rh,3088:(t,e)=>t.scissor(...e),2960:rh,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Aa,3317:Aa,37440:Aa,37441:Aa,37443:Aa,3330:Aa,3332:Aa,3331:Aa,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Aa,32878:Aa,3316:Aa,3315:Aa,32877:Aa,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Hy(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Hy(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Hy(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=Hy(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=Hy(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function zr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const Aoe={blendEquation:(t,e,n)=>t.blendEquationSeparate(zr(32777,e,n),zr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(zr(32969,e,n),zr(32968,e,n),zr(32971,e,n),zr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(zr(32824,e,n),zr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(zr(32938,e,n),zr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,zr(2962,e,n),zr(2967,e,n),zr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,zr(34816,e,n),zr(36003,e,n),zr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,zr(2964,e,n),zr(2965,e,n),zr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,zr(34817,e,n),zr(34818,e,n),zr(34819,e,n))},l8={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Rl=(t,e)=>t.isEnabled(e),d8={3042:Rl,2884:Rl,2929:Rl,3024:Rl,32823:Rl,32926:Rl,32928:Rl,3089:Rl,2960:Rl,35977:Rl};function u8(t){for(const e in t)return!1;return!0}function Soe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function h8(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Coe(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Moe{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function Doe(t,e){if("number"==typeof(e=e||DD)){const r=e,s=d8[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=d8[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},DD),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Vo(this.stateStack.length>0),Pd(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Vo(void 0!==s);const o=e[s],a=this.cache[s];Soe(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function f8(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Vo(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new Moe(t,{copyState:i}),function Toe(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in l8)Coe(t,s,l8[s]);h8(t,"getParameter"),h8(t,"isEnabled")}return t.state.enable=n,t}function p8(t){Vo(t.state),t.state.pop()}function Pd(t,e){if(Vo($E(t),"setParameters requires a WebGL context"),u8(e))return;const n={};for(const r in e){const s=Number(r),o=Eoe[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,Aoe[r])(t,e,i)}function rc(t,e,n){if(u8(e))return n(t);const{nocatch:i=!0}=e;let r;if(function Ioe(t){t.state||f8(t,{copyState:!1}),t.state.push()}(t),Pd(t,e),i)r=n(t),p8(t);else try{r=n(t)}finally{p8(t)}return r}function pg(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function RD(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function koe(t,e,n,i,r){const s=m8(t[0],e,n);let o=g8(t[1],e,i,r),a=m8(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=g8(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,pg(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function m8(t,e,n){return Math.min(Math.round(t*e),n-1)}function g8(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const OD=nc(),Poe=OD&&typeof document<"u",_8={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function b8(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Vo(OD,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},_8,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:s}=t,o=function Boe(t){let s,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(Poe&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:n,onError:i});return r=function Foe(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,t),r?(r=kD(r,t),function joe(t){const e=pi(t)?"WebGL2":"WebGL1",n=function Noe(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";_n.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function kD(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function Uoe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},_8,e);const{manageState:n,debug:i}=e;return n&&f8(t,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return _n.log(1,...s)()}}),OD&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),_n.level=Math.max(_n.level,1)):_n.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function y8(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class v8{constructor(e,n){ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"sampleSize",1),ve(this,"time",void 0),ve(this,"count",void 0),ve(this,"samples",void 0),ve(this,"lastTiming",void 0),ve(this,"lastSampleTime",void 0),ve(this,"lastSampleCount",void 0),ve(this,"_count",0),ve(this,"_time",0),ve(this,"_samples",0),ve(this,"_startTime",0),ve(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=y8(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(y8()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class YE{constructor(e){ve(this,"id",void 0),ve(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof v8?e:new v8(n,i)),this.stats[n]}}const Wy="8.5.16";class x8{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new YE({id:e})),this.stats.get(e)}}const Ff=new x8;if(globalThis.luma&&globalThis.luma.VERSION!==Wy)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Wy));function qt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function PD(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return qt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function sh(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(nc()&&_n.log(1,"luma.gl ".concat(Wy," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Wy,version:Wy,log:_n,stats:Ff,globals:{modules:{},nodeIO:{}}}),globalThis;const ND={};function Sa(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";ND[t]=ND[t]||1;const e=ND[t]++;return"".concat(t,"-").concat(e)}function w8(t){return qt("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function mg(t){let e=!0;for(const n in t){e=!1;break}return e}function E8(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw _n.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const gg="Resource subclass must define virtual methods";class Nd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};XE(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||Sa(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qt(e=PD(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=pi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=pi(this.gl),o={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?sh(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=sh(this.gl,o[h]))}}return o}setParameter(e,n){qt(e=PD(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=pi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=PD(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return E8(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(gg)}_deleteHandle(){throw new Error(gg)}_bindHandle(e){throw new Error(gg)}_getOptsFromHandle(){throw new Error(gg)}_getParameter(e,n){throw new Error(gg)}_setParameter(e,n){throw new Error(gg)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new x8}_addStats(){const e=this[Symbol.toStringTag],n=Ff.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Ff.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(e,n),this._doTrackAllocatedMemory(e,n,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ff.get("Memory Usage");i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e),this.byteLength=e}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(e),this._doTrackDeallocatedMemory(e,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff.get("Memory Usage");n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Goe="Failed to deduce GL constant from typed array";function LD(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Goe)}}function $y(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Woe(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:o,width:r,height:s}}function FD(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";_n.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];_n.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];_n.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const $oe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Xoe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ca{static getBytesPerElement(e){return $y(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return qt(e.size),$y(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Ca($oe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ca.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ca.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=FD("Accessor",e,Xoe),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const S8={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Yoe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:S8},Koe={removedProps:S8};class er extends Nd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/Ca.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/Ca.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=FD("Buffer",e,Yoe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=FD("Buffer",e,Koe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Ca(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;qt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(mo(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return mo(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mo(this.gl);const s=$y(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const d=Math.min(o,c);return r=r||d,qt(r<=d),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(qt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;qt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=LD(e);return qt(s),this.setAccessor(new Ca(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;qt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/$y(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new Ca(this.accessor,{type:LD(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return _n.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return _n.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return _n.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return _n.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ca(this.accessor,e),this}}const BD={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},C8={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},T8={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Zoe=[9729,9728],M8=globalThis.WebGLBuffer||function(){};class Bf extends Nd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function qoe(t,e){const n=BD[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=pi(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function Joe(t,e){const n=BD[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=Sa("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(q=>this.initialize(Object.assign({},e,{pixels:q,data:q}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:p,dataFormat:m,type:v,compressed:R=!1,mipmaps:L=!0}=e;const{depth:Y=0}=e;return({width:h,height:p,compressed:R,dataFormat:m,type:v}=this._deduceParameters({format:s,type:v,dataFormat:m,compressed:R,data:n,width:h,height:p})),this.width=h,this.height=p,this.depth=Y,this.format=s,this.type=v,this.dataFormat=m,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),L&&this._isNPOT()&&(_n.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),L=!1,this._updateForNPOT(c)),this.mipmaps=L,this.setImageData({data:n,width:h,height:p,depth:Y,format:s,type:v,dataFormat:m,border:o,mipmaps:L,parameters:l,compressed:R}),L&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(_n.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),rc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:p=this.height,dataFormat:m=this.dataFormat,compressed:v=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:v,width:h,height:p}=this._deduceParameters({format:s,type:d,dataFormat:m,compressed:v,data:l,width:h,height:p}));const{gl:R}=this;R.bindTexture(this.target,this.handle);let L=null;({data:l,dataType:L}=this._getDataType({data:l,compressed:v}));let Y,q=0;return rc(this.gl,c,()=>{switch(L){case"null":R.texImage2D(n,r,s,h,p,o,m,d,l);break;case"typed-array":R.texImage2D(n,r,s,h,p,o,m,d,l,a);break;case"buffer":Y=mo(R),Y.bindBuffer(35052,l.handle||l),Y.texImage2D(n,r,s,h,p,o,m,d,a),Y.bindBuffer(35052,null);break;case"browser-object":pi(R)?R.texImage2D(n,r,s,h,p,o,m,d,l):R.texImage2D(n,r,s,m,d,l);break;case"compressed":for(const[pe,Me]of l.entries())R.compressedTexImage2D(n,pe,Me.format,Me.width,Me.height,o,Me.data),q+=Me.levelSize;break;default:qt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===L?q:l&&l.byteLength?l.byteLength:this.width*this.height*(C8[this.dataFormat]||4)*(T8[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:m=!1,offset:v=0,border:R=this.border,parameters:L={}}=e;if(({type:h,dataFormat:p,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:p,compressed:m,data:r,width:a,height:c})),qt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const Y=r;r=Y.data,a=Y.shape[0],c=Y.shape[1]}r instanceof er&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),rc(this.gl,L,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,s,o,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,s,o,a,c,p,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,s,o,a,c,p,h,r,v);else if(r instanceof M8){const Y=mo(this.gl);Y.bindBuffer(35052,r),Y.texSubImage2D(n,l,s,o,a,c,p,h,v),Y.bindBuffer(35052,null)}else pi(this.gl)?mo(this.gl).texSubImage2D(n,l,s,o,a,c,p,h,r):this.gl.texSubImage2D(n,l,s,o,p,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return _n.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof er?{data:n.handle,dataType:"buffer"}:n instanceof M8?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=BD[n];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},qt(r,"Could not deduced texture size"),qt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),qt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:qt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(pi(this.gl)||!this.width||!this.height||w8(this.width)&&w8(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Zoe.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function Qoe(t,e){return qt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class go extends Bf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Bf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};XE(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:Qoe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const jf="EXT_color_buffer_float",I8={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:jf,bpp:2},33327:{gl2:jf,bpp:4},34842:{gl2:jf,bpp:8},33326:{gl2:jf,bpp:4},33328:{gl2:jf,bpp:8},34836:{gl2:jf,bpp:16},35898:{gl2:jf,bpp:4}};class _g extends Nd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function eae(t,e,n){const i=n[e];if(!i)return!1;const r=pi(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,I8)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return qt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&pi(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*I8[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const D8=6144,P8="clear: bad arguments";function UD(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),qt(0!==o,P8),rc(t,s,()=>{t.clear(o)})}const VD=[34069,34070,34071,34072,34073,34074];let oae=(()=>{class t extends Bf{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};XE(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return Lt(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:d=5121}=n;const{gl:h}=i,p=o||a,m=yield Promise.all(VD.map(v=>{const R=p[v];return Promise.all(Array.isArray(R)?R:[R])}));i.bind(),VD.forEach((v,R)=>{m[R].length>1&&!1!==i.opts.mipmaps&&_n.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[R].forEach((L,Y)=>{r&&s?h.texImage2D(v,Y,l,r,s,c,l,d,L):h.texImage2D(v,Y,l,l,d,L)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:d=5121}=n,{gl:h}=this,p=o||a;return this.bind(),p instanceof Promise?p.then(m=>this.setImageDataForFace(Object.assign({},n,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,s,c,l,d,p):h.texImage2D(i,0,l,l,d,p),this}}return t.FACES=VD,t})();class aae extends Bf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mo(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:p={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),rc(this.gl,p,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,h),h instanceof er&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(C8[this.dataFormat]||4)*(T8[this.type]||1),"Texture"),this.loaded=!0,this}}function lae(t,e){const{gl:n,width:i,height:r,id:s}=t;return new ls(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function KE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=Xy(t);qt(d);const{gl:p,handle:m,attachments:v}=d;a=a||d.width,c=c||d.height,36064===s&&null===m&&(s=1028),qt(v[s]),l=l||v[s].type,o=function uae(t,e,n,i,r){if(t)return t;const s=$y(e=e||5121,{clamped:!1}),o=function sae(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return qt(!1),0}}(n);return new s(i*r*o)}(o,l,r,a,c),l=l||LD(o);const R=p.bindFramebuffer(36160,m);return p.readPixels(n,i,a,c,r,l,o),p.bindFramebuffer(36160,R||null),h&&d.delete(),o}function zD(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=KE(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=Woe({data:i,width:r,height:s}));!function Hoe(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function Xy(t){return t instanceof ls?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:lae(t),deleteFramebuffer:!0}}const N8="Multiple render targets not supported";class ls extends Nd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new ls(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=mo(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=mo(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(qt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const p=r[h];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return qt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&_n.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){qt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof _g)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,p=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:p})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function fae(t){return(ls.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&UD(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,c)=>{!function rae(t){let{framebuffer:e=null,buffer:n=D8,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mo(t),rc(t,{framebuffer:e},()=>{switch(n){case D8:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:qt(!1,P8)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return _n.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return _n.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return _n.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return _n.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return _n.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return _n.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=mo(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=sh(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?sh(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?sh(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(zD(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>_n.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=zD(this,{targetMaxHeight:100});return _n.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new go(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new _g(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new _g(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&qt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof _g?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:mo(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const c=function hae(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:qt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Xse(t){return pi(t)?t:null}(this.gl);n?n.readBuffer(e):qt(36064===e||1029===e,N8),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=mo(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):qt(1===e.length&&(36064===e[0]||1029===e[0]),N8)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function bae(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in L8)void 0===t.luma.caps[e]&&(t.luma.caps[e]=B8(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}ls.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const L8={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function mae(t){const e=new go(t,{format:6408,type:5126,dataFormat:6408}),n=new ls(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},gae=2;function F8(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>B8(t,n))}function B8(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function yae(t,e){const n=L8[e];let i;qt(n,e);const r=pi(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:qt(!1);return i}(t,e)),t.luma.caps[e]||_n.log(gae,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class GD{constructor(e,n){ve(this,"opts",void 0),ve(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=n.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const Yy=new class xae{constructor(e={}){ve(this,"_pool",[]),ve(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=n*i+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+s);const p=this._allocate(l,d,a,h);return e&&o?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(o=>o.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}},wae=1/Math.PI*180,Eae=1/180*Math.PI,Zr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Aae(t,{precision:e=Zr.precision}={}){return t=function Iae(t){return Math.round(t/Zr.EPSILON)*Zr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Ld(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function j8(t){return function Cae(t,e){return Bd(t,n=>n*Eae,e)}(t)}function Sae(t){return function Tae(t,e){return Bd(t,n=>n*wae,e)}(t)}function Or(t,e,n){return Bd(t,i=>Math.max(e,Math.min(n,i)))}function qE(t,e,n){return Ld(t)?t.map((i,r)=>qE(i,e[r],n)):n*e+(1-n)*t}function Fd(t,e,n){const i=Zr.EPSILON;n&&(Zr.EPSILON=n);try{if(t===e)return!0;if(Ld(t)&&Ld(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Fd(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Zr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Zr.EPSILON=i}}function Bd(t,e,n){if(Ld(t)){const i=t;n=n||function Dae(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class JE extends(function Rae(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Ld(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Zr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+Aae(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Fd(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Zr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function ui(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Ky(t,e,n=""){if(Zr.debug&&!function Oae(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function qy(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class V8 extends JE{get x(){return this[0]}set x(e){this[0]=ui(e)}get y(){return this[1]}set y(e){this[1]=ui(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return ui(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return ui(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return qy(e>=0&&e<this.ELEMENTS,"index is out of range"),ui(this[e])}setComponent(e,n){return qy(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Ol=1e-6,na=typeof Float32Array<"u"?Float32Array:Array;function z8(){var t=new na(3);return na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function G8(t,e,n){var i=new na(3);return i[0]=t,i[1]=e,i[2]=n,i}function H8(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ZE(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function HD(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function W8(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function $8(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],c=e[1],l=e[2],d=r*l-s*c,h=s*a-i*l,p=i*c-r*a,m=r*p-s*h,v=s*d-i*p,R=i*h-r*d,L=2*n[3];return h*=L,p*=L,v*=2,R*=2,t[0]=a+(d*=L)+(m*=2),t[1]=c+h+v,t[2]=l+p+R,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function X8(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o,t}function Y8(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3],t}z8();const WD=[0,0,0];let QE;class tn extends V8{static get ZERO(){return QE||(QE=new tn(0,0,0),Object.freeze(QE)),QE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&Ld(e)?this.copy(e):(Zr.debug&&(ui(e),ui(n),ui(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Zr.debug&&(ui(e.x),ui(e.y),ui(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ui(e)}angle(e){return function Vae(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],d=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=d&&H8(t,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return ZE(this,this,e),this.check()}rotateX({radians:e,origin:n=WD}){return function Bae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=WD}){return function jae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=WD}){return function Uae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return HD(this,this,e),this.check()}transformAsVector(e){return X8(this,this,e),this.check()}transformByMatrix3(e){return W8(this,this,e),this.check()}transformByMatrix2(e){return function Wae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return $8(this,this,e),this.check()}}const K8=new tn;function bg(t,e,n,i){K8.set(t,e,n);const r=K8.len();return{distance:i/r,normal:new tn(-t/r,-e/r,-n/r)}}function qae(t){return t-Math.fround(t)}let Zy;function $D(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,s=(r-i)/n;Zy=Yy.allocate(Zy,s,{type:Float32Array,size:2*n});let o=i,a=0;for(;o<r;){for(let c=0;c<n;c++){const l=t[o++];Zy[a+c]=l,Zy[a+c+n]=qae(l)}a+=2*n}return Zy.subarray(0,s*n*2)}function e1(t){return t.stride||t.size*t.bytesPerElement}function q8(t,e){e.offset&&_i.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=e1(t),s=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}class Zae{constructor(e,n,i){ve(this,"gl",void 0),ve(this,"id",void 0),ve(this,"size",void 0),ve(this,"settings",void 0),ve(this,"value",void 0),ve(this,"doublePrecision",void 0),ve(this,"_buffer",void 0),ve(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=5130===r;let a,{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&n.isIndexed?e&&function _ae(t,e){return F8(t,e)}(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function vae(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new er(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*e1(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Yy.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function Jae(t,e){const n=q8(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new GD(this,s.high),i["".concat(e,"64Low")]=r?new GD(this,s.low):new Float32Array(this.size),i}if(n){const i=q8(this.getAccessor(),n);return{[e]:new GD(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const d=n[c++];d<o[l]&&(o[l]=d),d>a[l]&&(a[l]=d)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof er?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),n.constant&&this._areValuesEqual(s,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=e1(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=e1(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=$D(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?$D(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=Yy.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&r&&o.subData({data:r instanceof Float64Array?$D(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&_i.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e)return n[i]=r[0],n;switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)n[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}function Ys(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const J8=[],Z8=[];function t1(t,e=0,n=1/0){let i=J8;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(Z8.length=t.length,i=Z8):i=J8,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function Q8(t){return t&&t[Symbol.asyncIterator]}function XD(t,e=(()=>!0)){return Array.isArray(t)?e6(t,e,[]):e(t)?[t]:[]}function e6(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?e6(r,e,n):e(r)&&n.push(r)}return n}function ece({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=n;o<r;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const tce=[],n1=[[0,1/0]];function YD(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!s)return;let l=a;for(;l<c;){const d=s(l,e);for(let h=0;h<r;h++)n[i+l]=d[h]||0,l++}}const rce={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function t6(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...rce[n],...e,...t,type:n}}function n6(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function i6(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function r6(t){t.push(t.shift())}function KD(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,o=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function s6({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,c=n.byteOffset,l=n.startIndices,d=r&&l,h=KD(n,e),p=n.isConstant;if(!d&&i>=h)return;const m=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){const Y=s;s=(q,pe)=>n.normalizeConstant(Y(q,pe))}const v=p?(Y,q)=>s(m,q):(Y,q)=>s(m.subarray(Y,Y+a),q),R=t.getData({length:i}),L=new Float32Array(h);(function ice({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return YD({source:t,target:e,size:n,getData:i}),e;let o=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,s.length);for(let d=1;d<l;d++){const h=r[d]*n,p=s[d]*n;YD({source:t.subarray(o,h),target:e,start:a,end:p,size:n,getData:c}),o=h,a=p}a<e.length&&YD({source:[],target:e,start:a,size:n,getData:c})})({source:R,target:L,sourceStartIndices:r,targetStartIndices:l,size:a,getData:v}),t.byteLength<L.byteLength+c&&t.reallocate(L.byteLength+c),t.subData({data:L,offset:c})}class qD extends Zae{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:n1}),ve(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return t6(Array.isArray(n)?e[n.find(s=>e[s])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function nce(t,e){if(t===n1||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const o=t[s];o[1]<e[0]?(n.push(o),r=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=n1}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=tce}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==n1),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,d]of s)o.call(r,this,{data:n,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return Ys(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Qae(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,d=Math.floor((t.length-l)/c);return(h,{index:p,target:m})=>{if(!s){const Y=p*c+l;for(let q=0;q<n;q++)m[q]=t[Y+q];return m}const v=s[p],R=s[p+1]||d;let L;if(o){L=new Array(R-v);for(let Y=v;Y<R;Y++){const q=Y*c+l;m=new Array(n);for(let pe=0;pe<n;pe++)m[pe]=t[q+pe];L[Y-v]=m}}else if(c===n)L=t.subarray(v*n+l,R*n+l);else{L=new t.constructor((R-v)*n);let Y=0;for(let q=v;q<R;q++){const pe=q*c+l;for(let Me=0;Me<n;Me++)L[Y++]=t[pe+Me]}}return L}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:p,transform:m}=a,v=c.binaryAccessor||("function"==typeof p?p:s[p]);Ys("function"==typeof v,'accessor "'.concat(p,'" is not a function'));let R=e.getVertexOffset(i);const{iterable:L,objectInfo:Y}=t1(n,i,r);for(const q of L){Y.index++;let pe=v(q,Y);if(m&&(pe=m.call(this,pe)),h){const Me=(Y.index<h.length-1?h[Y.index+1]:o)-h[Y.index];if(pe&&Array.isArray(pe[0])){let Ue=R;for(const Ze of pe)e._normalizeValue(Ze,l,Ue),Ue+=d}else pe&&pe.length>d?l.set(pe,R):(e._normalizeValue(pe,Y.target,0),ece({target:l,source:Y.target,start:R,count:Me}));R+=Me*d}else e._normalizeValue(pe,l,R),R+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let JD={};function _o(t,e,n,i){_i.level>0&&JD[t]&&JD[t].call(null,e,n,i)}function Ta(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const o6="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",ace="#version 300 es\n".concat(o6);function a6(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,s]=n;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function c6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?ace:e>300?"#version ".concat(e,"\n").concat(o6):"void main() {gl_FragColor = vec4(0);}";const s=function dce(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ta(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class l6 extends Nd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mo(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,mg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,_n.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof er?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class uce{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof er?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&qt(pi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=n[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new l6(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];n[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],qt(i[s]instanceof er)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new er(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function d6(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const Qy="vs",pce={[Qy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},r1="__LUMA_INJECT_DECLARATIONS__",u6=/void\s+main\s*\([^)]*\)\s*\{\n?/,h6=/}\n?[^{}]*$/,QD=[];function f6(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===Qy;for(const s in n){const o=n[s];o.sort((c,l)=>c.order-l.order),QD.length=o.length;for(let c=0,l=o.length;c<l;++c)QD[c]=o[c].injection;const a="".concat(QD.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(r1,a));break;case"vs:#main-start":r&&(t=t.replace(u6,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(h6,c=>a+c));break;case"fs:#decl":r||(t=t.replace(r1,a));break;case"fs:#main-start":r||(t=t.replace(u6,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(h6,c=>a+c));break;default:t=t.replace(s,c=>c+a)}}return t=t.replace(r1,""),i&&(t=t.replace(/\}\s*$/,s=>s+pce[e])),t}function eR(t){const e={};return Ta(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}const mce={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},s1="transform_uSize_",p6="transform_position";const Ece={10241:9728,10240:9728,10242:33071,10243:33071};class Sce{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function bce(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let s,o;n&&(({width:s,height:o}=i),r["".concat(s1).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(s1).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=KE(n);if(!e)return i;const r=i.constructor,s=function lce(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ta(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof go)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new er(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new ls(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(Ece)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function cae(t,e){qt(t instanceof go||t instanceof oae||t instanceof aae);const n=t.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:d}=t;return new n(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function _ce(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,o=Object.keys(n).length,a=null;const c={};let l=e,d={};if(o>0||i){const h=l.split("\n"),p=h.slice();if(h.forEach((m,v,R)=>{if(o>0){const L=function wce(t,e){const n={},i=function yce(t){return a6(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function vce(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(s1).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(s),d=function cce(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ta(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return n[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(m,n);if(L){const{updatedLine:Y,inject:q}=L;p[v]=Y,d=eR([d,q]),Object.assign(c,L.samplerTextureMap),o--}}i&&!a&&(a=function xce(t,e){const n=a6(t,["varying","out"]);return n&&n.name===e?n.type:null}(m,i))}),i){qt(r);const m="".concat(s1).concat(i),v="uniform vec2 ".concat(m,";\n"),R="     vec2 ".concat(p6," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(p6,", 0, 1.);\n");d=eR([d,{"vs:#decl":v,"vs:#main-start":R}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=eR([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||c6({version:d6(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[mce].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}const tR={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function Tce(t){let e=m6(t);return"object"===e?t?"type"in t?Object.assign({},t,tR[t.type]):"value"in t?(e=m6(t.value),Object.assign({type:e},t,tR[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},tR[e])}function m6(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class nR{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:p}=e;Ta("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||p,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Dce(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),o&&(this.uniforms=function Cce(t){const e={};for(const n in t){const r=Tce(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Ta(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ta(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function Rce(t){return function g6(t){const e={},n={};return iR({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(_6(t))}function iR(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&iR({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function _6(t,e){return t.map(n=>(n instanceof nR||(Ta("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ta(n.name,"shader module has no name"),(n=new nR(n)).dependencies=_6(n.dependencies)),n))}const kce=7936,Pce=7937,Nce=7938,Lce=35724,rR={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Uf={};function jce(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(rR).forEach(t=>{Uf[t]=t});const sR={};function b6(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=rR[e];if(Ta(i,e),!function Oce(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in sR)return sR[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),sR[e]=c,c}function o1(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function Uce(t,e){const n=rR[e];Ta(n,e);const i=function Fce(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Ta(!1===r||!0===r),r}(t,n))}function yg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const y6=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Gce=[...y6,[yg("attribute"),"in $1"],[yg("varying"),"out $1"]],Hce=[...y6,[yg("varying"),"in $1"]],v6=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Wce=[...v6,[yg("in"),"attribute $1"],[yg("out"),"varying $1"]],$ce=[...v6,[yg("in"),"varying $1"]],oR="gl_FragColor",aR=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Xce=/void\s+main\s*\([^)]*\)\s*\{\n?/;function a1(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Jce="\n\n".concat(r1,"\n\n"),x6={[Qy]:"vertex",fs:"fragment"};function w6(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;Ta("string"==typeof i,"shader source must be a string");const p=r===Qy,m=i.split("\n");let v=100,R="",L=i;0===m[0].indexOf("#version ")?(v=300,R=m[0],L=m.slice(1).join("\n")):R="#version ".concat(v);const Y={};s.forEach(at=>{Object.assign(Y,at.getDefines())}),Object.assign(Y,o);let q=d?"".concat(R,"\n").concat(function nle(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(x6[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function tle(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(x6[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Vce(t){switch(function Bce(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||kce),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Pce);return{gpuVendor:jce(n,i),vendor:n,renderer:i,version:t.getParameter(Nce),shadingLanguageVersion:t.getParameter(Lce)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function zce(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return o1(t,Uf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),o1(t,Uf.GLSL_DERIVATIVES)&&b6(t,Uf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),o1(t,Uf.GLSL_FRAG_DATA)&&b6(t,Uf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),o1(t,Uf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function ile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(Y),"\n").concat(p?"":"precision highp float;\n\n","\n"):"".concat(R,"\n");const pe=function sle(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),Me={},Ue={},Ze={};for(const at in c){const mt="string"==typeof c[at]?{injection:c[at],order:0}:c[at],pt=at.match(/^(v|f)s:(#)?([\w-]+)$/);pt?pt[2]?"decl"===pt[3]?Ue[at]=[mt]:Ze[at]=[mt]:Me[at]=[mt]:Ze[at]=[mt]}for(const at of s){h&&at.checkDeprecations(L,h),q+=at.getModuleSource(r,v);const pt=at.injections[r];for(const ht in pt){const yt=ht.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ft="decl"===yt[2]?Ue:Ze;ft[ht]=ft[ht]||[],ft[ht].push(pt[ht])}else Me[ht]=Me[ht]||[],Me[ht].push(pt[ht])}}return q+=Jce,q=f6(q,r,Ue),q+=function rle(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(pe[r],Me),q+=L,q=f6(q,r,Ze),q=function Yce(t,e,n){switch(e){case 300:return n?a1(t,Gce):function Kce(t){const e=(t=a1(t,Hce)).match(aR);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(oR,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Xce,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(oR,"\\b"),"g"),n)}return t}(t);case 100:return n?a1(t,Wce):function qce(t){const e=(t=a1(t,$ce)).match(aR);if(e){const n=e[1];t=t.replace(aR,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),oR)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(q,l?100:v,p),q}function ele(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const ole={5126:fr.bind(null,"uniform1fv",Ma,1,bo),35664:fr.bind(null,"uniform2fv",Ma,2,bo),35665:fr.bind(null,"uniform3fv",Ma,3,bo),35666:fr.bind(null,"uniform4fv",Ma,4,bo),5124:fr.bind(null,"uniform1iv",oh,1,bo),35667:fr.bind(null,"uniform2iv",oh,2,bo),35668:fr.bind(null,"uniform3iv",oh,3,bo),35669:fr.bind(null,"uniform4iv",oh,4,bo),35670:fr.bind(null,"uniform1iv",oh,1,bo),35671:fr.bind(null,"uniform2iv",oh,2,bo),35672:fr.bind(null,"uniform3iv",oh,3,bo),35673:fr.bind(null,"uniform4iv",oh,4,bo),35674:fr.bind(null,"uniformMatrix2fv",Ma,4,jd),35675:fr.bind(null,"uniformMatrix3fv",Ma,9,jd),35676:fr.bind(null,"uniformMatrix4fv",Ma,16,jd),35678:Ks,35680:Ks,5125:fr.bind(null,"uniform1uiv",c1,1,bo),36294:fr.bind(null,"uniform2uiv",c1,2,bo),36295:fr.bind(null,"uniform3uiv",c1,3,bo),36296:fr.bind(null,"uniform4uiv",c1,4,bo),35685:fr.bind(null,"uniformMatrix2x3fv",Ma,6,jd),35686:fr.bind(null,"uniformMatrix2x4fv",Ma,8,jd),35687:fr.bind(null,"uniformMatrix3x2fv",Ma,6,jd),35688:fr.bind(null,"uniformMatrix3x4fv",Ma,12,jd),35689:fr.bind(null,"uniformMatrix4x2fv",Ma,8,jd),35690:fr.bind(null,"uniformMatrix4x3fv",Ma,12,jd),35678:Ks,35680:Ks,35679:Ks,35682:Ks,36289:Ks,36292:Ks,36293:Ks,36298:Ks,36299:Ks,36300:Ks,36303:Ks,36306:Ks,36307:Ks,36308:Ks,36311:Ks},ale={},cle={},lle={},E6=[0];function cR(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(E6[0]=t,t=E6);const r=t.length;if(r%e&&_n.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Ma(t,e){return cR(t,e,Float32Array,ale)}function oh(t,e){return cR(t,e,Int32Array,cle)}function c1(t,e){return cR(t,e,Uint32Array,lle)}function A6(t,e,n){const i=ole[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function dle(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function hle(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function ple(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof Bf||t instanceof _g)||t instanceof ls&&!!t.texture}function fle(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Ks(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function fr(t,e,n,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),s=d,h=!0;else{qt(s===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(l[p]!==r[p]){h=!0;break}}return h&&(i(o,t,a,l),r.set(l)),h}}function bo(t,e,n,i){t[e](n,i)}function jd(t,e,n,i){t[e](n,!1,i)}function l1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function C6(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();n+=T6("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function T6(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class e0 extends Nd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return qt(!1),"unknown"}}constructor(e,n){XE(e),qt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:l1(n.source,null)||n.id||Sa("unnamed ".concat(e0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=l1(n,null);i&&(this.id=Sa(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(e0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return l1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function S6(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||l1(e)||"(unnamed)",c="".concat(function _le(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const p=h.split(":"),m=p[0],v=parseInt(p[2],10);if(isNaN(v))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?s[v]=h:o[v]=h}const l=function ble(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return T6(a,r-a.length)+n+s})}(e);return{shaderName:c,errors:C6(s,l),warnings:C6(o,l)}}(i,this.source,this.shaderType,this.id);throw _n.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),_n.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class lR extends e0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class dR extends e0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const vle=5120,xle=5121,wle=5122,Ele=5123,vs=5126,t0=5124,n0=5125,uR={[vs]:[vs,1,"float"],35664:[vs,2,"vec2"],35665:[vs,3,"vec3"],35666:[vs,4,"vec4"],[t0]:[t0,1,"int"],35667:[t0,2,"ivec2"],35668:[t0,3,"ivec3"],35669:[t0,4,"ivec4"],[n0]:[n0,1,"uint"],36294:[n0,2,"uvec2"],36295:[n0,3,"uvec3"],36296:[n0,4,"uvec4"],35670:[vs,1,"bool"],35671:[vs,2,"bvec2"],35672:[vs,3,"bvec3"],35673:[vs,4,"bvec4"],35674:[vs,8,"mat2"],35685:[vs,8,"mat2x3"],35686:[vs,8,"mat2x4"],35675:[vs,12,"mat3"],35687:[vs,12,"mat3x2"],35688:[vs,12,"mat3x4"],35676:[vs,16,"mat4"],35689:[vs,16,"mat4x2"],35690:[vs,16,"mat4x3"]};function k6(t){const e=uR[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function P6(t,e){switch(t){case vle:case xle:case wle:case Ele:t=vs}for(const n in uR){const[i,r,s]=uR[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class Xle{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!pi(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=k6(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new Ca(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=k6(i),c={location:e,name:n,accessor:new Ca({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Yle=35981,Kle=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class L6 extends Nd{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",Kle),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=Yle}=e;return this.hash=n||"",this.vs="string"==typeof i?new lR(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new dR(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,qt(this.vs instanceof lR),qt(this.fs instanceof dR),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(mo(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Xle(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:p=null,transformFeedback:m,framebuffer:v,parameters:R={},uniforms:L,samplers:Y}=e;if((L||Y)&&(_n.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(L||{})),_n.priority>=n){const q=v?v.id:"default",pe="mode=".concat(sh(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(sh(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(q);_n.log(n,pe)()}return qt(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(p.bindForDraw(r,d,()=>{if(void 0!==v&&(R=Object.assign({},R,{framebuffer:v})),m){const q=function O6(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return qt(!1),0}}(i);m.begin(q)}this._bindTextures(),rc(this.gl,R,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,d):c&&pi(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,d):this.gl.drawArrays(i,s,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n.priority>=2&&function ule(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!hle(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof ls&&(s=s.texture),s instanceof Bf)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&fle(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new lR({handle:r});break;case 35632:i.fs=new dR({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Sa(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),_n.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),_n.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||_n.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=dle(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=A6(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=A6(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class r0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new r0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),p=l.map(pe=>this._getHash(pe.name)).sort(),m=o.map(pe=>this._getHash(pe)),v=Object.keys(r).sort(),R=Object.keys(s).sort(),L=[],Y=[];for(const pe of v)L.push(this._getHash(pe)),L.push(this._getHash(r[pe]));for(const pe of R)Y.push(this._getHash(pe)),Y.push(this._getHash(s[pe]));const q="".concat(d,"/").concat(h,"D").concat(L.join("/"),"M").concat(p.join("/"),"I").concat(Y.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[q]){const pe=function Qce(t,e){const{vs:n,fs:i}=e,r=Rce(e.modules||[]);return{gl:t,vs:w6(t,Object.assign({},e,{source:n,type:Qy,modules:r})),fs:w6(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:ele(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[q]=new L6(this.gl,{hash:q,vs:pe.vs,fs:pe.fs,varyings:o,bufferMode:a}),this._getUniforms[q]=pe.getUniforms||(Me=>{}),this._useCounts[q]=0}return this._useCounts[q]++,this._programCache[q]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;n[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let u1=null;const h1=globalThis;function hR(t){if(!t&&!nc())return"Node";if(KU(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":h1.chrome?"Chrome":h1.safari?"Safari":h1.mozInnerScreenX?"Firefox":"Unknown"}class Ia extends Nd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||pi(e)||"Chrome"===hR()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ia(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ia.MAX_ATTRIBUTES=Ia.MAX_ATTRIBUTES||e.getParameter(34921),Ia.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ia._setConstantFloatArray(e,n,i);break;case Int32Array:Ia._setConstantIntArray(e,n,i);break;case Uint32Array:Ia._setConstantUintArray(e,n,i);break;default:qt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ia.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return qt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(qt(pi(h)),p.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Ia.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new er(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function Jle(t,e){const n=function qle(t){return(!u1||u1.byteLength<t)&&(u1=new ArrayBuffer(t)),u1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function Zle(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:qt(!1)}}static _setConstantIntArray(e,n,i){switch(qt(pi(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:qt(!1)}}static _setConstantUintArray(e,n,i){switch(qt(pi(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:qt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return qt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const tde=/^(.+)__LOCATION_([0-9]+)$/,nde=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class ide{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ia(e),E8(this,"VertexArray","v6.0",nde),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new er(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof er&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof er&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,_n.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const d=Ca.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:p}=d;return qt(Number.isFinite(h)&&Number.isFinite(p)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=tde.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof er)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof er)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof er))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(Ia.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ia.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof er){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _n.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function s0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function rde(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=s0(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function F6(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,s="NOT PROVIDED",o=1,a=0,c=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof er){const p=e,{data:m,changed:v}=p.getDebugData();let R;return d=v?"*":"",h=m,c=p.byteLength,a=c/m.BYTES_PER_ELEMENT/o,n?R="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(sh(r,s),")"):(l=!0,R="".concat(c," bytes")),{[i]:"".concat(d).concat(s0(h,{size:o,isInteger:l})),"Format ":R}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(s0(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function ode(t,e){const{type:n,size:i}=e,r=P6(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function B6(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;qt(n);const o=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(o)&&fR({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(o)&&fR({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||fR({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const p={};if(!r)for(const m in i){const v=i[m];c[m]||(h++,p[m]={Type:"NOT USED: ".concat(v),[e]:s0(v)})}return{table:c,count:d,unusedTable:p,unusedCount:h}}function fR(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function ade(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?s0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function j6(t){const{type:e,size:n}=t.accessor,i=P6(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const lde={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function ude(t,e){const{attributeMap:n=lde}=e||{};return n&&n[t]||t}function hde(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}qt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const U6=()=>{},mde={};class f1{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=Sa("model")}=n;qt($E(e)),this.id=i,this.gl=e,this.id=n.id||Sa("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||r0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},qt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return qt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return qt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function dde(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=ude(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new er(t,c),l],hde(s,l)}}if(r){const s=r.value||r;qt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new er(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mg(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return UD(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),_n.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:p=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:v=d.isInstanced}=this.props;v&&!this.isInstanced&&_n.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:R,instanceCount:L}=this,{onBeforeRender:Y=U6,onAfterRender:q=U6}=this.props;Y(),this.program.setUniforms(this.uniforms);const pe=this.program.draw(Object.assign(mde,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:p,isInstanced:R,instanceCount:L,offset:h?m:0}));return q(),_n.priority>=2&&this._logDrawCallEnd(l,c,i),pe}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _n.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}qt(n instanceof L6,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new ide(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof er&&n.delete()}}_setAnimationProps(e){this.animated&&qt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(mg(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new l6(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),_n.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:_n.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function sde(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=F6(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(ode(o.name,c))),i[a]=F6(e,r[s],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=B6({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=B6({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&_n.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&_n.log("UNUSED UNIFORMS",Object.keys(a))();const h=function cde(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=j6(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=j6(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);_n.table(e,s)(),_n.table(e,o)(),_n.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),_n.groupEnd(2)()}}class pR{static isSupported(e){return pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();qt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new f1(n,Object.assign({},e,{fs:e.fs||c6({version:d6(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function gde(t){return!(mg(t.feedbackBuffers)&&mg(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new uce(e,n)),function _de(t){return!(mg(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new Sce(e,n)),qt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}class o0{constructor(e){ve(this,"_inProgress",void 0),ve(this,"_handle",void 0),ve(this,"_timeline",void 0),ve(this,"time",void 0),ve(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Sde={interpolation:class bde{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","interpolation"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.transition=new o0(i),this.attribute=n,this.attributeInTransition=new qD(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function vde(t,e){const n=i6(e.size);return new pR(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new er(e,r),new er(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;r6(r);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)s6({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=KD(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:n6(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let s=r/n;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class xde{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","spring"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"texture",void 0),ve(this,"framebuffer",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new o0(i),this.attribute=n,this.attributeInTransition=new qD(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function Ede(t){return new go(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function Ade(t,e){return new ls(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function wde(t,e,n){const i=i6(e.size);return new pR(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new er(e,r),new er(e,r),new er(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)s6({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=KD(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:n6(0,s)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),r6(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),KE(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Cde{constructor(e,{id:n,timeline:i}){ve(this,"id",void 0),ve(this,"isSupported",void 0),ve(this,"gl",void 0),ve(this,"timeline",void 0),ve(this,"transitions",void 0),ve(this,"needsRedraw",void 0),ve(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=pR.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(n);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void _i.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=Sde[i.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(_i.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const V6="attributeManager.invalidate";class Ode{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"attributes",void 0),ve(this,"updateTriggers",void 0),ve(this,"needsRedraw",void 0),ve(this,"userData",void 0),ve(this,"stats",void 0),ve(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new Cde(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);_o(V6,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);_o(V6,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;_o("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=n,s[l]&&_i.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(o[l])||d.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&d.setConstantValue(s[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&_o("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new qD(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;_o("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&_o("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,_o("attribute.updateEnd",n,i)))}}function G6(t,e,n,i,r){const s=e-t;return(n-e)*r+-s*i+s+e}function H6(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const Lde={interpolation:class kde extends o0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=qE(n,i,o)}},spring:class Nde extends o0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function Pde(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=G6(t[o],e[o],n[o],i,r);return s}return G6(t,e,n,i,r)}(s,o,n,i,r);const c=H6(a,n),l=H6(a,o);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}};class Fde{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=t6(r)))return;const o=Lde[r.type];if(!o)return void _i.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:n,toValue:i}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const p1=Symbol.for("component"),Ag=Symbol.for("asyncPropDefaults"),Vf=Symbol.for("asyncPropOriginal"),ah=Symbol.for("asyncPropResolved");function Ude(t,e){if(!t.transitions)return!1;const n={},i=gR(t);let r=!1;for(const s in t.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&mR(t[s],e[s],o)&&(n[s]=!0,r=!0)}return!!r&&n}function W6({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=mR(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=mR(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function mR(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function Gde(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function $6(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},W6({oldProps:r,newProps:i,triggerName:n})}function gR(t){const e=t[p1],n=e&&e.constructor;return n?n._propTypes:{}}function Kde(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function m1(t){let n,e={};return i=>{for(const r in i)if(!Kde(i[r],e[r])){n=t(i),e=i;break}return n}}function qde(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function _R(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],p=e[10],m=e[11],v=e[12],R=e[13],L=e[14],Y=e[15],q=n*a-i*o,pe=n*c-r*o,Me=n*l-s*o,Ue=i*c-r*a,Ze=i*l-s*a,at=r*l-s*c,mt=d*R-h*v,pt=d*L-p*v,ht=d*Y-m*v,yt=h*L-p*R,It=h*Y-m*R,ft=p*Y-m*L,vt=q*ft-pe*It+Me*yt+Ue*ht-Ze*pt+at*mt;return vt?(t[0]=(a*ft-c*It+l*yt)*(vt=1/vt),t[1]=(r*It-i*ft-s*yt)*vt,t[2]=(R*at-L*Ze+Y*Ue)*vt,t[3]=(p*Ze-h*at-m*Ue)*vt,t[4]=(c*ht-o*ft-l*pt)*vt,t[5]=(n*ft-r*ht+s*pt)*vt,t[6]=(L*Me-v*at-Y*pe)*vt,t[7]=(d*at-p*Me+m*pe)*vt,t[8]=(o*It-a*ht+l*mt)*vt,t[9]=(i*ht-n*It-s*mt)*vt,t[10]=(v*Ze-R*Me+Y*q)*vt,t[11]=(h*Me-d*Ze-m*q)*vt,t[12]=(a*pt-o*yt-c*mt)*vt,t[13]=(n*yt-i*pt+r*mt)*vt,t[14]=(R*pe-v*Ue-L*q)*vt,t[15]=(d*Ue-h*pe+p*q)*vt,t):null}function zf(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=e[9],m=e[10],v=e[11],R=e[12],L=e[13],Y=e[14],q=e[15],pe=n[0],Me=n[1],Ue=n[2],Ze=n[3];return t[0]=pe*i+Me*a+Ue*h+Ze*R,t[1]=pe*r+Me*c+Ue*p+Ze*L,t[2]=pe*s+Me*l+Ue*m+Ze*Y,t[3]=pe*o+Me*d+Ue*v+Ze*q,t[4]=(pe=n[4])*i+(Me=n[5])*a+(Ue=n[6])*h+(Ze=n[7])*R,t[5]=pe*r+Me*c+Ue*p+Ze*L,t[6]=pe*s+Me*l+Ue*m+Ze*Y,t[7]=pe*o+Me*d+Ue*v+Ze*q,t[8]=(pe=n[8])*i+(Me=n[9])*a+(Ue=n[10])*h+(Ze=n[11])*R,t[9]=pe*r+Me*c+Ue*p+Ze*L,t[10]=pe*s+Me*l+Ue*m+Ze*Y,t[11]=pe*o+Me*d+Ue*v+Ze*q,t[12]=(pe=n[12])*i+(Me=n[13])*a+(Ue=n[14])*h+(Ze=n[15])*R,t[13]=pe*r+Me*c+Ue*p+Ze*L,t[14]=pe*s+Me*l+Ue*m+Ze*Y,t[15]=pe*o+Me*d+Ue*v+Ze*q,t}function g1(t,e,n){var o,a,c,l,d,h,p,m,v,R,L,Y,i=n[0],r=n[1],s=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],v=e[8],R=e[9],L=e[10],Y=e[11],t[0]=o=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=d,t[5]=h,t[6]=p,t[7]=m,t[8]=v,t[9]=R,t[10]=L,t[11]=Y,t[12]=o*i+d*r+v*s+e[12],t[13]=a*i+h*r+R*s+e[13],t[14]=c*i+p*r+L*s+e[14],t[15]=l*i+m*r+Y*s+e[15]),t}function bR(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function X6(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+l*i,t[5]=o*r+d*i,t[6]=a*r+h*i,t[7]=c*r+p*i,t[8]=l*r-s*i,t[9]=d*r-o*i,t[10]=h*r-a*i,t[11]=p*r-c*i,t}function Y6(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+l*i,t[1]=o*r+d*i,t[2]=a*r+h*i,t[3]=c*r+p*i,t[4]=l*r-s*i,t[5]=d*r-o*i,t[6]=h*r-a*i,t[7]=p*r-c*i,t}function q6(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function a0(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}!function due(){var t=new na(4);na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const J6=[0,0,0,0],Aue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Z6=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Sue=[0,0,0],Q6=[0,0,0],Cue=m1(function Iue({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Tue(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=J6,c=J6,l=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:p}=eV(t,e,n);return p&&(c=t.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=a0([],c,o),s=i||s,o=zf([],r,s),o=zf([],o,Aue)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(t,n,i),d=t.getDistanceScales(),h=[t.width*e,t.height*e],p=a0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,m={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Sue,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:Z6,project_uCameraPosition:a};if(l){const v=t.getDistanceScales(l);switch(n){case Ai.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=v.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=v.unitsPerMeter2;break;case Ai.LNGLAT:case Ai.LNGLAT_OFFSETS:t._pseudoMeters||(m.project_uCommonUnitsPerMeter=v.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=v.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=v.unitsPerDegree2;break;case Ai.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,v.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,v.unitsPerMeter2[2]]}}return m});function eV(t,e,n=Q6){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,s=!0;switch(r=e===Ai.LNGLAT_OFFSETS||e===Ai.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Dl.WEB_MERCATOR:(e===Ai.LNGLAT||e===Ai.CARTESIAN)&&(r=[0,0,0],s=!1);break;case Dl.WEB_MERCATOR_AUTO_OFFSET:e===Ai.LNGLAT?i=r:e===Ai.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Dl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Dl.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}class tV extends JE{toString(){let e="[";if(Zr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=ui(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function _1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function nV(t,e){return t[0]=-e[0],t[1]=-e[1],t}function iV(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}!function Due(){var t=new na(2);na!=Float32Array&&(t[0]=0,t[1]=0)}();var rV=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(rV||{});const kue=45*Math.PI/180,Pue=1,yR=.1,vR=500,Nue=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Hn extends tV{static get IDENTITY(){return function Fue(){return y1||(y1=new Hn,Object.freeze(y1)),y1}()}static get ZERO(){return function Lue(){return b1||(b1=new Hn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(b1)),b1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return rV}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,o,a,c,l,d,h,p,m,v,R,L){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=p,this[12]=m,this[13]=v,this[14]=R,this[15]=L,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l,d,h,p,m,v,R,L){return this[0]=e,this[1]=s,this[2]=l,this[3]=m,this[4]=n,this[5]=o,this[6]=d,this[7]=v,this[8]=i,this[9]=a,this[10]=h,this[11]=R,this[12]=r,this[13]=c,this[14]=p,this[15]=L,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Nue)}fromObject(e){return this.check()}fromQuaternion(e){return function iue(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,d=i*o,h=i*a,p=r*o,m=r*a,v=r*c,R=s*o,L=s*a,Y=s*c;t[0]=1-h-v,t[1]=d+Y,t[2]=p-L,t[3]=0,t[4]=d-Y,t[5]=1-l-v,t[6]=m+R,t[7]=0,t[8]=p+L,t[9]=m-R,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:o=yR,far:a=vR}=e;return a===1/0?function Bue(t,e,n,i,r,s){const a=2*s/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),p=-2*s;t[0]=2*s/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this,n,i,r,s,o):function rue(t,e,n,i,r,s,o){var a=1/(n-e),c=1/(r-i),l=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0}(this,n,i,r,s,o,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function lue(t,e,n,i){var r,s,o,a,c,l,d,h,p,m,v=e[0],R=e[1],L=e[2],Y=i[0],q=i[1],pe=i[2],Me=n[0],Ue=n[1],Ze=n[2];Math.abs(v-Me)<Ol&&Math.abs(R-Ue)<Ol&&Math.abs(L-Ze)<Ol?function Jde(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(d=v-Me,h=R-Ue,p=L-Ze,r=q*(p*=m=1/Math.hypot(d,h,p))-pe*(h*=m),s=pe*(d*=m)-Y*p,o=Y*h-q*d,(m=Math.hypot(r,s,o))?(r*=m=1/m,s*=m,o*=m):(r=0,s=0,o=0),a=h*o-p*s,c=p*r-d*o,l=d*s-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=d,t[3]=0,t[4]=s,t[5]=c,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=p,t[11]=0,t[12]=-(r*v+s*R+o*L),t[13]=-(a*v+c*R+l*L),t[14]=-(d*v+h*R+p*L),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:o=yR,far:a=vR}=e;return function aue(t,e,n,i,r,s,o){var a=1/(e-n),c=1/(i-r),l=1/(s-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(o+s)*l,t[15]=1}(this,n,i,r,s,o,a),this.check()}orthographic(e){const{fovy:n=kue,aspect:i=Pue,focalDistance:r=1,near:s=yR,far:o=vR}=e;sV(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return sV(n),function sue(t,e,n,i,r){var o,s=1/Math.tan(e/2);t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,s),this.check()}determinant(){return function Qde(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],v=t[13],R=t[14],L=t[15];return(e*o-n*s)*(h*L-p*R)-(e*a-i*s)*(d*L-p*v)+(e*c-r*s)*(d*R-h*v)+(n*a-i*o)*(l*L-p*m)-(n*c-r*o)*(l*R-h*m)+(i*c-r*a)*(l*v-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function Zde(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return _R(this,this),this.check()}multiplyLeft(e){return zf(this,e,this),this.check()}multiplyRight(e){return zf(this,this,e),this.check()}rotateX(e){return X6(this,this,e),this.check()}rotateY(e){return function tue(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-l*i,t[1]=o*r-d*i,t[2]=a*r-h*i,t[3]=c*r-p*i,t[8]=s*i+l*r,t[9]=o*i+d*r,t[10]=a*i+h*r,t[11]=c*i+p*r}(this,this,e),this.check()}rotateZ(e){return Y6(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function eue(t,e,n,i){var c,l,d,h,p,m,v,R,L,Y,q,pe,Me,Ue,Ze,at,mt,pt,ht,yt,It,ft,vt,Nt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Ol||(r*=a=1/a,s*=a,o*=a,c=Math.sin(n),l=Math.cos(n),p=e[1],m=e[2],v=e[3],L=e[5],Y=e[6],q=e[7],Me=e[9],Ue=e[10],Ze=e[11],ht=r*s*(d=1-l)-o*c,yt=s*s*d+l,It=o*s*d+r*c,ft=r*o*d+s*c,vt=s*o*d-r*c,Nt=o*o*d+l,t[0]=(h=e[0])*(at=r*r*d+l)+(R=e[4])*(mt=s*r*d+o*c)+(pe=e[8])*(pt=o*r*d-s*c),t[1]=p*at+L*mt+Me*pt,t[2]=m*at+Y*mt+Ue*pt,t[3]=v*at+q*mt+Ze*pt,t[4]=h*ht+R*yt+pe*It,t[5]=p*ht+L*yt+Me*It,t[6]=m*ht+Y*yt+Ue*It,t[7]=v*ht+q*yt+Ze*It,t[8]=h*ft+R*vt+pe*Nt,t[9]=p*ft+L*vt+Me*Nt,t[10]=m*ft+Y*vt+Ue*Nt,t[11]=v*ft+q*vt+Ze*Nt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return bR(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return g1(this,this,e),this.check()}transform(e,n){return 4===e.length?(Ky(n=a0(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function Oue(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=HD(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ky(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function Hae(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}(n||[-0,-0],e,this);break;case 3:i=X8(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ky(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let b1,y1;function sV(t){if(t>2*Math.PI)throw Error("expected radians")}function Sg(t,e){const n=a0([],e,t);return q6(n,n,1/n[3]),n}function oV(t,e){const n=t%e;return n<0?e+n:n}function xR(t,e,n){return t<e?e:t>n?n:t}const wR=Math.log2||function Uue(t){return Math.log(t)*Math.LOG2E};function Ud(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const jc=Math.PI,aV=jc/4,sc=jc/180,ER=180/jc,Cg=512,v1=4003e4,x1=85.051129,Vue=1.5;function w1(t){const[e,n]=t;return Ud(Number.isFinite(e)),Ud(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[Cg*(e*sc+jc)/(2*jc),Cg*(jc+Math.log(Math.tan(aV+n*sc*.5)))/(2*jc)]}function Tg(t){const[e,n]=t,i=e/Cg*(2*jc)-jc,r=2*(Math.atan(Math.exp(n/Cg*(2*jc)-jc))-aV);return[i*ER,r*ER]}function AR(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;Ud(Number.isFinite(e)&&Number.isFinite(n));const r=Cg,s=Math.cos(e*sc),o=r/360,a=o/s,c=r/v1/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const d=sc*Math.tan(e*sc)/s,p=r/v1*d,m=p/a*c;l.unitsPerDegree2=[0,o*d/2,p],l.unitsPerMeter2=[m,0,m]}return l}function cV(t,e){const[n,i,r]=t,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=AR({longitude:n,latitude:i,highPrecision:!0}),d=w1(t);d[0]+=s*(c[0]+l[0]*o),d[1]+=o*(c[1]+l[1]*o);const h=Tg(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function E1(t){return 2*Math.atan(.5/t)*ER}function SR(t){return.5/Math.tan(.5*t*sc)}function dV(t,e){const[n,i,r=0]=t;return Ud(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Sg(e,[n,i,r,1])}function c0(t,e,n=0){const[i,r,s]=t;if(Ud(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Sg(e,[i,r,s,1]);const o=Sg(e,[i,r,0,1]),a=Sg(e,[i,r,1,1]),c=o[2],l=a[2];return iV([],o,a,c===l?0:((n||0)-c)/(l-c))}function uV(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,c],[l,d]]=i,h=function Wue(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(Ud(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),p=w1([a,xR(d,-x1,x1)]),m=w1([l,xR(c,-x1,x1)]),v=[Math.max(Math.abs(m[0]-p[0]),r),Math.max(Math.abs(m[1]-p[1]),r)],R=[e-h.left-h.right-2*Math.abs(o[0]),n-h.top-h.bottom-2*Math.abs(o[1])];Ud(R[0]>0&&R[1]>0);const L=R[0]/v[0],Y=R[1]/v[1],Ue=Tg([(m[0]+p[0])/2+(h.right-h.left)/2/L,(m[1]+p[1])/2+(h.top-h.bottom)/2/Y]),Ze=Math.min(s,wR(Math.abs(Math.min(L,Y))));return Ud(Number.isFinite(Ze)),{longitude:Ue[0],latitude:Ue[1],zoom:Ze}}const hV=Math.PI/180;function fV(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Sg(i,[e,0,1,1]),s=Sg(i,[e,t.height,1,1]),l=Tg(iV([],r,s,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(n),l}const Kue=Math.PI/180,que=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],bV=[0,0,0],Jue={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class ch{constructor(e={}){ve(this,"id",void 0),ve(this,"x",void 0),ve(this,"y",void 0),ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"padding",void 0),ve(this,"isGeospatial",void 0),ve(this,"zoom",void 0),ve(this,"focalDistance",void 0),ve(this,"position",void 0),ve(this,"modelMatrix",void 0),ve(this,"distanceScales",void 0),ve(this,"scale",void 0),ve(this,"center",void 0),ve(this,"cameraPosition",void 0),ve(this,"projectionMatrix",void 0),ve(this,"viewMatrix",void 0),ve(this,"viewMatrixUncentered",void 0),ve(this,"viewMatrixInverse",void 0),ve(this,"viewProjectionMatrix",void 0),ve(this,"pixelProjectionMatrix",void 0),ve(this,"pixelUnprojectionMatrix",void 0),ve(this,"resolution",void 0),ve(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Jue,this.focalDistance=e.focalDistance||1,this.position=e.position||bV,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Dl.WEB_MERCATOR:Dl.WEB_MERCATOR_AUTO_OFFSET:Dl.IDENTITY}equals(e){return e instanceof ch&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Fd(e.projectionMatrix,this.projectionMatrix)&&Fd(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=dV(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=n?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,o]=e,l=c0([r,n?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,p]=this.unprojectPosition(l);return Number.isFinite(o)?[d,h,p]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=w1(e);return n[1]=Or(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Tg(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?AR({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Kae(t){return{left:bg(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:bg(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:bg(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:bg(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:bg(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:bg(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Gue(t){const{latitude:e}=t;Ud(Number.isFinite(e));const n=Math.cos(e*sc);return function zue(t){return wR(t)}(v1*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||AR({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=bV;if(s&&(a=o?new Hn(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new tn(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=que,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new Hn).multiplyRight(n).translate(new tn(this.center).negate()),this.projectionMatrix=i||function Zue({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=t/e,l=n?(new Hn).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new Hn).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:d=0,right:h=0,top:p=0,bottom:m=0}=s,v=Or((d+t-h)/2,0,t)-t/2,R=Or((p+e-m)/2,0,e)-e/2;l[8]-=2*v/t,l[9]+=2*R/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*Kue,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];zf(h,h,this.projectionMatrix),zf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=_R([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Yae(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];bR(p,p,[this.width/2,-this.height/2,1]),g1(p,p,[1,-1,0]),zf(m,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=_R([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_i.warn("Pixel project matrix not invertible")()}}ve(ch,"displayName","Viewport");const the=Math.PI/180;function yV(t){return 512/4003e4/Math.cos(t*the)}class lh extends ch{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,legacyMeterSizes:m=!1}=e;let{width:v,height:R,altitude:L=1.5}=e;const Y=Math.pow(2,r);v=v||1,R=R||1;let q,pe=null;d?(L=d[5]/2,q=E1(L)):(e.fovy?(q=e.fovy,L=SR(q)):q=E1(L),pe=function lV(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:d=E1(Vue)}=t;void 0!==i&&(d=E1(i));const h=d*sc,p=r*sc,m=SR(d);let v=m;o&&(v+=o[2]*a/Math.cos(p)/n);const R=h*(.5+(s?s[1]:0)/n),L=Math.sin(R)*v/Math.sin(xR(Math.PI/2-p-R,.01,Math.PI-.01)),Y=Math.sin(p)*L+v;return{fov:h,aspect:e/n,focalDistance:m,near:c,far:Math.min(Y*l,10*v)}}({width:v,height:R,pitch:s,fovy:q,nearZMultiplier:a,farZMultiplier:c}));let Me=function Hue(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];g1(a,a,[0,0,-r]),X6(a,a,-n*sc),Y6(a,a,i*sc);const c=s/e;return bR(a,a,[c,c,c]),o&&g1(a,a,function Lae(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),a}({height:R,pitch:s,bearing:o,scale:Y,altitude:L});p&&(Me=(new Hn).translate([512*p,0,0]).multiplyLeft(Me)),super({...e,width:v,height:R,viewMatrix:Me,longitude:i,latitude:n,zoom:r,...pe,fovy:q,focalDistance:L}),ve(this,"longitude",void 0),ve(this,"latitude",void 0),ve(this,"pitch",void 0),ve(this,"bearing",void 0),ve(this,"altitude",void 0),ve(this,"fovy",void 0),ve(this,"orthographic",void 0),ve(this,"_subViewports",void 0),ve(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=L,this.fovy=q,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new lh({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*yV(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/yV(i)]}addMetersToLngLat(e,n){return cV(e,n)}panByPosition(e,n){const i=c0(n,this.pixelUnprojectionMatrix),s=_1([],this.projectFlat(e),nV([],i)),o=_1([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const n=function $ue(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},o=r([0,i],s),a=r([n,i],s);let c,l;return(t.fovy?.5*t.fovy*hV:Math.atan(.5/t.altitude))>(90-t.pitch)*hV-.01?(c=fV(t,0,e),l=fV(t,n,e)):(c=r([0,0],s),l=r([n,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=uV({width:i,height:r,bounds:e,...n});return new lh({width:i,height:r,longitude:s,latitude:o,zoom:a})}}function TR(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof lh){const[r,s,o=0]=t,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function vV(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=t;switch(n&&([o,a,c]=a0([],[o,a,c,1],n)),i){case Ai.LNGLAT:return TR([o,a,c],e,s);case Ai.LNGLAT_OFFSETS:return TR([o+r[0],a+r[1],c+(r[2]||0)],e,s);case Ai.METER_OFFSETS:return TR(cV(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}ve(lh,"displayName","WebMercatorViewport");const rhe={10241:9987,10240:9729,10242:33071,10243:33071},MR={};function Mg(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const i=t[n],r=e[n];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&Mg(i,r)))return!1}return!0}const ahe={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||d0(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>IR(t,e)},accessor:{validate(t,e){const n=A1(t);return"function"===n||n===A1(e.value)},equal:(t,e,n)=>"function"==typeof e||IR(t,e)},array:{validate:(t,e)=>e.optional&&!t||d0(t),equal:(t,e,n)=>n.compare?IR(t,e):t===e},object:{equal:(t,e,n)=>n.compare?Mg(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>function she(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof go)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new go(n,{...e,parameters:{...rhe,...i,...t.props.textureParameters}});return MR[r.id]=!0,r}(n,t),release:t=>{!function ohe(t){!t||!(t instanceof go)||MR[t.id]&&(t.delete(),delete MR[t.id])}(t)}}};function IR(t,e){if(t===e)return!0;if(!d0(t)||!d0(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function lhe(t,e){switch(A1(e)){case"object":return l0(t,e);case"array":return l0(t,{type:"array",value:e,compare:!1});case"boolean":return l0(t,{type:"boolean",value:e});case"number":return l0(t,{type:"number",value:e});case"function":return l0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function l0(t,e){return"type"in e?{name:t,...ahe[e.type],...e}:"value"in e?{name:t,type:A1(e.value),...e}:{name:t,type:"object",value:e}}function d0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function A1(t){return d0(t)?"array":null===t?"null":typeof t}function xV(t){return S1(t,"_mergedDefaultProps")||(function uhe(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),i=xV(n),s=function che(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=lhe(r,s);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(S1(t,"defaultProps")||{}),o=function hhe(t,e,n){const i=Object.create(null);Object.assign(i,e,t);const r=function ghe(t){const e=S1(t,"layerName")||S1(t,"componentName");return e||_i.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}(n);return delete t.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,t),a={...n._propTypes,...s.propTypes};!function phe(t,e){const n={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(n[o]=a,i[o]=mhe(o))}t[Ag]=n,t[Vf]={},Object.defineProperties(t,i)}(o,a);const c={...n._deprecatedProps,...s.deprecatedProps};(function fhe(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const s of e[n])wV(this,s)||(this[s]=i);_i.deprecated(r,e[n].join("/"))()}})})(o,c),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=c}(t),t._mergedDefaultProps)}function mhe(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||Q8(e)?this[Vf][t]=e:this[ah][t]=e},get(){if(this[ah]){if(t in this[ah])return this[ah][t]||this[Ag][t];if(t in this[Vf]){const e=this[p1]&&this[p1].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Ag][t]}}return this[Ag][t]}}}function wV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S1(t,e){return wV(t,e)&&t[e]}let _he=0;class DR{constructor(...e){ve(this,"id",void 0),ve(this,"props",void 0),ve(this,"count",void 0),this.props=function dhe(t,e){const n=xV(t.constructor),i=Object.create(n);i[p1]=t,i[Vf]={},i[ah]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=_he++}clone(e){const{props:n}=this,i={};for(const r in n[Ag])r in n[ah]?i[r]=n[ah][r]:r in n[Vf]&&(i[r]=n[Vf][r]);return new this.constructor({...n,...i,...e})}}function RR(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new C1(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function C1(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(C1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new C1(t)}ve(DR,"componentName","Component"),ve(DR,"defaultProps",{});const bhe=Object.freeze({});class yhe{constructor(e){ve(this,"component",void 0),ve(this,"onAsyncPropUpdated",void 0),ve(this,"asyncProps",void 0),ve(this,"oldProps",void 0),ve(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||bhe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[ah]||{},i=e[Vf]||e,r=e[Ag]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(Q8(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,n){var i=this;return Lt(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var d,c=!1,l=!1;try{for(var p,h=RR(n);c=!(p=yield h.next()).done;c=!1){const m=p.value;{const{dataTransform:v}=i.component.props;o=v?v(m,o):o.concat(m),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,o)})()}_postProcessValue(e,n){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class vhe extends yhe{constructor({attributeManager:e,layer:n}){super(n),ve(this,"attributeManager",void 0),ve(this,"needsRedraw",void 0),ve(this,"needsUpdate",void 0),ve(this,"subLayers",void 0),ve(this,"usesPickingColorCache",void 0),ve(this,"changeFlags",void 0),ve(this,"viewport",void 0),ve(this,"uniformTransitions",void 0),ve(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const i=this.component.props.fetch;return i?i(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const i=this.component.props.onDataLoad;"data"===e&&i&&i(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const Uc=t=>"function"==typeof t,dh=t=>null!==t&&"object"==typeof t,AV=t=>dh(t)&&t.constructor==={}.constructor,xhe=t=>t&&"function"==typeof t[Symbol.iterator],whe=t=>t&&"function"==typeof t[Symbol.asyncIterator],Ig=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Dg=t=>typeof Blob<"u"&&t instanceof Blob,Ehe=t=>t&&"object"==typeof t&&t.isBuffer,SV=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||dh(t)&&Uc(t.tee)&&Uc(t.cancel)&&Uc(t.getReader))(t)||(t=>dh(t)&&Uc(t.read)&&Uc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function CV(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function OR(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function kR(t){var e,n;let i;return CV(t,"null loader"),CV(OR(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let PR="";const NR={},Ihe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Dhe=/^([-\w.]+\/[-\w.+]+)/;function Rhe(t){const e=Dhe.exec(t);return e?e[1]:t}function TV(t){const e=Ihe.exec(t);return e?e[1]:""}const Ohe=/\?.*/;function T1(t){if(Ig(t)){const e=LR(t.url||"");return{url:e,type:Rhe(t.headers.get("content-type")||"")||TV(e)}}return Dg(t)?{url:LR(t.name||""),type:t.type||""}:"string"==typeof t?{url:LR(t),type:TV(t)}:{url:"",type:""}}function LR(t){return t.replace(Ohe,"")}function MV(t){return FR.apply(this,arguments)}function FR(){return FR=Lt(function*(t){if(Ig(t))return t;const e={},n=function khe(t){return Ig(t)?t.headers["content-length"]||-1:Dg(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:i,type:r}=T1(t);r&&(e["content-type"]=r);const s=yield function Lhe(t){return UR.apply(this,arguments)}(t);s&&(e["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),FR.apply(this,arguments)}function BR(){return BR=Lt(function*(t){if(!t.ok){const e=yield function Nhe(t){return jR.apply(this,arguments)}(t);throw new Error(e)}}),BR.apply(this,arguments)}function jR(){return jR=Lt(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),jR.apply(this,arguments)}function UR(){return UR=Lt(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function Fhe(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),UR.apply(this,arguments)}function IV(t,e){return VR.apply(this,arguments)}function VR(){return VR=Lt(function*(t,e){if("string"==typeof t){t=function Mhe(t){for(const e in NR)t.startsWith(e)&&(t=t.replace(e,NR[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(PR).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield MV(t)}),VR.apply(this,arguments)}const DV=new fg({id:"loaders.gl"});class Bhe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const RV=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),OV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),kV=(OV&&parseFloat(OV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class jhe{constructor(){ve(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:RV,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Uhe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function zR(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const GR=()=>{const t=zR();return t.globalOptions=t.globalOptions||{...kV},t.globalOptions};function Vhe(t,e,n,i){return n=n||[],function zhe(t,e){NV(t,null,kV,Uhe,e);for(const n of e)NV(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function LV(t,e,n){const r={...t.options||{}};return function Hhe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Bhe),FV(r,GR()),FV(r,e),r}(e,t,i)}function PV(t,e){const n=GR(),i=t||n;return"function"==typeof i.fetch?i.fetch:dh(i.fetch)?r=>IV(r,i):null!=e&&e.fetch?e?.fetch:IV}function NV(t,e,n,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const c=!e&&dh(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)DV.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Ghe(a,r);DV.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function Ghe(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function FV(t,e){for(const n in e)n in e&&(t[n]=AV(e[n])&&AV(t[n])?{...t[n],...e[n]}:e[n])}function Vd(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Whe="3.2.10";typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const M1="object"!=typeof process||"[object process]"!==String(process)||process.browser,Xhe=typeof window<"u"&&typeof window.orientation<"u",BV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);BV&&parseFloat(BV[1]);class HR{}const WR=new Map;function jV(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function UV(t,e=!0,n){const i=n||new Set;if(t)if(VV(t))i.add(t);else if(VV(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)UV(t[r],e,i);return void 0===n?Array.from(i):[]}function VV(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const $R=()=>{};class XR{static isSupported(){return typeof Worker<"u"&&M1||typeof HR<"u"&&!M1}constructor(e){ve(this,"name",void 0),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"terminated",!1),ve(this,"worker",void 0),ve(this,"onMessage",void 0),ve(this,"onError",void 0),ve(this,"_loadableURL","");const{name:n,source:i,url:r}=e;Vd(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=$R,this.onError=s=>console.log(s),this.worker=M1?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=$R,this.onError=$R,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||UV(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function Yhe(t){Vd(t.source&&!t.url||!t.source&&t.url);let e=WR.get(t.source||t.url);return e||(t.url&&(e=function Khe(t){if(!t.startsWith("http"))return t;const e=function qhe(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return jV(e)}(t.url),WR.set(t.url,e)),t.source&&(e=jV(t.source),WR.set(t.source,e))),Vd(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new HR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new HR(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Zhe{constructor(e,n){ve(this,"name",void 0),ve(this,"workerThread",void 0),ve(this,"isRunning",!0),ve(this,"result",void 0),ve(this,"_resolve",()=>{}),ve(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Vd(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Vd(this.isRunning),this.isRunning=!1,this._reject(e)}}class Qhe{static isSupported(){return XR.isSupported()}constructor(e){ve(this,"name","unnamed"),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"maxConcurrency",1),ve(this,"maxMobileConcurrency",1),ve(this,"onDebug",()=>{}),ve(this,"reuseWorkers",!0),ve(this,"props",{}),ve(this,"jobQueue",[]),ve(this,"idleQueue",[]),ve(this,"count",0),ve(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,n=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return Lt(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:n,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return Lt(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new Zhe(i.name,n);n.onMessage=s=>i.onMessage(r,s.type,s.payload),n.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new XR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Xhe?this.maxMobileConcurrency:this.maxConcurrency}}const efe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class zd{static isSupported(){return XR.isSupported()}static getWorkerFarm(e={}){return zd._workerFarm=zd._workerFarm||new zd({}),zd._workerFarm.setProps(e),zd._workerFarm}constructor(e){ve(this,"props",void 0),ve(this,"workerPools",new Map),this.props={...efe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new Qhe({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ve(zd,"_workerFarm",void 0);const tfe="latest";function YR(){return YR=Lt(function*(t,e,n,i,r){const s=t.id,o=function nfe(t,e={}){const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let s=t.version;"latest"===s&&(s=tfe);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(i)}return Vd(r),r}(t,n),c=zd.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",sfe.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),YR.apply(this,arguments)}function sfe(t,e,n,i){return KR.apply(this,arguments)}function KR(){return KR=Lt(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield t(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),KR.apply(this,arguments)}function GV(t){return t&&"object"==typeof t&&t.isBuffer}function HV(t){if(GV(t))return function ofe(t){return GV(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function JR(){return JR=Lt(function*(t){const e=[];var r,n=!1,i=!1;try{for(var o,s=RR(t);n=!(o=yield s.next()).done;n=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function cfe(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),JR.apply(this,arguments)}g(643);const dfe=262144,hfe=262144;function WV(t,e){this.v=t,this.k=e}function I1(t){return new WV(t,0)}function u0(t){var e,n;function i(s,o){try{var a=t[s](o),c=a.value,l=c instanceof WV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===s?"return":"next";if(!c.k||d.done)return i(h,d);d=t[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(s,o))})},"function"!=typeof t.return&&(this.return=void 0)}function QR(t){return function(){return new u0(t.apply(this,arguments))}}u0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},u0.prototype.next=function(t){return this._invoke("next",t)},u0.prototype.throw=function(t){return this._invoke("throw",t)},u0.prototype.return=function(t){return this._invoke("return",t)};const pfe=1048576;function e2(){return e2=QR(function*(t,e){const n=e?.chunkSize||pfe;let i=0;for(;i<t.size;){const r=i+n,s=yield I1(t.slice(i,r).arrayBuffer());i=r,yield s}}),e2.apply(this,arguments)}function $V(t,e){return RV?function gfe(t,e){return t2.apply(this,arguments)}(t,e):function _fe(t,e){return n2.apply(this,arguments)}(t,e)}function t2(){return t2=QR(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:s,value:o}=yield I1(r);if(s)return;yield HV(o)}}catch{n.releaseLock()}}),t2.apply(this,arguments)}function n2(){return n2=QR(function*(t,e){var r,n=!1,i=!1;try{for(var o,s=RR(t);n=!(o=yield I1(s.next())).done;n=!1){const a=o.value;yield HV(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield I1(s.return()))}finally{if(i)throw r}}}),n2.apply(this,arguments)}const r2="Cannot convert supplied data type";function s2(){return s2=Lt(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function yfe(t,e,n){if(e.text&&"string"==typeof t)return t;if(Ehe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(r2)}(t,e);if(Dg(t)&&(t=yield MV(t)),Ig(t)){const r=t;return yield function Phe(t){return BR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(SV(t)&&(t=function bfe(t,e){if("string"==typeof t)return function*ufe(t,e){const n=e?.chunkSize||dfe;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),o=t.slice(i,i+s);i+=s,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*ffe(t,e={}){const{chunkSize:n=hfe}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),o=new Uint8Array(t,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(t,e);if(Dg(t))return function mfe(t,e){return e2.apply(this,arguments)}(t,e);if(SV(t))return $V(t,e);if(Ig(t))return $V(t.body,e);throw new Error("makeIterator")}(t,n)),xhe(t)||whe(t))return function lfe(t){return JR.apply(this,arguments)}(t);throw new Error(r2)}),s2.apply(this,arguments)}const Sfe=new fg({id:"loaders.gl"}),XV=()=>{const t=zR();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function YV(t){const e=XV();t=Array.isArray(t)?t:[t];for(const n of t){const i=kR(n);e.find(r=>i===r)||e.unshift(i)}}const Tfe=/\.([^.]+)$/;function c2(){return c2=Lt(function*(t,e=[],n,i){if(!qV(t))return null;let r=KV(t,e,{...n,nothrow:!0},i);if(r)return r;if(Dg(t)&&(r=KV(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(JV(t));return r}),c2.apply(this,arguments)}function KV(t,e=[],n,i){if(!qV(t))return null;if(e&&!Array.isArray(e))return kR(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function Cfe(){return XV()}()),function Dfe(t){for(const e of t)kR(e)}(r);const s=function Ife(t,e,n,i){const{url:r,type:s}=T1(t),o=r||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=l2(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function Rfe(t,e){const n=e&&Tfe.exec(e),i=n&&n[1];return i?function Ofe(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||l2(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function kfe(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(Pfe(e,n))return n}else if(ArrayBuffer.isView(e)){if(ZV(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&ZV(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(QV(t)):""),a=a||l2(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&Sfe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(s||null!=n&&n.nothrow))throw new Error(JV(t));return s}function qV(t){return!(t instanceof Response&&204===t.status)}function JV(t){const{url:e,type:n}=T1(t);let i="No valid loader found (";i+=e?"".concat(function Afe(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?QV(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function l2(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function Pfe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function ZV(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function Nfe(t,e,n,i){if(i instanceof ArrayBuffer)return function afe(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===d2(t,e,i.length);default:return!1}}(t,e,n,r))}function QV(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?d2(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?d2(t,0,e):""}function d2(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function D1(t,e,n,i){return u2.apply(this,arguments)}function u2(){return u2=Lt(function*(t,e,n,i){Vd(!i||"object"==typeof i),e&&!Array.isArray(e)&&!OR(e)&&(i=void 0,n=e,e=void 0),t=yield t,n=n||{};const{url:r}=T1(t),o=function Efe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function Mfe(t){return c2.apply(this,arguments)}(t,o,n);return a?(i=function wfe(t,e,n=null){if(n)return n;const i={fetch:PV(e,t),...t};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:D1,loaders:o},n=Vhe(n,a,o,r),i),yield function Lfe(t,e,n,i){return h2.apply(this,arguments)}(a,t,n,i)):null}),u2.apply(this,arguments)}function h2(){return h2=Lt(function*(t,e,n,i){if(function $he(t,e=Whe){Vd(t,"no worker provided")}(t),Ig(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:c,type:l,url:d}}if(e=yield function vfe(t,e,n){return s2.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function ife(t,e){return!(!zd.isSupported()||!(M1||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function rfe(t,e,n,i,r){return YR.apply(this,arguments)}(t,e,n,i,D1);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw Vd(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),h2.apply(this,arguments)}function h0(t,e,n,i){return f2.apply(this,arguments)}function f2(){return f2=Lt(function*(t,e,n,i){!Array.isArray(e)&&!OR(e)&&(n=e,e=void 0);const r=PV(n);let s=t;return"string"==typeof t&&(s=yield r(t)),Dg(t)&&(s=yield r(t)),yield D1(s,e,n)}),f2.apply(this,arguments)}const zfe=Object.freeze([]),Gfe=m1(({oldViewport:t,viewport:e})=>t.equals(e));let Nl=new Uint8ClampedArray(0);const Hfe={data:{type:"data",value:zfe,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(t);return!c&&!r&&(o.add({resourceId:t,data:h0(t,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:t,onChange:l=>{var d;return null===(d=n.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):h0(t,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ai.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Gf extends DR{constructor(...e){super(...e),ve(this,"internalState",null),ve(this,"lifecycle","Awaiting state"),ve(this,"context",void 0),ve(this,"state",void 0),ve(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Ys(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=vV(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=dV(i,n.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return Ys(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return Ys(this.internalState),function ihe(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function nhe(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===Ai.DEFAULT&&(r=e.isGeospatial?Ai.LNGLAT:Ai.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:d}=eV(n,i,r),h=vV(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});d&&function Nae(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(h,h,n.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ai.DEFAULT||e===Ai.LNGLAT||e===Ai.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Ys(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function $de(t){if(!function Yde(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function Xde(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:i,instancePositions:r}=n.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=qde(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const c of i)n.invalidateAll(c);else n.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&n){const{pickingColors:c,instancePickingColors:l}=n.attributes,d=c||l;d&&(a&&d.constant&&(d.constant=!1,n.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,o;n&&(e.message="".concat(n,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!Gfe({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Nl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&_i.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Nl=Yy.allocate(Nl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(Nl.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),Nl[3*o+0]=s[0],Nl[3*o+1]=s[1],Nl[3*o+2]=s[2]}e.value=Nl.subarray(0,3*n)}_setModelAttributes(e,n){const s=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Nl.buffer&&(i.value=Nl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Ys(!this.internalState),Ys(Number.isFinite(this.props.coordinateSystem)),_o("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new vhe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(_i.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Fde(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){_o("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(_o("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){_o("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];Pd(s.gl,{polygonOffset:c}),rc(s.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:s};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=n[r];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}n[r]||(n[r]=e[r],s=!0),s&&_o("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function jde(t,e){const n=W6({newProps:t,oldProps:e,propTypes:gR(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Vde(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function zde(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&$6(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&$6(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:Gde(t,e),transitionsChanged:Ude(t,e)}}(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,n[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function Bde(t){const e=gR(t);for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Ode(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),Number.isInteger(a)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return n=n||r,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ve(Gf,"defaultProps",Hfe),ve(Gf,"layerName","Layer");class p2 extends Gf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:v,modelMatrix:R,extensions:L,fetch:Y,operation:q,_subLayerProps:pe}=this.props,Me={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:v,modelMatrix:R,extensions:L,fetch:Y,operation:q},Ue=pe&&e.id&&pe[e.id],Ze=Ue&&Ue.updateTriggers,at=e.id||"sublayer";if(Ue){const mt=this.constructor._propTypes,pt=e.type?e.type._propTypes:{};for(const ht in Ue){const yt=pt[ht]||mt[ht];yt&&"accessor"===yt.type&&(Ue[ht]=this.getSubLayerAccessor(Ue[ht]))}}Object.assign(Me,e,Ue),Me.id="".concat(this.props.id,"-").concat(at),Me.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...Ze};for(const mt of L){const pt=mt.getSubLayerProps.call(this,mt);pt&&Object.assign(Me,pt,{updateTriggers:Object.assign(Me.updateTriggers,pt.updateTriggers)})}return Me}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=XD(this.renderLayers(),Boolean),this.internalState.subLayers=i),_o("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}ve(p2,"layerName","CompositeLayer");const $fe=/([0-9]+\.?[0-9]*)(%|px)/;function uh(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=$fe.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function hh(t,e){return t.relative?Math.round(t.position*e):t.position}class m2{constructor(e){ve(this,"id",void 0),ve(this,"viewportInstance",void 0),ve(this,"_x",void 0),ve(this,"_y",void 0),ve(this,"_width",void 0),ve(this,"_height",void 0),ve(this,"_padding",void 0),ve(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};Ys(!c||c instanceof ch),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=uh(i),this._y=uh(r),this._width=uh(s),this._height=uh(o),this._padding=a&&{left:uh(a.left||0),right:uh(a.right||0),top:uh(a.top||0),bottom:uh(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&Mg(this.props,e.props))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:hh(this._x,e),y:hh(this._y,n),width:hh(this._width,e),height:hh(this._height,n)};return this._padding&&(i.padding={left:hh(this._padding.left,e),top:hh(this._padding.top,n),right:hh(this._padding.right,e),bottom:hh(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Xfe=(new Hn).lookAt({eye:[0,0,1]});function Yfe({width:t,height:e,near:n,far:i,padding:r}){let s=-t/2,o=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:p=0}=r,m=Or((l+t-d)/2,0,t)-t/2,v=Or((h+e-p)/2,0,e)-e/2;s-=m,o-=m,a+=v,c+=v}return(new Hn).ortho({left:s,right:o,bottom:a,top:c,near:n,far:i})}class Kfe extends ch{constructor(e){const{width:n,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,p=Math.min(d,h),m=Math.pow(2,p);let v;if(d!==h){const R=Math.pow(2,d),L=Math.pow(2,h);v={unitsPerMeter:[R/m,L/m,1],metersPerUnit:[m/R,m/L,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Xfe.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:Yfe({width:n||1,height:i||1,padding:c,near:r,far:s}),zoom:p,distanceScales:v})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=c0(n,this.pixelUnprojectionMatrix),s=_1([],this.projectFlat(e),nV([],i)),o=_1([],this.center,s);return{target:this.unprojectFlat(o)}}}const t5=()=>{},qfe=t=>t;class Zfe{constructor(e){ve(this,"getControllerState",void 0),ve(this,"props",void 0),ve(this,"propsInTransition",void 0),ve(this,"transition",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=n,l=c(i/a),d=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new o0(e.timeline),this.onViewStateChange=e.onViewStateChange||t5,this.onStateChange=e.onStateChange||t5}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:n.transitionEasing||qfe,interpolator:s,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class Qfe{constructor(e){ve(this,"_propsToCompare",void 0),ve(this,"_propsToExtract",void 0),ve(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Fd(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];Ys(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const epe=["longitude","latitude","zoom","bearing","pitch"],tpe=["longitude","latitude","zoom"];class R1 extends Qfe{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:epe,required:tpe},super(i.transitionProps),ve(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(n),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=qE(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,qE(e.around,n.around,i)))}return r}}const fh={transitionDuration:0},O1=t=>1-(1-t)*(1-t),Rg_WHEEL=["wheel"],Rg_PAN=["panstart","panmove","panend"],Rg_PINCH=["pinchstart","pinchmove","pinchend"],Rg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Rg_DOUBLE_TAP=["doubletap"],Rg_KEYBOARD=["keydown"],Hf={};class _2{constructor(e){ve(this,"props",void 0),ve(this,"state",{}),ve(this,"transitionManager",void 0),ve(this,"eventManager",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"makeViewport",void 0),ve(this,"_controllerState",void 0),ve(this,"_events",{}),ve(this,"_interactionState",{isDragging:!1}),ve(this,"_customEvents",[]),ve(this,"_eventStartBlocked",null),ve(this,"_panMove",!1),ve(this,"invertPan",!1),ve(this,"dragMode","rotate"),ve(this,"inertia",0),ve(this,"scrollZoom",!0),ve(this,"dragPan",!0),ve(this,"dragRotate",!0),ve(this,"doubleClickZoom",!0),ve(this,"touchZoom",!0),ve(this,"touchRotate",!1),ve(this,"keyboard",!0),this.transitionManager=new Zfe({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Rg_WHEEL,d&&i),this.toggleEvents(Rg_PAN,d&&(r||s)),this.toggleEvents(Rg_PINCH,d&&(a||c)),this.toggleEvents(Rg_TRIPLE_PAN,d&&c),this.toggleEvents(Rg_DOUBLE_TAP,d&&o),this.toggleEvents(Rg_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,fh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,fh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:O1},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,fh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:O1},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,fh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,fh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:O1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Hf._startPinchRotation=e.rotation,Hf._lastPinchEvent=e,this.updateViewport(i,fh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Hf._startPinchRotation-i})}return this.updateViewport(n,fh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Hf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Hf;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*n/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:O1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Hf._startPinchRotation=null,Hf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new R1({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:fh}}class n5{constructor(e,n){ve(this,"_viewportProps",void 0),ve(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class r5 extends n5{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:p,startRotatePos:m,startRotationX:v,startRotationOrbit:R,startZoomPosition:L,startZoom:Y}=e;super({width:n,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:p,startRotatePos:m,startRotationX:v,startRotationOrbit:R,startZoomPosition:L,startZoom:Y}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let d=(e[0]-r[0])/a;(s<-90||s>90)&&(d*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*d}}else l={rotationX:s+i,rotationOrbit:o+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),Or(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Or(r[0],i,n),Or(r[1],i,n)]:Or(r,i,n),e.rotationX=Or(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function Xae(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class ipe extends _2{constructor(...e){super(...e),ve(this,"ControllerState",r5),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new R1({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class rpe extends r5{constructor(e){super(e),ve(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=Or(o+s,r,i);break;case"Y":a=Or(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return Or(n+s,r,i)}}class spe extends _2{constructor(...e){super(...e),ve(this,"ControllerState",rpe),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new R1(["target","zoom"])}),ve(this,"dragMode","pan")}_onPanRotate(){return!1}}class b2 extends m2{get ViewportType(){return Kfe}get ControllerType(){return spe}}ve(b2,"displayName","OrthographicView");const y2=Math.PI/180;function ope({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new Hn).lookAt({eye:a,up:o});c.rotateX(i*y2),"Z"===n?c.rotateZ(r*y2):c.rotateY(r*y2);const l=Math.pow(2,s)/t;return c.scale(l),c}class ape extends ch{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:SR(r);super({...e,longitude:void 0,viewMatrix:ope({height:n||1,focalDistance:d,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:o,zoom:l}),ve(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=n?r:this.height-r,[a,c,l]=c0([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class s5 extends m2{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return ape}get ControllerType(){return ipe}}ve(s5,"displayName","OrbitView");const cpe=[255,255,255],lpe=1;let dpe=0;class o5{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","ambient");const{color:n=cpe}=e,{intensity:i=lpe}=e;this.id=e.id||"ambient-".concat(dpe++),this.color=n,this.intensity=i}}const upe=[255,255,255],hpe=1,fpe=[0,0,-1];let ppe=0;class a5{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","directional"),ve(this,"direction",void 0),ve(this,"shadow",void 0);const{color:n=upe}=e,{intensity:i=hpe}=e,{direction:r=fpe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(ppe++),this.color=n,this.intensity=i,this.type="directional",this.direction=new tn(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class mpe{constructor(e,n={id:"pass"}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class k1 extends mpe{constructor(...e){super(...e),ve(this,"_lastRenderIndex",-1)}render(e){return Pd(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function _pe(t){Pd(t,{viewport:[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}),t.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const p=s&&s[h.id];o(h);const m=this._getDrawLayerParams(h,e),v=h.subViewports||[h];for(const R of v){const L=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:R,view:p,pass:e.pass,layers:e.layers},m);d.push(L)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=c5(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let p=0;p<n.length;p++){const m=n[p],v=this._shouldDrawLayer(m,d,r,h),R={shouldDrawLayer:v};v&&(R.layerRenderIndex=l(m,v),R.moduleParameters=this._getModuleParameters(m,o,i,a),R.layerParameters=this.getLayerParameters(m,p,e)),c[p]=R}return c}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function gpe(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,s=e&&e.devicePixelRatio||pg(t);return[i.x*s,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;rc(e,{scissorTest:!0,scissor:l},()=>UD(e,h))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Pd(e,{viewport:l});for(let h=0;h<n.length;h++){const p=n[h],{shouldDrawLayer:m,layerRenderIndex:v,moduleParameters:R,layerParameters:L}=c[h];if(m&&p.props.pickable&&d.pickableCount++,p.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,v),R.viewport=o;try{p._drawLayer({moduleParameters:R,uniforms:{layerIndex:v},parameters:L})}catch(Y){p.raiseError(Y,"drawing ".concat(p," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:pg(this.gl)});if(n)for(const c of n){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,n),r)}}function c5(t=0,e={}){const n={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const d=n[c]=n[c]||c5(e[c],e);l=d(r,s),n[a]=d}else Number.isFinite(o)?(l=o+(e[c]||0),n[a]=null):l=t;return s&&l>=t&&(t=l+1),e[a]=l,l};return i}class bpe extends k1{constructor(e,n){super(e,n),ve(this,"shadowMap",void 0),ve(this,"depthBuffer",void 0),ve(this,"fbo",void 0),this.shadowMap=new go(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new _g(e,{format:33189,width:1,height:1}),this.fbo=new ls(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;rc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=pg(this.gl),s=i.width*r,o=i.height*r;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const l5="#define SMOOTH_EDGE_RADIUS 0.5",wpe={name:"geometry",vs:"\n".concat(l5,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(l5,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Epe=Object.keys(Ai).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ai[t],";")).join(""),Ape=Object.keys(Dl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Dl[t],";")).join(""),Spe=Object.keys(WE).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(WE[t],";")).join(""),Cpe="".concat(Epe,"\n").concat(Ape,"\n").concat(Spe,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),Tpe={},v2={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},wpe],vs:Cpe,getUniforms:function Mpe(t=Tpe){return"viewport"in t?function Mue({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=Ai.DEFAULT,coordinateOrigin:r=Q6,autoWrapLongitude:s=!1}){i===Ai.DEFAULT&&(i=t.isGeospatial?Ai.LNGLAT:Ai.CARTESIAN);const o=Cue({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||Z6,o}(t):{}}},Rpe=m1(function Lpe({viewport:t,center:e}){return new Hn(t.viewProjectionMatrix).invert().transform(e)}),Ope=m1(function Fpe({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>function Npe(t,e){const[n,i,r]=t,s=c0([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new tn(t.center).negate()),c=s.map(d=>a.transform(d)),l=(new Hn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(l.multiplyRight(o))}return n}),kpe=[0,0,0,1],Ppe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],x2={name:"shadow",dependencies:[v2],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Bpe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||kpe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=Rpe({viewport:t.viewport,center:e.project_uCenter}),s=[],o=Ope({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new tn(t.viewport.center).negate());e.project_uCoordinateSystem===Ai.LNGLAT&&e.project_uProjectionMode===Dl.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(Ppe),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},jpe={color:[255,255,255],intensity:1},d5=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Upe=[0,0,0,200/255];class w2{constructor(e={}){ve(this,"id","lighting-effect"),ve(this,"props",null),ve(this,"shadowColor",Upe),ve(this,"shadow",void 0),ve(this,"ambientLight",null),ve(this,"directionalLights",[]),ve(this,"pointLights",[]),ve(this,"shadowPasses",[]),ve(this,"shadowMaps",[]),ve(this,"dummyShadowMap",null),ve(this,"programManager",void 0),ve(this,"shadowMatrices",void 0);for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=r0.getDefaultProgramManager(e),x2&&this.programManager.addDefaultModule(x2)),this.dummyShadowMap||(this.dummyShadowMap=new go(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(x2),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new Hn).lookAt({eye:new tn(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new bpe(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new o5(jpe),this.directionalLights.push(new a5(d5[0]),new a5(d5[1])))}}let Vpe=1,zpe=1;class u5{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=Vpe++,a={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=zpe++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Gpe{constructor(e,n,i){ve(this,"id",void 0),ve(this,"context",void 0),ve(this,"isLoaded",void 0),ve(this,"persistent",void 0),ve(this,"_loadCount",0),ve(this,"_subscribers",new Set),ve(this,"_data",void 0),ve(this,"_loader",void 0),ve(this,"_error",void 0),ve(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=h0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Hpe{constructor({gl:e,protocol:n}){ve(this,"protocol",void 0),ve(this,"_context",void 0),ve(this,"_resources",void 0),ve(this,"_consumers",void 0),ve(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new Gpe(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const Wpe=[v2],$pe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Xpe(t){const e=r0.getDefaultProgramManager(t);for(const n of Wpe)e.addDefaultModule(n);for(const n of $pe)e.addShaderHook(n);return e}class qpe{constructor(e,{deck:n,stats:i,viewport:r,timeline:s}={}){ve(this,"layers",void 0),ve(this,"context",void 0),ve(this,"resourceManager",void 0),ve(this,"_lastRenderedLayers",[]),ve(this,"_needsRedraw",!1),ve(this,"_needsUpdate",!1),ve(this,"_nextLayers",null),ve(this,"_debug",!1),ve(this,"activateViewport",o=>{_o("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new Hpe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Xpe(e),stats:i||new YE({id:"deck.gl"}),viewport:r||new ch({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new u5,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){_o("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=XD(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const o of e)i[o.id]?_i.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];null===s&&_i.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class Jpe{constructor(e){ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"views",void 0),ve(this,"viewState",void 0),ve(this,"controllers",void 0),ve(this,"timeline",void 0),ve(this,"_viewports",void 0),ve(this,"_viewportMap",void 0),ve(this,"_isUpdating",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_needsUpdate",void 0),ve(this,"_eventManager",void 0),ve(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=XD(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Mg(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):_i.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=n[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}class Qpe extends n5{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:m=60,minPitch:v=0,startPanLngLat:R,startZoomLngLat:L,startRotatePos:Y,startBearing:q,startPitch:pe,startZoom:Me,normalize:Ue=!0}=e;Ys(Number.isFinite(s)),Ys(Number.isFinite(r)),Ys(Number.isFinite(o)),super({width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:p,maxPitch:m,minPitch:v,normalize:Ue,position:d},{startPanLngLat:R,startZoomLngLat:L,startRotatePos:Y,startBearing:q,startPitch:pe,startZoom:Me}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+n,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Or(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=Or(r,i,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Or(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function Xue(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=t;(r<-180||r>180)&&(r=oV(r+180,360)-180),(a<-180||a>180)&&(a=oV(a+180,360)-180);const c=wR(n/512);if(o<=c)o=c,s=0;else{const l=n/2/Math.pow(2,o),d=Tg([0,l])[1];if(s<d)s=d;else{const h=Tg([0,512-l])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],c=n[1],{width:l,height:d}=this.getViewportProps(),h=s/l;let p=0;o>0?Math.abs(d-c)>5&&(p=o/(c-d)*1.2):o<0&&c>5&&(p=1-a/c),p=Or(p,-1,1);const{minPitch:m,maxPitch:v}=this.getViewportProps();let L=i;return p>0?L=i+p*(v-i):p<0&&(L=i-p*(m-i)),{pitch:L,bearing:r+180*h}}}class eme extends _2{constructor(...e){super(...e),ve(this,"ControllerState",Qpe),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new R1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ve(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class f5 extends m2{get ViewportType(){return lh}get ControllerType(){return eme}}ve(f5,"displayName","MapView");class tme extends k1{constructor(e,n){super(e,n),ve(this,"maskMap",void 0),ve(this,"fbo",void 0);const{mapSize:i=2048}=n;this.maskMap=new go(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new ls(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const n=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,rc(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class sme{constructor(){ve(this,"id","mask-effect"),ve(this,"props",null),ve(this,"useInPicking",!0),ve(this,"dummyMaskMap",void 0),ve(this,"channels",[]),ve(this,"masks",null),ve(this,"maskPass",void 0),ve(this,"maskMap",void 0),ve(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new go(e,{width:1,height:1}));const a=n.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new tme(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],d=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:d})}_renderChannel(e,{layerFilter:n,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,d)=>l!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function nme({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!n)return i;const r=function rme(t){const e_x=t[2]-t[0],e_y=t[3]-t[1],n_x=t[0]+.5*e_x,n_y=t[1]+.5*e_y;return[n_x-e_x,n_y-e_y,n_x+e_x,n_y+e_y]}(i);return n[2]-n[0]<r[2]-r[0]||n[3]-n[1]<r[3]-r[1]||(n[0]=Math.max(n[0],r[0]),n[1]=Math.max(n[1],r[1]),n[2]=Math.min(n[2],r[2]),n[3]=Math.min(n[3],r[3])),n}({layers:e.layers,viewport:s}),c||!Fd(e.bounds,a.bounds))){const{maskPass:l,maskMap:d}=this,h=function ime({bounds:t,viewport:e,width:n,height:i}){if(t[2]<=t[0]||t[3]<=t[1])return null;if(n-=2,i-=2,e instanceof lh){const{longitude:a,latitude:c,zoom:l}=uV({width:n,height:i,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new lh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:n,height:i})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),i/(t[3]-t[1]));return new b2({x:1,y:1}).makeViewport({width:n,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:d.width,height:d.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let i=0;for(const r of e){const{id:s}=r.root;let o=n[s];if(!o){if(++i>4){_i.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},n[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in n))&&(this.channels[r]=null)}for(const r in n){const s=n[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const ome=new w2;class ame{constructor(){ve(this,"effects",void 0),ve(this,"_internalEffects",void 0),ve(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Mg(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new sme),e.some(n=>n instanceof w2)||this._internalEffects.push(ome)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class cme extends k1{shouldDrawLayer(e){return"draw"===e.props.operation}}const p5={blendFunc:[1,0,32771,0],blendEquation:32774};class m5 extends k1{constructor(...e){super(...e),ve(this,"pickZ",void 0),ve(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:p,pass:m="picking",pickZ:v}){const R=this.gl;this.pickZ=v;const L=v?null:{byLayer:new Map,byAlpha:[]};this._colors=L;const Y=rc(R,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...p5,blend:!v},()=>super.render({target:o,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:p?.filter(pe=>pe.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:L&&dme.bind(null,L),stats:Y}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,p5),r.blend=!0,r.blendColor=function lme(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,o=i.get(e);return o?(o.viewports.push(n),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},i.set(e,o),r[s]=o):(_i.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function dme(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class hme{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new cme(e),this.pickLayersPass=new m5(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||ls.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=n.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,_o("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let i=null;for(const r of e)r.preRender(this.gl,n),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new ls(this.gl),new ls(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=n.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const fme={pickedColor:null,pickedObjectIndex:-1};function pme({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let d=r*r,h=-1,p=0;for(let m=0;m<l;m++){const v=m+a-i,R=v*v;if(R>d)p+=4*c;else for(let L=0;L<c;L++){if(t[p+3]-1>=0){const q=L+o-n,pe=q*q+R;pe<=d&&(d=pe,h=p)}p+=4}}if(h>=0){const m=t.slice(h,h+4),v=e(m);if(v){const R=Math.floor(h/4/c),L=h/4-R*c;return{...v,pickedColor:m,pickedX:o+L,pickedY:a+R}}_i.error("Picked non-existent layer. Is picking buffer corrupt?")()}return fme}function g5({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function _me(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function gme(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const p=n.layerId,m=o?o.props.id:null;if(m!==p||a!==n.index){if(m!==p){const v=r.find(R=>R.props.id===p);v&&c.unshift(v)}n.layerId=m,n.index=a,n.info=null}}const l=g5(t),d=new Map;return d.set(null,l),c.forEach(h=>{let p={...l};h===o&&(p.color=s,p.index=a,p.picked=!0),p=_5({layer:h,info:p,mode:i});const m=p.layer;h===o&&"hover"===i&&(n.info=p),d.set(m.id,p),"hover"===i&&m.updateAutoHighlight(p)}),d}function _5({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class bme{constructor(e){ve(this,"gl",void 0),ve(this,"pickingFBO",void 0),ve(this,"depthFBO",void 0),ve(this,"pickLayersPass",void 0),ve(this,"layerFilter",void 0),ve(this,"lastPickedInfo",void 0),ve(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new m5(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(p=>p.id===o):null,l=a&&r.find(p=>p.id===a)||r[0],d=l&&l.unproject([e-l.x,n-l.y]);return{...s,x:e,y:n,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new ls(i),ls.isSupported(i,{colorBufferFloat:!0}))){const r=new ls(i);r.attach({36064:new go(i,{format:pi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>i.isPickable()&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const p=this._getPickable(e),m=pg(this.gl);if(!p)return{result:[],emptyInfo:g5({viewports:i,x:r,y:s,pixelRatio:m})};this._resizeBuffer();const v=RD(this.gl,[r,s],!0),R=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],L=Math.round(o*m),{width:Y,height:q}=this.pickingFBO,pe=this._getPickingRect({deviceX:R[0],deviceY:R[1],deviceRadius:L,deviceWidth:Y,deviceHeight:q}),Me={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Ue;const Ze=[],at=new Set;for(let mt=0;mt<a;mt++){let pt,ht;pt=pe?pme({...this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:pe,cullRect:Me,effects:h,pass:"picking:".concat(c)}),deviceX:R[0],deviceY:R[1],deviceRadius:L,deviceRect:pe}):{pickedColor:null,pickedObjectIndex:-1},pt.pickedLayer&&l&&this.depthFBO&&(ht=this._drawAndSample({layers:[pt.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:pt.pickedX,y:pt.pickedY,width:1,height:1},cullRect:Me,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),pt.pickedLayer&&mt+1<a&&(at.add(pt.pickedLayer),pt.pickedLayer.disablePickingIndex(pt.pickedObjectIndex)),Ue=gme({pickInfo:pt,lastPickedInfo:this.lastPickedInfo,mode:c,layers:p,viewports:i,x:r,y:s,z:ht,pixelRatio:m});for(const yt of Ue.values())yt.layer&&Ze.push(yt);if(!pt.pickedColor)break}for(const mt of at)mt.restorePickingColors();return{result:Ze,emptyInfo:Ue.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const p=this._getPickable(e);if(!p)return[];this._resizeBuffer();const m=pg(this.gl),v=RD(this.gl,[r,s],!0),R=v.x,L=v.y+v.height,Y=RD(this.gl,[r+o,s+a],!0),pe=Y.y,Ze=function mme({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):_i.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:{x:R,y:pe,width:Y.x+Y.width-R,height:L-pe},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(c)})),at=new Map,mt=Number.isFinite(l);for(let pt=0;pt<Ze.length&&!(mt&&l&&at.size>=l);pt++){const ht=Ze[pt];let yt={color:ht.pickedColor,layer:null,index:ht.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:m};yt=_5({layer:ht.pickedLayer,info:yt,mode:c}),at.has(yt.object)||at.set(yt.object,yt)}return Array.from(at.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:p,y:m,width:v,height:R}=s,L=new(l?Float32Array:Uint8Array)(v*R*4);return KE(d,{sourceX:p,sourceY:m,sourceWidth:v,sourceHeight:R,target:L}),{pickedColors:L,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,n+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const yme={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class vme{constructor(e){ve(this,"el",null),ve(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,yme),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function b5(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const wme=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),y5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Eme}=(y5&&parseFloat(y5[1]),globalThis),E2=typeof Image<"u",A2=typeof ImageBitmap<"u",S2=!!wme||!!Eme;function v5(t){const e=function w5(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Cme=/^data:image\/svg\+xml/,Tme=/\.svg((\?|#).*)?$/;function C2(t){return t&&(Cme.test(t)||Tme.test(t))}function E5(t,e){if(C2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function A5(t,e,n){return T2.apply(this,arguments)}function T2(){return T2=Lt(function*(t,e,n){const i=function Mme(t,e){if(C2(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return E5(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function Ime(t,e){return M2.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),T2.apply(this,arguments)}function M2(){return M2=Lt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),M2.apply(this,arguments)}const Dme={};let S5=!0;function I2(){return I2=Lt(function*(t,e,n){let i;i=C2(n)?yield A5(t,e,n):E5(t,n);const r=e&&e.imagebitmap;return yield function Ome(t){return D2.apply(this,arguments)}(i,r)}),I2.apply(this,arguments)}function D2(){return D2=Lt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function kme(t){for(const e in t||Dme)return!1;return!0}(e)||!S5)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),S5=!1}return yield createImageBitmap(t)}),D2.apply(this,arguments)}const Fl=!1,f0=!0;function C5(t){const e=p0(t);return function Ume(t){const e=p0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Fl)?{mimeType:"image/png",width:e.getUint32(16,Fl),height:e.getUint32(20,Fl)}:null}(e)||function Gme(t){const e=p0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Fl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Hme(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Fl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Fl),width:e.getUint16(s+7,Fl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Fl)}return null}(e)||function Vme(t){const e=p0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Fl)?{mimeType:"image/gif",width:e.getUint16(6,f0),height:e.getUint16(8,f0)}:null}(e)||function zme(t){const e=p0(t);return e.byteLength>=14&&16973===e.getUint16(0,Fl)&&e.getUint32(2,f0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,f0),height:e.getUint32(22,f0)}:null}(e)||function jme(t){const n=function Pme(t){return function Bme(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function Fme(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function Nme(t){switch(function Lme(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function p0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function R2(){return R2=Lt(function*(t,e){const{mimeType:n}=C5(t)||{},i=globalThis._parseImageNode;return b5(i),yield i(t,n)}),R2.apply(this,arguments)}function O2(){return O2=Lt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function Xme(t){switch(t){case"auto":case"data":return function Sme(){if(A2)return"imagebitmap";if(E2)return"image";if(S2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Ame(t){switch(t){case"auto":return A2||E2||S2;case"imagebitmap":return A2;case"image":return E2;case"data":return S2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function Rme(t,e,n){return I2.apply(this,arguments)}(t,e,s);break;case"image":a=yield A5(t,e,s);break;case"data":a=yield function Wme(t,e){return R2.apply(this,arguments)}(t,e);break;default:b5(!1)}return"data"===r&&(a=function x5(t){switch(v5(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),O2.apply(this,arguments)}const T5={id:"image",module:"images",name:"Images",version:"3.4.11",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function $me(t,e,n){return O2.apply(this,arguments)},tests:[t=>!!C5(new DataView(t))],options:{image:{type:"auto",decode:!0}}},Kme={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Yme(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},m0="8.8.20",P1=globalThis.deck&&globalThis.deck.VERSION;if(P1&&P1!==m0)throw new Error("deck.gl - multiple versions detected: ".concat(P1," vs ").concat(m0));P1||(_i.log(1,"deck.gl ".concat(m0))(),globalThis.deck={...globalThis.deck,VERSION:m0,version:m0,log:_i,_registerLoggers:function sce(t){JD=t}},YV([Kme,[T5,{imagebitmap:{premultiplyAlpha:"none"}}]]));const qme=globalThis.deck;class N1 extends Nd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=pi(e),r=F8(e,"TIMER_QUERY");let s=i||r;for(const o of n)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:qt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return N1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const M5=nc()&&typeof document<"u";let oge=0;class age{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(L=>b8(L)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:m=!0,stats:v=Ff.get("animation-loop-".concat(oge++))}=e;let{useDevicePixels:R=!0}=e;"useDevicePixelRatio"in e&&(_n.deprecated("useDevicePixelRatio","useDevicePixels")(),R=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=v,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:m,useDevicePixels:R}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return qt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=N1.isSupported(this.gl,["timers"])?new N1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return Lt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return _n.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=M5?new Promise((e,n)=>{M5&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function sge(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function rge(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?kD(this.props.gl,e):this.onCreateContext(e),!$E(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Roe(t){Pd(t,DD)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Loe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function Ooe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function Voe(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(_n.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(_n.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*o),t.canvas.height=Math.floor(r*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ls(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var L1=g(7271);const cge={mousedown:1,mousemove:2,mouseup:4};(function dge(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function lge(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(L1.PointerEventInput),function uge(t){t.prototype.handler=function(n){let i=cge[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(L1.MouseInput);const hge=L1.Manager,Bl=L1;class F1{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const fge=Bl?[[Bl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Bl.Rotate,{enable:!1}],[Bl.Pinch,{enable:!1}],[Bl.Swipe,{enable:!1}],[Bl.Pan,{threshold:0,enable:!1}],[Bl.Press,{enable:!1}],[Bl.Tap,{event:"doubletap",taps:2,enable:!1}],[Bl.Tap,{event:"anytap",enable:!1}],[Bl.Tap,{enable:!1}]]:null,R5={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},pge={doubletap:["tap"]},mge={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},P2={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},gge={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},O5={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},_ge=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Og=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let N2=!1;try{Og.addEventListener("test",null,{get passive(){return N2=!0,!0}}),Og.removeEventListener("test",null)}catch{N2=!1}const bge=-1!==_ge.indexOf("firefox"),{WHEEL_EVENTS:yge}=P2,P5=4.000244140625;class wge extends F1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;Og.WheelEvent&&(bge&&r.deltaMode===Og.WheelEvent.DOM_DELTA_PIXEL&&(s/=Og.devicePixelRatio),r.deltaMode===Og.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%P5==0&&(s=Math.floor(s/P5)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(yge),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!N2&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:Ege}=P2,N5="pointermove",L5="pointerover",F5="pointerout",B5="pointerenter",j5="pointerleave";class Age extends F1{constructor(e,n,i){super(e,n,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Ege),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===N5&&(this.enableMoveEvent=n),e===L5&&(this.enableOverEvent=n),e===F5&&(this.enableOutEvent=n),e===B5&&(this.enableEnterEvent=n),e===j5&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(L5,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(F5,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(B5,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(j5,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(N5,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Sge}=P2,U5="keydown";class Cge extends F1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:U5,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Sge),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===U5&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const z5="contextmenu";class Tge extends F1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:z5,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===z5&&(this.options.enable=n)}}const Mge={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Bge(t){const e=Mge[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&n),o=!!(4&n),a=!!(2&n)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function jge(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const B2={srcElement:"root",priority:0};class Uge{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=B2;"string"==typeof i||i&&i.addEventListener?c={...B2,srcElement:i}:i&&(c={...B2,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),s&&(d.passive=!0),o.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===n){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...Bge(e),...jge(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const Vge={events:null,recognizers:null,recognizerOptions:{},Manager:hge,touchAction:"none",tabIndex:0};class zge{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:s}=r,o=mge[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...Vge,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||fge}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(R5).forEach(r=>{const s=this.manager.get(r);s&&R5[r].forEach(o=>{s.recognizeWith(o)})});for(const r in n.recognizerOptions){const s=this.manager.get(r);if(s){const o=n.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new wge(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Age(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Cge(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Tge(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const s=pge[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);n?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if("string"!=typeof e){i=n;for(const d in e)this._addEventHandler(d,e[d],i,r,s);return}const{manager:o,events:a}=this,c=O5[e]||e;let l=a.get(c);l||(l=new Uge(this),a.set(c,l),l.recognizerName=gge[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,n,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(O5[e]||e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Wf(){}const G5={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Wf,onResize:Wf,onViewStateChange:Wf,onInteractionStateChange:Wf,onBeforeRender:Wf,onAfterRender:Wf,onLoad:Wf,onError:t=>_i.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class j2{constructor(e){ve(this,"props",void 0),ve(this,"width",0),ve(this,"height",0),ve(this,"userData",{}),ve(this,"canvas",null),ve(this,"viewManager",null),ve(this,"layerManager",null),ve(this,"effectManager",null),ve(this,"deckRenderer",null),ve(this,"deckPicker",null),ve(this,"eventManager",null),ve(this,"tooltip",null),ve(this,"metrics",void 0),ve(this,"animationLoop",void 0),ve(this,"stats",void 0),ve(this,"viewState",void 0),ve(this,"cursorState",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_pickRequest",void 0),ve(this,"_lastPointerDownInfo",null),ve(this,"_metricsCounter",void 0),ve(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),ve(this,"_onEvent",n=>{const i=n8[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,o,n)),!d&&l&&l(o,n)}),ve(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...G5,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&_i.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===hR()&&_i.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new YE({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Yy.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&_i.removed("onLayerHover","onHover")(),"onLayerClick"in e&&_i.removed("onLayerClick","onClick")(),e.initialViewState&&!Mg(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return Ys(this.viewManager),this.viewManager.views}getViewports(e){return Ys(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,i){Ys(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),Ys(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;n===this.width&&i===this.height||(this.width=n,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:n,height:i}),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new age({width:n,height:i,useDevicePixels:d,autoResizeViewport:!1,gl:r,onCreateContext:h=>b8({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new f5({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var n;s=a,o=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,kD(e,{enable:!0,copyState:!0})),this.tooltip=new vme(this.canvas),Pd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new u5;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new zge(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in n8)this.eventManager.on(r,this._onEvent);this.viewManager=new Jpe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new qpe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new ame,this.deckRenderer=new hme(e),this.deckPicker=new bme(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;Pd(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),_i.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=Ff.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ve(j2,"defaultProps",G5),ve(j2,"VERSION",qme.VERSION);const j1={name:"project32",dependencies:[v2],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Gge={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},U1={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Hge(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gge;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},H5={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class ph{static get DRAW_MODE(){return H5}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Sa("geometry"),drawMode:i=H5.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,qt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(qt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return qt(Number.isFinite(i)),i}}const W5=()=>{},$5={10241:9987,10240:9729,10242:33071,10243:33071};function Kge(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function qge(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}function g0(t){return t&&(t.id||t.url)}function X5(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];t[g0(r)]={...r,x:s,y:n}}}class e_e{constructor(e,{onUpdate:n=W5,onError:i=W5}){ve(this,"gl",void 0),ve(this,"onUpdate",void 0),ve(this,"onError",void 0),ve(this,"_loadOptions",null),ve(this,"_texture",null),ve(this,"_externalTexture",null),ve(this,"_mapping",{}),ve(this,"_textureParameters",null),ve(this,"_pendingCount",0),ve(this,"_autoPacking",!1),ve(this,"_xOffset",0),ve(this,"_yOffset",0),ve(this,"_rowHeight",0),ve(this,"_buffer",4),ve(this,"_canvasWidth",1024),ve(this,"_canvasHeight",0),ve(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?g0(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Qge(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=t1(t);for(const o of r){s.index++;const a=e(o,s),c=g0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function Zge({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[g0(l)]){const{height:h,width:p}=l;i+p+e>o&&(X5(n,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+p+e,s=Math.max(s,h)}}return a.length>0&&X5(n,a,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Kge(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new go(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||$5})),this._texture.height!==this._canvasHeight&&(this._texture=function Jge(t,e,n,i){const r=t.width,s=t.height,o=new go(t.gl,{width:e,height:n,parameters:i});return function dae(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=n;const{framebuffer:p,deleteFramebuffer:m}=Xy(t);qt(p);const{gl:v,handle:R}=p,L=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const Y=v.bindFramebuffer(36160,R);qt(e);let q=null;if(e instanceof Bf&&(q=e,d=Number.isFinite(d)?d:q.width,h=Number.isFinite(h)?h:q.height,q.bind(0),e=q.target),L)switch(e){case 3553:case 34067:v.copyTexSubImage2D(e,s,a,c,i,r,d,h);break;case 35866:case 32879:mo(v).copyTexSubImage3D(e,s,a,c,l,i,r,d,h)}else v.copyTexImage2D(e,s,o,i,r,d,h,0);q&&q.unbind(),v.bindFramebuffer(36160,Y||null),m&&p.delete()}(t,o,{targetY:0,width:r,height:s}),t.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||$5)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,h0(i.url,T5,this._loadOptions).then(r=>{const s=g0(i),{x:o,y:a,width:c,height:l}=this._mapping[s],d=qge(n,r,c,l);this._texture.setSubImageData({data:d,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const Y5=[0,0,0,255],t_e={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:Y5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class U2 extends Gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[j1,U1]})}initializeState(){this.state={iconManager:new e_e(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Y5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:d}=n,{iconManager:h}=this.state,p=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!p,iconAtlas:o,iconMapping:p?a:null,textureParameters:d}),p?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:v}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(v),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:WE[s],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new f1(e,{...this.getShaders(),id:this.props.id,geometry:new ph({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):_i.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}ve(U2,"defaultProps",t_e),ve(U2,"layerName","IconLayer");const q5=[];class V2 extends U2{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&_i.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!n,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):q5}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):q5}}ve(V2,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ve(V2,"layerName","MultiIconLayer");var r_e=g(822),s_e=g.n(r_e);const o_e=32,a_e=[];function c_e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function J5(t,e,n,i){let r=0;for(let o=e;o<n;o++){var s;r+=(null===(s=i[t[o]])||void 0===s?void 0:s.width)||0}return r}function Z5(t,e,n,i,r,s){let o=e,a=0;for(let c=e;c<n;c++){const l=J5(t,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function u_e(t,e,n,i,r=0,s){void 0===s&&(s=t.length);const o=[];return"break-all"===e?Z5(t,r,s,n,i,o):function d_e(t,e,n,i,r,s){let o=e,a=e,c=e,l=0;for(let d=e;d<n;d++)if((" "===t[d]||" "===t[d+1]||d+1===n)&&(c=d+1),c>a){let h=J5(t,a,c,r);l+h>i&&(o<a&&(s.push(a),o=a,l=0),h>i&&(h=Z5(t,a,c,i,r,s),o=s[s.length-1])),a=c,l+=h}}(t,r,s,n,i,o),o}function h_e(t,e,n,i,r,s){let o=0,a=0;for(let c=e;c<n;c++){const l=t[c],d=i[l];d?(a||(a=d.height),r[c]=o+d.width/2,o+=d.width):(_i.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=o_e)}s[0]=o,s[1]=a}function Q5(t,e,n,i,r){const s=Array.from(t),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),d=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],p=[0,0];let m=0,v=0,R=0;for(let L=0;L<=o;L++){const Y=s[L];if(("\n"===Y||L===o)&&(R=L),R>v){const q=d?u_e(s,n,i,r,v,R):a_e;for(let pe=0;pe<=q.length;pe++){const Me=0===pe?v:q[pe-1],Ue=pe<q.length?q[pe]:R;h_e(s,Me,Ue,r,a,p);for(let Ze=Me;Ze<Ue;Ze++)c[Ze]=m+p[1]/2,l[Ze]=p[0];m+=p[1]*e,h[0]=Math.max(h[0],p[0])}v=R}"\n"===Y&&(a[v]=0,c[v]=0,l[v]=0,v++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}class ez{constructor(e=5){ve(this,"limit",void 0),ve(this,"_cache",{}),ve(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const _0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function p_e(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let V1=new ez(3);function __e(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function rz(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class y_e{constructor(){ve(this,"props",{..._0}),ve(this,"_key",void 0),ve(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const i=function g_e(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=V1.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),r=V1.get(this._key);if(r&&0===i.size)return void(this._key!==n&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,V1.set(this._key,s)}_generateFontAtlas(e,n,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:d}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const p=h.getContext("2d");rz(p,r,o,s);const{mapping:m,canvasHeight:v,xOffset:R,yOffset:L}=function l_e({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const h of t)if(!s[h]){const p=e(h);l+p+2*i>r&&(l=0,c++),s[h]={x:l+i,y:a+c*(n+2*i)+i,width:p,height:n},l+=p+2*i}const d=n+2*i;return{mapping:s,xOffset:l,yOffset:a+c*d,canvasHeight:c_e(a+(c+1)*d)}}({getFontWidth:Y=>p.measureText(Y).width,fontHeight:1.2*o,buffer:a,characterSet:n,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==v){const Y=p.getImageData(0,0,h.width,h.height);h.height=v,p.putImageData(Y,0,0)}if(rz(p,r,o,s),c){const Y=new(s_e())(o,a,l,d,r,s),q=p.getImageData(0,0,Y.size,Y.size);for(const pe of n)__e(Y.draw(pe),q),p.putImageData(q,m[pe].x-a,m[pe].y+a)}else for(const Y of n)p.fillText(Y,m[Y].x,m[Y].y+.9*o);return{xOffset:R,yOffset:L,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const w_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class z2 extends Gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[j1,U1]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:WE[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new f1(e,{...this.getShaders(),id:this.props.id,geometry:new ph({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ve(z2,"defaultProps",w_e),ve(z2,"layerName","TextBackgroundLayer");const sz={start:1,middle:0,end:-1},oz={top:1,center:0,bottom:-1},G2=[0,0,0,255],A_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:G2},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:_0.characterSet},fontFamily:_0.fontFamily,fontWeight:_0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:G2},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:G2},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class H2 extends p2{constructor(...e){super(...e),ve(this,"state",void 0),ve(this,"getBoundingRect",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=s(n,i)||"",{size:[p,m]}=Q5(h,c,o,a,r);return[(sz["function"==typeof l?l(n,i):l]-1)*p/2,(oz["function"==typeof d?d(n,i):d]-1)*m/2,p,m]}),ve(this,"getIconOffsets",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=s(n,i)||"",{x:p,y:m,rowWidth:v,size:[R,L]}=Q5(h,c,o,a,r),Y=sz["function"==typeof l?l(n,i):l],q=oz["function"==typeof d?d(n,i):d],pe=p.length,Me=new Array(2*pe);let Ue=0;for(let Ze=0;Ze<pe;Ze++)Me[Ue++]=(Y-1)*R/2+(1-Y)*(R-v[Ze])/2+p[Ze],Me[Ue++]=(q-1)*L/2+m[Ze];return Me})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new y_e}}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=n.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:d}=function f_e({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,c=i?i/o:0,l=r[e]||Math.ceil((t.length-c)/a),d=s&&new Set,h=new Array(e);let p=t;if(a>1||c>0){p=new(0,t.constructor)(l);for(let v=0;v<l;v++)p[v]=t[v*a+c]}for(let m=0;m<e;m++){const L=p.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,L),d&&L.forEach(d.add,d)}if(d)for(const m of d)s.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:o,characterSet:c});a=d,s=(h,{index:p})=>l[p]}else{const{iterable:l,objectInfo:d}=t1(n);o=[0],a=0;for(const h of l){d.index++;const p=Array.from(s(h,d)||"");c&&p.forEach(c.add,c),a+=p.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:v,getBackgroundColor:R,getBorderColor:L,getBorderWidth:Y,backgroundPadding:q,background:pe,billboard:Me,fontSettings:Ue,outlineWidth:Ze,outlineColor:at,sizeScale:mt,sizeUnits:pt,sizeMinPixels:ht,sizeMaxPixels:yt,transitions:It,updateTriggers:ft}=this.props,vt=this.getSubLayerClass("characters",V2),Nt=this.getSubLayerClass("background",z2);return[pe&&new Nt({getFillColor:R,getLineColor:L,getLineWidth:Y,padding:q,getPosition:d,getSize:p,getAngle:m,getPixelOffset:v,billboard:Me,sizeScale:mt/this.state.fontAtlasManager.props.fontSize,sizeUnits:pt,sizeMinPixels:ht,sizeMaxPixels:yt,transitions:It&&{getPosition:It.getPosition,getAngle:It.getAngle,getSize:It.getSize,getFillColor:It.getBackgroundColor,getLineColor:It.getBorderColor,getLineWidth:It.getBorderWidth,getPixelOffset:It.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new vt({sdf:Ue.sdf,smoothing:Number.isFinite(Ue.smoothing)?Ue.smoothing:_0.smoothing,outlineWidth:Ze,outlineColor:at,iconAtlas:s,iconMapping:o,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:v,billboard:Me,sizeScale:mt*r,sizeUnits:pt,sizeMinPixels:ht*r,sizeMaxPixels:yt*r,transitions:It&&{getPosition:It.getPosition,getAngle:It.getAngle,getColor:It.getColor,getSize:It.getSize,getPixelOffset:It.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function b_e(t){_i.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),V1=new ez(t)}(e)}}ve(H2,"defaultProps",A_e),ve(H2,"layerName","TextLayer");const az="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",S_e={lightSources:{}};function W2(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const lz={name:"lights",vs:az,fs:az,getUniforms:function cz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S_e;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function C_e(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?W2(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=W2(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=W2(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return cz({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},T_e={};const I_e={name:"phong-lighting",dependencies:[lz],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function uz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T_e;if(!("material"in t))return{};const{material:e}=t;return e?function M_e(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},En=new fg({id:"luma.gl"});function ia(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function $2(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function Pi(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function X2(t){return ia($2(t),"Invalid WebGLRenderingContext"),t}function ra(t){return ia(Pi(t),"Requires WebGL2"),t}const b0={};const y0=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(y0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const $f=function(e){const n=this;this.gl=e,function L_e(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(b0[i]=!0)}while(0!==i);for(i in b0)if(b0[i])return delete b0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const p=h.attribs[s];return p.buffer=n.currentArrayBuffer,p.size=o,p.type=a,p.normalized=c,p.stride=l,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function P_e(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};$f.prototype.VERTEX_ARRAY_BINDING_OES=34229,$f.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new y0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},$f.prototype.createVertexArrayOES=function(){const e=new y0(this);return this.vertexArrayObjects.push(e),e},$f.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},$f.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof y0&&e.hasBeenBound&&e.ext===this)},$f.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function N_e(t,e){b0[t]=!0,void 0!==e&&function k_e(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const hz="OES_element_index",fz="WEBGL_draw_buffers",pz="WEBGL_debug_renderer_info",lr=t=>Pi(t)?void 0:0,X_e={3074:t=>Pi(t)?void 0:36064,35723:t=>Pi(t)?void 0:4352,35977:lr,32937:lr,36795:(t,e)=>{const n=Pi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(pz);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(pz);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:lr,35071:lr,37447:lr,36063:(t,e)=>{if(!Pi(t)){const n=t.getExtension(fz);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:lr,35374:lr,35377:lr,34852:t=>{if(!Pi(t)){const e=t.getExtension(fz);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(hz)?2147483647:65535,33001:t=>t.getExtension(hz)?16777216:65535,33e3:t=>16777216,37157:lr,35373:lr,35657:lr,36183:lr,37137:lr,34045:lr,35978:lr,35979:lr,35968:lr,35376:lr,35375:lr,35659:lr,37154:lr,35371:lr,35658:lr,35076:lr,35077:lr,35380:lr},mz="ANGLE_instanced_arrays",gz={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{ia(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[mz]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){ia(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{ia(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{ia(!1)},deleteQuery:()=>{ia(!1)},beginQuery:()=>{ia(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Y2={readBuffer:(t,e,n)=>{Pi(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function ebe(t,e){return{webgl2:Pi(t),ext:t.getExtension(e)}}(t,mz);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!Pi(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>Pi(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function Y_e(t,e,n){const i=X_e[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function sbe(t,e){let{extension:n,target:i,target2:r}=e;const s=gz[n];ia(s);const{meta:o={}}=s,{suffix:a=""}=o,c=t.getExtension(n);for(const l of Object.keys(s)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function tbe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function F_e(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new $f(this)),this.__OESVertexArrayObject))}}(t),function nbe(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function rbe(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&sbe(t,{extension:n,target:t.luma,target2:t})}(t,gz),function ibe(t,e){let{target:n,target2:i}=e;Object.keys(Y2).forEach(r=>{if("function"==typeof Y2[r]){const s=t[r]?t[r].bind(t):()=>{},o=Y2[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const _z={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},mh=(t,e,n)=>e?t.enable(n):t.disable(n),bz=(t,e,n)=>t.hint(n,e),Da=(t,e,n)=>t.pixelStorei(n,e);function v0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const cbe={3042:mh,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:mh,2885:(t,e)=>t.cullFace(e),2929:mh,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:mh,35723:bz,36006:(t,e)=>{const n=Pi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:bz,2849:(t,e)=>t.lineWidth(e),32823:mh,32824:"polygonOffset",10752:"polygonOffset",35977:mh,32938:"sampleCoverage",32939:"sampleCoverage",3089:mh,3088:(t,e)=>t.scissor(...e),2960:mh,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Da,3317:Da,37440:Da,37441:Da,37443:Da,3330:Da,3332:Da,3331:Da,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Da,32878:Da,3316:Da,3315:Da,32877:Da,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=v0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=v0(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=v0(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=v0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=v0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Gr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const lbe={blendEquation:(t,e,n)=>t.blendEquationSeparate(Gr(32777,e,n),Gr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Gr(32969,e,n),Gr(32968,e,n),Gr(32971,e,n),Gr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Gr(32824,e,n),Gr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Gr(32938,e,n),Gr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Gr(2962,e,n),Gr(2967,e,n),Gr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Gr(34816,e,n),Gr(36003,e,n),Gr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Gr(2964,e,n),Gr(2965,e,n),Gr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Gr(34817,e,n),Gr(34818,e,n),Gr(34819,e,n))},yz={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},jl=(t,e)=>t.isEnabled(e),vz={3042:jl,2884:jl,2929:jl,3024:jl,32823:jl,32926:jl,32928:jl,3089:jl,2960:jl,35977:jl};function xz(t){for(const e in t)return!1;return!0}function dbe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function wz(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function ube(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class fbe{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function gbe(t,e){if("number"==typeof(e=e||_z)){const r=e,s=vz[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=vz[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},_z),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){ia(this.stateStack.length>0),K2(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){ia(void 0!==s);const o=e[s],a=this.cache[s];dbe(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function Ez(t){ia(t.state),t.state.pop()}function K2(t,e){if(ia($2(t),"setParameters requires a WebGL context"),xz(e))return;const n={};for(const r in e){const s=Number(r),o=cbe[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,lbe[r])(t,e,i)}function kg(t,e,n){if(xz(e))return n(t);const{nocatch:i=!0}=e;let r;if(function mbe(t){t.state||function pbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(ia(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new fbe(t,{copyState:i}),function hbe(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in yz)ube(t,s,yz[s]);wz(t,"getParameter"),wz(t,"isEnabled")}t.state.enable=n}(t,{copyState:!1}),t.state.push()}(t),K2(t,e),i)r=n(t),Ez(t);else try{r=n(t)}finally{Ez(t)}return r}nc();const x0="8.5.21",w0=new class Cbe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new YE({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==x0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(x0));function fn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function J2(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return fn(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function gh(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(nc()&&En.log(1,"luma.gl ".concat(x0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:x0,version:x0,log:En,stats:w0,globals:{modules:{},nodeIO:{}}}),globalThis;const Z2={};function _h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";Z2[t]=Z2[t]||1;const e=Z2[t]++;return"".concat(t,"-").concat(e)}function Sz(t){return fn("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function Q2(t){let e=!0;for(const n in t){e=!1;break}return e}function Cz(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw En.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const Pg="Resource subclass must define virtual methods";class bh{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};X2(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||_h(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fn(e=J2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Pi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=Pi(this.gl),o={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?gh(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=gh(this.gl,o[h]))}}return o}setParameter(e,n){fn(e=J2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Pi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=J2(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return Cz(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(Pg)}_deleteHandle(){throw new Error(Pg)}_bindHandle(e){throw new Error(Pg)}_getOptsFromHandle(){throw new Error(Pg)}_getParameter(e,n){throw new Error(Pg)}_setParameter(e,n){throw new Error(Pg)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=w0.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];w0.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=w0.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=w0.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Tbe="Failed to deduce GL constant from typed array";function eO(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Tbe)}}function E0(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ibe(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:o,width:r,height:s}}function tO(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";En.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];En.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];En.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Dbe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Rbe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class sa{static getBytesPerElement(e){return E0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return fn(e.size),E0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new sa(Dbe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return sa.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return sa.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=tO("Accessor",e,Rbe),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const Mz={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Obe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Mz},kbe={removedProps:Mz};class yo extends bh{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/sa.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/sa.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=tO("Buffer",e,Obe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=tO("Buffer",e,kbe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new sa(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;fn(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(ra(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return ra(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ra(this.gl);const s=E0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const d=Math.min(o,c);return r=r||d,fn(r<=d),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(fn(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;fn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=eO(e);return fn(s),this.setAccessor(new sa(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;fn(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/E0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new sa(this.accessor,{type:eO(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return En.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return En.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return En.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return En.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new sa(this.accessor,e),this}}const nO={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Pbe={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Nbe={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Bbe=[9729,9728],Iz=globalThis.WebGLBuffer||function(){};class z1 extends bh{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function Lbe(t,e){const n=nO[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=Pi(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function Fbe(t,e){const n=nO[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=_h("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(q=>this.initialize(Object.assign({},e,{pixels:q,data:q}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:p,dataFormat:m,type:v,compressed:R=!1,mipmaps:L=!0}=e;const{depth:Y=0}=e;return({width:h,height:p,compressed:R,dataFormat:m,type:v}=this._deduceParameters({format:s,type:v,dataFormat:m,compressed:R,data:n,width:h,height:p})),this.width=h,this.height=p,this.depth=Y,this.format=s,this.type=v,this.dataFormat=m,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),L&&this._isNPOT()&&(En.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),L=!1,this._updateForNPOT(c)),this.mipmaps=L,this.setImageData({data:n,width:h,height:p,depth:Y,format:s,type:v,dataFormat:m,border:o,mipmaps:L,parameters:l,compressed:R}),L&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(En.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),kg(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:p=this.height,dataFormat:m=this.dataFormat,compressed:v=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:v,width:h,height:p}=this._deduceParameters({format:s,type:d,dataFormat:m,compressed:v,data:l,width:h,height:p}));const{gl:R}=this;R.bindTexture(this.target,this.handle);let L=null;({data:l,dataType:L}=this._getDataType({data:l,compressed:v}));let Y,q=0;return kg(this.gl,c,()=>{switch(L){case"null":R.texImage2D(n,r,s,h,p,o,m,d,l);break;case"typed-array":R.texImage2D(n,r,s,h,p,o,m,d,l,a);break;case"buffer":Y=ra(R),Y.bindBuffer(35052,l.handle||l),Y.texImage2D(n,r,s,h,p,o,m,d,a),Y.bindBuffer(35052,null);break;case"browser-object":Pi(R)?R.texImage2D(n,r,s,h,p,o,m,d,l):R.texImage2D(n,r,s,m,d,l);break;case"compressed":for(const[pe,Me]of l.entries())R.compressedTexImage2D(n,pe,Me.format,Me.width,Me.height,o,Me.data),q+=Me.levelSize;break;default:fn(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===L?q:l&&l.byteLength?l.byteLength:this.width*this.height*(Pbe[this.dataFormat]||4)*(Nbe[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:m=!1,offset:v=0,border:R=this.border,parameters:L={}}=e;if(({type:h,dataFormat:p,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:p,compressed:m,data:r,width:a,height:c})),fn(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const Y=r;r=Y.data,a=Y.shape[0],c=Y.shape[1]}r instanceof yo&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),kg(this.gl,L,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,s,o,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,s,o,a,c,p,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,s,o,a,c,p,h,r,v);else if(r instanceof Iz){const Y=ra(this.gl);Y.bindBuffer(35052,r),Y.texSubImage2D(n,l,s,o,a,c,p,h,v),Y.bindBuffer(35052,null)}else Pi(this.gl)?ra(this.gl).texSubImage2D(n,l,s,o,a,c,p,h,r):this.gl.texSubImage2D(n,l,s,o,p,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return En.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof yo?{data:n.handle,dataType:"buffer"}:n instanceof Iz?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=nO[n];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},fn(r,"Could not deduced texture size"),fn(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),fn(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:fn(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Pi(this.gl)||!this.width||!this.height||Sz(this.width)&&Sz(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Bbe.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function jbe(t,e){return fn("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class rO extends z1{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return z1.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};X2(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:jbe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Xf="EXT_color_buffer_float",Dz={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Xf,bpp:2},33327:{gl2:Xf,bpp:4},34842:{gl2:Xf,bpp:8},33326:{gl2:Xf,bpp:4},33328:{gl2:Xf,bpp:8},34836:{gl2:Xf,bpp:16},35898:{gl2:Xf,bpp:4}};class A0 extends bh{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function Ube(t,e,n){const i=n[e];if(!i)return!1;const r=Pi(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,Dz)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return fn(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Pi(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Dz[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const Rz=6144,Nz="clear: bad arguments";function Lz(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),fn(0!==o,Nz),kg(t,s,()=>{t.clear(o)})}function $be(t,e){const{gl:n,width:i,height:r,id:s}=t;return new Gd(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function Xbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=function S0(t){return t instanceof Gd?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:$be(t),deleteFramebuffer:!0}}(t);fn(d);const{gl:p,handle:m,attachments:v}=d;a=a||d.width,c=c||d.height,36064===s&&null===m&&(s=1028),fn(v[s]),l=l||v[s].type,o=function Ybe(t,e,n,i,r){if(t)return t;const s=E0(e=e||5121,{clamped:!1}),o=function Wbe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return fn(!1),0}}(n);return new s(i*r*o)}(o,l,r,a,c),l=l||eO(o);const R=p.bindFramebuffer(36160,m);return p.readPixels(n,i,a,c,r,l,o),p.bindFramebuffer(36160,R||null),h&&d.delete(),o}function sO(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Xbe(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=Ibe({data:i,width:r,height:s}));!function Mbe(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}const Fz="Multiple render targets not supported";class Gd extends bh{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Gd(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=ra(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=ra(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(fn(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const p=r[h];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return fn(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&En.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){fn(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof A0)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,p=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:p})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function qbe(t){return(Gd.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&Lz(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,c)=>{!function Hbe(t){let{framebuffer:e=null,buffer:n=Rz,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ra(t),kg(t,{framebuffer:e},()=>{switch(n){case Rz:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:fn(!1,Nz)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return En.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return En.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return En.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return En.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return En.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return En.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=ra(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=gh(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?gh(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?gh(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(sO(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>En.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=sO(this,{targetMaxHeight:100});return En.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new rO(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new A0(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new A0(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&fn(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof A0?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:ra(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const c=function Kbe(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:fn(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function O_e(t){return Pi(t)?t:null}(this.gl);n?n.readBuffer(e):fn(36064===e||1029===e,Fz),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=ra(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):fn(1===e.length&&(36064===e[0]||1029===e[0]),Fz)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function tye(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Bz)void 0===t.luma.caps[e]&&(t.luma.caps[e]=Uz(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Gd.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const Bz={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Zbe(t){const e=new rO(t,{format:6408,type:5126,dataFormat:6408}),n=new Gd(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Qbe=2;function jz(t,e){return function eye(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>Uz(t,n))}(t,e)}function Uz(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function nye(t,e){const n=Bz[e];let i;fn(n,e);const r=Pi(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:fn(!1);return i}(t,e)),t.luma.caps[e]||En.log(Qbe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const oO=Math.PI/180,G1=new Float32Array(16),Vz=new Float32Array(12);function zz(t,e,n){const i=e[0]*oO,r=e[1]*oO,s=e[2]*oO,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),d=Math.cos(i),h=Math.cos(r),p=n[0],m=n[1],v=n[2];t[0]=p*h*d,t[1]=p*c*d,t[2]=p*-a,t[3]=m*(-c*l+h*a*o),t[4]=m*(h*l+c*a*o),t[5]=m*d*o,t[6]=v*(c*o+h*a*l),t[7]=v*(-h*o+c*a*l),t[8]=v*d*l}function Gz(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const Hz={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(s),h=Array.isArray(r),p=Array.isArray(o),m=l||!c&&!!a(i[0]);t.constant=m?l:h&&d&&p;const v=t.value;if(t.constant){let R;m?(G1.set(a),R=Gz(G1)):(R=Vz,zz(R,r,s),R.set(o,9)),t.value=new Float32Array(R)}else{let R=e*t.size;const{iterable:L,objectInfo:Y}=t1(i,e,n);for(const q of L){let pe;Y.index++,m?(G1.set(l?a:a(q,Y)),pe=Gz(G1)):(pe=Vz,zz(pe,h?r:r(q,Y),d?s:s(q,Y)),pe.set(p?o:o(q,Y),9)),v[R++]=pe[0],v[R++]=pe[1],v[R++]=pe[2],v[R++]=pe[3],v[R++]=pe[4],v[R++]=pe[5],v[R++]=pe[6],v[R++]=pe[7],v[R++]=pe[8],v[R++]=pe[9],v[R++]=pe[10],v[R++]=pe[11]}}}};function Wz(t,e){return e===Ai.CARTESIAN||e===Ai.METER_OFFSETS||e===Ai.DEFAULT&&!t.isGeospatial}function $z(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),_i.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function sye(t,e){if(t.attributes)return $z(t.attributes,e),t instanceof ph?t:new ph(t);if(t.positions||t.POSITION)return $z(t,e),new ph({attributes:t});throw Error("Invalid mesh")}class aO extends Gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=!pi(this.context.gl),n={};return jz(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[j1,I_e,U1],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Hz}),this.setState({emptyTexture:new go(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const o=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||Wz(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new f1(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:sye(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}ve(aO,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),ve(aO,"layerName","SimpleMeshLayer");const Xz="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",aye={lightSources:{}};function cO(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const Kz={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[{name:"lights",vs:Xz,fs:Xz,getUniforms:function Yz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aye;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function cye(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?cO(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=cO(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=cO(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return Yz({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}}]};class Ng{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||_h(this.constructor.name),this.display=!0,this.position=new tn,this.rotation=new tn,this.scale=new tn(1,1,1),this.matrix=new Hn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return fn(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return fn(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return fn(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:s=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){fn(e),n=n||this.matrix;const i=new Hn(e).multiplyRight(n),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class C0 extends Ng{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;En.assert(n.every(i=>i instanceof Ng),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const s=n.getBounds();if(!s)return;const[o,a]=s,c=new tn(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new tn(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new tn(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let p=0;p<3;p++)e[0][p]=Math.min(e[0][p],h[p]),e[1][p]=Math.max(e[1][p],h[p])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Hn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Hn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof C0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let H1;class lO extends V8{static get ZERO(){return H1||(H1=new lO(0,0,0,0),Object.freeze(H1)),H1}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),Ld(e)&&1===arguments.length?this.copy(e):(Zr.debug&&(ui(e),ui(n),ui(i),ui(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Zr.debug&&(ui(e.x),ui(e.y),ui(e.z),ui(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ui(e)}get w(){return this[3]}set w(e){this[3]=ui(e)}transform(e){return HD(this,this,e),this.check()}transformByMatrix3(e){return Y8(this,this,e),this.check()}transformByMatrix2(e){return function $ae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return $8(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function qz(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1],v=n[2],R=n[3],L=n[4],Y=n[5],q=n[6],pe=n[7],Me=n[8];return t[0]=p*i+m*o+v*l,t[1]=p*r+m*a+v*d,t[2]=p*s+m*c+v*h,t[3]=R*i+L*o+Y*l,t[4]=R*r+L*a+Y*d,t[5]=R*s+L*c+Y*h,t[6]=q*i+pe*o+Me*l,t[7]=q*r+pe*a+Me*d,t[8]=q*s+pe*c+Me*h,t}function Jz(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Zz(){var t=new na(4);return na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Qz(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function eG(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],c=n[1],l=n[2],d=n[3];return t[0]=i*d+o*a+r*l-s*c,t[1]=r*d+o*c+s*a-i*l,t[2]=s*d+o*l+i*c-r*a,t[3]=o*d-i*a-r*c-s*l,t}var nG=q6,Iye=function(){var t=z8(),e=G8(1,0,0),n=G8(0,1,0);return function(i,r,s){var o=H8(r,s);return o<-.999999?(ZE(t,e,r),function Pae(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&ZE(t,n,r),function Fae(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),Qz(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(ZE(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function bue(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();Zz(),Zz(),function lye(){var t=new na(9);na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const Dye=[0,0,0,1];class T0 extends JE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function tG(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return Qz(this,e,n),this.check()}identity(){return function gye(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ui(e)}get y(){return this[1]}set y(e){this[1]=ui(e)}get z(){return this[2]}set z(e){this[2]=ui(e)}get w(){return this[3]}set w(e){this[3]=ui(e)}len(){return function gue(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function _ue(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function yue(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return Iye(this,e,n),this.check()}add(e){return function mue(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function vye(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function Aye(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function Eye(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function vue(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return eG(this,this,e),this.check()}multiplyLeft(e){return eG(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function _ye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function bye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-s*a,t[1]=r*c+o*a,t[2]=s*c+i*a,t[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function yye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=s*c+o*a,t[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return nG(this,this,e),this.check()}slerp(e,n,i){let r,s,o;switch(arguments.length){case 1:({start:r=Dye,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=n;break;default:r=e,s=n,o=i}return function W1(t,e,n,i){var p,m,v,R,L,r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],l=n[1],d=n[2],h=n[3];return(m=r*c+s*l+o*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>Ol?(p=Math.acos(m),v=Math.sin(p),R=Math.sin((1-i)*p)/v,L=Math.sin(i*p)/v):(R=1-i,L=i),t[0]=R*r+L*c,t[1]=R*s+L*l,t[2]=R*o+L*d,t[3]=R*a+L*h,t}(this,r,s,o),this.check()}transformVector4(e,n=new lO){return function xue(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2],l=n[3],d=l*i+a*s-c*r,h=l*r+c*i-o*s,p=l*s+o*r-a*i,m=-o*i-a*r-c*s;t[0]=d*l+m*-o+h*-c-p*-a,t[1]=h*l+m*-a+p*-o-d*-c,t[2]=p*l+m*-c+d*-a-h*-o,t[3]=e[3]}(n,e,this),Ky(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Rye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Oye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function sG(t){if(!t._animation){const e=Oye[t.componentType],n=Rye[t.type],i=n*t.count,{buffer:r,byteOffset:s}=t.bufferView.data,o=new e(r,s+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=n)a.push(Array.from(o.slice(c,c+n)));t._animation=a}}return t._animation}const kye=new Hn,dO=new T0;class jye{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function Bye(t,e,n,i){let{input:r,interpolation:s,output:o}=e;const c=t%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:En.warn("Bad animation path ".concat(i))()}fn(n[i].length===o[d].length);const h=r[d],p=r[l];switch(s){case"STEP":!function Fye(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,o[d]);break;case"LINEAR":p>h&&function Nye(t,e,n,i,r){if("rotation"===e){dO.slerp({start:n,target:i,ratio:r});for(let s=0;s<dO.length;s++)t[e][s]=dO[s]}else for(let s=0;s<n.length;s++)t[e][s]=r*i[s]+(1-r)*n[s]}(n,i,o[d],o[l],(c-h)/(p-h));break;case"CUBICSPLINE":p>h&&function Lye(t,e,n){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const d=r[l]*a,h=s[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:o[3*d+1],outTangent0:o[3*d+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:p-h,ratio:(c-h)/(p-h)});break;default:En.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function Pye(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=kye.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(o,o._node)})}}class Uye{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),s=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:sG(e.accessors[c]),interpolation:l,output:sG(e.accessors[d])}}),o=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new jye({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}const M0="vs";function Hd(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const hO={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function zye(t){let e=oG(t);return"object"===e?t?"type"in t?Object.assign({},t,hO[t.type]):"value"in t?(e=oG(t.value),Object.assign({type:e},t,hO[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},hO[e])}function oG(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class fO{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:p}=e;Hd("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||p,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Wye(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),o&&(this.uniforms=function Vye(t){const e={};for(const n in t){const r=zye(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Hd(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Hd(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function $ye(t){return function aG(t){const e={},n={};return pO({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(cG(t))}function pO(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&pO({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function cG(t,e){return t.map(n=>(n instanceof fO||(Hd("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Hd(n.name,"shader module has no name"),(n=new fO(n)).dependencies=cG(n.dependencies)),n))}const Yye=7936,Kye=7937,qye=7938,Jye=35724,mO={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Yf={};function e0e(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(mO).forEach(t=>{Yf[t]=t});const gO={};function lG(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=mO[e];if(Hd(i,e),!function Xye(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in gO)return gO[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),gO[e]=c,c}function $1(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function t0e(t,e){const n=mO[e];Hd(n,e);const i=function Zye(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Hd(!1===r||!0===r),r}(t,n))}const o0e={[M0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},X1="__LUMA_INJECT_DECLARATIONS__",dG=/void\s+main\s*\([^)]*\)\s*\{\n?/,uG=/}\n?[^{}]*$/,_O=[];function hG(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===M0;for(const s in n){const o=n[s];o.sort((c,l)=>c.order-l.order),_O.length=o.length;for(let c=0,l=o.length;c<l;++c)_O[c]=o[c].injection;const a="".concat(_O.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(X1,a));break;case"vs:#main-start":r&&(t=t.replace(dG,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(uG,c=>a+c));break;case"fs:#decl":r||(t=t.replace(X1,a));break;case"fs:#main-start":r||(t=t.replace(dG,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(uG,c=>a+c));break;default:t=t.replace(s,c=>c+a)}}return t=t.replace(X1,""),i&&(t=t.replace(/\}\s*$/,s=>s+o0e[e])),t}function Lg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const fG=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],a0e=[...fG,[Lg("attribute"),"in $1"],[Lg("varying"),"out $1"]],c0e=[...fG,[Lg("varying"),"in $1"]],pG=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],l0e=[...pG,[Lg("in"),"attribute $1"],[Lg("out"),"varying $1"]],d0e=[...pG,[Lg("in"),"varying $1"]],bO="gl_FragColor",yO=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,u0e=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Y1(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const m0e="\n\n".concat(X1,"\n\n"),mG={[M0]:"vertex",fs:"fragment"};function gG(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;Hd("string"==typeof i,"shader source must be a string");const p=r===M0,m=i.split("\n");let v=100,R="",L=i;0===m[0].indexOf("#version ")?(v=300,R=m[0],L=m.slice(1).join("\n")):R="#version ".concat(v);const Y={};s.forEach(at=>{Object.assign(Y,at.getDefines())}),Object.assign(Y,o);let q=d?"".concat(R,"\n").concat(function v0e(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(mG[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function y0e(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(mG[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function n0e(t){switch(function Qye(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Yye),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Kye);return{gpuVendor:e0e(n,i),vendor:n,renderer:i,version:t.getParameter(qye),shadingLanguageVersion:t.getParameter(Jye)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function i0e(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return $1(t,Yf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),$1(t,Yf.GLSL_DERIVATIVES)&&lG(t,Yf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),$1(t,Yf.GLSL_FRAG_DATA)&&lG(t,Yf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),$1(t,Yf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function x0e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(Y),"\n").concat(p?"":"precision highp float;\n\n","\n"):"".concat(R,"\n");const pe=function E0e(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),Me={},Ue={},Ze={};for(const at in c){const mt="string"==typeof c[at]?{injection:c[at],order:0}:c[at],pt=at.match(/^(v|f)s:(#)?([\w-]+)$/);pt?pt[2]?"decl"===pt[3]?Ue[at]=[mt]:Ze[at]=[mt]:Me[at]=[mt]:Ze[at]=[mt]}for(const at of s){h&&at.checkDeprecations(L,h),q+=at.getModuleSource(r,v);const pt=at.injections[r];for(const ht in pt){const yt=ht.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ft="decl"===yt[2]?Ue:Ze;ft[ht]=ft[ht]||[],ft[ht].push(pt[ht])}else Me[ht]=Me[ht]||[],Me[ht].push(pt[ht])}}return q+=m0e,q=hG(q,r,Ue),q+=function w0e(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(pe[r],Me),q+=L,q=hG(q,r,Ze),q=function h0e(t,e,n){switch(e){case 300:return n?Y1(t,a0e):function f0e(t){const e=(t=Y1(t,c0e)).match(yO);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(bO,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(u0e,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(bO,"\\b"),"g"),n)}return t}(t);case 100:return n?Y1(t,l0e):function p0e(t){const e=(t=Y1(t,d0e)).match(yO);if(e){const n=e[1];t=t.replace(yO,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),bO)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(q,l?100:v,p),q}function b0e(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const A0e={5126:pr.bind(null,"uniform1fv",Ra,1,vo),35664:pr.bind(null,"uniform2fv",Ra,2,vo),35665:pr.bind(null,"uniform3fv",Ra,3,vo),35666:pr.bind(null,"uniform4fv",Ra,4,vo),5124:pr.bind(null,"uniform1iv",yh,1,vo),35667:pr.bind(null,"uniform2iv",yh,2,vo),35668:pr.bind(null,"uniform3iv",yh,3,vo),35669:pr.bind(null,"uniform4iv",yh,4,vo),35670:pr.bind(null,"uniform1iv",yh,1,vo),35671:pr.bind(null,"uniform2iv",yh,2,vo),35672:pr.bind(null,"uniform3iv",yh,3,vo),35673:pr.bind(null,"uniform4iv",yh,4,vo),35674:pr.bind(null,"uniformMatrix2fv",Ra,4,Wd),35675:pr.bind(null,"uniformMatrix3fv",Ra,9,Wd),35676:pr.bind(null,"uniformMatrix4fv",Ra,16,Wd),35678:qs,35680:qs,5125:pr.bind(null,"uniform1uiv",K1,1,vo),36294:pr.bind(null,"uniform2uiv",K1,2,vo),36295:pr.bind(null,"uniform3uiv",K1,3,vo),36296:pr.bind(null,"uniform4uiv",K1,4,vo),35685:pr.bind(null,"uniformMatrix2x3fv",Ra,6,Wd),35686:pr.bind(null,"uniformMatrix2x4fv",Ra,8,Wd),35687:pr.bind(null,"uniformMatrix3x2fv",Ra,6,Wd),35688:pr.bind(null,"uniformMatrix3x4fv",Ra,12,Wd),35689:pr.bind(null,"uniformMatrix4x2fv",Ra,8,Wd),35690:pr.bind(null,"uniformMatrix4x3fv",Ra,12,Wd),35678:qs,35680:qs,35679:qs,35682:qs,36289:qs,36292:qs,36293:qs,36298:qs,36299:qs,36300:qs,36303:qs,36306:qs,36307:qs,36308:qs,36311:qs},S0e={},C0e={},T0e={},_G=[0];function vO(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(_G[0]=t,t=_G);const r=t.length;if(r%e&&En.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Ra(t,e){return vO(t,e,Float32Array,S0e)}function yh(t,e){return vO(t,e,Int32Array,C0e)}function K1(t,e){return vO(t,e,Uint32Array,T0e)}function bG(t,e,n){const i=A0e[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function M0e(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function D0e(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function O0e(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof z1||t instanceof A0)||t instanceof Gd&&!!t.texture}function R0e(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function qs(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function pr(t,e,n,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),s=d,h=!0;else{fn(s===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(l[p]!==r[p]){h=!0;break}}return h&&(i(o,t,a,l),r.set(l)),h}}function vo(t,e,n,i){t[e](n,i)}function Wd(t,e,n,i){t[e](n,!1,i)}function q1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function vG(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();n+=xG("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function xG(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class I0 extends bh{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return fn(!1),"unknown"}}constructor(e,n){X2(e),fn("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:q1(n.source,null)||n.id||_h("unnamed ".concat(I0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=q1(n,null);i&&(this.id=_h(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(I0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return q1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function yG(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||q1(e)||"(unnamed)",c="".concat(function N0e(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const p=h.split(":"),m=p[0],v=parseInt(p[2],10);if(isNaN(v))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?s[v]=h:o[v]=h}const l=function L0e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return xG(a,r-a.length)+n+s})}(e);return{shaderName:c,errors:vG(s,l),warnings:vG(o,l)}}(i,this.source,this.shaderType,this.id);throw En.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),En.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class xO extends I0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class wO extends I0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const B0e=5120,j0e=5121,U0e=5122,V0e=5123,xs=5126,D0=5124,R0=5125,EO={[xs]:[xs,1,"float"],35664:[xs,2,"vec2"],35665:[xs,3,"vec3"],35666:[xs,4,"vec4"],[D0]:[D0,1,"int"],35667:[D0,2,"ivec2"],35668:[D0,3,"ivec3"],35669:[D0,4,"ivec4"],[R0]:[R0,1,"uint"],36294:[R0,2,"uvec2"],36295:[R0,3,"uvec3"],36296:[R0,4,"uvec4"],35670:[xs,1,"bool"],35671:[xs,2,"bvec2"],35672:[xs,3,"bvec3"],35673:[xs,4,"bvec4"],35674:[xs,8,"mat2"],35685:[xs,8,"mat2x3"],35686:[xs,8,"mat2x4"],35675:[xs,12,"mat3"],35687:[xs,12,"mat3x2"],35688:[xs,12,"mat3x4"],35676:[xs,16,"mat4"],35689:[xs,16,"mat4x2"],35690:[xs,16,"mat4x3"]};function TG(t){const e=EO[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function MG(t,e){switch(t){case B0e:case j0e:case U0e:case V0e:t=xs}for(const n in EO){const[i,r,s]=EO[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class uve{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Pi(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=TG(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new sa(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=TG(i),c={location:e,name:n,accessor:new sa({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const hve=35981,fve=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class DG extends bh{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",fve),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=hve}=e;return this.hash=n||"",this.vs="string"==typeof i?new xO(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new wO(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,fn(this.vs instanceof xO),fn(this.fs instanceof wO),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ra(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new uve(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:p=null,transformFeedback:m,framebuffer:v,parameters:R={},uniforms:L,samplers:Y}=e;if((L||Y)&&(En.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(L||{})),En.priority>=n){const q=v?v.id:"default",pe="mode=".concat(gh(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(gh(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(q);En.log(n,pe)()}return fn(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(p.bindForDraw(r,d,()=>{if(void 0!==v&&(R=Object.assign({},R,{framebuffer:v})),m){const q=function CG(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return fn(!1),0}}(i);m.begin(q)}this._bindTextures(),kg(this.gl,R,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,d):c&&Pi(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,d):this.gl.drawArrays(i,s,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};En.priority>=2&&function I0e(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!D0e(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof Gd&&(s=s.texture),s instanceof z1)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&R0e(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new xO({handle:r});break;case 35632:i.fs=new wO({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=_h(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),En.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),En.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||En.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=M0e(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=bG(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=bG(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class AO{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new AO(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),p=l.map(pe=>this._getHash(pe.name)).sort(),m=o.map(pe=>this._getHash(pe)),v=Object.keys(r).sort(),R=Object.keys(s).sort(),L=[],Y=[];for(const pe of v)L.push(this._getHash(pe)),L.push(this._getHash(r[pe]));for(const pe of R)Y.push(this._getHash(pe)),Y.push(this._getHash(s[pe]));const q="".concat(d,"/").concat(h,"D").concat(L.join("/"),"M").concat(p.join("/"),"I").concat(Y.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[q]){const pe=function _0e(t,e){const{vs:n,fs:i}=e,r=$ye(e.modules||[]);return{gl:t,vs:gG(t,Object.assign({},e,{source:n,type:M0,modules:r})),fs:gG(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:b0e(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[q]=new DG(this.gl,{hash:q,vs:pe.vs,fs:pe.fs,varyings:o,bufferMode:a}),this._getUniforms[q]=pe.getUniforms||(Me=>{}),this._useCounts[q]=0}return this._useCounts[q]++,this._programCache[q]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;n[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let Z1=null;class Oa extends bh{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||Pi(e)||"Chrome"===hR()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Oa(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Oa.MAX_ATTRIBUTES=Oa.MAX_ATTRIBUTES||e.getParameter(34921),Oa.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Oa._setConstantFloatArray(e,n,i);break;case Int32Array:Oa._setConstantIntArray(e,n,i);break;case Uint32Array:Oa._setConstantUintArray(e,n,i);break;default:fn(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Oa.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return fn(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(fn(Pi(h)),p.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Oa.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new yo(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function mve(t,e){const n=function pve(t){return(!Z1||Z1.byteLength<t)&&(Z1=new ArrayBuffer(t)),Z1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function gve(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:fn(!1)}}static _setConstantIntArray(e,n,i){switch(fn(Pi(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:fn(!1)}}static _setConstantUintArray(e,n,i){switch(fn(Pi(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:fn(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return fn(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const yve=/^(.+)__LOCATION_([0-9]+)$/,vve=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class xve{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Oa(e),Cz(this,"VertexArray","v6.0",vve),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new yo(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof yo&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof yo&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,En.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const d=sa.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:p}=d;return fn(Number.isFinite(h)&&Number.isFinite(p)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=yve.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof yo)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof yo)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof yo))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(Oa.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Oa.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof yo){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}class wve extends bh{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ra(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Q2(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,En.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof yo?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}function O0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function Eve(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=O0(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function RG(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,s="NOT PROVIDED",o=1,a=0,c=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof yo){const p=e,{data:m,changed:v}=p.getDebugData();let R;return d=v?"*":"",h=m,c=p.byteLength,a=c/m.BYTES_PER_ELEMENT/o,n?R="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(gh(r,s),")"):(l=!0,R="".concat(c," bytes")),{[i]:"".concat(d).concat(O0(h,{size:o,isInteger:l})),"Format ":R}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(O0(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Sve(t,e){const{type:n,size:i}=e,r=MG(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function OG(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;fn(n);const o=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(o)&&SO({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(o)&&SO({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||SO({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const p={};if(!r)for(const m in i){const v=i[m];c[m]||(h++,p[m]={Type:"NOT USED: ".concat(v),[e]:O0(v)})}return{table:c,count:d,unusedTable:p,unusedCount:h}}function SO(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function Cve(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?O0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function kG(t){const{type:e,size:n}=t.accessor,i=MG(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const Mve={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Dve(t,e){const{attributeMap:n=Mve}=e||{};return n&&n[t]||t}function Rve(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}fn(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const PG=()=>{},Pve={};class NG{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=_h("model")}=n;fn($2(e)),this.id=i,this.gl=e,this.id=n.id||_h("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||AO.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},fn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return fn(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return fn(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function Ive(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Dve(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new yo(t,c),l],Rve(s,l)}}if(r){const s=r.value||r;fn(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new yo(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Q2(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return Lz(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),En.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:p=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:v=d.isInstanced}=this.props;v&&!this.isInstanced&&En.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:R,instanceCount:L}=this,{onBeforeRender:Y=PG,onAfterRender:q=PG}=this.props;Y(),this.program.setUniforms(this.uniforms);const pe=this.program.draw(Object.assign(Pve,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:p,isInstanced:R,instanceCount:L,offset:h?m:0}));return q(),En.priority>=2&&this._logDrawCallEnd(l,c,i),pe}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}fn(n instanceof DG,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new xve(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof yo&&n.delete()}}_setAnimationProps(e){this.animated&&fn(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Q2(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new wve(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),En.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:En.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function Ave(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=RG(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(Sve(o.name,c))),i[a]=RG(e,r[s],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=OG({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=OG({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&En.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&En.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Tve(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=kG(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=kG(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);En.table(e,s)(),En.table(e,o)(),En.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),En.groupEnd(2)()}}class Nve extends Ng{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof NG?(this.model=e,this._setModelNodeProps(n)):this.model=new NG(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class Lve{constructor(e,n){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},jz(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new rO(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(En.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function LG(t,e){return Pi(t)?"#version 300 es\n".concat(e):e}const Uve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Vve={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class zve{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},Vve,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Uye(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new C0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new C0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Hn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new C0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){En.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function jve(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new Lve(t,e);En.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(d=>d.buffer));const l=new Nve(t,Object.assign({id:n,drawMode:i,vertexCount:r,modules:[Kz],defines:a.defines,parameters:a.parameters,vs:LG(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:LG(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},o));return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),En.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new yo(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new sa({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Uve[e.type]})}createSampler(e){return e}needsPOT(){return!1}}const Ul={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},$ve=Ul.global||Ul.self||Ul.window||{},CO="object"!=typeof process||"[object process]"!==String(process)||process.browser,TO="function"==typeof importScripts,FG=(typeof window<"u"&&window,typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version));FG&&parseFloat(FG[1]);var k0=g(3012);const Yve="3.2.10",MO={};function Q1(t){return IO.apply(this,arguments)}function IO(){return IO=Lt(function*(t,e=null,n={}){return e&&(t=function Kve(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:CO?n.CDN?(function Xve(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Yve,"/dist/libs/").concat(t)):TO?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),MO[t]=MO[t]||function qve(t){return DO.apply(this,arguments)}(t),yield MO[t]}),IO.apply(this,arguments)}function DO(){return DO=Lt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!CO)try{return k0&&k0.requireFromFile&&(yield k0.requireFromFile(t))}catch{return null}return TO?importScripts(t):function Jve(t,e){if(!CO)return k0.requireFromString&&k0.requireFromString(t,e);if(TO)return eval.call($ve,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),DO.apply(this,arguments)}const Zve="https://unpkg.com/@loaders.gl/textures@".concat("3.2.10","/dist/libs/basis_encoder.wasm"),Qve="https://unpkg.com/@loaders.gl/textures@".concat("3.2.10","/dist/libs/basis_encoder.js");let RO,PO;function jG(t){return OO.apply(this,arguments)}function OO(){return OO=Lt(function*(t){const e=t.modules||{};return e.basis?e.basis:(RO=RO||function exe(t){return kO.apply(this,arguments)}(t),yield RO)}),OO.apply(this,arguments)}function kO(){return kO=Lt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield Q1("basis_transcoder.js","textures",t),yield Q1("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function txe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,n)}),kO.apply(this,arguments)}function UG(t){return NO.apply(this,arguments)}function NO(){return NO=Lt(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(PO=PO||function nxe(t){return LO.apply(this,arguments)}(t),yield PO)}),NO.apply(this,arguments)}function LO(){return LO=Lt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield Q1(Qve,"textures",t),yield Q1(Zve,"textures",t)]),e=e||globalThis.BASIS,yield function ixe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,n)}),LO.apply(this,arguments)}const rxe=["","WEBKIT_","MOZ_"],VG={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let eA=null;var FO,tA,BO,nA,GG,jO,HG,WG;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(FO||(FO={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(tA||(tA={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(BO||(BO={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(nA||(nA={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(GG||(GG={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(jO||(jO={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(HG||(HG={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(WG||(WG={}));const ka=[171,75,84,88,32,50,48,187,13,10,26,10],dxe={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function VO(){return VO=Lt(function*(t,e){if("auto"===e.basis.containerFormat){if(function lxe(t){const e=new Uint8Array(t);return!(e.byteLength<ka.length||e[0]!==ka[0]||e[1]!==ka[1]||e[2]!==ka[2]||e[3]!==ka[3]||e[4]!==ka[4]||e[5]!==ka[5]||e[6]!==ka[6]||e[7]!==ka[7]||e[8]!==ka[8]||e[9]!==ka[9]||e[10]!==ka[10]||e[11]!==ka[11])}(t))return YG((yield UG(e)).KTX2File,t,e);const{BasisFile:n}=yield jG(e);return zO(n,t,e)}if("encoder"===e.basis.module){const n=yield UG(e);return"ktx2"===e.basis.containerFormat?YG(n.KTX2File,t,e):zO(n.BasisFile,t,e)}{const{BasisFile:i}=yield jG(e);return zO(i,t,e)}}),VO.apply(this,arguments)}function zO(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(hxe(i,o,l,n));s.push(c)}return s}finally{i.close(),i.delete()}}function hxe(t,e,n,i){const r=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=KG(i,o),d=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(d);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function YG(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push(fxe(i,o,n));break}return[s]}finally{i.close(),i.delete()}}function fxe(t,e,n){const{alphaFlag:i,height:r,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=KG(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:d,compressed:o,hasAlpha:i,format:a}}function KG(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=qG()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),dxe[n]}function qG(){const t=function sxe(t){if(!eA){t=t||function oxe(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,eA=new Set;for(const e of rxe)for(const n in VG)t&&t.getExtension("".concat(e).concat(n))&&eA.add(VG[n])}return eA}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const pxe={name:"Basis",id:"basis",module:"textures",version:"3.2.10",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function uxe(t,e){return VO.apply(this,arguments)}};function Kf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const rA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),JG=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:gxe}=(JG&&parseFloat(JG[1]),globalThis),GO=typeof Image<"u",HO=typeof ImageBitmap<"u",WO=!!rA||!!gxe;function ZG(t){const e=function eH(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const yxe=/^data:image\/svg\+xml/,vxe=/\.svg((\?|#).*)?$/;function $O(t){return t&&(yxe.test(t)||vxe.test(t))}function tH(t,e){if($O(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function nH(t,e,n){return XO.apply(this,arguments)}function XO(){return XO=Lt(function*(t,e,n){const i=function xxe(t,e){if($O(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return tH(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function wxe(t,e){return YO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),XO.apply(this,arguments)}function YO(){return YO=Lt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),YO.apply(this,arguments)}const Exe={};let iH=!0;function KO(){return KO=Lt(function*(t,e,n){let i;i=$O(n)?yield nH(t,e,n):tH(t,n);const r=e&&e.imagebitmap;return yield function Sxe(t){return qO.apply(this,arguments)}(i,r)}),KO.apply(this,arguments)}function qO(){return qO=Lt(function*(t,e=null){if((function Cxe(t){for(const e in t||Exe)return!1;return!0}(e)||!iH)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),iH=!1}return yield createImageBitmap(t)}),qO.apply(this,arguments)}const zl=!1,N0=!0;function JO(t){const e=L0(t);return function Txe(t){const e=L0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,zl)?{mimeType:"image/png",width:e.getUint32(16,zl),height:e.getUint32(20,zl)}:null}(e)||function Dxe(t){const e=L0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,zl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Rxe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,zl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,zl),width:e.getUint16(s+7,zl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,zl)}return null}(e)||function Mxe(t){const e=L0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,zl)?{mimeType:"image/gif",width:e.getUint16(6,N0),height:e.getUint16(8,N0)}:null}(e)||function Ixe(t){const e=L0(t);return e.byteLength>=14&&16973===e.getUint16(0,zl)&&e.getUint32(2,N0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,N0),height:e.getUint32(22,N0)}:null}(e)}function L0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function ZO(){return ZO=Lt(function*(t,e){const{mimeType:n}=JO(t)||{},i=globalThis._parseImageNode;return Kf(i),yield i(t,n)}),ZO.apply(this,arguments)}function QO(){return QO=Lt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function Pxe(t){switch(t){case"auto":case"data":return function bxe(){if(HO)return"imagebitmap";if(GO)return"image";if(WO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function _xe(t){switch(t){case"auto":return HO||GO||WO;case"imagebitmap":return HO;case"image":return GO;case"data":return WO;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function Axe(t,e,n){return KO.apply(this,arguments)}(t,e,s);break;case"image":a=yield nH(t,e,s);break;case"data":a=yield function Oxe(t,e){return ZO.apply(this,arguments)}(t,e);break;default:Kf(!1)}return"data"===r&&(a=function QG(t){switch(ZG(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),QO.apply(this,arguments)}const Nxe={id:"image",module:"images",name:"Images",version:"3.2.10",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function kxe(t,e,n){return QO.apply(this,arguments)},tests:[t=>!!JO(new DataView(t))],options:{image:{type:"auto",decode:!0}}};function rH(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function sH(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function Pa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function oH(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function F0(t,e){return Kf(t>=0),Kf(e>0),t+(e-1)&~(e-1)}function Bxe(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+F0(i.byteLength,4)}const cH=["SCALAR","VEC2","VEC3","VEC4"],jxe=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Uxe=new Map(jxe),Vxe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zxe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Gxe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function lH(t){return cH[t-1]||cH[0]}function dH(t){const e=Uxe.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function uH(t,e){const n=Gxe[t.componentType],i=Vxe[t.type],s=t.count*i,o=t.count*i*zxe[t.componentType];return Pa(o>=0&&o<=e.byteLength),{ArrayType:n,length:s,byteLength:o}}const Hxe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class oc{constructor(e){ve(this,"gltf",void 0),ve(this,"sourceBuffers",void 0),ve(this,"byteLength",void 0),this.gltf=e||{json:{...Hxe},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Pa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:s,length:o}=uH(e,n);return new s(r,n.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e,n={}){return Pa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return Pa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=JO(e),r=n||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Pa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=F0(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:lH(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const s={size:n.size,componentType:dH(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Bxe(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const n={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);n[s]=o}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const s of r)i.min.push(s),i.max.push(s);for(let s=n;s<e.length;s+=n)for(let o=0;o<n;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const $xe="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Xxe="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Yxe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Kxe=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),hH={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},qxe={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function ik(){return ik=Lt(function*(t,e,n,i,r,s="NONE"){const o=yield function sA(){return sk.apply(this,arguments)}();!function oA(t,e,n,i,r,s,o){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(s.length),h=new Uint8Array(t.exports.memory.buffer);h.set(s,d);const p=e(l,i,r,d,s.length);if(0===p&&o&&o(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}(o,o.exports[qxe[r]],t,e,n,i,o.exports[hH[s||"NONE"]])}),ik.apply(this,arguments)}let rk;function sk(){return sk=Lt(function*(){return rk||(rk=function Zxe(){return ok.apply(this,arguments)}()),rk}),sk.apply(this,arguments)}function ok(){return ok=Lt(function*(){let t=$xe;WebAssembly.validate(Yxe)&&(t=Xxe,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function Qxe(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Kxe[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),ok.apply(this,arguments)}const ak="EXT_meshopt_compression",ewe=ak;function twe(t,e){return ck.apply(this,arguments)}function ck(){return ck=Lt(function*(t,e){var n;const i=new oc(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const s of t.json.bufferViews||[])r.push(nwe(i,s));yield Promise.all(r),i.removeExtension(ak)}),ck.apply(this,arguments)}function nwe(t,e){return lk.apply(this,arguments)}function lk(){return lk=Lt(function*(t,e){const n=t.getObjectExtension(e,ak);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=n,d=t.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),p=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function Jxe(t,e,n,i,r){return ik.apply(this,arguments)}(p,o,s,h,a,c),p}return null}),lk.apply(this,arguments)}const iwe=["image/png","image/jpeg","image/gif"],dk={};const Vg="EXT_texture_webp",awe=Vg;function cwe(t,e){const n=new oc(t);if(!function rwe(t){return void 0===dk[t]&&(dk[t]=function swe(t){switch(t){case"image/webp":return function owe(){if(!rA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return rA;default:if(!rA){const{_parseImageNode:e}=globalThis;return!!e&&iwe.includes(t)}return!0}}(t)),dk[t]}("image/webp")){if(n.getRequiredExtensions().includes(Vg))throw new Error("gltf: Required extension ".concat(Vg," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,Vg);s&&(r.source=s.source),n.removeObjectExtension(r,Vg)}n.removeExtension(Vg)}const aA="KHR_texture_basisu",lwe=aA;function dwe(t,e){const n=new oc(t),{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,aA);s&&(r.source=s.source),n.removeObjectExtension(r,aA)}n.removeExtension(aA)}const pH={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.10",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class cA{constructor(e,n,i=!1,r=new Map){ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"nullable",void 0),ve(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new cA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let $i,mH,gH,_H,bH,yH,vH,xH,wH;!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}($i||($i={}));class qf{static isNull(e){return e&&e.typeId===$i.Null}static isInt(e){return e&&e.typeId===$i.Int}static isFloat(e){return e&&e.typeId===$i.Float}static isBinary(e){return e&&e.typeId===$i.Binary}static isUtf8(e){return e&&e.typeId===$i.Utf8}static isBool(e){return e&&e.typeId===$i.Bool}static isDecimal(e){return e&&e.typeId===$i.Decimal}static isDate(e){return e&&e.typeId===$i.Date}static isTime(e){return e&&e.typeId===$i.Time}static isTimestamp(e){return e&&e.typeId===$i.Timestamp}static isInterval(e){return e&&e.typeId===$i.Interval}static isList(e){return e&&e.typeId===$i.List}static isStruct(e){return e&&e.typeId===$i.Struct}static isUnion(e){return e&&e.typeId===$i.Union}static isFixedSizeBinary(e){return e&&e.typeId===$i.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===$i.FixedSizeList}static isMap(e){return e&&e.typeId===$i.Map}static isDictionary(e){return e&&e.typeId===$i.Dictionary}get typeId(){return $i.NONE}compareTo(e){return this===e}}Symbol,Symbol,mH=Symbol.toStringTag;class zg extends qf{constructor(e,n){super(),ve(this,"isSigned",void 0),ve(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return $i.Int}get[mH](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class hwe extends zg{constructor(){super(!0,8)}}class fwe extends zg{constructor(){super(!0,16)}}class pwe extends zg{constructor(){super(!0,32)}}class mwe extends zg{constructor(){super(!1,8)}}class gwe extends zg{constructor(){super(!1,16)}}class _we extends zg{constructor(){super(!1,32)}}gH=Symbol.toStringTag;class EH extends qf{constructor(e){super(),ve(this,"precision",void 0),this.precision=e}get typeId(){return $i.Float}get[gH](){return"Float"}toString(){return"Float".concat(this.precision)}}class bwe extends EH{constructor(){super(32)}}class ywe extends EH{constructor(){super(64)}}Symbol,Symbol,_H=Symbol.toStringTag,bH=Symbol.toStringTag,yH=Symbol.toStringTag,vH=Symbol.toStringTag,xH=Symbol.toStringTag;class vwe extends qf{constructor(e,n){super(),ve(this,"listSize",void 0),ve(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return $i.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[xH](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}wH=Symbol.toStringTag;class Gg{constructor(e,n){ve(this,"fields",void 0),ve(this,"metadata",void 0),function Awe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function Swe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){const n=Object.create(null);for(const r of e)n[r]=!0;const i=this.fields.filter(r=>n[r.name]);return new Gg(i,this.metadata)}selectAt(...e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new Gg(n,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof Gg){const o=e;n=o.fields,i=SH(SH(new Map,this.metadata),o.metadata)}else n=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of n)r[o.name]=o;const s=Object.values(r);return new Gg(s,i)}}function SH(t,e){return new Map([...t||new Map,...e||new Map])}function CH(t,e,n){return function AH(t,e,n){const i=function xwe(t){switch(t.constructor){case Int8Array:return new hwe;case Uint8Array:return new mwe;case Int16Array:return new fwe;case Uint16Array:return new gwe;case Int32Array:return new pwe;case Uint32Array:return new _we;case Float32Array:return new bwe;case Float64Array:return new ywe;default:throw new Error("array type not supported")}}(e.value),r=n||function Ewe(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new cA(t,new vwe(e.size,new cA("value",i)),!1,r)}(t,e,n?TH(n.metadata):void 0)}function TH(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const MH={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Mwe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Dwe{constructor(e){ve(this,"draco",void 0),ve(this,"decoder",void 0),ve(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const p="DRACO decompression failed: ".concat(o.error_msg());throw new Error(p)}const a=this._getDracoLoaderData(s,r,n),c=this._getMeshData(s,a,n),l=function uwe(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],p=a[l+2];e=d<e?d:e,n=h<n?h:n,i=p<i?p:i,r=d>r?d:r,s=h>s?h:s,o=p>o?p:o}return[[e,n,i],[r,s,o]]}(c.attributes),d=function Cwe(t,e,n){const i=TH(e.metadata),r=[],s=function Twe(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in t){const c=CH(o,t[o],s[o]);r.push(c)}if(n){const o=CH("indices",n);r.push(o)}return new Gg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,n);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,n);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(n,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function kwe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=Mwe[n.data_type],r=n.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function Rwe(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,o).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[o,a]of Object.entries(n.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in MH)if(this.draco[o]===r)return MH[o];const s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function Owe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const Gl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Pwe=Gl.global||Gl.self||Gl.window||{},lA="object"!=typeof process||"[object process]"!==String(process)||process.browser,pk="function"==typeof importScripts,IH=(typeof window<"u"&&window,typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version));IH&&parseFloat(IH[1]);var B0=g(9081);const Lwe="3.2.10",mk={};function gk(t){return _k.apply(this,arguments)}function _k(){return _k=Lt(function*(t,e=null,n={}){return e&&(t=function Fwe(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:lA?n.CDN?(function Nwe(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Lwe,"/dist/libs/").concat(t)):pk?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),mk[t]=mk[t]||function Bwe(t){return bk.apply(this,arguments)}(t),yield mk[t]}),_k.apply(this,arguments)}function bk(){return bk=Lt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!lA)try{return B0&&B0.requireFromFile&&(yield B0.requireFromFile(t))}catch{return null}return pk?importScripts(t):function jwe(t,e){if(!lA)return B0.requireFromString&&B0.requireFromString(t,e);if(pk)return eval.call(Pwe,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),bk.apply(this,arguments)}const dA="1.4.1",Uwe="https://www.gstatic.com/draco/versioned/decoders/".concat(dA,"/draco_decoder.js"),Vwe="https://www.gstatic.com/draco/versioned/decoders/".concat(dA,"/draco_wasm_wrapper.js"),zwe="https://www.gstatic.com/draco/versioned/decoders/".concat(dA,"/draco_decoder.wasm");let j0;function yk(){return yk=Lt(function*(t){const e=t.modules||{};return j0=e.draco3d?j0||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):j0||function Wwe(t){return xk.apply(this,arguments)}(t),yield j0}),yk.apply(this,arguments)}function xk(){return xk=Lt(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield gk(Uwe,"draco",t):[e,n]=yield Promise.all([yield gk(Vwe,"draco",t),yield gk(zwe,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function $we(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),xk.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(dA,"/javascript/draco_encoder.js");const Ek={...pH,parse:function Ywe(t,e){return Ak.apply(this,arguments)}};function Ak(){return Ak=Lt(function*(t,e){const{draco:n}=yield function Hwe(t){return yk.apply(this,arguments)}(e),i=new Dwe(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),Ak.apply(this,arguments)}function DH(t){const{buffer:e,size:n,count:i}=function qwe(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function Jwe(t,e,n=!1){return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:lH(n),componentType:dH(e)}}const Jf="KHR_draco_mesh_compression",Zwe=Jf;function Qwe(t,e,n){const i=new oc(t);for(const r of RH(i))i.getObjectExtension(r,Jf)}function eEe(t,e,n){return Sk.apply(this,arguments)}function Sk(){return Sk=Lt(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new oc(t),s=[];for(const o of RH(r))r.getObjectExtension(o,Jf)&&s.push(nEe(r,o,e,n));yield Promise.all(s),r.removeExtension(Jf)}),Sk.apply(this,arguments)}function tEe(t,e={}){const n=new oc(t);for(const i of n.json.meshes||[])iEe(i),n.addRequiredExtension(Jf)}function nEe(t,e,n,i){return Ck.apply(this,arguments)}function Ck(){return Ck=Lt(function*(t,e,n,i){const r=t.getObjectExtension(e,Jf);if(!r)return;const s=t.getTypedArrayForBufferView(r.bufferView),o=sH(s.buffer,s.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(o,Ek,c,i),d=function Kwe(t){const e={};for(const n in t)if("indices"!==n){const r=DH(t[n]);e[n]=r}return e}(l.attributes);for(const[h,p]of Object.entries(d))if(h in e.attributes){const v=t.getAccessor(e.attributes[h]);null!=v&&v.min&&null!=v&&v.max&&(p.min=v.min,p.max=v.max)}e.attributes=d,l.indices&&(e.indices=DH(l.indices)),function rEe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),Ck.apply(this,arguments)}function iEe(t,e,n=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:t}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:t}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:n,extensions:{[Jf]:{bufferView:l,attributes:c}}}]}}function*RH(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const Zf="KHR_lights_punctual",sEe=Zf;function oEe(t){return Tk.apply(this,arguments)}function Tk(){return Tk=Lt(function*(t){const e=new oc(t),{json:n}=e,i=e.getExtension(Zf);i&&(e.json.lights=i.lights,e.removeExtension(Zf));for(const r of n.nodes||[]){const s=e.getObjectExtension(r,Zf);s&&(r.light=s.light),e.removeObjectExtension(r,Zf)}}),Tk.apply(this,arguments)}function aEe(t){return Mk.apply(this,arguments)}function Mk(){return Mk=Lt(function*(t){const e=new oc(t),{json:n}=e;if(n.lights){const i=e.addExtension(Zf);Pa(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Zf,i);delete e.json.lights}}),Mk.apply(this,arguments)}const V0="KHR_materials_unlit",cEe=V0;function lEe(t){return Ik.apply(this,arguments)}function Ik(){return Ik=Lt(function*(t){const e=new oc(t),{json:n}=e;e.removeExtension(V0);for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,V0)}),Ik.apply(this,arguments)}function dEe(t){const e=new oc(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,V0,{}),e.addExtension(V0))}const z0="KHR_techniques_webgl",uEe=z0;function hEe(t){return Dk.apply(this,arguments)}function Dk(){return Dk=Lt(function*(t){const e=new oc(t),{json:n}=e,i=e.getExtension(z0);if(i){const r=function pEe(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),n.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=n[o.program]}),r}(i,e);for(const s of n.materials||[]){const o=e.getObjectExtension(s,z0);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=mEe(s.technique,e)),e.removeObjectExtension(s,z0)}e.removeExtension(z0)}}),Dk.apply(this,arguments)}function fEe(t,e){return Rk.apply(this,arguments)}function Rk(){return(Rk=Lt(function*(t,e){})).apply(this,arguments)}function mEe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const OH=[E,b,k,A,P,_,y];function Ok(){return Ok=Lt(function*(t,e={},n){const i=OH.filter(s=>kH(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,t,e,n)}}),Ok.apply(this,arguments)}function kH(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const kk="KHR_binary_glTF",PH={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},yEe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class vEe{constructor(){ve(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),ve(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function bEe(t){const e=new oc(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,kk);r&&Object.assign(i,r),e.removeObjectExtension(i,kk)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(kk)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in PH)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[n].length;e[n].push(s),this.idToIndexMap[n][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const n in PH)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:s}=n;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,n){const i=yEe[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const s of e.materials){var n,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(n=s.values)||void 0===n?void 0:n.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const wEe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},EEe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},AEe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},SEe={10240:9729,10241:9986,10242:10497,10243:10497};class MEe{constructor(){ve(this,"baseUri",""),ve(this,"json",{}),ve(this,"buffers",[]),ve(this,"images",[])}postProcess(e,n={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Pa(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function CEe(t){return EEe[t]}(e.componentType),e.components=function TEe(t){return wEe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=uH(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=n+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):SEe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return AEe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const NH=1735152710,Pk=12,uA=8,DEe=1313821514,REe=5130562,OEe=0,kEe=1,PEe=0,Hg=!0;function Nk(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),o=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(o),F0(i,4)}function Lk(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),F0(i,4)}function Fk(){return Fk=Lt(function*(t,e,n=0,i,r){var s,o,a,c;(function zEe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function LEe(t,e=0,n={}){const i=new DataView(t),{magic:r=NH}=n,s=i.getUint32(e,!1);return s===r||s===NH}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function Fxe(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Lxe(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?rH(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?rH(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};n=function FEe(t,e,n=0,i={}){const r=new DataView(e),s=function NEe(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),o=r.getUint32(n+4,Hg),a=r.getUint32(n+8,Hg);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=Pk,t.version){case 1:return function BEe(t,e,n){Kf(t.header.byteLength>Pk+uA);const i=e.getUint32(n+0,Hg),r=e.getUint32(n+4,Hg);return n+=uA,Kf(r===PEe),Nk(t,e,n,i),(n+=i)+Lk(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function jEe(t,e,n,i){return Kf(t.header.byteLength>Pk+uA),function UEe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,Hg),s=e.getUint32(n+4,Hg);switch(n+=uA,s){case DEe:Nk(t,e,n,r);break;case REe:Lk(t,e,n,r);break;case OEe:i.strict||Nk(t,e,n,r);break;case kEe:i.strict||Lk(t,e,n,r)}n+=F0(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(o,e,n,i.glb),Pa("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),t._glb=o,t.json=o.json}else Pa(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:o}=t._glb;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,n,i),function xEe(t,e={}){(new vEe).normalize(t,e)}(t,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function gEe(t,e={},n){const i=OH.filter(s=>kH(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,t,e,n)}}(t,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&t.json.buffers&&(yield function GEe(t,e,n){return Bk.apply(this,arguments)}(t,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function HEe(t,e,n){return jk.apply(this,arguments)}(t,i,r);l.push(h)}const d=function _Ee(t){return Ok.apply(this,arguments)}(t,i,r);return l.push(d),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function IEe(t,e){return(new MEe).postProcess(t,e)}(t,i):t}),Fk.apply(this,arguments)}function Bk(){return Bk=Lt(function*(t,e,n){const i=t.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=n;Pa(c);const l=oH(a.uri,e),d=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==d||null===(s=d.arrayBuffer)||void 0===s?void 0:s.call(d);t.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[o]&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),Bk.apply(this,arguments)}function jk(){return jk=Lt(function*(t,e,n){const i=function WEe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],s=[];for(const o of i)s.push($Ee(t,r[o],o,e,n));return yield Promise.all(s)}),jk.apply(this,arguments)}function $Ee(t,e,n,i,r){return Uk.apply(this,arguments)}function Uk(){return Uk=Lt(function*(t,e,n,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=oH(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function aH(t,e,n){const i=t.bufferViews[n];Pa(i);const s=e[i.buffer];return Pa(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=sH(l.buffer,l.byteOffset,l.byteLength)}Pa(a,"glTF image has no data");let c=yield o(a,[Nxe,pxe],{mimeType:e.mimeType,basis:i.basis||{format:qG()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),Uk.apply(this,arguments)}const Wg={name:"glTF",id:"gltf",module:"gltf",version:"3.2.10",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function XEe(t){return Vk.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Vk(){return Vk=Lt(function*(t,e={},n){(e={...Wg.options,...e}).gltf={...Wg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function VEe(t,e){return Fk.apply(this,arguments)}({},t,i,e,n)}),Vk.apply(this,arguments)}function zk(){return zk=Lt(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function KEe(t){return Gk.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),zk.apply(this,arguments)}function Gk(){return Gk=Lt(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),Gk.apply(this,arguments)}const LH=[255,255,255,255],ZEe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:LH},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Wg]};class Hk extends Gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=[j1,U1];return"pbr"===this.props._lighting&&e.push(Kz),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:LH,transition:!0},instanceModelMatrix:Hz})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof Ng)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function Gve(t,e,n){const i=new zve(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function YEe(t){return zk.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(_i.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof Ng?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&_i.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):_i.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):_i.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Ng&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!pi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:p})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:Wz(r,l),sceneModelMatrix:p,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}ve(Hk,"defaultProps",ZEe),ve(Hk,"layerName","ScenegraphLayer");class QEe extends ph{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Sa("sphere-geometry")}=e,{indices:i,attributes:r}=function e1e(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const o=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(n+1);if("number"==typeof i){const Y=i;i=(q,pe,Me,Ue,Ze)=>Y}const h=new Float32Array(3*d),p=new Float32Array(3*d),m=new Float32Array(2*d),R=new(d>65535?Uint32Array:Uint16Array)(e*n*6);for(let Y=0;Y<=e;Y++)for(let q=0;q<=n;q++){const pe=q/n,Me=Y/e,Ue=q+Y*(n+1),Ze=2*Ue,at=3*Ue,mt=l*pe,pt=o*Me,ht=Math.sin(mt),yt=Math.cos(mt),It=Math.sin(pt),vt=yt*It,Nt=Math.cos(pt),Ot=ht*It,An=i(vt,Nt,Ot,pe,Me);h[at+0]=An*vt,h[at+1]=An*Nt,h[at+2]=An*Ot,p[at+0]=vt,p[at+1]=Nt,p[at+2]=Ot,m[Ze+0]=pe,m[Ze+1]=1-Me}const L=n+1;for(let Y=0;Y<n;Y++)for(let q=0;q<e;q++){const pe=6*(Y*e+q);R[pe+0]=q*L+Y,R[pe+1]=q*L+Y+1,R[pe+2]=(q+1)*L+Y,R[pe+3]=(q+1)*L+Y,R[pe+4]=q*L+Y+1,R[pe+5]=(q+1)*L+Y+1}return{indices:{size:1,value:R},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const t1e={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class FH extends ph{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Sa("truncated-code-geometry")}=e,{indices:i,attributes:r}=function n1e(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),d=(r+1)*(s+1+l),h=Math.atan2(e-n,i),p=Math.sin,m=Math.cos,v=Math.PI,R=m(h),L=p(h),Y=a?-2:0,q=s+(c?2:0),pe=r+1,Me=new Uint16Array(r*(s+l)*6),Ue=t1e[o],Ze=new Float32Array(3*d),at=new Float32Array(3*d),mt=new Float32Array(2*d);let pt=0,ht=0;for(let yt=Y;yt<=q;yt++){let vt,It=yt/s,ft=i*It;yt<0?(ft=0,It=1,vt=e):yt>s?(ft=i,It=1,vt=n):vt=e+yt/s*(n-e),(-2===yt||yt===s+2)&&(vt=0,It=0),ft-=i/2;for(let Nt=0;Nt<pe;Nt++){const Ot=p(Nt*v*2/r),An=m(Nt*v*2/r);Ze[pt+Ue[0]]=Ot*vt,Ze[pt+Ue[1]]=ft,Ze[pt+Ue[2]]=An*vt,at[pt+Ue[0]]=yt<0||yt>s?0:Ot*R,at[pt+Ue[1]]=yt<0?-1:yt>s?1:L,at[pt+Ue[2]]=yt<0||yt>s?0:An*R,mt[ht+0]=Nt/r,mt[ht+1]=It,ht+=2,pt+=3}}for(let yt=0;yt<s+l;yt++)for(let It=0;It<r;It++){const ft=6*(yt*r+It);Me[ft+0]=pe*(yt+0)+0+It,Me[ft+1]=pe*(yt+0)+1+It,Me[ft+2]=pe*(yt+1)+1+It,Me[ft+3]=pe*(yt+0)+0+It,Me[ft+4]=pe*(yt+1)+1+It,Me[ft+5]=pe*(yt+1)+0+It}return{indices:Me,attributes:{POSITION:{size:3,value:Ze},NORMAL:{size:3,value:at},TEXCOORD_0:{size:2,value:mt}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class i1e extends FH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Sa("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class r1e extends FH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Sa("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const s1e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),o1e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),a1e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),c1e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),l1e={POSITION:{size:3,value:new Float32Array(o1e)},NORMAL:{size:3,value:new Float32Array(a1e)},TEXCOORD_0:{size:2,value:new Float32Array(c1e)}};class d1e extends ph{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Sa("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(s1e)},attributes:{...l1e,...e.attributes}})}}class Vc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new ye);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new ye);const i=this.elements,r=e.x,s=e.y,o=e.z;return n.x=i[0]*r+i[1]*s+i[2]*o,n.y=i[3]*r+i[4]*s+i[5]*o,n.z=i[6]*r+i[7]*s+i[8]*o,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new Vc);const i=this.elements,r=e.elements,s=n.elements,o=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],p=i[6],m=i[7],v=i[8],R=r[0],L=r[1],Y=r[2],q=r[3],pe=r[4],Me=r[5],Ue=r[6],Ze=r[7],at=r[8];return s[0]=o*R+a*q+c*Ue,s[1]=o*L+a*pe+c*Ze,s[2]=o*Y+a*Me+c*at,s[3]=l*R+d*q+h*Ue,s[4]=l*L+d*pe+h*Ze,s[5]=l*Y+d*Me+h*at,s[6]=p*R+m*q+v*Ue,s[7]=p*L+m*pe+v*Ze,s[8]=p*Y+m*Me+v*at,n}scale(e,n){void 0===n&&(n=new Vc);const i=this.elements,r=n.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return n}solve(e,n){void 0===n&&(n=new ye);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let d,p;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){d=4;do{p=4-d,s[p+4*o]+=s[p+4*a]}while(--d);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const m=s[o+4*a]/s[o+4*o];d=4;do{p=4-d,s[p+4*a]=p<=o?0:s[p+4*a]-s[p+4*o]*m}while(--d)}}while(--c);if(n.z=s[11]/s[10],n.y=(s[7]-s[6]*n.z)/s[5],n.x=(s[3]-s[2]*n.z-s[1]*n.y)/s[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Vc);const r=u1e;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{h=6-l,r[h+6*s]+=r[h+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const p=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*p}while(--l)}}while(--a);s=2;do{o=s-1;do{const p=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]-r[h+6*s]*p}while(--l)}while(o--)}while(--s);s=2;do{const p=1/r[s+6*s];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]*p}while(--l)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,s=e.w,o=n+n,a=i+i,c=r+r,l=n*o,d=n*a,h=n*c,p=i*a,m=i*c,v=r*c,R=s*o,L=s*a,Y=s*c,q=this.elements;return q[0]=1-(p+v),q[1]=d-Y,q[2]=h+L,q[3]=d+Y,q[4]=1-(l+v),q[5]=m-R,q[6]=h-L,q[7]=m+R,q[8]=1-(l+p),this}transpose(e){void 0===e&&(e=new Vc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const u1e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ye{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return n.x=a*s-c*r,n.y=c*i-o*s,n.z=o*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new ye(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new ye(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new Vc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ye);const n=this.x,i=this.y,r=this.z;let s=Math.sqrt(n*n+i*i+r*r);return s>0?(s=1/s,e.x=n*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new ye);const r=this.y,s=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*s,n}vmul(e,n){return void 0===n&&(n=new ye),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new ye),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ye),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=h1e,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=f1e;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*n,i.y=s+(e.y-s)*n,i.z=o+(e.z-o)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(BH),BH.almostEquals(e,n)}clone(){return new ye(this.x,this.y,this.z)}}ye.ZERO=new ye(0,0,0),ye.UNIT_X=new ye(1,0,0),ye.UNIT_Y=new ye(0,1,0),ye.UNIT_Z=new ye(0,0,1);const h1e=new ye,f1e=new ye,BH=new ye;class tr{constructor(e){void 0===e&&(e={}),this.lowerBound=new ye,this.upperBound=new ye,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,jH),l=jH),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return n&&(n.vadd(s,s),n.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new tr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||n.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||n.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||n.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return n.x<=r.x&&i.x>=s.x&&n.y<=r.y&&i.y>=s.y&&n.z<=r.z&&i.z>=s.z}getCorners(e,n,i,r,s,o,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),n.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),s.set(d.x,l.y,d.z),o.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,n){const i=UH;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToLocal(m,m)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=UH;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToWorld(m,m)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,s=1/n.y,o=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,d=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,p=(this.upperBound.z-i.z)*o,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,p)),v=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,p));return!(v<0||m>v)}}const jH=new ye,UH=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class p1e{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Hr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new ye),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=m1e;e.tangents(i,g1e),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Hr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return n.x=i*d+o*a+r*l-s*c,n.y=r*d+o*c+s*a-i*l,n.z=s*d+o*l+i*c-r*a,n.w=o*d-i*a-r*c-s*l,n}inverse(e){void 0===e&&(e=new Hr);const n=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(n*n+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Hr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*s-c*r,h=l*r+c*i-o*s,p=l*s+o*r-a*i,m=-o*i-a*r-c*s;return n.x=d*l+m*-o+h*-c-p*-a,n.y=h*l+m*-a+p*-o-d*-c,n.z=p*l+m*-c+d*-a-h*-o,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,s;void 0===n&&(n="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const d=o*a+c*l;if(d>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),d<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const h=o*o,m=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*m),r=Math.asin(2*d),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*d,this.y=s*l*a-c*o*d,this.z=s*o*d+c*l*a,this.w=s*o*a-c*l*d):"YXZ"===r?(this.x=c*o*a+s*l*d,this.y=s*l*a-c*o*d,this.z=s*o*d-c*l*a,this.w=s*o*a+c*l*d):"ZXY"===r?(this.x=c*o*a-s*l*d,this.y=s*l*a+c*o*d,this.z=s*o*d+c*l*a,this.w=s*o*a-c*l*d):"ZYX"===r?(this.x=c*o*a-s*l*d,this.y=s*l*a+c*o*d,this.z=s*o*d-c*l*a,this.w=s*o*a+c*l*d):"YZX"===r?(this.x=c*o*a+s*l*d,this.y=s*l*a+c*o*d,this.z=s*o*d-c*l*a,this.w=s*o*a-c*l*d):"XZY"===r&&(this.x=c*o*a-s*l*d,this.y=s*l*a-c*o*d,this.z=s*o*d+c*l*a,this.w=s*o*a+c*l*d),this}clone(){return new Hr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Hr);const r=this.x,s=this.y,o=this.z,a=this.w;let p,m,v,R,L,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+s*l+o*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(p=Math.acos(m),v=Math.sin(p),R=Math.sin((1-n)*p)/v,L=Math.sin(n*p)/v):(R=1-n,L=n),i.x=R*r+L*c,i.y=R*s+L*l,i.z=R*o+L*d,i.w=R*a+L*h,i}integrate(e,n,i,r){void 0===r&&(r=new Hr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,p=.5*n;return r.x+=p*(s*h+o*d-a*l),r.y+=p*(o*h+a*c-s*d),r.z+=p*(a*h+s*l-o*c),r.w+=p*(-s*c-o*l-a*d),r}}const m1e=new ye,g1e=new ye,_1e={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let un=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=_1e,t})();class Ci{constructor(e){void 0===e&&(e={}),this.position=new ye,this.quaternion=new Hr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Ci.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Ci.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),i.vsub(e,r),n.conjugate(zH),zH.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new ye),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new ye),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const zH=new Hr;class Qf extends un{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:un.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ye;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){n[o[c]].vsub(n[o[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new ye;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];Qf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const s=new ye,o=new ye;n.vsub(e,o),i.vsub(n,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,s,o,a,c,l){const d=new ye;let h=-1,p=-Number.MAX_VALUE;for(let v=0;v<i.faces.length;v++){d.copy(i.faceNormals[v]),s.vmult(d,d);const R=d.dot(o);R>p&&(p=R,h=v)}const m=[];for(let v=0;v<i.faces[h].length;v++){const R=i.vertices[i.faces[h][v]],L=new ye;L.copy(R),s.vmult(L,L),r.vadd(L,L),m.push(L)}h>=0&&this.clipFaceAgainstHull(o,e,n,m,a,c,l)}findSeparatingAxis(e,n,i,r,s,o,a,c){const l=new ye,d=new ye,h=new ye,p=new ye,m=new ye,v=new ye;let R=Number.MAX_VALUE;const L=this;if(L.uniqueAxes)for(let Y=0;Y!==L.uniqueAxes.length;Y++){i.vmult(L.uniqueAxes[Y],l);const q=L.testSepAxis(l,e,n,i,r,s);if(!1===q)return!1;q<R&&(R=q,o.copy(l))}else{const Y=a?a.length:L.faces.length;for(let q=0;q<Y;q++){l.copy(L.faceNormals[a?a[q]:q]),i.vmult(l,l);const Me=L.testSepAxis(l,e,n,i,r,s);if(!1===Me)return!1;Me<R&&(R=Me,o.copy(l))}}if(e.uniqueAxes)for(let Y=0;Y!==e.uniqueAxes.length;Y++){s.vmult(e.uniqueAxes[Y],d);const q=L.testSepAxis(d,e,n,i,r,s);if(!1===q)return!1;q<R&&(R=q,o.copy(d))}else{const Y=c?c.length:e.faces.length;for(let q=0;q<Y;q++){d.copy(e.faceNormals[c?c[q]:q]),s.vmult(d,d);const Me=L.testSepAxis(d,e,n,i,r,s);if(!1===Me)return!1;Me<R&&(R=Me,o.copy(d))}}for(let Y=0;Y!==L.uniqueEdges.length;Y++){i.vmult(L.uniqueEdges[Y],p);for(let q=0;q!==e.uniqueEdges.length;q++)if(s.vmult(e.uniqueEdges[q],m),p.cross(m,v),!v.almostZero()){v.normalize();const pe=L.testSepAxis(v,e,n,i,r,s);if(!1===pe)return!1;pe<R&&(R=pe,o.copy(v))}}return r.vsub(n,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,n,i,r,s,o){Qf.project(this,e,i,r,Wk),Qf.project(n,e,s,o,$k);const c=Wk[0],l=Wk[1],d=$k[0],h=$k[1];if(c<h||d<l)return!1;const p=c-h,m=d-l;return p<m?p:m}calculateLocalInertia(e,n){const i=new ye,r=new ye;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*o*2*o+2*a*2*a),n.y=1/12*e*(2*s*2*s+2*a*2*a),n.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,s,o,a){const c=new ye,l=new ye,d=new ye,h=new ye,p=new ye,m=new ye,v=new ye,R=new ye,L=this,q=r,pe=[];let Me=-1,Ue=Number.MAX_VALUE;for(let ht=0;ht<L.faces.length;ht++){c.copy(L.faceNormals[ht]),i.vmult(c,c);const yt=c.dot(e);yt<Ue&&(Ue=yt,Me=ht)}if(Me<0)return;const Ze=L.faces[Me];Ze.connectedFaces=[];for(let ht=0;ht<L.faces.length;ht++)for(let yt=0;yt<L.faces[ht].length;yt++)-1!==Ze.indexOf(L.faces[ht][yt])&&ht!==Me&&-1===Ze.connectedFaces.indexOf(ht)&&Ze.connectedFaces.push(ht);const at=Ze.length;for(let ht=0;ht<at;ht++){const yt=L.vertices[Ze[ht]];yt.vsub(L.vertices[Ze[(ht+1)%at]],l),d.copy(l),i.vmult(d,d),n.vadd(d,d),h.copy(this.faceNormals[Me]),i.vmult(h,h),n.vadd(h,h),d.cross(h,p),p.negate(p),m.copy(yt),i.vmult(m,m),n.vadd(m,m);const ft=Ze.connectedFaces[ht];v.copy(this.faceNormals[ft]);const vt=this.getPlaneConstantOfFace(ft);R.copy(v),i.vmult(R,R);const Nt=vt-R.dot(n);for(this.clipFaceAgainstPlane(q,pe,R,Nt);q.length;)q.shift();for(;pe.length;)q.push(pe.shift())}v.copy(this.faceNormals[Me]);const mt=this.getPlaneConstantOfFace(Me);R.copy(v),i.vmult(R,R);const pt=mt-R.dot(n);for(let ht=0;ht<q.length;ht++){let yt=R.dot(q[ht])+pt;yt<=s&&(console.log(`clamped: depth=${yt} to minDist=${s}`),yt=s),yt<=o&&yt<=1e-6&&a.push({point:q[ht],normal:R,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let s,o;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],o=i.dot(l)+r,s<0)if(o<0){const h=new ye;h.copy(l),n.push(h)}else{const h=new ye;c.lerp(l,s/(s-o),h),n.push(h)}else if(o<0){const h=new ye;c.lerp(l,s/(s-o),h),n.push(h),n.push(l)}c=l,s=o}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ye);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)n.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>n.x&&(n.x=s.x),s.y<e.y?e.y=s.y:s.y>n.y&&(n.y=s.y),s.z<e.z?e.z=s.z:s.z>n.z&&(n.z=s.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new ye);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==n;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const s=this.vertices;let o,a,c,l,d,h,p=new ye;for(let m=0;m<s.length;m++)p.copy(s[m]),n.vmult(p,p),e.vadd(p,p),(void 0===o||p.x<o)&&(o=p.x),(void 0===l||p.x>l)&&(l=p.x),(void 0===a||p.y<a)&&(a=p.y),(void 0===d||p.y>d)&&(d=p.y),(void 0===c||p.z<c)&&(c=p.z),(void 0===h||p.z>h)&&(h=p.z);i.set(o,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ye);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let s=0;s<i;s++){const o=r[s];n.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];n.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,o=new ye;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],d=new ye;e.vsub(l,d);const h=c.dot(d),p=new ye;o.vsub(l,p);const m=c.dot(p);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,n,i,r,s){const o=e.vertices.length,a=y1e;let c=0,l=0;const d=v1e,h=e.vertices;d.setZero(),Ci.vectorToLocalFrame(i,r,n,a),Ci.pointToLocalFrame(i,r,d,d);const p=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<o;m++){const v=h[m].dot(a);v>c&&(c=v),v<l&&(l=v)}if(l-=p,c-=p,l>c){const m=l;l=c,c=m}s[0]=c,s[1]=l}}const Wk=[],$k=[],y1e=(new ye,new ye),v1e=new ye;class hA extends un{constructor(e){super({type:un.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=ye,s=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Qf({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new ye),hA.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let s=0;s!==i.length;s++)n.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)xh.set(s[o][0],s[o][1],s[o][2]),n.vmult(xh,xh),e.vadd(xh,xh),i(xh.x,xh.y,xh.z)}calculateWorldAABB(e,n,i,r){const s=this.halfExtents;Hl[0].set(s.x,s.y,s.z),Hl[1].set(-s.x,s.y,s.z),Hl[2].set(-s.x,-s.y,s.z),Hl[3].set(-s.x,-s.y,-s.z),Hl[4].set(s.x,-s.y,-s.z),Hl[5].set(s.x,s.y,-s.z),Hl[6].set(-s.x,s.y,-s.z),Hl[7].set(s.x,-s.y,s.z);const o=Hl[0];n.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Hl[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const xh=new ye,Hl=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class hn extends p1e{constructor(e){void 0===e&&(e={}),super(),this.id=hn.idCounter++,this.index=-1,this.world=null,this.vlambda=new ye,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ye,this.previousPosition=new ye,this.interpolatedPosition=new ye,this.initPosition=new ye,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ye,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ye,this.force=new ye;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?hn.STATIC:hn.DYNAMIC,typeof e.type==typeof hn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=hn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ye,this.quaternion=new Hr,this.initQuaternion=new Hr,this.previousQuaternion=new Hr,this.interpolatedQuaternion=new Hr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ye,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ye,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ye,this.invInertia=new ye,this.invInertiaWorld=new Vc,this.invMassSolve=0,this.invInertiaSolve=new ye,this.invInertiaWorldSolve=new Vc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ye(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ye(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new tr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ye,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=hn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===hn.SLEEPING&&this.dispatchEvent(hn.wakeupEvent)}sleep(){this.sleepState=hn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===hn.AWAKE&&i<r?(this.sleepState=hn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(hn.sleepyEvent)):n===hn.SLEEPY&&i>r?this.wakeUp():n===hn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(hn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===hn.SLEEPING||this.type===hn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new ye),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new ye,s=new Hr;return n&&r.copy(n),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=n[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=x1e,o=w1e,a=this.quaternion,c=this.aabb,l=E1e;for(let d=0;d!==r;d++){const h=e[d];a.vmult(n[d],s),s.vadd(this.position,s),a.mult(i[d],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=A1e,r=S1e;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new ye),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=T1e;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new ye),this.type!==hn.DYNAMIC)return;const i=M1e,r=I1e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===hn.DYNAMIC&&(this.sleepState===hn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=n,r=D1e;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=R1e;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==hn.DYNAMIC)return;const i=O1e,r=k1e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=P1e;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),hA.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new ye;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==hn.DYNAMIC&&this.type!==hn.KINEMATIC||this.sleepState===hn.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*p.x,r.y+=a.y*m*p.y,r.z+=a.z*m*p.z;const v=h.elements,R=this.angularFactor,L=c.x*R.x,Y=c.y*R.y,q=c.z*R.z;s.x+=e*(v[0]*L+v[1]*Y+v[2]*q),s.y+=e*(v[3]*L+v[4]*Y+v[5]*q),s.z+=e*(v[6]*L+v[7]*Y+v[8]*q),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}hn.idCounter=0,hn.COLLIDE_EVENT_NAME="collide",hn.DYNAMIC=1,hn.STATIC=2,hn.KINEMATIC=4,hn.AWAKE=0,hn.SLEEPY=1,hn.SLEEPING=2,hn.wakeupEvent={type:"wakeup"},hn.sleepyEvent={type:"sleepy"},hn.sleepEvent={type:"sleep"};const x1e=new ye,w1e=new Hr,E1e=new tr,A1e=new Vc,S1e=new Vc,T1e=(new Vc,new ye),M1e=new ye,I1e=new ye,D1e=new ye,R1e=new ye,O1e=new ye,k1e=new ye,P1e=new ye;new ye,new ye,new Hr,new ye,new ye,new ye,new ye;class G0{constructor(){this.rayFromWorld=new ye,this.rayToWorld=new ye,this.hitNormalWorld=new ye,this.hitPointWorld=new ye,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let GH,HH,WH,$H,XH,YH,KH;GH=un.types.SPHERE,HH=un.types.PLANE,WH=un.types.BOX,$H=un.types.CYLINDER,XH=un.types.CONVEXPOLYHEDRON,YH=un.types.HEIGHTFIELD,KH=un.types.TRIMESH;class ds{get[GH](){return this._intersectSphere}get[HH](){return this._intersectPlane}get[WH](){return this._intersectBox}get[$H](){return this._intersectConvex}get[XH](){return this._intersectConvex}get[YH](){return this._intersectHeightfield}get[KH](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new ye),void 0===n&&(n=new ye),this.from=e.clone(),this.to=n.clone(),this.direction=new ye,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ds.ANY,this.result=new G0,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||ds.ANY,this.result=n.result||new G0,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(qH),qk.length=0,e.broadphase.aabbQuery(e,qH,qk),this.intersectBodies(qk),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=V1e,s=z1e;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function rAe(t,e,n){n.vsub(t,ep);const i=ep.dot(e);return e.scale(i,pA),pA.vadd(t,pA),n.distanceTo(pA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,s)}_intersectPlane(e,n,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new ye(0,0,1);n.vmult(l,l);const d=new ye;o.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||o.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const v=new ye,R=new ye,L=new ye;o.vsub(i,v);const Y=-l.dot(v)/m;c.scale(Y,R),o.vadd(R,L),this.reportIntersection(l,L,s,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,s=this.from;n.x=Math.min(r.x,s.x),n.y=Math.min(r.y,s.y),n.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,n,i,r,s){const o=G1e;o.from.copy(this.from),o.to.copy(this.to),Ci.pointToLocalFrame(i,n,o.from,o.from),Ci.pointToLocalFrame(i,n,o.to,o.to),o.updateDirection();const a=H1e;let c,l,d,h;c=l=0,d=h=e.data.length-1;const p=new tr;o.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let v=l;v<h;v++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,v,p),p.overlapsRay(o)){if(e.getConvexTrianglePillar(m,v,!1),Ci.pointToWorldFrame(i,n,e.pillarOffset,fA),this._intersectConvex(e.pillarConvex,n,fA,r,s,JH),this.result.shouldStop)return;e.getConvexTrianglePillar(m,v,!0),Ci.pointToWorldFrame(i,n,e.pillarOffset,fA),this._intersectConvex(e.pillarConvex,n,fA,r,s,JH)}}}_intersectSphere(e,n,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,d=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),p=d**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),m=W1e,v=$1e;if(!(p<0))if(0===p)o.lerp(a,p,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,s,r,-1);else{const R=(-d-Math.sqrt(p))/(2*l),L=(-d+Math.sqrt(p))/(2*l);if(R>=0&&R<=1&&(o.lerp(a,R,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,s,r,-1)),this.result.shouldStop)return;L>=0&&L<=1&&(o.lerp(a,L,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,s,r,-1))}}_intersectConvex(e,n,i,r,s,o){const a=X1e,c=ZH,l=o&&o.faceList||null,d=e.faces,h=e.vertices,p=e.faceNormals,m=this.direction,v=this.from,L=v.distanceTo(this.to),Y=l?l.length:d.length,q=this.result;for(let pe=0;!q.shouldStop&&pe<Y;pe++){const Me=l?l[pe]:pe,Ue=d[Me],Ze=p[Me],at=n,mt=i;c.copy(h[Ue[0]]),at.vmult(c,c),c.vadd(mt,c),c.vsub(v,c),at.vmult(Ze,a);const pt=m.dot(a);if(Math.abs(pt)<this.precision)continue;const ht=a.dot(c)/pt;if(!(ht<0)){m.scale(ht,oa),oa.vadd(v,oa),zc.copy(h[Ue[0]]),at.vmult(zc,zc),mt.vadd(zc,zc);for(let yt=1;!q.shouldStop&&yt<Ue.length-1;yt++){Wl.copy(h[Ue[yt]]),$l.copy(h[Ue[yt+1]]),at.vmult(Wl,Wl),at.vmult($l,$l),mt.vadd(Wl,Wl),mt.vadd($l,$l);const It=oa.distanceTo(v);!ds.pointInTriangle(oa,zc,Wl,$l)&&!ds.pointInTriangle(oa,Wl,zc,$l)||It>L||this.reportIntersection(a,oa,s,r,Me)}}}}_intersectTrimesh(e,n,i,r,s,o){const a=q1e,c=nAe,l=iAe,d=ZH,h=J1e,p=Z1e,m=Q1e,v=tAe,R=eAe,L=e.indices,Y=this.from,q=this.to,pe=this.direction;l.position.copy(i),l.quaternion.copy(n),Ci.vectorToLocalFrame(i,n,pe,h),Ci.pointToLocalFrame(i,n,Y,p),Ci.pointToLocalFrame(i,n,q,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,m.vsub(p,h),h.normalize();const Me=p.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let Ue=0,Ze=c.length;!this.result.shouldStop&&Ue!==Ze;Ue++){const at=c[Ue];e.getNormal(at,a),e.getVertex(L[3*at],zc),zc.vsub(p,d);const mt=h.dot(a),pt=a.dot(d)/mt;if(pt<0)continue;h.scale(pt,oa),oa.vadd(p,oa),e.getVertex(L[3*at+1],Wl),e.getVertex(L[3*at+2],$l);const ht=oa.distanceSquared(p);!ds.pointInTriangle(oa,Wl,zc,$l)&&!ds.pointInTriangle(oa,zc,Wl,$l)||ht>Me||(Ci.vectorToWorldFrame(n,a,R),Ci.pointToWorldFrame(i,n,oa,v),this.reportIntersection(R,v,s,r,at))}c.length=0}reportIntersection(e,n,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case ds.ALL:this.hasHit=!0,l.set(o,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case ds.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c));break;case ds.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,ep),i.vsub(n,H0),e.vsub(n,Jk);const s=ep.dot(ep),o=ep.dot(H0),a=ep.dot(Jk),c=H0.dot(H0),l=H0.dot(Jk);let d,h;return(d=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&d+h<s*c-o*o}}ds.CLOSEST=1,ds.ANY=2,ds.ALL=4;const qH=new tr,qk=[],H0=new ye,Jk=new ye,V1e=new ye,z1e=new Hr,oa=new ye,zc=new ye,Wl=new ye,$l=new ye;new ye,new G0;const JH={faceList:[0]},fA=new ye,G1e=new ds,H1e=[],W1e=new ye,$1e=new ye,X1e=new ye,ZH=(new ye,new ye,new ye),q1e=new ye,J1e=new ye,Z1e=new ye,Q1e=new ye,eAe=new ye,tAe=new ye;new tr;const nAe=[],iAe=new Ci,ep=new ye,pA=new ye;new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ds,new ye,new ye,new ye,new ye(1,0,0),new ye(0,1,0),new ye(0,0,1),new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new tr,new ye,new tr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new tr,new ye,new Ci,new tr,new ye,new ye,new ye,new ye,new ye,new Hr,new Hr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new tr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Hr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new tr,new ds;const ws=globalThis.performance||{};if(!ws.now){let t=Date.now();ws.timing&&ws.timing.navigationStart&&(t=ws.timing.navigationStart),ws.now=()=>Date.now()-t}new ye;var rp=g(1979);function Kg(t,e,n){e||(e=new Hn(Hn.IDENTITY));const i=new Hn(Hn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const s=new Hn(Hn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(s)}t.scale&&i.scale(t.scale)}const r=new Hn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const s of t.nodes||t.children||[])if(!1===Kg(s,r,n))return!1;return!0}function A9(){YV([pH,Wg])}function S9(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||Kg(r,new Hn(Hn.IDENTITY),(s,o)=>s!==n||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function tP(t,e){return nP.apply(this,arguments)}function nP(){return nP=Lt(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(s=>s.blob())):fetch(n);const r=yield D1(i,Wg,{DracoLoader:Ek,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),S9(t.scenegraphNode,r)}),nP.apply(this,arguments)}function cTe(t,e){return iP.apply(this,arguments)}function iP(){return iP=Lt(function*(t,e){return S9(t,yield e)}),iP.apply(this,arguments)}function rP(){return rP=Lt(function*(t){console.log("Starting Collisioning");const e=t.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Hn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new tr({lowerBound:new ye(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new ye(...l.map((d,h)=>Math.max(d,c[h])))})}}),n=[];for(const o of t.filter(a=>!!a.scenegraph)){const a=yield h0(o.scenegraph,Wg,{DracoLoader:Ek,decompress:!0,postProcess:!0});for(const c of a.scenes)Kg(c,new Hn(o.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new tr({lowerBound:new ye(...p.map((v,R)=>Math.min(v,m[R]))),upperBound:new ye(...m.map((v,R)=>Math.max(v,p[R])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of n)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),rP.apply(this,arguments)}function sP(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new QEe;break;case"cone":i=new i1e;break;case"cylinder":i=new r1e;break;default:i=new d1e}return new aO({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Ai.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function C9(t,e,n){if(e&&0!==e.length)return new H2({id:t,pickable:!0,data:e.map(i=>({...i,position:new Hn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}let dTe=(()=>{var t;class e extends p2{initializeState(){const{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),A9()}renderLayers(){const i=this.state,r={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const a of i.data){const c=a.geometry??"cube";a.scenegraph?r.scenegraph.push(a):void 0!==r[c]&&r[c].push(a)}const s={};for(const a of r.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(s,a.scenegraph)&&(s[a.scenegraph]=tP({scenegraph:a.scenegraph},e.gltfCache));const o=[];for(const[a,c]of Object.entries(r))if("scenegraph"===a)for(const l of c)o.push(new Hk({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?i.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:Ai.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?cTe(l.scenegraphNode,s[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===a?(o.push(C9("text",c.filter(l=>l.unpickable),{pickable:!1})),o.push(C9("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===a?o.push(sP(a,c,{wireframe:!0,pickable:!1,geometry:a})):(o.push(sP(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),o.push(sP(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return i.doCollisions&&function lTe(t){rP.apply(this,arguments)}(i.data),o.filter(a=>!!a)}getPickingInfo(i){return i.info}}return(t=e).layerName="BodyUILayer",t.gltfCache={},e})();function T9(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),T9(n,e);return e}function oP(){return oP=Lt(function*(t,e,n,i){A9();const r=yield tP({scenegraph:t,scenegraphNode:n},i),s={},o=[];for(const a of r.scenes)Kg(a,e=new Hn(e||Hn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Hn(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:d["@id"],transformMatrix:new Hn(e||Hn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new tr({lowerBound:new ye(...p.map((v,R)=>Math.min(v,m[R]))),upperBound:new ye(...m.map((v,R)=>Math.max(v,p[R])))})}return s[d["@id"]]=d,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of T9(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new ye(.5,.5,.5)),p=a.center=c.clone().vadd(h);a.transformMatrix=new Hn(Hn.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),oP.apply(this,arguments)}let hTe=(()=>{class t{constructor(n){this.deckProps=n,this.bodyUILayer=new dTe({}),this.nodeClickSubject=new z,this.nodeHoverStartSubject=new z,this.nodeHoverStopSubject=new z,this.sceneRotationSubject=new Ye([0,0]),this.nodeDragStartSubject=new z,this.nodeDragSubject=new z,this.nodeDragEndSubject=new z,this.nodeClick$=this.nodeClickSubject.pipe(no()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(no()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(no()),this.sceneRotation$=this.sceneRotationSubject.pipe(no()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(no()),this.nodeDrag$=this.nodeDragSubject.pipe(no()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(no());const i={...n,views:["orthographic"===n.camera?new b2({flipY:!1,near:-1e3}):new s5({orbitAxis:"Y"})],controller:n.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};n.legacyLighting&&(i.effects=[new w2({ambientLight:new o5({color:[255,255,255],intensity:10})})]),this.deck=new j2(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:n.minRotationX??-15,maxRotationX:n.maxRotationX??15,target:n.target??[.5,.5,0],rotationX:0,rotationOrbit:n.rotation??0,zoom:n.zoom??9.5,camera:n.camera}}),n.rotation&&this.sceneRotationSubject.next([n.rotation,0])}initialize(){var n=this;return Lt(function*(){for(;!n.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(n){if(n?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of n)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(n,i):this.bodyUILayer.setState({data:n,zoomOpacity:i})}}debugSceneNodeProcessing(n,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new Hn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function uTe(t,e,n,i){return oP.apply(this,arguments)})(r,s,"VHF_Kidney_L_Low1").then(o=>{console.log("results",o),console.log("data",n),(n=n.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:n,zoomOpacity:i})})}zoomTo(n){const i=new Hn(n.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:n}})}setRotationX(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:n}})}setZoom(n){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:n}})}setTarget(n){this.deck.setProps({viewState:{...this.deck.props.viewState,target:n}})}setInteractive(n){this.deck.setProps({controller:n})}_onHover(n){const{lastHovered:i}=this;this.cursor=n.picked?"pointer":void 0,n.picked&&n.object?.["@id"]?i!==n.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=n.object,this.nodeHoverStartSubject.next(n.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(n,i){n.picked&&n.object?.["@id"]&&this.nodeClickSubject.next({node:n.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(n){if(n.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(n.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...n.viewState}}),this.sceneRotationSubject.next([n.viewState.rotationOrbit,n.viewState.rotationX])}_onDragStart(n,i){this._dragEvent(n,i,this.nodeDragStartSubject)}_onDrag(n,i){this._dragEvent(n,i,this.nodeDragSubject)}_onDragEnd(n,i){this._dragEvent(n,i,this.nodeDragEndSubject)}_dragEvent(n,i,r){n?.object?.["@id"]&&r.next({node:n.object,info:n,e:i})}}return ct([rp.ak],t.prototype,"_onHover",null),ct([rp.ak],t.prototype,"_onClick",null),ct([rp.ak],t.prototype,"_onViewStateChange",null),ct([rp.ak],t.prototype,"_onDragStart",null),ct([rp.ak],t.prototype,"_onDrag",null),ct([rp.ak],t.prototype,"_onDragEnd",null),t})();const q0=N(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});let I9=(()=>{class t{constructor(){this.bootstrap$=new dg(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fTe(t,e){return t===e}function cP(t,e=fTe){let n=null,i=null;function r(){return function pTe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let mTe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const D9=new bt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>mTe.pop()}),R9=new bt("\u0275NGXS_STATE_FACTORY"),O9=new bt("\u0275NGXS_STATE_CONTEXT_FACTORY"),{isArray:gTe}=Array,{getPrototypeOf:_Te,prototype:bTe,keys:yTe}=Object;function k9(t){if(1===t.length){const e=t[0];if(gTe(e))return{args:e,keys:null};if(function vTe(t){return t&&"object"==typeof t&&_Te(t)===bTe}(e)){const n=yTe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:xTe}=Array;function J0(t){return M(e=>function wTe(t,e){return xTe(e)?t(...e):t(e)}(t,e))}function P9(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Z0(...t){const e=Tt(t),{args:n,keys:i}=k9(t),r=new We(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let d=0;d<o;d++){let h=!1;Sn(n[d]).subscribe(H(s,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?P9(i,a):a),s.complete())}))}});return e?r.pipe(J0(e)):r}function Zd(t,e){const n=F(t)?t:()=>t,i=r=>r.error(n());return new We(e?r=>e.schedule(i,0,r):i)}function sp(t){return!!t&&(t instanceof We||F(t.lift)&&F(t.subscribe))}function xi(t,e){return Q((n,i)=>{let r=0;n.subscribe(H(i,s=>t.call(e,s,r++)&&i.next(s)))})}function zo(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,no({connector:()=>new dg(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function vi(t){return t<=0?()=>fe:Q((e,n)=>{let i=0;e.subscribe(H(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function N9(t,e){return e?n=>n.pipe(N9((i,r)=>Sn(t(i,r)).pipe(M((s,o)=>e(i,s,r,o))))):Q((n,i)=>{let r=0,s=null,o=!1;n.subscribe(H(i,a=>{s||(s=H(i,void 0,()=>{s=null,o&&i.complete()}),Sn(t(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function qg(t){return Q((e,n)=>{let i=!1;e.subscribe(H(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function cc(t){return Q((e,n)=>{let s,i=null,r=!1;i=e.subscribe(H(n,void 0,void 0,o=>{s=Sn(t(o,cc(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function gr(t){return Q((e,n)=>{Sn(t).subscribe(H(n,()=>n.complete(),V)),!n.closed&&e.subscribe(n)})}function _r(t,e,n){const i=F(t)||e||n?{next:t,error:e,complete:n}:t;return i?Q((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(H(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ae}function Q0(...t){return function ETe(){return re(1)}()(Gi(t,Ft(t)))}function Na(...t){const e=Ft(t);return Q((n,i)=>{(e?Q0(t,n,e):Q0(t,n)).subscribe(i)})}function op(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const L9=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?n:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),t),t},lP=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),dP=t=>t&&"object"==typeof t&&!Array.isArray(t),uP=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(dP(t)&&dP(n))for(const i in n)dP(n[i])?(t[i]||Object.assign(t,{[i]:{}}),uP(t[i],n[i])):Object.assign(t,{[i]:n[i]});return uP(t,...e)};let F9=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return mD(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return on.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return on.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(nt(on),nt(ya))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const B9=new bt("ROOT_OPTIONS"),j9=new bt("ROOT_STATE_TOKEN"),U9=new bt("FEATURE_STATE_TOKEN"),V9=new bt("NGXS_PLUGINS"),Qd="NGXS_META",z9="NGXS_OPTIONS_META",hP="NGXS_SELECTOR_META";let wA=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=F9}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:function(n){let i=null;return n?i=new n:(r=nt(B9),i=uP(new t,r)),i;var r},providedIn:"root"}),t})();class OTe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let kTe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const G9=new bt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),PTe=new bt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Ut(Lm),e=t.get(G9);return t.get(e||(typeof Si.Zone<"u"?F9:kTe))}});function fP(t){if(!t.hasOwnProperty(Qd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Qd,{value:e})}return ap(t)}function ap(t){return t[Qd]}function EA(t){return t[hP]}function H9(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function NTe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function LTe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let s=n;for(;++i<r;)s=s+" && "+(n=n+"."+e[i]);return new Function("store","return "+s+";")}(t)}function zTe(...t){return function Jg(t,e,n=WTe){const i=function $Te(t){return t.reduce((e,n)=>(e[op(n)]=!0,e),{})}(t),r=e&&function XTe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(s){return s.pipe(function GTe(t,e){return xi(n=>{const i=op(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function WTe(){return M(t=>t.action)}function AA(t){return e=>new We(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let W9=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(PTe))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function $9(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const s=e.pop();s&&t(...s)}n=!1}}}class YTe extends z{constructor(){super(...arguments),this._orderedNext=$9(e=>super.next(e))}next(e){this._orderedNext(e)}}class KTe extends Ye{constructor(e){super(e),this._orderedNext=$9(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let X9=(()=>{class t extends YTe{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Bi(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Y9=t=>(...e)=>t.shift()(...e,(...i)=>Y9(t)(...i));let K9=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(Oc));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(nt(wr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mP=(()=>{class t extends KTe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gP=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(nt(t,12),nt(V9,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})(),q9=(()=>{class t extends z{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Bi(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),JTe=(()=>{class t{constructor(n,i,r,s,o,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function qTe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new We(r=>(i=!0,n.pipe(AA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?Yt(this._stateStream.getValue()):Z0(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return Y9([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(zo())}getActionResultStream(n){return this._actionResults.pipe(xi(i=>i.action===n&&"DISPATCHED"!==i.status),vi(1),zo())}createDispatchObservable(n){return n.pipe(N9(i=>{switch(i.status){case"SUCCESSFUL":return Yt(this._stateStream.getValue());case"ERRORED":return Zd(i.error);default:return fe}})).pipe(zo())}}return t.\u0275fac=function(n){return new(n||t)(nt(X9),nt(q9),nt(gP),nt(mP),nt(W9),nt(K9))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ev=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(nt(mP),nt(JTe),nt(wA))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_P=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();function r(c){return lP(c,n.path)}function s(c,l){const d=L9(c,n.path,l);return i.setState(d),d}function o(c,l){return s(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function ZTe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(c);return o(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?o(l,c):s(l,c)},dispatch:c=>i.dispatch(c)}}}return t.\u0275fac=function(n){return new(n||t)(nt(ev))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new RegExp("^[a-zA-Z0-9_]+$");class Z9{static get type(){return"@@INIT"}}class Q9{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new bt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Zg=(()=>{class t{constructor(n,i,r,s,o,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=cP(()=>{const l=this;function d(p){const m=l.statePaths[p];return m?H9(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let m=d(p);return m||((...v)=>(m||(m=d(p)),m?m(...v):void 0))},getSelectorOptions:p=>Object.assign(Object.assign({},l._config.selectorOptions),p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(n){let i={};return i=Array.isArray(n)?n.slice():function VTe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?Object.assign({},n):void 0===n?{}:n,i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function FTe(t){const e=n=>t.find(r=>r===n)[Qd].name;return t.reduce((n,i)=>{const{name:r,children:s}=i[Qd];return n[r]=(s||[]).map(e),n},{})}(i),s=function UTe(t){const e=[],n={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),n[r]=!0,t[r].forEach(o=>{n[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),o=function jTe(t,e={}){const n=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=n(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function BTe(t){return t.reduce((e,n)=>(e[n[Qd].name]=n,e),{})}(i),c=[];for(const l of s){const d=a[l],h=o[l],p=d[Qd];this.addRuntimeInfoToMeta(p,h);const m={name:l,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:t.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((o,a)=>L9(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new z;this._actionsSubscription=this._actions.pipe(xi(i=>"DISPATCHED"===i.status),j(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(M(()=>({action:r,status:"SUCCESSFUL"})),qg({action:r,status:"CANCELED"}),cc(s=>Yt({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=op(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Gi(h)),sp(h)?(h=h.pipe(j(p=>p instanceof Promise?Gi(p):sp(p)?p:Yt(p)),qg({})),l.options.cancelUncompleted&&(h=h.pipe(gr(n.pipe(zTe(i)))))):h=Yt({}).pipe(zo()),s.push(h)}catch(h){s.push(Zd(h))}o=!0}}return s.length||s.push(Yt({})),Z0(s)}addToStatesMap(n){const i=[],r=this.statesByName;for(const s of n){const o=ap(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==lP(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(nt(wr),nt(wA),nt(t,12),nt(X9),nt(q9),nt(_P),nt(D9,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();function e7(t){const e=EA(t)||ap(t);return e&&e.makeRootSelector||(()=>t)}let Xl=(()=>{class t{constructor(n,i,r,s,o,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(AA(this._internalExecutionStrategy),zo({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(M(i),cc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?Yt(void 0):Zd(r)}),Be(),AA(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(vi(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(AA(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return e7(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(o)}}}return t.\u0275fac=function(n){return new(n||t)(nt(mP),nt(ev),nt(wA),nt(W9),nt(Zg),nt(D9,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SA=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(nt(Xl),nt(wA))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),t7=(()=>{class t{constructor(n,i,r,s,o){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new z}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(xi(()=>!!i),_r(()=>this._invokeInitOnStates(i.states)),j(()=>this._bootstrapper.appBootstrapped$),xi(r=>!!r),cc(r=>(this._internalErrorReporter.reportErrorSafely(r),fe)),gr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>lP(s,i.path)).pipe(Na(void 0),Q((t,e)=>{let n,i=!1;t.subscribe(H(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))}),gr(this._destroy$)).subscribe(([s,o])=>{const a=new OTe(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(Xl),nt(K9),nt(ev),nt(_P),nt(I9))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aMe=(()=>{class t{constructor(n,i,r,s,o=[],a){const c=n.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new Z9,c)}}return t.\u0275fac=function(n){return new(n||t)(nt(Zg),nt(ev),nt(Xl),nt(SA),nt(j9,8),nt(t7))},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),t})(),cMe=(()=>{class t{constructor(n,i,r,s=[],o){const a=t.flattenStates(s),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new Q9(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(nt(Xl),nt(ev),nt(Zg),nt(U9,8),nt(t7))},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),t})(),n7=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:aMe,providers:[Zg,gP,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:cMe,providers:[Zg,gP,...n,{provide:U9,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:G9,useValue:i.executionStrategy},{provide:j9,useValue:n},{provide:B9,useValue:i},{provide:xE,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[I9]},{provide:O9,useExisting:_P},{provide:R9,useExisting:Zg}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),t})();function vP(t,e){return(n,i)=>{const r=fP(n.constructor);Array.isArray(t)||(t=[t]);for(const s of t){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function i7(t){return i=>{const r=i,s=fP(r),o=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[z9]||{}),t)}(o);(function n(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:c,name:l}=o,d="string"==typeof l?l:l&&l.getName()||null;if(s.hasOwnProperty(Qd)){const h=s[Qd]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[z9]=a}}const lMe=36;function CA(t,...e){return function(n,i){const r=i.toString(),s=`__${r}__selector`,o=function uMe(t,e,n=[]){return e=e||function hMe(t){const e=t.length-1;return t.charCodeAt(e)===lMe?t.slice(0,e):t}(t),"string"==typeof e?H9(n.length?[e,...n]:e.split("."),SA.config):e}(r,t,e);Object.defineProperties(n,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function dMe(t){return SA.store||function RTe(){throw new Error("You have forgotten to import the NGXS module!")}(),SA.store.select(t)}(o))}}})}}const r7="NGXS_SELECTOR_OPTIONS_META",TA={getOptions:t=>t&&t[r7]||{},defineOptions:(t,e)=>{t&&(t[r7]=e)}};function fMe(t,e){const n=function pP(t){return t.hasOwnProperty(hP)||Object.defineProperty(t,hP,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),EA(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function pMe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},TA.getOptions(t.containerClass)||{}),TA.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function tv(t,e,n){const i=function rMe(t,e){const n=e&&e.containerClass,r=cP(function(...o){const a=t.apply(n,o);return a instanceof Function?cP.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=fMe(e,n);return r.makeRootSelector=function iMe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function sMe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),o=function oMe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&ap(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>e7(a)(t));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&s.suppressErrors)return;throw l}}}}(r,t,i),i}function Qg(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,s=tv(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}let GP;try{GP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{GP=!1}let cv,hp,HP,kr=(()=>{var t;class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?th(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!GP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ya))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function up(t){return function pIe(){if(null==cv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cv=!0}))}finally{cv=cv||!1}return cv}()?t:!!t.capture}function mIe(){if(null==hp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return hp=!1,hp;if("scrollBehavior"in document.documentElement.style)hp=!0;else{const t=Element.prototype.scrollTo;hp=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return hp}function VA(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function tu(t){return t.composedPath?t.composedPath()[0]:t.target}function WP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Gc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class CIe extends S{constructor(e,n){super()}schedule(e,n=0){return this}}const HA={setInterval(t,e,...n){const{delegate:i}=HA;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=HA;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class YP extends CIe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return HA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&HA.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,se(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class dv{constructor(e,n=dv.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}dv.now=CD.now;class KP extends dv{constructor(e,n=dv.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const WA=new KP(YP),TIe=WA;function bi(t){return null!=t&&"false"!=`${t}`}function lc(t,e=0){return function MIe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function $A(t){return Array.isArray(t)?t:[t]}function us(t){return null==t?"":"string"==typeof t?t:`${t}px`}function nu(t){return t instanceof Mt?t.nativeElement:t}function xo(...t){const e=Ft(t),n=Tt(t),{args:i,keys:r}=k9(t);if(0===i.length)return Gi([],e);const s=new We(xW(i,e,r?o=>P9(r,o):Ae));return n?s.pipe(J0(n)):s}function xW(t,e,n=Ae){return i=>{wW(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)wW(e,()=>{const l=Gi(t[c],e);let d=!1;l.subscribe(H(i,h=>{s[c]=h,d||(d=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function wW(t,e,n){t?Te(n,t,e):e()}let KA=(()=>{var t;class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function jIe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function BIe(t){try{return t.frameElement}catch{return null}}(function XIe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===RW(r)||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=RW(i);return i.hasAttribute("contenteditable")?-1!==o:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function WIe(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===s?!!i.hasAttribute("controls")&&-1!==o:"video"===s?-1!==o&&(null!==o||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function $Ie(t){return!function VIe(t){return function GIe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function UIe(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function zIe(t){return function HIe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||DW(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(kr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function DW(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function RW(t){if(!DW(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class YIe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(vi(1)).subscribe(e)}}let nN=(()=>{var t;class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new YIe(i,this._checker,this._ngZone,this._document,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(KA),nt(on),nt(Gn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function OW(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function kW(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const KIe=new bt("cdk-input-modality-detector-options"),qIe={ignoreKeys:[18,17,224,91,16]},n_=up({passive:!0,capture:!0});let JIe=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Ye(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=tu(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(OW(a)?"keyboard":"mouse"),this._mostRecentTarget=tu(a))},this._onTouchstart=a=>{kW(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=tu(a))},this._options={...qIe,...o},this.modalityDetected=this._modality.pipe(function JP(t){return xi((e,n)=>t<=n)}(1)),this.modalityChanged=this.modalityDetected.pipe(Be()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,n_),s.addEventListener("mousedown",this._onMousedown,n_),s.addEventListener("touchstart",this._onTouchstart,n_)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,n_),document.removeEventListener("mousedown",this._onMousedown,n_),document.removeEventListener("touchstart",this._onTouchstart,n_))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(kr),nt(on),nt(Gn),nt(KIe,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const QIe=new bt("cdk-focus-monitor-default-options"),qA=up({passive:!0,capture:!0});let pp=(()=>{var t;class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new z,this._rootNodeFocusAndBlurListener=c=>{for(let d=tu(c);d;d=d.parentElement)"focus"===c.type?this._onFocus(c,d):this._onBlur(c,d)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){const s=nu(i);if(!this._platform.isBrowser||1!==s.nodeType)return Yt();const o=function _Ie(t){if(function gIe(){if(null==HP){const t=typeof document<"u"?document.head:null;HP=!(!t||!t.createShadowRoot&&!t.attachShadow)}return HP}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new z,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){const r=nu(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){const o=nu(i);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const s=this._elementInfo.get(r),o=tu(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,qA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,qA)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,qA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,qA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const o=i.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0;return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(on),nt(kr),nt(JIe),nt(Gn,8),nt(QIe,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const eDe=new bt("cdk-dir-doc",{providedIn:"root",factory:function tDe(){return Ut(Gn)}}),nDe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let mp=(()=>{var t;class e{constructor(i){this.value="ltr",this.change=new en,i&&(this.value=function iDe(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?nDe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(eDe,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function JA(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function oN(t,e=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?lc(n):this.defaultTabIndex}constructor(...n){super(...n),this._tabIndex=e,this.defaultTabIndex=e}}}class mDe{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const zW=up({passive:!0,capture:!0});class gDe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=tu(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){const s=this._events.get(n);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,zW)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const s=r.get(n);s&&(s.delete(i),0===s.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,zW)))}}const GW={enterDuration:225,exitDuration:150},HW=up({passive:!0,capture:!0}),WW=["mousedown","touchstart"],$W=["mouseup","mouseleave","touchend","touchcancel"];class i_{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=nu(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...GW,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const o=i.radius||function bDe(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=c-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,v="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,R=new mDe(this,d,i,v);d.style.transform="scale3d(1, 1, 1)",R.state=0,i.persistent||(this._mostRecentTransientRipple=R);let L=null;return!v&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Y=()=>this._finishRippleTransition(R),q=()=>this._destroyRipple(R);d.addEventListener("transitionend",Y),d.addEventListener("transitioncancel",q),L={onTransitionEnd:Y,onTransitionCancel:q}}),this._activeRipples.set(R,L),(v||!l)&&this._finishRippleTransition(R),R}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...GW,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=nu(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,WW.forEach(i=>{i_._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{$W.forEach(n=>{this._triggerElement.addEventListener(n,this,HW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=OW(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!kW(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(WW.forEach(n=>i_._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&$W.forEach(n=>e.removeEventListener(n,this,HW)))}}i_._eventManager=new gDe;const SDe=["addListener","removeListener"],CDe=["addEventListener","removeEventListener"],TDe=["on","off"];function r_(t,e,n,i){if(F(n)&&(i=n,n=void 0),i)return r_(t,e,n).pipe(J0(i));const[r,s]=function DDe(t){return F(t.addEventListener)&&F(t.removeEventListener)}(t)?CDe.map(o=>a=>t[o](e,a,n)):function MDe(t){return F(t.addListener)&&F(t.removeListener)}(t)?SDe.map(n$(t,e)):function IDe(t){return F(t.on)&&F(t.off)}(t)?TDe.map(n$(t,e)):[];if(!r&&Ba(t))return j(o=>r_(o,e,n))(Sn(t));if(!r)throw new TypeError("Invalid event target");return new We(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function n$(t,e){return n=>i=>t[n](e,i)}const gv={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=gv;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(s=>{n=void 0,t(s)});return new S(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=gv;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=gv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class ODe extends KP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class RDe extends YP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=gv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(gv.cancelAnimationFrame(n),e._scheduled=void 0)}});let lN,PDe=1;const QA={};function i$(t){return t in QA&&(delete QA[t],!0)}const NDe={setImmediate(t){const e=PDe++;return QA[e]=!0,lN||(lN=Promise.resolve()),lN.then(()=>i$(e)&&t()),e},clearImmediate(t){i$(t)}},{setImmediate:LDe,clearImmediate:FDe}=NDe,eS={setImmediate(...t){const{delegate:e}=eS;return(e?.setImmediate||LDe)(...t)},clearImmediate(t){const{delegate:e}=eS;return(e?.clearImmediate||FDe)(t)},delegate:void 0};new class jDe extends KP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class BDe extends YP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=eS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(eS.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function dN(t=0,e,n=TIe){let i=-1;return null!=e&&(rt(e)?n=e:i=e),new We(r=>{let s=function zDe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function r$(t,e=WA){return function VDe(t){return Q((e,n)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(H(n,l=>{i=!0,r=l,s||Sn(t(l)).subscribe(s=H(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}(()=>dN(t,e))}let s$=(()=>{var t;class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new z,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new We(r=>{this._globalSubscription||this._addGlobalListener();const s=i>0?this._scrolled.pipe(r$(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Yt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(xi(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=nu(r),o=i.getElementRef().nativeElement;do{if(s==o)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>r_(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(on),nt(kr),nt(Gn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),uN=(()=>{var t;class e{constructor(i,r,s){this._platform=i,this._change=new z,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect();return{top:-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,left:-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(r$(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(kr),nt(on),nt(Gn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class hN{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class nS extends hN{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class iS extends hN{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class WDe extends hN{constructor(e){super(),this.element=e instanceof Mt?e.nativeElement:e}}class fN{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof nS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof iS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof WDe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class $De extends fN{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||wr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let rS=(()=>{var t;class e extends fN{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new en,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Et),Ge(Xs),Ge(Gn))},t.\u0275dir=jt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[yn]}),e})();const a$=mIe();class XDe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=us(-this._previousScrollPosition.left),e.style.top=us(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),a$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),a$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class YDe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(xi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class c${enable(){}disable(){}attach(){}}function pN(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function l$(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class KDe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();pN(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qDe=(()=>{var t;class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new c$,this.close=a=>new YDe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new XDe(this._viewportRuler,this._document),this.reposition=a=>new KDe(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(s$),nt(uN),nt(on),nt(Gn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class mN{constructor(e){if(this.scrollStrategy=new c$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class JDe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let d$=(()=>{var t;class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),ZDe=(()=>{var t;class e extends d${constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn),nt(on,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),QDe=(()=>{var t;class e extends d${constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=tu(o)},this._clickListener=o=>{const a=tu(o),c="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn),nt(kr),nt(on,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),sS=(()=>{var t;class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||WP()){const s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}const r=this._document.createElement("div");r.classList.add(i),WP()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gn),nt(kr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class bv{constructor(e,n,i,r,s,o,a,c,l,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new z,this._attachments=new z,this._detachments=new z,this._locationChanges=S.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new z,this._outsidePointerEvents=new z,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(vi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=us(this._config.width),e.height=us(this._config.height),e.minWidth=us(this._config.minWidth),e.minHeight=us(this._config.minHeight),e.maxWidth=us(this._config.maxWidth),e.maxHeight=us(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=$A(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(gr(ir(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const u$="cdk-overlay-connected-position-bounding-box",eRe=/([A-Za-z%]+)$/;class tRe{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new z,this._resizeSubscription=S.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(u$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(l,n,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(const l of s){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(u$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return n.left<0&&(r-=n.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r,s;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){const s=f$(n);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let p=0-a,m=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),R=this._subtractOverflows(s.height,p,m),L=v*R;return{visibleArea:L,isCompletelyWithinViewport:s.width*s.height===L,fitsInViewportVertically:R===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,s=i.right-n.x,o=h$(this._overlayRef.getConfig().minHeight),a=h$(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=f$(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new JDe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let s,o,a,d,h,p;if("top"===n.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-v/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)p=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>v&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-v/2)}return{top:o,left:h,bottom:a,right:p,width:d,height:s}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=us(i.height),r.top=us(i.top),r.bottom=us(i.bottom),r.width=us(i.width),r.left=us(i.left),r.right=us(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=us(s)),o&&(r.maxWidth=us(o))}this._lastBoundingBoxSize=i,gp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){gp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();gp(i,this._getExactOverlayY(n,e,d)),gp(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=us(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=us(o.maxWidth):s&&(i.maxWidth="")),gp(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=us(s.y),r}_getExactOverlayX(e,n,i){let o,r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=us(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:l$(e,i),isOriginOutsideView:pN(e,i),isOverlayClipped:l$(n,i),isOverlayOutsideView:pN(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&$A(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Mt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function gp(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function h$(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(eRe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function f$(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const p$="cdk-global-overlay-wrapper";class nRe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(p$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",v="",R="";c?R="flex-start":"center"===d?(R="center",p?v=h:m=h):p?"left"===d||"end"===d?(R="flex-end",m=h):("right"===d||"start"===d)&&(R="flex-start",v=h):"left"===d||"start"===d?(R="flex-start",m=h):("right"===d||"end"===d)&&(R="flex-end",v=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":v,n.justifyContent=R,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(p$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let iRe=(()=>{var t;class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new nRe}flexibleConnectedTo(i){return new tRe(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(uN),nt(Gn),nt(kr),nt(sS))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),rRe=0,Yl=(()=>{var t;class e{constructor(i,r,s,o,a,c,l,d,h,p,m,v){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=m,this._animationsModuleType=v}create(i){const r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new mN(i);return a.direction=a.direction||this._directionality.value,new bv(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+rRe++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Rf)),new $De(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(qDe),nt(sS),nt(Et),nt(iRe),nt(ZDe),nt(wr),nt(on),nt(Gn),nt(mp),nt(Ry),nt(QDe),nt(rs,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function _p(t,e){return{type:7,name:t,definitions:e,options:{}}}function dc(t,e=null){return{type:4,styles:e,timings:t}}function Es(t){return{type:6,styles:t,offset:null}}function uc(t,e,n){return{type:0,name:t,styles:e,options:n}}function Hc(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function yv(t){return new We(e=>{Sn(t()).subscribe(e)})}function N$(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return M(n=>{let i=n;for(let r=0;r<e;r++){const s=i?.[t[r]];if(!(typeof s<"u"))return;i=s}return i})}g(1563);class cS{}class Kl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Kl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Kl;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Kl?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class _2e{encodeKey(e){return L$(e)}encodeValue(e){return L$(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const y2e=/%(\d[a-f0-9])/gi,v2e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function L$(t){return encodeURIComponent(t).replace(y2e,(e,n)=>v2e[n]??e)}function dS(t){return`${t}`}class Ah{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _2e,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function b2e(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(dS):[dS(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Ah({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(dS(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(dS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class x2e{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function F$(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function B$(t){return typeof Blob<"u"&&t instanceof Blob}function j$(t){return typeof FormData<"u"&&t instanceof FormData}class xv{constructor(e,n,i,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function w2e(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Kl),this.context||(this.context=new x2e),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new Ah,this.urlWithParams=n}serializeBody(){return null===this.body?null:F$(this.body)||B$(this.body)||j$(this.body)||function E2e(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ah?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||j$(this.body)?null:B$(this.body)?this.body.type||null:F$(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ah?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),l)),new xv(n,i,s,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var o_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(o_||{});class vN{constructor(e,n=200,i="OK"){this.headers=e.headers||new Kl,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class a_ extends vN{constructor(e={}){super(e),this.type=o_.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new a_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function wN(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let c_=(()=>{var t;class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof xv)o=i;else{let l,d;l=s.headers instanceof Kl?s.headers:new Kl(s.headers),s.params&&(d=s.params instanceof Ah?s.params:new Ah({fromObject:s.params})),o=new xv(i,r,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const a=Yt(o).pipe(function vv(t,e){return F(e)?j(t,e,1):j(t,1)}(l=>this.handler.handle(l)));if(i instanceof xv||"events"===s.observe)return a;const c=a.pipe(xi(l=>l instanceof a_));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(M(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(M(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(M(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(M(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new Ah).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,wN(s,r))}post(i,r,s={}){return this.request("POST",i,wN(s,r))}put(i,r,s={}){return this.request("PUT",i,wN(s,r))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(cS))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const $2e=["*"];let hS;function Ev(t){return function X2e(){if(void 0===hS&&(hS=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(hS=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return hS}()?.createHTML(t)||t}function Q$(t){return Error(`Unable to find icon with the name "${t}"`)}function eX(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function tX(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class yp{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let fS=(()=>{var t;class e{constructor(i,r,s,o){this._httpClient=i,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,r,s){return this.addSvgIconInNamespace("",i,r,s)}addSvgIconLiteral(i,r,s){return this.addSvgIconLiteralInNamespace("",i,r,s)}addSvgIconInNamespace(i,r,s,o){return this._addSvgIconConfig(i,r,new yp(s,null,o))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,s,o){const a=this._sanitizer.sanitize(is.HTML,s);if(!a)throw tX(s);const c=Ev(a);return this._addSvgIconConfig(i,r,new yp("",c,o))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,s){return this._addSvgIconSetConfig(i,new yp(r,null,s))}addSvgIconSetLiteralInNamespace(i,r,s){const o=this._sanitizer.sanitize(is.HTML,r);if(!o)throw tX(r);const a=Ev(o);return this._addSvgIconSetConfig(i,new yp("",a,s))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(is.RESOURCE_URL,i);if(!r)throw eX(i);const s=this._cachedIconsByUrl.get(r);return s?Yt(pS(s)):this._loadSvgIconFromConfig(new yp(i,null)).pipe(_r(o=>this._cachedIconsByUrl.set(r,o)),M(o=>pS(o)))}getNamedSvgIcon(i,r=""){const s=nX(r,i);let o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,i),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):Zd(Q$(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?Yt(pS(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(M(r=>pS(r)))}_getSvgFromIconSetConfigs(i,r){const s=this._extractIconWithNameFromAnySet(i,r);return s?Yt(s):Z0(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(cc(c=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(is.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),Yt(null)})))).pipe(M(()=>{const a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw Q$(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.svgText&&o.svgText.toString().indexOf(i)>-1){const a=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(a,i,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(_r(r=>i.svgText=r),M(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?Yt(null):this._fetchIcon(i).pipe(_r(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,s){const o=i.querySelector(`[id="${r}"]`);if(!o)return null;const a=o.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,s);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),s);const c=this._svgElementFromString(Ev("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,s)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){const r=this._svgElementFromString(Ev("<svg></svg>")),s=i.attributes;for(let o=0;o<s.length;o++){const{name:a,value:c}=s[o];"id"!==a&&r.setAttribute(a,c)}for(let o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:s}=i,o=s?.withCredentials??!1;if(!this._httpClient)throw function Y2e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(is.RESOURCE_URL,r);if(!a)throw eX(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(M(d=>Ev(d)),function s_(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}(()=>this._inProgressUrlFetches.delete(a)),no());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,s){return this._svgIconConfigs.set(nX(i,r),s),this}_addSvgIconSetConfig(i,r){const s=this._iconSetConfigs.get(i);return s?s.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let s=0;s<this._resolvers.length;s++){const o=this._resolvers[s](r,i);if(o)return q2e(o)?new yp(o.url,null,o.options):new yp(o,null)}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(c_,8),nt(Fy),nt(Gn,8),nt(Oc))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function pS(t){return t.cloneNode(!0)}function nX(t,e){return t+":"+e}function q2e(t){return!(!t.url||!t.options)}const J2e=JA(class{constructor(t){this._elementRef=t}}),Z2e=new bt("MAT_ICON_DEFAULT_OPTIONS"),Q2e=new bt("mat-icon-location",{providedIn:"root",factory:function eOe(){const t=Ut(Gn),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),iX=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],tOe=iX.map(t=>`[${t}]`).join(", "),nOe=/^url\(['"]?#(.*?)['"]?\)$/;let l_=(()=>{var t;class e extends J2e{get inline(){return this._inline}set inline(i){this._inline=bi(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,s,o,a,c){super(i),this._iconRegistry=r,this._location=o,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=S.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=i.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(a=>{o.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(tOe),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)iX.forEach(a=>{const c=r[o],l=c.getAttribute(a),d=l?l.match(nOe):null;if(d){let h=s.get(c);h||(h=[],s.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,s]=this._splitIconName(i);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(vi(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${o.message}`))})}}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Mt),Ge(fS),Tc("aria-hidden"),Ge(Q2e),Ge(Oc),Ge(Z2e,8))},t.\u0275cmp=$n({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Di("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Xn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[yn],ngContentSelectors:$2e,decls:1,vars:0,template:function(i,r){1&i&&(ss(),Ln(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})();function IOe(t,e){}class mS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let dX=(()=>{var t;class e extends fN{constructor(i,r,s,o,a,c,l,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const s=VA(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=VA();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=VA())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Mt),Ge(nN),Ge(Gn,8),Ge(mS),Ge(KA),Ge(on),Ge(bv),Ge(pp))},t.\u0275cmp=$n({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Zi(rS,7),2&i){let s;Vn(s=zn())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Di("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[yn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&vn(0,IOe,0,0,"ng-template",0)},dependencies:[rS],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class SN{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new z,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Gc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const uX=new bt("DialogScrollStrategy"),DOe=new bt("DialogData"),ROe=new bt("DefaultDialogConfig");let POe=0,hX=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new z,this._afterOpenedAtThisLevel=new z,this._ariaHiddenElements=new Map,this.afterAllClosed=yv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Na(void 0))),this._scrollStrategy=c}open(i,r){(r={...this._defaultOptions||new mS,...r}).id=r.id||"cdk-dialog-"+POe++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new SN(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){CN(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){CN(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),CN(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new mN({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){const o=s.injector||s.viewContainerRef?.injector,a=[{provide:mS,useValue:s},{provide:SN,useValue:r},{provide:bv,useValue:i}];let c;s.container?"function"==typeof s.container?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=dX;const l=new nS(c,s.viewContainerRef,wr.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof Qa){const a=this._createInjector(o,r,s,void 0);let c={$implicit:o.data,dialogRef:r};o.templateContext&&(c={...c,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),s.attachTemplatePortal(new iS(i,null,c,a))}else{const a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new nS(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){const a=i.injector||i.viewContainerRef?.injector,c=[{provide:DOe,useValue:i.data},{provide:SN,useValue:r}];return i.providers&&("function"==typeof i.providers?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(mp,null,{optional:!0}))&&c.push({provide:mp,useValue:{value:i.direction,change:Yt()}}),wr.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){const s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){const o=r[s];o!==i&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Yl),nt(wr),nt(ROe,8),nt(t,12),nt(sS),nt(uX))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();function CN(t,e){let n=t.length;for(;n--;)e(t[n])}function LOe(t,e){}class gS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const TN="mdc-dialog--open",fX="mdc-dialog--opening",pX="mdc-dialog--closing";let jOe=(()=>{var t;class e extends dX{constructor(i,r,s,o,a,c,l,d){super(i,r,s,o,a,c,l,d),this._animationStateChanged=new en}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Mt),Ge(nN),Ge(Gn,8),Ge(gS),Ge(KA),Ge(on),Ge(bv),Ge(pp))},t.\u0275cmp=$n({type:t,selectors:[["ng-component"]],features:[yn],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const mX="--mat-dialog-transition-duration";function gX(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?lc(t.substring(0,t.length-2)):t.endsWith("s")?1e3*lc(t.substring(0,t.length-1)):"0"===t?0:null}let UOe=(()=>{var t;class e extends jOe{constructor(i,r,s,o,a,c,l,d,h){super(i,r,s,o,a,c,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?gX(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?gX(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(mX,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(fX,TN)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(TN),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(TN),this._animationsEnabled?(this._hostElement.style.setProperty(mX,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(pX)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(fX,pX)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Mt),Ge(nN),Ge(Gn,8),Ge(gS),Ge(KA),Ge(on),Ge(bv),Ge(rs,8),Ge(pp))},t.\u0275cmp=$n({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(Rd("id",r._config.id),Di("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Xn("_mat-animation-noopable",!r._animationsEnabled))},features:[yn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Bt(0,"div",0)(1,"div",1),vn(2,LOe,0,0,"ng-template",2),zt()())},dependencies:[rS],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class MN{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new z,this._beforeClosed=new z,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(xi(r=>"opened"===r.state),vi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(xi(r=>"closed"===r.state),vi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ir(this.backdropClick(),this.keydownEvents().pipe(xi(r=>27===r.keyCode&&!this.disableClose&&!Gc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function VOe(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(xi(n=>"closing"===n.state),vi(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const _X=new bt("MatMdcDialogData"),zOe=new bt("mat-mdc-dialog-default-options"),bX=new bt("mat-mdc-dialog-scroll-strategy");let WOe=0,$Oe=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,d,h,p){this._overlay=i,this._defaultOptions=s,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new z,this._afterOpenedAtThisLevel=new z,this._idPrefix="mat-dialog-",this.dialogConfigClass=gS,this.afterAllClosed=yv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Na(void 0))),this._scrollStrategy=c,this._dialog=r.get(hX)}open(i,r){let s;(r={...this._defaultOptions||new gS,...r}).id=r.id||`${this._idPrefix}${WOe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:mS,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}}return(t=e).\u0275fac=function(i){Cf()},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),_S=(()=>{var t;class e extends $Oe{constructor(i,r,s,o,a,c,l,d){super(i,r,o,c,l,a,MN,UOe,_X,d),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Yl),nt(wr),nt(Ry,8),nt(zOe,8),nt(bX),nt(t,12),nt(sS),nt(rs,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),XOe=0,yX=(()=>{var t;class e{constructor(i,r,s){this._dialogRef=i,this._elementRef=r,this._dialog=s,this.id="mat-mdc-dialog-title-"+XOe++}ngOnInit(){this._dialogRef||(this._dialogRef=function YOe(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const i=this._dialogRef?._containerInstance?._ariaLabelledByQueue;i&&Promise.resolve().then(()=>{const r=i.indexOf(this.id);r>-1&&i.splice(r,1)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(MN,8),Ge(Mt),Ge(_S))},t.\u0275dir=jt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Rd("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),vX=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=jt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),e})(),EX=(()=>{var t;class e{constructor(){this._listeners=[]}notify(i,r){for(let s of this._listeners)s(i,r)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(r=>i!==r)}}ngOnDestroy(){this._listeners=[]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const AX=new bt("CdkAccordion");let KOe=0,qOe=(()=>{var t;class e{get expanded(){return this._expanded}set expanded(i){i=bi(i),this._expanded!==i&&(this._expanded=i,this.expandedChange.emit(i),i?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){this._disabled=bi(i)}constructor(i,r,s){this.accordion=i,this._changeDetectorRef=r,this._expansionDispatcher=s,this._openCloseAllSubscription=S.EMPTY,this.closed=new en,this.opened=new en,this.destroyed=new en,this.expandedChange=new en,this.id="cdk-accordion-child-"+KOe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=s.listen((o,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(AX,12),Ge(as),Ge(EX))},t.\u0275dir=jt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[fi([{provide:AX,useValue:void 0}])]}),e})();const ZOe=["body"];function QOe(t,e){}const eke=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],tke=["mat-expansion-panel-header","*","mat-action-row"];function nke(t,e){1&t&&li(0,"span",2),2&t&&Gt("@indicatorRotate",Nn()._getExpandedState())}const ike=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],rke=["mat-panel-title","mat-panel-description","*"],SX=new bt("MAT_ACCORDION"),CX="225ms cubic-bezier(0.4,0.0,0.2,1)",TX={indicatorRotate:_p("indicatorRotate",[uc("collapsed, void",Es({transform:"rotate(0deg)"})),uc("expanded",Es({transform:"rotate(180deg)"})),Hc("expanded <=> collapsed, void => collapsed",dc(CX))]),bodyExpansion:_p("bodyExpansion",[uc("collapsed, void",Es({height:"0px",visibility:"hidden"})),uc("expanded",Es({height:"*",visibility:""})),Hc("expanded <=> collapsed, void => collapsed",dc(CX))])},MX=new bt("MAT_EXPANSION_PANEL");let ske=(()=>{var t;class e{constructor(i,r){this._template=i,this._expansionPanel=r}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Qa),Ge(MX,8))},t.\u0275dir=jt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),oke=0;const IX=new bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let DX=(()=>{var t;class e extends qOe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=bi(i)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,r,s,o,a,c,l){super(i,r,s),this._viewContainerRef=o,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new en,this.afterCollapse=new en,this._inputChanges=new z,this._headerId="mat-expansion-panel-header-"+oke++,this._bodyAnimationDone=new z,this.accordion=i,this._document=a,this._bodyAnimationDone.pipe(Be((d,h)=>d.fromState===h.fromState&&d.toState===h.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Na(null),xi(()=>this.expanded&&!this._portal),vi(1)).subscribe(()=>{this._portal=new iS(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const i=this._document.activeElement,r=this._body.nativeElement;return i===r||r.contains(i)}return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(SX,12),Ge(as),Ge(EX),Ge(Xs),Ge(Gn),Ge(rs,8),Ge(IX,8))},t.\u0275cmp=$n({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&function os(t,e,n,i){const r=yi();if(r.firstCreatePass){const s=ns();Qj(r,new qj(e,n,i),s.index),function bte(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}Zj(r,At(),n)}(s,ske,5),2&i){let o;Vn(o=zn())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&Zi(ZOe,5),2&i){let s;Vn(s=zn())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Xn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[fi([{provide:SX,useValue:void 0},{provide:MX,useExisting:t}]),yn,Br],ngContentSelectors:tke,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(ss(eke),Ln(0),Bt(1,"div",0,1),Pn("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),Bt(3,"div",2),Ln(4,1),vn(5,QOe,0,0,"ng-template",3),zt(),Ln(6,2),zt()),2&i&&(Wt(1),Gt("@bodyExpansion",r._getExpandedState())("id",r.id),Di("aria-labelledby",r._headerId),Wt(4),Gt("cdkPortalOutlet",r._portal))},dependencies:[rS],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[TX.bodyExpansion]},changeDetection:0}),e})();class ake{}const cke=oN(ake);let lke=(()=>{var t;class e extends cke{constructor(i,r,s,o,a,c,l){super(),this.panel=i,this._element=r,this._focusMonitor=s,this._changeDetectorRef=o,this._animationMode=c,this._parentChangeSubscription=S.EMPTY;const d=i.accordion?i.accordion._stateChanges.pipe(xi(h=>!(!h.hideToggle&&!h.togglePosition))):fe;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=ir(i.opened,i.closed,d,i._inputChanges.pipe(xi(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(xi(()=>i._containsFocus())).subscribe(()=>s.focusVia(r,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:Gc(i)||(i.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i))}}focus(i,r){i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(DX,1),Ge(Mt),Ge(pp),Ge(as),Ge(IX,8),Ge(rs,8),Tc("tabindex"))},t.\u0275cmp=$n({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&Pn("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(Di("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),cE("height",r._getHeaderHeight()),Xn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[yn],ngContentSelectors:rke,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(ss(ike),Bt(0,"span",0),Ln(1),Ln(2,1),Ln(3,2),zt(),vn(4,nke,1,1,"span",1)),2&i&&(Xn("mat-content-hide-toggle",!r._showToggle()),Wt(4),Gt("ngIf",r._showToggle()))},dependencies:[Il],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[TX.indicatorRotate]},changeDetection:0}),e})();function RX(t,e,n){return n?RX(t,e).pipe(J0(n)):new We(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=t(r);return F(e)?()=>e(r,s):void 0})}class RN extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,he(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new S;const n=this.getSubject();e.add(this.source.subscribe(H(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=S.EMPTY)}return e}refCount(){return function DN(){return Q((t,e)=>{let n=null;t._refCount++;const i=H(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}()(this)}}const hke={connector:()=>new z};function OX(t,e=hke){const{connector:n}=e;return Q((i,r)=>{const s=n();Sn(t(function uke(t){return new We(e=>t.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}function ON(...t){const e=Tt(t);return Q((n,i)=>{const r=t.length,s=new Array(r);let o=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)Sn(t[c]).subscribe(H(i,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(Ae))&&(o=null))},V));n.subscribe(H(i,c=>{if(a){const l=[c,...s];i.next(e?e(...l):l)}}))})}const{isArray:gke}=Array;function _ke(t){return 1===t.length&&gke(t[0])?t[0]:t}function PX(...t){const e=Tt(t);return e?Ke(PX(...t),J0(e)):Q((n,i)=>{xW([n,..._ke(t)])(i)})}const yke=["youtubeContainer"];let FX=(()=>{var t;class e{get videoId(){return this._videoId.value}set videoId(i){this._videoId.next(i)}get height(){return this._height.value}set height(i){this._height.next(i||390)}get width(){return this._width.value}set width(i){this._width.next(i||640)}set startSeconds(i){this._startSeconds.next(i)}set endSeconds(i){this._endSeconds.next(i)}set suggestedQuality(i){this._suggestedQuality.next(i)}get playerVars(){return this._playerVars.value}set playerVars(i){this._playerVars.next(i)}get disableCookies(){return this._disableCookies.value}set disableCookies(i){this._disableCookies.next(!!i)}constructor(i,r){this._ngZone=i,this._youtubeContainer=new z,this._destroyed=new z,this._playerChanges=new Ye(void 0),this._videoId=new Ye(void 0),this._height=new Ye(390),this._width=new Ye(640),this._startSeconds=new Ye(void 0),this._endSeconds=new Ye(void 0),this._suggestedQuality=new Ye(void 0),this._playerVars=new Ye(void 0),this._disableCookies=new Ye(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=th(r)}ngOnInit(){if(!this._isBrowser)return;let i=Yt(!0);if(!window.YT||!window.YT.Player){const o=new z;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>o.next(!0))},i=o.pipe(vi(1),Na(!1))}const r=this._disableCookies.pipe(M(o=>o?"https://www.youtube-nocookie.com":void 0)),s=function Eke(t,e,n,i,r,s,o,a){const c=xo([e,n,o]).pipe(ON(xo([r,s])),M(([l,d])=>{const[h,p,m]=l,[v,R]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:v,height:R,host:p}}));return xo([t,c,Yt(a)]).pipe(function Ake(t){return Ke(PX(t),function bke(t){return Q((e,n)=>{let i=!1,r=0;e.subscribe(H(n,s=>(i||(i=!t(s,r++)))&&n.next(s)))})}(([e,n])=>!n),M(([e])=>e))}(i),function kX(t,e){return Q(function mke(t,e,n,i,r){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(H(o,d=>{const h=l++;c=a?t(c,d,h):(a=!0,d),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}(t,e,arguments.length>=2,!0))}(Ske,void 0),Be())}(this._youtubeContainer,this._videoId,r,i,this._width,this._height,this._playerVars,this._ngZone).pipe(_r(o=>{this._playerChanges.next(o)}),function wke(t){return j(e=>e?BX(e)?Yt(e):new We(n=>{let i=!1,r=!1;const s=o=>{r=!0,i||(o.target.removeEventListener("onReady",s),n.next(o.target))};return e.addEventListener("onReady",s),()=>{i=!0,r||t(e)}}).pipe(vi(1),Na(void 0)):Yt(void 0))}(o=>{BX(o)||o.destroy()}),gr(this._destroyed),function pke(t){return t?e=>OX(t)(e):e=>function fke(t,e){const n=F(t)?t:()=>t;return F(e)?OX(e,{connector:n}):i=>new RN(i,n)}(new z)(e)}());s.subscribe(o=>{this._player=o,o&&this._pendingPlayerState&&this._initializePlayer(o,this._pendingPlayerState),this._pendingPlayerState=void 0}),function vke(t,e,n){xo([t,e,n]).subscribe(([i,r,s])=>i&&i.setSize(r,s))}(s,this._width,this._height),function xke(t,e){xo([t,e]).subscribe(([n,i])=>n&&i&&n.setPlaybackQuality(i))}(s,this._suggestedQuality),function Cke(t,e,n,i,r,s){const o=xo([n,i]).pipe(M(([d,h])=>({startSeconds:d,endSeconds:h}))),a=o.pipe(kN(t,d=>!!d&&!function Tke(t){const e=t.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(kN(t,(d,h)=>!!d&&d.videoId!==h));ir(t.pipe(kN(xo([e,o]),([d,h],p)=>!(!p||d==p.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(ON(xo([t,e,o,r])),M(([d,h])=>h),gr(s)).subscribe(([d,h,p,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...p}))})}(s,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),s.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(i,r){this._player?this._player.seekTo(i,r):this._getPendingState().seek={seconds:i,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(i,r){const{playbackState:s,playbackRate:o,volume:a,muted:c,seek:l}=r;switch(s){case YT.PlayerState.PLAYING:i.playVideo();break;case YT.PlayerState.PAUSED:i.pauseVideo();break;case YT.PlayerState.CUED:i.stopVideo()}null!=o&&i.setPlaybackRate(o),null!=a&&i.setVolume(a),null!=c&&(c?i.mute():i.unMute()),null!=l&&i.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(i){return this._playerChanges.pipe(De(r=>r?RX(s=>{r.addEventListener(i,s)},s=>{try{r.removeEventListener&&r.removeEventListener(i,s)}catch{}}):Yt()),r=>new We(s=>r.subscribe({next:o=>this._ngZone.run(()=>s.next(o)),error:o=>s.error(o),complete:()=>s.complete()})),gr(this._destroyed))}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(on),Ge(ya))},t.\u0275cmp=$n({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Zi(yke,5),2&i){let s;Vn(s=zn())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&li(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function Ske(t,[e,n,i]){if(t&&n&&(t.playerVars!==n.playerVars||t.host!==n.host))t.destroy();else{if(!n)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(e,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r.host=n.host,r}function BX(t){return"getPlayerStatus"in t}function kN(t,e){return Ke(ON(t),xi(([n,i])=>e(i,n)),M(([n])=>n))}function jX(t=Ike){return Q((e,n)=>{let i=!1;e.subscribe(H(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function Ike(){return new q0}let xp={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const VX=/[&<>"']/,Rke=new RegExp(VX.source,"g"),zX=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Oke=new RegExp(zX.source,"g"),kke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},GX=t=>kke[t];function wo(t,e){if(e){if(VX.test(t))return t.replace(Rke,GX)}else if(zX.test(t))return t.replace(Oke,GX);return t}const Pke=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function HX(t){return t.replace(Pke,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const Nke=/(^|[^\[])\^/g;function nr(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r=r.source||r).replace(Nke,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const Lke=/[^\w:]/g,Fke=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function WX(t,e,n){if(t){let i;try{i=decodeURIComponent(HX(n)).replace(Lke,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!Fke.test(n)&&(n=function Vke(t,e){bS[" "+t]||(bS[" "+t]=Bke.test(t)?t+"/":vS(t,"/",!0));const n=-1===(t=bS[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(jke,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(Uke,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const bS={},Bke=/^[^:]+:\/*[^/]*$/,jke=/^([^:]+:)[\s\S]*$/,Uke=/^([^:]+:\/*[^/]*)[\s\S]*$/,yS={exec:function(){}};function $X(t,e){const i=t.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function vS(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const s=t.charAt(i-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.slice(0,i-r)}function XX(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function YX(t,e,n,i){const r=e.href,s=e.title?wo(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:wo(o)}}class PN{constructor(e){this.options=e||xp}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:vS(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function Hke(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=vS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,s,o,a,c,l,d,h,p,m,v,R=n[1].trim();const L=R.length>1,Y={type:"list",raw:"",ordered:L,start:L?+R.slice(0,-1):"",loose:!1,items:[]};R=L?`\\d{1,9}\\${R.slice(-1)}`:`\\${R}`,this.options.pedantic&&(R=L?R:"[*+-]");const q=new RegExp(`^( {0,3}${R})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(v=!1,(n=q.exec(e))&&!this.rules.block.hr.test(e));){if(i=n[0],e=e.substring(i.length),d=n[2].split("\n",1)[0].replace(/^\t+/,Me=>" ".repeat(3*Me.length)),h=e.split("\n",1)[0],this.options.pedantic?(o=2,m=d.trimLeft()):(o=n[2].search(/[^ ]/),o=o>4?1:o,m=d.slice(o),o+=n[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),v=!0),!v){const Me=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Ue=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Ze=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),at=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;e&&(p=e.split("\n",1)[0],h=p,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Ze.test(h)||at.test(h)||Me.test(h)||Ue.test(e)));){if(h.search(/[^ ]/)>=o||!h.trim())m+="\n"+h.slice(o);else{if(c||d.search(/[^ ]/)>=4||Ze.test(d)||at.test(d)||Ue.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=p+"\n",e=e.substring(p.length+1),d=h.slice(o)}}Y.loose||(l?Y.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(s="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),Y.items.push({type:"list_item",raw:i,task:!!r,checked:s,loose:!1,text:m}),Y.raw+=i}Y.items[Y.items.length-1].raw=i.trimRight(),Y.items[Y.items.length-1].text=m.trimRight(),Y.raw=Y.raw.trimRight();const pe=Y.items.length;for(a=0;a<pe;a++)if(this.lexer.state.top=!1,Y.items[a].tokens=this.lexer.blockTokens(Y.items[a].text,[]),!Y.loose){const Me=Y.items[a].tokens.filter(Ze=>"space"===Ze.type),Ue=Me.length>0&&Me.some(Ze=>/\n.*\n/.test(Ze.raw));Y.loose=Ue}if(Y.loose)for(a=0;a<pe;a++)Y.items[a].loose=!0;return Y}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):wo(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:$X(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];let s,o,a,c,r=i.align.length;for(s=0;s<r;s++)i.align[s]=/^ *-+: *$/.test(i.align[s])?"right":/^ *:-+: *$/.test(i.align[s])?"center":/^ *:-+ *$/.test(i.align[s])?"left":null;for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=$X(i.rows[s],i.header.length).map(l=>({text:l}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(c=i.rows[o],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:wo(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):wo(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=vS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function zke(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}(n[2],"()");if(o>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),YX(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return YX(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=r[1]||r[2]||"";if(!s||s&&(""===i||this.rules.inline.punctuation.exec(i))){const o=r[0].length-1;let a,c,l=o,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+o);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const p=e.slice(0,o+r.index+(r[0].length-a.length)+c);if(Math.min(o,c)%2){const v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=wo(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,s;return"@"===i[2]?(r=wo(this.options.mangle?n(i[1]):i[1]),s="mailto:"+r):(r=wo(i[1]),s=r),{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,s;if("@"===i[2])r=wo(this.options.mangle?n(i[0]):i[0]),s="mailto:"+r;else{let o;do{o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(o!==i[0]);r=wo(i[0]),s="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):wo(i[0]):i[0]:wo(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Mn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:yS,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Mn.def=nr(Mn.def).replace("label",Mn._label).replace("title",Mn._title).getRegex(),Mn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Mn.listItemStart=nr(/^( *)(bull) */).replace("bull",Mn.bullet).getRegex(),Mn.list=nr(Mn.list).replace(/bull/g,Mn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Mn.def.source+")").getRegex(),Mn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Mn.html=nr(Mn.html,"i").replace("comment",Mn._comment).replace("tag",Mn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mn.paragraph=nr(Mn._paragraph).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.blockquote=nr(Mn.blockquote).replace("paragraph",Mn.paragraph).getRegex(),Mn.normal={...Mn},Mn.gfm={...Mn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Mn.gfm.table=nr(Mn.gfm.table).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.gfm.paragraph=nr(Mn._paragraph).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Mn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.pedantic={...Mn.normal,html:nr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Mn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:yS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:nr(Mn.normal._paragraph).replace("hr",Mn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Mn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const an={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:yS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:yS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Wke(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function KX(t){let n,i,e="";const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}an._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",an.punctuation=nr(an.punctuation).replace(/punctuation/g,an._punctuation).getRegex(),an.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,an.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,an._comment=nr(Mn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),an.emStrong.lDelim=nr(an.emStrong.lDelim).replace(/punct/g,an._punctuation).getRegex(),an.emStrong.rDelimAst=nr(an.emStrong.rDelimAst,"g").replace(/punct/g,an._punctuation).getRegex(),an.emStrong.rDelimUnd=nr(an.emStrong.rDelimUnd,"g").replace(/punct/g,an._punctuation).getRegex(),an._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,an._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,an._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,an.autolink=nr(an.autolink).replace("scheme",an._scheme).replace("email",an._email).getRegex(),an._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,an.tag=nr(an.tag).replace("comment",an._comment).replace("attribute",an._attribute).getRegex(),an._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,an._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,an._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,an.link=nr(an.link).replace("label",an._label).replace("href",an._href).replace("title",an._title).getRegex(),an.reflink=nr(an.reflink).replace("label",an._label).replace("ref",Mn._label).getRegex(),an.nolink=nr(an.nolink).replace("ref",Mn._label).getRegex(),an.reflinkSearch=nr(an.reflinkSearch,"g").replace("reflink",an.reflink).replace("nolink",an.nolink).getRegex(),an.normal={...an},an.pedantic={...an.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:nr(/^!?\[(label)\]\((.*?)\)/).replace("label",an._label).getRegex(),reflink:nr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",an._label).getRegex()},an.gfm={...an.normal,escape:nr(an.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},an.gfm.url=nr(an.gfm.url,"i").replace("email",an.gfm._extended_email).getRegex(),an.breaks={...an.gfm,br:nr(an.br).replace("{2,}","*").getRegex(),text:nr(an.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Ch{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xp,this.options.tokenizer=this.options.tokenizer||new PN,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Mn.normal,inline:an.normal};this.options.pedantic?(n.block=Mn.pedantic,n.inline=an.pedantic):this.options.gfm&&(n.block=Mn.gfm,n.inline=this.options.breaks?an.breaks:an.gfm),this.tokenizer.rules=n}static get rules(){return{block:Mn,inline:an}}static lex(e,n){return new Ch(n).lex(e)}static lexInline(e,n){return new Ch(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+XX("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+XX("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(o));)o=o.slice(0,a.index+a[0].length-2)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,KX)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,KX))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(function(m){p=m.call({lexer:this},h),"number"==typeof p&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(s,Wke)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return n}}class Sv{constructor(e){this.options=e||xp}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,r);null!=s&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+wo(r)+'">'+(i?e:wo(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:wo(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,n,i,r){return this.options.headerIds?`<h${n} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${n}>\n`:`<h${n}>${e}</h${n}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(null===(e=WX(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(null===(e=WX(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class qX{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class JX{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class Th{constructor(e){this.options=e||xp,this.options.renderer=this.options.renderer||new Sv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new qX,this.slugger=new JX}static parse(e,n){return new Th(n).parse(e)}static parseInline(e,n){return new Th(n).parseInline(e)}parse(e,n=!0){let r,s,o,a,c,l,d,h,p,m,v,R,L,Y,q,pe,Me,Ue,Ze,i="";const at=e.length;for(r=0;r<at;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(Ze=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==Ze||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=Ze||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,HX(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,s=0;s<a;s++)d+=this.renderer.tablecell(this.parseInline(m.header[s].tokens),{header:!0,align:m.align[s]});for(h+=this.renderer.tablerow(d),p="",a=m.rows.length,s=0;s<a;s++){for(l=m.rows[s],d="",c=l.length,o=0;o<c;o++)d+=this.renderer.tablecell(this.parseInline(l[o].tokens),{header:!1,align:m.align[o]});p+=this.renderer.tablerow(d)}i+=this.renderer.table(h,p);continue;case"blockquote":p=this.parse(m.tokens),i+=this.renderer.blockquote(p);continue;case"list":for(v=m.ordered,R=m.start,L=m.loose,a=m.items.length,p="",s=0;s<a;s++)q=m.items[s],pe=q.checked,Me=q.task,Y="",q.task&&(Ue=this.renderer.checkbox(pe),L?q.tokens.length>0&&"paragraph"===q.tokens[0].type?(q.tokens[0].text=Ue+" "+q.tokens[0].text,q.tokens[0].tokens&&q.tokens[0].tokens.length>0&&"text"===q.tokens[0].tokens[0].type&&(q.tokens[0].tokens[0].text=Ue+" "+q.tokens[0].tokens[0].text)):q.tokens.unshift({type:"text",text:Ue}):Y+=Ue),Y+=this.parse(q.tokens,L),p+=this.renderer.listitem(Y,Me,pe);i+=this.renderer.list(p,v,R);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(p=m.tokens?this.parseInline(m.tokens):m.text;r+1<at&&"text"===e[r+1].type;)m=e[++r],p+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=n?this.renderer.paragraph(p):p;continue;default:{const mt='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(mt);throw new Error(mt)}}return i}parseInline(e,n){n=n||this.renderer;let r,s,o,i="";const a=e.length;for(r=0;r<a;r++)if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)))i+=o||"";else switch(s.type){case"escape":case"text":i+=n.text(s.text);break;case"html":i+=n.html(s.text);break;case"link":i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break;case"image":i+=n.image(s.href,s.title,s.text);break;case"strong":i+=n.strong(this.parseInline(s.tokens,n));break;case"em":i+=n.em(this.parseInline(s.tokens,n));break;case"codespan":i+=n.codespan(s.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(s.tokens,n));break;default:{const c='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class xS{constructor(e){this.options=e||xp}preprocess(e){return e}postprocess(e){return e}}function ZX(t,e){return(n,i,r)=>{"function"==typeof i&&(r=i,i=null);const s={...i},o=function $ke(t,e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+wo(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):n?void n(null,r):r}if(e)return Promise.reject(i);if(!n)throw i;n(i)}}((i={...In.defaults,...s}).silent,i.async,r);if(typeof n>"u"||null===n)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function Gke(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(n=i.hooks.preprocess(n)),c=t(n,i)}catch(h){return o(h)}const l=function(h){let p;if(!h)try{i.walkTokens&&In.walkTokens(c,i.walkTokens),p=e(c,i),i.hooks&&(p=i.hooks.postprocess(p))}catch(m){h=m}return i.highlight=a,h?o(h):r(null,p)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return In.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(p,m){if(p)return l(p);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(In.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));const a=t(n,i);i.walkTokens&&In.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return o(a)}}}function In(t,e,n){return ZX(Ch.lex,Th.parse)(t,e,n)}ve(xS,"passThroughHooks",new Set(["preprocess","postprocess"])),In.options=In.setOptions=function(t){return function Dke(t){xp=t}(In.defaults={...In.defaults,...t}),In},In.getDefaults=function UX(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},In.defaults=xp,In.use=function(...t){const e=In.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i={...n};if(i.async=In.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const s=e.renderers[r.name];e.renderers[r.name]=s?function(...o){let a=r.renderer.apply(this,o);return!1===a&&(a=s.apply(this,o)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=In.defaults.renderer||new Sv;for(const s in n.renderer){const o=r[s];r[s]=(...a)=>{let c=n.renderer[s].apply(r,a);return!1===c&&(c=o.apply(r,a)),c}}i.renderer=r}if(n.tokenizer){const r=In.defaults.tokenizer||new PN;for(const s in n.tokenizer){const o=r[s];r[s]=(...a)=>{let c=n.tokenizer[s].apply(r,a);return!1===c&&(c=o.apply(r,a)),c}}i.tokenizer=r}if(n.hooks){const r=In.defaults.hooks||new xS;for(const s in n.hooks){const o=r[s];r[s]=xS.passThroughHooks.has(s)?a=>{if(In.defaults.async)return Promise.resolve(n.hooks[s].call(r,a)).then(l=>o.call(r,l));const c=n.hooks[s].call(r,a);return o.call(r,c)}:(...a)=>{let c=n.hooks[s].apply(r,a);return!1===c&&(c=o.apply(r,a)),c}}i.hooks=r}if(n.walkTokens){const r=In.defaults.walkTokens;i.walkTokens=function(s){let o=[];return o.push(n.walkTokens.call(this,s)),r&&(o=o.concat(r.call(this,s))),o}}In.setOptions(i)})},In.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(In,i)),i.type){case"table":for(const r of i.header)n=n.concat(In.walkTokens(r.tokens,e));for(const r of i.rows)for(const s of r)n=n.concat(In.walkTokens(s.tokens,e));break;case"list":n=n.concat(In.walkTokens(i.items,e));break;default:In.defaults.extensions&&In.defaults.extensions.childTokens&&In.defaults.extensions.childTokens[i.type]?In.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(In.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(In.walkTokens(i.tokens,e)))}return n},In.parseInline=ZX(Ch.lexInline,Th.parseInline),In.Parser=Th,In.parser=Th.parse,In.Renderer=Sv,In.TextRenderer=qX,In.Lexer=Ch,In.lexer=Ch.lex,In.Tokenizer=PN,In.Slugger=JX,In.Hooks=xS,In.parse=In;const Xke=["*"];let QX=(()=>{var t;class e{constructor(){this._buttonClick$=new z,this.copied$=this._buttonClick$.pipe(De(()=>ir(Yt(!0),dN(3e3).pipe(function yN(t){return M(()=>t)}(!1)))),Be(),zo(1)),this.copiedText$=this.copied$.pipe(Na(!1),M(i=>i?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=$n({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Bt(0,"button",0),Pn("click",function(){return r.onCopyToClipboardClick()}),wa(1,"async"),Ri(2),wa(3,"async"),zt()),2&i&&(Xn("copied",Tl(1,3,r.copied$)),Wt(2),Za(Tl(3,5,r.copiedText$)))},dependencies:[Py],encapsulation:2,changeDetection:0}),e})();class qke{}var NN=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(NN||{});class Zke{}const eY=new bt("SECURITY_CONTEXT");let LN=(()=>{var t;class e{get options(){return this._options}set options(i){this._options={...this.DEFAULT_MARKED_OPTIONS,...i}}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,s,o,a,c){this.platform=i,this.securityContext=r,this.http=s,this.clipboardOptions=o,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Sv},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new z,this.reload$=this._reload$.asObservable(),this.options=a}parse(i,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=r,d={...this.options,...r.markedOptions};c&&(this.renderer=this.extendRenderer(d.renderer||new Sv));const h=this.trimIndentation(i),p=s?this.decodeHtml(h):h,m=a?this.parseEmoji(p):p,v=this.parseMarked(m,d,o);return(l?v:this.sanitizer.sanitize(this.securityContext,v))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,s){const{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=r;o&&this.renderClipboard(i,s,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...a}),c&&this.renderKatex(i,{...this.DEFAULT_KATEX_OPTIONS,...l}),d&&this.renderMermaid(i,{...this.DEFAULT_MERMAID_OPTIONS,...h}),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(i,{responseType:"text"}).pipe(M(r=>this.handleExtension(i,r)))}highlight(i){if(!th(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);const r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,s=>s.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!th(this.platform))return i;const r=document.createElement("textarea");return r.innerHTML=i,r.value}extendRenderer(i){const r=i;if(!0===r.\u0275NgxMarkdownRendererExtended)return i;const s=i.code;return i.code=function(o,a,c){return"mermaid"===a?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},r.\u0275NgxMarkdownRendererExtended=!0,i}handleExtension(i,r){const s=i.lastIndexOf("://"),o=s>-1?i.substring(s+4):i,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&"md"!==d?"```"+d+"\n"+r+"\n```":r}parseMarked(i,r,s=!1){return s?In.parseInline(i,r):In.parse(i,r)}parseEmoji(i){if(!th(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(th(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(i,r)}}renderClipboard(i,r,s){if(!th(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:a}=s,c=i.querySelectorAll("pre");for(let l=0;l<c.length;l++){const d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);const p=document.createElement("div");let m,v;p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.opacity="0",p.style.transition="opacity 250ms ease-out",h.insertAdjacentElement("beforeend",p),d.onmouseover=()=>p.style.opacity="1",d.onmouseout=()=>p.style.opacity="0",m=o?r.createComponent(o).hostView:a?r.createEmbeddedView(a):r.createComponent(QX).hostView,m.rootNodes.forEach(R=>{R.onmouseover=()=>p.style.opacity="1",p.appendChild(R),v=new ClipboardJS(R,{text:()=>d.innerText})}),m.onDestroy(()=>v.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!th(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const s=i.querySelectorAll(".mermaid");0!==s.length&&(mermaid.initialize(r),mermaid.init(s))}trimIndentation(i){if(!i)return"";let r;return i.split("\n").map(s=>{let o=r;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(r)&&(r=o),o?s.substring(o):s}).join("\n")}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ya),nt(eY),nt(c_,8),nt(qke,8),nt(Zke,8),nt(Fy))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),tY=(()=>{var t;class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(i){this._srcRelativeLink=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,s){this.element=i,this.markdownService=r,this.viewContainerRef=s,this.error=new en,this.load=new en,this.ready=new en,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new z}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(gr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){let s;this.src&&this.srcRelativeLink&&(s={baseUrl:new URL(this.src,location.origin).pathname});const a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},c=this.markdownService.parse(i,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:s,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=c,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(i){return null!=i&&"false"!=`${String(i)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i),this.load.emit(i)},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,NN.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,NN.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){const s=i.querySelectorAll("pre");for(let o=0;o<s.length;o++){const a=r instanceof Array?r:[r];s.item(o).classList.add(...a)}}setPluginOptions(i,r){const s=i.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(r).forEach(a=>{const c=r[a];if(c){const l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(i){const r=i.match(/([A-Z])/g);if(!r)return i;let s=i.toString();for(let o=0,a=r.length;o<a;o++)s=s.replace(new RegExp(r[o]),"-"+r[o].toLowerCase());return"-"===s.slice(0,1)&&(s=s.slice(1)),s}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Mt),Ge(LN),Ge(Xs))},t.\u0275cmp=$n({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Br],ngContentSelectors:Xke,decls:1,vars:0,template:function(i,r){1&i&&(ss(),Ln(0))},encapsulation:2}),e})();var nY;!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(nY||(nY={}));let iY=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=jt({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]}),e})();function d_(t){return!0===t}function ca(t){return null===t||typeof t>"u"}function Eo(t){return!ca(t)}function FN(t){return!!t}function lY(t){return ca(t)?t:JSON.parse(JSON.stringify(t))}function dY(t){return Eo(t)&&"object"==typeof t&&function BN(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}const HPe="NGXS_COMPUTED_OPTION",fY="NGXS_DATA_META",jN="NGXS_META",pY="NGXS_ARGUMENT_REGISTRY_META";let mY=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new Ye(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(nt(Xl,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();function Tv(t){return t[fY]}let fc=(()=>{class t{constructor(n,i,r){t.store=n.get(Xl),t.ngZone=n.get(on),t.factory=i,t.context=r,t.computed=n.get(mY),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(nt(wr),nt(R9),nt(O9))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();class Qr{constructor(){Qr.statesCachedMeta.clear()}static createStateContext(e){return fc.context.createStateContext(e)}static ensureMappedState(e){if(ca(fc.factory)||ca(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Eo(e.name)?Qr.statesCachedMeta.get(e.name):null)||Qr.ensureMeta(e)}static getRepositoryByInstance(e){const i=Tv(Qr.getStateClassByInstance(e))??null;if(ca(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=Qr.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=n?.getPayloadTypeByIndex(s);Eo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=Qr.createPayload(n,i),s=function YPe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new s(r)}static ensureMeta(e){const n=Eo(e.name)?fc.factory.states?.find(i=>i.name===e.name):null;return Eo(n)&&Eo(e.name)&&Qr.statesCachedMeta.set(e.name,n),n}}Qr.statesCachedMeta=new Map,Qr.\u0275fac=function(e){return new(e||Qr)},Qr.\u0275prov=St({token:Qr,factory:Qr.\u0275fac}),new class KPe{constructor(){this.subject=new dg(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function iu(t,e){const n=arguments.length>=2;return i=>i.pipe(t?xi((r,s)=>t(r,s,i)):Ae,vi(1),n?qg(e):jX(()=>new q0))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new dg(1)}};class JPe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Eo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function gY(t){return t.NGXS_OPTIONS_META??{name:""}}function _Y(t){const e=gY(t),n=e.children??[],r=lY(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(dY(r))return function ZPe(t,e){return e.reduce((n,i)=>{const r=gY(i);if(function Cv(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=_Y(i),n},t??{})}(r,n);throw new JPe(r)}return r}function bY(){return`__${HPe}__`}function yY(t){return t[bY()]??null}function vY(){return fc?.computed?.sequenceValue??0}function tNe(t){let e=!1;return sp(t)&&(e=!0),e}function UN(t){return t[pY]}class nNe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class iNe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(FN(this.argumentMap.has(e))||FN(this.payloadMap.has(e)))throw new nNe(e,n)}}function lNe(t){return{enumerable:!0,configurable:!0,get(){const e=Tv(t),n=Qr.ensureMappedState(e.stateMeta);return Qr.createStateContext(n)}}}const mNe={dataActionSubscribeRequired:!0},gNe=new bt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>mNe});let _Ne=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[Qr,fc,mY,...n]}}}return t.\u0275fac=function(n){return new(n||t)(nt(Qr,2),nt(fc,2))},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),t})();function xY(){return(t,e,n)=>{!function XPe(t,e){if(!function FPe(t,e){let n=t,i=!1;if(dY(n))for(;null!==n;){if(d_(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const s=function eNe(t){return ca(yY(t))&&Object.defineProperties(t,{[bY()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),yY(t)}(this),o=s?.get(i);if(d_(o?.isObservable))return o?.value;if(ca(o)||o.sequenceId!==vY()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:vY(),isObservable:tNe(c)}),c}return o?.value},n}}const bNe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function VN(t={}){const e=function yNe(t){const e=fc?.injector?.get(gNe,void 0,ei.Optional),n={...bNe};return Eo(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function $Pe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const d=Qr.getRepositoryByInstance(c),h=d.operations;let p=h[o];const m=d.stateMeta,v=UN(s);if(ca(p)){const pe=function pNe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),Me=function qPe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let s="";for(let o=0;o<n.length;o++)Eo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):Eo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==n.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:m.path,methodName:o,argumentsNames:pe,argumentRegistry:v});p=h[o]={type:Me,options:{cancelUncompleted:e.cancelUncompleted??!1}},Eo(p)&&(m.actions[p.type]=[{type:p.type,options:p.options,fn:p.type}])}Qr.ensureMappedState(m).instance[p.type]=()=>(d_(e.insideZone)?fc.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),sp(l)&&d_(e.subscribeRequired)?Yt(null).pipe(M(()=>l)):l);const Y=Qr.createAction(p,a,v),q=fc.store.dispatch(Y);return sp(l)?function QPe(t,e){return Z0([t,e]).pipe(M(n=>n.pop()))}(q,l):l},r}}function wY(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function rNe(t,e){const n=t[e];return ca(UN(n))&&Object.defineProperties(n,{[pY]:{enumerable:!0,configurable:!0,value:new iNe}}),UN(n)})(e,n).createPayloadType(r,n,i)}}function xNe(){return t=>{const e=function fNe(t){if(function CPe(t){return!FN(t)}(t.hasOwnProperty(jN))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,jN,{value:e})}return function hNe(t){return t?.[jN]}(t)}(t);if(ca(e.name))throw new Error("@StateRepository should be add before decorator @State");!function aNe(t,e){(function oNe(t){const e=Tv(t)??null;return(ca(e)||e?.stateClass!==t)&&function sNe(t){Object.defineProperty(t,fY,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),Tv(t)}(t)).stateMeta=e}(t,e),function wNe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>lY(n)},context:lNe(t)})}(t,e,_Y(t)),function dNe(t){const n=Tv(t)?.stateMeta?.name??null;if(Eo(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Eo(this[i]))return this[i];if(ca(fc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=fc.store.select(t).pipe(M(r=>r),zo({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let ENe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new z,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})(),ANe=(()=>{class t extends ENe{get snapshot(){return this.getState()}get ctx(){return function uNe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Bi(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac}),ct([xY(),J("design:type",Object),J("design:paramtypes",[])],t.prototype,"snapshot",null),ct([VN(),Dt(0,wY("patchValue")),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],t.prototype,"patchState",null),ct([VN(),Dt(0,wY("stateValue")),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],t.prototype,"setState",null),ct([VN(),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",void 0)],t.prototype,"reset",null),t})();const zS=new bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),lL=new bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Ut(Gn);if(!t)throw new Error("Window is not available");return t}}),PFe=new bt("ngx-data-layer",{providedIn:"root",factory:()=>function kFe(t){return t?t.dataLayer=t.dataLayer||[]:null}(Ut(lL))}),EK=new bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function NFe(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Ut(lL),Ut(PFe))});let AK=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,s){try{const o=new Map([["page_path",n]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(n,i,r,s,o){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(nt(zS),nt(Gn),nt(EK))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new bt("ngx-google-analytics-routing-settings",{factory:()=>({})}),new bt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});class DK extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class hBe{constructor(){this.cancelUncompleted$=new z}cancelPreviousAction(){this.cancelUncompleted$.next()}}const dL="\u0275fac",RK=Symbol("InjectorInstance"),OK=Symbol("FactoryHasBeenDecorated");function kK(t,e){const n=t[RK];return n?n.get(e):null}const mBe={cancelUncompleted:!1};function PK(t=mBe){return(e,n,i)=>{let r;const s=function fBe(t){return t?new hBe:null}(t.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=kK(this,Xl)||function dBe(){throw new DK}(),c=kK(this,on)||function uBe(){throw new DK}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function lBe(t,e,n){return ng(e)?function cBe(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):sp(e)?function aBe(t,e,n){return null!==n&&(e=e.pipe(gr(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,n,{set:a=>r=a,get:()=>o}),function pBe(t){if(OK in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[dL]&&function uL(t){const e=t[dL];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[RK]=Ge(Lm),r};n&&(n.factory=i),Object.defineProperty(t,dL,{get:()=>i})}(e),t.constructor.prototype[OK]=!0}(e)}}var Ap;const o3e=["bodyCanvas"];let a3e=(()=>{var t;class e{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new en,this.nodeDrag=new en,this.nodeClick=new en,this.nodeHoverStart=new en,this.nodeHoverStop=new en,this.initialized=new en,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,r={x:48,y:48}){if(this.bodyCanvas){const{width:s,height:o}=this.bodyCanvas.nativeElement,a=window.devicePixelRatio,c=Math.min(Math.log2((s-r.x)/a/i.x),Math.log2((o-r.y)/a/i.y));this.zoom=c}}setupBodyUI(){var i=this;return Lt(function*(){const r=i.bodyCanvas.nativeElement,s=new hTe({id:"body-ui",canvas:r,zoom:i.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:i.interactive,camera:i.camera});r.addEventListener("contextmenu",o=>o.preventDefault()),yield s.initialize(),i.bodyUI=s,window.bodyUI=s,i.scene?.length>0&&i.bodyUI.setScene(i.scene),i.bounds&&i.zoomToBounds(i.bounds),i.target&&i.bodyUI.setTarget(i.target),i.subscriptions=[i.bodyUI.sceneRotation$.subscribe(o=>i.rotationChange.next(o)),i.bodyUI.nodeDrag$.subscribe(o=>i.nodeDrag.emit(o)),i.bodyUI.nodeClick$.subscribe(o=>i.nodeClick.emit(o)),i.bodyUI.nodeHoverStart$.subscribe(o=>i.nodeHoverStart.emit(o)),i.bodyUI.nodeHoverStop$.subscribe(o=>i.nodeHoverStop.emit(o))],i.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=$n({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Zi(o3e,5,Mt),2&i){let s;Vn(s=zn())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Ja(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&li(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),e})(),c3e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({imports:[Rr]}),e})();function T3e(t,e){if(1&t&&(Bt(0,"div",16),li(1,"youtube-player",17),zt()),2&t){const n=Nn(3);Wt(1),oE("videoId",n.videoID)}}function M3e(t,e){if(1&t&&(Bt(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Ri(3),zt()(),Bt(4,"div",13),li(5,"markdown",14),vn(6,T3e,2,1,"div",15),zt()()),2&t){const n=Nn(),i=n.index,r=n.$implicit;Gt("expanded",0===i),Wt(3),Za(r.title),Wt(2),Xn("first",0===i),Gt("data",r.content),Wt(1),Gt("ngIf",0===i)}}function I3e(t,e){if(1&t&&(Bt(0,"div",9),vn(1,M3e,7,6,"mat-expansion-panel",10),zt()),2&t){const n=e.$implicit;Wt(1),Gt("ngIf",n)}}new bt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name)).filter(t=>!0!==t.disabled);let YK=(()=>{var t;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.documentationContents=r.content||[],this.infoTitle=r.title||"",this.videoID=r.videoID}ngOnInit(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(MN),Ge(_X))},t.\u0275cmp=$n({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Bt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Ri(5),zt(),Bt(6,"div",5)(7,"mat-icon",6),Pn("click",function(){return r.close()}),Ri(8,"clear"),zt()()(),Bt(9,"mat-dialog-content",7),vn(10,I3e,2,1,"div",8),zt()()()()),2&i&&(Wt(5),Za(r.infoTitle),Wt(5),Gt("ngForOf",r.documentationContents))},dependencies:[Nf,Il,yX,vX,l_,DX,lke,FX,tY],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e})(),KK=(()=>{var t;class e{constructor(i){this.http=i,this.panelContent=new Ye({content:[],infoTitle:"",videoID:""})}updateData(i,r,s){this.http.get(i,{responseType:"text"}).subscribe(o=>{const a={content:this.parseMarkdown(o),infoTitle:s,videoID:r};this.panelContent.next(a)})}parseMarkdown(i){const r=[],s=i.split("# ");for(const o of s)if(o.length){const a=o.includes("\n\n")?"\n\n":"\r\n\r\n",c=o.split(a);r.push({title:c[0],content:c.splice(1).join(a)})}return r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(c_))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),R3e=(()=>{var t;class e{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new en,this.closeClicked=new en}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=$n({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Ja(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Bt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Ri(5),zt(),Bt(6,"mat-icon",5),Pn("click",function(){return r.close()}),Ri(7,"clear"),zt()(),li(8,"img",6),Bt(9,"mat-dialog-content",7)(10,"div",8),Ri(11),zt(),Bt(12,"a",9),Pn("click",function(){return r.onDialogButtonClick()}),zt()()()()()),2&i&&(Wt(5),Za(r.infoTitle),Wt(3),Gt("src",r.imageUrl,Wb),Wt(3),xa(" ",r.message,""),Wt(1),Gt("text",r.callToAction))},dependencies:[l_,yX,vX,iY],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),e})(),Gv=(()=>{var t;let e=((t=class extends ANe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function SNe(){return xi(t=>null!=t)}(),zo(1))}setConfig(i){this.setState(i)}patchConfig(i){this.patchState(i)}getProperty(i){return this.config$.pipe(N$(...i),Be(),zo(1))}getOption(...i){const r=this.getPathKey(i);if(this.optionCache.has(r))return this.optionCache.get(r);const s=this.config$.pipe(N$(...i),Be(),zo(1));return this.optionCache.set(r,s),s}getPathKey(i){return`${i.length}:${i.join(".")}`}}).\u0275fac=function(){let n;return function(r){return(n||(n=Bi(t)))(r||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac}),t);return ct([xY()],e.prototype,"config$",null),e=ct([xNe(),i7({name:"globalConfig",defaults:null})],e),e})();!function P3e(){const t=localStorage.getItem("ALLOW_TELEMETRY");null===t||t.toLowerCase()}(),new z;let fL=(()=>{class e{}return e.type="[CallToAction] Learn More",e})(),pL=(()=>{class e{}return e.type="[CallToAction] Open Dialog",e})(),mL=(()=>{class e{}return e.type="[CallToAction] Close Dialog",e})();var gL;class ou{get length(){return ou.storage?.length??0}key(e){return ou.storage?.key(e)??null}getItem(e,n){return ou.storage?.getItem(e)??n??null}setItem(e,n){try{return ou.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){ou.storage?.removeItem(e)}clear(){ou.storage?.clear()}}(Ap=ou).storage=(()=>{let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length?t:void 0}})(),Ap.\u0275fac=function(e){return new(e||Ap)},Ap.\u0275prov=St({token:Ap,factory:Ap.\u0275fac,providedIn:"root"});const ZK="callToActionPopupShown";let Ih=(()=>{var t;let e=(t=class{static ctaDatePassed(i,r=Date.now){return+r()>+new Date(i)}constructor(i,r,s,o,a){this.dialog=i,this.ga=r,this.storage=s,this.infoService=o,this.http=a}ngxsOnInit(i){const{expirationDate:r,popupShown:s}=i.getState(),o=this.storage.getItem(ZK,`${s}`),a=gL.ctaDatePassed(r);"true"!==o&&!a&&i.dispatch(new pL)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(M(i=>this.infoService.parseMarkdown(i)))}launchLearnMore(i){this.dialog.open(YK,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:i,videoID:"UfxMpzatowE"}})}learnMore(i){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(_r(r=>this.launchLearnMore(r)))}open(i){this.dialog.open(B3e,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(ZK,"true"),i.patchState({popupShown:!0})}close(i){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},gL=t,t.\u0275fac=function(i){return new(i||t)(nt(_S),nt(AK),nt(ou),nt(KK),nt(c_))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t);return ct([vP(fL)],e.prototype,"learnMore",null),ct([vP(pL)],e.prototype,"open",null),ct([vP(mL)],e.prototype,"close",null),e})();Ih=gL=ct([i7({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Ih);let HS=(()=>{class t{static title(n){return n.title}static message(n){return n.message}static callToAction(n){return n.callToAction}static imageUrl(n){return n.imageUrl}static expirationDate(n){return n.expirationDate}static popupShown(n){return n.popupShown}}return ct([Qg([Ih])],t,"title",null),ct([Qg([Ih])],t,"message",null),ct([Qg([Ih])],t,"callToAction",null),ct([Qg([Ih])],t,"imageUrl",null),ct([Qg([Ih])],t,"expirationDate",null),ct([Qg([Ih])],t,"popupShown",null),t})(),B3e=(()=>{var t;class e{constructor(){this.close=()=>new mL,this.learnMore=()=>new fL}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=$n({type:t,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Bt(0,"ccf-call-to-action",0),Pn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),wa(1,"async"),wa(2,"async"),wa(3,"async"),wa(4,"async"),zt()),2&i&&Gt("infoTitle",Tl(1,4,r.title$))("message",Tl(2,6,r.message$))("callToAction",Tl(3,8,r.callToAction$))("imageUrl",Tl(4,10,r.imageUrl$))},dependencies:[R3e,Py],changeDetection:0}),ct([CA(HS.title)],e.prototype,"title$",void 0),ct([CA(HS.message)],e.prototype,"message$",void 0),ct([CA(HS.callToAction)],e.prototype,"callToAction$",void 0),ct([CA(HS.imageUrl)],e.prototype,"imageUrl$",void 0),ct([PK()],e.prototype,"close",void 0),ct([PK()],e.prototype,"learnMore",void 0),e})();const QK="http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity",G3e=[173,255,47,229.5];function la(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}let _L;function Xc(){return _L||(_L=function Y3e(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=la(n);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),_L}function K3e(t,e=Xc()){return e("readonly",n=>la(n.get(t)))}function q3e(t,e=Xc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),la(n.transaction)))}function J3e(t,e=Xc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),la(n.transaction)))}var Z3e=g(5020),WS=g(4938),Q3e=g.t(WS,2),eje=g.n(WS),tje=g(7991),eq=g(5440),$S=g(7184),Hv=g(9689),nje=g(7661);const Wv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",$v="http://www.w3.org/2001/XMLSchema#",yL="http://www.w3.org/2000/10/swap/",Ho={xsd:{decimal:`${$v}decimal`,boolean:`${$v}boolean`,double:`${$v}double`,integer:`${$v}integer`,string:`${$v}string`},rdf:{type:`${Wv}type`,nil:`${Wv}nil`,first:`${Wv}first`,rest:`${Wv}rest`,langString:`${Wv}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${yL}reify#forSome`,forAll:`${yL}reify#forAll`},log:{implies:`${yL}log#implies`}};function vL(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);n[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||Ni,i}const{rdf:ije,xsd:Sp}=Ho;let Xv,rje=0;const nq=/^"(.*".*)(?="[^"]*$)/,sje=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,xL={namedNode:function dje(t){return new iq(t)},blankNode:function uje(t){return new oje(t||"n3-"+rje++)},variable:function fje(t){return new aje(t)},literal:function hje(t,e){if("string"==typeof e)return new v_(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=Sp.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?Sp.integer:Sp.double:(n=Sp.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new v_(""===n||n===Sp.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function pje(){return Xv},quad:rq,triple:rq},Ni=xL;class au{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof au?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class iq extends au{get termType(){return"NamedNode"}}class v_ extends au{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new iq(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?Sp.string:ije.langString}equals(e){return e instanceof v_?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class oje extends au{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class aje extends au{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function cu(t,e){if(e=e||xL,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===xL)return new v_(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const i=sje.exec(t);return e.quad(cu(XS(i[1]),e),cu(XS(i[2]),e),cu(XS(i[3]),e),i[4]&&cu(XS(i[4]),e));default:return e.namedNode(t)}}function Ui(t){if("string"==typeof t)return t;if(t instanceof au&&"Quad"!==t.termType)return t.id;if(!t)return Xv.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Sp.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${wL(Ui(t.subject))} ${wL(Ui(t.predicate))} ${wL(Ui(t.object))}${function tq(t){return!!t&&"DefaultGraph"===t.termType}(t.graph)?"":` ${Ui(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}Xv=new class cje extends au{constructor(){return super(""),Xv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class lje extends au{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||Xv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function wL(t){return t.replace(nq,(e,n)=>`"${n.replace(/"/g,'""')}`)}function XS(t){return t.replace(nq,(e,n)=>`"${n.replace(/""/g,'"')}`)}function rq(t,e,n,i){return new lje(t,e,n,i)}var mje=g(3410),gje=g.n(mje);const{xsd:YS}=Ho,_je=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,sq={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},bje=/[\x00-\x20<>\\"\{\}\|\^\`]/,yje={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},vje=/$0^/;class xje{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in yje)&&this[n]instanceof RegExp&&(this[n]=vje)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&s("comment",c[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",p="",m="",v=null,R=0,L=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(R=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){L=!0;break}case"<":if(v=this._unescapedIri.exec(i))h="IRI",p=v[1];else if(v=this._iri.exec(i)){if(p=this._unescape(v[1]),null===p||bje.test(p))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",R=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",R=2,p=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",R=2);break;case"_":((v=this._blank.exec(i))||n&&(v=this._blank.exec(`${i} `)))&&(h="blank",m="_",p=v[1]);break;case'"':if(v=this._simpleQuotedString.exec(i))p=v[1];else if(({value:p,matchLength:R}=this._parseLiteral(i)),null===p)return o(this);(null!==v||0!==R)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(v=this._simpleApostropheString.exec(i))p=v[1];else if(({value:p,matchLength:R}=this._parseLiteral(i)),null===p)return o(this);(null!==v||0!==R)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(v=this._variable.exec(i))&&(h="var",p=v[0]);break;case"@":"literal"===this._previousMarker&&(v=this._langcode.exec(i))?(h="langcode",p=v[1]):(v=this._keyword.exec(i))&&(h=v[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",R=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(v=this._number.exec(i)||n&&(v=this._number.exec(`${i} `)))&&(h="literal",p=v[0],m="string"==typeof v[1]?YS.double:"string"==typeof v[2]?YS.decimal:YS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(v=this._sparqlKeyword.exec(i))?h=v[0].toUpperCase():L=!0;break;case"f":case"t":(v=this._boolean.exec(i))?(h="literal",p=v[0],m=YS.boolean):L=!0;break;case"a":(v=this._shortPredicates.exec(i))?(h="abbreviation",p="a"):L=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(R=1,p="="):(R=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(R=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",R=2):(h=d,R=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",R=2);break;default:L=!0}if(L&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(v=this._prefix.exec(i))?((v=this._prefixed.exec(i))||n&&(v=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=v[1]||"",p=this._unescape(v[2])):(h="prefix",p=v[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const Y=R||v[0].length,q=s(h,p,m,l,Y);this.previousToken=q,this._previousMarker=h,i=i.substr(Y,i.length)}function s(a,c,l,d,h){const p=i?r-i.length:r,v={type:a,value:c,prefix:l,line:d,start:p,end:p+h};return e(null,v),v}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(_je,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in sq?sq[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}gje()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}let oq=0;class aq{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&cq(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),s=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new xje({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){oq=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:n,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=EL}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<n;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<n&&"/"!==e[s];)r=s;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${oq++}_`,this._prefixCallback=i||EL,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=n,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=EL):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function EL(){}function cq(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(Ho.rdf.first),t.RDF_REST=n(Ho.rdf.rest),t.RDF_NIL=n(Ho.rdf.nil),t.N3_FORALL=n(Ho.r.forAll),t.N3_FORSOME=n(Ho.r.forSome),t.ABBREVIATIONS={a:n(Ho.rdf.type),"=":n(Ho.owl.sameAs),">":n(Ho.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}cq(aq.prototype,Ni);var AL=g(8905);class SL{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||Ni,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const s in n)for(const o in i=n[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const s=e[n]||(e[n]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,n,i,r){const s=e[n],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[n]}*_findInIndex(e,n,i,r,s,o,a,c){let l,d,h;const p=this._entities,m=cu(c,this._factory),v={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const R in e)if(d=e[R]){v[s]=cu(p[R],this._factory),i&&((l=d,d={})[i]=l[i]);for(const L in d)if(h=d[L]){v[o]=cu(p[L],this._factory);const Y=r?r in h?[r]:[]:Object.keys(h);for(let q=0;q<Y.length;q++)v[a]=cu(p[Y[q]],this._factory),yield this._factory.quad(v.subject,v.predicate,v.object,m)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,s;if(r=e[n])for(s in r)i(s)}_loopByKey1(e,n,i){let r,s;for(r in e)s=e[r],s[n]&&i(r)}_loopBy2Keys(e,n,i,r){let s,o,a;if((s=e[n])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,n,i,r){let o,a,c,s=0;n&&((o=e,e={})[n]=o[n]);for(const l in e)if(a=e[l]){i&&((o=a,a={})[i]=o[i]);for(const d in a)(c=a[d])&&(r?r in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!La(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(cu(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Ui(e),n=Ui(n),i=Ui(i),r=Ui(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s));const o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),n=o[n]||(o[a[++this._id]=n]=this._id),i=o[i]||(o[a[++this._id]=i]=this._id);const c=this._addToIndex(s.subjects,e,n,i);return this._addToIndex(s.predicates,n,i,e),this._addToIndex(s.objects,i,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Ui(e),n=Ui(n),i=Ui(i),r=Ui(r);const s=this._ids,o=this._graphs;let a,c,l;if(!((e=s[e])&&(n=s[n])&&(i=s[i])&&(a=o[r])&&(c=a.subjects[e])&&(l=c[n])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,n,i),this._removeFromIndex(a.predicates,n,i,e),this._removeFromIndex(a.objects,i,e,n),null!==this._size&&this._size--,a.subjects)return!0;return delete o[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const s=new AL.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,n,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){e=e&&Ui(e),n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._getGraphs(r),o=this._ids;let a,c,l,d;if(!(La(e)&&!(c=o[e])||La(n)&&!(l=o[n])||La(i)&&!(d=o[i])))for(const h in s)(a=s[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,n,i,r){return new CL(this,e,n,i,r)}countQuads(e,n,i,r){e=e&&Ui(e),n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._getGraphs(r),o=this._ids;let c,l,d,h,a=0;if(La(e)&&!(l=o[e])||La(n)&&!(d=o[n])||La(i)&&!(h=o[i]))return 0;for(const p in s)(c=s[p])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):n?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,n,i,r,s){this.some(o=>(e(o),!1),n,i,r,s)}every(e,n,i,r,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),n,i,r,s);return o&&a}some(e,n,i,r,s){for(const o of this.readQuads(n,i,r,s))if(e(o))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,n,i),r}forSubjects(e,n,i,r){n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._ids,o=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(La(n)&&!(c=s[n])||La(i)&&!(l=s[i])))for(r in o)(a=o[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,n,i),r}forPredicates(e,n,i,r){n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._ids,o=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(La(n)&&!(c=s[n])||La(i)&&!(l=s[i])))for(r in o)(a=o[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(s=>{r.push(s)},e,n,i),r}forObjects(e,n,i,r){n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._ids,o=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(La(n)&&!(c=s[n])||La(i)&&!(l=s[i])))for(r in o)(a=o[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,n,i),r}forGraphs(e,n,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),n,i,r,s)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,Ho.rdf.rest,Ho.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let d,h,l=!1;const p=a.graph;let m=a.subject;for(;m&&!l;){const v=this.getQuads(null,null,m,null),R=this.getQuads(m,null,null,null);let L,Y=null,q=null,pe=null;for(let Me=0;Me<R.length&&!l;Me++)L=R[Me],L.graph.equals(p)?d?l=r(m,"has non-list arcs out"):L.predicate.value===Ho.rdf.first?Y?l=r(m,"has multiple rdf:first arcs"):o.push(Y=L):L.predicate.value===Ho.rdf.rest?q?l=r(m,"has multiple rdf:rest arcs"):o.push(q=L):v.length?l=r(m,"can't be subject and object"):(d=L,h="subject"):l=r(m,"not confined to single graph");for(let Me=0;Me<v.length&&!l;++Me)L=v[Me],d?l=r(m,"can't have coreferences"):L.predicate.value===Ho.rdf.rest?pe?l=r(m,"has incoming rdf:rest arcs"):pe=L:(d=L,h="object");Y?c.unshift(Y.object):l=r(m,"has no list head"),m=pe&&pe.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}function La(t){return"string"==typeof t||t instanceof String}class CL extends AL.Readable{constructor(e,n,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:s}=this,o=this._filtered=new SL({factory:e._factory});for(const a of e.readQuads(s,r,i,n))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new CL(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var wje=g(2821);function dr(t,e,n,i,r){return t.readQuads(e,n,i,r)}function lq(t){const e=t.length;let n=0;return new AL.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function TL(t,e){return ML.apply(this,arguments)}function ML(){return ML=Lt(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield nje.toRDF(n);e.import(lq(i))}return e}),ML.apply(this,arguments)}function IL(){return IL=Lt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new wje.RdfXmlParser({dataFactory:Ni,strict:!0}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(n),i.end(),r}return e}),IL.apply(this,arguments)}function DL(){return DL=Lt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new aq({format:"n3"}).parse(n);e.import(lq(i))}return e}),DL.apply(this,arguments)}function RL(t,e){const n=JSON.parse(t),i=new SL;return Object.assign(i,n,{_factory:e??Ni}),i}const Vi=vL({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Ni),Jt=(Vi("rdf"),Vi("rdf")("type"),Vi("rdfs"),Vi("rdfs")("label"),Vi("rdfs")("comment"),Vi("rdfs")("isDefinedBy"),Vi("rdfs")("seeAlso"),Vi("ccf")),lu=(Vi("ccf")("has_registration_location"),Vi("rdfs")("label"),Vi("rdfs")("comment"),Jt("url"),Jt("sex"),Jt("age"),Jt("bmi"),Ni.literal("Male"),Ni.literal("Female"),Jt("consortium_name"),Jt("tissue_provider_name"),Jt("tissue_provider_uuid"),Jt("comes_from"),Jt("subdivided_into_sections"),Jt("generates_dataset"),Jt("sample_type"),Ni.literal("Tissue Block"),Ni.literal("Tissue Section"),Ni.literal("Non-standard"),Jt("section_count"),Jt("section_size"),Jt("section_size_unit"),Jt("section_number"),Jt("has_registration_location"),Jt("has_ontology_term"),Jt("has_cell_type_term"),Jt("technology"),Jt("thumbnail"),{x:Jt,base:Vi("base"),ontologyNode:{label:Jt("ccf_pref_label"),parent:Jt("ccf_part_of"),children:Jt("ccf_part_of"),rui_rank:Jt("rui_rank"),synonymLabels:Ni.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Jt("ccf_part_of"),ct_is_a:Jt("ccf_ct_isa"),located_in:Jt("ccf_located_in"),characterizes:Jt("ccf_characterizes"),bm_located_in:Jt("ccf_bm_located_in")},spatial:{Female:Vi("base")("VHFemale"),Male:Vi("base")("VHMale"),BothSexes:Vi("base")("VHBothSexes"),FemaleOrgans:Vi("base")("VHFemaleOrgans"),MaleOrgans:Vi("base")("VHMaleOrgans")},SpatialObjectReference:Jt("spatial_object_reference"),SpatialEntity:Jt("spatial_entity"),SpatialPlacement:Jt("spatial_placement"),spatialObjectReference:{file:Jt("file_url"),file_format:Jt("file_format"),file_subpath:Jt("file_subpath")},extractionSet:{label:Vi("rdfs")("label"),rui_rank:Jt("rui_rank")},spatialEntity:{label:Vi("rdfs")("label"),description:Vi("rdfs")("comment"),creator:Vi("dcterms")("creator"),creator_first_name:Jt("creator_first_name"),creator_last_name:Jt("creator_last_name"),creator_orcid:Jt("creator_orcid"),creation_date:Vi("dcterms")("created"),updated_date:Jt("updated_date"),ccf_annotations:Jt("collides_with"),representation_of:Jt("representation_of"),reference_organ:Jt("has_reference_organ"),extraction_set_for:Jt("extraction_set_for"),extraction_set:Jt("has_extraction_set"),sex:Jt("organ_owner_sex"),side:Jt("organ_side"),rui_rank:Jt("rui_rank"),slice_thickness:Jt("slice_thickness"),slice_count:Jt("slice_count"),x_dimension:Jt("x_dimension"),y_dimension:Jt("y_dimension"),z_dimension:Jt("z_dimension"),dimension_units:Jt("dimension_unit"),object:Jt("has_object_reference")},spatialPlacement:{source:Jt("placement_for"),target:Jt("placement_relative_to"),placement_date:Vi("dcterms")("created"),x_scaling:Jt("x_scaling"),y_scaling:Jt("y_scaling"),z_scaling:Jt("z_scaling"),scaling_units:Jt("scaling_unit"),x_rotation:Jt("x_rotation"),y_rotation:Jt("y_rotation"),z_rotation:Jt("z_rotation"),w_rotation:Jt("theta_rotation"),rotation_order:Jt("rotation_order"),rotation_units:Jt("rotation_unit"),x_translation:Jt("x_translation"),y_translation:Jt("y_translation"),z_translation:Jt("z_translation"),translation_units:Jt("translation_unit")}}),ii={x:Vi("uberon"),body:Vi("uberon")("0013702")},Tje={x:Vi("cl"),cell:Vi("cl")("0000000")},Yv={x:Vi("fma")},dq=(Vi("lmha"),{body:ii.body,cell:Tje.cell,respiratory_system:ii.x("0001004"),colon:ii.x("0001155"),left_lung:ii.x("0002168"),right_lung:ii.x("0002167"),left_bronchus:ii.x("0002178"),right_bronchus:ii.x("0002177"),kidney:ii.x("0002113"),ureter:ii.x("0000056"),eye:ii.x("0000970"),fallopian_tube:ii.x("0003889"),knee:ii.x("0001465"),ovary:ii.x("0000992"),trachea:ii.x("0003126"),aorta:ii.x("0000947"),blood:ii.x("0000178"),bone_marrow:ii.x("0002371"),male_reproductive_system:ii.x("0000079"),lymph_node:ii.x("0000029"),blood_vasculature:ii.x("0004537"),brain:ii.x("0000955"),eye_left:ii.x("0004548"),eye_right:Yv.x("54449"),fallopian_tube_left:ii.x("0001303"),fallopian_tube_right:ii.x("0001302"),heart:ii.x("0000948"),kidney_left:ii.x("0004538"),kidney_right:ii.x("0004539"),knee_left:Yv.x("24978"),knee_right:Yv.x("24977"),large_intestine:ii.x("0000059"),liver:ii.x("0002107"),lungs:ii.x("0002048"),mesenteric_lymph_node:ii.x("0002509"),ovary_left:Yv.x("7214"),ovary_right:Yv.x("7213"),pancreas:ii.x("0001264"),pelvis:ii.x("0001270"),prostate_gland:ii.x("0002367"),skin:ii.x("0002097"),small_intestine:ii.x("0002108"),spleen:ii.x("0002106"),thymus:ii.x("0002370"),ureter_left:ii.x("0001223"),ureter_right:ii.x("0001222"),urinary_bladder:ii.x("0001255"),uterus:ii.x("0000995")});function OL(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}OL(lu.spatialObjectReference),OL(lu.spatialEntity),OL(lu.spatialPlacement),eje();var hq=g(6990),Rje=g.n(hq);Rje();var ZS=g(6030);new tn,new tn;const qv=new tn,_q=new tn;class UL{constructor(e=[0,0,0],n=0){ve(this,"center",void 0),ve(this,"radius",void 0),this.radius=-0,this.center=new tn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=qv.from(n),this.center=(new tn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new UL(this.center,this.radius)}union(e){const n=this.center,i=this.radius,s=e.radius,o=qv.copy(e.center).subtract(n),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const c=.5*(i+a+s);return _q.copy(o).scale((-i+c)/a).add(n),this.center.copy(_q),this.radius=c,this}expand(e){const i=qv.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=function K6(t,e){var s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(c,l,d),t}(qv,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=qv.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?-1:s<i?0:1}}var bq=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2",t}(bq||{});const Hje=Object.freeze([1,0,0,0,1,0,0,0,1]);class da extends tV{static get IDENTITY(){return function $je(){return eC||(eC=new da,Object.freeze(eC)),eC}()}static get ZERO(){return function Wje(){return QS||(QS=new da([0,0,0,0,0,0,0,0,0]),Object.freeze(QS)),QS}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return bq}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(Hje)}fromObject(e){return this.check()}fromQuaternion(e){return function mye(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,d=i*o,h=i*a,p=r*o,m=r*a,v=r*c,R=s*o,L=s*a,Y=s*c;t[0]=1-h-v,t[3]=d-Y,t[6]=p+L,t[1]=d+Y,t[4]=1-l-v,t[7]=m-R,t[2]=p-L,t[5]=m+R,t[8]=1-l-h}(this,e),this.check()}set(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=s,this[5]=c,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function hye(t){var r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*s-o*c)+t[1]*(-l*r+o*a)+t[2]*(c*r-s*a)}(this)}transpose(){return function dye(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function uye(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*o-a*l,p=-d*s+a*c,m=l*s-o*c,v=n*h+i*p+r*m;v&&(t[0]=h*(v=1/v),t[1]=(-d*i+r*l)*v,t[2]=(a*i-r*o)*v,t[3]=p*v,t[4]=(d*n-r*c)*v,t[5]=(-a*n+r*s)*v,t[6]=m*v,t[7]=(-l*n+i*c)*v,t[8]=(o*n-i*s)*v)}(this,this),this.check()}multiplyLeft(e){return qz(this,e,this),this.check()}multiplyRight(e){return qz(this,this,e),this.check()}rotate(e){return function pye(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=Math.sin(n),m=Math.cos(n);t[0]=m*i+p*o,t[1]=m*r+p*a,t[2]=m*s+p*c,t[3]=m*o-p*i,t[4]=m*a-p*r,t[5]=m*c-p*s,t[6]=l,t[7]=d,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?Jz(this,this,e):Jz(this,this,[e,e]),this.check()}translate(e){return function fye(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1];t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=p*i+m*o+l,t[7]=p*r+m*a+d,t[8]=p*s+m*c+h}(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=function Rue(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:i=W8(n||[-0,-0,-0],e,this);break;case 4:i=Y8(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ky(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let QS,eC;const Xje=new tn,Yje=new tn,tC=new tn,nC=new tn,iC=new tn,Kje=new tn,qje=new tn;class VL{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){ve(this,"center",void 0),ve(this,"halfAxes",void 0),this.center=(new tn).from(e),this.halfAxes=new da(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new tn(e).len(),new tn(n).len(),new tn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new tn(e).normalize(),s=new tn(n).normalize(),o=new tn(i).normalize();return(new T0).fromMatrix3(new da([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new T0(i),s=(new da).fromQuaternion(r);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=(new tn).from(e),this.halfAxes=s,this}clone(){return new VL(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new UL){const n=this.halfAxes,i=n.getColumn(0,tC),r=n.getColumn(1,nC),s=n.getColumn(2,iC),o=Xje.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,c=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?-1:l>=c?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=Yje.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,tC),s=i.getColumn(1,nC),o=i.getColumn(2,iC),a=r.magnitude(),c=s.magnitude(),l=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,d=0;return h=Math.abs(n.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(n.dot(s))-c,h>0&&(d+=h*h),h=Math.abs(n.dot(o))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,c=a.getColumn(0,tC),l=a.getColumn(1,nC),d=a.getColumn(2,iC),h=Kje.copy(c).add(l).add(d).add(o),p=qje.copy(h).subtract(e);let m=n.dot(p);return r=Math.min(m,r),s=Math.max(m,s),h.copy(o).add(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),h.copy(o).add(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),h.copy(o).add(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).add(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),s=Math.max(m,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,tC);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,nC);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,iC);return r.transformAsPoint(e),this.halfAxes=new da([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const yq=new tn,vq=new tn;class Jv{constructor(e=[0,0,1],n=0){ve(this,"normal",void 0),ve(this,"distance",void 0),this.normal=new tn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return qy(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=yq.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),qy(Fd(this.normal.len(),1)),this.distance=r,this}clone(){return new Jv(this.normal,this.distance)}equals(e){return Fd(this.distance,e.distance)&&Fd(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=vq.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=yq.from(e);const i=this.getPointDistance(e),r=vq.copy(this.normal).scale(i);return e.subtract(r).to(n)}}const xq=[new tn([1,0,0]),new tn([0,1,0]),new tn([0,0,1])],wq=new tn,Jje=new tn;new Jv(new tn(1,0,0),0);class Rh{constructor(e=[]){ve(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*xq.length;const n=e.center,i=e.radius;let r=0;for(const s of xq){let o=this.planes[r],a=this.planes[r+1];o||(o=this.planes[r]=new Jv),a||(a=this.planes[r+1]=new Jv);const c=wq.copy(s).scale(-i).add(n);s.dot(c),o.fromPointNormal(c,s);const d=wq.copy(s).scale(i).add(n),h=Jje.copy(s).negate();h.dot(d),a.fromPointNormal(d,h),r+=2}return this}computeVisibility(e){let n=1;for(const i of this.planes)switch(e.intersectPlane(i)){case-1:return-1;case 0:n=0}return n}computeVisibilityWithPlaneMask(e,n){if(qy(Number.isFinite(n),"parentPlaneMask is required."),n===Rh.MASK_OUTSIDE||n===Rh.MASK_INSIDE)return n;let i=Rh.MASK_INSIDE;const r=this.planes;for(let s=0;s<this.planes.length;++s){const o=s<31?1<<s:0;if(s<31&&!(n&o))continue;const c=e.intersectPlane(r[s]);if(-1===c)return Rh.MASK_OUTSIDE;0===c&&(i|=o)}return i}}ve(Rh,"MASK_OUTSIDE",4294967295),ve(Rh,"MASK_INSIDE",0),ve(Rh,"MASK_INDETERMINATE",2147483647),new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn,Math,new da,new da,new da,new da,new da,new tn,new tn,new tn,new tn,new tn,new da,new da,new da;var Aq=g(7659);function G4e(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[lu.ontologyNode.label.id]:"label",[n]:"parent",[lu.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of function*Cje(t,e,n){for(const[i,r]of Object.entries(n))for(const s of dr(t,e,i,null,null)){const o="Literal"===s.object.termType?(0,Hv.fromRdf)(s.object):s.object.id;yield[r,o]}}(t,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=t.getSubjects(n,e,null).map(s=>s.id),i}function Sq(t,e,n,i){const r={root:e,nodes:{}},s=new Set;for(const a of dr(t,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=G4e(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const o=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,Cq(r),r}function Cq(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)Cq(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}g.n(Aq)()(function H4e(t){const e=Sq(t,dq.body.id,"body",lu.asctb.part_of.id);return e.nodes[dq.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");const Iq={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"},aC="Unknown Euler angle order",S_=.99999;var ks=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(ks||{});class es extends JE{static get ZYX(){return ks.ZYX}static get YXZ(){return ks.YXZ}static get XZY(){return ks.XZY}static get ZXY(){return ks.ZXY}static get YZX(){return ks.YZX}static get XYZ(){return ks.XYZ}static get RollPitchYaw(){return ks.ZYX}static get DefaultOrder(){return ks.ZYX}static get RotationOrders(){return ks}static rotationOrder(e){return ks[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=es.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,c=2*(n*i+s*r);let l=-2*(n*r-s*i);l=l>1?1:l,l=l<-1?-1:l;const p=Math.atan2(2*(i*r+s*n),-2*(n*n+o)+1),m=Math.asin(l),v=Math.atan2(c,a);return this.set(p,m,v,es.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function Q4e(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=ui(e)}get y(){return this[1]}set y(e){this[1]=ui(e)}get z(){return this[2]}set z(e){this[2]=ui(e)}get alpha(){return this[0]}set alpha(e){this[0]=ui(e)}get beta(){return this[1]}set beta(e){this[1]=ui(e)}get gamma(){return this[2]}set gamma(e){this[2]=ui(e)}get phi(){return this[0]}set phi(e){this[0]=ui(e)}get theta(){return this[1]}set theta(e){this[1]=ui(e)}get psi(){return this[2]}set psi(e){this[2]=ui(e)}get roll(){return this[0]}set roll(e){this[0]=ui(e)}get pitch(){return this[1]}set pitch(e){this[1]=ui(e)}get yaw(){return this[2]}set yaw(e){this[2]=ui(e)}get order(){return this[3]}set order(e){this[3]=function eUe(t){if(t<0&&t>=6)throw new Error(aC);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,ks.ZYX)}fromRotationMatrix(e,n=es.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new T0;switch(this[4]){case ks.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case ks.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case ks.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case ks.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case ks.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case ks.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(aC)}}_fromRotationMatrix(e,n=es.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(n=n||this[3]){case es.XYZ:this[1]=Math.asin(Or(s,-1,1)),Math.abs(s)<S_?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case es.YXZ:this[0]=Math.asin(-Or(c,-1,1)),Math.abs(c)<S_?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case es.ZXY:this[0]=Math.asin(Or(d,-1,1)),Math.abs(d)<S_?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case es.ZYX:this[1]=Math.asin(-Or(l,-1,1)),Math.abs(l)<S_?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case es.YZX:this[2]=Math.asin(Or(o,-1,1)),Math.abs(o)<S_?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case es.XZY:this[2]=Math.asin(-Or(r,-1,1)),Math.abs(r)<S_?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(aC)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),c=Math.cos(s),l=Math.sin(i),d=Math.sin(r),h=Math.sin(s);switch(this[3]){case es.XYZ:{const p=o*c,m=o*h,v=l*c,R=l*h;n[0]=a*c,n[4]=-a*h,n[8]=d,n[1]=m+v*d,n[5]=p-R*d,n[9]=-l*a,n[2]=R-p*d,n[6]=v+m*d,n[10]=o*a;break}case es.YXZ:{const p=a*c,m=a*h,v=d*c,R=d*h;n[0]=p+R*l,n[4]=v*l-m,n[8]=o*d,n[1]=o*h,n[5]=o*c,n[9]=-l,n[2]=m*l-v,n[6]=R+p*l,n[10]=o*a;break}case es.ZXY:{const p=a*c,m=a*h,v=d*c,R=d*h;n[0]=p-R*l,n[4]=-o*h,n[8]=v+m*l,n[1]=m+v*l,n[5]=o*c,n[9]=R-p*l,n[2]=-o*d,n[6]=l,n[10]=o*a;break}case es.ZYX:{const p=o*c,m=o*h,v=l*c,R=l*h;n[0]=a*c,n[4]=v*d-m,n[8]=p*d+R,n[1]=a*h,n[5]=R*d+p,n[9]=m*d-v,n[2]=-d,n[6]=l*a,n[10]=o*a;break}case es.YZX:{const p=o*a,m=o*d,v=l*a,R=l*d;n[0]=a*c,n[4]=R-p*h,n[8]=v*h+m,n[1]=h,n[5]=o*c,n[9]=-l*c,n[2]=-d*c,n[6]=m*h+v,n[10]=p-R*h;break}case es.XZY:{const p=o*a,m=o*d,v=l*a,R=l*d;n[0]=a*c,n[4]=-h,n[8]=d*c,n[1]=p*h+R,n[5]=o*c,n[9]=m*h-v,n[2]=v*h-m,n[6]=l*c,n[10]=R*h+p;break}default:throw new Error(aC)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new T0(e*r*s-n*i*o,e*i*o+n*r*s,n*i*s-e*r*o,e*i*s+n*r*o)}}const Dq={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let cC;const tUe=new Uint8Array(16);function nUe(){if(!cC&&(cC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cC(tUe)}const eo=[];for(let t=0;t<256;++t)eo.push((t+256).toString(16).slice(1));const rUe=function iUe(t,e,n){if(Dq.randomUUID&&!e&&!t)return Dq.randomUUID();const i=(t=t||{}).random||(t.rng||nUe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function Rq(t,e=0){return(eo[t[e+0]]+eo[t[e+1]]+eo[t[e+2]]+eo[t[e+3]]+"-"+eo[t[e+4]]+eo[t[e+5]]+"-"+eo[t[e+6]]+eo[t[e+7]]+"-"+eo[t[e+8]]+eo[t[e+9]]+"-"+eo[t[e+10]]+eo[t[e+11]]+eo[t[e+12]]+eo[t[e+13]]+eo[t[e+14]]+eo[t[e+15]]).toLowerCase()}(i)};function*lC(t,e,n){for(const[i,r]of Object.entries(n))for(const s of dr(t,e,i,null,null)){const o="Literal"===s.object.termType?(0,Hv.fromRdf)(s.object):s.object.id;yield[r,o]}}function Cp(t,e,n,i){const r={"@id":e,"@type":n};for(const[s,o]of Object.entries(i))for(const a of dr(t,r["@id"],s,null,null)){const c="Literal"===a.object.termType?(0,Hv.fromRdf)(a.object):a.object.id;r[o]=c}return r}const zi=vL({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Ni),Oq={x:zi("rdf"),type:zi("rdf")("type")},sUe_label=(zi("rdfs"),zi("rdfs")("label")),Zt=(zi("rdfs")("comment"),zi("rdfs")("isDefinedBy"),zi("rdfs")("seeAlso"),zi("ccf")),ri={id:zi("ccf")("has_registration_location"),label:zi("rdfs")("label"),description:zi("rdfs")("comment"),link:Zt("url"),sex:Zt("sex"),age:Zt("age"),bmi:Zt("bmi"),Male:Ni.literal("Male"),Female:Ni.literal("Female"),consortiumName:Zt("consortium_name"),providerName:Zt("tissue_provider_name"),providerUUID:Zt("tissue_provider_uuid"),donor:Zt("comes_from"),sections:Zt("subdivided_into_sections"),datasets:Zt("generates_dataset"),sampleType:Zt("sample_type"),TissueBlock:Ni.literal("Tissue Block"),TissueSection:Ni.literal("Tissue Section"),NonStandard:Ni.literal("Non-standard"),sectionCount:Zt("section_count"),sectionSize:Zt("section_size"),sectionUnits:Zt("section_size_unit"),sectionNumber:Zt("section_number"),spatialEntity:Zt("has_registration_location"),ontologyTerms:Zt("has_ontology_term"),cellTypeTerms:Zt("has_cell_type_term"),technology:Zt("technology"),thumbnail:Zt("thumbnail")},hi={x:Zt,base:zi("base"),ontologyNode:{label:Zt("ccf_pref_label"),parent:Zt("ccf_part_of"),children:Zt("ccf_part_of"),rui_rank:Zt("rui_rank"),synonymLabels:Ni.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Zt("ccf_part_of"),ct_is_a:Zt("ccf_ct_isa"),located_in:Zt("ccf_located_in"),characterizes:Zt("ccf_characterizes"),bm_located_in:Zt("ccf_bm_located_in")},spatial:{Female:zi("base")("VHFemale"),Male:zi("base")("VHMale"),BothSexes:zi("base")("VHBothSexes"),FemaleOrgans:zi("base")("VHFemaleOrgans"),MaleOrgans:zi("base")("VHMaleOrgans")},SpatialObjectReference:Zt("spatial_object_reference"),SpatialEntity:Zt("spatial_entity"),SpatialPlacement:Zt("spatial_placement"),spatialObjectReference:{file:Zt("file_url"),file_format:Zt("file_format"),file_subpath:Zt("file_subpath")},extractionSet:{label:zi("rdfs")("label"),rui_rank:Zt("rui_rank")},spatialEntity:{label:zi("rdfs")("label"),description:zi("rdfs")("comment"),creator:zi("dcterms")("creator"),creator_first_name:Zt("creator_first_name"),creator_last_name:Zt("creator_last_name"),creator_orcid:Zt("creator_orcid"),creation_date:zi("dcterms")("created"),updated_date:Zt("updated_date"),ccf_annotations:Zt("collides_with"),representation_of:Zt("representation_of"),reference_organ:Zt("has_reference_organ"),extraction_set_for:Zt("extraction_set_for"),extraction_set:Zt("has_extraction_set"),sex:Zt("organ_owner_sex"),side:Zt("organ_side"),rui_rank:Zt("rui_rank"),slice_thickness:Zt("slice_thickness"),slice_count:Zt("slice_count"),x_dimension:Zt("x_dimension"),y_dimension:Zt("y_dimension"),z_dimension:Zt("z_dimension"),dimension_units:Zt("dimension_unit"),object:Zt("has_object_reference")},spatialPlacement:{source:Zt("placement_for"),target:Zt("placement_relative_to"),placement_date:zi("dcterms")("created"),x_scaling:Zt("x_scaling"),y_scaling:Zt("y_scaling"),z_scaling:Zt("z_scaling"),scaling_units:Zt("scaling_unit"),x_rotation:Zt("x_rotation"),y_rotation:Zt("y_rotation"),z_rotation:Zt("z_rotation"),w_rotation:Zt("theta_rotation"),rotation_order:Zt("rotation_order"),rotation_units:Zt("rotation_unit"),x_translation:Zt("x_translation"),y_translation:Zt("y_translation"),z_translation:Zt("z_translation"),translation_units:Zt("translation_unit")}},si={x:zi("uberon"),body:zi("uberon")("0013702")},oUe={x:zi("cl"),cell:zi("cl")("0000000")},Qv={x:zi("fma")},Yc=(zi("lmha"),{body:si.body,cell:oUe.cell,respiratory_system:si.x("0001004"),colon:si.x("0001155"),left_lung:si.x("0002168"),right_lung:si.x("0002167"),left_bronchus:si.x("0002178"),right_bronchus:si.x("0002177"),kidney:si.x("0002113"),ureter:si.x("0000056"),eye:si.x("0000970"),fallopian_tube:si.x("0003889"),knee:si.x("0001465"),ovary:si.x("0000992"),trachea:si.x("0003126"),aorta:si.x("0000947"),blood:si.x("0000178"),bone_marrow:si.x("0002371"),male_reproductive_system:si.x("0000079"),lymph_node:si.x("0000029"),blood_vasculature:si.x("0004537"),brain:si.x("0000955"),eye_left:si.x("0004548"),eye_right:Qv.x("54449"),fallopian_tube_left:si.x("0001303"),fallopian_tube_right:si.x("0001302"),heart:si.x("0000948"),kidney_left:si.x("0004538"),kidney_right:si.x("0004539"),knee_left:Qv.x("24978"),knee_right:Qv.x("24977"),large_intestine:si.x("0000059"),liver:si.x("0002107"),lungs:si.x("0002048"),mesenteric_lymph_node:si.x("0002509"),ovary_left:Qv.x("7214"),ovary_right:Qv.x("7213"),pancreas:si.x("0001264"),pelvis:si.x("0001270"),prostate_gland:si.x("0002367"),skin:si.x("0002097"),small_intestine:si.x("0002108"),spleen:si.x("0002106"),thymus:si.x("0002370"),ureter_left:si.x("0001223"),ureter_right:si.x("0001222"),urinary_bladder:si.x("0001255"),uterus:si.x("0000995")});function KL(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const dC={spatialObjectReference:KL(hi.spatialObjectReference),spatialEntity:KL(hi.spatialEntity),spatialPlacement:KL(hi.spatialPlacement)};function kq(t,e){const n=Cp(t,e,"ExtractionSet",dC.spatialEntity);return n.extractionSites=$S(t.getSubjects(hi.spatialEntity.extraction_set,e,null).map(i=>Tp(t,i.id)),["rui_rank"]),n}function Tp(t,e){const n=Cp(t,e,"SpatialEntity",dC.spatialEntity);return n.object&&(n.object=function aUe(t,e){return Cp(t,e,"SpatialObjectReference",dC.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,hi.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,ri.spatialEntity,e,null),n}function uUe(t,e){const n=Cp(t,e,"SpatialPlacement",dC.spatialPlacement);return n.source&&(n.source=Tp(t,n.source)),n.target&&(n.target=Tp(t,n.target)),n}const fUe=(WS||Q3e).DirectedGraph;function Pq(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),s=[n.x_rotation,n.y_rotation,n.z_rotation].map(j8),o=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(s).scale(o)}class Nq{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new fUe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},Oq.type,hi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},Oq.type,hi.SpatialEntity,null);const n={};for(const i of dr(e,null,hi.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of dr(e,null,hi.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new Hn(Hn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new Hn(Hn.IDENTITY),s=tje(this.graph,e,n);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&Pq(r,uUe(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=eq(e,"placement[0]",eq(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,n),s&&(s=Pq(s,r))):i&&(s=this.getTransformationMatrix(i,n)),s){const o=(new es).fromRotationMatrix(s,es.XYZ),a=s.getTranslation().map(d=>1e3*d),c=o.toVector3().map(Sae),l=s.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${rUe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class Lq{constructor(e){this.db=e}getSpatialEntity(e){return Tp(this.db.store,e)}getExtractionSets(e){return function cUe(t,e){return $S(t.getSubjects(hi.spatialEntity.extraction_set_for,e,null).map(n=>kq(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return kq(this.db.store,e)}getAnatomicalStructures(e){return function lUe(t,e){return $S(t.getSubjects(hi.spatialEntity.reference_organ,e,null).map(n=>Tp(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function dUe(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(Tp(t,n.subject.id))},null,hi.spatialEntity.reference_organ,null,null),$S(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=hi.spatial.Male.id;break;case"Female":n=hi.spatial.Female.id;break;default:n=hi.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,n,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(hi.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(hi.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(hi.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(hi.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(hi.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===n?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,s,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(o){if(r)o=new Hn(Hn.IDENTITY).rotateX(j8(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);o.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const pUe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function uC(t,e=pUe){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:kh,omit:mUe,set:hC,toNumber:qL}=hq,fC="https://entity.api.hubmapconsortium.org/entities/",Fq=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),gUe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},C_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},JL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class yUe{constructor(e,n="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(Me=>"Donor"===Me.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,C_[e.group_uuid]||(C_[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=C_[e.group_uuid]||e.group_name,p=e.created_by_user_displayname;this["@id"]=fC+e.uuid,this.label=`Registered ${d}, ${p}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const m={},v=[];this.sections=v;const R=[];this.datasets=R;for(const Me of a.filter(Ue=>"Sample"===Ue.entity_type)){const Ue=this.getSection(Me,e,i);m[Me.submission_id]=Ue,v.push(Ue),Ue.section_number=Ue.section_number??v.length}for(const Me of a)if("Dataset"===Me.entity_type){const Ue=this.getDataset(Me,n,i,r),Ze=kh(Me,["ingest_metadata","metadata","tissue_id"]);m[Ze]?m[Ze].datasets?.push(Ue):R.push(Ue)}const L=l??{},Y=`${L.x_dimension} x ${L.y_dimension} x ${L.z_dimension} ${L.dimension_units}`;this.section_count=L.slice_count||v.length;const q=parseFloat((L.slice_thickness||(L.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=q;const pe=L.dimension_units||"millimeter";this.section_units=pe,this.description=`${Y}, ${q} ${pe}, ${this.section_count} Sections`,v.forEach((Me,Ue)=>{Me.description=`${L.x_dimension} x ${L.y_dimension} x ${q} ${pe}, ${q} ${pe}, ${Me.description}`,Me.section_number=Ue+1})}getSection(e,n,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":fC+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${C_[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n="",i="",r){const s=new Date(e.last_modified_timestamp).toLocaleDateString(),o=C_[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,kh(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,n,r)??h,{"@id":fC+e.uuid,"@type":"Dataset",label:`Registered ${s}, ${a}, ${o}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,n,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${n}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=kh(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>Fq.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${n}/${e.uuid}/${s.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const s=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(Fq.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=gUe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,n){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const s=i.match(/age ([0-9]+)/);let o,a;s&&(o=qL(s[1]));for(const p of kh(e,"metadata.organ_donor_data",kh(e,"metadata.living_donor_data",[])))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?o=qL(p.data_value):"Body mass index"===p.preferred_term&&(a=qL(p.data_value));let c="";r&&o&&(c+=`${r}, Age ${o}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=C_[e.group_uuid]||e.group_name;return{"@id":fC+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${n}browse/donor/${e.uuid}`,age:o,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=kh(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?hC(i,["placement","target"],s.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&hC(i,["placement","target"],"Male"===n.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return mUe({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const vUe=1e4,xUe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],wUe={exists:{field:"rui_location"}};function Bq(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??wUe,_source:{includes:xUe}})}function ZL(t,e){return QL.apply(this,arguments)}function QL(){return QL=Lt(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),QL.apply(this,arguments)}function eF(){return eF=Lt(function*(t,e,n){const i=vUe,r=function EUe(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),s=Bq(0,i,n),o=yield ZL(t,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const c=[];for(let h=i;h<a;h+=i)c.push(ZL(t,{method:"POST",headers:r,body:Bq(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...d)}}}),eF.apply(this,arguments)}function tF(){return tF=Lt(function*(t,e,n,i,r="",s=""){let o;if("static"===e?o=yield ZL(t):"search-api"===e&&(o=yield function AUe(t,e,n){return eF.apply(this,arguments)}(t,i,n)),o)return function _Ue(t,e="",n="",i,r=!1){const o={},a=kh(t,"hits.hits",[]).map(l=>kh(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new yUe(l,e,n,i).toJsonLd());for(const l of a){const d=l["@id"];o[d]?o[d].samples.push(l.samples[0]):o[d]=l}const c=Object.values(o);return r&&(function bUe(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===o)&&(r[s].deleteMe=!0,n++)}i.samples=r.filter(s=>!0!==s.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":JL,...l})))),uC(JSON.stringify({"@context":JL,"@graph":c}),JL)}(o,r,s,i);console.warn(`Unable to load ${t} as HuBMAP Data`)}),tF.apply(this,arguments)}function ex(t,e,n){const i=new Set;for(const r of e)for(const s of dr(t,r,n,null,null))i.add(s.object.id);return i}const MUe={[hi.spatialEntity.x_dimension.id]:"x",[hi.spatialEntity.y_dimension.id]:"y",[hi.spatialEntity.z_dimension.id]:"z"};function DUe(t,e,n,i){const r=e.getTransformationMatrix(n,i);let s;if(r){const o=r.getTranslation(),a=function IUe(t,e){const n=Cp(t,e,"Dimensions",MUe);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new es).fromRotationMatrix(r,es.XYZ).toQuaternion().normalize().calculateW();s=(new VL).fromCenterHalfSizeQuaternion(o,a,c)}return s}function RUe(t,e,n,i){const{x:r,y:s,z:o,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of n){const p=DUe(t,e,h,c);p&&p.distanceSquaredTo([r,s,o].map(v=>v/1e3))<=d&&l.add(h)}return l}function tx(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of dr(t,a,ri.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function pC(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of dr(t,a,ri.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function T_(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function iF(t,e,n){const i=new Set;for(const r of n){const s=Ni.namedNode(r);t.forSubjects(T_(e,i),hi.spatialEntity.ccf_annotations,s,null)}return i}function rF(t,e){const n=function WUe(t,e){const n=new Map;for(const i of t)for(const r of dr(e,i,ri.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id).add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const s=n.get(r);for(const o of dr(e,r,hi.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s.forEach(c=>a.add(c))}else i.set(o.object.id,new Set(s))}return i}function KUe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[hi.ontologyNode.label.id]:"label",[n]:"parent",[hi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of lC(t,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=t.getSubjects(n,e,null).map(s=>s.id),i}function Uq(t,e,n,i){const r={root:e,nodes:{}},s=new Set;for(const a of dr(t,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=KUe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const o=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,Vq(r),r}function Vq(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)Vq(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const zq=Aq(function qUe(t){const e=Uq(t,Yc.body.id,"body",hi.asctb.part_of.id);return e.nodes[Yc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function sF(t,e,n,i){return{"@id":`http://purl.org/ccf/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const mC={[ri.label.id]:"label",[ri.description.id]:"description",[ri.link.id]:"link"},QUe={...mC,[ri.providerName.id]:"providerName"},e8e={...mC,[ri.technology.id]:"technology",[ri.thumbnail.id]:"thumbnail"},t8e={...mC,[ri.sampleType.id]:"sampleType",[ri.sectionNumber.id]:"sectionNumber",[ri.datasets.id]:"datasets"},n8e={...mC,[ri.sampleType.id]:"sampleType",[ri.sectionCount.id]:"sectionCount",[ri.sectionSize.id]:"sectionSize",[ri.sectionUnits.id]:"sectionUnits",[ri.donor.id]:"donor",[ri.spatialEntity.id]:"spatialEntityId",[ri.sections.id]:"sections",[ri.datasets.id]:"datasets"};function i8e(t,e){return Cp(t,e,"Donor",QUe)}function Gq(t,e){return Cp(t,e,"Dataset",e8e)}function r8e(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of lC(t,e,t8e))if("datasets"===i){const s=Gq(t,r);n[i].push(s)}else n[i]=r;return n}class o8e{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const n=Date.now();return this.database.connect().then(function(){var i=Lt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-n})}}function oF(){return oF=Lt(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),oF.apply(this,arguments)}const{delMany:u8e,get:Hq,setMany:h8e}=T,f8e={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class p8e{constructor(e=f8e){this.options=e,this.store=new SL(void 0,{factory:Ni}),this.graph=new Nq(this),this.scene=new Lq(this)}connect(e,n=!1){var i=this;return Lt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return Lt(function*(){const n=(new Date).getTime(),i=Z3e(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield Hq(r).catch(()=>{});let a;o&&n-new Date(+o).getTime()>36e5?yield u8e([s,r]).catch(()=>{}):a=yield Hq(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),h8e([[s,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return Lt(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=RL(r,Ni);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=RL(s,Ni))}else r?.length>0&&i.push(r);i.push(yield function d8e(){return oF.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function jq(t,e,n,i){return tF.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(s=>{if(s)return e.addDataSources([s])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return Lt(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var s=Lt(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=uC(o=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield TL(o,r)}else o.endsWith("n3")?yield function Aje(t,e){return DL.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function Eje(t,e){return IL.apply(this,arguments)}(o,r):(o=uC(o),yield TL(o,r));else o=uC(JSON.stringify(o)),yield TL(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return Lt(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function a8e(t){const e=zq(t),n=new Map;for(const{subject:i,object:r}of dr(t,null,hi.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;n.set(i.id,[...s].map(a=>Ni.namedNode(a)))}for(const{object:i}of dr(t,null,ri.spatialEntity,null,null))for(const{subject:r}of dr(t,null,hi.spatialPlacement.source,i,null))for(const{object:s}of dr(t,r,hi.spatialPlacement.target,null,null))for(const o of n.get(s.id)??[])t.addQuad(Ni.namedNode(i.id),hi.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function Sje(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return Lt(function*(){n.store=RL(e,Ni),n.graph=new Nq(n),n.scene=new Lq(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function kUe(t,e,n){let i=function PUe(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),ri.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function GUe(t,e,n=!0){const i=new Set;if(t.forSubjects(T_(e,i),ri.spatialEntity,null,null),!n){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=tx(t,i,s=>function NUe(t,e,n){const i=new Set;return t.forSubjects(T_(e,i),ri.sex,ri[n],null),i}(t,s,r))}if(i.size>0&&n.consortiums?.length>0&&(i=tx(t,i,r=>function LUe(t,e,n){const i=new Set;for(const r of n){const s=Ni.literal(r);t.forSubjects(T_(e,i),ri.consortiumName,s,null)}return i}(t,r,n.consortiums))),i.size>0&&n.tmc?.length>0&&(i=tx(t,i,r=>function FUe(t,e,n){const i=new Set;for(const r of n){const s=Ni.literal(r);t.forSubjects(T_(e,i),ri.providerName,s,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function OUe(t,e,n){const i=new Map,r=new Set,s=new Set(e);for(const c of e)for(const l of dr(t,c,ri.sections,null,null))s.add(l.object.id);for(const c of s)for(const l of dr(t,c,ri.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const o=n(r),a=new Set;for(const c of o)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function BUe(t,e,n){const i=new Set;for(const r of n){const s=Ni.literal(r);t.forSubjects(T_(e,i),ri.technology,s,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=pC(t,i,r=>function HUe(t,e,n,i){const r=new Set;for(const s of i)RUe(t,e,n,s).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(Yc.body.id)&&(i=pC(t,i,s=>iF(t,s,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(Yc.cell.id)&&(i=pC(t,i,s=>function jUe(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,hi.asctb.located_in,null),r===Yc.cell.id&&i.add(Yc.body.id);return iF(t,e,[...i])}(t,s,r)))}if(i.size>0&&n.biomarkerTerms?.length>0){const r=n.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=pC(t,i,s=>function UUe(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,hi.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(Yc.body.id);return iF(t,e,[...i])}(t,s,r)))}if(i.size>0&&2===n.ageRange?.length&&ZS(n.ageRange[0])&&ZS(n.ageRange[1])){const r=Math.max(...n.ageRange),s=Math.min(...n.ageRange);1===s&&110===r||(i=tx(t,i,o=>function VUe(t,e,n,i){const r=new Set;for(const s of e)for(const o of dr(t,s,ri.age,null,null)){const a=(0,Hv.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}if(i.size>0&&2===n.bmiRange?.length&&ZS(n.bmiRange[0])&&ZS(n.bmiRange[1])){const r=Math.max(...n.bmiRange),s=Math.min(...n.bmiRange);13===s&&83===r||(i=tx(t,i,o=>function zUe(t,e,n,i){const r=new Set;for(const s of e)for(const o of dr(t,s,ri.bmi,null,null)){const a=(0,Hv.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Ni.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function hUe(t,e){const n=t.getObjects(Ni.namedNode(e),ri.spatialEntity,null);if(n.length>0)return Tp(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return Lt(function*(){return e.status||(e.status=new o8e(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return Lt(function*(){return function CUe(t){const e=new Set;for(const n of dr(t,null,ri.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return Lt(function*(){return function TUe(t){const e=new Set;for(const n of dr(t,null,ri.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return Lt(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function s8e(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of lC(t,e,n8e))if("sections"===i){const s=r8e(t,r);n[i].push(s)}else if("datasets"===i){const s=Gq(t,r);n[i].push(s)}else n[i]="donor"===i?i8e(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return Lt(function*(){return function SUe(t,e){const n=ex(e,t,ri.donor.id),i=ex(e,n,ri.providerUUID.id),r=new Set;for(const c of t)for(const l of dr(e,c,ri.spatialEntity,null,null))r.add(l.subject.id);const s=ex(e,r,ri.sections.id),o=new Set([...ex(e,r,ri.datasets.id),...ex(e,s,ri.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return Lt(function*(){return function $Ue(t,e){const n={};return rF(t,e).forEach((r,s)=>{n[s]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return Lt(function*(){return function YUe(t,e){const n=rF(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of dr(e,null,hi.asctb.located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o.forEach(d=>l.add(d))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[Yc.cell.id]=n.get(Yc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return Lt(function*(){return function XUe(t,e){const n=rF(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of dr(e,null,hi.asctb.bm_located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o.forEach(d=>l.add(d))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=n.get(Yc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return Lt(function*(){return zq(e.store)})()}getCellTypeTreeModel(){var e=this;return Lt(function*(){return function JUe(t){return Uq(t,Yc.cell.id,"cell",hi.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return Lt(function*(){return function ZUe(t){const e=hi.x("ccf_biomarker_type"),n={biomarkers:sF("biomarkers","Biomarkers","",[])};for(const i of dr(t,null,e,null,null)){const r=i.object.value,s=i.subject.id;n[r]||(n[r]=sF(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(s);const o=sF(s,"",r,[]),a={[hi.ontologyNode.label.id]:"label",[sUe_label.id]:"synonymLabels"};for(const[c,l]of lC(t,s,a))"synonymLabels"===c?l&&l!==o.label&&o.synonymLabels.push(l):o[c]=l;for(const c of Object.values(n))c.children.length>1&&c.children.sort((l,d)=>n[l]?.label.localeCompare(n[d]?.label));n[s]=o}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return Lt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return Lt(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return Lt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return Lt(function*(){return i.graph.getSpatialPlacement(e,n)})()}}function b8e(t,e){return t===e}let y8e=(()=>{var t;class e{constructor(i,r){this.locator=i,this.globalConfig=r,this.subscriptions=new S,this.dataSource=r.getOption("data").pipe(M(s=>({...Iq,dataSources:s})),xi(s=>Object.keys(s).length>0),M(s=>s),Be(b8e),De(s=>function _8e(t,e){return new We(n=>{const i=t(),r=e(i);return(r?Sn(r):fe).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),o=>this.connectDataSource(o.source,s))),zo(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(i){return this.dataSource.pipe(De(r=>r.getTissueBlockResults(i)),vi(1))}getAggregateResults(i){return this.dataSource.pipe(De(r=>r.getAggregateResults(i)),vi(1))}getOntologyTermOccurences(i){return this.dataSource.pipe(De(r=>r.getOntologyTermOccurences(i)),vi(1))}getCellTypeTermOccurences(i){return this.dataSource.pipe(De(r=>r.getCellTypeTermOccurences(i)),vi(1))}getOntologyTreeModel(){return this.dataSource.pipe(De(i=>i.getOntologyTreeModel()),vi(1))}getCellTypeTreeModel(){return this.dataSource.pipe(De(i=>i.getCellTypeTreeModel()),vi(1))}getReferenceOrgans(){return this.dataSource.pipe(De(i=>i.getReferenceOrgans()),vi(1))}getScene(i){return this.dataSource.pipe(De(r=>r.getScene(i)),vi(1))}getOrganScene(i,r){return this.dataSource.pipe(De(s=>s.getReferenceOrganScene(i,r)),vi(1))}createDataSource(){return{source:new p8e,unsubscribe:()=>{}}}connectDataSource(i,r){return Lt(function*(){(new Date).getTime();return yield i.connect(r,!1),i})()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Dy),nt(Gv))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),v8e=(()=>{var t;class e{constructor(i,r){this.configState=i,this.source=r,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(M(s=>`http://purl.org/ccf/1.5/entity/${s}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(M(s=>`http://purl.org/ccf/1.5/entity/${s}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=xo([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(De(([s,o,a])=>this.chooseScene(s,o))),this.organs$=this.configState.getOption("data").pipe(M(s=>this.selectOrgans(s)),zo(1)),this.filteredOrgans$=xo([this.organs$,this.referenceOrgans$]).pipe(M(([s,o])=>this.getNeededReferenceOrgans(o,s)),zo(1)),this.filteredScene$=xo([this.scene$,this.organs$,this.referenceOrgans$]).pipe(M(([s,o,a])=>this.filterSceneNodes(s,o,a)),function W3e(t,e){const n=t.pipe(Na(""));return i=>xo([i,n]).pipe(M(([r,s])=>r.map(o=>function H3e(t,e,n){return t.entityId!==e?t:{...t,color:n}}(o,s,e))))}(this.highlightID$,G3e),function X3e(t){const e=t.pipe(Na(""));return n=>xo([n,e]).pipe(M(([i,r])=>i.map(s=>function $3e(t,e){return t.entityId!==e?t:{...t,zoomToOnLoad:!0}}(s,r))))}(this.zoomToID$),zo(1))}chooseScene(i,r){const s=i?.map(a=>a[QK]?.placement.target)??[];if(new Set(s).size>1)return this.source.getScene();if(r){const a=r.find(c=>c["@id"]===s[0]);if(a)return this.source.getOrganScene(a.representation_of,{ontologyTerms:[a.reference_organ],sex:a.sex})}return Yt([])}selectOrgans(i){const s=(i??[]).map(o=>o[QK].placement.target);return new Set(s)}filterSceneNodes(i,r,s){const o=this.getNeededReferenceOrgans(s,r),a=this.getNeededSkins(o),c=new Set([...r,...a]);return i.filter(d=>!d.reference_organ||c.has(d.reference_organ))}getNeededReferenceOrgans(i,r){return i.filter(s=>r.has(s.reference_organ??""))}getNeededSkins(i){if(1===i.length)return[];const r=new Set;return i.forEach(s=>{"Female"===s.sex?r.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===s.sex&&r.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...r]}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Gv),nt(y8e))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const x8e=["bodyUI"];let w8e=(()=>{var t;class e{constructor(i,r,s){this.configState=i,this.sceneSource=r,this.cdr=s,this.onMouseEnter=new en,this.onMouseLeave=new en,this.onClick=new en,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(_r(o=>this.reset()))}reset(){var i=this;return Lt(function*(){const{bodyUI:r}=i;yield new Promise(a=>setTimeout(a,200));const s=yield function M9(t,e){const n="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;t.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):n?i(e.defaultValue):r(new q0)}})})}(i.organs$.pipe(vi(1))),o=!!r.scene?.find(a=>a.zoomToOnLoad);if(r.rotation=0,r.rotationX=0,!o)if(s&&1===s.length){const{x_dimension:a,y_dimension:c,z_dimension:l}=s[0];r.bounds={x:1.25*a/1e3,y:1.25*c/1e3,z:1.25*l/1e3},r.target=[a/1e3/2,c/1e3/2,l/1e3/2]}else r.bounds={x:2.2,y:2,z:.4},r.target=[0,0,0];i.cdr.detectChanges()})()}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Gv),Ge(v8e),Ge(as))},t.\u0275cmp=$n({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&Zi(x8e,7),2&i){let s;Vn(s=zn())&&(r.bodyUI=s.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:4,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(i,r){1&i&&(Bt(0,"ccf-body-ui",0,1),Pn("nodeClick",function(o){return r.onClick.emit(o)})("nodeHoverStart",function(o){return r.onMouseEnter.emit(o)})("nodeHoverStop",function(o){return r.onMouseLeave.emit(o)}),wa(2,"async"),zt()),2&i&&Gt("scene",Tl(2,2,r.scene$))("interactive",!0)},dependencies:[a3e,Py],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),e})();function E8e(t,e){if(1&t){const n=function Dd(){return At()}();Bt(0,"ccf-root",1),Pn("onMouseEnter",function(r){return ur(n),vr(Nn().onMouseEnter.emit(r))})("onMouseLeave",function(r){return ur(n),vr(Nn().onMouseLeave.emit(r))})("onClick",function(r){return ur(n),vr(Nn().onClick.emit(r))}),zt()}}function A8e(t){return t.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let S8e=(()=>{var t;class e extends Ise{constructor(i,r){super(i,r,{initialDelay:10,initialConfig:{...By_dbOptions,...globalThis.dbOptions},parse:{data:A8e}}),this.onMouseEnter=new en,this.onMouseLeave=new en,this.onClick=new en}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Gv),Ge(as))},t.\u0275cmp=$n({type:t,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[yn],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&vn(0,E8e,1,0,"ccf-root",0),2&i&&Gt("ngIf",r.initialized)},dependencies:[Il,w8e],encapsulation:2,changeDetection:0}),e})();const yC=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class M8e{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=op(this.action),i=function T8e(t){return yC(t.getHours(),2)+":"+yC(t.getMinutes(),2)+":"+yC(t.getSeconds(),2)+"."+yC(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class I8e{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const Wq=new bt("NGXS_LOGGER_PLUGIN_OPTIONS");let D8e=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new I8e(this._options),this._store=this._store||this._injector.get(Xl);const s=new M8e(i,this._store,this._logWriter);return s.dispatched(n),r(n,i).pipe(_r(o=>{s.completed(o)}),cc(o=>{throw s.errored(o),o}))}}return t.\u0275fac=function(n){return new(n||t)(nt(Wq),nt(wr))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();const $q=new bt("LOGGER_USER_OPTIONS");function R8e(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let O8e=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:V9,useClass:D8e,multi:!0},{provide:$q,useValue:n},{provide:Wq,useFactory:R8e,deps:[$q]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({}),t})();const k8e=[Gv];let P8e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({imports:[_Ne.forRoot(),n7.forRoot(k8e,{developmentMode:!1}),O8e.forRoot({disabled:true})]}),e})(),N8e=(()=>{var t;class e{constructor(i){this.injector=i}ngDoBootstrap(){const i=function Cse(t,e){const i=function yse(t,e){return e.get(Et).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new Ese(t,e.injector),s=function bse(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function fse(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(i);class o extends Sse{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=r.create(this.injector||e.injector);i.forEach(({propName:l,transform:d})=>{if(!this.hasOwnProperty(l))return;const h=this[l];delete this[l],c.setInputValue(l,h,d)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,d,h){const[p,m]=s[c];this.ngElementStrategy.setInputValue(p,d,m)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return o.observedAttributes=Object.keys(s),i.forEach(({propName:a,transform:c})=>{Object.defineProperty(o.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),o}(S8e,{injector:this.injector});customElements.define("ccf-body-ui-wc",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(wr))},t.\u0275mod=dn({type:t}),t.\u0275inj=sn({imports:[ose,P8e,c3e]}),e})();rse().bootstrapModule(N8e).catch(t=>console.error(t))},2323:te=>{te.exports=function(g,E){var b=E.length;if(0!==b){var k=g.length;g.length+=b;for(var A=0;A<b;A++)g[k+A]=E[A]}}},3982:te=>{"use strict";const{AbortController:Z,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;te.exports=Z,te.exports.AbortSignal=g,te.exports.default=Z},9919:(te,Z)=>{"use strict";Z.byteLength=function y(S){var $=_(S),X=$[1];return 3*($[0]+X)/4-X},Z.toByteArray=function F(S){var $,x,ce=_(S),X=ce[0],ie=ce[1],ee=new b(function T(S,$,ce){return 3*($+ce)/4-ce}(0,X,ie)),K=0,V=ie>0?X-4:X;for(x=0;x<V;x+=4)$=E[S.charCodeAt(x)]<<18|E[S.charCodeAt(x+1)]<<12|E[S.charCodeAt(x+2)]<<6|E[S.charCodeAt(x+3)],ee[K++]=$>>16&255,ee[K++]=$>>8&255,ee[K++]=255&$;return 2===ie&&($=E[S.charCodeAt(x)]<<2|E[S.charCodeAt(x+1)]>>4,ee[K++]=255&$),1===ie&&($=E[S.charCodeAt(x)]<<10|E[S.charCodeAt(x+1)]<<4|E[S.charCodeAt(x+2)]>>2,ee[K++]=$>>8&255,ee[K++]=255&$),ee},Z.fromByteArray=function se(S){for(var $,ce=S.length,X=ce%3,ie=[],K=0,V=ce-X;K<V;K+=16383)ie.push(U(S,K,K+16383>V?V:K+16383));return 1===X?ie.push(g[($=S[ce-1])>>2]+g[$<<4&63]+"=="):2===X&&ie.push(g[($=(S[ce-2]<<8)+S[ce-1])>>10]+g[$>>4&63]+g[$<<2&63]+"="),ie.join("")};for(var g=[],E=[],b=typeof Uint8Array<"u"?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0;A<64;++A)g[A]=k[A],E[k.charCodeAt(A)]=A;function _(S){var $=S.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ce=S.indexOf("=");return-1===ce&&(ce=$),[ce,ce===$?0:4-ce%4]}function N(S){return g[S>>18&63]+g[S>>12&63]+g[S>>6&63]+g[63&S]}function U(S,$,ce){for(var ie=[],ee=$;ee<ce;ee+=3)ie.push(N((S[ee]<<16&16711680)+(S[ee+1]<<8&65280)+(255&S[ee+2])));return ie.join("")}E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63},1979:(te,Z)=>{"use strict";var E=function(k){return k.typeOfFunction="function",k.boolTrue=!0,k}(E||{});Z.ak=function b(k,A,P){if(!P||typeof P.value!==E.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+A+"> is not a method!");return{configurable:E.boolTrue,get:function(){var _=P.value.bind(this);return Object.defineProperty(this,A,{value:_,configurable:E.boolTrue,writable:E.boolTrue}),_}}}},9007:(te,Z,g)=>{"use strict";var E=g(9919),b=g(2601);Z.Buffer=_,Z.SlowBuffer=function X(H){return+H!=H&&(H=0),_.alloc(+H)},Z.INSPECT_MAX_BYTES=50;var k=2147483647;function P(H){if(H>k)throw new RangeError('The value "'+H+'" is invalid for option "size"');var D=new Uint8Array(H);return D.__proto__=_.prototype,D}function _(H,D,M){if("number"==typeof H){if("string"==typeof D)throw new TypeError('The "string" argument must be of type string. Received type number');return N(H)}return y(H,D,M)}function y(H,D,M){if("string"==typeof H)return function U(H,D){if(("string"!=typeof D||""===D)&&(D="utf8"),!_.isEncoding(D))throw new TypeError("Unknown encoding: "+D);var M=0|ie(H,D),de=P(M),ge=de.write(H,D);return ge!==M&&(de=de.slice(0,ge)),de}(H,D);if(ArrayBuffer.isView(H))return se(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(he(H,ArrayBuffer)||H&&he(H.buffer,ArrayBuffer))return function S(H,D,M){if(D<0||H.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<D+(M||0))throw new RangeError('"length" is outside of buffer bounds');var de;return(de=void 0===D&&void 0===M?new Uint8Array(H):void 0===M?new Uint8Array(H,D):new Uint8Array(H,D,M)).__proto__=_.prototype,de}(H,D,M);if("number"==typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');var de=H.valueOf&&H.valueOf();if(null!=de&&de!==H)return _.from(de,D,M);var ge=function $(H){if(_.isBuffer(H)){var D=0|ce(H.length),M=P(D);return 0===M.length||H.copy(M,0,0,D),M}return void 0!==H.length?"number"!=typeof H.length||Q(H.length)?P(0):se(H):"Buffer"===H.type&&Array.isArray(H.data)?se(H.data):void 0}(H);if(ge)return ge;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof H[Symbol.toPrimitive])return _.from(H[Symbol.toPrimitive]("string"),D,M);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function T(H){if("number"!=typeof H)throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function N(H){return T(H),P(H<0?0:0|ce(H))}function se(H){for(var D=H.length<0?0:0|ce(H.length),M=P(D),de=0;de<D;de+=1)M[de]=255&H[de];return M}function ce(H){if(H>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return 0|H}function ie(H,D){if(_.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||he(H,ArrayBuffer))return H.byteLength;if("string"!=typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var M=H.length,de=arguments.length>2&&!0===arguments[2];if(!de&&0===M)return 0;for(var ge=!1;;)switch(D){case"ascii":case"latin1":case"binary":return M;case"utf8":case"utf-8":return O(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*M;case"hex":return M>>>1;case"base64":return Le(H).length;default:if(ge)return de?-1:O(H).length;D=(""+D).toLowerCase(),ge=!0}}function ee(H,D,M){var de=!1;if((void 0===D||D<0)&&(D=0),D>this.length||((void 0===M||M>this.length)&&(M=this.length),M<=0)||(M>>>=0)<=(D>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return Ne(this,D,M);case"utf8":case"utf-8":return Ie(this,D,M);case"ascii":return Xe(this,D,M);case"latin1":case"binary":return Se(this,D,M);case"base64":return xe(this,D,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,D,M);default:if(de)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),de=!0}}function K(H,D,M){var de=H[D];H[D]=H[M],H[M]=de}function V(H,D,M,de,ge){if(0===H.length)return-1;if("string"==typeof M?(de=M,M=0):M>2147483647?M=2147483647:M<-2147483648&&(M=-2147483648),Q(M=+M)&&(M=ge?0:H.length-1),M<0&&(M=H.length+M),M>=H.length){if(ge)return-1;M=H.length-1}else if(M<0){if(!ge)return-1;M=0}if("string"==typeof D&&(D=_.from(D,de)),_.isBuffer(D))return 0===D.length?-1:x(H,D,M,de,ge);if("number"==typeof D)return D&=255,"function"==typeof Uint8Array.prototype.indexOf?ge?Uint8Array.prototype.indexOf.call(H,D,M):Uint8Array.prototype.lastIndexOf.call(H,D,M):x(H,[D],M,de,ge);throw new TypeError("val must be string, number or Buffer")}function x(H,D,M,de,ge){var _t,ze=1,qe=H.length,ct=D.length;if(void 0!==de&&("ucs2"===(de=String(de).toLowerCase())||"ucs-2"===de||"utf16le"===de||"utf-16le"===de)){if(H.length<2||D.length<2)return-1;ze=2,qe/=2,ct/=2,M/=2}function Dt(J,C){return 1===ze?J[C]:J.readUInt16BE(C*ze)}if(ge){var Ht=-1;for(_t=M;_t<qe;_t++)if(Dt(H,_t)===Dt(D,-1===Ht?0:_t-Ht)){if(-1===Ht&&(Ht=_t),_t-Ht+1===ct)return Ht*ze}else-1!==Ht&&(_t-=_t-Ht),Ht=-1}else for(M+ct>qe&&(M=qe-ct),_t=M;_t>=0;_t--){for(var nn=!0,Oe=0;Oe<ct;Oe++)if(Dt(H,_t+Oe)!==Dt(D,Oe)){nn=!1;break}if(nn)return _t}return-1}function B(H,D,M,de){M=Number(M)||0;var ge=H.length-M;de?(de=Number(de))>ge&&(de=ge):de=ge;var ze=D.length;de>ze/2&&(de=ze/2);for(var qe=0;qe<de;++qe){var ct=parseInt(D.substr(2*qe,2),16);if(Q(ct))return qe;H[M+qe]=ct}return qe}function I(H,D,M,de){return Ye(O(D,H.length-M),H,M,de)}function ue(H,D,M,de){return Ye(function oe(H){for(var D=[],M=0;M<H.length;++M)D.push(255&H.charCodeAt(M));return D}(D),H,M,de)}function W(H,D,M,de){return ue(H,D,M,de)}function Ce(H,D,M,de){return Ye(Le(D),H,M,de)}function le(H,D,M,de){return Ye(function z(H,D){for(var M,de,ze=[],qe=0;qe<H.length&&!((D-=2)<0);++qe)de=(M=H.charCodeAt(qe))>>8,ze.push(M%256),ze.push(de);return ze}(D,H.length-M),H,M,de)}function xe(H,D,M){return E.fromByteArray(0===D&&M===H.length?H:H.slice(D,M))}function Ie(H,D,M){M=Math.min(H.length,M);for(var de=[],ge=D;ge<M;){var Dt,_t,Ht,nn,ze=H[ge],qe=null,ct=ze>239?4:ze>223?3:ze>191?2:1;if(ge+ct<=M)switch(ct){case 1:ze<128&&(qe=ze);break;case 2:128==(192&(Dt=H[ge+1]))&&(nn=(31&ze)<<6|63&Dt)>127&&(qe=nn);break;case 3:_t=H[ge+2],128==(192&(Dt=H[ge+1]))&&128==(192&_t)&&(nn=(15&ze)<<12|(63&Dt)<<6|63&_t)>2047&&(nn<55296||nn>57343)&&(qe=nn);break;case 4:_t=H[ge+2],Ht=H[ge+3],128==(192&(Dt=H[ge+1]))&&128==(192&_t)&&128==(192&Ht)&&(nn=(15&ze)<<18|(63&Dt)<<12|(63&_t)<<6|63&Ht)>65535&&nn<1114112&&(qe=nn)}null===qe?(qe=65533,ct=1):qe>65535&&(de.push((qe-=65536)>>>10&1023|55296),qe=56320|1023&qe),de.push(qe),ge+=ct}return function et(H){var D=H.length;if(D<=Re)return String.fromCharCode.apply(String,H);for(var M="",de=0;de<D;)M+=String.fromCharCode.apply(String,H.slice(de,de+=Re));return M}(de)}Z.kMaxLength=k,!(_.TYPED_ARRAY_SUPPORT=function A(){try{var H=new Uint8Array(1);return H.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===H.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(H,D,M){return y(H,D,M)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(H,D,M){return function F(H,D,M){return T(H),H<=0?P(H):void 0!==D?"string"==typeof M?P(H).fill(D,M):P(H).fill(D):P(H)}(H,D,M)},_.allocUnsafe=function(H){return N(H)},_.allocUnsafeSlow=function(H){return N(H)},_.isBuffer=function(D){return null!=D&&!0===D._isBuffer&&D!==_.prototype},_.compare=function(D,M){if(he(D,Uint8Array)&&(D=_.from(D,D.offset,D.byteLength)),he(M,Uint8Array)&&(M=_.from(M,M.offset,M.byteLength)),!_.isBuffer(D)||!_.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===M)return 0;for(var de=D.length,ge=M.length,ze=0,qe=Math.min(de,ge);ze<qe;++ze)if(D[ze]!==M[ze]){de=D[ze],ge=M[ze];break}return de<ge?-1:ge<de?1:0},_.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(D,M){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(0===D.length)return _.alloc(0);var de;if(void 0===M)for(M=0,de=0;de<D.length;++de)M+=D[de].length;var ge=_.allocUnsafe(M),ze=0;for(de=0;de<D.length;++de){var qe=D[de];if(he(qe,Uint8Array)&&(qe=_.from(qe)),!_.isBuffer(qe))throw new TypeError('"list" argument must be an Array of Buffers');qe.copy(ge,ze),ze+=qe.length}return ge},_.byteLength=ie,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<D;M+=2)K(this,M,M+1);return this},_.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<D;M+=4)K(this,M,M+3),K(this,M+1,M+2);return this},_.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<D;M+=8)K(this,M,M+7),K(this,M+1,M+6),K(this,M+2,M+5),K(this,M+3,M+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var D=this.length;return 0===D?"":0===arguments.length?Ie(this,0,D):ee.apply(this,arguments)},_.prototype.equals=function(D){if(!_.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D||0===_.compare(this,D)},_.prototype.inspect=function(){var D="",M=Z.INSPECT_MAX_BYTES;return D=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(D+=" ... "),"<Buffer "+D+">"},_.prototype.compare=function(D,M,de,ge,ze){if(he(D,Uint8Array)&&(D=_.from(D,D.offset,D.byteLength)),!_.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(void 0===M&&(M=0),void 0===de&&(de=D?D.length:0),void 0===ge&&(ge=0),void 0===ze&&(ze=this.length),M<0||de>D.length||ge<0||ze>this.length)throw new RangeError("out of range index");if(ge>=ze&&M>=de)return 0;if(ge>=ze)return-1;if(M>=de)return 1;if(this===D)return 0;for(var qe=(ze>>>=0)-(ge>>>=0),ct=(de>>>=0)-(M>>>=0),Dt=Math.min(qe,ct),_t=this.slice(ge,ze),Ht=D.slice(M,de),nn=0;nn<Dt;++nn)if(_t[nn]!==Ht[nn]){qe=_t[nn],ct=Ht[nn];break}return qe<ct?-1:ct<qe?1:0},_.prototype.includes=function(D,M,de){return-1!==this.indexOf(D,M,de)},_.prototype.indexOf=function(D,M,de){return V(this,D,M,de,!0)},_.prototype.lastIndexOf=function(D,M,de){return V(this,D,M,de,!1)},_.prototype.write=function(D,M,de,ge){if(void 0===M)ge="utf8",de=this.length,M=0;else if(void 0===de&&"string"==typeof M)ge=M,de=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(de)?(de>>>=0,void 0===ge&&(ge="utf8")):(ge=de,de=void 0)}var ze=this.length-M;if((void 0===de||de>ze)&&(de=ze),D.length>0&&(de<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");for(var qe=!1;;)switch(ge){case"hex":return B(this,D,M,de);case"utf8":case"utf-8":return I(this,D,M,de);case"ascii":return ue(this,D,M,de);case"latin1":case"binary":return W(this,D,M,de);case"base64":return Ce(this,D,M,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,D,M,de);default:if(qe)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),qe=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Re=4096;function Xe(H,D,M){var de="";M=Math.min(H.length,M);for(var ge=D;ge<M;++ge)de+=String.fromCharCode(127&H[ge]);return de}function Se(H,D,M){var de="";M=Math.min(H.length,M);for(var ge=D;ge<M;++ge)de+=String.fromCharCode(H[ge]);return de}function Ne(H,D,M){var de=H.length;(!D||D<0)&&(D=0),(!M||M<0||M>de)&&(M=de);for(var ge="",ze=D;ze<M;++ze)ge+=G(H[ze]);return ge}function ke(H,D,M){for(var de=H.slice(D,M),ge="",ze=0;ze<de.length;ze+=2)ge+=String.fromCharCode(de[ze]+256*de[ze+1]);return ge}function Ve(H,D,M){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+D>M)throw new RangeError("Trying to access beyond buffer length")}function me(H,D,M,de,ge,ze){if(!_.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>ge||D<ze)throw new RangeError('"value" argument is out of bounds');if(M+de>H.length)throw new RangeError("Index out of range")}function Ae(H,D,M,de,ge,ze){if(M+de>H.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("Index out of range")}function Ke(H,D,M,de,ge){return D=+D,M>>>=0,ge||Ae(H,0,M,4),b.write(H,D,M,de,23,4),M+4}function ot(H,D,M,de,ge){return D=+D,M>>>=0,ge||Ae(H,0,M,8),b.write(H,D,M,de,52,8),M+8}_.prototype.slice=function(D,M){var de=this.length;(D=~~D)<0?(D+=de)<0&&(D=0):D>de&&(D=de),(M=void 0===M?de:~~M)<0?(M+=de)<0&&(M=0):M>de&&(M=de),M<D&&(M=D);var ge=this.subarray(D,M);return ge.__proto__=_.prototype,ge},_.prototype.readUIntLE=function(D,M,de){D>>>=0,M>>>=0,de||Ve(D,M,this.length);for(var ge=this[D],ze=1,qe=0;++qe<M&&(ze*=256);)ge+=this[D+qe]*ze;return ge},_.prototype.readUIntBE=function(D,M,de){D>>>=0,M>>>=0,de||Ve(D,M,this.length);for(var ge=this[D+--M],ze=1;M>0&&(ze*=256);)ge+=this[D+--M]*ze;return ge},_.prototype.readUInt8=function(D,M){return D>>>=0,M||Ve(D,1,this.length),this[D]},_.prototype.readUInt16LE=function(D,M){return D>>>=0,M||Ve(D,2,this.length),this[D]|this[D+1]<<8},_.prototype.readUInt16BE=function(D,M){return D>>>=0,M||Ve(D,2,this.length),this[D]<<8|this[D+1]},_.prototype.readUInt32LE=function(D,M){return D>>>=0,M||Ve(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},_.prototype.readUInt32BE=function(D,M){return D>>>=0,M||Ve(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},_.prototype.readIntLE=function(D,M,de){D>>>=0,M>>>=0,de||Ve(D,M,this.length);for(var ge=this[D],ze=1,qe=0;++qe<M&&(ze*=256);)ge+=this[D+qe]*ze;return ge>=(ze*=128)&&(ge-=Math.pow(2,8*M)),ge},_.prototype.readIntBE=function(D,M,de){D>>>=0,M>>>=0,de||Ve(D,M,this.length);for(var ge=M,ze=1,qe=this[D+--ge];ge>0&&(ze*=256);)qe+=this[D+--ge]*ze;return qe>=(ze*=128)&&(qe-=Math.pow(2,8*M)),qe},_.prototype.readInt8=function(D,M){return D>>>=0,M||Ve(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},_.prototype.readInt16LE=function(D,M){D>>>=0,M||Ve(D,2,this.length);var de=this[D]|this[D+1]<<8;return 32768&de?4294901760|de:de},_.prototype.readInt16BE=function(D,M){D>>>=0,M||Ve(D,2,this.length);var de=this[D+1]|this[D]<<8;return 32768&de?4294901760|de:de},_.prototype.readInt32LE=function(D,M){return D>>>=0,M||Ve(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},_.prototype.readInt32BE=function(D,M){return D>>>=0,M||Ve(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},_.prototype.readFloatLE=function(D,M){return D>>>=0,M||Ve(D,4,this.length),b.read(this,D,!0,23,4)},_.prototype.readFloatBE=function(D,M){return D>>>=0,M||Ve(D,4,this.length),b.read(this,D,!1,23,4)},_.prototype.readDoubleLE=function(D,M){return D>>>=0,M||Ve(D,8,this.length),b.read(this,D,!0,52,8)},_.prototype.readDoubleBE=function(D,M){return D>>>=0,M||Ve(D,8,this.length),b.read(this,D,!1,52,8)},_.prototype.writeUIntLE=function(D,M,de,ge){D=+D,M>>>=0,de>>>=0,ge||me(this,D,M,de,Math.pow(2,8*de)-1,0);var qe=1,ct=0;for(this[M]=255&D;++ct<de&&(qe*=256);)this[M+ct]=D/qe&255;return M+de},_.prototype.writeUIntBE=function(D,M,de,ge){D=+D,M>>>=0,de>>>=0,ge||me(this,D,M,de,Math.pow(2,8*de)-1,0);var qe=de-1,ct=1;for(this[M+qe]=255&D;--qe>=0&&(ct*=256);)this[M+qe]=D/ct&255;return M+de},_.prototype.writeUInt8=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,1,255,0),this[M]=255&D,M+1},_.prototype.writeUInt16LE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,2,65535,0),this[M]=255&D,this[M+1]=D>>>8,M+2},_.prototype.writeUInt16BE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,2,65535,0),this[M]=D>>>8,this[M+1]=255&D,M+2},_.prototype.writeUInt32LE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,4,4294967295,0),this[M+3]=D>>>24,this[M+2]=D>>>16,this[M+1]=D>>>8,this[M]=255&D,M+4},_.prototype.writeUInt32BE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,4,4294967295,0),this[M]=D>>>24,this[M+1]=D>>>16,this[M+2]=D>>>8,this[M+3]=255&D,M+4},_.prototype.writeIntLE=function(D,M,de,ge){if(D=+D,M>>>=0,!ge){var ze=Math.pow(2,8*de-1);me(this,D,M,de,ze-1,-ze)}var qe=0,ct=1,Dt=0;for(this[M]=255&D;++qe<de&&(ct*=256);)D<0&&0===Dt&&0!==this[M+qe-1]&&(Dt=1),this[M+qe]=(D/ct>>0)-Dt&255;return M+de},_.prototype.writeIntBE=function(D,M,de,ge){if(D=+D,M>>>=0,!ge){var ze=Math.pow(2,8*de-1);me(this,D,M,de,ze-1,-ze)}var qe=de-1,ct=1,Dt=0;for(this[M+qe]=255&D;--qe>=0&&(ct*=256);)D<0&&0===Dt&&0!==this[M+qe+1]&&(Dt=1),this[M+qe]=(D/ct>>0)-Dt&255;return M+de},_.prototype.writeInt8=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,1,127,-128),D<0&&(D=255+D+1),this[M]=255&D,M+1},_.prototype.writeInt16LE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,2,32767,-32768),this[M]=255&D,this[M+1]=D>>>8,M+2},_.prototype.writeInt16BE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,2,32767,-32768),this[M]=D>>>8,this[M+1]=255&D,M+2},_.prototype.writeInt32LE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,4,2147483647,-2147483648),this[M]=255&D,this[M+1]=D>>>8,this[M+2]=D>>>16,this[M+3]=D>>>24,M+4},_.prototype.writeInt32BE=function(D,M,de){return D=+D,M>>>=0,de||me(this,D,M,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[M]=D>>>24,this[M+1]=D>>>16,this[M+2]=D>>>8,this[M+3]=255&D,M+4},_.prototype.writeFloatLE=function(D,M,de){return Ke(this,D,M,!0,de)},_.prototype.writeFloatBE=function(D,M,de){return Ke(this,D,M,!1,de)},_.prototype.writeDoubleLE=function(D,M,de){return ot(this,D,M,!0,de)},_.prototype.writeDoubleBE=function(D,M,de){return ot(this,D,M,!1,de)},_.prototype.copy=function(D,M,de,ge){if(!_.isBuffer(D))throw new TypeError("argument should be a Buffer");if(de||(de=0),!ge&&0!==ge&&(ge=this.length),M>=D.length&&(M=D.length),M||(M=0),ge>0&&ge<de&&(ge=de),ge===de||0===D.length||0===this.length)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),D.length-M<ge-de&&(ge=D.length-M+de);var ze=ge-de;if(this===D&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(M,de,ge);else if(this===D&&de<M&&M<ge)for(var qe=ze-1;qe>=0;--qe)D[qe+M]=this[qe+de];else Uint8Array.prototype.set.call(D,this.subarray(de,ge),M);return ze},_.prototype.fill=function(D,M,de,ge){if("string"==typeof D){if("string"==typeof M?(ge=M,M=0,de=this.length):"string"==typeof de&&(ge=de,de=this.length),void 0!==ge&&"string"!=typeof ge)throw new TypeError("encoding must be a string");if("string"==typeof ge&&!_.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(1===D.length){var ze=D.charCodeAt(0);("utf8"===ge&&ze<128||"latin1"===ge)&&(D=ze)}}else"number"==typeof D&&(D&=255);if(M<0||this.length<M||this.length<de)throw new RangeError("Out of range index");if(de<=M)return this;var qe;if(M>>>=0,de=void 0===de?this.length:de>>>0,D||(D=0),"number"==typeof D)for(qe=M;qe<de;++qe)this[qe]=D;else{var ct=_.isBuffer(D)?D:_.from(D,ge),Dt=ct.length;if(0===Dt)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(qe=0;qe<de-M;++qe)this[qe+M]=ct[qe%Dt]}return this};var We=/[^+/0-9A-Za-z-_]/g;function G(H){return H<16?"0"+H.toString(16):H.toString(16)}function O(H,D){D=D||1/0;for(var M,de=H.length,ge=null,ze=[],qe=0;qe<de;++qe){if((M=H.charCodeAt(qe))>55295&&M<57344){if(!ge){if(M>56319){(D-=3)>-1&&ze.push(239,191,189);continue}if(qe+1===de){(D-=3)>-1&&ze.push(239,191,189);continue}ge=M;continue}if(M<56320){(D-=3)>-1&&ze.push(239,191,189),ge=M;continue}M=65536+(ge-55296<<10|M-56320)}else ge&&(D-=3)>-1&&ze.push(239,191,189);if(ge=null,M<128){if((D-=1)<0)break;ze.push(M)}else if(M<2048){if((D-=2)<0)break;ze.push(M>>6|192,63&M|128)}else if(M<65536){if((D-=3)<0)break;ze.push(M>>12|224,M>>6&63|128,63&M|128)}else{if(!(M<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;ze.push(M>>18|240,M>>12&63|128,M>>6&63|128,63&M|128)}}return ze}function Le(H){return E.toByteArray(function _e(H){if((H=(H=H.split("=")[0]).trim().replace(We,"")).length<2)return"";for(;H.length%4!=0;)H+="=";return H}(H))}function Ye(H,D,M,de){for(var ge=0;ge<de&&!(ge+M>=D.length||ge>=H.length);++ge)D[ge+M]=H[ge];return ge}function he(H,D){return H instanceof D||null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===D.name}function Q(H){return H!=H}},1563:(te,Z,g)=>{te.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(te,Z,g){"use strict";var E,b,k;typeof window<"u"&&window,b=[g(884)],void 0!==(k="function"==typeof(E=function(A){var P=function(){var y,T={},F=[];function N(W){W||(W=document.documentElement);var Ce=window.getComputedStyle(W,null).fontSize;return parseFloat(Ce)||16}function se(W,Ce){var le=Ce.split(/\d/),xe=le[le.length-1];switch(Ce=parseFloat(Ce),xe){case"px":default:return Ce;case"em":return Ce*N(W);case"rem":return Ce*N();case"vw":return Ce*document.documentElement.clientWidth/100;case"vh":return Ce*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Ie=document.documentElement.clientWidth/100,Re=document.documentElement.clientHeight/100;return Ce*(0,Math["vmin"===xe?"min":"max"])(Ie,Re)}}function S(W,Ce){this.element=W;var le,xe,Ie,Re,et,Xe,Se,Ne,ke=["min-width","min-height","max-width","max-height"];this.call=function(){for(le in Ie=function U(W){if(!W.getBoundingClientRect)return{width:W.offsetWidth,height:W.offsetHeight};var Ce=W.getBoundingClientRect();return{width:Math.round(Ce.width),height:Math.round(Ce.height)}}(this.element),Xe={},T[Ce])T[Ce].hasOwnProperty(le)&&(Re=se(this.element,(xe=T[Ce][le]).value),et="width"===xe.property?Ie.width:Ie.height,Se="","min"===xe.mode&&et>=Re&&(Se+=xe.value),"max"===xe.mode&&et<=Re&&(Se+=xe.value),Xe[Ne=xe.mode+"-"+xe.property]||(Xe[Ne]=""),Se&&-1===(" "+Xe[Ne]+" ").indexOf(" "+Se+" ")&&(Xe[Ne]+=" "+Se));for(var Ve in ke)ke.hasOwnProperty(Ve)&&(Xe[ke[Ve]]?this.element.setAttribute(ke[Ve],Xe[ke[Ve]].substr(1)):this.element.removeAttribute(ke[Ve]))}}function $(W,Ce){W.elementQueriesSetupInformation||(W.elementQueriesSetupInformation=new S(W,Ce)),W.elementQueriesSensor||(W.elementQueriesSensor=new A(W,function(){W.elementQueriesSetupInformation.call()}))}function ce(W,Ce,le,xe){if(typeof T[W]>"u"){T[W]=[];var Ie=F.length;y.innerHTML+="\n"+W+" {animation: 0.1s element-queries;}",y.innerHTML+="\n"+W+" > .resize-sensor {min-width: "+Ie+"px;}",F.push(W)}T[W].push({mode:Ce,property:le,value:xe})}function X(W){var Ce;if(document.querySelectorAll&&(Ce=W?W.querySelectorAll.bind(W):document.querySelectorAll.bind(document)),!Ce&&typeof $$<"u"&&(Ce=$$),!Ce&&typeof jQuery<"u"&&(Ce=jQuery),!Ce)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Ce}function ee(W){var Ce=[],le=[],xe=[],Ie=0,Re=-1,et=[];for(var Xe in W.children)if(W.children.hasOwnProperty(Xe)&&W.children[Xe].tagName&&"img"===W.children[Xe].tagName.toLowerCase()){Ce.push(W.children[Xe]);var Se=W.children[Xe].getAttribute("min-width")||W.children[Xe].getAttribute("data-min-width"),Ne=W.children[Xe].getAttribute("data-src")||W.children[Xe].getAttribute("url");xe.push(Ne),le.push({minWidth:Se}),Se?W.children[Xe].style.display="none":(Ie=Ce.length-1,W.children[Xe].style.display="block")}function Ve(){var Ae,me=!1;for(Ae in Ce)Ce.hasOwnProperty(Ae)&&le[Ae].minWidth&&W.offsetWidth>le[Ae].minWidth&&(me=Ae);if(me||(me=Ie),Re!==me)if(et[me])Ce[Re].style.display="none",Ce[me].style.display="block",Re=me;else{var Ke=new Image;Ke.onload=function(){Ce[me].src=xe[me],Ce[Re].style.display="none",Ce[me].style.display="block",et[me]=!0,Re=me},Ke.src=xe[me]}else Ce[me].src=xe[me]}Re=Ie,W.resizeSensorInstance=new A(W,Ve),Ve()}var V=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,x=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function B(W){var Ce,le,xe,Ie;for(W=W.replace(/'/g,'"');null!==(Ce=V.exec(W));)for(le=Ce[1]+Ce[3],xe=Ce[2];null!==(Ie=x.exec(xe));)ce(le,Ie[1],Ie[2],Ie[3])}function I(W){var Ce="";if(W)if("string"==typeof W)(-1!==(W=W.toLowerCase()).indexOf("min-width")||-1!==W.indexOf("max-width"))&&B(W);else for(var le=0,xe=W.length;le<xe;le++)1===W[le].type?(-1!==(Ce=W[le].selectorText||W[le].cssText).indexOf("min-height")||-1!==Ce.indexOf("max-height")||-1!==Ce.indexOf("min-width")||-1!==Ce.indexOf("max-width"))&&B(Ce):4===W[le].type?I(W[le].cssRules||W[le].rules):3===W[le].type&&W[le].styleSheet.hasOwnProperty("cssRules")&&I(W[le].styleSheet.cssRules)}var ue=!1;this.init=function(){var W="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?W="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?W="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(W="oanimationstart"),document.body.addEventListener(W,function(xe){var Ie=xe.target,Re=Ie&&window.getComputedStyle(Ie,null),et=Re&&Re.getPropertyValue("animation-name");if(et&&-1!==et.indexOf("element-queries")){Ie.elementQueriesSensor=new A(Ie,function(){Ie.elementQueriesSetupInformation&&Ie.elementQueriesSetupInformation.call()});var Ne=window.getComputedStyle(Ie.resizeSensor,null).getPropertyValue("min-width");Ne=parseInt(Ne.replace("px","")),$(xe.target,F[Ne])}}),ue||((y=document.createElement("style")).type="text/css",y.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",y.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(y),ue=!0);for(var Ce=0,le=document.styleSheets.length;Ce<le;Ce++)try{document.styleSheets[Ce].href&&0===document.styleSheets[Ce].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Ce].href),I(document.styleSheets[Ce].cssRules||document.styleSheets[Ce].rules||document.styleSheets[Ce].cssText)}catch{}!function K(){for(var Ce=X()("[data-responsive-image],[responsive-image]"),le=0,xe=Ce.length;le<xe;le++)ee(Ce[le])}()},this.findElementQueriesElements=function(W){!function ie(W){var Ce=X(W);for(var le in T)if(T.hasOwnProperty(le))for(var xe=Ce(le,W),Ie=0,Re=xe.length;Ie<Re;Ie++)$(xe[Ie],le)}(W)},this.update=function(){this.init()}};P.update=function(){P.instance.update()},P.detach=function(y){y.elementQueriesSetupInformation?(y.elementQueriesSensor.detach(),delete y.elementQueriesSetupInformation,delete y.elementQueriesSensor):y.resizeSensorInstance&&(y.resizeSensorInstance.detach(),delete y.resizeSensorInstance)},P.init=function(){P.instance||(P.instance=new P),P.instance.init()};return P.findElementQueriesElements=function(y){P.instance.findElementQueriesElements(y)},P.listen=function(){!function(y){if(document.addEventListener)document.addEventListener("DOMContentLoaded",y,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var T=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(y(),clearInterval(T))},10);else window.onload=y}(P.init)},P})?E.apply(Z,b):E)&&(te.exports=k)},884:function(te,Z,g){"use strict";var E,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(E=function(){if(typeof window>"u")return null;var k=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),A=k.requestAnimationFrame||k.mozRequestAnimationFrame||k.webkitRequestAnimationFrame||function(U){return k.setTimeout(U,20)},P=k.cancelAnimationFrame||k.mozCancelAnimationFrame||k.webkitCancelAnimationFrame||function(U){k.clearTimeout(U)};function _(U,se){var S=Object.prototype.toString.call(U),$="[object Array]"===S||"[object NodeList]"===S||"[object HTMLCollection]"===S||"[object Object]"===S||typeof jQuery<"u"&&U instanceof jQuery||typeof Elements<"u"&&U instanceof Elements,ce=0,X=U.length;if($)for(;ce<X;ce++)se(U[ce]);else se(U)}function y(U){if(!U.getBoundingClientRect)return{width:U.offsetWidth,height:U.offsetHeight};var se=U.getBoundingClientRect();return{width:Math.round(se.width),height:Math.round(se.height)}}function T(U,se){Object.keys(se).forEach(function(S){U.style[S]=se[S]})}var F=function(U,se){var S=0;function $(){var ie,ee,X=[];this.add=function(K){X.push(K)},this.call=function(K){for(ie=0,ee=X.length;ie<ee;ie++)X[ie].call(this,K)},this.remove=function(K){var V=[];for(ie=0,ee=X.length;ie<ee;ie++)X[ie]!==K&&V.push(X[ie]);X=V},this.length=function(){return X.length}}function ce(X,ie){if(X){if(X.resizedAttached)return void X.resizedAttached.add(ie);X.resizedAttached=new $,X.resizedAttached.add(ie),X.resizeSensor=document.createElement("div"),X.resizeSensor.dir="ltr",X.resizeSensor.className="resize-sensor";var ee={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},K={position:"absolute",left:"0px",top:"0px",transition:"0s"};T(X.resizeSensor,ee);var V=document.createElement("div");V.className="resize-sensor-expand",T(V,ee);var x=document.createElement("div");T(x,K),V.appendChild(x);var B=document.createElement("div");B.className="resize-sensor-shrink",T(B,ee);var I=document.createElement("div");T(I,K),T(I,{width:"200%",height:"200%"}),B.appendChild(I),X.resizeSensor.appendChild(V),X.resizeSensor.appendChild(B),X.appendChild(X.resizeSensor);var ue=window.getComputedStyle(X),W=ue?ue.getPropertyValue("position"):null;"absolute"!==W&&"relative"!==W&&"fixed"!==W&&"sticky"!==W&&(X.style.position="relative");var Ce=!1,le=0,xe=y(X),Ie=0,Re=0,et=!0;S=0;var Se=function(){if(et){if(0===X.offsetWidth&&0===X.offsetHeight)return void(S||(S=A(function(){S=0,Se()})));et=!1}var me,Ae;Ae=X.offsetHeight,x.style.width=(me=X.offsetWidth)+10+"px",x.style.height=Ae+10+"px",V.scrollLeft=me+10,V.scrollTop=Ae+10,B.scrollLeft=me+10,B.scrollTop=Ae+10};X.resizeSensor.resetSensor=Se;var Ne=function(){le=0,Ce&&(Ie=xe.width,Re=xe.height,X.resizedAttached&&X.resizedAttached.call(xe))},ke=function(){xe=y(X),(Ce=xe.width!==Ie||xe.height!==Re)&&!le&&(le=A(Ne)),Se()},Ve=function(me,Ae,Ke){me.attachEvent?me.attachEvent("on"+Ae,Ke):me.addEventListener(Ae,Ke)};Ve(V,"scroll",ke),Ve(B,"scroll",ke),S=A(function(){S=0,Se()})}}_(U,function(X){ce(X,se)}),this.detach=function(X){S||(P(S),S=0),F.detach(U,X)},this.reset=function(){U.resizeSensor.resetSensor()}};if(F.reset=function(U){_(U,function(se){se.resizeSensor.resetSensor()})},F.detach=function(U,se){_(U,function(S){S&&(S.resizedAttached&&"function"==typeof se&&(S.resizedAttached.remove(se),S.resizedAttached.length())||S.resizeSensor&&(S.contains(S.resizeSensor)&&S.removeChild(S.resizeSensor),delete S.resizeSensor,delete S.resizedAttached))})},typeof MutationObserver<"u"){var N=new MutationObserver(function(U){for(var se in U)if(U.hasOwnProperty(se))for(var S=U[se].addedNodes,$=0;$<S.length;$++)S[$].resizeSensor&&F.reset(S[$])});document.addEventListener("DOMContentLoaded",function(U){N.observe(document.body,{childList:!0,subtree:!0})})}return F})?E.call(Z,g,Z,te):E)&&(te.exports=b)},2016:te=>{"use strict";var E,Z="object"==typeof Reflect?Reflect:null,g=Z&&"function"==typeof Z.apply?Z.apply:function(V,x,B){return Function.prototype.apply.call(V,x,B)};E=Z&&"function"==typeof Z.ownKeys?Z.ownKeys:Object.getOwnPropertySymbols?function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:function(V){return Object.getOwnPropertyNames(V)};var k=Number.isNaN||function(V){return V!=V};function A(){A.init.call(this)}te.exports=A,te.exports.once=function X(K,V){return new Promise(function(x,B){function I(W){K.removeListener(V,ue),B(W)}function ue(){"function"==typeof K.removeListener&&K.removeListener("error",I),x([].slice.call(arguments))}ee(K,V,ue,{once:!0}),"error"!==V&&function ie(K,V,x){"function"==typeof K.on&&ee(K,"error",V,x)}(K,I,{once:!0})})},A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var P=10;function _(K){if("function"!=typeof K)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof K)}function y(K){return void 0===K._maxListeners?A.defaultMaxListeners:K._maxListeners}function T(K,V,x,B){var I,ue,W;if(_(x),void 0===(ue=K._events)?(ue=K._events=Object.create(null),K._eventsCount=0):(void 0!==ue.newListener&&(K.emit("newListener",V,x.listener?x.listener:x),ue=K._events),W=ue[V]),void 0===W)W=ue[V]=x,++K._eventsCount;else if("function"==typeof W?W=ue[V]=B?[x,W]:[W,x]:B?W.unshift(x):W.push(x),(I=y(K))>0&&W.length>I&&!W.warned){W.warned=!0;var Ce=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ce.name="MaxListenersExceededWarning",Ce.emitter=K,Ce.type=V,Ce.count=W.length,function b(K){console&&console.warn&&console.warn(K)}(Ce)}return K}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(K,V,x){var B={fired:!1,wrapFn:void 0,target:K,type:V,listener:x},I=F.bind(B);return I.listener=x,B.wrapFn=I,I}function U(K,V,x){var B=K._events;if(void 0===B)return[];var I=B[V];return void 0===I?[]:"function"==typeof I?x?[I.listener||I]:[I]:x?function ce(K){for(var V=new Array(K.length),x=0;x<V.length;++x)V[x]=K[x].listener||K[x];return V}(I):S(I,I.length)}function se(K){var V=this._events;if(void 0!==V){var x=V[K];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function S(K,V){for(var x=new Array(V),B=0;B<V;++B)x[B]=K[B];return x}function ee(K,V,x,B){if("function"==typeof K.on)B.once?K.once(V,x):K.on(V,x);else{if("function"!=typeof K.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof K);K.addEventListener(V,function I(ue){B.once&&K.removeEventListener(V,I),x(ue)})}}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return P},set:function(K){if("number"!=typeof K||K<0||k(K))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+K+".");P=K}}),A.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(V){if("number"!=typeof V||V<0||k(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this},A.prototype.getMaxListeners=function(){return y(this)},A.prototype.emit=function(V){for(var x=[],B=1;B<arguments.length;B++)x.push(arguments[B]);var I="error"===V,ue=this._events;if(void 0!==ue)I=I&&void 0===ue.error;else if(!I)return!1;if(I){var W;if(x.length>0&&(W=x[0]),W instanceof Error)throw W;var Ce=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Ce.context=W,Ce}var le=ue[V];if(void 0===le)return!1;if("function"==typeof le)g(le,this,x);else{var xe=le.length,Ie=S(le,xe);for(B=0;B<xe;++B)g(Ie[B],this,x)}return!0},A.prototype.on=A.prototype.addListener=function(V,x){return T(this,V,x,!1)},A.prototype.prependListener=function(V,x){return T(this,V,x,!0)},A.prototype.once=function(V,x){return _(x),this.on(V,N(this,V,x)),this},A.prototype.prependOnceListener=function(V,x){return _(x),this.prependListener(V,N(this,V,x)),this},A.prototype.off=A.prototype.removeListener=function(V,x){var B,I,ue,W,Ce;if(_(x),void 0===(I=this._events))return this;if(void 0===(B=I[V]))return this;if(B===x||B.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete I[V],I.removeListener&&this.emit("removeListener",V,B.listener||x));else if("function"!=typeof B){for(ue=-1,W=B.length-1;W>=0;W--)if(B[W]===x||B[W].listener===x){Ce=B[W].listener,ue=W;break}if(ue<0)return this;0===ue?B.shift():function $(K,V){for(;V+1<K.length;V++)K[V]=K[V+1];K.pop()}(B,ue),1===B.length&&(I[V]=B[0]),void 0!==I.removeListener&&this.emit("removeListener",V,Ce||x)}return this},A.prototype.removeAllListeners=function(V){var x,B,I;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[V]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[V]),this;if(0===arguments.length){var W,ue=Object.keys(B);for(I=0;I<ue.length;++I)"removeListener"!==(W=ue[I])&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=B[V]))this.removeListener(V,x);else if(void 0!==x)for(I=x.length-1;I>=0;I--)this.removeListener(V,x[I]);return this},A.prototype.listeners=function(V){return U(this,V,!0)},A.prototype.rawListeners=function(V){return U(this,V,!1)},A.listenerCount=function(K,V){return"function"==typeof K.listenerCount?K.listenerCount(V):se.call(K,V)},A.prototype.listenerCount=se,A.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]}},7991:(te,Z,g)=>{var E=g(6943),b=g(9151),k=g(2323);function A(U,se,S){if(!E(U))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!U.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');if(!U.hasNode(S))throw new Error('graphology-shortest-path: the "'+S+'" target node does not exist in the given graph.');if((se=""+se)==(S=""+S))return[se];var $=U.inboundNeighbors.bind(U),ce=U.outboundNeighbors.bind(U),X={},ie={};X[se]=null,ie[S]=null;var V,x,B,I,ue,W,Ce,le,ee=[se],K=[S],xe=!1;e:for(;ee.length&&K.length;)if(ee.length<=K.length){for(V=ee,ee=[],ue=0,Ce=V.length;ue<Ce;ue++)for(W=0,le=(B=ce(x=V[ue])).length;W<le;W++)if((I=B[W])in X||(ee.push(I),X[I]=x),I in ie){xe=!0;break e}}else for(V=K,K=[],ue=0,Ce=V.length;ue<Ce;ue++)for(x=V[ue],B=$(x),W=0,le=B.length;W<le;W++)if(I=B[W],I in ie||(K.push(I),ie[I]=x),I in X){xe=!0;break e}if(!xe)return null;for(var Ie=[];I;)Ie.unshift(I),I=X[I];for(I=ie[Ie[Ie.length-1]];I;)Ie.push(I),I=ie[I];return Ie.length?Ie:null}function P(U,se){if(!E(U))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!U.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');var ce,X,ie,ee,K,V,S={},$={};for(S[se=""+se]=!0,$[se]=[se];Object.keys(S).length;)for(ie in ce=S,S={},ce)for(K=0,V=(X=U.outboundNeighbors(ie)).length;K<V;K++)$[ee=X[K]]||($[ee]=$[ie].concat(ee),S[ee]=!0);return $}function _(U,se,S){if(!E(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!se.hasNode(S))throw new Error('graphology-shortest-path: the "'+S+'" source node does not exist in the given graph.');S=""+S;var $=new Set,ce={},X=0;ce[S]=0;for(var ee,K,V,ie=[S];0!==ie.length;){var x=[];for(ee=0,K=ie.length;ee<K;ee++)!$.has(V=ie[ee])&&($.add(V),k(x,se[U](V)),ce[V]=X);X++,ie=x}return ce}var y=_.bind(null,"outboundNeighbors"),T=_.bind(null,"neighbors");function F(U,se,S){return arguments.length<3?P(U,se):A(U,se,S)}F.bidirectional=A,F.singleSource=P,F.singleSourceLength=y,F.undirectedSingleSourceLength=T,F.brandes=function N(U,se){se=""+se;var ie,ee,K,V,x,B,I,ue,W,S=[],$={},ce={},X=U.nodes();for(B=0,ue=X.length;B<ue;B++)$[V=X[B]]=[],ce[V]=0;var Ce={};ce[se]=1,Ce[se]=0;for(var le=b.of(se);le.size;)for(V=le.dequeue(),S.push(V),ie=Ce[V],ee=ce[V],I=0,W=(K=U.outboundNeighbors(V)).length;I<W;I++)(x=K[I])in Ce||(le.enqueue(x),Ce[x]=ie+1),Ce[x]===ie+1&&(ce[x]+=ee,$[x].push(V));return[S,$,ce]},te.exports=F},6943:te=>{te.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(te){te.exports=function(){"use strict";function Z(be){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(be)}function g(be,Te){be.prototype=Object.create(Te.prototype),be.prototype.constructor=be,b(be,Te)}function E(be){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(be)}function b(be,Te){return(b=Object.setPrototypeOf||function(we,j){return we.__proto__=j,we})(be,Te)}function A(be,Te,we){return(A=function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(j,re,fe){var Fe=[null];Fe.push.apply(Fe,re);var $e=new(Function.bind.apply(j,Fe));return fe&&b($e,fe.prototype),$e}).apply(null,arguments)}function P(be){var Te="function"==typeof Map?new Map:void 0;return(P=function(we){if(null===we||-1===Function.toString.call(we).indexOf("[native code]"))return we;if("function"!=typeof we)throw new TypeError("Super expression must either be null or a function");if(void 0!==Te){if(Te.has(we))return Te.get(we);Te.set(we,re)}function re(){return A(we,arguments,E(this).constructor)}return re.prototype=Object.create(we.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),b(re,we)})(be)}function _(be){if(void 0===be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}var y=function(){for(var be=arguments[0],Te=1,we=arguments.length;Te<we;Te++)if(arguments[Te])for(var j in arguments[Te])be[j]=arguments[Te][j];return be};function T(be,Te,we,j){var re=be._nodes.get(Te),fe=null;return re?fe="mixed"===j?re.out&&re.out[we]||re.undirected&&re.undirected[we]:"directed"===j?re.out&&re.out[we]:re.undirected&&re.undirected[we]:fe}function N(be){return"object"===Z(be)&&null!==be&&be.constructor===Object}function U(be){var Te;for(Te in be)return!1;return!0}function se(be,Te,we){Object.defineProperty(be,Te,{enumerable:!1,configurable:!1,writable:!0,value:we})}function S(be,Te,we){var j={enumerable:!0,configurable:!0};"function"==typeof we?j.get=we:(j.value=we,j.writable=!1),Object.defineProperty(be,Te,j)}function $(be){return!(!N(be)||be.attributes&&!Array.isArray(be.attributes))}"function"==typeof Object.assign&&(y=Object.assign);var ce,X={exports:{}},ie="object"==typeof Reflect?Reflect:null,ee=ie&&"function"==typeof ie.apply?ie.apply:function(be,Te,we){return Function.prototype.apply.call(be,Te,we)};ce=ie&&"function"==typeof ie.ownKeys?ie.ownKeys:Object.getOwnPropertySymbols?function(be){return Object.getOwnPropertyNames(be).concat(Object.getOwnPropertySymbols(be))}:function(be){return Object.getOwnPropertyNames(be)};var K=Number.isNaN||function(be){return be!=be};function V(){V.init.call(this)}X.exports=V,X.exports.once=function(be,Te){return new Promise(function(we,j){function re(Fe){be.removeListener(Te,fe),j(Fe)}function fe(){"function"==typeof be.removeListener&&be.removeListener("error",re),we([].slice.call(arguments))}var Fe;Re(be,Te,fe,{once:!0}),"error"!==Te&&("function"==typeof(Fe=be).on&&Re(Fe,"error",re,{once:!0}))})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var x=10;function B(be){if("function"!=typeof be)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof be)}function I(be){return void 0===be._maxListeners?V.defaultMaxListeners:be._maxListeners}function ue(be,Te,we,j){var re,fe,Fe;if(B(we),void 0===(fe=be._events)?(fe=be._events=Object.create(null),be._eventsCount=0):(void 0!==fe.newListener&&(be.emit("newListener",Te,we.listener?we.listener:we),fe=be._events),Fe=fe[Te]),void 0===Fe)Fe=fe[Te]=we,++be._eventsCount;else if("function"==typeof Fe?Fe=fe[Te]=j?[we,Fe]:[Fe,we]:j?Fe.unshift(we):Fe.push(we),(re=I(be))>0&&Fe.length>re&&!Fe.warned){Fe.warned=!0;var rt=new Error("Possible EventEmitter memory leak detected. "+Fe.length+" "+String(Te)+" listeners added. Use emitter.setMaxListeners() to increase limit");rt.name="MaxListenersExceededWarning",rt.emitter=be,rt.type=Te,rt.count=Fe.length,console&&console.warn&&console.warn(rt)}return be}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ce(be,Te,we){var j={fired:!1,wrapFn:void 0,target:be,type:Te,listener:we},re=W.bind(j);return re.listener=we,j.wrapFn=re,re}function le(be,Te,we){var j=be._events;if(void 0===j)return[];var re=j[Te];return void 0===re?[]:"function"==typeof re?we?[re.listener||re]:[re]:we?function(fe){for(var Fe=new Array(fe.length),$e=0;$e<Fe.length;++$e)Fe[$e]=fe[$e].listener||fe[$e];return Fe}(re):Ie(re,re.length)}function xe(be){var Te=this._events;if(void 0!==Te){var we=Te[be];if("function"==typeof we)return 1;if(void 0!==we)return we.length}return 0}function Ie(be,Te){for(var we=new Array(Te),j=0;j<Te;++j)we[j]=be[j];return we}function Re(be,Te,we,j){if("function"==typeof be.on)j.once?be.once(Te,we):be.on(Te,we);else{if("function"!=typeof be.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof be);be.addEventListener(Te,function re(fe){j.once&&be.removeEventListener(Te,re),we(fe)})}}function et(be){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:be}),this.done=!1}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(be){if("number"!=typeof be||be<0||K(be))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+be+".");x=be}}),V.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(be){if("number"!=typeof be||be<0||K(be))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+be+".");return this._maxListeners=be,this},V.prototype.getMaxListeners=function(){return I(this)},V.prototype.emit=function(be){for(var Te=[],we=1;we<arguments.length;we++)Te.push(arguments[we]);var j="error"===be,re=this._events;if(void 0!==re)j=j&&void 0===re.error;else if(!j)return!1;if(j){var fe;if(Te.length>0&&(fe=Te[0]),fe instanceof Error)throw fe;var Fe=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw Fe.context=fe,Fe}var $e=re[be];if(void 0===$e)return!1;if("function"==typeof $e)ee($e,this,Te);else{var rt=$e.length,xt=Ie($e,rt);for(we=0;we<rt;++we)ee(xt[we],this,Te)}return!0},V.prototype.addListener=function(be,Te){return ue(this,be,Te,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(be,Te){return ue(this,be,Te,!0)},V.prototype.once=function(be,Te){return B(Te),this.on(be,Ce(this,be,Te)),this},V.prototype.prependOnceListener=function(be,Te){return B(Te),this.prependListener(be,Ce(this,be,Te)),this},V.prototype.removeListener=function(be,Te){var we,j,re,fe,Fe;if(B(Te),void 0===(j=this._events))return this;if(void 0===(we=j[be]))return this;if(we===Te||we.listener===Te)0==--this._eventsCount?this._events=Object.create(null):(delete j[be],j.removeListener&&this.emit("removeListener",be,we.listener||Te));else if("function"!=typeof we){for(re=-1,fe=we.length-1;fe>=0;fe--)if(we[fe]===Te||we[fe].listener===Te){Fe=we[fe].listener,re=fe;break}if(re<0)return this;0===re?we.shift():function($e,rt){for(;rt+1<$e.length;rt++)$e[rt]=$e[rt+1];$e.pop()}(we,re),1===we.length&&(j[be]=we[0]),void 0!==j.removeListener&&this.emit("removeListener",be,Fe||Te)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(be){var Te,we,j;if(void 0===(we=this._events))return this;if(void 0===we.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==we[be]&&(0==--this._eventsCount?this._events=Object.create(null):delete we[be]),this;if(0===arguments.length){var re,fe=Object.keys(we);for(j=0;j<fe.length;++j)"removeListener"!==(re=fe[j])&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Te=we[be]))this.removeListener(be,Te);else if(void 0!==Te)for(j=Te.length-1;j>=0;j--)this.removeListener(be,Te[j]);return this},V.prototype.listeners=function(be){return le(this,be,!0)},V.prototype.rawListeners=function(be){return le(this,be,!1)},V.listenerCount=function(be,Te){return"function"==typeof be.listenerCount?be.listenerCount(Te):xe.call(be,Te)},V.prototype.listenerCount=xe,V.prototype.eventNames=function(){return this._eventsCount>0?ce(this._events):[]},et.prototype.next=function(){if(this.done)return{done:!0};var be=this._next();return be.done&&(this.done=!0),be},typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=function(){return this}),et.of=function(){var be=arguments,Te=be.length,we=0;return new et(function(){return we>=Te?{done:!0}:{done:!1,value:be[we++]}})},et.empty=function(){var be=new et(null);return be.done=!0,be},et.is=function(be){return be instanceof et||"object"==typeof be&&null!==be&&"function"==typeof be.next};var Xe=et,Se=function(be,Te){for(var we,j=arguments.length>1?Te:1/0,re=j!==1/0?new Array(j):[],fe=0;;){if(fe===j)return re;if((we=be.next()).done)return fe!==Te?re.slice(0,fe):re;re[fe++]=we.value}},Ne=function(be){function Te(we,j){var re;return(re=be.call(this)||this).name="GraphError",re.message=we||"",re.data=j||{},re}return g(Te,be),Te}(P(Error)),ke=function(be){function Te(we,j){var re;return(re=be.call(this,we,j)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(re),Te.prototype.constructor),re}return g(Te,be),Te}(Ne),Ve=function(be){function Te(we,j){var re;return(re=be.call(this,we,j)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(re),Te.prototype.constructor),re}return g(Te,be),Te}(Ne),me=function(be){function Te(we,j){var re;return(re=be.call(this,we,j)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(re),Te.prototype.constructor),re}return g(Te,be),Te}(Ne);function Ae(be,Te){this.key=be,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Ke(be,Te){this.key=be,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function ot(be,Te){this.key=be,this.attributes=Te,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function We(be,Te,we,j,re,fe){this.key=Te,this.attributes=fe,this.undirected=be,this.source=j,this.target=re,this.generatedKey=we}function _e(be,Te,we,j,re,fe,Fe){var $e,rt,xt="out",Tt="in";if(Te&&(xt=Tt="undirected"),be.multi){if(void 0===(rt=($e=fe[xt])[re])&&($e[re]=rt=new Set),rt.add(we),j===re&&Te)return;void 0===($e=Fe[Tt])[j]&&($e[j]=rt)}else{if(fe[xt][re]=we,j===re&&Te)return;Fe[Tt][j]=we}}Ke.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},ot.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var O=[{name:function(be){return"get".concat(be,"Attribute")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+j,$e=""+re;if(re=arguments[2],!(fe=T(this,Fe,$e,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return fe.attributes[re]}}},{name:function(be){return"get".concat(be,"Attributes")},attacher:function(be,Te,we){be.prototype[Te]=function(j){var re;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var fe=""+j,Fe=""+arguments[1];if(!(re=T(this,fe,Fe,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat(fe,'" - "').concat(Fe,'").'))}else if(!(re=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if("mixed"!==we&&re.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return re.attributes}}},{name:function(be){return"has".concat(be,"Attribute")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+j,$e=""+re;if(re=arguments[2],!(fe=T(this,Fe,$e,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return fe.attributes.hasOwnProperty(re)}}},{name:function(be){return"set".concat(be,"Attribute")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re,fe){var Fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+j,rt=""+re;if(re=arguments[2],fe=arguments[3],!(Fe=T(this,$e,rt,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat($e,'" - "').concat(rt,'").'))}else if(!(Fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if("mixed"!==we&&Fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return Fe.attributes[re]=fe,this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:re}),this}}},{name:function(be){return"update".concat(be,"Attribute")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re,fe){var Fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+j,rt=""+re;if(re=arguments[2],fe=arguments[3],!(Fe=T(this,$e,rt,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat($e,'" - "').concat(rt,'").'))}else if(!(Fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if("function"!=typeof fe)throw new ke("Graph.".concat(Te,": updater should be a function."));if("mixed"!==we&&Fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return Fe.attributes[re]=fe(Fe.attributes[re]),this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:re}),this}}},{name:function(be){return"remove".concat(be,"Attribute")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+j,$e=""+re;if(re=arguments[2],!(fe=T(this,Fe,$e,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return delete fe.attributes[re],this.emit("edgeAttributesUpdated",{key:fe.key,type:"remove",attributes:fe.attributes,name:re}),this}}},{name:function(be){return"replace".concat(be,"Attributes")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+j,$e=""+re;if(re=arguments[2],!(fe=T(this,Fe,$e,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if(!N(re))throw new ke("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return fe.attributes=re,this.emit("edgeAttributesUpdated",{key:fe.key,type:"replace",attributes:fe.attributes}),this}}},{name:function(be){return"merge".concat(be,"Attributes")},attacher:function(be,Te,we){be.prototype[Te]=function(j,re){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+j,$e=""+re;if(re=arguments[2],!(fe=T(this,Fe,$e,we)))throw new Ve("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(j=""+j)))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" edge in the graph.'));if(!N(re))throw new ke("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new Ve("Graph.".concat(Te,': could not find the "').concat(j,'" ').concat(we," edge in the graph."));return y(fe.attributes,re),this.emit("edgeAttributesUpdated",{key:fe.key,type:"merge",attributes:fe.attributes,data:re}),this}}}],oe=Xe,z=function(){var be,Te=arguments,we=-1;return new oe(function j(){if(!be){if(++we>=Te.length)return{done:!0};be=Te[we]}var re=be.next();return re.done?(be=null,j()):re})},Le=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ye(be,Te){for(var we in Te)be.push(Te[we].key)}function he(be,Te){for(var we in Te)Te[we].forEach(function(j){return be.push(j.key)})}function Q(be,Te,we){for(var j in be)if(j!==we){var re=be[j];Te(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey)}}function H(be,Te,we){for(var j in be)j!==we&&be[j].forEach(function(re){return Te(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey)})}function D(be,Te,we){for(var j in be)if(j!==we){var re=be[j];if(Te(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey))return!0}return!1}function M(be,Te,we){var j,re,fe,Fe,$e;for(var rt in be)if(rt!==we)for(j=be[rt].values();!0!==(re=j.next()).done;)if(Fe=(fe=re.value).source,Te(fe.key,fe.attributes,Fe.key,($e=fe.target).key,Fe.attributes,$e.attributes,fe.undirected,fe.generatedKey))return!0;return!1}function de(be,Te){var we=Object.keys(be),j=we.length,re=null,fe=0;return new Xe(function Fe(){var $e;if(re){var rt=re.next();if(rt.done)return re=null,fe++,Fe();$e=rt.value}else{if(fe>=j)return{done:!0};var xt=we[fe];if(xt===Te)return fe++,Fe();if(($e=be[xt])instanceof Set)return re=$e.values(),Fe();fe++}return{done:!1,value:[$e.key,$e.attributes,$e.source.key,$e.target.key,$e.source.attributes,$e.target.attributes]}})}function ge(be,Te,we){var j=Te[we];j&&be.push(j.key)}function ze(be,Te,we){var j=Te[we];j&&j.forEach(function(re){return be.push(re.key)})}function qe(be,Te,we){var j=be[Te];if(j){var re=j.source,fe=j.target;we(j.key,j.attributes,re.key,fe.key,re.attributes,fe.attributes,j.undirected,j.generatedKey)}}function ct(be,Te,we){var j=be[Te];j&&j.forEach(function(re){return we(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey)})}function Dt(be,Te,we){var j=be[Te];if(j){var re=j.source,fe=j.target;return we(j.key,j.attributes,re.key,fe.key,re.attributes,fe.attributes,j.undirected,j.generatedKey)}}function _t(be,Te,we){var j=be[Te];if(j){for(var re,fe,Fe=j.values();!0!==(re=Fe.next()).done;)if(we((fe=re.value).key,fe.attributes,fe.source.key,fe.target.key,fe.source.attributes,fe.target.attributes,fe.undirected,fe.generatedKey))return!0;return!1}}function Ht(be,Te){var we=be[Te];if(we instanceof Set){var j=we.values();return new Xe(function(){var re=j.next();if(re.done)return re;var fe=re.value;return{done:!1,value:[fe.key,fe.attributes,fe.source.key,fe.target.key,fe.source.attributes,fe.target.attributes]}})}return Xe.of([we.key,we.attributes,we.source.key,we.target.key,we.source.attributes,we.target.attributes])}var gn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function As(be,Te){if(void 0!==Te)for(var we in Te)be.add(we)}function Ps(be,Te,we){for(var j in Te){var re=Te[j];re instanceof Set&&(re=re.values().next().value);var fe=re.source,$e=fe===be?re.target:fe;we($e.key,$e.attributes)}}function Yi(be,Te,we,j){for(var re in we){var fe=we[re];fe instanceof Set&&(fe=fe.values().next().value);var Fe=fe.source,rt=Fe===Te?fe.target:Fe;be.has(rt.key)||(be.add(rt.key),j(rt.key,rt.attributes))}}function ts(be,Te,we){for(var j in Te){var re=Te[j];re instanceof Set&&(re=re.values().next().value);var fe=re.source,$e=fe===be?re.target:fe;if(we($e.key,$e.attributes))return!0}return!1}function So(be,Te,we,j){for(var re in we){var fe=we[re];fe instanceof Set&&(fe=fe.values().next().value);var Fe=fe.source,rt=Fe===Te?fe.target:Fe;if(!be.has(rt.key)&&(be.add(rt.key),j(rt.key,rt.attributes)))return!0}return!1}function Xo(be,Te){var we=Object.keys(Te),j=we.length,re=0;return new Xe(function(){if(re>=j)return{done:!0};var fe=Te[we[re++]];fe instanceof Set&&(fe=fe.values().next().value);var Fe=fe.source,rt=Fe===be?fe.target:Fe;return{done:!1,value:[rt.key,rt.attributes]}})}function Ns(be,Te,we){var j=Object.keys(we),re=j.length,fe=0;return new Xe(function Fe(){if(fe>=re)return{done:!0};var $e=we[j[fe++]];$e instanceof Set&&($e=$e.values().next().value);var rt=$e.source,Tt=rt===Te?$e.target:rt;return be.has(Tt.key)?Fe():(be.add(Tt.key),{done:!1,value:[Tt.key,Tt.attributes]})})}function Kc(be,Te,we){for(var j,re,fe,Fe,$e,rt,xt,Tt=Te._nodes.values(),Ft=Te.type;!0!==(j=Tt.next()).done;){if(re=j.value,"undirected"!==Ft)for(fe in Fe=re.out)if(rt=($e=Fe[fe]).target,xt=we(re.key,rt.key,re.attributes,rt.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),be&&xt)return;if("directed"!==Ft)for(fe in Fe=re.undirected)if((rt=($e=Fe[fe]).target).key!==fe&&(rt=$e.source),xt=we(re.key,rt.key,re.attributes,rt.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),be&&xt)return}}function qc(be,Te,we){for(var j,re,fe,Fe,$e,rt,xt,Tt,Ft,rn=Te._nodes.values(),bn=Te.type;!0!==(j=rn.next()).done;){if(re=j.value,"undirected"!==bn)for(fe in rt=re.out)for(Fe=rt[fe].values();!0!==($e=Fe.next()).done;)if(Tt=(xt=$e.value).target,Ft=we(re.key,Tt.key,re.attributes,Tt.attributes,xt.key,xt.attributes,xt.undirected,xt.generatedKey),be&&Ft)return;if("directed"!==bn)for(fe in rt=re.undirected)for(Fe=rt[fe].values();!0!==($e=Fe.next()).done;)if((Tt=(xt=$e.value).target).key!==fe&&(Tt=xt.source),Ft=we(re.key,Tt.key,re.attributes,Tt.attributes,xt.key,xt.attributes,xt.undirected,xt.generatedKey),be&&Ft)return}}function Ba(be,Te){var we={key:be};return U(Te.attributes)||(we.attributes=y({},Te.attributes)),we}function Ql(be,Te){var we={source:Te.source.key,target:Te.target.key};return Te.generatedKey||(we.key=be),U(Te.attributes)||(we.attributes=y({},Te.attributes)),Te.undirected&&(we.undirected=!0),we}var gu=new Set(["directed","undirected","mixed"]),td=new Set(["domain","_events","_eventsCount","_maxListeners"]),_u={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Zc(be,Te,we){var j=new be.NodeDataClass(Te,we);return be._nodes.set(Te,j),be.emit("nodeAdded",{key:Te,attributes:we}),j}function nd(be,Te,we,j,re,fe,Fe,$e){if(!j&&"undirected"===be.type)throw new me("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(j&&"directed"===be.type)throw new me("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e&&!N($e))throw new ke("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat($e,'"'));if(fe=""+fe,Fe=""+Fe,$e=$e||{},!be.allowSelfLoops&&fe===Fe)throw new me("Graph.".concat(Te,': source & target are the same ("').concat(fe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var rt=be._nodes.get(fe),xt=be._nodes.get(Fe);if(!rt)throw new Ve("Graph.".concat(Te,': source node "').concat(fe,'" not found.'));if(!xt)throw new Ve("Graph.".concat(Te,': target node "').concat(Fe,'" not found.'));var Tt={key:null,undirected:j,source:fe,target:Fe,attributes:$e};if(we&&(re=be._edgeKeyGenerator(Tt)),be._edges.has(re=""+re))throw new me("Graph.".concat(Te,': the "').concat(re,'" edge already exists in the graph.'));if(!be.multi&&(j?void 0!==rt.undirected[Fe]:void 0!==rt.out[Fe]))throw new me("Graph.".concat(Te,': an edge linking "').concat(fe,'" to "').concat(Fe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Ft=new We(j,re,we,rt,xt,$e);return be._edges.set(re,Ft),fe===Fe?j?(rt.undirectedSelfLoops++,be._undirectedSelfLoopCount++):(rt.directedSelfLoops++,be._directedSelfLoopCount++):j?(rt.undirectedDegree++,xt.undirectedDegree++):(rt.outDegree++,xt.inDegree++),_e(be,j,Ft,fe,Fe,rt,xt),j?be._undirectedSize++:be._directedSize++,Tt.key=re,be.emit("edgeAdded",Tt),re}function Qc(be,Te,we,j,re,fe,Fe,$e,rt){if(!j&&"undirected"===be.type)throw new me("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(j&&"directed"===be.type)throw new me("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e)if(rt){if("function"!=typeof $e)throw new ke("Graph.".concat(Te,': invalid updater function. Expecting a function but got "').concat($e,'"'))}else if(!N($e))throw new ke("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat($e,'"'));var xt;if(fe=""+fe,Fe=""+Fe,rt&&(xt=$e,$e=void 0),!be.allowSelfLoops&&fe===Fe)throw new me("Graph.".concat(Te,': source & target are the same ("').concat(fe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Tt,Ft,rn=be._nodes.get(fe),bn=be._nodes.get(Fe);if(!we&&(Tt=be._edges.get(re))){if(Tt.source.key!==fe||Tt.target.key!==Fe||j&&(Tt.source.key!==Fe||Tt.target.key!==fe))throw new me("Graph.".concat(Te,': inconsistency detected when attempting to merge the "').concat(re,'" edge with "').concat(fe,'" source & "').concat(Fe,'" target vs. ("').concat(Tt.source.key,'", "').concat(Tt.target.key,'").'));Ft=Tt}if(Ft||be.multi||!rn||(Ft=j?rn.undirected[Fe]:rn.out[Fe]),Ft)return(rt?xt:$e)?(rt?(Ft.attributes=xt(Ft.attributes),be.emit("edgeAttributesUpdated",{type:"replace",key:Ft.key,attributes:Ft.attributes})):(y(Ft.attributes,$e),be.emit("edgeAttributesUpdated",{type:"merge",key:Ft.key,attributes:Ft.attributes,data:$e})),Ft.key):Ft.key;$e=$e||{},rt&&xt&&($e=xt($e));var Pr={key:null,undirected:j,source:fe,target:Fe,attributes:$e};if(we&&(re=be._edgeKeyGenerator(Pr)),be._edges.has(re=""+re))throw new me("Graph.".concat(Te,': the "').concat(re,'" edge already exists in the graph.'));return rn||(rn=Zc(be,fe,{}),fe===Fe&&(bn=rn)),bn||(bn=Zc(be,Fe,{})),Tt=new We(j,re,we,rn,bn,$e),be._edges.set(re,Tt),fe===Fe?j?(rn.undirectedSelfLoops++,be._undirectedSelfLoopCount++):(rn.directedSelfLoops++,be._directedSelfLoopCount++):j?(rn.undirectedDegree++,bn.undirectedDegree++):(rn.outDegree++,bn.inDegree++),_e(be,j,Tt,fe,Fe,rn,bn),j?be._undirectedSize++:be._directedSize++,Pr.key=re,be.emit("edgeAdded",Pr),re}var be,Sn=function(be){function Te(j){var re;if(re=be.call(this)||this,(j=y({},_u,j)).edgeKeyGenerator&&"function"!=typeof j.edgeKeyGenerator)throw new ke("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(j.edgeKeyGenerator,'".'));if("boolean"!=typeof j.multi)throw new ke("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(j.multi,'".'));if(!gu.has(j.type))throw new ke('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(j.type,'".'));if("boolean"!=typeof j.allowSelfLoops)throw new ke("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(j.allowSelfLoops,'".'));var fe,Fe="mixed"===j.type?Ae:"directed"===j.type?Ke:ot;return se(_(re),"NodeDataClass",Fe),se(_(re),"_attributes",{}),se(_(re),"_nodes",new Map),se(_(re),"_edges",new Map),se(_(re),"_directedSize",0),se(_(re),"_undirectedSize",0),se(_(re),"_directedSelfLoopCount",0),se(_(re),"_undirectedSelfLoopCount",0),se(_(re),"_edgeKeyGenerator",j.edgeKeyGenerator||(fe=0,function(){return fe++})),se(_(re),"_options",j),td.forEach(function($e){return se(_(re),$e,re[$e])}),S(_(re),"order",function(){return re._nodes.size}),S(_(re),"size",function(){return re._edges.size}),S(_(re),"directedSize",function(){return re._directedSize}),S(_(re),"undirectedSize",function(){return re._undirectedSize}),S(_(re),"selfLoopCount",function(){return re._directedSelfLoopCount+re._undirectedSelfLoopCount}),S(_(re),"directedSelfLoopCount",function(){return re._directedSelfLoopCount}),S(_(re),"undirectedSelfLoopCount",function(){return re._undirectedSelfLoopCount}),S(_(re),"multi",re._options.multi),S(_(re),"type",re._options.type),S(_(re),"allowSelfLoops",re._options.allowSelfLoops),S(_(re),"implementation",function(){return"graphology"}),re}g(Te,be);var we=Te.prototype;return we.hasNode=function(j){return this._nodes.has(""+j)},we.hasDirectedEdge=function(j,re){if("undirected"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+j);return!!Fe&&!Fe.undirected}if(2===arguments.length){re=""+re;var $e=this._nodes.get(j=""+j);if(!$e)return!1;var rt=$e.out[re];return!(!rt||this.multi&&!rt.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},we.hasUndirectedEdge=function(j,re){if("directed"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+j);return!!Fe&&Fe.undirected}if(2===arguments.length){re=""+re;var $e=this._nodes.get(j=""+j);if(!$e)return!1;var rt=$e.undirected[re];return!(!rt||this.multi&&!rt.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},we.hasEdge=function(j,re){if(1===arguments.length)return this._edges.has(""+j);if(2===arguments.length){re=""+re;var Fe=this._nodes.get(j=""+j);if(!Fe)return!1;var $e=void 0!==Fe.out&&Fe.out[re];return $e||($e=void 0!==Fe.undirected&&Fe.undirected[re]),!(!$e||this.multi&&!$e.size)}throw new ke("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},we.directedEdge=function(j,re){if("undirected"!==this.type){if(j=""+j,re=""+re,this.multi)throw new me("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var fe=this._nodes.get(j);if(!fe)throw new Ve('Graph.directedEdge: could not find the "'.concat(j,'" source node in the graph.'));if(!this._nodes.has(re))throw new Ve('Graph.directedEdge: could not find the "'.concat(re,'" target node in the graph.'));var Fe=fe.out&&fe.out[re]||void 0;return Fe?Fe.key:void 0}},we.undirectedEdge=function(j,re){if("directed"!==this.type){if(j=""+j,re=""+re,this.multi)throw new me("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var fe=this._nodes.get(j);if(!fe)throw new Ve('Graph.undirectedEdge: could not find the "'.concat(j,'" source node in the graph.'));if(!this._nodes.has(re))throw new Ve('Graph.undirectedEdge: could not find the "'.concat(re,'" target node in the graph.'));var Fe=fe.undirected&&fe.undirected[re]||void 0;return Fe?Fe.key:void 0}},we.edge=function(j,re){if(this.multi)throw new me("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");re=""+re;var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.edge: could not find the "'.concat(j,'" source node in the graph.'));if(!this._nodes.has(re))throw new Ve('Graph.edge: could not find the "'.concat(re,'" target node in the graph.'));var Fe=fe.out&&fe.out[re]||fe.undirected&&fe.undirected[re]||void 0;if(Fe)return Fe.key},we.inDegree=function(j){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new ke('Graph.inDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.inDegree: could not find the "'.concat(j,'" node in the graph.'));return"undirected"===this.type?0:fe.inDegree+(re?fe.directedSelfLoops:0)},we.outDegree=function(j){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new ke('Graph.outDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.outDegree: could not find the "'.concat(j,'" node in the graph.'));return"undirected"===this.type?0:fe.outDegree+(re?fe.directedSelfLoops:0)},we.directedDegree=function(j){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new ke('Graph.directedDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.directedDegree: could not find the "'.concat(j,'" node in the graph.'));if("undirected"===this.type)return 0;var Fe=re?fe.directedSelfLoops:0;return fe.inDegree+Fe+(fe.outDegree+Fe)},we.undirectedDegree=function(j){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new ke('Graph.undirectedDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.undirectedDegree: could not find the "'.concat(j,'" node in the graph.'));return"directed"===this.type?0:fe.undirectedDegree+2*(re?fe.undirectedSelfLoops:0)},we.degree=function(j){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new ke('Graph.degree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.degree: could not find the "'.concat(j,'" node in the graph.'));var Fe=0,$e=0;return"directed"!==this.type&&(re&&($e=fe.undirectedSelfLoops),Fe+=fe.undirectedDegree+2*$e),"undirected"!==this.type&&(re&&($e=fe.directedSelfLoops),Fe+=fe.inDegree+fe.outDegree+2*$e),Fe},we.source=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.source: could not find the "'.concat(j,'" edge in the graph.'));return re.source.key},we.target=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.target: could not find the "'.concat(j,'" edge in the graph.'));return re.target.key},we.extremities=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.extremities: could not find the "'.concat(j,'" edge in the graph.'));return[re.source.key,re.target.key]},we.opposite=function(j,re){j=""+j;var fe=this._edges.get(re=""+re);if(!fe)throw new Ve('Graph.opposite: could not find the "'.concat(re,'" edge in the graph.'));var Fe=fe.source.key,$e=fe.target.key;if(j!==Fe&&j!==$e)throw new Ve('Graph.opposite: the "'.concat(j,'" node is not attached to the "').concat(re,'" edge (').concat(Fe,", ").concat($e,")."));return j===Fe?$e:Fe},we.hasExtremity=function(j,re){re=""+re;var fe=this._edges.get(j=""+j);if(!fe)throw new Ve('Graph.hasExtremity: could not find the "'.concat(j,'" edge in the graph.'));return fe.source.key===re||fe.target.key===re},we.isUndirected=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.isUndirected: could not find the "'.concat(j,'" edge in the graph.'));return re.undirected},we.isDirected=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.isDirected: could not find the "'.concat(j,'" edge in the graph.'));return!re.undirected},we.isSelfLoop=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.isSelfLoop: could not find the "'.concat(j,'" edge in the graph.'));return re.source===re.target},we.hasGeneratedKey=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.hasGeneratedKey: could not find the "'.concat(j,'" edge in the graph.'));return re.generatedKey},we.addNode=function(j,re){return function(fe,Fe,$e){if($e&&!N($e))throw new ke('Graph.addNode: invalid attributes. Expecting an object but got "'.concat($e,'"'));if($e=$e||{},fe._nodes.has(Fe=""+Fe))throw new me('Graph.addNode: the "'.concat(Fe,'" node already exist in the graph.'));var rt=new fe.NodeDataClass(Fe,$e);return fe._nodes.set(Fe,rt),fe.emit("nodeAdded",{key:Fe,attributes:$e}),rt}(this,j,re).key},we.mergeNode=function(j,re){if(re&&!N(re))throw new ke('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(re,'"'));re=re||{};var fe=this._nodes.get(j=""+j);return fe?(re&&(y(fe.attributes,re),this.emit("nodeAttributesUpdated",{type:"merge",key:j,attributes:fe.attributes,data:re})),j):(fe=new this.NodeDataClass(j,re),this._nodes.set(j,fe),this.emit("nodeAdded",{key:j,attributes:re}),j)},we.updateNode=function(j,re){if(re&&"function"!=typeof re)throw new ke('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(re,'"'));var fe=this._nodes.get(j=""+j);if(fe)return re&&(fe.attributes=re(fe.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:j,attributes:fe.attributes})),j;var $e=re?re({}):{};return fe=new this.NodeDataClass(j,$e),this._nodes.set(j,fe),this.emit("nodeAdded",{key:j,attributes:$e}),j},we.dropNode=function(j){var re=this,fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.dropNode: could not find the "'.concat(j,'" node in the graph.'));this.forEachEdge(j,function(Fe){re.dropEdge(Fe)}),this._nodes.delete(j),this.emit("nodeDropped",{key:j,attributes:fe.attributes})},we.dropEdge=function(j){var re;if(arguments.length>1){var fe=""+arguments[0],Fe=""+arguments[1];if(!(re=T(this,fe,Fe,this.type)))throw new Ve('Graph.dropEdge: could not find the "'.concat(fe,'" -> "').concat(Fe,'" edge in the graph.'))}else if(!(re=this._edges.get(j=""+j)))throw new Ve('Graph.dropEdge: could not find the "'.concat(j,'" edge in the graph.'));this._edges.delete(re.key);var rt=re.source,xt=re.target,Tt=re.attributes,Ft=re.undirected;return rt===xt?Ft?(rt.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(rt.directedSelfLoops--,this._directedSelfLoopCount--):Ft?(rt.undirectedDegree--,xt.undirectedDegree--):(rt.outDegree--,xt.inDegree--),function G(be,Te,we){var j=be.multi,re=we.source,fe=we.target,Fe=re.key,$e=fe.key,rt=re[Te?"undirected":"out"],xt=Te?"undirected":"in";if($e in rt)if(j){var Tt=rt[$e];1===Tt.size?(delete rt[$e],delete fe[xt][Fe]):Tt.delete(we)}else delete rt[$e];j||delete fe[xt][Fe]}(this,Ft,re),Ft?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:j,attributes:Tt,source:rt.key,target:xt.key,undirected:Ft}),this},we.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},we.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},we.getAttribute=function(j){return this._attributes[j]},we.getAttributes=function(){return this._attributes},we.hasAttribute=function(j){return this._attributes.hasOwnProperty(j)},we.setAttribute=function(j,re){return this._attributes[j]=re,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:j}),this},we.updateAttribute=function(j,re){if("function"!=typeof re)throw new ke("Graph.updateAttribute: updater should be a function.");return this._attributes[j]=re(this._attributes[j]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:j}),this},we.removeAttribute=function(j){return delete this._attributes[j],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:j}),this},we.replaceAttributes=function(j){if(!N(j))throw new ke("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=j,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},we.mergeAttributes=function(j){if(!N(j))throw new ke("Graph.mergeAttributes: provided attributes are not a plain object.");return y(this._attributes,j),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:j}),this},we.getNodeAttribute=function(j,re){var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.getNodeAttribute: could not find the "'.concat(j,'" node in the graph.'));return fe.attributes[re]},we.getNodeAttributes=function(j){var re=this._nodes.get(j=""+j);if(!re)throw new Ve('Graph.getNodeAttributes: could not find the "'.concat(j,'" node in the graph.'));return re.attributes},we.hasNodeAttribute=function(j,re){var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.hasNodeAttribute: could not find the "'.concat(j,'" node in the graph.'));return fe.attributes.hasOwnProperty(re)},we.setNodeAttribute=function(j,re,fe){var Fe=this._nodes.get(j=""+j);if(!Fe)throw new Ve('Graph.setNodeAttribute: could not find the "'.concat(j,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Fe.attributes[re]=fe,this.emit("nodeAttributesUpdated",{key:j,type:"set",attributes:Fe.attributes,name:re}),this},we.updateNodeAttribute=function(j,re,fe){var Fe=this._nodes.get(j=""+j);if(!Fe)throw new Ve('Graph.updateNodeAttribute: could not find the "'.concat(j,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof fe)throw new ke("Graph.updateAttribute: updater should be a function.");var $e=Fe.attributes,rt=fe($e[re]);return $e[re]=rt,this.emit("nodeAttributesUpdated",{key:j,type:"set",attributes:Fe.attributes,name:re}),this},we.removeNodeAttribute=function(j,re){var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.hasNodeAttribute: could not find the "'.concat(j,'" node in the graph.'));return delete fe.attributes[re],this.emit("nodeAttributesUpdated",{key:j,type:"remove",attributes:fe.attributes,name:re}),this},we.replaceNodeAttributes=function(j,re){var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.replaceNodeAttributes: could not find the "'.concat(j,'" node in the graph.'));if(!N(re))throw new ke("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return fe.attributes=re,this.emit("nodeAttributesUpdated",{key:j,type:"replace",attributes:fe.attributes}),this},we.mergeNodeAttributes=function(j,re){var fe=this._nodes.get(j=""+j);if(!fe)throw new Ve('Graph.mergeNodeAttributes: could not find the "'.concat(j,'" node in the graph.'));if(!N(re))throw new ke("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return y(fe.attributes,re),this.emit("nodeAttributesUpdated",{key:j,type:"merge",attributes:fe.attributes,data:re}),this},we.updateEachNodeAttributes=function(j,re){if("function"!=typeof j)throw new ke("Graph.updateEachNodeAttributes: expecting an updater function.");if(re&&!$(re))throw new ke("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var fe,Fe,$e=this._nodes.values();!0!==(fe=$e.next()).done;)(Fe=fe.value).attributes=j(Fe.key,Fe.attributes);this.emit("eachNodeAttributesUpdated",{hints:re||null})},we.updateEachEdgeAttributes=function(j,re){if("function"!=typeof j)throw new ke("Graph.updateEachEdgeAttributes: expecting an updater function.");if(re&&!$(re))throw new ke("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var fe,Fe,$e=this._edges.values();!0!==(fe=$e.next()).done;)(Fe=fe.value).attributes=j(Fe.key,Fe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:re||null})},we.forEach=function(j){if("function"!=typeof j)throw new ke("Graph.forEach: expecting a callback.");this.multi?qc(!1,this,j):Kc(!1,this,j)},we.forEachUntil=function(j){if("function"!=typeof j)throw new ke("Graph.forEach: expecting a callback.");this.multi?qc(!0,this,j):Kc(!0,this,j)},we.adjacency=function(){return this.multi?(rt=(j=this)._nodes.values(),xt=j.type,Tt="outer",Ft=null,new Xe(function rn(){var bn;if("outer"===Tt)return!0===(bn=rt.next()).done?bn:(re=bn.value,Tt="directed",rn());if("directed"===Tt)return"undirected"===xt?(Tt="undirected",rn()):(Fe=re.out,fe=Object.keys(re.out),$e=0,Tt="inner-directed",rn());if("undirected"===Tt){if("directed"===xt)return Tt="outer",rn();Fe=re.undirected,fe=Object.keys(re.undirected),$e=0,Tt="inner-undirected"}if(!Ft&&$e>=fe.length)return Tt="inner-undirected"===Tt?"outer":"undirected",rn();if(!Ft){var fs=fe[$e++];return Ft=Fe[fs].values(),rn()}if((bn=Ft.next()).done)return Ft=null,rn();var Pr=bn.value,Fs=Pr.target;return"inner-undirected"===Tt&&Fs.key===re.key&&(Fs=Pr.source),{done:!1,value:[re.key,Fs.key,re.attributes,Fs.attributes,Pr.key,Pr.attributes]}})):(tl=(rn=this)._nodes.values(),ha=rn.type,Nr="outer",new Xe(function Bs(){var nl;if("outer"===Nr)return!0===(nl=tl.next()).done?nl:(bn=nl.value,Nr="directed",Bs());if("directed"===Nr)return"undirected"===ha?(Nr="undirected",Bs()):(Pr=bn.out,fs=Object.keys(bn.out),Fs=0,Nr="inner-directed",Bs());if("undirected"===Nr){if("directed"===ha)return Nr="outer",Bs();Pr=bn.undirected,fs=Object.keys(bn.undirected),Fs=0,Nr="inner-undirected"}if(Fs>=fs.length)return Nr="inner-undirected"===Nr?"outer":"undirected",Bs();var Gi=fs[Fs++],ir=Pr[Gi],Yt=ir.target;return"inner-undirected"===Nr&&Yt.key===bn.key&&(Yt=ir.source),{done:!1,value:[bn.key,Yt.key,bn.attributes,Yt.attributes,ir.key,ir.attributes]}}));var rn,bn,fs,Pr,Fs,tl,ha,Nr,j,re,fe,Fe,$e,rt,xt,Tt,Ft},we.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Se(this._nodes.keys(),this._nodes.size)},we.forEachNode=function(j){if("function"!=typeof j)throw new ke("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(re,fe){j(fe,re.attributes)})},we.forEachNodeUntil=function(j){if("function"!=typeof j)throw new ke("Graph.forEachNode: expecting a callback.");for(var re,fe,Fe=this._nodes.values();!0!==(re=Fe.next())&&!j((fe=re.value).key,fe.attributes););},we.nodeEntries=function(){var j=this._nodes.values();return new Xe(function(){var re=j.next();if(re.done)return re;var fe=re.value;return{value:[fe.key,fe.attributes],done:!1}})},we.exportNode=function(j){var re=this._nodes.get(j=""+j);if(!re)throw new Ve('Graph.exportNode: could not find the "'.concat(j,'" node in the graph.'));return Ba(j,re)},we.exportEdge=function(j){var re=this._edges.get(j=""+j);if(!re)throw new Ve('Graph.exportEdge: could not find the "'.concat(j,'" edge in the graph.'));return Ql(j,re)},we.export=function(){var j=new Array(this._nodes.size),re=0;this._nodes.forEach(function(Fe,$e){j[re++]=Ba($e,Fe)});var fe=new Array(this._edges.size);return re=0,this._edges.forEach(function(Fe,$e){fe[re++]=Ql($e,Fe)}),{attributes:this.getAttributes(),nodes:j,edges:fe,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},we.importNode=function(j){var re=arguments.length>1&&void 0!==arguments[1]&&arguments[1],fe=function ed(be){return N(be)?"key"in be?!("attributes"in be)||N(be.attributes)&&null!==be.attributes?null:"invalid-attributes":"no-key":"not-object"}(j);if(fe){if("not-object"===fe)throw new ke('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===fe)throw new ke("Graph.importNode: no key provided.");if("invalid-attributes"===fe)throw new ke("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Fe=j.key,$e=j.attributes,rt=void 0===$e?{}:$e;return re?this.mergeNode(Fe,rt):this.addNode(Fe,rt),this},we.importEdge=function(j){var re=arguments.length>1&&void 0!==arguments[1]&&arguments[1],fe=function Jc(be){return N(be)?"source"in be?"target"in be?!("attributes"in be)||N(be.attributes)&&null!==be.attributes?"undirected"in be&&"boolean"!=typeof be.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(j);if(fe){if("not-object"===fe)throw new ke('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===fe)throw new ke("Graph.importEdge: missing souce.");if("no-target"===fe)throw new ke("Graph.importEdge: missing target.");if("invalid-attributes"===fe)throw new ke("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===fe)throw new ke("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Fe=j.source,$e=j.target,rt=j.attributes,xt=void 0===rt?{}:rt,Tt=j.undirected,Ft=void 0!==Tt&&Tt;return"key"in j?(re?Ft?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ft?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,j.key,Fe,$e,xt):(re?Ft?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ft?this.addUndirectedEdge:this.addDirectedEdge).call(this,Fe,$e,xt),this},we.import=function(j){var re,fe,Fe,$e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function F(be){return null!==be&&"object"===Z(be)&&"function"==typeof be.addUndirectedEdgeWithKey&&"function"==typeof be.dropNode}(j))return this.import(j.export(),$e),this;if(!N(j))throw new ke("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(j.attributes){if(!N(j.attributes))throw new ke("Graph.import: invalid attributes. Expecting a plain object.");$e?this.mergeAttributes(j.attributes):this.replaceAttributes(j.attributes)}if(j.nodes){if(Fe=j.nodes,!Array.isArray(Fe))throw new ke("Graph.import: invalid nodes. Expecting an array.");for(re=0,fe=Fe.length;re<fe;re++)this.importNode(Fe[re],$e)}if(j.edges){if(Fe=j.edges,!Array.isArray(Fe))throw new ke("Graph.import: invalid edges. Expecting an array.");for(re=0,fe=Fe.length;re<fe;re++)this.importEdge(Fe[re],$e)}return this},we.nullCopy=function(j){return new Te(y({},this._options,j))},we.emptyCopy=function(j){var re=this.nullCopy(j);return this._nodes.forEach(function(fe,Fe){var $e=y({},fe.attributes);fe=new re.NodeDataClass(Fe,$e),re._nodes.set(Fe,fe)}),re},we.copy=function(){var j=new Te(this._options);return j.import(this),j},we.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(j){return j.upgradeToMixed()}),this._options.type="mixed",S(this,"type",this._options.type),se(this,"NodeDataClass",Ae)),this},we.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,S(this,"multi",!0),(j=this)._nodes.forEach(function(re,fe){if(re.out)for(var Fe in re.out){var $e=new Set;$e.add(re.out[Fe]),re.out[Fe]=$e,j._nodes.get(Fe).in[fe]=$e}if(re.undirected)for(var rt in re.undirected)if(!(rt>fe)){var xt=new Set;xt.add(re.undirected[rt]),re.undirected[rt]=xt,j._nodes.get(rt).undirected[fe]=xt}})),this;var j},we.clearIndex=function(){return this._nodes.forEach(function(j){void 0!==j.in&&(j.in={},j.out={}),void 0!==j.undirected&&(j.undirected={})}),this},we.toJSON=function(){return this.export()},we.toString=function(){return"[object Graph]"},we.inspect=function(){var j=this,re={};this._nodes.forEach(function(xt,Tt){re[Tt]=xt.attributes});var fe={},Fe={};this._edges.forEach(function(xt,Tt){var Ft=xt.undirected?"--":"->",rn="",bn="(".concat(xt.source.key,")").concat(Ft,"(").concat(xt.target.key,")");xt.generatedKey?j.multi&&(void 0===Fe[bn]?Fe[bn]=0:Fe[bn]++,rn+="".concat(Fe[bn],". ")):rn+="[".concat(Tt,"]: "),fe[rn+=bn]=xt.attributes});var $e={};for(var rt in this)this.hasOwnProperty(rt)&&!td.has(rt)&&"function"!=typeof this[rt]&&($e[rt]=this[rt]);return $e.attributes=this._attributes,$e.nodes=re,$e.edges=fe,se($e,"constructor",this.constructor),$e},Te}(X.exports.EventEmitter);typeof Symbol<"u"&&(Sn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Sn.prototype.inspect),[{name:function(be){return"".concat(be,"Edge")},generateKey:!0},{name:function(be){return"".concat(be,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(be){return"".concat(be,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(be){return"".concat(be,"EdgeWithKey")}},{name:function(be){return"".concat(be,"DirectedEdgeWithKey")},type:"directed"},{name:function(be){return"".concat(be,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(be){["add","merge","update"].forEach(function(Te){var we=be.name(Te),j="add"===Te?nd:Qc;Sn.prototype[we]=be.generateKey?function(re,fe,Fe){return j(this,we,!0,"undirected"===(be.type||this.type),null,re,fe,Fe,"update"===Te)}:function(re,fe,Fe,$e){return j(this,we,!1,"undirected"===(be.type||this.type),re,fe,Fe,$e,"update"===Te)}})}),typeof Symbol<"u"&&(Sn.prototype[Symbol.iterator]=Sn.prototype.adjacency),be=Sn,O.forEach(function(Te){var we=Te.name,j=Te.attacher;j(be,we("Edge"),"mixed"),j(be,we("DirectedEdge"),"directed"),j(be,we("UndirectedEdge"),"undirected")}),function(be){Le.forEach(function(Te){var j,re,fe,Fe;fe=(j=Te).type,Fe=j.direction,be.prototype[re=j.name]=function($e,rt){if("mixed"!==fe&&"mixed"!==this.type&&fe!==this.type)return[];if(!arguments.length)return function nn(be,Te){if(0===be.size)return[];if("mixed"===Te||Te===be.type)return"function"==typeof Array.from?Array.from(be._edges.keys()):Se(be._edges.keys(),be._edges.size);for(var we,j,fe=new Array("undirected"===Te?be.undirectedSize:be.directedSize),Fe="undirected"===Te,$e=be._edges.values(),rt=0;!0!==(we=$e.next()).done;)(j=we.value).undirected===Fe&&(fe[rt++]=j.key);return fe}(this,fe);if(1===arguments.length){var xt=this._nodes.get($e=""+$e);if(void 0===xt)throw new Ve("Graph.".concat(re,': could not find the "').concat($e,'" node in the graph.'));return function ae(be,Te,we,j){var re=[],fe=be?he:Ye;return"undirected"!==Te&&("out"!==we&&fe(re,j.in),"in"!==we&&fe(re,j.out),!we&&j.directedSelfLoops>0&&re.splice(re.lastIndexOf(j.key),1)),"directed"!==Te&&fe(re,j.undirected),re}(this.multi,"mixed"===fe?this.type:fe,Fe,xt)}if(2===arguments.length){rt=""+rt;var Tt=this._nodes.get($e=""+$e);if(!Tt)throw new Ve("Graph.".concat(re,':  could not find the "').concat($e,'" source node in the graph.'));if(!this._nodes.has(rt))throw new Ve("Graph.".concat(re,':  could not find the "').concat(rt,'" target node in the graph.'));return function $t(be,Te,we,j,re){var fe=Te?ze:ge,Fe=[];return"undirected"!==be&&(void 0!==j.in&&"out"!==we&&fe(Fe,j.in,re),void 0!==j.out&&"in"!==we&&fe(Fe,j.out,re),!we&&j.directedSelfLoops>0&&Fe.splice(Fe.lastIndexOf(j.key),1)),"directed"!==be&&void 0!==j.undirected&&fe(Fe,j.undirected,re),Fe}(fe,this.multi,Fe,Tt,rt)}throw new ke("Graph.".concat(re,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(we,j){var re=j.name,fe=j.type,Fe=j.direction,$e="forEach"+re[0].toUpperCase()+re.slice(1,-1);we.prototype[$e]=function(rt,xt,Tt){if("mixed"===fe||"mixed"===this.type||fe===this.type){if(1===arguments.length)return function Oe(be,Te,we){if(0!==be.size)for(var j,re,fe="mixed"!==Te&&Te!==be.type,Fe="undirected"===Te,$e=be._edges.values();!0!==(j=$e.next()).done;)if(re=j.value,!fe||re.undirected===Fe){var Ft=re.source,rn=re.target;we(re.key,re.attributes,Ft.key,rn.key,Ft.attributes,rn.attributes,re.undirected,re.generatedKey)}}(this,fe,Tt=rt);if(2===arguments.length){Tt=xt;var Ft=this._nodes.get(rt=""+rt);if(void 0===Ft)throw new Ve("Graph.".concat($e,': could not find the "').concat(rt,'" node in the graph.'));return function He(be,Te,we,j,re){var fe=be?H:Q;"undirected"!==Te&&("out"!==we&&fe(j.in,re),"in"!==we&&fe(j.out,re,we?null:j.key)),"directed"!==Te&&fe(j.undirected,re)}(this.multi,"mixed"===fe?this.type:fe,Fe,Ft,Tt)}if(3===arguments.length){xt=""+xt;var rn=this._nodes.get(rt=""+rt);if(!rn)throw new Ve("Graph.".concat($e,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(xt))throw new Ve("Graph.".concat($e,':  could not find the "').concat(xt,'" target node in the graph.'));return function cn(be,Te,we,j,re,fe){var Fe=Te?ct:qe;"undirected"!==be&&(void 0!==j.in&&"out"!==we&&Fe(j.in,re,fe),j.key!==re&&void 0!==j.out&&"in"!==we&&Fe(j.out,re,fe)),"directed"!==be&&void 0!==j.undirected&&Fe(j.undirected,re,fe)}(fe,this.multi,Fe,rn,xt,Tt)}throw new ke("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(be,Te),function(we,j){var re=j.name,fe=j.type,Fe=j.direction,$e="forEach"+re[0].toUpperCase()+re.slice(1,-1)+"Until";we.prototype[$e]=function(rt,xt,Tt){if("mixed"===fe||"mixed"===this.type||fe===this.type){if(1===arguments.length)return function J(be,Te,we){if(0!==be.size)for(var j,re,fe="mixed"!==Te&&Te!==be.type,Fe="undirected"===Te,$e=be._edges.values();!0!==(j=$e.next()).done;)if(re=j.value,!fe||re.undirected===Fe){var Ft=re.source,rn=re.target;if(we(re.key,re.attributes,Ft.key,rn.key,Ft.attributes,rn.attributes,re.undirected,re.generatedKey))break}}(this,fe,Tt=rt);if(2===arguments.length){Tt=xt;var Ft=this._nodes.get(rt=""+rt);if(void 0===Ft)throw new Ve("Graph.".concat($e,': could not find the "').concat(rt,'" node in the graph.'));return function Je(be,Te,we,j,re){var fe=be?M:D;"undirected"!==Te&&("out"!==we&&fe(j.in,re)||"in"!==we&&fe(j.out,re,we?null:j.key))||"directed"===Te||fe(j.undirected,re)}(this.multi,"mixed"===fe?this.type:fe,Fe,Ft,Tt)}if(3===arguments.length){xt=""+xt;var rn=this._nodes.get(rt=""+rt);if(!rn)throw new Ve("Graph.".concat($e,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(xt))throw new Ve("Graph.".concat($e,':  could not find the "').concat(xt,'" target node in the graph.'));return function Yn(be,Te,we,j,re,fe){var Fe=Te?_t:Dt;"undirected"!==be&&(void 0!==j.in&&"out"!==we&&Fe(j.in,re,fe)||j.key!==re&&void 0!==j.out&&"in"!==we&&Fe(j.out,re,fe,we?null:j.key))||"directed"===be||void 0===j.undirected||Fe(j.undirected,re,fe)}(fe,this.multi,Fe,rn,xt,Tt)}throw new ke("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(be,Te),function(we,j){var fe=j.type,Fe=j.direction,$e=j.name.slice(0,-1)+"Entries";we.prototype[$e]=function(rt,xt){if("mixed"!==fe&&"mixed"!==this.type&&fe!==this.type)return Xe.empty();if(!arguments.length)return function C(be,Te){if(0===be.size)return Xe.empty();var we="mixed"!==Te&&Te!==be.type,j="undirected"===Te,re=be._edges.values();return new Xe(function(){for(var fe,Fe;;){if((fe=re.next()).done)return fe;if(Fe=fe.value,!we||Fe.undirected===j)break}return{value:[Fe.key,Fe.attributes,Fe.source.key,Fe.target.key,Fe.source.attributes,Fe.target.attributes],done:!1}})}(this,fe);if(1===arguments.length){var Tt=this._nodes.get(rt=""+rt);if(!Tt)throw new Ve("Graph.".concat($e,': could not find the "').concat(rt,'" node in the graph.'));return function st(be,Te,we){var j=Xe.empty();return"undirected"!==be&&("out"!==Te&&void 0!==we.in&&(j=z(j,de(we.in))),"in"!==Te&&void 0!==we.out&&(j=z(j,de(we.out,Te?null:we.key)))),"directed"!==be&&void 0!==we.undirected&&(j=z(j,de(we.undirected))),j}(fe,Fe,Tt)}if(2===arguments.length){xt=""+xt;var Ft=this._nodes.get(rt=""+rt);if(!Ft)throw new Ve("Graph.".concat($e,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(xt))throw new Ve("Graph.".concat($e,':  could not find the "').concat(xt,'" target node in the graph.'));return function Wn(be,Te,we,j){var re=Xe.empty();return"undirected"!==be&&(void 0!==we.in&&"out"!==Te&&j in we.in&&(re=z(re,Ht(we.in,j))),void 0!==we.out&&"in"!==Te&&j in we.out&&(re=z(re,Ht(we.out,j)))),"directed"!==be&&void 0!==we.undirected&&j in we.undirected&&(re=z(re,Ht(we.undirected,j))),re}(fe,Fe,Ft,xt)}throw new ke("Graph.".concat($e,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(be,Te)})}(Sn),function(be){gn.forEach(function(Te){var j,re,fe,Fe;fe=(j=Te).type,Fe=j.direction,be.prototype[re=j.name]=function($e){if("mixed"!==fe&&"mixed"!==this.type&&fe!==this.type)return[];if(2===arguments.length){var rt=""+arguments[0],xt=""+arguments[1];if(!this._nodes.has(rt))throw new Ve("Graph.".concat(re,': could not find the "').concat(rt,'" node in the graph.'));if(!this._nodes.has(xt))throw new Ve("Graph.".concat(re,': could not find the "').concat(xt,'" node in the graph.'));return function Ss(be,Te,we,j,re){var fe=be._nodes.get(j);if("undirected"!==Te){if("out"!==we&&void 0!==fe.in)for(var Fe in fe.in)if(Fe===re)return!0;if("in"!==we&&void 0!==fe.out)for(var $e in fe.out)if($e===re)return!0}if("directed"!==Te&&void 0!==fe.undirected)for(var rt in fe.undirected)if(rt===re)return!0;return!1}(this,fe,Fe,rt,xt)}if(1===arguments.length){var Tt=this._nodes.get($e=""+$e);if(void 0===Tt)throw new Ve("Graph.".concat(re,': could not find the "').concat($e,'" node in the graph.'));return function $o(be,Te,we){if("mixed"!==be){if("undirected"===be)return Object.keys(we.undirected);if("string"==typeof Te)return Object.keys(we[Te])}var j=new Set;return"undirected"!==be&&("out"!==Te&&As(j,we.in),"in"!==Te&&As(j,we.out)),"directed"!==be&&As(j,we.undirected),Se(j.values(),j.size)}("mixed"===fe?this.type:fe,Fe,Tt)}throw new ke("Graph.".concat(re,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function mu(be,Te){var we=Te.name,j=Te.type,re=Te.direction,fe="forEach"+we[0].toUpperCase()+we.slice(1,-1);be.prototype[fe]=function(Fe,$e){if("mixed"===j||"mixed"===this.type||j===this.type){var rt=this._nodes.get(Fe=""+Fe);if(void 0===rt)throw new Ve("Graph.".concat(fe,': could not find the "').concat(Fe,'" node in the graph.'));!function(xt,Tt,Ft,rn){if("mixed"!==xt){if("undirected"===xt)return Ps(Ft,Ft.undirected,rn);if("string"==typeof Tt)return Ps(Ft,Ft[Tt],rn)}var bn=new Set;"undirected"!==xt&&("out"!==Tt&&Yi(bn,Ft,Ft.in,rn),"in"!==Tt&&Yi(bn,Ft,Ft.out,rn)),"directed"!==xt&&Yi(bn,Ft,Ft.undirected,rn)}("mixed"===j?this.type:j,re,rt,$e)}}}(be,Te),function Ph(be,Te){var we=Te.name,j=Te.type,re=Te.direction,fe="forEach"+we[0].toUpperCase()+we.slice(1,-1)+"Until";be.prototype[fe]=function(Fe,$e){if("mixed"===j||"mixed"===this.type||j===this.type){var rt=this._nodes.get(Fe=""+Fe);if(void 0===rt)throw new Ve("Graph.".concat(fe,': could not find the "').concat(Fe,'" node in the graph.'));!function(xt,Tt,Ft,rn){if("mixed"!==xt){if("undirected"===xt)return ts(Ft,Ft.undirected,rn);if("string"==typeof Tt)return ts(Ft,Ft[Tt],rn)}var bn=new Set;"undirected"!==xt&&("out"!==Tt&&So(bn,Ft,Ft.in,rn)||"in"!==Tt&&So(bn,Ft,Ft.out,rn))||"directed"===xt||So(bn,Ft,Ft.undirected,rn)}("mixed"===j?this.type:j,re,rt,$e)}}}(be,Te),function Nh(be,Te){var j=Te.type,re=Te.direction,fe=Te.name.slice(0,-1)+"Entries";be.prototype[fe]=function(Fe){if("mixed"!==j&&"mixed"!==this.type&&j!==this.type)return Xe.empty();var $e=this._nodes.get(Fe=""+Fe);if(void 0===$e)throw new Ve("Graph.".concat(fe,': could not find the "').concat(Fe,'" node in the graph.'));return function(rt,xt,Tt){if("mixed"!==rt){if("undirected"===rt)return Xo(Tt,Tt.undirected);if("string"==typeof xt)return Xo(Tt,Tt[xt])}var Ft=Xe.empty(),rn=new Set;return"undirected"!==rt&&("out"!==xt&&(Ft=z(Ft,Ns(rn,Tt,Tt.in))),"in"!==xt&&(Ft=z(Ft,Ns(rn,Tt,Tt.out)))),"directed"!==rt&&(Ft=z(Ft,Ns(rn,Tt,Tt.undirected))),Ft}("mixed"===j?this.type:j,re,$e)}}(be,Te)})}(Sn);var el=function(be){function Te(we){var j=y({type:"directed"},we);if("multi"in j&&!1!==j.multi)throw new ke("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==j.type)throw new ke('DirectedGraph.from: inconsistent "'+j.type+'" type in given options!');return be.call(this,j)||this}return g(Te,be),Te}(Sn),Yo=function(be){function Te(we){var j=y({type:"undirected"},we);if("multi"in j&&!1!==j.multi)throw new ke("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==j.type)throw new ke('UndirectedGraph.from: inconsistent "'+j.type+'" type in given options!');return be.call(this,j)||this}return g(Te,be),Te}(Sn),ja=function(be){function Te(we){var j=y({multi:!0},we);if("multi"in j&&!0!==j.multi)throw new ke("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return be.call(this,j)||this}return g(Te,be),Te}(Sn),Ua=function(be){function Te(we){var j=y({type:"directed",multi:!0},we);if("multi"in j&&!0!==j.multi)throw new ke("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==j.type)throw new ke('MultiDirectedGraph.from: inconsistent "'+j.type+'" type in given options!');return be.call(this,j)||this}return g(Te,be),Te}(Sn),Va=function(be){function Te(we){var j=y({type:"undirected",multi:!0},we);if("multi"in j&&!0!==j.multi)throw new ke("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==j.type)throw new ke('MultiUndirectedGraph.from: inconsistent "'+j.type+'" type in given options!');return be.call(this,j)||this}return g(Te,be),Te}(Sn);function Ls(be){be.from=function(Te,we){var j=y({},Te.options,we),re=new be(j);return re.import(Te),re}}return Ls(Sn),Ls(el),Ls(Yo),Ls(ja),Ls(Ua),Ls(Va),Sn.Graph=Sn,Sn.DirectedGraph=el,Sn.UndirectedGraph=Yo,Sn.MultiGraph=ja,Sn.MultiDirectedGraph=Ua,Sn.MultiUndirectedGraph=Va,Sn.InvalidArgumentsGraphError=ke,Sn.NotFoundGraphError=Ve,Sn.UsageGraphError=me,Sn}()},7271:(te,Z,g)=>{var E;!function(b,k,A,P){"use strict";var X,_=["","webkit","Moz","MS","ms","o"],y=k.createElement("div"),T="function",F=Math.round,N=Math.abs,U=Date.now;function se(De,Be,tt){return setTimeout(V(De,tt),Be)}function S(De,Be,tt){return!!Array.isArray(De)&&($(De,tt[Be],tt),!0)}function $(De,Be,tt){var dt;if(De)if(De.forEach)De.forEach(Be,tt);else if(De.length!==P)for(dt=0;dt<De.length;)Be.call(tt,De[dt],dt,De),dt++;else for(dt in De)De.hasOwnProperty(dt)&&Be.call(tt,De[dt],dt,De)}function ce(De,Be,tt){var dt="DEPRECATED METHOD: "+Be+"\n"+tt+" AT \n";return function(){var kt=new Error("get-stack-trace"),Vt=kt&&kt.stack?kt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Kn=b.console&&(b.console.warn||b.console.log);return Kn&&Kn.call(b.console,dt,Vt),De.apply(this,arguments)}}X="function"!=typeof Object.assign?function(Be){if(Be===P||null===Be)throw new TypeError("Cannot convert undefined or null to object");for(var tt=Object(Be),dt=1;dt<arguments.length;dt++){var kt=arguments[dt];if(kt!==P&&null!==kt)for(var Vt in kt)kt.hasOwnProperty(Vt)&&(tt[Vt]=kt[Vt])}return tt}:Object.assign;var ie=ce(function(Be,tt,dt){for(var kt=Object.keys(tt),Vt=0;Vt<kt.length;)(!dt||dt&&Be[kt[Vt]]===P)&&(Be[kt[Vt]]=tt[kt[Vt]]),Vt++;return Be},"extend","Use `assign`."),ee=ce(function(Be,tt){return ie(Be,tt,!0)},"merge","Use `assign`.");function K(De,Be,tt){var kt,dt=Be.prototype;(kt=De.prototype=Object.create(dt)).constructor=De,kt._super=dt,tt&&X(kt,tt)}function V(De,Be){return function(){return De.apply(Be,arguments)}}function x(De,Be){return typeof De==T?De.apply(Be&&Be[0]||P,Be):De}function B(De,Be){return De===P?Be:De}function I(De,Be,tt){$(le(Be),function(dt){De.addEventListener(dt,tt,!1)})}function ue(De,Be,tt){$(le(Be),function(dt){De.removeEventListener(dt,tt,!1)})}function W(De,Be){for(;De;){if(De==Be)return!0;De=De.parentNode}return!1}function Ce(De,Be){return De.indexOf(Be)>-1}function le(De){return De.trim().split(/\s+/g)}function xe(De,Be,tt){if(De.indexOf&&!tt)return De.indexOf(Be);for(var dt=0;dt<De.length;){if(tt&&De[dt][tt]==Be||!tt&&De[dt]===Be)return dt;dt++}return-1}function Ie(De){return Array.prototype.slice.call(De,0)}function Re(De,Be,tt){for(var dt=[],kt=[],Vt=0;Vt<De.length;){var Kn=Be?De[Vt][Be]:De[Vt];xe(kt,Kn)<0&&dt.push(De[Vt]),kt[Vt]=Kn,Vt++}return tt&&(dt=Be?dt.sort(function(Cn,ln){return Cn[Be]>ln[Be]}):dt.sort()),dt}function et(De,Be){for(var tt,dt,kt=Be[0].toUpperCase()+Be.slice(1),Vt=0;Vt<_.length;){if((dt=(tt=_[Vt])?tt+kt:Be)in De)return dt;Vt++}return P}var Xe=1;function Ne(De){var Be=De.ownerDocument||De;return Be.defaultView||Be.parentWindow||b}var Ve="ontouchstart"in b,me=et(b,"PointerEvent")!==P,Ae=Ve&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ke="touch",We="mouse",G=25,O=1,z=4,Le=8,Ye=1,he=2,Q=4,H=8,D=16,M=he|Q,de=H|D,ge=M|de,ze=["x","y"],qe=["clientX","clientY"];function ct(De,Be){var tt=this;this.manager=De,this.callback=Be,this.element=De.element,this.target=De.options.inputTarget,this.domHandler=function(dt){x(De.options.enable,[De])&&tt.handler(dt)},this.init()}function _t(De,Be,tt){var dt=tt.pointers.length,kt=tt.changedPointers.length,Vt=Be&O&&dt-kt==0,Kn=Be&(z|Le)&&dt-kt==0;tt.isFirst=!!Vt,tt.isFinal=!!Kn,Vt&&(De.session={}),tt.eventType=Be,function Ht(De,Be){var tt=De.session,dt=Be.pointers,kt=dt.length;tt.firstInput||(tt.firstInput=J(Be)),kt>1&&!tt.firstMultiple?tt.firstMultiple=J(Be):1===kt&&(tt.firstMultiple=!1);var Vt=tt.firstInput,Kn=tt.firstMultiple,Sr=Kn?Kn.center:Vt.center,Cn=Be.center=C(dt);Be.timeStamp=U(),Be.deltaTime=Be.timeStamp-Vt.timeStamp,Be.angle=st(Sr,Cn),Be.distance=Je(Sr,Cn),function nn(De,Be){var tt=Be.center,dt=De.offsetDelta||{},kt=De.prevDelta||{},Vt=De.prevInput||{};(Be.eventType===O||Vt.eventType===z)&&(kt=De.prevDelta={x:Vt.deltaX||0,y:Vt.deltaY||0},dt=De.offsetDelta={x:tt.x,y:tt.y}),Be.deltaX=kt.x+(tt.x-dt.x),Be.deltaY=kt.y+(tt.y-dt.y)}(tt,Be),Be.offsetDirection=He(Be.deltaX,Be.deltaY);var ln=ae(Be.deltaTime,Be.deltaX,Be.deltaY);Be.overallVelocityX=ln.x,Be.overallVelocityY=ln.y,Be.overallVelocity=N(ln.x)>N(ln.y)?ln.x:ln.y,Be.scale=Kn?function cn(De,Be){return Je(Be[0],Be[1],qe)/Je(De[0],De[1],qe)}(Kn.pointers,dt):1,Be.rotation=Kn?function $t(De,Be){return st(Be[1],Be[0],qe)+st(De[1],De[0],qe)}(Kn.pointers,dt):0,Be.maxPointers=tt.prevInput?Be.pointers.length>tt.prevInput.maxPointers?Be.pointers.length:tt.prevInput.maxPointers:Be.pointers.length,function Oe(De,Be){var kt,Vt,Kn,Sr,tt=De.lastInterval||Be,dt=Be.timeStamp-tt.timeStamp;if(Be.eventType!=Le&&(dt>G||tt.velocity===P)){var Cn=Be.deltaX-tt.deltaX,ln=Be.deltaY-tt.deltaY,io=ae(dt,Cn,ln);Vt=io.x,Kn=io.y,kt=N(io.x)>N(io.y)?io.x:io.y,Sr=He(Cn,ln),De.lastInterval=Be}else kt=tt.velocity,Vt=tt.velocityX,Kn=tt.velocityY,Sr=tt.direction;Be.velocity=kt,Be.velocityX=Vt,Be.velocityY=Kn,Be.direction=Sr}(tt,Be);var io=De.element;W(Be.srcEvent.target,io)&&(io=Be.srcEvent.target),Be.target=io}(De,tt),De.emit("hammer.input",tt),De.recognize(tt),De.session.prevInput=tt}function J(De){for(var Be=[],tt=0;tt<De.pointers.length;)Be[tt]={clientX:F(De.pointers[tt].clientX),clientY:F(De.pointers[tt].clientY)},tt++;return{timeStamp:U(),pointers:Be,center:C(Be),deltaX:De.deltaX,deltaY:De.deltaY}}function C(De){var Be=De.length;if(1===Be)return{x:F(De[0].clientX),y:F(De[0].clientY)};for(var tt=0,dt=0,kt=0;kt<Be;)tt+=De[kt].clientX,dt+=De[kt].clientY,kt++;return{x:F(tt/Be),y:F(dt/Be)}}function ae(De,Be,tt){return{x:Be/De||0,y:tt/De||0}}function He(De,Be){return De===Be?Ye:N(De)>=N(Be)?De<0?he:Q:Be<0?H:D}function Je(De,Be,tt){tt||(tt=ze);var dt=Be[tt[0]]-De[tt[0]],kt=Be[tt[1]]-De[tt[1]];return Math.sqrt(dt*dt+kt*kt)}function st(De,Be,tt){return tt||(tt=ze),180*Math.atan2(Be[tt[1]]-De[tt[1]],Be[tt[0]]-De[tt[0]])/Math.PI}ct.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(Ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ue(this.element,this.evEl,this.domHandler),this.evTarget&&ue(this.target,this.evTarget,this.domHandler),this.evWin&&ue(Ne(this.element),this.evWin,this.domHandler)}};var Yn={mousedown:O,mousemove:2,mouseup:z},Wn="mousedown",gn="mousemove mouseup";function As(){this.evEl=Wn,this.evWin=gn,this.pressed=!1,ct.apply(this,arguments)}K(As,ct,{handler:function(Be){var tt=Yn[Be.type];tt&O&&0===Be.button&&(this.pressed=!0),2&tt&&1!==Be.which&&(tt=z),this.pressed&&(tt&z&&(this.pressed=!1),this.callback(this.manager,tt,{pointers:[Be],changedPointers:[Be],pointerType:We,srcEvent:Be}))}});var $o={pointerdown:O,pointermove:2,pointerup:z,pointercancel:Le,pointerout:Le},Ps={2:Ke,3:"pen",4:We,5:"kinect"},Yi="pointerdown",ts="pointermove pointerup pointercancel";function So(){this.evEl=Yi,this.evWin=ts,ct.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(Yi="MSPointerDown",ts="MSPointerMove MSPointerUp MSPointerCancel"),K(So,ct,{handler:function(Be){var tt=this.store,dt=!1,kt=Be.type.toLowerCase().replace("ms",""),Vt=$o[kt],Kn=Ps[Be.pointerType]||Be.pointerType,Sr=Kn==Ke,Cn=xe(tt,Be.pointerId,"pointerId");Vt&O&&(0===Be.button||Sr)?Cn<0&&(tt.push(Be),Cn=tt.length-1):Vt&(z|Le)&&(dt=!0),!(Cn<0)&&(tt[Cn]=Be,this.callback(this.manager,Vt,{pointers:tt,changedPointers:[Be],pointerType:Kn,srcEvent:Be}),dt&&tt.splice(Cn,1))}});var Xo={touchstart:O,touchmove:2,touchend:z,touchcancel:Le};function mu(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ct.apply(this,arguments)}function Ph(De,Be){var tt=Ie(De.touches),dt=Ie(De.changedTouches);return Be&(z|Le)&&(tt=Re(tt.concat(dt),"identifier",!0)),[tt,dt]}K(mu,ct,{handler:function(Be){var tt=Xo[Be.type];if(tt===O&&(this.started=!0),this.started){var dt=Ph.call(this,Be,tt);tt&(z|Le)&&dt[0].length-dt[1].length==0&&(this.started=!1),this.callback(this.manager,tt,{pointers:dt[0],changedPointers:dt[1],pointerType:Ke,srcEvent:Be})}}});var Nh={touchstart:O,touchmove:2,touchend:z,touchcancel:Le},Kc="touchstart touchmove touchend touchcancel";function qc(){this.evTarget=Kc,this.targetIds={},ct.apply(this,arguments)}function Ba(De,Be){var tt=Ie(De.touches),dt=this.targetIds;if(Be&(2|O)&&1===tt.length)return dt[tt[0].identifier]=!0,[tt,tt];var kt,Vt,Kn=Ie(De.changedTouches),Sr=[],Cn=this.target;if(Vt=tt.filter(function(ln){return W(ln.target,Cn)}),Be===O)for(kt=0;kt<Vt.length;)dt[Vt[kt].identifier]=!0,kt++;for(kt=0;kt<Kn.length;)dt[Kn[kt].identifier]&&Sr.push(Kn[kt]),Be&(z|Le)&&delete dt[Kn[kt].identifier],kt++;return Sr.length?[Re(Vt.concat(Sr),"identifier",!0),Sr]:void 0}K(qc,ct,{handler:function(Be){var tt=Nh[Be.type],dt=Ba.call(this,Be,tt);dt&&this.callback(this.manager,tt,{pointers:dt[0],changedPointers:dt[1],pointerType:Ke,srcEvent:Be})}});var Ql=2500;function Jc(){ct.apply(this,arguments);var De=V(this.handler,this);this.touch=new qc(this.manager,De),this.mouse=new As(this.manager,De),this.primaryTouch=null,this.lastTouches=[]}function gu(De,Be){De&O?(this.primaryTouch=Be.changedPointers[0].identifier,td.call(this,Be)):De&(z|Le)&&td.call(this,Be)}function td(De){var Be=De.changedPointers[0];if(Be.identifier===this.primaryTouch){var tt={x:Be.clientX,y:Be.clientY};this.lastTouches.push(tt);var dt=this.lastTouches;setTimeout(function(){var Vt=dt.indexOf(tt);Vt>-1&&dt.splice(Vt,1)},Ql)}}function _u(De){for(var Be=De.srcEvent.clientX,tt=De.srcEvent.clientY,dt=0;dt<this.lastTouches.length;dt++){var kt=this.lastTouches[dt],Vt=Math.abs(Be-kt.x),Kn=Math.abs(tt-kt.y);if(Vt<=25&&Kn<=25)return!0}return!1}K(Jc,ct,{handler:function(Be,tt,dt){var Vt=dt.pointerType==We;if(!(Vt&&dt.sourceCapabilities&&dt.sourceCapabilities.firesTouchEvents)){if(dt.pointerType==Ke)gu.call(this,tt,dt);else if(Vt&&_u.call(this,dt))return;this.callback(Be,tt,dt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zc=et(y.style,"touchAction"),nd=Zc!==P,Qc="compute",el="manipulation",Yo="none",ja="pan-x",Ua="pan-y",Va=function Te(){if(!nd)return!1;var De={},Be=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(tt){De[tt]=!Be||b.CSS.supports("touch-action",tt)}),De}();function Ls(De,Be){this.manager=De,this.set(Be)}Ls.prototype={set:function(De){De==Qc&&(De=this.compute()),nd&&this.manager.element.style&&Va[De]&&(this.manager.element.style[Zc]=De),this.actions=De.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var De=[];return $(this.manager.recognizers,function(Be){x(Be.options.enable,[Be])&&(De=De.concat(Be.getTouchAction()))}),function be(De){if(Ce(De,Yo))return Yo;var Be=Ce(De,ja),tt=Ce(De,Ua);return Be&&tt?Yo:Be||tt?Be?ja:Ua:Ce(De,el)?el:"auto"}(De.join(" "))},preventDefaults:function(De){var Be=De.srcEvent,tt=De.offsetDirection;if(!this.manager.session.prevented){var dt=this.actions,kt=Ce(dt,Yo)&&!Va[Yo],Vt=Ce(dt,Ua)&&!Va[Ua],Kn=Ce(dt,ja)&&!Va[ja];if(kt&&1===De.pointers.length&&De.distance<2&&De.deltaTime<250)return;return Kn&&Vt||!(kt||Vt&&tt&M||Kn&&tt&de)?void 0:this.preventSrc(Be)}Be.preventDefault()},preventSrc:function(De){this.manager.session.prevented=!0,De.preventDefault()}};var we=1;function xt(De){this.options=X({},this.defaults,De||{}),this.id=function Se(){return Xe++}(),this.manager=null,this.options.enable=B(this.options.enable,!0),this.state=we,this.simultaneous={},this.requireFail=[]}function Tt(De){return 16&De?"cancel":8&De?"end":4&De?"move":2&De?"start":""}function Ft(De){return De==D?"down":De==H?"up":De==he?"left":De==Q?"right":""}function rn(De,Be){var tt=Be.manager;return tt?tt.get(De):De}function bn(){xt.apply(this,arguments)}function fs(){bn.apply(this,arguments),this.pX=null,this.pY=null}function Pr(){bn.apply(this,arguments)}function Fs(){xt.apply(this,arguments),this._timer=null,this._input=null}function tl(){bn.apply(this,arguments)}function ha(){bn.apply(this,arguments)}function Nr(){xt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Bs(De,Be){return(Be=Be||{}).recognizers=B(Be.recognizers,Bs.defaults.preset),new ir(De,Be)}function ir(De,Be){this.options=X({},Bs.defaults,Be||{}),this.options.inputTarget=this.options.inputTarget||De,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=De,this.input=function Dt(De){return new(De.options.inputClass||(me?So:Ae?qc:Ve?Jc:As))(De,_t)}(this),this.touchAction=new Ls(this,this.options.touchAction),Yt(this,!0),$(this.options.recognizers,function(tt){var dt=this.add(new tt[0](tt[1]));tt[2]&&dt.recognizeWith(tt[2]),tt[3]&&dt.requireFailure(tt[3])},this)}function Yt(De,Be){var dt,tt=De.element;tt.style&&($(De.options.cssProps,function(kt,Vt){dt=et(tt.style,Vt),Be?(De.oldCssProps[dt]=tt.style[dt],tt.style[dt]=kt):tt.style[dt]=De.oldCssProps[dt]||""}),Be||(De.oldCssProps={}))}xt.prototype={defaults:{},set:function(De){return X(this.options,De),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(De){if(S(De,"recognizeWith",this))return this;var Be=this.simultaneous;return Be[(De=rn(De,this)).id]||(Be[De.id]=De,De.recognizeWith(this)),this},dropRecognizeWith:function(De){return S(De,"dropRecognizeWith",this)||(De=rn(De,this),delete this.simultaneous[De.id]),this},requireFailure:function(De){if(S(De,"requireFailure",this))return this;var Be=this.requireFail;return-1===xe(Be,De=rn(De,this))&&(Be.push(De),De.requireFailure(this)),this},dropRequireFailure:function(De){if(S(De,"dropRequireFailure",this))return this;De=rn(De,this);var Be=xe(this.requireFail,De);return Be>-1&&this.requireFail.splice(Be,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(De){return!!this.simultaneous[De.id]},emit:function(De){var Be=this,tt=this.state;function dt(kt){Be.manager.emit(kt,De)}tt<8&&dt(Be.options.event+Tt(tt)),dt(Be.options.event),De.additionalEvent&&dt(De.additionalEvent),tt>=8&&dt(Be.options.event+Tt(tt))},tryEmit:function(De){if(this.canEmit())return this.emit(De);this.state=32},canEmit:function(){for(var De=0;De<this.requireFail.length;){if(!(this.requireFail[De].state&(32|we)))return!1;De++}return!0},recognize:function(De){var Be=X({},De);if(!x(this.options.enable,[this,Be]))return this.reset(),void(this.state=32);56&this.state&&(this.state=we),this.state=this.process(Be),30&this.state&&this.tryEmit(Be)},process:function(De){},getTouchAction:function(){},reset:function(){}},K(bn,xt,{defaults:{pointers:1},attrTest:function(De){var Be=this.options.pointers;return 0===Be||De.pointers.length===Be},process:function(De){var Be=this.state,tt=De.eventType,dt=6&Be,kt=this.attrTest(De);return dt&&(tt&Le||!kt)?16|Be:dt||kt?tt&z?8|Be:2&Be?4|Be:2:32}}),K(fs,bn,{defaults:{event:"pan",threshold:10,pointers:1,direction:ge},getTouchAction:function(){var De=this.options.direction,Be=[];return De&M&&Be.push(Ua),De&de&&Be.push(ja),Be},directionTest:function(De){var Be=this.options,tt=!0,dt=De.distance,kt=De.direction,Vt=De.deltaX,Kn=De.deltaY;return kt&Be.direction||(Be.direction&M?(kt=0===Vt?Ye:Vt<0?he:Q,tt=Vt!=this.pX,dt=Math.abs(De.deltaX)):(kt=0===Kn?Ye:Kn<0?H:D,tt=Kn!=this.pY,dt=Math.abs(De.deltaY))),De.direction=kt,tt&&dt>Be.threshold&&kt&Be.direction},attrTest:function(De){return bn.prototype.attrTest.call(this,De)&&(2&this.state||!(2&this.state)&&this.directionTest(De))},emit:function(De){this.pX=De.deltaX,this.pY=De.deltaY;var Be=Ft(De.direction);Be&&(De.additionalEvent=this.options.event+Be),this._super.emit.call(this,De)}}),K(Pr,bn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Yo]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.scale-1)>this.options.threshold||2&this.state)},emit:function(De){1!==De.scale&&(De.additionalEvent=this.options.event+(De.scale<1?"in":"out")),this._super.emit.call(this,De)}}),K(Fs,xt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(De){var Be=this.options,tt=De.pointers.length===Be.pointers,dt=De.distance<Be.threshold,kt=De.deltaTime>Be.time;if(this._input=De,!dt||!tt||De.eventType&(z|Le)&&!kt)this.reset();else if(De.eventType&O)this.reset(),this._timer=se(function(){this.state=8,this.tryEmit()},Be.time,this);else if(De.eventType&z)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(De){8===this.state&&(De&&De.eventType&z?this.manager.emit(this.options.event+"up",De):(this._input.timeStamp=U(),this.manager.emit(this.options.event,this._input)))}}),K(tl,bn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Yo]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.rotation)>this.options.threshold||2&this.state)}}),K(ha,bn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:M|de,pointers:1},getTouchAction:function(){return fs.prototype.getTouchAction.call(this)},attrTest:function(De){var tt,Be=this.options.direction;return Be&(M|de)?tt=De.overallVelocity:Be&M?tt=De.overallVelocityX:Be&de&&(tt=De.overallVelocityY),this._super.attrTest.call(this,De)&&Be&De.offsetDirection&&De.distance>this.options.threshold&&De.maxPointers==this.options.pointers&&N(tt)>this.options.velocity&&De.eventType&z},emit:function(De){var Be=Ft(De.offsetDirection);Be&&this.manager.emit(this.options.event+Be,De),this.manager.emit(this.options.event,De)}}),K(Nr,xt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[el]},process:function(De){var Be=this.options,tt=De.pointers.length===Be.pointers,dt=De.distance<Be.threshold,kt=De.deltaTime<Be.time;if(this.reset(),De.eventType&O&&0===this.count)return this.failTimeout();if(dt&&kt&&tt){if(De.eventType!=z)return this.failTimeout();var Vt=!this.pTime||De.timeStamp-this.pTime<Be.interval,Kn=!this.pCenter||Je(this.pCenter,De.center)<Be.posThreshold;if(this.pTime=De.timeStamp,this.pCenter=De.center,Kn&&Vt?this.count+=1:this.count=1,this._input=De,0==this.count%Be.taps)return this.hasRequireFailures()?(this._timer=se(function(){this.state=8,this.tryEmit()},Be.interval,this),2):8}return 32},failTimeout:function(){return this._timer=se(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Bs.VERSION="2.0.7",Bs.defaults={domEvents:!1,touchAction:Qc,enable:!0,inputTarget:null,inputClass:null,preset:[[tl,{enable:!1}],[Pr,{enable:!1},["rotate"]],[ha,{direction:M}],[fs,{direction:M},["swipe"]],[Nr],[Nr,{event:"doubletap",taps:2},["tap"]],[Fs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ir.prototype={set:function(De){return X(this.options,De),De.touchAction&&this.touchAction.update(),De.inputTarget&&(this.input.destroy(),this.input.target=De.inputTarget,this.input.init()),this},stop:function(De){this.session.stopped=De?2:1},recognize:function(De){var Be=this.session;if(!Be.stopped){this.touchAction.preventDefaults(De);var tt,dt=this.recognizers,kt=Be.curRecognizer;(!kt||kt&&8&kt.state)&&(kt=Be.curRecognizer=null);for(var Vt=0;Vt<dt.length;)tt=dt[Vt],2===Be.stopped||kt&&tt!=kt&&!tt.canRecognizeWith(kt)?tt.reset():tt.recognize(De),!kt&&14&tt.state&&(kt=Be.curRecognizer=tt),Vt++}},get:function(De){if(De instanceof xt)return De;for(var Be=this.recognizers,tt=0;tt<Be.length;tt++)if(Be[tt].options.event==De)return Be[tt];return null},add:function(De){if(S(De,"add",this))return this;var Be=this.get(De.options.event);return Be&&this.remove(Be),this.recognizers.push(De),De.manager=this,this.touchAction.update(),De},remove:function(De){if(S(De,"remove",this))return this;if(De=this.get(De)){var Be=this.recognizers,tt=xe(Be,De);-1!==tt&&(Be.splice(tt,1),this.touchAction.update())}return this},on:function(De,Be){if(De!==P&&Be!==P){var tt=this.handlers;return $(le(De),function(dt){tt[dt]=tt[dt]||[],tt[dt].push(Be)}),this}},off:function(De,Be){if(De!==P){var tt=this.handlers;return $(le(De),function(dt){Be?tt[dt]&&tt[dt].splice(xe(tt[dt],Be),1):delete tt[dt]}),this}},emit:function(De,Be){this.options.domEvents&&function no(De,Be){var tt=k.createEvent("Event");tt.initEvent(De,!0,!0),tt.gesture=Be,Be.target.dispatchEvent(tt)}(De,Be);var tt=this.handlers[De]&&this.handlers[De].slice();if(tt&&tt.length){Be.type=De,Be.preventDefault=function(){Be.srcEvent.preventDefault()};for(var dt=0;dt<tt.length;)tt[dt](Be),dt++}},destroy:function(){this.element&&Yt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},X(Bs,{INPUT_START:O,INPUT_MOVE:2,INPUT_END:z,INPUT_CANCEL:Le,STATE_POSSIBLE:we,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Ye,DIRECTION_LEFT:he,DIRECTION_RIGHT:Q,DIRECTION_UP:H,DIRECTION_DOWN:D,DIRECTION_HORIZONTAL:M,DIRECTION_VERTICAL:de,DIRECTION_ALL:ge,Manager:ir,Input:ct,TouchAction:Ls,TouchInput:qc,MouseInput:As,PointerEventInput:So,TouchMouseInput:Jc,SingleTouchInput:mu,Recognizer:xt,AttrRecognizer:bn,Tap:Nr,Pan:fs,Swipe:ha,Pinch:Pr,Rotate:tl,Press:Fs,on:I,off:ue,each:$,merge:ee,extend:ie,assign:X,inherit:K,bindFn:V,prefixed:et}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=Bs,(E=function(){return Bs}.call(Z,g,Z,te))!==P&&(te.exports=E)}(window,document)},2601:(te,Z)=>{Z.read=function(g,E,b,k,A){var P,_,y=8*A-k-1,T=(1<<y)-1,F=T>>1,N=-7,U=b?A-1:0,se=b?-1:1,S=g[E+U];for(U+=se,P=S&(1<<-N)-1,S>>=-N,N+=y;N>0;P=256*P+g[E+U],U+=se,N-=8);for(_=P&(1<<-N)-1,P>>=-N,N+=k;N>0;_=256*_+g[E+U],U+=se,N-=8);if(0===P)P=1-F;else{if(P===T)return _?NaN:1/0*(S?-1:1);_+=Math.pow(2,k),P-=F}return(S?-1:1)*_*Math.pow(2,P-k)},Z.write=function(g,E,b,k,A,P){var _,y,T,F=8*P-A-1,N=(1<<F)-1,U=N>>1,se=23===A?Math.pow(2,-24)-Math.pow(2,-77):0,S=k?0:P-1,$=k?1:-1,ce=E<0||0===E&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(y=isNaN(E)?1:0,_=N):(_=Math.floor(Math.log(E)/Math.LN2),E*(T=Math.pow(2,-_))<1&&(_--,T*=2),(E+=_+U>=1?se/T:se*Math.pow(2,1-U))*T>=2&&(_++,T/=2),_+U>=N?(y=0,_=N):_+U>=1?(y=(E*T-1)*Math.pow(2,A),_+=U):(y=E*Math.pow(2,U-1)*Math.pow(2,A),_=0));A>=8;g[b+S]=255&y,S+=$,y/=256,A-=8);for(_=_<<A|y,F+=A;F>0;g[b+S]=255&_,S+=$,_/=256,F-=8);g[b+S-$]|=128*ce}},6698:te=>{te.exports="function"==typeof Object.create?function(g,E){E&&(g.super_=E,g.prototype=Object.create(E.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,E){if(E){g.super_=E;var b=function(){};b.prototype=E.prototype,g.prototype=new b,g.prototype.constructor=g}}},4198:(te,Z,g)=>{"use strict";var E=g(7156).default;const{isArray:b,isObject:k,isString:A}=g(8254),{asArray:P}=g(3521),{prependBase:_}=g(2651),y=g(1874),T=g(1252);function N(se){throw new y("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:se})}function U({context:se,base:S}){if(!se)return;const $=se["@context"];if(A($))se["@context"]=_(S,$);else if(b($))for(let ce=0;ce<$.length;++ce){const X=$[ce];A(X)?$[ce]=_(S,X):k(X)&&U({context:{"@context":X},base:S})}else if(k($))for(const ce in $)U({context:$[ce],base:S})}te.exports=class{constructor({sharedCache:S}){this.perOpCache=new Map,this.sharedCache=S}resolve({activeCtx:S,context:$,documentLoader:ce,base:X,cycles:ie=new Set}){var ee=this;return E(function*(){$&&k($)&&$["@context"]&&($=$["@context"]),$=P($);const K=[];for(const V of $){if(A(V)){let I=ee._get(V);I||(I=yield ee._resolveRemoteContext({activeCtx:S,url:V,documentLoader:ce,base:X,cycles:ie})),b(I)?K.push(...I):K.push(I);continue}if(null===V){K.push(new T({document:null}));continue}k(V)||N($);const x=JSON.stringify(V);let B=ee._get(x);B||(B=new T({document:V}),ee._cacheResolvedContext({key:x,resolved:B,tag:"static"})),K.push(B)}return K})()}_get(S){let $=this.perOpCache.get(S);if(!$){const ce=this.sharedCache.get(S);ce&&($=ce.get("static"),$&&this.perOpCache.set(S,$))}return $}_cacheResolvedContext({key:S,resolved:$,tag:ce}){if(this.perOpCache.set(S,$),void 0!==ce){let X=this.sharedCache.get(S);X||(X=new Map,this.sharedCache.set(S,X)),X.set(ce,$)}return $}_resolveRemoteContext({activeCtx:S,url:$,documentLoader:ce,base:X,cycles:ie}){var ee=this;return E(function*(){$=_(X,$);const{context:K,remoteDoc:V}=yield ee._fetchContext({activeCtx:S,url:$,documentLoader:ce,cycles:ie});U({context:K,base:X=V.documentUrl||$});const x=yield ee.resolve({activeCtx:S,context:K,documentLoader:ce,base:X,cycles:ie});return ee._cacheResolvedContext({key:$,resolved:x,tag:V.tag}),x})()}_fetchContext({activeCtx:S,url:$,documentLoader:ce,cycles:X}){return E(function*(){if(X.size>10)throw new y("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===S.processingMode?"loading remote context failed":"context overflow",max:10});if(X.has($))throw new y("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===S.processingMode?"recursive context inclusion":"context overflow",url:$});let ie,ee;X.add($);try{ee=yield ce($),ie=ee.document||null,A(ie)&&(ie=JSON.parse(ie))}catch(K){throw new y("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:$,cause:K})}if(!k(ie))throw new y("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:$});return ie="@context"in ie?{"@context":ie["@context"]}:{"@context":{}},ee.contextUrl&&(b(ie["@context"])||(ie["@context"]=[ie["@context"]]),ie["@context"].push(ee.contextUrl)),{context:ie,remoteDoc:ee}})()}}},1874:te=>{"use strict";te.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",E="jsonld.Error",b={}){super(g),this.name=E,this.message=g,this.details=b}}},1828:te=>{"use strict";te.exports=Z=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(E,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Z.compact(E,b)},g.expand=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Z.expand(E)},g.flatten=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Z.flatten(E)},g}},7260:(te,Z,g)=>{"use strict";te.exports=g(1986).NQuads},4044:(te,Z,g)=>{"use strict";var E=g(7156).default;te.exports=class{constructor(){this._requests={}}wrapLoader(k){const A=this;return A._loader=k,function(){return A.add.apply(A,arguments)}}add(k){var A=this;return E(function*(){let P=A._requests[k];if(P)return Promise.resolve(P);P=A._requests[k]=A._loader(k);try{return yield P}finally{delete A._requests[k]}})()}}},1252:(te,Z,g)=>{"use strict";const E=g(1072);te.exports=class{constructor({document:A}){this.document=A,this.cache=new E({max:10})}getProcessed(A){return this.cache.get(A)}setProcessed(A,P){this.cache.set(A,P)}}},8809:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),{isArray:k,isObject:A,isString:P,isUndefined:_}=g(8254),{isList:y,isValue:T,isGraph:F,isSimpleGraph:N,isSubjectReference:U}=g(543),{expandIri:se,getContextValue:S,isKeyword:$,process:ce,processingMode:X}=g(9611),{removeBase:ie,prependBase:ee}=g(2651),{REGEX_KEYWORD:K,addValue:V,asArray:x,compareShortestLeast:B}=g(3521),I={};function W(Ce,le,xe){if("@nest"!==se(Ce,le,{vocab:!0},xe))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}te.exports=I,I.compact=function(){var Ce=E(function*({activeCtx:le,activeProperty:xe=null,element:Ie,options:Re={}}){if(k(Ie)){let Xe=[];for(let Se=0;Se<Ie.length;++Se){const Ne=yield I.compact({activeCtx:le,activeProperty:xe,element:Ie[Se],options:Re});null!==Ne&&Xe.push(Ne)}return Re.compactArrays&&1===Xe.length&&0===(S(le,xe,"@container")||[]).length&&(Xe=Xe[0]),Xe}const et=S(le,xe,"@context");if(_(et)||(le=yield ce({activeCtx:le,localCtx:et,propagate:!0,overrideProtected:!0,options:Re})),A(Ie)){if(Re.link&&"@id"in Ie&&Re.link.hasOwnProperty(Ie["@id"])){const Ke=Re.link[Ie["@id"]];for(let ot=0;ot<Ke.length;++ot)if(Ke[ot].expanded===Ie)return Ke[ot].compacted}if(T(Ie)||U(Ie)){const Ke=I.compactValue({activeCtx:le,activeProperty:xe,value:Ie,options:Re});return Re.link&&U(Ie)&&(Re.link.hasOwnProperty(Ie["@id"])||(Re.link[Ie["@id"]]=[]),Re.link[Ie["@id"]].push({expanded:Ie,compacted:Ke})),Ke}if(y(Ie)&&(S(le,xe,"@container")||[]).includes("@list"))return I.compact({activeCtx:le,activeProperty:xe,element:Ie["@list"],options:Re});const Xe="@reverse"===xe,Se={},Ne=le;!T(Ie)&&!U(Ie)&&(le=le.revertToPreviousContext());const ke=S(Ne,xe,"@context");_(ke)||(le=yield ce({activeCtx:le,localCtx:ke,propagate:!0,overrideProtected:!0,options:Re})),Re.link&&"@id"in Ie&&(Re.link.hasOwnProperty(Ie["@id"])||(Re.link[Ie["@id"]]=[]),Re.link[Ie["@id"]].push({expanded:Ie,compacted:Se}));let Ve=Ie["@type"]||[];Ve.length>1&&(Ve=Array.from(Ve).sort());const me=le;for(const Ke of Ve){const ot=I.compactIri({activeCtx:me,iri:Ke,relativeTo:{vocab:!0}}),We=S(Ne,ot,"@context");_(We)||(le=yield ce({activeCtx:le,localCtx:We,options:Re,propagate:!1}))}const Ae=Object.keys(Ie).sort();for(const Ke of Ae){const ot=Ie[Ke];if("@id"!==Ke)if("@type"!==Ke)if("@reverse"!==Ke)if("@preserve"!==Ke)if("@index"!==Ke)if("@graph"!==Ke&&"@list"!==Ke&&"@included"!==Ke&&$(Ke)){const We=I.compactIri({activeCtx:le,iri:Ke,relativeTo:{vocab:!0}});V(Se,We,ot)}else{if(!k(ot))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ot.length){const We=I.compactIri({activeCtx:le,iri:Ke,value:ot,relativeTo:{vocab:!0},reverse:Xe}),_e=le.mappings.has(We)?le.mappings.get(We)["@nest"]:null;let G=Se;_e&&(W(le,_e,Re),A(Se[_e])||(Se[_e]={}),G=Se[_e]),V(G,We,ot,{propertyIsArray:!0})}for(const We of ot){const _e=I.compactIri({activeCtx:le,iri:Ke,value:We,relativeTo:{vocab:!0},reverse:Xe}),G=le.mappings.has(_e)?le.mappings.get(_e)["@nest"]:null;let O=Se;G&&(W(le,G,Re),A(Se[G])||(Se[G]={}),O=Se[G]);const oe=S(le,_e,"@container")||[],z=F(We),Le=y(We);let Ye;Le?Ye=We["@list"]:z&&(Ye=We["@graph"]);let he=yield I.compact({activeCtx:le,activeProperty:_e,element:Le||z?Ye:We,options:Re});if(Le){if(k(he)||(he=[he]),oe.includes("@list")){V(O,_e,he,{valueIsArray:!0,allowDuplicate:!0});continue}he={[I.compactIri({activeCtx:le,iri:"@list",relativeTo:{vocab:!0}})]:he},"@index"in We&&(he[I.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=We["@index"])}if(z)if(oe.includes("@graph")&&(oe.includes("@id")||oe.includes("@index")&&N(We))){let Q;O.hasOwnProperty(_e)?Q=O[_e]:O[_e]=Q={};const H=(oe.includes("@id")?We["@id"]:We["@index"])||I.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}});V(Q,H,he,{propertyIsArray:!Re.compactArrays||oe.includes("@set")})}else oe.includes("@graph")&&N(We)?(k(he)&&he.length>1&&(he={"@included":he}),V(O,_e,he,{propertyIsArray:!Re.compactArrays||oe.includes("@set")})):(k(he)&&1===he.length&&Re.compactArrays&&(he=he[0]),he={[I.compactIri({activeCtx:le,iri:"@graph",relativeTo:{vocab:!0}})]:he},"@id"in We&&(he[I.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=We["@id"]),"@index"in We&&(he[I.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=We["@index"]),V(O,_e,he,{propertyIsArray:!Re.compactArrays||oe.includes("@set")}));else if(oe.includes("@language")||oe.includes("@index")||oe.includes("@id")||oe.includes("@type")){let Q,H;if(O.hasOwnProperty(_e)?Q=O[_e]:O[_e]=Q={},oe.includes("@language"))T(he)&&(he=he["@value"]),H=We["@language"];else if(oe.includes("@index")){const D=S(le,_e,"@index")||"@index",M=I.compactIri({activeCtx:le,iri:D,relativeTo:{vocab:!0}});if("@index"===D)H=We["@index"],delete he[M];else{let de;if([H,...de]=x(he[D]||[]),P(H))switch(de.length){case 0:delete he[D];break;case 1:he[D]=de[0];break;default:he[D]=de}else H=null}}else if(oe.includes("@id")){const D=I.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}});H=he[D],delete he[D]}else if(oe.includes("@type")){const D=I.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}});let M;switch([H,...M]=x(he[D]||[]),M.length){case 0:delete he[D];break;case 1:he[D]=M[0];break;default:he[D]=M}1===Object.keys(he).length&&"@id"in We&&(he=yield I.compact({activeCtx:le,activeProperty:_e,element:{"@id":We["@id"]},options:Re}))}H||(H=I.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}})),V(Q,H,he,{propertyIsArray:oe.includes("@set")})}else{const Q=!Re.compactArrays||oe.includes("@set")||oe.includes("@list")||k(he)&&0===he.length||"@list"===Ke||"@graph"===Ke;V(O,_e,he,{propertyIsArray:Q})}}}else{if((S(le,xe,"@container")||[]).includes("@index"))continue;const _e=I.compactIri({activeCtx:le,iri:Ke,relativeTo:{vocab:!0}});V(Se,_e,ot)}else{const We=yield I.compact({activeCtx:le,activeProperty:xe,element:ot,options:Re});k(We)&&0===We.length||V(Se,Ke,We)}else{const We=yield I.compact({activeCtx:le,activeProperty:"@reverse",element:ot,options:Re});for(const _e in We)if(le.mappings.has(_e)&&le.mappings.get(_e).reverse){const G=We[_e],oe=(S(le,_e,"@container")||[]).includes("@set")||!Re.compactArrays;V(Se,_e,G,{propertyIsArray:oe}),delete We[_e]}if(Object.keys(We).length>0){const _e=I.compactIri({activeCtx:le,iri:Ke,relativeTo:{vocab:!0}});V(Se,_e,We)}}else{let We=x(ot).map(z=>I.compactIri({activeCtx:Ne,iri:z,relativeTo:{vocab:!0}}));1===We.length&&(We=We[0]);const _e=I.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}}),oe=(S(le,_e,"@container")||[]).includes("@set")&&X(le,1.1)||k(We)&&0===ot.length;V(Se,_e,We,{propertyIsArray:oe})}else{let We=x(ot).map(G=>I.compactIri({activeCtx:le,iri:G,relativeTo:{vocab:!1},base:Re.base}));1===We.length&&(We=We[0]),Se[I.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=We}}return Se}return Ie});return function(le){return Ce.apply(this,arguments)}}(),I.compactIri=({activeCtx:Ce,iri:le,value:xe=null,relativeTo:Ie={vocab:!1},reverse:Re=!1,base:et=null})=>{if(null===le)return le;Ce.isPropertyTermScoped&&Ce.previousContext&&(Ce=Ce.previousContext);const Xe=Ce.getInverse();if($(le)&&le in Xe&&"@none"in Xe[le]&&"@type"in Xe[le]["@none"]&&"@none"in Xe[le]["@none"]["@type"])return Xe[le]["@none"]["@type"]["@none"];if(Ie.vocab&&le in Xe){const me=Ce["@language"]||"@none",Ae=[];A(xe)&&"@index"in xe&&!("@graph"in xe)&&Ae.push("@index","@index@set"),A(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),F(xe)?("@index"in xe&&Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Ae.push("@graph@id","@graph@id@set"),Ae.push("@graph","@graph@set","@set"),"@index"in xe||Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Ae.push("@graph@id","@graph@id@set")):A(xe)&&!T(xe)&&Ae.push("@id","@id@set","@type","@set@type");let Ke="@language",ot="@null";if(Re)Ke="@type",ot="@reverse",Ae.push("@set");else if(y(xe)){"@index"in xe||Ae.push("@list");const _e=xe["@list"];if(0===_e.length)Ke="@any",ot="@none";else{let G=0===_e.length?me:null,O=null;for(let oe=0;oe<_e.length;++oe){const z=_e[oe];let Le="@none",Ye="@none";if(T(z)?"@direction"in z?Le=`${(z["@language"]||"").toLowerCase()}_${z["@direction"]}`:"@language"in z?Le=z["@language"].toLowerCase():"@type"in z?Ye=z["@type"]:Le="@null":Ye="@id",null===G?G=Le:Le!==G&&T(z)&&(G="@none"),null===O?O=Ye:Ye!==O&&(O="@none"),"@none"===G&&"@none"===O)break}G=G||"@none",O=O||"@none","@none"!==O?(Ke="@type",ot=O):ot=G}}else{if(T(xe))if("@language"in xe&&!("@index"in xe)){Ae.push("@language","@language@set"),ot=xe["@language"];const _e=xe["@direction"];_e&&(ot=`${ot}_${_e}`)}else"@direction"in xe&&!("@index"in xe)?ot=`_${xe["@direction"]}`:"@type"in xe&&(Ke="@type",ot=xe["@type"]);else Ke="@type",ot="@id";Ae.push("@set")}Ae.push("@none"),A(xe)&&!("@index"in xe)&&Ae.push("@index","@index@set"),T(xe)&&1===Object.keys(xe).length&&Ae.push("@language","@language@set");const We=function ue(Ce,le,xe,Ie,Re,et){null===et&&(et="@null");const Xe=[];if(("@id"===et||"@reverse"===et)&&A(xe)&&"@id"in xe){"@reverse"===et&&Xe.push("@reverse");const Ne=I.compactIri({activeCtx:Ce,iri:xe["@id"],relativeTo:{vocab:!0}});Ce.mappings.has(Ne)&&Ce.mappings.get(Ne)&&Ce.mappings.get(Ne)["@id"]===xe["@id"]?Xe.push.apply(Xe,["@vocab","@id"]):Xe.push.apply(Xe,["@id","@vocab"])}else{Xe.push(et);const Ne=Xe.find(ke=>ke.includes("_"));Ne&&Xe.push(Ne.replace(/^[^_]+_/,"_"))}Xe.push("@none");const Se=Ce.inverse[le];for(const Ne of Ie){if(!(Ne in Se))continue;const ke=Se[Ne][Re];for(const Ve of Xe)if(Ve in ke)return ke[Ve]}return null}(Ce,le,xe,Ae,Ke,ot);if(null!==We)return We}if(Ie.vocab&&"@vocab"in Ce){const me=Ce["@vocab"];if(0===le.indexOf(me)&&le!==me){const Ae=le.substr(me.length);if(!Ce.mappings.has(Ae))return Ae}}let Se=null;const Ne=[];let ke=Ce.fastCurieMap;const Ve=le.length-1;for(let me=0;me<Ve&&le[me]in ke;++me)ke=ke[le[me]],""in ke&&Ne.push(ke[""][0]);for(let me=Ne.length-1;me>=0;--me){const Ae=Ne[me],Ke=Ae.terms;for(const ot of Ke){const We=ot+":"+le.substr(Ae.iri.length);Ce.mappings.get(ot)._prefix&&(!Ce.mappings.has(We)||null===xe&&Ce.mappings.get(We)["@id"]===le)&&(null===Se||B(We,Se)<0)&&(Se=We)}}if(null!==Se)return Se;for(const[me,Ae]of Ce.mappings)if(Ae&&Ae._prefix&&le.startsWith(me+":"))throw new b(`Absolute IRI "${le}" confused with prefix "${me}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Ce});if(!Ie.vocab){if("@base"in Ce){if(Ce["@base"]){const me=ie(ee(et,Ce["@base"]),le);return K.test(me)?`./${me}`:me}return le}return ie(et,le)}return le},I.compactValue=({activeCtx:Ce,activeProperty:le,value:xe,options:Ie})=>{if(T(xe)){const Se=S(Ce,le,"@type"),Ne=S(Ce,le,"@language"),ke=S(Ce,le,"@direction"),Ve=S(Ce,le,"@container")||[],me="@index"in xe&&!Ve.includes("@index");if(!me&&"@none"!==Se&&(xe["@type"]===Se||"@language"in xe&&xe["@language"]===Ne&&"@direction"in xe&&xe["@direction"]===ke||"@language"in xe&&xe["@language"]===Ne||"@direction"in xe&&xe["@direction"]===ke))return xe["@value"];const Ae=Object.keys(xe).length,Ke=1===Ae||2===Ae&&"@index"in xe&&!me,ot="@language"in Ce,We=P(xe["@value"]),_e=Ce.mappings.has(le)&&null===Ce.mappings.get(le)["@language"];if(Ke&&"@none"!==Se&&(!ot||!We||_e))return xe["@value"];const G={};return me&&(G[I.compactIri({activeCtx:Ce,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?G[I.compactIri({activeCtx:Ce,iri:"@type",relativeTo:{vocab:!0}})]=I.compactIri({activeCtx:Ce,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(G[I.compactIri({activeCtx:Ce,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(G[I.compactIri({activeCtx:Ce,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),G[I.compactIri({activeCtx:Ce,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],G}const Re=se(Ce,le,{vocab:!0},Ie),et=S(Ce,le,"@type"),Xe=I.compactIri({activeCtx:Ce,iri:xe["@id"],relativeTo:{vocab:"@vocab"===et},base:Ie.base});return"@id"===et||"@vocab"===et||"@graph"===Re?Xe:{[I.compactIri({activeCtx:Ce,iri:"@id",relativeTo:{vocab:!0}})]:Xe}}},6982:te=>{"use strict";const Z="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";te.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Z,RDF_LIST:Z+"List",RDF_FIRST:Z+"first",RDF_REST:Z+"rest",RDF_NIL:Z+"nil",RDF_TYPE:Z+"type",RDF_PLAIN_LITERAL:Z+"PlainLiteral",RDF_XML_LITERAL:Z+"XMLLiteral",RDF_JSON_LITERAL:Z+"JSON",RDF_OBJECT:Z+"object",RDF_LANGSTRING:Z+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(3521),k=g(1874),{isArray:A,isObject:P,isString:_,isUndefined:y}=g(8254),{isAbsolute:T,isRelative:F,prependBase:N}=g(2651),{handleEvent:U}=g(3855),{REGEX_BCP47:se,REGEX_KEYWORD:S,asArray:$,compareShortestLeast:ce}=g(3521),X=new Map,ee={};function K(x,B,I,ue,W,Ce){if(null===B||!_(B)||ee.isKeyword(B))return B;if(B.match(S))return null;if(ue&&ue.hasOwnProperty(B)&&!0!==W.get(B)&&ee.createTermDefinition({activeCtx:x,localCtx:ue,term:B,defined:W,options:Ce}),(I=I||{}).vocab){const xe=x.mappings.get(B);if(null===xe)return null;if(P(xe)&&"@id"in xe)return xe["@id"]}const le=B.indexOf(":");if(le>0){const xe=B.substr(0,le),Ie=B.substr(le+1);if("_"===xe||0===Ie.indexOf("//"))return B;ue&&ue.hasOwnProperty(xe)&&ee.createTermDefinition({activeCtx:x,localCtx:ue,term:xe,defined:W,options:Ce});const Re=x.mappings.get(xe);if(Re&&Re._prefix)return Re["@id"]+Ie;if(T(B))return B}if(I.vocab&&"@vocab"in x)B=x["@vocab"]+B;else if(I.base){let xe,Ie;"@base"in x?x["@base"]?(Ie=N(Ce.base,x["@base"]),xe=N(Ie,B)):(Ie=x["@base"],xe=B):(Ie=Ce.base,xe=N(Ce.base,B)),B=xe}return B}function V(x,B){if(!x||"object"!=typeof x||!B||"object"!=typeof B)return x===B;const I=Array.isArray(x);if(I!==Array.isArray(B))return!1;if(I){if(x.length!==B.length)return!1;for(let Ce=0;Ce<x.length;++Ce)if(!V(x[Ce],B[Ce]))return!1;return!0}const ue=Object.keys(x),W=Object.keys(B);if(ue.length!==W.length)return!1;for(const Ce in x){let le=x[Ce],xe=B[Ce];if("@container"===Ce&&Array.isArray(le)&&Array.isArray(xe)&&(le=le.slice().sort(),xe=xe.slice().sort()),!V(le,xe))return!1}return!0}te.exports=ee,ee.process=function(){var x=E(function*({activeCtx:B,localCtx:I,options:ue,propagate:W=!0,overrideProtected:Ce=!1,cycles:le=new Set}){if(P(I)&&"@context"in I&&A(I["@context"])&&(I=I["@context"]),0===$(I).length)return B;const Ie=[],Re=[({event:Ne,next:ke})=>{Ie.push(Ne),ke()}];ue.eventHandler&&Re.push(ue.eventHandler);const et=ue;ue={...ue,eventHandler:Re};const Xe=yield ue.contextResolver.resolve({activeCtx:B,context:I,documentLoader:ue.documentLoader,base:ue.base});P(Xe[0].document)&&"boolean"==typeof Xe[0].document["@propagate"]&&(W=Xe[0].document["@propagate"]);let Se=B;!W&&!Se.previousContext&&(Se=Se.clone(),Se.previousContext=B);for(const Ne of Xe){let{document:ke}=Ne;if(B=Se,null===ke){if(!Ce&&0!==Object.keys(B.protected).length)throw new k("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Se=B=ee.getInitialContext(ue).clone();continue}const Ve=Ne.getProcessed(B);if(Ve){if(et.eventHandler)for(const Ae of Ve.events)U({event:Ae,options:et});Se=B=Ve.context;continue}if(P(ke)&&"@context"in ke&&(ke=ke["@context"]),!P(ke))throw new k("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ke});Se=Se.clone();const me=new Map;if("@version"in ke){if(1.1!==ke["@version"])throw new k("Unsupported JSON-LD version: "+ke["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ke});if(B.processingMode&&"json-ld-1.0"===B.processingMode)throw new k("@version: "+ke["@version"]+" not compatible with "+B.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ke});Se.processingMode="json-ld-1.1",Se["@version"]=ke["@version"],me.set("@version",!0)}if(Se.processingMode=Se.processingMode||B.processingMode,"@base"in ke){let Ae=ke["@base"];if(null!==Ae&&!T(Ae)){if(!F(Ae))throw new k('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ke});Ae=N(Se["@base"],Ae)}Se["@base"]=Ae,me.set("@base",!0)}if("@vocab"in ke){const Ae=ke["@vocab"];if(null===Ae)delete Se["@vocab"];else{if(!_(Ae))throw new k('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});if(!T(Ae)&&ee.processingMode(Se,1))throw new k('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});{const Ke=K(Se,Ae,{vocab:!0,base:!0},void 0,void 0,ue);T(Ke)||ue.eventHandler&&U({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Ke}},options:ue}),Se["@vocab"]=Ke}}me.set("@vocab",!0)}if("@language"in ke){const Ae=ke["@language"];if(null===Ae)delete Se["@language"];else{if(!_(Ae))throw new k('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ke});Ae.match(se)||ue.eventHandler&&U({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ae}},options:ue}),Se["@language"]=Ae.toLowerCase()}me.set("@language",!0)}if("@direction"in ke){const Ae=ke["@direction"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @direction not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ke});if(null===Ae)delete Se["@direction"];else{if("ltr"!==Ae&&"rtl"!==Ae)throw new k('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ke});Se["@direction"]=Ae}me.set("@direction",!0)}if("@propagate"in ke){const Ae=ke["@propagate"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @propagate not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if("boolean"!=typeof Ae)throw new k("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:I});me.set("@propagate",!0)}if("@import"in ke){const Ae=ke["@import"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @import not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if(!_(Ae))throw new k("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:I});const Ke=yield ue.contextResolver.resolve({activeCtx:B,context:Ae,documentLoader:ue.documentLoader,base:ue.base});if(1!==Ke.length)throw new k("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:I});const ot=Ke[0].getProcessed(B);if(ot)ke=ot;else{const We=Ke[0].document;if("@import"in We)throw new k("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:I});for(const _e in We)ke.hasOwnProperty(_e)||(ke[_e]=We[_e]);Ke[0].setProcessed(B,ke)}me.set("@import",!0)}me.set("@protected",ke["@protected"]||!1);for(const Ae in ke)if(ee.createTermDefinition({activeCtx:Se,localCtx:ke,term:Ae,defined:me,options:ue,overrideProtected:Ce}),P(ke[Ae])&&"@context"in ke[Ae]){const Ke=ke[Ae]["@context"];let ot=!0;if(_(Ke)){const We=N(ue.base,Ke);le.has(We)?ot=!1:le.add(We)}if(ot)try{yield ee.process({activeCtx:Se.clone(),localCtx:ke[Ae]["@context"],overrideProtected:!0,options:ue,cycles:le})}catch{throw new k("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ke[Ae]["@context"],term:Ae})}}Ne.setProcessed(B,{context:Se,events:Ie})}return Se});return function(B){return x.apply(this,arguments)}}(),ee.createTermDefinition=({activeCtx:x,localCtx:B,term:I,defined:ue,options:W,overrideProtected:Ce=!1})=>{if(ue.has(I)){if(ue.get(I))return;throw new k("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:B,term:I})}let le;if(ue.set(I,!1),B.hasOwnProperty(I)&&(le=B[I]),"@type"===I&&P(le)&&"@set"===(le["@container"]||"@set")&&ee.processingMode(x,1.1)){const Ne=["@container","@id","@protected"],ke=Object.keys(le);if(0===ke.length||ke.some(Ve=>!Ne.includes(Ve)))throw new k("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:I})}else{if(ee.isKeyword(I))throw new k("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:I});if(I.match(S))return void(W.eventHandler&&U({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:I}},options:W}));if(""===I)throw new k("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:B})}const xe=x.mappings.get(I);x.mappings.has(I)&&x.mappings.delete(I);let Ie=!1;if((_(le)||null===le)&&(Ie=!0,le={"@id":le}),!P(le))throw new k("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:B});const Re={};x.mappings.set(I,Re),Re.reverse=!1;const et=["@container","@id","@language","@reverse","@type"];ee.processingMode(x,1.1)&&et.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ne in le)if(!et.includes(Ne))throw new k("Invalid JSON-LD syntax; a term definition must not contain "+Ne,"jsonld.SyntaxError",{code:"invalid term definition",context:B});const Xe=I.indexOf(":");if(Re._termHasColon=Xe>0,"@reverse"in le){if("@id"in le)throw new k("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});if("@nest"in le)throw new k("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});const Ne=le["@reverse"];if(!_(Ne))throw new k("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(Ne.match(S))return W.eventHandler&&U({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ne}},options:W}),void(xe?x.mappings.set(I,xe):x.mappings.delete(I));const ke=K(x,Ne,{vocab:!0,base:!1},B,ue,W);if(!T(ke))throw new k("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});Re["@id"]=ke,Re.reverse=!0}else if("@id"in le){let Ne=le["@id"];if(Ne&&!_(Ne))throw new k("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(null===Ne)Re["@id"]=null;else{if(!ee.isKeyword(Ne)&&Ne.match(S))return W.eventHandler&&U({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ne}},options:W}),void(xe?x.mappings.set(I,xe):x.mappings.delete(I));if(Ne!==I){if(Ne=K(x,Ne,{vocab:!0,base:!1},B,ue,W),!T(Ne)&&!ee.isKeyword(Ne))throw new k("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(I.match(/(?::[^:])|\//)&&K(x,I,{vocab:!0,base:!1},B,new Map(ue).set(I,!0),W)!==Ne)throw new k("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});Re["@id"]=Ne,Re._prefix=Ie&&!Re._termHasColon&&Ne.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Re))if(Re._termHasColon){const Ne=I.substr(0,Xe);if(B.hasOwnProperty(Ne)&&ee.createTermDefinition({activeCtx:x,localCtx:B,term:Ne,defined:ue,options:W}),x.mappings.has(Ne)){const ke=I.substr(Xe+1);Re["@id"]=x.mappings.get(Ne)["@id"]+ke}else Re["@id"]=I}else if("@type"===I)Re["@id"]=I;else{if(!("@vocab"in x))throw new k("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B,term:I});Re["@id"]=x["@vocab"]+I}if((!0===le["@protected"]||!0===ue.get("@protected")&&!1!==le["@protected"])&&(x.protected[I]=!0,Re.protected=!0),ue.set(I,!0),"@type"in le){let Ne=le["@type"];if(!_(Ne))throw new k("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if("@json"===Ne||"@none"===Ne){if(ee.processingMode(x,1))throw new k(`Invalid JSON-LD syntax; an @context @type value must not be "${Ne}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else if("@id"!==Ne&&"@vocab"!==Ne){if(Ne=K(x,Ne,{vocab:!0,base:!1},B,ue,W),!T(Ne))throw new k("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if(0===Ne.indexOf("_:"))throw new k("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}Re["@type"]=Ne}if("@container"in le){const Ne=_(le["@container"])?[le["@container"]]:le["@container"]||[],ke=["@list","@set","@index","@language"];let Ve=!0;const me=Ne.includes("@set");if(ee.processingMode(x,1.1)){if(ke.push("@graph","@id","@type"),Ne.includes("@list")){if(1!==Ne.length)throw new k("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else if(Ne.includes("@graph")){if(Ne.some(Ae=>"@graph"!==Ae&&"@id"!==Ae&&"@index"!==Ae&&"@set"!==Ae))throw new k("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else Ve&=Ne.length<=(me?2:1);if(Ne.includes("@type")&&(Re["@type"]=Re["@type"]||"@id",!["@id","@vocab"].includes(Re["@type"])))throw new k("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else Ve&=!A(le["@container"]),Ve&=Ne.length<=1;if(Ve&=Ne.every(Ae=>ke.includes(Ae)),Ve&=!(me&&Ne.includes("@list")),!Ve)throw new k("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ke.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:B});if(Re.reverse&&!Ne.every(Ae=>["@index","@set"].includes(Ae)))throw new k("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});Re["@container"]=Ne}if("@index"in le){if(!("@container"in le)||!Re["@container"].includes("@index"))throw new k(`Invalid JSON-LD syntax; @index without @index in @container: "${le["@index"]}" on term "${I}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});if(!_(le["@index"])||0===le["@index"].indexOf("@"))throw new k(`Invalid JSON-LD syntax; @index must expand to an IRI: "${le["@index"]}" on term "${I}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});Re["@index"]=le["@index"]}if("@context"in le&&(Re["@context"]=le["@context"]),"@language"in le&&!("@type"in le)){let Ne=le["@language"];if(null!==Ne&&!_(Ne))throw new k("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:B});null!==Ne&&(Ne=Ne.toLowerCase()),Re["@language"]=Ne}if("@prefix"in le){if(I.match(/:|\//))throw new k("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:B});if(ee.isKeyword(Re["@id"]))throw new k("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:B});if("boolean"!=typeof le["@prefix"])throw new k("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:B});Re._prefix=!0===le["@prefix"]}if("@direction"in le){const Ne=le["@direction"];if(null!==Ne&&"ltr"!==Ne&&"rtl"!==Ne)throw new k('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:B});Re["@direction"]=Ne}if("@nest"in le){const Ne=le["@nest"];if(!_(Ne)||"@nest"!==Ne&&0===Ne.indexOf("@"))throw new k("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:B});Re["@nest"]=Ne}const Se=Re["@id"];if("@context"===Se||"@preserve"===Se)throw new k("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:B});if(xe&&xe.protected&&!Ce&&(x.protected[I]=!0,Re.protected=!0,!V(xe,Re)))throw new k("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:B,term:I})},ee.expandIri=(x,B,I,ue)=>K(x,B,I,void 0,void 0,ue),ee.getInitialContext=x=>{const B=JSON.stringify({processingMode:x.processingMode}),I=X.get(B);if(I)return I;const ue={processingMode:x.processingMode,mappings:new Map,inverse:null,getInverse:function W(){const Re=this;if(Re.inverse)return Re.inverse;const et=Re.inverse={},Xe=Re.fastCurieMap={},Se={},Ne=(Re["@language"]||"@none").toLowerCase(),ke=Re["@direction"],Ve=Re.mappings,me=[...Ve.keys()].sort(ce);for(const Ae of me){const Ke=Ve.get(Ae);if(null===Ke)continue;let ot=Ke["@container"]||"@none";if(ot=[].concat(ot).sort().join(""),null===Ke["@id"])continue;const We=$(Ke["@id"]);for(const _e of We){let G=et[_e];const O=ee.isKeyword(_e);if(G)!O&&!Ke._termHasColon&&Se[_e].push(Ae);else if(et[_e]=G={},!O&&!Ke._termHasColon){Se[_e]=[Ae];const oe={iri:_e,terms:Se[_e]};_e[0]in Xe?Xe[_e[0]].push(oe):Xe[_e[0]]=[oe]}if(G[ot]||(G[ot]={"@language":{},"@type":{},"@any":{}}),G=G[ot],le(Ae,G["@any"],"@none"),Ke.reverse)le(Ae,G["@type"],"@reverse");else if("@none"===Ke["@type"])le(Ae,G["@any"],"@none"),le(Ae,G["@language"],"@none"),le(Ae,G["@type"],"@none");else if("@type"in Ke)le(Ae,G["@type"],Ke["@type"]);else if("@language"in Ke&&"@direction"in Ke){const oe=Ke["@language"],z=Ke["@direction"];le(Ae,G["@language"],oe&&z?`${oe}_${z}`.toLowerCase():oe?oe.toLowerCase():z?`_${z}`:"@null")}else"@language"in Ke?le(Ae,G["@language"],(Ke["@language"]||"@null").toLowerCase()):"@direction"in Ke?le(Ae,G["@language"],Ke["@direction"]?`_${Ke["@direction"]}`:"@none"):ke?(le(Ae,G["@language"],`_${ke}`),le(Ae,G["@language"],"@none"),le(Ae,G["@type"],"@none")):(le(Ae,G["@language"],Ne),le(Ae,G["@language"],"@none"),le(Ae,G["@type"],"@none"))}}for(const Ae in Xe)Ce(Xe,Ae,1);return et},clone:function xe(){const Re={};return Re.mappings=b.clone(this.mappings),Re.clone=this.clone,Re.inverse=null,Re.getInverse=this.getInverse,Re.protected=b.clone(this.protected),this.previousContext&&(Re.previousContext=this.previousContext.clone()),Re.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Re["@base"]=this["@base"]),"@language"in this&&(Re["@language"]=this["@language"]),"@vocab"in this&&(Re["@vocab"]=this["@vocab"]),Re},revertToPreviousContext:function Ie(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===X.size&&X.clear(),X.set(B,ue),ue;function Ce(Re,et,Xe){const Se=Re[et],Ne=Re[et]={};let ke,Ve;for(const me of Se)ke=me.iri,Ve=Xe>=ke.length?"":ke[Xe],Ve in Ne?Ne[Ve].push(me):Ne[Ve]=[me];for(const me in Ne)""!==me&&Ce(Ne,me,Xe+1)}function le(Re,et,Xe){et.hasOwnProperty(Xe)||(et[Xe]=Re)}},ee.getContextValue=(x,B,I)=>{if(null===B)return"@context"===I?void 0:null;if(x.mappings.has(B)){const ue=x.mappings.get(B);if(y(I))return ue;if(ue.hasOwnProperty(I))return ue[I]}return"@language"===I&&I in x||"@direction"===I&&I in x?x[I]:"@context"!==I?null:void 0},ee.processingMode=(x,B)=>B.toString()>="1.1"?!x.processingMode||x.processingMode>="json-ld-"+B.toString():"json-ld-1.0"===x.processingMode,ee.isKeyword=x=>{if(!_(x)||"@"!==x[0])return!1;switch(x){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(te,Z,g)=>{"use strict";var E=g(7156).default;const{parseLinkHeader:b,buildHeaders:k}=g(3521),{LINK_HEADER_CONTEXT:A}=g(6982),P=g(1874),_=g(4044),{prependBase:y}=g(2651),T=/(^|(\r\n))link:/i;te.exports=({secure:N,headers:U={},xhr:se}={headers:{}})=>{return U=k(U),(new _).wrapLoader($);function $(X){return ce.apply(this,arguments)}function ce(){return ce=E(function*(X){if(0!==X.indexOf("http:")&&0!==X.indexOf("https:"))throw new P('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:X});if(N&&0!==X.indexOf("https"))throw new P('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:X});let ie;try{ie=yield function F(N,U,se){const S=new(N=N||XMLHttpRequest);return new Promise(($,ce)=>{S.onload=()=>$(S),S.onerror=X=>ce(X),S.open("GET",U,!0);for(const X in se)S.setRequestHeader(X,se[X]);S.send()})}(se,X,U)}catch(B){throw new P("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:X,cause:B})}if(ie.status>=400)throw new P("URL could not be dereferenced: "+ie.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:X,httpStatusCode:ie.status});let ee={contextUrl:null,documentUrl:X,document:ie.response},K=null;const V=ie.getResponseHeader("Content-Type");let x;if(T.test(ie.getAllResponseHeaders())&&(x=ie.getResponseHeader("Link")),x&&"application/ld+json"!==V){const B=b(x),I=B[A];if(Array.isArray(I))throw new P("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:X});I&&(ee.contextUrl=I.target),K=B.alternate,K&&"application/ld+json"==K.type&&!(V||"").match(/^application\/(\w*\+)?json$/)&&(ee=yield $(y(X,K.target)))}return ee}),ce.apply(this,arguments)}}},3855:(te,Z,g)=>{"use strict";const E=g(1874),{isArray:b}=g(8254),{asArray:k}=g(3521),A={};function P({event:y,handlers:T}){let F=!0;for(let N=0;F&&N<T.length;++N){F=!1;const U=T[N];if(b(U))F=P({event:y,handlers:U});else if("function"==typeof U)U({event:y,next:()=>{F=!0}});else{if("object"!=typeof U)throw new E("Invalid event handler.","jsonld.InvalidEventHandler",{event:y});y.code in U?U[y.code]({event:y,next:()=>{F=!0}}):F=!0}}return F}te.exports=A,A.defaultEventHandler=null,A.setupEventHandler=({options:y={}})=>{const T=[].concat(y.safe?A.safeEventHandler:[],y.eventHandler?k(y.eventHandler):[],A.defaultEventHandler?A.defaultEventHandler:[]);return 0===T.length?null:T},A.handleEvent=({event:y,options:T})=>{P({event:y,handlers:T.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);A.safeEventHandler=function({event:T,next:F}){if("warning"===T.level&&_.has(T.code))throw new E("Safe mode validation error.","jsonld.ValidationError",{event:T});F()},A.logEventHandler=function({event:T,next:F}){console.log(`EVENT: ${T.message}`,{event:T}),F()},A.logWarningEventHandler=function({event:T,next:F}){"warning"===T.level&&console.warn(`WARNING: ${T.message}`,{event:T}),F()},A.unhandledEventHandler=function({event:T}){throw new E("No handler for event.","jsonld.UnhandledEvent",{event:T})},A.setDefaultEventHandler=function({eventHandler:y}={}){A.defaultEventHandler=y?k(y):null}},3860:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),{isArray:k,isObject:A,isEmptyObject:P,isString:_,isUndefined:y}=g(8254),{isList:T,isValue:F,isGraph:N,isSubject:U}=g(543),{expandIri:se,getContextValue:S,isKeyword:$,process:ce,processingMode:X}=g(9611),{isAbsolute:ie}=g(2651),{REGEX_BCP47:ee,REGEX_KEYWORD:K,addValue:V,asArray:x,getValues:B,validateTypeValue:I}=g(3521),{handleEvent:ue}=g(3855),W={};function Ce({value:Se,count:Ne,options:ke}){if(0===Ne||"@value"in Se||"@list"in Se||1===Ne&&"@id"in Se){if(ke.eventHandler){let Ve,me;0===Ne?(Ve="empty object",me="Dropping empty object."):"@value"in Se?(Ve="object with only @value",me="Dropping object with only @value."):"@list"in Se?(Ve="object with only @list",me="Dropping object with only @list."):1===Ne&&"@id"in Se&&(Ve="object with only @id",me="Dropping object with only @id."),ue({event:{type:["JsonLdEvent"],code:Ve,level:"warning",message:me,details:{value:Se}},options:ke})}return null}return Se}function le(Se){return xe.apply(this,arguments)}function xe(){return(xe=E(function*({activeCtx:Se,activeProperty:Ne,expandedActiveProperty:ke,element:Ve,expandedParent:me,options:Ae={},insideList:Ke,typeKey:ot,typeScopedContext:We}){const _e=Object.keys(Ve).sort(),G=[];let O;const oe=Ve[ot]&&"@json"===se(Se,k(Ve[ot])?Ve[ot][0]:Ve[ot],{vocab:!0},{...Ae,typeExpansion:!0});for(const z of _e){let Ye,Le=Ve[z];if("@context"===z)continue;const he=se(Se,z,{vocab:!0},Ae);if(null===he||!ie(he)&&!$(he)){Ae.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:z,expandedProperty:he}},options:Ae});continue}if($(he)){if("@reverse"===ke)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Le});if(he in me&&"@included"!==he&&"@type"!==he)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:he})}if("@id"===he){if(!_(Le)){if(!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Le});if(A(Le)){if(!P(Le))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le})}else{if(!k(Le))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le});if(!Le.every(M=>_(M)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le})}}V(me,"@id",x(Le).map(M=>{if(_(M)){const de=se(Se,M,{base:!0},Ae);return Ae.eventHandler&&(null===de?ue(null===M?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:M}},options:Ae}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:M}},options:Ae}):ie(de)||ue({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:M,expandedId:de}},options:Ae})),de}return M}),{propertyIsArray:Ae.isFrame});continue}if("@type"===he){A(Le)&&(Le=Object.fromEntries(Object.entries(Le).map(([M,de])=>[se(We,M,{vocab:!0}),x(de).map(ge=>se(We,ge,{base:!0,vocab:!0},{...Ae,typeExpansion:!0}))]))),I(Le,Ae.isFrame),V(me,"@type",x(Le).map(M=>{if(_(M)){const de=se(We,M,{base:!0,vocab:!0},{...Ae,typeExpansion:!0});return"@json"!==de&&!ie(de)&&Ae.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:M}},options:Ae}),de}return M}),{propertyIsArray:!!Ae.isFrame});continue}if("@included"===he&&X(Se,1.1)){const M=x(yield W.expand({activeCtx:Se,activeProperty:Ne,element:Le,options:Ae}));if(!M.every(de=>U(de)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Le});V(me,"@included",M,{propertyIsArray:!0});continue}if("@graph"===he&&!A(Le)&&!k(Le))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Le});if("@value"===he){O=Le,oe&&X(Se,1.1)?me["@value"]=Le:V(me,"@value",Le,{propertyIsArray:Ae.isFrame});continue}if("@language"===he){if(null===Le)continue;if(!_(Le)&&!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Le});Le=x(Le).map(M=>_(M)?M.toLowerCase():M);for(const M of Le)_(M)&&!M.match(ee)&&Ae.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:M}},options:Ae});V(me,"@language",Le,{propertyIsArray:Ae.isFrame});continue}if("@direction"===he){if(!_(Le)&&!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Le});Le=x(Le);for(const M of Le)if(_(M)&&"ltr"!==M&&"rtl"!==M)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Le});V(me,"@direction",Le,{propertyIsArray:Ae.isFrame});continue}if("@index"===he){if(!_(Le))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Le});V(me,"@index",Le);continue}if("@reverse"===he){if(!A(Le))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Le});if(Ye=yield W.expand({activeCtx:Se,activeProperty:"@reverse",element:Le,options:Ae}),"@reverse"in Ye)for(const de in Ye["@reverse"])V(me,de,Ye["@reverse"][de],{propertyIsArray:!0});let M=me["@reverse"]||null;for(const de in Ye){if("@reverse"===de)continue;null===M&&(M=me["@reverse"]={}),V(M,de,[],{propertyIsArray:!0});const ge=Ye[de];for(let ze=0;ze<ge.length;++ze){const qe=ge[ze];if(F(qe)||T(qe))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ye});V(M,de,qe,{propertyIsArray:!0})}}continue}if("@nest"===he){G.push(z);continue}let Q=Se;const H=S(Se,z,"@context");y(H)||(Q=yield ce({activeCtx:Se,localCtx:H,propagate:!0,overrideProtected:!0,options:Ae}));const D=S(Q,z,"@container")||[];if(D.includes("@language")&&A(Le))Ye=Re(Q,Le,S(Q,z,"@direction"),Ae);else if(D.includes("@index")&&A(Le)){const M=D.includes("@graph"),de=S(Q,z,"@index")||"@index",ge="@index"!==de&&se(Se,de,{vocab:!0},Ae);Ye=yield et({activeCtx:Q,options:Ae,activeProperty:z,value:Le,asGraph:M,indexKey:de,propertyIndex:ge})}else if(D.includes("@id")&&A(Le)){const M=D.includes("@graph");Ye=yield et({activeCtx:Q,options:Ae,activeProperty:z,value:Le,asGraph:M,indexKey:"@id"})}else if(D.includes("@type")&&A(Le))Ye=yield et({activeCtx:Q.revertToPreviousContext(),options:Ae,activeProperty:z,value:Le,asGraph:!1,indexKey:"@type"});else{const M="@list"===he;if(M||"@set"===he){let de=Ne;M&&"@graph"===ke&&(de=null),Ye=yield W.expand({activeCtx:Q,activeProperty:de,element:Le,options:Ae,insideList:M})}else Ye="@json"===S(Se,z,"@type")?{"@type":"@json","@value":Le}:yield W.expand({activeCtx:Q,activeProperty:z,element:Le,options:Ae,insideList:!1})}if(null!==Ye||"@value"===he){if("@list"!==he&&!T(Ye)&&D.includes("@list")&&(Ye={"@list":x(Ye)}),D.includes("@graph")&&!D.some(M=>"@id"===M||"@index"===M)){Ye=x(Ye);const M=Object.keys(Ye[0]).length;if(!Ae.isFrame&&null===Ce({value:Ye[0],count:M,options:Ae}))continue;Ye=Ye.map(de=>({"@graph":x(de)}))}if(Q.mappings.has(z)&&Q.mappings.get(z).reverse){const M=me["@reverse"]=me["@reverse"]||{};Ye=x(Ye);for(let de=0;de<Ye.length;++de){const ge=Ye[de];if(F(ge)||T(ge))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ye});V(M,he,ge,{propertyIsArray:!0})}continue}V(me,he,Ye,{propertyIsArray:!0})}}if("@value"in me&&("@json"!==me["@type"]||!X(Se,1.1))&&(A(O)||k(O))&&!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:O});for(const z of G){const Le=k(Ve[z])?Ve[z]:[Ve[z]];for(const Ye of Le){if(!A(Ye)||Object.keys(Ye).some(he=>"@value"===se(Se,he,{vocab:!0},Ae)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Ye});yield le({activeCtx:Se,activeProperty:Ne,expandedActiveProperty:ke,element:Ye,expandedParent:me,options:Ae,insideList:Ke,typeScopedContext:We,typeKey:ot})}}})).apply(this,arguments)}function Ie({activeCtx:Se,activeProperty:Ne,value:ke,options:Ve}){if(null==ke)return null;const me=se(Se,Ne,{vocab:!0},Ve);if("@id"===me)return se(Se,ke,{base:!0},Ve);if("@type"===me)return se(Se,ke,{vocab:!0,base:!0},{...Ve,typeExpansion:!0});const Ae=S(Se,Ne,"@type");if(("@id"===Ae||"@graph"===me)&&_(ke)){const ot=se(Se,ke,{base:!0},Ve);return null===ot&&ke.match(K)&&Ve.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ne}},options:Ve}),{"@id":ot}}if("@vocab"===Ae&&_(ke))return{"@id":se(Se,ke,{vocab:!0,base:!0},Ve)};if($(me))return ke;const Ke={};if(Ae&&!["@id","@vocab","@none"].includes(Ae))Ke["@type"]=Ae;else if(_(ke)){const ot=S(Se,Ne,"@language");null!==ot&&(Ke["@language"]=ot);const We=S(Se,Ne,"@direction");null!==We&&(Ke["@direction"]=We)}return["boolean","number","string"].includes(typeof ke)||(ke=ke.toString()),Ke["@value"]=ke,Ke}function Re(Se,Ne,ke,Ve){const me=[],Ae=Object.keys(Ne).sort();for(const Ke of Ae){const ot=se(Se,Ke,{vocab:!0},Ve);let We=Ne[Ke];k(We)||(We=[We]);for(const _e of We){if(null===_e)continue;if(!_(_e))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});const G={"@value":_e};"@none"!==ot&&(Ke.match(ee)||Ve.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ke}},options:Ve}),G["@language"]=Ke.toLowerCase()),ke&&(G["@direction"]=ke),me.push(G)}}return me}function et(Se){return Xe.apply(this,arguments)}function Xe(){return(Xe=E(function*({activeCtx:Se,options:Ne,activeProperty:ke,value:Ve,asGraph:me,indexKey:Ae,propertyIndex:Ke}){const ot=[],We=Object.keys(Ve).sort(),_e="@type"===Ae;for(let G of We){if(_e){const z=S(Se,G,"@context");y(z)||(Se=yield ce({activeCtx:Se,localCtx:z,propagate:!1,options:Ne}))}let oe,O=Ve[G];k(O)||(O=[O]),O=yield W.expand({activeCtx:Se,activeProperty:ke,element:O,options:Ne,insideList:!1,insideIndex:!0}),oe=Ke?"@none"===G?"@none":Ie({activeCtx:Se,activeProperty:Ae,value:G,options:Ne}):se(Se,G,{vocab:!0},Ne),"@id"===Ae?G=se(Se,G,{base:!0},Ne):_e&&(G=oe);for(let z of O){if(me&&!N(z)&&(z={"@graph":[z]}),"@type"===Ae)"@none"===oe||(z["@type"]=z["@type"]?[G].concat(z["@type"]):[G]);else{if(F(z)&&!["@language","@type","@index"].includes(Ae))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ae}".`,"jsonld.SyntaxError",{code:"invalid value object",value:z});Ke?"@none"!==oe&&V(z,Ke,oe,{propertyIsArray:!0,prependValue:!0}):"@none"!==oe&&!(Ae in z)&&(z[Ae]=G)}ot.push(z)}}return ot})).apply(this,arguments)}te.exports=W,W.expand=function(){var Se=E(function*({activeCtx:Ne,activeProperty:ke=null,element:Ve,options:me={},insideList:Ae=!1,insideIndex:Ke=!1,typeScopedContext:ot=null}){if(null==Ve)return null;if("@default"===ke&&(me=Object.assign({},me,{isFrame:!1})),!k(Ve)&&!A(Ve))return Ae||null!==ke&&"@graph"!==se(Ne,ke,{vocab:!0},me)?Ie({activeCtx:Ne,activeProperty:ke,value:Ve,options:me}):(me.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Ve}},options:me}),null);if(k(Ve)){let Ye=[];const he=S(Ne,ke,"@container")||[];Ae=Ae||he.includes("@list");for(let Q=0;Q<Ve.length;++Q){let H=yield W.expand({activeCtx:Ne,activeProperty:ke,element:Ve[Q],options:me,insideIndex:Ke,typeScopedContext:ot});Ae&&k(H)&&(H={"@list":H}),null!==H&&(k(H)?Ye=Ye.concat(H):Ye.push(H))}return Ye}const We=se(Ne,ke,{vocab:!0},me),_e=S(Ne,ke,"@context");ot=ot||(Ne.previousContext?Ne:null);let G=Object.keys(Ve).sort(),O=!Ke;if(O&&ot&&G.length<=2&&!G.includes("@context"))for(const Ye of G){const he=se(ot,Ye,{vocab:!0},me);if("@value"===he){O=!1,Ne=ot;break}if("@id"===he&&1===G.length){O=!1;break}}O&&(Ne=Ne.revertToPreviousContext()),y(_e)||(Ne=yield ce({activeCtx:Ne,localCtx:_e,propagate:!0,overrideProtected:!0,options:me})),"@context"in Ve&&(Ne=yield ce({activeCtx:Ne,localCtx:Ve["@context"],options:me})),ot=Ne;let oe=null;for(const Ye of G)if("@type"===se(Ne,Ye,{vocab:!0},me)){oe=oe||Ye;const Q=Ve[Ye],H=Array.isArray(Q)?Q.length>1?Q.slice().sort():Q:[Q];for(const D of H){const M=S(ot,D,"@context");y(M)||(Ne=yield ce({activeCtx:Ne,localCtx:M,options:me,propagate:!1}))}}let z={};yield le({activeCtx:Ne,activeProperty:ke,expandedActiveProperty:We,element:Ve,expandedParent:z,options:me,insideList:Ae,typeKey:oe,typeScopedContext:ot}),G=Object.keys(z);let Le=G.length;if("@value"in z){if("@type"in z&&("@language"in z||"@direction"in z))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:z});let Ye=Le-1;if("@type"in z&&(Ye-=1),"@index"in z&&(Ye-=1),"@language"in z&&(Ye-=1),"@direction"in z&&(Ye-=1),0!==Ye)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:z});const he=null===z["@value"]?[]:x(z["@value"]),Q=B(z,"@type");if(!X(Ne,1.1)||!Q.includes("@json")||1!==Q.length)if(0===he.length)me.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:z}},options:me}),z=null;else{if(!he.every(H=>_(H)||P(H))&&"@language"in z)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:z});if(!Q.every(H=>ie(H)&&!(_(H)&&0===H.indexOf("_:"))||P(H)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:z})}}else if("@type"in z&&!k(z["@type"]))z["@type"]=[z["@type"]];else if("@set"in z||"@list"in z){if(Le>1&&(2!==Le||!("@index"in z)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:z});"@set"in z&&(z=z["@set"],G=Object.keys(z),Le=G.length)}else 1===Le&&"@language"in z&&(me.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:z}},options:me}),z=null);return A(z)&&!me.keepFreeFloatingNodes&&!Ae&&(null===ke||"@graph"===We||(S(Ne,ke,"@container")||[]).includes("@graph"))&&(z=Ce({value:z,count:Le,options:me})),z});return function(Ne){return Se.apply(this,arguments)}}()},8295:(te,Z,g)=>{"use strict";const{isSubjectReference:E}=g(543),{createMergedNodeMap:b}=g(9783),k={};te.exports=k,k.flatten=A=>{const P=b(A),_=[],y=Object.keys(P).sort();for(let T=0;T<y.length;++T){const F=P[y[T]];E(F)||_.push(F)}return _}},9193:(te,Z,g)=>{"use strict";const{isKeyword:E}=g(9611),b=g(543),k=g(8254),A=g(3521),P=g(2651),_=g(1874),{createNodeMap:y,mergeNodeMapGraphs:T}=g(9783),F={};function N(x){const B={};for(const I in x)void 0!==x[I]&&(B["@"+I]=[x[I]]);return[B]}function U(x,B,I){for(let ue=I.length-1;ue>=0;--ue){const W=I[ue];if(W.graph===B&&W.subject["@id"]===x["@id"])return!0}return!1}function se(x,B,I){const ue="@"+I;let W=ue in x?x[ue][0]:B[I];if("embed"===I)if(!0===W)W="@once";else if(!1===W)W="@never";else if("@always"!==W&&"@never"!==W&&"@link"!==W&&"@first"!==W&&"@last"!==W&&"@once"!==W)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});return W}function S(x){if(!k.isArray(x)||1!==x.length||!k.isObject(x[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:x});if("@id"in x[0])for(const B of A.asArray(x[0]["@id"]))if(!k.isObject(B)&&!P.isAbsolute(B)||k.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x});if("@type"in x[0])for(const B of A.asArray(x[0]["@type"]))if(!k.isObject(B)&&!P.isAbsolute(B)&&"@json"!==B||k.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x})}function ce(x,B,I,ue){let W=!0,Ce=!1;for(const le in I){let xe=!1;const Ie=A.getValues(B,le),Re=0===A.getValues(I,le).length;if("@id"===le){if(k.isEmptyObject(I["@id"][0]||{})?xe=!0:I["@id"].length>=0&&(xe=I["@id"].includes(Ie[0])),!ue.requireAll)return xe}else if("@type"===le){if(W=!1,Re){if(Ie.length>0)return!1;xe=!0}else if(1===I["@type"].length&&k.isEmptyObject(I["@type"][0]))xe=Ie.length>0;else for(const et of I["@type"])xe=!(!k.isObject(et)||!("@default"in et))||xe||Ie.some(Xe=>Xe===et);if(!ue.requireAll)return xe}else{if(E(le))continue;{const et=A.getValues(I,le)[0];let Xe=!1;if(et&&(S([et]),Xe="@default"in et),W=!1,0===Ie.length&&Xe)continue;if(Ie.length>0&&Re)return!1;if(void 0===et){if(Ie.length>0)return!1;xe=!0}else if(b.isList(et)){const Se=et["@list"][0];if(b.isList(Ie[0])){const Ne=Ie[0]["@list"];b.isValue(Se)?xe=Ne.some(ke=>V(Se,ke)):(b.isSubject(Se)||b.isSubjectReference(Se))&&(xe=Ne.some(ke=>K(x,Se,ke,ue)))}}else xe=b.isValue(et)?Ie.some(Se=>V(et,Se)):b.isSubjectReference(et)?Ie.some(Se=>K(x,et,Se,ue)):!!k.isObject(et)&&Ie.length>0}}if(!xe&&ue.requireAll)return!1;Ce=Ce||xe}return W||Ce}function X(x,B){const I=x.uniqueEmbeds[x.graph],ue=I[B],W=ue.parent,Ce=ue.property,le={"@id":B};if(k.isArray(W)){for(let Ie=0;Ie<W.length;++Ie)if(A.compareValues(W[Ie],le)){W[Ie]=le;break}}else{const Ie=k.isArray(W[Ce]);A.removeValue(W,Ce,le,{propertyIsArray:Ie}),A.addValue(W,Ce,le,{propertyIsArray:Ie})}const xe=Ie=>{const Re=Object.keys(I);for(const et of Re)et in I&&k.isObject(I[et].parent)&&I[et].parent["@id"]===Ie&&(delete I[et],xe(et))};xe(B)}function ie(x,B){if(k.isArray(x))return x.map(I=>ie(I,B));if(k.isObject(x)){if("@preserve"in x)return x["@preserve"][0];if(b.isValue(x))return x;if(b.isList(x))return x["@list"]=ie(x["@list"],B),x;if("@id"in x){const I=x["@id"];if(B.link.hasOwnProperty(I)){const ue=B.link[I].indexOf(x);if(-1!==ue)return B.link[I][ue];B.link[I].push(x)}else B.link[I]=[x]}for(const I in x)"@id"===I&&B.bnodesToClear.includes(x[I])?delete x["@id"]:x[I]=ie(x[I],B)}return x}function ee(x,B,I){k.isObject(x)?A.addValue(x,B,I,{propertyIsArray:!0}):x.push(I)}function K(x,B,I,ue){if(!("@id"in I))return!1;const W=x.subjects[I["@id"]];return W&&ce(x,W,B,ue)}function V(x,B){const I=B["@value"],ue=B["@type"],W=B["@language"],Ce=x["@value"]?k.isArray(x["@value"])?x["@value"]:[x["@value"]]:[],le=x["@type"]?k.isArray(x["@type"])?x["@type"]:[x["@type"]]:[],xe=x["@language"]?k.isArray(x["@language"])?x["@language"]:[x["@language"]]:[];return 0===Ce.length&&0===le.length&&0===xe.length||!(!Ce.includes(I)&&!k.isEmptyObject(Ce[0])||!(!ue&&0===le.length||le.includes(ue)||ue&&k.isEmptyObject(le[0]))||!(!W&&0===xe.length||xe.includes(W)||W&&k.isEmptyObject(xe[0])))}te.exports=F,F.frameMergedOrDefault=(x,B,I)=>{const ue={options:I,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},W=new A.IdentifierIssuer("_:b");y(x,ue.graphMap,"@default",W),I.merged&&(ue.graphMap["@merged"]=T(ue.graphMap),ue.graph="@merged"),ue.subjects=ue.graphMap[ue.graph];const Ce=[];return F.frame(ue,Object.keys(ue.subjects).sort(),B,Ce),I.pruneBlankNodeIdentifiers&&(I.bnodesToClear=Object.keys(ue.bnodeMap).filter(le=>1===ue.bnodeMap[le].length)),I.link={},ie(Ce,I)},F.frame=(x,B,I,ue,W=null)=>{S(I);const Ce=x.options,le={embed:se(I=I[0],Ce,"embed"),explicit:se(I,Ce,"explicit"),requireAll:se(I,Ce,"requireAll")};x.link.hasOwnProperty(x.graph)||(x.link[x.graph]={});const xe=x.link[x.graph],Ie=function $(x,B,I,ue){const W={};for(const Ce of B){const le=x.graphMap[x.graph][Ce];ce(x,le,I,ue)&&(W[Ce]=le)}return W}(x,B,I,le),Re=Object.keys(Ie).sort();for(const et of Re){const Xe=Ie[et];if(null===W?x.uniqueEmbeds={[x.graph]:{}}:x.uniqueEmbeds[x.graph]=x.uniqueEmbeds[x.graph]||{},"@link"===le.embed&&et in xe){ee(ue,W,xe[et]);continue}const Se={"@id":et};if(0===et.indexOf("_:")&&A.addValue(x.bnodeMap,et,Se,{propertyIsArray:!0}),xe[et]=Se,("@first"===le.embed||"@last"===le.embed)&&x.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:I});if(x.embedded||!x.uniqueEmbeds[x.graph].hasOwnProperty(et)){if(x.embedded&&("@never"===le.embed||U(Xe,x.graph,x.subjectStack))){ee(ue,W,Se);continue}if(x.embedded&&("@first"==le.embed||"@once"==le.embed)&&x.uniqueEmbeds[x.graph].hasOwnProperty(et)){ee(ue,W,Se);continue}if("@last"===le.embed&&et in x.uniqueEmbeds[x.graph]&&X(x,et),x.uniqueEmbeds[x.graph][et]={parent:ue,property:W},x.subjectStack.push({subject:Xe,graph:x.graph}),et in x.graphMap){let Ne=!1,ke=null;"@graph"in I?(ke=I["@graph"][0],Ne=!("@merged"===et||"@default"===et),k.isObject(ke)||(ke={})):(Ne="@merged"!==x.graph,ke={}),Ne&&F.frame({...x,graph:et,embedded:!1},Object.keys(x.graphMap[et]).sort(),[ke],Se,"@graph")}"@included"in I&&F.frame({...x,embedded:!1},B,I["@included"],Se,"@included");for(const Ne of Object.keys(Xe).sort())if(E(Ne)){if(Se[Ne]=A.clone(Xe[Ne]),"@type"===Ne)for(const ke of Xe["@type"])0===ke.indexOf("_:")&&A.addValue(x.bnodeMap,ke,Se,{propertyIsArray:!0})}else if(!le.explicit||Ne in I)for(const ke of Xe[Ne]){const Ve=Ne in I?I[Ne]:N(le);if(b.isList(ke)){const me=I[Ne]&&I[Ne][0]&&I[Ne][0]["@list"]?I[Ne][0]["@list"]:N(le),Ae={"@list":[]};ee(Se,Ne,Ae);const Ke=ke["@list"];for(const ot of Ke)b.isSubjectReference(ot)?F.frame({...x,embedded:!0},[ot["@id"]],me,Ae,"@list"):ee(Ae,"@list",A.clone(ot))}else b.isSubjectReference(ke)?F.frame({...x,embedded:!0},[ke["@id"]],Ve,Se,Ne):V(Ve[0],ke)&&ee(Se,Ne,A.clone(ke))}for(const Ne of Object.keys(I).sort()){if("@type"===Ne){if(!k.isObject(I[Ne][0])||!("@default"in I[Ne][0]))continue}else if(E(Ne))continue;const ke=I[Ne][0]||{};if(!se(ke,Ce,"omitDefault")&&!(Ne in Se)){let me="@null";"@default"in ke&&(me=A.clone(ke["@default"])),k.isArray(me)||(me=[me]),Se[Ne]=[{"@preserve":me}]}}for(const Ne of Object.keys(I["@reverse"]||{}).sort()){const ke=I["@reverse"][Ne];for(const Ve of Object.keys(x.subjects))A.getValues(x.subjects[Ve],Ne).some(Ae=>Ae["@id"]===et)&&(Se["@reverse"]=Se["@reverse"]||{},A.addValue(Se["@reverse"],Ne,[],{propertyIsArray:!0}),F.frame({...x,embedded:!0},[Ve],ke,Se["@reverse"][Ne],W))}ee(ue,W,Se),x.subjectStack.pop()}}},F.cleanupNull=(x,B)=>{if(k.isArray(x))return x.map(ue=>F.cleanupNull(ue,B)).filter(ue=>ue);if("@null"===x)return null;if(k.isObject(x)){if("@id"in x){const I=x["@id"];if(B.link.hasOwnProperty(I)){const ue=B.link[I].indexOf(x);if(-1!==ue)return B.link[I][ue];B.link[I].push(x)}else B.link[I]=[x]}for(const I in x)x[I]=F.cleanupNull(x[I],B)}return x}},9767:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),k=g(543),A=g(8254),{REGEX_BCP47:P,addValue:_}=g(3521),{handleEvent:y}=g(3855),{RDF_LIST:T,RDF_FIRST:F,RDF_REST:N,RDF_NIL:U,RDF_TYPE:se,RDF_JSON_LITERAL:S,XSD_BOOLEAN:$,XSD_DOUBLE:ce,XSD_INTEGER:X,XSD_STRING:ie}=g(6982),ee={};function K(V,x,B,I){if(V.termType.endsWith("Node"))return{"@id":V.value};const ue={"@value":V.value};if(V.language)V.language.match(P)||I.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:V.language}},options:I}),ue["@language"]=V.language;else{let W=V.datatype.value;if(W||(W=ie),W===S){W="@json";try{ue["@value"]=JSON.parse(ue["@value"])}catch(Ce){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:ue["@value"],cause:Ce})}}if(x){if(W===$)"true"===ue["@value"]?ue["@value"]=!0:"false"===ue["@value"]&&(ue["@value"]=!1);else if(A.isNumeric(ue["@value"]))if(W===X){const Ce=parseInt(ue["@value"],10);Ce.toFixed(0)===ue["@value"]&&(ue["@value"]=Ce)}else W===ce&&(ue["@value"]=parseFloat(ue["@value"]));[$,X,ce,ie].includes(W)||(ue["@type"]=W)}else if("i18n-datatype"===B&&W.startsWith("https://www.w3.org/ns/i18n#")){const[,Ce,le]=W.split(/[#_]/);Ce.length>0&&(ue["@language"]=Ce,Ce.match(P)||I.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ce}},options:I})),ue["@direction"]=le}else W!==ie&&(ue["@type"]=W)}return ue}te.exports=ee,ee.fromRDF=function(){var V=E(function*(x,B){const I={},ue={"@default":I},W={},{useRdfType:Ce=!1,useNativeTypes:le=!1,rdfDirection:xe=null}=B;for(const et of x){const Xe="DefaultGraph"===et.graph.termType?"@default":et.graph.value;Xe in ue||(ue[Xe]={}),"@default"!==Xe&&!(Xe in I)&&(I[Xe]={"@id":Xe});const Se=ue[Xe],Ne=et.subject.value,ke=et.predicate.value,Ve=et.object;Ne in Se||(Se[Ne]={"@id":Ne});const me=Se[Ne],Ae=Ve.termType.endsWith("Node");if(Ae&&!(Ve.value in Se)&&(Se[Ve.value]={"@id":Ve.value}),ke===se&&!Ce&&Ae){_(me,"@type",Ve.value,{propertyIsArray:!0});continue}const Ke=K(Ve,le,xe,B);if(_(me,ke,Ke,{propertyIsArray:!0}),Ae)if(Ve.value===U){const ot=Se[Ve.value];"usages"in ot||(ot.usages=[]),ot.usages.push({node:me,property:ke,value:Ke})}else W[Ve.value]=!(Ve.value in W)&&{node:me,property:ke,value:Ke}}for(const et in ue){const Xe=ue[et];if(!(U in Xe))continue;const Se=Xe[U];if(Se.usages){for(let Ne of Se.usages){let ke=Ne.node,Ve=Ne.property,me=Ne.value;const Ae=[],Ke=[];let ot=Object.keys(ke).length;for(;Ve===N&&A.isObject(W[ke["@id"]])&&A.isArray(ke[F])&&1===ke[F].length&&A.isArray(ke[N])&&1===ke[N].length&&(3===ot||4===ot&&A.isArray(ke["@type"])&&1===ke["@type"].length&&ke["@type"][0]===T)&&(Ae.push(ke[F][0]),Ke.push(ke["@id"]),Ne=W[ke["@id"]],ke=Ne.node,Ve=Ne.property,me=Ne.value,ot=Object.keys(ke).length,k.isBlankNode(ke)););delete me["@id"],me["@list"]=Ae.reverse();for(const We of Ke)delete Xe[We]}delete Se.usages}}const Ie=[],Re=Object.keys(I).sort();for(const et of Re){const Xe=I[et];if(et in ue){const Se=Xe["@graph"]=[],Ne=ue[et],ke=Object.keys(Ne).sort();for(const Ve of ke){const me=Ne[Ve];k.isSubjectReference(me)||Se.push(me)}}k.isSubjectReference(Xe)||Ie.push(Xe)}return Ie});return function(x,B){return V.apply(this,arguments)}}()},543:(te,Z,g)=>{"use strict";const E=g(8254),b={};te.exports=b,b.isSubject=k=>!(!E.isObject(k)||"@value"in k||"@set"in k||"@list"in k)&&(Object.keys(k).length>1||!("@id"in k)),b.isSubjectReference=k=>E.isObject(k)&&1===Object.keys(k).length&&"@id"in k,b.isValue=k=>E.isObject(k)&&"@value"in k,b.isList=k=>E.isObject(k)&&"@list"in k,b.isGraph=k=>E.isObject(k)&&"@graph"in k&&1===Object.keys(k).filter(A=>"@id"!==A&&"@index"!==A).length,b.isSimpleGraph=k=>b.isGraph(k)&&!("@id"in k),b.isBlankNode=k=>{if(E.isObject(k)){if("@id"in k){const A=k["@id"];return!E.isString(A)||0===A.indexOf("_:")}return 0===Object.keys(k).length||!("@value"in k||"@set"in k||"@list"in k)}return!1}},7661:(te,Z,g)=>{var E=g(7156).default;const b=g(1986),k=g(8924),A=g(3521),P=g(4198),_=A.IdentifierIssuer,y=g(1874),T=g(1072),F=g(7260),{expand:N}=g(3860),{flatten:U}=g(8295),{fromRDF:se}=g(9767),{toRDF:S}=g(240),{frameMergedOrDefault:$,cleanupNull:ce}=g(9193),{isArray:X,isObject:ie,isString:ee}=g(8254),{isSubjectReference:K}=g(543),{expandIri:V,getInitialContext:x,process:B,processingMode:I}=g(9611),{compact:ue,compactIri:W}=g(8809),{createNodeMap:Ce,createMergedNodeMap:le,mergeNodeMaps:xe}=g(9783),{logEventHandler:Ie,logWarningEventHandler:Re,safeEventHandler:et,setDefaultEventHandler:Xe,setupEventHandler:Se,strictEventHandler:Ne,unhandledEventHandler:ke}=g(3855),Ve=function(Ae){const Ke={},We=new T({max:100});function _e(G,{documentLoader:O=Ae.documentLoader,...oe}){if(G&&"compactionMap"in G)throw new y('"compactionMap" not supported.',"jsonld.OptionsError");if(G&&"expansionMap"in G)throw new y('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:O},oe,G,{eventHandler:Se({options:G})})}return Ae.compact=function(){var G=E(function*(O,oe,z){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===oe)throw new y("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===O)return null;let Le;(z=_e(z,{base:ee(O)?O:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new P({sharedCache:We})})).link&&(z.skipExpansion=!0),z.compactToRelative||delete z.base,Le=z.skipExpansion?O:yield Ae.expand(O,z);const Ye=yield Ae.processContext(x(z),oe,z);let he=yield ue({activeCtx:Ye,element:Le,options:z});z.compactArrays&&!z.graph&&X(he)?1===he.length?he=he[0]:0===he.length&&(he={}):z.graph&&ie(he)&&(he=[he]),ie(oe)&&"@context"in oe&&(oe=oe["@context"]),oe=A.clone(oe),X(oe)||(oe=[oe]);const Q=oe;oe=[];for(let D=0;D<Q.length;++D)(!ie(Q[D])||Object.keys(Q[D]).length>0)&&oe.push(Q[D]);const H=oe.length>0;if(1===oe.length&&(oe=oe[0]),X(he)){const D=W({activeCtx:Ye,iri:"@graph",relativeTo:{vocab:!0}}),M=he;he={},H&&(he["@context"]=oe),he[D]=M}else if(ie(he)&&H){const D=he;he={"@context":oe};for(const M in D)he[M]=D[M]}return he});return function(O,oe,z){return G.apply(this,arguments)}}(),Ae.expand=function(){var G=E(function*(O,oe){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const z={},Le=[];if("expandContext"in(oe=_e(oe,{keepFreeFloatingNodes:!1,contextResolver:new P({sharedCache:We})}))){const H=A.clone(oe.expandContext);z.expandContext=ie(H)&&"@context"in H?H:{"@context":H},Le.push(z.expandContext)}let Ye;if(ee(O)){const H=yield Ae.get(O,oe);Ye=H.documentUrl,z.input=H.document,H.contextUrl&&(z.remoteContext={"@context":H.contextUrl},Le.push(z.remoteContext))}else z.input=A.clone(O);"base"in oe||(oe.base=Ye||"");let he=x(oe);for(const H of Le)he=yield B({activeCtx:he,localCtx:H,options:oe});let Q=yield N({activeCtx:he,element:z.input,options:oe});return ie(Q)&&"@graph"in Q&&1===Object.keys(Q).length?Q=Q["@graph"]:null===Q&&(Q=[]),X(Q)||(Q=[Q]),Q});return function(O,oe){return G.apply(this,arguments)}}(),Ae.flatten=function(){var G=E(function*(O,oe,z){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");oe="function"==typeof oe?null:oe||null,z=_e(z,{base:ee(O)?O:"",contextResolver:new P({sharedCache:We})});const Le=yield Ae.expand(O,z),Ye=U(Le);return null===oe?Ye:(z.graph=!0,z.skipExpansion=!0,yield Ae.compact(Ye,oe,z))});return function(O,oe,z){return G.apply(this,arguments)}}(),Ae.frame=function(){var G=E(function*(O,oe,z){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(z=_e(z,{base:ee(O)?O:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new P({sharedCache:We})}),ee(oe)){const ge=yield Ae.get(oe,z);if(oe=ge.document,ge.contextUrl){let ze=oe["@context"];ze?X(ze)?ze.push(ge.contextUrl):ze=[ze,ge.contextUrl]:ze=ge.contextUrl,oe["@context"]=ze}}const Le=oe&&oe["@context"]||{},Ye=yield Ae.processContext(x(z),Le,z);z.hasOwnProperty("omitGraph")||(z.omitGraph=I(Ye,1.1)),z.hasOwnProperty("pruneBlankNodeIdentifiers")||(z.pruneBlankNodeIdentifiers=I(Ye,1.1));const he=yield Ae.expand(O,z),Q={...z};Q.isFrame=!0,Q.keepFreeFloatingNodes=!0;const H=yield Ae.expand(oe,Q),D=Object.keys(oe).map(ge=>V(Ye,ge,{vocab:!0}));Q.merged=!D.includes("@graph"),Q.is11=I(Ye,1.1);const M=$(he,H,Q);Q.graph=!z.omitGraph,Q.skipExpansion=!0,Q.link={},Q.framing=!0;let de=yield Ae.compact(M,Le,Q);return Q.link={},de=ce(de,Q),de});return function(O,oe,z){return G.apply(this,arguments)}}(),Ae.link=function(){var G=E(function*(O,oe,z){const Le={};return oe&&(Le["@context"]=oe),Le["@embed"]="@link",Ae.frame(O,Le,z)});return function(O,oe,z){return G.apply(this,arguments)}}(),Ae.normalize=Ae.canonize=function(){var G=E(function*(O,oe){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(oe=_e(oe,{base:ee(O)?O:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new P({sharedCache:We})}))){if("application/n-quads"!==oe.inputFormat&&"application/nquads"!==oe.inputFormat)throw new y("Unknown canonicalization input format.","jsonld.CanonizeError");const Ye=F.parse(O);return b.canonize(Ye,oe)}const z={...oe};delete z.format,z.produceGeneralizedRdf=!1;const Le=yield Ae.toRDF(O,z);return b.canonize(Le,oe)});return function(O,oe){return G.apply(this,arguments)}}(),Ae.fromRDF=function(){var G=E(function*(O,oe){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");oe=_e(oe,{format:ee(O)?"application/n-quads":void 0});const{format:z}=oe;let{rdfParser:Le}=oe;if(z){if(Le=Le||Ke[z],!Le)throw new y("Unknown input format.","jsonld.UnknownFormat",{format:z})}else Le=()=>O;const Ye=yield Le(O);return se(Ye,oe)});return function(O,oe){return G.apply(this,arguments)}}(),Ae.toRDF=function(){var G=E(function*(O,oe){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let z;z=(oe=_e(oe,{base:ee(O)?O:"",skipExpansion:!1,contextResolver:new P({sharedCache:We})})).skipExpansion?O:yield Ae.expand(O,oe);const Le=S(z,oe);if(oe.format){if("application/n-quads"===oe.format||"application/nquads"===oe.format)return F.serialize(Le);throw new y("Unknown output format.","jsonld.UnknownFormat",{format:oe.format})}return Le});return function(O,oe){return G.apply(this,arguments)}}(),Ae.createNodeMap=function(){var G=E(function*(O,oe){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");oe=_e(oe,{base:ee(O)?O:"",contextResolver:new P({sharedCache:We})});const z=yield Ae.expand(O,oe);return le(z,oe)});return function(O,oe){return G.apply(this,arguments)}}(),Ae.merge=function(){var G=E(function*(O,oe,z){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!X(O))throw new TypeError('Could not merge, "docs" must be an array.');oe="function"==typeof oe?null:oe||null,z=_e(z,{contextResolver:new P({sharedCache:We})});const Le=yield Promise.all(O.map(ge=>{const ze={...z};return Ae.expand(ge,ze)}));let Ye=!0;"mergeNodes"in z&&(Ye=z.mergeNodes);const he=z.issuer||new _("_:b"),Q={"@default":{}};for(let ge=0;ge<Le.length;++ge){const ze=A.relabelBlankNodes(Le[ge],{issuer:new _("_:b"+ge+"-")}),qe=Ye||0===ge?Q:{"@default":{}};if(Ce(ze,qe,"@default",he),qe!==Q)for(const ct in qe){const Dt=qe[ct];if(!(ct in Q)){Q[ct]=Dt;continue}const _t=Q[ct];for(const Ht in Dt)Ht in _t||(_t[Ht]=Dt[Ht])}}const H=xe(Q),D=[],M=Object.keys(H).sort();for(let ge=0;ge<M.length;++ge){const ze=H[M[ge]];K(ze)||D.push(ze)}return null===oe?D:(z.graph=!0,z.skipExpansion=!0,yield Ae.compact(D,oe,z))});return function(O,oe,z){return G.apply(this,arguments)}}(),Object.defineProperty(Ae,"documentLoader",{get:()=>Ae._documentLoader,set:G=>Ae._documentLoader=G}),Ae.documentLoader=function(){var G=E(function*(O){throw new y("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:O})});return function(O){return G.apply(this,arguments)}}(),Ae.get=function(){var G=E(function*(O,oe){let z;z="function"==typeof oe.documentLoader?oe.documentLoader:Ae.documentLoader;const Le=yield z(O);try{if(!Le.document)throw new y("No remote document found at the given URL.","jsonld.NullRemoteDocument");ee(Le.document)&&(Le.document=JSON.parse(Le.document))}catch(Ye){throw new y("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ye,remoteDoc:Le})}return Le});return function(O,oe){return G.apply(this,arguments)}}(),Ae.processContext=function(){var G=E(function*(O,oe,z){return z=_e(z,{base:"",contextResolver:new P({sharedCache:We})}),null===oe?x(z):(oe=A.clone(oe),ie(oe)&&"@context"in oe||(oe={"@context":oe}),B({activeCtx:O,localCtx:oe,options:z}))});return function(O,oe,z){return G.apply(this,arguments)}}(),Ae.getContextValue=g(9611).getContextValue,Ae.documentLoaders={},Ae.useDocumentLoader=function(G){if(!(G in Ae.documentLoaders))throw new y('Unknown document loader type: "'+G+'"',"jsonld.UnknownDocumentLoader",{type:G});Ae.documentLoader=Ae.documentLoaders[G].apply(Ae,Array.prototype.slice.call(arguments,1))},Ae.registerRDFParser=function(G,O){Ke[G]=O},Ae.unregisterRDFParser=function(G){delete Ke[G]},Ae.registerRDFParser("application/n-quads",F.parse),Ae.registerRDFParser("application/nquads",F.parse),Ae.url=g(2651),Ae.logEventHandler=Ie,Ae.logWarningEventHandler=Re,Ae.safeEventHandler=et,Ae.setDefaultEventHandler=Xe,Ae.strictEventHandler=Ne,Ae.unhandledEventHandler=ke,Ae.util=A,Object.assign(Ae,A),Ae.promises=Ae,Ae.RequestQueue=g(4044),Ae.JsonLdProcessor=g(1828)(Ae),k.setupGlobals(Ae),k.setupDocumentLoaders(Ae),Ae},me=function(){return Ve(function(){return me()})};Ve(me),te.exports=me},9783:(te,Z,g)=>{"use strict";const{isKeyword:E}=g(9611),b=g(543),k=g(8254),A=g(3521),P=g(1874),_={};te.exports=_,_.createMergedNodeMap=(y,T)=>{const F=(T=T||{}).issuer||new A.IdentifierIssuer("_:b"),N={"@default":{}};return _.createNodeMap(y,N,"@default",F),_.mergeNodeMaps(N)},_.createNodeMap=(y,T,F,N,U,se)=>{if(k.isArray(y)){for(const X of y)_.createNodeMap(X,T,F,N,void 0,se);return}if(!k.isObject(y))return void(se&&se.push(y));if(b.isValue(y)){if("@type"in y){let X=y["@type"];0===X.indexOf("_:")&&(y["@type"]=X=N.getId(X))}return void(se&&se.push(y))}if(se&&b.isList(y)){const X=[];return _.createNodeMap(y["@list"],T,F,N,U,X),void se.push({"@list":X})}if("@type"in y){const X=y["@type"];for(const ie of X)0===ie.indexOf("_:")&&N.getId(ie)}k.isUndefined(U)&&(U=b.isBlankNode(y)?N.getId(y["@id"]):y["@id"]),se&&se.push({"@id":U});const S=T[F],$=S[U]=S[U]||{};$["@id"]=U;const ce=Object.keys(y).sort();for(let X of ce){if("@id"===X)continue;if("@reverse"===X){const ee={"@id":U},K=y["@reverse"];for(const V in K){const x=K[V];for(const B of x){let I=B["@id"];b.isBlankNode(B)&&(I=N.getId(I)),_.createNodeMap(B,T,F,N,I),A.addValue(S[I],V,ee,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===X){U in T||(T[U]={}),_.createNodeMap(y[X],T,U,N);continue}if("@included"===X){_.createNodeMap(y[X],T,F,N);continue}if("@type"!==X&&E(X)){if("@index"===X&&X in $&&(y[X]!==$[X]||y[X]["@id"]!==$[X]["@id"]))throw new P("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:$});$[X]=y[X];continue}const ie=y[X];if(0===X.indexOf("_:")&&(X=N.getId(X)),0!==ie.length)for(let ee of ie)if("@type"===X&&(ee=0===ee.indexOf("_:")?N.getId(ee):ee),b.isSubject(ee)||b.isSubjectReference(ee)){if("@id"in ee&&!ee["@id"])continue;const K=b.isBlankNode(ee)?N.getId(ee["@id"]):ee["@id"];A.addValue($,X,{"@id":K},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ee,T,F,N,K)}else if(b.isValue(ee))A.addValue($,X,ee,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(ee)){const K=[];_.createNodeMap(ee["@list"],T,F,N,U,K),ee={"@list":K},A.addValue($,X,ee,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ee,T,F,N,U),A.addValue($,X,ee,{propertyIsArray:!0,allowDuplicate:!1});else A.addValue($,X,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=y=>{const T={};for(const F of Object.keys(y).sort())for(const N of Object.keys(y[F]).sort()){const U=y[F][N];N in T||(T[N]={"@id":N});const se=T[N];for(const S of Object.keys(U).sort())if(E(S)&&"@type"!==S)se[S]=A.clone(U[S]);else for(const $ of U[S])A.addValue(se,S,A.clone($),{propertyIsArray:!0,allowDuplicate:!1})}return T},_.mergeNodeMaps=y=>{const T=y["@default"],F=Object.keys(y).sort();for(const N of F){if("@default"===N)continue;const U=y[N];let se=T[N];se?"@graph"in se||(se["@graph"]=[]):T[N]=se={"@id":N,"@graph":[]};const S=se["@graph"];for(const $ of Object.keys(U).sort()){const ce=U[$];b.isSubjectReference(ce)||S.push(ce)}}return T}},8924:(te,Z,g)=>{"use strict";const E=g(627),b={};te.exports=b,b.setupDocumentLoaders=function(k){typeof XMLHttpRequest<"u"&&(k.documentLoaders.xhr=E,k.useDocumentLoader("xhr"))},b.setupGlobals=function(k){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:k.JsonLdProcessor})}},240:(te,Z,g)=>{"use strict";const{createNodeMap:E}=g(9783),{isKeyword:b}=g(9611),k=g(543),A=g(5041),P=g(8254),_=g(3521),{handleEvent:y}=g(3855),{RDF_FIRST:T,RDF_REST:F,RDF_NIL:N,RDF_TYPE:U,RDF_JSON_LITERAL:se,RDF_LANGSTRING:S,XSD_BOOLEAN:$,XSD_DOUBLE:ce,XSD_INTEGER:X,XSD_STRING:ie}=g(6982),{isAbsolute:ee}=g(2651),K={};function V(I,ue,W,Ce,le){const xe=Object.keys(ue).sort();for(const Ie of xe){const Re=ue[Ie],et=Object.keys(Re).sort();for(let Xe of et){const Se=Re[Xe];if("@type"===Xe)Xe=U;else if(b(Xe))continue;for(const Ne of Se){const ke={termType:Ie.startsWith("_:")?"BlankNode":"NamedNode",value:Ie};if(!ee(Ie)){le.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ie}},options:le});continue}const Ve={termType:Xe.startsWith("_:")?"BlankNode":"NamedNode",value:Xe};if(!ee(Xe)){le.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Xe}},options:le});continue}if("BlankNode"===Ve.termType&&!le.produceGeneralizedRdf){le.eventHandler&&y({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Ce.getOldIds().find(Ae=>Ce.getId(Ae)===Xe)}},options:le});continue}const me=B(Ne,Ce,I,W,le.rdfDirection,le);me&&I.push({subject:ke,predicate:Ve,object:me,graph:W})}}}}function B(I,ue,W,Ce,le,xe){const Ie={};if(k.isValue(I)){Ie.termType="Literal",Ie.value=void 0,Ie.datatype={termType:"NamedNode"};let Re=I["@value"];const et=I["@type"]||null;"@json"===et?(Ie.value=A(Re),Ie.datatype.value=se):P.isBoolean(Re)?(Ie.value=Re.toString(),Ie.datatype.value=et||$):P.isDouble(Re)||et===ce?(P.isDouble(Re)||(Re=parseFloat(Re)),Ie.value=Re.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ie.datatype.value=et||ce):P.isNumber(Re)?(Ie.value=Re.toFixed(0),Ie.datatype.value=et||X):"i18n-datatype"===le&&"@direction"in I?(Ie.datatype.value="https://www.w3.org/ns/i18n#"+(I["@language"]||"")+`_${I["@direction"]}`,Ie.value=Re):"@language"in I?(Ie.value=Re,Ie.datatype.value=et||S,Ie.language=I["@language"]):(Ie.value=Re,Ie.datatype.value=et||ie)}else if(k.isList(I)){const Re=function x(I,ue,W,Ce,le,xe){const Ie={termType:"NamedNode",value:T},Re={termType:"NamedNode",value:F},et={termType:"NamedNode",value:N},Xe=I.pop(),Se=Xe?{termType:"BlankNode",value:ue.getId()}:et;let Ne=Se;for(const ke of I){const Ve=B(ke,ue,W,Ce,le,xe),me={termType:"BlankNode",value:ue.getId()};W.push({subject:Ne,predicate:Ie,object:Ve,graph:Ce}),W.push({subject:Ne,predicate:Re,object:me,graph:Ce}),Ne=me}if(Xe){const ke=B(Xe,ue,W,Ce,le,xe);W.push({subject:Ne,predicate:Ie,object:ke,graph:Ce}),W.push({subject:Ne,predicate:Re,object:et,graph:Ce})}return Se}(I["@list"],ue,W,Ce,le,xe);Ie.termType=Re.termType,Ie.value=Re.value}else{const Re=P.isObject(I)?I["@id"]:I;Ie.termType=Re.startsWith("_:")?"BlankNode":"NamedNode",Ie.value=Re}return"NamedNode"!==Ie.termType||ee(Ie.value)?Ie:(xe.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ie.value}},options:xe}),null)}te.exports=K,K.toRDF=(I,ue)=>{const W=new _.IdentifierIssuer("_:b"),Ce={"@default":{}};E(I,Ce,"@default",W);const le=[],xe=Object.keys(Ce).sort();for(const Ie of xe){let Re;if("@default"===Ie)Re={termType:"DefaultGraph",value:""};else{if(!ee(Ie)){ue.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ie}},options:ue});continue}Re=Ie.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Re.value=Ie}V(le,Ce[Ie],Re,W,ue)}return le}},8254:te=>{"use strict";const Z={};te.exports=Z,Z.isArray=Array.isArray,Z.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),Z.isDouble=g=>Z.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),Z.isEmptyObject=g=>Z.isObject(g)&&0===Object.keys(g).length,Z.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),Z.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),Z.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),Z.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),Z.isUndefined=g=>typeof g>"u"},2651:(te,Z,g)=>{"use strict";const E=g(8254),b={};te.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(A,P)=>{const _={},y=b.parsers[P||"full"],T=y.regex.exec(A);let F=y.keys.length;for(;F--;)_[y.keys[F]]=void 0===T[F]?null:T[F];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=b.removeDotSegments(_.path),_},b.prependBase=(A,P)=>{if(null===A||b.isAbsolute(P))return P;(!A||E.isString(A))&&(A=b.parse(A||""));const _=b.parse(P),y={protocol:A.protocol||""};if(null!==_.authority)y.authority=_.authority,y.path=_.path,y.query=_.query;else if(y.authority=A.authority,""===_.path)y.path=A.path,y.query=null!==_.query?_.query:A.query;else{if(0===_.path.indexOf("/"))y.path=_.path;else{let F=A.path;F=F.substr(0,F.lastIndexOf("/")+1),(F.length>0||A.authority)&&"/"!==F.substr(-1)&&(F+="/"),F+=_.path,y.path=F}y.query=_.query}""!==_.path&&(y.path=b.removeDotSegments(y.path));let T=y.protocol;return null!==y.authority&&(T+="//"+y.authority),T+=y.path,null!==y.query&&(T+="?"+y.query),null!==_.fragment&&(T+="#"+_.fragment),""===T&&(T="./"),T},b.removeBase=(A,P)=>{if(null===A)return P;(!A||E.isString(A))&&(A=b.parse(A||""));let _="";if(""!==A.href?_+=(A.protocol||"")+"//"+(A.authority||""):P.indexOf("//")&&(_+="//"),0!==P.indexOf(_))return P;const y=b.parse(P.substr(_.length)),T=A.normalizedPath.split("/"),F=y.normalizedPath.split("/"),N=y.fragment||y.query?0:1;for(;T.length>0&&F.length>N&&T[0]===F[0];)T.shift(),F.shift();let U="";if(T.length>0){T.pop();for(let se=0;se<T.length;++se)U+="../"}return U+=F.join("/"),null!==y.query&&(U+="?"+y.query),null!==y.fragment&&(U+="#"+y.fragment),""===U&&(U="./"),U},b.removeDotSegments=A=>{if(0===A.length)return"";const P=A.split("/"),_=[];for(;P.length>0;){const y=P.shift(),T=0===P.length;"."!==y?".."!==y?_.push(y):(_.pop(),T&&_.push("")):T&&_.push("")}return"/"===A[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const k=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=A=>E.isString(A)&&k.test(A),b.isRelative=A=>E.isString(A)},3521:(te,Z,g)=>{"use strict";const E=g(543),b=g(8254),k=g(1986).IdentifierIssuer,A=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,y=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,T=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,N_headers_accept="application/ld+json, application/json",U={};function se(S,$){if(b.isArray($))for(let ce=0;ce<$.length;++ce)$[ce]=se(S,$[ce]);else if(E.isList($))$["@list"]=se(S,$["@list"]);else if(b.isObject($)){E.isBlankNode($)&&($["@id"]=S.getId($["@id"]));const ce=Object.keys($).sort();for(let X=0;X<ce.length;++X){const ie=ce[X];"@id"!==ie&&($[ie]=se(S,$[ie]))}}return $}te.exports=U,U.IdentifierIssuer=k,U.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,U.REGEX_KEYWORD=/^@[a-zA-Z]+$/,U.clone=function(S){if(S&&"object"==typeof S){let $;if(b.isArray(S)){$=[];for(let ce=0;ce<S.length;++ce)$[ce]=U.clone(S[ce])}else if(S instanceof Map){$=new Map;for(const[ce,X]of S)$.set(ce,U.clone(X))}else if(S instanceof Set){$=new Set;for(const ce of S)$.add(U.clone(ce))}else if(b.isObject(S)){$={};for(const ce in S)$[ce]=U.clone(S[ce])}else $=S.toString();return $}return S},U.asArray=function(S){return Array.isArray(S)?S:[S]},U.buildHeaders=(S={})=>{if(Object.keys(S).some(ce=>"accept"===ce.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+N_headers_accept+'" is supported.');return Object.assign({Accept:N_headers_accept},S)},U.parseLinkHeader=S=>{const $={},ce=S.match(_);for(let X=0;X<ce.length;++X){let ie=ce[X].match(y);if(!ie)continue;const ee={target:ie[1]},K=ie[2];for(;ie=T.exec(K);)ee[ie[1]]=void 0===ie[2]?ie[3]:ie[2];const V=ee.rel||"";Array.isArray($[V])?$[V].push(ee):$[V]=$.hasOwnProperty(V)?[$[V],ee]:ee}return $},U.validateTypeValue=(S,$)=>{if(!(b.isString(S)||b.isArray(S)&&S.every(ce=>b.isString(ce)))){if($&&b.isObject(S))switch(Object.keys(S).length){case 0:return;case 1:if("@default"in S&&U.asArray(S["@default"]).every(ce=>b.isString(ce)))return}throw new A('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:S})}},U.hasProperty=(S,$)=>{if(S.hasOwnProperty($)){const ce=S[$];return!b.isArray(ce)||ce.length>0}return!1},U.hasValue=(S,$,ce)=>{if(U.hasProperty(S,$)){let X=S[$];const ie=E.isList(X);if(b.isArray(X)||ie){ie&&(X=X["@list"]);for(let ee=0;ee<X.length;++ee)if(U.compareValues(ce,X[ee]))return!0}else if(!b.isArray(ce))return U.compareValues(ce,X)}return!1},U.addValue=(S,$,ce,X)=>{if("propertyIsArray"in(X=X||{})||(X.propertyIsArray=!1),"valueIsArray"in X||(X.valueIsArray=!1),"allowDuplicate"in X||(X.allowDuplicate=!0),"prependValue"in X||(X.prependValue=!1),X.valueIsArray)S[$]=ce;else if(b.isArray(ce)){0===ce.length&&X.propertyIsArray&&!S.hasOwnProperty($)&&(S[$]=[]),X.prependValue&&(ce=ce.concat(S[$]),S[$]=[]);for(let ie=0;ie<ce.length;++ie)U.addValue(S,$,ce[ie],X)}else if(S.hasOwnProperty($)){const ie=!X.allowDuplicate&&U.hasValue(S,$,ce);!b.isArray(S[$])&&(!ie||X.propertyIsArray)&&(S[$]=[S[$]]),ie||(X.prependValue?S[$].unshift(ce):S[$].push(ce))}else S[$]=X.propertyIsArray?[ce]:ce},U.getValues=(S,$)=>[].concat(S[$]||[]),U.removeProperty=(S,$)=>{delete S[$]},U.removeValue=(S,$,ce,X)=>{"propertyIsArray"in(X=X||{})||(X.propertyIsArray=!1);const ie=U.getValues(S,$).filter(ee=>!U.compareValues(ee,ce));0===ie.length?U.removeProperty(S,$):S[$]=1!==ie.length||X.propertyIsArray?ie:ie[0]},U.relabelBlankNodes=(S,$)=>se(($=$||{}).issuer||new k("_:b"),S),U.compareValues=(S,$)=>!!(S===$||E.isValue(S)&&E.isValue($)&&S["@value"]===$["@value"]&&S["@type"]===$["@type"]&&S["@language"]===$["@language"]&&S["@index"]===$["@index"])||!!(b.isObject(S)&&"@id"in S&&b.isObject($)&&"@id"in $)&&S["@id"]===$["@id"],U.compareShortestLeast=(S,$)=>S.length<$.length?-1:$.length<S.length?1:S===$?0:S<$?-1:1},5041:te=>{"use strict";te.exports=function Z(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((E,b,k)=>E+(0===k?"":",")+Z(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(g).sort().reduce((E,b,k)=>void 0===g[b]||"symbol"==typeof g[b]?E:E+(0===E.length?"":",")+Z(b)+":"+Z(g[b]),"")+"}"}},1072:(te,Z,g)=>{"use strict";const E=g(4439),b=Symbol("max"),k=Symbol("length"),A=Symbol("lengthCalculator"),P=Symbol("allowStale"),_=Symbol("maxAge"),y=Symbol("dispose"),T=Symbol("noDisposeOnSet"),F=Symbol("lruList"),N=Symbol("cache"),U=Symbol("updateAgeOnGet"),se=()=>1,$=(V,x,B)=>{const I=V[N].get(x);if(I){const ue=I.value;if(ce(V,ue)){if(ie(V,I),!V[P])return}else B&&(V[U]&&(I.value.now=Date.now()),V[F].unshiftNode(I));return ue.value}},ce=(V,x)=>{if(!x||!x.maxAge&&!V[_])return!1;const B=Date.now()-x.now;return x.maxAge?B>x.maxAge:V[_]&&B>V[_]},X=V=>{if(V[k]>V[b])for(let x=V[F].tail;V[k]>V[b]&&null!==x;){const B=x.prev;ie(V,x),x=B}},ie=(V,x)=>{if(x){const B=x.value;V[y]&&V[y](B.key,B.value),V[k]-=B.length,V[N].delete(B.key),V[F].removeNode(x)}};class ee{constructor(x,B,I,ue,W){this.key=x,this.value=B,this.length=I,this.now=ue,this.maxAge=W||0}}const K=(V,x,B,I)=>{let ue=B.value;ce(V,ue)&&(ie(V,B),V[P]||(ue=void 0)),ue&&x.call(I,ue.value,ue.key,V)};te.exports=class S{constructor(x){if("number"==typeof x&&(x={max:x}),x||(x={}),x.max&&("number"!=typeof x.max||x.max<0))throw new TypeError("max must be a non-negative number");this[b]=x.max||1/0;const I=x.length||se;if(this[A]="function"!=typeof I?se:I,this[P]=x.stale||!1,x.maxAge&&"number"!=typeof x.maxAge)throw new TypeError("maxAge must be a number");this[_]=x.maxAge||0,this[y]=x.dispose,this[T]=x.noDisposeOnSet||!1,this[U]=x.updateAgeOnGet||!1,this.reset()}set max(x){if("number"!=typeof x||x<0)throw new TypeError("max must be a non-negative number");this[b]=x||1/0,X(this)}get max(){return this[b]}set allowStale(x){this[P]=!!x}get allowStale(){return this[P]}set maxAge(x){if("number"!=typeof x)throw new TypeError("maxAge must be a non-negative number");this[_]=x,X(this)}get maxAge(){return this[_]}set lengthCalculator(x){"function"!=typeof x&&(x=se),x!==this[A]&&(this[A]=x,this[k]=0,this[F].forEach(B=>{B.length=this[A](B.value,B.key),this[k]+=B.length})),X(this)}get lengthCalculator(){return this[A]}get length(){return this[k]}get itemCount(){return this[F].length}rforEach(x,B){B=B||this;for(let I=this[F].tail;null!==I;){const ue=I.prev;K(this,x,I,B),I=ue}}forEach(x,B){B=B||this;for(let I=this[F].head;null!==I;){const ue=I.next;K(this,x,I,B),I=ue}}keys(){return this[F].toArray().map(x=>x.key)}values(){return this[F].toArray().map(x=>x.value)}reset(){this[y]&&this[F]&&this[F].length&&this[F].forEach(x=>this[y](x.key,x.value)),this[N]=new Map,this[F]=new E,this[k]=0}dump(){return this[F].map(x=>!ce(this,x)&&{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[F]}set(x,B,I){if((I=I||this[_])&&"number"!=typeof I)throw new TypeError("maxAge must be a number");const ue=I?Date.now():0,W=this[A](B,x);if(this[N].has(x)){if(W>this[b])return ie(this,this[N].get(x)),!1;const xe=this[N].get(x).value;return this[y]&&(this[T]||this[y](x,xe.value)),xe.now=ue,xe.maxAge=I,xe.value=B,this[k]+=W-xe.length,xe.length=W,this.get(x),X(this),!0}const Ce=new ee(x,B,W,ue,I);return Ce.length>this[b]?(this[y]&&this[y](x,B),!1):(this[k]+=Ce.length,this[F].unshift(Ce),this[N].set(x,this[F].head),X(this),!0)}has(x){if(!this[N].has(x))return!1;const B=this[N].get(x).value;return!ce(this,B)}get(x){return $(this,x,!0)}peek(x){return $(this,x,!1)}pop(){const x=this[F].tail;return x?(ie(this,x),x.value):null}del(x){ie(this,this[N].get(x))}load(x){this.reset();const B=Date.now();for(let I=x.length-1;I>=0;I--){const ue=x[I],W=ue.e||0;if(0===W)this.set(ue.k,ue.v);else{const Ce=W-B;Ce>0&&this.set(ue.k,ue.v,Ce)}}}prune(){this[N].forEach((x,B)=>$(this,B,!1))}}},6506:(te,Z,g)=>{var k=g(8745)(g(8492),"DataView");te.exports=k},9618:(te,Z,g)=>{var E=g(5602),b=g(1499),k=g(2990),A=g(480),P=g(4469);function _(y){var T=-1,F=null==y?0:y.length;for(this.clear();++T<F;){var N=y[T];this.set(N[0],N[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=A,_.prototype.set=P,te.exports=_},3597:(te,Z,g)=>{var E=g(9365),b=g(9343),k=g(4779),A=g(1509),P=g(7137);function _(y){var T=-1,F=null==y?0:y.length;for(this.clear();++T<F;){var N=y[T];this.set(N[0],N[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=A,_.prototype.set=P,te.exports=_},1136:(te,Z,g)=>{var k=g(8745)(g(8492),"Map");te.exports=k},1811:(te,Z,g)=>{var E=g(3413),b=g(5419),k=g(7253),A=g(1115),P=g(6648);function _(y){var T=-1,F=null==y?0:y.length;for(this.clear();++T<F;){var N=y[T];this.set(N[0],N[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=A,_.prototype.set=P,te.exports=_},641:(te,Z,g)=>{var k=g(8745)(g(8492),"Promise");te.exports=k},1732:(te,Z,g)=>{var k=g(8745)(g(8492),"Set");te.exports=k},5960:(te,Z,g)=>{var E=g(1811),b=g(6151),k=g(2154);function A(P){var _=-1,y=null==P?0:P.length;for(this.__data__=new E;++_<y;)this.add(P[_])}A.prototype.add=A.prototype.push=b,A.prototype.has=k,te.exports=A},1339:(te,Z,g)=>{var E=g(3597),b=g(9488),k=g(5943),A=g(5456),P=g(4793),_=g(8689);function y(T){var F=this.__data__=new E(T);this.size=F.size}y.prototype.clear=b,y.prototype.delete=k,y.prototype.get=A,y.prototype.has=P,y.prototype.set=_,te.exports=y},1763:(te,Z,g)=>{var E=g(8492);te.exports=E.Symbol},2760:(te,Z,g)=>{var E=g(8492);te.exports=E.Uint8Array},6413:(te,Z,g)=>{var k=g(8745)(g(8492),"WeakMap");te.exports=k},7910:te=>{te.exports=function Z(g,E,b){switch(b.length){case 0:return g.call(E);case 1:return g.call(E,b[0]);case 2:return g.call(E,b[0],b[1]);case 3:return g.call(E,b[0],b[1],b[2])}return g.apply(E,b)}},2134:te=>{te.exports=function Z(g,E){for(var b=-1,k=null==g?0:g.length,A=0,P=[];++b<k;){var _=g[b];E(_,b,g)&&(P[A++]=_)}return P}},1384:(te,Z,g)=>{var E=g(5025),b=g(1955),k=g(2261),A=g(7525),P=g(5188),_=g(4868),T=Object.prototype.hasOwnProperty;te.exports=function F(N,U){var se=k(N),S=!se&&b(N),$=!se&&!S&&A(N),ce=!se&&!S&&!$&&_(N),X=se||S||$||ce,ie=X?E(N.length,String):[],ee=ie.length;for(var K in N)(U||T.call(N,K))&&(!X||!("length"==K||$&&("offset"==K||"parent"==K)||ce&&("buffer"==K||"byteLength"==K||"byteOffset"==K)||P(K,ee)))&&ie.push(K);return ie}},3880:te=>{te.exports=function Z(g,E){for(var b=-1,k=null==g?0:g.length,A=Array(k);++b<k;)A[b]=E(g[b],b,g);return A}},7853:te=>{te.exports=function Z(g,E){for(var b=-1,k=E.length,A=g.length;++b<k;)g[A+b]=E[b];return g}},5916:te=>{te.exports=function Z(g,E){for(var b=-1,k=null==g?0:g.length;++b<k;)if(E(g[b],b,g))return!0;return!1}},4056:(te,Z,g)=>{var E=g(7826);te.exports=function b(k,A){for(var P=k.length;P--;)if(E(k[P][0],A))return P;return-1}},5103:(te,Z,g)=>{var E=g(7794),k=g(9386)(E);te.exports=k},1883:(te,Z,g)=>{var E=g(7853),b=g(2241);te.exports=function k(A,P,_,y,T){var F=-1,N=A.length;for(_||(_=b),T||(T=[]);++F<N;){var U=A[F];P>0&&_(U)?P>1?k(U,P-1,_,y,T):E(T,U):y||(T[T.length]=U)}return T}},6483:(te,Z,g)=>{var b=g(2086)();te.exports=b},7794:(te,Z,g)=>{var E=g(6483),b=g(4614);te.exports=function k(A,P){return A&&E(A,P,b)}},2202:(te,Z,g)=>{var E=g(4826),b=g(8916);te.exports=function k(A,P){for(var _=0,y=(P=E(P,A)).length;null!=A&&_<y;)A=A[b(P[_++])];return _&&_==y?A:void 0}},7427:(te,Z,g)=>{var E=g(7853),b=g(2261);te.exports=function k(A,P,_){var y=P(A);return b(A)?y:E(y,_(A))}},4590:(te,Z,g)=>{var E=g(1763),b=g(5933),k=g(9243),_=E?E.toStringTag:void 0;te.exports=function y(T){return null==T?void 0===T?"[object Undefined]":"[object Null]":_&&_ in Object(T)?b(T):k(T)}},3274:te=>{te.exports=function Z(g,E){return null!=g&&E in Object(g)}},3022:(te,Z,g)=>{var E=g(4590),b=g(3714);te.exports=function A(P){return b(P)&&"[object Arguments]"==E(P)}},7108:(te,Z,g)=>{var E=g(7946),b=g(3714);te.exports=function k(A,P,_,y,T){return A===P||(null==A||null==P||!b(A)&&!b(P)?A!=A&&P!=P:E(A,P,_,y,k,T))}},7946:(te,Z,g)=>{var E=g(1339),b=g(7469),k=g(1642),A=g(9462),P=g(2472),_=g(2261),y=g(7525),T=g(4868),N="[object Arguments]",U="[object Array]",se="[object Object]",$=Object.prototype.hasOwnProperty;te.exports=function ce(X,ie,ee,K,V,x){var B=_(X),I=_(ie),ue=B?U:P(X),W=I?U:P(ie),Ce=(ue=ue==N?se:ue)==se,le=(W=W==N?se:W)==se,xe=ue==W;if(xe&&y(X)){if(!y(ie))return!1;B=!0,Ce=!1}if(xe&&!Ce)return x||(x=new E),B||T(X)?b(X,ie,ee,K,V,x):k(X,ie,ue,ee,K,V,x);if(!(1&ee)){var Ie=Ce&&$.call(X,"__wrapped__"),Re=le&&$.call(ie,"__wrapped__");if(Ie||Re){var et=Ie?X.value():X,Xe=Re?ie.value():ie;return x||(x=new E),V(et,Xe,ee,K,x)}}return!!xe&&(x||(x=new E),A(X,ie,ee,K,V,x))}},2527:(te,Z,g)=>{var E=g(1339),b=g(7108);te.exports=function P(_,y,T,F){var N=T.length,U=N,se=!F;if(null==_)return!U;for(_=Object(_);N--;){var S=T[N];if(se&&S[2]?S[1]!==_[S[0]]:!(S[0]in _))return!1}for(;++N<U;){var $=(S=T[N])[0],ce=_[$],X=S[1];if(se&&S[2]){if(void 0===ce&&!($ in _))return!1}else{var ie=new E;if(F)var ee=F(ce,X,$,_,y,ie);if(!(void 0===ee?b(X,ce,3,F,ie):ee))return!1}}return!0}},1082:(te,Z,g)=>{var E=g(6861),b=g(9950),k=g(9794),A=g(7075),_=/^\[object .+?Constructor\]$/,U=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");te.exports=function se(S){return!(!k(S)||b(S))&&(E(S)?U:_).test(A(S))}},8902:(te,Z,g)=>{var E=g(4590),b=g(7765),k=g(3714),xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object Boolean]"]=xe["[object DataView]"]=xe["[object Date]"]=xe["[object Error]"]=xe["[object Function]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object WeakMap]"]=!1,te.exports=function Ie(Re){return k(Re)&&b(Re.length)&&!!xe[E(Re)]}},1627:(te,Z,g)=>{var E=g(2924),b=g(8526),k=g(5657),A=g(2261),P=g(2692);te.exports=function _(y){return"function"==typeof y?y:null==y?k:"object"==typeof y?A(y)?b(y[0],y[1]):E(y):P(y)}},190:(te,Z,g)=>{var E=g(6587),b=g(366),A=Object.prototype.hasOwnProperty;te.exports=function P(_){if(!E(_))return b(_);var y=[];for(var T in Object(_))A.call(_,T)&&"constructor"!=T&&y.push(T);return y}},2839:(te,Z,g)=>{var E=g(5103),b=g(2447);te.exports=function k(A,P){var _=-1,y=b(A)?Array(A.length):[];return E(A,function(T,F,N){y[++_]=P(T,F,N)}),y}},2924:(te,Z,g)=>{var E=g(2527),b=g(7895),k=g(2265);te.exports=function A(P){var _=b(P);return 1==_.length&&_[0][2]?k(_[0][0],_[0][1]):function(y){return y===P||E(y,P,_)}}},8526:(te,Z,g)=>{var E=g(7108),b=g(5440),k=g(2494),A=g(6300),P=g(3921),_=g(2265),y=g(8916);te.exports=function N(U,se){return A(U)&&P(se)?_(y(U),se):function(S){var $=b(S,U);return void 0===$&&$===se?k(S,U):E(se,$,3)}}},252:(te,Z,g)=>{var E=g(3880),b=g(2202),k=g(1627),A=g(2839),P=g(6389),_=g(1156),y=g(9664),T=g(5657),F=g(2261);te.exports=function N(U,se,S){se=se.length?E(se,function(X){return F(X)?function(ie){return b(ie,1===X.length?X[0]:X)}:X}):[T];var $=-1;se=E(se,_(k));var ce=A(U,function(X,ie,ee){return{criteria:E(se,function(V){return V(X)}),index:++$,value:X}});return P(ce,function(X,ie){return y(X,ie,S)})}},3400:te=>{te.exports=function Z(g){return function(E){return E?.[g]}}},6443:(te,Z,g)=>{var E=g(2202);te.exports=function b(k){return function(A){return E(A,k)}}},8951:(te,Z,g)=>{var E=g(5657),b=g(2394),k=g(6814);te.exports=function A(P,_){return k(b(P,_,E),P+"")}},8235:(te,Z,g)=>{var E=g(1075),b=g(9383),k=g(5657);te.exports=b?function(P,_){return b(P,"toString",{configurable:!0,enumerable:!1,value:E(_),writable:!0})}:k},6389:te=>{te.exports=function Z(g,E){var b=g.length;for(g.sort(E);b--;)g[b]=g[b].value;return g}},5025:te=>{te.exports=function Z(g,E){for(var b=-1,k=Array(g);++b<g;)k[b]=E(b);return k}},7002:(te,Z,g)=>{var E=g(1763),b=g(3880),k=g(2261),A=g(3423),_=E?E.prototype:void 0,y=_?_.toString:void 0;te.exports=function T(F){if("string"==typeof F)return F;if(k(F))return b(F,T)+"";if(A(F))return y?y.call(F):"";var N=F+"";return"0"==N&&1/F==-1/0?"-0":N}},1156:te=>{te.exports=function Z(g){return function(E){return g(E)}}},4795:te=>{te.exports=function Z(g,E){return g.has(E)}},4826:(te,Z,g)=>{var E=g(2261),b=g(6300),k=g(163),A=g(2674);te.exports=function P(_,y){return E(_)?_:b(_,y)?[_]:k(A(_))}},5400:(te,Z,g)=>{var E=g(3423);te.exports=function b(k,A){if(k!==A){var P=void 0!==k,_=null===k,y=k==k,T=E(k),F=void 0!==A,N=null===A,U=A==A,se=E(A);if(!N&&!se&&!T&&k>A||T&&F&&U&&!N&&!se||_&&F&&U||!P&&U||!y)return 1;if(!_&&!T&&!se&&k<A||se&&P&&y&&!_&&!T||N&&P&&y||!F&&y||!U)return-1}return 0}},9664:(te,Z,g)=>{var E=g(5400);te.exports=function b(k,A,P){for(var _=-1,y=k.criteria,T=A.criteria,F=y.length,N=P.length;++_<F;){var U=E(y[_],T[_]);if(U)return _>=N?U:U*("desc"==P[_]?-1:1)}return k.index-A.index}},6189:(te,Z,g)=>{var E=g(8492);te.exports=E["__core-js_shared__"]},9386:(te,Z,g)=>{var E=g(2447);te.exports=function b(k,A){return function(P,_){if(null==P)return P;if(!E(P))return k(P,_);for(var y=P.length,T=A?y:-1,F=Object(P);(A?T--:++T<y)&&!1!==_(F[T],T,F););return P}}},2086:te=>{te.exports=function Z(g){return function(E,b,k){for(var A=-1,P=Object(E),_=k(E),y=_.length;y--;){var T=_[g?y:++A];if(!1===b(P[T],T,P))break}return E}}},9383:(te,Z,g)=>{var E=g(8745),b=function(){try{var k=E(Object,"defineProperty");return k({},"",{}),k}catch{}}();te.exports=b},7469:(te,Z,g)=>{var E=g(5960),b=g(5916),k=g(4795);te.exports=function _(y,T,F,N,U,se){var S=1&F,$=y.length,ce=T.length;if($!=ce&&!(S&&ce>$))return!1;var X=se.get(y),ie=se.get(T);if(X&&ie)return X==T&&ie==y;var ee=-1,K=!0,V=2&F?new E:void 0;for(se.set(y,T),se.set(T,y);++ee<$;){var x=y[ee],B=T[ee];if(N)var I=S?N(B,x,ee,T,y,se):N(x,B,ee,y,T,se);if(void 0!==I){if(I)continue;K=!1;break}if(V){if(!b(T,function(ue,W){if(!k(V,W)&&(x===ue||U(x,ue,F,N,se)))return V.push(W)})){K=!1;break}}else if(x!==B&&!U(x,B,F,N,se)){K=!1;break}}return se.delete(y),se.delete(T),K}},1642:(te,Z,g)=>{var E=g(1763),b=g(2760),k=g(7826),A=g(7469),P=g(1575),_=g(8e3),V=E?E.prototype:void 0,x=V?V.valueOf:void 0;te.exports=function B(I,ue,W,Ce,le,xe,Ie){switch(W){case"[object DataView]":if(I.byteLength!=ue.byteLength||I.byteOffset!=ue.byteOffset)return!1;I=I.buffer,ue=ue.buffer;case"[object ArrayBuffer]":return!(I.byteLength!=ue.byteLength||!xe(new b(I),new b(ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return k(+I,+ue);case"[object Error]":return I.name==ue.name&&I.message==ue.message;case"[object RegExp]":case"[object String]":return I==ue+"";case"[object Map]":var Re=P;case"[object Set]":if(Re||(Re=_),I.size!=ue.size&&!(1&Ce))return!1;var Xe=Ie.get(I);if(Xe)return Xe==ue;Ce|=2,Ie.set(I,ue);var Se=A(Re(I),Re(ue),Ce,le,xe,Ie);return Ie.delete(I),Se;case"[object Symbol]":if(x)return x.call(I)==x.call(ue)}return!1}},9462:(te,Z,g)=>{var E=g(6131),A=Object.prototype.hasOwnProperty;te.exports=function P(_,y,T,F,N,U){var se=1&T,S=E(_),$=S.length;if($!=E(y).length&&!se)return!1;for(var ie=$;ie--;){var ee=S[ie];if(!(se?ee in y:A.call(y,ee)))return!1}var K=U.get(_),V=U.get(y);if(K&&V)return K==y&&V==_;var x=!0;U.set(_,y),U.set(y,_);for(var B=se;++ie<$;){var I=_[ee=S[ie]],ue=y[ee];if(F)var W=se?F(ue,I,ee,y,_,U):F(I,ue,ee,_,y,U);if(!(void 0===W?I===ue||N(I,ue,T,F,U):W)){x=!1;break}B||(B="constructor"==ee)}if(x&&!B){var Ce=_.constructor,le=y.constructor;Ce!=le&&"constructor"in _&&"constructor"in y&&!("function"==typeof Ce&&Ce instanceof Ce&&"function"==typeof le&&le instanceof le)&&(x=!1)}return U.delete(_),U.delete(y),x}},248:te=>{var Z="object"==typeof global&&global&&global.Object===Object&&global;te.exports=Z},6131:(te,Z,g)=>{var E=g(7427),b=g(771),k=g(4614);te.exports=function A(P){return E(P,k,b)}},4113:(te,Z,g)=>{var E=g(29);te.exports=function b(k,A){var P=k.__data__;return E(A)?P["string"==typeof A?"string":"hash"]:P.map}},7895:(te,Z,g)=>{var E=g(3921),b=g(4614);te.exports=function k(A){for(var P=b(A),_=P.length;_--;){var y=P[_],T=A[y];P[_]=[y,T,E(T)]}return P}},8745:(te,Z,g)=>{var E=g(1082),b=g(1015);te.exports=function k(A,P){var _=b(A,P);return E(_)?_:void 0}},5933:(te,Z,g)=>{var E=g(1763),b=Object.prototype,k=b.hasOwnProperty,A=b.toString,P=E?E.toStringTag:void 0;te.exports=function _(y){var T=k.call(y,P),F=y[P];try{y[P]=void 0;var N=!0}catch{}var U=A.call(y);return N&&(T?y[P]=F:delete y[P]),U}},771:(te,Z,g)=>{var E=g(2134),b=g(1315),A=Object.prototype.propertyIsEnumerable,P=Object.getOwnPropertySymbols;te.exports=P?function(y){return null==y?[]:(y=Object(y),E(P(y),function(T){return A.call(y,T)}))}:b},2472:(te,Z,g)=>{var E=g(6506),b=g(1136),k=g(641),A=g(1732),P=g(6413),_=g(4590),y=g(7075),T="[object Map]",N="[object Promise]",U="[object Set]",se="[object WeakMap]",S="[object DataView]",$=y(E),ce=y(b),X=y(k),ie=y(A),ee=y(P),K=_;(E&&K(new E(new ArrayBuffer(1)))!=S||b&&K(new b)!=T||k&&K(k.resolve())!=N||A&&K(new A)!=U||P&&K(new P)!=se)&&(K=function(V){var x=_(V),B="[object Object]"==x?V.constructor:void 0,I=B?y(B):"";if(I)switch(I){case $:return S;case ce:return T;case X:return N;case ie:return U;case ee:return se}return x}),te.exports=K},1015:te=>{te.exports=function Z(g,E){return g?.[E]}},4583:(te,Z,g)=>{var E=g(4826),b=g(1955),k=g(2261),A=g(5188),P=g(7765),_=g(8916);te.exports=function y(T,F,N){for(var U=-1,se=(F=E(F,T)).length,S=!1;++U<se;){var $=_(F[U]);if(!(S=null!=T&&N(T,$)))break;T=T[$]}return S||++U!=se?S:!!(se=null==T?0:T.length)&&P(se)&&A($,se)&&(k(T)||b(T))}},5602:(te,Z,g)=>{var E=g(893);te.exports=function b(){this.__data__=E?E(null):{},this.size=0}},1499:te=>{te.exports=function Z(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}},2990:(te,Z,g)=>{var E=g(893),A=Object.prototype.hasOwnProperty;te.exports=function P(_){var y=this.__data__;if(E){var T=y[_];return"__lodash_hash_undefined__"===T?void 0:T}return A.call(y,_)?y[_]:void 0}},480:(te,Z,g)=>{var E=g(893),k=Object.prototype.hasOwnProperty;te.exports=function A(P){var _=this.__data__;return E?void 0!==_[P]:k.call(_,P)}},4469:(te,Z,g)=>{var E=g(893);te.exports=function k(A,P){var _=this.__data__;return this.size+=this.has(A)?0:1,_[A]=E&&void 0===P?"__lodash_hash_undefined__":P,this}},2241:(te,Z,g)=>{var E=g(1763),b=g(1955),k=g(2261),A=E?E.isConcatSpreadable:void 0;te.exports=function P(_){return k(_)||b(_)||!!(A&&_&&_[A])}},5188:te=>{var g=/^(?:0|[1-9]\d*)$/;te.exports=function E(b,k){var A=typeof b;return!!(k=k??9007199254740991)&&("number"==A||"symbol"!=A&&g.test(b))&&b>-1&&b%1==0&&b<k}},3817:(te,Z,g)=>{var E=g(7826),b=g(2447),k=g(5188),A=g(9794);te.exports=function P(_,y,T){if(!A(T))return!1;var F=typeof y;return!!("number"==F?b(T)&&k(y,T.length):"string"==F&&y in T)&&E(T[y],_)}},6300:(te,Z,g)=>{var E=g(2261),b=g(3423),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;te.exports=function P(_,y){if(E(_))return!1;var T=typeof _;return!("number"!=T&&"symbol"!=T&&"boolean"!=T&&null!=_&&!b(_))||A.test(_)||!k.test(_)||null!=y&&_ in Object(y)}},29:te=>{te.exports=function Z(g){var E=typeof g;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==g:null===g}},9950:(te,Z,g)=>{var A,E=g(6189),b=(A=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";te.exports=function k(A){return!!b&&b in A}},6587:te=>{var Z=Object.prototype;te.exports=function g(E){var b=E&&E.constructor;return E===("function"==typeof b&&b.prototype||Z)}},3921:(te,Z,g)=>{var E=g(9794);te.exports=function b(k){return k==k&&!E(k)}},9365:te=>{te.exports=function Z(){this.__data__=[],this.size=0}},9343:(te,Z,g)=>{var E=g(4056),k=Array.prototype.splice;te.exports=function A(P){var _=this.__data__,y=E(_,P);return!(y<0||(y==_.length-1?_.pop():k.call(_,y,1),--this.size,0))}},4779:(te,Z,g)=>{var E=g(4056);te.exports=function b(k){var A=this.__data__,P=E(A,k);return P<0?void 0:A[P][1]}},1509:(te,Z,g)=>{var E=g(4056);te.exports=function b(k){return E(this.__data__,k)>-1}},7137:(te,Z,g)=>{var E=g(4056);te.exports=function b(k,A){var P=this.__data__,_=E(P,k);return _<0?(++this.size,P.push([k,A])):P[_][1]=A,this}},3413:(te,Z,g)=>{var E=g(9618),b=g(3597),k=g(1136);te.exports=function A(){this.size=0,this.__data__={hash:new E,map:new(k||b),string:new E}}},5419:(te,Z,g)=>{var E=g(4113);te.exports=function b(k){var A=E(this,k).delete(k);return this.size-=A?1:0,A}},7253:(te,Z,g)=>{var E=g(4113);te.exports=function b(k){return E(this,k).get(k)}},1115:(te,Z,g)=>{var E=g(4113);te.exports=function b(k){return E(this,k).has(k)}},6648:(te,Z,g)=>{var E=g(4113);te.exports=function b(k,A){var P=E(this,k),_=P.size;return P.set(k,A),this.size+=P.size==_?0:1,this}},1575:te=>{te.exports=function Z(g){var E=-1,b=Array(g.size);return g.forEach(function(k,A){b[++E]=[A,k]}),b}},2265:te=>{te.exports=function Z(g,E){return function(b){return null!=b&&b[g]===E&&(void 0!==E||g in Object(b))}}},7371:(te,Z,g)=>{var E=g(7659);te.exports=function k(A){var P=E(A,function(y){return 500===_.size&&_.clear(),y}),_=P.cache;return P}},893:(te,Z,g)=>{var b=g(8745)(Object,"create");te.exports=b},366:(te,Z,g)=>{var b=g(3106)(Object.keys,Object);te.exports=b},8849:(te,Z,g)=>{te=g.nmd(te);var E=g(248),b=Z&&!Z.nodeType&&Z,k=b&&te&&!te.nodeType&&te,P=k&&k.exports===b&&E.process,_=function(){try{return k&&k.require&&k.require("util").types||P&&P.binding&&P.binding("util")}catch{}}();te.exports=_},9243:te=>{var g=Object.prototype.toString;te.exports=function E(b){return g.call(b)}},3106:te=>{te.exports=function Z(g,E){return function(b){return g(E(b))}}},2394:(te,Z,g)=>{var E=g(7910),b=Math.max;te.exports=function k(A,P,_){return P=b(void 0===P?A.length-1:P,0),function(){for(var y=arguments,T=-1,F=b(y.length-P,0),N=Array(F);++T<F;)N[T]=y[P+T];T=-1;for(var U=Array(P+1);++T<P;)U[T]=y[T];return U[P]=_(N),E(A,this,U)}}},8492:(te,Z,g)=>{var E=g(248),b="object"==typeof self&&self&&self.Object===Object&&self,k=E||b||Function("return this")();te.exports=k},6151:te=>{te.exports=function g(E){return this.__data__.set(E,"__lodash_hash_undefined__"),this}},2154:te=>{te.exports=function Z(g){return this.__data__.has(g)}},8e3:te=>{te.exports=function Z(g){var E=-1,b=Array(g.size);return g.forEach(function(k){b[++E]=k}),b}},6814:(te,Z,g)=>{var E=g(8235),k=g(9531)(E);te.exports=k},9531:te=>{var E=Date.now;te.exports=function b(k){var A=0,P=0;return function(){var _=E(),y=16-(_-P);if(P=_,y>0){if(++A>=800)return arguments[0]}else A=0;return k.apply(void 0,arguments)}}},9488:(te,Z,g)=>{var E=g(3597);te.exports=function b(){this.__data__=new E,this.size=0}},5943:te=>{te.exports=function Z(g){var E=this.__data__,b=E.delete(g);return this.size=E.size,b}},5456:te=>{te.exports=function Z(g){return this.__data__.get(g)}},4793:te=>{te.exports=function Z(g){return this.__data__.has(g)}},8689:(te,Z,g)=>{var E=g(3597),b=g(1136),k=g(1811);te.exports=function P(_,y){var T=this.__data__;if(T instanceof E){var F=T.__data__;if(!b||F.length<199)return F.push([_,y]),this.size=++T.size,this;T=this.__data__=new k(F)}return T.set(_,y),this.size=T.size,this}},163:(te,Z,g)=>{var E=g(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,A=E(function(P){var _=[];return 46===P.charCodeAt(0)&&_.push(""),P.replace(b,function(y,T,F,N){_.push(F?N.replace(k,"$1"):T||y)}),_});te.exports=A},8916:(te,Z,g)=>{var E=g(3423);te.exports=function k(A){if("string"==typeof A||E(A))return A;var P=A+"";return"0"==P&&1/A==-1/0?"-0":P}},7075:te=>{var g=Function.prototype.toString;te.exports=function E(b){if(null!=b){try{return g.call(b)}catch{}try{return b+""}catch{}}return""}},1075:te=>{te.exports=function Z(g){return function(){return g}}},7826:te=>{te.exports=function Z(g,E){return g===E||g!=g&&E!=E}},5440:(te,Z,g)=>{var E=g(2202);te.exports=function b(k,A,P){var _=null==k?void 0:E(k,A);return void 0===_?P:_}},2494:(te,Z,g)=>{var E=g(3274),b=g(4583);te.exports=function k(A,P){return null!=A&&b(A,P,E)}},5657:te=>{te.exports=function Z(g){return g}},1955:(te,Z,g)=>{var E=g(3022),b=g(3714),k=Object.prototype,A=k.hasOwnProperty,P=k.propertyIsEnumerable,_=E(function(){return arguments}())?E:function(y){return b(y)&&A.call(y,"callee")&&!P.call(y,"callee")};te.exports=_},2261:te=>{te.exports=Array.isArray},2447:(te,Z,g)=>{var E=g(6861),b=g(7765);te.exports=function k(A){return null!=A&&b(A.length)&&!E(A)}},7525:(te,Z,g)=>{te=g.nmd(te);var E=g(8492),b=g(5706),k=Z&&!Z.nodeType&&Z,A=k&&te&&!te.nodeType&&te,_=A&&A.exports===k?E.Buffer:void 0;te.exports=(_?_.isBuffer:void 0)||b},6030:(te,Z,g)=>{var b=g(8492).isFinite;te.exports=function k(A){return"number"==typeof A&&b(A)}},6861:(te,Z,g)=>{var E=g(4590),b=g(9794);te.exports=function y(T){if(!b(T))return!1;var F=E(T);return"[object Function]"==F||"[object GeneratorFunction]"==F||"[object AsyncFunction]"==F||"[object Proxy]"==F}},7765:te=>{te.exports=function g(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},9794:te=>{te.exports=function Z(g){var E=typeof g;return null!=g&&("object"==E||"function"==E)}},3714:te=>{te.exports=function Z(g){return null!=g&&"object"==typeof g}},3423:(te,Z,g)=>{var E=g(4590),b=g(3714);te.exports=function A(P){return"symbol"==typeof P||b(P)&&"[object Symbol]"==E(P)}},4868:(te,Z,g)=>{var E=g(8902),b=g(1156),k=g(8849),A=k&&k.isTypedArray,P=A?b(A):E;te.exports=P},4614:(te,Z,g)=>{var E=g(1384),b=g(190),k=g(2447);te.exports=function A(P){return k(P)?E(P):b(P)}},6990:function(te,Z,g){var E;te=g.nmd(te),function(){var b,_="Expected a function",T="__lodash_hash_undefined__",N="__lodash_placeholder__",x=32,I=128,Se=1/0,Ne=9007199254740991,me=4294967295,ot=[["ary",I],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",x],["partialRight",64],["rearg",256]],We="[object Arguments]",_e="[object Array]",O="[object Boolean]",oe="[object Date]",Le="[object Error]",Ye="[object Function]",he="[object GeneratorFunction]",Q="[object Map]",H="[object Number]",M="[object Object]",de="[object Promise]",ze="[object RegExp]",qe="[object Set]",ct="[object String]",Dt="[object Symbol]",Ht="[object WeakMap]",Oe="[object ArrayBuffer]",J="[object DataView]",C="[object Float32Array]",ae="[object Float64Array]",He="[object Int8Array]",Je="[object Int16Array]",st="[object Int32Array]",$t="[object Uint8Array]",cn="[object Uint8ClampedArray]",Yn="[object Uint16Array]",Wn="[object Uint32Array]",gn=/\b__p \+= '';/g,As=/\b(__p \+=) '' \+/g,$o=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ps=/&(?:amp|lt|gt|quot|#39);/g,Yi=/[&<>"']/g,ts=RegExp(Ps.source),So=RegExp(Yi.source),Xo=/<%-([\s\S]+?)%>/g,Ns=/<%([\s\S]+?)%>/g,Ss=/<%=([\s\S]+?)%>/g,mu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ph=/^\w*$/,Nh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kc=/[\\^$.*+?()[\]{}|]/g,qc=RegExp(Kc.source),Ba=/^\s+/,Ql=/\s/,ed=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jc=/\{\n\/\* \[wrapped with (.+)\] \*/,gu=/,? & /,td=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_u=/[()=,{}\[\]\/\s]/,Zc=/\\(\\)?/g,nd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qc=/\w*$/,Sn=/^[-+]0x[0-9a-f]+$/i,el=/^0b[01]+$/i,Yo=/^\[object .+?Constructor\]$/,ja=/^0o[0-7]+$/i,Ua=/^(?:0|[1-9]\d*)$/,Va=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ls=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fe="\\u2700-\\u27bf",$e="a-z\\xdf-\\xf6\\xf8-\\xff",rn="A-Z\\xc0-\\xd6\\xd8-\\xde",bn="\\ufe0e\\ufe0f",fs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fs="["+Te+"]",tl="["+fs+"]",ha="["+fe+"]",Nr="\\d+",Bs="["+Fe+"]",nl="["+$e+"]",Gi="[^"+Te+fs+Nr+Fe+$e+rn+"]",ir="\\ud83c[\\udffb-\\udfff]",no="[^"+Te+"]",id="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+rn+"]",dt="(?:"+nl+"|"+Gi+")",kt="(?:"+Be+"|"+Gi+")",Vt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Sr="(?:"+ha+"|"+ir+")?",Cn="["+bn+"]?",xC=Cn+Sr+"(?:\\u200d(?:"+[no,id,De].join("|")+")"+Cn+Sr+")*",nx="(?:"+[Bs,id,De].join("|")+")"+xC,Rt="(?:"+[no+ha+"?",ha,id,De,Fs].join("|")+")",Mp=RegExp("['\u2019]","g"),Bn=RegExp(ha,"g"),wi=RegExp(ir+"(?="+ir+")|"+Rt+xC,"g"),wC=RegExp([Be+"?"+nl+"+"+Vt+"(?="+[tl,Be,"$"].join("|")+")",kt+"+"+Kn+"(?="+[tl,Be+dt,"$"].join("|")+")",Be+"?"+dt+"+"+Vt,Be+"+"+Kn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nr,nx].join("|"),"g"),aF=RegExp("[\\u200d"+Te+fe+bn+"]"),EC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,N_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Co=-1,rr={};rr[C]=rr[ae]=rr[He]=rr[Je]=rr[st]=rr[$t]=rr[cn]=rr[Yn]=rr[Wn]=!0,rr[We]=rr[_e]=rr[Oe]=rr[O]=rr[J]=rr[oe]=rr[Le]=rr[Ye]=rr[Q]=rr[H]=rr[M]=rr[ze]=rr[qe]=rr[ct]=rr[Ht]=!1;var Hi={};Hi[We]=Hi[_e]=Hi[Oe]=Hi[J]=Hi[O]=Hi[oe]=Hi[C]=Hi[ae]=Hi[He]=Hi[Je]=Hi[st]=Hi[Q]=Hi[H]=Hi[M]=Hi[ze]=Hi[qe]=Hi[ct]=Hi[Dt]=Hi[$t]=Hi[cn]=Hi[Yn]=Hi[Wn]=!0,Hi[Le]=Hi[Ye]=Hi[Ht]=!1;var dF={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uF=parseFloat,hF=parseInt,ix="object"==typeof global&&global&&global.Object===Object&&global,fF="object"==typeof self&&self&&self.Object===Object&&self,ps=ix||fF||Function("return this")(),AC=Z&&!Z.nodeType&&Z,Cs=AC&&te&&!te.nodeType&&te,Dn=Cs&&Cs.exports===AC,rx=Dn&&ix.process,fa=function(){try{return Cs&&Cs.require&&Cs.require("util").types||rx&&rx.binding&&rx.binding("util")}catch{}}(),SC=fa&&fa.isArrayBuffer,St=fa&&fa.isDate,CC=fa&&fa.isMap,sn=fa&&fa.isRegExp,Lh=fa&&fa.isSet,sx=fa&&fa.isTypedArray;function ro(lt,wt,gt){switch(gt.length){case 0:return lt.call(wt);case 1:return lt.call(wt,gt[0]);case 2:return lt.call(wt,gt[0],gt[1]);case 3:return lt.call(wt,gt[0],gt[1],gt[2])}return lt.apply(wt,gt)}function TC(lt,wt,gt,Qt){for(var On=-1,Ei=null==lt?0:lt.length;++On<Ei;){var Lr=lt[On];wt(Qt,Lr,gt(Lr),lt)}return Qt}function js(lt,wt){for(var gt=-1,Qt=null==lt?0:lt.length;++gt<Qt&&!1!==wt(lt[gt],gt,lt););return lt}function Ip(lt,wt){for(var gt=null==lt?0:lt.length;gt--&&!1!==wt(lt[gt],gt,lt););return lt}function Dp(lt,wt){for(var gt=-1,Qt=null==lt?0:lt.length;++gt<Qt;)if(!wt(lt[gt],gt,lt))return!1;return!0}function pc(lt,wt){for(var gt=-1,Qt=null==lt?0:lt.length,On=0,Ei=[];++gt<Qt;){var Lr=lt[gt];wt(Lr,gt,lt)&&(Ei[On++]=Lr)}return Ei}function Rp(lt,wt){return!(null==lt||!lt.length)&&sd(lt,wt,0)>-1}function ei(lt,wt,gt){for(var Qt=-1,On=null==lt?0:lt.length;++Qt<On;)if(gt(wt,lt[Qt]))return!0;return!1}function Wi(lt,wt){for(var gt=-1,Qt=null==lt?0:lt.length,On=Array(Qt);++gt<Qt;)On[gt]=wt(lt[gt],gt,lt);return On}function mc(lt,wt){for(var gt=-1,Qt=wt.length,On=lt.length;++gt<Qt;)lt[On+gt]=wt[gt];return lt}function Ts(lt,wt,gt,Qt){var On=-1,Ei=null==lt?0:lt.length;for(Qt&&Ei&&(gt=lt[++On]);++On<Ei;)gt=wt(gt,lt[On],On,lt);return gt}function ox(lt,wt,gt,Qt){var On=null==lt?0:lt.length;for(Qt&&On&&(gt=lt[--On]);On--;)gt=wt(gt,lt[On],On,lt);return gt}function ax(lt,wt){for(var gt=-1,Qt=null==lt?0:lt.length;++gt<Qt;)if(wt(lt[gt],gt,lt))return!0;return!1}var Si=lx("length");function Op(lt,wt,gt){var Qt;return gt(lt,function(On,Ei,Lr){if(wt(On,Ei,Lr))return Qt=Ei,!1}),Qt}function bu(lt,wt,gt,Qt){for(var On=lt.length,Ei=gt+(Qt?1:-1);Qt?Ei--:++Ei<On;)if(wt(lt[Ei],Ei,lt))return Ei;return-1}function sd(lt,wt,gt){return wt==wt?function Lp(lt,wt,gt){for(var Qt=gt-1,On=lt.length;++Qt<On;)if(lt[Qt]===wt)return Qt;return-1}(lt,wt,gt):bu(lt,cx,gt)}function L_(lt,wt,gt,Qt){for(var On=gt-1,Ei=lt.length;++On<Ei;)if(Qt(lt[On],wt))return On;return-1}function cx(lt){return lt!=lt}function kp(lt,wt){var gt=null==lt?0:lt.length;return gt?ux(lt,wt)/gt:NaN}function lx(lt){return function(wt){return null==wt?b:wt[lt]}}function dx(lt){return function(wt){return null==lt?b:lt[wt]}}function MC(lt,wt,gt,Qt,On){return On(lt,function(Ei,Lr,Fi){gt=Qt?(Qt=!1,Ei):wt(gt,Ei,Lr,Fi)}),gt}function ux(lt,wt){for(var gt,Qt=-1,On=lt.length;++Qt<On;){var Ei=wt(lt[Qt]);Ei!==b&&(gt=gt===b?Ei:gt+Ei)}return gt}function od(lt,wt){for(var gt=-1,Qt=Array(lt);++gt<lt;)Qt[gt]=wt(gt);return Qt}function Fh(lt){return lt&&lt.slice(0,jh(lt)+1).replace(Ba,"")}function To(lt){return function(wt){return lt(wt)}}function B_(lt,wt){return Wi(wt,function(gt){return lt[gt]})}function Bh(lt,wt){return lt.has(wt)}function j_(lt,wt){for(var gt=-1,Qt=lt.length;++gt<Qt&&sd(wt,lt[gt],0)>-1;);return gt}function ad(lt,wt){for(var gt=lt.length;gt--&&sd(wt,lt[gt],0)>-1;);return gt}var il=dx({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),DC=dx({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nt(lt){return"\\"+dF[lt]}function Ut(lt){return aF.test(lt)}function cd(lt){var wt=-1,gt=Array(lt.size);return lt.forEach(function(Qt,On){gt[++wt]=[On,Qt]}),gt}function fx(lt,wt){return function(gt){return lt(wt(gt))}}function rl(lt,wt){for(var gt=-1,Qt=lt.length,On=0,Ei=[];++gt<Qt;){var Lr=lt[gt];(Lr===wt||Lr===N)&&(lt[gt]=N,Ei[On++]=gt)}return Ei}function Np(lt){var wt=-1,gt=Array(lt.size);return lt.forEach(function(Qt){gt[++wt]=Qt}),gt}function Us(lt){return Ut(lt)?function z_(lt){for(var wt=wi.lastIndex=0;wi.test(lt);)++wt;return wt}(lt):Si(lt)}function qn(lt){return Ut(lt)?function px(lt){return lt.match(wi)||[]}(lt):function pF(lt){return lt.split("")}(lt)}function jh(lt){for(var wt=lt.length;wt--&&Ql.test(lt.charAt(wt)););return wt}var V_=dx({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Vh=function lt(wt){var u,gt=(wt=null==wt?ps:Vh.defaults(ps.Object(),wt,Vh.pick(ps,N_))).Array,Qt=wt.Date,On=wt.Error,Ei=wt.Function,Lr=wt.Math,Fi=wt.Object,Fp=wt.RegExp,RC=wt.String,Ko=wt.TypeError,so=gt.prototype,ld=Fi.prototype,Bp=wt["__core-js_shared__"],jp=Ei.prototype.toString,Mi=ld.hasOwnProperty,kC=0,G_=(u=/[^.]+$/.exec(Bp&&Bp.keys&&Bp.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Up=ld.toString,PC=jp.call(Fi),NC=ps._,$n=Fp("^"+jp.call(Mi).replace(Kc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vp=Dn?wt.Buffer:b,sl=wt.Symbol,zp=wt.Uint8Array,dn=Vp?Vp.allocUnsafe:b,Gp=fx(Fi.getPrototypeOf,Fi),H_=Fi.create,jt=ld.propertyIsEnumerable,Wr=so.splice,mi=sl?sl.isConcatSpreadable:b,Cr=sl?sl.iterator:b,Tr=sl?sl.toStringTag:b,bc=function(){try{var u=yl(Fi,"defineProperty");return u({},"",{}),u}catch{}}(),Mo=wt.clearTimeout!==ps.clearTimeout&&wt.clearTimeout,mx=Qt&&Qt.now!==ps.Date.now&&Qt.now,gx=wt.setTimeout!==ps.setTimeout&&wt.setTimeout,dd=Lr.ceil,Hp=Lr.floor,W_=Fi.getOwnPropertySymbols,Mr=Vp?Vp.isBuffer:b,Kt=wt.isFinite,jn=so.join,sr=fx(Fi.keys,Fi),Ii=Lr.max,Fr=Lr.min,Ms=Qt.now,yu=wt.parseInt,yr=Lr.random,ol=so.reverse,al=yl(wt,"DataView"),Rn=yl(wt,"Map"),ud=yl(wt,"Promise"),hd=yl(wt,"Set"),za=yl(wt,"WeakMap"),Ki=yl(Fi,"create"),cl=za&&new za,ma={},Ga=Pu(al),zh=Pu(Rn),_x=Pu(ud),ll=Pu(hd),yc=Pu(za),fd=sl?sl.prototype:b,dl=fd?fd.valueOf:b,ci=fd?fd.toString:b;function Pe(u){if(Ji(u)&&!Un(u)&&!(u instanceof ai)){if(u instanceof Ir)return u;if(Mi.call(u,"__wrapped__"))return oT(u)}return new Ir(u)}var ul=function(){function u(){}return function(f){if(!qi(f))return{};if(H_)return H_(f);u.prototype=f;var w=new u;return u.prototype=b,w}}();function Gh(){}function Ir(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=b}function ai(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function xu(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var ne=u[f];this.set(ne[0],ne[1])}}function $r(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var ne=u[f];this.set(ne[0],ne[1])}}function vc(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var ne=u[f];this.set(ne[0],ne[1])}}function wu(u){var f=-1,w=null==u?0:u.length;for(this.__data__=new vc;++f<w;)this.add(u[f])}function Ha(u){var f=this.__data__=new $r(u);this.size=f.size}function jC(u,f){var w=Un(u),ne=!w&&Ic(u),Ee=!w&&!ne&&Sd(u),je=!w&&!ne&&!Ee&&Wu(u),Qe=w||ne||Ee||je,it=Qe?od(u.length,RC):[],ut=it.length;for(var Ct in u)(f||Mi.call(u,Ct))&&(!Qe||!("length"==Ct||Ee&&("offset"==Ct||"parent"==Ct)||je&&("buffer"==Ct||"byteLength"==Ct||"byteOffset"==Ct)||Xa(Ct,ut)))&&it.push(Ct);return it}function UC(u){var f=u.length;return f?u[sb(0,f-1)]:b}function MF(u,f){return mm(zs(u),gd(f,0,u.length))}function md(u){return mm(zs(u))}function $p(u,f,w){(w!==b&&!Ro(u[f],w)||w===b&&!(f in u))&&xc(u,f,w)}function Xp(u,f,w){var ne=u[f];(!Mi.call(u,f)||!Ro(ne,w)||w===b&&!(f in u))&&xc(u,f,w)}function Eu(u,f){for(var w=u.length;w--;)if(Ro(u[w][0],f))return w;return-1}function vx(u,f,w,ne){return Wa(u,function(Ee,je,Qe){f(ne,Ee,w(Ee),Qe)}),ne}function xx(u,f){return u&&_a(f,bs(f),u)}function xc(u,f,w){"__proto__"==f&&bc?bc(u,f,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[f]=w}function wx(u,f){for(var w=-1,ne=f.length,Ee=gt(ne),je=null==u;++w<ne;)Ee[w]=je?b:Xu(u,f[w]);return Ee}function gd(u,f,w){return u==u&&(w!==b&&(u=u<=w?u:w),f!==b&&(u=u>=f?u:f)),u}function Dr(u,f,w,ne,Ee,je){var Qe,it=1&f,ut=2&f,Ct=4&f;if(w&&(Qe=Ee?w(u,ne,Ee,je):w(u)),Qe!==b)return Qe;if(!qi(u))return u;var Et=Un(u);if(Et){if(Qe=function xb(u){var f=u.length,w=new u.constructor(f);return f&&"string"==typeof u[0]&&Mi.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!it)return zs(u,Qe)}else{var Pt=Kr(u),Xt=Pt==Ye||Pt==he;if(Sd(u))return Nx(u,it);if(Pt==M||Pt==We||Xt&&!Ee){if(Qe=ut||Xt?{}:Gx(u),!it)return ut?function fb(u,f){return _a(u,Vx(u),f)}(u,function VC(u,f){return u&&_a(f,No(f),u)}(Qe,u)):function jx(u,f){return _a(u,qo(u),f)}(u,xx(Qe,u))}else{if(!Hi[Pt])return Ee?u:{};Qe=function Hx(u,f,w){var ne=u.constructor;switch(f){case Oe:return lb(u);case O:case oe:return new ne(+u);case J:return function db(u,f){var w=f?lb(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case C:case ae:case He:case Je:case st:case $t:case cn:case Yn:case Wn:return om(u,w);case Q:return new ne;case H:case ct:return new ne(u);case ze:return function ub(u){var f=new u.constructor(u.source,Qc.exec(u));return f.lastIndex=u.lastIndex,f}(u);case qe:return new ne;case Dt:return function Lx(u){return dl?Fi(dl.call(u)):{}}(u)}}(u,Pt,it)}}je||(je=new Ha);var Mt=je.get(u);if(Mt)return Mt;je.set(u,Qe),Pm(u)?u.forEach(function(pn){Qe.add(Dr(pn,f,w,pn,u,je))}):Fb(u)&&u.forEach(function(pn,di){Qe.set(di,Dr(pn,f,w,di,u,je))});var Qn=Et?b:(Ct?ut?vd:qh:ut?No:bs)(u);return js(Qn||u,function(pn,di){Qn&&(pn=u[di=pn]),Xp(Qe,di,Dr(pn,f,w,di,u,je))}),Qe}function Xr(u,f,w){var ne=w.length;if(null==u)return!ne;for(u=Fi(u);ne--;){var Ee=w[ne],Qe=u[Ee];if(Qe===b&&!(Ee in u)||!(0,f[Ee])(Qe))return!1}return!0}function Y_(u,f,w){if("function"!=typeof u)throw new Ko(_);return ku(function(){u.apply(b,w)},f)}function Kp(u,f,w,ne){var Ee=-1,je=Rp,Qe=!0,it=u.length,ut=[],Ct=f.length;if(!it)return ut;w&&(f=Wi(f,To(w))),ne?(je=ei,Qe=!1):f.length>=200&&(je=Bh,Qe=!1,f=new wu(f));e:for(;++Ee<it;){var Et=u[Ee],Pt=null==w?Et:w(Et);if(Et=ne||0!==Et?Et:0,Qe&&Pt==Pt){for(var Xt=Ct;Xt--;)if(f[Xt]===Pt)continue e;ut.push(Et)}else je(f,Pt,ne)||ut.push(Et)}return ut}Pe.templateSettings={escape:Xo,evaluate:Ns,interpolate:Ss,variable:"",imports:{_:Pe}},(Pe.prototype=Gh.prototype).constructor=Pe,(Ir.prototype=ul(Gh.prototype)).constructor=Ir,(ai.prototype=ul(Gh.prototype)).constructor=ai,xu.prototype.clear=function oo(){this.__data__=Ki?Ki(null):{},this.size=0},xu.prototype.delete=function ao(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},xu.prototype.get=function $_(u){var f=this.__data__;if(Ki){var w=f[u];return w===T?b:w}return Mi.call(f,u)?f[u]:b},xu.prototype.has=function pd(u){var f=this.__data__;return Ki?f[u]!==b:Mi.call(f,u)},xu.prototype.set=function Wp(u,f){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Ki&&f===b?T:f,this},$r.prototype.clear=function X_(){this.__data__=[],this.size=0},$r.prototype.delete=function LC(u){var f=this.__data__,w=Eu(f,u);return!(w<0||(w==f.length-1?f.pop():Wr.call(f,w,1),--this.size,0))},$r.prototype.get=function FC(u){var f=this.__data__,w=Eu(f,u);return w<0?b:f[w][1]},$r.prototype.has=function _F(u){return Eu(this.__data__,u)>-1},$r.prototype.set=function BC(u,f){var w=this.__data__,ne=Eu(w,u);return ne<0?(++this.size,w.push([u,f])):w[ne][1]=f,this},vc.prototype.clear=function bF(){this.size=0,this.__data__={hash:new xu,map:new(Rn||$r),string:new xu}},vc.prototype.delete=function yF(u){var f=yb(this,u).delete(u);return this.size-=f?1:0,f},vc.prototype.get=function vF(u){return yb(this,u).get(u)},vc.prototype.has=function xF(u){return yb(this,u).has(u)},vc.prototype.set=function wF(u,f){var w=yb(this,u),ne=w.size;return w.set(u,f),this.size+=w.size==ne?0:1,this},wu.prototype.add=wu.prototype.push=function EF(u){return this.__data__.set(u,T),this},wu.prototype.has=function AF(u){return this.__data__.has(u)},Ha.prototype.clear=function SF(){this.__data__=new $r,this.size=0},Ha.prototype.delete=function CF(u){var f=this.__data__,w=f.delete(u);return this.size=f.size,w},Ha.prototype.get=function TF(u){return this.__data__.get(u)},Ha.prototype.has=function bx(u){return this.__data__.has(u)},Ha.prototype.set=function yx(u,f){var w=this.__data__;if(w instanceof $r){var ne=w.__data__;if(!Rn||ne.length<199)return ne.push([u,f]),this.size=++w.size,this;w=this.__data__=new vc(ne)}return w.set(u,f),this.size=w.size,this};var Wa=Ds($a),qp=Ds(Ex,!0);function Jp(u,f){var w=!0;return Wa(u,function(ne,Ee,je){return w=!!f(ne,Ee,je)}),w}function Zp(u,f,w){for(var ne=-1,Ee=u.length;++ne<Ee;){var je=u[ne],Qe=f(je);if(null!=Qe&&(it===b?Qe==Qe&&!Oo(Qe):w(Qe,it)))var it=Qe,ut=je}return ut}function K_(u,f){var w=[];return Wa(u,function(ne,Ee,je){f(ne,Ee,je)&&w.push(ne)}),w}function Yr(u,f,w,ne,Ee){var je=-1,Qe=u.length;for(w||(w=$x),Ee||(Ee=[]);++je<Qe;){var it=u[je];f>0&&w(it)?f>1?Yr(it,f-1,w,ne,Ee):mc(Ee,it):ne||(Ee[Ee.length]=it)}return Ee}var q_=ml(),Wh=ml(!0);function $a(u,f){return u&&q_(u,f,bs)}function Ex(u,f){return u&&Wh(u,f,bs)}function J_(u,f){return pc(f,function(w){return Qo(u[w])})}function hl(u,f){for(var w=0,ne=(f=Do(f,u)).length;null!=u&&w<ne;)u=u[Mc(f[w++])];return w&&w==ne?u:b}function Z_(u,f,w){var ne=f(u);return Un(u)?ne:mc(ne,w(u))}function Vs(u){return null==u?u===b?"[object Undefined]":"[object Null]":Tr&&Tr in Fi(u)?function tT(u){var f=Mi.call(u,Tr),w=u[Tr];try{u[Tr]=b;var ne=!0}catch{}var Ee=Up.call(u);return ne&&(f?u[Tr]=w:delete u[Tr]),Ee}(u):function iT(u){return Up.call(u)}(u)}function Qp(u,f){return u>f}function Br(u,f){return null!=u&&Mi.call(u,f)}function Ax(u,f){return null!=u&&f in Fi(u)}function Q_(u,f,w){for(var ne=w?ei:Rp,Ee=u[0].length,je=u.length,Qe=je,it=gt(je),ut=1/0,Ct=[];Qe--;){var Et=u[Qe];Qe&&f&&(Et=Wi(Et,To(f))),ut=Fr(Et.length,ut),it[Qe]=!w&&(f||Ee>=120&&Et.length>=120)?new wu(Qe&&Et):b}Et=u[0];var Pt=-1,Xt=it[0];e:for(;++Pt<Ee&&Ct.length<ut;){var Mt=Et[Pt],Tn=f?f(Mt):Mt;if(Mt=w||0!==Mt?Mt:0,!(Xt?Bh(Xt,Tn):ne(Ct,Tn,w))){for(Qe=je;--Qe;){var Qn=it[Qe];if(!(Qn?Bh(Qn,Tn):ne(u[Qe],Tn,w)))continue e}Xt&&Xt.push(Tn),Ct.push(Mt)}}return Ct}function Au(u,f,w){var ne=null==(u=Tc(u,f=Do(f,u)))?u:u[Mc(Zo(f))];return null==ne?b:ro(ne,u,w)}function Cx(u){return Ji(u)&&Vs(u)==We}function co(u,f,w,ne,Ee){return u===f||(null==u||null==f||!Ji(u)&&!Ji(f)?u!=u&&f!=f:function Tx(u,f,w,ne,Ee,je){var Qe=Un(u),it=Un(f),ut=Qe?_e:Kr(u),Ct=it?_e:Kr(f),Et=(ut=ut==We?M:ut)==M,Pt=(Ct=Ct==We?M:Ct)==M,Xt=ut==Ct;if(Xt&&Sd(u)){if(!Sd(f))return!1;Qe=!0,Et=!1}if(Xt&&!Et)return je||(je=new Ha),Qe||Wu(u)?Ux(u,f,w,ne,Ee,je):function eT(u,f,w,ne,Ee,je,Qe){switch(w){case J:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Oe:return!(u.byteLength!=f.byteLength||!je(new zp(u),new zp(f)));case O:case oe:case H:return Ro(+u,+f);case Le:return u.name==f.name&&u.message==f.message;case ze:case ct:return u==f+"";case Q:var it=cd;case qe:if(it||(it=Np),u.size!=f.size&&!(1&ne))return!1;var Ct=Qe.get(u);if(Ct)return Ct==f;ne|=2,Qe.set(u,f);var Et=Ux(it(u),it(f),ne,Ee,je,Qe);return Qe.delete(u),Et;case Dt:if(dl)return dl.call(u)==dl.call(f)}return!1}(u,f,ut,w,ne,Ee,je);if(!(1&w)){var Mt=Et&&Mi.call(u,"__wrapped__"),Tn=Pt&&Mi.call(f,"__wrapped__");if(Mt||Tn){var Qn=Mt?u.value():u,pn=Tn?f.value():f;return je||(je=new Ha),Ee(Qn,pn,w,ne,je)}}return!!Xt&&(je||(je=new Ha),function RF(u,f,w,ne,Ee,je){var Qe=1&w,it=qh(u),ut=it.length;if(ut!=qh(f).length&&!Qe)return!1;for(var Pt=ut;Pt--;){var Xt=it[Pt];if(!(Qe?Xt in f:Mi.call(f,Xt)))return!1}var Mt=je.get(u),Tn=je.get(f);if(Mt&&Tn)return Mt==f&&Tn==u;var Qn=!0;je.set(u,f),je.set(f,u);for(var pn=Qe;++Pt<ut;){var di=u[Xt=it[Pt]],gi=f[Xt];if(ne)var jr=Qe?ne(gi,di,Xt,f,u,je):ne(di,gi,Xt,u,f,je);if(!(jr===b?di===gi||Ee(di,gi,w,ne,je):jr)){Qn=!1;break}pn||(pn="constructor"==Xt)}if(Qn&&!pn){var Ws=u.constructor,$s=f.constructor;Ws!=$s&&"constructor"in u&&"constructor"in f&&!("function"==typeof Ws&&Ws instanceof Ws&&"function"==typeof $s&&$s instanceof $s)&&(Qn=!1)}return je.delete(u),je.delete(f),Qn}(u,f,w,ne,Ee,je))}(u,f,w,ne,co,Ee))}function Li(u,f,w,ne){var Ee=w.length,je=Ee,Qe=!ne;if(null==u)return!je;for(u=Fi(u);Ee--;){var it=w[Ee];if(Qe&&it[2]?it[1]!==u[it[0]]:!(it[0]in u))return!1}for(;++Ee<je;){var ut=(it=w[Ee])[0],Ct=u[ut],Et=it[1];if(Qe&&it[2]){if(Ct===b&&!(ut in u))return!1}else{var Pt=new Ha;if(ne)var Xt=ne(Ct,Et,ut,u,f,Pt);if(!(Xt===b?co(Et,Ct,3,ne,Pt):Xt))return!1}}return!0}function Ix(u){return!(!qi(u)||function Xx(u){return!!G_&&G_ in u}(u))&&(Qo(u)?$n:Yo).test(Pu(u))}function tb(u){return"function"==typeof u?u:null==u?fo:"object"==typeof u?Un(u)?wc(u[0],u[1]):Rx(u):Gw(u)}function fl(u){if(!Cc(u))return sr(u);var f=[];for(var w in Fi(u))Mi.call(u,w)&&"constructor"!=w&&f.push(w);return f}function nb(u,f){return u<f}function Dx(u,f){var w=-1,ne=Hs(u)?gt(u.length):[];return Wa(u,function(Ee,je,Qe){ne[++w]=f(Ee,je,Qe)}),ne}function Rx(u){var f=pm(u);return 1==f.length&&f[0][2]?Rs(f[0][0],f[0][1]):function(w){return w===u||Li(w,u,f)}}function wc(u,f){return Ru(u)&&Kx(f)?Rs(Mc(u),f):function(w){var ne=Xu(w,u);return ne===b&&ne===f?Cd(w,u):co(f,ne,3)}}function $h(u,f,w,ne,Ee){u!==f&&q_(f,function(je,Qe){if(Ee||(Ee=new Ha),qi(je))!function WC(u,f,w,ne,Ee,je,Qe){var it=vl(u,w),ut=vl(f,w),Ct=Qe.get(ut);if(Ct)$p(u,w,Ct);else{var Et=je?je(it,ut,w+"",u,f,Qe):b,Pt=Et===b;if(Pt){var Xt=Un(ut),Mt=!Xt&&Sd(ut),Tn=!Xt&&!Mt&&Wu(ut);Et=ut,Xt||Mt||Tn?Un(it)?Et=it:xr(it)?Et=zs(it):Mt?(Pt=!1,Et=Nx(ut,!0)):Tn?(Pt=!1,Et=om(ut,!0)):Et=[]:Hu(ut)||Ic(ut)?(Et=it,Ic(it)?Et=El(it):(!qi(it)||Qo(it))&&(Et=Gx(ut))):Pt=!1}Pt&&(Qe.set(ut,Et),Ee(Et,ut,ne,je,Qe),Qe.delete(ut)),$p(u,w,Et)}}(u,f,Qe,w,$h,ne,Ee);else{var it=ne?ne(vl(u,Qe),je,Qe+"",u,f,Ee):b;it===b&&(it=je),$p(u,Qe,it)}},No)}function ib(u,f){var w=u.length;if(w)return Xa(f+=f<0?w:0,w)?u[f]:b}function rb(u,f,w){f=f.length?Wi(f,function(je){return Un(je)?function(Qe){return hl(Qe,1===je.length?je[0]:je)}:je}):[fo];var ne=-1;return f=Wi(f,To(xn())),function gF(lt,wt){var gt=lt.length;for(lt.sort(wt);gt--;)lt[gt]=lt[gt].value;return lt}(Dx(u,function(je,Qe,it){return{criteria:Wi(f,function(Ct){return Ct(je)}),index:++ne,value:je}}),function(je,Qe){return function Bx(u,f,w){for(var ne=-1,Ee=u.criteria,je=f.criteria,Qe=Ee.length,it=w.length;++ne<Qe;){var ut=Fx(Ee[ne],je[ne]);if(ut)return ne>=it?ut:ut*("desc"==w[ne]?-1:1)}return u.index-f.index}(je,Qe,w)})}function kx(u,f,w){for(var ne=-1,Ee=f.length,je={};++ne<Ee;){var Qe=f[ne],it=hl(u,Qe);w(it,Qe)&&Xh(je,Do(Qe,u),it)}return je}function tm(u,f,w,ne){var Ee=ne?L_:sd,je=-1,Qe=f.length,it=u;for(u===f&&(f=zs(f)),w&&(it=Wi(u,To(w)));++je<Qe;)for(var ut=0,Ct=f[je],Et=w?w(Ct):Ct;(ut=Ee(it,Et,ut,ne))>-1;)it!==u&&Wr.call(it,ut,1),Wr.call(u,ut,1);return u}function $C(u,f){for(var w=u?f.length:0,ne=w-1;w--;){var Ee=f[w];if(w==ne||Ee!==je){var je=Ee;Xa(Ee)?Wr.call(u,Ee,1):Yh(u,Ee)}}return u}function sb(u,f){return u+Hp(yr()*(f-u+1))}function ob(u,f){var w="";if(!u||f<1||f>Ne)return w;do{f%2&&(w+=u),(f=Hp(f/2))&&(u+=u)}while(f);return w}function ti(u,f){return Zh(Ab(u,f,fo),u+"")}function Su(u){return UC(Yu(u))}function YC(u,f){var w=Yu(u);return mm(w,gd(f,0,w.length))}function Xh(u,f,w,ne){if(!qi(u))return u;for(var Ee=-1,je=(f=Do(f,u)).length,Qe=je-1,it=u;null!=it&&++Ee<je;){var ut=Mc(f[Ee]),Ct=w;if("__proto__"===ut||"constructor"===ut||"prototype"===ut)return u;if(Ee!=Qe){var Et=it[ut];(Ct=ne?ne(Et,ut,it):b)===b&&(Ct=qi(Et)?Et:Xa(f[Ee+1])?[]:{})}Xp(it,ut,Ct),it=it[ut]}return u}var Px=cl?function(u,f){return cl.set(u,f),u}:fo,KC=bc?function(u,f){return bc(u,"toString",{configurable:!0,enumerable:!1,value:jm(f),writable:!0})}:fo;function qC(u){return mm(Yu(u))}function At(u,f,w){var ne=-1,Ee=u.length;f<0&&(f=-f>Ee?0:Ee+f),(w=w>Ee?Ee:w)<0&&(w+=Ee),Ee=f>w?0:w-f>>>0,f>>>=0;for(var je=gt(Ee);++ne<Ee;)je[ne]=u[ne+f];return je}function yi(u,f){var w;return Wa(u,function(ne,Ee,je){return!(w=f(ne,Ee,je))}),!!w}function ur(u,f,w){var ne=0,Ee=null==u?ne:u.length;if("number"==typeof f&&f==f&&Ee<=2147483647){for(;ne<Ee;){var je=ne+Ee>>>1,Qe=u[je];null!==Qe&&!Oo(Qe)&&(w?Qe<=f:Qe<f)?ne=je+1:Ee=je}return Ee}return vr(u,f,fo,w)}function vr(u,f,w,ne){var Ee=0,je=null==u?0:u.length;if(0===je)return 0;for(var Qe=(f=w(f))!=f,it=null===f,ut=Oo(f),Ct=f===b;Ee<je;){var Et=Hp((Ee+je)/2),Pt=w(u[Et]),Xt=Pt!==b,Mt=null===Pt,Tn=Pt==Pt,Qn=Oo(Pt);if(Qe)var pn=ne||Tn;else pn=Ct?Tn&&(ne||Xt):it?Tn&&Xt&&(ne||!Mt):ut?Tn&&Xt&&!Mt&&(ne||!Qn):!Mt&&!Qn&&(ne?Pt<=f:Pt<f);pn?Ee=Et+1:je=Et}return Fr(je,4294967294)}function ns(u,f){for(var w=-1,ne=u.length,Ee=0,je=[];++w<ne;){var Qe=u[w],it=f?f(Qe):Qe;if(!w||!Ro(it,ut)){var ut=it;je[Ee++]=0===Qe?0:Qe}}return je}function ab(u){return"number"==typeof u?u:Oo(u)?NaN:+u}function gs(u){if("string"==typeof u)return u;if(Un(u))return Wi(u,gs)+"";if(Oo(u))return ci?ci.call(u):"";var f=u+"";return"0"==f&&1/u==-Se?"-0":f}function _s(u,f,w){var ne=-1,Ee=Rp,je=u.length,Qe=!0,it=[],ut=it;if(w)Qe=!1,Ee=ei;else if(je>=200){var Ct=f?null:Iu(u);if(Ct)return Np(Ct);Qe=!1,Ee=Bh,ut=new wu}else ut=f?[]:it;e:for(;++ne<je;){var Et=u[ne],Pt=f?f(Et):Et;if(Et=w||0!==Et?Et:0,Qe&&Pt==Pt){for(var Xt=ut.length;Xt--;)if(ut[Xt]===Pt)continue e;f&&ut.push(Pt),it.push(Et)}else Ee(ut,Pt,w)||(ut!==it&&ut.push(Pt),it.push(Et))}return it}function Yh(u,f){return null==(u=Tc(u,f=Do(f,u)))||delete u[Mc(Zo(f))]}function nm(u,f,w,ne){return Xh(u,f,w(hl(u,f)),ne)}function im(u,f,w,ne){for(var Ee=u.length,je=ne?Ee:-1;(ne?je--:++je<Ee)&&f(u[je],je,u););return w?At(u,ne?0:je,ne?je+1:Ee):At(u,ne?je+1:0,ne?Ee:je)}function JC(u,f){var w=u;return w instanceof ai&&(w=w.value()),Ts(f,function(ne,Ee){return Ee.func.apply(Ee.thisArg,mc([ne],Ee.args))},w)}function rm(u,f,w){var ne=u.length;if(ne<2)return ne?_s(u[0]):[];for(var Ee=-1,je=gt(ne);++Ee<ne;)for(var Qe=u[Ee],it=-1;++it<ne;)it!=Ee&&(je[Ee]=Kp(je[Ee]||Qe,u[it],f,w));return _s(Yr(je,1),f,w)}function Is(u,f,w){for(var ne=-1,Ee=u.length,je=f.length,Qe={};++ne<Ee;)w(Qe,u[ne],ne<je?f[ne]:b);return Qe}function ga(u){return xr(u)?u:[]}function sm(u){return"function"==typeof u?u:fo}function Do(u,f){return Un(u)?u:Ru(u,f)?[u]:sT(Ti(u))}var Ec=ti;function pl(u,f,w){var ne=u.length;return w=w===b?ne:w,!f&&w>=ne?u:At(u,f,w)}var cb=Mo||function(u){return ps.clearTimeout(u)};function Nx(u,f){if(f)return u.slice();var w=u.length,ne=dn?dn(w):new u.constructor(w);return u.copy(ne),ne}function lb(u){var f=new u.constructor(u.byteLength);return new zp(f).set(new zp(u)),f}function om(u,f){var w=f?lb(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function Fx(u,f){if(u!==f){var w=u!==b,ne=null===u,Ee=u==u,je=Oo(u),Qe=f!==b,it=null===f,ut=f==f,Ct=Oo(f);if(!it&&!Ct&&!je&&u>f||je&&Qe&&ut&&!it&&!Ct||ne&&Qe&&ut||!w&&ut||!Ee)return 1;if(!ne&&!je&&!Ct&&u<f||Ct&&w&&Ee&&!ne&&!je||it&&w&&Ee||!Qe&&Ee||!ut)return-1}return 0}function am(u,f,w,ne){for(var Ee=-1,je=u.length,Qe=w.length,it=-1,ut=f.length,Ct=Ii(je-Qe,0),Et=gt(ut+Ct),Pt=!ne;++it<ut;)Et[it]=f[it];for(;++Ee<Qe;)(Pt||Ee<je)&&(Et[w[Ee]]=u[Ee]);for(;Ct--;)Et[it++]=u[Ee++];return Et}function hb(u,f,w,ne){for(var Ee=-1,je=u.length,Qe=-1,it=w.length,ut=-1,Ct=f.length,Et=Ii(je-it,0),Pt=gt(Et+Ct),Xt=!ne;++Ee<Et;)Pt[Ee]=u[Ee];for(var Mt=Ee;++ut<Ct;)Pt[Mt+ut]=f[ut];for(;++Qe<it;)(Xt||Ee<je)&&(Pt[Mt+w[Qe]]=u[Ee++]);return Pt}function zs(u,f){var w=-1,ne=u.length;for(f||(f=gt(ne));++w<ne;)f[w]=u[w];return f}function _a(u,f,w,ne){var Ee=!w;w||(w={});for(var je=-1,Qe=f.length;++je<Qe;){var it=f[je],ut=ne?ne(w[it],u[it],it,w,u):b;ut===b&&(ut=u[it]),Ee?xc(w,it,ut):Xp(w,it,ut)}return w}function cm(u,f){return function(w,ne){var Ee=Un(w)?TC:vx,je=f?f():{};return Ee(w,u,xn(ne,2),je)}}function Cu(u){return ti(function(f,w){var ne=-1,Ee=w.length,je=Ee>1?w[Ee-1]:b,Qe=Ee>2?w[2]:b;for(je=u.length>3&&"function"==typeof je?(Ee--,je):b,Qe&&Gs(w[0],w[1],Qe)&&(je=Ee<3?b:je,Ee=1),f=Fi(f);++ne<Ee;){var it=w[ne];it&&u(f,it,ne,je)}return f})}function Ds(u,f){return function(w,ne){if(null==w)return w;if(!Hs(w))return u(w,ne);for(var Ee=w.length,je=f?Ee:-1,Qe=Fi(w);(f?je--:++je<Ee)&&!1!==ne(Qe[je],je,Qe););return w}}function ml(u){return function(f,w,ne){for(var Ee=-1,je=Fi(f),Qe=ne(f),it=Qe.length;it--;){var ut=Qe[u?it:++Ee];if(!1===w(je[ut],ut,je))break}return f}}function lm(u){return function(f){var w=Ut(f=Ti(f))?qn(f):b,ne=w?w[0]:f.charAt(0),Ee=w?pl(w,1).join(""):f.slice(1);return ne[u]()+Ee}}function Tu(u){return function(f){return Ts(Lo($b(f).replace(Mp,"")),u,"")}}function _d(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var w=ul(u.prototype),ne=u.apply(w,f);return qi(ne)?ne:w}}function pb(u){return function(f,w,ne){var Ee=Fi(f);if(!Hs(f)){var je=xn(w,3);f=bs(f),w=function(it){return je(Ee[it],it,Ee)}}var Qe=u(f,w,ne);return Qe>-1?Ee[je?f[Qe]:Qe]:b}}function mb(u){return gl(function(f){var w=f.length,ne=w,Ee=Ir.prototype.thru;for(u&&f.reverse();ne--;){var je=f[ne];if("function"!=typeof je)throw new Ko(_);if(Ee&&!Qe&&"wrapper"==_l(je))var Qe=new Ir([],!0)}for(ne=Qe?ne:w;++ne<w;){var it=_l(je=f[ne]),ut="wrapper"==it?bb(je):b;Qe=ut&&wb(ut[0])&&424==ut[1]&&!ut[4].length&&1==ut[9]?Qe[_l(ut[0])].apply(Qe,ut[3]):1==je.length&&wb(je)?Qe[it]():Qe.thru(je)}return function(){var Ct=arguments,Et=Ct[0];if(Qe&&1==Ct.length&&Un(Et))return Qe.plant(Et).value();for(var Pt=0,Xt=w?f[Pt].apply(this,Ct):Et;++Pt<w;)Xt=f[Pt].call(this,Xt);return Xt}})}function bd(u,f,w,ne,Ee,je,Qe,it,ut,Ct){var Et=f&I,Pt=1&f,Xt=2&f,Mt=24&f,Tn=512&f,Qn=Xt?b:_d(u);return function pn(){for(var di=arguments.length,gi=gt(di),jr=di;jr--;)gi[jr]=arguments[jr];if(Mt)var Ws=bl(pn),$s=function IC(lt,wt){for(var gt=lt.length,Qt=0;gt--;)lt[gt]===wt&&++Qt;return Qt}(gi,Ws);if(ne&&(gi=am(gi,ne,Ee,Mt)),je&&(gi=hb(gi,je,Qe,Mt)),di-=$s,Mt&&di<Ct){var Ur=rl(gi,Ws);return gb(u,f,bd,pn.placeholder,w,gi,Ur,it,ut,Ct-di)}var Fo=Pt?w:this,Ka=Xt?Fo[u]:u;return di=gi.length,it?gi=function Ou(u,f){for(var w=u.length,ne=Fr(f.length,w),Ee=zs(u);ne--;){var je=f[ne];u[ne]=Xa(je,w)?Ee[je]:b}return u}(gi,it):Tn&&di>1&&gi.reverse(),Et&&ut<di&&(gi.length=ut),this&&this!==ps&&this instanceof pn&&(Ka=Qn||_d(Ka)),Ka.apply(Fo,gi)}}function Ac(u,f){return function(w,ne){return function Sx(u,f,w,ne){return $a(u,function(Ee,je,Qe){f(ne,w(Ee),je,Qe)}),ne}(w,u,f(ne),{})}}function dm(u,f){return function(w,ne){var Ee;if(w===b&&ne===b)return f;if(w!==b&&(Ee=w),ne!==b){if(Ee===b)return ne;"string"==typeof w||"string"==typeof ne?(w=gs(w),ne=gs(ne)):(w=ab(w),ne=ab(ne)),Ee=u(w,ne)}return Ee}}function Mu(u){return gl(function(f){return f=Wi(f,To(xn())),ti(function(w){var ne=this;return u(f,function(Ee){return ro(Ee,ne,w)})})})}function yd(u,f){var w=(f=f===b?" ":gs(f)).length;if(w<2)return w?ob(f,u):f;var ne=ob(f,dd(u/Us(f)));return Ut(f)?pl(qn(ne),0,u).join(""):ne.slice(0,u)}function hm(u){return function(f,w,ne){return ne&&"number"!=typeof ne&&Gs(f,w,ne)&&(w=ne=b),f=ba(f),w===b?(w=f,f=0):w=ba(w),function XC(u,f,w,ne){for(var Ee=-1,je=Ii(dd((f-u)/(w||1)),0),Qe=gt(je);je--;)Qe[ne?je:++Ee]=u,u+=w;return Qe}(f,w,ne=ne===b?f<w?1:-1:ba(ne),u)}}function Kh(u){return function(f,w){return"string"==typeof f&&"string"==typeof w||(f=ko(f),w=ko(w)),u(f,w)}}function gb(u,f,w,ne,Ee,je,Qe,it,ut,Ct){var Et=8&f;f|=Et?x:64,4&(f&=~(Et?64:x))||(f&=-4);var Qn=[u,f,Ee,Et?je:b,Et?Qe:b,Et?b:je,Et?b:Qe,it,ut,Ct],pn=w.apply(b,Qn);return wb(u)&&wd(pn,Qn),pn.placeholder=ne,Ed(pn,u,f)}function _b(u){var f=Lr[u];return function(w,ne){if(w=ko(w),(ne=null==ne?0:Fr(Jn(ne),292))&&Kt(w)){var Ee=(Ti(w)+"e").split("e");return+((Ee=(Ti(f(Ee[0]+"e"+(+Ee[1]+ne)))+"e").split("e"))[0]+"e"+(+Ee[1]-ne))}return f(w)}}var Iu=hd&&1/Np(new hd([,-0]))[1]==Se?function(u){return new hd(u)}:vf;function Du(u){return function(f){var w=Kr(f);return w==Q?cd(f):w==qe?function gc(lt){var wt=-1,gt=Array(lt.size);return lt.forEach(function(Qt){gt[++wt]=[Qt,Qt]}),gt}(f):function F_(lt,wt){return Wi(wt,function(gt){return[gt,lt[gt]]})}(f,u(f))}}function Sc(u,f,w,ne,Ee,je,Qe,it){var ut=2&f;if(!ut&&"function"!=typeof u)throw new Ko(_);var Ct=ne?ne.length:0;if(Ct||(f&=-97,ne=Ee=b),Qe=Qe===b?Qe:Ii(Jn(Qe),0),it=it===b?it:Jn(it),Ct-=Ee?Ee.length:0,64&f){var Et=ne,Pt=Ee;ne=Ee=b}var Xt=ut?b:bb(u),Mt=[u,f,w,ne,Ee,Et,Pt,je,Qe,it];if(Xt&&function Bi(u,f){var w=u[1],ne=f[1],Ee=w|ne;if(!(Ee<131)&&!(ne==I&&8==w||ne==I&&256==w&&u[7].length<=f[8]||384==ne&&f[7].length<=f[8]&&8==w))return u;1&ne&&(u[2]=f[2],Ee|=1&w?0:4);var it=f[3];if(it){var ut=u[3];u[3]=ut?am(ut,it,f[4]):it,u[4]=ut?rl(u[3],N):f[4]}(it=f[5])&&(u[5]=(ut=u[5])?hb(ut,it,f[6]):it,u[6]=ut?rl(u[5],N):f[6]),(it=f[7])&&(u[7]=it),ne&I&&(u[8]=null==u[8]?f[8]:Fr(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=Ee}(Mt,Xt),u=Mt[0],f=Mt[1],w=Mt[2],ne=Mt[3],Ee=Mt[4],!(it=Mt[9]=Mt[9]===b?ut?0:u.length:Ii(Mt[9]-Ct,0))&&24&f&&(f&=-25),f&&1!=f)Tn=8==f||16==f?function ZC(u,f,w){var ne=_d(u);return function Ee(){for(var je=arguments.length,Qe=gt(je),it=je,ut=bl(Ee);it--;)Qe[it]=arguments[it];var Ct=je<3&&Qe[0]!==ut&&Qe[je-1]!==ut?[]:rl(Qe,ut);return(je-=Ct.length)<w?gb(u,f,bd,Ee.placeholder,b,Qe,Ct,b,b,w-je):ro(this&&this!==ps&&this instanceof Ee?ne:u,this,Qe)}}(u,f,it):f!=x&&33!=f||Ee.length?bd.apply(b,Mt):function um(u,f,w,ne){var Ee=1&f,je=_d(u);return function Qe(){for(var it=-1,ut=arguments.length,Ct=-1,Et=ne.length,Pt=gt(Et+ut),Xt=this&&this!==ps&&this instanceof Qe?je:u;++Ct<Et;)Pt[Ct]=ne[Ct];for(;ut--;)Pt[Ct++]=arguments[++it];return ro(Xt,Ee?w:this,Pt)}}(u,f,w,ne);else var Tn=function hr(u,f,w){var ne=1&f,Ee=_d(u);return function je(){return(this&&this!==ps&&this instanceof je?Ee:u).apply(ne?w:this,arguments)}}(u,f,w);return Ed((Xt?Px:wd)(Tn,Mt),u,f)}function QC(u,f,w,ne){return u===b||Ro(u,ld[w])&&!Mi.call(ne,w)?f:u}function fm(u,f,w,ne,Ee,je){return qi(u)&&qi(f)&&(je.set(f,u),$h(u,f,b,fm,je),je.delete(f)),u}function DF(u){return Hu(u)?b:u}function Ux(u,f,w,ne,Ee,je){var Qe=1&w,it=u.length,ut=f.length;if(it!=ut&&!(Qe&&ut>it))return!1;var Ct=je.get(u),Et=je.get(f);if(Ct&&Et)return Ct==f&&Et==u;var Pt=-1,Xt=!0,Mt=2&w?new wu:b;for(je.set(u,f),je.set(f,u);++Pt<it;){var Tn=u[Pt],Qn=f[Pt];if(ne)var pn=Qe?ne(Qn,Tn,Pt,f,u,je):ne(Tn,Qn,Pt,u,f,je);if(pn!==b){if(pn)continue;Xt=!1;break}if(Mt){if(!ax(f,function(di,gi){if(!Bh(Mt,gi)&&(Tn===di||Ee(Tn,di,w,ne,je)))return Mt.push(gi)})){Xt=!1;break}}else if(Tn!==Qn&&!Ee(Tn,Qn,w,ne,je)){Xt=!1;break}}return je.delete(u),je.delete(f),Xt}function gl(u){return Zh(Ab(u,b,Jx),u+"")}function qh(u){return Z_(u,bs,qo)}function vd(u){return Z_(u,No,Vx)}var bb=cl?function(u){return cl.get(u)}:vf;function _l(u){for(var f=u.name+"",w=ma[f],ne=Mi.call(ma,f)?w.length:0;ne--;){var Ee=w[ne],je=Ee.func;if(null==je||je==u)return Ee.name}return f}function bl(u){return(Mi.call(Pe,"placeholder")?Pe:u).placeholder}function xn(){var u=Pe.iteratee||bf;return u=u===bf?tb:u,arguments.length?u(arguments[0],arguments[1]):u}function yb(u,f){var w=u.__data__;return function xd(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?w["string"==typeof f?"string":"hash"]:w.map}function pm(u){for(var f=bs(u),w=f.length;w--;){var ne=f[w],Ee=u[ne];f[w]=[ne,Ee,Kx(Ee)]}return f}function yl(u,f){var w=function hx(lt,wt){return null==lt?b:lt[wt]}(u,f);return Ix(w)?w:b}var qo=W_?function(u){return null==u?[]:(u=Fi(u),pc(W_(u),function(f){return jt.call(u,f)}))}:xf,Vx=W_?function(u){for(var f=[];u;)mc(f,qo(u)),u=Gp(u);return f}:xf,Kr=Vs;function Jh(u,f,w){for(var ne=-1,Ee=(f=Do(f,u)).length,je=!1;++ne<Ee;){var Qe=Mc(f[ne]);if(!(je=null!=u&&w(u,Qe)))break;u=u[Qe]}return je||++ne!=Ee?je:!!(Ee=null==u?0:u.length)&&uf(Ee)&&Xa(Qe,Ee)&&(Un(u)||Ic(u))}function Gx(u){return"function"!=typeof u.constructor||Cc(u)?{}:ul(Gp(u))}function $x(u){return Un(u)||Ic(u)||!!(mi&&u&&u[mi])}function Xa(u,f){var w=typeof u;return!!(f=f??Ne)&&("number"==w||"symbol"!=w&&Ua.test(u))&&u>-1&&u%1==0&&u<f}function Gs(u,f,w){if(!qi(w))return!1;var ne=typeof f;return!!("number"==ne?Hs(w)&&Xa(f,w.length):"string"==ne&&f in w)&&Ro(w[f],u)}function Ru(u,f){if(Un(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!Oo(u))||Ph.test(u)||!mu.test(u)||null!=f&&u in Fi(f)}function wb(u){var f=_l(u),w=Pe[f];if("function"!=typeof w||!(f in ai.prototype))return!1;if(u===w)return!0;var ne=bb(w);return!!ne&&u===ne[0]}(al&&Kr(new al(new ArrayBuffer(1)))!=J||Rn&&Kr(new Rn)!=Q||ud&&Kr(ud.resolve())!=de||hd&&Kr(new hd)!=qe||za&&Kr(new za)!=Ht)&&(Kr=function(u){var f=Vs(u),w=f==M?u.constructor:b,ne=w?Pu(w):"";if(ne)switch(ne){case Ga:return J;case zh:return Q;case _x:return de;case ll:return qe;case yc:return Ht}return f});var Yx=Bp?Qo:wf;function Cc(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||ld)}function Kx(u){return u==u&&!qi(u)}function Rs(u,f){return function(w){return null!=w&&w[u]===f&&(f!==b||u in Fi(w))}}function Ab(u,f,w){return f=Ii(f===b?u.length-1:f,0),function(){for(var ne=arguments,Ee=-1,je=Ii(ne.length-f,0),Qe=gt(je);++Ee<je;)Qe[Ee]=ne[f+Ee];Ee=-1;for(var it=gt(f+1);++Ee<f;)it[Ee]=ne[Ee];return it[f]=w(Qe),ro(u,this,it)}}function Tc(u,f){return f.length<2?u:hl(u,At(f,0,-1))}function vl(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var wd=rT(Px),ku=gx||function(u,f){return ps.setTimeout(u,f)},Zh=rT(KC);function Ed(u,f,w){var ne=f+"";return Zh(u,function Wx(u,f){var w=f.length;if(!w)return u;var ne=w-1;return f[ne]=(w>1?"& ":"")+f[ne],f=f.join(w>2?", ":" "),u.replace(ed,"{\n/* [wrapped with "+f+"] */\n")}(ne,function OF(u,f){return js(ot,function(w){var ne="_."+w[0];f&w[1]&&!Rp(u,ne)&&u.push(ne)}),u.sort()}(function zx(u){var f=u.match(Jc);return f?f[1].split(gu):[]}(ne),w)))}function rT(u){var f=0,w=0;return function(){var ne=Ms(),Ee=16-(ne-w);if(w=ne,Ee>0){if(++f>=800)return arguments[0]}else f=0;return u.apply(b,arguments)}}function mm(u,f){var w=-1,ne=u.length,Ee=ne-1;for(f=f===b?ne:f;++w<f;){var je=sb(w,Ee),Qe=u[je];u[je]=u[w],u[w]=Qe}return u.length=f,u}var sT=function nT(u){var f=Mm(u,function(ne){return 500===w.size&&w.clear(),ne}),w=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(Nh,function(w,ne,Ee,je){f.push(Ee?je.replace(Zc,"$1"):ne||w)}),f});function Mc(u){if("string"==typeof u||Oo(u))return u;var f=u+"";return"0"==f&&1/u==-Se?"-0":f}function Pu(u){if(null!=u){try{return jp.call(u)}catch{}try{return u+""}catch{}}return""}function oT(u){if(u instanceof ai)return u.clone();var f=new Ir(u.__wrapped__,u.__chain__);return f.__actions__=zs(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var cT=ti(function(u,f){return xr(u)?Kp(u,Yr(f,1,xr,!0)):[]}),qr=ti(function(u,f){var w=Zo(f);return xr(w)&&(w=b),xr(u)?Kp(u,Yr(f,1,xr,!0),xn(w,2)):[]}),lT=ti(function(u,f){var w=Zo(f);return xr(w)&&(w=b),xr(u)?Kp(u,Yr(f,1,xr,!0),b,w):[]});function ef(u,f,w){var ne=null==u?0:u.length;if(!ne)return-1;var Ee=null==w?0:Jn(w);return Ee<0&&(Ee=Ii(ne+Ee,0)),bu(u,xn(f,3),Ee)}function Fu(u,f,w){var ne=null==u?0:u.length;if(!ne)return-1;var Ee=ne-1;return w!==b&&(Ee=Jn(w),Ee=w<0?Ii(ne+Ee,0):Fr(Ee,ne-1)),bu(u,xn(f,3),Ee,!0)}function Jx(u){return null!=u&&u.length?Yr(u,1):[]}function uo(u){return u&&u.length?u[0]:b}var LF=ti(function(u){var f=Wi(u,ga);return f.length&&f[0]===u[0]?Q_(f):[]}),Zx=ti(function(u){var f=Zo(u),w=Wi(u,ga);return f===Zo(w)?f=b:w.pop(),w.length&&w[0]===u[0]?Q_(w,xn(f,2)):[]}),hT=ti(function(u){var f=Zo(u),w=Wi(u,ga);return(f="function"==typeof f?f:b)&&w.pop(),w.length&&w[0]===u[0]?Q_(w,b,f):[]});function Zo(u){var f=null==u?0:u.length;return f?u[f-1]:b}var gT=ti(gm);function gm(u,f){return u&&u.length&&f&&f.length?tm(u,f):u}var ju=gl(function(u,f){var w=null==u?0:u.length,ne=wx(u,f);return $C(u,Wi(f,function(Ee){return Xa(Ee,w)?+Ee:Ee}).sort(Fx)),ne});function Uu(u){return null==u?u:ol.call(u)}var AT=ti(function(u){return _s(Yr(u,1,xr,!0))}),ST=ti(function(u){var f=Zo(u);return xr(f)&&(f=b),_s(Yr(u,1,xr,!0),xn(f,2))}),CT=ti(function(u){var f=Zo(u);return f="function"==typeof f?f:b,_s(Yr(u,1,xr,!0),b,f)});function vm(u){if(!u||!u.length)return[];var f=0;return u=pc(u,function(w){if(xr(w))return f=Ii(w.length,f),!0}),od(f,function(w){return Wi(u,lx(w))})}function MT(u,f){if(!u||!u.length)return[];var w=vm(u);return null==f?w:Wi(w,function(ne){return ro(f,b,ne)})}var iw=ti(function(u,f){return xr(u)?Kp(u,f):[]}),jF=ti(function(u){return rm(pc(u,xr))}),IT=ti(function(u){var f=Zo(u);return xr(f)&&(f=b),rm(pc(u,xr),xn(f,2))}),DT=ti(function(u){var f=Zo(u);return f="function"==typeof f?f:b,rm(pc(u,xr),b,f)}),Tb=ti(vm),Mb=ti(function(u){var f=u.length,w=f>1?u[f-1]:b;return w="function"==typeof w?(u.pop(),w):b,MT(u,w)});function RT(u){var f=Pe(u);return f.__chain__=!0,f}function Ib(u,f){return f(u)}var GF=gl(function(u){var f=u.length,w=f?u[0]:0,ne=this.__wrapped__,Ee=function(je){return wx(je,u)};return!(f>1||this.__actions__.length)&&ne instanceof ai&&Xa(w)?((ne=ne.slice(w,+w+(f?1:0))).__actions__.push({func:Ib,args:[Ee],thisArg:b}),new Ir(ne,this.__chain__).thru(function(je){return f&&!je.length&&je.push(b),je})):this.thru(Ee)}),zu=cm(function(u,f,w){Mi.call(u,w)?++u[w]:xc(u,w,1)}),Em=pb(ef),Am=pb(Fu);function lw(u,f){return(Un(u)?js:Wa)(u,xn(f,3))}function Db(u,f){return(Un(u)?Ip:qp)(u,xn(f,3))}var Rb=cm(function(u,f,w){Mi.call(u,w)?u[w].push(f):xc(u,w,[f])}),LT=ti(function(u,f,w){var ne=-1,Ee="function"==typeof f,je=Hs(u)?gt(u.length):[];return Wa(u,function(Qe){je[++ne]=Ee?ro(f,Qe,w):Au(Qe,f,w)}),je}),FT=cm(function(u,f,w){xc(u,w,f)});function nf(u,f){return(Un(u)?Wi:Dx)(u,xn(f,3))}var jT=cm(function(u,f,w){u[w?0:1].push(f)},function(){return[[],[]]}),UT=ti(function(u,f){if(null==u)return[];var w=f.length;return w>1&&Gs(u,f[0],f[1])?f=[]:w>2&&Gs(f[0],f[1],f[2])&&(f=[f[0]]),rb(u,Yr(f,1),[])}),sf=mx||function(){return ps.Date.now()};function Pb(u,f,w){return f=w?b:f,Sc(u,I,b,b,b,b,f=u&&null==f?u.length:f)}function fw(u,f){var w;if("function"!=typeof f)throw new Ko(_);return u=Jn(u),function(){return--u>0&&(w=f.apply(this,arguments)),u<=1&&(f=b),w}}var Sm=ti(function(u,f,w){var ne=1;if(w.length){var Ee=rl(w,bl(Sm));ne|=x}return Sc(u,ne,f,w,Ee)}),pw=ti(function(u,f,w){var ne=3;if(w.length){var Ee=rl(w,bl(pw));ne|=x}return Sc(f,ne,u,w,Ee)});function Tm(u,f,w){var ne,Ee,je,Qe,it,ut,Ct=0,Et=!1,Pt=!1,Xt=!0;if("function"!=typeof u)throw new Ko(_);function Mt(Ur){var Fo=ne,Ka=Ee;return ne=Ee=b,Ct=Ur,Qe=u.apply(Ka,Fo)}function pn(Ur){var Fo=Ur-ut;return ut===b||Fo>=f||Fo<0||Pt&&Ur-Ct>=je}function di(){var Ur=sf();if(pn(Ur))return gi(Ur);it=ku(di,function Qn(Ur){var Xw=f-(Ur-ut);return Pt?Fr(Xw,je-(Ur-Ct)):Xw}(Ur))}function gi(Ur){return it=b,Xt&&ne?Mt(Ur):(ne=Ee=b,Qe)}function $s(){var Ur=sf(),Fo=pn(Ur);if(ne=arguments,Ee=this,ut=Ur,Fo){if(it===b)return function Tn(Ur){return Ct=Ur,it=ku(di,f),Et?Mt(Ur):Qe}(ut);if(Pt)return cb(it),it=ku(di,f),Mt(ut)}return it===b&&(it=ku(di,f)),Qe}return f=ko(f)||0,qi(w)&&(Et=!!w.leading,je=(Pt="maxWait"in w)?Ii(ko(w.maxWait)||0,f):je,Xt="trailing"in w?!!w.trailing:Xt),$s.cancel=function jr(){it!==b&&cb(it),Ct=0,ne=ut=Ee=it=b},$s.flush=function Ws(){return it===b?Qe:gi(sf())},$s}var zT=ti(function(u,f){return Y_(u,1,f)}),af=ti(function(u,f,w){return Y_(u,ko(f)||0,w)});function Mm(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new Ko(_);var w=function(){var ne=arguments,Ee=f?f.apply(this,ne):ne[0],je=w.cache;if(je.has(Ee))return je.get(Ee);var Qe=u.apply(this,ne);return w.cache=je.set(Ee,Qe)||je,Qe};return w.cache=new(Mm.Cache||vc),w}function cf(u){if("function"!=typeof u)throw new Ko(_);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}Mm.Cache=vc;var _w=Ec(function(u,f){var w=(f=1==f.length&&Un(f[0])?Wi(f[0],To(xn())):Wi(Yr(f,1),To(xn()))).length;return ti(function(ne){for(var Ee=-1,je=Fr(ne.length,w);++Ee<je;)ne[Ee]=f[Ee].call(this,ne[Ee]);return ro(u,this,ne)})}),wl=ti(function(u,f){var w=rl(f,bl(wl));return Sc(u,x,b,f,w)}),lf=ti(function(u,f){var w=rl(f,bl(lf));return Sc(u,64,b,f,w)}),bw=gl(function(u,f){return Sc(u,256,b,b,b,f)});function Ro(u,f){return u===f||u!=u&&f!=f}var JT=Kh(Qp),ZT=Kh(function(u,f){return u>=f}),Ic=Cx(function(){return arguments}())?Cx:function(u){return Ji(u)&&Mi.call(u,"callee")&&!jt.call(u,"callee")},Un=gt.isArray,Ad=SC?To(SC):function eb(u){return Ji(u)&&Vs(u)==Oe};function Hs(u){return null!=u&&uf(u.length)&&!Qo(u)}function xr(u){return Ji(u)&&Hs(u)}var Sd=Mr||wf,Rm=St?To(St):function GC(u){return Ji(u)&&Vs(u)==oe};function df(u){if(!Ji(u))return!1;var f=Vs(u);return f==Le||"[object DOMException]"==f||"string"==typeof u.message&&"string"==typeof u.name&&!Hu(u)}function Qo(u){if(!qi(u))return!1;var f=Vs(u);return f==Ye||f==he||"[object AsyncFunction]"==f||"[object Proxy]"==f}function Gu(u){return"number"==typeof u&&u==Jn(u)}function uf(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Ne}function qi(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function Ji(u){return null!=u&&"object"==typeof u}var Fb=CC?To(CC):function Mx(u){return Ji(u)&&Kr(u)==Q};function Sw(u){return"number"==typeof u||Ji(u)&&Vs(u)==H}function Hu(u){if(!Ji(u)||Vs(u)!=M)return!1;var f=Gp(u);if(null===f)return!0;var w=Mi.call(f,"constructor")&&f.constructor;return"function"==typeof w&&w instanceof w&&jp.call(w)==PC}var Om=sn?To(sn):function em(u){return Ji(u)&&Vs(u)==ze},Pm=Lh?To(Lh):function lo(u){return Ji(u)&&Kr(u)==qe};function Dc(u){return"string"==typeof u||!Un(u)&&Ji(u)&&Vs(u)==ct}function Oo(u){return"symbol"==typeof u||Ji(u)&&Vs(u)==Dt}var Wu=sx?To(sx):function HC(u){return Ji(u)&&uf(u.length)&&!!rr[Vs(u)]},sM=Kh(nb),$u=Kh(function(u,f){return u<=f});function ff(u){if(!u)return[];if(Hs(u))return Dc(u)?qn(u):zs(u);if(Cr&&u[Cr])return function U_(lt){for(var wt,gt=[];!(wt=lt.next()).done;)gt.push(wt.value);return gt}(u[Cr]());var f=Kr(u);return(f==Q?cd:f==qe?Np:Yu)(u)}function ba(u){return u?(u=ko(u))===Se||u===-Se?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Jn(u){var f=ba(u),w=f%1;return f==f?w?f-w:f:0}function Ub(u){return u?gd(Jn(u),0,me):0}function ko(u){if("number"==typeof u)return u;if(Oo(u))return NaN;if(qi(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=qi(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=Fh(u);var w=el.test(u);return w||ja.test(u)?hF(u.slice(2),w?2:8):Sn.test(u)?NaN:+u}function El(u){return _a(u,No(u))}function Ti(u){return null==u?"":gs(u)}var aM=Cu(function(u,f){if(Cc(f)||Hs(f))_a(f,bs(f),u);else for(var w in f)Mi.call(f,w)&&Xp(u,w,f[w])}),Cw=Cu(function(u,f){_a(f,No(f),u)}),Nm=Cu(function(u,f,w,ne){_a(f,No(f),u,ne)}),Po=Cu(function(u,f,w,ne){_a(f,bs(f),u,ne)}),Ya=gl(wx),lM=ti(function(u,f){u=Fi(u);var w=-1,ne=f.length,Ee=ne>2?f[2]:b;for(Ee&&Gs(f[0],f[1],Ee)&&(ne=1);++w<ne;)for(var je=f[w],Qe=No(je),it=-1,ut=Qe.length;++it<ut;){var Ct=Qe[it],Et=u[Ct];(Et===b||Ro(Et,ld[Ct])&&!Mi.call(u,Ct))&&(u[Ct]=je[Ct])}return u}),dM=ti(function(u){return u.push(b,fm),ro(bM,b,u)});function Xu(u,f,w){var ne=null==u?b:hl(u,f);return ne===b?w:ne}function Cd(u,f){return null!=u&&Jh(u,f,Ax)}var Mw=Ac(function(u,f,w){null!=f&&"function"!=typeof f.toString&&(f=Up.call(f)),u[f]=w},jm(fo)),Iw=Ac(function(u,f,w){null!=f&&"function"!=typeof f.toString&&(f=Up.call(f)),Mi.call(u,f)?u[f].push(w):u[f]=[w]},xn),Dw=ti(Au);function bs(u){return Hs(u)?jC(u):fl(u)}function No(u){return Hs(u)?jC(u,!0):function Io(u){if(!qi(u))return function Eb(u){var f=[];if(null!=u)for(var w in Fi(u))f.push(w);return f}(u);var f=Cc(u),w=[];for(var ne in u)"constructor"==ne&&(f||!Mi.call(u,ne))||w.push(ne);return w}(u)}var zb=Cu(function(u,f,w){$h(u,f,w)}),bM=Cu(function(u,f,w,ne){$h(u,f,w,ne)}),XF=gl(function(u,f){var w={};if(null==u)return w;var ne=!1;f=Wi(f,function(je){return je=Do(je,u),ne||(ne=je.length>1),je}),_a(u,vd(u),w),ne&&(w=Dr(w,7,DF));for(var Ee=f.length;Ee--;)Yh(w,f[Ee]);return w}),yM=gl(function(u,f){return null==u?{}:function Ox(u,f){return kx(u,f,function(w,ne){return Cd(u,ne)})}(u,f)});function Ow(u,f){if(null==u)return{};var w=Wi(vd(u),function(ne){return[ne]});return f=xn(f),kx(u,w,function(ne,Ee){return f(ne,Ee[0])})}var pf=Du(bs),Gb=Du(No);function Yu(u){return null==u?[]:B_(u,bs(u))}var CM=Tu(function(u,f,w){return f=f.toLowerCase(),u+(w?Nw(f):f)});function Nw(u){return Ku(Ti(u).toLowerCase())}function $b(u){return(u=Ti(u))&&u.replace(Va,il).replace(Bn,"")}var bt=Tu(function(u,f,w){return u+(w?"-":"")+f.toLowerCase()}),gf=Tu(function(u,f,w){return u+(w?" ":"")+f.toLowerCase()}),Lm=lm("toLowerCase"),Fm=Tu(function(u,f,w){return u+(w?"_":"")+f.toLowerCase()}),Kb=Tu(function(u,f,w){return u+(w?" ":"")+Ku(f)}),Zb=Tu(function(u,f,w){return u+(w?" ":"")+f.toUpperCase()}),Ku=lm("toUpperCase");function Lo(u,f,w){return u=Ti(u),(f=w?b:f)===b?function Pp(lt){return EC.test(lt)}(u)?function _c(lt){return lt.match(wC)||[]}(u):function mF(lt){return lt.match(td)||[]}(u):u.match(f)||[]}var _f=ti(function(u,f){try{return ro(u,b,f)}catch(w){return df(w)?w:new On(w)}}),Qb=gl(function(u,f){return js(f,function(w){w=Mc(w),xc(u,w,Sm(u[w],u))}),u});function jm(u){return function(){return u}}var kM=mb(),PM=mb(!0);function fo(u){return u}function bf(u){return tb("function"==typeof u?u:Dr(u,1))}var Vw=ti(function(u,f){return function(w){return Au(w,u,f)}}),ya=ti(function(u,f){return function(w){return Au(u,w,f)}});function zw(u,f,w){var ne=bs(f),Ee=J_(f,ne);null==w&&(!qi(f)||!Ee.length&&ne.length)&&(w=f,f=u,u=this,Ee=J_(f,bs(f)));var je=!(qi(w)&&"chain"in w&&!w.chain),Qe=Qo(u);return js(Ee,function(it){var ut=f[it];u[it]=ut,Qe&&(u.prototype[it]=function(){var Ct=this.__chain__;if(je||Ct){var Et=u(this.__wrapped__);return(Et.__actions__=zs(this.__actions__)).push({func:ut,args:arguments,thisArg:u}),Et.__chain__=Ct,Et}return ut.apply(u,mc([this.value()],arguments))})}),u}function vf(){}var JF=Mu(Wi),ZF=Mu(Dp),Um=Mu(ax);function Gw(u){return Ru(u)?lx(Mc(u)):function kn(u){return function(f){return hl(f,u)}}(u)}var ty=hm(),Ju=hm(!0);function xf(){return[]}function wf(){return!1}var QF=dm(function(u,f){return u+f},0),iy=_b("ceil"),Sf=dm(function(u,f){return u/f},1),FM=_b("floor"),VM=dm(function(u,f){return u*f},1),eB=_b("round"),zM=dm(function(u,f){return u-f},0);return Pe.after=function VT(u,f){if("function"!=typeof f)throw new Ko(_);return u=Jn(u),function(){if(--u<1)return f.apply(this,arguments)}},Pe.ary=Pb,Pe.assign=aM,Pe.assignIn=Cw,Pe.assignInWith=Nm,Pe.assignWith=Po,Pe.at=Ya,Pe.before=fw,Pe.bind=Sm,Pe.bindAll=Qb,Pe.bindKey=pw,Pe.castArray=function XT(){if(!arguments.length)return[];var u=arguments[0];return Un(u)?u:[u]},Pe.chain=RT,Pe.chunk=function kF(u,f,w){f=(w?Gs(u,f,w):f===b)?1:Ii(Jn(f),0);var ne=null==u?0:u.length;if(!ne||f<1)return[];for(var Ee=0,je=0,Qe=gt(dd(ne/f));Ee<ne;)Qe[je++]=At(u,Ee,Ee+=f);return Qe},Pe.compact=function Nu(u){for(var f=-1,w=null==u?0:u.length,ne=0,Ee=[];++f<w;){var je=u[f];je&&(Ee[ne++]=je)}return Ee},Pe.concat=function aT(){var u=arguments.length;if(!u)return[];for(var f=gt(u-1),w=arguments[0],ne=u;ne--;)f[ne-1]=arguments[ne];return mc(Un(w)?zs(w):[w],Yr(f,1))},Pe.cond=function RM(u){var f=null==u?0:u.length,w=xn();return u=f?Wi(u,function(ne){if("function"!=typeof ne[1])throw new Ko(_);return[w(ne[0]),ne[1]]}):[],ti(function(ne){for(var Ee=-1;++Ee<f;){var je=u[Ee];if(ro(je[0],this,ne))return ro(je[1],this,ne)}})},Pe.conforms=function OM(u){return function Yp(u){var f=bs(u);return function(w){return Xr(w,u,f)}}(Dr(u,1))},Pe.constant=jm,Pe.countBy=zu,Pe.create=function cM(u,f){var w=ul(u);return null==f?w:xx(w,f)},Pe.curry=function mw(u,f,w){var ne=Sc(u,8,b,b,b,b,b,f=w?b:f);return ne.placeholder=mw.placeholder,ne},Pe.curryRight=function Cm(u,f,w){var ne=Sc(u,16,b,b,b,b,b,f=w?b:f);return ne.placeholder=Cm.placeholder,ne},Pe.debounce=Tm,Pe.defaults=lM,Pe.defaultsDeep=dM,Pe.defer=zT,Pe.delay=af,Pe.difference=cT,Pe.differenceBy=qr,Pe.differenceWith=lT,Pe.drop=function Qh(u,f,w){var ne=null==u?0:u.length;return ne?At(u,(f=w||f===b?1:Jn(f))<0?0:f,ne):[]},Pe.dropRight=function dT(u,f,w){var ne=null==u?0:u.length;return ne?At(u,0,(f=ne-(f=w||f===b?1:Jn(f)))<0?0:f):[]},Pe.dropRightWhile=function Jo(u,f){return u&&u.length?im(u,xn(f,3),!0,!0):[]},Pe.dropWhile=function Lu(u,f){return u&&u.length?im(u,xn(f,3),!0):[]},Pe.fill=function qx(u,f,w,ne){var Ee=null==u?0:u.length;return Ee?(w&&"number"!=typeof w&&Gs(u,f,w)&&(w=0,ne=Ee),function IF(u,f,w,ne){var Ee=u.length;for((w=Jn(w))<0&&(w=-w>Ee?0:Ee+w),(ne=ne===b||ne>Ee?Ee:Jn(ne))<0&&(ne+=Ee),ne=w>ne?0:Ub(ne);w<ne;)u[w++]=f;return u}(u,f,w,ne)):[]},Pe.filter=function cw(u,f){return(Un(u)?pc:K_)(u,xn(f,3))},Pe.flatMap=function xl(u,f){return Yr(nf(u,f),1)},Pe.flatMapDeep=function kT(u,f){return Yr(nf(u,f),Se)},Pe.flatMapDepth=function PT(u,f,w){return w=w===b?1:Jn(w),Yr(nf(u,f),w)},Pe.flatten=Jx,Pe.flattenDeep=function PF(u){return null!=u&&u.length?Yr(u,Se):[]},Pe.flattenDepth=function uT(u,f){return null!=u&&u.length?Yr(u,f=f===b?1:Jn(f)):[]},Pe.flip=function GT(u){return Sc(u,512)},Pe.flow=kM,Pe.flowRight=PM,Pe.fromPairs=function NF(u){for(var f=-1,w=null==u?0:u.length,ne={};++f<w;){var Ee=u[f];ne[Ee[0]]=Ee[1]}return ne},Pe.functions=function gM(u){return null==u?[]:J_(u,bs(u))},Pe.functionsIn=function _M(u){return null==u?[]:J_(u,No(u))},Pe.groupBy=Rb,Pe.initial=function Bu(u){return null!=u&&u.length?At(u,0,-1):[]},Pe.intersection=LF,Pe.intersectionBy=Zx,Pe.intersectionWith=hT,Pe.invert=Mw,Pe.invertBy=Iw,Pe.invokeMap=LT,Pe.iteratee=bf,Pe.keyBy=FT,Pe.keys=bs,Pe.keysIn=No,Pe.map=nf,Pe.mapKeys=function $F(u,f){var w={};return f=xn(f,3),$a(u,function(ne,Ee,je){xc(w,f(ne,Ee,je),ne)}),w},Pe.mapValues=function Vb(u,f){var w={};return f=xn(f,3),$a(u,function(ne,Ee,je){xc(w,Ee,f(ne,Ee,je))}),w},Pe.matches=function yf(u){return Rx(Dr(u,1))},Pe.matchesProperty=function NM(u,f){return wc(u,Dr(f,1))},Pe.memoize=Mm,Pe.merge=zb,Pe.mergeWith=bM,Pe.method=Vw,Pe.methodOf=ya,Pe.mixin=zw,Pe.negate=cf,Pe.nthArg=function LM(u){return u=Jn(u),ti(function(f){return ib(f,u)})},Pe.omit=XF,Pe.omitBy=function Rw(u,f){return Ow(u,cf(xn(f)))},Pe.once=function gw(u){return fw(2,u)},Pe.orderBy=function BT(u,f,w,ne){return null==u?[]:(Un(f)||(f=null==f?[]:[f]),Un(w=ne?b:w)||(w=null==w?[]:[w]),rb(u,f,w))},Pe.over=JF,Pe.overArgs=_w,Pe.overEvery=ZF,Pe.overSome=Um,Pe.partial=wl,Pe.partialRight=lf,Pe.partition=jT,Pe.pick=yM,Pe.pickBy=Ow,Pe.property=Gw,Pe.propertyOf=function ey(u){return function(f){return null==u?b:hl(u,f)}},Pe.pull=gT,Pe.pullAll=gm,Pe.pullAllBy=function _m(u,f,w){return u&&u.length&&f&&f.length?tm(u,f,xn(w,2)):u},Pe.pullAllWith=function _T(u,f,w){return u&&u.length&&f&&f.length?tm(u,f,b,w):u},Pe.pullAt=ju,Pe.range=ty,Pe.rangeRight=Ju,Pe.rearg=bw,Pe.reject=function dw(u,f){return(Un(u)?pc:K_)(u,cf(xn(f,3)))},Pe.remove=function bT(u,f){var w=[];if(!u||!u.length)return w;var ne=-1,Ee=[],je=u.length;for(f=xn(f,3);++ne<je;){var Qe=u[ne];f(Qe,ne,u)&&(w.push(Qe),Ee.push(ne))}return $C(u,Ee),w},Pe.rest=function Nb(u,f){if("function"!=typeof u)throw new Ko(_);return ti(u,f=f===b?f:Jn(f))},Pe.reverse=Uu,Pe.sampleSize=function Os(u,f,w){return f=(w?Gs(u,f,w):f===b)?1:Jn(f),(Un(u)?MF:YC)(u,f)},Pe.set=function xM(u,f,w){return null==u?u:Xh(u,f,w)},Pe.setWith=function kw(u,f,w,ne){return ne="function"==typeof ne?ne:b,null==u?u:Xh(u,f,w,ne)},Pe.shuffle=function rf(u){return(Un(u)?md:qC)(u)},Pe.slice=function yT(u,f,w){var ne=null==u?0:u.length;return ne?(w&&"number"!=typeof w&&Gs(u,f,w)?(f=0,w=ne):(f=null==f?0:Jn(f),w=w===b?ne:Jn(w)),At(u,f,w)):[]},Pe.sortBy=UT,Pe.sortedUniq=function Vu(u){return u&&u.length?ns(u):[]},Pe.sortedUniqBy=function tf(u,f){return u&&u.length?ns(u,xn(f,2)):[]},Pe.split=function qF(u,f,w){return w&&"number"!=typeof w&&Gs(u,f,w)&&(f=w=b),(w=w===b?me:w>>>0)?(u=Ti(u))&&("string"==typeof f||null!=f&&!Om(f))&&!(f=gs(f))&&Ut(u)?pl(qn(u),0,w):u.split(f,w):[]},Pe.spread=function Im(u,f){if("function"!=typeof u)throw new Ko(_);return f=null==f?0:Ii(Jn(f),0),ti(function(w){var ne=w[f],Ee=pl(w,0,f);return ne&&mc(Ee,ne),ro(u,this,Ee)})},Pe.tail=function wT(u){var f=null==u?0:u.length;return f?At(u,1,f):[]},Pe.take=function FF(u,f,w){return u&&u.length?At(u,0,(f=w||f===b?1:Jn(f))<0?0:f):[]},Pe.takeRight=function tw(u,f,w){var ne=null==u?0:u.length;return ne?At(u,(f=ne-(f=w||f===b?1:Jn(f)))<0?0:f,ne):[]},Pe.takeRightWhile=function ET(u,f){return u&&u.length?im(u,xn(f,3),!1,!0):[]},Pe.takeWhile=function BF(u,f){return u&&u.length?im(u,xn(f,3)):[]},Pe.tap=function zF(u,f){return f(u),u},Pe.throttle=function HT(u,f,w){var ne=!0,Ee=!0;if("function"!=typeof u)throw new Ko(_);return qi(w)&&(ne="leading"in w?!!w.leading:ne,Ee="trailing"in w?!!w.trailing:Ee),Tm(u,f,{leading:ne,maxWait:f,trailing:Ee})},Pe.thru=Ib,Pe.toArray=ff,Pe.toPairs=pf,Pe.toPairsIn=Gb,Pe.toPath=function ny(u){return Un(u)?Wi(u,Mc):Oo(u)?[u]:zs(sT(Ti(u)))},Pe.toPlainObject=El,Pe.transform=function Hb(u,f,w){var ne=Un(u),Ee=ne||Sd(u)||Wu(u);if(f=xn(f,4),null==w){var je=u&&u.constructor;w=Ee?ne?new je:[]:qi(u)&&Qo(je)?ul(Gp(u)):{}}return(Ee?js:$a)(u,function(Qe,it,ut){return f(w,Qe,it,ut)}),w},Pe.unary=function WT(u){return Pb(u,1)},Pe.union=AT,Pe.unionBy=ST,Pe.unionWith=CT,Pe.uniq=function ym(u){return u&&u.length?_s(u):[]},Pe.uniqBy=function nw(u,f){return u&&u.length?_s(u,xn(f,2)):[]},Pe.uniqWith=function TT(u,f){return f="function"==typeof f?f:b,u&&u.length?_s(u,b,f):[]},Pe.unset=function wM(u,f){return null==u||Yh(u,f)},Pe.unzip=vm,Pe.unzipWith=MT,Pe.update=function is(u,f,w){return null==u?u:nm(u,f,sm(w))},Pe.updateWith=function EM(u,f,w,ne){return ne="function"==typeof ne?ne:b,null==u?u:nm(u,f,sm(w),ne)},Pe.values=Yu,Pe.valuesIn=function Wb(u){return null==u?[]:B_(u,No(u))},Pe.without=iw,Pe.words=Lo,Pe.wrap=function $T(u,f){return wl(sm(f),u)},Pe.xor=jF,Pe.xorBy=IT,Pe.xorWith=DT,Pe.zip=Tb,Pe.zipObject=function UF(u,f){return Is(u||[],f||[],Xp)},Pe.zipObjectDeep=function VF(u,f){return Is(u||[],f||[],Xh)},Pe.zipWith=Mb,Pe.entries=pf,Pe.entriesIn=Gb,Pe.extend=Cw,Pe.extendWith=Nm,zw(Pe,Pe),Pe.add=QF,Pe.attempt=_f,Pe.camelCase=CM,Pe.capitalize=Nw,Pe.ceil=iy,Pe.clamp=function Pw(u,f,w){return w===b&&(w=f,f=b),w!==b&&(w=(w=ko(w))==w?w:0),f!==b&&(f=(f=ko(f))==f?f:0),gd(ko(u),f,w)},Pe.clone=function KT(u){return Dr(u,4)},Pe.cloneDeep=function yw(u){return Dr(u,5)},Pe.cloneDeepWith=function Dm(u,f){return Dr(u,5,f="function"==typeof f?f:b)},Pe.cloneWith=function qT(u,f){return Dr(u,4,f="function"==typeof f?f:b)},Pe.conformsTo=function Lb(u,f){return null==f||Xr(u,f,bs(f))},Pe.deburr=$b,Pe.defaultTo=function qu(u,f){return null==u||u!=u?f:u},Pe.divide=Sf,Pe.endsWith=function YF(u,f,w){u=Ti(u),f=gs(f);var ne=u.length,Ee=w=w===b?ne:gd(Jn(w),0,ne);return(w-=f.length)>=0&&u.slice(w,Ee)==f},Pe.eq=Ro,Pe.escape=function KF(u){return(u=Ti(u))&&So.test(u)?u.replace(Yi,DC):u},Pe.escapeRegExp=function mf(u){return(u=Ti(u))&&qc.test(u)?u.replace(Kc,"\\$&"):u},Pe.every=function aw(u,f,w){var ne=Un(u)?Dp:Jp;return w&&Gs(u,f,w)&&(f=b),ne(u,xn(f,3))},Pe.find=Em,Pe.findIndex=ef,Pe.findKey=function uM(u,f){return Op(u,xn(f,3),$a)},Pe.findLast=Am,Pe.findLastIndex=Fu,Pe.findLastKey=function hM(u,f){return Op(u,xn(f,3),Ex)},Pe.floor=FM,Pe.forEach=lw,Pe.forEachRight=Db,Pe.forIn=function fM(u,f){return null==u?u:q_(u,xn(f,3),No)},Pe.forInRight=function Tw(u,f){return null==u?u:Wh(u,xn(f,3),No)},Pe.forOwn=function pM(u,f){return u&&$a(u,xn(f,3))},Pe.forOwnRight=function mM(u,f){return u&&Ex(u,xn(f,3))},Pe.get=Xu,Pe.gt=JT,Pe.gte=ZT,Pe.has=function Rc(u,f){return null!=u&&Jh(u,f,Br)},Pe.hasIn=Cd,Pe.head=uo,Pe.identity=fo,Pe.includes=function NT(u,f,w,ne){u=Hs(u)?u:Yu(u),w=w&&!ne?Jn(w):0;var Ee=u.length;return w<0&&(w=Ii(Ee+w,0)),Dc(u)?w<=Ee&&u.indexOf(f,w)>-1:!!Ee&&sd(u,f,w)>-1},Pe.indexOf=function Sb(u,f,w){var ne=null==u?0:u.length;if(!ne)return-1;var Ee=null==w?0:Jn(w);return Ee<0&&(Ee=Ii(ne+Ee,0)),sd(u,f,Ee)},Pe.inRange=function AM(u,f,w){return f=ba(f),w===b?(w=f,f=0):w=ba(w),function zC(u,f,w){return u>=Fr(f,w)&&u<Ii(f,w)}(u=ko(u),f,w)},Pe.invoke=Dw,Pe.isArguments=Ic,Pe.isArray=Un,Pe.isArrayBuffer=Ad,Pe.isArrayLike=Hs,Pe.isArrayLikeObject=xr,Pe.isBoolean=function QT(u){return!0===u||!1===u||Ji(u)&&Vs(u)==O},Pe.isBuffer=Sd,Pe.isDate=Rm,Pe.isElement=function eM(u){return Ji(u)&&1===u.nodeType&&!Hu(u)},Pe.isEmpty=function vw(u){if(null==u)return!0;if(Hs(u)&&(Un(u)||"string"==typeof u||"function"==typeof u.splice||Sd(u)||Wu(u)||Ic(u)))return!u.length;var f=Kr(u);if(f==Q||f==qe)return!u.size;if(Cc(u))return!fl(u).length;for(var w in u)if(Mi.call(u,w))return!1;return!0},Pe.isEqual=function xw(u,f){return co(u,f)},Pe.isEqualWith=function ww(u,f,w){var ne=(w="function"==typeof w?w:b)?w(u,f):b;return ne===b?co(u,f,b,w):!!ne},Pe.isError=df,Pe.isFinite=function Ew(u){return"number"==typeof u&&Kt(u)},Pe.isFunction=Qo,Pe.isInteger=Gu,Pe.isLength=uf,Pe.isMap=Fb,Pe.isMatch=function Bb(u,f){return u===f||Li(u,f,pm(f))},Pe.isMatchWith=function hf(u,f,w){return w="function"==typeof w?w:b,Li(u,f,pm(f),w)},Pe.isNaN=function tM(u){return Sw(u)&&u!=+u},Pe.isNative=function Aw(u){if(Yx(u))throw new On("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ix(u)},Pe.isNil=function iM(u){return null==u},Pe.isNull=function nM(u){return null===u},Pe.isNumber=Sw,Pe.isObject=qi,Pe.isObjectLike=Ji,Pe.isPlainObject=Hu,Pe.isRegExp=Om,Pe.isSafeInteger=function km(u){return Gu(u)&&u>=-Ne&&u<=Ne},Pe.isSet=Pm,Pe.isString=Dc,Pe.isSymbol=Oo,Pe.isTypedArray=Wu,Pe.isUndefined=function WF(u){return u===b},Pe.isWeakMap=function rM(u){return Ji(u)&&Kr(u)==Ht},Pe.isWeakSet=function jb(u){return Ji(u)&&"[object WeakSet]"==Vs(u)},Pe.join=function fT(u,f){return null==u?"":jn.call(u,f)},Pe.kebabCase=bt,Pe.last=Zo,Pe.lastIndexOf=function pT(u,f,w){var ne=null==u?0:u.length;if(!ne)return-1;var Ee=ne;return w!==b&&(Ee=(Ee=Jn(w))<0?Ii(ne+Ee,0):Fr(Ee,ne-1)),f==f?function pa(lt,wt,gt){for(var Qt=gt+1;Qt--;)if(lt[Qt]===wt)return Qt;return Qt}(u,f,Ee):bu(u,cx,Ee,!0)},Pe.lowerCase=gf,Pe.lowerFirst=Lm,Pe.lt=sM,Pe.lte=$u,Pe.max=function Ww(u){return u&&u.length?Zp(u,fo,Qp):b},Pe.maxBy=function BM(u,f){return u&&u.length?Zp(u,xn(f,2),Qp):b},Pe.mean=function jM(u){return kp(u,fo)},Pe.meanBy=function ry(u,f){return kp(u,xn(f,2))},Pe.min=function $w(u){return u&&u.length?Zp(u,fo,nb):b},Pe.minBy=function UM(u,f){return u&&u.length?Zp(u,xn(f,2),nb):b},Pe.stubArray=xf,Pe.stubFalse=wf,Pe.stubObject=function Ef(){return{}},Pe.stubString=function Vm(){return""},Pe.stubTrue=function Af(){return!0},Pe.multiply=VM,Pe.nth=function mT(u,f){return u&&u.length?ib(u,Jn(f)):b},Pe.noConflict=function rs(){return ps._===this&&(ps._=NC),this},Pe.noop=vf,Pe.now=sf,Pe.pad=function Lw(u,f,w){u=Ti(u);var ne=(f=Jn(f))?Us(u):0;if(!f||ne>=f)return u;var Ee=(f-ne)/2;return yd(Hp(Ee),w)+u+yd(dd(Ee),w)},Pe.padEnd=function Xb(u,f,w){u=Ti(u);var ne=(f=Jn(f))?Us(u):0;return f&&ne<f?u+yd(f-ne,w):u},Pe.padStart=function Yb(u,f,w){u=Ti(u);var ne=(f=Jn(f))?Us(u):0;return f&&ne<f?yd(f-ne,w)+u:u},Pe.parseInt=function TM(u,f,w){return w||null==f?f=0:f&&(f=+f),yu(Ti(u).replace(Ba,""),f||0)},Pe.random=function SM(u,f,w){if(w&&"boolean"!=typeof w&&Gs(u,f,w)&&(f=w=b),w===b&&("boolean"==typeof f?(w=f,f=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&f===b?(u=0,f=1):(u=ba(u),f===b?(f=u,u=0):f=ba(f)),u>f){var ne=u;u=f,f=ne}if(w||u%1||f%1){var Ee=yr();return Fr(u+Ee*(f-u+uF("1e-"+((Ee+"").length-1))),f)}return sb(u,f)},Pe.reduce=function ho(u,f,w){var ne=Un(u)?Ts:MC,Ee=arguments.length<3;return ne(u,xn(f,4),w,Ee,Wa)},Pe.reduceRight=function Ob(u,f,w){var ne=Un(u)?ox:MC,Ee=arguments.length<3;return ne(u,xn(f,4),w,Ee,qp)},Pe.repeat=function Fw(u,f,w){return f=(w?Gs(u,f,w):f===b)?1:Jn(f),ob(Ti(u),f)},Pe.replace=function Bw(){var u=arguments,f=Ti(u[0]);return u.length<3?f:f.replace(u[1],u[2])},Pe.result=function vM(u,f,w){var ne=-1,Ee=(f=Do(f,u)).length;for(Ee||(Ee=1,u=b);++ne<Ee;){var je=null==u?b:u[Mc(f[ne])];je===b&&(ne=Ee,je=w),u=Qo(je)?je.call(u):je}return u},Pe.round=eB,Pe.runInContext=lt,Pe.sample=function kb(u){return(Un(u)?UC:Su)(u)},Pe.size=function uw(u){if(null==u)return 0;if(Hs(u))return Dc(u)?Us(u):u.length;var f=Kr(u);return f==Q||f==qe?u.size:fl(u).length},Pe.snakeCase=Fm,Pe.some=function hw(u,f,w){var ne=Un(u)?ax:yi;return w&&Gs(u,f,w)&&(f=b),ne(u,xn(f,3))},Pe.sortedIndex=function Qx(u,f){return ur(u,f)},Pe.sortedIndexBy=function Cb(u,f,w){return vr(u,f,xn(w,2))},Pe.sortedIndexOf=function bm(u,f){var w=null==u?0:u.length;if(w){var ne=ur(u,f);if(ne<w&&Ro(u[ne],f))return ne}return-1},Pe.sortedLastIndex=function ew(u,f){return ur(u,f,!0)},Pe.sortedLastIndexBy=function vT(u,f,w){return vr(u,f,xn(w,2),!0)},Pe.sortedLastIndexOf=function xT(u,f){if(null!=u&&u.length){var ne=ur(u,f,!0)-1;if(Ro(u[ne],f))return ne}return-1},Pe.startCase=Kb,Pe.startsWith=function MM(u,f,w){return u=Ti(u),w=null==w?0:gd(Jn(w),0,u.length),f=gs(f),u.slice(w,w+f.length)==f},Pe.subtract=zM,Pe.sum=function Gm(u){return u&&u.length?ux(u,fo):0},Pe.sumBy=function sy(u,f){return u&&u.length?ux(u,xn(f,2)):0},Pe.template=function qb(u,f,w){var ne=Pe.templateSettings;w&&Gs(u,f,w)&&(f=b),u=Ti(u),f=Nm({},f,ne,QC);var it,ut,Ee=Nm({},f.imports,ne.imports,QC),je=bs(Ee),Qe=B_(Ee,je),Ct=0,Et=f.interpolate||Ls,Pt="__p += '",Xt=Fp((f.escape||Ls).source+"|"+Et.source+"|"+(Et===Ss?nd:Ls).source+"|"+(f.evaluate||Ls).source+"|$","g"),Mt="//# sourceURL="+(Mi.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Co+"]")+"\n";u.replace(Xt,function(pn,di,gi,jr,Ws,$s){return gi||(gi=jr),Pt+=u.slice(Ct,$s).replace(be,nt),di&&(it=!0,Pt+="' +\n__e("+di+") +\n'"),Ws&&(ut=!0,Pt+="';\n"+Ws+";\n__p += '"),gi&&(Pt+="' +\n((__t = ("+gi+")) == null ? '' : __t) +\n'"),Ct=$s+pn.length,pn}),Pt+="';\n";var Tn=Mi.call(f,"variable")&&f.variable;if(Tn){if(_u.test(Tn))throw new On("Invalid `variable` option passed into `_.template`")}else Pt="with (obj) {\n"+Pt+"\n}\n";Pt=(ut?Pt.replace(gn,""):Pt).replace(As,"$1").replace($o,"$1;"),Pt="function("+(Tn||"obj")+") {\n"+(Tn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(it?", __e = _.escape":"")+(ut?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Pt+"return __p\n}";var Qn=_f(function(){return Ei(je,Mt+"return "+Pt).apply(b,Qe)});if(Qn.source=Pt,df(Qn))throw Qn;return Qn},Pe.times=function Hw(u,f){if((u=Jn(u))<1||u>Ne)return[];var w=me,ne=Fr(u,me);f=xn(f),u-=me;for(var Ee=od(ne,f);++w<u;)f(w);return Ee},Pe.toFinite=ba,Pe.toInteger=Jn,Pe.toLength=Ub,Pe.toLower=function jw(u){return Ti(u).toLowerCase()},Pe.toNumber=ko,Pe.toSafeInteger=function oM(u){return u?gd(Jn(u),-Ne,Ne):0===u?u:0},Pe.toString=Ti,Pe.toUpper=function Uw(u){return Ti(u).toUpperCase()},Pe.trim=function Td(u,f,w){if((u=Ti(u))&&(w||f===b))return Fh(u);if(!u||!(f=gs(f)))return u;var ne=qn(u),Ee=qn(f);return pl(ne,j_(ne,Ee),ad(ne,Ee)+1).join("")},Pe.trimEnd=function IM(u,f,w){if((u=Ti(u))&&(w||f===b))return u.slice(0,jh(u)+1);if(!u||!(f=gs(f)))return u;var ne=qn(u);return pl(ne,0,ad(ne,qn(f))+1).join("")},Pe.trimStart=function Jb(u,f,w){if((u=Ti(u))&&(w||f===b))return u.replace(Ba,"");if(!u||!(f=gs(f)))return u;var ne=qn(u);return pl(ne,j_(ne,qn(f))).join("")},Pe.truncate=function Bm(u,f){var w=30,ne="...";if(qi(f)){var Ee="separator"in f?f.separator:Ee;w="length"in f?Jn(f.length):w,ne="omission"in f?gs(f.omission):ne}var je=(u=Ti(u)).length;if(Ut(u)){var Qe=qn(u);je=Qe.length}if(w>=je)return u;var it=w-Us(ne);if(it<1)return ne;var ut=Qe?pl(Qe,0,it).join(""):u.slice(0,it);if(Ee===b)return ut+ne;if(Qe&&(it+=ut.length-it),Om(Ee)){if(u.slice(it).search(Ee)){var Ct,Et=ut;for(Ee.global||(Ee=Fp(Ee.source,Ti(Qc.exec(Ee))+"g")),Ee.lastIndex=0;Ct=Ee.exec(Et);)var Pt=Ct.index;ut=ut.slice(0,Pt===b?it:Pt)}}else if(u.indexOf(gs(Ee),it)!=it){var Xt=ut.lastIndexOf(Ee);Xt>-1&&(ut=ut.slice(0,Xt))}return ut+ne},Pe.unescape=function DM(u){return(u=Ti(u))&&ts.test(u)?u.replace(Ps,V_):u},Pe.uniqueId=function zm(u){var f=++kC;return Ti(u)+f},Pe.upperCase=Zb,Pe.upperFirst=Ku,Pe.each=lw,Pe.eachRight=Db,Pe.first=uo,zw(Pe,function(){var u={};return $a(Pe,function(f,w){Mi.call(Pe.prototype,w)||(u[w]=f)}),u}(),{chain:!1}),Pe.VERSION="4.17.21",js(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Pe[u].placeholder=Pe}),js(["drop","take"],function(u,f){ai.prototype[u]=function(w){w=w===b?1:Ii(Jn(w),0);var ne=this.__filtered__&&!f?new ai(this):this.clone();return ne.__filtered__?ne.__takeCount__=Fr(w,ne.__takeCount__):ne.__views__.push({size:Fr(w,me),type:u+(ne.__dir__<0?"Right":"")}),ne},ai.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),js(["filter","map","takeWhile"],function(u,f){var w=f+1,ne=1==w||3==w;ai.prototype[u]=function(Ee){var je=this.clone();return je.__iteratees__.push({iteratee:xn(Ee,3),type:w}),je.__filtered__=je.__filtered__||ne,je}}),js(["head","last"],function(u,f){var w="take"+(f?"Right":"");ai.prototype[u]=function(){return this[w](1).value()[0]}}),js(["initial","tail"],function(u,f){var w="drop"+(f?"":"Right");ai.prototype[u]=function(){return this.__filtered__?new ai(this):this[w](1)}}),ai.prototype.compact=function(){return this.filter(fo)},ai.prototype.find=function(u){return this.filter(u).head()},ai.prototype.findLast=function(u){return this.reverse().find(u)},ai.prototype.invokeMap=ti(function(u,f){return"function"==typeof u?new ai(this):this.map(function(w){return Au(w,u,f)})}),ai.prototype.reject=function(u){return this.filter(cf(xn(u)))},ai.prototype.slice=function(u,f){u=Jn(u);var w=this;return w.__filtered__&&(u>0||f<0)?new ai(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),f!==b&&(w=(f=Jn(f))<0?w.dropRight(-f):w.take(f-u)),w)},ai.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ai.prototype.toArray=function(){return this.take(me)},$a(ai.prototype,function(u,f){var w=/^(?:filter|find|map|reject)|While$/.test(f),ne=/^(?:head|last)$/.test(f),Ee=Pe[ne?"take"+("last"==f?"Right":""):f],je=ne||/^find/.test(f);Ee&&(Pe.prototype[f]=function(){var Qe=this.__wrapped__,it=ne?[1]:arguments,ut=Qe instanceof ai,Ct=it[0],Et=ut||Un(Qe),Pt=function(di){var gi=Ee.apply(Pe,mc([di],it));return ne&&Xt?gi[0]:gi};Et&&w&&"function"==typeof Ct&&1!=Ct.length&&(ut=Et=!1);var Xt=this.__chain__,Tn=je&&!Xt,Qn=ut&&!this.__actions__.length;if(!je&&Et){Qe=Qn?Qe:new ai(this);var pn=u.apply(Qe,it);return pn.__actions__.push({func:Ib,args:[Pt],thisArg:b}),new Ir(pn,Xt)}return Tn&&Qn?u.apply(this,it):(pn=this.thru(Pt),Tn?ne?pn.value()[0]:pn.value():pn)})}),js(["pop","push","shift","sort","splice","unshift"],function(u){var f=so[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",ne=/^(?:pop|shift)$/.test(u);Pe.prototype[u]=function(){var Ee=arguments;if(ne&&!this.__chain__){var je=this.value();return f.apply(Un(je)?je:[],Ee)}return this[w](function(Qe){return f.apply(Un(Qe)?Qe:[],Ee)})}}),$a(ai.prototype,function(u,f){var w=Pe[f];if(w){var ne=w.name+"";Mi.call(ma,ne)||(ma[ne]=[]),ma[ne].push({name:f,func:w})}}),ma[bd(b,2).name]=[{name:"wrapper",func:b}],ai.prototype.clone=function vu(){var u=new ai(this.__wrapped__);return u.__actions__=zs(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=zs(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=zs(this.__views__),u},ai.prototype.reverse=function Hh(){if(this.__filtered__){var u=new ai(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},ai.prototype.value=function ms(){var u=this.__wrapped__.value(),f=this.__dir__,w=Un(u),ne=f<0,Ee=w?u.length:0,je=function vb(u,f,w){for(var ne=-1,Ee=w.length;++ne<Ee;){var je=w[ne],Qe=je.size;switch(je.type){case"drop":u+=Qe;break;case"dropRight":f-=Qe;break;case"take":f=Fr(f,u+Qe);break;case"takeRight":u=Ii(u,f-Qe)}}return{start:u,end:f}}(0,Ee,this.__views__),Qe=je.start,it=je.end,ut=it-Qe,Ct=ne?it:Qe-1,Et=this.__iteratees__,Pt=Et.length,Xt=0,Mt=Fr(ut,this.__takeCount__);if(!w||!ne&&Ee==ut&&Mt==ut)return JC(u,this.__actions__);var Tn=[];e:for(;ut--&&Xt<Mt;){for(var Qn=-1,pn=u[Ct+=f];++Qn<Pt;){var di=Et[Qn],jr=di.type,Ws=(0,di.iteratee)(pn);if(2==jr)pn=Ws;else if(!Ws){if(1==jr)continue e;break e}}Tn[Xt++]=pn}return Tn},Pe.prototype.at=GF,Pe.prototype.chain=function HF(){return RT(this)},Pe.prototype.commit=function OT(){return new Ir(this.value(),this.__chain__)},Pe.prototype.next=function xm(){this.__values__===b&&(this.__values__=ff(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Pe.prototype.plant=function rw(u){for(var f,w=this;w instanceof Gh;){var ne=oT(w);ne.__index__=0,ne.__values__=b,f?Ee.__wrapped__=ne:f=ne;var Ee=ne;w=w.__wrapped__}return Ee.__wrapped__=u,f},Pe.prototype.reverse=function sw(){var u=this.__wrapped__;if(u instanceof ai){var f=u;return this.__actions__.length&&(f=new ai(this)),(f=f.reverse()).__actions__.push({func:Ib,args:[Uu],thisArg:b}),new Ir(f,this.__chain__)}return this.thru(Uu)},Pe.prototype.toJSON=Pe.prototype.valueOf=Pe.prototype.value=function ow(){return JC(this.__wrapped__,this.__actions__)},Pe.prototype.first=Pe.prototype.head,Cr&&(Pe.prototype[Cr]=function wm(){return this}),Pe}();ps._=Vh,(E=function(){return Vh}.call(Z,g,Z,te))!==b&&(te.exports=E)}.call(this)},7659:(te,Z,g)=>{var E=g(1811);function k(A,P){if("function"!=typeof A||null!=P&&"function"!=typeof P)throw new TypeError("Expected a function");var _=function(){var y=arguments,T=P?P.apply(this,y):y[0],F=_.cache;if(F.has(T))return F.get(T);var N=A.apply(this,y);return _.cache=F.set(T,N)||F,N};return _.cache=new(k.Cache||E),_}k.Cache=E,te.exports=k},2692:(te,Z,g)=>{var E=g(3400),b=g(6443),k=g(6300),A=g(8916);te.exports=function P(_){return k(_)?E(A(_)):b(_)}},7184:(te,Z,g)=>{var E=g(1883),b=g(252),k=g(8951),A=g(3817),P=k(function(_,y){if(null==_)return[];var T=y.length;return T>1&&A(_,y[0],y[1])?y=[]:T>2&&A(y[0],y[1],y[2])&&(y=[y[0]]),b(_,E(y,1),[])});te.exports=P},1315:te=>{te.exports=function Z(){return[]}},5706:te=>{te.exports=function Z(){return!1}},2674:(te,Z,g)=>{var E=g(7002);te.exports=function b(k){return null==k?"":E(k)}},5249:(te,Z,g)=>{var E=g(549),b=E.ARRAY_BUFFER_SUPPORT,k=E.SYMBOL_SUPPORT;te.exports=function(P,_){var y,T,F,N,U;if(!P)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(P)||b&&ArrayBuffer.isView(P)||"string"==typeof P||"[object Arguments]"===P.toString())for(F=0,N=P.length;F<N;F++)_(P[F],F);else if("function"!=typeof P.forEach)if(k&&Symbol.iterator in P&&"function"!=typeof P.next&&(P=P[Symbol.iterator]()),"function"!=typeof P.next)for(T in P)P.hasOwnProperty(T)&&_(P[T],T);else for(y=P,F=0;!0!==(U=y.next()).done;)_(U.value,F),F++;else P.forEach(_)}},2508:te=>{function Z(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this}),Z.of=function(){var g=arguments,E=g.length,b=0;return new Z(function(){return b>=E?{done:!0}:{done:!1,value:g[b++]}})},Z.empty=function(){return new Z(function(){return{done:!0}})},Z.fromSequence=function(g){var E=0,b=g.length;return new Z(function(){return E>=b?{done:!0}:{done:!1,value:g[E++]}})},Z.is=function(g){return g instanceof Z||"object"==typeof g&&null!==g&&"function"==typeof g.next},te.exports=Z},549:(te,Z)=>{Z.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Z.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(te,Z,g)=>{var E=g(2508),b=g(5249);function k(){this.clear()}k.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},k.prototype.enqueue=function(A){return this.items.push(A),++this.size},k.prototype.dequeue=function(){if(this.size){var A=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,A}},k.prototype.peek=function(){if(this.size)return this.items[this.offset]},k.prototype.forEach=function(A,P){P=arguments.length>1?P:this;for(var _=this.offset,y=0,T=this.items.length;_<T;_++,y++)A.call(P,this.items[_],y,this)},k.prototype.toArray=function(){return this.items.slice(this.offset)},k.prototype.values=function(){var A=this.items,P=this.offset;return new E(function(){if(P>=A.length)return{done:!0};var _=A[P];return P++,{value:_,done:!1}})},k.prototype.entries=function(){var A=this.items,P=this.offset,_=0;return new E(function(){if(P>=A.length)return{done:!0};var y=A[P];return P++,{value:[_++,y],done:!1}})},typeof Symbol<"u"&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.toString=function(){return this.toArray().join(",")},k.prototype.toJSON=function(){return this.toArray()},k.prototype.inspect=function(){var A=this.toArray();return Object.defineProperty(A,"constructor",{value:k,enumerable:!1}),A},typeof Symbol<"u"&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),k.from=function(A){var P=new k;return b(A,function(_){P.enqueue(_)}),P},k.of=function(){return k.from(arguments)},te.exports=k},5020:te=>{te.exports=function Z(g,E,b){function k(_,y){if(!E[_]){if(!g[_]){if(A)return A(_,!0);throw new Error("Cannot find module '"+_+"'")}y=E[_]={exports:{}},g[_][0].call(y.exports,function(F){return k(g[_][1][F]||F)},y,y.exports,Z,g,E,b)}return E[_].exports}for(var A=void 0,P=0;P<b.length;P++)k(b[P]);return k}({1:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){"use strict";var U=Z("crypto");function se(K,V){var x;return void 0===(x="passthrough"!==(V=ce(K,V)).algorithm?U.createHash(V.algorithm):new ee).write&&(x.write=x.update,x.end=x.update),ie(V,x).dispatch(K),x.update||x.end(""),x.digest?x.digest("buffer"===V.encoding?void 0:V.encoding):(K=x.read(),"buffer"!==V.encoding?K.toString(V.encoding):K)}(E=g.exports=se).sha1=function(K){return se(K)},E.keys=function(K){return se(K,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},E.MD5=function(K){return se(K,{algorithm:"md5",encoding:"hex"})},E.keysMD5=function(K){return se(K,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var S=U.getHashes?U.getHashes().slice():["sha1","md5"],$=(S.push("passthrough"),["buffer","hex","binary","base64"]);function ce(K,V){var x={};if(x.algorithm=(V=V||{}).algorithm||"sha1",x.encoding=V.encoding||"hex",x.excludeValues=!!V.excludeValues,x.algorithm=x.algorithm.toLowerCase(),x.encoding=x.encoding.toLowerCase(),x.ignoreUnknown=!0===V.ignoreUnknown,x.respectType=!1!==V.respectType,x.respectFunctionNames=!1!==V.respectFunctionNames,x.respectFunctionProperties=!1!==V.respectFunctionProperties,x.unorderedArrays=!0===V.unorderedArrays,x.unorderedSets=!1!==V.unorderedSets,x.unorderedObjects=!1!==V.unorderedObjects,x.replacer=V.replacer||void 0,x.excludeKeys=V.excludeKeys||void 0,void 0===K)throw new Error("Object argument required.");for(var B=0;B<S.length;++B)S[B].toLowerCase()===x.algorithm.toLowerCase()&&(x.algorithm=S[B]);if(-1===S.indexOf(x.algorithm))throw new Error('Algorithm "'+x.algorithm+'"  not supported. supported values: '+S.join(", "));if(-1===$.indexOf(x.encoding)&&"passthrough"!==x.algorithm)throw new Error('Encoding "'+x.encoding+'"  not supported. supported values: '+$.join(", "));return x}function X(K){if("function"==typeof K)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(K))}function ie(K,V,x){function B(I){return V.update?V.update(I,"utf8"):V.write(I,"utf8")}return x=x||[],{dispatch:function(I){return this["_"+(null===(I=K.replacer?K.replacer(I):I)?"null":typeof I)](I)},_object:function(I){var ue,W=Object.prototype.toString.call(I),Ce=/\[object (.*)\]/i.exec(W);if(Ce=(Ce=Ce?Ce[1]:"unknown:["+W+"]").toLowerCase(),0<=(W=x.indexOf(I)))return this.dispatch("[CIRCULAR:"+W+"]");if(x.push(I),void 0!==A&&A.isBuffer&&A.isBuffer(I))return B("buffer:"),B(I);if("object"===Ce||"function"===Ce||"asyncfunction"===Ce)return W=Object.keys(I),K.unorderedObjects&&(W=W.sort()),!1===K.respectType||X(I)||W.splice(0,0,"prototype","__proto__","constructor"),K.excludeKeys&&(W=W.filter(function(le){return!K.excludeKeys(le)})),B("object:"+W.length+":"),ue=this,W.forEach(function(le){ue.dispatch(le),B(":"),K.excludeValues||ue.dispatch(I[le]),B(",")});if(!this["_"+Ce]){if(K.ignoreUnknown)return B("["+Ce+"]");throw new Error('Unknown object type "'+Ce+'"')}this["_"+Ce](I)},_array:function(I,le){le=void 0!==le?le:!1!==K.unorderedArrays;var W=this;if(B("array:"+I.length+":"),!le||I.length<=1)return I.forEach(function(xe){return W.dispatch(xe)});var Ce=[];return le=I.map(function(xe){var Ie=new ee,Re=x.slice();return ie(K,Ie,Re).dispatch(xe),Ce=Ce.concat(Re.slice(x.length)),Ie.read().toString()}),x=x.concat(Ce),le.sort(),this._array(le,!1)},_date:function(I){return B("date:"+I.toJSON())},_symbol:function(I){return B("symbol:"+I.toString())},_error:function(I){return B("error:"+I.toString())},_boolean:function(I){return B("bool:"+I.toString())},_string:function(I){B("string:"+I.length+":"),B(I.toString())},_function:function(I){B("fn:"),X(I)?this.dispatch("[native]"):this.dispatch(I.toString()),!1!==K.respectFunctionNames&&this.dispatch("function-name:"+String(I.name)),K.respectFunctionProperties&&this._object(I)},_number:function(I){return B("number:"+I.toString())},_xml:function(I){return B("xml:"+I.toString())},_null:function(){return B("Null")},_undefined:function(){return B("Undefined")},_regexp:function(I){return B("regex:"+I.toString())},_uint8array:function(I){return B("uint8array:"),this.dispatch(Array.prototype.slice.call(I))},_uint8clampedarray:function(I){return B("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(I))},_int8array:function(I){return B("int8array:"),this.dispatch(Array.prototype.slice.call(I))},_uint16array:function(I){return B("uint16array:"),this.dispatch(Array.prototype.slice.call(I))},_int16array:function(I){return B("int16array:"),this.dispatch(Array.prototype.slice.call(I))},_uint32array:function(I){return B("uint32array:"),this.dispatch(Array.prototype.slice.call(I))},_int32array:function(I){return B("int32array:"),this.dispatch(Array.prototype.slice.call(I))},_float32array:function(I){return B("float32array:"),this.dispatch(Array.prototype.slice.call(I))},_float64array:function(I){return B("float64array:"),this.dispatch(Array.prototype.slice.call(I))},_arraybuffer:function(I){return B("arraybuffer:"),this.dispatch(new Uint8Array(I))},_url:function(I){return B("url:"+I.toString())},_map:function(I){return B("map:"),I=Array.from(I),this._array(I,!1!==K.unorderedSets)},_set:function(I){return B("set:"),I=Array.from(I),this._array(I,!1!==K.unorderedSets)},_file:function(I){return B("file:"),this.dispatch([I.name,I.size,I.type,I.lastModfied])},_blob:function(){if(K.ignoreUnknown)return B("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return B("domwindow")},_bigint:function(I){return B("bigint:"+I.toString())},_process:function(){return B("process")},_timer:function(){return B("timer")},_pipe:function(){return B("pipe")},_tcp:function(){return B("tcp")},_udp:function(){return B("udp")},_tty:function(){return B("tty")},_statwatcher:function(){return B("statwatcher")},_securecontext:function(){return B("securecontext")},_connection:function(){return B("connection")},_zlib:function(){return B("zlib")},_context:function(){return B("context")},_nodescript:function(){return B("nodescript")},_httpparser:function(){return B("httpparser")},_dataview:function(){return B("dataview")},_signal:function(){return B("signal")},_fsevent:function(){return B("fsevent")},_tlswrap:function(){return B("tlswrap")}}}function ee(){return{buf:"",write:function(K){this.buf+=K},end:function(K){this.buf+=K},read:function(){return this.buf}}}E.writeToStream=function(K,V,x){return void 0===x&&(x=V,V={}),ie(V=ce(K,V),x).dispatch(K)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){!function(U){"use strict";var se=typeof Uint8Array<"u"?Uint8Array:Array,S="+".charCodeAt(0),$="/".charCodeAt(0),ce="0".charCodeAt(0),X="a".charCodeAt(0),ie="A".charCodeAt(0),ee="-".charCodeAt(0),K="_".charCodeAt(0);function V(x){return(x=x.charCodeAt(0))===S||x===ee?62:x===$||x===K?63:x<ce?-1:x<ce+10?x-ce+26+26:x<ie+26?x-ie:x<X+26?x-X+26:void 0}U.toByteArray=function(x){var B,I;if(0<x.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ue="="===x.charAt((ue=x.length)-2)?2:"="===x.charAt(ue-1)?1:0,W=new se(3*x.length/4-ue),Ce=0<ue?x.length-4:x.length,le=0;function xe(Ie){W[le++]=Ie}for(B=0;B<Ce;B+=4,0)xe((16711680&(I=V(x.charAt(B))<<18|V(x.charAt(B+1))<<12|V(x.charAt(B+2))<<6|V(x.charAt(B+3))))>>16),xe((65280&I)>>8),xe(255&I);return 2==ue?xe(255&(I=V(x.charAt(B))<<2|V(x.charAt(B+1))>>4)):1==ue&&(xe((I=V(x.charAt(B))<<10|V(x.charAt(B+1))<<4|V(x.charAt(B+2))>>2)>>8&255),xe(255&I)),W},U.fromByteArray=function(x){var B,I,ue,W,Ce=x.length%3,le="";function xe(Ie){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ie)}for(B=0,ue=x.length-Ce;B<ue;B+=3)le+=xe((W=I=(x[B]<<16)+(x[B+1]<<8)+x[B+2])>>18&63)+xe(W>>12&63)+xe(W>>6&63)+xe(63&W);switch(Ce){case 1:le=(le+=xe((I=x[x.length-1])>>2))+xe(I<<4&63)+"==";break;case 2:le=(le=(le+=xe((I=(x[x.length-2]<<8)+x[x.length-1])>>10))+xe(I>>4&63))+xe(I<<2&63)+"="}return le}}(void 0===E?this.base64js={}:E)}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(Z,g,E){(function(b,k,S,P,_,y,T,F,N){var U=Z("base64-js"),se=Z("ieee754");function S(_e,G,O){if(!(this instanceof S))return new S(_e,G,O);var oe,z,Le,Ye,he=typeof _e;if("base64"===G&&"string"==he)for(_e=(Ye=_e).trim?Ye.trim():Ye.replace(/^\s+|\s+$/g,"");_e.length%4!=0;)_e+="=";if("number"==he)oe=et(_e);else if("string"==he)oe=S.byteLength(_e,G);else{if("object"!=he)throw new Error("First argument needs to be a number, array or string.");oe=et(_e.length)}if(S._useTypedArrays?z=S._augment(new Uint8Array(oe)):((z=this).length=oe,z._isBuffer=!0),S._useTypedArrays&&"number"==typeof _e.byteLength)z._set(_e);else if(Xe(Ye=_e)||S.isBuffer(Ye)||Ye&&"object"==typeof Ye&&"number"==typeof Ye.length)for(Le=0;Le<oe;Le++)z[Le]=S.isBuffer(_e)?_e.readUInt8(Le):_e[Le];else if("string"==he)z.write(_e,0,G);else if("number"==he&&!S._useTypedArrays&&!O)for(Le=0;Le<oe;Le++)z[Le]=0;return z}function ie(_e,G,O,Le){var z;if(Le||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=G,"missing offset"),We(G+1<_e.length,"Trying to read beyond buffer length")),!((Le=_e.length)<=G))return O?(z=_e[G],G+1<Le&&(z|=_e[G+1]<<8)):(z=_e[G]<<8,G+1<Le&&(z|=_e[G+1])),z}function ee(_e,G,O,Le){var z;if(Le||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=G,"missing offset"),We(G+3<_e.length,"Trying to read beyond buffer length")),!((Le=_e.length)<=G))return O?(G+2<Le&&(z=_e[G+2]<<16),G+1<Le&&(z|=_e[G+1]<<8),z|=_e[G],G+3<Le&&(z+=_e[G+3]<<24>>>0)):(G+1<Le&&(z=_e[G+1]<<16),G+2<Le&&(z|=_e[G+2]<<8),G+3<Le&&(z|=_e[G+3]),z+=_e[G]<<24>>>0),z}function K(_e,G,O,oe){if(oe||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=G,"missing offset"),We(G+1<_e.length,"Trying to read beyond buffer length")),!(_e.length<=G))return 32768&(oe=ie(_e,G,O,!0))?-1*(65535-oe+1):oe}function V(_e,G,O,oe){if(oe||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=G,"missing offset"),We(G+3<_e.length,"Trying to read beyond buffer length")),!(_e.length<=G))return 2147483648&(oe=ee(_e,G,O,!0))?-1*(4294967295-oe+1):oe}function x(_e,G,O,oe){return oe||(We("boolean"==typeof O,"missing or invalid endian"),We(G+3<_e.length,"Trying to read beyond buffer length")),se.read(_e,G,O,23,4)}function B(_e,G,O,oe){return oe||(We("boolean"==typeof O,"missing or invalid endian"),We(G+7<_e.length,"Trying to read beyond buffer length")),se.read(_e,G,O,52,8)}function I(_e,G,O,oe,z){if(z||(We(null!=G,"missing value"),We("boolean"==typeof oe,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+1<_e.length,"trying to write beyond buffer length"),Ae(G,65535)),!((z=_e.length)<=O))for(var Le=0,Ye=Math.min(z-O,2);Le<Ye;Le++)_e[O+Le]=(G&255<<8*(oe?Le:1-Le))>>>8*(oe?Le:1-Le)}function ue(_e,G,O,oe,z){if(z||(We(null!=G,"missing value"),We("boolean"==typeof oe,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+3<_e.length,"trying to write beyond buffer length"),Ae(G,4294967295)),!((z=_e.length)<=O))for(var Le=0,Ye=Math.min(z-O,4);Le<Ye;Le++)_e[O+Le]=G>>>8*(oe?Le:3-Le)&255}function W(_e,G,O,oe,z){z||(We(null!=G,"missing value"),We("boolean"==typeof oe,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+1<_e.length,"Trying to write beyond buffer length"),Ke(G,32767,-32768)),_e.length<=O||I(_e,0<=G?G:65535+G+1,O,oe,z)}function Ce(_e,G,O,oe,z){z||(We(null!=G,"missing value"),We("boolean"==typeof oe,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+3<_e.length,"Trying to write beyond buffer length"),Ke(G,2147483647,-2147483648)),_e.length<=O||ue(_e,0<=G?G:4294967295+G+1,O,oe,z)}function le(_e,G,O,oe,z){z||(We(null!=G,"missing value"),We("boolean"==typeof oe,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+3<_e.length,"Trying to write beyond buffer length"),ot(G,34028234663852886e22,-34028234663852886e22)),_e.length<=O||se.write(_e,G,O,oe,23,4)}function xe(_e,G,O,oe,z){z||(We(null!=G,"missing value"),We("boolean"==typeof oe,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+7<_e.length,"Trying to write beyond buffer length"),ot(G,17976931348623157e292,-17976931348623157e292)),_e.length<=O||se.write(_e,G,O,oe,52,8)}E.Buffer=S,E.SlowBuffer=S,E.INSPECT_MAX_BYTES=50,S.poolSize=8192,S._useTypedArrays=function(){try{var _e=new ArrayBuffer(0),G=new Uint8Array(_e);return G.foo=function(){return 42},42===G.foo()&&"function"==typeof G.subarray}catch{return!1}}(),S.isEncoding=function(_e){switch(String(_e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.isBuffer=function(_e){return!(null==_e||!_e._isBuffer)},S.byteLength=function(_e,G){var O;switch(_e+="",G||"utf8"){case"hex":O=_e.length/2;break;case"utf8":case"utf-8":O=Ne(_e).length;break;case"ascii":case"binary":case"raw":O=_e.length;break;case"base64":O=ke(_e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":O=2*_e.length;break;default:throw new Error("Unknown encoding")}return O},S.concat=function(_e,G){if(We(Xe(_e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===_e.length)return new S(0);if(1===_e.length)return _e[0];if("number"!=typeof G)for(z=G=0;z<_e.length;z++)G+=_e[z].length;for(var O=new S(G),oe=0,z=0;z<_e.length;z++){var Le=_e[z];Le.copy(O,oe),oe+=Le.length}return O},S.prototype.write=function(_e,G,O,oe){isFinite(G)?isFinite(O)||(oe=O,O=void 0):(Q=oe,oe=G,G=O,O=Q),G=Number(G)||0;var z,Le,Ye,he,Q=this.length-G;switch((!O||Q<(O=Number(O)))&&(O=Q),oe=String(oe||"utf8").toLowerCase()){case"hex":z=function(H,D,M,de){M=Number(M)||0;var ge=H.length-M;(!de||ge<(de=Number(de)))&&(de=ge),We((ge=D.length)%2==0,"Invalid hex string"),ge/2<de&&(de=ge/2);for(var ze=0;ze<de;ze++){var qe=parseInt(D.substr(2*ze,2),16);We(!isNaN(qe),"Invalid hex string"),H[M+ze]=qe}return S._charsWritten=2*ze,ze}(this,_e,G,O);break;case"utf8":case"utf-8":Le=this,Ye=G,he=O,z=S._charsWritten=Ve(Ne(_e),Le,Ye,he);break;case"ascii":case"binary":z=function $(_e,G,O,oe){return S._charsWritten=Ve(function(z){for(var Le=[],Ye=0;Ye<z.length;Ye++)Le.push(255&z.charCodeAt(Ye));return Le}(G),_e,O,oe)}(this,_e,G,O);break;case"base64":Le=this,Ye=G,he=O,z=S._charsWritten=Ve(ke(_e),Le,Ye,he);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":z=function ce(_e,G,O,oe){return S._charsWritten=Ve(function(z){for(var Le,Ye,he=[],Q=0;Q<z.length;Q++)Le=(Ye=z.charCodeAt(Q))>>8,he.push(Ye%=256),he.push(Le);return he}(G),_e,O,oe)}(this,_e,G,O);break;default:throw new Error("Unknown encoding")}return z},S.prototype.toString=function(_e,G,O){var oe,z,Le,Ye,he=this;if(_e=String(_e||"utf8").toLowerCase(),G=Number(G)||0,(O=void 0!==O?Number(O):he.length)===G)return"";switch(_e){case"hex":oe=function(Q,H,D){var M=Q.length;(!H||H<0)&&(H=0),(!D||D<0||M<D)&&(D=M);for(var de="",ge=H;ge<D;ge++)de+=Se(Q[ge]);return de}(he,G,O);break;case"utf8":case"utf-8":oe=function(Q,H,D){var M="",de="";D=Math.min(Q.length,D);for(var ge=H;ge<D;ge++)Q[ge]<=127?(M+=me(de)+String.fromCharCode(Q[ge]),de=""):de+="%"+Q[ge].toString(16);return M+me(de)}(he,G,O);break;case"ascii":case"binary":oe=function X(_e,G,O){var oe="";O=Math.min(_e.length,O);for(var z=G;z<O;z++)oe+=String.fromCharCode(_e[z]);return oe}(he,G,O);break;case"base64":z=he,Ye=O,oe=0===(Le=G)&&Ye===z.length?U.fromByteArray(z):U.fromByteArray(z.slice(Le,Ye));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":oe=function(Q,H,D){for(var M=Q.slice(H,D),de="",ge=0;ge<M.length;ge+=2)de+=String.fromCharCode(M[ge]+256*M[ge+1]);return de}(he,G,O);break;default:throw new Error("Unknown encoding")}return oe},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},S.prototype.copy=function(_e,G,O,oe){if(G=G||0,(oe=oe||0===oe?oe:this.length)!==(O=O||0)&&0!==_e.length&&0!==this.length){We(O<=oe,"sourceEnd < sourceStart"),We(0<=G&&G<_e.length,"targetStart out of bounds"),We(0<=O&&O<this.length,"sourceStart out of bounds"),We(0<=oe&&oe<=this.length,"sourceEnd out of bounds"),oe>this.length&&(oe=this.length);var z=(oe=_e.length-G<oe-O?_e.length-G+O:oe)-O;if(z<100||!S._useTypedArrays)for(var Le=0;Le<z;Le++)_e[Le+G]=this[Le+O];else _e._set(this.subarray(O,O+z),G)}},S.prototype.slice=function(_e,G){var O=this.length;if(_e=Re(_e,O,0),G=Re(G,O,O),S._useTypedArrays)return S._augment(this.subarray(_e,G));for(var oe=G-_e,z=new S(oe,void 0,!0),Le=0;Le<oe;Le++)z[Le]=this[Le+_e];return z},S.prototype.get=function(_e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(_e)},S.prototype.set=function(_e,G){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(_e,G)},S.prototype.readUInt8=function(_e,G){if(G||(We(null!=_e,"missing offset"),We(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return this[_e]},S.prototype.readUInt16LE=function(_e,G){return ie(this,_e,!0,G)},S.prototype.readUInt16BE=function(_e,G){return ie(this,_e,!1,G)},S.prototype.readUInt32LE=function(_e,G){return ee(this,_e,!0,G)},S.prototype.readUInt32BE=function(_e,G){return ee(this,_e,!1,G)},S.prototype.readInt8=function(_e,G){if(G||(We(null!=_e,"missing offset"),We(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return 128&this[_e]?-1*(255-this[_e]+1):this[_e]},S.prototype.readInt16LE=function(_e,G){return K(this,_e,!0,G)},S.prototype.readInt16BE=function(_e,G){return K(this,_e,!1,G)},S.prototype.readInt32LE=function(_e,G){return V(this,_e,!0,G)},S.prototype.readInt32BE=function(_e,G){return V(this,_e,!1,G)},S.prototype.readFloatLE=function(_e,G){return x(this,_e,!0,G)},S.prototype.readFloatBE=function(_e,G){return x(this,_e,!1,G)},S.prototype.readDoubleLE=function(_e,G){return B(this,_e,!0,G)},S.prototype.readDoubleBE=function(_e,G){return B(this,_e,!1,G)},S.prototype.writeUInt8=function(_e,G,O){O||(We(null!=_e,"missing value"),We(null!=G,"missing offset"),We(G<this.length,"trying to write beyond buffer length"),Ae(_e,255)),G>=this.length||(this[G]=_e)},S.prototype.writeUInt16LE=function(_e,G,O){I(this,_e,G,!0,O)},S.prototype.writeUInt16BE=function(_e,G,O){I(this,_e,G,!1,O)},S.prototype.writeUInt32LE=function(_e,G,O){ue(this,_e,G,!0,O)},S.prototype.writeUInt32BE=function(_e,G,O){ue(this,_e,G,!1,O)},S.prototype.writeInt8=function(_e,G,O){O||(We(null!=_e,"missing value"),We(null!=G,"missing offset"),We(G<this.length,"Trying to write beyond buffer length"),Ke(_e,127,-128)),G>=this.length||this.writeUInt8(0<=_e?_e:255+_e+1,G,O)},S.prototype.writeInt16LE=function(_e,G,O){W(this,_e,G,!0,O)},S.prototype.writeInt16BE=function(_e,G,O){W(this,_e,G,!1,O)},S.prototype.writeInt32LE=function(_e,G,O){Ce(this,_e,G,!0,O)},S.prototype.writeInt32BE=function(_e,G,O){Ce(this,_e,G,!1,O)},S.prototype.writeFloatLE=function(_e,G,O){le(this,_e,G,!0,O)},S.prototype.writeFloatBE=function(_e,G,O){le(this,_e,G,!1,O)},S.prototype.writeDoubleLE=function(_e,G,O){xe(this,_e,G,!0,O)},S.prototype.writeDoubleBE=function(_e,G,O){xe(this,_e,G,!1,O)},S.prototype.fill=function(_e,G,O){if(G=G||0,O=O||this.length,We("number"==typeof(_e="string"==typeof(_e=_e||0)?_e.charCodeAt(0):_e)&&!isNaN(_e),"value is not a number"),We(G<=O,"end < start"),O!==G&&0!==this.length){We(0<=G&&G<this.length,"start out of bounds"),We(0<=O&&O<=this.length,"end out of bounds");for(var oe=G;oe<O;oe++)this[oe]=_e}},S.prototype.inspect=function(){for(var _e=[],G=this.length,O=0;O<G;O++)if(_e[O]=Se(this[O]),O===E.INSPECT_MAX_BYTES){_e[O+1]="...";break}return"<Buffer "+_e.join(" ")+">"},S.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(S._useTypedArrays)return new S(this).buffer;for(var _e=new Uint8Array(this.length),G=0,O=_e.length;G<O;G+=1)_e[G]=this[G];return _e.buffer};var Ie=S.prototype;function Re(_e,G,O){return"number"!=typeof _e?O:G<=(_e=~~_e)?G:0<=_e||0<=(_e+=G)?_e:0}function et(_e){return(_e=~~Math.ceil(+_e))<0?0:_e}function Xe(_e){return(Array.isArray||function(G){return"[object Array]"===Object.prototype.toString.call(G)})(_e)}function Se(_e){return _e<16?"0"+_e.toString(16):_e.toString(16)}function Ne(_e){for(var G=[],O=0;O<_e.length;O++){var oe=_e.charCodeAt(O);if(oe<=127)G.push(_e.charCodeAt(O));else for(var z=O,Le=(55296<=oe&&oe<=57343&&O++,encodeURIComponent(_e.slice(z,O+1)).substr(1).split("%")),Ye=0;Ye<Le.length;Ye++)G.push(parseInt(Le[Ye],16))}return G}function ke(_e){return U.toByteArray(_e)}function Ve(_e,G,O,oe){for(var z=0;z<oe&&!(z+O>=G.length||z>=_e.length);z++)G[z+O]=_e[z];return z}function me(_e){try{return decodeURIComponent(_e)}catch{return String.fromCharCode(65533)}}function Ae(_e,G){We("number"==typeof _e,"cannot write a non-number as a number"),We(0<=_e,"specified a negative value for writing an unsigned value"),We(_e<=G,"value is larger than maximum value for type"),We(Math.floor(_e)===_e,"value has a fractional component")}function Ke(_e,G,O){We("number"==typeof _e,"cannot write a non-number as a number"),We(_e<=G,"value larger than maximum allowed value"),We(O<=_e,"value smaller than minimum allowed value"),We(Math.floor(_e)===_e,"value has a fractional component")}function ot(_e,G,O){We("number"==typeof _e,"cannot write a non-number as a number"),We(_e<=G,"value larger than maximum allowed value"),We(O<=_e,"value smaller than minimum allowed value")}function We(_e,G){if(!_e)throw new Error(G||"Failed assertion")}S._augment=function(_e){return _e._isBuffer=!0,_e._get=_e.get,_e._set=_e.set,_e.get=Ie.get,_e.set=Ie.set,_e.write=Ie.write,_e.toString=Ie.toString,_e.toLocaleString=Ie.toString,_e.toJSON=Ie.toJSON,_e.copy=Ie.copy,_e.slice=Ie.slice,_e.readUInt8=Ie.readUInt8,_e.readUInt16LE=Ie.readUInt16LE,_e.readUInt16BE=Ie.readUInt16BE,_e.readUInt32LE=Ie.readUInt32LE,_e.readUInt32BE=Ie.readUInt32BE,_e.readInt8=Ie.readInt8,_e.readInt16LE=Ie.readInt16LE,_e.readInt16BE=Ie.readInt16BE,_e.readInt32LE=Ie.readInt32LE,_e.readInt32BE=Ie.readInt32BE,_e.readFloatLE=Ie.readFloatLE,_e.readFloatBE=Ie.readFloatBE,_e.readDoubleLE=Ie.readDoubleLE,_e.readDoubleBE=Ie.readDoubleBE,_e.writeUInt8=Ie.writeUInt8,_e.writeUInt16LE=Ie.writeUInt16LE,_e.writeUInt16BE=Ie.writeUInt16BE,_e.writeUInt32LE=Ie.writeUInt32LE,_e.writeUInt32BE=Ie.writeUInt32BE,_e.writeInt8=Ie.writeInt8,_e.writeInt16LE=Ie.writeInt16LE,_e.writeInt16BE=Ie.writeInt16BE,_e.writeInt32LE=Ie.writeInt32LE,_e.writeInt32BE=Ie.writeInt32BE,_e.writeFloatLE=Ie.writeFloatLE,_e.writeFloatBE=Ie.writeFloatBE,_e.writeDoubleLE=Ie.writeDoubleLE,_e.writeDoubleBE=Ie.writeDoubleBE,_e.fill=Ie.fill,_e.inspect=Ie.inspect,_e.toArrayBuffer=Ie.toArrayBuffer,_e}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(Z,g,E){(function(b,k,U,P,_,y,T,F,N){U=Z("buffer").Buffer;var S=new U(4);S.fill(0),g.exports={hash:function($,ce,X,ie){for(var ee=ce(function(I,ue){I.length%4!=0&&(I=U.concat([I,S],I.length+(4-I.length%4)));for(var Ce=[],le=ue?I.readInt32BE:I.readInt32LE,xe=0;xe<I.length;xe+=4)Ce.push(le.call(I,xe));return Ce}($=U.isBuffer($)?$:new U($),ie),8*$.length),K=(ce=ie,new U(X)),V=ce?K.writeInt32BE:K.writeInt32LE,x=0;x<ee.length;x++)V.call(K,ee[x],4*x,!0);return K}}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(Z,g,E){(function(b,k,U,P,_,y,T,F,N){U=Z("buffer").Buffer;var se=Z("./sha"),S=Z("./sha256"),$=Z("./rng"),ce={sha1:se,sha256:S,md5:Z("./md5")},X=64,ie=new U(X);function ee(I,ue){var W=ce[I=I||"sha1"],Ce=[];return W||K("algorithm:",I,"is not yet supported"),{update:function(le){return U.isBuffer(le)||(le=new U(le)),Ce.push(le),this},digest:function(le){var xe=U.concat(Ce);return xe=ue?function(Ie,Re,et){U.isBuffer(Re)||(Re=new U(Re)),U.isBuffer(et)||(et=new U(et)),Re.length>X?Re=Ie(Re):Re.length<X&&(Re=U.concat([Re,ie],X));for(var Xe=new U(X),Se=new U(X),Ne=0;Ne<X;Ne++)Xe[Ne]=54^Re[Ne],Se[Ne]=92^Re[Ne];return et=Ie(U.concat([Xe,et])),Ie(U.concat([Se,et]))}(W,ue,xe):W(xe),Ce=null,le?xe.toString(le):xe}}}function K(){var I=[].slice.call(arguments).join(" ");throw new Error([I,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}ie.fill(0),E.createHash=function(I){return ee(I)},E.createHmac=ee,E.randomBytes=function(I,ue){if(!ue||!ue.call)return new U($(I));try{ue.call(this,void 0,new U($(I)))}catch(W){ue(W)}};var V,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],B=function(I){E[I]=function(){K("sorry,",I,"is not implemented yet")}};for(V in x)B(x[V])}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){var U=Z("./helpers");function se(K,V){K[V>>5]|=128<<V%32,K[14+(V+64>>>9<<4)]=V;for(var x=1732584193,B=-271733879,I=-1732584194,ue=271733878,W=0;W<K.length;W+=16){var Ce=x,le=B,xe=I,Ie=ue;x=$(x,B,I,ue,K[W+0],7,-680876936),ue=$(ue,x,B,I,K[W+1],12,-389564586),I=$(I,ue,x,B,K[W+2],17,606105819),B=$(B,I,ue,x,K[W+3],22,-1044525330),x=$(x,B,I,ue,K[W+4],7,-176418897),ue=$(ue,x,B,I,K[W+5],12,1200080426),I=$(I,ue,x,B,K[W+6],17,-1473231341),B=$(B,I,ue,x,K[W+7],22,-45705983),x=$(x,B,I,ue,K[W+8],7,1770035416),ue=$(ue,x,B,I,K[W+9],12,-1958414417),I=$(I,ue,x,B,K[W+10],17,-42063),B=$(B,I,ue,x,K[W+11],22,-1990404162),x=$(x,B,I,ue,K[W+12],7,1804603682),ue=$(ue,x,B,I,K[W+13],12,-40341101),I=$(I,ue,x,B,K[W+14],17,-1502002290),x=ce(x,B=$(B,I,ue,x,K[W+15],22,1236535329),I,ue,K[W+1],5,-165796510),ue=ce(ue,x,B,I,K[W+6],9,-1069501632),I=ce(I,ue,x,B,K[W+11],14,643717713),B=ce(B,I,ue,x,K[W+0],20,-373897302),x=ce(x,B,I,ue,K[W+5],5,-701558691),ue=ce(ue,x,B,I,K[W+10],9,38016083),I=ce(I,ue,x,B,K[W+15],14,-660478335),B=ce(B,I,ue,x,K[W+4],20,-405537848),x=ce(x,B,I,ue,K[W+9],5,568446438),ue=ce(ue,x,B,I,K[W+14],9,-1019803690),I=ce(I,ue,x,B,K[W+3],14,-187363961),B=ce(B,I,ue,x,K[W+8],20,1163531501),x=ce(x,B,I,ue,K[W+13],5,-1444681467),ue=ce(ue,x,B,I,K[W+2],9,-51403784),I=ce(I,ue,x,B,K[W+7],14,1735328473),x=X(x,B=ce(B,I,ue,x,K[W+12],20,-1926607734),I,ue,K[W+5],4,-378558),ue=X(ue,x,B,I,K[W+8],11,-2022574463),I=X(I,ue,x,B,K[W+11],16,1839030562),B=X(B,I,ue,x,K[W+14],23,-35309556),x=X(x,B,I,ue,K[W+1],4,-1530992060),ue=X(ue,x,B,I,K[W+4],11,1272893353),I=X(I,ue,x,B,K[W+7],16,-155497632),B=X(B,I,ue,x,K[W+10],23,-1094730640),x=X(x,B,I,ue,K[W+13],4,681279174),ue=X(ue,x,B,I,K[W+0],11,-358537222),I=X(I,ue,x,B,K[W+3],16,-722521979),B=X(B,I,ue,x,K[W+6],23,76029189),x=X(x,B,I,ue,K[W+9],4,-640364487),ue=X(ue,x,B,I,K[W+12],11,-421815835),I=X(I,ue,x,B,K[W+15],16,530742520),x=ie(x,B=X(B,I,ue,x,K[W+2],23,-995338651),I,ue,K[W+0],6,-198630844),ue=ie(ue,x,B,I,K[W+7],10,1126891415),I=ie(I,ue,x,B,K[W+14],15,-1416354905),B=ie(B,I,ue,x,K[W+5],21,-57434055),x=ie(x,B,I,ue,K[W+12],6,1700485571),ue=ie(ue,x,B,I,K[W+3],10,-1894986606),I=ie(I,ue,x,B,K[W+10],15,-1051523),B=ie(B,I,ue,x,K[W+1],21,-2054922799),x=ie(x,B,I,ue,K[W+8],6,1873313359),ue=ie(ue,x,B,I,K[W+15],10,-30611744),I=ie(I,ue,x,B,K[W+6],15,-1560198380),B=ie(B,I,ue,x,K[W+13],21,1309151649),x=ie(x,B,I,ue,K[W+4],6,-145523070),ue=ie(ue,x,B,I,K[W+11],10,-1120210379),I=ie(I,ue,x,B,K[W+2],15,718787259),B=ie(B,I,ue,x,K[W+9],21,-343485551),x=ee(x,Ce),B=ee(B,le),I=ee(I,xe),ue=ee(ue,Ie)}return Array(x,B,I,ue)}function S(K,V,x,B,I,ue){return ee((V=ee(ee(V,K),ee(B,ue)))<<I|V>>>32-I,x)}function $(K,V,x,B,I,ue,W){return S(V&x|~V&B,K,V,I,ue,W)}function ce(K,V,x,B,I,ue,W){return S(V&B|x&~B,K,V,I,ue,W)}function X(K,V,x,B,I,ue,W){return S(V^x^B,K,V,I,ue,W)}function ie(K,V,x,B,I,ue,W){return S(x^(V|~B),K,V,I,ue,W)}function ee(K,V){var x=(65535&K)+(65535&V);return(K>>16)+(V>>16)+(x>>16)<<16|65535&x}g.exports=function(K){return U.hash(K,se,16)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){g.exports=function(se){for(var S,$=new Array(se),ce=0;ce<se;ce++)!(3&ce)&&(S=4294967296*Math.random()),$[ce]=S>>>((3&ce)<<3)&255;return $}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){var U=Z("./helpers");function se(ce,X){ce[X>>5]|=128<<24-X%32,ce[15+(X+64>>9<<4)]=X;for(var ie,ee,K,V=Array(80),x=1732584193,B=-271733879,I=-1732584194,ue=271733878,W=-1009589776,Ce=0;Ce<ce.length;Ce+=16){for(var le=x,xe=B,Ie=I,Re=ue,et=W,Xe=0;Xe<80;Xe++){V[Xe]=Xe<16?ce[Ce+Xe]:$(V[Xe-3]^V[Xe-8]^V[Xe-14]^V[Xe-16],1);var Se=S(S($(x,5),(Se=B,ee=I,K=ue,(ie=Xe)<20?Se&ee|~Se&K:!(ie<40)&&ie<60?Se&ee|Se&K|ee&K:Se^ee^K)),S(S(W,V[Xe]),(ie=Xe)<20?1518500249:ie<40?1859775393:ie<60?-1894007588:-899497514));W=ue,ue=I,I=$(B,30),B=x,x=Se}x=S(x,le),B=S(B,xe),I=S(I,Ie),ue=S(ue,Re),W=S(W,et)}return Array(x,B,I,ue,W)}function S(ce,X){var ie=(65535&ce)+(65535&X);return(ce>>16)+(X>>16)+(ie>>16)<<16|65535&ie}function $(ce,X){return ce<<X|ce>>>32-X}g.exports=function(ce){return U.hash(ce,se,20,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){function U(X,ie){var ee=(65535&X)+(65535&ie);return(X>>16)+(ie>>16)+(ee>>16)<<16|65535&ee}function se(X,ie){var ee,K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),V=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);X[ie>>5]|=128<<24-ie%32,X[15+(ie+64>>9<<4)]=ie;for(var B,I,ue=0;ue<X.length;ue+=16){for(var W=V[0],Ce=V[1],le=V[2],xe=V[3],Ie=V[4],Re=V[5],et=V[6],Xe=V[7],Se=0;Se<64;Se++)x[Se]=Se<16?X[Se+ue]:U(U(U($(I=x[Se-2],17)^$(I,19)^ce(I,10),x[Se-7]),$(I=x[Se-15],7)^$(I,18)^ce(I,3)),x[Se-16]),ee=U(U(U(U(Xe,$(I=Ie,6)^$(I,11)^$(I,25)),Ie&Re^~Ie&et),K[Se]),x[Se]),B=U($(B=W,2)^$(B,13)^$(B,22),W&Ce^W&le^Ce&le),Xe=et,et=Re,Re=Ie,Ie=U(xe,ee),xe=le,le=Ce,Ce=W,W=U(ee,B);V[0]=U(W,V[0]),V[1]=U(Ce,V[1]),V[2]=U(le,V[2]),V[3]=U(xe,V[3]),V[4]=U(Ie,V[4]),V[5]=U(Re,V[5]),V[6]=U(et,V[6]),V[7]=U(Xe,V[7])}return V}var S=Z("./helpers"),$=function(X,ie){return X>>>ie|X<<32-ie},ce=function(X,ie){return X>>>ie};g.exports=function(X){return S.hash(X,se,32,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){E.read=function(U,se,S,$,ue){var X,ie,ee=8*ue-$-1,K=(1<<ee)-1,V=K>>1,x=-7,B=S?ue-1:0,I=S?-1:1;for(ue=U[se+B],B+=I,X=ue&(1<<-x)-1,ue>>=-x,x+=ee;0<x;X=256*X+U[se+B],B+=I,x-=8);for(ie=X&(1<<-x)-1,X>>=-x,x+=$;0<x;ie=256*ie+U[se+B],B+=I,x-=8);if(0===X)X=1-V;else{if(X===K)return ie?NaN:1/0*(ue?-1:1);ie+=Math.pow(2,$),X-=V}return(ue?-1:1)*ie*Math.pow(2,X-$)},E.write=function(U,se,S,$,ce,W){var ie,ee,K=8*W-ce-1,V=(1<<K)-1,x=V>>1,B=23===ce?Math.pow(2,-24)-Math.pow(2,-77):0,I=$?0:W-1,ue=$?1:-1;for(W=se<0||0===se&&1/se<0?1:0,se=Math.abs(se),isNaN(se)||se===1/0?(ee=isNaN(se)?1:0,ie=V):(ie=Math.floor(Math.log(se)/Math.LN2),se*($=Math.pow(2,-ie))<1&&(ie--,$*=2),2<=(se+=1<=ie+x?B/$:B*Math.pow(2,1-x))*$&&(ie++,$/=2),V<=ie+x?(ee=0,ie=V):1<=ie+x?(ee=(se*$-1)*Math.pow(2,ce),ie+=x):(ee=se*Math.pow(2,x-1)*Math.pow(2,ce),ie=0));8<=ce;U[S+I]=255&ee,I+=ue,ee/=256,ce-=8);for(ie=ie<<ce|ee,K+=ce;0<K;U[S+I]=255&ie,I+=ue,ie/=256,K-=8);U[S+I-ue]|=128*W}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(Z,g,E){(function(b,k,A,P,_,y,T,F,N){var U,se,S;function $(){}(b=g.exports={}).nextTick=(se=typeof window<"u"&&window.setImmediate,S=typeof window<"u"&&window.postMessage&&window.addEventListener,se?function(ce){return window.setImmediate(ce)}:S?(U=[],window.addEventListener("message",function(ce){var X=ce.source;X!==window&&null!==X||"process-tick"!==ce.data||(ce.stopPropagation(),0<U.length&&U.shift()())},!0),function(ce){U.push(ce),window.postMessage("process-tick","*")}):function(ce){setTimeout(ce,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=$,b.addListener=$,b.once=$,b.off=$,b.removeListener=$,b.removeAllListeners=$,b.emit=$,b.binding=function(ce){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(ce){throw new Error("process.chdir is not supported")}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:te=>{var g,E,Z=te.exports={};function b(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}function A($){if(g===setTimeout)return setTimeout($,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout($,0);try{return g($,0)}catch{try{return g.call(null,$,0)}catch{return g.call(this,$,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch{g=b}try{E="function"==typeof clearTimeout?clearTimeout:k}catch{E=k}}();var T,_=[],y=!1,F=-1;function N(){!y||!T||(y=!1,T.length?_=T.concat(_):F=-1,_.length&&U())}function U(){if(!y){var $=A(N);y=!0;for(var ce=_.length;ce;){for(T=_,_=[];++F<ce;)T&&T[F].run();F=-1,ce=_.length}T=null,y=!1,function P($){if(E===clearTimeout)return clearTimeout($);if((E===k||!E)&&clearTimeout)return E=clearTimeout,clearTimeout($);try{return E($)}catch{try{return E.call(null,$)}catch{return E.call(this,$)}}}($)}}function se($,ce){this.fun=$,this.array=ce}function S(){}Z.nextTick=function($){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var X=1;X<arguments.length;X++)ce[X-1]=arguments[X];_.push(new se($,ce)),1===_.length&&!y&&A(U)},se.prototype.run=function(){this.fun.apply(null,this.array)},Z.title="browser",Z.browser=!0,Z.env={},Z.argv=[],Z.version="",Z.versions={},Z.on=S,Z.addListener=S,Z.once=S,Z.off=S,Z.removeListener=S,Z.removeAllListeners=S,Z.emit=S,Z.prependListener=S,Z.prependOnceListener=S,Z.listeners=function($){return[]},Z.binding=function($){throw new Error("process.binding is not supported")},Z.cwd=function(){return"/"},Z.chdir=function($){throw new Error("process.chdir is not supported")},Z.umask=function(){return 0}},3410:te=>{let Z;te.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(Z||(Z=Promise.resolve())).then(g).catch(E=>setTimeout(()=>{throw E},0))},1986:(te,Z,g)=>{te.exports=g(7842)},5327:te=>{"use strict";te.exports=class Yq{constructor(g,E=new Map,b=0){this.prefix=g,this._existing=E,this.counter=b}clone(){const{prefix:g,_existing:E,counter:b}=this;return new Yq(g,new Map(E),b)}getId(g){const E=g&&this._existing.get(g);if(E)return E;const b=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,b),b}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(te,Z,g)=>{"use strict";var E=g(7156).default;g(8280);const b=self.crypto||self.msCrypto;te.exports=class{constructor(A){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===A)this.algorithm={name:"SHA-256"};else{if("sha1"!==A)throw new Error(`Unsupported algorithm "${A}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(A){this._content+=A}digest(){var A=this;return E(function*(){const P=(new TextEncoder).encode(A._content),_=new Uint8Array(yield b.subtle.digest(A.algorithm,P));let y="";for(let T=0;T<_.length;++T)y+=_[T].toString(16).padStart(2,"0");return y})()}}},8003:te=>{"use strict";const E="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",k="NamedNode",A="BlankNode",P="Literal",_="DefaultGraph",y={};function T(S,$){return S.subject.termType===$.subject.termType&&S.object.termType===$.object.termType&&S.subject.value===$.subject.value&&S.predicate.value===$.predicate.value&&S.object.value===$.object.value&&(S.object.termType!==P||S.object.datatype.termType===$.object.datatype.termType&&S.object.language===$.object.language&&S.object.datatype.value===$.object.datatype.value)}(()=>{const S="(?:<([^:]+:[^>]*)>)",ce="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",X=ce+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ee="(_:(?:["+ce+"0-9])(?:(?:["+X+".])*(?:["+X+"]))?)",I="[ \\t]+",ue="[ \\t]*",W="(?:"+S+"|"+ee+")"+I,Ce=S+I,le="(?:"+S+"|"+ee+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+S+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+ue,xe="(?:\\.|(?:(?:"+S+"|"+ee+")"+ue+"\\.))";y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp("^"+ue+W+Ce+le+xe+ue+"$")})(),te.exports=class vC{static parse($){const ce=[],X={},ie=$.split(y.eoln);let ee=0;for(const K of ie){if(ee++,y.empty.test(K))continue;const V=K.match(y.quad);if(null===V)throw new Error("N-Quads parse error on line "+ee+".");const x={subject:null,predicate:null,object:null,graph:null};if(x.subject=void 0!==V[1]?{termType:k,value:V[1]}:{termType:A,value:V[2]},x.predicate={termType:k,value:V[3]},void 0!==V[4]?x.object={termType:k,value:V[4]}:void 0!==V[5]?x.object={termType:A,value:V[5]}:(x.object={termType:P,value:void 0,datatype:{termType:k}},void 0!==V[7]?x.object.datatype.value=V[7]:void 0!==V[8]?(x.object.datatype.value=E,x.object.language=V[8]):x.object.datatype.value=b,x.object.value=V[6].replace(U,function($,ce,X,ie){if(ce)switch(ce){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(X)return String.fromCharCode(parseInt(X,16));if(ie)throw new Error("Unsupported U escape")})),x.graph=void 0!==V[9]?{termType:k,value:V[9]}:void 0!==V[10]?{termType:A,value:V[10]}:{termType:_,value:""},x.graph.value in X){let B=!0;const I=X[x.graph.value];for(const ue of I)if(T(ue,x)){B=!1;break}B&&(I.push(x),ce.push(x))}else X[x.graph.value]=[x],ce.push(x)}return ce}static serialize($){Array.isArray($)||($=vC.legacyDatasetToQuads($));const ce=[];for(const X of $)ce.push(vC.serializeQuad(X));return ce.sort().join("")}static serializeQuadComponents($,ce,X,ie){let ee="";return ee+=$.termType===k?`<${$.value}>`:`${$.value}`,ee+=` <${ce.value}> `,X.termType===k?ee+=`<${X.value}>`:X.termType===A?ee+=X.value:(ee+=`"${function N(S){return S.replace(F,function($){switch($){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(X.value)}"`,X.datatype.value===E?X.language&&(ee+=`@${X.language}`):X.datatype.value!==b&&(ee+=`^^<${X.datatype.value}>`)),ie.termType===k?ee+=` <${ie.value}>`:ie.termType===A&&(ee+=` ${ie.value}`),ee+=" .\n",ee}static serializeQuad($){return vC.serializeQuadComponents($.subject,$.predicate,$.object,$.graph)}static legacyDatasetToQuads($){const ce=[],X={"blank node":A,IRI:k,literal:P};for(const ie in $)$[ie].forEach(K=>{const V={};for(const x in K){const B=K[x],I={termType:X[B.type],value:B.value};I.termType===P&&(I.datatype={termType:k},"datatype"in B&&(I.datatype.value=B.datatype),"language"in B?("datatype"in B||(I.datatype.value=E),I.language=B.language):"datatype"in B||(I.datatype.value=b)),V[x]=I}V.graph="@default"===ie?{termType:_,value:""}:{termType:ie.startsWith("_:")?A:k,value:ie},ce.push(V)});return ce}};const F=/["\\\n\r]/g,U=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:te=>{"use strict";te.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let E=0;E<g.length;++E)this.dir.set(g[E],!0)}hasNext(){return!this.done}next(){const{current:g,dir:E}=this,b=g.slice();let k=null,A=0;const P=g.length;for(let _=0;_<P;++_){const y=g[_],T=E.get(y);(null===k||y>k)&&(T&&_>0&&y>g[_-1]||!T&&_<P-1&&y>g[_+1])&&(k=y,A=_)}if(null===k)this.done=!0;else{const _=E.get(k)?A-1:A+1;g[A]=g[_],g[_]=k;for(const y of g)y>k&&E.set(y,!E.get(y))}return b}}},7218:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(5327),k=g(7475),A=g(7790),P=g(8003);function _(y,T){return y.hash<T.hash?-1:y.hash>T.hash?1:0}te.exports=class{constructor({createMessageDigest:T=(()=>new k("sha256")),canonicalIdMap:F=new Map,maxDeepIterations:N=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",F),this.createMessageDigest=T,this.maxDeepIterations=N,this.quads=null,this.deepIterations=null}main(T){var F=this;return E(function*(){F.deepIterations=new Map,F.quads=T;for(const X of T)F._addBlankNodeQuadInfo({quad:X,component:X.subject}),F._addBlankNodeQuadInfo({quad:X,component:X.object}),F._addBlankNodeQuadInfo({quad:X,component:X.graph});const N=new Map,U=[...F.blankNodeInfo.keys()];let se=0;for(const X of U)++se%100==0&&(yield F._yield()),yield F._hashAndTrackBlankNode({id:X,hashToBlankNodes:N});const S=[...N.keys()].sort(),$=[];for(const X of S){const ie=N.get(X);ie.length>1?$.push(ie):F.canonicalIssuer.getId(ie[0])}for(const X of $){const ie=[];for(const ee of X){if(F.canonicalIssuer.hasId(ee))continue;const K=new b("_:b");K.getId(ee);const V=yield F.hashNDegreeQuads(ee,K);ie.push(V)}ie.sort(_);for(const ee of ie){const K=ee.issuer.getOldIds();for(const V of K)F.canonicalIssuer.getId(V)}}const ce=[];for(const X of F.quads){const ie=P.serializeQuadComponents(F._componentWithCanonicalId(X.subject),X.predicate,F._componentWithCanonicalId(X.object),F._componentWithCanonicalId(X.graph));ce.push(ie)}return ce.sort(),ce.join("")})()}hashFirstDegreeQuads(T){var F=this;return E(function*(){const N=[],U=F.blankNodeInfo.get(T),se=U.quads;for(const $ of se){const ce={subject:null,predicate:$.predicate,object:null,graph:null};ce.subject=F.modifyFirstDegreeComponent(T,$.subject,"subject"),ce.object=F.modifyFirstDegreeComponent(T,$.object,"object"),ce.graph=F.modifyFirstDegreeComponent(T,$.graph,"graph"),N.push(P.serializeQuad(ce))}N.sort();const S=F.createMessageDigest();for(const $ of N)S.update($);return U.hash=yield S.digest(),U.hash})()}hashRelatedBlankNode(T,F,N,U){var se=this;return E(function*(){let S;S=se.canonicalIssuer.hasId(T)?se.canonicalIssuer.getId(T):N.hasId(T)?N.getId(T):se.blankNodeInfo.get(T).hash;const $=se.createMessageDigest();return $.update(U),"g"!==U&&$.update(se.getRelatedPredicate(F)),$.update(S),$.digest()})()}hashNDegreeQuads(T,F){var N=this;return E(function*(){const U=N.deepIterations.get(T)||0;if(U>N.maxDeepIterations)throw new Error(`Maximum deep iterations (${N.maxDeepIterations}) exceeded.`);N.deepIterations.set(T,U+1);const se=N.createMessageDigest(),S=yield N.createHashToRelated(T,F),$=[...S.keys()].sort();for(const ce of $){se.update(ce);let ie,X="";const ee=new A(S.get(ce));let K=0;for(;ee.hasNext();){const V=ee.next();++K%3==0&&(yield N._yield());let x=F.clone(),B="";const I=[];let ue=!1;for(const W of V)if(N.canonicalIssuer.hasId(W)?B+=N.canonicalIssuer.getId(W):(x.hasId(W)||I.push(W),B+=x.getId(W)),0!==X.length&&B>X){ue=!0;break}if(!ue){for(const W of I){const Ce=yield N.hashNDegreeQuads(W,x);if(B+=x.getId(W),B+=`<${Ce.hash}>`,x=Ce.issuer,0!==X.length&&B>X){ue=!0;break}}ue||(0===X.length||B<X)&&(X=B,ie=x)}}se.update(X),F=ie}return{hash:yield se.digest(),issuer:F}})()}modifyFirstDegreeComponent(T,F){return"BlankNode"!==F.termType?F:{termType:"BlankNode",value:F.value===T?"_:a":"_:z"}}getRelatedPredicate(T){return`<${T.predicate.value}>`}createHashToRelated(T,F){var N=this;return E(function*(){const U=new Map,se=N.blankNodeInfo.get(T).quads;let S=0;for(const $ of se)++S%100==0&&(yield N._yield()),yield Promise.all([N._addRelatedBlankNodeHash({quad:$,component:$.subject,position:"s",id:T,issuer:F,hashToRelated:U}),N._addRelatedBlankNodeHash({quad:$,component:$.object,position:"o",id:T,issuer:F,hashToRelated:U}),N._addRelatedBlankNodeHash({quad:$,component:$.graph,position:"g",id:T,issuer:F,hashToRelated:U})]);return U})()}_hashAndTrackBlankNode({id:T,hashToBlankNodes:F}){var N=this;return E(function*(){const U=yield N.hashFirstDegreeQuads(T),se=F.get(U);se?se.push(T):F.set(U,[T])})()}_addBlankNodeQuadInfo({quad:T,component:F}){if("BlankNode"!==F.termType)return;const N=F.value,U=this.blankNodeInfo.get(N);U?U.quads.add(T):this.blankNodeInfo.set(N,{quads:new Set([T]),hash:null})}_addRelatedBlankNodeHash({quad:T,component:F,position:N,id:U,issuer:se,hashToRelated:S}){var $=this;return E(function*(){if("BlankNode"!==F.termType||F.value===U)return;const ce=F.value,X=yield $.hashRelatedBlankNode(ce,T,se,N),ie=S.get(X);ie?ie.push(ce):S.set(X,[ce])})()}_componentWithCanonicalId(T){return"BlankNode"!==T.termType||T.value.startsWith(this.canonicalIssuer.prefix)?T:{termType:"BlankNode",value:this.canonicalIssuer.getId(T.value)}}_yield(){return E(function*(){return new Promise(T=>setImmediate(T))})()}}},9123:(te,Z,g)=>{"use strict";const E=g(5327),b=g(7475),k=g(7790),A=g(8003);function P(_,y){return _.hash<y.hash?-1:_.hash>y.hash?1:0}te.exports=class{constructor({createMessageDigest:y=(()=>new b("sha256")),canonicalIdMap:T=new Map,maxDeepIterations:F=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new E("_:c14n",T),this.createMessageDigest=y,this.maxDeepIterations=F,this.quads=null,this.deepIterations=null}main(y){this.deepIterations=new Map,this.quads=y;for(const S of y)this._addBlankNodeQuadInfo({quad:S,component:S.subject}),this._addBlankNodeQuadInfo({quad:S,component:S.object}),this._addBlankNodeQuadInfo({quad:S,component:S.graph});const T=new Map,F=[...this.blankNodeInfo.keys()];for(const S of F)this._hashAndTrackBlankNode({id:S,hashToBlankNodes:T});const N=[...T.keys()].sort(),U=[];for(const S of N){const $=T.get(S);$.length>1?U.push($):this.canonicalIssuer.getId($[0])}for(const S of U){const $=[];for(const ce of S){if(this.canonicalIssuer.hasId(ce))continue;const X=new E("_:b");X.getId(ce);const ie=this.hashNDegreeQuads(ce,X);$.push(ie)}$.sort(P);for(const ce of $){const X=ce.issuer.getOldIds();for(const ie of X)this.canonicalIssuer.getId(ie)}}const se=[];for(const S of this.quads){const $=A.serializeQuadComponents(this._componentWithCanonicalId({component:S.subject}),S.predicate,this._componentWithCanonicalId({component:S.object}),this._componentWithCanonicalId({component:S.graph}));se.push($)}return se.sort(),se.join("")}hashFirstDegreeQuads(y){const T=[],F=this.blankNodeInfo.get(y),N=F.quads;for(const se of N){const S={subject:null,predicate:se.predicate,object:null,graph:null};S.subject=this.modifyFirstDegreeComponent(y,se.subject,"subject"),S.object=this.modifyFirstDegreeComponent(y,se.object,"object"),S.graph=this.modifyFirstDegreeComponent(y,se.graph,"graph"),T.push(A.serializeQuad(S))}T.sort();const U=this.createMessageDigest();for(const se of T)U.update(se);return F.hash=U.digest(),F.hash}hashRelatedBlankNode(y,T,F,N){let U;U=this.canonicalIssuer.hasId(y)?this.canonicalIssuer.getId(y):F.hasId(y)?F.getId(y):this.blankNodeInfo.get(y).hash;const se=this.createMessageDigest();return se.update(N),"g"!==N&&se.update(this.getRelatedPredicate(T)),se.update(U),se.digest()}hashNDegreeQuads(y,T){const F=this.deepIterations.get(y)||0;if(F>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(y,F+1);const N=this.createMessageDigest(),U=this.createHashToRelated(y,T),se=[...U.keys()].sort();for(const S of se){N.update(S);let ce,$="";const X=new k(U.get(S));for(;X.hasNext();){const ie=X.next();let ee=T.clone(),K="";const V=[];let x=!1;for(const B of ie)if(this.canonicalIssuer.hasId(B)?K+=this.canonicalIssuer.getId(B):(ee.hasId(B)||V.push(B),K+=ee.getId(B)),0!==$.length&&K>$){x=!0;break}if(!x){for(const B of V){const I=this.hashNDegreeQuads(B,ee);if(K+=ee.getId(B),K+=`<${I.hash}>`,ee=I.issuer,0!==$.length&&K>$){x=!0;break}}x||(0===$.length||K<$)&&($=K,ce=ee)}}N.update($),T=ce}return{hash:N.digest(),issuer:T}}modifyFirstDegreeComponent(y,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===y?"_:a":"_:z"}}getRelatedPredicate(y){return`<${y.predicate.value}>`}createHashToRelated(y,T){const F=new Map,N=this.blankNodeInfo.get(y).quads;for(const U of N)this._addRelatedBlankNodeHash({quad:U,component:U.subject,position:"s",id:y,issuer:T,hashToRelated:F}),this._addRelatedBlankNodeHash({quad:U,component:U.object,position:"o",id:y,issuer:T,hashToRelated:F}),this._addRelatedBlankNodeHash({quad:U,component:U.graph,position:"g",id:y,issuer:T,hashToRelated:F});return F}_hashAndTrackBlankNode({id:y,hashToBlankNodes:T}){const F=this.hashFirstDegreeQuads(y),N=T.get(F);N?N.push(y):T.set(F,[y])}_addBlankNodeQuadInfo({quad:y,component:T}){if("BlankNode"!==T.termType)return;const F=T.value,N=this.blankNodeInfo.get(F);N?N.quads.add(y):this.blankNodeInfo.set(F,{quads:new Set([y]),hash:null})}_addRelatedBlankNodeHash({quad:y,component:T,position:F,id:N,issuer:U,hashToRelated:se}){if("BlankNode"!==T.termType||T.value===N)return;const S=T.value,$=this.hashRelatedBlankNode(S,y,U,F),ce=se.get($);ce?ce.push(S):se.set($,[S])}_componentWithCanonicalId({component:y}){return"BlankNode"!==y.termType||y.value.startsWith(this.canonicalIssuer.prefix)?y:{termType:"BlankNode",value:this.canonicalIssuer.getId(y.value)}}}},1326:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(7475),k=g(7218);te.exports=class extends k{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(P,_,y){return"BlankNode"!==_.termType?_:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===P?"_:a":"_:z"}}getRelatedPredicate(P){return P.predicate.value}createHashToRelated(P,_){var y=this;return E(function*(){const T=new Map,F=y.blankNodeInfo.get(P).quads;let N=0;for(const U of F){let se,S;if("BlankNode"===U.subject.termType&&U.subject.value!==P)S=U.subject.value,se="p";else{if("BlankNode"!==U.object.termType||U.object.value===P)continue;S=U.object.value,se="r"}++N%100==0&&(yield y._yield());const $=yield y.hashRelatedBlankNode(S,U,_,se),ce=T.get($);ce?ce.push(S):T.set($,[S])}return T})()}}},9869:(te,Z,g)=>{"use strict";const E=g(7475),b=g(9123);te.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new E("sha1")}modifyFirstDegreeComponent(A,P,_){return"BlankNode"!==P.termType?P:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:P.value===A?"_:a":"_:z"}}getRelatedPredicate(A){return A.predicate.value}createHashToRelated(A,P){const _=new Map,y=this.blankNodeInfo.get(A).quads;for(const T of y){let F,N;if("BlankNode"===T.subject.termType&&T.subject.value!==A)N=T.subject.value,F="p";else{if("BlankNode"!==T.object.termType||T.object.value===A)continue;N=T.object.value,F="r"}const U=this.hashRelatedBlankNode(N,T,P,F),se=_.get(U);se?se.push(N):_.set(U,[N])}return _}}},7842:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(7218),k=g(1326),A=g(9123),P=g(9869);let _;try{_=g(7670)}catch{}function y(T){return Array.isArray(T)?T:Z.NQuads.legacyDatasetToQuads(T)}Z.NQuads=g(8003),Z.IdentifierIssuer=g(5327),Z._rdfCanonizeNative=function(T){return T&&(_=T),_},Z.canonize=function(){var T=E(function*(F,N){const U=y(F);if(N.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((se,S)=>_.canonize(U,N,($,ce)=>$?S($):se(ce)))}if("URDNA2015"===N.algorithm)return new b(N).main(U);if("URGNA2012"===N.algorithm){if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new k(N).main(U)}throw"algorithm"in N?new Error("Invalid RDF Dataset Canonicalization algorithm: "+N.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(F,N){return T.apply(this,arguments)}}(),Z._canonizeSync=function(T,F){const N=y(T);if(F.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(F.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(N,F)}if("URDNA2015"===F.algorithm)return new A(F).main(N);if("URGNA2012"===F.algorithm){if(F.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new P(F).main(N)}throw"algorithm"in F?new Error("Invalid RDF Dataset Canonicalization algorithm: "+F.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(te,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(4740),Z),b(g(3613),Z),b(g(9379),Z),b(g(5565),Z),b(g(3283),Z),b(g(3905),Z),b(g(2234),Z)},4740:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.BlankNode=void 0,Z.BlankNode=class g{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DataFactory=void 0;const E=g(4740),b=g(9379),k=g(5565),A=g(3283),P=g(3905),_=g(2234);let y=0;Z.DataFactory=class T{constructor(N){this.blankNodeCounter=0,this.blankNodePrefix=(N=N||{}).blankNodePrefix||`df_${y++}_`}namedNode(N){return new A.NamedNode(N)}blankNode(N){return new E.BlankNode(N||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(N,U){return new k.Literal(N,U)}variable(N){return new _.Variable(N)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(N,U,se,S){return new P.Quad(N,U,se,S||this.defaultGraph())}fromTerm(N){switch(N.termType){case"NamedNode":return this.namedNode(N.value);case"BlankNode":return this.blankNode(N.value);case"Literal":return N.language?this.literal(N.value,N.language):N.datatype.equals(k.Literal.XSD_STRING)?this.literal(N.value):this.literal(N.value,this.fromTerm(N.datatype));case"Variable":return this.variable(N.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(N.subject),this.fromTerm(N.predicate),this.fromTerm(N.object),this.fromTerm(N.graph))}}fromQuad(N){return this.fromTerm(N)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}Z.DefaultGraph=g,g.INSTANCE=new g},5565:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Literal=void 0;const E=g(3283);class b{constructor(A,P){this.termType="Literal",this.value=A,"string"==typeof P?(this.language=P,this.datatype=b.RDF_LANGUAGE_STRING):P?(this.language="",this.datatype=P):(this.language="",this.datatype=b.XSD_STRING)}equals(A){return!!A&&"Literal"===A.termType&&A.value===this.value&&A.language===this.language&&this.datatype.equals(A.datatype)}}Z.Literal=b,b.RDF_LANGUAGE_STRING=new E.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new E.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.NamedNode=void 0,Z.NamedNode=class g{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Quad=void 0,Z.Quad=class g{constructor(b,k,A,P){this.termType="Quad",this.value="",this.subject=b,this.predicate=k,this.object=A,this.graph=P}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Variable=void 0,Z.Variable=class g{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(te,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(S,$,ce,X){void 0===X&&(X=ce),Object.defineProperty(S,X,{enumerable:!0,get:function(){return $[ce]}})}:function(S,$,ce,X){void 0===X&&(X=ce),S[X]=$[ce]}),b=this&&this.__exportStar||function(S,$){for(var ce in S)"default"!==ce&&!Object.prototype.hasOwnProperty.call($,ce)&&E($,S,ce)};Object.defineProperty(Z,"__esModule",{value:!0}),Z.getSupportedJavaScriptPrimitives=Z.getSupportedRdfDatatypes=Z.getTermRaw=Z.toRdf=Z.fromRdf=void 0;const k=g(2633),A=g(2538),P=g(6374);b(g(2538),Z),b(g(1815),Z),b(g(6374),Z);const _=new k.DataFactory,y=new P.Translator;function T(S,$){return y.fromRdf(S,$)}y.registerHandler(new A.TypeHandlerString,A.TypeHandlerString.TYPES.map(S=>_.namedNode(S)),["string"]),y.registerHandler(new A.TypeHandlerBoolean,[A.TypeHandlerBoolean.TYPE].map(S=>_.namedNode(S)),["boolean"]),y.registerHandler(new A.TypeHandlerNumberDouble,A.TypeHandlerNumberDouble.TYPES.map(S=>_.namedNode(S)),["number"]),y.registerHandler(new A.TypeHandlerNumberInteger,A.TypeHandlerNumberInteger.TYPES.map(S=>_.namedNode(S)),["number"]),y.registerHandler(new A.TypeHandlerDate,A.TypeHandlerDate.TYPES.map(S=>_.namedNode(S)),["object"]),Z.fromRdf=T,Z.toRdf=function F(S,$){return $&&"namedNode"in $&&($={dataFactory:$}),($=$||{})&&!$.dataFactory&&($.dataFactory=_),y.toRdf(S,$)},Z.getTermRaw=function N(S,$){return"Literal"===S.termType?T(S,$):S.value},Z.getSupportedRdfDatatypes=function U(){return y.getSupportedRdfDatatypes()},Z.getSupportedJavaScriptPrimitives=function se(){return y.getSupportedJavaScriptPrimitives()}},1815:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0})},6374:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Translator=void 0,Z.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,k,A){for(const P of k)this.supportedRdfDatatypes.push(P),this.fromRdfHandlers[P.value]=b;for(const P of A){let _=this.toRdfHandlers[P];_||(this.toRdfHandlers[P]=_=[]),_.push(b)}}fromRdf(b,k){const A=this.fromRdfHandlers[b.datatype.value];return A?A.fromRdf(b,k):b.value}toRdf(b,k){const A=this.toRdfHandlers[typeof b];if(A)for(const P of A){const _=P.toRdf(b,k);if(_)return _}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerBoolean=void 0;const E=g(6374);class b{fromRdf(A,P){switch(A.value){case"true":case"1":return!0;case"false":case"0":return!1}return P&&E.Translator.incorrectRdfDataType(A),!1}toRdf(A,{datatype:P,dataFactory:_}){return _.literal(A?"true":"false",P||_.namedNode(b.TYPE))}}Z.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerDate=void 0;const E=g(6374);class b{fromRdf(A,P){switch(P&&!A.value.match(b.VALIDATORS[A.datatype.value.substr(33,A.datatype.value.length)])&&E.Translator.incorrectRdfDataType(A),A.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(A.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=A.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(A.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(A.value+"-01");default:return new Date(A.value)}}toRdf(A,{datatype:P,dataFactory:_}){if(P=P||_.namedNode(b.TYPES[0]),!(A instanceof Date))return null;const y=A;let T;switch(P.value){case"http://www.w3.org/2001/XMLSchema#gDay":T=String(y.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":T=y.getUTCMonth()+1+"-"+y.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":T=String(y.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":T=y.getUTCFullYear()+"-"+(y.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":T=y.toISOString().replace(/T.*$/,"");break;default:T=y.toISOString()}return _.literal(T,P)}}Z.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberDouble=void 0;const E=g(6374);class b{fromRdf(A,P){const _=parseFloat(A.value);return P&&isNaN(_)&&E.Translator.incorrectRdfDataType(A),_}toRdf(A,{datatype:P,dataFactory:_}){return P=P||_.namedNode(b.TYPES[0]),isNaN(A)?_.literal("NaN",P):isFinite(A)?A%1==0?null:_.literal(A.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),P):_.literal(A>0?"INF":"-INF",P)}}Z.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberInteger=void 0;const E=g(6374);class b{fromRdf(A,P){const _=parseInt(A.value,10);return P&&(isNaN(_)||A.value.indexOf(".")>=0)&&E.Translator.incorrectRdfDataType(A),_}toRdf(A,{datatype:P,dataFactory:_}){return _.literal(String(A),P||_.namedNode(A<=b.MAX_INT&&A>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}Z.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerString=void 0;class g{fromRdf(b){return b.value}toRdf(b,{datatype:k,dataFactory:A}){return A.literal(b,k)}}Z.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(te,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(88),Z),b(g(1600),Z),b(g(1511),Z),b(g(9199),Z),b(g(2210),Z)},2821:function(te,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(5664),Z)},758:(te,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseError=void 0;class g extends Error{constructor(b,k){const A=b.saxStream._parser;super(b.trackPosition?`Line ${A.line+1} column ${A.column+1}: ${k}`:k)}}Z.ParseError=g},5664:(te,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseType=Z.RdfXmlParser=void 0;const E=g(7054),b=g(9528),k=g(1793),A=g(758),P=g(2633);class _ extends k.Transform{constructor(F){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},F&&(Object.assign(this,F),this.options=F),this.dataFactory||(this.dataFactory=new P.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(F,N){const U={};let se=!1;for(const $ in F.attributes)$.startsWith("xmlns")&&(5===$.length?(se=!0,U[""]=F.attributes[$]):":"===$.charAt(5)&&(se=!0,U[$.substr(6)]=F.attributes[$]));const S=N&&N.ns?N.ns:[_.DEFAULT_NS];return se?S.concat([U]):S}static expandPrefixedTerm(F,N,U){const se=F.indexOf(":");let S,$;se>=0?(S=F.substr(0,se),$=F.substr(se+1)):(S="",$=F);let ce=null,X=null;for(let ie=N.length-1;ie>=0;ie--){const ee=N[ie][S];if(ee){ce=ee;break}X||(X=N[ie][""])}if(!ce){if(S&&"xmlns"!==S)throw new A.ParseError(U,`The prefix '${S}' in term '${F}' was not bound.`);ce=X||""}return{prefix:S,local:$,uri:ce}}static isValidIri(F){return _.IRI_REGEX.test(F)}import(F){const N=new k.PassThrough({readableObjectMode:!0});F.on("error",se=>U.emit("error",se)),F.on("data",se=>N.push(se)),F.on("end",()=>N.push(null));const U=N.pipe(new _(this.options));return U}_transform(F,N,U){try{this.saxStream.write(F,N)}catch(se){return U(se)}U()}newParseError(F){return new A.ParseError(this,F)}valueToUri(F,N){return this.uriToNamedNode(E.resolve(F,N.baseIRI))}uriToNamedNode(F){if(!_.isValidIri(F))throw this.newParseError(`Invalid URI: ${F}`);return this.dataFactory.namedNode(F)}validateNcname(F){if(!_.NCNAME_MATCHER.test(F))throw this.newParseError(`Not a valid NCName: ${F}`)}attachSaxListeners(){this.saxStream.on("error",F=>this.emit("error",F)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(F){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let U=y.RESOURCE;if(N&&(N.hadChildren=!0,U=N.childrenParseType),N&&N.childrenStringTags){const S=F.name;let $="";for(const ee in F.attributes)$+=` ${ee}="${F.attributes[ee]}"`;N.childrenStringTags.push(`<${S}${$}>`);const ie={childrenStringTags:N.childrenStringTags};return ie.childrenStringEmitClosingTag=`</${S}>`,void this.activeTagStack.push(ie)}const se={};N?(se.language=N.language,se.baseIRI=N.baseIRI):se.baseIRI=this.baseIRI,this.activeTagStack.push(se),se.ns=_.parseNamespace(F,N),U===y.RESOURCE?this.onTagResource(F,se,N,!N):this.onTagProperty(F,se,N)}onTagResource(F,N,U,se){const S=_.expandPrefixedTerm(F.name,N.ns,this);N.childrenParseType=y.PROPERTY;let $=!0;if(S.uri===_.RDF){if(!se&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(S.local)>=0)throw this.newParseError(`Illegal node element name: ${S.local}`);switch(S.local){case"RDF":N.childrenParseType=y.RESOURCE;case"Description":$=!1}}const ce=[],X=[];let ie=null,ee=!1,K=!1,V=null;for(const x in F.attributes){const B=F.attributes[x],I=_.expandPrefixedTerm(x,N.ns,this);if(U&&I.uri===_.RDF)switch(I.local){case"about":if(ie)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${ie} where found.`);ie=B;continue;case"ID":if(ie)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${ie} where found.`);this.validateNcname(B),ie="#"+B,ee=!0;continue;case"nodeID":if(ie)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${ie} where found.`);this.validateNcname(B),ie=B,K=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":V=B;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(I.uri===_.XML){if("lang"===I.local){N.language=""===B?null:B.toLowerCase();continue}if("base"===I.local){N.baseIRI=E.resolve(B,N.baseIRI);continue}}"xml"!==I.prefix&&I.uri&&(ce.push(this.uriToNamedNode(I.uri+I.local)),X.push(B))}if(null!==ie&&(N.subject=K?this.dataFactory.blankNode(ie):this.valueToUri(ie,N),ee&&this.claimNodeId(N.subject)),N.subject||(N.subject=this.dataFactory.blankNode()),$){const x=this.uriToNamedNode(S.uri+S.local);this.emitTriple(N.subject,this.dataFactory.namedNode(_.RDF+"type"),x,U?U.reifiedStatementId:null)}if(U){if(U.predicate)if(U.childrenCollectionSubject){const x=this.dataFactory.blankNode();this.emitTriple(U.childrenCollectionSubject,U.childrenCollectionPredicate,x,U.reifiedStatementId),this.emitTriple(x,this.dataFactory.namedNode(_.RDF+"first"),N.subject,N.reifiedStatementId),U.childrenCollectionSubject=x,U.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(U.subject,U.predicate,N.subject,U.reifiedStatementId);for(let x=0;x<U.predicateSubPredicates.length;x++)this.emitTriple(N.subject,U.predicateSubPredicates[x],U.predicateSubObjects[x],null);U.predicateSubPredicates=[],U.predicateSubObjects=[],U.predicateEmitted=!0}for(let x=0;x<ce.length;x++){const B=this.dataFactory.literal(X[x],N.datatype||N.language);this.emitTriple(N.subject,ce[x],B,U.reifiedStatementId)}V&&this.emitTriple(N.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(V),null)}}onTagProperty(F,N,U){const se=_.expandPrefixedTerm(F.name,N.ns,this);if(N.childrenParseType=y.RESOURCE,N.subject=U.subject,se.uri===_.RDF&&"li"===se.local?(U.listItemCounter||(U.listItemCounter=1),N.predicate=this.uriToNamedNode(se.uri+"_"+U.listItemCounter++)):N.predicate=this.uriToNamedNode(se.uri+se.local),se.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(se.local)>=0)throw this.newParseError(`Illegal property element name: ${se.local}`);N.predicateSubPredicates=[],N.predicateSubObjects=[];let S=!1,$=!1,ce=null,X=!0;const ie=[],ee=[];for(const K in F.attributes){const V=F.attributes[K],x=_.expandPrefixedTerm(K,N.ns,this);if(x.uri===_.RDF)switch(x.local){case"resource":if(ce)throw this.newParseError(`Found both rdf:resource (${V}) and rdf:nodeID (${ce}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${V})`);N.hadChildren=!0,ce=V,X=!1;continue;case"datatype":if($)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${V}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${V})`);N.datatype=this.valueToUri(V,N);continue;case"nodeID":if($)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${V}).`);if(N.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${V}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${V})`);this.validateNcname(V),N.hadChildren=!0,ce=V,X=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if($)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(N.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${N.datatype.value})`);if(ce)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ce})`);if("Resource"===V){S=!0,N.childrenParseType=y.PROPERTY;const B=this.dataFactory.blankNode();this.emitTriple(N.subject,N.predicate,B,N.reifiedStatementId),N.subject=B,N.predicate=null}else"Collection"===V?(S=!0,N.hadChildren=!0,N.childrenCollectionSubject=N.subject,N.childrenCollectionPredicate=N.predicate,X=!1):"Literal"===V&&(S=!0,N.childrenTagsToString=!0,N.childrenStringTags=[]);continue;case"ID":this.validateNcname(V),N.reifiedStatementId=this.valueToUri("#"+V,N),this.claimNodeId(N.reifiedStatementId);continue}else if(x.uri===_.XML&&"lang"===x.local){N.language=""===V?null:V.toLowerCase();continue}if("xml"!==x.prefix&&"xmlns"!==x.prefix&&x.uri){if(S||N.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${V}`);N.hadChildren=!0,$=!0,ie.push(this.uriToNamedNode(x.uri+x.local)),ee.push(this.dataFactory.literal(V,N.datatype||N.language))}}if(null!==ce){const K=N.subject;N.subject=X?this.dataFactory.blankNode(ce):this.valueToUri(ce,N),this.emitTriple(K,N.predicate,N.subject,N.reifiedStatementId);for(let V=0;V<ie.length;V++)this.emitTriple(N.subject,ie[V],ee[V],null);N.predicateEmitted=!0}else X&&(N.predicateSubPredicates=ie,N.predicateSubObjects=ee,N.predicateEmitted=!1)}emitTriple(F,N,U,se){this.push(this.dataFactory.quad(F,N,U,this.defaultGraph)),se&&(this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"subject"),F,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"predicate"),N,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"object"),U,this.defaultGraph)))}claimNodeId(F){if(!this.allowDuplicateRdfIds){if(this.nodeIds[F.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${F.value}'.`);this.nodeIds[F.value]=!0}}onText(F){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;N&&(N.childrenStringTags?N.childrenStringTags.push(F):N.predicate&&(N.text=F))}onCloseTag(){const F=this.activeTagStack.pop();if(F.childrenStringEmitClosingTag&&F.childrenStringTags.push(F.childrenStringEmitClosingTag),F.childrenTagsToString&&(F.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),F.text=F.childrenStringTags.join(""),F.hadChildren=!1),F.childrenCollectionSubject)this.emitTriple(F.childrenCollectionSubject,F.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),F.reifiedStatementId);else if(F.predicate)if(F.hadChildren||F.childrenParseType===y.PROPERTY){if(!F.predicateEmitted){const N=this.dataFactory.blankNode();this.emitTriple(F.subject,F.predicate,N,F.reifiedStatementId);for(let U=0;U<F.predicateSubPredicates.length;U++)this.emitTriple(N,F.predicateSubPredicates[U],F.predicateSubObjects[U],null)}}else this.emitTriple(F.subject,F.predicate,this.dataFactory.literal(F.text||"",F.datatype||F.language),F.reifiedStatementId)}onDoctype(F){F.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(N,U,se)=>(this.saxStream._parser.ENTITIES[U]=se,""))}}var y,T;Z.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(T=y=Z.ParseType||(Z.ParseType={}))[T.RESOURCE=0]="RESOURCE",T[T.PROPERTY=1]="PROPERTY"},9987:(te,Z,g)=>{"use strict";const{AbortError:E,codes:b}=g(4370),{isNodeStream:k,isWebStream:A,kControllerErrorFunction:P}=g(5428),_=g(4618),{ERR_INVALID_ARG_TYPE:y}=b;te.exports.addAbortSignal=function(N,U){if(((F,N)=>{if("object"!=typeof F||!("aborted"in F))throw new y("signal","AbortSignal",F)})(N),!k(U)&&!A(U))throw new y("stream",["ReadableStream","WritableStream","Stream"],U);return te.exports.addAbortSignalNoValidate(N,U)},te.exports.addAbortSignalNoValidate=function(F,N){if("object"!=typeof F||!("aborted"in F))return N;const U=k(N)?()=>{N.destroy(new E(void 0,{cause:F.reason}))}:()=>{N[P](new E(void 0,{cause:F.reason}))};return F.aborted?U():(F.addEventListener("abort",U),_(N,()=>F.removeEventListener("abort",U))),N}},2960:(te,Z,g)=>{"use strict";const{StringPrototypeSlice:E,SymbolIterator:b,TypedArrayPrototypeSet:k,Uint8Array:A}=g(6305),{Buffer:P}=g(1657),{inspect:_}=g(2656);te.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(T){const F={data:T,next:null};this.length>0?this.tail.next=F:this.head=F,this.tail=F,++this.length}unshift(T){const F={data:T,next:this.head};0===this.length&&(this.tail=F),this.head=F,++this.length}shift(){if(0===this.length)return;const T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}clear(){this.head=this.tail=null,this.length=0}join(T){if(0===this.length)return"";let F=this.head,N=""+F.data;for(;null!==(F=F.next);)N+=T+F.data;return N}concat(T){if(0===this.length)return P.alloc(0);const F=P.allocUnsafe(T>>>0);let N=this.head,U=0;for(;N;)k(F,N.data,U),U+=N.data.length,N=N.next;return F}consume(T,F){const N=this.head.data;if(T<N.length){const U=N.slice(0,T);return this.head.data=N.slice(T),U}return T===N.length?this.shift():F?this._getString(T):this._getBuffer(T)}first(){return this.head.data}*[b](){for(let T=this.head;T;T=T.next)yield T.data}_getString(T){let F="",N=this.head,U=0;do{const se=N.data;if(!(T>se.length)){T===se.length?(F+=se,++U,this.head=N.next?N.next:this.tail=null):(F+=E(se,0,T),this.head=N,N.data=E(se,T));break}F+=se,T-=se.length,++U}while(null!==(N=N.next));return this.length-=U,F}_getBuffer(T){const F=P.allocUnsafe(T),N=T;let U=this.head,se=0;do{const S=U.data;if(!(T>S.length)){T===S.length?(k(F,S,N-T),++se,this.head=U.next?U.next:this.tail=null):(k(F,new A(S.buffer,S.byteOffset,T),N-T),this.head=U,U.data=S.slice(T));break}k(F,S,N-T),T-=S.length,++se}while(null!==(U=U.next));return this.length-=se,F}[Symbol.for("nodejs.util.inspect.custom")](T,F){return _(this,{...F,depth:0,customInspect:!1})}}},7721:(te,Z,g)=>{"use strict";var E=g(7156).default;const{pipeline:b}=g(4514),k=g(5931),{destroyer:A}=g(5601),{isNodeStream:P,isReadable:_,isWritable:y,isWebStream:T,isTransformStream:F,isWritableStream:N,isReadableStream:U}=g(5428),{AbortError:se,codes:{ERR_INVALID_ARG_VALUE:S,ERR_MISSING_ARGS:$}}=g(4370),ce=g(4618);te.exports=function(...ie){if(0===ie.length)throw new $("streams");if(1===ie.length)return k.from(ie[0]);const ee=[...ie];if("function"==typeof ie[0]&&(ie[0]=k.from(ie[0])),"function"==typeof ie[ie.length-1]){const Ie=ie.length-1;ie[Ie]=k.from(ie[Ie])}for(let Ie=0;Ie<ie.length;++Ie)if(P(ie[Ie])||T(ie[Ie])){if(Ie<ie.length-1&&!(_(ie[Ie])||U(ie[Ie])||F(ie[Ie])))throw new S(`streams[${Ie}]`,ee[Ie],"must be readable");if(Ie>0&&!(y(ie[Ie])||N(ie[Ie])||F(ie[Ie])))throw new S(`streams[${Ie}]`,ee[Ie],"must be writable")}let K,V,x,B,I;const W=ie[0],Ce=b(ie,function ue(Ie){const Re=B;B=null,Re?Re(Ie):Ie?I.destroy(Ie):!xe&&!le&&I.destroy()}),le=!!(y(W)||N(W)||F(W)),xe=!!(_(Ce)||U(Ce)||F(Ce));if(I=new k({writableObjectMode:!(null==W||!W.writableObjectMode),readableObjectMode:!(null==Ce||!Ce.writableObjectMode),writable:le,readable:xe}),le){if(P(W))I._write=function(Re,et,Xe){W.write(Re,et)?Xe():K=Xe},I._final=function(Re){W.end(),V=Re},W.on("drain",function(){if(K){const Re=K;K=null,Re()}});else if(T(W)){const et=(F(W)?W.writable:W).getWriter();I._write=function(){var Xe=E(function*(Se,Ne,ke){try{yield et.ready,et.write(Se).catch(()=>{}),ke()}catch(Ve){ke(Ve)}});return function(Se,Ne,ke){return Xe.apply(this,arguments)}}(),I._final=function(){var Xe=E(function*(Se){try{yield et.ready,et.close().catch(()=>{}),V=Se}catch(Ne){Se(Ne)}});return function(Se){return Xe.apply(this,arguments)}}()}const Ie=F(Ce)?Ce.readable:Ce;ce(Ie,()=>{if(V){const Re=V;V=null,Re()}})}if(xe)if(P(Ce))Ce.on("readable",function(){if(x){const Ie=x;x=null,Ie()}}),Ce.on("end",function(){I.push(null)}),I._read=function(){for(;;){const Ie=Ce.read();if(null===Ie)return void(x=I._read);if(!I.push(Ie))return}};else if(T(Ce)){const Re=(F(Ce)?Ce.readable:Ce).getReader();I._read=E(function*(){for(;;)try{const{value:et,done:Xe}=yield Re.read();if(!I.push(et))return;if(Xe)return void I.push(null)}catch{return}})}return I._destroy=function(Ie,Re){!Ie&&null!==B&&(Ie=new se),x=null,K=null,V=null,null===B?Re(Ie):(B=Re,P(Ce)&&A(Ce,Ie))},I}},5601:(te,Z,g)=>{"use strict";const E=g(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:k},AbortError:A}=g(4370),{Symbol:P}=g(6305),{kDestroyed:_,isDestroyed:y,isFinished:T,isServerRequest:F}=g(5428),N=P("kDestroy"),U=P("kConstruct");function se(le,xe,Ie){le&&(xe&&!xe.errored&&(xe.errored=le),Ie&&!Ie.errored&&(Ie.errored=le))}function $(le,xe,Ie){let Re=!1;function et(Xe){if(Re)return;Re=!0;const Se=le._readableState,Ne=le._writableState;se(Xe,Ne,Se),Ne&&(Ne.closed=!0),Se&&(Se.closed=!0),"function"==typeof Ie&&Ie(Xe),Xe?E.nextTick(ce,le,Xe):E.nextTick(X,le)}try{le._destroy(xe||null,et)}catch(Xe){et(Xe)}}function ce(le,xe){ie(le,xe),X(le)}function X(le){const xe=le._readableState,Ie=le._writableState;Ie&&(Ie.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Ie&&Ie.emitClose||null!=xe&&xe.emitClose)&&le.emit("close")}function ie(le,xe){const Ie=le._readableState,Re=le._writableState;null!=Re&&Re.errorEmitted||null!=Ie&&Ie.errorEmitted||(Re&&(Re.errorEmitted=!0),Ie&&(Ie.errorEmitted=!0),le.emit("error",xe))}function K(le,xe,Ie){const Re=le._readableState,et=le._writableState;if(null!=et&&et.destroyed||null!=Re&&Re.destroyed)return this;null!=Re&&Re.autoDestroy||null!=et&&et.autoDestroy?le.destroy(xe):xe&&(et&&!et.errored&&(et.errored=xe),Re&&!Re.errored&&(Re.errored=xe),Ie?E.nextTick(ie,le,xe):ie(le,xe))}function x(le){let xe=!1;function Ie(Re){if(xe)return void K(le,Re??new k);xe=!0;const et=le._readableState,Xe=le._writableState,Se=Xe||et;et&&(et.constructed=!0),Xe&&(Xe.constructed=!0),Se.destroyed?le.emit(N,Re):Re?K(le,Re,!0):E.nextTick(B,le)}try{le._construct(Re=>{E.nextTick(Ie,Re)})}catch(Re){E.nextTick(Ie,Re)}}function B(le){le.emit(U)}function I(le){return le?.setHeader&&"function"==typeof le.abort}function ue(le){le.emit("close")}function W(le,xe){le.emit("error",xe),E.nextTick(ue,le)}te.exports={construct:function V(le,xe){if("function"!=typeof le._construct)return;const Ie=le._readableState,Re=le._writableState;Ie&&(Ie.constructed=!1),Re&&(Re.constructed=!1),le.once(U,xe),!(le.listenerCount(U)>1)&&E.nextTick(x,le)},destroyer:function Ce(le,xe){!le||y(le)||(!xe&&!T(le)&&(xe=new A),F(le)?(le.socket=null,le.destroy(xe)):I(le)?le.abort():I(le.req)?le.req.abort():"function"==typeof le.destroy?le.destroy(xe):"function"==typeof le.close?le.close():xe?E.nextTick(W,le,xe):E.nextTick(ue,le),le.destroyed||(le[_]=!0))},destroy:function S(le,xe){const Ie=this._readableState,Re=this._writableState,et=Re||Ie;return null!=Re&&Re.destroyed||null!=Ie&&Ie.destroyed?("function"==typeof xe&&xe(),this):(se(le,Re,Ie),Re&&(Re.destroyed=!0),Ie&&(Ie.destroyed=!0),et.constructed?$(this,le,xe):this.once(N,function(Xe){$(this,b(Xe,le),xe)}),this)},undestroy:function ee(){const le=this._readableState,xe=this._writableState;le&&(le.constructed=!0,le.closed=!1,le.closeEmitted=!1,le.destroyed=!1,le.errored=null,le.errorEmitted=!1,le.reading=!1,le.ended=!1===le.readable,le.endEmitted=!1===le.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:K}},5931:(te,Z,g)=>{"use strict";const{ObjectDefineProperties:E,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:k,ObjectSetPrototypeOf:A}=g(6305);te.exports=y;const P=g(8383),_=g(9764);A(y.prototype,P.prototype),A(y,P);{const U=k(_.prototype);for(let se=0;se<U.length;se++){const S=U[se];y.prototype[S]||(y.prototype[S]=_.prototype[S])}}function y(U){if(!(this instanceof y))return new y(U);P.call(this,U),_.call(this,U),U?(this.allowHalfOpen=!1!==U.allowHalfOpen,!1===U.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===U.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let T,N;function F(){return void 0===T&&(T={}),T}E(y.prototype,{writable:{__proto__:null,...b(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(_.prototype,"writableLength")},writableFinished:{__proto__:null,...b(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(U){this._readableState&&this._writableState&&(this._readableState.destroyed=U,this._writableState.destroyed=U)}}}),y.fromWeb=function(U,se){return F().newStreamDuplexFromReadableWritablePair(U,se)},y.toWeb=function(U){return F().newReadableWritablePairFromDuplex(U)},y.from=function(U){return N||(N=g(8078)),N(U,"body")}},8078:(te,Z,g)=>{var E=g(7156).default,b=g(6737).default,k=g(8186).default;const A=g(42),P=g(1657),{isReadable:_,isWritable:y,isIterable:T,isNodeStream:F,isReadableNodeStream:N,isWritableNodeStream:U,isDuplexNodeStream:se}=g(5428),S=g(4618),{AbortError:$,codes:{ERR_INVALID_ARG_TYPE:ce,ERR_INVALID_RETURN_VALUE:X}}=g(4370),{destroyer:ie}=g(5601),ee=g(5931),K=g(8383),{createDeferredPromise:V}=g(2656),x=g(55),B=globalThis.Blob||P.Blob,I=typeof B<"u"?function(Re){return Re instanceof B}:function(Re){return!1},ue=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:W}=g(6305);class Ce extends ee{constructor(Re){super(Re),!1===Re?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Re?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function xe(Ie){const Re=Ie.readable&&"function"!=typeof Ie.readable.read?K.wrap(Ie.readable):Ie.readable,et=Ie.writable;let Ne,ke,Ve,me,Ae,Xe=!!_(Re),Se=!!y(et);function Ke(ot){const We=me;me=null,We?We(ot):ot&&Ae.destroy(ot)}return Ae=new Ce({readableObjectMode:!(null==Re||!Re.readableObjectMode),writableObjectMode:!(null==et||!et.writableObjectMode),readable:Xe,writable:Se}),Se&&(S(et,ot=>{Se=!1,ot&&ie(Re,ot),Ke(ot)}),Ae._write=function(ot,We,_e){et.write(ot,We)?_e():Ne=_e},Ae._final=function(ot){et.end(),ke=ot},et.on("drain",function(){if(Ne){const ot=Ne;Ne=null,ot()}}),et.on("finish",function(){if(ke){const ot=ke;ke=null,ot()}})),Xe&&(S(Re,ot=>{Xe=!1,ot&&ie(Re,ot),Ke(ot)}),Re.on("readable",function(){if(Ve){const ot=Ve;Ve=null,ot()}}),Re.on("end",function(){Ae.push(null)}),Ae._read=function(){for(;;){const ot=Re.read();if(null===ot)return void(Ve=Ae._read);if(!Ae.push(ot))return}}),Ae._destroy=function(ot,We){!ot&&null!==me&&(ot=new $),Ve=null,Ne=null,ke=null,null===me?We(ot):(me=We,ie(et,ot),ie(Re,ot))},Ae}te.exports=function Ie(Re,et){if(se(Re))return Re;if(N(Re))return xe({readable:Re});if(U(Re))return xe({writable:Re});if(F(Re))return xe({writable:!1,readable:!1});if("function"==typeof Re){const{value:Se,write:Ne,final:ke,destroy:Ve}=function le(Ie){let{promise:Re,resolve:et}=V();const Xe=new ue,Se=Xe.signal;return{value:Ie(k(function*(){for(;;){const ke=Re;Re=null;const{chunk:Ve,done:me,cb:Ae}=yield b(ke);if(A.nextTick(Ae),me)return;if(Se.aborted)throw new $(void 0,{cause:Se.reason});({promise:Re,resolve:et}=V()),yield Ve}})(),{signal:Se}),write(ke,Ve,me){const Ae=et;et=null,Ae({chunk:ke,done:!1,cb:me})},final(ke){const Ve=et;et=null,Ve({done:!0,cb:ke})},destroy(ke,Ve){Xe.abort(),Ve(ke)}}}(Re);if(T(Se))return x(Ce,Se,{objectMode:!0,write:Ne,final:ke,destroy:Ve});const me=Se?.then;if("function"==typeof me){let Ae;const Ke=W(me,Se,ot=>{if(null!=ot)throw new X("nully","body",ot)},ot=>{ie(Ae,ot)});return Ae=new Ce({objectMode:!0,readable:!1,write:Ne,final(ot){ke(E(function*(){try{yield Ke,A.nextTick(ot,null)}catch(We){A.nextTick(ot,We)}}))},destroy:Ve})}throw new X("Iterable, AsyncIterable or AsyncFunction",et,Se)}if(I(Re))return Ie(Re.arrayBuffer());if(T(Re))return x(Ce,Re,{objectMode:!0,writable:!1});if("object"==typeof Re?.writable||"object"==typeof Re?.readable)return xe({readable:null!=Re&&Re.readable?N(Re?.readable)?Re?.readable:Ie(Re.readable):void 0,writable:null!=Re&&Re.writable?U(Re?.writable)?Re?.writable:Ie(Re.writable):void 0});const Xe=Re?.then;if("function"==typeof Xe){let Se;return W(Xe,Re,Ne=>{null!=Ne&&Se.push(Ne),Se.push(null)},Ne=>{ie(Se,Ne)}),Se=new Ce({objectMode:!0,writable:!1,read(){}})}throw new ce(et,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Re)}},4618:(te,Z,g)=>{const E=g(42),{AbortError:b,codes:k}=g(4370),{ERR_INVALID_ARG_TYPE:A,ERR_STREAM_PREMATURE_CLOSE:P}=k,{kEmptyObject:_,once:y}=g(2656),{validateAbortSignal:T,validateFunction:F,validateObject:N,validateBoolean:U}=g(2120),{Promise:se,PromisePrototypeThen:S}=g(6305),{isClosed:$,isReadable:ce,isReadableNodeStream:X,isReadableStream:ie,isReadableFinished:ee,isReadableErrored:K,isWritable:V,isWritableNodeStream:x,isWritableStream:B,isWritableFinished:I,isWritableErrored:ue,isNodeStream:W,willEmitClose:Ce,kIsClosedPromise:le}=g(5428),Ie=()=>{};function Re(Se,Ne,ke){var Ve,me;if(2===arguments.length?(ke=Ne,Ne=_):null==Ne?Ne=_:N(Ne,"options"),F(ke,"callback"),T(Ne.signal,"options.signal"),ke=y(ke),ie(Se)||B(Se))return function et(Se,Ne,ke){let Ve=!1,me=Ie;if(Ne.signal)if(me=()=>{Ve=!0,ke.call(Se,new b(void 0,{cause:Ne.signal.reason}))},Ne.signal.aborted)E.nextTick(me);else{const Ke=ke;ke=y((...ot)=>{Ne.signal.removeEventListener("abort",me),Ke.apply(Se,ot)}),Ne.signal.addEventListener("abort",me)}const Ae=(...Ke)=>{Ve||E.nextTick(()=>ke.apply(Se,Ke))};return S(Se[le].promise,Ae,Ae),Ie}(Se,Ne,ke);if(!W(Se))throw new A("stream",["ReadableStream","WritableStream","Stream"],Se);const Ae=null!==(Ve=Ne.readable)&&void 0!==Ve?Ve:X(Se),Ke=null!==(me=Ne.writable)&&void 0!==me?me:x(Se),ot=Se._writableState,We=Se._readableState,_e=()=>{Se.writable||oe()};let G=Ce(Se)&&X(Se)===Ae&&x(Se)===Ke,O=I(Se,!1);const oe=()=>{O=!0,Se.destroyed&&(G=!1),(!G||Se.readable&&!Ae)&&(!Ae||z)&&ke.call(Se)};let z=ee(Se,!1);const Le=()=>{z=!0,Se.destroyed&&(G=!1),(!G||Se.writable&&!Ke)&&(!Ke||O)&&ke.call(Se)},Ye=de=>{ke.call(Se,de)};let he=$(Se);const Q=()=>{he=!0;const de=ue(Se)||K(Se);return de&&"boolean"!=typeof de?ke.call(Se,de):Ae&&!z&&X(Se,!0)&&!ee(Se,!1)?ke.call(Se,new P):!Ke||O||I(Se,!1)?void ke.call(Se):ke.call(Se,new P)},H=()=>{he=!0;const de=ue(Se)||K(Se);if(de&&"boolean"!=typeof de)return ke.call(Se,de);ke.call(Se)},D=()=>{Se.req.on("finish",oe)};!function xe(Se){return Se.setHeader&&"function"==typeof Se.abort}(Se)?Ke&&!ot&&(Se.on("end",_e),Se.on("close",_e)):(Se.on("complete",oe),G||Se.on("abort",Q),Se.req?D():Se.on("request",D)),!G&&"boolean"==typeof Se.aborted&&Se.on("aborted",Q),Se.on("end",Le),Se.on("finish",oe),!1!==Ne.error&&Se.on("error",Ye),Se.on("close",Q),he?E.nextTick(Q):null!=ot&&ot.errorEmitted||null!=We&&We.errorEmitted?G||E.nextTick(H):(!Ae&&(!G||ce(Se))&&(O||!1===V(Se))||!Ke&&(!G||V(Se))&&(z||!1===ce(Se))||We&&Se.req&&Se.aborted)&&E.nextTick(H);const M=()=>{ke=Ie,Se.removeListener("aborted",Q),Se.removeListener("complete",oe),Se.removeListener("abort",Q),Se.removeListener("request",D),Se.req&&Se.req.removeListener("finish",oe),Se.removeListener("end",_e),Se.removeListener("close",_e),Se.removeListener("finish",oe),Se.removeListener("end",Le),Se.removeListener("error",Ye),Se.removeListener("close",Q)};if(Ne.signal&&!he){const de=()=>{const ge=ke;M(),ge.call(Se,new b(void 0,{cause:Ne.signal.reason}))};if(Ne.signal.aborted)E.nextTick(de);else{const ge=ke;ke=y((...ze)=>{Ne.signal.removeEventListener("abort",de),ge.apply(Se,ze)}),Ne.signal.addEventListener("abort",de)}}return M}te.exports=Re,te.exports.finished=function Xe(Se,Ne){var ke;let Ve=!1;return null===Ne&&(Ne=_),null!==(ke=Ne)&&void 0!==ke&&ke.cleanup&&(U(Ne.cleanup,"cleanup"),Ve=Ne.cleanup),new se((me,Ae)=>{const Ke=Re(Se,Ne,ot=>{Ve&&Ke(),ot?Ae(ot):me()})})}},55:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(42),{PromisePrototypeThen:k,SymbolAsyncIterator:A,SymbolIterator:P}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:T}=g(4370).codes;te.exports=function F(N,U,se){let S,$;if("string"==typeof U||U instanceof _)return new N({objectMode:!0,...se,read(){this.push(U),this.push(null)}});if(U&&U[A])$=!0,S=U[A]();else{if(!U||!U[P])throw new y("iterable",["Iterable"],U);$=!1,S=U[P]()}const ce=new N({objectMode:!0,highWaterMark:1,...se});let X=!1;function ee(){return(ee=E(function*(x){if(null!=x&&"function"==typeof S.throw){const{value:ue,done:W}=yield S.throw(x);if(yield ue,W)return}if("function"==typeof S.return){const{value:ue}=yield S.return();yield ue}})).apply(this,arguments)}function V(){return(V=E(function*(){for(;;){try{const{value:x,done:B}=$?yield S.next():S.next();if(B)ce.push(null);else{const I=x&&"function"==typeof x.then?yield x:x;if(null===I)throw X=!1,new T;if(ce.push(I))continue;X=!1}}catch(x){ce.destroy(x)}break}})).apply(this,arguments)}return ce._read=function(){X||(X=!0,function K(){V.apply(this,arguments)}())},ce._destroy=function(x,B){k(function ie(x){return ee.apply(this,arguments)}(x),()=>b.nextTick(B,x),I=>b.nextTick(B,I||x))},ce}},900:(te,Z,g)=>{"use strict";const{ArrayIsArray:E,ObjectSetPrototypeOf:b}=g(6305),{EventEmitter:k}=g(2016);function A(_){k.call(this,_)}function P(_,y,T){if("function"==typeof _.prependListener)return _.prependListener(y,T);_._events&&_._events[y]?E(_._events[y])?_._events[y].unshift(T):_._events[y]=[T,_._events[y]]:_.on(y,T)}b(A.prototype,k.prototype),b(A,k),A.prototype.pipe=function(_,y){const T=this;function F(X){_.writable&&!1===_.write(X)&&T.pause&&T.pause()}function N(){T.readable&&T.resume&&T.resume()}T.on("data",F),_.on("drain",N),!_._isStdio&&(!y||!1!==y.end)&&(T.on("end",se),T.on("close",S));let U=!1;function se(){U||(U=!0,_.end())}function S(){U||(U=!0,"function"==typeof _.destroy&&_.destroy())}function $(X){ce(),0===k.listenerCount(this,"error")&&this.emit("error",X)}function ce(){T.removeListener("data",F),_.removeListener("drain",N),T.removeListener("end",se),T.removeListener("close",S),T.removeListener("error",$),_.removeListener("error",$),T.removeListener("end",ce),T.removeListener("close",ce),_.removeListener("close",ce)}return P(T,"error",$),P(_,"error",$),T.on("end",ce),T.on("close",ce),_.on("close",ce),_.emit("pipe",T),_},te.exports={Stream:A,prependListener:P}},7624:(te,Z,g)=>{"use strict";var E=g(7156).default,b=g(8131).default,k=g(8237).default,A=g(6737).default,P=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:y,ERR_INVALID_ARG_TYPE:T,ERR_MISSING_ARGS:F,ERR_OUT_OF_RANGE:N},AbortError:U}=g(4370),{validateAbortSignal:se,validateInteger:S,validateObject:$}=g(2120),ce=g(6305).Symbol("kWeak"),{finished:X}=g(4618),ie=g(7721),{addAbortSignalNoValidate:ee}=g(9987),{isWritable:K,isNodeStream:V}=g(5428),{ArrayPrototypePush:x,MathFloor:B,Number:I,NumberIsNaN:ue,Promise:W,PromiseReject:Ce,PromisePrototypeThen:le,Symbol:xe}=g(6305),Ie=xe("kEmpty"),Re=xe("kEof");function Xe(D,M){if("function"!=typeof D)throw new T("fn",["Function","AsyncFunction"],D);null!=M&&$(M,"options"),null!=M?.signal&&se(M.signal,"options.signal");let de=1;return null!=M?.concurrency&&(de=B(M.concurrency)),S(de,"concurrency",1),function(){var ge=P(function*(){var qe,ct;const Dt=new _,_t=this,Ht=[],nn=Dt.signal,Oe={signal:nn},J=()=>Dt.abort();null!=M&&null!==(qe=M.signal)&&void 0!==qe&&qe.aborted&&J(),null==M||null===(ct=M.signal)||void 0===ct||ct.addEventListener("abort",J);let C,ae,He=!1;function Je(){He=!0}function $t(){return($t=E(function*(){try{var Wn,cn=!1,Yn=!1;try{for(var As,gn=k(_t);cn=!(As=yield gn.next()).done;cn=!1){let Yi=As.value;var $o;if(He)return;if(nn.aborted)throw new U;try{Yi=D(Yi,Oe)}catch(ts){Yi=Ce(ts)}Yi!==Ie&&("function"==typeof(null===($o=Yi)||void 0===$o?void 0:$o.catch)&&Yi.catch(Je),Ht.push(Yi),C&&(C(),C=null),!He&&Ht.length&&Ht.length>=de&&(yield new W(ts=>{ae=ts})))}}catch(Yi){Yn=!0,Wn=Yi}finally{try{cn&&null!=gn.return&&(yield gn.return())}finally{if(Yn)throw Wn}}Ht.push(Re)}catch(Yi){const ts=Ce(Yi);le(ts,void 0,Je),Ht.push(ts)}finally{var Ps;He=!0,C&&(C(),C=null),null==M||null===(Ps=M.signal)||void 0===Ps||Ps.removeEventListener("abort",J)}})).apply(this,arguments)}!function st(){$t.apply(this,arguments)}();try{for(;;){for(;Ht.length>0;){const cn=yield A(Ht[0]);if(cn===Re)return;if(nn.aborted)throw new U;cn!==Ie&&(yield cn),Ht.shift(),ae&&(ae(),ae=null)}yield A(new W(cn=>{C=cn}))}}finally{Dt.abort(),He=!0,ae&&(ae(),ae=null)}});return function ze(){return ge.apply(this,arguments)}}().call(this)}function Ne(D){return ke.apply(this,arguments)}function ke(){return(ke=E(function*(D,M=void 0){var ze,de=!1,ge=!1;try{for(var qe=k(_e.call(this,D,M));de=!(yield qe.next()).done;de=!1)return!0}catch(Dt){ge=!0,ze=Dt}finally{try{de&&null!=qe.return&&(yield qe.return())}finally{if(ge)throw ze}}return!1})).apply(this,arguments)}function me(){return(me=E(function*(D,M=void 0){if("function"!=typeof D)throw new T("fn",["Function","AsyncFunction"],D);return!(yield Ne.call(this,E(function*(...de){return!(yield D(...de))}),M))})).apply(this,arguments)}function Ke(){return(Ke=E(function*(D,M){var ze,de=!1,ge=!1;try{for(var ct,qe=k(_e.call(this,D,M));de=!(ct=yield qe.next()).done;de=!1)return ct.value}catch(Dt){ge=!0,ze=Dt}finally{try{de&&null!=qe.return&&(yield qe.return())}finally{if(ge)throw ze}}})).apply(this,arguments)}function We(){return We=E(function*(D,M){if("function"!=typeof D)throw new T("fn",["Function","AsyncFunction"],D);function ge(){return(ge=E(function*(Ht,nn){return yield D(Ht,nn),Ie})).apply(this,arguments)}var ct,ze=!1,qe=!1;try{for(var Dt=k(Xe.call(this,function de(Ht,nn){return ge.apply(this,arguments)},M));ze=!(yield Dt.next()).done;ze=!1);}catch(Ht){qe=!0,ct=Ht}finally{try{ze&&null!=Dt.return&&(yield Dt.return())}finally{if(qe)throw ct}}}),We.apply(this,arguments)}function _e(D,M){if("function"!=typeof D)throw new T("fn",["Function","AsyncFunction"],D);function ge(){return(ge=E(function*(ze,qe){return(yield D(ze,qe))?ze:Ie})).apply(this,arguments)}return Xe.call(this,function de(ze,qe){return ge.apply(this,arguments)},M)}class G extends F{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function oe(){return oe=E(function*(D,M,de){var ge;if("function"!=typeof D)throw new T("reducer",["Function","AsyncFunction"],D);null!=de&&$(de,"options"),null!=de?.signal&&se(de.signal,"options.signal");let ze=arguments.length>1;if(null!=de&&null!==(ge=de.signal)&&void 0!==ge&&ge.aborted){const ae=new U(void 0,{cause:de.signal.reason});throw this.once("error",()=>{}),yield X(this.destroy(ae)),ae}const qe=new _,ct=qe.signal;null!=de&&de.signal&&de.signal.addEventListener("abort",()=>qe.abort(),{once:!0,[ce]:this});let Dt=!1;try{var nn,_t=!1,Ht=!1;try{for(var J,Oe=k(this);_t=!(J=yield Oe.next()).done;_t=!1){const ae=J.value;var C;if(Dt=!0,null!=de&&null!==(C=de.signal)&&void 0!==C&&C.aborted)throw new U;ze?M=yield D(M,ae,{signal:ct}):(M=ae,ze=!0)}}catch(ae){Ht=!0,nn=ae}finally{try{_t&&null!=Oe.return&&(yield Oe.return())}finally{if(Ht)throw nn}}if(!Dt&&!ze)throw new G}finally{qe.abort()}return M}),oe.apply(this,arguments)}function Le(){return(Le=E(function*(D){null!=D&&$(D,"options"),null!=D?.signal&&se(D.signal,"options.signal");const M=[];var ze,de=!1,ge=!1;try{for(var ct,qe=k(this);de=!(ct=yield qe.next()).done;de=!1){const _t=ct.value;var Dt;if(null!=D&&null!==(Dt=D.signal)&&void 0!==Dt&&Dt.aborted)throw new U(void 0,{cause:D.signal.reason});x(M,_t)}}catch(_t){ge=!0,ze=_t}finally{try{de&&null!=qe.return&&(yield qe.return())}finally{if(ge)throw ze}}return M})).apply(this,arguments)}function he(D){if(D=I(D),ue(D))return 0;if(D<0)throw new N("number",">= 0",D);return D}te.exports.streamReturningOperators={asIndexedPairs:function Se(D=void 0){return null!=D&&$(D,"options"),null!=D?.signal&&se(D.signal,"options.signal"),function(){var M=P(function*(){let ge=0;var ct,ze=!1,qe=!1;try{for(var _t,Dt=k(this);ze=!(_t=yield A(Dt.next())).done;ze=!1){const nn=_t.value;var Ht;if(null!=D&&null!==(Ht=D.signal)&&void 0!==Ht&&Ht.aborted)throw new U({cause:D.signal.reason});yield[ge++,nn]}}catch(nn){qe=!0,ct=nn}finally{try{ze&&null!=Dt.return&&(yield A(Dt.return()))}finally{if(qe)throw ct}}});return function de(){return M.apply(this,arguments)}}().call(this)},drop:function Q(D,M=void 0){return null!=M&&$(M,"options"),null!=M?.signal&&se(M.signal,"options.signal"),D=he(D),function(){var de=P(function*(){var ze;if(null!=M&&null!==(ze=M.signal)&&void 0!==ze&&ze.aborted)throw new U;var Dt,qe=!1,ct=!1;try{for(var Ht,_t=k(this);qe=!(Ht=yield A(_t.next())).done;qe=!1){const Oe=Ht.value;var nn;if(null!=M&&null!==(nn=M.signal)&&void 0!==nn&&nn.aborted)throw new U;D--<=0&&(yield Oe)}}catch(Oe){ct=!0,Dt=Oe}finally{try{qe&&null!=_t.return&&(yield A(_t.return()))}finally{if(ct)throw Dt}}});return function ge(){return de.apply(this,arguments)}}().call(this)},filter:_e,flatMap:function Ye(D,M){const de=Xe.call(this,D,M);return function(){var ge=P(function*(){var Dt,qe=!1,ct=!1;try{for(var Ht,_t=k(de);qe=!(Ht=yield A(_t.next())).done;qe=!1){const nn=Ht.value;yield*b(k(nn),A)}}catch(nn){ct=!0,Dt=nn}finally{try{qe&&null!=_t.return&&(yield A(_t.return()))}finally{if(ct)throw Dt}}});return function ze(){return ge.apply(this,arguments)}}().call(this)},map:Xe,take:function H(D,M=void 0){return null!=M&&$(M,"options"),null!=M?.signal&&se(M.signal,"options.signal"),D=he(D),function(){var de=P(function*(){var ze;if(null!=M&&null!==(ze=M.signal)&&void 0!==ze&&ze.aborted)throw new U;var Dt,qe=!1,ct=!1;try{for(var Ht,_t=k(this);qe=!(Ht=yield A(_t.next())).done;qe=!1){const Oe=Ht.value;var nn;if(null!=M&&null!==(nn=M.signal)&&void 0!==nn&&nn.aborted)throw new U;if(!(D-- >0))return;yield Oe}}catch(Oe){ct=!0,Dt=Oe}finally{try{qe&&null!=_t.return&&(yield A(_t.return()))}finally{if(ct)throw Dt}}});return function ge(){return de.apply(this,arguments)}}().call(this)},compose:function et(D,M){if(null!=M&&$(M,"options"),null!=M?.signal&&se(M.signal,"options.signal"),V(D)&&!K(D))throw new y("stream",D,"must be writable");const de=ie(this,D);return null!=M&&M.signal&&ee(M.signal,de),de}},te.exports.promiseReturningOperators={every:function Ve(D){return me.apply(this,arguments)},forEach:function ot(D,M){return We.apply(this,arguments)},reduce:function O(D,M,de){return oe.apply(this,arguments)},toArray:function z(D){return Le.apply(this,arguments)},some:Ne,find:function Ae(D,M){return Ke.apply(this,arguments)}}},6973:(te,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:E}=g(6305);te.exports=k;const b=g(123);function k(A){if(!(this instanceof k))return new k(A);b.call(this,A)}E(k.prototype,b.prototype),E(k,b),k.prototype._transform=function(A,P,_){_(null,A)}},4514:(te,Z,g)=>{var E=g(7156).default,b=g(8186).default,k=g(6737).default,A=g(8131).default,P=g(8237).default;const _=g(42),{ArrayIsArray:y,Promise:T,SymbolAsyncIterator:F}=g(6305),N=g(4618),{once:U}=g(2656),se=g(5601),S=g(5931),{aggregateTwoErrors:$,codes:{ERR_INVALID_ARG_TYPE:ce,ERR_INVALID_RETURN_VALUE:X,ERR_MISSING_ARGS:ie,ERR_STREAM_DESTROYED:ee,ERR_STREAM_PREMATURE_CLOSE:K},AbortError:V}=g(4370),{validateFunction:x,validateAbortSignal:B}=g(2120),{isIterable:I,isReadable:ue,isReadableNodeStream:W,isNodeStream:Ce,isTransformStream:le,isWebStream:xe,isReadableStream:Ie,isReadableEnded:Re}=g(5428),et=globalThis.AbortController||g(3982).AbortController;let Xe,Se;function Ne(z,Le,Ye){let he=!1;return z.on("close",()=>{he=!0}),{destroy:H=>{he||(he=!0,se.destroyer(z,H||new ee("pipe")))},cleanup:N(z,{readable:Le,writable:Ye},H=>{he=!H})}}function Ve(z){if(I(z))return z;if(W(z))return function me(z){return Ae.apply(this,arguments)}(z);throw new ce("val",["Readable","Iterable","AsyncIterable"],z)}function Ae(){return(Ae=b(function*(z){Se||(Se=g(8383)),yield*A(P(Se.prototype[F].call(z)),k)})).apply(this,arguments)}function Ke(z,Le,Ye,he){return ot.apply(this,arguments)}function ot(){return(ot=E(function*(z,Le,Ye,{end:he}){let Q,H=null;const D=_t=>{if(_t&&(Q=_t),H){const Ht=H;H=null,Ht()}},M=()=>new T((_t,Ht)=>{Q?Ht(Q):H=()=>{Q?Ht(Q):_t()}});Le.on("drain",D);const de=N(Le,{readable:!1},D);try{Le.writableNeedDrain&&(yield M());var qe,ge=!1,ze=!1;try{for(var Dt,ct=P(z);ge=!(Dt=yield ct.next()).done;ge=!1)Le.write(Dt.value)||(yield M())}catch(_t){ze=!0,qe=_t}finally{try{ge&&null!=ct.return&&(yield ct.return())}finally{if(ze)throw qe}}he&&Le.end(),yield M(),Ye()}catch(_t){Ye(Q!==_t?$(Q,_t):_t)}finally{de(),Le.off("drain",D)}})).apply(this,arguments)}function We(z,Le,Ye,he){return _e.apply(this,arguments)}function _e(){return(_e=E(function*(z,Le,Ye,{end:he}){le(Le)&&(Le=Le.writable);const Q=Le.getWriter();try{var M,H=!1,D=!1;try{for(var ge,de=P(z);H=!(ge=yield de.next()).done;H=!1){const ze=ge.value;yield Q.ready,Q.write(ze).catch(()=>{})}}catch(ze){D=!0,M=ze}finally{try{H&&null!=de.return&&(yield de.return())}finally{if(D)throw M}}yield Q.ready,he&&(yield Q.close()),Ye()}catch(ze){try{yield Q.abort(ze),Ye(ze)}catch(qe){Ye(qe)}}})).apply(this,arguments)}function O(z,Le,Ye){if(1===z.length&&y(z[0])&&(z=z[0]),z.length<2)throw new ie("streams");const he=new et,Q=he.signal,H=Ye?.signal,D=[];function M(){Dt(new V)}let de,ge;B(H,"options.signal"),H?.addEventListener("abort",M);const ze=[];let _t,qe=0;function ct(J){Dt(J,0==--qe)}function Dt(J,C){if(J&&(!de||"ERR_STREAM_PREMATURE_CLOSE"===de.code)&&(de=J),de||C){for(;ze.length;)ze.shift()(de);H?.removeEventListener("abort",M),he.abort(),C&&(de||D.forEach(ae=>ae()),_.nextTick(Le,de,ge))}}for(let J=0;J<z.length;J++){const C=z[J],ae=J<z.length-1,He=J>0,Je=ae||!1!==Ye?.end,st=J===z.length-1;if(Ce(C)){let $t=function(cn){cn&&"AbortError"!==cn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==cn.code&&ct(cn)};if(Je){const{destroy:cn,cleanup:Yn}=Ne(C,ae,He);ze.push(cn),ue(C)&&st&&D.push(Yn)}C.on("error",$t),ue(C)&&st&&D.push(()=>{C.removeListener("error",$t)})}if(0===J)if("function"==typeof C){if(_t=C({signal:Q}),!I(_t))throw new X("Iterable, AsyncIterable or Stream","source",_t)}else _t=I(C)||W(C)||le(C)?C:S.from(C);else if("function"==typeof C){var Ht;if(_t=le(_t)?Ve(null===(Ht=_t)||void 0===Ht?void 0:Ht.readable):Ve(_t),_t=C(_t,{signal:Q}),ae){if(!I(_t,!0))throw new X("AsyncIterable",`transform[${J-1}]`,_t)}else{var nn;Xe||(Xe=g(6973));const $t=new Xe({objectMode:!0}),cn=null===(nn=_t)||void 0===nn?void 0:nn.then;if("function"==typeof cn)qe++,cn.call(_t,gn=>{ge=gn,null!=gn&&$t.write(gn),Je&&$t.end(),_.nextTick(ct)},gn=>{$t.destroy(gn),_.nextTick(ct,gn)});else if(I(_t,!0))qe++,Ke(_t,$t,ct,{end:Je});else{if(!Ie(_t)&&!le(_t))throw new X("AsyncIterable or Promise","destination",_t);qe++,Ke(_t.readable||_t,$t,ct,{end:Je})}_t=$t;const{destroy:Yn,cleanup:Wn}=Ne(_t,!1,!0);ze.push(Yn),st&&D.push(Wn)}}else if(Ce(C)){if(W(_t)){qe+=2;const $t=oe(_t,C,ct,{end:Je});ue(C)&&st&&D.push($t)}else if(le(_t)||Ie(_t))qe++,Ke(_t.readable||_t,C,ct,{end:Je});else{if(!I(_t))throw new ce("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_t);qe++,Ke(_t,C,ct,{end:Je})}_t=C}else if(xe(C)){if(W(_t))qe++,We(Ve(_t),C,ct,{end:Je});else if(Ie(_t)||I(_t))qe++,We(_t,C,ct,{end:Je});else{if(!le(_t))throw new ce("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_t);qe++,We(_t.readable,C,ct,{end:Je})}_t=C}else _t=S.from(C)}return(null!=Q&&Q.aborted||null!=H&&H.aborted)&&_.nextTick(M),_t}function oe(z,Le,Ye,{end:he}){let Q=!1;if(Le.on("close",()=>{Q||Ye(new K)}),z.pipe(Le,{end:!1}),he){let D=function(){Q=!0,Le.end()};Re(z)?_.nextTick(D):z.once("end",D)}else Ye();return N(z,{readable:!0,writable:!1},D=>{const M=z._readableState;D&&"ERR_STREAM_PREMATURE_CLOSE"===D.code&&M&&M.ended&&!M.errored&&!M.errorEmitted?z.once("end",Ye).once("error",Ye):Ye(D)}),N(Le,{readable:!1,writable:!0},Ye)}te.exports={pipelineImpl:O,pipeline:function G(...z){return O(z,U(function ke(z){return x(z[z.length-1],"streams[stream.length - 1]"),z.pop()}(z)))}}},8383:(te,Z,g)=>{var E=g(6737).default,b=g(8186).default;const k=g(42),{ArrayPrototypeIndexOf:A,NumberIsInteger:P,NumberIsNaN:_,NumberParseInt:y,ObjectDefineProperties:T,ObjectKeys:F,ObjectSetPrototypeOf:N,Promise:U,SafeSet:se,SymbolAsyncIterator:S,Symbol:$}=g(6305);te.exports=Ke,Ke.ReadableState=Ae;const{EventEmitter:ce}=g(2016),{Stream:X,prependListener:ie}=g(900),{Buffer:ee}=g(1657),{addAbortSignal:K}=g(9987),V=g(4618);let x=g(2656).debuglog("stream",C=>{x=C});const B=g(2960),I=g(5601),{getHighWaterMark:ue,getDefaultHighWaterMark:W}=g(8782),{aggregateTwoErrors:Ce,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:xe,ERR_OUT_OF_RANGE:Ie,ERR_STREAM_PUSH_AFTER_EOF:Re,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:et}}=g(4370),{validateObject:Xe}=g(2120),Se=$("kPaused"),{StringDecoder:Ne}=g(2024),ke=g(55);N(Ke.prototype,X.prototype),N(Ke,X);const Ve=()=>{},{errorOrDestroy:me}=I;function Ae(C,ae,He){"boolean"!=typeof He&&(He=ae instanceof g(5931)),this.objectMode=!(!C||!C.objectMode),He&&(this.objectMode=this.objectMode||!(!C||!C.readableObjectMode)),this.highWaterMark=C?ue(this,C,"readableHighWaterMark",He):W(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Se]=null,this.errorEmitted=!1,this.emitClose=!C||!1!==C.emitClose,this.autoDestroy=!C||!1!==C.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=C&&C.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,C&&C.encoding&&(this.decoder=new Ne(C.encoding),this.encoding=C.encoding)}function Ke(C){if(!(this instanceof Ke))return new Ke(C);const ae=this instanceof g(5931);this._readableState=new Ae(C,this,ae),C&&("function"==typeof C.read&&(this._read=C.read),"function"==typeof C.destroy&&(this._destroy=C.destroy),"function"==typeof C.construct&&(this._construct=C.construct),C.signal&&!ae&&K(C.signal,this)),X.call(this,C),I.construct(this,()=>{this._readableState.needReadable&&Ye(this,this._readableState)})}function ot(C,ae,He,Je){x("readableAddChunk",ae);const st=C._readableState;let $t;if(st.objectMode||("string"==typeof ae?st.encoding!==(He=He||st.defaultEncoding)&&(Je&&st.encoding?ae=ee.from(ae,He).toString(st.encoding):(ae=ee.from(ae,He),He="")):ae instanceof ee?He="":X._isUint8Array(ae)?(ae=X._uint8ArrayToBuffer(ae),He=""):null!=ae&&($t=new le("chunk",["string","Buffer","Uint8Array"],ae))),$t)me(C,$t);else if(null===ae)st.reading=!1,function oe(C,ae){if(x("onEofChunk"),!ae.ended){if(ae.decoder){const He=ae.decoder.end();He&&He.length&&(ae.buffer.push(He),ae.length+=ae.objectMode?1:He.length)}ae.ended=!0,ae.sync?z(C):(ae.needReadable=!1,ae.emittedReadable=!0,Le(C))}}(C,st);else if(st.objectMode||ae&&ae.length>0)if(Je)if(st.endEmitted)me(C,new et);else{if(st.destroyed||st.errored)return!1;We(C,st,ae,!0)}else if(st.ended)me(C,new Re);else{if(st.destroyed||st.errored)return!1;st.reading=!1,st.decoder&&!He?(ae=st.decoder.write(ae),st.objectMode||0!==ae.length?We(C,st,ae,!1):Ye(C,st)):We(C,st,ae,!1)}else Je||(st.reading=!1,Ye(C,st));return!st.ended&&(st.length<st.highWaterMark||0===st.length)}function We(C,ae,He,Je){ae.flowing&&0===ae.length&&!ae.sync&&C.listenerCount("data")>0?(ae.multiAwaitDrain?ae.awaitDrainWriters.clear():ae.awaitDrainWriters=null,ae.dataEmitted=!0,C.emit("data",He)):(ae.length+=ae.objectMode?1:He.length,Je?ae.buffer.unshift(He):ae.buffer.push(He),ae.needReadable&&z(C)),Ye(C,ae)}function O(C,ae){return C<=0||0===ae.length&&ae.ended?0:ae.objectMode?1:_(C)?ae.flowing&&ae.length?ae.buffer.first().length:ae.length:C<=ae.length?C:ae.ended?ae.length:0}function z(C){const ae=C._readableState;x("emitReadable",ae.needReadable,ae.emittedReadable),ae.needReadable=!1,ae.emittedReadable||(x("emitReadable",ae.flowing),ae.emittedReadable=!0,k.nextTick(Le,C))}function Le(C){const ae=C._readableState;x("emitReadable_",ae.destroyed,ae.length,ae.ended),!ae.destroyed&&!ae.errored&&(ae.length||ae.ended)&&(C.emit("readable"),ae.emittedReadable=!1),ae.needReadable=!ae.flowing&&!ae.ended&&ae.length<=ae.highWaterMark,ge(C)}function Ye(C,ae){!ae.readingMore&&ae.constructed&&(ae.readingMore=!0,k.nextTick(he,C,ae))}function he(C,ae){for(;!ae.reading&&!ae.ended&&(ae.length<ae.highWaterMark||ae.flowing&&0===ae.length);){const He=ae.length;if(x("maybeReadMore read 0"),C.read(0),He===ae.length)break}ae.readingMore=!1}function H(C){const ae=C._readableState;ae.readableListening=C.listenerCount("readable")>0,ae.resumeScheduled&&!1===ae[Se]?ae.flowing=!0:C.listenerCount("data")>0?C.resume():ae.readableListening||(ae.flowing=null)}function D(C){x("readable nexttick read 0"),C.read(0)}function de(C,ae){x("resume",ae.reading),ae.reading||C.read(0),ae.resumeScheduled=!1,C.emit("resume"),ge(C),ae.flowing&&!ae.reading&&C.read(0)}function ge(C){const ae=C._readableState;for(x("flow",ae.flowing);ae.flowing&&null!==C.read(););}function ze(C,ae){"function"!=typeof C.read&&(C=Ke.wrap(C,{objectMode:!0}));const He=function qe(C,ae){return ct.apply(this,arguments)}(C,ae);return He.stream=C,He}function ct(){return(ct=b(function*(C,ae){let st,He=Ve;function Je(cn){this===C?(He(),He=Ve):He=cn}C.on("readable",Je);const $t=V(C,{writable:!1},cn=>{st=cn?Ce(st,cn):null,He(),He=Ve});try{for(;;){const cn=C.destroyed?null:C.read();if(null!==cn)yield cn;else{if(st)throw st;if(null===st)return;yield E(new U(Je))}}}catch(cn){throw st=Ce(st,cn),st}finally{!st&&!1===ae?.destroyOnReturn||void 0!==st&&!C._readableState.autoDestroy?(C.off("readable",Je),$t()):I.destroyer(C,null)}})).apply(this,arguments)}function Dt(C,ae){if(0===ae.length)return null;let He;return ae.objectMode?He=ae.buffer.shift():!C||C>=ae.length?(He=ae.decoder?ae.buffer.join(""):1===ae.buffer.length?ae.buffer.first():ae.buffer.concat(ae.length),ae.buffer.clear()):He=ae.buffer.consume(C,ae.decoder),He}function _t(C){const ae=C._readableState;x("endReadable",ae.endEmitted),ae.endEmitted||(ae.ended=!0,k.nextTick(Ht,ae,C))}function Ht(C,ae){if(x("endReadableNT",C.endEmitted,C.length),!C.errored&&!C.closeEmitted&&!C.endEmitted&&0===C.length)if(C.endEmitted=!0,ae.emit("end"),ae.writable&&!1===ae.allowHalfOpen)k.nextTick(nn,ae);else if(C.autoDestroy){const He=ae._writableState;(!He||He.autoDestroy&&(He.finished||!1===He.writable))&&ae.destroy()}}function nn(C){C.writable&&!C.writableEnded&&!C.destroyed&&C.end()}let Oe;function J(){return void 0===Oe&&(Oe={}),Oe}Ke.prototype.destroy=I.destroy,Ke.prototype._undestroy=I.undestroy,Ke.prototype._destroy=function(C,ae){ae(C)},Ke.prototype[ce.captureRejectionSymbol]=function(C){this.destroy(C)},Ke.prototype.push=function(C,ae){return ot(this,C,ae,!1)},Ke.prototype.unshift=function(C,ae){return ot(this,C,ae,!0)},Ke.prototype.isPaused=function(){const C=this._readableState;return!0===C[Se]||!1===C.flowing},Ke.prototype.setEncoding=function(C){const ae=new Ne(C);this._readableState.decoder=ae,this._readableState.encoding=this._readableState.decoder.encoding;const He=this._readableState.buffer;let Je="";for(const st of He)Je+=ae.write(st);return He.clear(),""!==Je&&He.push(Je),this._readableState.length=Je.length,this},Ke.prototype.read=function(C){x("read",C),void 0===C?C=NaN:P(C)||(C=y(C,10));const ae=this._readableState,He=C;if(C>ae.highWaterMark&&(ae.highWaterMark=function G(C){if(C>1073741824)throw new Ie("size","<= 1GiB",C);return C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,++C}(C)),0!==C&&(ae.emittedReadable=!1),0===C&&ae.needReadable&&((0!==ae.highWaterMark?ae.length>=ae.highWaterMark:ae.length>0)||ae.ended))return x("read: emitReadable",ae.length,ae.ended),0===ae.length&&ae.ended?_t(this):z(this),null;if(0===(C=O(C,ae))&&ae.ended)return 0===ae.length&&_t(this),null;let st,Je=ae.needReadable;if(x("need readable",Je),(0===ae.length||ae.length-C<ae.highWaterMark)&&(Je=!0,x("length less than watermark",Je)),ae.ended||ae.reading||ae.destroyed||ae.errored||!ae.constructed)Je=!1,x("reading, ended or constructing",Je);else if(Je){x("do read"),ae.reading=!0,ae.sync=!0,0===ae.length&&(ae.needReadable=!0);try{this._read(ae.highWaterMark)}catch($t){me(this,$t)}ae.sync=!1,ae.reading||(C=O(He,ae))}return st=C>0?Dt(C,ae):null,null===st?(ae.needReadable=ae.length<=ae.highWaterMark,C=0):(ae.length-=C,ae.multiAwaitDrain?ae.awaitDrainWriters.clear():ae.awaitDrainWriters=null),0===ae.length&&(ae.ended||(ae.needReadable=!0),He!==C&&ae.ended&&_t(this)),null!==st&&!ae.errorEmitted&&!ae.closeEmitted&&(ae.dataEmitted=!0,this.emit("data",st)),st},Ke.prototype._read=function(C){throw new xe("_read()")},Ke.prototype.pipe=function(C,ae){const He=this,Je=this._readableState;1===Je.pipes.length&&(Je.multiAwaitDrain||(Je.multiAwaitDrain=!0,Je.awaitDrainWriters=new se(Je.awaitDrainWriters?[Je.awaitDrainWriters]:[]))),Je.pipes.push(C),x("pipe count=%d opts=%j",Je.pipes.length,ae);const $t=ae&&!1===ae.end||C===k.stdout||C===k.stderr?Xo:Yn;function Yn(){x("onend"),C.end()}Je.endEmitted?k.nextTick($t):He.once("end",$t),C.on("unpipe",function cn(Ns,Ss){x("onunpipe"),Ns===He&&Ss&&!1===Ss.hasUnpiped&&(Ss.hasUnpiped=!0,function As(){x("cleanup"),C.removeListener("close",ts),C.removeListener("finish",So),Wn&&C.removeListener("drain",Wn),C.removeListener("error",Yi),C.removeListener("unpipe",cn),He.removeListener("end",Yn),He.removeListener("end",Xo),He.removeListener("data",Ps),gn=!0,Wn&&Je.awaitDrainWriters&&(!C._writableState||C._writableState.needDrain)&&Wn()}())});let Wn,gn=!1;function $o(){gn||(1===Je.pipes.length&&Je.pipes[0]===C?(x("false write response, pause",0),Je.awaitDrainWriters=C,Je.multiAwaitDrain=!1):Je.pipes.length>1&&Je.pipes.includes(C)&&(x("false write response, pause",Je.awaitDrainWriters.size),Je.awaitDrainWriters.add(C)),He.pause()),Wn||(Wn=function Q(C,ae){return function(){const Je=C._readableState;Je.awaitDrainWriters===ae?(x("pipeOnDrain",1),Je.awaitDrainWriters=null):Je.multiAwaitDrain&&(x("pipeOnDrain",Je.awaitDrainWriters.size),Je.awaitDrainWriters.delete(ae)),(!Je.awaitDrainWriters||0===Je.awaitDrainWriters.size)&&C.listenerCount("data")&&C.resume()}}(He,C),C.on("drain",Wn))}function Ps(Ns){x("ondata");const Ss=C.write(Ns);x("dest.write",Ss),!1===Ss&&$o()}function Yi(Ns){if(x("onerror",Ns),Xo(),C.removeListener("error",Yi),0===C.listenerCount("error")){const Ss=C._writableState||C._readableState;Ss&&!Ss.errorEmitted?me(C,Ns):C.emit("error",Ns)}}function ts(){C.removeListener("finish",So),Xo()}function So(){x("onfinish"),C.removeListener("close",ts),Xo()}function Xo(){x("unpipe"),He.unpipe(C)}return He.on("data",Ps),ie(C,"error",Yi),C.once("close",ts),C.once("finish",So),C.emit("pipe",He),!0===C.writableNeedDrain?Je.flowing&&$o():Je.flowing||(x("pipe resume"),He.resume()),C},Ke.prototype.unpipe=function(C){const ae=this._readableState;if(0===ae.pipes.length)return this;if(!C){const st=ae.pipes;ae.pipes=[],this.pause();for(let $t=0;$t<st.length;$t++)st[$t].emit("unpipe",this,{hasUnpiped:!1});return this}const Je=A(ae.pipes,C);return-1===Je||(ae.pipes.splice(Je,1),0===ae.pipes.length&&this.pause(),C.emit("unpipe",this,{hasUnpiped:!1})),this},Ke.prototype.addListener=Ke.prototype.on=function(C,ae){const He=X.prototype.on.call(this,C,ae),Je=this._readableState;return"data"===C?(Je.readableListening=this.listenerCount("readable")>0,!1!==Je.flowing&&this.resume()):"readable"===C&&!Je.endEmitted&&!Je.readableListening&&(Je.readableListening=Je.needReadable=!0,Je.flowing=!1,Je.emittedReadable=!1,x("on readable",Je.length,Je.reading),Je.length?z(this):Je.reading||k.nextTick(D,this)),He},Ke.prototype.off=Ke.prototype.removeListener=function(C,ae){const He=X.prototype.removeListener.call(this,C,ae);return"readable"===C&&k.nextTick(H,this),He},Ke.prototype.removeAllListeners=function(C){const ae=X.prototype.removeAllListeners.apply(this,arguments);return("readable"===C||void 0===C)&&k.nextTick(H,this),ae},Ke.prototype.resume=function(){const C=this._readableState;return C.flowing||(x("resume"),C.flowing=!C.readableListening,function M(C,ae){ae.resumeScheduled||(ae.resumeScheduled=!0,k.nextTick(de,C,ae))}(this,C)),C[Se]=!1,this},Ke.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Se]=!0,this},Ke.prototype.wrap=function(C){let ae=!1;C.on("data",Je=>{!this.push(Je)&&C.pause&&(ae=!0,C.pause())}),C.on("end",()=>{this.push(null)}),C.on("error",Je=>{me(this,Je)}),C.on("close",()=>{this.destroy()}),C.on("destroy",()=>{this.destroy()}),this._read=()=>{ae&&C.resume&&(ae=!1,C.resume())};const He=F(C);for(let Je=1;Je<He.length;Je++){const st=He[Je];void 0===this[st]&&"function"==typeof C[st]&&(this[st]=C[st].bind(C))}return this},Ke.prototype[S]=function(){return ze(this)},Ke.prototype.iterator=function(C){return void 0!==C&&Xe(C,"options"),ze(this,C)},T(Ke.prototype,{readable:{__proto__:null,get(){const C=this._readableState;return!(!C||!1===C.readable||C.destroyed||C.errorEmitted||C.endEmitted)},set(C){this._readableState&&(this._readableState.readable=!!C)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(C){this._readableState&&(this._readableState.flowing=C)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(C){this._readableState&&(this._readableState.destroyed=C)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),T(Ae.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Se]},set(C){this[Se]=!!C}}}),Ke._fromList=Dt,Ke.from=function(C,ae){return ke(Ke,C,ae)},Ke.fromWeb=function(C,ae){return J().newStreamReadableFromReadableStream(C,ae)},Ke.toWeb=function(C,ae){return J().newReadableStreamFromStreamReadable(C,ae)},Ke.wrap=function(C,ae){var He,Je;return new Ke({objectMode:null===(He=null!==(Je=C.readableObjectMode)&&void 0!==Je?Je:C.objectMode)||void 0===He||He,...ae,destroy(st,$t){I.destroyer(C,st),$t(st)}}).wrap(C)}},8782:(te,Z,g)=>{"use strict";const{MathFloor:E,NumberIsInteger:b}=g(6305),{ERR_INVALID_ARG_VALUE:k}=g(4370).codes;function P(y){return y?16:16384}te.exports={getHighWaterMark:function _(y,T,F,N){const U=function A(y,T,F){return null!=y.highWaterMark?y.highWaterMark:T?y[F]:null}(T,N,F);if(null!=U){if(!b(U)||U<0)throw new k(N?`options.${F}`:"options.highWaterMark",U);return E(U)}return P(y.objectMode)},getDefaultHighWaterMark:P}},123:(te,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:E,Symbol:b}=g(6305);te.exports=y;const{ERR_METHOD_NOT_IMPLEMENTED:k}=g(4370).codes,A=g(5931),{getHighWaterMark:P}=g(8782);E(y.prototype,A.prototype),E(y,A);const _=b("kCallback");function y(N){if(!(this instanceof y))return new y(N);const U=N?P(this,N,"readableHighWaterMark",!0):null;0===U&&(N={...N,highWaterMark:null,readableHighWaterMark:U,writableHighWaterMark:N.writableHighWaterMark||0}),A.call(this,N),this._readableState.sync=!1,this[_]=null,N&&("function"==typeof N.transform&&(this._transform=N.transform),"function"==typeof N.flush&&(this._flush=N.flush)),this.on("prefinish",F)}function T(N){"function"!=typeof this._flush||this.destroyed?(this.push(null),N&&N()):this._flush((U,se)=>{U?N?N(U):this.destroy(U):(null!=se&&this.push(se),this.push(null),N&&N())})}function F(){this._final!==T&&T.call(this)}y.prototype._final=T,y.prototype._transform=function(N,U,se){throw new k("_transform()")},y.prototype._write=function(N,U,se){const S=this._readableState,$=this._writableState,ce=S.length;this._transform(N,U,(X,ie)=>{X?se(X):(null!=ie&&this.push(ie),$.ended||ce===S.length||S.length<S.highWaterMark?se():this[_]=se)})},y.prototype._read=function(){if(this[_]){const N=this[_];this[_]=null,N()}}},5428:(te,Z,g)=>{"use strict";const{Symbol:E,SymbolAsyncIterator:b,SymbolIterator:k,SymbolFor:A}=g(6305),P=E("kDestroyed"),_=E("kIsErrored"),y=E("kIsReadable"),T=E("kIsDisturbed"),F=A("nodejs.webstream.isClosedPromise"),N=A("nodejs.webstream.controllerErrorFunction");function U(me,Ae=!1){var Ke;return!(!me||"function"!=typeof me.pipe||"function"!=typeof me.on||Ae&&("function"!=typeof me.pause||"function"!=typeof me.resume)||me._writableState&&!1===(null===(Ke=me._readableState)||void 0===Ke?void 0:Ke.readable)||me._writableState&&!me._readableState)}function se(me){var Ae;return!(!me||"function"!=typeof me.write||"function"!=typeof me.on||me._readableState&&!1===(null===(Ae=me._writableState)||void 0===Ae?void 0:Ae.writable))}function $(me){return me&&(me._readableState||me._writableState||"function"==typeof me.write&&"function"==typeof me.on||"function"==typeof me.pipe&&"function"==typeof me.on)}function ce(me){return!(!me||$(me)||"function"!=typeof me.pipeThrough||"function"!=typeof me.getReader||"function"!=typeof me.cancel)}function X(me){return!(!me||$(me)||"function"!=typeof me.getWriter||"function"!=typeof me.abort)}function ie(me){return!(!me||$(me)||"object"!=typeof me.readable||"object"!=typeof me.writable)}function V(me){if(!$(me))return null;const ot=me._writableState||me._readableState;return!!(me.destroyed||me[P]||null!=ot&&ot.destroyed)}function x(me){if(!se(me))return null;if(!0===me.writableEnded)return!0;const Ae=me._writableState;return(null==Ae||!Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)}function ue(me,Ae){if(!U(me))return null;const Ke=me._readableState;return(null==Ke||!Ke.errored)&&("boolean"!=typeof Ke?.endEmitted?null:!!(Ke.endEmitted||!1===Ae&&!0===Ke.ended&&0===Ke.length))}function W(me){return me&&null!=me[y]?me[y]:"boolean"!=typeof me?.readable?null:!V(me)&&U(me)&&me.readable&&!ue(me)}function Ce(me){return"boolean"!=typeof me?.writable?null:!V(me)&&se(me)&&me.writable&&!x(me)}function et(me){return"boolean"==typeof me._closed&&"boolean"==typeof me._defaultKeepAlive&&"boolean"==typeof me._removedConnection&&"boolean"==typeof me._removedContLen}function Xe(me){return"boolean"==typeof me._sent100&&et(me)}te.exports={kDestroyed:P,isDisturbed:function ke(me){var Ae;return!(!me||!(null!==(Ae=me[T])&&void 0!==Ae?Ae:me.readableDidRead||me.readableAborted))},kIsDisturbed:T,isErrored:function Ve(me){var Ae,Ke,ot,We,_e,G,O,oe,z,Le;return!(!me||!(null!==(Ae=null!==(Ke=null!==(ot=null!==(We=null!==(_e=null!==(G=me[_])&&void 0!==G?G:me.readableErrored)&&void 0!==_e?_e:me.writableErrored)&&void 0!==We?We:null===(O=me._readableState)||void 0===O?void 0:O.errorEmitted)&&void 0!==ot?ot:null===(oe=me._writableState)||void 0===oe?void 0:oe.errorEmitted)&&void 0!==Ke?Ke:null===(z=me._readableState)||void 0===z?void 0:z.errored)&&void 0!==Ae?Ae:null!==(Le=me._writableState)&&void 0!==Le&&Le.errored))},kIsErrored:_,isReadable:W,kIsReadable:y,kIsClosedPromise:F,kControllerErrorFunction:N,isClosed:function Re(me){if(!$(me))return null;if("boolean"==typeof me.closed)return me.closed;const Ae=me._writableState,Ke=me._readableState;return"boolean"==typeof Ae?.closed||"boolean"==typeof Ke?.closed?Ae?.closed||Ke?.closed:"boolean"==typeof me._closed&&et(me)?me._closed:null},isDestroyed:V,isDuplexNodeStream:function S(me){return!(!me||"function"!=typeof me.pipe||!me._readableState||"function"!=typeof me.on||"function"!=typeof me.write)},isFinished:function le(me,Ae){return $(me)?!!V(me)||!(!1!==Ae?.readable&&W(me)||!1!==Ae?.writable&&Ce(me)):null},isIterable:function K(me,Ae){return null!=me&&(!0===Ae?"function"==typeof me[b]:!1===Ae?"function"==typeof me[k]:"function"==typeof me[b]||"function"==typeof me[k])},isReadableNodeStream:U,isReadableStream:ce,isReadableEnded:function I(me){if(!U(me))return null;if(!0===me.readableEnded)return!0;const Ae=me._readableState;return!(!Ae||Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)},isReadableFinished:ue,isReadableErrored:function Ie(me){var Ae,Ke;return $(me)?me.readableErrored?me.readableErrored:null!==(Ae=null===(Ke=me._readableState)||void 0===Ke?void 0:Ke.errored)&&void 0!==Ae?Ae:null:null},isNodeStream:$,isWebStream:function ee(me){return ce(me)||X(me)||ie(me)},isWritable:Ce,isWritableNodeStream:se,isWritableStream:X,isWritableEnded:x,isWritableFinished:function B(me,Ae){if(!se(me))return null;if(!0===me.writableFinished)return!0;const Ke=me._writableState;return(null==Ke||!Ke.errored)&&("boolean"!=typeof Ke?.finished?null:!!(Ke.finished||!1===Ae&&!0===Ke.ended&&0===Ke.length))},isWritableErrored:function xe(me){var Ae,Ke;return $(me)?me.writableErrored?me.writableErrored:null!==(Ae=null===(Ke=me._writableState)||void 0===Ke?void 0:Ke.errored)&&void 0!==Ae?Ae:null:null},isServerRequest:function Se(me){var Ae;return"boolean"==typeof me._consuming&&"boolean"==typeof me._dumped&&void 0===(null===(Ae=me.req)||void 0===Ae?void 0:Ae.upgradeOrConnect)},isServerResponse:Xe,willEmitClose:function Ne(me){if(!$(me))return null;const ot=me._writableState||me._readableState;return!ot&&Xe(me)||!!(ot&&ot.autoDestroy&&ot.emitClose&&!1===ot.closed)},isTransformStream:ie}},9764:(te,Z,g)=>{const E=g(42),{ArrayPrototypeSlice:b,Error:k,FunctionPrototypeSymbolHasInstance:A,ObjectDefineProperty:P,ObjectDefineProperties:_,ObjectSetPrototypeOf:y,StringPrototypeToLowerCase:T,Symbol:F,SymbolHasInstance:N}=g(6305);te.exports=Xe,Xe.WritableState=Re;const{EventEmitter:U}=g(2016),se=g(900).Stream,{Buffer:S}=g(1657),$=g(5601),{addAbortSignal:ce}=g(9987),{getHighWaterMark:X,getDefaultHighWaterMark:ie}=g(8782),{ERR_INVALID_ARG_TYPE:ee,ERR_METHOD_NOT_IMPLEMENTED:K,ERR_MULTIPLE_CALLBACK:V,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:ue,ERR_STREAM_WRITE_AFTER_END:W,ERR_UNKNOWN_ENCODING:Ce}=g(4370).codes,{errorOrDestroy:le}=$;function xe(){}y(Xe.prototype,se.prototype),y(Xe,se);const Ie=F("kOnFinished");function Re(Q,H,D){"boolean"!=typeof D&&(D=H instanceof g(5931)),this.objectMode=!(!Q||!Q.objectMode),D&&(this.objectMode=this.objectMode||!(!Q||!Q.writableObjectMode)),this.highWaterMark=Q?X(this,Q,"writableHighWaterMark",D):ie(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Q&&!1===Q.decodeStrings),this.defaultEncoding=Q&&Q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=me.bind(void 0,H),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,et(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Q||!1!==Q.emitClose,this.autoDestroy=!Q||!1!==Q.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ie]=[]}function et(Q){Q.buffered=[],Q.bufferedIndex=0,Q.allBuffers=!0,Q.allNoop=!0}function Xe(Q){const H=this instanceof g(5931);if(!H&&!A(Xe,this))return new Xe(Q);this._writableState=new Re(Q,this,H),Q&&("function"==typeof Q.write&&(this._write=Q.write),"function"==typeof Q.writev&&(this._writev=Q.writev),"function"==typeof Q.destroy&&(this._destroy=Q.destroy),"function"==typeof Q.final&&(this._final=Q.final),"function"==typeof Q.construct&&(this._construct=Q.construct),Q.signal&&ce(Q.signal,this)),se.call(this,Q),$.construct(this,()=>{const D=this._writableState;D.writing||We(this,D),oe(this,D)})}function Se(Q,H,D,M){const de=Q._writableState;if("function"==typeof D)M=D,D=de.defaultEncoding;else{if(D){if("buffer"!==D&&!S.isEncoding(D))throw new Ce(D)}else D=de.defaultEncoding;"function"!=typeof M&&(M=xe)}if(null===H)throw new ue;if(!de.objectMode)if("string"==typeof H)!1!==de.decodeStrings&&(H=S.from(H,D),D="buffer");else if(H instanceof S)D="buffer";else{if(!se._isUint8Array(H))throw new ee("chunk",["string","Buffer","Uint8Array"],H);H=se._uint8ArrayToBuffer(H),D="buffer"}let ge;return de.ending?ge=new W:de.destroyed&&(ge=new B("write")),ge?(E.nextTick(M,ge),le(Q,ge,!0),ge):(de.pendingcb++,function Ne(Q,H,D,M,de){const ge=H.objectMode?1:D.length;H.length+=ge;const ze=H.length<H.highWaterMark;return ze||(H.needDrain=!0),H.writing||H.corked||H.errored||!H.constructed?(H.buffered.push({chunk:D,encoding:M,callback:de}),H.allBuffers&&"buffer"!==M&&(H.allBuffers=!1),H.allNoop&&de!==xe&&(H.allNoop=!1)):(H.writelen=ge,H.writecb=de,H.writing=!0,H.sync=!0,Q._write(D,M,H.onwrite),H.sync=!1),ze&&!H.errored&&!H.destroyed}(Q,de,H,D,M))}function ke(Q,H,D,M,de,ge,ze){H.writelen=M,H.writecb=ze,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new B("write")):D?Q._writev(de,H.onwrite):Q._write(de,ge,H.onwrite),H.sync=!1}function Ve(Q,H,D,M){--H.pendingcb,M(D),ot(H),le(Q,D)}function me(Q,H){const D=Q._writableState,M=D.sync,de=D.writecb;"function"==typeof de?(D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0,H?(D.errored||(D.errored=H),Q._readableState&&!Q._readableState.errored&&(Q._readableState.errored=H),M?E.nextTick(Ve,Q,D,H,de):Ve(Q,D,H,de)):(D.buffered.length>D.bufferedIndex&&We(Q,D),M?null!==D.afterWriteTickInfo&&D.afterWriteTickInfo.cb===de?D.afterWriteTickInfo.count++:(D.afterWriteTickInfo={count:1,cb:de,stream:Q,state:D},E.nextTick(Ae,D.afterWriteTickInfo)):Ke(Q,D,1,de))):le(Q,new V)}function Ae({stream:Q,state:H,count:D,cb:M}){return H.afterWriteTickInfo=null,Ke(Q,H,D,M)}function Ke(Q,H,D,M){for(!H.ending&&!Q.destroyed&&0===H.length&&H.needDrain&&(H.needDrain=!1,Q.emit("drain"));D-- >0;)H.pendingcb--,M();H.destroyed&&ot(H),oe(Q,H)}function ot(Q){if(Q.writing)return;for(let de=Q.bufferedIndex;de<Q.buffered.length;++de){var H;const{chunk:ge,callback:ze}=Q.buffered[de];Q.length-=Q.objectMode?1:ge.length,ze(null!==(H=Q.errored)&&void 0!==H?H:new B("write"))}const D=Q[Ie].splice(0);for(let de=0;de<D.length;de++){var M;D[de](null!==(M=Q.errored)&&void 0!==M?M:new B("end"))}et(Q)}function We(Q,H){if(H.corked||H.bufferProcessing||H.destroyed||!H.constructed)return;const{buffered:D,bufferedIndex:M,objectMode:de}=H,ge=D.length-M;if(!ge)return;let ze=M;if(H.bufferProcessing=!0,ge>1&&Q._writev){H.pendingcb-=ge-1;const qe=H.allNoop?xe:Dt=>{for(let _t=ze;_t<D.length;++_t)D[_t].callback(Dt)},ct=H.allNoop&&0===ze?D:b(D,ze);ct.allBuffers=H.allBuffers,ke(Q,H,!0,H.length,ct,"",qe),et(H)}else{do{const{chunk:qe,encoding:ct,callback:Dt}=D[ze];D[ze++]=null,ke(Q,H,!1,de?1:qe.length,qe,ct,Dt)}while(ze<D.length&&!H.writing);ze===D.length?et(H):ze>256?(D.splice(0,ze),H.bufferedIndex=0):H.bufferedIndex=ze}H.bufferProcessing=!1}function _e(Q){return Q.ending&&!Q.destroyed&&Q.constructed&&0===Q.length&&!Q.errored&&0===Q.buffered.length&&!Q.finished&&!Q.writing&&!Q.errorEmitted&&!Q.closeEmitted}function oe(Q,H,D){_e(H)&&(function O(Q,H){!H.prefinished&&!H.finalCalled&&("function"!=typeof Q._final||H.destroyed?(H.prefinished=!0,Q.emit("prefinish")):(H.finalCalled=!0,function G(Q,H){let D=!1;function M(de){if(D)le(Q,de??V());else if(D=!0,H.pendingcb--,de){const ge=H[Ie].splice(0);for(let ze=0;ze<ge.length;ze++)ge[ze](de);le(Q,de,H.sync)}else _e(H)&&(H.prefinished=!0,Q.emit("prefinish"),H.pendingcb++,E.nextTick(z,Q,H))}H.sync=!0,H.pendingcb++;try{Q._final(M)}catch(de){M(de)}H.sync=!1}(Q,H)))}(Q,H),0===H.pendingcb&&(D?(H.pendingcb++,E.nextTick((M,de)=>{_e(de)?z(M,de):de.pendingcb--},Q,H)):_e(H)&&(H.pendingcb++,z(Q,H))))}function z(Q,H){H.pendingcb--,H.finished=!0;const D=H[Ie].splice(0);for(let M=0;M<D.length;M++)D[M]();if(Q.emit("finish"),H.autoDestroy){const M=Q._readableState;(!M||M.autoDestroy&&(M.endEmitted||!1===M.readable))&&Q.destroy()}}Re.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},P(Re.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),P(Xe,N,{__proto__:null,value:function(Q){return!!A(this,Q)||this===Xe&&Q&&Q._writableState instanceof Re}}),Xe.prototype.pipe=function(){le(this,new x)},Xe.prototype.write=function(Q,H,D){return!0===Se(this,Q,H,D)},Xe.prototype.cork=function(){this._writableState.corked++},Xe.prototype.uncork=function(){const Q=this._writableState;Q.corked&&(Q.corked--,Q.writing||We(this,Q))},Xe.prototype.setDefaultEncoding=function(H){if("string"==typeof H&&(H=T(H)),!S.isEncoding(H))throw new Ce(H);return this._writableState.defaultEncoding=H,this},Xe.prototype._write=function(Q,H,D){if(!this._writev)throw new K("_write()");this._writev([{chunk:Q,encoding:H}],D)},Xe.prototype._writev=null,Xe.prototype.end=function(Q,H,D){const M=this._writableState;let de;if("function"==typeof Q?(D=Q,Q=null,H=null):"function"==typeof H&&(D=H,H=null),null!=Q){const ge=Se(this,Q,H);ge instanceof k&&(de=ge)}return M.corked&&(M.corked=1,this.uncork()),de||(M.errored||M.ending?M.finished?de=new I("end"):M.destroyed&&(de=new B("end")):(M.ending=!0,oe(this,M,!0),M.ended=!0)),"function"==typeof D&&(de||M.finished?E.nextTick(D,de):M[Ie].push(D)),this},_(Xe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Q){this._writableState&&(this._writableState.destroyed=Q)}},writable:{__proto__:null,get(){const Q=this._writableState;return!(!Q||!1===Q.writable||Q.destroyed||Q.errored||Q.ending||Q.ended)},set(Q){this._writableState&&(this._writableState.writable=!!Q)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Q=this._writableState;return!!Q&&!Q.destroyed&&!Q.ending&&Q.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Le=$.destroy;let Ye;function he(){return void 0===Ye&&(Ye={}),Ye}Xe.prototype.destroy=function(Q,H){const D=this._writableState;return!D.destroyed&&(D.bufferedIndex<D.buffered.length||D[Ie].length)&&E.nextTick(ot,D),Le.call(this,Q,H),this},Xe.prototype._undestroy=$.undestroy,Xe.prototype._destroy=function(Q,H){H(Q)},Xe.prototype[U.captureRejectionSymbol]=function(Q){this.destroy(Q)},Xe.fromWeb=function(Q,H){return he().newStreamWritableFromWritableStream(Q,H)},Xe.toWeb=function(Q){return he().newWritableStreamFromStreamWritable(Q)}},2120:(te,Z,g)=>{"use strict";const{ArrayIsArray:E,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:k,ArrayPrototypeMap:A,NumberIsInteger:P,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:y,NumberMIN_SAFE_INTEGER:T,NumberParseInt:F,ObjectPrototypeHasOwnProperty:N,RegExpPrototypeExec:U,String:se,StringPrototypeToUpperCase:S,StringPrototypeTrim:$}=g(6305),{hideStackFrames:ce,codes:{ERR_SOCKET_BAD_PORT:X,ERR_INVALID_ARG_TYPE:ie,ERR_INVALID_ARG_VALUE:ee,ERR_OUT_OF_RANGE:K,ERR_UNKNOWN_SIGNAL:V}}=g(4370),{normalizeEncoding:x}=g(2656),{isAsyncFunction:B,isArrayBufferView:I}=g(2656).types,ue={},le=/^[0-7]+$/,Re=ce((ge,ze,qe=T,ct=y)=>{if("number"!=typeof ge)throw new ie(ze,"number",ge);if(!P(ge))throw new K(ze,"an integer",ge);if(ge<qe||ge>ct)throw new K(ze,`>= ${qe} && <= ${ct}`,ge)}),et=ce((ge,ze,qe=-2147483648,ct=2147483647)=>{if("number"!=typeof ge)throw new ie(ze,"number",ge);if(!P(ge))throw new K(ze,"an integer",ge);if(ge<qe||ge>ct)throw new K(ze,`>= ${qe} && <= ${ct}`,ge)}),Xe=ce((ge,ze,qe=!1)=>{if("number"!=typeof ge)throw new ie(ze,"number",ge);if(!P(ge))throw new K(ze,"an integer",ge);const ct=qe?1:0,Dt=4294967295;if(ge<ct||ge>Dt)throw new K(ze,`>= ${ct} && <= ${Dt}`,ge)});function Se(ge,ze){if("string"!=typeof ge)throw new ie(ze,"string",ge)}const ke=ce((ge,ze,qe)=>{if(!b(qe,ge)){const Dt="must be one of: "+k(A(qe,_t=>"string"==typeof _t?`'${_t}'`:se(_t)),", ");throw new ee(ze,ge,Dt)}});function Ve(ge,ze){if("boolean"!=typeof ge)throw new ie(ze,"boolean",ge)}function me(ge,ze,qe){return null!=ge&&N(ge,ze)?ge[ze]:qe}const Ae=ce((ge,ze,qe=null)=>{const ct=me(qe,"allowArray",!1),Dt=me(qe,"allowFunction",!1);if(!me(qe,"nullable",!1)&&null===ge||!ct&&E(ge)||"object"!=typeof ge&&(!Dt||"function"!=typeof ge))throw new ie(ze,"Object",ge)}),Ke=ce((ge,ze)=>{if(null!=ge&&"object"!=typeof ge&&"function"!=typeof ge)throw new ie(ze,"a dictionary",ge)}),ot=ce((ge,ze,qe=0)=>{if(!E(ge))throw new ie(ze,"Array",ge);if(ge.length<qe)throw new ee(ze,ge,`must be longer than ${qe}`)}),O=ce((ge,ze="buffer")=>{if(!I(ge))throw new ie(ze,["Buffer","TypedArray","DataView"],ge)}),Le=ce((ge,ze)=>{if(void 0!==ge&&(null===ge||"object"!=typeof ge||!("aborted"in ge)))throw new ie(ze,"AbortSignal",ge)}),Ye=ce((ge,ze)=>{if("function"!=typeof ge)throw new ie(ze,"Function",ge)}),he=ce((ge,ze)=>{if("function"!=typeof ge||B(ge))throw new ie(ze,"Function",ge)}),Q=ce((ge,ze)=>{if(void 0!==ge)throw new ie(ze,"undefined",ge)}),D=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function M(ge,ze){if(typeof ge>"u"||!U(D,ge))throw new ee(ze,ge,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}te.exports={isInt32:function W(ge){return ge===(0|ge)},isUint32:function Ce(ge){return ge===ge>>>0},parseFileMode:function Ie(ge,ze,qe){if(typeof ge>"u"&&(ge=qe),"string"==typeof ge){if(null===U(le,ge))throw new ee(ze,ge,"must be a 32-bit unsigned integer or an octal string");ge=F(ge,8)}return Xe(ge,ze),ge},validateArray:ot,validateStringArray:function We(ge,ze){ot(ge,ze);for(let qe=0;qe<ge.length;qe++)Se(ge[qe],`${ze}[${qe}]`)},validateBooleanArray:function _e(ge,ze){ot(ge,ze);for(let qe=0;qe<ge.length;qe++)Ve(ge[qe],`${ze}[${qe}]`)},validateBoolean:Ve,validateBuffer:O,validateDictionary:Ke,validateEncoding:function oe(ge,ze){const qe=x(ze),ct=ge.length;if("hex"===qe&&ct%2!=0)throw new ee("encoding",ze,`is invalid for data of length ${ct}`)},validateFunction:Ye,validateInt32:et,validateInteger:Re,validateNumber:function Ne(ge,ze,qe=void 0,ct){if("number"!=typeof ge)throw new ie(ze,"number",ge);if(null!=qe&&ge<qe||null!=ct&&ge>ct||(null!=qe||null!=ct)&&_(ge))throw new K(ze,`${null!=qe?`>= ${qe}`:""}${null!=qe&&null!=ct?" && ":""}${null!=ct?`<= ${ct}`:""}`,ge)},validateObject:Ae,validateOneOf:ke,validatePlainFunction:he,validatePort:function z(ge,ze="Port",qe=!0){if("number"!=typeof ge&&"string"!=typeof ge||"string"==typeof ge&&0===$(ge).length||+ge!=+ge>>>0||ge>65535||0===ge&&!qe)throw new X(ze,ge,qe);return 0|ge},validateSignalName:function G(ge,ze="signal"){if(Se(ge,ze),void 0===ue[ge])throw void 0!==ue[S(ge)]?new V(ge+" (signals must use all capital letters)"):new V(ge)},validateString:Se,validateUint32:Xe,validateUndefined:Q,validateUnion:function H(ge,ze,qe){if(!b(qe,ge))throw new ie(ze,`('${k(qe,"|")}')`,ge)},validateAbortSignal:Le,validateLinkHeaderValue:function de(ge){if("string"==typeof ge)return M(ge,"hints"),ge;if(E(ge)){const ze=ge.length;let qe="";if(0===ze)return qe;for(let ct=0;ct<ze;ct++){const Dt=ge[ct];M(Dt,"hints"),qe+=Dt,ct!==ze-1&&(qe+=", ")}return qe}throw new ee("hints",ge,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(te,Z,g)=>{"use strict";const E=g(8110),b=g(16),k=E.Readable.destroy;te.exports=E.Readable,te.exports._uint8ArrayToBuffer=E._uint8ArrayToBuffer,te.exports._isUint8Array=E._isUint8Array,te.exports.isDisturbed=E.isDisturbed,te.exports.isErrored=E.isErrored,te.exports.isReadable=E.isReadable,te.exports.Readable=E.Readable,te.exports.Writable=E.Writable,te.exports.Duplex=E.Duplex,te.exports.Transform=E.Transform,te.exports.PassThrough=E.PassThrough,te.exports.addAbortSignal=E.addAbortSignal,te.exports.finished=E.finished,te.exports.destroy=E.destroy,te.exports.destroy=k,te.exports.pipeline=E.pipeline,te.exports.compose=E.compose,Object.defineProperty(E,"promises",{configurable:!0,enumerable:!0,get:()=>b}),te.exports.Stream=E.Stream,te.exports.default=te.exports},4370:(te,Z,g)=>{"use strict";const{format:E,inspect:b,AggregateError:k}=g(2656),A=globalThis.AggregateError||k,P=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],y=/^([A-Z][a-z0-9]*)+$/,F={};function N(ie,ee){if(!ie)throw new F.ERR_INTERNAL_ASSERTION(ee)}function U(ie){let ee="",K=ie.length;const V="-"===ie[0]?1:0;for(;K>=V+4;K-=3)ee=`_${ie.slice(K-3,K)}${ee}`;return`${ie.slice(0,K)}${ee}`}function S(ie,ee,K){K||(K=Error);class V extends K{constructor(...B){super(function se(ie,ee,K){if("function"==typeof ee)return N(ee.length<=K.length,`Code: ${ie}; The provided arguments length (${K.length}) does not match the required ones (${ee.length}).`),ee(...K);const V=(ee.match(/%[dfijoOs]/g)||[]).length;return N(V===K.length,`Code: ${ie}; The provided arguments length (${K.length}) does not match the required ones (${V}).`),0===K.length?ee:E(ee,...K)}(ie,ee,B))}toString(){return`${this.name} [${ie}]: ${this.message}`}}Object.defineProperties(V.prototype,{name:{value:K.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${ie}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),V.prototype.code=ie,V.prototype[P]=!0,F[ie]=V}function $(ie){return Object.defineProperty(ie,"name",{value:"__node_internal_"+ie.name}),ie}class X extends Error{constructor(ee="The operation was aborted",K=void 0){if(void 0!==K&&"object"!=typeof K)throw new F.ERR_INVALID_ARG_TYPE("options","Object",K);super(ee,K),this.code="ABORT_ERR",this.name="AbortError"}}S("ERR_ASSERTION","%s",Error),S("ERR_INVALID_ARG_TYPE",(ie,ee,K)=>{N("string"==typeof ie,"'name' must be a string"),Array.isArray(ee)||(ee=[ee]);let V="The ";ie.endsWith(" argument")?V+=`${ie} `:V+=`"${ie}" ${ie.includes(".")?"property":"argument"} `,V+="must be ";const x=[],B=[],I=[];for(const W of ee)N("string"==typeof W,"All expected entries have to be of type string"),_.includes(W)?x.push(W.toLowerCase()):y.test(W)?B.push(W):(N("object"!==W,'The value "object" should be written as "Object"'),I.push(W));if(B.length>0){const W=x.indexOf("object");-1!==W&&(x.splice(x,W,1),B.push("Object"))}if(x.length>0){switch(x.length){case 1:V+=`of type ${x[0]}`;break;case 2:V+=`one of type ${x[0]} or ${x[1]}`;break;default:{const W=x.pop();V+=`one of type ${x.join(", ")}, or ${W}`}}(B.length>0||I.length>0)&&(V+=" or ")}if(B.length>0){switch(B.length){case 1:V+=`an instance of ${B[0]}`;break;case 2:V+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const W=B.pop();V+=`an instance of ${B.join(", ")}, or ${W}`}}I.length>0&&(V+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(V+="an "),V+=`${I[0]}`;break;case 2:V+=`one of ${I[0]} or ${I[1]}`;break;default:{const W=I.pop();V+=`one of ${I.join(", ")}, or ${W}`}}if(null==K)V+=`. Received ${K}`;else if("function"==typeof K&&K.name)V+=`. Received function ${K.name}`;else if("object"==typeof K){var ue;null!==(ue=K.constructor)&&void 0!==ue&&ue.name?V+=`. Received an instance of ${K.constructor.name}`:V+=`. Received ${b(K,{depth:-1})}`}else{let W=b(K,{colors:!1});W.length>25&&(W=`${W.slice(0,25)}...`),V+=`. Received type ${typeof K} (${W})`}return V},TypeError),S("ERR_INVALID_ARG_VALUE",(ie,ee,K="is invalid")=>{let V=b(ee);return V.length>128&&(V=V.slice(0,128)+"..."),`The ${ie.includes(".")?"property":"argument"} '${ie}' ${K}. Received ${V}`},TypeError),S("ERR_INVALID_RETURN_VALUE",(ie,ee,K)=>{var V;return`Expected ${ie} to be returned from the "${ee}" function but got ${null!=K&&null!==(V=K.constructor)&&void 0!==V&&V.name?`instance of ${K.constructor.name}`:"type "+typeof K}.`},TypeError),S("ERR_MISSING_ARGS",(...ie)=>{let ee;N(ie.length>0,"At least one arg needs to be specified");const K=ie.length;switch(ie=(Array.isArray(ie)?ie:[ie]).map(V=>`"${V}"`).join(" or "),K){case 1:ee+=`The ${ie[0]} argument`;break;case 2:ee+=`The ${ie[0]} and ${ie[1]} arguments`;break;default:{const V=ie.pop();ee+=`The ${ie.join(", ")}, and ${V} arguments`}}return`${ee} must be specified`},TypeError),S("ERR_OUT_OF_RANGE",(ie,ee,K)=>{let V;return N(ee,'Missing "range" argument'),Number.isInteger(K)&&Math.abs(K)>2**32?V=U(String(K)):"bigint"==typeof K?(V=String(K),(K>2n**32n||K<-(2n**32n))&&(V=U(V)),V+="n"):V=b(K),`The value of "${ie}" is out of range. It must be ${ee}. Received ${V}`},RangeError),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),S("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),S("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),S("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),S("ERR_STREAM_WRITE_AFTER_END","write after end",Error),S("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),te.exports={AbortError:X,aggregateTwoErrors:$(function ce(ie,ee){if(ie&&ee&&ie!==ee){if(Array.isArray(ee.errors))return ee.errors.push(ie),ee;const K=new A([ee,ie],ee.message);return K.code=ee.code,K}return ie||ee}),hideStackFrames:$,codes:F}},6305:te=>{"use strict";te.exports={ArrayIsArray:Z=>Array.isArray(Z),ArrayPrototypeIncludes:(Z,g)=>Z.includes(g),ArrayPrototypeIndexOf:(Z,g)=>Z.indexOf(g),ArrayPrototypeJoin:(Z,g)=>Z.join(g),ArrayPrototypeMap:(Z,g)=>Z.map(g),ArrayPrototypePop:(Z,g)=>Z.pop(g),ArrayPrototypePush:(Z,g)=>Z.push(g),ArrayPrototypeSlice:(Z,g,E)=>Z.slice(g,E),Error,FunctionPrototypeCall:(Z,g,...E)=>Z.call(g,...E),FunctionPrototypeSymbolHasInstance:(Z,g)=>Function.prototype[Symbol.hasInstance].call(Z,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(Z,g)=>Object.defineProperties(Z,g),ObjectDefineProperty:(Z,g,E)=>Object.defineProperty(Z,g,E),ObjectGetOwnPropertyDescriptor:(Z,g)=>Object.getOwnPropertyDescriptor(Z,g),ObjectKeys:Z=>Object.keys(Z),ObjectSetPrototypeOf:(Z,g)=>Object.setPrototypeOf(Z,g),Promise,PromisePrototypeCatch:(Z,g)=>Z.catch(g),PromisePrototypeThen:(Z,g,E)=>Z.then(g,E),PromiseReject:Z=>Promise.reject(Z),ReflectApply:Reflect.apply,RegExpPrototypeTest:(Z,g)=>Z.test(g),SafeSet:Set,String,StringPrototypeSlice:(Z,g,E)=>Z.slice(g,E),StringPrototypeToLowerCase:Z=>Z.toLowerCase(),StringPrototypeToUpperCase:Z=>Z.toUpperCase(),StringPrototypeTrim:Z=>Z.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(Z,g,E)=>Z.set(g,E),Uint8Array}},2656:(te,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1657),k=Object.getPrototypeOf(E(function*(){})).constructor,A=globalThis.Blob||b.Blob,P=typeof A<"u"?function(T){return T instanceof A}:function(T){return!1};class _ extends Error{constructor(T){if(!Array.isArray(T))throw new TypeError("Expected input to be an Array, got "+typeof T);let F="";for(let N=0;N<T.length;N++)F+=`    ${T[N].stack}\n`;super(F),this.name="AggregateError",this.errors=T}}te.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(y){let T=!1;return function(...F){T||(T=!0,y.apply(this,F))}},createDeferredPromise:function(){let y,T;return{promise:new Promise((N,U)=>{y=N,T=U}),resolve:y,reject:T}},promisify:y=>new Promise((T,F)=>{y((N,...U)=>N?F(N):T(...U))}),debuglog:()=>function(){},format:(y,...T)=>y.replace(/%([sdifj])/g,function(...[F,N]){const U=T.shift();return"f"===N?U.toFixed(6):"j"===N?JSON.stringify(U):"s"===N&&"object"==typeof U?`${U.constructor!==Object?U.constructor.name:""} {}`.trim():U.toString()}),inspect(y){switch(typeof y){case"string":if(y.includes("'")){if(!y.includes('"'))return`"${y}"`;if(!y.includes("`")&&!y.includes("${"))return`\`${y}\``}return`'${y}'`;case"number":return isNaN(y)?"NaN":Object.is(y,-0)?String(y):y;case"bigint":return`${String(y)}n`;case"boolean":case"undefined":return String(y);case"object":return"{}"}},types:{isAsyncFunction:y=>y instanceof k,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:P},te.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(te,Z,g)=>{const{Buffer:E}=g(1657),{ObjectDefineProperty:b,ObjectKeys:k,ReflectApply:A}=g(6305),{promisify:{custom:P}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:y}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:T}}=g(4370),F=g(7721),{pipeline:N}=g(4514),{destroyer:U}=g(5601),se=g(4618),$=g(16),ce=g(5428),X=te.exports=g(900).Stream;X.isDisturbed=ce.isDisturbed,X.isErrored=ce.isErrored,X.isReadable=ce.isReadable,X.Readable=g(8383);for(const K of k(_)){let x=function(...B){if(new.target)throw T();return X.Readable.from(A(V,this,B))};const V=_[K];b(x,"name",{__proto__:null,value:V.name}),b(x,"length",{__proto__:null,value:V.length}),b(X.Readable.prototype,K,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}for(const K of k(y)){let x=function(...I){if(new.target)throw T();return A(V,this,I)};const V=y[K];b(x,"name",{__proto__:null,value:V.name}),b(x,"length",{__proto__:null,value:V.length}),b(X.Readable.prototype,K,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}X.Writable=g(9764),X.Duplex=g(5931),X.Transform=g(123),X.PassThrough=g(6973),X.pipeline=N;const{addAbortSignal:ie}=g(9987);X.addAbortSignal=ie,X.finished=se,X.destroy=U,X.compose=F,b(X,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>$}),b(N,P,{__proto__:null,enumerable:!0,get:()=>$.pipeline}),b(se,P,{__proto__:null,enumerable:!0,get:()=>$.finished}),X.Stream=X,X._isUint8Array=function(V){return V instanceof Uint8Array},X._uint8ArrayToBuffer=function(V){return E.from(V.buffer,V.byteOffset,V.byteLength)}},16:(te,Z,g)=>{"use strict";const{ArrayPrototypePop:E,Promise:b}=g(6305),{isIterable:k,isNodeStream:A,isWebStream:P}=g(5428),{pipelineImpl:_}=g(4514),{finished:y}=g(4618);g(8110),te.exports={finished:y,pipeline:function T(...F){return new b((N,U)=>{let se,S;const $=F[F.length-1];if($&&"object"==typeof $&&!A($)&&!k($)&&!P($)){const ce=E(F);se=ce.signal,S=ce.end}_(F,(ce,X)=>{ce?U(ce):N(X)},{signal:se,end:S})})}}},1657:(te,Z,g)=>{"use strict";const E=g(9919),b=g(2601),k="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Z.Buffer=y,Z.SlowBuffer=function ee(Oe){return+Oe!=Oe&&(Oe=0),y.alloc(+Oe)},Z.INSPECT_MAX_BYTES=50;const A=2147483647;function _(Oe){if(Oe>A)throw new RangeError('The value "'+Oe+'" is invalid for option "size"');const J=new Uint8Array(Oe);return Object.setPrototypeOf(J,y.prototype),J}function y(Oe,J,C){if("number"==typeof Oe){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return U(Oe)}return T(Oe,J,C)}function T(Oe,J,C){if("string"==typeof Oe)return function se(Oe,J){if(("string"!=typeof J||""===J)&&(J="utf8"),!y.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const C=0|K(Oe,J);let ae=_(C);const He=ae.write(Oe,J);return He!==C&&(ae=ae.slice(0,He)),ae}(Oe,J);if(ArrayBuffer.isView(Oe))return function $(Oe){if(ct(Oe,Uint8Array)){const J=new Uint8Array(Oe);return ce(J.buffer,J.byteOffset,J.byteLength)}return S(Oe)}(Oe);if(null==Oe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Oe);if(ct(Oe,ArrayBuffer)||Oe&&ct(Oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ct(Oe,SharedArrayBuffer)||Oe&&ct(Oe.buffer,SharedArrayBuffer)))return ce(Oe,J,C);if("number"==typeof Oe)throw new TypeError('The "value" argument must not be of type number. Received type number');const ae=Oe.valueOf&&Oe.valueOf();if(null!=ae&&ae!==Oe)return y.from(ae,J,C);const He=function X(Oe){if(y.isBuffer(Oe)){const J=0|ie(Oe.length),C=_(J);return 0===C.length||Oe.copy(C,0,0,J),C}return void 0!==Oe.length?"number"!=typeof Oe.length||Dt(Oe.length)?_(0):S(Oe):"Buffer"===Oe.type&&Array.isArray(Oe.data)?S(Oe.data):void 0}(Oe);if(He)return He;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Oe[Symbol.toPrimitive])return y.from(Oe[Symbol.toPrimitive]("string"),J,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Oe)}function F(Oe){if("number"!=typeof Oe)throw new TypeError('"size" argument must be of type number');if(Oe<0)throw new RangeError('The value "'+Oe+'" is invalid for option "size"')}function U(Oe){return F(Oe),_(Oe<0?0:0|ie(Oe))}function S(Oe){const J=Oe.length<0?0:0|ie(Oe.length),C=_(J);for(let ae=0;ae<J;ae+=1)C[ae]=255&Oe[ae];return C}function ce(Oe,J,C){if(J<0||Oe.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(Oe.byteLength<J+(C||0))throw new RangeError('"length" is outside of buffer bounds');let ae;return ae=void 0===J&&void 0===C?new Uint8Array(Oe):void 0===C?new Uint8Array(Oe,J):new Uint8Array(Oe,J,C),Object.setPrototypeOf(ae,y.prototype),ae}function ie(Oe){if(Oe>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return 0|Oe}function K(Oe,J){if(y.isBuffer(Oe))return Oe.length;if(ArrayBuffer.isView(Oe)||ct(Oe,ArrayBuffer))return Oe.byteLength;if("string"!=typeof Oe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Oe);const C=Oe.length,ae=arguments.length>2&&!0===arguments[2];if(!ae&&0===C)return 0;let He=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return M(Oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*C;case"hex":return C>>>1;case"base64":return ze(Oe).length;default:if(He)return ae?-1:M(Oe).length;J=(""+J).toLowerCase(),He=!0}}function V(Oe,J,C){let ae=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===C||C>this.length)&&(C=this.length),C<=0)||(C>>>=0)<=(J>>>=0))return"";for(Oe||(Oe="utf8");;)switch(Oe){case"hex":return ke(this,J,C);case"utf8":case"utf-8":return Re(this,J,C);case"ascii":return Se(this,J,C);case"latin1":case"binary":return Ne(this,J,C);case"base64":return Ie(this,J,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,J,C);default:if(ae)throw new TypeError("Unknown encoding: "+Oe);Oe=(Oe+"").toLowerCase(),ae=!0}}function x(Oe,J,C){const ae=Oe[J];Oe[J]=Oe[C],Oe[C]=ae}function B(Oe,J,C,ae,He){if(0===Oe.length)return-1;if("string"==typeof C?(ae=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),Dt(C=+C)&&(C=He?0:Oe.length-1),C<0&&(C=Oe.length+C),C>=Oe.length){if(He)return-1;C=Oe.length-1}else if(C<0){if(!He)return-1;C=0}if("string"==typeof J&&(J=y.from(J,ae)),y.isBuffer(J))return 0===J.length?-1:I(Oe,J,C,ae,He);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?He?Uint8Array.prototype.indexOf.call(Oe,J,C):Uint8Array.prototype.lastIndexOf.call(Oe,J,C):I(Oe,[J],C,ae,He);throw new TypeError("val must be string, number or Buffer")}function I(Oe,J,C,ae,He){let Yn,Je=1,st=Oe.length,$t=J.length;if(void 0!==ae&&("ucs2"===(ae=String(ae).toLowerCase())||"ucs-2"===ae||"utf16le"===ae||"utf-16le"===ae)){if(Oe.length<2||J.length<2)return-1;Je=2,st/=2,$t/=2,C/=2}function cn(Wn,gn){return 1===Je?Wn[gn]:Wn.readUInt16BE(gn*Je)}if(He){let Wn=-1;for(Yn=C;Yn<st;Yn++)if(cn(Oe,Yn)===cn(J,-1===Wn?0:Yn-Wn)){if(-1===Wn&&(Wn=Yn),Yn-Wn+1===$t)return Wn*Je}else-1!==Wn&&(Yn-=Yn-Wn),Wn=-1}else for(C+$t>st&&(C=st-$t),Yn=C;Yn>=0;Yn--){let Wn=!0;for(let gn=0;gn<$t;gn++)if(cn(Oe,Yn+gn)!==cn(J,gn)){Wn=!1;break}if(Wn)return Yn}return-1}function ue(Oe,J,C,ae){C=Number(C)||0;const He=Oe.length-C;ae?(ae=Number(ae))>He&&(ae=He):ae=He;const Je=J.length;let st;for(ae>Je/2&&(ae=Je/2),st=0;st<ae;++st){const $t=parseInt(J.substr(2*st,2),16);if(Dt($t))return st;Oe[C+st]=$t}return st}function W(Oe,J,C,ae){return qe(M(J,Oe.length-C),Oe,C,ae)}function Ce(Oe,J,C,ae){return qe(function de(Oe){const J=[];for(let C=0;C<Oe.length;++C)J.push(255&Oe.charCodeAt(C));return J}(J),Oe,C,ae)}function le(Oe,J,C,ae){return qe(ze(J),Oe,C,ae)}function xe(Oe,J,C,ae){return qe(function ge(Oe,J){let C,ae,He;const Je=[];for(let st=0;st<Oe.length&&!((J-=2)<0);++st)C=Oe.charCodeAt(st),ae=C>>8,He=C%256,Je.push(He),Je.push(ae);return Je}(J,Oe.length-C),Oe,C,ae)}function Ie(Oe,J,C){return E.fromByteArray(0===J&&C===Oe.length?Oe:Oe.slice(J,C))}function Re(Oe,J,C){C=Math.min(Oe.length,C);const ae=[];let He=J;for(;He<C;){const Je=Oe[He];let st=null,$t=Je>239?4:Je>223?3:Je>191?2:1;if(He+$t<=C){let cn,Yn,Wn,gn;switch($t){case 1:Je<128&&(st=Je);break;case 2:cn=Oe[He+1],128==(192&cn)&&(gn=(31&Je)<<6|63&cn,gn>127&&(st=gn));break;case 3:cn=Oe[He+1],Yn=Oe[He+2],128==(192&cn)&&128==(192&Yn)&&(gn=(15&Je)<<12|(63&cn)<<6|63&Yn,gn>2047&&(gn<55296||gn>57343)&&(st=gn));break;case 4:cn=Oe[He+1],Yn=Oe[He+2],Wn=Oe[He+3],128==(192&cn)&&128==(192&Yn)&&128==(192&Wn)&&(gn=(15&Je)<<18|(63&cn)<<12|(63&Yn)<<6|63&Wn,gn>65535&&gn<1114112&&(st=gn))}}null===st?(st=65533,$t=1):st>65535&&(st-=65536,ae.push(st>>>10&1023|55296),st=56320|1023&st),ae.push(st),He+=$t}return function Xe(Oe){const J=Oe.length;if(J<=et)return String.fromCharCode.apply(String,Oe);let C="",ae=0;for(;ae<J;)C+=String.fromCharCode.apply(String,Oe.slice(ae,ae+=et));return C}(ae)}Z.kMaxLength=A,!(y.TYPED_ARRAY_SUPPORT=function P(){try{const Oe=new Uint8Array(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Uint8Array.prototype),Object.setPrototypeOf(Oe,J),42===Oe.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(Oe,J,C){return T(Oe,J,C)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(Oe,J,C){return function N(Oe,J,C){return F(Oe),Oe<=0?_(Oe):void 0!==J?"string"==typeof C?_(Oe).fill(J,C):_(Oe).fill(J):_(Oe)}(Oe,J,C)},y.allocUnsafe=function(Oe){return U(Oe)},y.allocUnsafeSlow=function(Oe){return U(Oe)},y.isBuffer=function(J){return null!=J&&!0===J._isBuffer&&J!==y.prototype},y.compare=function(J,C){if(ct(J,Uint8Array)&&(J=y.from(J,J.offset,J.byteLength)),ct(C,Uint8Array)&&(C=y.from(C,C.offset,C.byteLength)),!y.isBuffer(J)||!y.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===C)return 0;let ae=J.length,He=C.length;for(let Je=0,st=Math.min(ae,He);Je<st;++Je)if(J[Je]!==C[Je]){ae=J[Je],He=C[Je];break}return ae<He?-1:He<ae?1:0},y.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(J,C){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(0===J.length)return y.alloc(0);let ae;if(void 0===C)for(C=0,ae=0;ae<J.length;++ae)C+=J[ae].length;const He=y.allocUnsafe(C);let Je=0;for(ae=0;ae<J.length;++ae){let st=J[ae];if(ct(st,Uint8Array))Je+st.length>He.length?(y.isBuffer(st)||(st=y.from(st)),st.copy(He,Je)):Uint8Array.prototype.set.call(He,st,Je);else{if(!y.isBuffer(st))throw new TypeError('"list" argument must be an Array of Buffers');st.copy(He,Je)}Je+=st.length}return He},y.byteLength=K,y.prototype._isBuffer=!0,y.prototype.swap16=function(){const J=this.length;if(J%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let C=0;C<J;C+=2)x(this,C,C+1);return this},y.prototype.swap32=function(){const J=this.length;if(J%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let C=0;C<J;C+=4)x(this,C,C+3),x(this,C+1,C+2);return this},y.prototype.swap64=function(){const J=this.length;if(J%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let C=0;C<J;C+=8)x(this,C,C+7),x(this,C+1,C+6),x(this,C+2,C+5),x(this,C+3,C+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){const J=this.length;return 0===J?"":0===arguments.length?Re(this,0,J):V.apply(this,arguments)},y.prototype.equals=function(J){if(!y.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J||0===y.compare(this,J)},y.prototype.inspect=function(){let J="";const C=Z.INSPECT_MAX_BYTES;return J=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(J+=" ... "),"<Buffer "+J+">"},k&&(y.prototype[k]=y.prototype.inspect),y.prototype.compare=function(J,C,ae,He,Je){if(ct(J,Uint8Array)&&(J=y.from(J,J.offset,J.byteLength)),!y.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(void 0===C&&(C=0),void 0===ae&&(ae=J?J.length:0),void 0===He&&(He=0),void 0===Je&&(Je=this.length),C<0||ae>J.length||He<0||Je>this.length)throw new RangeError("out of range index");if(He>=Je&&C>=ae)return 0;if(He>=Je)return-1;if(C>=ae)return 1;if(this===J)return 0;let st=(Je>>>=0)-(He>>>=0),$t=(ae>>>=0)-(C>>>=0);const cn=Math.min(st,$t),Yn=this.slice(He,Je),Wn=J.slice(C,ae);for(let gn=0;gn<cn;++gn)if(Yn[gn]!==Wn[gn]){st=Yn[gn],$t=Wn[gn];break}return st<$t?-1:$t<st?1:0},y.prototype.includes=function(J,C,ae){return-1!==this.indexOf(J,C,ae)},y.prototype.indexOf=function(J,C,ae){return B(this,J,C,ae,!0)},y.prototype.lastIndexOf=function(J,C,ae){return B(this,J,C,ae,!1)},y.prototype.write=function(J,C,ae,He){if(void 0===C)He="utf8",ae=this.length,C=0;else if(void 0===ae&&"string"==typeof C)He=C,ae=this.length,C=0;else{if(!isFinite(C))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");C>>>=0,isFinite(ae)?(ae>>>=0,void 0===He&&(He="utf8")):(He=ae,ae=void 0)}const Je=this.length-C;if((void 0===ae||ae>Je)&&(ae=Je),J.length>0&&(ae<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");He||(He="utf8");let st=!1;for(;;)switch(He){case"hex":return ue(this,J,C,ae);case"utf8":case"utf-8":return W(this,J,C,ae);case"ascii":case"latin1":case"binary":return Ce(this,J,C,ae);case"base64":return le(this,J,C,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,J,C,ae);default:if(st)throw new TypeError("Unknown encoding: "+He);He=(""+He).toLowerCase(),st=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const et=4096;function Se(Oe,J,C){let ae="";C=Math.min(Oe.length,C);for(let He=J;He<C;++He)ae+=String.fromCharCode(127&Oe[He]);return ae}function Ne(Oe,J,C){let ae="";C=Math.min(Oe.length,C);for(let He=J;He<C;++He)ae+=String.fromCharCode(Oe[He]);return ae}function ke(Oe,J,C){const ae=Oe.length;(!J||J<0)&&(J=0),(!C||C<0||C>ae)&&(C=ae);let He="";for(let Je=J;Je<C;++Je)He+=_t[Oe[Je]];return He}function Ve(Oe,J,C){const ae=Oe.slice(J,C);let He="";for(let Je=0;Je<ae.length-1;Je+=2)He+=String.fromCharCode(ae[Je]+256*ae[Je+1]);return He}function me(Oe,J,C){if(Oe%1!=0||Oe<0)throw new RangeError("offset is not uint");if(Oe+J>C)throw new RangeError("Trying to access beyond buffer length")}function Ae(Oe,J,C,ae,He,Je){if(!y.isBuffer(Oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>He||J<Je)throw new RangeError('"value" argument is out of bounds');if(C+ae>Oe.length)throw new RangeError("Index out of range")}function Ke(Oe,J,C,ae,He){Ye(J,ae,He,Oe,C,7);let Je=Number(J&BigInt(4294967295));Oe[C++]=Je,Je>>=8,Oe[C++]=Je,Je>>=8,Oe[C++]=Je,Je>>=8,Oe[C++]=Je;let st=Number(J>>BigInt(32)&BigInt(4294967295));return Oe[C++]=st,st>>=8,Oe[C++]=st,st>>=8,Oe[C++]=st,st>>=8,Oe[C++]=st,C}function ot(Oe,J,C,ae,He){Ye(J,ae,He,Oe,C,7);let Je=Number(J&BigInt(4294967295));Oe[C+7]=Je,Je>>=8,Oe[C+6]=Je,Je>>=8,Oe[C+5]=Je,Je>>=8,Oe[C+4]=Je;let st=Number(J>>BigInt(32)&BigInt(4294967295));return Oe[C+3]=st,st>>=8,Oe[C+2]=st,st>>=8,Oe[C+1]=st,st>>=8,Oe[C]=st,C+8}function We(Oe,J,C,ae,He,Je){if(C+ae>Oe.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function _e(Oe,J,C,ae,He){return J=+J,C>>>=0,He||We(Oe,0,C,4),b.write(Oe,J,C,ae,23,4),C+4}function G(Oe,J,C,ae,He){return J=+J,C>>>=0,He||We(Oe,0,C,8),b.write(Oe,J,C,ae,52,8),C+8}y.prototype.slice=function(J,C){const ae=this.length;(J=~~J)<0?(J+=ae)<0&&(J=0):J>ae&&(J=ae),(C=void 0===C?ae:~~C)<0?(C+=ae)<0&&(C=0):C>ae&&(C=ae),C<J&&(C=J);const He=this.subarray(J,C);return Object.setPrototypeOf(He,y.prototype),He},y.prototype.readUintLE=y.prototype.readUIntLE=function(J,C,ae){J>>>=0,C>>>=0,ae||me(J,C,this.length);let He=this[J],Je=1,st=0;for(;++st<C&&(Je*=256);)He+=this[J+st]*Je;return He},y.prototype.readUintBE=y.prototype.readUIntBE=function(J,C,ae){J>>>=0,C>>>=0,ae||me(J,C,this.length);let He=this[J+--C],Je=1;for(;C>0&&(Je*=256);)He+=this[J+--C]*Je;return He},y.prototype.readUint8=y.prototype.readUInt8=function(J,C){return J>>>=0,C||me(J,1,this.length),this[J]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(J,C){return J>>>=0,C||me(J,2,this.length),this[J]|this[J+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(J,C){return J>>>=0,C||me(J,2,this.length),this[J]<<8|this[J+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(J,C){return J>>>=0,C||me(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+16777216*this[J+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(J,C){return J>>>=0,C||me(J,4,this.length),16777216*this[J]+(this[J+1]<<16|this[J+2]<<8|this[J+3])},y.prototype.readBigUInt64LE=Ht(function(J){he(J>>>=0,"offset");const C=this[J],ae=this[J+7];(void 0===C||void 0===ae)&&Q(J,this.length-8);const He=C+256*this[++J]+65536*this[++J]+this[++J]*2**24,Je=this[++J]+256*this[++J]+65536*this[++J]+ae*2**24;return BigInt(He)+(BigInt(Je)<<BigInt(32))}),y.prototype.readBigUInt64BE=Ht(function(J){he(J>>>=0,"offset");const C=this[J],ae=this[J+7];(void 0===C||void 0===ae)&&Q(J,this.length-8);const He=C*2**24+65536*this[++J]+256*this[++J]+this[++J],Je=this[++J]*2**24+65536*this[++J]+256*this[++J]+ae;return(BigInt(He)<<BigInt(32))+BigInt(Je)}),y.prototype.readIntLE=function(J,C,ae){J>>>=0,C>>>=0,ae||me(J,C,this.length);let He=this[J],Je=1,st=0;for(;++st<C&&(Je*=256);)He+=this[J+st]*Je;return Je*=128,He>=Je&&(He-=Math.pow(2,8*C)),He},y.prototype.readIntBE=function(J,C,ae){J>>>=0,C>>>=0,ae||me(J,C,this.length);let He=C,Je=1,st=this[J+--He];for(;He>0&&(Je*=256);)st+=this[J+--He]*Je;return Je*=128,st>=Je&&(st-=Math.pow(2,8*C)),st},y.prototype.readInt8=function(J,C){return J>>>=0,C||me(J,1,this.length),128&this[J]?-1*(255-this[J]+1):this[J]},y.prototype.readInt16LE=function(J,C){J>>>=0,C||me(J,2,this.length);const ae=this[J]|this[J+1]<<8;return 32768&ae?4294901760|ae:ae},y.prototype.readInt16BE=function(J,C){J>>>=0,C||me(J,2,this.length);const ae=this[J+1]|this[J]<<8;return 32768&ae?4294901760|ae:ae},y.prototype.readInt32LE=function(J,C){return J>>>=0,C||me(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},y.prototype.readInt32BE=function(J,C){return J>>>=0,C||me(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},y.prototype.readBigInt64LE=Ht(function(J){he(J>>>=0,"offset");const C=this[J],ae=this[J+7];return(void 0===C||void 0===ae)&&Q(J,this.length-8),(BigInt(this[J+4]+256*this[J+5]+65536*this[J+6]+(ae<<24))<<BigInt(32))+BigInt(C+256*this[++J]+65536*this[++J]+this[++J]*2**24)}),y.prototype.readBigInt64BE=Ht(function(J){he(J>>>=0,"offset");const C=this[J],ae=this[J+7];(void 0===C||void 0===ae)&&Q(J,this.length-8);const He=(C<<24)+65536*this[++J]+256*this[++J]+this[++J];return(BigInt(He)<<BigInt(32))+BigInt(this[++J]*2**24+65536*this[++J]+256*this[++J]+ae)}),y.prototype.readFloatLE=function(J,C){return J>>>=0,C||me(J,4,this.length),b.read(this,J,!0,23,4)},y.prototype.readFloatBE=function(J,C){return J>>>=0,C||me(J,4,this.length),b.read(this,J,!1,23,4)},y.prototype.readDoubleLE=function(J,C){return J>>>=0,C||me(J,8,this.length),b.read(this,J,!0,52,8)},y.prototype.readDoubleBE=function(J,C){return J>>>=0,C||me(J,8,this.length),b.read(this,J,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(J,C,ae,He){J=+J,C>>>=0,ae>>>=0,He||Ae(this,J,C,ae,Math.pow(2,8*ae)-1,0);let Je=1,st=0;for(this[C]=255&J;++st<ae&&(Je*=256);)this[C+st]=J/Je&255;return C+ae},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(J,C,ae,He){J=+J,C>>>=0,ae>>>=0,He||Ae(this,J,C,ae,Math.pow(2,8*ae)-1,0);let Je=ae-1,st=1;for(this[C+Je]=255&J;--Je>=0&&(st*=256);)this[C+Je]=J/st&255;return C+ae},y.prototype.writeUint8=y.prototype.writeUInt8=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,1,255,0),this[C]=255&J,C+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,2,65535,0),this[C]=255&J,this[C+1]=J>>>8,C+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,2,65535,0),this[C]=J>>>8,this[C+1]=255&J,C+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,4,4294967295,0),this[C+3]=J>>>24,this[C+2]=J>>>16,this[C+1]=J>>>8,this[C]=255&J,C+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,4,4294967295,0),this[C]=J>>>24,this[C+1]=J>>>16,this[C+2]=J>>>8,this[C+3]=255&J,C+4},y.prototype.writeBigUInt64LE=Ht(function(J,C=0){return Ke(this,J,C,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=Ht(function(J,C=0){return ot(this,J,C,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(J,C,ae,He){if(J=+J,C>>>=0,!He){const cn=Math.pow(2,8*ae-1);Ae(this,J,C,ae,cn-1,-cn)}let Je=0,st=1,$t=0;for(this[C]=255&J;++Je<ae&&(st*=256);)J<0&&0===$t&&0!==this[C+Je-1]&&($t=1),this[C+Je]=(J/st>>0)-$t&255;return C+ae},y.prototype.writeIntBE=function(J,C,ae,He){if(J=+J,C>>>=0,!He){const cn=Math.pow(2,8*ae-1);Ae(this,J,C,ae,cn-1,-cn)}let Je=ae-1,st=1,$t=0;for(this[C+Je]=255&J;--Je>=0&&(st*=256);)J<0&&0===$t&&0!==this[C+Je+1]&&($t=1),this[C+Je]=(J/st>>0)-$t&255;return C+ae},y.prototype.writeInt8=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,1,127,-128),J<0&&(J=255+J+1),this[C]=255&J,C+1},y.prototype.writeInt16LE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,2,32767,-32768),this[C]=255&J,this[C+1]=J>>>8,C+2},y.prototype.writeInt16BE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,2,32767,-32768),this[C]=J>>>8,this[C+1]=255&J,C+2},y.prototype.writeInt32LE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,4,2147483647,-2147483648),this[C]=255&J,this[C+1]=J>>>8,this[C+2]=J>>>16,this[C+3]=J>>>24,C+4},y.prototype.writeInt32BE=function(J,C,ae){return J=+J,C>>>=0,ae||Ae(this,J,C,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[C]=J>>>24,this[C+1]=J>>>16,this[C+2]=J>>>8,this[C+3]=255&J,C+4},y.prototype.writeBigInt64LE=Ht(function(J,C=0){return Ke(this,J,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=Ht(function(J,C=0){return ot(this,J,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeFloatLE=function(J,C,ae){return _e(this,J,C,!0,ae)},y.prototype.writeFloatBE=function(J,C,ae){return _e(this,J,C,!1,ae)},y.prototype.writeDoubleLE=function(J,C,ae){return G(this,J,C,!0,ae)},y.prototype.writeDoubleBE=function(J,C,ae){return G(this,J,C,!1,ae)},y.prototype.copy=function(J,C,ae,He){if(!y.isBuffer(J))throw new TypeError("argument should be a Buffer");if(ae||(ae=0),!He&&0!==He&&(He=this.length),C>=J.length&&(C=J.length),C||(C=0),He>0&&He<ae&&(He=ae),He===ae||0===J.length||0===this.length)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(ae<0||ae>=this.length)throw new RangeError("Index out of range");if(He<0)throw new RangeError("sourceEnd out of bounds");He>this.length&&(He=this.length),J.length-C<He-ae&&(He=J.length-C+ae);const Je=He-ae;return this===J&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(C,ae,He):Uint8Array.prototype.set.call(J,this.subarray(ae,He),C),Je},y.prototype.fill=function(J,C,ae,He){if("string"==typeof J){if("string"==typeof C?(He=C,C=0,ae=this.length):"string"==typeof ae&&(He=ae,ae=this.length),void 0!==He&&"string"!=typeof He)throw new TypeError("encoding must be a string");if("string"==typeof He&&!y.isEncoding(He))throw new TypeError("Unknown encoding: "+He);if(1===J.length){const st=J.charCodeAt(0);("utf8"===He&&st<128||"latin1"===He)&&(J=st)}}else"number"==typeof J?J&=255:"boolean"==typeof J&&(J=Number(J));if(C<0||this.length<C||this.length<ae)throw new RangeError("Out of range index");if(ae<=C)return this;let Je;if(C>>>=0,ae=void 0===ae?this.length:ae>>>0,J||(J=0),"number"==typeof J)for(Je=C;Je<ae;++Je)this[Je]=J;else{const st=y.isBuffer(J)?J:y.from(J,He),$t=st.length;if(0===$t)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Je=0;Je<ae-C;++Je)this[Je+C]=st[Je%$t]}return this};const O={};function oe(Oe,J,C){O[Oe]=class extends C{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Oe}]`,delete this.name}get code(){return Oe}set code(He){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:He,writable:!0})}toString(){return`${this.name} [${Oe}]: ${this.message}`}}}function z(Oe){let J="",C=Oe.length;const ae="-"===Oe[0]?1:0;for(;C>=ae+4;C-=3)J=`_${Oe.slice(C-3,C)}${J}`;return`${Oe.slice(0,C)}${J}`}function Ye(Oe,J,C,ae,He,Je){if(Oe>C||Oe<J){const st="bigint"==typeof J?"n":"";let $t;throw $t=Je>3?0===J||J===BigInt(0)?`>= 0${st} and < 2${st} ** ${8*(Je+1)}${st}`:`>= -(2${st} ** ${8*(Je+1)-1}${st}) and < 2 ** ${8*(Je+1)-1}${st}`:`>= ${J}${st} and <= ${C}${st}`,new O.ERR_OUT_OF_RANGE("value",$t,Oe)}!function Le(Oe,J,C){he(J,"offset"),(void 0===Oe[J]||void 0===Oe[J+C])&&Q(J,Oe.length-(C+1))}(ae,He,Je)}function he(Oe,J){if("number"!=typeof Oe)throw new O.ERR_INVALID_ARG_TYPE(J,"number",Oe)}function Q(Oe,J,C){throw Math.floor(Oe)!==Oe?(he(Oe,C),new O.ERR_OUT_OF_RANGE(C||"offset","an integer",Oe)):J<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE(C||"offset",`>= ${C?1:0} and <= ${J}`,Oe)}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(Oe){return Oe?`${Oe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(Oe,J){return`The "${Oe}" argument must be of type number. Received type ${typeof J}`},TypeError),oe("ERR_OUT_OF_RANGE",function(Oe,J,C){let ae=`The value of "${Oe}" is out of range.`,He=C;return Number.isInteger(C)&&Math.abs(C)>2**32?He=z(String(C)):"bigint"==typeof C&&(He=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(He=z(He)),He+="n"),ae+=` It must be ${J}. Received ${He}`,ae},RangeError);const H=/[^+/0-9A-Za-z-_]/g;function M(Oe,J){let C;J=J||1/0;const ae=Oe.length;let He=null;const Je=[];for(let st=0;st<ae;++st){if(C=Oe.charCodeAt(st),C>55295&&C<57344){if(!He){if(C>56319){(J-=3)>-1&&Je.push(239,191,189);continue}if(st+1===ae){(J-=3)>-1&&Je.push(239,191,189);continue}He=C;continue}if(C<56320){(J-=3)>-1&&Je.push(239,191,189),He=C;continue}C=65536+(He-55296<<10|C-56320)}else He&&(J-=3)>-1&&Je.push(239,191,189);if(He=null,C<128){if((J-=1)<0)break;Je.push(C)}else if(C<2048){if((J-=2)<0)break;Je.push(C>>6|192,63&C|128)}else if(C<65536){if((J-=3)<0)break;Je.push(C>>12|224,C>>6&63|128,63&C|128)}else{if(!(C<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;Je.push(C>>18|240,C>>12&63|128,C>>6&63|128,63&C|128)}}return Je}function ze(Oe){return E.toByteArray(function D(Oe){if((Oe=(Oe=Oe.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;Oe.length%4!=0;)Oe+="=";return Oe}(Oe))}function qe(Oe,J,C,ae){let He;for(He=0;He<ae&&!(He+C>=J.length||He>=Oe.length);++He)J[He+C]=Oe[He];return He}function ct(Oe,J){return Oe instanceof J||null!=Oe&&null!=Oe.constructor&&null!=Oe.constructor.name&&Oe.constructor.name===J.name}function Dt(Oe){return Oe!=Oe}const _t=function(){const Oe="0123456789abcdef",J=new Array(256);for(let C=0;C<16;++C){const ae=16*C;for(let He=0;He<16;++He)J[ae+He]=Oe[C]+Oe[He]}return J}();function Ht(Oe){return typeof BigInt>"u"?nn:Oe}function nn(){throw new Error("BigInt not supported")}},7054:function(te,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(361),Z)},361:(te,Z)=>{"use strict";function E(A){const P=[];let _=0;for(;_<A.length;)switch(A[_]){case"/":if("."===A[_+1])if("."===A[_+2]){if(!k(A[_+3])){P.push([]),_++;break}P.pop(),A[_+3]||P.push([]),_+=3}else{if(!k(A[_+2])){P.push([]),_++;break}A[_+2]||P.push([]),_+=2}else P.push([]),_++;break;case"#":case"?":P.length||P.push([]),P[P.length-1].push(A.substr(_)),_=A.length;break;default:P.length||P.push([]),P[P.length-1].push(A[_]),_++}return"/"+P.map(y=>y.join("")).join("/")}function b(A,P){let _=P+1;P>=0?"/"===A[P+1]&&"/"===A[P+2]&&(_=P+3):"/"===A[0]&&"/"===A[1]&&(_=2);const y=A.indexOf("/",_);return y<0?A:A.substr(0,y)+E(A.substr(y))}function k(A){return!A||"#"===A||"?"===A||"/"===A}Object.defineProperty(Z,"__esModule",{value:!0}),Z.removeDotSegmentsOfPath=Z.removeDotSegments=Z.resolve=void 0,Z.resolve=function g(A,P){const _=(P=P||"").indexOf("#");if(_>0&&(P=P.substr(0,_)),!A.length){if(P.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${P}' for value '${A}'`);return P}if(A.startsWith("?")){const S=P.indexOf("?");return S>0&&(P=P.substr(0,S)),P+A}if(A.startsWith("#"))return P+A;if(!P.length){const S=A.indexOf(":");if(S<0)throw new Error(`Found invalid relative IRI '${A}' for a missing baseIRI`);return b(A,S)}const y=A.indexOf(":");if(y>=0)return b(A,y);const T=P.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${P}' for value '${A}'`);const F=P.substr(0,T+1);if(0===A.indexOf("//"))return F+b(A,y);let N;if(P.indexOf("//",T)===T+1){if(N=P.indexOf("/",T+3),N<0)return P.length>T+3?P+"/"+b(A,y):F+b(A,y)}else if(N=P.indexOf("/",T+1),N<0)return F+b(A,y);if(0===A.indexOf("/"))return P.substr(0,N)+E(A);let U=P.substr(N);const se=U.lastIndexOf("/");return se>=0&&se<U.length-1&&(U=U.substr(0,se+1),"."===A[0]&&"."!==A[1]&&"/"!==A[1]&&A[2]&&(A=A.substr(1))),A=E(A=U+A),P.substr(0,N)+A},Z.removeDotSegments=E,Z.removeDotSegmentsOfPath=b},9528:(te,Z,g)=>{!function(E){E.parser=function(G,O){return new k(G,O)},E.SAXParser=k,E.SAXStream=N,E.createStream=function F(G,O){return new N(G,O)},E.MAX_BUFFER_LENGTH=65536;var y,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function k(G,O){if(!(this instanceof k))return new k(G,O);var oe=this;(function P(G){for(var O=0,oe=b.length;O<oe;O++)G[b[O]]=""})(oe),oe.q=oe.c="",oe.bufferCheckPosition=E.MAX_BUFFER_LENGTH,oe.opt=O||{},oe.opt.lowercase=oe.opt.lowercase||oe.opt.lowercasetags,oe.looseCase=oe.opt.lowercase?"toLowerCase":"toUpperCase",oe.tags=[],oe.closed=oe.closedRoot=oe.sawRoot=!1,oe.tag=oe.error=null,oe.strict=!!G,oe.noscript=!(!G&&!oe.opt.noscript),oe.state=W.BEGIN,oe.strictEntities=oe.opt.strictEntities,oe.ENTITIES=Object.create(oe.strictEntities?E.XML_ENTITIES:E.ENTITIES),oe.attribList=[],oe.opt.xmlns&&(oe.ns=Object.create(ce)),oe.trackPosition=!1!==oe.opt.position,oe.trackPosition&&(oe.position=oe.line=oe.column=0),le(oe,"onready")}E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(G){function O(){}return O.prototype=G,new O}),Object.keys||(Object.keys=function(G){var O=[];for(var oe in G)G.hasOwnProperty(oe)&&O.push(oe);return O}),k.prototype={end:function(){Xe(this)},write:function _e(G){var O=this;if(this.error)throw this.error;if(O.closed)return et(O,"Cannot write after close. Assign an onready handler.");if(null===G)return Xe(O);"object"==typeof G&&(G=G.toString());for(var oe=0,z="";z=We(G,oe++),O.c=z,z;)switch(O.trackPosition&&(O.position++,"\n"===z?(O.line++,O.column=0):O.column++),O.state){case W.BEGIN:if(O.state=W.BEGIN_WHITESPACE,"\ufeff"===z)continue;ot(O,z);continue;case W.BEGIN_WHITESPACE:ot(O,z);continue;case W.TEXT:if(O.sawRoot&&!O.closedRoot){for(var Le=oe-1;z&&"<"!==z&&"&"!==z;)(z=We(G,oe++))&&O.trackPosition&&(O.position++,"\n"===z?(O.line++,O.column=0):O.column++);O.textNode+=G.substring(Le,oe-1)}"<"!==z||O.sawRoot&&O.closedRoot&&!O.strict?(!V(z)&&(!O.sawRoot||O.closedRoot)&&Se(O,"Text data outside of root node."),"&"===z?O.state=W.TEXT_ENTITY:O.textNode+=z):(O.state=W.OPEN_WAKA,O.startTagPosition=O.position);continue;case W.SCRIPT:"<"===z?O.state=W.SCRIPT_ENDING:O.script+=z;continue;case W.SCRIPT_ENDING:"/"===z?O.state=W.CLOSE_TAG:(O.script+="<"+z,O.state=W.SCRIPT);continue;case W.OPEN_WAKA:"!"===z?(O.state=W.SGML_DECL,O.sgmlDecl=""):V(z)||(I(X,z)?(O.state=W.OPEN_TAG,O.tagName=z):"/"===z?(O.state=W.CLOSE_TAG,O.tagName=""):"?"===z?(O.state=W.PROC_INST,O.procInstName=O.procInstBody=""):(Se(O,"Unencoded <"),O.startTagPosition+1<O.position&&(z=new Array(O.position-O.startTagPosition).join(" ")+z),O.textNode+="<"+z,O.state=W.TEXT));continue;case W.SGML_DECL:(O.sgmlDecl+z).toUpperCase()===U?(xe(O,"onopencdata"),O.state=W.CDATA,O.sgmlDecl="",O.cdata=""):O.sgmlDecl+z==="--"?(O.state=W.COMMENT,O.comment="",O.sgmlDecl=""):(O.sgmlDecl+z).toUpperCase()===se?(O.state=W.DOCTYPE,(O.doctype||O.sawRoot)&&Se(O,"Inappropriately located doctype declaration"),O.doctype="",O.sgmlDecl=""):">"===z?(xe(O,"onsgmldeclaration",O.sgmlDecl),O.sgmlDecl="",O.state=W.TEXT):(x(z)&&(O.state=W.SGML_DECL_QUOTED),O.sgmlDecl+=z);continue;case W.SGML_DECL_QUOTED:z===O.q&&(O.state=W.SGML_DECL,O.q=""),O.sgmlDecl+=z;continue;case W.DOCTYPE:">"===z?(O.state=W.TEXT,xe(O,"ondoctype",O.doctype),O.doctype=!0):(O.doctype+=z,"["===z?O.state=W.DOCTYPE_DTD:x(z)&&(O.state=W.DOCTYPE_QUOTED,O.q=z));continue;case W.DOCTYPE_QUOTED:O.doctype+=z,z===O.q&&(O.q="",O.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:O.doctype+=z,"]"===z?O.state=W.DOCTYPE:x(z)&&(O.state=W.DOCTYPE_DTD_QUOTED,O.q=z);continue;case W.DOCTYPE_DTD_QUOTED:O.doctype+=z,z===O.q&&(O.state=W.DOCTYPE_DTD,O.q="");continue;case W.COMMENT:"-"===z?O.state=W.COMMENT_ENDING:O.comment+=z;continue;case W.COMMENT_ENDING:"-"===z?(O.state=W.COMMENT_ENDED,O.comment=Re(O.opt,O.comment),O.comment&&xe(O,"oncomment",O.comment),O.comment=""):(O.comment+="-"+z,O.state=W.COMMENT);continue;case W.COMMENT_ENDED:">"!==z?(Se(O,"Malformed comment"),O.comment+="--"+z,O.state=W.COMMENT):O.state=W.TEXT;continue;case W.CDATA:"]"===z?O.state=W.CDATA_ENDING:O.cdata+=z;continue;case W.CDATA_ENDING:"]"===z?O.state=W.CDATA_ENDING_2:(O.cdata+="]"+z,O.state=W.CDATA);continue;case W.CDATA_ENDING_2:">"===z?(O.cdata&&xe(O,"oncdata",O.cdata),xe(O,"onclosecdata"),O.cdata="",O.state=W.TEXT):"]"===z?O.cdata+="]":(O.cdata+="]]"+z,O.state=W.CDATA);continue;case W.PROC_INST:"?"===z?O.state=W.PROC_INST_ENDING:V(z)?O.state=W.PROC_INST_BODY:O.procInstName+=z;continue;case W.PROC_INST_BODY:if(!O.procInstBody&&V(z))continue;"?"===z?O.state=W.PROC_INST_ENDING:O.procInstBody+=z;continue;case W.PROC_INST_ENDING:">"===z?(xe(O,"onprocessinginstruction",{name:O.procInstName,body:O.procInstBody}),O.procInstName=O.procInstBody="",O.state=W.TEXT):(O.procInstBody+="?"+z,O.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:I(ie,z)?O.tagName+=z:(Ne(O),">"===z?me(O):"/"===z?O.state=W.OPEN_TAG_SLASH:(V(z)||Se(O,"Invalid character in tag name"),O.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:">"===z?(me(O,!0),Ae(O)):(Se(O,"Forward-slash in opening tag not followed by >"),O.state=W.ATTRIB);continue;case W.ATTRIB:if(V(z))continue;">"===z?me(O):"/"===z?O.state=W.OPEN_TAG_SLASH:I(X,z)?(O.attribName=z,O.attribValue="",O.state=W.ATTRIB_NAME):Se(O,"Invalid attribute name");continue;case W.ATTRIB_NAME:"="===z?O.state=W.ATTRIB_VALUE:">"===z?(Se(O,"Attribute without value"),O.attribValue=O.attribName,Ve(O),me(O)):V(z)?O.state=W.ATTRIB_NAME_SAW_WHITE:I(ie,z)?O.attribName+=z:Se(O,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if("="===z)O.state=W.ATTRIB_VALUE;else{if(V(z))continue;Se(O,"Attribute without value"),O.tag.attributes[O.attribName]="",O.attribValue="",xe(O,"onattribute",{name:O.attribName,value:""}),O.attribName="",">"===z?me(O):I(X,z)?(O.attribName=z,O.state=W.ATTRIB_NAME):(Se(O,"Invalid attribute name"),O.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(V(z))continue;x(z)?(O.q=z,O.state=W.ATTRIB_VALUE_QUOTED):(Se(O,"Unquoted attribute value"),O.state=W.ATTRIB_VALUE_UNQUOTED,O.attribValue=z);continue;case W.ATTRIB_VALUE_QUOTED:if(z!==O.q){"&"===z?O.state=W.ATTRIB_VALUE_ENTITY_Q:O.attribValue+=z;continue}Ve(O),O.q="",O.state=W.ATTRIB_VALUE_CLOSED;continue;case W.ATTRIB_VALUE_CLOSED:V(z)?O.state=W.ATTRIB:">"===z?me(O):"/"===z?O.state=W.OPEN_TAG_SLASH:I(X,z)?(Se(O,"No whitespace between attributes"),O.attribName=z,O.attribValue="",O.state=W.ATTRIB_NAME):Se(O,"Invalid attribute name");continue;case W.ATTRIB_VALUE_UNQUOTED:if(!B(z)){"&"===z?O.state=W.ATTRIB_VALUE_ENTITY_U:O.attribValue+=z;continue}Ve(O),">"===z?me(O):O.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(O.tagName)">"===z?Ae(O):I(ie,z)?O.tagName+=z:O.script?(O.script+="</"+O.tagName,O.tagName="",O.state=W.SCRIPT):(V(z)||Se(O,"Invalid tagname in closing tag"),O.state=W.CLOSE_TAG_SAW_WHITE);else{if(V(z))continue;ue(X,z)?O.script?(O.script+="</"+z,O.state=W.SCRIPT):Se(O,"Invalid tagname in closing tag."):O.tagName=z}continue;case W.CLOSE_TAG_SAW_WHITE:if(V(z))continue;">"===z?Ae(O):Se(O,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:var he,Q;switch(O.state){case W.TEXT_ENTITY:he=W.TEXT,Q="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:he=W.ATTRIB_VALUE_QUOTED,Q="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:he=W.ATTRIB_VALUE_UNQUOTED,Q="attribValue"}";"===z?(O[Q]+=Ke(O),O.entity="",O.state=he):I(O.entity.length?K:ee,z)?O.entity+=z:(Se(O,"Invalid character in entity name"),O[Q]+="&"+O.entity+z,O.entity="",O.state=he);continue;default:throw new Error(O,"Unknown state: "+O.state)}return O.position>=O.bufferCheckPosition&&function A(G){for(var O=Math.max(E.MAX_BUFFER_LENGTH,10),oe=0,z=0,Le=b.length;z<Le;z++){var Ye=G[b[z]].length;if(Ye>O)switch(b[z]){case"textNode":Ie(G);break;case"cdata":xe(G,"oncdata",G.cdata),G.cdata="";break;case"script":xe(G,"onscript",G.script),G.script="";break;default:et(G,"Max buffer length exceeded: "+b[z])}oe=Math.max(oe,Ye)}G.bufferCheckPosition=E.MAX_BUFFER_LENGTH-oe+G.position}(O),O},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(G){Ie(G),""!==G.cdata&&(xe(G,"oncdata",G.cdata),G.cdata=""),""!==G.script&&(xe(G,"onscript",G.script),G.script="")}(this)}};try{y=g(1793).Stream}catch{y=function(){}}var T=E.EVENTS.filter(function(G){return"error"!==G&&"end"!==G});function N(G,O){if(!(this instanceof N))return new N(G,O);y.apply(this),this._parser=new k(G,O),this.writable=!0,this.readable=!0;var oe=this;this._parser.onend=function(){oe.emit("end")},this._parser.onerror=function(z){oe.emit("error",z),oe._parser.error=null},this._decoder=null,T.forEach(function(z){Object.defineProperty(oe,"on"+z,{get:function(){return oe._parser["on"+z]},set:function(Le){if(!Le)return oe.removeAllListeners(z),oe._parser["on"+z]=Le,Le;oe.on(z,Le)},enumerable:!0,configurable:!1})})}(N.prototype=Object.create(y.prototype,{constructor:{value:N}})).write=function(G){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(G)){if(!this._decoder){var O=g(2024).StringDecoder;this._decoder=new O("utf8")}G=this._decoder.write(G)}return this._parser.write(G.toString()),this.emit("data",G),!0},N.prototype.end=function(G){return G&&G.length&&this.write(G),this._parser.end(),!0},N.prototype.on=function(G,O){var oe=this;return!oe._parser["on"+G]&&-1!==T.indexOf(G)&&(oe._parser["on"+G]=function(){var z=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);z.splice(0,0,G),oe.emit.apply(oe,z)}),y.prototype.on.call(oe,G,O)};var U="[CDATA[",se="DOCTYPE",S="http://www.w3.org/XML/1998/namespace",$="http://www.w3.org/2000/xmlns/",ce={xml:S,xmlns:$},X=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ie=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,K=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function V(G){return" "===G||"\n"===G||"\r"===G||"\t"===G}function x(G){return'"'===G||"'"===G}function B(G){return">"===G||V(G)}function I(G,O){return G.test(O)}function ue(G,O){return!I(G,O)}var G,O,oe,W=0;for(var Ce in E.STATE={BEGIN:W++,BEGIN_WHITESPACE:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_CLOSED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(G){var O=E.ENTITIES[G],oe="number"==typeof O?String.fromCharCode(O):O;E.ENTITIES[G]=oe}),E.STATE)E.STATE[E.STATE[Ce]]=Ce;function le(G,O,oe){G[O]&&G[O](oe)}function xe(G,O,oe){G.textNode&&Ie(G),le(G,O,oe)}function Ie(G){G.textNode=Re(G.opt,G.textNode),G.textNode&&le(G,"ontext",G.textNode),G.textNode=""}function Re(G,O){return G.trim&&(O=O.trim()),G.normalize&&(O=O.replace(/\s+/g," ")),O}function et(G,O){return Ie(G),G.trackPosition&&(O+="\nLine: "+G.line+"\nColumn: "+G.column+"\nChar: "+G.c),O=new Error(O),G.error=O,le(G,"onerror",O),G}function Xe(G){return G.sawRoot&&!G.closedRoot&&Se(G,"Unclosed root tag"),G.state!==W.BEGIN&&G.state!==W.BEGIN_WHITESPACE&&G.state!==W.TEXT&&et(G,"Unexpected end"),Ie(G),G.c="",G.closed=!0,le(G,"onend"),k.call(G,G.strict,G.opt),G}function Se(G,O){if("object"!=typeof G||!(G instanceof k))throw new Error("bad call to strictFail");G.strict&&et(G,O)}function Ne(G){G.strict||(G.tagName=G.tagName[G.looseCase]());var O=G.tags[G.tags.length-1]||G,oe=G.tag={name:G.tagName,attributes:{}};G.opt.xmlns&&(oe.ns=O.ns),G.attribList.length=0,xe(G,"onopentagstart",oe)}function ke(G,O){var z=G.indexOf(":")<0?["",G]:G.split(":"),Le=z[0],Ye=z[1];return O&&"xmlns"===G&&(Le="xmlns",Ye=""),{prefix:Le,local:Ye}}function Ve(G){if(G.strict||(G.attribName=G.attribName[G.looseCase]()),-1!==G.attribList.indexOf(G.attribName)||G.tag.attributes.hasOwnProperty(G.attribName))G.attribName=G.attribValue="";else{if(G.opt.xmlns){var O=ke(G.attribName,!0),z=O.local;if("xmlns"===O.prefix)if("xml"===z&&G.attribValue!==S)Se(G,"xml: prefix must be bound to "+S+"\nActual: "+G.attribValue);else if("xmlns"===z&&G.attribValue!==$)Se(G,"xmlns: prefix must be bound to "+$+"\nActual: "+G.attribValue);else{var Le=G.tag,Ye=G.tags[G.tags.length-1]||G;Le.ns===Ye.ns&&(Le.ns=Object.create(Ye.ns)),Le.ns[z]=G.attribValue}G.attribList.push([G.attribName,G.attribValue])}else G.tag.attributes[G.attribName]=G.attribValue,xe(G,"onattribute",{name:G.attribName,value:G.attribValue});G.attribName=G.attribValue=""}}function me(G,O){if(G.opt.xmlns){var oe=G.tag,z=ke(G.tagName);oe.prefix=z.prefix,oe.local=z.local,oe.uri=oe.ns[z.prefix]||"",oe.prefix&&!oe.uri&&(Se(G,"Unbound namespace prefix: "+JSON.stringify(G.tagName)),oe.uri=z.prefix),oe.ns&&(G.tags[G.tags.length-1]||G).ns!==oe.ns&&Object.keys(oe.ns).forEach(function(ct){xe(G,"onopennamespace",{prefix:ct,uri:oe.ns[ct]})});for(var Ye=0,he=G.attribList.length;Ye<he;Ye++){var Q=G.attribList[Ye],H=Q[0],D=Q[1],M=ke(H,!0),de=M.prefix,ze=""===de?"":oe.ns[de]||"",qe={name:H,value:D,prefix:de,local:M.local,uri:ze};de&&"xmlns"!==de&&!ze&&(Se(G,"Unbound namespace prefix: "+JSON.stringify(de)),qe.uri=de),G.tag.attributes[H]=qe,xe(G,"onattribute",qe)}G.attribList.length=0}G.tag.isSelfClosing=!!O,G.sawRoot=!0,G.tags.push(G.tag),xe(G,"onopentag",G.tag),O||(G.state=G.noscript||"script"!==G.tagName.toLowerCase()?W.TEXT:W.SCRIPT,G.tag=null,G.tagName=""),G.attribName=G.attribValue="",G.attribList.length=0}function Ae(G){if(!G.tagName)return Se(G,"Weird empty close tag."),G.textNode+="</>",void(G.state=W.TEXT);if(G.script){if("script"!==G.tagName)return G.script+="</"+G.tagName+">",G.tagName="",void(G.state=W.SCRIPT);xe(G,"onscript",G.script),G.script=""}var O=G.tags.length,oe=G.tagName;G.strict||(oe=oe[G.looseCase]());for(var z=oe;O--&&G.tags[O].name!==z;)Se(G,"Unexpected close tag");if(O<0)return Se(G,"Unmatched closing tag: "+G.tagName),G.textNode+="</"+G.tagName+">",void(G.state=W.TEXT);G.tagName=oe;for(var Ye=G.tags.length;Ye-- >O;){var he=G.tag=G.tags.pop();G.tagName=G.tag.name,xe(G,"onclosetag",G.tagName);var Q={};for(var H in he.ns)Q[H]=he.ns[H];G.opt.xmlns&&he.ns!==(G.tags[G.tags.length-1]||G).ns&&Object.keys(he.ns).forEach(function(M){xe(G,"onclosenamespace",{prefix:M,uri:he.ns[M]})})}0===O&&(G.closedRoot=!0),G.tagName=G.attribValue=G.attribName="",G.attribList.length=0,G.state=W.TEXT}function Ke(G){var z,O=G.entity,oe=O.toLowerCase(),Le="";return G.ENTITIES[O]?G.ENTITIES[O]:G.ENTITIES[oe]?G.ENTITIES[oe]:("#"===(O=oe).charAt(0)&&("x"===O.charAt(1)?(O=O.slice(2),Le=(z=parseInt(O,16)).toString(16)):(O=O.slice(1),Le=(z=parseInt(O,10)).toString(10))),O=O.replace(/^0+/,""),isNaN(z)||Le.toLowerCase()!==O?(Se(G,"Invalid character entity"),"&"+G.entity+";"):String.fromCodePoint(z))}function ot(G,O){"<"===O?(G.state=W.OPEN_WAKA,G.startTagPosition=G.position):V(O)||(Se(G,"Non-whitespace before first tag."),G.textNode=O,G.state=W.TEXT)}function We(G,O){var oe="";return O<G.length&&(oe=G.charAt(O)),oe}W=E.STATE,String.fromCodePoint||(G=String.fromCharCode,O=Math.floor,oe=function(){var Le=[],Q=-1,H=arguments.length;if(!H)return"";for(var D="";++Q<H;){var M=Number(arguments[Q]);if(!isFinite(M)||M<0||M>1114111||O(M)!==M)throw RangeError("Invalid code point: "+M);M<=65535?Le.push(M):Le.push(55296+((M-=65536)>>10),M%1024+56320),(Q+1===H||Le.length>16384)&&(D+=G.apply(null,Le),Le.length=0)}return D},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:oe,configurable:!0,writable:!0}):String.fromCodePoint=oe)}(Z)},8280:function(){!function(te,Z){"use strict";if(!te.setImmediate){var A,g=1,E={},b=!1,k=te.document,ce=Object.getPrototypeOf&&Object.getPrototypeOf(te);ce=ce&&ce.setTimeout?ce:te,"[object process]"==={}.toString.call(te.process)?function F(){A=function(X){process.nextTick(function(){T(X)})}}():function N(){if(te.postMessage&&!te.importScripts){var X=!0,ie=te.onmessage;return te.onmessage=function(){X=!1},te.postMessage("","*"),te.onmessage=ie,X}}()?function U(){var X="setImmediate$"+Math.random()+"$",ie=function(ee){ee.source===te&&"string"==typeof ee.data&&0===ee.data.indexOf(X)&&T(+ee.data.slice(X.length))};te.addEventListener?te.addEventListener("message",ie,!1):te.attachEvent("onmessage",ie),A=function(ee){te.postMessage(X+ee,"*")}}():te.MessageChannel?function se(){var X=new MessageChannel;X.port1.onmessage=function(ie){T(ie.data)},A=function(ie){X.port2.postMessage(ie)}}():k&&"onreadystatechange"in k.createElement("script")?function S(){var X=k.documentElement;A=function(ie){var ee=k.createElement("script");ee.onreadystatechange=function(){T(ie),ee.onreadystatechange=null,X.removeChild(ee),ee=null},X.appendChild(ee)}}():function $(){A=function(X){setTimeout(T,0,X)}}(),ce.setImmediate=function P(X){"function"!=typeof X&&(X=new Function(""+X));for(var ie=new Array(arguments.length-1),ee=0;ee<ie.length;ee++)ie[ee]=arguments[ee+1];return E[g]={callback:X,args:ie},A(g),g++},ce.clearImmediate=_}function _(X){delete E[X]}function T(X){if(b)setTimeout(T,0,X);else{var ie=E[X];if(ie){b=!0;try{!function y(X){var ie=X.callback,ee=X.args;switch(ee.length){case 0:ie();break;case 1:ie(ee[0]);break;case 2:ie(ee[0],ee[1]);break;case 3:ie(ee[0],ee[1],ee[2]);break;default:ie.apply(undefined,ee)}}(ie)}finally{_(X),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(te,Z,g)=>{te.exports=k;var E=g(2016).EventEmitter;function k(){E.call(this)}g(6698)(k,E),k.Readable=g(842),k.Writable=g(7597),k.Duplex=g(2232),k.Transform=g(555),k.PassThrough=g(8226),k.finished=g(1227),k.pipeline=g(2345),k.Stream=k,k.prototype.pipe=function(A,P){var _=this;function y($){A.writable&&!1===A.write($)&&_.pause&&_.pause()}function T(){_.readable&&_.resume&&_.resume()}_.on("data",y),A.on("drain",T),!A._isStdio&&(!P||!1!==P.end)&&(_.on("end",N),_.on("close",U));var F=!1;function N(){F||(F=!0,A.end())}function U(){F||(F=!0,"function"==typeof A.destroy&&A.destroy())}function se($){if(S(),0===E.listenerCount(this,"error"))throw $}function S(){_.removeListener("data",y),A.removeListener("drain",T),_.removeListener("end",N),_.removeListener("close",U),_.removeListener("error",se),A.removeListener("error",se),_.removeListener("end",S),_.removeListener("close",S),A.removeListener("close",S)}return _.on("error",se),A.on("error",se),_.on("end",S),_.on("close",S),A.on("close",S),A.emit("pipe",_),A}},9555:te=>{"use strict";var g={};function E(_,y,T){T||(T=Error);var N=function(U){function se(S,$,ce){return U.call(this,function F(U,se,S){return"string"==typeof y?y:y(U,se,S)}(S,$,ce))||this}return function Z(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,_.__proto__=y}(se,U),se}(T);N.prototype.name=T.name,N.prototype.code=_,g[_]=N}function b(_,y){if(Array.isArray(_)){var T=_.length;return _=_.map(function(F){return String(F)}),T>2?"one of ".concat(y," ").concat(_.slice(0,T-1).join(", "),", or ")+_[T-1]:2===T?"one of ".concat(y," ").concat(_[0]," or ").concat(_[1]):"of ".concat(y," ").concat(_[0])}return"of ".concat(y," ").concat(String(_))}E("ERR_INVALID_OPT_VALUE",function(_,y){return'The value "'+y+'" is invalid for option "'+_+'"'},TypeError),E("ERR_INVALID_ARG_TYPE",function(_,y,T){var F,N;if("string"==typeof y&&function k(_,y,T){return _.substr(!T||T<0?0:+T,y.length)===y}(y,"not ")?(F="must not be",y=y.replace(/^not /,"")):F="must be",function A(_,y,T){return(void 0===T||T>_.length)&&(T=_.length),_.substring(T-y.length,T)===y}(_," argument"))N="The ".concat(_," ").concat(F," ").concat(b(y,"type"));else{var U=function P(_,y,T){return"number"!=typeof T&&(T=0),!(T+y.length>_.length)&&-1!==_.indexOf(y,T)}(_,".")?"property":"argument";N='The "'.concat(_,'" ').concat(U," ").concat(F," ").concat(b(y,"type"))}return N+". Received type ".concat(typeof T)},TypeError),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),E("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),E("ERR_STREAM_PREMATURE_CLOSE","Premature close"),E("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),E("ERR_STREAM_WRITE_AFTER_END","write after end"),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),te.exports.q=g},2232:(te,Z,g)=>{"use strict";var E=Object.keys||function(N){var U=[];for(var se in N)U.push(se);return U};te.exports=y;var b=g(842),k=g(7597);g(6698)(y,b);for(var A=E(k.prototype),P=0;P<A.length;P++){var _=A[P];y.prototype[_]||(y.prototype[_]=k.prototype[_])}function y(N){if(!(this instanceof y))return new y(N);b.call(this,N),k.call(this,N),this.allowHalfOpen=!0,N&&(!1===N.readable&&(this.readable=!1),!1===N.writable&&(this.writable=!1),!1===N.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||process.nextTick(F,this)}function F(N){N.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(U){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=U,this._writableState.destroyed=U)}})},8226:(te,Z,g)=>{"use strict";te.exports=b;var E=g(555);function b(k){if(!(this instanceof b))return new b(k);E.call(this,k)}g(6698)(b,E),b.prototype._transform=function(k,A,P){P(null,k)}},842:(te,Z,g)=>{"use strict";var E;te.exports=le,le.ReadableState=Ce,g(2016);var N,k=function(Q,H){return Q.listeners(H).length},A=g(3951),P=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},F=g(964);N=F&&F.debuglog?F.debuglog("stream"):function(){};var V,x,B,U=g(2998),se=g(3992),$=g(4962).getHighWaterMark,ce=g(9555).q,X=ce.ERR_INVALID_ARG_TYPE,ie=ce.ERR_STREAM_PUSH_AFTER_EOF,ee=ce.ERR_METHOD_NOT_IMPLEMENTED,K=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(le,A);var I=se.errorOrDestroy,ue=["error","close","destroy","pause","resume"];function Ce(he,Q,H){E=E||g(2232),"boolean"!=typeof H&&(H=Q instanceof E),this.objectMode=!!(he=he||{}).objectMode,H&&(this.objectMode=this.objectMode||!!he.readableObjectMode),this.highWaterMark=$(this,he,"readableHighWaterMark",H),this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==he.emitClose,this.autoDestroy=!!he.autoDestroy,this.destroyed=!1,this.defaultEncoding=he.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,he.encoding&&(V||(V=g(2024).StringDecoder),this.decoder=new V(he.encoding),this.encoding=he.encoding)}function le(he){if(E=E||g(2232),!(this instanceof le))return new le(he);this._readableState=new Ce(he,this,this instanceof E),this.readable=!0,he&&("function"==typeof he.read&&(this._read=he.read),"function"==typeof he.destroy&&(this._destroy=he.destroy)),A.call(this)}function xe(he,Q,H,D,M){N("readableAddChunk",Q);var ge,de=he._readableState;if(null===Q)de.reading=!1,function Ne(he,Q){if(N("onEofChunk"),!Q.ended){if(Q.decoder){var H=Q.decoder.end();H&&H.length&&(Q.buffer.push(H),Q.length+=Q.objectMode?1:H.length)}Q.ended=!0,Q.sync?ke(he):(Q.needReadable=!1,Q.emittedReadable||(Q.emittedReadable=!0,Ve(he)))}}(he,de);else if(M||(ge=function Re(he,Q){var H;return!function T(he){return P.isBuffer(he)||he instanceof _}(Q)&&"string"!=typeof Q&&void 0!==Q&&!he.objectMode&&(H=new X("chunk",["string","Buffer","Uint8Array"],Q)),H}(de,Q)),ge)I(he,ge);else if(de.objectMode||Q&&Q.length>0)if("string"!=typeof Q&&!de.objectMode&&Object.getPrototypeOf(Q)!==P.prototype&&(Q=function y(he){return P.from(he)}(Q)),D)de.endEmitted?I(he,new K):Ie(he,de,Q,!0);else if(de.ended)I(he,new ie);else{if(de.destroyed)return!1;de.reading=!1,de.decoder&&!H?(Q=de.decoder.write(Q),de.objectMode||0!==Q.length?Ie(he,de,Q,!1):me(he,de)):Ie(he,de,Q,!1)}else D||(de.reading=!1,me(he,de));return!de.ended&&(de.length<de.highWaterMark||0===de.length)}function Ie(he,Q,H,D){Q.flowing&&0===Q.length&&!Q.sync?(Q.awaitDrain=0,he.emit("data",H)):(Q.length+=Q.objectMode?1:H.length,D?Q.buffer.unshift(H):Q.buffer.push(H),Q.needReadable&&ke(he)),me(he,Q)}Object.defineProperty(le.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),le.prototype.destroy=se.destroy,le.prototype._undestroy=se.undestroy,le.prototype._destroy=function(he,Q){Q(he)},le.prototype.push=function(he,Q){var D,H=this._readableState;return H.objectMode?D=!0:"string"==typeof he&&((Q=Q||H.defaultEncoding)!==H.encoding&&(he=P.from(he,Q),Q=""),D=!0),xe(this,he,Q,!1,D)},le.prototype.unshift=function(he){return xe(this,he,null,!0,!1)},le.prototype.isPaused=function(){return!1===this._readableState.flowing},le.prototype.setEncoding=function(he){V||(V=g(2024).StringDecoder);var Q=new V(he);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,D="";null!==H;)D+=Q.write(H.data),H=H.next;return this._readableState.buffer.clear(),""!==D&&this._readableState.buffer.push(D),this._readableState.length=D.length,this};var et=1073741824;function Se(he,Q){return he<=0||0===Q.length&&Q.ended?0:Q.objectMode?1:he!=he?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(he>Q.highWaterMark&&(Q.highWaterMark=function Xe(he){return he>=et?he=et:(he--,he|=he>>>1,he|=he>>>2,he|=he>>>4,he|=he>>>8,he|=he>>>16,he++),he}(he)),he<=Q.length?he:Q.ended?Q.length:(Q.needReadable=!0,0))}function ke(he){var Q=he._readableState;N("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(N("emitReadable",Q.flowing),Q.emittedReadable=!0,process.nextTick(Ve,he))}function Ve(he){var Q=he._readableState;N("emitReadable_",Q.destroyed,Q.length,Q.ended),!Q.destroyed&&(Q.length||Q.ended)&&(he.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,O(he)}function me(he,Q){Q.readingMore||(Q.readingMore=!0,process.nextTick(Ae,he,Q))}function Ae(he,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&0===Q.length);){var H=Q.length;if(N("maybeReadMore read 0"),he.read(0),H===Q.length)break}Q.readingMore=!1}function ot(he){var Q=he._readableState;Q.readableListening=he.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:he.listenerCount("data")>0&&he.resume()}function We(he){N("readable nexttick read 0"),he.read(0)}function G(he,Q){N("resume",Q.reading),Q.reading||he.read(0),Q.resumeScheduled=!1,he.emit("resume"),O(he),Q.flowing&&!Q.reading&&he.read(0)}function O(he){var Q=he._readableState;for(N("flow",Q.flowing);Q.flowing&&null!==he.read(););}function oe(he,Q){return 0===Q.length?null:(Q.objectMode?H=Q.buffer.shift():!he||he>=Q.length?(H=Q.decoder?Q.buffer.join(""):1===Q.buffer.length?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):H=Q.buffer.consume(he,Q.decoder),H);var H}function z(he){var Q=he._readableState;N("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,process.nextTick(Le,Q,he))}function Le(he,Q){if(N("endReadableNT",he.endEmitted,he.length),!he.endEmitted&&0===he.length&&(he.endEmitted=!0,Q.readable=!1,Q.emit("end"),he.autoDestroy)){var H=Q._writableState;(!H||H.autoDestroy&&H.finished)&&Q.destroy()}}function Ye(he,Q){for(var H=0,D=he.length;H<D;H++)if(he[H]===Q)return H;return-1}le.prototype.read=function(he){N("read",he),he=parseInt(he,10);var Q=this._readableState,H=he;if(0!==he&&(Q.emittedReadable=!1),0===he&&Q.needReadable&&((0!==Q.highWaterMark?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return N("read: emitReadable",Q.length,Q.ended),0===Q.length&&Q.ended?z(this):ke(this),null;if(0===(he=Se(he,Q))&&Q.ended)return 0===Q.length&&z(this),null;var M,D=Q.needReadable;return N("need readable",D),(0===Q.length||Q.length-he<Q.highWaterMark)&&N("length less than watermark",D=!0),Q.ended||Q.reading?N("reading or ended",D=!1):D&&(N("do read"),Q.reading=!0,Q.sync=!0,0===Q.length&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(he=Se(H,Q))),null===(M=he>0?oe(he,Q):null)?(Q.needReadable=Q.length<=Q.highWaterMark,he=0):(Q.length-=he,Q.awaitDrain=0),0===Q.length&&(Q.ended||(Q.needReadable=!0),H!==he&&Q.ended&&z(this)),null!==M&&this.emit("data",M),M},le.prototype._read=function(he){I(this,new ee("_read()"))},le.prototype.pipe=function(he,Q){var H=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=he;break;case 1:D.pipes=[D.pipes,he];break;default:D.pipes.push(he)}D.pipesCount+=1,N("pipe count=%d opts=%j",D.pipesCount,Q);var de=Q&&!1===Q.end||he===process.stdout||he===process.stderr?J:ze;function ze(){N("onend"),he.end()}D.endEmitted?process.nextTick(de):H.once("end",de),he.on("unpipe",function ge(C,ae){N("onunpipe"),C===H&&ae&&!1===ae.hasUnpiped&&(ae.hasUnpiped=!0,function Dt(){N("cleanup"),he.removeListener("close",nn),he.removeListener("finish",Oe),he.removeListener("drain",qe),he.removeListener("error",Ht),he.removeListener("unpipe",ge),H.removeListener("end",ze),H.removeListener("end",J),H.removeListener("data",_t),ct=!0,D.awaitDrain&&(!he._writableState||he._writableState.needDrain)&&qe()}())});var qe=function Ke(he){return function(){var H=he._readableState;N("pipeOnDrain",H.awaitDrain),H.awaitDrain&&H.awaitDrain--,0===H.awaitDrain&&k(he,"data")&&(H.flowing=!0,O(he))}}(H);he.on("drain",qe);var ct=!1;function _t(C){N("ondata");var ae=he.write(C);N("dest.write",ae),!1===ae&&((1===D.pipesCount&&D.pipes===he||D.pipesCount>1&&-1!==Ye(D.pipes,he))&&!ct&&(N("false write response, pause",D.awaitDrain),D.awaitDrain++),H.pause())}function Ht(C){N("onerror",C),J(),he.removeListener("error",Ht),0===k(he,"error")&&I(he,C)}function nn(){he.removeListener("finish",Oe),J()}function Oe(){N("onfinish"),he.removeListener("close",nn),J()}function J(){N("unpipe"),H.unpipe(he)}return H.on("data",_t),function W(he,Q,H){if("function"==typeof he.prependListener)return he.prependListener(Q,H);he._events&&he._events[Q]?Array.isArray(he._events[Q])?he._events[Q].unshift(H):he._events[Q]=[H,he._events[Q]]:he.on(Q,H)}(he,"error",Ht),he.once("close",nn),he.once("finish",Oe),he.emit("pipe",H),D.flowing||(N("pipe resume"),H.resume()),he},le.prototype.unpipe=function(he){var Q=this._readableState,H={hasUnpiped:!1};if(0===Q.pipesCount)return this;if(1===Q.pipesCount)return he&&he!==Q.pipes||(he||(he=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,he&&he.emit("unpipe",this,H)),this;if(!he){var D=Q.pipes,M=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var de=0;de<M;de++)D[de].emit("unpipe",this,{hasUnpiped:!1});return this}var ge=Ye(Q.pipes,he);return-1===ge||(Q.pipes.splice(ge,1),Q.pipesCount-=1,1===Q.pipesCount&&(Q.pipes=Q.pipes[0]),he.emit("unpipe",this,H)),this},le.prototype.addListener=le.prototype.on=function(he,Q){var H=A.prototype.on.call(this,he,Q),D=this._readableState;return"data"===he?(D.readableListening=this.listenerCount("readable")>0,!1!==D.flowing&&this.resume()):"readable"===he&&!D.endEmitted&&!D.readableListening&&(D.readableListening=D.needReadable=!0,D.flowing=!1,D.emittedReadable=!1,N("on readable",D.length,D.reading),D.length?ke(this):D.reading||process.nextTick(We,this)),H},le.prototype.removeListener=function(he,Q){var H=A.prototype.removeListener.call(this,he,Q);return"readable"===he&&process.nextTick(ot,this),H},le.prototype.removeAllListeners=function(he){var Q=A.prototype.removeAllListeners.apply(this,arguments);return("readable"===he||void 0===he)&&process.nextTick(ot,this),Q},le.prototype.resume=function(){var he=this._readableState;return he.flowing||(N("resume"),he.flowing=!he.readableListening,function _e(he,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,process.nextTick(G,he,Q))}(this,he)),he.paused=!1,this},le.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},le.prototype.wrap=function(he){var Q=this,H=this._readableState,D=!1;for(var M in he.on("end",function(){if(N("wrapped end"),H.decoder&&!H.ended){var ge=H.decoder.end();ge&&ge.length&&Q.push(ge)}Q.push(null)}),he.on("data",function(ge){N("wrapped data"),H.decoder&&(ge=H.decoder.write(ge)),H.objectMode&&null==ge||!(H.objectMode||ge&&ge.length)||Q.push(ge)||(D=!0,he.pause())}),he)void 0===this[M]&&"function"==typeof he[M]&&(this[M]=function(ze){return function(){return he[ze].apply(he,arguments)}}(M));for(var de=0;de<ue.length;de++)he.on(ue[de],this.emit.bind(this,ue[de]));return this._read=function(ge){N("wrapped _read",ge),D&&(D=!1,he.resume())},this},"function"==typeof Symbol&&(le.prototype[Symbol.asyncIterator]=function(){return void 0===x&&(x=g(2590)),x(this)}),Object.defineProperty(le.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(le.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(le.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){this._readableState&&(this._readableState.flowing=Q)}}),le._fromList=oe,Object.defineProperty(le.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(le.from=function(he,Q){return void 0===B&&(B=g(5374)),B(le,he,Q)})},555:(te,Z,g)=>{"use strict";te.exports=T;var E=g(9555).q,b=E.ERR_METHOD_NOT_IMPLEMENTED,k=E.ERR_MULTIPLE_CALLBACK,A=E.ERR_TRANSFORM_ALREADY_TRANSFORMING,P=E.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function y(U,se){var S=this._transformState;S.transforming=!1;var $=S.writecb;if(null===$)return this.emit("error",new k);S.writechunk=null,S.writecb=null,null!=se&&this.push(se),$(U);var ce=this._readableState;ce.reading=!1,(ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}function T(U){if(!(this instanceof T))return new T(U);_.call(this,U),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,U&&("function"==typeof U.transform&&(this._transform=U.transform),"function"==typeof U.flush&&(this._flush=U.flush)),this.on("prefinish",F)}function F(){var U=this;"function"!=typeof this._flush||this._readableState.destroyed?N(this,null,null):this._flush(function(se,S){N(U,se,S)})}function N(U,se,S){if(se)return U.emit("error",se);if(null!=S&&U.push(S),U._writableState.length)throw new P;if(U._transformState.transforming)throw new A;return U.push(null)}g(6698)(T,_),T.prototype.push=function(U,se){return this._transformState.needTransform=!1,_.prototype.push.call(this,U,se)},T.prototype._transform=function(U,se,S){S(new b("_transform()"))},T.prototype._write=function(U,se,S){var $=this._transformState;if($.writecb=S,$.writechunk=U,$.writeencoding=se,!$.transforming){var ce=this._readableState;($.needTransform||ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}},T.prototype._read=function(U){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},T.prototype._destroy=function(U,se){_.prototype._destroy.call(this,U,function(S){se(S)})}},7597:(te,Z,g)=>{"use strict";function b(O){var oe=this;this.next=null,this.entry=null,this.finish=function(){!function G(O,oe,z){var Le=O.entry;for(O.entry=null;Le;){var Ye=Le.callback;oe.pendingcb--,Ye(z),Le=Le.next}oe.corkedRequestsFree.next=O}(oe,O)}}var k;te.exports=Ce,Ce.WritableState=ue;var W,A={deprecate:g(496)},P=g(3951),_=g(9007).Buffer,y=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},N=g(3992),se=g(4962).getHighWaterMark,S=g(9555).q,$=S.ERR_INVALID_ARG_TYPE,ce=S.ERR_METHOD_NOT_IMPLEMENTED,X=S.ERR_MULTIPLE_CALLBACK,ie=S.ERR_STREAM_CANNOT_PIPE,ee=S.ERR_STREAM_DESTROYED,K=S.ERR_STREAM_NULL_VALUES,V=S.ERR_STREAM_WRITE_AFTER_END,x=S.ERR_UNKNOWN_ENCODING,B=N.errorOrDestroy;function I(){}function ue(O,oe,z){k=k||g(2232),"boolean"!=typeof z&&(z=oe instanceof k),this.objectMode=!!(O=O||{}).objectMode,z&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=se(this,O,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===O.decodeStrings),this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ye){!function Ne(O,oe){var z=O._writableState,Le=z.sync,Ye=z.writecb;if("function"!=typeof Ye)throw new X;if(function Se(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}(z),oe)!function Xe(O,oe,z,Le,Ye){--oe.pendingcb,z?(process.nextTick(Ye,Le),process.nextTick(We,O,oe),O._writableState.errorEmitted=!0,B(O,Le)):(Ye(Le),O._writableState.errorEmitted=!0,B(O,Le),We(O,oe))}(O,z,Le,oe,Ye);else{var he=Ae(z)||O.destroyed;!he&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&me(O,z),Le?process.nextTick(ke,O,z,he,Ye):ke(O,z,he,Ye)}}(oe,Ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==O.emitClose,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Ce(O){var oe=this instanceof(k=k||g(2232));if(!oe&&!W.call(Ce,this))return new Ce(O);this._writableState=new ue(O,this,oe),this.writable=!0,O&&("function"==typeof O.write&&(this._write=O.write),"function"==typeof O.writev&&(this._writev=O.writev),"function"==typeof O.destroy&&(this._destroy=O.destroy),"function"==typeof O.final&&(this._final=O.final)),P.call(this)}function et(O,oe,z,Le,Ye,he,Q){oe.writelen=Le,oe.writecb=Q,oe.writing=!0,oe.sync=!0,oe.destroyed?oe.onwrite(new ee("write")):z?O._writev(Ye,oe.onwrite):O._write(Ye,he,oe.onwrite),oe.sync=!1}function ke(O,oe,z,Le){z||function Ve(O,oe){0===oe.length&&oe.needDrain&&(oe.needDrain=!1,O.emit("drain"))}(O,oe),oe.pendingcb--,Le(),We(O,oe)}function me(O,oe){oe.bufferProcessing=!0;var z=oe.bufferedRequest;if(O._writev&&z&&z.next){var Ye=new Array(oe.bufferedRequestCount),he=oe.corkedRequestsFree;he.entry=z;for(var Q=0,H=!0;z;)Ye[Q]=z,z.isBuf||(H=!1),z=z.next,Q+=1;Ye.allBuffers=H,et(O,oe,!0,oe.length,Ye,"",he.finish),oe.pendingcb++,oe.lastBufferedRequest=null,he.next?(oe.corkedRequestsFree=he.next,he.next=null):oe.corkedRequestsFree=new b(oe),oe.bufferedRequestCount=0}else{for(;z;){var D=z.chunk;if(et(O,oe,!1,oe.objectMode?1:D.length,D,z.encoding,z.callback),z=z.next,oe.bufferedRequestCount--,oe.writing)break}null===z&&(oe.lastBufferedRequest=null)}oe.bufferedRequest=z,oe.bufferProcessing=!1}function Ae(O){return O.ending&&0===O.length&&null===O.bufferedRequest&&!O.finished&&!O.writing}function Ke(O,oe){O._final(function(z){oe.pendingcb--,z&&B(O,z),oe.prefinished=!0,O.emit("prefinish"),We(O,oe)})}function We(O,oe){var z=Ae(oe);if(z&&(function ot(O,oe){!oe.prefinished&&!oe.finalCalled&&("function"!=typeof O._final||oe.destroyed?(oe.prefinished=!0,O.emit("prefinish")):(oe.pendingcb++,oe.finalCalled=!0,process.nextTick(Ke,O,oe)))}(O,oe),0===oe.pendingcb&&(oe.finished=!0,O.emit("finish"),oe.autoDestroy))){var Le=O._readableState;(!Le||Le.autoDestroy&&Le.endEmitted)&&O.destroy()}return z}g(6698)(Ce,P),ue.prototype.getBuffer=function(){for(var oe=this.bufferedRequest,z=[];oe;)z.push(oe),oe=oe.next;return z},function(){try{Object.defineProperty(ue.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ce,Symbol.hasInstance,{value:function(oe){return!!W.call(this,oe)||this===Ce&&oe&&oe._writableState instanceof ue}})):W=function(oe){return oe instanceof this},Ce.prototype.pipe=function(){B(this,new ie)},Ce.prototype.write=function(O,oe,z){var Le=this._writableState,Ye=!1,he=!Le.objectMode&&function F(O){return _.isBuffer(O)||O instanceof y}(O);return he&&!_.isBuffer(O)&&(O=function T(O){return _.from(O)}(O)),"function"==typeof oe&&(z=oe,oe=null),he?oe="buffer":oe||(oe=Le.defaultEncoding),"function"!=typeof z&&(z=I),Le.ending?function le(O,oe){var z=new V;B(O,z),process.nextTick(oe,z)}(this,z):(he||function xe(O,oe,z,Le){var Ye;return null===z?Ye=new K:"string"!=typeof z&&!oe.objectMode&&(Ye=new $("chunk",["string","Buffer"],z)),!Ye||(B(O,Ye),process.nextTick(Le,Ye),!1)}(this,Le,O,z))&&(Le.pendingcb++,Ye=function Re(O,oe,z,Le,Ye,he){if(!z){var Q=function Ie(O,oe,z){return!O.objectMode&&!1!==O.decodeStrings&&"string"==typeof oe&&(oe=_.from(oe,z)),oe}(oe,Le,Ye);Le!==Q&&(z=!0,Ye="buffer",Le=Q)}var H=oe.objectMode?1:Le.length;oe.length+=H;var D=oe.length<oe.highWaterMark;if(D||(oe.needDrain=!0),oe.writing||oe.corked){var M=oe.lastBufferedRequest;oe.lastBufferedRequest={chunk:Le,encoding:Ye,isBuf:z,callback:he,next:null},M?M.next=oe.lastBufferedRequest:oe.bufferedRequest=oe.lastBufferedRequest,oe.bufferedRequestCount+=1}else et(O,oe,!1,H,Le,Ye,he);return D}(this,Le,he,O,oe,z)),Ye},Ce.prototype.cork=function(){this._writableState.corked++},Ce.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&me(this,O))},Ce.prototype.setDefaultEncoding=function(oe){if("string"==typeof oe&&(oe=oe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((oe+"").toLowerCase())>-1))throw new x(oe);return this._writableState.defaultEncoding=oe,this},Object.defineProperty(Ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ce.prototype._write=function(O,oe,z){z(new ce("_write()"))},Ce.prototype._writev=null,Ce.prototype.end=function(O,oe,z){var Le=this._writableState;return"function"==typeof O?(z=O,O=null,oe=null):"function"==typeof oe&&(z=oe,oe=null),null!=O&&this.write(O,oe),Le.corked&&(Le.corked=1,this.uncork()),Le.ending||function _e(O,oe,z){oe.ending=!0,We(O,oe),z&&(oe.finished?process.nextTick(z):O.once("finish",z)),oe.ended=!0,O.writable=!1}(this,Le,z),this},Object.defineProperty(Ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ce.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(oe){this._writableState&&(this._writableState.destroyed=oe)}}),Ce.prototype.destroy=N.destroy,Ce.prototype._undestroy=N.undestroy,Ce.prototype._destroy=function(O,oe){oe(O)}},2590:(te,Z,g)=>{"use strict";var E;function b(V,x,B){return x=function k(V){var x=function A(V,x){if("object"!=typeof V||null===V)return V;var B=V[Symbol.toPrimitive];if(void 0!==B){var I=B.call(V,x||"default");if("object"!=typeof I)return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(V)}(V,"string");return"symbol"==typeof x?x:String(x)}(x),x in V?Object.defineProperty(V,x,{value:B,enumerable:!0,configurable:!0,writable:!0}):V[x]=B,V}var P=g(1227),_=Symbol("lastResolve"),y=Symbol("lastReject"),T=Symbol("error"),F=Symbol("ended"),N=Symbol("lastPromise"),U=Symbol("handlePromise"),se=Symbol("stream");function S(V,x){return{value:V,done:x}}function $(V){var x=V[_];if(null!==x){var B=V[se].read();null!==B&&(V[N]=null,V[_]=null,V[y]=null,x(S(B,!1)))}}function ce(V){process.nextTick($,V)}var ie=Object.getPrototypeOf(function(){}),ee=Object.setPrototypeOf((b(E={get stream(){return this[se]},next:function(){var x=this,B=this[T];if(null!==B)return Promise.reject(B);if(this[F])return Promise.resolve(S(void 0,!0));if(this[se].destroyed)return new Promise(function(Ce,le){process.nextTick(function(){x[T]?le(x[T]):Ce(S(void 0,!0))})});var ue,I=this[N];if(I)ue=new Promise(function X(V,x){return function(B,I){V.then(function(){x[F]?B(S(void 0,!0)):x[U](B,I)},I)}}(I,this));else{var W=this[se].read();if(null!==W)return Promise.resolve(S(W,!1));ue=new Promise(this[U])}return this[N]=ue,ue}},Symbol.asyncIterator,function(){return this}),b(E,"return",function(){var x=this;return new Promise(function(B,I){x[se].destroy(null,function(ue){ue?I(ue):B(S(void 0,!0))})})}),E),ie);te.exports=function(x){var B,I=Object.create(ee,(b(B={},se,{value:x,writable:!0}),b(B,_,{value:null,writable:!0}),b(B,y,{value:null,writable:!0}),b(B,T,{value:null,writable:!0}),b(B,F,{value:x._readableState.endEmitted,writable:!0}),b(B,U,{value:function(W,Ce){var le=I[se].read();le?(I[N]=null,I[_]=null,I[y]=null,W(S(le,!1))):(I[_]=W,I[y]=Ce)},writable:!0}),B));return I[N]=null,P(x,function(ue){if(ue&&"ERR_STREAM_PREMATURE_CLOSE"!==ue.code){var W=I[y];return null!==W&&(I[N]=null,I[_]=null,I[y]=null,W(ue)),void(I[T]=ue)}var Ce=I[_];null!==Ce&&(I[N]=null,I[_]=null,I[y]=null,Ce(S(void 0,!0))),I[F]=!0}),x.on("readable",ce.bind(null,I)),I}},2998:(te,Z,g)=>{"use strict";function E(ce,X){var ie=Object.keys(ce);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(ce);X&&(ee=ee.filter(function(K){return Object.getOwnPropertyDescriptor(ce,K).enumerable})),ie.push.apply(ie,ee)}return ie}function b(ce){for(var X=1;X<arguments.length;X++){var ie=null!=arguments[X]?arguments[X]:{};X%2?E(Object(ie),!0).forEach(function(ee){k(ce,ee,ie[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(ie)):E(Object(ie)).forEach(function(ee){Object.defineProperty(ce,ee,Object.getOwnPropertyDescriptor(ie,ee))})}return ce}function k(ce,X,ie){return(X=y(X))in ce?Object.defineProperty(ce,X,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ce[X]=ie,ce}function P(ce,X){for(var ie=0;ie<X.length;ie++){var ee=X[ie];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(ce,y(ee.key),ee)}}function y(ce){var X=function T(ce,X){if("object"!=typeof ce||null===ce)return ce;var ie=ce[Symbol.toPrimitive];if(void 0!==ie){var ee=ie.call(ce,X||"default");if("object"!=typeof ee)return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===X?String:Number)(ce)}(ce,"string");return"symbol"==typeof X?X:String(X)}var N=g(9007).Buffer,se=g(9862).inspect,S=se&&se.custom||"inspect";function $(ce,X,ie){N.prototype.copy.call(ce,X,ie)}te.exports=function(){function ce(){(function A(ce,X){if(!(ce instanceof X))throw new TypeError("Cannot call a class as a function")})(this,ce),this.head=null,this.tail=null,this.length=0}return function _(ce,X,ie){X&&P(ce.prototype,X),ie&&P(ce,ie),Object.defineProperty(ce,"prototype",{writable:!1})}(ce,[{key:"push",value:function(ie){var ee={data:ie,next:null};this.length>0?this.tail.next=ee:this.head=ee,this.tail=ee,++this.length}},{key:"unshift",value:function(ie){var ee={data:ie,next:this.head};0===this.length&&(this.tail=ee),this.head=ee,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ie=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ie}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ie){if(0===this.length)return"";for(var ee=this.head,K=""+ee.data;ee=ee.next;)K+=ie+ee.data;return K}},{key:"concat",value:function(ie){if(0===this.length)return N.alloc(0);for(var ee=N.allocUnsafe(ie>>>0),K=this.head,V=0;K;)$(K.data,ee,V),V+=K.data.length,K=K.next;return ee}},{key:"consume",value:function(ie,ee){var K;return ie<this.head.data.length?(K=this.head.data.slice(0,ie),this.head.data=this.head.data.slice(ie)):K=ie===this.head.data.length?this.shift():ee?this._getString(ie):this._getBuffer(ie),K}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ie){var ee=this.head,K=1,V=ee.data;for(ie-=V.length;ee=ee.next;){var x=ee.data,B=ie>x.length?x.length:ie;if(V+=B===x.length?x:x.slice(0,ie),0==(ie-=B)){B===x.length?(++K,this.head=ee.next?ee.next:this.tail=null):(this.head=ee,ee.data=x.slice(B));break}++K}return this.length-=K,V}},{key:"_getBuffer",value:function(ie){var ee=N.allocUnsafe(ie),K=this.head,V=1;for(K.data.copy(ee),ie-=K.data.length;K=K.next;){var x=K.data,B=ie>x.length?x.length:ie;if(x.copy(ee,ee.length-ie,0,B),0==(ie-=B)){B===x.length?(++V,this.head=K.next?K.next:this.tail=null):(this.head=K,K.data=x.slice(B));break}++V}return this.length-=V,ee}},{key:S,value:function(ie,ee){return se(this,b(b({},ee),{},{depth:0,customInspect:!1}))}}]),ce}()},3992:te=>{"use strict";function g(P,_){k(P,_),E(P)}function E(P){P._writableState&&!P._writableState.emitClose||P._readableState&&!P._readableState.emitClose||P.emit("close")}function k(P,_){P.emit("error",_)}te.exports={destroy:function Z(P,_){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(P):P&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(k,this,P)):process.nextTick(k,this,P)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(P||null,function(N){!_&&N?y._writableState?y._writableState.errorEmitted?process.nextTick(E,y):(y._writableState.errorEmitted=!0,process.nextTick(g,y,N)):process.nextTick(g,y,N):_?(process.nextTick(E,y),_(N)):process.nextTick(E,y)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function A(P,_){var y=P._readableState,T=P._writableState;y&&y.autoDestroy||T&&T.autoDestroy?P.destroy(_):P.emit("error",_)}}},1227:(te,Z,g)=>{"use strict";var E=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}te.exports=function P(_,y,T){if("function"==typeof y)return P(_,null,y);y||(y={}),T=function b(_){var y=!1;return function(){if(!y){y=!0;for(var T=arguments.length,F=new Array(T),N=0;N<T;N++)F[N]=arguments[N];_.apply(this,F)}}}(T||k);var F=y.readable||!1!==y.readable&&_.readable,N=y.writable||!1!==y.writable&&_.writable,U=function(){_.writable||S()},se=_._writableState&&_._writableState.finished,S=function(){N=!1,se=!0,F||T.call(_)},$=_._readableState&&_._readableState.endEmitted,ce=function(){F=!1,$=!0,N||T.call(_)},X=function(V){T.call(_,V)},ie=function(){var V;return F&&!$?((!_._readableState||!_._readableState.ended)&&(V=new E),T.call(_,V)):N&&!se?((!_._writableState||!_._writableState.ended)&&(V=new E),T.call(_,V)):void 0},ee=function(){_.req.on("finish",S)};return function A(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",S),_.on("abort",ie),_.req?ee():_.on("request",ee)):N&&!_._writableState&&(_.on("end",U),_.on("close",U)),_.on("end",ce),_.on("finish",S),!1!==y.error&&_.on("error",X),_.on("close",ie),function(){_.removeListener("complete",S),_.removeListener("abort",ie),_.removeListener("request",ee),_.req&&_.req.removeListener("finish",S),_.removeListener("end",U),_.removeListener("close",U),_.removeListener("finish",S),_.removeListener("end",ce),_.removeListener("error",X),_.removeListener("close",ie)}}},5374:te=>{te.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(te,Z,g)=>{"use strict";var E,k=g(9555).q,A=k.ERR_MISSING_ARGS,P=k.ERR_STREAM_DESTROYED;function _(S){if(S)throw S}function F(S){S()}function N(S,$){return S.pipe($)}te.exports=function se(){for(var S=arguments.length,$=new Array(S),ce=0;ce<S;ce++)$[ce]=arguments[ce];var X=function U(S){return S.length&&"function"==typeof S[S.length-1]?S.pop():_}($);if(Array.isArray($[0])&&($=$[0]),$.length<2)throw new A("streams");var ie,ee=$.map(function(K,V){var x=V<$.length-1;return function T(S,$,ce,X){X=function b(S){var $=!1;return function(){$||($=!0,S.apply(void 0,arguments))}}(X);var ie=!1;S.on("close",function(){ie=!0}),void 0===E&&(E=g(1227)),E(S,{readable:$,writable:ce},function(K){if(K)return X(K);ie=!0,X()});var ee=!1;return function(K){if(!ie&&!ee){if(ee=!0,function y(S){return S.setHeader&&"function"==typeof S.abort}(S))return S.abort();if("function"==typeof S.destroy)return S.destroy();X(K||new P("pipe"))}}}(K,x,V>0,function(I){ie||(ie=I),I&&ee.forEach(F),!x&&(ee.forEach(F),X(ie))})});return $.reduce(N)}},4962:(te,Z,g)=>{"use strict";var E=g(9555).q.ERR_INVALID_OPT_VALUE;te.exports={getHighWaterMark:function k(A,P,_,y){var T=function b(A,P,_){return null!=A.highWaterMark?A.highWaterMark:P?A[_]:null}(P,y,_);if(null!=T){if(!isFinite(T)||Math.floor(T)!==T||T<0)throw new E(y?_:"highWaterMark",T);return Math.floor(T)}return A.objectMode?16:16384}}},3951:(te,Z,g)=>{te.exports=g(2016).EventEmitter},2024:(te,Z,g)=>{"use strict";var E=g(4282).Buffer,b=E.isEncoding||function(ee){switch((ee=""+ee)&&ee.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function P(ee){var K;switch(this.encoding=function A(ee){var K=function k(ee){if(!ee)return"utf8";for(var K;;)switch(ee){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ee;default:if(K)return;ee=(""+ee).toLowerCase(),K=!0}}(ee);if("string"!=typeof K&&(E.isEncoding===b||!b(ee)))throw new Error("Unknown encoding: "+ee);return K||ee}(ee),this.encoding){case"utf16le":this.text=se,this.end=S,K=4;break;case"utf8":this.fillLast=F,K=4;break;case"base64":this.text=$,this.end=ce,K=3;break;default:return this.write=X,void(this.end=ie)}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe(K)}function _(ee){return ee<=127?0:ee>>5==6?2:ee>>4==14?3:ee>>3==30?4:ee>>6==2?-1:-2}function F(ee){var K=this.lastTotal-this.lastNeed,V=function T(ee,K,V){if(128!=(192&K[0]))return ee.lastNeed=0,"\ufffd";if(ee.lastNeed>1&&K.length>1){if(128!=(192&K[1]))return ee.lastNeed=1,"\ufffd";if(ee.lastNeed>2&&K.length>2&&128!=(192&K[2]))return ee.lastNeed=2,"\ufffd"}}(this,ee);return void 0!==V?V:this.lastNeed<=ee.length?(ee.copy(this.lastChar,K,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ee.copy(this.lastChar,K,0,ee.length),void(this.lastNeed-=ee.length))}function se(ee,K){if((ee.length-K)%2==0){var V=ee.toString("utf16le",K);if(V){var x=V.charCodeAt(V.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1],V.slice(0,-1)}return V}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ee[ee.length-1],ee.toString("utf16le",K,ee.length-1)}function S(ee){var K=ee&&ee.length?this.write(ee):"";return this.lastNeed?K+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):K}function $(ee,K){var V=(ee.length-K)%3;return 0===V?ee.toString("base64",K):(this.lastNeed=3-V,this.lastTotal=3,1===V?this.lastChar[0]=ee[ee.length-1]:(this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1]),ee.toString("base64",K,ee.length-V))}function ce(ee){var K=ee&&ee.length?this.write(ee):"";return this.lastNeed?K+this.lastChar.toString("base64",0,3-this.lastNeed):K}function X(ee){return ee.toString(this.encoding)}function ie(ee){return ee&&ee.length?this.write(ee):""}Z.StringDecoder=P,P.prototype.write=function(ee){if(0===ee.length)return"";var K,V;if(this.lastNeed){if(void 0===(K=this.fillLast(ee)))return"";V=this.lastNeed,this.lastNeed=0}else V=0;return V<ee.length?K?K+this.text(ee,V):this.text(ee,V):K||""},P.prototype.end=function U(ee){var K=ee&&ee.length?this.write(ee):"";return this.lastNeed?K+"\ufffd":K},P.prototype.text=function N(ee,K){var V=function y(ee,K,V){var x=K.length-1;if(x<V)return 0;var B=_(K[x]);return B>=0?(B>0&&(ee.lastNeed=B-1),B):--x<V||-2===B?0:(B=_(K[x]))>=0?(B>0&&(ee.lastNeed=B-2),B):--x<V||-2===B?0:(B=_(K[x]))>=0?(B>0&&(2===B?B=0:ee.lastNeed=B-3),B):0}(this,ee,K);if(!this.lastNeed)return ee.toString("utf8",K);this.lastTotal=V;var x=ee.length-(V-this.lastNeed);return ee.copy(this.lastChar,0,x),ee.toString("utf8",K,x)},P.prototype.fillLast=function(ee){if(this.lastNeed<=ee.length)return ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ee.length),this.lastNeed-=ee.length}},4282:(te,Z,g)=>{var E=g(9007),b=E.Buffer;function k(P,_){for(var y in P)_[y]=P[y]}function A(P,_,y){return b(P,_,y)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?te.exports=E:(k(E,Z),Z.Buffer=A),A.prototype=Object.create(b.prototype),k(b,A),A.from=function(P,_,y){if("number"==typeof P)throw new TypeError("Argument must not be a number");return b(P,_,y)},A.alloc=function(P,_,y){if("number"!=typeof P)throw new TypeError("Argument must be a number");var T=b(P);return void 0!==_?"string"==typeof y?T.fill(_,y):T.fill(_):T.fill(0),T},A.allocUnsafe=function(P){if("number"!=typeof P)throw new TypeError("Argument must be a number");return b(P)},A.allocUnsafeSlow=function(P){if("number"!=typeof P)throw new TypeError("Argument must be a number");return E.SlowBuffer(P)}},496:te=>{function g(E){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[E];return null!=b&&"true"===String(b).toLowerCase()}te.exports=function Z(E,b){if(g("noDeprecation"))return E;var k=!1;return function A(){if(!k){if(g("throwDeprecation"))throw new Error(b);g("traceDeprecation")?console.trace(b):console.warn(b),k=!0}return E.apply(this,arguments)}}},1171:te=>{"use strict";te.exports=function(Z){Z.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(te,Z,g)=>{"use strict";function E(_){var y=this;if(y instanceof E||(y=new E),y.tail=null,y.head=null,y.length=0,_&&"function"==typeof _.forEach)_.forEach(function(N){y.push(N)});else if(arguments.length>0)for(var T=0,F=arguments.length;T<F;T++)y.push(arguments[T]);return y}function b(_,y,T){var F=y===_.head?new P(T,null,y,_):new P(T,y,y.next,_);return null===F.next&&(_.tail=F),null===F.prev&&(_.head=F),_.length++,F}function k(_,y){_.tail=new P(y,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function A(_,y){_.head=new P(y,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function P(_,y,T,F){if(!(this instanceof P))return new P(_,y,T,F);this.list=F,this.value=_,y?(y.next=this,this.prev=y):this.prev=null,T?(T.prev=this,this.next=T):this.next=null}te.exports=E,E.Node=P,E.create=E,E.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var y=_.next,T=_.prev;return y&&(y.prev=T),T&&(T.next=y),_===this.head&&(this.head=y),_===this.tail&&(this.tail=T),_.list.length--,_.next=null,_.prev=null,_.list=null,y},E.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var y=this.head;_.list=this,_.next=y,y&&(y.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},E.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var y=this.tail;_.list=this,_.prev=y,y&&(y.next=_),this.tail=_,this.head||(this.head=_),this.length++}},E.prototype.push=function(){for(var _=0,y=arguments.length;_<y;_++)k(this,arguments[_]);return this.length},E.prototype.unshift=function(){for(var _=0,y=arguments.length;_<y;_++)A(this,arguments[_]);return this.length},E.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},E.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},E.prototype.forEach=function(_,y){y=y||this;for(var T=this.head,F=0;null!==T;F++)_.call(y,T.value,F,this),T=T.next},E.prototype.forEachReverse=function(_,y){y=y||this;for(var T=this.tail,F=this.length-1;null!==T;F--)_.call(y,T.value,F,this),T=T.prev},E.prototype.get=function(_){for(var y=0,T=this.head;null!==T&&y<_;y++)T=T.next;if(y===_&&null!==T)return T.value},E.prototype.getReverse=function(_){for(var y=0,T=this.tail;null!==T&&y<_;y++)T=T.prev;if(y===_&&null!==T)return T.value},E.prototype.map=function(_,y){y=y||this;for(var T=new E,F=this.head;null!==F;)T.push(_.call(y,F.value,this)),F=F.next;return T},E.prototype.mapReverse=function(_,y){y=y||this;for(var T=new E,F=this.tail;null!==F;)T.push(_.call(y,F.value,this)),F=F.prev;return T},E.prototype.reduce=function(_,y){var T,F=this.head;if(arguments.length>1)T=y;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");F=this.head.next,T=this.head.value}for(var N=0;null!==F;N++)T=_(T,F.value,N),F=F.next;return T},E.prototype.reduceReverse=function(_,y){var T,F=this.tail;if(arguments.length>1)T=y;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");F=this.tail.prev,T=this.tail.value}for(var N=this.length-1;null!==F;N--)T=_(T,F.value,N),F=F.prev;return T},E.prototype.toArray=function(){for(var _=new Array(this.length),y=0,T=this.head;null!==T;y++)_[y]=T.value,T=T.next;return _},E.prototype.toArrayReverse=function(){for(var _=new Array(this.length),y=0,T=this.tail;null!==T;y++)_[y]=T.value,T=T.prev;return _},E.prototype.slice=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var T=new E;if(y<_||y<0)return T;_<0&&(_=0),y>this.length&&(y=this.length);for(var F=0,N=this.head;null!==N&&F<_;F++)N=N.next;for(;null!==N&&F<y;F++,N=N.next)T.push(N.value);return T},E.prototype.sliceReverse=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var T=new E;if(y<_||y<0)return T;_<0&&(_=0),y>this.length&&(y=this.length);for(var F=this.length,N=this.tail;null!==N&&F>y;F--)N=N.prev;for(;null!==N&&F>_;F--,N=N.prev)T.push(N.value);return T},E.prototype.splice=function(_,y,...T){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var F=0,N=this.head;null!==N&&F<_;F++)N=N.next;var U=[];for(F=0;N&&F<y;F++)U.push(N.value),N=this.removeNode(N);for(null===N&&(N=this.tail),N!==this.head&&N!==this.tail&&(N=N.prev),F=0;F<T.length;F++)N=b(this,N,T[F]);return U},E.prototype.reverse=function(){for(var _=this.head,y=this.tail,T=_;null!==T;T=T.prev){var F=T.prev;T.prev=T.next,T.next=F}return this.head=y,this.tail=_,this};try{g(1171)(E)}catch{}},643:()=>{},9081:()=>{},3012:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(te,Z,g)=>{var E=g(3801);function b(k){var A,P;function _(T,F){try{var N=k[T](F),U=N.value,se=U instanceof E;Promise.resolve(se?U.v:U).then(function(S){if(se){var $="return"===T?"return":"next";if(!U.k||S.done)return _($,S);S=k[$](S).value}y(N.done?"return":"normal",S)},function(S){_("throw",S)})}catch(S){y("throw",S)}}function y(T,F){switch(T){case"return":A.resolve({value:F,done:!0});break;case"throw":A.reject(F);break;default:A.resolve({value:F,done:!1})}(A=A.next)?_(A.key,A.arg):P=null}this._invoke=function(T,F){return new Promise(function(N,U){var se={key:T,arg:F,resolve:N,reject:U,next:null};P?P=P.next=se:(A=P=se,_(T,F))})},"function"!=typeof k.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(k){return this._invoke("next",k)},b.prototype.throw=function(k){return this._invoke("throw",k)},b.prototype.return=function(k){return this._invoke("return",k)},te.exports=b,te.exports.__esModule=!0,te.exports.default=te.exports},3801:te=>{te.exports=function Z(g,E){this.v=g,this.k=E},te.exports.__esModule=!0,te.exports.default=te.exports},8131:(te,Z,g)=>{var E=g(3801);te.exports=function b(k){var A={},P=!1;function _(y,T){return P=!0,T=new Promise(function(F){F(k[y](T))}),{done:!1,value:new E(T,1)}}return A[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},A.next=function(y){return P?(P=!1,y):_("next",y)},"function"==typeof k.throw&&(A.throw=function(y){if(P)throw P=!1,y;return _("throw",y)}),"function"==typeof k.return&&(A.return=function(y){return P?(P=!1,y):_("return",y)}),A},te.exports.__esModule=!0,te.exports.default=te.exports},8237:te=>{function g(E){function b(k){if(Object(k)!==k)return Promise.reject(new TypeError(k+" is not an object."));var A=k.done;return Promise.resolve(k.value).then(function(P){return{value:P,done:A}})}return(g=function(A){this.s=A,this.n=A.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(A){var P=this.s.return;return void 0===P?Promise.resolve({value:A,done:!0}):b(P.apply(this.s,arguments))},throw:function(A){var P=this.s.return;return void 0===P?Promise.reject(A):b(P.apply(this.s,arguments))}},new g(E)}te.exports=function Z(E){var b,k,A,P=2;for(typeof Symbol<"u"&&(k=Symbol.asyncIterator,A=Symbol.iterator);P--;){if(k&&null!=(b=E[k]))return b.call(E);if(A&&null!=(b=E[A]))return new g(b.call(E));k="@@asyncIterator",A="@@iterator"}throw new TypeError("Object is not async iterable")},te.exports.__esModule=!0,te.exports.default=te.exports},7156:te=>{function Z(E,b,k,A,P,_,y){try{var T=E[_](y),F=T.value}catch(N){return void k(N)}T.done?b(F):Promise.resolve(F).then(A,P)}te.exports=function g(E){return function(){var b=this,k=arguments;return new Promise(function(A,P){var _=E.apply(b,k);function y(F){Z(_,A,P,y,T,"next",F)}function T(F){Z(_,A,P,y,T,"throw",F)}y(void 0)})}},te.exports.__esModule=!0,te.exports.default=te.exports},6737:(te,Z,g)=>{var E=g(3801);te.exports=function b(k){return new E(k,0)},te.exports.__esModule=!0,te.exports.default=te.exports},8186:(te,Z,g)=>{var E=g(4642);te.exports=function b(k){return function(){return new E(k.apply(this,arguments))}},te.exports.__esModule=!0,te.exports.default=te.exports}},te=>{te(te.s=7467)}]);