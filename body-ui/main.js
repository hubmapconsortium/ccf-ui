(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[179],{2943:(Ue,ge,C)=>{"use strict";var J={};C.r(J),C.d(J,{decode:()=>_ge,name:()=>gge});var A={};C.r(A),C.d(A,{name:()=>Cge,preprocess:()=>Tge});var te={};C.r(te),C.d(te,{name:()=>Mge,preprocess:()=>Ige});var B={};C.r(B),C.d(B,{decode:()=>p_e,encode:()=>m_e,name:()=>h_e,preprocess:()=>f_e});var ee={};C.r(ee),C.d(ee,{decode:()=>S_e,name:()=>w_e});var g={};C.r(g),C.d(g,{decode:()=>k_e,encode:()=>P_e,name:()=>O_e});var w={};C.r(w),C.d(w,{decode:()=>F_e,encode:()=>L_e,name:()=>N_e});var N={};C.r(N),C.d(N,{decode:()=>j_e,encode:()=>U_e,name:()=>B_e});var G={};function R(t){return"function"==typeof t}function W(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}C.r(G),C.d(G,{decode:()=>G_e,name:()=>H_e});const de=W(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function I(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class V{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(R(i))try{i()}catch(o){e=o instanceof de?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{oe(o)}catch(s){e=e??[],s instanceof de?e=[...e,...s.errors]:e.push(s)}}if(e)throw new de(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oe(e);else{if(e instanceof V){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&I(n,e)}remove(e){const{_finalizers:n}=this;n&&I(n,e),e instanceof V&&e._removeParent(this)}}V.EMPTY=(()=>{const t=new V;return t.closed=!0,t})();const ae=V.EMPTY;function K(t){return t instanceof V||t&&"closed"in t&&R(t.remove)&&R(t.add)&&R(t.unsubscribe)}function oe(t){R(t)?t():t.unsubscribe()}const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},X={setTimeout(t,e,...n){const{delegate:i}=X;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=X;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function L(t){X.setTimeout(()=>{const{onUnhandledError:e}=ne;if(!e)throw t;e(t)})}function _(){}const O=j("C",void 0,void 0);function j(t,e,n){return{kind:t,value:e,error:n}}let Te=null;function se(t){if(ne.useDeprecatedSynchronousErrorHandling){const e=!Te;if(e&&(Te={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=Te;if(Te=null,n)throw i}}else t()}class Re extends V{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,K(e)&&e.add(this)):this.destination=fe}static create(e,n,i){return new we(e,n,i)}next(e){this.isStopped?Ve(function ue(t){return j("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ve(function S(t){return j("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ve(O,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Qe(t,e){return Oe.call(t,e)}class Xe{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Ne(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Ne(i)}else Ne(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ne(n)}}}class we extends Re{constructor(e,n,i){let r;if(super(),R(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&ne.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Qe(e.next,o),error:e.error&&Qe(e.error,o),complete:e.complete&&Qe(e.complete,o)}):r=e}this.destination=new Xe(r)}}function Ne(t){ne.useDeprecatedSynchronousErrorHandling?function Se(t){ne.useDeprecatedSynchronousErrorHandling&&Te&&(Te.errorThrown=!0,Te.error=t)}(t):L(t)}function Ve(t,e){const{onStoppedNotification:n}=ne;n&&X.setTimeout(()=>n(t,e))}const fe={closed:!0,next:_,error:function Pe(t){throw t},complete:_},Ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function $e(t){return t}function ot(...t){return Je(t)}function Je(t){return 0===t.length?$e:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function ie(t){return t&&t instanceof Re||function E(t){return t&&R(t.next)&&R(t.error)&&R(t.complete)}(t)&&K(t)}(n)?n:new we(n,i,r);return se(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=P(i))((r,o)=>{const s=new we({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Ee](){return this}pipe(...n){return Je(n)(this)}toPromise(n){return new(n=P(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function P(t){var e;return null!==(e=t??ne.Promise)&&void 0!==e?e:Promise}const z=W(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ae=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new et(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new z}next(n){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?ae:(this.currentObservers=null,o.push(n),new V(()=>{this.currentObservers=null,I(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new le;return n.source=this,n}}return t.create=(e,n)=>new et(e,n),t})();class et extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:ae}}class ce extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Z(t){return R(t?.lift)}function F(t){return e=>{if(Z(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function x(t,e,n,i,r){return new M(t,e,n,i,r)}class M extends Re{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Q(t,e){return F((n,i)=>{let r=0;n.subscribe(x(i,o=>{i.next(t.call(e,o,r++))}))})}function vt(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function mt(t,e){return function(n,i){e(n,i,t)}}function v(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function gr(t){return this instanceof gr?(this.v=t,this):new gr(t)}function zi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Wt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Nc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ol(t){return R(t?.then)}function Fc(t){return R(t[Ee])}function jd(t){return Symbol.asyncIterator&&R(t?.[Symbol.asyncIterator])}function Lc(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bc=function eh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kl(t){return R(t?.[Bc])}function jc(t){return function ss(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(p){i[p]&&(r[p]=function(m){return new Promise(function(b,T){o.push([p,m,b,T])>1||a(p,m)})})}function a(p,m){try{!function c(p){p.value instanceof gr?Promise.resolve(p.value.v).then(l,d):h(o[0][2],p)}(i[p](m))}catch(b){h(o[0][3],b)}}function l(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield gr(n.read());if(r)return yield gr(void 0);yield yield gr(i)}}finally{n.releaseLock()}})}function xi(t){return R(t?.getReader)}function ki(t){if(t instanceof le)return t;if(null!=t){if(Fc(t))return function ks(t){return new le(e=>{const n=t[Ee]();if(R(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Nc(t))return function Ca(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ol(t))return function Ta(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,L)})}(t);if(jd(t))return go(t);if(kl(t))return function cc(t){return new le(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(xi(t))return function me(t){return go(jc(t))}(t)}throw Lc(t)}function go(t){return new le(e=>{(function Me(t,e){var n,i,r,o;return function re(t,e,n,i){return new(n||(n=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=zi(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function be(t,e,n,i=0,r=!1){const o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function $(t,e,n=1/0){return R(e)?$((i,r)=>Q((o,s)=>e(i,o,r,s))(ki(t(i,r))),n):("number"==typeof e&&(n=e),F((i,r)=>function k(t,e,n,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const p=()=>{h&&!c.length&&!l&&e.complete()},m=T=>l<i?b(T):c.push(T),b=T=>{o&&e.next(T),l++;let D=!1;ki(n(T,d++)).subscribe(x(e,U=>{r?.(U),o?m(U):e.next(U)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<i;){const U=c.shift();s?be(e,s,()=>b(U)):b(U)}p()}catch(U){e.error(U)}}))};return t.subscribe(x(e,m,()=>{h=!0,p()})),()=>{a?.()}}(i,r,t,n)))}function pe(t=1/0){return $($e,t)}const Le=new le(t=>t.complete());function Et(t){return t&&R(t.schedule)}function Mt(t){return t[t.length-1]}function Ft(t){return R(Mt(t))?t.pop():void 0}function Jt(t){return Et(Mt(t))?t.pop():void 0}function so(t,e=0){return F((n,i)=>{n.subscribe(x(i,r=>be(i,t,()=>i.next(r),e),()=>be(i,t,()=>i.complete(),e),r=>be(i,t,()=>i.error(r),e)))})}function Ar(t,e=0){return F((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function _o(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{be(n,e,()=>{const i=t[Symbol.asyncIterator]();be(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Ei(t,e){return e?function Pl(t,e){if(null!=t){if(Fc(t))return function Do(t,e){return ki(t).pipe(Ar(e),so(e))}(t,e);if(Nc(t))return function na(t,e){return new le(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(Ol(t))return function Uc(t,e){return ki(t).pipe(Ar(e),so(e))}(t,e);if(jd(t))return _o(t,e);if(kl(t))return function jr(t,e){return new le(n=>{let i;return be(n,e,()=>{i=t[Bc](),be(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>R(i?.return)&&i.return()})}(t,e);if(xi(t))return function Vc(t,e){return _o(jc(t),e)}(t,e)}throw Lc(t)}(t,e):ki(t)}function Sr(...t){const e=Jt(t),n=function vn(t,e){return"number"==typeof Mt(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?ki(i[0]):pe(n)(Ei(i,e)):Le}function qt(...t){return Ei(t,Jt(t))}function Ro(t={}){const{connector:e=(()=>new Ae),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=c=void 0,d=h=!1},b=()=>{const T=s;m(),T?.unsubscribe()};return F((T,D)=>{l++,!h&&!d&&p();const U=c=c??e();D.add(()=>{l--,0===l&&!h&&!d&&(a=ke(b,r))}),U.subscribe(D),!s&&l>0&&(s=new we({next:Y=>U.next(Y),error:Y=>{h=!0,p(),a=ke(m,n,Y),U.error(Y)},complete:()=>{d=!0,p(),a=ke(m,i),U.complete()}}),ki(T).subscribe(s))})(o)}}function ke(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new we({next:()=>{i.unsubscribe(),t()}});return ki(e(...n)).subscribe(i)}function Fe(t,e){return F((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(x(i,c=>{r?.unsubscribe();let l=0;const d=o++;ki(t(c,d)).subscribe(r=x(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function tt(t,e=$e){return t=t??ft,F((n,i)=>{let r,o=!0;n.subscribe(x(i,s=>{const a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function ft(t,e){return t===e}function wt(t){for(let e in t)if(t[e]===wt)return e;throw Error("Could not find renamed property on target object.")}function Xt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(mn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ar(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Dr=wt({__forward_ref__:wt});function On(t){return t.__forward_ref__=On,t.toString=function(){return mn(this())},t}function gn(t){return Hg(t)?t():t}function Hg(t){return"function"==typeof t&&t.hasOwnProperty(Dr)&&t.__forward_ref__===On}function qf(t){return t&&!!t.\u0275providers}const lv="https://g.co/ng/security#xss";class Rt extends Error{constructor(e,n){super(function Jf(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function kn(t){return"string"==typeof t?t:null==t?"":String(t)}function Gg(t,e){throw new Rt(-201,!1)}function cs(t,e){null==t&&function Sn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function St(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function th(t){return uv(t,nh)||uv(t,ih)}function uv(t,e){return t.hasOwnProperty(e)?t[e]:null}function Qf(t){return t&&(t.hasOwnProperty(Ma)||t.hasOwnProperty(Wg))?t[Ma]:null}const nh=wt({\u0275prov:wt}),Ma=wt({\u0275inj:wt}),ih=wt({ngInjectableDef:wt}),Wg=wt({ngInjectorDef:wt});var pn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(pn||{});let Ia;function Wo(t){const e=Ia;return Ia=t,e}function tp(t,e,n){const i=th(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&pn.Optional?null:void 0!==e?e:void Gg(mn(t))}const Ai=globalThis,oh={},ip="__NG_DI_FLAG__",yo="ngTempTokenPath",sh=/\n/gm,Yg="__source";let Vd;function Hc(t){const e=Vd;return Vd=t,e}function ES(t,e=pn.Default){if(void 0===Vd)throw new Rt(-203,!1);return null===Vd?tp(t,void 0,e):Vd.get(t,e&pn.Optional?null:void 0,e)}function nt(t,e=pn.Default){return(function ep(){return Ia}()||ES)(gn(t),e)}function Ht(t,e=pn.Default){return nt(t,rp(e))}function rp(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ah(t){const e=[];for(let n=0;n<t.length;n++){const i=gn(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Rt(900,!1);let r,o=pn.Default;for(let s=0;s<i.length;s++){const a=i[s],c=Gc(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(nt(r,o))}else e.push(nt(i))}return e}function zd(t,e){return t[ip]=e,t.prototype[ip]=e,t}function Gc(t){return t[ip]}function lc(t){return{toString:t}.toString()}var sp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(sp||{}),vo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vo||{});const Rr={},bi=[],ap=wt({\u0275cmp:wt}),Xg=wt({\u0275dir:wt}),Kg=wt({\u0275pipe:wt}),bv=wt({\u0275mod:wt}),dc=wt({\u0275fac:wt}),Wc=wt({__NG_ELEMENT_ID__:wt}),ct=wt({__NG_ENV_ID__:wt});function At(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function gt(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{const o=r,s=n[++i];Bn(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function en(t){return 3===t||4===t||6===t}function Bn(t){return 64===t.charCodeAt(0)}function fi(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Or(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Or(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Pi="ng-template";function qg(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if("string"==typeof o&&r){const s=t[i++];if(n&&"class"===o&&-1!==At(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<t.length&&"string"==typeof(o=t[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function yv(t){return 4===t.type&&t.value!==Pi}function Ns(t,e,n){return e===(4!==t.type||n?t.value:Pi)}function cp(t,e,n){let i=4;const r=t.attrs||[],o=function Mi(t){for(let e=0;e<t.length;e++)if(en(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!Ns(t,c,n)||""===c&&1===e.length){if(ra(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!qg(t.attrs,l,n)){if(ra(i))return!1;s=!0}continue}const h=Hd(8&i?"class":c,r,yv(t),n);if(-1===h){if(ra(i))return!1;s=!0;continue}if(""!==l){let p;p=h>o?"":r[h+1].toLowerCase();const m=8&i?p:null;if(m&&-1!==At(m,l,0)||2&i&&l!==p){if(ra(i))return!1;s=!0}}}}else{if(!s&&!ra(i)&&!ra(c))return!1;if(s&&ra(c))continue;s=!1,i=c|1&i}}return ra(i)||s}function ra(t){return 0==(1&t)}function Hd(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){const s=e[r];if(s===t)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function SS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function ch(t,e,n=!1){for(let i=0;i<e.length;i++)if(cp(t,e[i],n))return!0;return!1}function vv(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function lh(t,e){return t?":not("+e.trim()+")":e}function CS(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!ra(s)&&(e+=lh(o,r),r=""),i=s,o=o||!ra(i);n++}return""!==r&&(e+=lh(o,r)),e}function Fn(t){return lc(()=>{const e=Ev(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===sp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vo.Emulated,styles:t.styles||bi,_:null,schemas:t.schemas||null,tView:null,id:""};dh(n);const i=t.dependencies;return n.directiveDefs=Ll(i,!1),n.pipeDefs=Ll(i,!0),n.id=function IS(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function dp(t){return si(t)||cr(t)}function xv(t){return null!==t}function on(t){return lc(()=>({type:t.type,bootstrap:t.bootstrap||bi,declarations:t.declarations||bi,imports:t.imports||bi,exports:t.exports||bi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Jg(t,e){if(null==t)return Rr;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function Lt(t){return lc(()=>{const e=Ev(t);return dh(e),e})}function ao(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function si(t){return t[ap]||null}function cr(t){return t[Xg]||null}function Xr(t){return t[Kg]||null}function Ev(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Rr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||bi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jg(t.inputs,e),outputs:Jg(t.outputs)}}function dh(t){t.features?.forEach(e=>e(t))}function Ll(t,e){if(!t)return null;const n=e?Xr:dp;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(xv)}const _r=0,Kt=1,zn=2,Jn=3,Hi=4,uh=5,xo=6,Bl=7,Cr=8,Da=9,Ra=10,Pn=11,Oa=12,Wd=13,ka=14,Zi=15,Pa=16,$d=17,Na=18,hh=19,Av=20,Yc=21,Fs=22,Xc=23,fh=24,De=25,Yd=1,us=2,jn=7,Xd=9,lr=11;function $o(t){return Array.isArray(t)&&"object"==typeof t[Yd]}function Yo(t){return Array.isArray(t)&&!0===t[Yd]}function Qg(t){return 0!=(4&t.flags)}function jl(t){return t.componentOffset>-1}function Ls(t){return 1==(1&t.flags)}function oa(t){return!!t.template}function e_(t){return 0!=(512&t[zn])}function hc(t,e){return t.hasOwnProperty(dc)?t[dc]:null}let fc=Ai.WeakRef??class PS{constructor(e){this.ref=e}deref(){return this.ref}},Bs=0,La=null,gh=!1;function Ur(t){const e=La;return La=t,e}class Zd{constructor(){this.id=Bs++,this.ref=function o_(t){return new fc(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=gh;gh=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{gh=e}}producerAccessed(){if(gh)throw new Error("");if(null===La)return;let e=La.producers.get(this.id);void 0===e?(e={consumerNode:La.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:La.trackingVersion},La.producers.set(this.id,e),this.consumers.set(La.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=La.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==La?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let Kr=null;function l_(t){const e=Ur(null);try{return t()}finally{Ur(e)}}const wo=()=>{};class d_ extends Zd{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=wo,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Ur(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=wo,this.watch(this.registerOnCleanup)}finally{Ur(e)}}cleanup(){this.cleanupFn()}}class Tv{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function kr(){return Mv}function Mv(t){return t.type.prototype.ngOnChanges&&(t.setInput=LS),u_}function u_(){const t=h_(this),e=t?.current;if(e){const n=t.previous;if(n===Rr)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function LS(t,e,n,i){const r=this.declaredInputs[n],o=h_(t)||function BS(t,e){return t[eu]=e}(t,{previous:Rr,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new Tv(c&&c.currentValue,e,a===Rr),t[i]=e}kr.ngInherit=!0;const eu="__ngSimpleChanges__";function h_(t){return t[eu]||null}const Ba=function(t,e,n){};function Fi(t){for(;Array.isArray(t);)t=t[_r];return t}function pp(t,e){return Fi(e[t])}function Xo(t,e){return Fi(e[t.index])}function mp(t,e){return t.data[e]}function Oo(t,e){const n=e[t];return $o(n)?n:n[_r]}function sa(t,e){return null==e?null:t[e]}function Pv(t){t[$d]=0}function Nv(t){1024&t[zn]||(t[zn]|=1024,Fv(t,1))}function p_(t){1024&t[zn]&&(t[zn]&=-1025,Fv(t,-1))}function Fv(t,e){let n=t[Jn];if(null===n)return;n[uh]+=e;let i=n;for(n=n[Jn];null!==n&&(1===e&&1===i[uh]||-1===e&&0===i[uh]);)n[uh]+=e,i=n,n=n[Jn]}const Cn={lFrame:ca(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Bv(){return Cn.bindingsEnabled}function nu(){return null!==Cn.skipHydrationRootTNode}function Dt(){return Cn.lFrame.lView}function li(){return Cn.lFrame.tView}function br(t){return Cn.lFrame.contextLView=t,t[Cr]}function Tr(t){return Cn.lFrame.contextLView=null,t}function qr(){let t=Ko();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ko(){return Cn.lFrame.currentTNode}function Vs(t,e){const n=Cn.lFrame;n.currentTNode=t,n.isParent=e}function gp(){return Cn.lFrame.isParent}function iu(){Cn.lFrame.isParent=!1}function ru(){return Cn.lFrame.bindingIndex++}function Eo(t){const e=Cn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function v_(t,e){const n=Cn.lFrame;n.bindingIndex=n.bindingRootIndex=t,x_(e)}function x_(t){Cn.lFrame.currentDirectiveIndex=t}function E_(){return Cn.lFrame.currentQueryIndex}function _p(t){Cn.lFrame.currentQueryIndex=t}function WS(t){const e=t[Kt];return 2===e.type?e.declTNode:1===e.type?t[xo]:null}function A_(t,e,n){if(n&pn.SkipSelf){let r=e,o=t;for(;!(r=r.parent,null!==r||n&pn.Host||(r=WS(o),null===r||(o=o[ka],10&r.type))););if(null===r)return!1;e=r,t=o}const i=Cn.lFrame=ko();return i.currentTNode=e,i.lView=t,!0}function bp(t){const e=ko(),n=t[Kt];Cn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ko(){const t=Cn.lFrame,e=null===t?null:t.child;return null===e?ca(t):e}function ca(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Hv(){const t=Cn.lFrame;return Cn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Gv=Hv;function ou(){const t=Hv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ao(){return Cn.lFrame.selectedIndex}function zl(t){Cn.lFrame.selectedIndex=t}function Qi(){const t=Cn.lFrame;return mp(t.tView,t.selectedIndex)}let xh=!0;function wh(){return xh}function la(t){xh=t}function Hl(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function yp(t,e,n){M_(t,e,3,n)}function Eh(t,e,n,i){(3&t[zn])===n&&M_(t,e,n,i)}function au(t,e){let n=t[zn];(3&n)===e&&(n&=8191,n+=1,t[zn]=n)}function M_(t,e,n,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&t[$d]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[$d]+=65536),(a<o||-1==o)&&($S(t,n,e,c),t[$d]=(4294901760&t[$d])+c+2),c++}function vp(t,e){Ba(4,t,e);const n=Ur(null);try{e.call(t)}finally{Ur(n),Ba(5,t,e)}}function $S(t,e,n,i){const r=n[i]<0,o=n[i+1],a=t[r?-n[i]:n[i]];r?t[zn]>>13<t[$d]>>16&&(3&t[zn])===e&&(t[zn]+=8192,vp(a,o)):vp(a,o)}const Gl=-1;class fs{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Ah(t){return t!==Gl}function Wl(t){return 32767&t}function ja(t,e){let n=function xp(t){return t>>16}(t),i=e;for(;n>0;)i=i[ka],n--;return i}let wn=!0;function $l(t){const e=wn;return wn=t,e}const Jc=255,qv=5;let D_=0;const da={};function wp(t,e){const n=O_(t,e);if(-1!==n)return n;const i=e[Kt];i.firstCreatePass&&(t.injectorIndex=e.length,R_(i.data,t),R_(e,null),R_(i.blueprint,null));const r=Ep(t,e),o=t.injectorIndex;if(Ah(r)){const s=Wl(r),a=ja(r,e),c=a[Kt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function R_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function O_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ep(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=N_(r),null===i)return Gl;if(n++,r=r[ka],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Gl}function Ap(t,e,n){!function So(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Wc)&&(i=n[Wc]),null==i&&(i=n[Wc]=D_++);const r=i&Jc;e.data[t+(r>>qv)]|=1<<r}(t,e,n)}function Jv(t,e,n){if(n&pn.Optional||void 0!==t)return t;Gg()}function Zv(t,e,n,i){if(n&pn.Optional&&void 0===i&&(i=null),!(n&(pn.Self|pn.Host))){const r=t[Da],o=Wo(void 0);try{return r?r.get(e,i,n&pn.Optional):tp(e,i,n&pn.Optional)}finally{Wo(o)}}return Jv(i,0,n)}function Ua(t,e,n,i=pn.Default,r){if(null!==t){if(2048&e[zn]&&!(i&pn.Self)){const s=function tx(t,e,n,i,r){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[zn]&&!(512&s[zn]);){const a=Co(o,s,n,i|pn.Self,da);if(a!==da)return a;let c=o.parent;if(!c){const l=s[Av];if(l){const d=l.get(n,da,i);if(d!==da)return d}c=N_(s),s=s[ka]}o=c}return r}(t,e,n,i,da);if(s!==da)return s}const o=Co(t,e,n,i,da);if(o!==da)return o}return Zv(e,n,i,r)}function Co(t,e,n,i,r){const o=function ZS(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Wc)?t[Wc]:void 0;return"number"==typeof e?e>=0?e&Jc:QS:e}(n);if("function"==typeof o){if(!A_(e,t,i))return i&pn.Host?Jv(r,0,i):Zv(e,n,i,r);try{let s;if(s=o(i),null!=s||i&pn.Optional)return s;Gg()}finally{Gv()}}else if("number"==typeof o){let s=null,a=O_(t,e),c=Gl,l=i&pn.Host?e[Zi][xo]:null;for((-1===a||i&pn.SkipSelf)&&(c=-1===a?Ep(t,e):e[a+8],c!==Gl&&cu(i,!1)?(s=e[Kt],a=Wl(c),e=ja(c,e)):a=-1);-1!==a;){const d=e[Kt];if(Qv(o,a,d.data)){const h=k_(a,e,n,s,i,l);if(h!==da)return h}c=e[a+8],c!==Gl&&cu(i,e[Kt].data[a+8]===l)&&Qv(o,a,e)?(s=d,a=Wl(c),e=ja(c,e)):a=-1}}return r}function k_(t,e,n,i,r,o){const s=e[Kt],a=s.data[t+8],d=Sp(a,s,n,null==i?jl(a)&&wn:i!=s&&0!=(3&a.type),r&pn.Host&&o===a);return null!==d?mc(e,s,d,a):da}function Sp(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,p=r?a+d:t.directiveEnd;for(let m=i?a:a+d;m<p;m++){const b=s[m];if(m<c&&n===b||m>=c&&b.type===n)return m}if(r){const m=s[c];if(m&&oa(m)&&m.type===n)return c}return null}function mc(t,e,n,i){let r=t[n];const o=e.data;if(function Yv(t){return t instanceof fs}(r)){const s=r;s.resolving&&function hS(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Rt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ci(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():kn(t)}(o[n]));const a=$l(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Wo(s.injectImpl):null;A_(t,i,pn.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function T_(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=Mv(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&Wo(l),$l(a),s.resolving=!1,Gv()}}return r}function Qv(t,e,n){return!!(n[e+(t>>qv)]&1<<t)}function cu(t,e){return!(t&pn.Self||t&pn.Host&&e)}class Po{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Ua(this._tNode,this._lView,e,rp(i),n)}}function QS(){return new Po(qr(),Dt())}function Li(t){return lc(()=>{const e=t.prototype.constructor,n=e[dc]||P_(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[dc]||P_(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function P_(t){return Hg(t)?()=>{const e=P_(gn(t));return e&&e()}:hc(t)}function N_(t){const e=t[Kt],n=e.type;return 2===n?e.declTNode:1===n?t[xo]:null}function Zc(t){return function JS(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(en(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===e)return n[r+1];r+=2}}}return null}(qr(),t)}const Yl="__parameters__";function Xl(t,e,n){return lc(()=>{const i=function Tp(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(Yl)?c[Yl]:Object.defineProperty(c,Yl,{value:[]})[Yl];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function hu(t,e){t.forEach(n=>Array.isArray(n)?hu(n,e):e(n))}function L_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ch(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fu(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function ps(t,e,n){let i=pu(t,e);return i>=0?t[1|i]=n:(i=~i,function sC(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function B_(t,e){const n=pu(t,e);if(n>=0)return t[1|n]}function pu(t,e){return function ix(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}(t,e,1)}const mu=zd(Xl("Optional"),8),Ip=zd(Xl("SkipSelf"),4);function Np(t){return 128==(128&t.flags)}var el=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(el||{});const $_=new Map;let SC=0;const X_="__ngContext__";function To(t,e){$o(e)?(t[X_]=e[hh],function Lp(t){$_.set(t[hh],t)}(e)):t[X_]=e}let jp;function Z_(t,e){return jp(t,e)}function Ih(t){const e=t[Jn];return Yo(e)?e[Jn]:e}function Cx(t){return zp(t[Oa])}function Tx(t){return zp(t[Hi])}function zp(t){for(;null!==t&&!Yo(t);)t=t[Hi];return t}function Kl(t,e,n,i,r){if(null!=i){let o,s=!1;Yo(i)?o=i:$o(i)&&(s=!0,i=i[_r]);const a=Fi(i);0===t&&null!==n?null==r?yr(e,n,a):Pr(e,n,a,r||null,!0):1===t&&null!==n?Pr(e,n,a,r||null,!0):2===t?function Rh(t,e,n){const i=$p(t,e);i&&function tl(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function jC(t,e,n,i,r){const o=n[jn];o!==Fi(n)&&Kl(e,t,i,o,r);for(let a=lr;a<n.length;a++){const c=n[a];Oh(c[Kt],c,t,e,i,o)}}(e,t,o,n,r)}}function Gp(t,e,n){return t.createElement(e,n)}function Ix(t,e){const n=t[Xd],i=n.indexOf(e);p_(e),n.splice(i,1)}function Wp(t,e){if(t.length<=lr)return;const n=lr+e,i=t[n];if(i){const r=i[Pa];null!==r&&r!==t&&Ix(r,i),e>0&&(t[n-1][Hi]=i[Hi]);const o=Ch(t,lr+e);!function DC(t,e){Oh(t,e,e[Pn],2,null,null),e[_r]=null,e[xo]=null}(i[Kt],i);const s=o[Na];null!==s&&s.detachView(o[Kt]),i[Jn]=null,i[Hi]=null,i[zn]&=-129}return i}function ms(t,e){if(!(256&e[zn])){const n=e[Pn];e[Xc]?.destroy(),e[fh]?.destroy(),n.destroyNode&&Oh(t,e,n,3,null,null),function kC(t){let e=t[Oa];if(!e)return eb(t[Kt],t);for(;e;){let n=null;if($o(e))n=e[Oa];else{const i=e[lr];i&&(n=i)}if(!n){for(;e&&!e[Hi]&&e!==t;)$o(e)&&eb(e[Kt],e),e=e[Jn];null===e&&(e=t),$o(e)&&eb(e[Kt],e),n=e&&e[Hi]}e=n}}(e)}}function eb(t,e){if(!(256&e[zn])){e[zn]&=-129,e[zn]|=256,function ql(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof fs)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Ba(4,a,c);try{c.call(a)}finally{Ba(5,a,c)}}else{Ba(4,r,o);try{o.call(r)}finally{Ba(5,r,o)}}}}}(t,e),function FC(t,e){const n=t.cleanup,i=e[Bl];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else n[o].call(i[n[o+1]]);null!==i&&(e[Bl]=null);const r=e[Yc];if(null!==r){e[Yc]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,e),1===e[Kt].type&&e[Pn].destroy();const n=e[Pa];if(null!==n&&Yo(e[Jn])){n!==e[Jn]&&Ix(n,e);const i=e[Na];null!==i&&i.detachView(t)}!function TC(t){$_.delete(t[hh])}(e)}}function Un(t,e,n){return function Dx(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[_r];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===vo.None||o===vo.Emulated)return null}return Xo(i,n)}}(t,e.parent,n)}function Pr(t,e,n,i,r){t.insertBefore(e,n,i,r)}function yr(t,e,n){t.appendChild(e,n)}function Rx(t,e,n,i,r){null!==i?Pr(t,e,n,i,r):yr(t,e,n)}function $p(t,e){return t.parentNode(e)}function Ox(t,e,n){return Yp(t,e,n)}let tb,Ph,ib,Yp=function kx(t,e,n){return 40&t.type?Xo(t,n):null};function Dh(t,e,n,i){const r=Un(t,i,e),o=e[Pn],a=Ox(i.parent||e[xo],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)Rx(o,r,n[c],a,!1);else Rx(o,r,n,a,!1);void 0!==tb&&tb(o,i,e,n,r)}function nl(t,e){if(null!==e){const n=e.type;if(3&n)return Xo(e,t);if(4&n)return tr(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return nl(t,i);{const r=t[e.index];return Yo(r)?tr(-1,r):Fi(r)}}if(32&n)return Z_(e,t)()||Fi(t[e.index]);{const i=er(t,e);return null!==i?Array.isArray(i)?i[0]:nl(Ih(t[Zi]),i):nl(t,e.next)}}return null}function er(t,e){return null!==e?t[Zi][xo].projection[e.projection]:null}function tr(t,e){const n=lr+t+1;if(n<e.length){const i=e[n],r=i[Kt].firstChild;if(null!==r)return nl(i,r)}return e[jn]}function nb(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],c=n.type;if(s&&0===e&&(a&&To(Fi(a),i),n.flags|=2),32!=(32&n.flags))if(8&c)nb(t,e,n.child,i,r,o,!1),Kl(e,t,r,a,o);else if(32&c){const l=Z_(n,i);let d;for(;d=l();)Kl(e,t,r,d,o);Kl(e,t,r,a,o)}else 16&c?Nx(t,e,i,n,r,o):Kl(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Oh(t,e,n,i,r,o){nb(n,i,t.firstChild,e,r,o,!1)}function Nx(t,e,n,i,r,o){const s=n[Zi],c=s[xo].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Kl(e,t,r,c[l],o);else{let l=c;const d=s[Jn];Np(i)&&(l.flags|=128),nb(t,e,l,d,r,o,!0)}}function Xp(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Lx(t,e,n){const{mergedAttrs:i,classes:r,styles:o}=n;null!==i&&gt(t,e,i),null!==r&&Xp(t,e,r),null!==o&&function kh(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Jr(t){return function bu(){if(void 0===Ph&&(Ph=null,Ai.trustedTypes))try{Ph=Ai.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ph}()?.createHTML(t)||t}class Zl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lv})`}}class Ti extends Zl{getTypeName(){return"HTML"}}class HC extends Zl{getTypeName(){return"Style"}}class Bx extends Zl{getTypeName(){return"Script"}}class Kp extends Zl{getTypeName(){return"URL"}}class GC extends Zl{getTypeName(){return"ResourceURL"}}function _s(t){return t instanceof Zl?t.changingThisBreaksApplicationSecurity:t}function Ha(t,e){const n=function WC(t){return t instanceof Zl&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lv})`)}return n===e}class JC{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Jr(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class ZC{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Jr(e),n}}const sb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qp(t){return(t=String(t)).match(sb)?t:"unsafe:"+t}function ua(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Nh(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Ux=ua("area,br,col,hr,img,wbr"),Vx=ua("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zr=ua("rp,rt"),ab=Nh(Ux,Nh(Vx,ua("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nh(zr,ua("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nh(zr,Vx)),Jp=ua("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zx=Nh(Jp,ua("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ua("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hx=ua("script,style,template");class eT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!ab.hasOwnProperty(n))return this.sanitizedSomething=!0,!Hx.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!zx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;Jp[a]&&(c=qp(c)),this.buf.push(" ",s,'="',cb(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();ab.hasOwnProperty(n)&&!Ux.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(cb(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const tT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nT=/([^\#-~ |!])/g;function cb(t){return t.replace(/&/g,"&amp;").replace(tT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(nT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fh;function Gx(t,e){let n=null;try{Fh=Fh||function jx(t){const e=new ZC(t);return function QC(){try{return!!(new window.DOMParser).parseFromString(Jr(""),"text/html")}catch{return!1}}()?new JC(e):e}(t);let i=e?String(e):"";n=Fh.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Fh.getInertBodyElement(i)}while(i!==o);return Jr((new eT).sanitizeChildren(lb(n)||n))}finally{if(n){const i=lb(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function lb(t){return"content"in t&&function iT(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Zr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Zr||{});function db(t){const e=function Lh(){const t=Dt();return t&&t[Ra].sanitizer}();return e?e.sanitize(Zr.URL,t)||"":Ha(t,"URL")?_s(t):qp(kn(t))}class bt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=St({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Bh=new bt("ENVIRONMENT_INITIALIZER"),Zp=new bt("INJECTOR",-1),Kx=new bt("INJECTOR_DEF_TYPES");class ub{get(e,n=oh){if(n===oh){const i=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw i.name="NullInjectorError",i}return n}}function aT(...t){return{\u0275providers:qx(0,t),\u0275fromNgModule:!0}}function qx(t,...e){const n=[],i=new Set;let r;const o=s=>{n.push(s)};return hu(e,s=>{const a=s;Qp(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Jx(r,o),n}function Jx(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];fb(r,o=>{e(o,i)})}}function Qp(t,e,n,i){if(!(t=gn(t)))return!1;let r=null,o=Qf(t);const s=!o&&si(t);if(o||s){if(s&&!s.standalone)return!1;r=t}else{const c=t.ngModule;if(o=Qf(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Qp(l,e,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{hu(o.imports,d=>{Qp(d,e,n,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&Jx(l,e)}if(!a){const l=hc(r)||(()=>new r);e({provide:r,useFactory:l,deps:bi},r),e({provide:Kx,useValue:r,multi:!0},r),e({provide:Bh,useValue:()=>nt(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=t;fb(c,d=>{e(d,l)})}}}return r!==t&&void 0!==t.providers}function fb(t,e){for(let n of t)qf(n)&&(n=n.\u0275providers),Array.isArray(n)?fb(n,e):e(n)}const cT=wt({provide:String,useValue:wt});function pb(t){return null!==t&&"object"==typeof t&&cT in t}function Ql(t){return"function"==typeof t}const mb=new bt("Set Injector scope."),em={},dT={};let jh;function Uh(){return void 0===jh&&(jh=new ub),jh}class ys{}class tm extends ys{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yb(e,s=>this.processProvider(s)),this.records.set(Zp,xu(void 0,this)),r.has("environment")&&this.records.set(ys,xu(void 0,this));const o=this.records.get(mb);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Kx.multi,bi,pn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Hc(this),i=Wo(void 0);try{return e()}finally{Hc(n),Wo(i)}}get(e,n=oh,i=pn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ct))return e[ct](this);i=rp(i);const o=Hc(this),s=Wo(void 0);try{if(!(i&pn.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function bb(t){return"function"==typeof t||"object"==typeof t&&t instanceof bt}(e)&&th(e);c=l&&this.injectableDefInScope(l)?xu(gb(e),em):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&pn.Self?Uh():this.parent).get(e,n=i&pn.Optional&&n===oh?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[yo]=a[yo]||[]).unshift(mn(e)),o)throw a;return function op(t,e,n,i){const r=t[yo];throw e[Yg]&&r.unshift(e[Yg]),t.message=function AS(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=mn(e);if(Array.isArray(e))r=e.map(mn).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):mn(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(sh,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[yo]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Wo(s),Hc(o)}}resolveInjectorInitializers(){const e=Hc(this),n=Wo(void 0);try{const r=this.get(Bh.multi,bi,pn.Self);for(const o of r)o()}finally{Hc(e),Wo(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(mn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Rt(205,!1)}processProvider(e){let n=Ql(e=gn(e))?e:gn(e&&e.provide);const i=function _b(t){return pb(t)?xu(void 0,t.useValue):xu(ew(t),em)}(e);if(Ql(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=xu(void 0,em,!0),r.factory=()=>ah(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===em&&(n.value=dT,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Jo(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=gn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function gb(t){const e=th(t),n=null!==e?e.factory:hc(t);if(null!==n)return n;if(t instanceof bt)throw new Rt(204,!1);if(t instanceof Function)return function uT(t){const e=t.length;if(e>0)throw fu(e,"?"),new Rt(204,!1);const n=function Ps(t){return t&&(t[nh]||t[ih])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Rt(204,!1)}function ew(t,e,n){let i;if(Ql(t)){const r=gn(t);return hc(r)||gb(r)}if(pb(t))i=()=>gn(t.useValue);else if(function Qx(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...ah(t.deps||[]));else if(function Zx(t){return!(!t||!t.useExisting)}(t))i=()=>nt(gn(t.useExisting));else{const r=gn(t&&(t.useClass||t.provide));if(!function hT(t){return!!t.deps}(t))return hc(r)||gb(r);i=()=>new r(...ah(t.deps))}return i}function xu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yb(t,e){for(const n of t)Array.isArray(n)?yb(n,e):n&&qf(n)?yb(n.\u0275providers,e):e(n)}const Vh=new bt("AppId",{providedIn:"root",factory:()=>fT}),fT="ng",tw=new bt("Platform Initializer"),vs=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nr=new bt("AnimationModuleType"),vb=new bt("CSP nonce",{providedIn:"root",factory:()=>function Jl(){if(void 0!==ib)return ib;if(typeof document<"u")return document;throw new Rt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let iw=(t,e,n)=>null;function Cb(t,e,n=!1){return iw(t,e,n)}class Be{}class Ze{}class Tt{resolveComponentFactory(e){throw function it(t){const e=Error(`No component factory found for ${mn(t)}.`);return e.ngComponent=t,e}(e)}}let It=(()=>{class e{}return e.NULL=new Tt,e})();function $t(){return sn(qr(),Dt())}function sn(t,e){return new Nt(Xo(t,e))}let Nt=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=$t,e})();function Qn(t){return t instanceof Nt?t.nativeElement:t}class An{}let xs=(()=>{var t;class e{}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>null}),e})();class vr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ws=new vr("16.2.1"),dr={};function aF(t,e=null,n=null,i){const r=cF(t,e,n,i);return r.resolveInjectorInitializers(),r}function cF(t,e=null,n=null,i,r=new Set){const o=[n||bi,aT(t)];return i=i||("object"==typeof t?void 0:mn(t)),new tm(o,e||Uh(),i||null,r)}let xr=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return aF({name:""},r,i,"");{const o=i.name??"";return aF({name:o},i.parent,i.providers,o)}}}return(t=e).THROW_IF_NOT_FOUND=oh,t.NULL=new ub,t.\u0275prov=St({token:t,providedIn:"any",factory:()=>nt(Zp)}),t.__NG_ELEMENT_ID__=-1,e})();let ET=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Rt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>new t}),e})();function Mb(t){for(;t;){t[zn]|=64;const e=Ih(t);if(e_(t)&&!e)return t;t=e}return null}function AT(t){return t.ngOriginalError}class _c{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&AT(e);for(;n&&AT(n);)n=AT(n);return n||null}}const fF=new bt("",{providedIn:"root",factory:()=>!1});class _F extends Zd{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Mb(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=Ur(this);this.trackingVersion++;try{e(n,i)}finally{Ur(r)}}destroy(){this.trackingVersion++}}let sw=null;function bF(){return sw??=new _F,sw}function yF(t,e){return t[e]??bF()}function vF(t,e){const n=bF();n.hasReadASignal&&(t[e]=sw,n.lView=t,sw=new _F)}const Zn={};function Gt(t){xF(li(),Dt(),Ao()+t,!1)}function xF(t,e,n,i){if(!i)if(3==(3&e[zn])){const o=t.preOrderCheckHooks;null!==o&&yp(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Eh(e,o,0,n)}zl(n)}function He(t,e=pn.Default){const n=Dt();return null===n?nt(t,e):Ua(qr(),n,gn(t),e)}function Yh(){throw new Error("invalid")}function aw(t,e,n,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[_r]=r,h[zn]=140|i,(null!==l||t&&2048&t[zn])&&(h[zn]|=2048),Pv(h),h[Jn]=h[ka]=t,h[Cr]=n,h[Ra]=s||t&&t[Ra],h[Pn]=a||t&&t[Pn],h[Da]=c||t&&t[Da]||null,h[xo]=o,h[hh]=function CC(){return SC++}(),h[Fs]=d,h[Av]=l,h[Zi]=2==e.type?t[Zi]:h,h}function am(t,e,n,i,r){let o=t.data[e];if(null===o)o=function ST(t,e,n,i,r){const o=Ko(),s=gp(),c=t.data[e]=function fX(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return nu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,e,n,i,r),function zv(){return Cn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function Us(){const t=Cn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vs(o,!0),o}function Ib(t,e,n,i){if(0===n)return-1;const r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function wF(t,e,n,i,r){const o=yF(e,Xc),s=Ao(),a=2&i;try{if(zl(-1),a&&e.length>De&&xF(t,e,De,!1),Ba(a?2:0,r),a)o.runInContext(n,i,r);else{const l=Ur(null);try{n(i,r)}finally{Ur(l)}}}finally{a&&null===e[Xc]&&vF(e,Xc),zl(s),Ba(a?3:1,r)}}function CT(t,e,n){if(Qg(e)){const i=Ur(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ur(i)}}}function TT(t,e,n){Bv()&&(function vX(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;jl(n)&&function TX(t,e,n){const i=Xo(e,t),r=EF(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=cw(t,aw(t,r,null,s,i,e,null,t[Ra].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||wp(n,e),To(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const c=t.data[a],l=mc(e,t,a,n);To(l,e),null!==s&&MX(0,a-r,l,c,0,s),oa(c)&&(Oo(n.index,e)[Cr]=mc(e,t,a,n))}}(t,e,n,Xo(n,e)),64==(64&n.flags)&&MF(t,e,n))}function MT(t,e,n=Xo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function EF(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=IT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function IT(t,e,n,i,r,o,s,a,c,l,d){const h=De+i,p=h+r,m=function aX(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Zn);return n}(h,p),b="function"==typeof l?l():l;return m[Kt]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:d}}let AF=t=>null;function SF(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const o=t[r];null===i?CF(n,e,r,o):i.hasOwnProperty(r)&&CF(n,e,i[r],o)}return n}function CF(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function fa(t,e,n,i,r,o,s,a){const c=Xo(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(PT(t,n,d,i,r),jl(e)&&function gX(t,e){const n=Oo(e,t);16&n[zn]||(n[zn]|=64)}(n,e.index)):3&e.type&&(i=function mX(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function DT(t,e,n,i){if(Bv()){const r=null===i?null:{"":-1},o=function wX(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(ch(e,s.selectors,!1))if(i||(i=[]),oa(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),RT(t,e,a.length)}else i.unshift(s),RT(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&TF(t,e,n,s,r,a),r&&function EX(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const o=n[e[r+1]];if(null==o)throw new Rt(-301,!1);i.push(e[r],o)}}}(n,i,r)}n.mergedAttrs=fi(n.mergedAttrs,n.attrs)}function TF(t,e,n,i,r,o){for(let l=0;l<i.length;l++)Ap(wp(n,e),t,i[l].type);!function SX(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=Ib(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=fi(n.mergedAttrs,d.hostAttrs),CX(t,n,e,c,d),AX(c,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function pX(t,e,n){const r=e.directiveEnd,o=t.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],p=n?n.get(h):null,b=p?p.outputs:null;c=SF(h.inputs,d,c,p?p.inputs:null),l=SF(h.outputs,d,l,b);const T=null===c||null===s||yv(e)?null:IX(c,d,s);a.push(T)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,o)}function MF(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function GS(){return Cn.lFrame.currentDirectiveIndex}();try{zl(o);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];x_(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&xX(c,l)}}finally{zl(-1),x_(s)}}function xX(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function RT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function AX(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;oa(e)&&(n[""]=t)}}function CX(t,e,n,i,r){t.data[i]=r;const o=r.factory||(r.factory=hc(r.type)),s=new fs(o,oa(r),He);t.blueprint[i]=s,n[i]=s,function bX(t,e,n,i,r){const o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function yX(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,i,o)}}(t,e,i,Ib(t,n,r.hostVars,Zn),r)}function rl(t,e,n,i,r,o){const s=Xo(t,e);!function OT(t,e,n,i,r,o,s){if(null==o)t.removeAttribute(e,r,n);else{const a=null==s?kn(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}(e[Pn],s,o,t.value,n,i,r)}function MX(t,e,n,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)IF(i,n,s[a++],s[a++],s[a++])}function IF(t,e,n,i,r){const o=Ur(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{Ur(o)}}function IX(t,e,n){let i=null,r=0;for(;r<n.length;){const o=n[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function DF(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function RF(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const s=t.data[o];_p(n[i]),s.contentQueries(2,e[o],o)}}}function cw(t,e){return t[Oa]?t[Wd][Hi]=e:t[Oa]=e,t[Wd]=e,e}function kT(t,e,n){_p(0);const i=Ur(null);try{e(t,n)}finally{Ur(i)}}function OF(t){return t[Bl]||(t[Bl]=[])}function kF(t){return t.cleanup||(t.cleanup=[])}function NF(t,e){const n=t[Da],i=n?n.get(_c,null):null;i&&i.handleError(e)}function PT(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];IF(t.data[s],e[s],i,a,r)}}function DX(t,e){const n=Oo(e,t),i=n[Kt];!function RX(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[_r];null!==r&&null===n[Fs]&&(n[Fs]=Cb(r,n[Da])),NT(i,n,n[Cr])}function NT(t,e,n){bp(e);try{const i=t.viewQuery;null!==i&&kT(1,i,n);const r=t.template;null!==r&&wF(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&RF(t,e),t.staticViewQueries&&kT(2,t.viewQuery,n);const o=t.components;null!==o&&function OX(t,e){for(let n=0;n<e.length;n++)DX(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[zn]&=-5,ou()}}let FF=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,o){const s=typeof Zone>"u"?null:Zone.current,a=new d_(i,d=>{this.all.has(d)&&this.queue.set(d,s)},o);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>new t}),e})();function lw(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=ar(r,a):2==o&&(i=ar(i,a+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function Db(t,e,n,i,r=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&i.push(Fi(o)),Yo(o)){for(let a=lr;a<o.length;a++){const c=o[a],l=c[Kt].firstChild;null!==l&&Db(c[Kt],c,l,i)}o[jn]!==o[_r]&&i.push(o[jn])}const s=n.type;if(8&s)Db(t,e,n.child,i);else if(32&s){const a=Z_(n,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=er(e,n);if(Array.isArray(a))i.push(...a);else{const c=Ih(e[Zi]);Db(c[Kt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function dw(t,e,n,i=!0){const r=e[Ra],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{LF(t,e,t.template,n)}catch(c){throw i&&NF(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function LF(t,e,n,i){const r=e[zn];if(256!=(256&r)){e[Ra].effectManager?.flush(),bp(e);try{Pv(e),function pc(t){return Cn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&wF(t,e,n,2,i);const s=3==(3&r);if(s){const l=t.preOrderCheckHooks;null!==l&&yp(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Eh(e,l,0,null),au(e,0)}if(function NX(t){for(let e=Cx(t);null!==e;e=Tx(e)){if(!e[us])continue;const n=e[Xd];for(let i=0;i<n.length;i++){Nv(n[i])}}}(e),BF(e,2),null!==t.contentQueries&&RF(t,e),s){const l=t.contentCheckHooks;null!==l&&yp(e,l)}else{const l=t.contentHooks;null!==l&&Eh(e,l,1),au(e,1)}!function sX(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=yF(e,fh);try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)zl(~o);else{const s=o,a=n[++r],c=n[++r];v_(a,s),i.runInContext(c,2,e[s])}}}finally{null===e[fh]&&vF(e,fh),zl(-1)}}(t,e);const a=t.components;null!==a&&UF(e,a,0);const c=t.viewQuery;if(null!==c&&kT(2,c,i),s){const l=t.viewCheckHooks;null!==l&&yp(e,l)}else{const l=t.viewHooks;null!==l&&Eh(e,l,2),au(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[zn]&=-73,p_(e)}finally{ou()}}}function BF(t,e){for(let n=Cx(t);null!==n;n=Tx(n))for(let i=lr;i<n.length;i++)jF(n[i],e)}function FX(t,e,n){jF(Oo(e,t),n)}function jF(t,e){if(!function Ov(t){return 128==(128&t[zn])}(t))return;const n=t[Kt];if(80&t[zn]&&0===e||1024&t[zn]||2===e)LF(n,t,n.template,t[Cr]);else if(t[uh]>0){BF(t,1);const r=t[Kt].components;null!==r&&UF(t,r,1)}}function UF(t,e,n){for(let i=0;i<e.length;i++)FX(t,e[i],n)}class Rb{get rootNodes(){const e=this._lView,n=e[Kt];return Db(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cr]}set context(e){this._lView[Cr]=e}get destroyed(){return 256==(256&this._lView[zn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Jn];if(Yo(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(Wp(e,i),Ch(n,i))}this._attachedToViewContainer=!1}ms(this._lView[Kt],this._lView)}onDestroy(e){!function m_(t,e){if(256==(256&t[zn]))throw new Rt(911,!1);null===t[Yc]&&(t[Yc]=[]),t[Yc].push(e)}(this._lView,e)}markForCheck(){Mb(this._cdRefInjectingView||this._lView)}detach(){this._lView[zn]&=-129}reattach(){this._lView[zn]|=128}detectChanges(){dw(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function OC(t,e){Oh(t,e,e[Pn],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Rt(902,!1);this._appRef=e}}class LX extends Rb{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dw(e[Kt],e,e[Cr],!1)}checkNoChanges(){}get context(){return null}}class VF extends It{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=si(e);return new Ob(n,this.ngModule)}}function zF(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class jX{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=rp(i);const r=this.injector.get(e,dr,i);return r!==dr||n===dr?r:this.parentInjector.get(e,n,i)}}class Ob extends Ze{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=zF(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return zF(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function TS(t){return t.map(CS).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=(r=r||this.ngModule)instanceof ys?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new jX(e,o):e,a=s.get(An,null);if(null===a)throw new Rt(407,!1);const h={rendererFactory:a,sanitizer:s.get(xs,null),effectManager:s.get(FF,null),afterRenderEventManager:s.get(ET,null)},p=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",b=i?function cX(t,e,n,i){const o=i.get(fF,!1)||n===vo.ShadowDom,s=t.selectRootElement(e,o);return function lX(t){AF(t)}(s),s}(p,i,this.componentDef.encapsulation,s):Gp(p,m,function BX(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(m)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Y=null;null!==b&&(Y=Cb(b,s,!0));const ye=IT(0,null,null,1,0,null,null,null,null,null,null),Ce=aw(null,ye,null,U,null,null,h,p,s,null,Y);let je,qe;bp(Ce);try{const at=this.componentDef;let pt,ht=null;at.findHostDirectiveDefs?(pt=[],ht=new Map,at.findHostDirectiveDefs(at,pt,ht),pt.push(at)):pt=[at];const _t=function VX(t,e){const n=t[Kt],i=De;return t[i]=e,am(n,i,2,"#host",null)}(Ce,b),yt=function zX(t,e,n,i,r,o,s){const a=r[Kt];!function HX(t,e,n,i){for(const r of t)e.mergedAttrs=fi(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(lw(e,e.mergedAttrs,!0),null!==n&&Lx(i,n,e))}(i,t,e,s);let c=null;null!==e&&(c=Cb(e,r[Da]));const l=o.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=aw(r,EF(n),null,d,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&RT(a,t,i.length-1),cw(r,h),r[t.index]=h}(_t,b,at,pt,Ce,h,p);qe=mp(ye,De),b&&function WX(t,e,n,i){if(i)gt(t,n,["ng-version",ws.full]);else{const{attrs:r,classes:o}=function MS(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!ra(r))break;r=o}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&gt(t,n,r),o&&o.length>0&&Xp(t,n,o.join(" "))}}(p,at,b,i),void 0!==n&&function $X(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const o=n[r];i.push(null!=o?Array.from(o):null)}}(qe,this.ngContentSelectors,n),je=function GX(t,e,n,i,r,o){const s=qr(),a=r[Kt],c=Xo(s,r);TF(a,r,s,n,null,i);for(let d=0;d<n.length;d++)To(mc(r,a,s.directiveStart+d,s),r);MF(a,r,s),c&&To(c,r);const l=mc(r,a,s.directiveStart+s.componentOffset,s);if(t[Cr]=r[Cr]=l,null!==o)for(const d of o)d(l,e);return CT(a,s,t),l}(yt,at,pt,ht,Ce,[YX]),NT(ye,Ce,null)}finally{ou()}return new UX(this.componentType,je,sn(qe,Ce),Ce,qe)}}class UX extends Be{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new LX(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;PT(o[Kt],o,r,e,n),this.previousInputValues.set(e,n),Mb(Oo(this._tNode.index,o))}}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function YX(){const t=qr();Hl(Dt()[Kt],t)}function bn(t){let e=function HF(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(oa(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Rt(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const s=t;s.inputs=uw(t.inputs),s.inputTransforms=uw(t.inputTransforms),s.declaredInputs=uw(t.declaredInputs),s.outputs=uw(t.outputs);const a=r.hostBindings;a&&JX(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&KX(t,c),l&&qX(t,l),Xt(t.inputs,r.inputs),Xt(t.declaredInputs,r.declaredInputs),Xt(t.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Xt(s.inputTransforms,r.inputTransforms)),oa(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===bn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function XX(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=fi(r.hostAttrs,n=fi(n,r.hostAttrs))}}(i)}function uw(t){return t===Rr?{}:t===bi?[]:t}function KX(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function qX(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,o)=>{e(i,r,o),n(i,r,o)}:e}function JX(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function hw(t){return!!function FT(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Zo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ii(t,e,n,i){const r=Dt();return Zo(r,ru(),e)&&(li(),rl(Qi(),r,t,e,n,i)),Ii}function lm(t,e,n,i){return Zo(t,ru(),n)?e+kn(n)+i:Zn}function yn(t,e,n,i,r,o,s,a){const c=Dt(),l=li(),d=t+De,h=l.firstCreatePass?function wK(t,e,n,i,r,o,s,a,c){const l=e.consts,d=am(e,t,4,s||null,sa(l,a));DT(e,n,d,sa(l,c)),Hl(e,d);const h=d.tView=IT(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,n,i,r,o,s):l.data[d];Vs(h,!1);const p=sL(l,c,h,t);wh()&&Dh(l,c,p,h),To(p,c),cw(c,c[d]=DF(p,c,p,h)),Ls(h)&&TT(l,c,h),null!=s&&MT(c,h,a)}let sL=function aL(t,e,n,i){return la(!0),e[Pn].createComment("")};function Vt(t,e,n){const i=Dt();return Zo(i,ru(),e)&&fa(li(),Qi(),i,t,e,i[Pn],n,!1),Vt}function zT(t,e,n,i,r){const s=r?"class":"style";PT(t,n,e.inputs[s],s,i)}function Bt(t,e,n,i){const r=Dt(),o=li(),s=De+t,a=r[Pn],c=o.firstCreatePass?function CK(t,e,n,i,r,o){const s=e.consts,c=am(e,t,2,i,sa(s,r));return DT(e,n,c,sa(s,o)),null!==c.attrs&&lw(c,c.attrs,!1),null!==c.mergedAttrs&&lw(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,n,i):o.data[s],l=cL(o,r,c,a,e,t);r[s]=l;const d=Ls(c);return Vs(c,!0),Lx(a,l,c),32!=(32&c.flags)&&wh()&&Dh(o,r,l,c),0===function VS(){return Cn.lFrame.elementDepthCount}()&&To(l,r),function __(){Cn.lFrame.elementDepthCount++}(),d&&(TT(o,r,c),CT(o,c,r)),null!==i&&MT(r,c),Bt}function Ut(){let t=qr();gp()?iu():(t=t.parent,Vs(t,!1));const e=t;(function yh(t){return Cn.skipHydrationRootTNode===t})(e)&&function js(){Cn.skipHydrationRootTNode=null}(),function ri(){Cn.lFrame.elementDepthCount--}();const n=li();return n.firstCreatePass&&(Hl(n,t),Qg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function KS(t){return 0!=(8&t.flags)}(e)&&zT(n,e,Dt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function qS(t){return 0!=(16&t.flags)}(e)&&zT(n,e,Dt(),e.stylesWithoutHost,!1),Ut}function ai(t,e,n,i){return Bt(t,e,n,i),Ut(),ai}let cL=(t,e,n,i,r,o)=>(la(!0),Gp(i,r,function C_(){return Cn.lFrame.currentNamespace}()));function _m(t){return!!t&&"function"==typeof t.then}function uL(t){return!!t&&"function"==typeof t.subscribe}function Dn(t,e,n,i){const r=Dt(),o=li(),s=qr();return function fL(t,e,n,i,r,o,s){const a=Ls(i),l=t.firstCreatePass&&kF(t),d=e[Cr],h=OF(e);let p=!0;if(3&i.type||s){const T=Xo(i,e),D=s?s(T):T,U=h.length,Y=s?Ce=>s(Fi(Ce[i.index])):i.index;let ye=null;if(!s&&a&&(ye=function OK(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=e[Bl],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(t,e,r,i.index)),null!==ye)(ye.__ngLastListenerFn__||ye).__ngNextListenerFn__=o,ye.__ngLastListenerFn__=o,p=!1;else{o=mL(i,e,d,o,!1);const Ce=n.listen(D,r,o);h.push(o,Ce),l&&l.push(r,Y,U,U+1)}}else o=mL(i,e,d,o,!1);const m=i.outputs;let b;if(p&&null!==m&&(b=m[r])){const T=b.length;if(T)for(let D=0;D<T;D+=2){const je=e[b[D]][b[D+1]].subscribe(o),qe=h.length;h.push(o,je),l&&l.push(r,i.index,qe,-(qe+1))}}}(o,r,r[Pn],s,t,e,i),Dn}function pL(t,e,n,i){try{return Ba(6,e,n),!1!==n(i)}catch(r){return NF(t,r),!1}finally{Ba(7,e,n)}}function mL(t,e,n,i,r){return function o(s){if(s===Function)return i;Mb(t.componentOffset>-1?Oo(t.index,e):e);let c=pL(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=pL(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Rn(t=1){return function su(t){return(Cn.lFrame.contextLView=function Wv(t,e){for(;t>0;)e=e[ka],t--;return e}(t,Cn.lFrame.contextLView))[Cr]}(t)}function kK(t,e){let n=null;const i=function lp(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?ch(t,o,!0):vv(i,o))return r}else n=r}return n}function Qr(t){const e=Dt()[Zi][xo];if(!e.projection){const i=e.projection=fu(t?t.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=t?kK(o,t):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Nn(t,e=0,n){const i=Dt(),r=li(),o=am(r,De+t,16,null,n||null);null===o.projection&&(o.projection=e),iu(),(!i[Fs]||nu())&&32!=(32&o.flags)&&function BC(t,e,n){Nx(e[Pn],0,e,n,Un(t,n,e),Ox(n.parent||e[xo],n,e))}(r,i,o)}function _w(t,e,n){return HT(t,"",e,"",n),_w}function HT(t,e,n,i,r){const o=Dt(),s=lm(o,e,n,i);return s!==Zn&&fa(li(),Qi(),o,t,s,o[Pn],r,!1),HT}function bw(t,e){return t<<17|e<<2}function wu(t){return t>>17&32767}function GT(t){return 2|t}function Kh(t){return(131068&t)>>2}function WT(t,e){return-131069&t|e<<2}function $T(t){return 1|t}function AL(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?wu(o):Kh(o),c=!1;for(;0!==a&&(!1===c||s);){const d=t[a+1];jK(t[a],e)&&(c=!0,t[a+1]=i?$T(d):GT(d)),a=i?wu(d):Kh(d)}c&&(t[n+1]=i?GT(o):$T(o))}function jK(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pu(t,e)>=0}const lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SL(t){return t.substring(lo.key,lo.keyEnd)}function CL(t,e){const n=lo.textEnd;return n===e?-1:(e=lo.keyEnd=function HK(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,lo.key=e,n),bm(t,e,n))}function bm(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function yw(t,e,n){return vc(t,e,n,!1),yw}function Kn(t,e){return vc(t,e,null,!0),Kn}function $a(t){!function xc(t,e,n,i){const r=li(),o=Eo(2);r.firstUpdatePass&&OL(r,null,o,i);const s=Dt();if(n!==Zn&&Zo(s,o,n)){const a=r.data[Ao()];if(FL(a,i)&&!RL(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=ar(c,n||"")),zT(r,a,s,n,i)}else!function QK(t,e,n,i,r,o,s,a){r===Zn&&(r=bi);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const p=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let T,b=null;d===h?(c+=2,l+=2,p!==m&&(b=h,T=m)):null===h||null!==d&&d<h?(c+=2,b=d):(l+=2,b=h,T=m),null!==b&&PL(t,e,n,i,b,T,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Pn],s[o+1],s[o+1]=function JK(t,e,n){if(null==n||""===n)return bi;const i=[],r=_s(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}(ZK,sl,t,!0)}function sl(t,e){for(let n=function VK(t){return function ML(t){lo.key=0,lo.keyEnd=0,lo.value=0,lo.valueEnd=0,lo.textEnd=t.length}(t),CL(t,bm(t,0,lo.textEnd))}(e);n>=0;n=CL(e,n))ps(t,SL(e),!0)}function vc(t,e,n,i){const r=Dt(),o=li(),s=Eo(2);o.firstUpdatePass&&OL(o,t,s,i),e!==Zn&&Zo(r,s,e)&&PL(o,o.data[Ao()],r,r[Pn],t,r[s+1]=function eq(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=mn(_s(t)))),t}(e,n),i,s)}function RL(t,e){return e>=t.expandoStartIndex}function OL(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Ao()],s=RL(t,n);FL(o,i)&&null===e&&!s&&(e=!1),e=function YK(t,e,n,i){const r=function w_(t){const e=Cn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=jb(n=XT(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=XT(r,t,e,n,i),null===o){let c=function XK(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Kh(i))return t[wu(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=XT(null,t,e,c[1],i),c=jb(c,e.attrs,i),function KK(t,e,n,i){t[wu(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else o=function qK(t,e,n){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=jb(i,t[o].hostAttrs,n);return jb(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function LK(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=wu(s),c=Kh(s);t[i]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||pu(n,d)>0)&&(l=!0)):d=n,r)if(0!==c){const p=wu(t[a+1]);t[i+1]=bw(p,a),0!==p&&(t[p+1]=WT(t[p+1],i)),t[a+1]=function NK(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=bw(a,0),0!==a&&(t[a+1]=WT(t[a+1],i)),a=i;else t[i+1]=bw(c,0),0===a?a=i:t[c+1]=WT(t[c+1],i),c=i;l&&(t[i+1]=GT(t[i+1])),AL(t,d,i,!0),AL(t,d,i,!1),function BK(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pu(o,e)>=0&&(n[i+1]=$T(n[i+1]))}(e,d,t,i,o),s=bw(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,n,s,i)}}function XT(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=jb(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function jb(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ps(t,s,!!n||e[++o]))}return void 0===t?null:t}function ZK(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&ps(t,i,n)}function PL(t,e,n,i,r,o,s,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],d=function FK(t){return 1==(1&t)}(l)?NL(c,e,n,r,Kh(l),s):void 0;vw(d)||(vw(o)||function PK(t){return 2==(2&t)}(l)&&(o=NL(c,null,n,r,a,s)),function Fx(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:el.DashCase;null==r?t.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=el.Important),t.setStyle(n,i,r,o))}}(i,s,pp(Ao(),n),r,o))}function NL(t,e,n,i,r,o){const s=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let p=n[r+1];p===Zn&&(p=h?bi:void 0);let m=h?B_(p,i):d===i?p:void 0;if(l&&!vw(m)&&(m=B_(c,i)),vw(m)&&(a=m,s))return a;const b=t[r+1];r=s?wu(b):Kh(b)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=B_(c,i))}return a}function vw(t){return void 0!==t}function FL(t,e){return 0!=(t.flags&(e?8:16))}function Di(t,e=""){const n=Dt(),i=li(),r=t+De,o=i.firstCreatePass?am(i,r,1,e,null):i.data[r],s=LL(i,n,o,e,t);n[r]=s,wh()&&Dh(i,n,s,o),Vs(o,!1)}let LL=(t,e,n,i,r)=>(la(!0),function Hp(t,e){return t.createText(e)}(e[Pn],i));function Ya(t){return pa("",t,""),Ya}function pa(t,e,n){const i=Dt(),r=lm(i,t,e,n);return r!==Zn&&function td(t,e,n){const i=pp(e,t);!function Mx(t,e,n){t.setValue(e,n)}(t[Pn],i,n)}(i,Ao(),r),pa}function id(t,e,n){const i=Dt();return Zo(i,ru(),e)&&fa(li(),Qi(),i,t,e,i[Pn],n,!0),id}const vm="en-US";let iB=vm;function ZT(t,e,n,i,r){if(t=gn(t),Array.isArray(t))for(let o=0;o<t.length;o++)ZT(t[o],e,n,i,r);else{const o=li(),s=Dt(),a=qr();let c=Ql(t)?t:gn(t.provide);const l=ew(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(Ql(t)||!t.multi){const m=new fs(l,r,He),b=eM(c,e,r?d:d+p,h);-1===b?(Ap(wp(a,s),o,c),QT(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[b]=m,s[b]=m)}else{const m=eM(c,e,d+p,h),b=eM(c,e,d,d+p),D=b>=0&&n[b];if(r&&!D||!r&&!(m>=0&&n[m])){Ap(wp(a,s),o,c);const U=function xJ(t,e,n,i,r){const o=new fs(t,n,He);return o.multi=[],o.index=e,o.componentProviders=0,MB(o,r,i&&!n),o}(r?vJ:yJ,n.length,r,i,l);!r&&D&&(n[b].providerFactory=U),QT(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(U),s.push(U)}else QT(o,t,m>-1?m:b,MB(n[r?b:m],l,!r&&i));!r&&i&&D&&n[b].componentProviders++}}}function QT(t,e,n,i){const r=Ql(e),o=function lT(t){return!!t.useClass}(e);if(r||o){const c=(o?gn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[i,c]):l[d+1].push(i,c)}else l.push(n,c)}}}function MB(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function eM(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function yJ(t,e,n,i){return tM(this.multi,[])}function vJ(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=mc(n,n[Kt],this.providerFactory.index,i);o=a.slice(0,s),tM(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],tM(r,o);return o}function tM(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function hi(t,e=[]){return n=>{n.providersResolver=(i,r)=>function bJ(t,e,n){const i=li();if(i.firstCreatePass){const r=oa(t);ZT(n,i.data,i.blueprint,r,!0),ZT(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Jh{}class IB{}class nM extends Jh{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new VF(this);const r=function ds(t,e){const n=t[bv]||null;if(!n&&!0===e)throw new Error(`Type ${mn(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function ed(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=cF(e,n,[{provide:Jh,useValue:this},{provide:It,useValue:this.componentFactoryResolver},...i],mn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class iM extends IB{constructor(e){super(),this.moduleType=e}create(e){return new nM(this.moduleType,e,[])}}function jB(t,e,n,i,r,o){const s=e+n;return Zo(t,s,r)?function ol(t,e,n){return t[e]=n}(t,s+1,o?i.call(o,r):i(r)):function Wb(t,e){const n=t[e];return n===Zn?void 0:n}(t,s+1)}function ma(t,e){const n=li();let i;const r=t+De;n.firstCreatePass?(i=function HJ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=hc(i.type)),a=Wo(He);try{const c=$l(!1),l=o();return $l(c),function SK(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,Dt(),r,l),l}finally{Wo(a)}}function al(t,e,n){const i=t+De,r=Dt(),o=function tu(t,e){return t[e]}(r,i);return function $b(t,e){return t[Kt].data[e].pure}(r,i)?jB(r,function co(){const t=Cn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}function oM(t){return e=>{setTimeout(t,void 0,e)}}const tn=class YJ extends Ae{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=oM(o),r&&(r=oM(r)),s&&(s=oM(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof V&&e.add(a),a}};function XJ(){return this._results[Symbol.iterator]()}class Yb{get changes(){return this._changes||(this._changes=new tn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Yb.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=XJ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function zs(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function rC(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function qJ(t,e,n,i=!0){const r=e[Kt];if(function PC(t,e,n,i){const r=lr+i,o=n.length;i>0&&(n[r-1][Hi]=e),i<o-lr?(e[Hi]=n[r],L_(n,lr+i,e)):(n.push(e),e[Hi]=null),e[Jn]=n;const s=e[Pa];null!==s&&n!==s&&function NC(t,e){const n=t[Xd];e[Zi]!==e[Jn][Jn][Zi]&&(t[us]=!0),null===n?t[Xd]=[e]:n.push(e)}(s,e);const a=e[Na];null!==a&&a.insertView(t),e[zn]|=128}(r,e,t,n),i){const o=tr(n,t),s=e[Pn],a=$p(s,t[jn]);null!==a&&function RC(t,e,n,i,r,o){i[_r]=r,i[xo]=e,Oh(t,i,n,1,r,o)}(r,t[xo],s,e,a,o)}}let Xa=(()=>{class e{}return e.__NG_ELEMENT_ID__=QJ,e})();const JJ=Xa,ZJ=class extends JJ{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function KJ(t,e,n,i){const r=e.tView,a=aw(t,r,n,4096&t[zn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Pa]=t[e.index];const l=t[Na];return null!==l&&(a[Na]=l.createEmbeddedView(r)),NT(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new Rb(r)}};function QJ(){return Cw(qr(),Dt())}function Cw(t,e){return 4&t.type?new ZJ(e,t,sn(t,e)):null}let No=(()=>{class e{}return e.__NG_ELEMENT_ID__=oZ,e})();function oZ(){return qB(qr(),Dt())}const sZ=No,XB=class extends sZ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return sn(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ep(this._hostTNode,this._hostLView);if(Ah(e)){const n=ja(e,this._hostLView),i=Wl(e);return new Po(n[Kt].data[i+8],n)}return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=KB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-lr}createEmbeddedView(e,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,o){const s=e&&!function Sh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const T=n||{};a=T.index,i=T.injector,r=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}const c=s?e:new Ob(si(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const D=(s?l:this.parentInjector).get(ys,null);D&&(o=D)}si(c.componentType??{});const m=c.create(l,r,null,o);return this.insertImpl(m.hostView,a,false),m}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function kv(t){return Yo(t[Jn])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[Jn],d=new XB(l,l[xo],l[Jn]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return qJ(a,r,s,!i),e.attachToViewContainerRef(),L_(sM(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=KB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=Wp(this._lContainer,n);i&&(Ch(sM(this._lContainer),n),ms(i[Kt],i))}detach(e){const n=this._adjustIndex(e,-1),i=Wp(this._lContainer,n);return i&&null!=Ch(sM(this._lContainer),n)?new Rb(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function KB(t){return t[8]}function sM(t){return t[8]||(t[8]=[])}function qB(t,e){let n;const i=e[t.index];return Yo(i)?n=i:(n=DF(i,e,null,t),e[t.index]=n,cw(e,n)),JB(n,e,t,i),new XB(n,t,e)}let JB=function ZB(t,e,n,i){if(t[jn])return;let r;r=8&n.type?Fi(i):function aZ(t,e){const n=t[Pn],i=n.createComment(""),r=Xo(e,t);return Pr(n,$p(n,r),i,function LC(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[jn]=r};class aM{constructor(e){this.queryList=e,this.matches=null}clone(){return new aM(this.queryList)}setDirty(){this.queryList.setDirty()}}class cM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new cM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==r3(e,n).matches&&this.queries[n].setDirty()}}class QB{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class lM{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new lM(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class dM{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new dM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,n,dZ(n,o)),this.matchTNodeWithReadOption(e,n,Sp(n,e,o,!1,!1))}else i===Xa?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Sp(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Nt||r===No||r===Xa&&4&n.type)this.addMatch(n.index,-2);else{const o=Sp(n,e,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function dZ(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function hZ(t,e,n,i){return-1===n?function uZ(t,e){return 11&t.type?sn(t,e):4&t.type?Cw(t,e):null}(e,t):-2===n?function fZ(t,e,n){return n===Nt?sn(e,t):n===Xa?Cw(e,t):n===No?qB(e,t):void 0}(t,e,i):mc(t,t[Kt],n,e)}function e3(t,e,n,i){const r=e[Na].queries[i];if(null===r.matches){const o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:hZ(e,o[l],s[c+1],n.metadata.read))}r.matches=a}return r.matches}function uM(t,e,n,i){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const s=e3(t,e,r,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=lr;h<d.length;h++){const p=d[h];p[Pa]===p[Jn]&&uM(p[Kt],p,l,i)}if(null!==d[Xd]){const h=d[Xd];for(let p=0;p<h.length;p++){const m=h[p];uM(m[Kt],m,l,i)}}}}}return i}function Hn(t){const e=Dt(),n=li(),i=E_();_p(i+1);const r=r3(n,i);if(t.dirty&&function Rv(t){return 4==(4&t[zn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?uM(n,e,i,[]):e3(n,e,r,i);t.reset(o,Qn),t.notifyOnChanges()}return!0}return!1}function Xi(t,e,n){const i=li();i.firstCreatePass&&(n3(i,new QB(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),t3(i,Dt(),e)}function Gn(){return function pZ(t,e){return t[Na].queries[e].queryList}(Dt(),E_())}function t3(t,e,n){const i=new Yb(4==(4&n));(function hX(t,e,n,i){const r=OF(e);r.push(n),t.firstCreatePass&&kF(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[Na]&&(e[Na]=new cM),e[Na].queries.push(new aM(i))}function n3(t,e,n){null===t.queries&&(t.queries=new lM),t.queries.track(new dM(e,n))}function r3(t,e){return t.queries.getByIndex(e)}const _M=new bt("Application Initializer");let bM=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Ht(_M,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const o of this.appInits){const s=o();if(_m(s))i.push(s);else if(uL(s)){const a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const cl=new bt("LocaleId",{providedIn:"root",factory:()=>Ht(cl,pn.Optional|pn.SkipSelf)||function FZ(){return typeof $localize<"u"&&$localize.locale||vm}()});let Iw=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ce(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function S3(...t){}class ln{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tn(!1),this.onMicrotaskEmpty=new tn(!1),this.onStable=new tn(!1),this.onError=new tn(!1),typeof Zone>"u")throw new Rt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function sQ(){const t="function"==typeof Ai.requestAnimationFrame;let e=Ai[t?"requestAnimationFrame":"setTimeout"],n=Ai[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function lQ(t){const e=()=>{!function cQ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ai,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,wM(t),t.isCheckStableRunning=!0,xM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),wM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return C3(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),T3(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return C3(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),T3(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,wM(t),xM(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ln.isInAngularZone())throw new Rt(909,!1)}static assertNotInAngularZone(){if(ln.isInAngularZone())throw new Rt(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,aQ,S3,S3);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const aQ={};function xM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function wM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function C3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function T3(t){t._nesting--,xM(t)}class dQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tn,this.onMicrotaskEmpty=new tn,this.onStable=new tn,this.onError=new tn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const M3=new bt("",{providedIn:"root",factory:I3});function I3(){const t=Ht(ln);let e=!0;return Sr(new le(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new le(r=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{ln.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=t.onUnstable.subscribe(()=>{ln.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Ro()))}const D3=new bt(""),Rw=new bt("");let SM,EM=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,SM||(function uQ(t){SM=t}(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ln.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ln),nt(AM),nt(Rw))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),AM=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return SM?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Eu=null;const R3=new bt("AllowMultipleToken"),CM=new bt("PlatformDestroyListeners"),Ow=new bt("appBootstrapListener");function P3(t,e,n=[]){const i=`Platform: ${e}`,r=new bt(i);return(o=[])=>{let s=TM();if(!s||s.injector.get(R3,!1)){const a=[...n,...o,{provide:r,useValue:!0}];t?t(a):function pQ(t){if(Eu&&!Eu.get(R3,!1))throw new Rt(400,!1);(function O3(){!function Cv(t){Kr=t}(()=>{throw new Rt(600,!1)})})(),Eu=t;const e=t.get(F3);(function k3(t){t.get(tw,null)?.forEach(n=>n())})(t)}(function N3(t=[],e){return xr.create({name:e,providers:[{provide:mb,useValue:"platform"},{provide:CM,useValue:new Set([()=>Eu=null])},...t]})}(a,i))}return function gQ(t){const e=TM();if(!e)throw new Rt(401,!1);return e}()}}function TM(){return Eu?.get(F3)??null}let F3=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const o=function _Q(t="zone.js",e){return"noop"===t?new dQ:"zone.js"===t?new ln(e):t}(r?.ngZone,function L3(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const s=function EJ(t,e,n){return new nM(t,e,n)}(i.moduleType,this.injector,function z3(t){return[{provide:ln,useFactory:t},{provide:Bh,multi:!0,useFactory:()=>{const e=Ht(yQ,{optional:!0});return()=>e.initialize()}},{provide:V3,useFactory:bQ},{provide:M3,useFactory:I3}]}(()=>o)),a=s.injector.get(_c,null);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{kw(this._modules,s),c.unsubscribe()})}),function B3(t,e,n){try{const i=n();return _m(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,o,()=>{const c=s.injector.get(bM);return c.runInitializers(),c.donePromise.then(()=>(function rB(t){cs(t,"Expected localeId to be defined"),"string"==typeof t&&(iB=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(cl,vm)||vm),this._moduleDoBootstrap(s),s))})})}bootstrapModule(i,r=[]){const o=j3({},r);return function hQ(t,e,n){const i=new iM(n);return Promise.resolve(i)}(0,0,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){const r=i.injector.get(Zh);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!i.instance.ngDoBootstrap)throw new Rt(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Rt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(CM,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(xr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function j3(t,e){return Array.isArray(e)?e.reduce(j3,t):{...t,...e}}let Zh=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ht(V3),this.zoneIsStable=Ht(M3),this.componentTypes=[],this.components=[],this.isStable=Ht(Iw).hasPendingTasks.pipe(Fe(i=>i?qt(!1):this.zoneIsStable),tt(),Ro()),this._injector=Ht(ys)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const o=i instanceof Ze;if(!this._injector.get(bM).done)throw!o&&function Gd(t){const e=si(t)||cr(t)||Xr(t);return null!==e&&e.standalone}(i),new Rt(405,!1);let a;a=o?i:this._injector.get(It).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const c=function fQ(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Jh),d=a.create(xr.NULL,[],r||a.selector,c),h=d.location.nativeElement,p=d.injector.get(D3,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),kw(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Rt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;kw(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(Ow,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>kw(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Rt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function kw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const V3=new bt("",{providedIn:"root",factory:()=>Ht(_c).handleError.bind(void 0)});function bQ(){const t=Ht(ln),e=Ht(_c);return n=>t.runOutsideAngular(()=>e.handleError(n))}let yQ=(()=>{var t;class e{constructor(){this.zone=Ht(ln),this.applicationRef=Ht(Zh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let to=(()=>{class e{}return e.__NG_ELEMENT_ID__=xQ,e})();function xQ(t){return function wQ(t,e,n){if(jl(t)&&!n){const i=Oo(t.index,e);return new Rb(i,i)}return 47&t.type?new Rb(e[Zi],e):null}(qr(),Dt(),16==(16&t))}class $3{constructor(){}supports(e){return hw(e)}create(e){return new MQ(e)}}const TQ=(t,e)=>e;class MQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||TQ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<X3(i,r,o)?n:i,a=X3(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let p=0;p<l;p++){const m=p<o.length?o[p]:o[p]=0,b=m+p;d<=b&&b<l&&(o[p]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!hw(e))throw new Rt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function rK(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new IQ(n,i),o,r),e}_verifyReinsertion(e,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Y3),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Y3),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class IQ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class Y3{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new DQ,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function X3(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function q3(){return new Fw([new $3])}let Fw=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||q3()),deps:[[e,new Ip,new mu]]}}find(i){const r=this.factories.find(o=>o.supports(i));if(null!=r)return r;throw new Rt(901,!1)}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:q3}),e})();const NQ=P3(null,"core",[]);let FQ=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Zh))},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),e})(),kM=null;function Au(){return kM}class KQ{}const Wn=new bt("DocumentToken");let oj=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return Ht(qQ)},providedIn:"platform"}),e})(),qQ=(()=>{var t;class e extends oj{constructor(){super(),this._doc=Ht(Wn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Au().getBaseHref(this._doc)}onPopState(i){const r=Au().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=Au().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function sj(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function aj(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function tf(t){return t&&"?"!==t[0]?"?"+t:t}let Zb=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return Ht(ZQ)},providedIn:"root"}),e})();const JQ=new bt("appBaseHref");let ZQ=(()=>{var t;class e extends Zb{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ht(Wn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return sj(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+tf(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){const a=this.prepareExternalUrl(o+tf(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){const a=this.prepareExternalUrl(o+tf(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(oj),nt(JQ,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Qb=(()=>{var t;class e{constructor(i){this._subject=new tn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function tee(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(aj(cj(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+tf(r))}normalize(i){return e.stripTrailingSlash(function eee(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,cj(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+tf(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+tf(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}}return(t=e).normalizeQueryParams=tf,t.joinWithSlash=sj,t.stripTrailingSlash=aj,t.\u0275fac=function(i){return new(i||t)(nt(Zb))},t.\u0275prov=St({token:t,factory:function(){return function QQ(){return new Qb(nt(Zb))}()},providedIn:"root"}),e})();function cj(t){return t.replace(/\/index.html$/,"")}class Uee{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nf=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Uee(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,a),vj(c,o)}});for(let o=0,s=r.length;o<s;o++){const c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{vj(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(He(No),He(Xa),He(Fw))},t.\u0275dir=Lt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function vj(t,e){t.context.$implicit=e.item}let ll=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new Vee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){xj("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){xj("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(He(No),He(Xa))},t.\u0275dir=Lt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Vee{constructor(){this.$implicit=null,this.ngIf=null}}function xj(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${mn(e)}'.`)}class Gee{createSubscription(e,n){return l_(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){l_(()=>e.unsubscribe())}}class Wee{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const $ee=new Wee,Yee=new Gee;let n0=(()=>{var t;class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(_m(i))return $ee;if(uL(i))return Yee;throw function Ec(t,e){return new Rt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return(t=e).\u0275fac=function(i){return new(i||t)(He(to,16))},t.\u0275pipe=ao({name:"async",type:t,pure:!1,standalone:!0}),e})(),Mr=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),e})();const Mj="browser";function Su(t){return t===Mj}function KM(t){return"server"===t}class Nte extends KQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ZM extends Nte{static makeCurrent(){!function XQ(t){kM||(kM=t)}(new ZM)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Fte(){return o0=o0||document.querySelector("base"),o0?o0.getAttribute("href"):null}();return null==n?null:function Lte(t){Jw=Jw||document.createElement("a"),Jw.setAttribute("href",t);const e=Jw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){o0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _j(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Jw,o0=null,jte=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const QM=new bt("EventManagerPlugins");let Pj=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new Rt(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(QM),nt(ln))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();class Nj{constructor(e){this._doc=e}}const eI="ng-app-id";let Fj=(()=>{var t;class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=KM(s),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${eI}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){const o=this.styleRef;if(o.has(i)){const s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(eI),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(eI,this.appId),a}}addStyleToHost(i,r){const o=this.getStyleElement(i,r);i.appendChild(o);const s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn),nt(Vh),nt(vb,8),nt(vs))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const tI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nI=/%COMP%/g,Hte=new bt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Bj(t,e){return e.map(n=>n.replace(nI,t))}let jj=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=KM(c),this.defaultRenderer=new iI(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vo.ShadowDom&&(r={...r,encapsulation:vo.Emulated});const o=this.getOrCreateRenderer(i,r);return o instanceof Vj?o.applyToHost(i):o instanceof rI&&o.applyStyles(),o}getOrCreateRenderer(i,r){const o=this.rendererByCompId;let s=o.get(r.id);if(!s){const a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case vo.Emulated:s=new Vj(l,d,r,this.appId,h,a,c,p);break;case vo.ShadowDom:return new Yte(l,d,i,r,a,c,this.nonce,p);default:s=new rI(l,d,r,h,a,c,p)}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Pj),nt(Fj),nt(Vh),nt(Hte),nt(Wn),nt(vs),nt(ln),nt(vb))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();class iI{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(tI[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Uj(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(Uj(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Rt(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const o=tI[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=tI[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(el.DashCase|el.Important)?e.style.setProperty(n,i,r&el.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&el.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=Au().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Uj(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Yte extends iI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Bj(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rI extends iI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Bj(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Vj extends rI{constructor(e,n,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=function Gte(t){return"_ngcontent-%COMP%".replace(nI,t)}(l),this.hostAttr=function Wte(t){return"_nghost-%COMP%".replace(nI,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Xte=(()=>{var t;class e extends Nj{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const zj=["alt","control","meta","shift"],Kte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Jte=(()=>{var t;class e extends Nj{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,o){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Au().onAndCancel(i,s.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),zj.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=Kte[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),zj.forEach(a=>{a!==o&&(0,qte[a])(i)&&(s+=a+".")}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const Gj=[{provide:vs,useValue:Mj},{provide:tw,useValue:function Zte(){ZM.makeCurrent()},multi:!0},{provide:Wn,useFactory:function ene(){return function zC(t){ib=t}(document),document},deps:[]}],tne=P3(NQ,"browser",Gj),nne=new bt(""),Wj=[{provide:Rw,useClass:class Bte{addToWindow(e){Ai.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Rt(5103,!1);return o},Ai.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ai.getAllAngularRootElements=()=>e.getAllRootElements(),Ai.frameworkStabilizers||(Ai.frameworkStabilizers=[]),Ai.frameworkStabilizers.push(i=>{const r=Ai.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?Au().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:D3,useClass:EM,deps:[ln,AM,Rw]},{provide:EM,useClass:EM,deps:[ln,AM,Rw]}],$j=[{provide:mb,useValue:"root"},{provide:_c,useFactory:function Qte(){return new _c},deps:[]},{provide:QM,useClass:Xte,multi:!0,deps:[Wn,ln,vs]},{provide:QM,useClass:Jte,multi:!0,deps:[Wn]},jj,Fj,Pj,{provide:An,useExisting:jj},{provide:class Ij{},useClass:jte,deps:[]},[]];let ine=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Vh,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(nne,12))},t.\u0275mod=on({type:t}),t.\u0275inj=cn({providers:[...$j,...Wj],imports:[Mr,FQ]}),e})();typeof window<"u"&&window;let s0=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(i){let r=null;return r=i?new(i||t):nt(qj),r},providedIn:"root"}),e})(),qj=(()=>{var t;class e extends s0{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case Zr.NONE:return r;case Zr.HTML:return Ha(r,"HTML")?_s(r):Gx(this._doc,String(r)).toString();case Zr.STYLE:return Ha(r,"Style")?_s(r):r;case Zr.SCRIPT:if(Ha(r,"Script"))return _s(r);throw new Rt(5200,!1);case Zr.URL:return Ha(r,"URL")?_s(r):qp(String(r));case Zr.RESOURCE_URL:if(Ha(r,"ResourceURL"))return _s(r);throw new Rt(5201,!1);default:throw new Rt(5202,!1)}}bypassSecurityTrustHtml(i){return function $C(t){return new Ti(t)}(i)}bypassSecurityTrustStyle(i){return function YC(t){return new HC(t)}(i)}bypassSecurityTrustScript(i){return function XC(t){return new Bx(t)}(i)}bypassSecurityTrustUrl(i){return function KC(t){return new Kp(t)}(i)}bypassSecurityTrustResourceUrl(i){return function qC(t){return new GC(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn))},t.\u0275prov=St({token:t,factory:function(i){let r=null;return r=i?new i:function lne(t){return new qj(t.get(Wn))}(nt(xr)),r},providedIn:"root"}),e})();const sI={now:()=>(sI.delegate||Date).now(),delegate:void 0};class Sm extends Ae{constructor(e=1/0,n=1/0,i=sI){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}const Zw={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return Zw.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return Zw.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let aI;function bne(t,e,n){let i=n;return function une(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,o)=>!("*"===r||!function fne(t,e){if(!aI){const n=Element.prototype;aI=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&aI.call(t,e)}(t,r)||(i=o,0))),i}class vne{constructor(e,n){this.componentFactory=n.get(It).resolveComponentFactory(e)}create(e){return new xne(this.componentFactory,e)}}class xne{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new Sm(1),this.events=this.eventEmitters.pipe(Fe(i=>Sr(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(ln),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Zw.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function pne(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=xr.create({providers:[],parent:this.injector}),i=function _ne(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=n.length;o<s;++o){const a=n[o],c=bne(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(to),this.implementsOnChanges=function hne(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Zh).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Q(s=>({name:r,value:s}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Zw.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Tv(o,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class wne extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const Ane={initialConfig:{},parse:{},rename:{}};class Sne{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...Ane,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,n,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=n.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[s]=a}}let Cne=(()=>{var t;class e{constructor(i,r,o={}){this.configState=i,this.cdr=r,this.options=o,this.initialized=!1,this.configManager=new Sne(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return(t=e).\u0275fac=function(i){Yh()},t.\u0275dir=Lt({type:t,features:[kr]}),e})();const a0_dbOptions={ccfOwlUrl:"https://ccf-api.hubmapconsortium.org/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""};function Zj(t,e,n,i,r,o,s){try{var a=t[o](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function jt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function s(c){Zj(o,i,r,s,a,"next",c)}function a(c){Zj(o,i,r,s,a,"throw",c)}s(void 0)})}}function c0(t){return(c0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ve(t,e,n){return(e=function Mne(t){var e=function Tne(t,e){if("object"!==c0(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==c0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c0(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qj(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function dl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Qj()}window;const eU=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";dl();class Dne{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ve(this,"storage",void 0),ve(this,"id",void 0),ve(this,"config",void 0),this.storage=function Ine(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function cI(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Qw;var t;function tU(t){return"string"==typeof t?Qw[t.toUpperCase()]||Qw.WHITE:t}function eE(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=Qw||(Qw={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const Tu={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},tE=Tu.window||Tu.self||Tu.global,l0=Tu.process||{};function Cm(){let t;var e,n;if(dl&&"performance"in tE)t=null==tE||null===(e=tE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in l0){var i;const r=null==l0||null===(i=l0.hrtime)||void 0===i?void 0:i.call(l0);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const Tm={debug:dl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Lne={enabled:!0,level:0};function Ja(){}const nU={},iU={once:!0};class lI{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ve(this,"id",void 0),ve(this,"VERSION",eU),ve(this,"_startTs",Cm()),ve(this,"_deltaTs",Cm()),ve(this,"_storage",void 0),ve(this,"userData",{}),ve(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Dne("__probe-".concat(this.id,"__"),Lne),this.timeStamp("".concat(this.id," started")),function Fne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(o=>r===o)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Cm()-this._startTs).toPrecision(10))}getDelta(){return Number((Cm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){eE(e,n)}warn(e){return this._getLogFunction(0,e,Tm.warn,arguments,iU)}error(e){return this._getLogFunction(0,e,Tm.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Tm.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Tm.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,n,Tm.debug||Tm.info,arguments,iU)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||Ja,i&&[i],{tag:Vne(n)}):Ja}image(e){let{logLevel:n,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(n||i)?dl?function Une(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=cI(o,n,i);console.log(...s)},o.src=e,Ja}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...cI(e,n,i)),Ja;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...cI(o,n,i)),o.src=e.toDataURL(),Ja}return Ja}({image:r,message:o,scale:s}):function jne(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),Ja}({image:r,message:o,scale:s}):Ja}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Ja)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=oU({logLevel:e,message:n,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ja)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=rU(e)}_getLogFunction(e,n,i,r,o){if(this._shouldLog(e)){o=oU({logLevel:e,message:n,args:r,opts:o}),eE(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Cm();const s=o.tag||o.message;if(o.once){if(nU[s])return Ja;nU[s]=Cm()}return n=function Bne(t,e,n){if("string"==typeof e){const i=n.time?function One(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Rne(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Nne(t,e,n){return!dl&&"string"==typeof t&&(e&&(e=tU(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=tU(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,o.message,o),i.bind(console,n,...o.args)}return Ja}}function rU(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return eE(Number.isFinite(e)&&e>=0),e}function oU(t){const{logLevel:e,message:n}=t;t.logLevel=rU(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return eE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Vne(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ve(lI,"VERSION",eU);const mi=new lI({id:"deck"}),wi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(wi,"IDENTITY",{get:()=>(mi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const ul={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},nE={common:0,meters:1,pixels:2},sU={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},un=new lI({id:"luma.gl"});function Cs(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Hne="Requires WebGL2";function iE(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function di(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function rE(t){return Cs(iE(t),"Invalid WebGLRenderingContext"),t}function Qo(t){return Cs(di(t),Hne),t}const d0={};const u0=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(u0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const rf=function(e){const n=this;this.gl=e,function Xne(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(d0[i]=!0)}while(0!==i);for(i in d0)if(d0[i])return delete d0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const p=h.attribs[o];return p.buffer=n.currentArrayBuffer,p.size=s,p.type=a,p.normalized=c,p.stride=l,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function $ne(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};rf.prototype.VERTEX_ARRAY_BINDING_OES=34229,rf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new u0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},rf.prototype.createVertexArrayOES=function(){const e=new u0(this);return this.vertexArrayObjects.push(e),e},rf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},rf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof u0&&e.hasBeenBound&&e.ext===this)},rf.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function Yne(t,e){d0[t]=!0,void 0!==e&&function Wne(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const aU="OES_element_index",cU="WEBGL_draw_buffers",lU="WEBGL_debug_renderer_info",rr=t=>di(t)?void 0:0,oie={3074:t=>di(t)?void 0:36064,35723:t=>di(t)?void 0:4352,35977:rr,32937:rr,36795:(t,e)=>{const n=di(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(lU);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(lU);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:rr,35071:rr,37447:rr,36063:(t,e)=>{if(!di(t)){const n=t.getExtension(cU);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:rr,35374:rr,35377:rr,34852:t=>{if(!di(t)){const e=t.getExtension(cU);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(aU)?2147483647:65535,33001:t=>t.getExtension(aU)?16777216:65535,33e3:t=>16777216,37157:rr,35373:rr,35657:rr,36183:rr,37137:rr,34045:rr,35978:rr,35979:rr,35968:rr,35376:rr,35375:rr,35659:rr,37154:rr,35371:rr,35658:rr,35076:rr,35077:rr,35380:rr},dU="ANGLE_instanced_arrays",uU={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Cs(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[dU]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Cs(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Cs(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Cs(!1)},deleteQuery:()=>{Cs(!1)},beginQuery:()=>{Cs(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},dI={readBuffer:(t,e,n)=>{di(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:o}=function hie(t,e){return{webgl2:di(t),ext:t.getExtension(e)}}(t,dU);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!di(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>di(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function sie(t,e,n){const i=oie[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function _ie(t,e){let{extension:n,target:i,target2:r}=e;const o=uU[n];Cs(o);const{meta:s={}}=o,{suffix:a=""}=s,c=t.getExtension(n);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function fie(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Kne(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new rf(this)),this.__OESVertexArrayObject))}}(t),function pie(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function gie(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&_ie(t,{extension:n,target:t.luma,target2:t})}(t,uU),function mie(t,e){let{target:n,target2:i}=e;Object.keys(dI).forEach(r=>{if("function"==typeof dI[r]){const o=t[r]?t[r].bind(t):()=>{},s=dI[r].bind(null,t,o);n[r]=s,i[r]=s}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const uI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Mu=(t,e,n)=>e?t.enable(n):t.disable(n),hU=(t,e,n)=>t.hint(n,e),_a=(t,e,n)=>t.pixelStorei(n,e);function h0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const vie={3042:Mu,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Mu,2885:(t,e)=>t.cullFace(e),2929:Mu,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Mu,35723:hU,36006:(t,e)=>{const n=di(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:hU,2849:(t,e)=>t.lineWidth(e),32823:Mu,32824:"polygonOffset",10752:"polygonOffset",35977:Mu,32938:"sampleCoverage",32939:"sampleCoverage",3089:Mu,3088:(t,e)=>t.scissor(...e),2960:Mu,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:_a,3317:_a,37440:_a,37441:_a,37443:_a,3330:_a,3332:_a,3331:_a,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:_a,32878:_a,3316:_a,3315:_a,32877:_a,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=h0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=h0(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=h0(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=h0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=h0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Lr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const xie={blendEquation:(t,e,n)=>t.blendEquationSeparate(Lr(32777,e,n),Lr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Lr(32969,e,n),Lr(32968,e,n),Lr(32971,e,n),Lr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Lr(32824,e,n),Lr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Lr(32938,e,n),Lr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Lr(2962,e,n),Lr(2967,e,n),Lr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Lr(34816,e,n),Lr(36003,e,n),Lr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Lr(2964,e,n),Lr(2965,e,n),Lr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Lr(34817,e,n),Lr(34818,e,n),Lr(34819,e,n))},fU={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},hl=(t,e)=>t.isEnabled(e),pU={3042:hl,2884:hl,2929:hl,3024:hl,32823:hl,32926:hl,32928:hl,3089:hl,2960:hl,35977:hl};function mU(t){for(const e in t)return!1;return!0}function wie(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function gU(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Eie(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Sie{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function Tie(t,e){if("number"==typeof(e=e||uI)){const r=e,o=pU[r];return o?o(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const o=pU[r];i[r]=o?o(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},uI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Cs(this.stateStack.length>0),sd(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Cs(void 0!==o);const s=e[o],a=this.cache[o];wie(s,a)||(n=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:i}}}function _U(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Cs(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new Sie(t,{copyState:i}),function Aie(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const o in fU)Eie(t,o,fU[o]);gU(t,"getParameter"),gU(t,"isEnabled")}return t.state.enable=n,t}function bU(t){Cs(t.state),t.state.pop()}function sd(t,e){if(Cs(iE(t),"setParameters requires a WebGL context"),mU(e))return;const n={};for(const r in e){const o=Number(r),s=vie[r];s&&("string"==typeof s?n[s]=!0:s(t,e[r],o))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,xie[r])(t,e,i)}function Ac(t,e,n){if(mU(e))return n(t);const{nocatch:i=!0}=e;let r;if(function Cie(t){t.state||_U(t,{copyState:!1}),t.state.push()}(t),sd(t,e),i)r=n(t),bU(t);else try{r=n(t)}finally{bU(t)}return r}function Mm(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function hI(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function Die(t,e,n,i,r){const o=yU(t[0],e,n);let s=vU(t[1],e,i,r),a=yU(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=vU(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,Mm(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function yU(t,e,n){return Math.min(Math.round(t*e),n-1)}function vU(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const fI=dl(),Rie=fI&&typeof document<"u",xU={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function wU(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cs(fI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},xU,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:o}=t,s=function Nie(t){let o,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(Rie&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:n,onError:i});return r=function Pie(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,t),r?(r=pI(r,t),function Fie(t){const e=di(t)?"WebGL2":"WebGL1",n=function Oie(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";un.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function pI(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function Lie(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},xU,e);const{manageState:n,debug:i}=e;return n&&_U(t,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return un.log(1,...o)()}}),fI&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),un.level=Math.max(un.level,1)):un.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function EU(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class AU{constructor(e,n){ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"sampleSize",1),ve(this,"time",void 0),ve(this,"count",void 0),ve(this,"samples",void 0),ve(this,"lastTiming",void 0),ve(this,"lastSampleTime",void 0),ve(this,"lastSampleCount",void 0),ve(this,"_count",0),ve(this,"_time",0),ve(this,"_samples",0),ve(this,"_startTime",0),ve(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=EU(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(EU()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class mI{constructor(e){ve(this,"id",void 0),ve(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof AU?e:new AU(n,i)),this.stats[n]}}const f0="8.5.20",sf=new class Uie{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new mI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==f0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(f0));function Yt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function gI(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Yt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Iu(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(dl()&&un.log(1,"luma.gl ".concat(f0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:f0,version:f0,log:un,stats:sf,globals:{modules:{},nodeIO:{}}}),globalThis;const _I={};function Ys(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";_I[t]=_I[t]||1;const e=_I[t]++;return"".concat(t,"-").concat(e)}function SU(t){return Yt("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function Im(t){let e=!0;for(const n in t){e=!1;break}return e}function CU(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(s=>{o.methodName||(o[s]=()=>{throw un.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const Dm="Resource subclass must define virtual methods";class ad{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rE(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||Ys(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Yt(e=gI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=di(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},o=di(this.gl),s={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Iu(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=Iu(this.gl,s[h]))}}return s}setParameter(e,n){Yt(e=gI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=di(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=gI(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return CU(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(Dm)}_deleteHandle(){throw new Error(Dm)}_bindHandle(e){throw new Error(Dm)}_getOptsFromHandle(){throw new Error(Dm)}_getParameter(e,n){throw new Error(Dm)}_setParameter(e,n){throw new Error(Dm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=sf.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];sf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=sf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=sf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Vie="Failed to deduce GL constant from typed array";function bI(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Vie)}}function p0(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Hie(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:s,width:r,height:o}}function yI(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";un.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];un.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];un.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const Gie={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Wie={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Xs{static getBytesPerElement(e){return p0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Yt(e.size),p0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Xs(Gie,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Xs.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Xs.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=yI("Accessor",e,Wie),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const MU={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},$ie={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:MU},Yie={removedProps:MU};class Gi extends ad{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/Xs.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/Xs.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=yI("Buffer",e,$ie),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=yI("Buffer",e,Yie))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Xs(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Yt(n);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(Qo(this.gl),this.gl.bufferSubData(this.target,i,n,r,o)):this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return Qo(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qo(this.gl);const o=p0(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Yt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Yt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Yt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=bI(e);return Yt(o),this.setAccessor(new Xs(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Yt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/p0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new Xs(this.accessor,{type:bI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return un.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return un.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return un.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return un.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Xs(this.accessor,e),this}}const vI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},IU={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},DU={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},qie=[9729,9728],RU=globalThis.WebGLBuffer||function(){};class af extends ad{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let o=!0;return i&&(o=o&&function Xie(t,e){const n=vI[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=di(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),o=o&&(!r||function Kie(t,e){const n=vI[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,n){const{id:i=Ys("texture"),handle:r,target:o}=n;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(Y=>this.initialize(Object.assign({},e,{pixels:Y,data:Y}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:p,dataFormat:m,type:b,compressed:T=!1,mipmaps:D=!0}=e;const{depth:U=0}=e;return({width:h,height:p,compressed:T,dataFormat:m,type:b}=this._deduceParameters({format:o,type:b,dataFormat:m,compressed:T,data:n,width:h,height:p})),this.width=h,this.height=p,this.depth=U,this.format=o,this.type=b,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),D&&this._isNPOT()&&(un.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),D=!1,this._updateForNPOT(c)),this.mipmaps=D,this.setImageData({data:n,width:h,height:p,depth:U,format:o,type:b,dataFormat:m,border:s,mipmaps:D,parameters:l,compressed:T}),D&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(un.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ac(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:p=this.height,dataFormat:m=this.dataFormat,compressed:b=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:b,width:h,height:p}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:b,data:l,width:h,height:p}));const{gl:T}=this;T.bindTexture(this.target,this.handle);let D=null;({data:l,dataType:D}=this._getDataType({data:l,compressed:b}));let U,Y=0;return Ac(this.gl,c,()=>{switch(D){case"null":T.texImage2D(n,r,o,h,p,s,m,d,l);break;case"typed-array":T.texImage2D(n,r,o,h,p,s,m,d,l,a);break;case"buffer":U=Qo(T),U.bindBuffer(35052,l.handle||l),U.texImage2D(n,r,o,h,p,s,m,d,a),U.bindBuffer(35052,null);break;case"browser-object":di(T)?T.texImage2D(n,r,o,h,p,s,m,d,l):T.texImage2D(n,r,o,m,d,l);break;case"compressed":for(const[ye,Ce]of l.entries())T.compressedTexImage2D(n,ye,Ce.format,Ce.width,Ce.height,s,Ce.data),Y+=Ce.levelSize;break;default:Yt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===D?Y:l&&l.byteLength?l.byteLength:this.width*this.height*(IU[this.dataFormat]||4)*(DU[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:m=!1,offset:b=0,border:T=this.border,parameters:D={}}=e;if(({type:h,dataFormat:p,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:p,compressed:m,data:r,width:a,height:c})),Yt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const U=r;r=U.data,a=U.shape[0],c=U.shape[1]}r instanceof Gi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Ac(this.gl,D,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,o,s,a,c,p,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,o,s,a,c,p,h,r,b);else if(r instanceof RU){const U=Qo(this.gl);U.bindBuffer(35052,r),U.texSubImage2D(n,l,o,s,a,c,p,h,b),U.bindBuffer(35052,null)}else di(this.gl)?Qo(this.gl).texSubImage2D(n,l,o,s,a,c,p,h,r):this.gl.texSubImage2D(n,l,o,s,p,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return un.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Gi?{data:n.handle,dataType:"buffer"}:n instanceof RU?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=vI[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Yt(r,"Could not deduced texture size"),Yt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Yt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Yt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(di(this.gl)||!this.width||!this.height||SU(this.width)&&SU(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===qie.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function Jie(t,e){return Yt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class Ts extends af{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return af.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rE(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:Jie(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const cf="EXT_color_buffer_float",OU={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:cf,bpp:2},33327:{gl2:cf,bpp:4},34842:{gl2:cf,bpp:8},33326:{gl2:cf,bpp:4},33328:{gl2:cf,bpp:8},34836:{gl2:cf,bpp:16},35898:{gl2:cf,bpp:4}};class Rm extends ad{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function Zie(t,e,n){const i=n[e];if(!i)return!1;const r=di(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,OU)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:o=0}=e;return Yt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&di(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*OU[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const kU=6144,LU="clear: bad arguments";function wI(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Yt(0!==s,LU),Ac(t,o,()=>{t.clear(s)})}const EI=[34069,34070,34071,34072,34073,34074];let rre=(()=>{class t extends af{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rE(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return jt(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n;const{gl:h}=i,p=s||a,m=yield Promise.all(EI.map(b=>{const T=p[b];return Promise.all(Array.isArray(T)?T:[T])}));i.bind(),EI.forEach((b,T)=>{m[T].length>1&&!1!==i.opts.mipmaps&&un.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[T].forEach((D,U)=>{r&&o?h.texImage2D(b,U,l,r,o,c,l,d,D):h.texImage2D(b,U,l,l,d,D)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n,{gl:h}=this,p=s||a;return this.bind(),p instanceof Promise?p.then(m=>this.setImageDataForFace(Object.assign({},n,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,p):h.texImage2D(i,0,l,l,d,p),this}}return t.FACES=EI,t})();class ore extends af{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return di(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qo(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:p={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ac(this.gl,p,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,h),h instanceof Gi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(IU[this.dataFormat]||4)*(DU[this.type]||1),"Texture"),this.loaded=!0,this}}function are(t,e){const{gl:n,width:i,height:r,id:o}=t;return new uo(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:t}}))}function oE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=m0(t);Yt(d);const{gl:p,handle:m,attachments:b}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Yt(b[o]),l=l||b[o].type,s=function lre(t,e,n,i,r){if(t)return t;const o=p0(e=e||5121,{clamped:!1}),s=function ire(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Yt(!1),0}}(n);return new o(i*r*s)}(s,l,r,a,c),l=l||bI(s);const T=p.bindFramebuffer(36160,m);return p.readPixels(n,i,a,c,r,l,s),p.bindFramebuffer(36160,T||null),h&&d.delete(),s}function AI(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=oE(t,{sourceAttachment:e}),{width:r,height:o}=t;for(;o>n;)({data:i,width:r,height:o}=Hie({data:i,width:r,height:o}));!function zie(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:o}=t;const s=n*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function m0(t){return t instanceof uo?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:are(t),deleteFramebuffer:!0}}const BU="Multiple render targets not supported";class uo extends ad{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new uo(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Qo(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Qo(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Yt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const p=r[h];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else r=this._createDefaultAttachments(o,s,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Yt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&un.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Yt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof Rm)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,p=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:p})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function ure(t){return(uo.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&wI(this.gl,{color:n,depth:i,stencil:r}),o.forEach((a,c)=>{!function nre(t){let{framebuffer:e=null,buffer:n=kU,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qo(t),Ac(t,{framebuffer:e},()=>{switch(n){case kU:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;t.clearBufferfi(34041,0,o,s);break;default:Yt(!1,LU)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return un.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return un.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return un.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return un.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return un.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return un.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:o,height:s}=e;const a=Qo(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Iu(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[n?Iu(this.gl,o):o]=this.getAttachmentParameter(e,o,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const o=Number(r);i[e?Iu(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(AI(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>un.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=AI(this,{targetMaxHeight:100});return un.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new Ts(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),n&&i?(s=s||{},s[33306]=new Rm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new Rm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Yt(!1),s}_unattach(e){const n=this.attachments[e];n&&(n instanceof Rm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:Qo(s).framebufferTextureLayer(36160,n,i.target,o,r);break;case 34067:const c=function dre(t){return t<34069?t+34069:t}(r);s.framebufferTexture2D(36160,n,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,o);break;default:Yt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Gne(t){return di(t)?t:null}(this.gl);n?n.readBuffer(e):Yt(36064===e||1029===e,BU),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=Qo(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Yt(1===e.length&&(36064===e[0]||1029===e[0]),BU)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function mre(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in jU)void 0===t.luma.caps[e]&&(t.luma.caps[e]=VU(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}uo.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const jU={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function fre(t){const e=new Ts(t,{format:6408,type:5126,dataFormat:6408}),n=new uo(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},pre=2;function SI(t,e){return UU(t,e)}function UU(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>VU(t,n))}function VU(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function gre(t,e){const n=jU[e];let i;Yt(n,e);const r=di(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!t.getExtension(o)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Yt(!1);return i}(t,e)),t.luma.caps[e]||un.log(pre,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class CI{constructor(e,n){ve(this,"opts",void 0),ve(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=n.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const g0=new class bre{constructor(e={}){ve(this,"_pool",[]),ve(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=n*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const p=this._allocate(l,d,a,h);return e&&s?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,n,i,r){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,o=n.findIndex(s=>s.byteLength>=r);o<0?n.push(i):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,i),n.length>this.opts.poolSize&&n.shift()}},yre=1/Math.PI*180,vre=1/180*Math.PI,Gr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function xre(t,{precision:e=Gr.precision}={}){return t=function Cre(t){return Math.round(t/Gr.EPSILON)*Gr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function cd(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zU(t){return function Ere(t,e){return ld(t,n=>n*vre,e)}(t)}function wre(t){return function Are(t,e){return ld(t,n=>n*yre,e)}(t)}function wr(t,e,n){return ld(t,i=>Math.max(e,Math.min(n,i)))}function sE(t,e,n){return cd(t)?t.map((i,r)=>sE(i,e[r],n)):n*e+(1-n)*t}function Du(t,e,n){const i=Gr.EPSILON;n&&(Gr.EPSILON=n);try{if(t===e)return!0;if(cd(t)&&cd(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Du(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Gr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Gr.EPSILON=i}}function ld(t,e,n){if(cd(t)){const i=t;n=n||function Tre(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class aE extends(function Mre(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:cd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Gr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+xre(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Du(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(n[r]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Gr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function ui(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function _0(t,e,n=""){if(Gr.debug&&!function Ire(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function b0(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class GU extends aE{get x(){return this[0]}set x(e){this[0]=ui(e)}get y(){return this[1]}set y(e){this[1]=ui(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return ui(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return ui(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return b0(e>=0&&e<this.ELEMENTS,"index is out of range"),ui(this[e])}setComponent(e,n){return b0(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var fl=1e-6,Ks=typeof Float32Array<"u"?Float32Array:Array;function WU(){var t=new Ks(3);return Ks!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function $U(t,e,n){var i=new Ks(3);return i[0]=t,i[1]=e,i[2]=n,i}function YU(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function cE(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=r*c-o*a,t[1]=o*s-i*c,t[2]=i*a-r*s,t}function TI(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/(s=s||1),t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function XU(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function KU(t,e,n){var i=n[0],r=n[1],o=n[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,p=i*c-r*a,m=r*p-o*h,b=o*d-i*p,T=i*h-r*d,D=2*n[3];return h*=D,p*=D,b*=2,T*=2,t[0]=a+(d*=D)+(m*=2),t[1]=c+h+b,t[2]=l+p+T,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function qU(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o||1;return t[0]=(n[0]*i+n[4]*r+n[8]*o)/s,t[1]=(n[1]*i+n[5]*r+n[9]*o)/s,t[2]=(n[2]*i+n[6]*r+n[10]*o)/s,t}function JU(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*o,t[1]=n[1]*i+n[4]*r+n[7]*o,t[2]=n[2]*i+n[5]*r+n[8]*o,t[3]=e[3],t}WU();const MI=[0,0,0];let lE;class nn extends GU{static get ZERO(){return lE||(lE=new nn(0,0,0),Object.freeze(lE)),lE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&cd(e)?this.copy(e):(Gr.debug&&(ui(e),ui(n),ui(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Gr.debug&&(ui(e.x),ui(e.y),ui(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ui(e)}angle(e){return function Bre(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&YU(t,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return cE(this,this,e),this.check()}rotateX({radians:e,origin:n=MI}){return function Nre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=MI}){return function Fre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=MI}){return function Lre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return TI(this,this,e),this.check()}transformAsVector(e){return qU(this,this,e),this.check()}transformByMatrix3(e){return XU(this,this,e),this.check()}transformByMatrix2(e){return function zre(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return KU(this,this,e),this.check()}}const ZU=new nn;function Om(t,e,n,i){ZU.set(t,e,n);const r=ZU.len();return{distance:i/r,normal:new nn(-t/r,-e/r,-n/r)}}function Yre(t){return t-Math.fround(t)}let v0;function II(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,o=(r-i)/n;v0=g0.allocate(v0,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let c=0;c<n;c++){const l=t[s++];v0[a+c]=l,v0[a+c+n]=Yre(l)}a+=2*n}return v0.subarray(0,o*n*2)}function Xre(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}function dE(t){return t.stride||t.size*t.bytesPerElement}function QU(t,e){e.offset&&mi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=dE(t),o=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}class qre{constructor(e,n,i){ve(this,"gl",void 0),ve(this,"id",void 0),ve(this,"size",void 0),ve(this,"settings",void 0),ve(this,"value",void 0),ve(this,"doublePrecision",void 0),ve(this,"_buffer",void 0),ve(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,o=5130===r;let a,{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&n.isIndexed?e&&SI(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function _re(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Gi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*dE(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),g0.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function Kre(t,e){const n=QU(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new CI(this,o.high),i["".concat(e,"64Low")]=r?new CI(this,o.low):new Float32Array(this.size),i}if(n){const i=QU(this.getAccessor(),n);return{[e]:new CI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,o=i*r;if(n&&o&&n.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=n[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Gi?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),n.constant&&this._areValuesEqual(o,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;n.externalBuffer=o,n.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=dE(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;n.externalBuffer=null,n.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=dE(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=II(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?II(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,o=g0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&r&&s.subData({data:r instanceof Float64Array?II(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&mi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let s=o;for(;--s>=0;)n[i+s]=r[s];return n}switch(o){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)n[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}function Fo(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const e4=[],t4=[];function uE(t,e=0,n=1/0){let i=e4;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(t4.length=t.length,i=t4):i=e4,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function n4(t){return t&&t[Symbol.asyncIterator]}function DI(t,e=(()=>!0)){return Array.isArray(t)?i4(t,e,[]):e(t)?[t]:[]}function i4(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?i4(r,e,n):e(r)&&n.push(r)}return n}function Zre({target:t,source:e,start:n=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=n;s<r;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}const Qre=[],hE=[[0,1/0]];function RI(t){const{source:e,target:n,start:i=0,size:r,getData:o}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)n[i+l]=d[h]||0,l++}}const noe={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function r4(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...noe[n],...e,...t,type:n}}function o4(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function s4(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function a4(t){t.push(t.shift())}function OI(t,e){const{doublePrecision:n,settings:i,value:r,size:o}=t,s=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function c4({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,c=n.byteOffset,l=n.startIndices,d=r&&l,h=OI(n,e),p=n.isConstant;if(!d&&i>=h)return;const m=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){const U=o;o=(Y,ye)=>n.normalizeConstant(U(Y,ye))}const b=p?(U,Y)=>o(m,Y):(U,Y)=>o(m.subarray(U,U+a),Y),T=t.getData({length:i}),D=new Float32Array(h);(function toe({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return RI({source:t,target:e,size:n,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*n,p=o[d]*n;RI({source:t.subarray(s,h),target:e,start:a,end:p,size:n,getData:c}),s=h,a=p}a<e.length&&RI({source:[],target:e,start:a,size:n,getData:c})})({source:T,target:D,sourceStartIndices:r,targetStartIndices:l,size:a,getData:b}),t.byteLength<D.byteLength+c&&t.reallocate(D.byteLength+c),t.subData({data:D,offset:c})}class kI extends qre{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:hE}),ve(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return r4(Array.isArray(n)?e[n.find(o=>e[o])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function eoe(t,e){if(t===hE||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let o=0;o<i;o++){const s=t[o];s[1]<e[0]?(n.push(s),r=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=hE}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Qre}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==hE),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:n,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return Fo(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Jre(t,e){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,d=Math.floor((t.length-l)/c);return(h,{index:p,target:m})=>{if(!o){const U=p*c+l;for(let Y=0;Y<n;Y++)m[Y]=t[U+Y];return m}const b=o[p],T=o[p+1]||d;let D;if(s){D=new Array(T-b);for(let U=b;U<T;U++){const Y=U*c+l;m=new Array(n);for(let ye=0;ye<n;ye++)m[ye]=t[Y+ye];D[U-b]=m}}else if(c===n)D=t.subarray(b*n+l,T*n+l);else{D=new t.constructor((T-b)*n);let U=0;for(let Y=b;Y<T;Y++){const ye=Y*c+l;for(let Ce=0;Ce<n;Ce++)D[U++]=t[ye+Ce]}}return D}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:p,transform:m}=a,b=c.binaryAccessor||("function"==typeof p?p:o[p]);Fo("function"==typeof b,'accessor "'.concat(p,'" is not a function'));let T=e.getVertexOffset(i);const{iterable:D,objectInfo:U}=uE(n,i,r);for(const Y of D){U.index++;let ye=b(Y,U);if(m&&(ye=m.call(this,ye)),h){const Ce=(U.index<h.length-1?h[U.index+1]:s)-h[U.index];if(ye&&Array.isArray(ye[0])){let je=T;for(const qe of ye)e._normalizeValue(qe,l,je),je+=d}else ye&&ye.length>d?l.set(ye,T):(e._normalizeValue(ye,U.target,0),Zre({target:l,source:U.target,start:T,count:Ce}));T+=Ce*d}else e._normalizeValue(ye,l,T),T+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function ioe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function x0(t){let n,e={};return i=>{for(const r in i)if(!ioe(i[r],e[r])){n=t(i),e=i;break}return n}}let PI={};function roe(t){PI=t}function es(t,e,n,i){mi.level>0&&PI[t]&&PI[t].call(null,e,n,i)}function ba(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const l4="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",soe="#version 300 es\n".concat(l4);function d4(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,o]=n;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function u4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?soe:e>300?"#version ".concat(e,"\n").concat(l4):"void main() {gl_FragColor = vec4(0);}";const o=function loe(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return ba(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class h4 extends ad{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return di(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qo(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Im(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(n);return i<0?(this.unused[e]=r,un.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof Gi?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class doe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Gi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Yt(di(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=n[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new h4(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];n[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Yt(i[o]instanceof Gi)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Gi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function f4(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const w0="vs",foe={[w0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},fE="__LUMA_INJECT_DECLARATIONS__",p4=/void\s+main\s*\([^)]*\)\s*\{\n?/,m4=/}\n?[^{}]*$/,FI=[];function g4(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===w0;for(const o in n){const s=n[o];s.sort((c,l)=>c.order-l.order),FI.length=s.length;for(let c=0,l=s.length;c<l;++c)FI[c]=s[c].injection;const a="".concat(FI.join("\n"),"\n");switch(o){case"vs:#decl":r&&(t=t.replace(fE,a));break;case"vs:#main-start":r&&(t=t.replace(p4,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(m4,c=>a+c));break;case"fs:#decl":r||(t=t.replace(fE,a));break;case"fs:#main-start":r||(t=t.replace(p4,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(m4,c=>a+c));break;default:t=t.replace(o,c=>c+a)}}return t=t.replace(fE,""),i&&(t=t.replace(/\}\s*$/,o=>o+foe[e])),t}function LI(t){const e={};return ba(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}const poe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},pE="transform_uSize_",_4="transform_position";const woe={10241:9728,10240:9728,10242:33071,10243:33071};class Aoe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function _oe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let o,s;n&&(({width:o,height:s}=i),r["".concat(pE).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(pE).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=oE(n);if(!e)return i;const r=i.constructor,o=function coe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return ba(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof Ts)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Gi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new uo(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(woe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function sre(t,e){Yt(t instanceof Ts||t instanceof rre||t instanceof ore);const n=t.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=t;return new n(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function goe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,s=Object.keys(n).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),p=h.slice();if(h.forEach((m,b,T)=>{if(s>0){const D=function xoe(t,e){const n={},i=function boe(t){return d4(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function yoe(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(pE).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(o),d=function aoe(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return ba(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(m,n);if(D){const{updatedLine:U,inject:Y}=D;p[b]=U,d=LI([d,Y]),Object.assign(c,D.samplerTextureMap),s--}}i&&!a&&(a=function voe(t,e){const n=d4(t,["varying","out"]);return n&&n.name===e?n.type:null}(m,i))}),i){Yt(r);const m="".concat(pE).concat(i),b="uniform vec2 ".concat(m,";\n"),T="     vec2 ".concat(_4," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(_4,", 0, 1.);\n");d=LI([d,{"vs:#decl":b,"vs:#main-start":T}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=LI([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||u4({version:f4(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[poe].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const BI={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function Coe(t){let e=b4(t);return"object"===e?t?"type"in t?Object.assign({},t,BI[t.type]):"value"in t?(e=b4(t.value),Object.assign({type:e},t,BI[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},BI[e])}function b4(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class jI{constructor(e){let{name:n,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:p}=e;ba("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||p,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Ioe(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),s&&(this.uniforms=function Soe(t){const e={};for(const n in t){const r=Coe(t[n]);e[n]=r}return e}(s))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:ba(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&ba(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=o.value}return n}}function Doe(t){return function y4(t){const e={},n={};return UI({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(v4(t))}function UI(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of e)o.dependencies&&UI({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function v4(t,e){return t.map(n=>(n instanceof jI||(ba("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),ba(n.name,"shader module has no name"),(n=new jI(n)).dependencies=v4(n.dependencies)),n))}const Ooe=7936,koe=7937,Poe=7938,Noe=35724,VI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},lf={};function Boe(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(VI).forEach(t=>{lf[t]=t});const zI={};function x4(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=VI[e];if(ba(i,e),!function Roe(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in zI)return zI[e];const o=n.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),zI[e]=c,c}function mE(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function joe(t,e){const n=VI[e];ba(n,e);const i=function Foe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return ba(!1===r||!0===r),r}(t,n))}function km(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const w4=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],zoe=[...w4,[km("attribute"),"in $1"],[km("varying"),"out $1"]],Hoe=[...w4,[km("varying"),"in $1"]],E4=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Goe=[...E4,[km("in"),"attribute $1"],[km("out"),"varying $1"]],Woe=[...E4,[km("in"),"varying $1"]],HI="gl_FragColor",GI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,$oe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function gE(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const qoe="\n\n".concat(fE,"\n\n"),A4={[w0]:"vertex",fs:"fragment"};function S4(t,e){let{id:n,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;ba("string"==typeof i,"shader source must be a string");const p=r===w0,m=i.split("\n");let b=100,T="",D=i;0===m[0].indexOf("#version ")?(b=300,T=m[0],D=m.slice(1).join("\n")):T="#version ".concat(b);const U={};o.forEach(at=>{Object.assign(U,at.getDefines())}),Object.assign(U,s);let Y=d?"".concat(T,"\n").concat(function tse(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(A4[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function ese(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(A4[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Uoe(t){switch(function Loe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Ooe),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||koe);return{gpuVendor:Boe(n,i),vendor:n,renderer:i,version:t.getParameter(Poe),shadingLanguageVersion:t.getParameter(Noe)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function Voe(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return mE(t,lf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),mE(t,lf.GLSL_DERIVATIVES)&&x4(t,lf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),mE(t,lf.GLSL_FRAG_DATA)&&x4(t,lf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),mE(t,lf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function nse(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(U),"\n").concat(p?"":"precision highp float;\n\n","\n"):"".concat(T,"\n");const ye=function rse(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,o]=n.split(":"),s=n.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),Ce={},je={},qe={};for(const at in c){const pt="string"==typeof c[at]?{injection:c[at],order:0}:c[at],ht=at.match(/^(v|f)s:(#)?([\w-]+)$/);ht?ht[2]?"decl"===ht[3]?je[at]=[pt]:qe[at]=[pt]:Ce[at]=[pt]:qe[at]=[pt]}for(const at of o){h&&at.checkDeprecations(D,h),Y+=at.getModuleSource(r,b);const ht=at.injections[r];for(const _t in ht){const yt=_t.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ut="decl"===yt[2]?je:qe;ut[_t]=ut[_t]||[],ut[_t].push(ht[_t])}else Ce[_t]=Ce[_t]||[],Ce[_t].push(ht[_t])}}return Y+=qoe,Y=g4(Y,r,je),Y+=function ise(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)n+="  ".concat(s.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(ye[r],Ce),Y+=D,Y=g4(Y,r,qe),Y=function Yoe(t,e,n){switch(e){case 300:return n?gE(t,zoe):function Xoe(t){const e=(t=gE(t,Hoe)).match(GI);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(HI,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace($oe,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(HI,"\\b"),"g"),n)}return t}(t);case 100:return n?gE(t,Goe):function Koe(t){const e=(t=gE(t,Woe)).match(GI);if(e){const n=e[1];t=t.replace(GI,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),HI)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(Y,l?100:b,p),Y}function Qoe(t){return function(n){const i={};for(const r of t){const o=r.getUniforms(n,i);Object.assign(i,o)}return i}}const ose={5126:ur.bind(null,"uniform1fv",ya,1,ts),35664:ur.bind(null,"uniform2fv",ya,2,ts),35665:ur.bind(null,"uniform3fv",ya,3,ts),35666:ur.bind(null,"uniform4fv",ya,4,ts),5124:ur.bind(null,"uniform1iv",Ru,1,ts),35667:ur.bind(null,"uniform2iv",Ru,2,ts),35668:ur.bind(null,"uniform3iv",Ru,3,ts),35669:ur.bind(null,"uniform4iv",Ru,4,ts),35670:ur.bind(null,"uniform1iv",Ru,1,ts),35671:ur.bind(null,"uniform2iv",Ru,2,ts),35672:ur.bind(null,"uniform3iv",Ru,3,ts),35673:ur.bind(null,"uniform4iv",Ru,4,ts),35674:ur.bind(null,"uniformMatrix2fv",ya,4,dd),35675:ur.bind(null,"uniformMatrix3fv",ya,9,dd),35676:ur.bind(null,"uniformMatrix4fv",ya,16,dd),35678:Lo,35680:Lo,5125:ur.bind(null,"uniform1uiv",_E,1,ts),36294:ur.bind(null,"uniform2uiv",_E,2,ts),36295:ur.bind(null,"uniform3uiv",_E,3,ts),36296:ur.bind(null,"uniform4uiv",_E,4,ts),35685:ur.bind(null,"uniformMatrix2x3fv",ya,6,dd),35686:ur.bind(null,"uniformMatrix2x4fv",ya,8,dd),35687:ur.bind(null,"uniformMatrix3x2fv",ya,6,dd),35688:ur.bind(null,"uniformMatrix3x4fv",ya,12,dd),35689:ur.bind(null,"uniformMatrix4x2fv",ya,8,dd),35690:ur.bind(null,"uniformMatrix4x3fv",ya,12,dd),35678:Lo,35680:Lo,35679:Lo,35682:Lo,36289:Lo,36292:Lo,36293:Lo,36298:Lo,36299:Lo,36300:Lo,36303:Lo,36306:Lo,36307:Lo,36308:Lo,36311:Lo},sse={},ase={},cse={},C4=[0];function WI(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(C4[0]=t,t=C4);const r=t.length;if(r%e&&un.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=i[r];o||(o=new n(r),i[r]=o);for(let s=0;s<r;s++)o[s]=t[s];return o}function ya(t,e){return WI(t,e,Float32Array,sse)}function Ru(t,e){return WI(t,e,Int32Array,ase)}function _E(t,e){return WI(t,e,Uint32Array,cse)}function T4(t,e,n){const i=ose[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function lse(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function use(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function fse(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof af||t instanceof Rm)||t instanceof uo&&!!t.texture}function hse(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,o=n.length;r<o;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Lo(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function ur(t,e,n,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Yt(o===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(l[p]!==r[p]){h=!0;break}}return h&&(i(s,t,a,l),r.set(l)),h}}function ts(t,e,n,i){t[e](n,i)}function dd(t,e,n,i){t[e](n,!1,i)}function bE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function I4(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const o=t[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=D4("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function D4(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class E0 extends ad{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Yt(!1),"unknown"}}constructor(e,n){rE(e),Yt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:bE(n.source,null)||n.id||Ys("unnamed ".concat(E0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=bE(n,null);i&&(this.id=Ys(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(E0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return bE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function M4(t,e,n,i){const r=t.split(/\r?\n/),o={},s={},a=i||bE(e)||"(unnamed)",c="".concat(function gse(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const p=h.split(":"),m=p[0],b=parseInt(p[2],10);if(isNaN(b))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?o[b]=h:s[b]=h}const l=function _se(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return D4(a,r-a.length)+n+o})}(e);return{shaderName:c,errors:I4(o,l),warnings:I4(s,l)}}(i,this.source,this.shaderType,this.id);throw un.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),un.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class $I extends E0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class YI extends E0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const yse=5120,vse=5121,xse=5122,wse=5123,ho=5126,A0=5124,S0=5125,XI={[ho]:[ho,1,"float"],35664:[ho,2,"vec2"],35665:[ho,3,"vec3"],35666:[ho,4,"vec4"],[A0]:[A0,1,"int"],35667:[A0,2,"ivec2"],35668:[A0,3,"ivec3"],35669:[A0,4,"ivec4"],[S0]:[S0,1,"uint"],36294:[S0,2,"uvec2"],36295:[S0,3,"uvec3"],36296:[S0,4,"uvec4"],35670:[ho,1,"bool"],35671:[ho,2,"bvec2"],35672:[ho,3,"bvec3"],35673:[ho,4,"bvec4"],35674:[ho,8,"mat2"],35685:[ho,8,"mat2x3"],35686:[ho,8,"mat2x4"],35675:[ho,12,"mat3"],35687:[ho,12,"mat3x2"],35688:[ho,12,"mat3x4"],35676:[ho,16,"mat4"],35689:[ho,16,"mat4x2"],35690:[ho,16,"mat4x3"]};function F4(t){const e=XI[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function L4(t,e){switch(t){case yse:case vse:case xse:case wse:t=ho}for(const n in XI){const[i,r,o]=XI[n];if(i===t&&r===e)return{glType:n,name:o}}return null}class $se{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!di(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,n,i,r){const{type:o,components:s}=F4(i),a={type:o,size:r*s};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new Xs(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:o,components:s}=F4(i),c={location:e,name:n,accessor:new Xs({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Yse=35981,Xse=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class j4 extends ad{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",Xse),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:o,bufferMode:s=Yse}=e;return this.hash=n||"",this.vs="string"==typeof i?new $I(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new YI(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Yt(this.vs instanceof $I),Yt(this.fs instanceof YI),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Qo(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new $se(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:p=null,transformFeedback:m,framebuffer:b,parameters:T={},uniforms:D,samplers:U}=e;if((D||U)&&(un.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(D||{})),un.priority>=n){const Y=b?b.id:"default",ye="mode=".concat(Iu(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(Iu(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(Y);un.log(n,ye)()}return Yt(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(p.bindForDraw(r,d,()=>{if(void 0!==b&&(T=Object.assign({},T,{framebuffer:b})),m){const Y=function N4(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Yt(!1),0}}(i);m.begin(Y)}this._bindTextures(),Ac(this.gl,T,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&di(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};un.priority>=2&&function dse(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!use(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let o=i,s=!1;if(o instanceof uo&&(o=o.texture),o instanceof af)if(s=this.uniforms[n]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[n]=a}else o=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(o)||s)&&hse(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new $I({handle:r});break;case 35632:i.fs=new YI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Ys(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),un.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),un.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||un.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=lse(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=T4(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=T4(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class C0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new C0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),p=l.map(ye=>this._getHash(ye.name)).sort(),m=s.map(ye=>this._getHash(ye)),b=Object.keys(r).sort(),T=Object.keys(o).sort(),D=[],U=[];for(const ye of b)D.push(this._getHash(ye)),D.push(this._getHash(r[ye]));for(const ye of T)U.push(this._getHash(ye)),U.push(this._getHash(o[ye]));const Y="".concat(d,"/").concat(h,"D").concat(D.join("/"),"M").concat(p.join("/"),"I").concat(U.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[Y]){const ye=function Zoe(t,e){const{vs:n,fs:i}=e,r=Doe(e.modules||[]);return{gl:t,vs:S4(t,Object.assign({},e,{source:n,type:w0,modules:r})),fs:S4(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Qoe(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[Y]=new j4(this.gl,{hash:Y,vs:ye.vs,fs:ye.fs,varyings:s,bufferMode:a}),this._getUniforms[Y]=ye.getUniforms||(Ce=>{}),this._useCounts[Y]=0}return this._useCounts[Y]++,this._programCache[Y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;n[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let vE=null;const xE=globalThis;function U4(t){if(!t&&!dl())return"Node";if(Qj(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":xE.chrome?"Chrome":xE.safari?"Safari":xE.mozInnerScreenX?"Firefox":"Unknown"}class va extends ad{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||di(e)||"Chrome"===U4()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new va(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return va.MAX_ATTRIBUTES=va.MAX_ATTRIBUTES||e.getParameter(34921),va.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:va._setConstantFloatArray(e,n,i);break;case Int32Array:va._setConstantIntArray(e,n,i);break;case Uint32Array:va._setConstantUintArray(e,n,i);break;default:Yt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return va.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Yt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Yt(di(h)),p.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!va.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new Gi(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function qse(t,e){const n=function Kse(t){return(!vE||vE.byteLength<t)&&(vE=new ArrayBuffer(t)),vE}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,o);(function Jse(t){let{target:e,source:n,start:i=0,count:r=1}=t;const o=n.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Yt(!1)}}static _setConstantIntArray(e,n,i){switch(Yt(di(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Yt(!1)}}static _setConstantUintArray(e,n,i){switch(Yt(di(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Yt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Yt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const eae=/^(.+)__LOCATION_([0-9]+)$/,tae=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class nae{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new va(e),CU(this,"VertexArray","v6.0",tae),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,o)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Gi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Gi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Gi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,un.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=Xs.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:p}=d;return Yt(Number.isFinite(h)&&Number.isFinite(p)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=eae.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof Gi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Gi)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof Gi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,n){if(va.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){va.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof Gi){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return un.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function T0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function iae(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=T0(t[s],e);const o=t.length>n?"...":"]";return"".concat(r).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function V4(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof Gi){const p=e,{data:m,changed:b}=p.getDebugData();let T;return d=b?"*":"",h=m,c=p.byteLength,a=c/m.BYTES_PER_ELEMENT/s,n?T="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(Iu(r,o),")"):(l=!0,T="".concat(c," bytes")),{[i]:"".concat(d).concat(T0(h,{size:s,isInteger:l})),"Format ":T}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(T0(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function oae(t,e){const{type:n,size:i}=e,r=L4(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function z4(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Yt(n);const s=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&KI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&KI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||KI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const p={};if(!r)for(const m in i){const b=i[m];c[m]||(h++,p[m]={Type:"NOT USED: ".concat(b),[e]:T0(b)})}return{table:c,count:d,unusedTable:p,unusedCount:h}}function KI(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:o}=t;const s=i[r],a=function sae(t){return null!=t}(s);return!(o&&a||(e[r]={[n]:a?T0(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function H4(t){const{type:e,size:n}=t.accessor,i=L4(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const cae={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function dae(t,e){const{attributeMap:n=cae}=e||{};return n&&n[t]||t}function uae(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Yt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const G4=()=>{},pae={};class Lm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=Ys("model")}=n;Yt(iE(e)),this.id=i,this.gl=e,this.id=n.id||Ys("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||C0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Yt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Yt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Yt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function lae(t,e,n){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=dae(o,n);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new Gi(t,c),l],uae(o,l)}}if(r){const o=r.value||r;Yt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Gi(t,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Im(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return wI(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(r),un.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:p=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:b=d.isInstanced}=this.props;b&&!this.isInstanced&&un.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:T,instanceCount:D}=this,{onBeforeRender:U=G4,onAfterRender:Y=G4}=this.props;U(),this.program.setUniforms(this.uniforms);const ye=this.program.draw(Object.assign(pae,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:p,isInstanced:T,instanceCount:D,offset:h?m:0}));return Y(),un.priority>=2&&this._logDrawCallEnd(l,c,i),ye}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,{35977:n})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return un.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Yt(n instanceof j4,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new nae(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Gi&&n.delete()}}_setAnimationProps(e){this.animated&&Yt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Im(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new h4(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),un.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:un.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const o=function rae(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=V4(e,e.elements,null,n));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(oae(s.name,c))),i[a]=V4(e,r[o],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=z4({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=z4({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&un.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&un.log("UNUSED UNIFORMS",Object.keys(a))();const h=function aae(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=H4(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=H4(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);un.table(e,o)(),un.table(e,s)(),un.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),un.groupEnd(2)()}}class qI{static isSupported(e){return di(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Yt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Lm(n,Object.assign({},e,{fs:e.fs||u4({version:f4(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function mae(t){return!(Im(t.feedbackBuffers)&&Im(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new doe(e,n)),function gae(t){return!(Im(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new Aoe(e,n)),Yt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}class M0{constructor(e){ve(this,"_inProgress",void 0),ve(this,"_handle",void 0),ve(this,"_timeline",void 0),ve(this,"time",void 0),ve(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Aae={interpolation:class _ae{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","interpolation"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.transition=new M0(i),this.attribute=n,this.attributeInTransition=new kI(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function yae(t,e){const n=s4(e.size);return new qI(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Gi(e,r),new Gi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;a4(r);const s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)c4({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=OI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:o4(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let o=r/n;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class vae{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","spring"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"texture",void 0),ve(this,"framebuffer",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new M0(i),this.attribute=n,this.attributeInTransition=new kI(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function wae(t){return new Ts(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function Eae(t,e){return new uo(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function xae(t,e,n){const i=s4(e.size);return new qI(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Gi(e,r),new Gi(e,r),new Gi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)c4({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=OI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:o4(0,o)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),a4(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),oE(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Sae{constructor(e,{id:n,timeline:i}){ve(this,"id",void 0),ve(this,"isSupported",void 0),ve(this,"gl",void 0),ve(this,"timeline",void 0),ve(this,"transitions",void 0),ve(this,"needsRedraw",void 0),ve(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=qI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(n);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void mi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=Aae[i.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(mi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const W4="attributeManager.invalidate";class Rae{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"attributes",void 0),ve(this,"updateTriggers",void 0),ve(this,"needsRedraw",void 0),ve(this,"userData",void 0),ve(this,"stats",void 0),ve(this,"attributeTransitionManager",void 0),ve(this,"mergeBoundsMemoized",x0(Xre)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new Sae(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);es(W4,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);es(W4,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;es("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=n,o[l]&&mi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&es("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(i=>{var r;return null===(r=this.attributes[i])||void 0===r?void 0:r.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in n){const s=n[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new kI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:i}=e;es("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&es("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,es("attribute.updateEnd",n,i)))}}function Y4(t,e,n,i,r){const o=e-t;return(n-e)*r+-o*i+o+e}function X4(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const Nae={interpolation:class Oae extends M0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=sE(n,i,s)}},spring:class Pae extends M0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function kae(t,e,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Y4(t[s],e[s],n[s],i,r);return o}return Y4(t,e,n,i,r)}(o,s,n,i,r);const c=X4(a,n),l=X4(a,s);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=s,this._currValue=a}}};class Fae{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=r4(r)))return;const s=Nae[r.type];if(!s)return void mi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:n,toValue:i}),o.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const wE=Symbol.for("component"),Ou=Symbol.for("propTypes"),JI=Symbol.for("deprecatedProps"),jm=Symbol.for("asyncPropDefaults"),df=Symbol.for("asyncPropOriginal"),ku=Symbol.for("asyncPropResolved");function jae(t,e){if(!t.transitions)return!1;const n={},i=t[Ou];let r=!1;for(const o in t.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&ZI(t[o],e[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function K4({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=ZI(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const s=ZI(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function ZI(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function zae(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function q4(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},K4({oldProps:r,newProps:i,triggerName:n})}function Xae(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function QI(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],p=e[10],m=e[11],b=e[12],T=e[13],D=e[14],U=e[15],Y=n*a-i*s,ye=n*c-r*s,Ce=n*l-o*s,je=i*c-r*a,qe=i*l-o*a,at=r*l-o*c,pt=d*T-h*b,ht=d*D-p*b,_t=d*U-m*b,yt=h*D-p*T,Ot=h*U-m*T,ut=p*U-m*D,xt=Y*ut-ye*Ot+Ce*yt+je*_t-qe*ht+at*pt;return xt?(t[0]=(a*ut-c*Ot+l*yt)*(xt=1/xt),t[1]=(r*Ot-i*ut-o*yt)*xt,t[2]=(T*at-D*qe+U*je)*xt,t[3]=(p*qe-h*at-m*je)*xt,t[4]=(c*_t-s*ut-l*ht)*xt,t[5]=(n*ut-r*_t+o*ht)*xt,t[6]=(D*Ce-b*at-U*ye)*xt,t[7]=(d*at-p*Ce+m*ye)*xt,t[8]=(s*Ot-a*_t+l*pt)*xt,t[9]=(i*_t-n*Ot-o*pt)*xt,t[10]=(b*qe-T*Ce+U*Y)*xt,t[11]=(h*Ce-d*qe-m*Y)*xt,t[12]=(a*ht-s*yt-c*pt)*xt,t[13]=(n*yt-i*ht+r*pt)*xt,t[14]=(T*ye-b*je-D*Y)*xt,t[15]=(d*je-h*ye+p*Y)*xt,t):null}function uf(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=e[9],m=e[10],b=e[11],T=e[12],D=e[13],U=e[14],Y=e[15],ye=n[0],Ce=n[1],je=n[2],qe=n[3];return t[0]=ye*i+Ce*a+je*h+qe*T,t[1]=ye*r+Ce*c+je*p+qe*D,t[2]=ye*o+Ce*l+je*m+qe*U,t[3]=ye*s+Ce*d+je*b+qe*Y,t[4]=(ye=n[4])*i+(Ce=n[5])*a+(je=n[6])*h+(qe=n[7])*T,t[5]=ye*r+Ce*c+je*p+qe*D,t[6]=ye*o+Ce*l+je*m+qe*U,t[7]=ye*s+Ce*d+je*b+qe*Y,t[8]=(ye=n[8])*i+(Ce=n[9])*a+(je=n[10])*h+(qe=n[11])*T,t[9]=ye*r+Ce*c+je*p+qe*D,t[10]=ye*o+Ce*l+je*m+qe*U,t[11]=ye*s+Ce*d+je*b+qe*Y,t[12]=(ye=n[12])*i+(Ce=n[13])*a+(je=n[14])*h+(qe=n[15])*T,t[13]=ye*r+Ce*c+je*p+qe*D,t[14]=ye*o+Ce*l+je*m+qe*U,t[15]=ye*s+Ce*d+je*b+qe*Y,t}function EE(t,e,n){var s,a,c,l,d,h,p,m,b,T,D,U,i=n[0],r=n[1],o=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],b=e[8],T=e[9],D=e[10],U=e[11],t[0]=s=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=d,t[5]=h,t[6]=p,t[7]=m,t[8]=b,t[9]=T,t[10]=D,t[11]=U,t[12]=s*i+d*r+b*o+e[12],t[13]=a*i+h*r+T*o+e[13],t[14]=c*i+p*r+D*o+e[14],t[15]=l*i+m*r+U*o+e[15]),t}function eD(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function J4(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+d*i,t[6]=a*r+h*i,t[7]=c*r+p*i,t[8]=l*r-o*i,t[9]=d*r-s*i,t[10]=h*r-a*i,t[11]=p*r-c*i,t}function Z4(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+d*i,t[2]=a*r+h*i,t[3]=c*r+p*i,t[4]=l*r-o*i,t[5]=d*r-s*i,t[6]=h*r-a*i,t[7]=p*r-c*i,t}function eV(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function I0(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}!function cce(){var t=new Ks(4);Ks!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const tV=[0,0,0,0],wce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],nV=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ece=[0,0,0],iV=[0,0,0],Ace=x0(function Tce({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Sce(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=tV,c=tV,l=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:p}=rV(t,e,n);return p&&(c=t.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=I0([],c,s),o=i||o,s=uf([],r,o),s=uf([],s,wce)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(t,n,i),d=t.getDistanceScales(),h=[t.width*e,t.height*e],p=I0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,m={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Ece,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:nV,project_uCameraPosition:a};if(l){const b=t.getDistanceScales(l);switch(n){case wi.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=b.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=b.unitsPerMeter2;break;case wi.LNGLAT:case wi.LNGLAT_OFFSETS:t._pseudoMeters||(m.project_uCommonUnitsPerMeter=b.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=b.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=b.unitsPerDegree2;break;case wi.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,b.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,b.unitsPerMeter2[2]]}}return m});function rV(t,e,n=iV){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===wi.LNGLAT_OFFSETS||e===wi.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case ul.WEB_MERCATOR:(e===wi.LNGLAT||e===wi.CARTESIAN)&&(r=[0,0,0],o=!1);break;case ul.WEB_MERCATOR_AUTO_OFFSET:e===wi.LNGLAT?i=r:e===wi.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case ul.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case ul.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class oV extends aE{toString(){let e="[";if(Gr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=ui(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function AE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function sV(t,e){return t[0]=-e[0],t[1]=-e[1],t}function aV(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}!function Mce(){var t=new Ks(2);Ks!=Float32Array&&(t[0]=0,t[1]=0)}();var cV=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(cV||{});const Rce=45*Math.PI/180,Oce=1,tD=.1,nD=500,kce=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class $n extends oV{static get IDENTITY(){return function Nce(){return CE||(CE=new $n,Object.freeze(CE)),CE}()}static get ZERO(){return function Pce(){return SE||(SE=new $n([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(SE)),SE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return cV}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,o,s,a,c,l,d,h,p,m,b,T,D){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=p,this[12]=m,this[13]=b,this[14]=T,this[15]=D,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l,d,h,p,m,b,T,D){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=n,this[5]=s,this[6]=d,this[7]=b,this[8]=i,this[9]=a,this[10]=h,this[11]=T,this[12]=r,this[13]=c,this[14]=p,this[15]=D,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(kce)}fromObject(e){return this.check()}fromQuaternion(e){return function tce(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,m=r*a,b=r*c,T=o*s,D=o*a,U=o*c;t[0]=1-h-b,t[1]=d+U,t[2]=p-D,t[3]=0,t[4]=d-U,t[5]=1-l-b,t[6]=m+T,t[7]=0,t[8]=p+D,t[9]=m-T,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:o,near:s=tD,far:a=nD}=e;return a===1/0?function Fce(t,e,n,i,r,o){const a=2*o/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),p=-2*o;t[0]=2*o/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this,n,i,r,o,s):function nce(t,e,n,i,r,o,s){var a=1/(n-e),c=1/(r-i),l=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0}(this,n,i,r,o,s,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function ace(t,e,n,i){var r,o,s,a,c,l,d,h,p,m,b=e[0],T=e[1],D=e[2],U=i[0],Y=i[1],ye=i[2],Ce=n[0],je=n[1],qe=n[2];Math.abs(b-Ce)<fl&&Math.abs(T-je)<fl&&Math.abs(D-qe)<fl?function Kae(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(d=b-Ce,h=T-je,p=D-qe,r=Y*(p*=m=1/Math.hypot(d,h,p))-ye*(h*=m),o=ye*(d*=m)-U*p,s=U*h-Y*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-p*o,c=p*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(r*b+o*T+s*D),t[13]=-(a*b+c*T+l*D),t[14]=-(d*b+h*T+p*D),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:o,near:s=tD,far:a=nD}=e;return function oce(t,e,n,i,r,o,s){var a=1/(e-n),c=1/(i-r),l=1/(o-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(s+o)*l,t[15]=1}(this,n,i,r,o,s,a),this.check()}orthographic(e){const{fovy:n=Rce,aspect:i=Oce,focalDistance:r=1,near:o=tD,far:s=nD}=e;lV(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return lV(n),function ice(t,e,n,i,r){var s,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,o),this.check()}determinant(){return function Jae(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],T=t[14],D=t[15];return(e*s-n*o)*(h*D-p*T)-(e*a-i*o)*(d*D-p*b)+(e*c-r*o)*(d*T-h*b)+(n*a-i*s)*(l*D-p*m)-(n*c-r*s)*(l*T-h*m)+(i*c-r*a)*(l*b-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function qae(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return QI(this,this),this.check()}multiplyLeft(e){return uf(this,e,this),this.check()}multiplyRight(e){return uf(this,this,e),this.check()}rotateX(e){return J4(this,this,e),this.check()}rotateY(e){return function Qae(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=s*r-d*i,t[2]=a*r-h*i,t[3]=c*r-p*i,t[8]=o*i+l*r,t[9]=s*i+d*r,t[10]=a*i+h*r,t[11]=c*i+p*r}(this,this,e),this.check()}rotateZ(e){return Z4(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function Zae(t,e,n,i){var c,l,d,h,p,m,b,T,D,U,Y,ye,Ce,je,qe,at,pt,ht,_t,yt,Ot,ut,xt,Pt,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<fl||(r*=a=1/a,o*=a,s*=a,c=Math.sin(n),l=Math.cos(n),p=e[1],m=e[2],b=e[3],D=e[5],U=e[6],Y=e[7],Ce=e[9],je=e[10],qe=e[11],_t=r*o*(d=1-l)-s*c,yt=o*o*d+l,Ot=s*o*d+r*c,ut=r*s*d+o*c,xt=o*s*d-r*c,Pt=s*s*d+l,t[0]=(h=e[0])*(at=r*r*d+l)+(T=e[4])*(pt=o*r*d+s*c)+(ye=e[8])*(ht=s*r*d-o*c),t[1]=p*at+D*pt+Ce*ht,t[2]=m*at+U*pt+je*ht,t[3]=b*at+Y*pt+qe*ht,t[4]=h*_t+T*yt+ye*Ot,t[5]=p*_t+D*yt+Ce*Ot,t[6]=m*_t+U*yt+je*Ot,t[7]=b*_t+Y*yt+qe*Ot,t[8]=h*ut+T*xt+ye*Pt,t[9]=p*ut+D*xt+Ce*Pt,t[10]=m*ut+U*xt+je*Pt,t[11]=b*ut+Y*xt+qe*Pt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return eD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return EE(this,this,e),this.check()}transform(e,n){return 4===e.length?(_0(n=I0(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function Dce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=TI(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _0(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function Vre(t,e,n){const i=e[0],r=e[1],o=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/o,t[1]=(n[1]*i+n[5]*r)/o,t}(n||[-0,-0],e,this);break;case 3:i=qU(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _0(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let SE,CE;function lV(t){if(t>2*Math.PI)throw Error("expected radians")}function Um(t,e){const n=I0([],e,t);return eV(n,n,1/n[3]),n}function dV(t,e){const n=t%e;return n<0?e+n:n}function iD(t,e,n){return t<e?e:t>n?n:t}const rD=Math.log2||function Bce(t){return Math.log(t)*Math.LOG2E};function ud(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Sc=Math.PI,uV=Sc/4,Za=Sc/180,oD=180/Sc,Vm=512,TE=4003e4,ME=85.051129,jce=1.5;function IE(t){const[e,n]=t;return ud(Number.isFinite(e)),ud(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[Vm*(e*Za+Sc)/(2*Sc),Vm*(Sc+Math.log(Math.tan(uV+n*Za*.5)))/(2*Sc)]}function zm(t){const[e,n]=t,i=e/Vm*(2*Sc)-Sc,r=2*(Math.atan(Math.exp(n/Vm*(2*Sc)-Sc))-uV);return[i*oD,r*oD]}function sD(t){const e=Math.cos(t*Za);return Vm/TE/e}function aD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;ud(Number.isFinite(e)&&Number.isFinite(n));const r=Vm,o=Math.cos(e*Za),s=r/360,a=s/o,c=r/TE/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=Za*Math.tan(e*Za)/o,p=r/TE*d,m=p/a*c;l.unitsPerDegree2=[0,s*d/2,p],l.unitsPerMeter2=[m,0,m]}return l}function hV(t,e){const[n,i,r]=t,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=aD({longitude:n,latitude:i,highPrecision:!0}),d=IE(t);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=zm(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function DE(t){return 2*Math.atan(.5/t)*oD}function cD(t){return.5/Math.tan(.5*t*Za)}function pV(t,e){const[n,i,r=0]=t;return ud(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Um(e,[n,i,r,1])}function D0(t,e,n=0){const[i,r,o]=t;if(ud(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return Um(e,[i,r,o,1]);const s=Um(e,[i,r,0,1]),a=Um(e,[i,r,1,1]),c=s[2],l=a[2];return aV([],s,a,c===l?0:((n||0)-c)/(l-c))}const mV=Math.PI/180;function gV(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Um(i,[e,0,1,1]),o=Um(i,[e,t.height,1,1]),l=zm(aV([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(n),l}const Xce=Math.PI/180,Kce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],xV=[0,0,0],qce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Pu{constructor(e={}){ve(this,"id",void 0),ve(this,"x",void 0),ve(this,"y",void 0),ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"padding",void 0),ve(this,"isGeospatial",void 0),ve(this,"zoom",void 0),ve(this,"focalDistance",void 0),ve(this,"position",void 0),ve(this,"modelMatrix",void 0),ve(this,"distanceScales",void 0),ve(this,"scale",void 0),ve(this,"center",void 0),ve(this,"cameraPosition",void 0),ve(this,"projectionMatrix",void 0),ve(this,"viewMatrix",void 0),ve(this,"viewMatrixUncentered",void 0),ve(this,"viewMatrixInverse",void 0),ve(this,"viewProjectionMatrix",void 0),ve(this,"pixelProjectionMatrix",void 0),ve(this,"pixelUnprojectionMatrix",void 0),ve(this,"resolution",void 0),ve(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||qce,this.focalDistance=e.focalDistance||1,this.position=e.position||xV,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ul.WEB_MERCATOR:ul.WEB_MERCATOR_AUTO_OFFSET:ul.IDENTITY}equals(e){return e instanceof Pu&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Du(e.projectionMatrix,this.projectionMatrix)&&Du(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=pV(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=n?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,o,s]=e,l=D0([r,n?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,p]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,p]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=IE(e);return n[1]=wr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?zm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?aD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function $re(t){return{left:Om(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Om(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Om(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Om(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Om(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Om(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Vce(t){const{latitude:e}=t;ud(Number.isFinite(e));const n=Math.cos(e*Za);return function Uce(t){return rD(t)}(TE*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||aD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=xV;if(o&&(a=s?new $n(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new nn(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Kce,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new $n).multiplyRight(n).translate(new nn(this.center).negate()),this.projectionMatrix=i||function Jce({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=t/e,l=n?(new $n).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new $n).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:p=0,bottom:m=0}=o,b=wr((d+t-h)/2,0,t)-t/2,T=wr((p+e-m)/2,0,e)-e/2;l[8]-=2*b/t,l[9]+=2*T/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*Xce,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];uf(h,h,this.projectionMatrix),uf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=QI([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Wre(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];eD(p,p,[this.width/2,-this.height/2,1]),EE(p,p,[1,-1,0]),uf(m,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=QI([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||mi.warn("Pixel project matrix not invertible")()}}ve(Pu,"displayName","Viewport");class Hm extends Pu{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,position:m,padding:b,legacyMeterSizes:T=!1}=e;let{width:D,height:U,altitude:Y=1.5}=e;const ye=Math.pow(2,r);D=D||1,U=U||1;let Ce,je=null;if(d)Y=d[5]/2,Ce=DE(Y);else{let at;if(e.fovy?(Ce=e.fovy,Y=cD(Ce)):Ce=DE(Y),b){const{top:pt=0,bottom:ht=0}=b;at=[0,wr((pt+U-ht)/2,0,U)-U/2]}je=function fV(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:d=DE(jce)}=t;void 0!==i&&(d=DE(i));const h=d*Za,p=r*Za,m=cD(d);let b=m;s&&(b+=s[2]*a/Math.cos(p)/n);const T=h*(.5+(o?o[1]:0)/n),D=Math.sin(T)*b/Math.sin(iD(Math.PI/2-p-T,.01,Math.PI-.01)),U=Math.sin(p)*D+b;return{fov:h,aspect:e/n,focalDistance:m,near:c,far:Math.min(U*l,10*b)}}({width:D,height:U,scale:ye,center:m&&[0,0,m[2]*sD(n)],offset:at,pitch:o,fovy:Ce,nearZMultiplier:a,farZMultiplier:c})}let qe=function zce(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];EE(a,a,[0,0,-r]),J4(a,a,-n*Za),Z4(a,a,i*Za);const c=o/e;return eD(a,a,[c,c,c]),s&&EE(a,a,function kre(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:U,pitch:o,bearing:s,scale:ye,altitude:Y});p&&(qe=(new $n).translate([512*p,0,0]).multiplyLeft(qe)),super({...e,width:D,height:U,viewMatrix:qe,longitude:i,latitude:n,zoom:r,...je,fovy:Ce,focalDistance:Y}),ve(this,"longitude",void 0),ve(this,"latitude",void 0),ve(this,"pitch",void 0),ve(this,"bearing",void 0),ve(this,"altitude",void 0),ve(this,"fovy",void 0),ve(this,"orthographic",void 0),ve(this,"_subViewports",void 0),ve(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=Y,this.fovy=Ce,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=T,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const o=r?new Hm({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*sD(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/sD(i)]}addMetersToLngLat(e,n){return hV(e,n)}panByPosition(e,n){const i=D0(n,this.pixelUnprojectionMatrix),o=AE([],this.projectFlat(e),sV([],i)),s=AE([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const n=function Wce(t,e=0){const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let c,l;return(t.fovy?.5*t.fovy*mV:Math.atan(.5/t.altitude))>(90-t.pitch)*mV-.01?(c=gV(t,0,e),l=gV(t,n,e)):(c=r([0,0],o),l=r([n,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=function Hce(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,c],[l,d]]=i,h=function Gce(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(ud(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),p=IE([a,iD(d,-ME,ME)]),m=IE([l,iD(c,-ME,ME)]),b=[Math.max(Math.abs(m[0]-p[0]),r),Math.max(Math.abs(m[1]-p[1]),r)],T=[e-h.left-h.right-2*Math.abs(s[0]),n-h.top-h.bottom-2*Math.abs(s[1])];ud(T[0]>0&&T[1]>0);const D=T[0]/b[0],U=T[1]/b[1],je=zm([(m[0]+p[0])/2+(h.right-h.left)/2/D,(m[1]+p[1])/2+(h.top-h.bottom)/2/U]),qe=Math.min(o,rD(Math.abs(Math.min(D,U))));return ud(Number.isFinite(qe)),{longitude:je[0],latitude:je[1],zoom:qe}}({width:i,height:r,bounds:e,...n});return new Hm({width:i,height:r,longitude:o,latitude:s,zoom:a})}}ve(Hm,"displayName","WebMercatorViewport");const wV=[0,0,0];function dD(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof Hm){const[r,o,s=0]=t,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function EV(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=t;switch(n&&([s,a,c]=I0([],[s,a,c,1],n)),i){case wi.LNGLAT:return dD([s,a,c],e,o);case wi.LNGLAT_OFFSETS:return dD([s+r[0],a+r[1],c+(r[2]||0)],e,o);case wi.METER_OFFSETS:return dD(hV(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}const ele={10241:9987,10240:9729,10242:33071,10243:33071},uD={};function pl(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!pl(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const o of i)if(!e.hasOwnProperty(o)||!pl(t[o],e[o],n-1))return!1;return!0}return!1}const ile={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||hD(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>pl(t,e,1)},accessor:{validate(t,e){const n=RE(t);return"function"===n||n===RE(e.value)},equal:(t,e,n)=>"function"==typeof e||pl(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||hD(t),equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?pl(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?pl(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{const i=n.context;return i&&i.gl?function tle(t,e,n,i){if(n instanceof Ts)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={10241:n.data.length>1?9985:9729});const o=new Ts(e,{...n,parameters:{...ele,...r,...i}});return uD[o.id]=t,o}(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{!function nle(t,e){!e||!(e instanceof Ts)||uD[e.id]===t&&(e.delete(),delete uD[e.id])}(n.id,t)}}};function ole(t,e){switch(RE(e)){case"object":return R0(t,e);case"array":return R0(t,{type:"array",value:e,compare:!1});case"boolean":return R0(t,{type:"boolean",value:e});case"number":return R0(t,{type:"number",value:e});case"function":return R0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function R0(t,e){return"type"in e?{name:t,...ile[e.type],...e}:"value"in e?{name:t,type:RE(e.value),...e}:{name:t,type:"object",value:e}}function hD(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function RE(t){return hD(t)?"array":null===t?"null":typeof t}function fD(t,e){let n="_mergedDefaultProps";if(e)for(const r of e){const o=r.constructor;o&&(n+=":".concat(o.extensionName||o.name))}return AV(t,n)||(t[n]=function cle(t,e){if(!t.prototype)return null;const r=fD(Object.getPrototypeOf(t)),s=function rle(t){const e={},n={},i={};for(const[r,o]of Object.entries(t)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=ole(r,o);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(AV(t,"defaultProps")||{}),a=Object.assign(Object.create(null),r,s.defaultProps),c=Object.assign(Object.create(null),r?.[Ou],s.propTypes),l=Object.assign(Object.create(null),r?.[JI],s.deprecatedProps);for(const d of e){const h=fD(d.constructor);h&&(Object.assign(a,h),Object.assign(c,h[Ou]),Object.assign(l,h[JI]))}return function lle(t,e){const n=function fle(t){const e=t.componentName;return e||mi.warn("".concat(t.name,".componentName not specified"))(),e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}(a,t),function ule(t,e){const n={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(n[s]=a,i[s]=hle(s))}t[jm]=n,t[df]={},Object.defineProperties(t,i)}(a,c),function dle(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const o of e[n])pD(this,o)||(this[o]=i);mi.deprecated(r,e[n].join("/"))()}})}(a,l),a[Ou]=c,a[JI]=l,0===e.length&&!pD(t,"_propTypes")&&(t._propTypes=c),a}(t,e||[]))}function hle(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||n4(e)?this[df][t]=e:this[ku][t]=e},get(){if(this[ku]){if(t in this[ku])return this[ku][t]||this[jm][t];if(t in this[df]){const e=this[wE]&&this[wE].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[jm][t]}}return this[jm][t]}}}function pD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function AV(t,e){return pD(t,e)&&t[e]}let ple=0;class mD{constructor(...e){ve(this,"id",void 0),ve(this,"props",void 0),ve(this,"count",void 0),this.props=function sle(t,e){let n;for(let o=e.length-1;o>=0;o--){const s=e[o];"extensions"in s&&(n=s.extensions)}const i=fD(t.constructor,n),r=Object.create(i);r[wE]=t,r[df]={},r[ku]={};for(let o=0;o<e.length;++o){const s=e[o];for(const a in s)r[a]=s[a]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=ple++}clone(e){const{props:n}=this,i={};for(const r in n[jm])r in n[ku]?i[r]=n[ku][r]:r in n[df]&&(i[r]=n[df][r]);return new this.constructor({...n,...i,...e})}}function gD(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new OE(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function OE(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(OE=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new OE(t)}ve(mD,"componentName","Component"),ve(mD,"defaultProps",{});const mle=Object.freeze({});class gle{constructor(e){ve(this,"component",void 0),ve(this,"onAsyncPropUpdated",void 0),ve(this,"asyncProps",void 0),ve(this,"oldProps",void 0),ve(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||mle}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[wE]||this.component;const n=e[ku]||{},i=e[df]||e,r=e[jm]||{};for(const o in n){const s=n[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(n4(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(o=>{this.component&&(o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,n){var i=this;return jt(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var p,h=gD(n);c=!(p=yield h.next()).done;c=!1){const m=p.value;{if(!i.component)return;const{dataTransform:b}=i.component.props;s=b?b(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Ou];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class _le extends gle{constructor({attributeManager:e,layer:n}){super(n),ve(this,"attributeManager",void 0),ve(this,"needsRedraw",void 0),ve(this,"needsUpdate",void 0),ve(this,"subLayers",void 0),ve(this,"usesPickingColorCache",void 0),ve(this,"hasPickingBuffer",void 0),ve(this,"changeFlags",void 0),ve(this,"viewport",void 0),ve(this,"uniformTransitions",void 0),ve(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,r=i?.props.fetch;return r?r(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const r=i.props.onDataLoad;"data"===e&&r&&r(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const Cc=t=>"function"==typeof t,Nu=t=>null!==t&&"object"==typeof t,CV=t=>Nu(t)&&t.constructor==={}.constructor,ble=t=>t&&"function"==typeof t[Symbol.iterator],yle=t=>t&&"function"==typeof t[Symbol.asyncIterator],hf=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ff=t=>typeof Blob<"u"&&t instanceof Blob,vle=t=>t&&"object"==typeof t&&t.isBuffer,TV=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Nu(t)&&Cc(t.tee)&&Cc(t.cancel)&&Cc(t.getReader))(t)||(t=>Nu(t)&&Cc(t.read)&&Cc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function hd(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function _D(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function bD(t){var e,n;let i;return hd(t,"null loader"),hd(_D(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let yD="";const vD={},Cle=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Tle=/^([-\w.]+\/[-\w.+]+)/;function MV(t){const e=Cle.exec(t);return e?e[1]:""}const IV=/\?.*/;function xD(t){return t.replace(IV,"")}function kE(t){return hf(t)?t.url:ff(t)?t.name||"":"string"==typeof t?t:""}function wD(t){if(hf(t)){const e=t,n=e.headers.get("content-type")||"",i=xD(e.url);return function Mle(t){const e=Tle.exec(t);return e?e[1]:t}(n)||MV(i)}return ff(t)?t.type||"":"string"==typeof t?MV(t):""}function DV(t){return ED.apply(this,arguments)}function ED(){return ED=jt(function*(t){if(hf(t))return t;const e={},n=function Dle(t){return hf(t)?t.headers["content-length"]||-1:ff(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const i=kE(t),r=wD(t);r&&(e["content-type"]=r);const o=yield function kle(t){return CD.apply(this,arguments)}(t);o&&(e["x-first-bytes"]=o),"string"==typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),ED.apply(this,arguments)}function AD(){return AD=jt(function*(t){if(!t.ok){const e=yield function Ole(t){return SD.apply(this,arguments)}(t);throw new Error(e)}}),AD.apply(this,arguments)}function SD(){return SD=jt(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),SD.apply(this,arguments)}function CD(){return CD=jt(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function Ple(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),CD.apply(this,arguments)}function RV(t,e){return TD.apply(this,arguments)}function TD(){return TD=jt(function*(t,e){if("string"==typeof t){t=function Sle(t){for(const e in vD)t.startsWith(e)&&(t=t.replace(e,vD[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(yD).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield DV(t)}),TD.apply(this,arguments)}function Gm(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function Nle(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}()}const OV=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Gm();class Lle{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function Fle(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function MD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let PE;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(PE||(PE={}));function kV(t){return"string"!=typeof t?t:(t=t.toUpperCase(),PE[t]||PE.WHITE)}function NE(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis.self||globalThis.window||globalThis;const FE=globalThis.window||globalThis.self||globalThis.global,O0=(globalThis,globalThis.process||{});function Wm(){let t;var e,n;if(Gm()&&FE.performance)t=null==FE||null===(e=FE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in O0){var i;const r=null==O0||null===(i=O0.hrtime)||void 0===i?void 0:i.call(O0);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}globalThis,globalThis;const $m={debug:Gm()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Wle={enabled:!0,level:0};function Qa(){}const PV={},NV={once:!0};let FV=(()=>{class t{constructor(){let{id:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=OV,this._startTs=Wm(),this._deltaTs=Wm(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=n,this.userData={},this._storage=new Lle("__probe-".concat(this.id,"__"),Wle),this.timeStamp("".concat(this.id," started")),function Gle(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const o of i){const s=r[o];"function"==typeof s&&(e.find(a=>o===a)||(r[o]=s.bind(t)))}}(this),Object.seal(this)}set level(n){this.setLevel(n)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Wm()-this._startTs).toPrecision(10))}getDelta(){return Number((Wm()-this._deltaTs).toPrecision(10))}set priority(n){this.level=n}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(n){return this._storage.setConfiguration({level:n}),this}get(n){return this._storage.config[n]}set(n,i){this._storage.setConfiguration({[n]:i})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(n,i){NE(n,i)}warn(n){return this._getLogFunction(0,n,$m.warn,arguments,NV)}error(n){return this._getLogFunction(0,n,$m.error,arguments)}deprecated(n,i){return this.warn("`".concat(n,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(n,i){return this.error("`".concat(n,"` has been removed. Use `").concat(i,"` instead"))}probe(n,i){return this._getLogFunction(n,i,$m.log,arguments,{time:!0,once:!0})}log(n,i){return this._getLogFunction(n,i,$m.debug,arguments)}info(n,i){return this._getLogFunction(n,i,console.info,arguments)}once(n,i){return this._getLogFunction(n,i,$m.debug||$m.info,arguments,NV)}table(n,i,r){return i?this._getLogFunction(n,i,console.table||Qa,r&&[r],{tag:Kle(i)}):Qa}image(n){let{logLevel:i,priority:r,image:o,message:s="",scale:a=1}=n;return this._shouldLog(i||r)?Gm()?function Xle(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=MD(o,n,i);console.log(...s)},o.src=e,Qa}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...MD(e,n,i)),Qa;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...MD(o,n,i)),o.src=e.toDataURL(),Qa}return Qa}({image:o,message:s,scale:a}):function Yle(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),Qa}({image:o,message:s,scale:a}):Qa}time(n,i){return this._getLogFunction(n,i,console.time?console.time:console.info)}timeEnd(n,i){return this._getLogFunction(n,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(n,i){return this._getLogFunction(n,i,console.timeStamp||Qa)}group(n,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const o=BV({logLevel:n,message:i,opts:r}),{collapsed:s}=r;return o.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}groupCollapsed(n,i){return this.group(n,i,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(n){return this._getLogFunction(n,"",console.groupEnd||Qa)}withGroup(n,i,r){this.group(n,i)();try{r()}finally{this.groupEnd(n)()}}trace(){console.trace&&console.trace()}_shouldLog(n){return this.isEnabled()&&this.getLevel()>=LV(n)}_getLogFunction(n,i,r,o,s){if(this._shouldLog(n)){s=BV({logLevel:n,message:i,args:o,opts:s}),NE(r=r||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Wm();const a=s.tag||s.message;if(s.once&&a){if(PV[a])return Qa;PV[a]=Wm()}return i=function $le(t,e,n){if("string"==typeof e){const i=n.time?function jle(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Ble(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Hle(t,e,n){if(!Gm&&"string"==typeof t){if(e){const i=kV(e);t="\x1b[".concat(i,"m").concat(t,"\x1b[39m")}if(n){const i=kV(n);t="\x1b[".concat(i+10,"m").concat(t,"\x1b[49m")}}return t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),r.bind(console,i,...s.args)}return Qa}}return t.VERSION=OV,t})();function LV(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return NE(Number.isFinite(e)&&e>=0),e}function BV(t){const{logLevel:e,message:n}=t;t.logLevel=LV(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return NE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Kle(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const jV=new FV({id:"loaders.gl"});class qle{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const LE=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),UV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),VV=(UV&&parseFloat(UV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class Jle{constructor(){ve(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:LE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Zle={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function ID(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const DD=()=>{const t=ID();return t.globalOptions=t.globalOptions||{...VV},t.globalOptions};function Qle(t,e,n,i){return n=n||[],function ede(t,e){zV(t,null,VV,Zle,e);for(const n of e)zV(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function HV(t,e,n){const r={...t.options||{}};return function nde(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new qle),GV(r,DD()),GV(r,e),r}(e,t,i)}function zV(t,e,n,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const c=!e&&Nu(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)jV.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=tde(a,r);jV.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function tde(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(t===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function GV(t,e){for(const n in e)n in e&&(t[n]=CV(e[n])&&CV(t[n])?{...t[n],...e[n]}:e[n])}function WV(t,e){const n=DD(),i=t||n;return"function"==typeof i.fetch?i.fetch:Nu(i.fetch)?r=>RV(r,i):null!=e&&e.fetch?e?.fetch:RV}function gl(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const ide="3.4.11",_l={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},ode=_l.global||_l.self||_l.window||{},bl="object"!=typeof process||"[object process]"!==String(process)||process.browser,RD="function"==typeof importScripts,sde=typeof window<"u"&&typeof window.orientation<"u",$V=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);$V&&parseFloat($V[1]);class OD{terminate(){}}const kD=new Map;function YV(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function XV(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t)if(KV(t))i.add(t);else if(KV(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)XV(t[r],e,i);return void 0===n?Array.from(i):[]}function KV(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const PD=()=>{};class ND{static isSupported(){return typeof Worker<"u"&&bl||typeof OD<"u"&&!bl}constructor(e){ve(this,"name",void 0),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"terminated",!1),ve(this,"worker",void 0),ve(this,"onMessage",void 0),ve(this,"onError",void 0),ve(this,"_loadableURL","");const{name:n,source:i,url:r}=e;gl(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=PD,this.onError=o=>console.log(o),this.worker=bl?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=PD,this.onError=PD,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||XV(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function ade(t){gl(t.source&&!t.url||!t.source&&t.url);let e=kD.get(t.source||t.url);return e||(t.url&&(e=function cde(t){if(!t.startsWith("http"))return t;const e=function lde(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return YV(e)}(t.url),kD.set(t.url,e)),t.source&&(e=YV(t.source),kD.set(t.source,e))),gl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new OD(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new OD(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class ude{constructor(e,n){ve(this,"name",void 0),ve(this,"workerThread",void 0),ve(this,"isRunning",!0),ve(this,"result",void 0),ve(this,"_resolve",()=>{}),ve(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){gl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){gl(this.isRunning),this.isRunning=!1,this._reject(e)}}class hde{static isSupported(){return ND.isSupported()}constructor(e){ve(this,"name","unnamed"),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"maxConcurrency",1),ve(this,"maxMobileConcurrency",1),ve(this,"onDebug",()=>{}),ve(this,"reuseWorkers",!0),ve(this,"props",{}),ve(this,"jobQueue",[]),ve(this,"idleQueue",[]),ve(this,"count",0),ve(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e){var n=arguments,i=this;return jt(function*(){let r=n.length>1&&void 0!==n[1]?n[1]:(a,c,l)=>a.done(l),o=n.length>2&&void 0!==n[2]?n[2]:(a,c)=>a.error(c);const s=new Promise(a=>(i.jobQueue.push({name:e,onMessage:r,onError:o,onStart:a}),i));return i._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return jt(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new ude(i.name,n);n.onMessage=o=>i.onMessage(r,o.type,o.payload),n.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new ND({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return sde?this.maxMobileConcurrency:this.maxConcurrency}}const fde={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class fd{static isSupported(){return ND.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fd._workerFarm=fd._workerFarm||new fd({}),fd._workerFarm.setProps(e),fd._workerFarm}constructor(e){ve(this,"props",void 0),ve(this,"workerPools",new Map),this.props={...fde},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let o=this.workerPools.get(n);return o||(o=new hde({name:n,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ve(fd,"_workerFarm",void 0);const pde="latest";function FD(){return FD=jt(function*(t,e,n,i,r){const o=t.id,s=function mde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let o=t.version;"latest"===o&&(o=pde);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(i)}return gl(r),r}(t,n),c=fd.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",bde.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),FD.apply(this,arguments)}function bde(t,e,n,i){return LD.apply(this,arguments)}function LD(){return LD=jt(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield t(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),LD.apply(this,arguments)}function JV(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function jD(){return jD=jt(function*(t){const e=[];var r,n=!1,i=!1;try{for(var s,o=gD(t);n=!(s=yield o.next()).done;n=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function vde(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),r=i.reduce((a,c)=>a+c.byteLength,0),o=new Uint8Array(r);let s=0;for(const a of i)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}),jD.apply(this,arguments)}const wde=262144,Ade=262144;function ZV(t,e){this.v=t,this.k=e}function BE(t){return new ZV(t,0)}function k0(t){var e,n;function i(o,s){try{var a=t[o](s),c=a.value,l=c instanceof ZV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=t[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(o,s))})},"function"!=typeof t.return&&(this.return=void 0)}function VD(t){return function(){return new k0(t.apply(this,arguments))}}k0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},k0.prototype.next=function(t){return this._invoke("next",t)},k0.prototype.throw=function(t){return this._invoke("throw",t)},k0.prototype.return=function(t){return this._invoke("return",t)};const Cde=1048576;function zD(){return zD=VD(function*(t,e){const n=e?.chunkSize||Cde;let i=0;for(;i<t.size;){const r=i+n,o=yield BE(t.slice(i,r).arrayBuffer());i=r,yield o}}),zD.apply(this,arguments)}function QV(t){if(function Mde(t){return t&&"object"==typeof t&&t.isBuffer}(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function e8(t,e){return LE?function Ide(t,e){return HD.apply(this,arguments)}(t,e):function Dde(t,e){return GD.apply(this,arguments)}(t,e)}function HD(){return HD=VD(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:o,value:s}=yield BE(r);if(o)return;yield QV(s)}}catch{n.releaseLock()}}),HD.apply(this,arguments)}function GD(){return GD=VD(function*(t,e){var r,n=!1,i=!1;try{for(var s,o=gD(t);n=!(s=yield BE(o.next())).done;n=!1){const a=s.value;yield QV(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield BE(o.return()))}finally{if(i)throw r}}}),GD.apply(this,arguments)}const WD="Cannot convert supplied data type";function $D(){return $D=jt(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function Ode(t,e,n){if(e.text&&"string"==typeof t)return t;if(vle(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(WD)}(t,e);if(ff(t)&&(t=yield DV(t)),hf(t)){const r=t;return yield function Rle(t){return AD.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(TV(t)&&(t=function Rde(t,e){if("string"==typeof t)return function*Ede(t,e){const n=e?.chunkSize||wde;let i=0;const r=new TextEncoder;for(;i<t.length;){const o=Math.min(t.length-i,n),s=t.slice(i,i+o);i+=o,yield r.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function Sde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Ade}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),o=new ArrayBuffer(r),s=new Uint8Array(t,i,r);new Uint8Array(o).set(s),i+=r,yield o}}()}(t,e);if(ff(t))return function Tde(t,e){return zD.apply(this,arguments)}(t,e);if(TV(t))return e8(t,e);if(hf(t))return e8(t.body,e);throw new Error("makeIterator")}(t,n)),ble(t)||yle(t))return function xde(t){return jD.apply(this,arguments)}(t);throw new Error(WD)}),$D.apply(this,arguments)}function t8(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}const jde=new FV({id:"loaders.gl"}),n8=()=>{const t=ID();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function i8(t){const e=n8();t=Array.isArray(t)?t:[t];for(const n of t){const i=bD(n);e.find(r=>i===r)||e.unshift(i)}}const Vde=/\.([^.]+)$/;function qD(){return qD=jt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!o8(t))return null;let r=r8(t,e,{...n,nothrow:!0},i);if(r)return r;if(ff(t)&&(r=r8(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(s8(t));return r}),qD.apply(this,arguments)}function r8(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!o8(t))return null;if(e&&!Array.isArray(e))return bD(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function Ude(){return n8()}()),function Gde(t){for(const e of t)bD(e)}(r);const o=function Hde(t,e,n,i){const r=kE(t),o=wD(t),s=xD(r)||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=JD(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function Wde(t,e){const n=e&&Vde.exec(e),i=n&&n[1];return i?function $de(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||JD(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function Yde(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(Xde(e,n))return n}else if(ArrayBuffer.isView(e)){if(a8(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&a8(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(c8(t)):""),a=a||JD(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&jde.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(o||null!=n&&n.nothrow))throw new Error(s8(t));return o}function o8(t){return!(t instanceof Response&&204===t.status)}function s8(t){const e=kE(t),n=wD(t);let i="No valid loader found (";i+=e?"".concat(t8(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?c8(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function JD(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function Xde(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function a8(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function Kde(t,e,n,i){if(i instanceof ArrayBuffer)return function yde(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===ZD(t,e,i.length);default:return!1}}(t,e,n,r))}function c8(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?ZD(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?ZD(t,0,e):""}function ZD(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function jE(t,e,n,i){return QD.apply(this,arguments)}function QD(){return QD=jt(function*(t,e,n,i){gl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!_D(e)&&(i=void 0,n=e,e=void 0),n=n||{};const r=kE(t=yield t),s=function Bde(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function zde(t){return qD.apply(this,arguments)}(t,s,n);return a?(i=function Lde(t,e,n){if(n)return n;const i={fetch:WV(e,t),...t};if(i.url){const r=xD(i.url);i.baseUrl=r,i.queryString=function Ile(t){const e=t.match(IV);return e&&e[0]}(i.url),i.filename=t8(r),i.baseUrl=function Nde(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(r)}return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:jE,loaders:s},n=Qle(n,a,s,r),i||null),yield function qde(t,e,n,i){return eR.apply(this,arguments)}(a,t,n,i)):null}),QD.apply(this,arguments)}function eR(){return eR=jt(function*(t,e,n,i){if(function rde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ide;gl(t,"no worker provided")}(t),hf(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function kde(t,e,n){return $D.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function gde(t,e){return!(!fd.isSupported()||!(bl||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function _de(t,e,n,i,r){return FD.apply(this,arguments)}(t,e,n,i,jE);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw gl(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),eR.apply(this,arguments)}function N0(t,e,n,i){return tR.apply(this,arguments)}function tR(){return tR=jt(function*(t,e,n,i){!Array.isArray(e)&&!_D(e)&&(n=e,e=void 0);const r=WV(n);let o=t;return"string"==typeof t&&(o=yield r(t)),ff(t)&&(o=yield r(t)),yield jE(o,e,n)}),tR.apply(this,arguments)}const nue=Object.freeze([]),iue=x0(({oldViewport:t,viewport:e})=>t.equals(e));let yl=new Uint8ClampedArray(0);const rue={data:{type:"data",value:nue,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(t);return!c&&!r&&(s.add({resourceId:t,data:N0(t,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:l=>{var d;return null===(d=n.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):N0(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:wi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class pf extends mD{constructor(...e){super(...e),ve(this,"internalState",null),ve(this,"lifecycle","Awaiting state"),ve(this,"context",void 0),ve(this,"state",void 0),ve(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Fo(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=EV(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=pV(i,n.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return Fo(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return Fo(this.internalState),function Qce(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function Zce(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return r===wi.DEFAULT&&(r=e.isGeospatial?wi.LNGLAT:wi.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:c=!0}=e,{geospatialOrigin:l=wV,shaderCoordinateOrigin:d=wV,offsetMode:h=!1}=c?rV(n,i,r):{},p=EV(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:h});h&&function Ore(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(p,p,n.projectPosition(l||d));return p}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===wi.DEFAULT||e===wi.LNGLAT||e===wi.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Fo(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function Wae(t){if(!function Yae(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function $ae(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=Xae(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const r of i)n.invalidateAll(r);else n.invalidateAll();if(n){const{props:r}=e,o=this.internalState.hasPickingBuffer,s=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(o!==s){this.internalState.hasPickingBuffer=s;const{pickingColors:a,instancePickingColors:c}=n.attributes,l=a||c;l&&(s&&l.constant&&(l.constant=!1,n.invalidate(l.id)),!l.value&&!s&&(l.constant=!0,l.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,o,s;n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!iue({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(yl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&mi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),yl=g0.allocate(yl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(yl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),yl[3*s+0]=o[0],yl[3*s+1]=o[1],yl[3*s+2]=o[2]}e.value=yl.subarray(0,3*n)}_setModelAttributes(e,n){const o=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n))return void this._disablePickingIndex(e);const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,o=i||r,s=o&&n.attributes&&n.attributes[o.id];if(s&&s.value){const a=s.value,c=this.encodePickingColor(e);for(let l=0;l<n.length;l++){const d=o.getVertexOffset(l);a[d]===c[0]&&a[d+1]===c[1]&&a[d+2]===c[2]&&this._disablePickingIndex(l)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==yl.buffer&&(i.value=yl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Fo(!this.internalState),Fo(Number.isFinite(this.props.coordinateSystem)),es("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new _le({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(mi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Fae(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){es("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(es("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){es("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];sd(o.gl,{polygonOffset:c}),Ac(o.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=n[r];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}n[r]||(n[r]=e[r],o=!0),o&&es("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function Bae(t,e){const n=K4({newProps:t,oldProps:e,propTypes:t[Ou],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Uae(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function Vae(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&q4(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&q4(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:zae(t,e),transitionsChanged:jae(t,e)}}(e,n);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,n[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function Lae(t){const e=t[Ou];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Rae(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);if(n=n||r,n)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ve(pf,"defaultProps",rue),ve(pf,"layerName","Layer");class nR extends pf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:b,modelMatrix:T,extensions:D,fetch:U,operation:Y,_subLayerProps:ye}=this.props,Ce={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:b,modelMatrix:T,extensions:D,fetch:U,operation:Y},je=ye&&e.id&&ye[e.id],qe=je&&je.updateTriggers,at=e.id||"sublayer";if(je){const pt=this.props[Ou],ht=e.type?e.type._propTypes:{};for(const _t in je){const yt=ht[_t]||pt[_t];yt&&"accessor"===yt.type&&(je[_t]=this.getSubLayerAccessor(je[_t]))}}Object.assign(Ce,e,je),Ce.id="".concat(this.props.id,"-").concat(at),Ce.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...qe};for(const pt of D){const ht=pt.getSubLayerProps.call(this,pt);ht&&Object.assign(Ce,ht,{updateTriggers:Object.assign(Ce.updateTriggers,ht.updateTriggers)})}return Ce}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=DI(this.renderLayers(),Boolean),this.internalState.subLayers=i),es("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}ve(nR,"layerName","CompositeLayer");const sue=/([0-9]+\.?[0-9]*)(%|px)/;function Fu(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=sue.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Lu(t,e){return t.relative?Math.round(t.position*e):t.position}class iR{constructor(e){ve(this,"id",void 0),ve(this,"viewportInstance",void 0),ve(this,"_x",void 0),ve(this,"_y",void 0),ve(this,"_width",void 0),ve(this,"_height",void 0),ve(this,"_padding",void 0),ve(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};Fo(!c||c instanceof Pu),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Fu(i),this._y=Fu(r),this._width=Fu(o),this._height=Fu(s),this._padding=a&&{left:Fu(a.left||0),right:Fu(a.right||0),top:Fu(a.top||0),bottom:Fu(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&pl(this.props,e.props,2))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return r.height&&r.width?new this.ViewportType({...i,...this.props,...r}):null}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:Lu(this._x,e),y:Lu(this._y,n),width:Lu(this._width,e),height:Lu(this._height,n)};return this._padding&&(i.padding={left:Lu(this._padding.left,e),top:Lu(this._padding.top,n),right:Lu(this._padding.right,e),bottom:Lu(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const aue=(new $n).lookAt({eye:[0,0,1]});function cue({width:t,height:e,near:n,far:i,padding:r}){let o=-t/2,s=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:p=0}=r,m=wr((l+t-d)/2,0,t)-t/2,b=wr((h+e-p)/2,0,e)-e/2;o-=m,s-=m,a+=b,c+=b}return(new $n).ortho({left:o,right:s,bottom:a,top:c,near:n,far:i})}class lue extends Pu{constructor(e){const{width:n,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,p=Math.min(d,h),m=Math.pow(2,p);let b;if(d!==h){const T=Math.pow(2,d),D=Math.pow(2,h);b={unitsPerMeter:[T/m,D/m,1],metersPerUnit:[m/T,m/D,1]}}super({...e,longitude:void 0,position:a,viewMatrix:aue.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:cue({width:n||1,height:i||1,padding:c,near:r,far:o}),zoom:p,distanceScales:b})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=D0(n,this.pixelUnprojectionMatrix),o=AE([],this.projectFlat(e),sV([],i)),s=AE([],this.center,o);return{target:this.unprojectFlat(s)}}}const d8=()=>{},due=t=>t;class hue{constructor(e){ve(this,"getControllerState",void 0),ve(this,"props",void 0),ve(this,"propsInTransition",void 0),ve(this,"transition",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=n,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new M0(e.timeline),this.onViewStateChange=e.onViewStateChange||d8,this.onStateChange=e.onStateChange||d8}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:n.transitionEasing||due,interpolator:o,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class fue{constructor(e){ve(this,"_propsToCompare",void 0),ve(this,"_propsToExtract",void 0),ve(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Du(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const o of this._propsToExtract)(o in e||o in n)&&(i[o]=e[o],r[o]=n[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];Fo(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const pue=["longitude","latitude","zoom","bearing","pitch"],mue=["longitude","latitude","zoom"];class UE extends fue{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:pue,required:mue},super(i.transitionProps),ve(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(n),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const o of this._propsToExtract)r[o]=sE(e[o]||0,n[o]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...r});Object.assign(r,o.panByPosition(n.aroundPosition,sE(e.around,n.around,i)))}return r}}const Bu={transitionDuration:0},VE=t=>1-(1-t)*(1-t),Ym_WHEEL=["wheel"],Ym_PAN=["panstart","panmove","panend"],Ym_PINCH=["pinchstart","pinchmove","pinchend"],Ym_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Ym_DOUBLE_TAP=["doubletap"],Ym_KEYBOARD=["keydown"],mf={};class oR{constructor(e){ve(this,"props",void 0),ve(this,"state",{}),ve(this,"transitionManager",void 0),ve(this,"eventManager",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"makeViewport",void 0),ve(this,"_controllerState",void 0),ve(this,"_events",{}),ve(this,"_interactionState",{isDragging:!1}),ve(this,"_customEvents",[]),ve(this,"_eventStartBlocked",null),ve(this,"_panMove",!1),ve(this,"invertPan",!1),ve(this,"dragMode","rotate"),ve(this,"inertia",0),ve(this,"scrollZoom",!0),ve(this,"dragPan",!0),ve(this,"dragRotate",!0),ve(this,"doubleClickZoom",!0),ve(this,"touchZoom",!0),ve(this,"touchRotate",!1),ve(this,"keyboard",!0),this.transitionManager=new hue({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Ym_WHEEL,d&&i),this.toggleEvents(Ym_PAN,d),this.toggleEvents(Ym_PINCH,d&&(a||c)),this.toggleEvents(Ym_TRIPLE_PAN,d&&c),this.toggleEvents(Ym_DOUBLE_TAP,d&&s),this.toggleEvents(Ym_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Bu,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Bu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:VE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Bu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:VE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Bu,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Bu,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:VE},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return mf._startPinchRotation=e.rotation,mf._lastPinchEvent=e,this.updateViewport(i,Bu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:mf._startPinchRotation-i})}return this.updateViewport(n,Bu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),mf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=mf;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*n/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:VE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return mf._startPinchRotation=null,mf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new UE({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Bu}}class u8{constructor(e,n){ve(this,"_viewportProps",void 0),ve(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class h8 extends u8{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:p,startRotatePos:m,startRotationX:b,startRotationOrbit:T,startZoomPosition:D,startZoom:U}=e;super({width:n,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:p,startRotatePos:m,startRotationX:b,startRotationOrbit:T,startZoomPosition:D,startZoom:U}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),wr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[wr(r[0],i,n),wr(r[1],i,n)]:wr(r,i,n),e.rotationX=wr(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function Gre(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class _ue extends oR{constructor(...e){super(...e),ve(this,"ControllerState",h8),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new UE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class bue extends h8{constructor(e){super(e),ve(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=wr(s+o,r,i);break;case"Y":a=wr(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return wr(n+o,r,i)}}class yue extends oR{constructor(...e){super(...e),ve(this,"ControllerState",bue),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new UE(["target","zoom"])}),ve(this,"dragMode","pan")}_onPanRotate(){return!1}}class f8 extends iR{get ViewportType(){return lue}get ControllerType(){return yue}}ve(f8,"displayName","OrthographicView");const sR=Math.PI/180;function vue({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new $n).lookAt({eye:a,up:s});c.rotateX(i*sR),"Z"===n?c.rotateZ(r*sR):c.rotateY(r*sR);const l=Math.pow(2,o)/t;return c.scale(l),c}class xue extends Pu{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:cD(r);super({...e,longitude:void 0,viewMatrix:vue({height:n||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),ve(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=n?r:this.height-r,[a,c,l]=D0([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class p8 extends iR{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return xue}get ControllerType(){return _ue}}ve(p8,"displayName","OrbitView");const wue=[255,255,255],Eue=1;let Aue=0;class m8{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","ambient");const{color:n=wue}=e,{intensity:i=Eue}=e;this.id=e.id||"ambient-".concat(Aue++),this.color=n,this.intensity=i}}const Sue=[255,255,255],Cue=1,Tue=[0,0,-1];let Mue=0;class g8{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","directional"),ve(this,"direction",void 0),ve(this,"shadow",void 0);const{color:n=Sue}=e,{intensity:i=Cue}=e,{direction:r=Tue}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(Mue++),this.color=n,this.intensity=i,this.type="directional",this.direction=new nn(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class Iue{constructor(e,n={id:"pass"}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class aR extends Iue{constructor(...e){super(...e),ve(this,"_lastRenderIndex",-1)}render(e){return sd(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function Rue(t,e){sd(t,{viewport:[0,0,e?e.width:t.drawingBufferWidth,e?e.height:t.drawingBufferHeight]}),t.clear(16640)}(l,n),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const p=o&&o[h.id];s?.(h);const m=this._getDrawLayerParams(h,e),b=h.subViewports||[h];for(const T of b){const D=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:T,view:p,pass:e.pass,layers:e.layers},m);d.push(D)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:r=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:c},l=!1){const d=[],h=_8(this._lastRenderIndex+1),p={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:s},m={};for(let b=0;b<n.length;b++){const T=n[b],D=this._shouldDrawLayer(T,p,o,m),U={shouldDrawLayer:D};D&&!l&&(U.layerRenderIndex=h(T,D),U.moduleParameters=this._getModuleParameters(T,a,i,c),U.layerParameters=this.getLayerParameters(T,b,e)),d[b]=U}return d}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function Due(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,o=e&&e.devicePixelRatio||Mm(t);return[i.x*o,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Ac(e,{scissorTest:!0,scissor:l},()=>wI(e,h))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};sd(e,{viewport:l});for(let h=0;h<n.length;h++){const p=n[h],{shouldDrawLayer:m,layerRenderIndex:b,moduleParameters:T,layerParameters:D}=c[h];if(m&&p.props.pickable&&d.pickableCount++,p.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,b),T.viewport=s;try{p._drawLayer({moduleParameters:T,uniforms:{layerIndex:b},parameters:D})}catch(U){p.raiseError(U,"drawing ".concat(p," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Mm(this.gl)});if(n)for(const c of n){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,n),r)}}function _8(t=0,e={}){const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const d=n[c]=n[c]||_8(e[c],e);l=d(r,o),n[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return i}class Oue extends aR{constructor(e,n){super(e,n),ve(this,"shadowMap",void 0),ve(this,"depthBuffer",void 0),ve(this,"fbo",void 0),this.shadowMap=new Ts(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Rm(e,{format:33189,width:1,height:1}),this.fbo=new uo(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Ac(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Mm(this.gl),o=i.width*r,s=i.height*r;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const b8="#define SMOOTH_EDGE_RADIUS 0.5",Fue={name:"geometry",vs:"\n".concat(b8,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(b8,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Lue=Object.keys(wi).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(wi[t],";")).join(""),Bue=Object.keys(ul).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(ul[t],";")).join(""),jue=Object.keys(nE).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(nE[t],";")).join(""),Uue="".concat(Lue,"\n").concat(Bue,"\n").concat(jue,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),Vue={},cR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Fue],vs:Uue,getUniforms:function zue(t=Vue){return"viewport"in t?function Cce({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=wi.DEFAULT,coordinateOrigin:r=iV,autoWrapLongitude:o=!1}){i===wi.DEFAULT&&(i=t.isGeospatial?wi.LNGLAT:wi.CARTESIAN);const s=Ace({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||nV,s}(t):{}}},Wue=x0(function que({viewport:t,center:e}){return new $n(t.viewProjectionMatrix).invert().transform(e)}),$ue=x0(function Jue({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,o=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>function Kue(t,e){const[n,i,r]=t,o=D0([n,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new nn(t.center).negate()),c=o.map(d=>a.transform(d)),l=(new $n).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(l.multiplyRight(s))}return n}),Yue=[0,0,0,1],Xue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],lR={name:"shadow",dependencies:[cR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Zue(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Yue,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=Wue({viewport:t.viewport,center:e.project_uCenter}),o=[],s=$ue({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new nn(t.viewport.center).negate());e.project_uCoordinateSystem===wi.LNGLAT&&e.project_uProjectionMode===ul.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(Xue),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},Que={color:[255,255,255],intensity:1},y8=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],ehe=[0,0,0,200/255];class dR{constructor(e={}){ve(this,"id","lighting-effect"),ve(this,"props",void 0),ve(this,"shadowColor",ehe),ve(this,"shadow",void 0),ve(this,"ambientLight",void 0),ve(this,"directionalLights",void 0),ve(this,"pointLights",void 0),ve(this,"shadowPasses",[]),ve(this,"shadowMaps",[]),ve(this,"dummyShadowMap",null),ve(this,"programManager",void 0),ve(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=C0.getDefaultProgramManager(e),lR&&this.programManager.addDefaultModule(lR)),this.dummyShadowMap||(this.dummyShadowMap=new Ts(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(lR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new $n).lookAt({eye:new nn(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new Oue(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new m8(Que),this.directionalLights.push(new g8(y8[0]),new g8(y8[1])))}}let the=1,nhe=1;class v8{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=the++,a={time:0,delay:n,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=nhe++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class ihe{constructor(e,n,i){ve(this,"id",void 0),ve(this,"context",void 0),ve(this,"isLoaded",void 0),ve(this,"persistent",void 0),ve(this,"_loadCount",0),ve(this,"_subscribers",new Set),ve(this,"_data",void 0),ve(this,"_loader",void 0),ve(this,"_error",void 0),ve(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=N0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class rhe{constructor({gl:e,protocol:n}){ve(this,"protocol",void 0),ve(this,"_context",void 0),ve(this,"_resources",void 0),ve(this,"_consumers",void 0),ve(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(n,i):(o=new ihe(e,n,this._context),this._resources[e]=o),o.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const ohe=[cR],she=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function ahe(t){const e=C0.getDefaultProgramManager(t);for(const n of ohe)e.addDefaultModule(n);for(const n of she)e.addShaderHook(n);return e}class dhe{constructor(e,{deck:n,stats:i,viewport:r,timeline:o}={}){ve(this,"layers",void 0),ve(this,"context",void 0),ve(this,"resourceManager",void 0),ve(this,"_lastRenderedLayers",[]),ve(this,"_needsRedraw",!1),ve(this,"_needsUpdate",!1),ve(this,"_nextLayers",null),ve(this,"_debug",!1),ve(this,"activateViewport",s=>{es("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new rhe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&ahe(e),stats:i||new mI({id:"deck.gl"}),viewport:r||new Pu({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new v8,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){es("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=DI(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const s of e)i[s.id]?mi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const o=n[r.id];null===o&&mi.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class uhe{constructor(e){ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"views",void 0),ve(this,"viewState",void 0),ve(this,"controllers",void 0),ve(this,"timeline",void 0),ve(this,"_viewports",void 0),ve(this,"_viewportMap",void 0),ve(this,"_isUpdating",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_needsUpdate",void 0),ve(this,"_eventManager",void 0),ve(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=DI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!pl(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):mi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const o=e.controller;if(o&&i){const s={...n,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!r||r.constructor!==o.type)&&(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=n[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),a&&this._viewports.unshift(a)}for(const r in n){const o=n[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}class fhe extends u8{constructor(e){const{width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:m=60,minPitch:b=0,startPanLngLat:T,startZoomLngLat:D,startRotatePos:U,startBearing:Y,startPitch:ye,startZoom:Ce,normalize:je=!0}=e;Fo(Number.isFinite(o)),Fo(Number.isFinite(r)),Fo(Number.isFinite(s)),super({width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:p,maxPitch:m,minPitch:b,normalize:je,position:d},{startPanLngLat:T,startZoomLngLat:D,startRotatePos:U,startBearing:Y,startPitch:ye,startZoom:Ce}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+n,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=wr(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-n.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=wr(r,i,n);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=wr(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function $ce(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=t;(r<-180||r>180)&&(r=dV(r+180,360)-180),(a<-180||a>180)&&(a=dV(a+180,360)-180);const c=rD(n/512);if(s<=c)s=c,o=0;else{const l=n/2/Math.pow(2,s),d=zm([0,l])[1];if(o<d)o=d;else{const h=zm([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const o=e[0]-n[0],s=e[1]-n[1],a=e[1],c=n[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let p=0;s>0?Math.abs(d-c)>5&&(p=s/(c-d)*1.2):s<0&&c>5&&(p=1-a/c),p=wr(p,-1,1);const{minPitch:m,maxPitch:b}=this.getViewportProps();let D=i;return p>0?D=i+p*(b-i):p<0&&(D=i-p*(m-i)),{pitch:D,bearing:r+180*h}}}class phe extends oR{constructor(...e){super(...e),ve(this,"ControllerState",fhe),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new UE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ve(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class w8 extends iR{get ViewportType(){return Hm}get ControllerType(){return phe}}ve(w8,"displayName","MapView");const mhe=new dR;class _he{constructor(){ve(this,"effects",void 0),ve(this,"_resolvedEffects",[]),ve(this,"_defaultEffects",[]),ve(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(r=>function ghe(t,e){var n,i;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(i=e.order)&&void 0!==i?i:1/0)}(r,e)>0);i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(pl(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const r of this.effects)n[r.id]=r;const i=[];for(const r of e){const o=n[r.id];o&&o!==r?o.setProps?(o.setProps(r.props),i.push(o)):(o.cleanup(),i.push(r)):i.push(r),delete n[r.id]}for(const r in n)n[r].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(r=>r instanceof dR)||this._resolvedEffects.push(mhe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class bhe extends aR{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const E8={blendFunc:[1,0,32771,0],blendEquation:32774};class A8 extends aR{constructor(...e){super(...e),ve(this,"pickZ",void 0),ve(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:p,pass:m="picking",pickZ:b,moduleParameters:T}){const D=this.gl;this.pickZ=b;const U=this._resetColorEncoder(b),Y=Ac(D,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...E8,blend:!b},()=>super.render({target:s,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:p?.filter(Ce=>Ce.useInPicking),pass:m,isPicking:!0,moduleParameters:T}));return this._colorEncoderState=null,{decodePickingColor:U&&vhe.bind(null,U),stats:Y}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters},{pickable:o,operation:s}=e.props;return this._colorEncoderState?o&&s.includes("draw")&&(Object.assign(r,E8),r.blend=!0,r.blendColor=function yhe(t,e,n){const{byLayer:i,byAlpha:r}=t;let o,s=i.get(e);return s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),r[o]=s):(mi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colorEncoderState,e,i)):r.blend=!1,s.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function vhe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class whe{constructor(e){ve(this,"gl",void 0),ve(this,"layerFilter",void 0),ve(this,"drawPickingColors",void 0),ve(this,"drawLayersPass",void 0),ve(this,"pickLayersPass",void 0),ve(this,"renderCount",void 0),ve(this,"_needsRedraw",void 0),ve(this,"renderBuffers",void 0),ve(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new bhe(e),this.pickLayersPass=new A8(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||uo.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,o=n.render({...i,target:r});i.effects&&this._postRender(i.effects,i),this.renderCount++,es("deckRenderer.renderLayers",this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(this.gl,n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new uo(this.gl),new uo(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={...n,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){r.target=n.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const Ehe={pickedColor:null,pickedObjectIndex:-1};function Ahe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,p=0;for(let m=0;m<l;m++){const b=m+a-i,T=b*b;if(T>d)p+=4*c;else for(let D=0;D<c;D++){if(t[p+3]-1>=0){const Y=D+s-n,ye=Y*Y+T;ye<=d&&(d=ye,h=p)}p+=4}}if(h>=0){const m=t.slice(h,h+4),b=e(m);if(b){const T=Math.floor(h/4/c),D=h/4-T*c;return{...b,pickedColor:m,pickedX:s+D,pickedY:a+T}}mi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Ehe}function S8({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function The(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function Che(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const p=n.layerId,m=s?s.props.id:null;if(m!==p||a!==n.index){if(m!==p){const b=r.find(T=>T.props.id===p);b&&c.unshift(b)}n.layerId=m,n.index=a,n.info=null}}const l=S8(t),d=new Map;return d.set(null,l),c.forEach(h=>{let p={...l};h===s&&(p.color=o,p.index=a,p.picked=!0),p=C8({layer:h,info:p,mode:i});const m=p.layer;h===s&&"hover"===i&&(n.info=p),d.set(m.id,p),"hover"===i&&m.updateAutoHighlight(p)}),d}function C8({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class Mhe{constructor(e){ve(this,"gl",void 0),ve(this,"pickingFBO",void 0),ve(this,"depthFBO",void 0),ve(this,"pickLayersPass",void 0),ve(this,"layerFilter",void 0),ve(this,"lastPickedInfo",void 0),ve(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new A8(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(p=>p.id===s):null,l=a&&r.find(p=>p.id===a)||r[0],d=l&&l.unproject([e-l.x,n-l.y]);return{...o,x:e,y:n,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new uo(i),uo.isSupported(i,{colorBufferFloat:!0}))){const r=new uo(i);r.attach({36064:new Ts(i,{format:di(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const p=this._getPickable(e),m=Mm(this.gl);if(!p)return{result:[],emptyInfo:S8({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const b=hI(this.gl,[r,o],!0),T=[b.x+Math.floor(b.width/2),b.y+Math.floor(b.height/2)],D=Math.round(s*m),{width:U,height:Y}=this.pickingFBO,ye=this._getPickingRect({deviceX:T[0],deviceY:T[1],deviceRadius:D,deviceWidth:U,deviceHeight:Y}),Ce={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let je;const qe=[],at=new Set;for(let pt=0;pt<a;pt++){let ht,_t;if(ht=ye?Ahe({...this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:ye,cullRect:Ce,effects:h,pass:"picking:".concat(c)}),deviceX:T[0],deviceY:T[1],deviceRadius:D,deviceRect:ye}):{pickedColor:null,pickedObjectIndex:-1},ht.pickedLayer&&l&&this.depthFBO){const{pickedColors:yt}=this._drawAndSample({layers:[ht.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:ht.pickedX,y:ht.pickedY,width:1,height:1},cullRect:Ce,effects:h,pass:"picking:".concat(c,":z")},!0);yt[3]&&(_t=yt[0])}ht.pickedLayer&&pt+1<a&&(at.add(ht.pickedLayer),ht.pickedLayer.disablePickingIndex(ht.pickedObjectIndex)),je=Che({pickInfo:ht,lastPickedInfo:this.lastPickedInfo,mode:c,layers:p,viewports:i,x:r,y:o,z:_t,pixelRatio:m});for(const yt of je.values())yt.layer&&qe.push(yt);if(!ht.pickedColor)break}for(const pt of at)pt.restorePickingColors();return{result:qe,emptyInfo:je.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const p=this._getPickable(e);if(!p)return[];this._resizeBuffer();const m=Mm(this.gl),b=hI(this.gl,[r,o],!0),T=b.x,D=b.y+b.height,U=hI(this.gl,[r+s,o+a],!0),ye=U.y,qe=function She({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){const a=e(o);a?n.set(s,{...a,color:o}):mi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:{x:T,y:ye,width:U.x+U.width-T,height:D-ye},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),at=new Map,pt=Number.isFinite(l);for(let ht=0;ht<qe.length&&!(pt&&l&&at.size>=l);ht++){const _t=qe[ht];let yt={color:_t.pickedColor,layer:null,index:_t.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};yt=C8({layer:_t.pickedLayer,info:yt,mode:c}),at.has(yt.object)||at.set(yt.object,yt)}return Array.from(at.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l,preRenderStats:{}};for(const Y of a)Y.useInPicking&&(h.preRenderStats[Y.id]=Y.preRender(this.gl,h));const{decodePickingColor:p}=this.pickLayersPass.render(h),{x:m,y:b,width:T,height:D}=o,U=new(l?Float32Array:Uint8Array)(T*D*4);return oE(d,{sourceX:m,sourceY:b,sourceWidth:T,sourceHeight:D,target:U}),{pickedColors:U,decodePickingColor:p}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,n+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const Ihe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Dhe{constructor(e){ve(this,"el",null),ve(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Ihe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&"object"==typeof e&&"style"in e&&Object.assign(r.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:Ohe}=globalThis,uR=typeof Image<"u",hR=typeof ImageBitmap<"u",fR=!!LE||!!Ohe;function T8(t){const e=function I8(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Nhe=/^data:image\/svg\+xml/,Fhe=/\.svg((\?|#).*)?$/;function pR(t){return t&&(Nhe.test(t)||Fhe.test(t))}function D8(t,e){if(pR(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function R8(t,e,n){return mR.apply(this,arguments)}function mR(){return mR=jt(function*(t,e,n){const i=function Lhe(t,e){if(pR(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return D8(t,e)}(t,n),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Bhe(t,e){return gR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),mR.apply(this,arguments)}function gR(){return gR=jt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=o=>r(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){r(o)}})}),gR.apply(this,arguments)}const jhe={};let O8=!0;function _R(){return _R=jt(function*(t,e,n){let i;i=pR(n)?yield R8(t,e,n):D8(t,n);const r=e&&e.imagebitmap;return yield function Vhe(t){return bR.apply(this,arguments)}(i,r)}),_R.apply(this,arguments)}function bR(){return bR=jt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function zhe(t){for(const e in t||jhe)return!1;return!0}(e)||!O8)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),O8=!1}return yield createImageBitmap(t)}),bR.apply(this,arguments)}const vl=!1,F0=!0;function yR(t){const e=L0(t);return function Khe(t){const e=L0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,vl)?{mimeType:"image/png",width:e.getUint32(16,vl),height:e.getUint32(20,vl)}:null}(e)||function Zhe(t){const e=L0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,vl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Qhe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,vl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,vl),width:e.getUint16(o+7,vl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,vl)}return null}(e)||function qhe(t){const e=L0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,vl)?{mimeType:"image/gif",width:e.getUint16(6,F0),height:e.getUint16(8,F0)}:null}(e)||function Jhe(t){const e=L0(t);return e.byteLength>=14&&16973===e.getUint16(0,vl)&&e.getUint32(2,F0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,F0),height:e.getUint32(22,F0)}:null}(e)||function Xhe(t){const n=function Hhe(t){return function Yhe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function $he(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function Ghe(t){switch(function Whe(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function L0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function vR(){return vR=jt(function*(t,e){const{mimeType:n}=yR(t)||{},i=globalThis._parseImageNode;return hd(i),yield i(t,n)}),vR.apply(this,arguments)}function xR(){return xR=jt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:o}=n||{},s=function nfe(t){switch(t){case"auto":case"data":return function Phe(){if(hR)return"imagebitmap";if(uR)return"image";if(fR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function khe(t){switch(t){case"auto":return hR||uR||fR;case"imagebitmap":return hR;case"image":return uR;case"data":return fR;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(s){case"imagebitmap":a=yield function Uhe(t,e,n){return _R.apply(this,arguments)}(t,e,o);break;case"image":a=yield R8(t,e,o);break;case"data":a=yield function efe(t,e){return vR.apply(this,arguments)}(t,e);break;default:hd(!1)}return"data"===r&&(a=function M8(t){switch(T8(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),xR.apply(this,arguments)}const k8={id:"image",module:"images",name:"Images",version:"3.4.11",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function tfe(t,e,n){return xR.apply(this,arguments)},tests:[t=>!!yR(new DataView(t))],options:{image:{type:"auto",decode:!0}}},rfe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function ife(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},sfe=function ofe(){const t="8.9.24",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(mi.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:mi,_registerLoggers:roe},i8([rfe,[k8,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();class zE extends ad{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=di(e),r=UU(e,"TIMER_QUERY");let o=i||r;for(const s of n)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Yt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return zE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const P8=dl()&&typeof document<"u";let gfe=0;class _fe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(D=>wU(D)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:m=!0,stats:b=sf.get("animation-loop-".concat(gfe++))}=e;let{useDevicePixels:T=!0}=e;"useDevicePixelRatio"in e&&(un.deprecated("useDevicePixelRatio","useDevicePixels")(),T=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=b,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:m,useDevicePixels:T}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Yt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=zE.isSupported(this.gl,["timers"])?new zE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return jt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return un.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=P8?new Promise((e,n)=>{P8&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function mfe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function pfe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?pI(this.props.gl,e):this.onCreateContext(e),!iE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Mie(t){sd(t,uI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function kie(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function Iie(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function Bie(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(un.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(un.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*s),t.canvas.height=Math.floor(r*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new uo(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var HE=C(7271);const bfe={mousedown:1,mousemove:2,mouseup:4};(function vfe(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function yfe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(HE.PointerEventInput),function xfe(t){t.prototype.handler=function(n){let i=bfe[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(HE.MouseInput);const wfe=HE.Manager,xl=HE;class GE{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const Efe=xl?[[xl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[xl.Rotate,{enable:!1}],[xl.Pinch,{enable:!1}],[xl.Swipe,{enable:!1}],[xl.Pan,{threshold:0,enable:!1}],[xl.Press,{enable:!1}],[xl.Tap,{event:"doubletap",taps:2,enable:!1}],[xl.Tap,{event:"anytap",enable:!1}],[xl.Tap,{enable:!1}]]:null,L8={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Afe={doubletap:["tap"]},Sfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},ER={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Cfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},B8={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Tfe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Xm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let AR=!1;try{Xm.addEventListener("test",null,{get passive(){return AR=!0,!0}}),Xm.removeEventListener("test",null)}catch{AR=!1}const Mfe=-1!==Tfe.indexOf("firefox"),{WHEEL_EVENTS:Ife}=ER,U8=4.000244140625;class Ofe extends GE{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;Xm.WheelEvent&&(Mfe&&r.deltaMode===Xm.WheelEvent.DOM_DELTA_PIXEL&&(o/=Xm.devicePixelRatio),r.deltaMode===Xm.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%U8==0&&(o=Math.floor(o/U8)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(Ife),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!AR&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:kfe}=ER,V8="pointermove",z8="pointerover",H8="pointerout",G8="pointerenter",W8="pointerleave";class Pfe extends GE{constructor(e,n,i){super(e,n,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(kfe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===V8&&(this.enableMoveEvent=n),e===z8&&(this.enableOverEvent=n),e===H8&&(this.enableOutEvent=n),e===G8&&(this.enableEnterEvent=n),e===W8&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(z8,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(H8,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(G8,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(W8,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(V8,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Nfe}=ER,$8="keydown";class Ffe extends GE{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:$8,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Nfe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===$8&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const X8="contextmenu";class Lfe extends GE{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:X8,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===X8&&(this.options.enable=n)}}const Bfe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Xfe(t){const e=Bfe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&n),s=!!(4&n),a=!!(2&n)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function Kfe(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const TR={srcElement:"root",priority:0};class qfe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=TR;"string"==typeof i||i&&i.addEventListener?c={...TR,srcElement:i}:i&&(c={...TR,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===n){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...Xfe(e),...Kfe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const Jfe={events:null,recognizers:null,recognizerOptions:{},Manager:wfe,touchAction:"none",tabIndex:0};class Zfe{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:o}=r,s=Sfe[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...Jfe,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||Efe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(L8).forEach(r=>{const o=this.manager.get(r);o&&L8[r].forEach(s=>{o.recognizeWith(s)})});for(const r in n.recognizerOptions){const o=this.manager.get(r);if(o){const s=n.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new Ofe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Pfe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Ffe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Lfe(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const o=Afe[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);n?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,o){if("string"!=typeof e){i=n;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=B8[e]||e;let l=a.get(c);l||(l=new qfe(this),a.set(c,l),l.recognizerName=Cfe[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,n,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(B8[e]||e);if(o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function gf(){}const K8={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:gf,onResize:gf,onViewStateChange:gf,onInteractionStateChange:gf,onBeforeRender:gf,onAfterRender:gf,onLoad:gf,onError:t=>mi.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class MR{constructor(e){ve(this,"props",void 0),ve(this,"width",0),ve(this,"height",0),ve(this,"userData",{}),ve(this,"canvas",null),ve(this,"viewManager",null),ve(this,"layerManager",null),ve(this,"effectManager",null),ve(this,"deckRenderer",null),ve(this,"deckPicker",null),ve(this,"eventManager",null),ve(this,"tooltip",null),ve(this,"metrics",void 0),ve(this,"animationLoop",void 0),ve(this,"stats",void 0),ve(this,"viewState",void 0),ve(this,"cursorState",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_pickRequest",void 0),ve(this,"_lastPointerDownInfo",null),ve(this,"_metricsCounter",void 0),ve(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),ve(this,"_onEvent",n=>{const i=sU[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,n)),!d&&l&&l(s,n)}),ve(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...K8,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&mi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===U4()&&mi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new mI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&g0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,o,s,a,c,l;null===(e=this.animationLoop)||void 0===e||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(n=this.layerManager)||void 0===n||n.finalize(),this.layerManager=null,null===(i=this.viewManager)||void 0===i||i.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(o=this.deckRenderer)||void 0===o||o.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(c=this.tooltip)||void 0===c||c.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&mi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&mi.removed("onLayerClick","onClick")(),e.initialViewState&&!pl(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||i||r||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return Fo(this.viewManager),this.viewManager.views}getViewports(e){return Fo(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,i){Fo(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),Fo(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,n;const{canvas:i}=this;if(!i)return;const r=null!==(e=i.clientWidth)&&void 0!==e?e:i.width,o=null!==(n=i.clientHeight)&&void 0!==n?n:i.height;var s,a;r===this.width&&o===this.height||(this.width=r,this.height=o,null===(s=this.viewManager)||void 0===s||s.setProps({width:r,height:o}),null===(a=this.layerManager)||void 0===a||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:o}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new _fe({width:n,height:i,useDevicePixels:d,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:h=>wU({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new w8({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var n;o=a,s=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,pI(e,{enable:!0,copyState:!0})),this.tooltip=new Dhe(this.canvas),sd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new v8;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Zfe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in sU)this.eventManager.on(r,this._onEvent);this.viewManager=new uhe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new dhe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new _he,this.deckRenderer=new whe(e),this.deckPicker=new Mhe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;sd(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),mi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=sf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ve(MR,"defaultProps",K8),ve(MR,"VERSION",sfe);const $E={name:"project32",dependencies:[cR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Qfe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},YE={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function epe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qfe;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},q8={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class ju{static get DRAW_MODE(){return q8}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ys("geometry"),drawMode:i=q8.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Yt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Yt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Yt(Number.isFinite(i)),i}}const J8=()=>{},Z8={10241:9987,10240:9729,10242:33071,10243:33071};function ope(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function spe(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function B0(t){return t&&(t.id||t.url)}function Q8(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[B0(r)]={...r,x:o,y:n}}}class dpe{constructor(e,{onUpdate:n=J8,onError:i=J8}){ve(this,"gl",void 0),ve(this,"onUpdate",void 0),ve(this,"onError",void 0),ve(this,"_loadOptions",null),ve(this,"_texture",null),ve(this,"_externalTexture",null),ve(this,"_mapping",{}),ve(this,"_textureParameters",null),ve(this,"_pendingCount",0),ve(this,"_autoPacking",!1),ve(this,"_xOffset",0),ve(this,"_yOffset",0),ve(this,"_rowHeight",0),ve(this,"_buffer",4),ve(this,"_canvasWidth",1024),ve(this,"_canvasHeight",0),ve(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?B0(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function lpe(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=uE(t);for(const s of r){o.index++;const a=e(s,o),c=B0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function cpe({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[B0(l)]){const{height:h,width:p}=l;i+p+e>s&&(Q8(n,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+p+e,o=Math.max(o,h)}}return a.length>0&&Q8(n,a,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:ope(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new Ts(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||Z8})),this._texture.height!==this._canvasHeight&&(this._texture=function ape(t,e,n,i){const r=t.width,o=t.height,s=new Ts(t.gl,{width:e,height:n,parameters:i});return function cre(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=n;const{framebuffer:p,deleteFramebuffer:m}=m0(t);Yt(p);const{gl:b,handle:T}=p,D=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const U=b.bindFramebuffer(36160,T);Yt(e);let Y=null;if(e instanceof af&&(Y=e,d=Number.isFinite(d)?d:Y.width,h=Number.isFinite(h)?h:Y.height,Y.bind(0),e=Y.target),D)switch(e){case 3553:case 34067:b.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:Qo(b).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else b.copyTexImage2D(e,o,s,i,r,d,h,0);Y&&Y.unbind(),b.bindFramebuffer(36160,U||null),m&&p.delete()}(t,s,{targetY:0,width:r,height:o}),t.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Z8)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,N0(i.url,this._loadOptions).then(r=>{const o=B0(i),s=this._mapping[o],{x:a,y:c,width:l,height:d}=s,{data:h,width:p,height:m}=spe(n,r,l,d);this._texture.setSubImageData({data:h,x:a+(l-p)/2,y:c+(d-m)/2,width:p,height:m}),s.width=p,s.height=m,this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const e6=[0,0,0,255],upe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:e6},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class IR extends pf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[$E,YE]})}initializeState(){this.state={iconManager:new dpe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:e6},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=n,{iconManager:h}=this.state,p=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!p,iconAtlas:s,iconMapping:p?a:null,textureParameters:d}),p?i.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:b}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(b),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:nE[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new Lm(e,{...this.getShaders(),id:this.props.id,geometry:new ju({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):mi.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[n,i,r,o]}}ve(IR,"defaultProps",upe),ve(IR,"layerName","IconLayer");const t6=[];class RR extends IR{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&mi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state,s=r?Math.max(i,.75*(1-r)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:.75,outlineBuffer:s,gamma:i,sdf:!!n,outlineColor:o},super.draw(e),n&&r){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:.75}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):t6}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):t6}}ve(RR,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ve(RR,"layerName","MultiIconLayer");const j0=1e20;class ppe{constructor({fontSize:e=24,buffer:n=3,radius:i=8,cutoff:r=.25,fontFamily:o="sans-serif",fontWeight:s="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=r,this.radius=i;const c=this.size=e+4*n,l=this._createCanvas(c),d=this.ctx=l.getContext("2d",{willReadFrequently:!0});d.font=`${a} ${s} ${e}px ${o}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(e),a=Math.ceil(i),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),d=Math.min(this.size-this.buffer,a+Math.ceil(r)),h=l+2*this.buffer,p=d+2*this.buffer,m=Math.max(h*p,0),b=new Uint8ClampedArray(m),T={data:b,width:h,height:p,glyphWidth:l,glyphHeight:d,glyphTop:a,glyphLeft:0,glyphAdvance:n};if(0===l||0===d)return T;const{ctx:D,buffer:U,gridInner:Y,gridOuter:ye}=this;D.clearRect(U,U,l,d),D.fillText(e,U,U+a);const Ce=D.getImageData(U,U,l,d);ye.fill(j0,0,m),Y.fill(0,0,m);for(let je=0;je<d;je++)for(let qe=0;qe<l;qe++){const at=Ce.data[4*(je*l+qe)+3]/255;if(0===at)continue;const pt=(je+U)*h+qe+U;if(1===at)ye[pt]=0,Y[pt]=j0;else{const ht=.5-at;ye[pt]=ht>0?ht*ht:0,Y[pt]=ht<0?ht*ht:0}}n6(ye,0,0,h,p,h,this.f,this.v,this.z),n6(Y,U,U,l,d,h,this.f,this.v,this.z);for(let je=0;je<m;je++){const qe=Math.sqrt(ye[je])-Math.sqrt(Y[je]);b[je]=Math.round(255-255*(qe/this.radius+this.cutoff))}return T}}function n6(t,e,n,i,r,o,s,a,c){for(let l=e;l<e+i;l++)i6(t,n*o+l,o,r,s,a,c);for(let l=n;l<n+r;l++)i6(t,l*o+e,1,i,s,a,c)}function i6(t,e,n,i,r,o,s){o[0]=0,s[0]=-j0,s[1]=j0,r[0]=t[e];for(let a=1,c=0,l=0;a<i;a++){r[a]=t[e+a*n];const d=a*a;do{const h=o[c];l=(r[a]-r[h]+d-h*h)/(a-h)/2}while(l<=s[c]&&--c>-1);c++,o[c]=a,s[c]=l,s[c+1]=j0}for(let a=0,c=0;a<i;a++){for(;s[c+1]<a;)c++;const l=o[c],d=a-l;t[e+a*n]=r[l]+d*d}}const gpe=[];function _pe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function r6(t,e,n,i){let r=0;for(let s=e;s<n;s++){var o;r+=(null===(o=i[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function o6(t,e,n,i,r,o){let s=e,a=0;for(let c=e;c<n;c++){const l=r6(t,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function vpe(t,e,n,i,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?o6(t,r,o,n,i,s):function ype(t,e,n,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<n;d++)if((" "===t[d]||" "===t[d+1]||d+1===n)&&(c=d+1),c>a){let h=r6(t,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=o6(t,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(t,r,o,n,i,s),s}function xpe(t,e,n,i,r,o){let s=0,a=0;for(let c=e;c<n;c++){const l=t[c],d=i[l];d?(a||(a=d.layoutHeight),r[c]=s+d.layoutWidth/2,s+=d.layoutWidth):(mi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=32)}o[0]=s,o[1]=a}class s6{constructor(e=5){ve(this,"limit",void 0),ve(this,"_cache",{}),ve(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const Km={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Ape(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let XE=new s6(3);function Cpe(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function u6(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Mpe{constructor(){ve(this,"props",{...Km}),ve(this,"_key",void 0),ve(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(1.2*e+2*n)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=function Spe(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=XE.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),i=XE.get(this._key);if(i&&0===n.size)return void(this._atlas!==i&&(this._atlas=i));const r=this._generateFontAtlas(n,i);this._atlas=r,XE.set(this._key,r)}_generateFontAtlas(e,n){const{fontFamily:i,fontWeight:r,fontSize:o,buffer:s,sdf:a,radius:c,cutoff:l}=this.props;let d=n&&n.data;d||(d=document.createElement("canvas"),d.width=1024);const h=d.getContext("2d",{willReadFrequently:!0});u6(h,i,o,r);const{mapping:p,canvasHeight:m,xOffset:b,yOffset:T}=function bpe({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;const d=n+2*i;for(const h of t)if(!o[h]){const p=e(h);l+p+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*d+i,width:p,height:d,layoutWidth:p,layoutHeight:n},l+=p+2*i}return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:_pe(a+(c+1)*d)}}({getFontWidth:D=>h.measureText(D).width,fontHeight:1.2*o,buffer:s,characterSet:e,maxCanvasWidth:1024,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(d.height!==m){const D=h.getImageData(0,0,d.width,d.height);d.height=m,h.putImageData(D,0,0)}if(u6(h,i,o,r),a){const D=new ppe({fontSize:o,buffer:s,radius:c,cutoff:l,fontFamily:i,fontWeight:"".concat(r)});for(const U of e){const{data:Y,width:ye,height:Ce,glyphTop:je}=D.draw(U);p[U].width=ye,p[U].layoutOffsetY=.9*o-je;const qe=h.createImageData(ye,Ce);Cpe(Y,qe),h.putImageData(qe,p[U].x,p[U].y)}}else for(const D of e)h.fillText(D,p[D].x,p[D].y+s+.9*o);return{xOffset:b,yOffset:T,mapping:p,data:d,width:d.width,height:d.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const Rpe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class OR extends pf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[$E,YE]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:nE[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new Lm(e,{...this.getShaders(),id:this.props.id,geometry:new ju({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ve(OR,"defaultProps",Rpe),ve(OR,"layerName","TextBackgroundLayer");const h6={start:1,middle:0,end:-1},f6={top:1,center:0,bottom:-1},kR=[0,0,0,255],kpe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:kR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Km.characterSet},fontFamily:Km.fontFamily,fontWeight:Km.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:kR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:kR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class PR extends nR{constructor(...e){super(...e),ve(this,"state",void 0),ve(this,"getBoundingRect",(n,i)=>{let{size:[r,o]}=this.transformParagraph(n,i);const{fontSize:s}=this.state.fontAtlasManager.props;r/=s,o/=s;const{getTextAnchor:a,getAlignmentBaseline:c}=this.props;return[(h6["function"==typeof a?a(n,i):a]-1)*r/2,(f6["function"==typeof c?c(n,i):c]-1)*o/2,r,o]}),ve(this,"getIconOffsets",(n,i)=>{const{getTextAnchor:r,getAlignmentBaseline:o}=this.props,{x:s,y:a,rowWidth:c,size:[l,d]}=this.transformParagraph(n,i),h=h6["function"==typeof r?r(n,i):r],p=f6["function"==typeof o?o(n,i):o],m=s.length,b=new Array(2*m);let T=0;for(let D=0;D<m;D++)b[T++]=(h-1)*l/2+(1-h)*(l-c[D])/2+s[D],b[T++]=(p-1)*d/2+a[D];return b})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Mpe},this.props.maxWidth>0&&mi.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=n.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function Epe({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,c=i?i/s:0,l=r[e]||Math.ceil((t.length-c)/a),d=o&&new Set,h=new Array(e);let p=t;if(a>1||c>0){p=new(0,t.constructor)(l);for(let b=0;b<l;b++)p[b]=t[b*a+c]}for(let m=0;m<e;m++){const D=p.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,D),d&&D.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:s,characterSet:c});a=d,o=(h,{index:p})=>l[p]}else{const{iterable:l,objectInfo:d}=uE(n);s=[0],a=0;for(const h of l){d.index++;const p=Array.from(o(h,d)||"");c&&p.forEach(c.add,c),a+=p.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}transformParagraph(e,n){const{fontAtlasManager:i}=this.state,r=i.mapping,o=this.state.getText,{wordBreak:s,lineHeight:a,maxWidth:c}=this.props;return function wpe(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],p=[0,0];let m=0,b=0,T=0;for(let U=0;U<=s;U++){const Y=o[U];if(("\n"===Y||U===s)&&(T=U),T>b){const ye=d?vpe(o,n,i,r,b,T):gpe;for(let Ce=0;Ce<=ye.length;Ce++){const je=0===Ce?b:ye[Ce-1],qe=Ce<ye.length?ye[Ce]:T;xpe(o,je,qe,r,a,p);for(let at=je;at<qe;at++){var D;const ht=(null===(D=r[o[at]])||void 0===D?void 0:D.layoutOffsetY)||0;c[at]=m+p[1]/2+ht,l[at]=p[0]}m+=p[1]*e,h[0]=Math.max(h[0],p[0])}b=T}"\n"===Y&&(a[b]=0,c[b]=0,l[b]=0,b++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}(o(e,n)||"",a,s,c*i.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:b,getBackgroundColor:T,getBorderColor:D,getBorderWidth:U,backgroundPadding:Y,background:ye,billboard:Ce,fontSettings:je,outlineWidth:qe,outlineColor:at,sizeScale:pt,sizeUnits:ht,sizeMinPixels:_t,sizeMaxPixels:yt,transitions:Ot,updateTriggers:ut}=this.props,xt=this.getSubLayerClass("characters",RR),Pt=this.getSubLayerClass("background",OR);return[ye&&new Pt({getFillColor:T,getLineColor:D,getLineWidth:U,padding:Y,getPosition:d,getSize:p,getAngle:m,getPixelOffset:b,billboard:Ce,sizeScale:pt,sizeUnits:ht,sizeMinPixels:_t,sizeMaxPixels:yt,transitions:Ot&&{getPosition:Ot.getPosition,getAngle:Ot.getAngle,getSize:Ot.getSize,getFillColor:Ot.getBackgroundColor,getLineColor:Ot.getBorderColor,getLineWidth:Ot.getBorderWidth,getPixelOffset:Ot.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ut.getPosition,getAngle:ut.getAngle,getSize:ut.getSize,getFillColor:ut.getBackgroundColor,getLineColor:ut.getBorderColor,getLineWidth:ut.getBorderWidth,getPixelOffset:ut.getPixelOffset,getBoundingRect:{getText:ut.getText,getTextAnchor:ut.getTextAnchor,getAlignmentBaseline:ut.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new xt({sdf:je.sdf,smoothing:Number.isFinite(je.smoothing)?je.smoothing:Km.smoothing,outlineWidth:qe/(je.radius||Km.radius),outlineColor:at,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:b,billboard:Ce,sizeScale:pt*r,sizeUnits:ht,sizeMinPixels:_t*r,sizeMaxPixels:yt*r,transitions:Ot&&{getPosition:Ot.getPosition,getAngle:Ot.getAngle,getColor:Ot.getColor,getSize:Ot.getSize,getPixelOffset:Ot.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:ut.getText,getPosition:ut.getPosition,getAngle:ut.getAngle,getColor:ut.getColor,getSize:ut.getSize,getPixelOffset:ut.getPixelOffset,getIconOffsets:{getTextAnchor:ut.getTextAnchor,getAlignmentBaseline:ut.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function Tpe(t){mi.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),XE=new s6(t)}(e)}}ve(PR,"defaultProps",kpe),ve(PR,"layerName","TextLayer");const p6="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Ppe={lightSources:{}};function NR(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const FR={name:"lights",vs:p6,fs:p6,getUniforms:function m6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ppe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function Npe(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?NR(e):[0,0,0],n.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=NR(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=NR(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return m6({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Fpe={};const Bpe={name:"phong-lighting",dependencies:[FR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function _6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fpe;if(!("material"in t))return{};const{material:e}=t;return e?function Lpe(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},LR=Math.PI/180,KE=new Float32Array(16),b6=new Float32Array(12);function y6(t,e,n){const i=e[0]*LR,r=e[1]*LR,o=e[2]*LR,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),p=n[0],m=n[1],b=n[2];t[0]=p*h*d,t[1]=p*c*d,t[2]=p*-a,t[3]=m*(-c*l+h*a*s),t[4]=m*(h*l+c*a*s),t[5]=m*d*s,t[6]=b*(c*s+h*a*l),t[7]=b*(-h*s+c*a*l),t[8]=b*d*l}function v6(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const x6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),p=Array.isArray(s),m=l||!c&&!!a(i[0]);t.constant=m?l:h&&d&&p;const b=t.value;if(t.constant){let T;m?(KE.set(a),T=v6(KE)):(T=b6,y6(T,r,o),T.set(s,9)),t.value=new Float32Array(T)}else{let T=e*t.size;const{iterable:D,objectInfo:U}=uE(i,e,n);for(const Y of D){let ye;U.index++,m?(KE.set(l?a:a(Y,U)),ye=v6(KE)):(ye=b6,y6(ye,h?r:r(Y,U),d?o:o(Y,U)),ye.set(p?s:s(Y,U),9)),b[T++]=ye[0],b[T++]=ye[1],b[T++]=ye[2],b[T++]=ye[3],b[T++]=ye[4],b[T++]=ye[5],b[T++]=ye[6],b[T++]=ye[7],b[T++]=ye[8],b[T++]=ye[9],b[T++]=ye[10],b[T++]=ye[11]}}}};function w6(t,e){return e===wi.CARTESIAN||e===wi.METER_OFFSETS||e===wi.DEFAULT&&!t.isGeospatial}function E6(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],p=a[l+2];e=d<e?d:e,n=h<n?h:n,i=p<i?p:i,r=d>r?d:r,o=h>o?h:o,s=p>s?p:s}return[[e,n,i],[r,o,s]]}function A6(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),mi.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function S6(t,e){if(t.attributes)return A6(t.attributes,e),t instanceof ju?t:new ju(t);if(t.positions||t.POSITION)return A6(t,e),new ju({attributes:t});throw Error("Invalid mesh")}class BR extends pf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=!di(this.context.gl),n={};return SI(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[$E,Bpe,YE],transpileToGLSL100:e,defines:n})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let n=this.state.positionBounds;if(n)return n;const{mesh:i}=this.props;if(!i)return null;if(n=null===(e=i.header)||void 0===e?void 0:e.boundingBox,!n){const{attributes:r}=S6(i,this.props._useMeshColors);r.POSITION=r.POSITION||r.positions,n=E6(r)}return this.state.positionBounds=n,n}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:x6}),this.setState({emptyTexture:new Ts(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var o;if(this.state.positionBounds=null,null===(o=this.state.model)||void 0===o||o.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const s=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||w6(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new Lm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:S6(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}ve(BR,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}}),ve(BR,"layerName","SimpleMeshLayer");const C6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[FR]};class qm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||Ys(this.constructor.name),this.display=!0,this.position=new nn,this.rotation=new nn,this.scale=new nn(1,1,1),this.matrix=new $n,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Yt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Yt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Yt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:o=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Yt(e),n=n||this.matrix;const i=new $n(e).multiplyRight(n),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class U0 extends qm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;un.assert(n.every(i=>i instanceof qm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const o=n.getBounds();if(!o)return;const[s,a]=o,c=new nn(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new nn(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new nn(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let p=0;p<3;p++)e[0][p]=Math.min(e[0][p],h[p]),e[1][p]=Math.max(e[1][p],h[p])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new $n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new $n(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof U0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let qE;class jR extends GU{static get ZERO(){return qE||(qE=new jR(0,0,0,0),Object.freeze(qE)),qE}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),cd(e)&&1===arguments.length?this.copy(e):(Gr.debug&&(ui(e),ui(n),ui(i),ui(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Gr.debug&&(ui(e.x),ui(e.y),ui(e.z),ui(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ui(e)}get w(){return this[3]}set w(e){this[3]=ui(e)}transform(e){return TI(this,this,e),this.check()}transformByMatrix3(e){return JU(this,this,e),this.check()}transformByMatrix2(e){return function Hre(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return KU(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function T6(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1],b=n[2],T=n[3],D=n[4],U=n[5],Y=n[6],ye=n[7],Ce=n[8];return t[0]=p*i+m*s+b*l,t[1]=p*r+m*a+b*d,t[2]=p*o+m*c+b*h,t[3]=T*i+D*s+U*l,t[4]=T*r+D*a+U*d,t[5]=T*o+D*c+U*h,t[6]=Y*i+ye*s+Ce*l,t[7]=Y*r+ye*a+Ce*d,t[8]=Y*o+ye*c+Ce*h,t}function M6(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function I6(){var t=new Ks(4);return Ks!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function D6(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function R6(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1],l=n[2],d=n[3];return t[0]=i*d+s*a+r*l-o*c,t[1]=r*d+s*c+o*a-i*l,t[2]=o*d+s*l+i*c-r*a,t[3]=s*d-i*a-r*c-o*l,t}var k6=eV,cme=function(){var t=WU(),e=$U(1,0,0),n=$U(0,1,0);return function(i,r,o){var s=YU(r,o);return s<-.999999?(cE(t,e,r),function Rre(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&cE(t,n,r),function Pre(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),D6(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(cE(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,function gce(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s,t}(i,i))}}();I6(),I6(),function zpe(){var t=new Ks(9);Ks!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const lme=[0,0,0,1];class V0 extends aE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function O6(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,t[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return D6(this,e,n),this.check()}identity(){return function Kpe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ui(e)}get y(){return this[1]}set y(e){this[1]=ui(e)}get z(){return this[2]}set z(e){this[2]=ui(e)}get w(){return this[3]}set w(e){this[3]=ui(e)}len(){return function pce(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function mce(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function _ce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return cme(this,e,n),this.check()}add(e){return function fce(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function Qpe(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function ime(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function nme(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function bce(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return R6(this,this,e),this.check()}multiplyLeft(e){return R6(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function qpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+s*a,t[1]=r*c+o*a,t[2]=o*c-r*a,t[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function Jpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-o*a,t[1]=r*c+s*a,t[2]=o*c+i*a,t[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function Zpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=o*c+s*a,t[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return k6(this,this,e),this.check()}slerp(e,n,i){let r,o,s;switch(arguments.length){case 1:({start:r=lme,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=n;break;default:r=e,o=n,s=i}return function JE(t,e,n,i){var p,m,b,T,D,r=e[0],o=e[1],s=e[2],a=e[3],c=n[0],l=n[1],d=n[2],h=n[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>fl?(p=Math.acos(m),b=Math.sin(p),T=Math.sin((1-i)*p)/b,D=Math.sin(i*p)/b):(T=1-i,D=i),t[0]=T*r+D*c,t[1]=T*o+D*l,t[2]=T*s+D*d,t[3]=T*a+D*h,t}(this,r,o,s),this.check()}transformVector4(e,n=new jR){return function yce(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2],l=n[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,m=-s*i-a*r-c*o;t[0]=d*l+m*-s+h*-c-p*-a,t[1]=h*l+m*-a+p*-s-d*-c,t[2]=p*l+m*-c+d*-a-h*-s,t[3]=e[3]}(n,e,this),_0(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const dme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ume={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function F6(t){if(!t._animation){const e=ume[t.componentType],n=dme[t.type],i=n*t.count,{buffer:r,byteOffset:o}=t.bufferView.data,s=new e(r,o+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=n)a.push(Array.from(s.slice(c,c+n)));t._animation=a}}return t._animation}const hme=new $n,UR=new V0;class bme{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function _me(t,e,n,i){let{input:r,interpolation:o,output:s}=e;const c=t%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:un.warn("Bad animation path ".concat(i))()}Yt(n[i].length===s[d].length);const h=r[d],p=r[l];switch(o){case"STEP":!function gme(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,s[d]);break;case"LINEAR":p>h&&function pme(t,e,n,i,r){if("rotation"===e){UR.slerp({start:n,target:i,ratio:r});for(let o=0;o<UR.length;o++)t[e][o]=UR[o]}else for(let o=0;o<n.length;o++)t[e][o]=r*i[o]+(1-r)*n[o]}(n,i,s[d],s[l],(c-h)/(p-h));break;case"CUBICSPLINE":p>h&&function mme(t,e,n){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const d=r[l]*a,h=o[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:p-h,ratio:(c-h)/(p-h)});break;default:un.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function fme(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=hme.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(s,s._node)})}}class yme{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),o=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:F6(e.accessors[c]),interpolation:l,output:F6(e.accessors[d])}}),s=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new bme({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class vme extends qm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof Lm?(this.model=e,this._setModelNodeProps(n)):this.model=new Lm(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class xme{constructor(e,n){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},SI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new Ts(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(un.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function L6(t,e){return di(t)?"#version 300 es\n".concat(e):e}const Sme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Cme={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Tme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},Cme,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new yme(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new U0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new U0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new $n).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new U0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){un.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function Ame(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new xme(t,e);un.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new vme(t,Object.assign({id:n,drawMode:i,vertexCount:r,modules:[C6],defines:a.defines,parameters:a.parameters,vs:L6(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:L6(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},s));return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),un.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Gi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new Xs({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Sme[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var z0=C(9125);const Rme="3.4.11",VR={};function _f(t){return zR.apply(this,arguments)}function zR(){return zR=jt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&(t=function Ome(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:bl?n.CDN?(gl(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Rme,"/dist/libs/").concat(t)):RD?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),VR[t]=VR[t]||function kme(t){return HR.apply(this,arguments)}(t),yield VR[t]}),zR.apply(this,arguments)}function HR(){return HR=jt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!bl)try{return z0&&z0.requireFromFile&&(yield z0.requireFromFile(t))}catch{return null}return RD?importScripts(t):function Pme(t,e){if(!bl)return z0.requireFromString&&z0.requireFromString(t,e);if(RD)return eval.call(ode,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),HR.apply(this,arguments)}const Nme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.wasm"),Fme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.js");let GR,YR;function j6(t){return WR.apply(this,arguments)}function WR(){return WR=jt(function*(t){const e=t.modules||{};return e.basis?e.basis:(GR=GR||function Lme(t){return $R.apply(this,arguments)}(t),yield GR)}),WR.apply(this,arguments)}function $R(){return $R=jt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield _f("basis_transcoder.js","textures",t),yield _f("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function Bme(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,n)}),$R.apply(this,arguments)}function U6(t){return XR.apply(this,arguments)}function XR(){return XR=jt(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(YR=YR||function jme(t){return KR.apply(this,arguments)}(t),yield YR)}),XR.apply(this,arguments)}function KR(){return KR=jt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield _f(Fme,"textures",t),yield _f(Nme,"textures",t)]),e=e||globalThis.BASIS,yield function Ume(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,n)}),KR.apply(this,arguments)}const Vme=["","WEBKIT_","MOZ_"],V6={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let ZE=null;var qR,QE,JR,e1,H6,ZR,G6,W6;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(qR||(qR={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(QE||(QE={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(JR||(JR={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(e1||(e1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(H6||(H6={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(ZR||(ZR={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(G6||(G6={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(W6||(W6={}));const xa=[171,75,84,88,32,50,48,187,13,10,26,10],Yme={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function e2(){return e2=jt(function*(t,e){if("auto"===e.basis.containerFormat){if(function $me(t){const e=new Uint8Array(t);return!(e.byteLength<xa.length||e[0]!==xa[0]||e[1]!==xa[1]||e[2]!==xa[2]||e[3]!==xa[3]||e[4]!==xa[4]||e[5]!==xa[5]||e[6]!==xa[6]||e[7]!==xa[7]||e[8]!==xa[8]||e[9]!==xa[9]||e[10]!==xa[10]||e[11]!==xa[11])}(t))return X6((yield U6(e)).KTX2File,t,e);const{BasisFile:n}=yield j6(e);return t2(n,t,e)}if("encoder"===e.basis.module){const n=yield U6(e);return"ktx2"===e.basis.containerFormat?X6(n.KTX2File,t,e):t2(n.BasisFile,t,e)}{const{BasisFile:i}=yield j6(e);return t2(i,t,e)}}),e2.apply(this,arguments)}function t2(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(Kme(i,s,l,n));o.push(c)}return o}finally{i.close(),i.delete()}}function Kme(t,e,n,i){const r=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=K6(i,s),d=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(d);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function X6(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(qme(i,s,n));break}return[o]}finally{i.close(),i.delete()}}function qme(t,e,n){const{alphaFlag:i,height:r,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=K6(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,levelSize:l,hasAlpha:i,format:a}}function K6(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=q6()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),Yme[n]}function q6(){const t=function zme(t){if(!ZE){t=t||function Hme(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,ZE=new Set;for(const e of Vme)for(const n in V6)t&&t.getExtension("".concat(e).concat(n))&&ZE.add(V6[n])}return ZE}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const Jme={name:"Basis",id:bl?"basis":"basis-nodejs",module:"textures",version:"3.4.11",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function Xme(t,e){return e2.apply(this,arguments)}};function J6(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function wa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function Z6(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function G0(t,e){return hd(t>=0),hd(e>0),t+(e-1)&~(e-1)}function ege(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+G0(i.byteLength,4)}const e5=["SCALAR","VEC2","VEC3","VEC4"],tge=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],nge=new Map(tge),ige={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rge={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},oge={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function t5(t){return e5[t-1]||e5[0]}function n5(t){const e=nge.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function n2(t,e){const n=oge[t.componentType],i=ige[t.type],o=t.count*i,s=t.count*i*rge[t.componentType];return wa(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}const sge={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class qs{constructor(e){ve(this,"gltf",void 0),ve(this,"sourceBuffers",void 0),ve(this,"byteLength",void 0),this.gltf=e||{json:{...sge},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return wa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:o,length:s}=n2(e,n);return new o(r,n.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=yR(e),r=n||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const n=e.byteLength;wa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=G0(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:t5(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const o={size:n.size,componentType:n5(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=ege(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);n[o]=s}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const o of r)i.min.push(o),i.max.push(o);for(let o=n;o<e.length;o+=n)for(let s=0;s<n;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const cge="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",lge="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",dge=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),uge=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),r5={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},hge={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function a2(){return a2=jt(function*(t,e,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=yield function n1(){return l2.apply(this,arguments)}();!function r1(t,e,n,i,r,o,s){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(t.exports.memory.buffer);h.set(o,d);const p=e(l,i,r,d,o.length);if(0===p&&s&&s(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}(s,s.exports[hge[r]],t,e,n,i,s.exports[r5[o||"NONE"]])}),a2.apply(this,arguments)}let c2;function l2(){return l2=jt(function*(){return c2||(c2=function pge(){return d2.apply(this,arguments)}()),c2}),l2.apply(this,arguments)}function d2(){return d2=jt(function*(){let t=cge;WebAssembly.validate(dge)&&(t=lge,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function mge(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?uge[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),d2.apply(this,arguments)}const u2="EXT_meshopt_compression",gge=u2;function _ge(t,e){return h2.apply(this,arguments)}function h2(){return h2=jt(function*(t,e){var n;const i=new qs(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const o of t.json.bufferViews||[])r.push(bge(i,o));yield Promise.all(r),i.removeExtension(u2)}),h2.apply(this,arguments)}function bge(t,e){return f2.apply(this,arguments)}function f2(){return f2=jt(function*(t,e){const n=t.getObjectExtension(e,u2);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=n,d=t.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),p=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function fge(t,e,n,i,r){return a2.apply(this,arguments)}(p,s,o,h,a,c),p}return null}),f2.apply(this,arguments)}const m2={};function vge(t){if(void 0===m2[t]){const e=LE?function xge(t){switch(t){case"image/avif":case"image/webp":return function Age(t){try{return 0===document.createElement("canvas").toDataURL(t).indexOf("data:".concat(t))}catch{return!1}}(t);default:return!0}}(t):function s5(t){const e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:i=e}=globalThis;return!!n&&i.includes(t)}(t);m2[t]=e}return m2[t]}const Zm="EXT_texture_webp",Cge=Zm;function Tge(t,e){const n=new qs(t);if(!vge("image/webp")){if(n.getRequiredExtensions().includes(Zm))throw new Error("gltf: Required extension ".concat(Zm," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,Zm);o&&(r.source=o.source),n.removeObjectExtension(r,Zm)}n.removeExtension(Zm)}const o1="KHR_texture_basisu",Mge=o1;function Ige(t,e){const n=new qs(t),{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,o1);o&&(r.source=o.source),n.removeObjectExtension(r,o1)}n.removeExtension(o1)}const c5={name:"Draco",id:bl?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.4.11",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class s1{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"nullable",void 0),ve(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new s1(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let l5,d5,u5,h5,f5,p5,m5,g5,sr=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});class bf{static isNull(e){return e&&e.typeId===sr.Null}static isInt(e){return e&&e.typeId===sr.Int}static isFloat(e){return e&&e.typeId===sr.Float}static isBinary(e){return e&&e.typeId===sr.Binary}static isUtf8(e){return e&&e.typeId===sr.Utf8}static isBool(e){return e&&e.typeId===sr.Bool}static isDecimal(e){return e&&e.typeId===sr.Decimal}static isDate(e){return e&&e.typeId===sr.Date}static isTime(e){return e&&e.typeId===sr.Time}static isTimestamp(e){return e&&e.typeId===sr.Timestamp}static isInterval(e){return e&&e.typeId===sr.Interval}static isList(e){return e&&e.typeId===sr.List}static isStruct(e){return e&&e.typeId===sr.Struct}static isUnion(e){return e&&e.typeId===sr.Union}static isFixedSizeBinary(e){return e&&e.typeId===sr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===sr.FixedSizeList}static isMap(e){return e&&e.typeId===sr.Map}static isDictionary(e){return e&&e.typeId===sr.Dictionary}get typeId(){return sr.NONE}compareTo(e){return this===e}}Symbol,Symbol,l5=Symbol.toStringTag;class Qm extends bf{constructor(e,n){super(),ve(this,"isSigned",void 0),ve(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return sr.Int}get[l5](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class Dge extends Qm{constructor(){super(!0,8)}}class Rge extends Qm{constructor(){super(!0,16)}}class Oge extends Qm{constructor(){super(!0,32)}}class kge extends Qm{constructor(){super(!1,8)}}class Pge extends Qm{constructor(){super(!1,16)}}class Nge extends Qm{constructor(){super(!1,32)}}d5=Symbol.toStringTag;class _5 extends bf{constructor(e){super(),ve(this,"precision",void 0),this.precision=e}get typeId(){return sr.Float}get[d5](){return"Float"}toString(){return"Float".concat(this.precision)}}class Fge extends _5{constructor(){super(32)}}class Lge extends _5{constructor(){super(64)}}Symbol,Symbol,u5=Symbol.toStringTag,h5=Symbol.toStringTag,f5=Symbol.toStringTag,p5=Symbol.toStringTag,m5=Symbol.toStringTag;class Bge extends bf{constructor(e,n){super(),ve(this,"listSize",void 0),ve(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return sr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[m5](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}g5=Symbol.toStringTag;class eg{constructor(e,n){ve(this,"fields",void 0),ve(this,"metadata",void 0),function zge(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function Hge(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){const e=Object.create(null);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(const s of i)e[s]=!0;const o=this.fields.filter(s=>e[s.name]);return new eg(o,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.map(o=>this.fields[o]).filter(Boolean);return new eg(r,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof eg){const s=e;n=s.fields,i=y5(y5(new Map,this.metadata),s.metadata)}else n=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of n)r[s.name]=s;const o=Object.values(r);return new eg(o,i)}}function y5(t,e){return new Map([...t||new Map,...e||new Map])}function v5(t,e,n){return function b5(t,e,n){const i=function jge(t){switch(t.constructor){case Int8Array:return new Dge;case Uint8Array:return new kge;case Int16Array:return new Rge;case Uint16Array:return new Pge;case Int32Array:return new Oge;case Uint32Array:return new Nge;case Float32Array:return new Fge;case Float64Array:return new Lge;default:throw new Error("array type not supported")}}(e.value),r=n||function Vge(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new s1(t,new Bge(e.size,new s1("value",i)),!1,r)}(t,e,n?x5(n.metadata):void 0)}function x5(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const w5={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},$ge={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Xge{constructor(e){ve(this,"draco",void 0),ve(this,"decoder",void 0),ve(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const p="DRACO decompression failed: ".concat(s.error_msg());throw new Error(p)}const a=this._getDracoLoaderData(o,r,n),c=this._getMeshData(o,a,n),l=E6(c.attributes),d=function Gge(t,e,n){const i=x5(e.metadata),r=[],o=function Wge(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in t){const c=v5(s,t[s],o[s]);r.push(c)}if(n){const s=v5("indices",n);r.push(s)}return new eg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,n);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,n);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(n,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function Jge(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=$ge[n.data_type],r=n.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function Kge(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[s,a]of Object.entries(n.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in w5)if(this.draco[s]===r)return w5[s];const o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function qge(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const x2="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),e_e="".concat(x2,"/draco_decoder.js"),t_e="".concat(x2,"/draco_wasm_wrapper.js"),n_e="".concat(x2,"/draco_decoder.wasm");let W0;function w2(){return w2=jt(function*(t){const e=t.modules||{};return W0=e.draco3d?W0||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):W0||function o_e(t){return A2.apply(this,arguments)}(t),yield W0}),w2.apply(this,arguments)}function A2(){return A2=jt(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield _f(e_e,"draco",t):[e,n]=yield Promise.all([yield _f(t_e,"draco",t),yield _f(n_e,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function s_e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),A2.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");const C2={...c5,parse:function c_e(t,e){return T2.apply(this,arguments)}};function T2(){return T2=jt(function*(t,e){const{draco:n}=yield function r_e(t){return w2.apply(this,arguments)}(e),i=new Xge(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),T2.apply(this,arguments)}function E5(t){const{buffer:e,size:n,count:i}=function d_e(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function u_e(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:t5(n),componentType:n5(e)}}const yf="KHR_draco_mesh_compression",h_e=yf;function f_e(t,e,n){const i=new qs(t);for(const r of A5(i))i.getObjectExtension(r,yf)}function p_e(t,e,n){return M2.apply(this,arguments)}function M2(){return M2=jt(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new qs(t),o=[];for(const s of A5(r))r.getObjectExtension(s,yf)&&o.push(g_e(r,s,e,n));yield Promise.all(o),r.removeExtension(yf)}),M2.apply(this,arguments)}function m_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new qs(t);for(const i of n.json.meshes||[])__e(i,e),n.addRequiredExtension(yf)}function g_e(t,e,n,i){return I2.apply(this,arguments)}function I2(){return I2=jt(function*(t,e,n,i){const r=t.getObjectExtension(e,yf);if(!r)return;const o=t.getTypedArrayForBufferView(r.bufferView),s=JV(o.buffer,o.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(s,C2,c,i),d=function l_e(t){const e={};for(const n in t)if("indices"!==n){const r=E5(t[n]);e[n]=r}return e}(l.attributes);for(const[h,p]of Object.entries(d))if(h in e.attributes){const b=t.getAccessor(e.attributes[h]);null!=b&&b.min&&null!=b&&b.max&&(p.min=b.min,p.max=b.max)}e.attributes=d,l.indices&&(e.indices=E5(l.indices)),function b_e(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),I2.apply(this,arguments)}function __e(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=r.DracoWriter.encodeSync({attributes:t}),a=null==o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:t}),c=r._addFauxAttributes(a.attributes),l=r.addBufferView(s);return{primitives:[{attributes:c,mode:i,extensions:{[yf]:{bufferView:l,attributes:c}}}]}}function*A5(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}var S5=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2",t}(S5||{});const y_e=Object.freeze([1,0,0,0,1,0,0,0,1]);class jo extends oV{static get IDENTITY(){return function x_e(){return c1||(c1=new jo,Object.freeze(c1)),c1}()}static get ZERO(){return function v_e(){return a1||(a1=new jo([0,0,0,0,0,0,0,0,0]),Object.freeze(a1)),a1}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return S5}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(y_e)}fromObject(e){return this.check()}fromQuaternion(e){return function Xpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,m=r*a,b=r*c,T=o*s,D=o*a,U=o*c;t[0]=1-h-b,t[3]=d-U,t[6]=p+D,t[1]=d+U,t[4]=1-l-b,t[7]=m-T,t[2]=p-D,t[5]=m+T,t[8]=1-l-h}(this,e),this.check()}set(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function Wpe(t){var r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*o-s*c)+t[1]*(-l*r+s*a)+t[2]*(c*r-o*a)}(this)}transpose(){return function Hpe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function Gpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,p=-d*o+a*c,m=l*o-s*c,b=n*h+i*p+r*m;b&&(t[0]=h*(b=1/b),t[1]=(-d*i+r*l)*b,t[2]=(a*i-r*s)*b,t[3]=p*b,t[4]=(d*n-r*c)*b,t[5]=(-a*n+r*o)*b,t[6]=m*b,t[7]=(-l*n+i*c)*b,t[8]=(s*n-i*o)*b)}(this,this),this.check()}multiplyLeft(e){return T6(this,e,this),this.check()}multiplyRight(e){return T6(this,this,e),this.check()}rotate(e){return function Ype(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=Math.sin(n),m=Math.cos(n);t[0]=m*i+p*s,t[1]=m*r+p*a,t[2]=m*o+p*c,t[3]=m*s-p*i,t[4]=m*a-p*r,t[5]=m*c-p*o,t[6]=l,t[7]=d,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?M6(this,this,e):M6(this,this,[e,e]),this.check()}translate(e){return function $pe(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1];t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=p*i+m*s+l,t[7]=p*r+m*a+d,t[8]=p*o+m*c+h}(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=function Ice(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:i=XU(n||[-0,-0,-0],e,this);break;case 4:i=JU(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _0(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let a1,c1;const C5={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},T5={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},D2="KHR_texture_transform",w_e=D2,l1=new nn,E_e=new jo,A_e=new jo;function S_e(t,e){return R2.apply(this,arguments)}function R2(){return R2=jt(function*(t,e){if(!new qs(t).getExtension(D2))return;const r=t.json.materials||[];for(let o=0;o<r.length;o++)C_e(o,t)}),R2.apply(this,arguments)}function C_e(t,e){var n,i,r;const o=[],s=null===(n=e.json.materials)||void 0===n?void 0:n[t],a=null==s||null===(i=s.pbrMetallicRoughness)||void 0===i?void 0:i.baseColorTexture;a&&Y0(e,t,a,o);const c=s?.emissiveTexture;c&&Y0(e,t,c,o);const l=s?.normalTexture;l&&Y0(e,t,l,o);const d=s?.occlusionTexture;d&&Y0(e,t,d,o);const h=null==s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.metallicRoughnessTexture;h&&Y0(e,t,h,o)}function Y0(t,e,n,i){const r=function T_e(t,e){var n;const i=null===(n=t.extensions)||void 0===n?void 0:n[D2],{texCoord:r=0}=t,{texCoord:o=r}=i;if(-1===e.findIndex(a=>{let[c,l]=a;return c===r&&l===o})){const a=function R_e(t){const{offset:e=[0,0],rotation:n=0,scale:i=[1,1]}=t,r=(new jo).set(1,0,0,0,1,0,e[0],e[1],1),o=E_e.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=A_e.set(i[0],0,0,0,i[1],0,0,0,1);return r.multiplyRight(o).multiplyRight(s)}(i);return r!==o&&(t.texCoord=o),e.push([r,o]),{originalTexCoord:r,texCoord:o,matrix:a}}return null}(n,i);if(!r)return;const o=t.json.meshes||[];for(const s of o)for(const a of s.primitives){const c=a.material;Number.isFinite(c)&&e===c&&M_e(t,a,r)}}function M_e(t,e,n){const{originalTexCoord:i,texCoord:r,matrix:o}=n,s=e.attributes["TEXCOORD_".concat(i)];if(Number.isFinite(s)){var a;const l=null===(a=t.json.accessors)||void 0===a?void 0:a[s];if(l&&l.bufferView){var c;const d=null===(c=t.json.bufferViews)||void 0===c?void 0:c[l.bufferView];if(d){const{arrayBuffer:h,byteOffset:p}=t.buffers[d.buffer],m=(p||0)+(l.byteOffset||0)+(d.byteOffset||0),{ArrayType:b,length:T}=n2(l,d),U=C5[l.type],Y=d.byteStride||T5[l.componentType]*U,ye=new Float32Array(T);for(let Ce=0;Ce<l.count;Ce++){const je=new b(h,m+Ce*Y,2);l1.set(je[0],je[1],1),l1.transformByMatrix3(o),ye.set([l1[0],l1[1]],Ce*U)}i===r?function I_e(t,e,n,i){t.componentType=5126,n.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=i.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(l,d,t.buffers,ye):function D_e(t,e,n,i,r){i.buffers.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength});const o=i.json.bufferViews;if(!o)return;o.push({buffer:i.buffers.length-1,byteLength:r.buffer.byteLength,byteOffset:0});const s=i.json.accessors;s&&(s.push({bufferView:o?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=s.length-1)}(r,l,e,t,ye)}}}}const vf="KHR_lights_punctual",O_e=vf;function k_e(t){return O2.apply(this,arguments)}function O2(){return O2=jt(function*(t){const e=new qs(t),{json:n}=e,i=e.getExtension(vf);i&&(e.json.lights=i.lights,e.removeExtension(vf));for(const r of n.nodes||[]){const o=e.getObjectExtension(r,vf);o&&(r.light=o.light),e.removeObjectExtension(r,vf)}}),O2.apply(this,arguments)}function P_e(t){return k2.apply(this,arguments)}function k2(){return k2=jt(function*(t){const e=new qs(t),{json:n}=e;if(n.lights){const i=e.addExtension(vf);wa(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,vf,i);delete e.json.lights}}),k2.apply(this,arguments)}const X0="KHR_materials_unlit",N_e=X0;function F_e(t){return P2.apply(this,arguments)}function P2(){return P2=jt(function*(t){const e=new qs(t),{json:n}=e;for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,X0);e.removeExtension(X0)}),P2.apply(this,arguments)}function L_e(t){const e=new qs(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,X0,{}),e.addExtension(X0))}const K0="KHR_techniques_webgl",B_e=K0;function j_e(t){return N2.apply(this,arguments)}function N2(){return N2=jt(function*(t){const e=new qs(t),{json:n}=e,i=e.getExtension(K0);if(i){const r=function V_e(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),n.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=n[s.program]}),r}(i,e);for(const o of n.materials||[]){const s=e.getObjectExtension(o,K0);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=z_e(o.technique,e)),e.removeObjectExtension(o,K0)}e.removeExtension(K0)}}),N2.apply(this,arguments)}function U_e(t,e){return F2.apply(this,arguments)}function F2(){return(F2=jt(function*(t,e){})).apply(this,arguments)}function z_e(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const M5="EXT_feature_metadata",H_e=M5;function G_e(t){return L2.apply(this,arguments)}function L2(){return L2=jt(function*(t){!function W_e(t){var e;const n=t.getExtension(M5),i=null==n||null===(e=n.schema)||void 0===e?void 0:e.classes,r=n?.featureTables;if(n?.featureTextures&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),i&&r)for(const s in i){const a=i[s],c=X_e(r,s);c&&$_e(t,c,a)}}(new qs(t))}),L2.apply(this,arguments)}function $_e(t,e,n){for(const r in n.properties){var i;const s=null==e||null===(i=e.properties)||void 0===i?void 0:i[r];if(s){const c=Y_e(t,n.properties[r],e.count,s);s.data=c}}}function Y_e(t,e,n,i){let o=t.getTypedArrayForBufferView(i.bufferView);if("STRING"===e.type)o=function K_e(t,e,n){const i=[],r=new TextDecoder("utf8");let o=0;for(let a=0;a<n;a++){const c=e[4*(a+1)]-e[4*a],l=t.subarray(o,c+o),d=r.decode(l);i.push(d),o+=c}return i}(o,t.getTypedArrayForBufferView(i.stringOffsetBufferView),n);return o}function X_e(t,e){for(const n in t){const i=t[n];if(i.class===e)return i}return null}const I5=[J,A,te,B,g,w,N,ee,G];function B2(){return B2=jt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=I5.filter(o=>D5(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,t,e,n)}}),B2.apply(this,arguments)}function D5(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const j2="KHR_binary_glTF",R5={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Q_e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class ebe{constructor(){ve(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),ve(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function Z_e(t){const e=new qs(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,j2);r&&Object.assign(i,r),e.removeObjectExtension(i,j2)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(j2)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in R5)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[n].length;e[n].push(o),this.idToIndexMap[n][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const n in R5)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:o}=n;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,n){const i=Q_e[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const o of e.materials){var n,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(n=o.values)||void 0===n?void 0:n.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const nbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ibe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},rbe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},obe={10240:9729,10241:9986,10242:10497,10243:10497};class cbe{constructor(){ve(this,"baseUri",""),ve(this,"json",{}),ve(this,"buffers",[]),ve(this,"images",[])}postProcess(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return wa(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function sbe(t){return ibe[t]}(e.componentType),e.components=function abe(t){return nbe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=n2(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=n+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):obe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return rbe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const O5=1735152710,U2=12,d1=8,dbe=1313821514,ube=5130562,hbe=0,fbe=1,pbe=0,tg=!0;function V2(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),s=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(s),G0(i,4)}function z2(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),G0(i,4)}function H2(){return H2=jt(function*(t,e){var n,i,r,o;let a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;(function wbe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function gbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new DataView(t),{magic:r=O5}=n,o=i.getUint32(e,!1);return o===r||o===O5}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function Qme(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Zme(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?J6(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?J6(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};n=function _be(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=new DataView(e),o=function mbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),s=r.getUint32(n+4,tg),a=r.getUint32(n+8,tg);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=U2,t.version){case 1:return function bbe(t,e,n){hd(t.header.byteLength>U2+d1);const i=e.getUint32(n+0,tg),r=e.getUint32(n+4,tg);return n+=d1,hd(r===pbe),V2(t,e,n,i),(n+=i)+z2(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function ybe(t,e,n,i){return hd(t.header.byteLength>U2+d1),function vbe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,tg),o=e.getUint32(n+4,tg);switch(n+=d1,o){case dbe:V2(t,e,n,r);break;case ube:z2(t,e,n,r);break;case hbe:i.strict||V2(t,e,n,r);break;case fbe:i.strict||z2(t,e,n,r)}n+=G0(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,i={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(s,e,n,i.glb),wa("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),t._glb=s,t.json=s.json}else wa(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a),function tbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new ebe).normalize(t,e)}(t,{normalize:null==a||null===(n=a.gltf)||void 0===n?void 0:n.normalize}),function q_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=I5.filter(o=>D5(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,t,e,n)}}(t,a,c);const l=[];if(null!=a&&null!==(i=a.gltf)&&void 0!==i&&i.loadBuffers&&t.json.buffers&&(yield function Ebe(t,e,n){return G2.apply(this,arguments)}(t,a,c)),null!=a&&null!==(r=a.gltf)&&void 0!==r&&r.loadImages){const h=function Abe(t,e,n){return W2.apply(this,arguments)}(t,a,c);l.push(h)}const d=function J_e(t){return B2.apply(this,arguments)}(t,a,c);return l.push(d),yield Promise.all(l),null!=a&&null!==(o=a.gltf)&&void 0!==o&&o.postProcess?function lbe(t,e){return(new cbe).postProcess(t,e)}(t,a):t}),H2.apply(this,arguments)}function G2(){return G2=jt(function*(t,e,n){const i=t.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=n;wa(c);const l=Z6(a.uri,e),d=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);t.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[s]&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),G2.apply(this,arguments)}function W2(){return W2=jt(function*(t,e,n){const i=function Sbe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],o=[];for(const s of i)o.push(Cbe(t,r[s],s,e,n));return yield Promise.all(o)}),W2.apply(this,arguments)}function Cbe(t,e,n,i,r){return $2.apply(this,arguments)}function $2(){return $2=jt(function*(t,e,n,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=Z6(e.uri,i);a=yield(yield o(l)).arrayBuffer(),e.bufferView={data:a}}if(Number.isFinite(e.bufferView)){const l=function Q6(t,e,n){const i=t.bufferViews[n];wa(i);const o=e[i.buffer];return wa(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=JV(l.buffer,l.byteOffset,l.byteLength)}wa(a,"glTF image has no data");let c=yield s(a,[k8,Jme],{mimeType:e.mimeType,basis:i.basis||{format:q6()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),$2.apply(this,arguments)}const ng={name:"glTF",id:"gltf",module:"gltf",version:"3.4.11",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function Tbe(t){return Y2.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Y2(){return Y2=jt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={...ng.options,...e},e.gltf={...ng.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function xbe(t,e){return H2.apply(this,arguments)}({},t,i,e,n)}),Y2.apply(this,arguments)}function X2(){return X2=jt(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Ibe(t){return K2.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),X2.apply(this,arguments)}function K2(){return K2=jt(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),K2.apply(this,arguments)}const k5=[255,255,255,255],Obe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:k5},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[ng]};class q2 extends pf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=[$E,YE];return"pbr"===this.props._lighting&&e.push(C6),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:k5,transition:!0},instanceModelMatrix:x6})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof qm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function Mme(t,e,n){const i=new Tme(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function Mbe(t){return X2.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(mi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof qm?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&mi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):mi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):mi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof qm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!di(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:p})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:w6(r,l),sceneModelMatrix:p,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}ve(q2,"defaultProps",Obe),ve(q2,"layerName","ScenegraphLayer");class kbe extends ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ys("sphere-geometry")}=e,{indices:i,attributes:r}=function Pbe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(n+1);if("number"==typeof i){const U=i;i=(Y,ye,Ce,je,qe)=>U}const h=new Float32Array(3*d),p=new Float32Array(3*d),m=new Float32Array(2*d),T=new(d>65535?Uint32Array:Uint16Array)(e*n*6);for(let U=0;U<=e;U++)for(let Y=0;Y<=n;Y++){const ye=Y/n,Ce=U/e,je=Y+U*(n+1),qe=2*je,at=3*je,pt=l*ye,ht=s*Ce,_t=Math.sin(pt),yt=Math.cos(pt),Ot=Math.sin(ht),xt=yt*Ot,Pt=Math.cos(ht),kt=_t*Ot,En=i(xt,Pt,kt,ye,Ce);h[at+0]=En*xt,h[at+1]=En*Pt,h[at+2]=En*kt,p[at+0]=xt,p[at+1]=Pt,p[at+2]=kt,m[qe+0]=ye,m[qe+1]=1-Ce}const D=n+1;for(let U=0;U<n;U++)for(let Y=0;Y<e;Y++){const ye=6*(U*e+Y);T[ye+0]=Y*D+U,T[ye+1]=Y*D+U+1,T[ye+2]=(Y+1)*D+U,T[ye+3]=(Y+1)*D+U,T[ye+4]=Y*D+U+1,T[ye+5]=(Y+1)*D+U+1}return{indices:{size:1,value:T},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const Nbe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class P5 extends ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ys("truncated-code-geometry")}=e,{indices:i,attributes:r}=function Fbe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-n,i),p=Math.sin,m=Math.cos,b=Math.PI,T=m(h),D=p(h),U=a?-2:0,Y=o+(c?2:0),ye=r+1,Ce=new Uint16Array(r*(o+l)*6),je=Nbe[s],qe=new Float32Array(3*d),at=new Float32Array(3*d),pt=new Float32Array(2*d);let ht=0,_t=0;for(let yt=U;yt<=Y;yt++){let xt,Ot=yt/o,ut=i*Ot;yt<0?(ut=0,Ot=1,xt=e):yt>o?(ut=i,Ot=1,xt=n):xt=e+yt/o*(n-e),(-2===yt||yt===o+2)&&(xt=0,Ot=0),ut-=i/2;for(let Pt=0;Pt<ye;Pt++){const kt=p(Pt*b*2/r),En=m(Pt*b*2/r);qe[ht+je[0]]=kt*xt,qe[ht+je[1]]=ut,qe[ht+je[2]]=En*xt,at[ht+je[0]]=yt<0||yt>o?0:kt*T,at[ht+je[1]]=yt<0?-1:yt>o?1:D,at[ht+je[2]]=yt<0||yt>o?0:En*T,pt[_t+0]=Pt/r,pt[_t+1]=Ot,_t+=2,ht+=3}}for(let yt=0;yt<o+l;yt++)for(let Ot=0;Ot<r;Ot++){const ut=6*(yt*r+Ot);Ce[ut+0]=ye*(yt+0)+0+Ot,Ce[ut+1]=ye*(yt+0)+1+Ot,Ce[ut+2]=ye*(yt+1)+1+Ot,Ce[ut+3]=ye*(yt+0)+0+Ot,Ce[ut+4]=ye*(yt+1)+1+Ot,Ce[ut+5]=ye*(yt+1)+0+Ot}return{indices:Ce,attributes:{POSITION:{size:3,value:qe},NORMAL:{size:3,value:at},TEXCOORD_0:{size:2,value:pt}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class Lbe extends P5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ys("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Bbe extends P5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ys("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const jbe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Ube=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Vbe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),zbe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Hbe={POSITION:{size:3,value:new Float32Array(Ube)},NORMAL:{size:3,value:new Float32Array(Vbe)},TEXCOORD_0:{size:2,value:new Float32Array(zbe)}};class Gbe extends ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ys("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(jbe)},attributes:{...Hbe,...e.attributes}})}}class Tc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new _e);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new _e);const i=this.elements,r=e.x,o=e.y,s=e.z;return n.x=i[0]*r+i[1]*o+i[2]*s,n.y=i[3]*r+i[4]*o+i[5]*s,n.z=i[6]*r+i[7]*o+i[8]*s,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new Tc);const i=this.elements,r=e.elements,o=n.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],p=i[6],m=i[7],b=i[8],T=r[0],D=r[1],U=r[2],Y=r[3],ye=r[4],Ce=r[5],je=r[6],qe=r[7],at=r[8];return o[0]=s*T+a*Y+c*je,o[1]=s*D+a*ye+c*qe,o[2]=s*U+a*Ce+c*at,o[3]=l*T+d*Y+h*je,o[4]=l*D+d*ye+h*qe,o[5]=l*U+d*Ce+h*at,o[6]=p*T+m*Y+b*je,o[7]=p*D+m*ye+b*qe,o[8]=p*U+m*Ce+b*at,n}scale(e,n){void 0===n&&(n=new Tc);const i=this.elements,r=n.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return n}solve(e,n){void 0===n&&(n=new _e);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,p;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{p=4-d,o[p+4*s]+=o[p+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{p=4-d,o[p+4*a]=p<=s?0:o[p+4*a]-o[p+4*s]*m}while(--d)}}while(--c);if(n.z=o[11]/o[10],n.y=(o[7]-o[6]*n.z)/o[5],n.x=(o[3]-o[2]*n.z-o[1]*n.y)/o[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Tc);const r=Wbe;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*p}while(--l)}}while(--a);o=2;do{s=o-1;do{const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*p}while(--l)}while(s--)}while(--o);o=2;do{const p=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*p}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,o=e.w,s=n+n,a=i+i,c=r+r,l=n*s,d=n*a,h=n*c,p=i*a,m=i*c,b=r*c,T=o*s,D=o*a,U=o*c,Y=this.elements;return Y[0]=1-(p+b),Y[1]=d-U,Y[2]=h+D,Y[3]=d+U,Y[4]=1-(l+b),Y[5]=m-T,Y[6]=h-D,Y[7]=m+T,Y[8]=1-(l+p),this}transpose(e){void 0===e&&(e=new Tc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const Wbe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class _e{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new _e);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return n.x=a*o-c*r,n.y=c*i-s*o,n.z=s*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new _e(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new _e(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new Tc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new _e);const n=this.x,i=this.y,r=this.z;let o=Math.sqrt(n*n+i*i+r*r);return o>0?(o=1/o,e.x=n*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new _e);const r=this.y,o=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*o,n}vmul(e,n){return void 0===n&&(n=new _e),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new _e),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new _e),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=$be,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=Ybe;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*n,i.y=o+(e.y-o)*n,i.z=s+(e.z-s)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(N5),N5.almostEquals(e,n)}clone(){return new _e(this.x,this.y,this.z)}}_e.ZERO=new _e(0,0,0),_e.UNIT_X=new _e(1,0,0),_e.UNIT_Y=new _e(0,1,0),_e.UNIT_Z=new _e(0,0,1);const $be=new _e,Ybe=new _e,N5=new _e;class qi{constructor(e){void 0===e&&(e={}),this.lowerBound=new _e,this.upperBound=new _e,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,F5),l=F5),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return n&&(n.vadd(o,o),n.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new qi).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||n.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||n.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||n.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return n.x<=r.x&&i.x>=o.x&&n.y<=r.y&&i.y>=o.y&&n.z<=r.z&&i.z>=o.z}getCorners(e,n,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),n.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,n){const i=L5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToLocal(m,m)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=L5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToWorld(m,m)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,o=1/n.y,s=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,p=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,p)),b=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,p));return!(b<0||m>b)}}const F5=new _e,L5=[new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e];class Xbe{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class Br{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new _e),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=Kbe;e.tangents(i,qbe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Br);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return n.x=i*d+s*a+r*l-o*c,n.y=r*d+s*c+o*a-i*l,n.z=o*d+s*l+i*c-r*a,n.w=s*d-i*a-r*c-o*l,n}inverse(e){void 0===e&&(e=new Br);const n=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(n*n+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new Br),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new _e);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,m=-s*i-a*r-c*o;return n.x=d*l+m*-s+h*-c-p*-a,n.y=h*l+m*-a+p*-s-d*-c,n.z=p*l+m*-c+d*-a-h*-s,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,o;void 0===n&&(n="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new Br(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Br);const r=this.x,o=this.y,s=this.z,a=this.w;let p,m,b,T,D,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(p=Math.acos(m),b=Math.sin(p),T=Math.sin((1-n)*p)/b,D=Math.sin(n*p)/b):(T=1-n,D=n),i.x=T*r+D*c,i.y=T*o+D*l,i.z=T*s+D*d,i.w=T*a+D*h,i}integrate(e,n,i,r){void 0===r&&(r=new Br);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,p=.5*n;return r.x+=p*(o*h+s*d-a*l),r.y+=p*(s*h+a*c-o*d),r.z+=p*(a*h+o*l-s*c),r.w+=p*(-o*c-s*l-a*d),r}}const Kbe=new _e,qbe=new _e,Jbe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let hn=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=Jbe,t})();class Si{constructor(e){void 0===e&&(e={}),this.position=new _e,this.quaternion=new Br,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Si.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Si.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new _e),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new _e),i.vsub(e,r),n.conjugate(j5),j5.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new _e),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new _e),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new _e),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const j5=new Br;class xf extends hn{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:hn.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new _e;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){n[s[c]].vsub(n[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new _e;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];xf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const o=new _e,s=new _e;n.vsub(e,s),i.vsub(n,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,o,s,a,c,l){const d=new _e;let h=-1,p=-Number.MAX_VALUE;for(let b=0;b<i.faces.length;b++){d.copy(i.faceNormals[b]),o.vmult(d,d);const T=d.dot(s);T>p&&(p=T,h=b)}const m=[];for(let b=0;b<i.faces[h].length;b++){const T=i.vertices[i.faces[h][b]],D=new _e;D.copy(T),o.vmult(D,D),r.vadd(D,D),m.push(D)}h>=0&&this.clipFaceAgainstHull(s,e,n,m,a,c,l)}findSeparatingAxis(e,n,i,r,o,s,a,c){const l=new _e,d=new _e,h=new _e,p=new _e,m=new _e,b=new _e;let T=Number.MAX_VALUE;const D=this;if(D.uniqueAxes)for(let U=0;U!==D.uniqueAxes.length;U++){i.vmult(D.uniqueAxes[U],l);const Y=D.testSepAxis(l,e,n,i,r,o);if(!1===Y)return!1;Y<T&&(T=Y,s.copy(l))}else{const U=a?a.length:D.faces.length;for(let Y=0;Y<U;Y++){l.copy(D.faceNormals[a?a[Y]:Y]),i.vmult(l,l);const Ce=D.testSepAxis(l,e,n,i,r,o);if(!1===Ce)return!1;Ce<T&&(T=Ce,s.copy(l))}}if(e.uniqueAxes)for(let U=0;U!==e.uniqueAxes.length;U++){o.vmult(e.uniqueAxes[U],d);const Y=D.testSepAxis(d,e,n,i,r,o);if(!1===Y)return!1;Y<T&&(T=Y,s.copy(d))}else{const U=c?c.length:e.faces.length;for(let Y=0;Y<U;Y++){d.copy(e.faceNormals[c?c[Y]:Y]),o.vmult(d,d);const Ce=D.testSepAxis(d,e,n,i,r,o);if(!1===Ce)return!1;Ce<T&&(T=Ce,s.copy(d))}}for(let U=0;U!==D.uniqueEdges.length;U++){i.vmult(D.uniqueEdges[U],p);for(let Y=0;Y!==e.uniqueEdges.length;Y++)if(o.vmult(e.uniqueEdges[Y],m),p.cross(m,b),!b.almostZero()){b.normalize();const ye=D.testSepAxis(b,e,n,i,r,o);if(!1===ye)return!1;ye<T&&(T=ye,s.copy(b))}}return r.vsub(n,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,n,i,r,o,s){xf.project(this,e,i,r,J2),xf.project(n,e,o,s,Z2);const c=J2[0],l=J2[1],d=Z2[0],h=Z2[1];if(c<h||d<l)return!1;const p=c-h,m=d-l;return p<m?p:m}calculateLocalInertia(e,n){const i=new _e,r=new _e;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*s*2*s+2*a*2*a),n.y=1/12*e*(2*o*2*o+2*a*2*a),n.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,o,s,a){const c=new _e,l=new _e,d=new _e,h=new _e,p=new _e,m=new _e,b=new _e,T=new _e,D=this,Y=r,ye=[];let Ce=-1,je=Number.MAX_VALUE;for(let _t=0;_t<D.faces.length;_t++){c.copy(D.faceNormals[_t]),i.vmult(c,c);const yt=c.dot(e);yt<je&&(je=yt,Ce=_t)}if(Ce<0)return;const qe=D.faces[Ce];qe.connectedFaces=[];for(let _t=0;_t<D.faces.length;_t++)for(let yt=0;yt<D.faces[_t].length;yt++)-1!==qe.indexOf(D.faces[_t][yt])&&_t!==Ce&&-1===qe.connectedFaces.indexOf(_t)&&qe.connectedFaces.push(_t);const at=qe.length;for(let _t=0;_t<at;_t++){const yt=D.vertices[qe[_t]];yt.vsub(D.vertices[qe[(_t+1)%at]],l),d.copy(l),i.vmult(d,d),n.vadd(d,d),h.copy(this.faceNormals[Ce]),i.vmult(h,h),n.vadd(h,h),d.cross(h,p),p.negate(p),m.copy(yt),i.vmult(m,m),n.vadd(m,m);const ut=qe.connectedFaces[_t];b.copy(this.faceNormals[ut]);const xt=this.getPlaneConstantOfFace(ut);T.copy(b),i.vmult(T,T);const Pt=xt-T.dot(n);for(this.clipFaceAgainstPlane(Y,ye,T,Pt);Y.length;)Y.shift();for(;ye.length;)Y.push(ye.shift())}b.copy(this.faceNormals[Ce]);const pt=this.getPlaneConstantOfFace(Ce);T.copy(b),i.vmult(T,T);const ht=pt-T.dot(n);for(let _t=0;_t<Y.length;_t++){let yt=T.dot(Y[_t])+ht;yt<=o&&(console.log(`clamped: depth=${yt} to minDist=${o}`),yt=o),yt<=s&&yt<=1e-6&&a.push({point:Y[_t],normal:T,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let o,s;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new _e;h.copy(l),n.push(h)}else{const h=new _e;c.lerp(l,o/(o-s),h),n.push(h)}else if(s<0){const h=new _e;c.lerp(l,o/(o-s),h),n.push(h),n.push(l)}c=l,o=s}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new _e);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)n.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>n.x&&(n.x=o.x),o.y<e.y?e.y=o.y:o.y>n.y&&(n.y=o.y),o.z<e.z?e.z=o.z:o.z>n.z&&(n.z=o.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new _e);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==n;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const o=this.vertices;let s,a,c,l,d,h,p=new _e;for(let m=0;m<o.length;m++)p.copy(o[m]),n.vmult(p,p),e.vadd(p,p),(void 0===s||p.x<s)&&(s=p.x),(void 0===l||p.x>l)&&(l=p.x),(void 0===a||p.y<a)&&(a=p.y),(void 0===d||p.y>d)&&(d=p.y),(void 0===c||p.z<c)&&(c=p.z),(void 0===h||p.z>h)&&(h=p.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new _e);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let o=0;o<i;o++){const s=r[o];n.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];n.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,s=new _e;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],d=new _e;e.vsub(l,d);const h=c.dot(d),p=new _e;s.vsub(l,p);const m=c.dot(p);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,n,i,r,o){const s=e.vertices.length,a=Qbe;let c=0,l=0;const d=e0e,h=e.vertices;d.setZero(),Si.vectorToLocalFrame(i,r,n,a),Si.pointToLocalFrame(i,r,d,d);const p=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const b=h[m].dot(a);b>c&&(c=b),b<l&&(l=b)}if(l-=p,c-=p,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const J2=[],Z2=[],Qbe=(new _e,new _e),e0e=new _e;class u1 extends hn{constructor(e){super({type:hn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=_e,o=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new xf({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new _e),u1.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let o=0;o!==i.length;o++)n.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)Vu.set(o[s][0],o[s][1],o[s][2]),n.vmult(Vu,Vu),e.vadd(Vu,Vu),i(Vu.x,Vu.y,Vu.z)}calculateWorldAABB(e,n,i,r){const o=this.halfExtents;wl[0].set(o.x,o.y,o.z),wl[1].set(-o.x,o.y,o.z),wl[2].set(-o.x,-o.y,o.z),wl[3].set(-o.x,-o.y,-o.z),wl[4].set(o.x,-o.y,-o.z),wl[5].set(o.x,o.y,-o.z),wl[6].set(-o.x,o.y,-o.z),wl[7].set(o.x,-o.y,o.z);const s=wl[0];n.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=wl[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const Vu=new _e,wl=[new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e];class fn extends Xbe{constructor(e){void 0===e&&(e={}),super(),this.id=fn.idCounter++,this.index=-1,this.world=null,this.vlambda=new _e,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new _e,this.previousPosition=new _e,this.interpolatedPosition=new _e,this.initPosition=new _e,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new _e,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new _e,this.force=new _e;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?fn.STATIC:fn.DYNAMIC,typeof e.type==typeof fn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=fn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new _e,this.quaternion=new Br,this.initQuaternion=new Br,this.previousQuaternion=new Br,this.interpolatedQuaternion=new Br,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new _e,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new _e,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new _e,this.invInertia=new _e,this.invInertiaWorld=new Tc,this.invMassSolve=0,this.invInertiaSolve=new _e,this.invInertiaWorldSolve=new Tc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new _e(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new _e(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new qi,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new _e,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=fn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===fn.SLEEPING&&this.dispatchEvent(fn.wakeupEvent)}sleep(){this.sleepState=fn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===fn.AWAKE&&i<r?(this.sleepState=fn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(fn.sleepyEvent)):n===fn.SLEEPY&&i>r?this.wakeUp():n===fn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(fn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===fn.SLEEPING||this.type===fn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new _e),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new _e),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new _e),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new _e),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new _e,o=new Br;return n&&r.copy(n),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=n[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=t0e,s=n0e,a=this.quaternion,c=this.aabb,l=i0e;for(let d=0;d!==r;d++){const h=e[d];a.vmult(n[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=r0e,r=o0e;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new _e),this.type!==fn.DYNAMIC)return;this.sleepState===fn.SLEEPING&&this.wakeUp();const i=a0e;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new _e),this.type!==fn.DYNAMIC)return;const i=c0e,r=l0e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===fn.DYNAMIC&&(this.sleepState===fn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new _e),this.type!==fn.DYNAMIC)return;this.sleepState===fn.SLEEPING&&this.wakeUp();const i=n,r=d0e;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=u0e;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new _e),this.type!==fn.DYNAMIC)return;const i=h0e,r=f0e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=p0e;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),u1.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new _e;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==fn.DYNAMIC&&this.type!==fn.KINEMATIC||this.sleepState===fn.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*p.x,r.y+=a.y*m*p.y,r.z+=a.z*m*p.z;const b=h.elements,T=this.angularFactor,D=c.x*T.x,U=c.y*T.y,Y=c.z*T.z;o.x+=e*(b[0]*D+b[1]*U+b[2]*Y),o.y+=e*(b[3]*D+b[4]*U+b[5]*Y),o.z+=e*(b[6]*D+b[7]*U+b[8]*Y),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}fn.idCounter=0,fn.COLLIDE_EVENT_NAME="collide",fn.DYNAMIC=1,fn.STATIC=2,fn.KINEMATIC=4,fn.AWAKE=0,fn.SLEEPY=1,fn.SLEEPING=2,fn.wakeupEvent={type:"wakeup"},fn.sleepyEvent={type:"sleepy"},fn.sleepEvent={type:"sleep"};const t0e=new _e,n0e=new Br,i0e=new qi,r0e=new Tc,o0e=new Tc,a0e=(new Tc,new _e),c0e=new _e,l0e=new _e,d0e=new _e,u0e=new _e,h0e=new _e,f0e=new _e,p0e=new _e;new _e,new _e,new Br,new _e,new _e,new _e,new _e;class q0{constructor(){this.rayFromWorld=new _e,this.rayToWorld=new _e,this.hitNormalWorld=new _e,this.hitPointWorld=new _e,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let U5,V5,z5,H5,G5,W5,$5;U5=hn.types.SPHERE,V5=hn.types.PLANE,z5=hn.types.BOX,H5=hn.types.CYLINDER,G5=hn.types.CONVEXPOLYHEDRON,W5=hn.types.HEIGHTFIELD,$5=hn.types.TRIMESH;class io{get[U5](){return this._intersectSphere}get[V5](){return this._intersectPlane}get[z5](){return this._intersectBox}get[H5](){return this._intersectConvex}get[G5](){return this._intersectConvex}get[W5](){return this._intersectHeightfield}get[$5](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new _e),void 0===n&&(n=new _e),this.from=e.clone(),this.to=n.clone(),this.direction=new _e,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=io.ANY,this.result=new q0,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||io.ANY,this.result=n.result||new q0,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Y5),nO.length=0,e.broadphase.aabbQuery(e,Y5,nO),this.intersectBodies(nO),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=x0e,o=w0e;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function B0e(t,e,n){n.vsub(t,wf);const i=wf.dot(e);return e.scale(i,f1),f1.vadd(t,f1),n.distanceTo(f1)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,o)}_intersectPlane(e,n,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new _e(0,0,1);n.vmult(l,l);const d=new _e;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const b=new _e,T=new _e,D=new _e;s.vsub(i,b);const U=-l.dot(b)/m;c.scale(U,T),s.vadd(T,D),this.reportIntersection(l,D,o,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,o=this.from;n.x=Math.min(r.x,o.x),n.y=Math.min(r.y,o.y),n.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,n,i,r,o){const s=E0e;s.from.copy(this.from),s.to.copy(this.to),Si.pointToLocalFrame(i,n,s.from,s.from),Si.pointToLocalFrame(i,n,s.to,s.to),s.updateDirection();const a=A0e;let c,l,d,h;c=l=0,d=h=e.data.length-1;const p=new qi;s.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let b=l;b<h;b++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,b,p),p.overlapsRay(s)){if(e.getConvexTrianglePillar(m,b,!1),Si.pointToWorldFrame(i,n,e.pillarOffset,h1),this._intersectConvex(e.pillarConvex,n,h1,r,o,X5),this.result.shouldStop)return;e.getConvexTrianglePillar(m,b,!0),Si.pointToWorldFrame(i,n,e.pillarOffset,h1),this._intersectConvex(e.pillarConvex,n,h1,r,o,X5)}}}_intersectSphere(e,n,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),p=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=S0e,b=C0e;if(!(p<0))if(0===p)s.lerp(a,p,m),m.vsub(i,b),b.normalize(),this.reportIntersection(b,m,o,r,-1);else{const T=(-d-Math.sqrt(p))/(2*l),D=(-d+Math.sqrt(p))/(2*l);if(T>=0&&T<=1&&(s.lerp(a,T,m),m.vsub(i,b),b.normalize(),this.reportIntersection(b,m,o,r,-1)),this.result.shouldStop)return;D>=0&&D<=1&&(s.lerp(a,D,m),m.vsub(i,b),b.normalize(),this.reportIntersection(b,m,o,r,-1))}}_intersectConvex(e,n,i,r,o,s){const a=T0e,c=K5,l=s&&s.faceList||null,d=e.faces,h=e.vertices,p=e.faceNormals,m=this.direction,b=this.from,D=b.distanceTo(this.to),U=l?l.length:d.length,Y=this.result;for(let ye=0;!Y.shouldStop&&ye<U;ye++){const Ce=l?l[ye]:ye,je=d[Ce],qe=p[Ce],at=n,pt=i;c.copy(h[je[0]]),at.vmult(c,c),c.vadd(pt,c),c.vsub(b,c),at.vmult(qe,a);const ht=m.dot(a);if(Math.abs(ht)<this.precision)continue;const _t=a.dot(c)/ht;if(!(_t<0)){m.scale(_t,Js),Js.vadd(b,Js),Mc.copy(h[je[0]]),at.vmult(Mc,Mc),pt.vadd(Mc,Mc);for(let yt=1;!Y.shouldStop&&yt<je.length-1;yt++){El.copy(h[je[yt]]),Al.copy(h[je[yt+1]]),at.vmult(El,El),at.vmult(Al,Al),pt.vadd(El,El),pt.vadd(Al,Al);const Ot=Js.distanceTo(b);!io.pointInTriangle(Js,Mc,El,Al)&&!io.pointInTriangle(Js,El,Mc,Al)||Ot>D||this.reportIntersection(a,Js,o,r,Ce)}}}}_intersectTrimesh(e,n,i,r,o,s){const a=D0e,c=F0e,l=L0e,d=K5,h=R0e,p=O0e,m=k0e,b=N0e,T=P0e,D=e.indices,U=this.from,Y=this.to,ye=this.direction;l.position.copy(i),l.quaternion.copy(n),Si.vectorToLocalFrame(i,n,ye,h),Si.pointToLocalFrame(i,n,U,p),Si.pointToLocalFrame(i,n,Y,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,m.vsub(p,h),h.normalize();const Ce=p.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let je=0,qe=c.length;!this.result.shouldStop&&je!==qe;je++){const at=c[je];e.getNormal(at,a),e.getVertex(D[3*at],Mc),Mc.vsub(p,d);const pt=h.dot(a),ht=a.dot(d)/pt;if(ht<0)continue;h.scale(ht,Js),Js.vadd(p,Js),e.getVertex(D[3*at+1],El),e.getVertex(D[3*at+2],Al);const _t=Js.distanceSquared(p);!io.pointInTriangle(Js,El,Mc,Al)&&!io.pointInTriangle(Js,Mc,El,Al)||_t>Ce||(Si.vectorToWorldFrame(n,a,T),Si.pointToWorldFrame(i,n,Js,b),this.reportIntersection(T,b,o,r,at))}c.length=0}reportIntersection(e,n,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case io.ALL:this.hasHit=!0,l.set(s,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case io.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c));break;case io.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,wf),i.vsub(n,J0),e.vsub(n,iO);const o=wf.dot(wf),s=wf.dot(J0),a=wf.dot(iO),c=J0.dot(J0),l=J0.dot(iO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}io.CLOSEST=1,io.ANY=2,io.ALL=4;const Y5=new qi,nO=[],J0=new _e,iO=new _e,x0e=new _e,w0e=new Br,Js=new _e,Mc=new _e,El=new _e,Al=new _e;new _e,new q0;const X5={faceList:[0]},h1=new _e,E0e=new io,A0e=[],S0e=new _e,C0e=new _e,T0e=new _e,K5=(new _e,new _e,new _e),D0e=new _e,R0e=new _e,O0e=new _e,k0e=new _e,P0e=new _e,N0e=new _e;new qi;const F0e=[],L0e=new Si,wf=new _e,f1=new _e;new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new io,new _e,new _e,new _e,new _e(1,0,0),new _e(0,1,0),new _e(0,0,1),new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new qi,new _e,new qi,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new qi,new _e,new Si,new qi,new _e,new _e,new _e,new _e,new _e,new Br,new Br,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new qi,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new Br,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e,new qi,new io;const fo=globalThis.performance||{};if(!fo.now){let t=Date.now();fo.timing&&fo.timing.navigationStart&&(t=fo.timing.navigationStart),fo.now=()=>Date.now()-t}new _e;var Cf=C(1979);function sg(t,e,n){e||(e=new $n($n.IDENTITY));const i=new $n($n.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const o=new $n($n.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(o)}t.scale&&i.scale(t.scale)}const r=new $n(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const o of t.nodes||t.children||[])if(!1===sg(o,r,n))return!1;return!0}function xz(){i8([c5,ng])}function wz(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||sg(r,new $n($n.IDENTITY),(o,s)=>o!==n||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function aO(t,e){return cO.apply(this,arguments)}function cO(){return cO=jt(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(o=>o.blob())):fetch(n);const r=yield jE(i,ng,{DracoLoader:C2,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),wz(t.scenegraphNode,r)}),cO.apply(this,arguments)}function zxe(t,e){return lO.apply(this,arguments)}function lO(){return lO=jt(function*(t,e){return wz(t,yield e)}),lO.apply(this,arguments)}function dO(){return dO=jt(function*(t){console.log("Starting Collisioning");const e=t.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new $n(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new qi({lowerBound:new _e(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new _e(...l.map((d,h)=>Math.max(d,c[h])))})}}),n=[];for(const s of t.filter(a=>!!a.scenegraph)){const a=yield N0(s.scenegraph,ng,{DracoLoader:C2,decompress:!0,postProcess:!0});for(const c of a.scenes)sg(c,new $n(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new qi({lowerBound:new _e(...p.map((b,T)=>Math.min(b,m[T]))),upperBound:new _e(...m.map((b,T)=>Math.max(b,p[T])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of n)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),dO.apply(this,arguments)}function uO(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new kbe;break;case"cone":i=new Lbe;break;case"cylinder":i=new Bbe;break;default:i=new Gbe}return new BR({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:wi.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function Ez(t,e,n){if(e&&0!==e.length)return new PR({id:t,pickable:!0,data:e.map(i=>({...i,position:new $n(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}let Gxe=(()=>{var t;class e extends nR{initializeState(){const{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),xz()}renderLayers(){const i=this.state,r={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const a of i.data){const c=a.geometry??"cube";a.scenegraph?r.scenegraph.push(a):void 0!==r[c]&&r[c].push(a)}const o={};for(const a of r.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,a.scenegraph)&&(o[a.scenegraph]=aO({scenegraph:a.scenegraph},e.gltfCache));const s=[];for(const[a,c]of Object.entries(r))if("scenegraph"===a)for(const l of c)s.push(new q2({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?i.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:wi.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?zxe(l.scenegraphNode,o[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===a?(s.push(Ez("text",c.filter(l=>l.unpickable),{pickable:!1})),s.push(Ez("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===a?s.push(uO(a,c,{wireframe:!0,pickable:!1,geometry:a})):(s.push(uO(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),s.push(uO(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return i.doCollisions&&function Hxe(t){dO.apply(this,arguments)}(i.data),s.filter(a=>!!a)}getPickingInfo(i){return i.info}}return(t=e).layerName="BodyUILayer",t.gltfCache={},e})();function Az(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),Az(n,e);return e}function hO(){return hO=jt(function*(t,e,n,i){xz();const r=yield aO({scenegraph:t,scenegraphNode:n},i),o={},s=[];for(const a of r.scenes)sg(a,e=new $n(e||$n.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new $n(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:d["@id"],transformMatrix:new $n(e||$n.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new qi({lowerBound:new _e(...p.map((b,T)=>Math.min(b,m[T]))),upperBound:new _e(...m.map((b,T)=>Math.max(b,p[T])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of Az(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new _e(.5,.5,.5)),p=a.center=c.clone().vadd(h);a.transformMatrix=new $n($n.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),hO.apply(this,arguments)}let $xe=(()=>{class t{constructor(n){this.deckProps=n,this.bodyUILayer=new Gxe({}),this.nodeClickSubject=new Ae,this.nodeHoverStartSubject=new Ae,this.nodeHoverStopSubject=new Ae,this.sceneRotationSubject=new ce([0,0]),this.nodeDragStartSubject=new Ae,this.nodeDragSubject=new Ae,this.nodeDragEndSubject=new Ae,this.nodeClick$=this.nodeClickSubject.pipe(Ro()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Ro()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Ro()),this.sceneRotation$=this.sceneRotationSubject.pipe(Ro()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Ro()),this.nodeDrag$=this.nodeDragSubject.pipe(Ro()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Ro());const i={...n,views:["orthographic"===n.camera?new f8({flipY:!1,near:-1e3}):new p8({orbitAxis:"Y"})],controller:n.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};n.legacyLighting&&(i.effects=[new dR({ambientLight:new m8({color:[255,255,255],intensity:10})})]),this.deck=new MR(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:n.minRotationX??-15,maxRotationX:n.maxRotationX??15,target:n.target??[.5,.5,0],rotationX:0,rotationOrbit:n.rotation??0,zoom:n.zoom??9.5,camera:n.camera}}),n.rotation&&this.sceneRotationSubject.next([n.rotation,0])}initialize(){var n=this;return jt(function*(){for(;!n.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(n){if(n?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of n)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(n,i):this.bodyUILayer.setState({data:n,zoomOpacity:i})}}debugSceneNodeProcessing(n,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new $n([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function Wxe(t,e,n,i){return hO.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",n),(n=n.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:n,zoomOpacity:i})})}zoomTo(n){const i=new $n(n.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:n}})}setRotationX(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:n}})}setZoom(n){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:n}})}setTarget(n){this.deck.setProps({viewState:{...this.deck.props.viewState,target:n}})}setInteractive(n){this.deck.setProps({controller:n})}_onHover(n){const{lastHovered:i}=this;this.cursor=n.picked?"pointer":void 0,n.picked&&n.object?.["@id"]?i!==n.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=n.object,this.nodeHoverStartSubject.next(n.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(n,i){n.picked&&n.object?.["@id"]&&this.nodeClickSubject.next({node:n.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(n){if(n.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(n.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...n.viewState}}),this.sceneRotationSubject.next([n.viewState.rotationOrbit,n.viewState.rotationX])}_onDragStart(n,i){this._dragEvent(n,i,this.nodeDragStartSubject)}_onDrag(n,i){this._dragEvent(n,i,this.nodeDragSubject)}_onDragEnd(n,i){this._dragEvent(n,i,this.nodeDragEndSubject)}_dragEvent(n,i,r){n?.object?.["@id"]&&r.next({node:n.object,info:n,e:i})}}return vt([Cf.ak],t.prototype,"_onHover",null),vt([Cf.ak],t.prototype,"_onClick",null),vt([Cf.ak],t.prototype,"_onViewStateChange",null),vt([Cf.ak],t.prototype,"_onDragStart",null),vt([Cf.ak],t.prototype,"_onDrag",null),vt([Cf.ak],t.prototype,"_onDragEnd",null),t})();const iy=W(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});let Cz=(()=>{class t{constructor(){this.bootstrap$=new Sm(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Yxe(t,e){return t===e}function pO(t,e=Yxe){let n=null,i=null;function r(){return function Xxe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let Kxe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const Tz=new bt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>Kxe.pop()}),Mz=new bt("\u0275NGXS_STATE_FACTORY"),Iz=new bt("\u0275NGXS_STATE_CONTEXT_FACTORY"),{isArray:qxe}=Array,{getPrototypeOf:Jxe,prototype:Zxe,keys:Qxe}=Object;function Dz(t){if(1===t.length){const e=t[0];if(qxe(e))return{args:e,keys:null};if(function ewe(t){return t&&"object"==typeof t&&Jxe(t)===Zxe}(e)){const n=Qxe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:twe}=Array;function ry(t){return Q(e=>function nwe(t,e){return twe(e)?t(...e):t(e)}(t,e))}function Rz(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function oy(...t){const e=Ft(t),{args:n,keys:i}=Dz(t),r=new le(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;ki(n[d]).subscribe(x(o,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?Rz(i,a):a),o.complete())}))}});return e?r.pipe(ry(e)):r}function vd(t,e){const n=R(t)?t:()=>t,i=r=>r.error(n());return new le(e?r=>e.schedule(i,0,r):i)}function Tf(t){return!!t&&(t instanceof le||R(t.lift)&&R(t.subscribe))}function yi(t,e){return F((n,i)=>{let r=0;n.subscribe(x(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Ms(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,Ro({connector:()=>new Sm(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function _i(t){return t<=0?()=>Le:F((e,n)=>{let i=0;e.subscribe(x(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Oz(t,e){return e?n=>n.pipe(Oz((i,r)=>ki(t(i,r)).pipe(Q((o,s)=>e(i,o,r,s))))):F((n,i)=>{let r=0,o=null,s=!1;n.subscribe(x(i,a=>{o||(o=x(i,void 0,()=>{o=null,s&&i.complete()}),ki(t(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function ag(t){return F((e,n)=>{let i=!1;e.subscribe(x(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function tc(t){return F((e,n)=>{let o,i=null,r=!1;i=e.subscribe(x(n,void 0,void 0,s=>{o=ki(t(s,tc(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function fr(t){return F((e,n)=>{ki(t).subscribe(x(n,()=>n.complete(),_)),!n.closed&&e.subscribe(n)})}function pr(t,e,n){const i=R(t)||e||n?{next:t,error:e,complete:n}:t;return i?F((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(x(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):$e}function sy(...t){return function iwe(){return pe(1)}()(Ei(t,Jt(t)))}function Ea(...t){const e=Jt(t);return F((n,i)=>{(e?sy(t,n,e):sy(t,n)).subscribe(i)})}function Mf(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const kz=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?n:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),t),t},mO=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),gO=t=>t&&"object"==typeof t&&!Array.isArray(t),_O=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(gO(t)&&gO(n))for(const i in n)gO(n[i])?(t[i]||Object.assign(t,{[i]:{}}),_O(t[i],n[i])):Object.assign(t,{[i]:n[i]});return _O(t,...e)};let Pz=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return KM(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return ln.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return ln.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(nt(ln),nt(vs))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Nz=new bt("ROOT_OPTIONS"),Fz=new bt("ROOT_STATE_TOKEN"),Lz=new bt("FEATURE_STATE_TOKEN"),Bz=new bt("NGXS_PLUGINS"),xd="NGXS_META",jz="NGXS_OPTIONS_META",bO="NGXS_SELECTOR_META";let x1=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Pz}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:function(n){let i=null;return n?i=new n:(r=nt(Nz),i=_O(new t,r)),i;var r},providedIn:"root"}),t})();class hwe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let fwe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Uz=new bt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),pwe=new bt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Ht(Zp),e=t.get(Uz);return t.get(e||(typeof Ai.Zone<"u"?Pz:fwe))}});function yO(t){if(!t.hasOwnProperty(xd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,xd,{value:e})}return If(t)}function If(t){return t[xd]}function w1(t){return t[bO]}function Vz(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function mwe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function gwe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let o=n;for(;++i<r;)o=o+" && "+(n=n+"."+e[i]);return new Function("store","return "+o+";")}(t)}function wwe(...t){return function cg(t,e,n=Swe){const i=function Cwe(t){return t.reduce((e,n)=>(e[Mf(n)]=!0,e),{})}(t),r=e&&function Twe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(o){return o.pipe(function Ewe(t,e){return yi(n=>{const i=Mf(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function Swe(){return Q(t=>t.action)}function E1(t){return e=>new le(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let zz=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(pwe))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Hz(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const o=e.pop();o&&t(...o)}n=!1}}}class Mwe extends Ae{constructor(){super(...arguments),this._orderedNext=Hz(e=>super.next(e))}next(e){this._orderedNext(e)}}class Iwe extends ce{constructor(e){super(e),this._orderedNext=Hz(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let Gz=(()=>{class t extends Mwe{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Li(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Wz=t=>(...e)=>t.shift()(...e,(...i)=>Wz(t)(...i));let $z=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(_c));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(nt(xr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),xO=(()=>{class t extends Iwe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wO=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(nt(t,12),nt(Bz,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})(),Yz=(()=>{class t extends Ae{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Li(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rwe=(()=>{class t{constructor(n,i,r,o,s,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function Dwe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new le(r=>(i=!0,n.pipe(E1(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?qt(this._stateStream.getValue()):oy(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return Wz([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(Ms())}getActionResultStream(n){return this._actionResults.pipe(yi(i=>i.action===n&&"DISPATCHED"!==i.status),_i(1),Ms())}createDispatchObservable(n){return n.pipe(Oz(i=>{switch(i.status){case"SUCCESSFUL":return qt(this._stateStream.getValue());case"ERRORED":return vd(i.error);default:return Le}})).pipe(Ms())}}return t.\u0275fac=function(n){return new(n||t)(nt(Gz),nt(Yz),nt(wO),nt(xO),nt(zz),nt($z))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ay=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(nt(xO),nt(Rwe),nt(x1))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EO=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();function r(c){return mO(c,n.path)}function o(c,l){const d=kz(c,n.path,l);return i.setState(d),d}function s(c,l){return o(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function Owe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(c);return s(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?s(l,c):o(l,c)},dispatch:c=>i.dispatch(c)}}}return t.\u0275fac=function(n){return new(n||t)(nt(ay))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new RegExp("^[a-zA-Z0-9_]+$");class Kz{static get type(){return"@@INIT"}}class qz{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new bt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let lg=(()=>{class t{constructor(n,i,r,o,s,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=pO(()=>{const l=this;function d(p){const m=l.statePaths[p];return m?Vz(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let m=d(p);return m||((...b)=>(m||(m=d(p)),m?m(...b):void 0))},getSelectorOptions:p=>Object.assign(Object.assign({},l._config.selectorOptions),p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(n){let i={};return i=Array.isArray(n)?n.slice():function xwe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?Object.assign({},n):void 0===n?{}:n,i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function _we(t){const e=n=>t.find(r=>r===n)[xd].name;return t.reduce((n,i)=>{const{name:r,children:o}=i[xd];return n[r]=(o||[]).map(e),n},{})}(i),o=function vwe(t){const e=[],n={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),n[r]=!0,t[r].forEach(s=>{n[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),s=function ywe(t,e={}){const n=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=n(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function bwe(t){return t.reduce((e,n)=>(e[n[xd].name]=n,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],p=d[xd];this.addRuntimeInfoToMeta(p,h);const m={name:l,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:t.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((s,a)=>kz(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new Ae;this._actionsSubscription=this._actions.pipe(yi(i=>"DISPATCHED"===i.status),$(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(Q(()=>({action:r,status:"SUCCESSFUL"})),ag({action:r,status:"CANCELED"}),tc(o=>qt({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=Mf(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Ei(h)),Tf(h)?(h=h.pipe($(p=>p instanceof Promise?Ei(p):Tf(p)?p:qt(p)),ag({})),l.options.cancelUncompleted&&(h=h.pipe(fr(n.pipe(wwe(i)))))):h=qt({}).pipe(Ms()),o.push(h)}catch(h){o.push(vd(h))}s=!0}}return o.length||o.push(qt({})),oy(o)}addToStatesMap(n){const i=[],r=this.statesByName;for(const o of n){const s=If(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==mO(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(nt(xr),nt(x1),nt(t,12),nt(Gz),nt(Yz),nt(EO),nt(Tz,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();function Jz(t){const e=w1(t)||If(t);return e&&e.makeRootSelector||(()=>t)}let Sl=(()=>{class t{constructor(n,i,r,o,s,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(E1(this._internalExecutionStrategy),Ms({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(Q(i),tc(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?qt(void 0):vd(r)}),tt(),E1(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(_i(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(E1(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return Jz(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(s)}}}return t.\u0275fac=function(n){return new(n||t)(nt(xO),nt(ay),nt(x1),nt(zz),nt(lg),nt(Tz,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A1=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(nt(Sl),nt(x1))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zz=(()=>{class t{constructor(n,i,r,o,s){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new Ae}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(yi(()=>!!i),pr(()=>this._invokeInitOnStates(i.states)),$(()=>this._bootstrapper.appBootstrapped$),yi(r=>!!r),tc(r=>(this._internalErrorReporter.reportErrorSafely(r),Le)),fr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>mO(o,i.path)).pipe(Ea(void 0),F((t,e)=>{let n,i=!1;t.subscribe(x(e,r=>{const o=n;n=r,i&&e.next([o,r]),i=!0}))}),fr(this._destroy$)).subscribe(([o,s])=>{const a=new hwe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(Sl),nt($z),nt(ay),nt(EO),nt(Cz))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vwe=(()=>{class t{constructor(n,i,r,o,s=[],a){const c=n.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new Kz,c)}}return t.\u0275fac=function(n){return new(n||t)(nt(lg),nt(ay),nt(Sl),nt(A1),nt(Fz,8),nt(Zz))},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),t})(),zwe=(()=>{class t{constructor(n,i,r,o=[],s){const a=t.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new qz(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(nt(Sl),nt(ay),nt(lg),nt(Lz,8),nt(Zz))},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),t})(),Qz=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:Vwe,providers:[lg,wO,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:zwe,providers:[lg,wO,...n,{provide:Lz,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:Uz,useValue:i.executionStrategy},{provide:Fz,useValue:n},{provide:Nz,useValue:i},{provide:Ow,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[Cz]},{provide:Iz,useExisting:EO},{provide:Mz,useExisting:lg}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),t})();function CO(t,e){return(n,i)=>{const r=yO(n.constructor);Array.isArray(t)||(t=[t]);for(const o of t){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function eH(t){return i=>{const r=i,o=yO(r),s=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[jz]||{}),t)}(s);(function n(i){const{meta:r,inheritedStateClass:o,optionsWithInheritance:s}=i,{children:a,defaults:c,name:l}=s,d="string"==typeof l?l:l&&l.getName()||null;if(o.hasOwnProperty(xd)){const h=o[xd]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:o,inheritedStateClass:s,optionsWithInheritance:a}),r[jz]=a}}const Hwe=36;function S1(t,...e){return function(n,i){const r=i.toString(),o=`__${r}__selector`,s=function Wwe(t,e,n=[]){return e=e||function $we(t){const e=t.length-1;return t.charCodeAt(e)===Hwe?t.slice(0,e):t}(t),"string"==typeof e?Vz(n.length?[e,...n]:e.split("."),A1.config):e}(r,t,e);Object.defineProperties(n,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function Gwe(t){return A1.store||function uwe(){throw new Error("You have forgotten to import the NGXS module!")}(),A1.store.select(t)}(s))}}})}}const tH="NGXS_SELECTOR_OPTIONS_META",C1={getOptions:t=>t&&t[tH]||{},defineOptions:(t,e)=>{t&&(t[tH]=e)}};function Ywe(t,e){const n=function vO(t){return t.hasOwnProperty(bO)||Object.defineProperty(t,bO,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),w1(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function Xwe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},C1.getOptions(t.containerClass)||{}),C1.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function cy(t,e,n){const i=function Bwe(t,e){const n=e&&e.containerClass,r=pO(function(...s){const a=t.apply(n,s);return a instanceof Function?pO.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=Ywe(e,n);return r.makeRootSelector=function Lwe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function jwe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),s=function Uwe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&If(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>Jz(a)(t));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,t,i),i}function dg(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,o=cy(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}let KO;try{KO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{KO=!1}let my,Pf,qO,Ir=(()=>{var t;class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Su(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!KO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(vs))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function kf(t){return function XEe(){if(null==my&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>my=!0}))}finally{my=my||!1}return my}()?t:!!t.capture}function KEe(){if(null==Pf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Pf=!1,Pf;if("scrollBehavior"in document.documentElement.style)Pf=!0;else{const t=Element.prototype.scrollTo;Pf=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Pf}function U1(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Ed(t){return t.composedPath?t.composedPath()[0]:t.target}function JO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ic(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class s1e extends V{constructor(e,n){super()}schedule(e,n=0){return this}}const H1={setInterval(t,e,...n){const{delegate:i}=H1;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=H1;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class ek extends s1e{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return H1.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&H1.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,I(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class _y{constructor(e,n=_y.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}_y.now=sI.now;class tk extends _y{constructor(e,n=_y.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const G1=new tk(ek),a1e=G1;function gi(t){return null!=t&&"false"!=`${t}`}function nc(t,e=0){return function c1e(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function W1(t){return Array.isArray(t)?t:[t]}function ro(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Ad(t){return t instanceof Nt?t.nativeElement:t}function ns(...t){const e=Jt(t),n=Ft(t),{args:i,keys:r}=Dz(t);if(0===i.length)return Ei([],e);const o=new le(bG(i,e,r?s=>Rz(r,s):$e));return n?o.pipe(ry(n)):o}function bG(t,e,n=$e){return i=>{yG(e,()=>{const{length:r}=t,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)yG(e,()=>{const l=Ei(t[c],e);let d=!1;l.subscribe(x(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function yG(t,e,n){t?be(n,t,e):e()}let X1=(()=>{var t;class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function y1e(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function b1e(t){try{return t.frameElement}catch{return null}}(function T1e(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===MG(r)||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=MG(i);return i.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function S1e(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===o?!!i.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function C1e(t){return!function x1e(t){return function E1e(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function v1e(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function w1e(t){return function A1e(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||TG(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Ir))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function TG(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function MG(t){if(!TG(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class M1e{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(_i(1)).subscribe(e)}}let ck=(()=>{var t;class e{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new M1e(i,this._checker,this._ngZone,this._document,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(X1),nt(ln),nt(Wn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function IG(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function DG(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const I1e=new bt("cdk-input-modality-detector-options"),D1e={ignoreKeys:[18,17,224,91,16]},fg=kf({passive:!0,capture:!0});let R1e=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new ce(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ed(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(IG(a)?"keyboard":"mouse"),this._mostRecentTarget=Ed(a))},this._onTouchstart=a=>{DG(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ed(a))},this._options={...D1e,...s},this.modalityDetected=this._modality.pipe(function ik(t){return yi((e,n)=>t<=n)}(1)),this.modalityChanged=this.modalityDetected.pipe(tt()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,fg),o.addEventListener("mousedown",this._onMousedown,fg),o.addEventListener("touchstart",this._onTouchstart,fg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fg),document.removeEventListener("mousedown",this._onMousedown,fg),document.removeEventListener("touchstart",this._onTouchstart,fg))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Ir),nt(ln),nt(Wn),nt(I1e,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const k1e=new bt("cdk-focus-monitor-default-options"),K1=kf({passive:!0,capture:!0});let Ff=(()=>{var t;class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ae,this._rootNodeFocusAndBlurListener=c=>{for(let d=Ed(c);d;d=d.parentElement)"focus"===c.type?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){const o=Ad(i);if(!this._platform.isBrowser||1!==o.nodeType)return qt();const s=function JEe(t){if(function qEe(){if(null==qO){const t=typeof document<"u"?document.head:null;qO=!(!t||!t.createShadowRoot&&!t.attachShadow)}return qO}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new Ae,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){const r=Ad(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){const s=Ad(i);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const o=this._elementInfo.get(r),s=Ed(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,K1),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,K1)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(fr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,K1),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,K1),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const s=i.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0;return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ln),nt(Ir),nt(R1e),nt(Wn,8),nt(k1e,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const P1e=new bt("cdk-dir-doc",{providedIn:"root",factory:function N1e(){return Ht(Wn)}}),F1e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Lf=(()=>{var t;class e{constructor(i){this.value="ltr",this.change=new tn,i&&(this.value=function L1e(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?F1e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(P1e,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function q1(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function hk(t,e=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?nc(n):this.defaultTabIndex}constructor(...n){super(...n),this._tabIndex=e,this.defaultTabIndex=e}}}class K1e{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const jG=kf({passive:!0,capture:!0});class q1e{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=Ed(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){const o=this._events.get(n);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,jG)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const o=r.get(n);o&&(o.delete(i),0===o.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,jG)))}}const UG={enterDuration:225,exitDuration:150},VG=kf({passive:!0,capture:!0}),zG=["mousedown","touchstart"],HG=["mouseup","mouseleave","touchend","touchcancel"];class pg{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ad(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...UG,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const s=i.radius||function Z1e(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,b="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,T=new K1e(this,d,i,b);d.style.transform="scale3d(1, 1, 1)",T.state=0,i.persistent||(this._mostRecentTransientRipple=T);let D=null;return!b&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const U=()=>this._finishRippleTransition(T),Y=()=>this._destroyRipple(T);d.addEventListener("transitionend",U),d.addEventListener("transitioncancel",Y),D={onTransitionEnd:U,onTransitionCancel:Y}}),this._activeRipples.set(T,D),(b||!l)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...UG,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=Ad(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,zG.forEach(i=>{pg._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{HG.forEach(n=>{this._triggerElement.addEventListener(n,this,VG)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=IG(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!DG(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(zG.forEach(n=>pg._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&HG.forEach(n=>e.removeEventListener(n,this,VG)))}}pg._eventManager=new q1e;const oAe=["addListener","removeListener"],sAe=["addEventListener","removeEventListener"],aAe=["on","off"];function mg(t,e,n,i){if(R(n)&&(i=n,n=void 0),i)return mg(t,e,n).pipe(ry(i));const[r,o]=function dAe(t){return R(t.addEventListener)&&R(t.removeEventListener)}(t)?sAe.map(s=>a=>t[s](e,a,n)):function cAe(t){return R(t.addListener)&&R(t.removeListener)}(t)?oAe.map(QG(t,e)):function lAe(t){return R(t.on)&&R(t.off)}(t)?aAe.map(QG(t,e)):[];if(!r&&Nc(t))return $(s=>mg(s,e,n))(ki(t));if(!r)throw new TypeError("Invalid event target");return new le(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function QG(t,e){return n=>i=>t[n](e,i)}const Ey={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=Ey;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(o=>{n=void 0,t(o)});return new V(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=Ey;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=Ey;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class hAe extends tk{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class uAe extends ek{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Ey.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(Ey.cancelAnimationFrame(n),e._scheduled=void 0)}});let mk,pAe=1;const Z1={};function e9(t){return t in Z1&&(delete Z1[t],!0)}const mAe={setImmediate(t){const e=pAe++;return Z1[e]=!0,mk||(mk=Promise.resolve()),mk.then(()=>e9(e)&&t()),e},clearImmediate(t){e9(t)}},{setImmediate:gAe,clearImmediate:_Ae}=mAe,Q1={setImmediate(...t){const{delegate:e}=Q1;return(e?.setImmediate||gAe)(...t)},clearImmediate(t){const{delegate:e}=Q1;return(e?.clearImmediate||_Ae)(t)},delegate:void 0};new class yAe extends tk{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class bAe extends ek{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Q1.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(Q1.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function gk(t=0,e,n=a1e){let i=-1;return null!=e&&(Et(e)?n=e:i=e),new le(r=>{let o=function wAe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function t9(t,e=G1){return function xAe(t){return F((e,n)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,n.next(l)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(x(n,l=>{i=!0,r=l,o||ki(t(l)).subscribe(o=x(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}(()=>gk(t,e))}let n9=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ae,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new le(r=>{this._globalSubscription||this._addGlobalListener();const o=i>0?this._scrolled.pipe(t9(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(yi(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Ad(r),s=i.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>mg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ln),nt(Ir),nt(Wn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),_k=(()=>{var t;class e{constructor(i,r,o){this._platform=i,this._change=new Ae,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect();return{top:-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(t9(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Ir),nt(ln),nt(Wn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class bk{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class tA extends bk{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class nA extends bk{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class SAe extends bk{constructor(e){super(),this.element=e instanceof Nt?e.nativeElement:e}}class yk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof tA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof nA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof SAe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class CAe extends yk{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||xr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let iA=(()=>{var t;class e extends yk{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new tn,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return(t=e).\u0275fac=function(i){return new(i||t)(He(It),He(No),He(Wn))},t.\u0275dir=Lt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[bn]}),e})();const r9=KEe();class TAe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ro(-this._previousScrollPosition.left),e.style.top=ro(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),r9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),r9&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class MAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(yi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class o9{enable(){}disable(){}attach(){}}function vk(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function s9(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class IAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();vk(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let DAe=(()=>{var t;class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new o9,this.close=a=>new MAe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new TAe(this._viewportRuler,this._document),this.reposition=a=>new IAe(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(n9),nt(_k),nt(ln),nt(Wn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class xk{constructor(e){if(this.scrollStrategy=new o9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class RAe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let a9=(()=>{var t;class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),OAe=(()=>{var t;class e extends a9{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn),nt(ln,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),kAe=(()=>{var t;class e extends a9{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ed(s)},this._clickListener=s=>{const a=Ed(s),c="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn),nt(Ir),nt(ln,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),rA=(()=>{var t;class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||JO()){const o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}const r=this._document.createElement("div");r.classList.add(i),JO()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Wn),nt(Ir))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class Sy{constructor(e,n,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Ae,this._attachments=new Ae,this._detachments=new Ae,this._locationChanges=V.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Ae,this._outsidePointerEvents=new Ae,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ro(this._config.width),e.height=ro(this._config.height),e.minWidth=ro(this._config.minWidth),e.minHeight=ro(this._config.minHeight),e.maxWidth=ro(this._config.maxWidth),e.maxHeight=ro(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=W1(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(fr(Sr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const c9="cdk-overlay-connected-position-bounding-box",PAe=/([A-Za-z%]+)$/;class NAe{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ae,this._resizeSubscription=V.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(c9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(l,n,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Bf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(c9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return n.left<0&&(r-=n.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r,o;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,o="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){const o=d9(n);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let p=0-a,m=a+o.height-i.height,b=this._subtractOverflows(o.width,0-s,s+o.width-i.width),T=this._subtractOverflows(o.height,p,m),D=b*T;return{visibleArea:D,isCompletelyWithinViewport:o.width*o.height===D,fitsInViewportVertically:T===o.height,fitsInViewportHorizontally:b==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,o=i.right-n.x,s=l9(this._overlayRef.getConfig().minHeight),a=l9(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=d9(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new RAe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,p;if("top"===n.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),b=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>b&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-b/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)p=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),b=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>b&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-b/2)}return{top:s,left:h,bottom:a,right:p,width:d,height:o}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=ro(i.height),r.top=ro(i.top),r.bottom=ro(i.bottom),r.width=ro(i.width),r.left=ro(i.left),r.right=ro(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=ro(o)),s&&(r.maxWidth=ro(s))}this._lastBoundingBoxSize=i,Bf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Bf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Bf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Bf(i,this._getExactOverlayY(n,e,d)),Bf(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=ro(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=ro(s.maxWidth):o&&(i.maxWidth="")),Bf(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=ro(o.y),r}_getExactOverlayX(e,n,i){let s,r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=ro(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:s9(e,i),isOriginOutsideView:vk(e,i),isOverlayClipped:s9(n,i),isOverlayOutsideView:vk(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&W1(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Nt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function Bf(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l9(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(PAe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function d9(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const u9="cdk-global-overlay-wrapper";class FAe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(u9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",b="",T="";c?T="flex-start":"center"===d?(T="center",p?b=h:m=h):p?"left"===d||"end"===d?(T="flex-end",m=h):("right"===d||"start"===d)&&(T="flex-start",b=h):"left"===d||"start"===d?(T="flex-start",m=h):("right"===d||"end"===d)&&(T="flex-end",b=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":b,n.justifyContent=T,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(u9),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let LAe=(()=>{var t;class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new FAe}flexibleConnectedTo(i){return new NAe(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(_k),nt(Wn),nt(Ir),nt(rA))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),BAe=0,Cl=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d,h,p,m,b){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=m,this._animationsModuleType=b}create(i){const r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new xk(i);return a.direction=a.direction||this._directionality.value,new Sy(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+BAe++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Zh)),new CAe(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(DAe),nt(rA),nt(It),nt(LAe),nt(OAe),nt(xr),nt(ln),nt(Wn),nt(Lf),nt(Qb),nt(kAe),nt(Nr,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function jf(t,e){return{type:7,name:t,definitions:e,options:{}}}function ic(t,e=null){return{type:4,styles:e,timings:t}}function po(t){return{type:6,styles:t,offset:null}}function rc(t,e,n){return{type:0,name:t,styles:e,options:n}}function Dc(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Cy(t){return new le(e=>{ki(t()).subscribe(e)})}function O9(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return Q(n=>{let i=n;for(let r=0;r<e;r++){const o=i?.[t[r]];if(!(typeof o<"u"))return;i=o}return i})}C(1563);class aA{}class Tl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Tl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Tl;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Tl?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class JSe{encodeKey(e){return k9(e)}encodeValue(e){return k9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const QSe=/%(\d[a-f0-9])/gi,eCe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function k9(t){return encodeURIComponent(t).replace(QSe,(e,n)=>eCe[n]??e)}function lA(t){return`${t}`}class Gu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new JSe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ZSe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(lA):[lA(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Gu({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(lA(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(lA(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class tCe{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function P9(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function N9(t){return typeof Blob<"u"&&t instanceof Blob}function F9(t){return typeof FormData<"u"&&t instanceof FormData}class My{constructor(e,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function nCe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Tl),this.context||(this.context=new tCe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Gu,this.urlWithParams=n}serializeBody(){return null===this.body?null:P9(this.body)||N9(this.body)||F9(this.body)||function iCe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||F9(this.body)?null:N9(this.body)?this.body.type||null:P9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),l)),new My(n,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var _g=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(_g||{});class Ck{constructor(e,n=200,i="OK"){this.headers=e.headers||new Tl,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bg extends Ck{constructor(e={}){super(e),this.type=_g.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new bg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Mk(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let yg=(()=>{var t;class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof My)s=i;else{let l,d;l=o.headers instanceof Tl?o.headers:new Tl(o.headers),o.params&&(d=o.params instanceof Gu?o.params:new Gu({fromObject:o.params})),s=new My(i,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const a=qt(s).pipe(function Ty(t,e){return R(e)?$(t,e,1):$(t,1)}(l=>this.handler.handle(l)));if(i instanceof My||"events"===o.observe)return a;const c=a.pipe(yi(l=>l instanceof bg));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Q(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(Q(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new Gu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,Mk(o,r))}post(i,r,o={}){return this.request("POST",i,Mk(o,r))}put(i,r,o={}){return this.request("PUT",i,Mk(o,r))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(aA))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const CCe=["*"];let uA;function Dy(t){return function TCe(){if(void 0===uA&&(uA=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(uA=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return uA}()?.createHTML(t)||t}function K9(t){return Error(`Unable to find icon with the name "${t}"`)}function q9(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function J9(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Vf{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let hA=(()=>{var t;class e{constructor(i,r,o,s){this._httpClient=i,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(i,r,o){return this.addSvgIconInNamespace("",i,r,o)}addSvgIconLiteral(i,r,o){return this.addSvgIconLiteralInNamespace("",i,r,o)}addSvgIconInNamespace(i,r,o,s){return this._addSvgIconConfig(i,r,new Vf(o,null,s))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,o,s){const a=this._sanitizer.sanitize(Zr.HTML,o);if(!a)throw J9(o);const c=Dy(a);return this._addSvgIconConfig(i,r,new Vf("",c,s))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,o){return this._addSvgIconSetConfig(i,new Vf(r,null,o))}addSvgIconSetLiteralInNamespace(i,r,o){const s=this._sanitizer.sanitize(Zr.HTML,r);if(!s)throw J9(r);const a=Dy(s);return this._addSvgIconSetConfig(i,new Vf("",a,o))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(Zr.RESOURCE_URL,i);if(!r)throw q9(i);const o=this._cachedIconsByUrl.get(r);return o?qt(fA(o)):this._loadSvgIconFromConfig(new Vf(i,null)).pipe(pr(s=>this._cachedIconsByUrl.set(r,s)),Q(s=>fA(s)))}getNamedSvgIcon(i,r=""){const o=Z9(r,i);let s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,i),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):vd(K9(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?qt(fA(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(Q(r=>fA(r)))}_getSvgFromIconSetConfigs(i,r){const o=this._extractIconWithNameFromAnySet(i,r);return o?qt(o):oy(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(tc(c=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(Zr.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),qt(null)})))).pipe(Q(()=>{const a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw K9(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.svgText&&s.svgText.toString().indexOf(i)>-1){const a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,i,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(pr(r=>i.svgText=r),Q(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?qt(null):this._fetchIcon(i).pipe(pr(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,o){const s=i.querySelector(`[id="${r}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,o);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),o);const c=this._svgElementFromString(Dy("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(i){const r=this._svgElementFromString(Dy("<svg></svg>")),o=i.attributes;for(let s=0;s<o.length;s++){const{name:a,value:c}=o[s];"id"!==a&&r.setAttribute(a,c)}for(let s=0;s<i.childNodes.length;s++)i.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:o}=i,s=o?.withCredentials??!1;if(!this._httpClient)throw function MCe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Zr.RESOURCE_URL,r);if(!a)throw q9(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(Q(d=>Dy(d)),function gg(t){return F((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}(()=>this._inProgressUrlFetches.delete(a)),Ro());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,o){return this._svgIconConfigs.set(Z9(i,r),o),this}_addSvgIconSetConfig(i,r){const o=this._iconSetConfigs.get(i);return o?o.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let o=0;o<this._resolvers.length;o++){const s=this._resolvers[o](r,i);if(s)return DCe(s)?new Vf(s.url,null,s.options):new Vf(s,null)}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(yg,8),nt(s0),nt(Wn,8),nt(_c))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function fA(t){return t.cloneNode(!0)}function Z9(t,e){return t+":"+e}function DCe(t){return!(!t.url||!t.options)}const RCe=q1(class{constructor(t){this._elementRef=t}}),OCe=new bt("MAT_ICON_DEFAULT_OPTIONS"),kCe=new bt("mat-icon-location",{providedIn:"root",factory:function PCe(){const t=Ht(Wn),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Q9=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],NCe=Q9.map(t=>`[${t}]`).join(", "),FCe=/^url\(['"]?#(.*?)['"]?\)$/;let vg=(()=>{var t;class e extends RCe{get inline(){return this._inline}set inline(i){this._inline=gi(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,o,s,a,c){super(i),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=V.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=i.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>i.classList.remove(o)),r.forEach(o=>i.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(NCe),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)Q9.forEach(a=>{const c=r[s],l=c.getAttribute(a),d=l?l.match(FCe):null;if(d){let h=o.get(c);h||(h=[],o.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,o]=this._splitIconName(i);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(_i(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${s.message}`))})}}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Nt),He(hA),Zc("aria-hidden"),He(kCe),He(_c),He(OCe,8))},t.\u0275cmp=Fn({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Ii("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Kn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[bn],ngContentSelectors:CCe,decls:1,vars:0,template:function(i,r){1&i&&(Qr(),Nn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})();function lTe(t,e){}class pA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let s7=(()=>{var t;class e extends yk{constructor(i,r,o,s,a,c,l,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const o=U1(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=U1();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=U1())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Nt),He(ck),He(Wn,8),He(pA),He(X1),He(ln),He(Sy),He(Ff))},t.\u0275cmp=Fn({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Xi(iA,7),2&i){let o;Hn(o=Gn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Ii("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[bn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&yn(0,lTe,0,0,"ng-template",0)},dependencies:[iA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class Rk{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Ae,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Ic(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const a7=new bt("DialogScrollStrategy"),dTe=new bt("DialogData"),uTe=new bt("DefaultDialogConfig");let pTe=0,c7=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,s,a,c){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ae,this._afterOpenedAtThisLevel=new Ae,this._ariaHiddenElements=new Map,this.afterAllClosed=Cy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ea(void 0))),this._scrollStrategy=c}open(i,r){(r={...this._defaultOptions||new pA,...r}).id=r.id||"cdk-dialog-"+pTe++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),a=this._overlay.create(s),c=new Rk(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){Ok(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){Ok(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),Ok(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new xk({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){const s=o.injector||o.viewContainerRef?.injector,a=[{provide:pA,useValue:o},{provide:Rk,useValue:r},{provide:Sy,useValue:i}];let c;o.container?"function"==typeof o.container?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=s7;const l=new tA(c,o.viewContainerRef,xr.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,o,s){if(i instanceof Xa){const a=this._createInjector(s,r,o,void 0);let c={$implicit:s.data,dialogRef:r};s.templateContext&&(c={...c,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),o.attachTemplatePortal(new nA(i,null,c,a))}else{const a=this._createInjector(s,r,o,this._injector),c=o.attachComponentPortal(new tA(i,s.viewContainerRef,a,s.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,o,s){const a=i.injector||i.viewContainerRef?.injector,c=[{provide:dTe,useValue:i.data},{provide:Rk,useValue:r}];return i.providers&&("function"==typeof i.providers?c.push(...i.providers(r,i,o)):c.push(...i.providers)),i.direction&&(!a||!a.get(Lf,null,{optional:!0}))&&c.push({provide:Lf,useValue:{value:i.direction,change:qt()}}),xr.create({parent:a||s,providers:c})}_removeOpenDialog(i,r){const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){const s=r[o];s!==i&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Cl),nt(xr),nt(uTe,8),nt(t,12),nt(rA),nt(a7))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();function Ok(t,e){let n=t.length;for(;n--;)e(t[n])}function gTe(t,e){}class mA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const kk="mdc-dialog--open",l7="mdc-dialog--opening",d7="mdc-dialog--closing";let yTe=(()=>{var t;class e extends s7{constructor(i,r,o,s,a,c,l,d){super(i,r,o,s,a,c,l,d),this._animationStateChanged=new tn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Nt),He(ck),He(Wn,8),He(mA),He(X1),He(ln),He(Sy),He(Ff))},t.\u0275cmp=Fn({type:t,selectors:[["ng-component"]],features:[bn],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const u7="--mat-dialog-transition-duration";function h7(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?nc(t.substring(0,t.length-2)):t.endsWith("s")?1e3*nc(t.substring(0,t.length-1)):"0"===t?0:null}let vTe=(()=>{var t;class e extends yTe{constructor(i,r,o,s,a,c,l,d,h){super(i,r,o,s,a,c,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?h7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?h7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(u7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(l7,kk)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(kk),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(kk),this._animationsEnabled?(this._hostElement.style.setProperty(u7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(d7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(l7,d7)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Nt),He(ck),He(Wn,8),He(mA),He(X1),He(ln),He(Sy),He(Nr,8),He(Ff))},t.\u0275cmp=Fn({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(id("id",r._config.id),Ii("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Kn("_mat-animation-noopable",!r._animationsEnabled))},features:[bn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Bt(0,"div",0)(1,"div",1),yn(2,gTe,0,0,"ng-template",2),Ut()())},dependencies:[iA],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class Pk{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ae,this._beforeClosed=new Ae,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(yi(r=>"opened"===r.state),_i(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(yi(r=>"closed"===r.state),_i(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Sr(this.backdropClick(),this.keydownEvents().pipe(yi(r=>27===r.keyCode&&!this.disableClose&&!Ic(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function xTe(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(yi(n=>"closing"===n.state),_i(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const f7=new bt("MatMdcDialogData"),wTe=new bt("mat-mdc-dialog-default-options"),p7=new bt("mat-mdc-dialog-scroll-strategy");let STe=0,CTe=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,s,a,c,l,d,h,p){this._overlay=i,this._defaultOptions=o,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ae,this._afterOpenedAtThisLevel=new Ae,this._idPrefix="mat-dialog-",this.dialogConfigClass=mA,this.afterAllClosed=Cy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ea(void 0))),this._scrollStrategy=c,this._dialog=r.get(c7)}open(i,r){let o;(r={...this._defaultOptions||new mA,...r}).id=r.id||`${this._idPrefix}${STe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:pA,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(a,c,l)=>(o=new this._dialogRefConstructor(a,r,l),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])});return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}}return(t=e).\u0275fac=function(i){Yh()},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),gA=(()=>{var t;class e extends CTe{constructor(i,r,o,s,a,c,l,d){super(i,r,s,c,l,a,Pk,vTe,f7,d),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Cl),nt(xr),nt(Qb,8),nt(wTe,8),nt(p7),nt(t,12),nt(rA),nt(Nr,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),TTe=0,m7=(()=>{var t;class e{constructor(i,r,o){this._dialogRef=i,this._elementRef=r,this._dialog=o,this.id="mat-mdc-dialog-title-"+TTe++}ngOnInit(){this._dialogRef||(this._dialogRef=function MTe(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const i=this._dialogRef?._containerInstance?._ariaLabelledByQueue;i&&Promise.resolve().then(()=>{const r=i.indexOf(this.id);r>-1&&i.splice(r,1)})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Pk,8),He(Nt),He(gA))},t.\u0275dir=Lt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&id("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),g7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Lt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),e})(),y7=(()=>{var t;class e{constructor(){this._listeners=[]}notify(i,r){for(let o of this._listeners)o(i,r)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(r=>i!==r)}}ngOnDestroy(){this._listeners=[]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const v7=new bt("CdkAccordion");let ITe=0,DTe=(()=>{var t;class e{get expanded(){return this._expanded}set expanded(i){i=gi(i),this._expanded!==i&&(this._expanded=i,this.expandedChange.emit(i),i?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){this._disabled=gi(i)}constructor(i,r,o){this.accordion=i,this._changeDetectorRef=r,this._expansionDispatcher=o,this._openCloseAllSubscription=V.EMPTY,this.closed=new tn,this.opened=new tn,this.destroyed=new tn,this.expandedChange=new tn,this.id="cdk-accordion-child-"+ITe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((s,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(v7,12),He(to),He(y7))},t.\u0275dir=Lt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[hi([{provide:v7,useValue:void 0}])]}),e})();const OTe=["body"];function kTe(t,e){}const PTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],NTe=["mat-expansion-panel-header","*","mat-action-row"];function FTe(t,e){1&t&&ai(0,"span",2),2&t&&Vt("@indicatorRotate",Rn()._getExpandedState())}const LTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],BTe=["mat-panel-title","mat-panel-description","*"],x7=new bt("MAT_ACCORDION"),w7="225ms cubic-bezier(0.4,0.0,0.2,1)",E7={indicatorRotate:jf("indicatorRotate",[rc("collapsed, void",po({transform:"rotate(0deg)"})),rc("expanded",po({transform:"rotate(180deg)"})),Dc("expanded <=> collapsed, void => collapsed",ic(w7))]),bodyExpansion:jf("bodyExpansion",[rc("collapsed, void",po({height:"0px",visibility:"hidden"})),rc("expanded",po({height:"*",visibility:""})),Dc("expanded <=> collapsed, void => collapsed",ic(w7))])},A7=new bt("MAT_EXPANSION_PANEL");let jTe=(()=>{var t;class e{constructor(i,r){this._template=i,this._expansionPanel=r}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Xa),He(A7,8))},t.\u0275dir=Lt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),UTe=0;const S7=new bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let C7=(()=>{var t;class e extends DTe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=gi(i)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,r,o,s,a,c,l){super(i,r,o),this._viewContainerRef=s,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new tn,this.afterCollapse=new tn,this._inputChanges=new Ae,this._headerId="mat-expansion-panel-header-"+UTe++,this._bodyAnimationDone=new Ae,this.accordion=i,this._document=a,this._bodyAnimationDone.pipe(tt((d,h)=>d.fromState===h.fromState&&d.toState===h.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ea(null),yi(()=>this.expanded&&!this._portal),_i(1)).subscribe(()=>{this._portal=new nA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const i=this._document.activeElement,r=this._body.nativeElement;return i===r||r.contains(i)}return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(He(x7,12),He(to),He(y7),He(No),He(Wn),He(Nr,8),He(S7,8))},t.\u0275cmp=Fn({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function eo(t,e,n,i){const r=li();if(r.firstCreatePass){const o=qr();n3(r,new QB(e,n,i),o.index),function mZ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}t3(r,Dt(),n)}(o,jTe,5),2&i){let s;Hn(s=Gn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Xi(OTe,5),2&i){let o;Hn(o=Gn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Kn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[hi([{provide:x7,useValue:void 0},{provide:A7,useExisting:t}]),bn,kr],ngContentSelectors:NTe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(Qr(PTe),Nn(0),Bt(1,"div",0,1),Dn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),Bt(3,"div",2),Nn(4,1),yn(5,kTe,0,0,"ng-template",3),Ut(),Nn(6,2),Ut()),2&i&&(Gt(1),Vt("@bodyExpansion",r._getExpandedState())("id",r.id),Ii("aria-labelledby",r._headerId),Gt(4),Vt("cdkPortalOutlet",r._portal))},dependencies:[iA],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[E7.bodyExpansion]},changeDetection:0}),e})();class VTe{}const zTe=hk(VTe);let HTe=(()=>{var t;class e extends zTe{constructor(i,r,o,s,a,c,l){super(),this.panel=i,this._element=r,this._focusMonitor=o,this._changeDetectorRef=s,this._animationMode=c,this._parentChangeSubscription=V.EMPTY;const d=i.accordion?i.accordion._stateChanges.pipe(yi(h=>!(!h.hideToggle&&!h.togglePosition))):Le;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Sr(i.opened,i.closed,d,i._inputChanges.pipe(yi(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(yi(()=>i._containsFocus())).subscribe(()=>o.focusVia(r,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:Ic(i)||(i.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i))}}focus(i,r){i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(t=e).\u0275fac=function(i){return new(i||t)(He(C7,1),He(Nt),He(Ff),He(to),He(S7,8),He(Nr,8),Zc("tabindex"))},t.\u0275cmp=Fn({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&Dn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Ii("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),yw("height",r._getHeaderHeight()),Kn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[bn],ngContentSelectors:BTe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(Qr(LTe),Bt(0,"span",0),Nn(1),Nn(2,1),Nn(3,2),Ut(),yn(4,FTe,1,1,"span",1)),2&i&&(Kn("mat-content-hide-toggle",!r._showToggle()),Gt(4),Vt("ngIf",r._showToggle()))},dependencies:[ll],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[E7.indicatorRotate]},changeDetection:0}),e})();function T7(t,e,n){return n?T7(t,e).pipe(ry(n)):new le(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=t(r);return R(e)?()=>e(r,o):void 0})}class Lk extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Z(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new V;const n=this.getSubject();e.add(this.source.subscribe(x(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=V.EMPTY)}return e}refCount(){return function Fk(){return F((t,e)=>{let n=null;t._refCount++;const i=x(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}()(this)}}const $Te={connector:()=>new Ae};function M7(t,e=$Te){const{connector:n}=e;return F((i,r)=>{const o=n();ki(t(function WTe(t){return new le(e=>t.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}function Bk(...t){const e=Ft(t);return F((n,i)=>{const r=t.length,o=new Array(r);let s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)ki(t[c]).subscribe(x(i,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every($e))&&(s=null))},_));n.subscribe(x(i,c=>{if(a){const l=[c,...o];i.next(e?e(...l):l)}}))})}const{isArray:qTe}=Array;function JTe(t){return 1===t.length&&qTe(t[0])?t[0]:t}function D7(...t){const e=Ft(t);return e?ot(D7(...t),ry(e)):F((n,i)=>{bG([n,...JTe(t)])(i)})}const QTe=["youtubeContainer"];let k7=(()=>{var t;class e{get videoId(){return this._videoId.value}set videoId(i){this._videoId.next(i)}get height(){return this._height.value}set height(i){this._height.next(i||390)}get width(){return this._width.value}set width(i){this._width.next(i||640)}set startSeconds(i){this._startSeconds.next(i)}set endSeconds(i){this._endSeconds.next(i)}set suggestedQuality(i){this._suggestedQuality.next(i)}get playerVars(){return this._playerVars.value}set playerVars(i){this._playerVars.next(i)}get disableCookies(){return this._disableCookies.value}set disableCookies(i){this._disableCookies.next(!!i)}constructor(i,r){this._ngZone=i,this._youtubeContainer=new Ae,this._destroyed=new Ae,this._playerChanges=new ce(void 0),this._videoId=new ce(void 0),this._height=new ce(390),this._width=new ce(640),this._startSeconds=new ce(void 0),this._endSeconds=new ce(void 0),this._suggestedQuality=new ce(void 0),this._playerVars=new ce(void 0),this._disableCookies=new ce(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Su(r)}ngOnInit(){if(!this._isBrowser)return;let i=qt(!0);if(!window.YT||!window.YT.Player){const s=new Ae;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>s.next(!0))},i=s.pipe(_i(1),Ea(!1))}const r=this._disableCookies.pipe(Q(s=>s?"https://www.youtube-nocookie.com":void 0)),o=function iMe(t,e,n,i,r,o,s,a){const c=ns([e,n,s]).pipe(Bk(ns([r,o])),Q(([l,d])=>{const[h,p,m]=l,[b,T]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:b,height:T,host:p}}));return ns([t,c,qt(a)]).pipe(function rMe(t){return ot(D7(t),function ZTe(t){return F((e,n)=>{let i=!1,r=0;e.subscribe(x(n,o=>(i||(i=!t(o,r++)))&&n.next(o)))})}(([e,n])=>!n),Q(([e])=>e))}(i),function I7(t,e){return F(function KTe(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(x(s,d=>{const h=l++;c=a?t(c,d,h):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}(oMe,void 0),tt())}(this._youtubeContainer,this._videoId,r,i,this._width,this._height,this._playerVars,this._ngZone).pipe(pr(s=>{this._playerChanges.next(s)}),function nMe(t){return $(e=>e?P7(e)?qt(e):new le(n=>{let i=!1,r=!1;const o=s=>{r=!0,i||(s.target.removeEventListener("onReady",o),n.next(s.target))};return e.addEventListener("onReady",o),()=>{i=!0,r||t(e)}}).pipe(_i(1),Ea(void 0)):qt(void 0))}(s=>{P7(s)||s.destroy()}),fr(this._destroyed),function XTe(t){return t?e=>M7(t)(e):e=>function YTe(t,e){const n=R(t)?t:()=>t;return R(e)?M7(e,{connector:n}):i=>new Lk(i,n)}(new Ae)(e)}());o.subscribe(s=>{this._player=s,s&&this._pendingPlayerState&&this._initializePlayer(s,this._pendingPlayerState),this._pendingPlayerState=void 0}),function eMe(t,e,n){ns([t,e,n]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(o,this._width,this._height),function tMe(t,e){ns([t,e]).subscribe(([n,i])=>n&&i&&n.setPlaybackQuality(i))}(o,this._suggestedQuality),function sMe(t,e,n,i,r,o){const s=ns([n,i]).pipe(Q(([d,h])=>({startSeconds:d,endSeconds:h}))),a=s.pipe(jk(t,d=>!!d&&!function aMe(t){const e=t.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(jk(t,(d,h)=>!!d&&d.videoId!==h));Sr(t.pipe(jk(ns([e,s]),([d,h],p)=>!(!p||d==p.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(Bk(ns([t,e,s,r])),Q(([d,h])=>h),fr(o)).subscribe(([d,h,p,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...p}))})}(o,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),o.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(i,r){this._player?this._player.seekTo(i,r):this._getPendingState().seek={seconds:i,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(i,r){const{playbackState:o,playbackRate:s,volume:a,muted:c,seek:l}=r;switch(o){case YT.PlayerState.PLAYING:i.playVideo();break;case YT.PlayerState.PAUSED:i.pauseVideo();break;case YT.PlayerState.CUED:i.stopVideo()}null!=s&&i.setPlaybackRate(s),null!=a&&i.setVolume(a),null!=c&&(c?i.mute():i.unMute()),null!=l&&i.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(i){return this._playerChanges.pipe(Fe(r=>r?T7(o=>{r.addEventListener(i,o)},o=>{try{r.removeEventListener&&r.removeEventListener(i,o)}catch{}}):qt()),r=>new le(o=>r.subscribe({next:s=>this._ngZone.run(()=>o.next(s)),error:s=>o.error(s),complete:()=>o.complete()})),fr(this._destroyed))}}return(t=e).\u0275fac=function(i){return new(i||t)(He(ln),He(vs))},t.\u0275cmp=Fn({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Xi(QTe,5),2&i){let o;Hn(o=Gn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&ai(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function oMe(t,[e,n,i]){if(t&&n&&(t.playerVars!==n.playerVars||t.host!==n.host))t.destroy();else{if(!n)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(e,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r.host=n.host,r}function P7(t){return"getPlayerStatus"in t}function jk(t,e){return ot(Bk(t),yi(([n,i])=>e(i,n)),Q(([n])=>n))}function N7(t=lMe){return F((e,n)=>{let i=!1;e.subscribe(x(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function lMe(){return new iy}let Hf={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const L7=/[&<>"']/,uMe=new RegExp(L7.source,"g"),B7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,hMe=new RegExp(B7.source,"g"),fMe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},j7=t=>fMe[t];function is(t,e){if(e){if(L7.test(t))return t.replace(uMe,j7)}else if(B7.test(t))return t.replace(hMe,j7);return t}const pMe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function U7(t){return t.replace(pMe,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const mMe=/(^|[^\[])\^/g;function Ji(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r=r.source||r).replace(mMe,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const gMe=/[^\w:]/g,_Me=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function V7(t,e,n){if(t){let i;try{i=decodeURIComponent(U7(n)).replace(gMe,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!_Me.test(n)&&(n=function xMe(t,e){_A[" "+t]||(_A[" "+t]=bMe.test(t)?t+"/":yA(t,"/",!0));const n=-1===(t=_A[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(yMe,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(vMe,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const _A={},bMe=/^[^:]+:\/*[^/]*$/,yMe=/^([^:]+:)[\s\S]*$/,vMe=/^([^:]+:\/*[^/]*)[\s\S]*$/,bA={exec:function(){}};function z7(t,e){const i=t.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function yA(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const o=t.charAt(i-r-1);if(o!==e||n){if(o===e||!n)break;r++}else r++}return t.slice(0,i-r)}function H7(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function G7(t,e,n,i){const r=e.href,o=e.title?is(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:is(s)}}class Uk{constructor(e){this.options=e||Hf}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:yA(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function AMe(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=yA(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,o,s,a,c,l,d,h,p,m,b,T=n[1].trim();const D=T.length>1,U={type:"list",raw:"",ordered:D,start:D?+T.slice(0,-1):"",loose:!1,items:[]};T=D?`\\d{1,9}\\${T.slice(-1)}`:`\\${T}`,this.options.pedantic&&(T=D?T:"[*+-]");const Y=new RegExp(`^( {0,3}${T})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(b=!1,(n=Y.exec(e))&&!this.rules.block.hr.test(e));){if(i=n[0],e=e.substring(i.length),d=n[2].split("\n",1)[0].replace(/^\t+/,Ce=>" ".repeat(3*Ce.length)),h=e.split("\n",1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=n[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=n[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),b=!0),!b){const Ce=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),je=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),qe=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),at=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(p=e.split("\n",1)[0],h=p,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(qe.test(h)||at.test(h)||Ce.test(h)||je.test(e)));){if(h.search(/[^ ]/)>=s||!h.trim())m+="\n"+h.slice(s);else{if(c||d.search(/[^ ]/)>=4||qe.test(d)||at.test(d)||je.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=p+"\n",e=e.substring(p.length+1),d=h.slice(s)}}U.loose||(l?U.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(o="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),U.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:m}),U.raw+=i}U.items[U.items.length-1].raw=i.trimRight(),U.items[U.items.length-1].text=m.trimRight(),U.raw=U.raw.trimRight();const ye=U.items.length;for(a=0;a<ye;a++)if(this.lexer.state.top=!1,U.items[a].tokens=this.lexer.blockTokens(U.items[a].text,[]),!U.loose){const Ce=U.items[a].tokens.filter(qe=>"space"===qe.type),je=Ce.length>0&&Ce.some(qe=>/\n.*\n/.test(qe.raw));U.loose=je}if(U.loose)for(a=0;a<ye;a++)U.items[a].loose=!0;return U}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):is(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:o}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:z7(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];let o,s,a,c,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=z7(i.rows[o],i.header.length).map(l=>({text:l}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:is(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):is(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=yA(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function wMe(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}(n[2],"()");if(s>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),G7(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return G7(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+s);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const p=e.slice(0,s+r.index+(r[0].length-a.length)+c);if(Math.min(s,c)%2){const b=p.slice(1,-1);return{type:"em",raw:p,text:b,tokens:this.lexer.inlineTokens(b)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=is(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return"@"===i[2]?(r=is(this.options.mangle?n(i[1]):i[1]),o="mailto:"+r):(r=is(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if("@"===i[2])r=is(this.options.mangle?n(i[0]):i[0]),o="mailto:"+r;else{let s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=is(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):is(i[0]):i[0]:is(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Tn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:bA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Tn.def=Ji(Tn.def).replace("label",Tn._label).replace("title",Tn._title).getRegex(),Tn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Tn.listItemStart=Ji(/^( *)(bull) */).replace("bull",Tn.bullet).getRegex(),Tn.list=Ji(Tn.list).replace(/bull/g,Tn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Tn.def.source+")").getRegex(),Tn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Tn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Tn.html=Ji(Tn.html,"i").replace("comment",Tn._comment).replace("tag",Tn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Tn.paragraph=Ji(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.blockquote=Ji(Tn.blockquote).replace("paragraph",Tn.paragraph).getRegex(),Tn.normal={...Tn},Tn.gfm={...Tn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Tn.gfm.table=Ji(Tn.gfm.table).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.gfm.paragraph=Ji(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Tn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.pedantic={...Tn.normal,html:Ji("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Tn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ji(Tn.normal._paragraph).replace("hr",Tn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Tn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const dn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:bA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:bA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function SMe(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function W7(t){let n,i,e="";const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}dn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",dn.punctuation=Ji(dn.punctuation).replace(/punctuation/g,dn._punctuation).getRegex(),dn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,dn.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,dn._comment=Ji(Tn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),dn.emStrong.lDelim=Ji(dn.emStrong.lDelim).replace(/punct/g,dn._punctuation).getRegex(),dn.emStrong.rDelimAst=Ji(dn.emStrong.rDelimAst,"g").replace(/punct/g,dn._punctuation).getRegex(),dn.emStrong.rDelimUnd=Ji(dn.emStrong.rDelimUnd,"g").replace(/punct/g,dn._punctuation).getRegex(),dn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,dn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,dn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,dn.autolink=Ji(dn.autolink).replace("scheme",dn._scheme).replace("email",dn._email).getRegex(),dn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,dn.tag=Ji(dn.tag).replace("comment",dn._comment).replace("attribute",dn._attribute).getRegex(),dn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,dn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,dn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,dn.link=Ji(dn.link).replace("label",dn._label).replace("href",dn._href).replace("title",dn._title).getRegex(),dn.reflink=Ji(dn.reflink).replace("label",dn._label).replace("ref",Tn._label).getRegex(),dn.nolink=Ji(dn.nolink).replace("ref",Tn._label).getRegex(),dn.reflinkSearch=Ji(dn.reflinkSearch,"g").replace("reflink",dn.reflink).replace("nolink",dn.nolink).getRegex(),dn.normal={...dn},dn.pedantic={...dn.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ji(/^!?\[(label)\]\((.*?)\)/).replace("label",dn._label).getRegex(),reflink:Ji(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dn._label).getRegex()},dn.gfm={...dn.normal,escape:Ji(dn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},dn.gfm.url=Ji(dn.gfm.url,"i").replace("email",dn.gfm._extended_email).getRegex(),dn.breaks={...dn.gfm,br:Ji(dn.br).replace("{2,}","*").getRegex(),text:Ji(dn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class $u{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Hf,this.options.tokenizer=this.options.tokenizer||new Uk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Tn.normal,inline:dn.normal};this.options.pedantic?(n.block=Tn.pedantic,n.inline=dn.pedantic):this.options.gfm&&(n.block=Tn.gfm,n.inline=this.options.breaks?dn.breaks:dn.gfm),this.tokenizer.rules=n}static get rules(){return{block:Tn,inline:dn}}static lex(e,n){return new $u(n).lex(e)}static lexInline(e,n){return new $u(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=n[n.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+H7("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+H7("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,W7)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,W7))){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(function(m){p=m.call({lexer:this},h),"number"==typeof p&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,SMe)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return n}}class Oy{constructor(e){this.options=e||Hf}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+is(r)+'">'+(i?e:is(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:is(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,n,i,r){return this.options.headerIds?`<h${n} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${n}>\n`:`<h${n}>${e}</h${n}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(null===(e=V7(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(null===(e=V7(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class $7{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class Y7{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class Yu{constructor(e){this.options=e||Hf,this.options.renderer=this.options.renderer||new Oy,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new $7,this.slugger=new Y7}static parse(e,n){return new Yu(n).parse(e)}static parseInline(e,n){return new Yu(n).parseInline(e)}parse(e,n=!0){let r,o,s,a,c,l,d,h,p,m,b,T,D,U,Y,ye,Ce,je,qe,i="";const at=e.length;for(r=0;r<at;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(qe=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==qe||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=qe||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,U7(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(m.header[o].tokens),{header:!0,align:m.align[o]});for(h+=this.renderer.tablerow(d),p="",a=m.rows.length,o=0;o<a;o++){for(l=m.rows[o],d="",c=l.length,s=0;s<c;s++)d+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:m.align[s]});p+=this.renderer.tablerow(d)}i+=this.renderer.table(h,p);continue;case"blockquote":p=this.parse(m.tokens),i+=this.renderer.blockquote(p);continue;case"list":for(b=m.ordered,T=m.start,D=m.loose,a=m.items.length,p="",o=0;o<a;o++)Y=m.items[o],ye=Y.checked,Ce=Y.task,U="",Y.task&&(je=this.renderer.checkbox(ye),D?Y.tokens.length>0&&"paragraph"===Y.tokens[0].type?(Y.tokens[0].text=je+" "+Y.tokens[0].text,Y.tokens[0].tokens&&Y.tokens[0].tokens.length>0&&"text"===Y.tokens[0].tokens[0].type&&(Y.tokens[0].tokens[0].text=je+" "+Y.tokens[0].tokens[0].text)):Y.tokens.unshift({type:"text",text:je}):U+=je),U+=this.parse(Y.tokens,D),p+=this.renderer.listitem(U,Ce,ye);i+=this.renderer.list(p,b,T);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(p=m.tokens?this.parseInline(m.tokens):m.text;r+1<at&&"text"===e[r+1].type;)m=e[++r],p+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=n?this.renderer.paragraph(p):p;continue;default:{const pt='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(pt);throw new Error(pt)}}return i}parseInline(e,n){n=n||this.renderer;let r,o,s,i="";const a=e.length;for(r=0;r<a;r++)if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=s||"";else switch(o.type){case"escape":case"text":i+=n.text(o.text);break;case"html":i+=n.html(o.text);break;case"link":i+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break;case"image":i+=n.image(o.href,o.title,o.text);break;case"strong":i+=n.strong(this.parseInline(o.tokens,n));break;case"em":i+=n.em(this.parseInline(o.tokens,n));break;case"codespan":i+=n.codespan(o.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(o.tokens,n));break;default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class vA{constructor(e){this.options=e||Hf}preprocess(e){return e}postprocess(e){return e}}function X7(t,e){return(n,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},s=function CMe(t,e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+is(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):n?void n(null,r):r}if(e)return Promise.reject(i);if(!n)throw i;n(i)}}((i={...Mn.defaults,...o}).silent,i.async,r);if(typeof n>"u"||null===n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function EMe(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(n=i.hooks.preprocess(n)),c=t(n,i)}catch(h){return s(h)}const l=function(h){let p;if(!h)try{i.walkTokens&&Mn.walkTokens(c,i.walkTokens),p=e(c,i),i.hooks&&(p=i.hooks.postprocess(p))}catch(m){h=m}return i.highlight=a,h?s(h):r(null,p)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return Mn.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(p,m){if(p)return l(p);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(Mn.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(n=i.hooks.preprocess(n));const a=t(n,i);i.walkTokens&&Mn.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}function Mn(t,e,n){return X7($u.lex,Yu.parse)(t,e,n)}ve(vA,"passThroughHooks",new Set(["preprocess","postprocess"])),Mn.options=Mn.setOptions=function(t){return function dMe(t){Hf=t}(Mn.defaults={...Mn.defaults,...t}),Mn},Mn.getDefaults=function F7(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Mn.defaults=Hf,Mn.use=function(...t){const e=Mn.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i={...n};if(i.async=Mn.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...s){let a=r.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=Mn.defaults.renderer||new Oy;for(const o in n.renderer){const s=r[o];r[o]=(...a)=>{let c=n.renderer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.renderer=r}if(n.tokenizer){const r=Mn.defaults.tokenizer||new Uk;for(const o in n.tokenizer){const s=r[o];r[o]=(...a)=>{let c=n.tokenizer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.tokenizer=r}if(n.hooks){const r=Mn.defaults.hooks||new vA;for(const o in n.hooks){const s=r[o];r[o]=vA.passThroughHooks.has(o)?a=>{if(Mn.defaults.async)return Promise.resolve(n.hooks[o].call(r,a)).then(l=>s.call(r,l));const c=n.hooks[o].call(r,a);return s.call(r,c)}:(...a)=>{let c=n.hooks[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.hooks=r}if(n.walkTokens){const r=Mn.defaults.walkTokens;i.walkTokens=function(o){let s=[];return s.push(n.walkTokens.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}Mn.setOptions(i)})},Mn.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(Mn,i)),i.type){case"table":for(const r of i.header)n=n.concat(Mn.walkTokens(r.tokens,e));for(const r of i.rows)for(const o of r)n=n.concat(Mn.walkTokens(o.tokens,e));break;case"list":n=n.concat(Mn.walkTokens(i.items,e));break;default:Mn.defaults.extensions&&Mn.defaults.extensions.childTokens&&Mn.defaults.extensions.childTokens[i.type]?Mn.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(Mn.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(Mn.walkTokens(i.tokens,e)))}return n},Mn.parseInline=X7($u.lexInline,Yu.parseInline),Mn.Parser=Yu,Mn.parser=Yu.parse,Mn.Renderer=Oy,Mn.TextRenderer=$7,Mn.Lexer=$u,Mn.lexer=$u.lex,Mn.Tokenizer=Uk,Mn.Slugger=Y7,Mn.Hooks=vA,Mn.parse=Mn;const TMe=["*"];let K7=(()=>{var t;class e{constructor(){this._buttonClick$=new Ae,this.copied$=this._buttonClick$.pipe(Fe(()=>Sr(qt(!0),gk(3e3).pipe(function Sk(t){return Q(()=>t)}(!1)))),tt(),Ms(1)),this.copiedText$=this.copied$.pipe(Ea(!1),Q(i=>i?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Fn({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Bt(0,"button",0),Dn("click",function(){return r.onCopyToClipboardClick()}),ma(1,"async"),Di(2),ma(3,"async"),Ut()),2&i&&(Kn("copied",al(1,3,r.copied$)),Gt(2),Ya(al(3,5,r.copiedText$)))},dependencies:[n0],encapsulation:2,changeDetection:0}),e})();class DMe{}var Vk=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(Vk||{});class OMe{}const q7=new bt("SECURITY_CONTEXT");let zk=(()=>{var t;class e{get options(){return this._options}set options(i){this._options={...this.DEFAULT_MARKED_OPTIONS,...i}}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,o,s,a,c){this.platform=i,this.securityContext=r,this.http=o,this.clipboardOptions=s,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Oy},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ae,this.reload$=this._reload$.asObservable(),this.options=a}parse(i,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:o,inline:s,emoji:a,mermaid:c,disableSanitizer:l}=r,d={...this.options,...r.markedOptions};c&&(this.renderer=this.extendRenderer(d.renderer||new Oy));const h=this.trimIndentation(i),p=o?this.decodeHtml(h):h,m=a?this.parseEmoji(p):p,b=this.parseMarked(m,d,s);return(l?b:this.sanitizer.sanitize(this.securityContext,b))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,o){const{clipboard:s,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=r;s&&this.renderClipboard(i,o,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...a}),c&&this.renderKatex(i,{...this.DEFAULT_KATEX_OPTIONS,...l}),d&&this.renderMermaid(i,{...this.DEFAULT_MERMAID_OPTIONS,...h}),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(i,{responseType:"text"}).pipe(Q(r=>this.handleExtension(i,r)))}highlight(i){if(!Su(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);const r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,o=>o.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!Su(this.platform))return i;const r=document.createElement("textarea");return r.innerHTML=i,r.value}extendRenderer(i){const r=i;if(!0===r.\u0275NgxMarkdownRendererExtended)return i;const o=i.code;return i.code=function(s,a,c){return"mermaid"===a?`<div class="mermaid">${s}</div>`:o.call(this,s,a,c)},r.\u0275NgxMarkdownRendererExtended=!0,i}handleExtension(i,r){const o=i.lastIndexOf("://"),s=o>-1?i.substring(o+4):i,a=s.lastIndexOf("/"),c=a>-1?s.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&"md"!==d?"```"+d+"\n"+r+"\n```":r}parseMarked(i,r,o=!1){return o?Mn.parseInline(i,r):Mn.parse(i,r)}parseEmoji(i){if(!Su(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(Su(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(i,r)}}renderClipboard(i,r,o){if(!Su(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:a}=o,c=i.querySelectorAll("pre");for(let l=0;l<c.length;l++){const d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);const p=document.createElement("div");let m,b;p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.opacity="0",p.style.transition="opacity 250ms ease-out",h.insertAdjacentElement("beforeend",p),d.onmouseover=()=>p.style.opacity="1",d.onmouseout=()=>p.style.opacity="0",m=s?r.createComponent(s).hostView:a?r.createEmbeddedView(a):r.createComponent(K7).hostView,m.rootNodes.forEach(T=>{T.onmouseover=()=>p.style.opacity="1",p.appendChild(T),b=new ClipboardJS(T,{text:()=>d.innerText})}),m.onDestroy(()=>b.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!Su(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const o=i.querySelectorAll(".mermaid");0!==o.length&&(mermaid.initialize(r),mermaid.init(o))}trimIndentation(i){if(!i)return"";let r;return i.split("\n").map(o=>{let s=r;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(r)&&(r=s),s?o.substring(s):o}).join("\n")}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(vs),nt(q7),nt(yg,8),nt(DMe,8),nt(OMe,8),nt(s0))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),J7=(()=>{var t;class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(i){this._srcRelativeLink=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,o){this.element=i,this.markdownService=r,this.viewContainerRef=o,this.error=new tn,this.load=new tn,this.ready=new tn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new Ae}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(fr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){let o;this.src&&this.srcRelativeLink&&(o={baseUrl:new URL(this.src,location.origin).pathname});const a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},c=this.markdownService.parse(i,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:o,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=c,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(i){return null!=i&&"false"!=`${String(i)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i),this.load.emit(i)},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Vk.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Vk.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++){const a=r instanceof Array?r:[r];o.item(s).classList.add(...a)}}setPluginOptions(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(r).forEach(a=>{const c=r[a];if(c){const l=this.toLispCase(a);o.item(s).setAttribute(l,c.toString())}})}toLispCase(i){const r=i.match(/([A-Z])/g);if(!r)return i;let o=i.toString();for(let s=0,a=r.length;s<a;s++)o=o.replace(new RegExp(r[s]),"-"+r[s].toLowerCase());return"-"===o.slice(0,1)&&(o=o.slice(1)),o}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Nt),He(zk),He(No))},t.\u0275cmp=Fn({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[kr],ngContentSelectors:TMe,decls:1,vars:0,template:function(i,r){1&i&&(Qr(),Nn(0))},encapsulation:2}),e})();var Z7;!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(Z7||(Z7={}));let Q7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Lt({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]}),e})();function xg(t){return!0===t}function Qs(t){return null===t||typeof t>"u"}function rs(t){return!Qs(t)}function Hk(t){return!!t}function oW(t){return Qs(t)?t:JSON.parse(JSON.stringify(t))}function sW(t){return rs(t)&&"object"==typeof t&&function Gk(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}const AIe="NGXS_COMPUTED_OPTION",lW="NGXS_DATA_META",Wk="NGXS_META",dW="NGXS_ARGUMENT_REGISTRY_META";let uW=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new ce(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(nt(Sl,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();function Py(t){return t[lW]}let sc=(()=>{class t{constructor(n,i,r){t.store=n.get(Sl),t.ngZone=n.get(ln),t.factory=i,t.context=r,t.computed=n.get(uW),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(nt(xr),nt(Mz),nt(Iz))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();class Wr{constructor(){Wr.statesCachedMeta.clear()}static createStateContext(e){return sc.context.createStateContext(e)}static ensureMappedState(e){if(Qs(sc.factory)||Qs(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(rs(e.name)?Wr.statesCachedMeta.get(e.name):null)||Wr.ensureMeta(e)}static getRepositoryByInstance(e){const i=Py(Wr.getStateClassByInstance(e))??null;if(Qs(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=Wr.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=n?.getPayloadTypeByIndex(o);rs(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=Wr.createPayload(n,i),o=function MIe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new o(r)}static ensureMeta(e){const n=rs(e.name)?sc.factory.states?.find(i=>i.name===e.name):null;return rs(n)&&rs(e.name)&&Wr.statesCachedMeta.set(e.name,n),n}}Wr.statesCachedMeta=new Map,Wr.\u0275fac=function(e){return new(e||Wr)},Wr.\u0275prov=St({token:Wr,factory:Wr.\u0275fac}),new class IIe{constructor(){this.subject=new Sm(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function Sd(t,e){const n=arguments.length>=2;return i=>i.pipe(t?yi((r,o)=>t(r,o,i)):$e,_i(1),n?ag(e):N7(()=>new iy))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Sm(1)}};class RIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${rs(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function hW(t){return t.NGXS_OPTIONS_META??{name:""}}function fW(t){const e=hW(t),n=e.children??[],r=oW(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(sW(r))return function OIe(t,e){return e.reduce((n,i)=>{const r=hW(i);if(function ky(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=fW(i),n},t??{})}(r,n);throw new RIe(r)}return r}function pW(){return`__${AIe}__`}function mW(t){return t[pW()]??null}function gW(){return sc?.computed?.sequenceValue??0}function NIe(t){let e=!1;return Tf(t)&&(e=!0),e}function $k(t){return t[dW]}class FIe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class LIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(Hk(this.argumentMap.has(e))||Hk(this.payloadMap.has(e)))throw new FIe(e,n)}}function HIe(t){return{enumerable:!0,configurable:!0,get(){const e=Py(t),n=Wr.ensureMappedState(e.stateMeta);return Wr.createStateContext(n)}}}const KIe={dataActionSubscribeRequired:!0},qIe=new bt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>KIe});let JIe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[Wr,sc,uW,...n]}}}return t.\u0275fac=function(n){return new(n||t)(nt(Wr,2),nt(sc,2))},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),t})();function _W(){return(t,e,n)=>{!function TIe(t,e){if(!function _Ie(t,e){let n=t,i=!1;if(sW(n))for(;null!==n;){if(xg(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const o=function PIe(t){return Qs(mW(t))&&Object.defineProperties(t,{[pW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),mW(t)}(this),s=o?.get(i);if(xg(s?.isObservable))return s?.value;if(Qs(s)||s.sequenceId!==gW()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:gW(),isObservable:NIe(c)}),c}return s?.value},n}}const ZIe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function Yk(t={}){const e=function QIe(t){const e=sc?.injector?.get(qIe,void 0,pn.Optional),n={...ZIe};return rs(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function CIe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=Wr.getRepositoryByInstance(c),h=d.operations;let p=h[s];const m=d.stateMeta,b=$k(o);if(Qs(p)){const ye=function XIe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),Ce=function DIe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let o="";for(let s=0;s<n.length;s++)rs(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):rs(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==n.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:ye,argumentRegistry:b});p=h[s]={type:Ce,options:{cancelUncompleted:e.cancelUncompleted??!1}},rs(p)&&(m.actions[p.type]=[{type:p.type,options:p.options,fn:p.type}])}Wr.ensureMappedState(m).instance[p.type]=()=>(xg(e.insideZone)?sc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),Tf(l)&&xg(e.subscribeRequired)?qt(null).pipe(Q(()=>l)):l);const U=Wr.createAction(p,a,b),Y=sc.store.dispatch(U);return Tf(l)?function kIe(t,e){return oy([t,e]).pipe(Q(n=>n.pop()))}(Y,l):l},r}}function bW(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function BIe(t,e){const n=t[e];return Qs($k(n))&&Object.defineProperties(n,{[dW]:{enumerable:!0,configurable:!0,value:new LIe}}),$k(n)})(e,n).createPayloadType(r,n,i)}}function tDe(){return t=>{const e=function YIe(t){if(function sIe(t){return!Hk(t)}(t.hasOwnProperty(Wk))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Wk,{value:e})}return function $Ie(t){return t?.[Wk]}(t)}(t);if(Qs(e.name))throw new Error("@StateRepository should be add before decorator @State");!function VIe(t,e){(function UIe(t){const e=Py(t)??null;return(Qs(e)||e?.stateClass!==t)&&function jIe(t){Object.defineProperty(t,lW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),Py(t)}(t)).stateMeta=e}(t,e),function nDe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>oW(n)},context:HIe(t)})}(t,e,fW(t)),function GIe(t){const n=Py(t)?.stateMeta?.name??null;if(rs(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(rs(this[i]))return this[i];if(Qs(sc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=sc.store.select(t).pipe(Q(r=>r),Ms({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let iDe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new Ae,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})(),rDe=(()=>{class t extends iDe{get snapshot(){return this.getState()}get ctx(){return function WIe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Li(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac}),vt([_W(),v("design:type",Object),v("design:paramtypes",[])],t.prototype,"snapshot",null),vt([Yk(),mt(0,bW("patchValue")),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],t.prototype,"patchState",null),vt([Yk(),mt(0,bW("stateValue")),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],t.prototype,"setState",null),vt([Yk(),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],t.prototype,"reset",null),t})();const VA=new bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),mP=new bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Ht(Wn);if(!t)throw new Error("Window is not available");return t}}),p2e=new bt("ngx-data-layer",{providedIn:"root",factory:()=>function f2e(t){return t?t.dataLayer=t.dataLayer||[]:null}(Ht(mP))}),y$=new bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function m2e(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Ht(mP),Ht(p2e))});let v$=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,o){try{const s=new Map([["page_path",n]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(n,i,r,o,s){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(nt(VA),nt(Wn),nt(y$))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new bt("ngx-google-analytics-routing-settings",{factory:()=>({})}),new bt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});class C$ extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class $2e{constructor(){this.cancelUncompleted$=new Ae}cancelPreviousAction(){this.cancelUncompleted$.next()}}const gP="\u0275fac",T$=Symbol("InjectorInstance"),M$=Symbol("FactoryHasBeenDecorated");function I$(t,e){const n=t[T$];return n?n.get(e):null}const K2e={cancelUncompleted:!1};function D$(t=K2e){return(e,n,i)=>{let r;const o=function Y2e(t){return t?new $2e:null}(t.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=I$(this,Sl)||function G2e(){throw new C$}(),c=I$(this,ln)||function W2e(){throw new C$}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function H2e(t,e,n){return _m(e)?function z2e(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):Tf(e)?function V2e(t,e,n){return null!==n&&(e=e.pipe(fr(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,n,{set:a=>r=a,get:()=>s}),function X2e(t){if(M$ in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[gP]&&function _P(t){const e=t[gP];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[T$]=He(Zp),r};n&&(n.factory=i),Object.defineProperty(t,gP,{get:()=>i})}(e),t.constructor.prototype[M$]=!0}(e)}}var $f;const UOe=["bodyCanvas"];let VOe=(()=>{var t;class e{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new tn,this.nodeDrag=new tn,this.nodeClick=new tn,this.nodeHoverStart=new tn,this.nodeHoverStop=new tn,this.initialized=new tn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,r={x:48,y:48}){if(this.bodyCanvas){const{width:o,height:s}=this.bodyCanvas.nativeElement,a=window.devicePixelRatio,c=Math.min(Math.log2((o-r.x)/a/i.x),Math.log2((s-r.y)/a/i.y));this.zoom=c}}setupBodyUI(){var i=this;return jt(function*(){const r=i.bodyCanvas.nativeElement,o=new $xe({id:"body-ui",canvas:r,zoom:i.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:i.interactive,camera:i.camera});r.addEventListener("contextmenu",s=>s.preventDefault()),yield o.initialize(),i.bodyUI=o,window.bodyUI=o,i.scene?.length>0&&i.bodyUI.setScene(i.scene),i.bounds&&i.zoomToBounds(i.bounds),i.target&&i.bodyUI.setTarget(i.target),i.subscriptions=[i.bodyUI.sceneRotation$.subscribe(s=>i.rotationChange.next(s)),i.bodyUI.nodeDrag$.subscribe(s=>i.nodeDrag.emit(s)),i.bodyUI.nodeClick$.subscribe(s=>i.nodeClick.emit(s)),i.bodyUI.nodeHoverStart$.subscribe(s=>i.nodeHoverStart.emit(s)),i.bodyUI.nodeHoverStop$.subscribe(s=>i.nodeHoverStop.emit(s))],i.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Fn({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Xi(UOe,5,Nt),2&i){let o;Hn(o=Gn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&$a(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&ai(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),e})(),zOe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=on({type:t}),t.\u0275inj=cn({imports:[Mr]}),e})();function ake(t,e){if(1&t&&(Bt(0,"div",16),ai(1,"youtube-player",17),Ut()),2&t){const n=Rn(3);Gt(1),_w("videoId",n.videoID)}}function cke(t,e){if(1&t&&(Bt(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Di(3),Ut()(),Bt(4,"div",13),ai(5,"markdown",14),yn(6,ake,2,1,"div",15),Ut()()),2&t){const n=Rn(),i=n.index,r=n.$implicit;Vt("expanded",0===i),Gt(3),Ya(r.title),Gt(2),Kn("first",0===i),Vt("data",r.content),Gt(1),Vt("ngIf",0===i)}}function lke(t,e){if(1&t&&(Bt(0,"div",9),yn(1,cke,7,6,"mat-expansion-panel",10),Ut()),2&t){const n=e.$implicit;Gt(1),Vt("ngIf",n)}}new bt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name)).filter(t=>!0!==t.disabled);let G$=(()=>{var t;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.documentationContents=r.content||[],this.infoTitle=r.title||"",this.videoID=r.videoID}ngOnInit(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Pk),He(f7))},t.\u0275cmp=Fn({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Bt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Di(5),Ut(),Bt(6,"div",5)(7,"mat-icon",6),Dn("click",function(){return r.close()}),Di(8,"clear"),Ut()()(),Bt(9,"mat-dialog-content",7),yn(10,lke,2,1,"div",8),Ut()()()()),2&i&&(Gt(5),Ya(r.infoTitle),Gt(5),Vt("ngForOf",r.documentationContents))},dependencies:[nf,ll,m7,g7,vg,C7,HTe,k7,J7],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e})(),W$=(()=>{var t;class e{constructor(i){this.http=i,this.panelContent=new ce({content:[],infoTitle:"",videoID:""})}updateData(i,r,o){this.http.get(i,{responseType:"text"}).subscribe(s=>{const a={content:this.parseMarkdown(s),infoTitle:o,videoID:r};this.panelContent.next(a)})}parseMarkdown(i){const r=[],o=i.split("# ");for(const s of o)if(s.length){const a=s.includes("\n\n")?"\n\n":"\r\n\r\n",c=s.split(a);r.push({title:c[0],content:c.splice(1).join(a)})}return r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(yg))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),uke=(()=>{var t;class e{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new tn,this.closeClicked=new tn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Fn({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&$a(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Bt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Di(5),Ut(),Bt(6,"mat-icon",5),Dn("click",function(){return r.close()}),Di(7,"clear"),Ut()(),ai(8,"img",6),Bt(9,"mat-dialog-content",7)(10,"div",8),Di(11),Ut(),Bt(12,"a",9),Dn("click",function(){return r.onDialogButtonClick()}),Ut()()()()()),2&i&&(Gt(5),Ya(r.infoTitle),Gt(3),Vt("src",r.imageUrl,db),Gt(3),pa(" ",r.message,""),Gt(1),Vt("text",r.callToAction))},dependencies:[vg,m7,g7,Q7],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),e})(),qy=(()=>{var t;let e=((t=class extends rDe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function oDe(){return yi(t=>null!=t)}(),Ms(1))}setConfig(i){this.setState(i)}patchConfig(i){this.patchState(i)}getProperty(i){return this.config$.pipe(O9(...i),tt(),Ms(1))}getOption(...i){const r=this.getPathKey(i);if(this.optionCache.has(r))return this.optionCache.get(r);const o=this.config$.pipe(O9(...i),tt(),Ms(1));return this.optionCache.set(r,o),o}getPathKey(i){return`${i.length}:${i.join(".")}`}}).\u0275fac=function(){let n;return function(r){return(n||(n=Li(t)))(r||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac}),t);return vt([_W()],e.prototype,"config$",null),e=vt([tDe(),eH({name:"globalConfig",defaults:null})],e),e})();!function pke(){const t=localStorage.getItem("ALLOW_TELEMETRY");null===t||t.toLowerCase()}(),new Ae;let yP=(()=>{class e{}return e.type="[CallToAction] Learn More",e})(),vP=(()=>{class e{}return e.type="[CallToAction] Open Dialog",e})(),xP=(()=>{class e{}return e.type="[CallToAction] Close Dialog",e})();var wP;class Md{get length(){return Md.storage?.length??0}key(e){return Md.storage?.key(e)??null}getItem(e,n){return Md.storage?.getItem(e)??n??null}setItem(e,n){try{return Md.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){Md.storage?.removeItem(e)}clear(){Md.storage?.clear()}}($f=Md).storage=(()=>{let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length?t:void 0}})(),$f.\u0275fac=function(e){return new(e||$f)},$f.\u0275prov=St({token:$f,factory:$f.\u0275fac,providedIn:"root"});const K$="callToActionPopupShown";let Ku=(()=>{var t;let e=(t=class{static ctaDatePassed(i,r=Date.now){return+r()>+new Date(i)}constructor(i,r,o,s,a){this.dialog=i,this.ga=r,this.storage=o,this.infoService=s,this.http=a}ngxsOnInit(i){const{expirationDate:r,popupShown:o}=i.getState(),s=this.storage.getItem(K$,`${o}`),a=wP.ctaDatePassed(r);"true"!==s&&!a&&i.dispatch(new vP)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(Q(i=>this.infoService.parseMarkdown(i)))}launchLearnMore(i){this.dialog.open(G$,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:i,videoID:"UfxMpzatowE"}})}learnMore(i){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(pr(r=>this.launchLearnMore(r)))}open(i){this.dialog.open(bke,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(K$,"true"),i.patchState({popupShown:!0})}close(i){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},wP=t,t.\u0275fac=function(i){return new(i||t)(nt(gA),nt(v$),nt(Md),nt(W$),nt(yg))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t);return vt([CO(yP)],e.prototype,"learnMore",null),vt([CO(vP)],e.prototype,"open",null),vt([CO(xP)],e.prototype,"close",null),e})();Ku=wP=vt([eH({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Ku);let HA=(()=>{class t{static title(n){return n.title}static message(n){return n.message}static callToAction(n){return n.callToAction}static imageUrl(n){return n.imageUrl}static expirationDate(n){return n.expirationDate}static popupShown(n){return n.popupShown}}return vt([dg([Ku])],t,"title",null),vt([dg([Ku])],t,"message",null),vt([dg([Ku])],t,"callToAction",null),vt([dg([Ku])],t,"imageUrl",null),vt([dg([Ku])],t,"expirationDate",null),vt([dg([Ku])],t,"popupShown",null),t})(),bke=(()=>{var t;class e{constructor(){this.close=()=>new xP,this.learnMore=()=>new yP}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Fn({type:t,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Bt(0,"ccf-call-to-action",0),Dn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),ma(1,"async"),ma(2,"async"),ma(3,"async"),ma(4,"async"),Ut()),2&i&&Vt("infoTitle",al(1,4,r.title$))("message",al(2,6,r.message$))("callToAction",al(3,8,r.callToAction$))("imageUrl",al(4,10,r.imageUrl$))},dependencies:[uke,n0],changeDetection:0}),vt([S1(HA.title)],e.prototype,"title$",void 0),vt([S1(HA.message)],e.prototype,"message$",void 0),vt([S1(HA.callToAction)],e.prototype,"callToAction$",void 0),vt([S1(HA.imageUrl)],e.prototype,"imageUrl$",void 0),vt([D$()],e.prototype,"close",void 0),vt([D$()],e.prototype,"learnMore",void 0),e})();const q$="http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity",Eke=[173,255,47,229.5];var Mke=C(5020),Ike=C(4938),Dke=C(7991),$i=C(6990),Jy=C(9689),Rke=C(7661);const Zy="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Qy="http://www.w3.org/2001/XMLSchema#",EP="http://www.w3.org/2000/10/swap/",Ds={xsd:{decimal:`${Qy}decimal`,boolean:`${Qy}boolean`,double:`${Qy}double`,integer:`${Qy}integer`,string:`${Qy}string`},rdf:{type:`${Zy}type`,nil:`${Zy}nil`,first:`${Zy}first`,rest:`${Zy}rest`,langString:`${Zy}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${EP}reify#forSome`,forAll:`${EP}reify#forAll`},log:{implies:`${EP}log#implies`}};function AP(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);n[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||Ni,i}const{rdf:Oke,xsd:Yf}=Ds;let ev,kke=0;const Z$=/^"(.*".*)(?="[^"]*$)/,Pke=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,SP={namedNode:function jke(t){return new Q$(t)},blankNode:function Uke(t){return new Nke(t||"n3-"+kke++)},variable:function zke(t){return new Fke(t)},literal:function Vke(t,e){if("string"==typeof e)return new Rg(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=Yf.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?Yf.integer:Yf.double:(n=Yf.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new Rg(""===n||n===Yf.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function Hke(){return ev},quad:eY,triple:eY},Ni=SP;class Id{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Id?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Q$ extends Id{get termType(){return"NamedNode"}}class Rg extends Id{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new Q$(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?Yf.string:Oke.langString}equals(e){return e instanceof Rg?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Nke extends Id{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Fke extends Id{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Dd(t,e){if(e=e||SP,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===SP)return new Rg(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const i=Pke.exec(t);return e.quad(Dd(GA(i[1]),e),Dd(GA(i[2]),e),Dd(GA(i[3]),e),i[4]&&Dd(GA(i[4]),e));default:return e.namedNode(t)}}function ji(t){if("string"==typeof t)return t;if(t instanceof Id&&"Quad"!==t.termType)return t.id;if(!t)return ev.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Yf.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${CP(ji(t.subject))} ${CP(ji(t.predicate))} ${CP(ji(t.object))}${function J$(t){return!!t&&"DefaultGraph"===t.termType}(t.graph)?"":` ${ji(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}ev=new class Lke extends Id{constructor(){return super(""),ev||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class Bke extends Id{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||ev}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function CP(t){return t.replace(Z$,(e,n)=>`"${n.replace(/"/g,'""')}`)}function GA(t){return t.replace(Z$,(e,n)=>`"${n.replace(/""/g,'"')}`)}function eY(t,e,n,i){return new Bke(t,e,n,i)}var Gke=C(3410),Wke=C.n(Gke);const{xsd:WA}=Ds,$ke=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,tY={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Yke=/[\x00-\x20<>\\"\{\}\|\^\`]/,Xke={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Kke=/$0^/;class qke{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in Xke)&&this[n]instanceof RegExp&&(this[n]=Kke)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",p="",m="",b=null,T=0,D=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(T=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){D=!0;break}case"<":if(b=this._unescapedIri.exec(i))h="IRI",p=b[1];else if(b=this._iri.exec(i)){if(p=this._unescape(b[1]),null===p||Yke.test(p))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",T=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",T=2,p=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",T=2);break;case"_":((b=this._blank.exec(i))||n&&(b=this._blank.exec(`${i} `)))&&(h="blank",m="_",p=b[1]);break;case'"':if(b=this._simpleQuotedString.exec(i))p=b[1];else if(({value:p,matchLength:T}=this._parseLiteral(i)),null===p)return s(this);(null!==b||0!==T)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(b=this._simpleApostropheString.exec(i))p=b[1];else if(({value:p,matchLength:T}=this._parseLiteral(i)),null===p)return s(this);(null!==b||0!==T)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(b=this._variable.exec(i))&&(h="var",p=b[0]);break;case"@":"literal"===this._previousMarker&&(b=this._langcode.exec(i))?(h="langcode",p=b[1]):(b=this._keyword.exec(i))&&(h=b[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",T=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(b=this._number.exec(i)||n&&(b=this._number.exec(`${i} `)))&&(h="literal",p=b[0],m="string"==typeof b[1]?WA.double:"string"==typeof b[2]?WA.decimal:WA.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(b=this._sparqlKeyword.exec(i))?h=b[0].toUpperCase():D=!0;break;case"f":case"t":(b=this._boolean.exec(i))?(h="literal",p=b[0],m=WA.boolean):D=!0;break;case"a":(b=this._shortPredicates.exec(i))?(h="abbreviation",p="a"):D=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(T=1,p="="):(T=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(T=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",T=2):(h=d,T=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",T=2);break;default:D=!0}if(D&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(b=this._prefix.exec(i))?((b=this._prefixed.exec(i))||n&&(b=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=b[1]||"",p=this._unescape(b[2])):(h="prefix",p=b[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const U=T||b[0].length,Y=o(h,p,m,l,U);this.previousToken=Y,this._previousMarker=h,i=i.substr(U,i.length)}function o(a,c,l,d,h){const p=i?r-i.length:r,b={type:a,value:c,prefix:l,line:d,start:p,end:p+h};return e(null,b),b}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace($ke,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in tY?tY[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}Wke()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}let nY=0;class iY{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&rY(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),o=/triple/.test(n),s=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new qke({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){nY=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:n,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=TP}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<n;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<n&&"/"!==e[o];)r=o;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${nY++}_`,this._prefixCallback=i||TP,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=n,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=TP):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function TP(){}function rY(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(Ds.rdf.first),t.RDF_REST=n(Ds.rdf.rest),t.RDF_NIL=n(Ds.rdf.nil),t.N3_FORALL=n(Ds.r.forAll),t.N3_FORSOME=n(Ds.r.forSome),t.ABBREVIATIONS={a:n(Ds.rdf.type),"=":n(Ds.owl.sameAs),">":n(Ds.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}rY(iY.prototype,Ni);var MP=C(8905);class IP{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||Ni,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const o in n)for(const s in i=n[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const o=e[n]||(e[n]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,n,i,r){const o=e[n],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[n]}*_findInIndex(e,n,i,r,o,s,a,c){let l,d,h;const p=this._entities,m=Dd(c,this._factory),b={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const T in e)if(d=e[T]){b[o]=Dd(p[T],this._factory),i&&((l=d,d={})[i]=l[i]);for(const D in d)if(h=d[D]){b[s]=Dd(p[D],this._factory);const U=r?r in h?[r]:[]:Object.keys(h);for(let Y=0;Y<U.length;Y++)b[a]=Dd(p[U[Y]],this._factory),yield this._factory.quad(b.subject,b.predicate,b.object,m)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,o;if(r=e[n])for(o in r)i(o)}_loopByKey1(e,n,i){let r,o;for(r in e)o=e[r],o[n]&&i(r)}_loopBy2Keys(e,n,i,r){let o,s,a;if((o=e[n])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,n,i,r){let s,a,c,o=0;n&&((s=e,e={})[n]=s[n]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Aa(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(Dd(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=ji(e),n=ji(n),i=ji(i),r=ji(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),n=s[n]||(s[a[++this._id]=n]=this._id),i=s[i]||(s[a[++this._id]=i]=this._id);const c=this._addToIndex(o.subjects,e,n,i);return this._addToIndex(o.predicates,n,i,e),this._addToIndex(o.objects,i,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=ji(e),n=ji(n),i=ji(i),r=ji(r);const o=this._ids,s=this._graphs;let a,c,l;if(!((e=o[e])&&(n=o[n])&&(i=o[i])&&(a=s[r])&&(c=a.subjects[e])&&(l=c[n])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,n,i),this._removeFromIndex(a.predicates,n,i,e),this._removeFromIndex(a.objects,i,e,n),null!==this._size&&this._size--,a.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const o=new MP.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,n,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){e=e&&ji(e),n=n&&ji(n),i=i&&ji(i),r=r&&ji(r);const o=this._getGraphs(r),s=this._ids;let a,c,l,d;if(!(Aa(e)&&!(c=s[e])||Aa(n)&&!(l=s[n])||Aa(i)&&!(d=s[i])))for(const h in o)(a=o[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,n,i,r){return new DP(this,e,n,i,r)}countQuads(e,n,i,r){e=e&&ji(e),n=n&&ji(n),i=i&&ji(i),r=r&&ji(r);const o=this._getGraphs(r),s=this._ids;let c,l,d,h,a=0;if(Aa(e)&&!(l=s[e])||Aa(n)&&!(d=s[n])||Aa(i)&&!(h=s[i]))return 0;for(const p in o)(c=o[p])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):n?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,n,i,r,o){this.some(s=>(e(s),!1),n,i,r,o)}every(e,n,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),n,i,r,o);return s&&a}some(e,n,i,r,o){for(const s of this.readQuads(n,i,r,o))if(e(s))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,n,i),r}forSubjects(e,n,i,r){n=n&&ji(n),i=i&&ji(i),r=r&&ji(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Aa(n)&&!(c=o[n])||Aa(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,n,i),r}forPredicates(e,n,i,r){n=n&&ji(n),i=i&&ji(i),r=r&&ji(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Aa(n)&&!(c=o[n])||Aa(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(o=>{r.push(o)},e,n,i),r}forObjects(e,n,i,r){n=n&&ji(n),i=i&&ji(i),r=r&&ji(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Aa(n)&&!(c=o[n])||Aa(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,n,i),r}forGraphs(e,n,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),n,i,r,o)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,Ds.rdf.rest,Ds.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const p=a.graph;let m=a.subject;for(;m&&!l;){const b=this.getQuads(null,null,m,null),T=this.getQuads(m,null,null,null);let D,U=null,Y=null,ye=null;for(let Ce=0;Ce<T.length&&!l;Ce++)D=T[Ce],D.graph.equals(p)?d?l=r(m,"has non-list arcs out"):D.predicate.value===Ds.rdf.first?U?l=r(m,"has multiple rdf:first arcs"):s.push(U=D):D.predicate.value===Ds.rdf.rest?Y?l=r(m,"has multiple rdf:rest arcs"):s.push(Y=D):b.length?l=r(m,"can't be subject and object"):(d=D,h="subject"):l=r(m,"not confined to single graph");for(let Ce=0;Ce<b.length&&!l;++Ce)D=b[Ce],d?l=r(m,"can't have coreferences"):D.predicate.value===Ds.rdf.rest?ye?l=r(m,"has incoming rdf:rest arcs"):ye=D:(d=D,h="object");U?c.unshift(U.object):l=r(m,"has no list head"),m=ye&&ye.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}function Aa(t){return"string"==typeof t||t instanceof String}class DP extends MP.Readable{constructor(e,n,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:o}=this,s=this._filtered=new IP({factory:e._factory});for(const a of e.readQuads(o,r,i,n))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new DP(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var Jke=C(2821);function Er(t,e,n,i,r){return t.readQuads(e,n,i,r)}function oY(t){const e=t.length;let n=0;return new MP.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function RP(t,e){return OP.apply(this,arguments)}function OP(){return OP=jt(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield(0,Rke.toRDF)(n);e.import(oY(i))}return e}),OP.apply(this,arguments)}function kP(){return kP=jt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new Jke.RdfXmlParser({dataFactory:Ni,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(n),i.end(),r}return e}),kP.apply(this,arguments)}function PP(){return PP=jt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new iY({format:"n3"}).parse(n);e.import(oY(i))}return e}),PP.apply(this,arguments)}function NP(t,e){const n=JSON.parse(t),i=new IP;return Object.assign(i,n,{_factory:e??Ni}),i}const Ui=AP({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Ni),Zt=(Ui("rdf"),Ui("rdf")("type"),Ui("rdfs"),Ui("rdfs")("label"),Ui("rdfs")("comment"),Ui("rdfs")("isDefinedBy"),Ui("rdfs")("seeAlso"),Ui("ccf")),Rd=(Ui("ccf")("has_registration_location"),Ui("rdfs")("label"),Ui("rdfs")("comment"),Zt("url"),Zt("sex"),Zt("age"),Zt("bmi"),Ni.literal("Male"),Ni.literal("Female"),Zt("consortium_name"),Zt("tissue_provider_name"),Zt("tissue_provider_uuid"),Zt("comes_from"),Zt("subdivided_into_sections"),Zt("generates_dataset"),Zt("sample_type"),Ni.literal("Tissue Block"),Ni.literal("Tissue Section"),Ni.literal("Non-standard"),Zt("section_count"),Zt("section_size"),Zt("section_size_unit"),Zt("section_number"),Zt("has_registration_location"),Zt("has_ontology_term"),Zt("has_cell_type_term"),Zt("technology"),Zt("thumbnail"),{x:Zt,base:Ui("base"),ontologyNode:{label:Zt("ccf_pref_label"),parent:Zt("ccf_part_of"),children:Zt("ccf_part_of"),rui_rank:Zt("rui_rank"),synonymLabels:Ni.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Zt("ccf_part_of"),ct_is_a:Zt("ccf_ct_isa"),located_in:Zt("ccf_located_in"),characterizes:Zt("ccf_characterizes")},spatial:{Female:Ui("base")("VHFemale"),Male:Ui("base")("VHMale"),BothSexes:Ui("base")("VHBothSexes"),FemaleOrgans:Ui("base")("VHFemaleOrgans"),MaleOrgans:Ui("base")("VHMaleOrgans")},SpatialObjectReference:Zt("spatial_object_reference"),SpatialEntity:Zt("spatial_entity"),SpatialPlacement:Zt("spatial_placement"),spatialObjectReference:{file:Zt("file_url"),file_format:Zt("file_format"),file_subpath:Zt("file_subpath")},extractionSet:{label:Ui("rdfs")("label"),rui_rank:Zt("rui_rank")},spatialEntity:{label:Ui("rdfs")("label"),description:Ui("rdfs")("comment"),creator:Ui("dcterms")("creator"),creator_first_name:Zt("creator_first_name"),creator_last_name:Zt("creator_last_name"),creator_orcid:Zt("creator_orcid"),creation_date:Ui("dcterms")("created"),updated_date:Zt("updated_date"),ccf_annotations:Zt("collides_with"),representation_of:Zt("representation_of"),reference_organ:Zt("has_reference_organ"),extraction_set_for:Zt("extraction_set_for"),extraction_set:Zt("has_extraction_set"),sex:Zt("organ_owner_sex"),side:Zt("organ_side"),rui_rank:Zt("rui_rank"),slice_thickness:Zt("slice_thickness"),slice_count:Zt("slice_count"),x_dimension:Zt("x_dimension"),y_dimension:Zt("y_dimension"),z_dimension:Zt("z_dimension"),dimension_units:Zt("dimension_unit"),object:Zt("has_object_reference")},spatialPlacement:{source:Zt("placement_for"),target:Zt("placement_relative_to"),placement_date:Ui("dcterms")("created"),x_scaling:Zt("x_scaling"),y_scaling:Zt("y_scaling"),z_scaling:Zt("z_scaling"),scaling_units:Zt("scaling_unit"),x_rotation:Zt("x_rotation"),y_rotation:Zt("y_rotation"),z_rotation:Zt("z_rotation"),w_rotation:Zt("theta_rotation"),rotation_order:Zt("rotation_order"),rotation_units:Zt("rotation_unit"),x_translation:Zt("x_translation"),y_translation:Zt("y_translation"),z_translation:Zt("z_translation"),translation_units:Zt("translation_unit")}}),ti={x:Ui("uberon"),body:Ui("uberon")("0013702")},nPe={x:Ui("cl"),cell:Ui("cl")("0000000")},tv={x:Ui("fma")},sY=(Ui("lmha"),{body:ti.body,cell:nPe.cell,respiratory_system:ti.x("0001004"),colon:ti.x("0001155"),left_lung:ti.x("0002168"),right_lung:ti.x("0002167"),left_bronchus:ti.x("0002178"),right_bronchus:ti.x("0002177"),kidney:ti.x("0002113"),ureter:ti.x("0000056"),eye:ti.x("0000970"),fallopian_tube:ti.x("0003889"),knee:ti.x("0001465"),ovary:ti.x("0000992"),trachea:ti.x("0003126"),aorta:ti.x("0000947"),blood:ti.x("0000178"),bone_marrow:ti.x("0002371"),male_reproductive_system:ti.x("0000079"),lymph_node:ti.x("0000029"),blood_vasculature:ti.x("0004537"),brain:ti.x("0000955"),eye_left:ti.x("0004548"),eye_right:tv.x("54449"),fallopian_tube_left:ti.x("0001303"),fallopian_tube_right:ti.x("0001302"),heart:ti.x("0000948"),kidney_left:ti.x("0004538"),kidney_right:ti.x("0004539"),knee_left:tv.x("24978"),knee_right:tv.x("24977"),large_intestine:ti.x("0000059"),liver:ti.x("0002107"),lungs:ti.x("0002048"),mesenteric_lymph_node:ti.x("0002509"),ovary_left:tv.x("7214"),ovary_right:tv.x("7213"),pancreas:ti.x("0001264"),pelvis:ti.x("0001270"),prostate_gland:ti.x("0002367"),skin:ti.x("0002097"),small_intestine:ti.x("0002108"),spleen:ti.x("0002106"),thymus:ti.x("0002370"),ureter_left:ti.x("0001223"),ureter_right:ti.x("0001222"),urinary_bladder:ti.x("0001255"),uterus:ti.x("0000995")});function FP(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}FP(Rd.spatialObjectReference),FP(Rd.spatialEntity),FP(Rd.spatialPlacement);new nn,new nn;const iv=new nn,hY=new nn;class HP{constructor(e=[0,0,0],n=0){ve(this,"center",void 0),ve(this,"radius",void 0),this.radius=-0,this.center=new nn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=iv.from(n),this.center=(new nn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new HP(this.center,this.radius)}union(e){const n=this.center,i=this.radius,o=e.radius,s=iv.copy(e.center).subtract(n),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return hY.copy(s).scale((-i+c)/a).add(n),this.center.copy(hY),this.radius=c,this}expand(e){const i=iv.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=function Q4(t,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(c,l,d),t}(iv,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=iv.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?-1:o<i?0:1}}const gPe=new nn,_Pe=new nn,XA=new nn,KA=new nn,qA=new nn,bPe=new nn,yPe=new nn;class GP{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){ve(this,"center",void 0),ve(this,"halfAxes",void 0),this.center=(new nn).from(e),this.halfAxes=new jo(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new nn(e).len(),new nn(n).len(),new nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new nn(e).normalize(),o=new nn(n).normalize(),s=new nn(i).normalize();return(new V0).fromMatrix3(new jo([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new V0(i),o=(new jo).fromQuaternion(r);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=(new nn).from(e),this.halfAxes=o,this}clone(){return new GP(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new HP){const n=this.halfAxes,i=n.getColumn(0,XA),r=n.getColumn(1,KA),o=n.getColumn(2,qA),s=gPe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?-1:l>=c?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=_Pe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,XA),o=i.getColumn(1,KA),s=i.getColumn(2,qA),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(n.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(n.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(n.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,XA),l=a.getColumn(1,KA),d=a.getColumn(2,qA),h=bPe.copy(c).add(l).add(d).add(s),p=yPe.copy(h).subtract(e);let m=n.dot(p);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,XA);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,KA);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,qA);return r.transformAsPoint(e),this.halfAxes=new jo([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const fY=new nn,pY=new nn;class rv{constructor(e=[0,0,1],n=0){ve(this,"normal",void 0),ve(this,"distance",void 0),this.normal=new nn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return b0(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=fY.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),b0(Du(this.normal.len(),1)),this.distance=r,this}clone(){return new rv(this.normal,this.distance)}equals(e){return Du(this.distance,e.distance)&&Du(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=pY.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=fY.from(e);const i=this.getPointDistance(e),r=pY.copy(this.normal).scale(i);return e.subtract(r).to(n)}}const mY=[new nn([1,0,0]),new nn([0,1,0]),new nn([0,0,1])],gY=new nn,vPe=new nn;new rv(new nn(1,0,0),0);class qu{constructor(e=[]){ve(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*mY.length;const n=e.center,i=e.radius;let r=0;for(const o of mY){let s=this.planes[r],a=this.planes[r+1];s||(s=this.planes[r]=new rv),a||(a=this.planes[r+1]=new rv);const c=gY.copy(o).scale(-i).add(n);o.dot(c),s.fromPointNormal(c,o);const d=gY.copy(o).scale(i).add(n),h=vPe.copy(o).negate();h.dot(d),a.fromPointNormal(d,h),r+=2}return this}computeVisibility(e){let n=1;for(const i of this.planes)switch(e.intersectPlane(i)){case-1:return-1;case 0:n=0}return n}computeVisibilityWithPlaneMask(e,n){if(b0(Number.isFinite(n),"parentPlaneMask is required."),n===qu.MASK_OUTSIDE||n===qu.MASK_INSIDE)return n;let i=qu.MASK_INSIDE;const r=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&!(n&s))continue;const c=e.intersectPlane(r[o]);if(-1===c)return qu.MASK_OUTSIDE;0===c&&(i|=s)}return i}}function lNe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[Rd.ontologyNode.label.id]:"label",[n]:"parent",[Rd.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of function*tPe(t,e,n){for(const[i,r]of Object.entries(n))for(const o of Er(t,e,i,null,null)){const s="Literal"===o.object.termType?(0,Jy.fromRdf)(o.object):o.object.id;yield[r,s]}}(t,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=t.getSubjects(n,e,null).map(o=>o.id),i}function vY(t,e,n,i){const r={root:e,nodes:{}},o=new Set;for(const a of Er(t,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=lNe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const s=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,xY(r),r}function xY(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)xY(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}ve(qu,"MASK_OUTSIDE",4294967295),ve(qu,"MASK_INSIDE",0),ve(qu,"MASK_INDETERMINATE",2147483647),new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,Math,new jo,new jo,new jo,new jo,new jo,new nn,new nn,new nn,new nn,new nn,new jo,new jo,new jo,(0,$i.memoize)(function dNe(t){const e=vY(t,sY.body.id,"body",Rd.asctb.part_of.id);return e.nodes[sY.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");const EY={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};function ea(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}let qP;function kc(){return qP||(qP=function _Ne(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=ea(n);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),qP}function AY(t,e=kc()){return e("readonly",n=>ea(n.get(t)))}const eS="Unknown Euler angle order",Ng=.99999;var Mo=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Mo||{});class $r extends aE{static get ZYX(){return Mo.ZYX}static get YXZ(){return Mo.YXZ}static get XZY(){return Mo.XZY}static get ZXY(){return Mo.ZXY}static get YZX(){return Mo.YZX}static get XYZ(){return Mo.XYZ}static get RollPitchYaw(){return Mo.ZYX}static get DefaultOrder(){return Mo.ZYX}static get RotationOrders(){return Mo}static rotationOrder(e){return Mo[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=$r.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(n*i+o*r);let l=-2*(n*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const p=Math.atan2(2*(i*r+o*n),-2*(n*n+s)+1),m=Math.asin(l),b=Math.atan2(c,a);return this.set(p,m,b,$r.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function vNe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=ui(e)}get y(){return this[1]}set y(e){this[1]=ui(e)}get z(){return this[2]}set z(e){this[2]=ui(e)}get alpha(){return this[0]}set alpha(e){this[0]=ui(e)}get beta(){return this[1]}set beta(e){this[1]=ui(e)}get gamma(){return this[2]}set gamma(e){this[2]=ui(e)}get phi(){return this[0]}set phi(e){this[0]=ui(e)}get theta(){return this[1]}set theta(e){this[1]=ui(e)}get psi(){return this[2]}set psi(e){this[2]=ui(e)}get roll(){return this[0]}set roll(e){this[0]=ui(e)}get pitch(){return this[1]}set pitch(e){this[1]=ui(e)}get yaw(){return this[2]}set yaw(e){this[2]=ui(e)}get order(){return this[3]}set order(e){this[3]=function xNe(t){if(t<0&&t>=6)throw new Error(eS);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Mo.ZYX)}fromRotationMatrix(e,n=$r.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new V0;switch(this[4]){case Mo.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Mo.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Mo.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Mo.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Mo.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Mo.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(eS)}}_fromRotationMatrix(e,n=$r.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(n=n||this[3]){case $r.XYZ:this[1]=Math.asin(wr(o,-1,1)),Math.abs(o)<Ng?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case $r.YXZ:this[0]=Math.asin(-wr(c,-1,1)),Math.abs(c)<Ng?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case $r.ZXY:this[0]=Math.asin(wr(d,-1,1)),Math.abs(d)<Ng?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case $r.ZYX:this[1]=Math.asin(-wr(l,-1,1)),Math.abs(l)<Ng?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case $r.YZX:this[2]=Math.asin(wr(s,-1,1)),Math.abs(s)<Ng?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case $r.XZY:this[2]=Math.asin(-wr(r,-1,1)),Math.abs(r)<Ng?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(eS)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case $r.XYZ:{const p=s*c,m=s*h,b=l*c,T=l*h;n[0]=a*c,n[4]=-a*h,n[8]=d,n[1]=m+b*d,n[5]=p-T*d,n[9]=-l*a,n[2]=T-p*d,n[6]=b+m*d,n[10]=s*a;break}case $r.YXZ:{const p=a*c,m=a*h,b=d*c,T=d*h;n[0]=p+T*l,n[4]=b*l-m,n[8]=s*d,n[1]=s*h,n[5]=s*c,n[9]=-l,n[2]=m*l-b,n[6]=T+p*l,n[10]=s*a;break}case $r.ZXY:{const p=a*c,m=a*h,b=d*c,T=d*h;n[0]=p-T*l,n[4]=-s*h,n[8]=b+m*l,n[1]=m+b*l,n[5]=s*c,n[9]=T-p*l,n[2]=-s*d,n[6]=l,n[10]=s*a;break}case $r.ZYX:{const p=s*c,m=s*h,b=l*c,T=l*h;n[0]=a*c,n[4]=b*d-m,n[8]=p*d+T,n[1]=a*h,n[5]=T*d+p,n[9]=m*d-b,n[2]=-d,n[6]=l*a,n[10]=s*a;break}case $r.YZX:{const p=s*a,m=s*d,b=l*a,T=l*d;n[0]=a*c,n[4]=T-p*h,n[8]=b*h+m,n[1]=h,n[5]=s*c,n[9]=-l*c,n[2]=-d*c,n[6]=m*h+b,n[10]=p-T*h;break}case $r.XZY:{const p=s*a,m=s*d,b=l*a,T=l*d;n[0]=a*c,n[4]=-h,n[8]=d*c,n[1]=p*h+T,n[5]=s*c,n[9]=m*h-b,n[2]=b*h-m,n[6]=l*c,n[10]=T*h+p;break}default:throw new Error(eS)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new V0(e*r*o-n*i*s,e*i*s+n*r*o,n*i*o-e*r*s,e*i*o+n*r*s)}}const SY={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let tS;const wNe=new Uint8Array(16);function ENe(){if(!tS&&(tS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tS(wNe)}const zo=[];for(let t=0;t<256;++t)zo.push((t+256).toString(16).slice(1));const SNe=function ANe(t,e,n){if(SY.randomUUID&&!e&&!t)return SY.randomUUID();const i=(t=t||{}).random||(t.rng||ENe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function CY(t,e=0){return(zo[t[e+0]]+zo[t[e+1]]+zo[t[e+2]]+zo[t[e+3]]+"-"+zo[t[e+4]]+zo[t[e+5]]+"-"+zo[t[e+6]]+zo[t[e+7]]+"-"+zo[t[e+8]]+zo[t[e+9]]+"-"+zo[t[e+10]]+zo[t[e+11]]+zo[t[e+12]]+zo[t[e+13]]+zo[t[e+14]]+zo[t[e+15]]).toLowerCase()}(i)};function*ZP(t,e,n){for(const[i,r]of Object.entries(n))for(const o of Er(t,e,i,null,null)){const s="Literal"===o.object.termType?(0,Jy.fromRdf)(o.object):o.object.id;yield[r,s]}}function Xf(t,e,n,i){const r={"@id":e,"@type":n};for(const[o,s]of Object.entries(i))for(const a of Er(t,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,Jy.fromRdf)(a.object):a.object.id;r[s]=c}return r}const Vi=AP({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Ni),TY={x:Vi("rdf"),type:Vi("rdf")("type")},Qt=(Vi("rdfs"),Vi("rdfs")("label"),Vi("rdfs")("comment"),Vi("rdfs")("isDefinedBy"),Vi("rdfs")("seeAlso"),Vi("ccf")),oi={id:Vi("ccf")("has_registration_location"),label:Vi("rdfs")("label"),description:Vi("rdfs")("comment"),link:Qt("url"),sex:Qt("sex"),age:Qt("age"),bmi:Qt("bmi"),Male:Ni.literal("Male"),Female:Ni.literal("Female"),consortiumName:Qt("consortium_name"),providerName:Qt("tissue_provider_name"),providerUUID:Qt("tissue_provider_uuid"),donor:Qt("comes_from"),sections:Qt("subdivided_into_sections"),datasets:Qt("generates_dataset"),sampleType:Qt("sample_type"),TissueBlock:Ni.literal("Tissue Block"),TissueSection:Ni.literal("Tissue Section"),NonStandard:Ni.literal("Non-standard"),sectionCount:Qt("section_count"),sectionSize:Qt("section_size"),sectionUnits:Qt("section_size_unit"),sectionNumber:Qt("section_number"),spatialEntity:Qt("has_registration_location"),ontologyTerms:Qt("has_ontology_term"),cellTypeTerms:Qt("has_cell_type_term"),technology:Qt("technology"),thumbnail:Qt("thumbnail")},vi={x:Qt,base:Vi("base"),ontologyNode:{label:Qt("ccf_pref_label"),parent:Qt("ccf_part_of"),children:Qt("ccf_part_of"),rui_rank:Qt("rui_rank"),synonymLabels:Ni.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Qt("ccf_part_of"),ct_is_a:Qt("ccf_ct_isa"),located_in:Qt("ccf_located_in"),characterizes:Qt("ccf_characterizes")},spatial:{Female:Vi("base")("VHFemale"),Male:Vi("base")("VHMale"),BothSexes:Vi("base")("VHBothSexes"),FemaleOrgans:Vi("base")("VHFemaleOrgans"),MaleOrgans:Vi("base")("VHMaleOrgans")},SpatialObjectReference:Qt("spatial_object_reference"),SpatialEntity:Qt("spatial_entity"),SpatialPlacement:Qt("spatial_placement"),spatialObjectReference:{file:Qt("file_url"),file_format:Qt("file_format"),file_subpath:Qt("file_subpath")},extractionSet:{label:Vi("rdfs")("label"),rui_rank:Qt("rui_rank")},spatialEntity:{label:Vi("rdfs")("label"),description:Vi("rdfs")("comment"),creator:Vi("dcterms")("creator"),creator_first_name:Qt("creator_first_name"),creator_last_name:Qt("creator_last_name"),creator_orcid:Qt("creator_orcid"),creation_date:Vi("dcterms")("created"),updated_date:Qt("updated_date"),ccf_annotations:Qt("collides_with"),representation_of:Qt("representation_of"),reference_organ:Qt("has_reference_organ"),extraction_set_for:Qt("extraction_set_for"),extraction_set:Qt("has_extraction_set"),sex:Qt("organ_owner_sex"),side:Qt("organ_side"),rui_rank:Qt("rui_rank"),slice_thickness:Qt("slice_thickness"),slice_count:Qt("slice_count"),x_dimension:Qt("x_dimension"),y_dimension:Qt("y_dimension"),z_dimension:Qt("z_dimension"),dimension_units:Qt("dimension_unit"),object:Qt("has_object_reference")},spatialPlacement:{source:Qt("placement_for"),target:Qt("placement_relative_to"),placement_date:Vi("dcterms")("created"),x_scaling:Qt("x_scaling"),y_scaling:Qt("y_scaling"),z_scaling:Qt("z_scaling"),scaling_units:Qt("scaling_unit"),x_rotation:Qt("x_rotation"),y_rotation:Qt("y_rotation"),z_rotation:Qt("z_rotation"),w_rotation:Qt("theta_rotation"),rotation_order:Qt("rotation_order"),rotation_units:Qt("rotation_unit"),x_translation:Qt("x_translation"),y_translation:Qt("y_translation"),z_translation:Qt("z_translation"),translation_units:Qt("translation_unit")}},ni={x:Vi("uberon"),body:Vi("uberon")("0013702")},CNe={x:Vi("cl"),cell:Vi("cl")("0000000")},sv={x:Vi("fma")},kd=(Vi("lmha"),{body:ni.body,cell:CNe.cell,respiratory_system:ni.x("0001004"),colon:ni.x("0001155"),left_lung:ni.x("0002168"),right_lung:ni.x("0002167"),left_bronchus:ni.x("0002178"),right_bronchus:ni.x("0002177"),kidney:ni.x("0002113"),ureter:ni.x("0000056"),eye:ni.x("0000970"),fallopian_tube:ni.x("0003889"),knee:ni.x("0001465"),ovary:ni.x("0000992"),trachea:ni.x("0003126"),aorta:ni.x("0000947"),blood:ni.x("0000178"),bone_marrow:ni.x("0002371"),male_reproductive_system:ni.x("0000079"),lymph_node:ni.x("0000029"),blood_vasculature:ni.x("0004537"),brain:ni.x("0000955"),eye_left:ni.x("0004548"),eye_right:sv.x("54449"),fallopian_tube_left:ni.x("0001303"),fallopian_tube_right:ni.x("0001302"),heart:ni.x("0000948"),kidney_left:ni.x("0004538"),kidney_right:ni.x("0004539"),knee_left:sv.x("24978"),knee_right:sv.x("24977"),large_intestine:ni.x("0000059"),liver:ni.x("0002107"),lungs:ni.x("0002048"),mesenteric_lymph_node:ni.x("0002509"),ovary_left:sv.x("7214"),ovary_right:sv.x("7213"),pancreas:ni.x("0001264"),pelvis:ni.x("0001270"),prostate_gland:ni.x("0002367"),skin:ni.x("0002097"),small_intestine:ni.x("0002108"),spleen:ni.x("0002106"),thymus:ni.x("0002370"),ureter_left:ni.x("0001223"),ureter_right:ni.x("0001222"),urinary_bladder:ni.x("0001255"),uterus:ni.x("0000995")});function QP(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const nS={spatialObjectReference:QP(vi.spatialObjectReference),spatialEntity:QP(vi.spatialEntity),spatialPlacement:QP(vi.spatialPlacement)};function MY(t,e){const n=Xf(t,e,"ExtractionSet",nS.spatialEntity);return n.extractionSites=(0,$i.sortBy)(t.getSubjects(vi.spatialEntity.extraction_set,e,null).map(i=>Kf(t,i.id)),["rui_rank"]),n}function Kf(t,e){const n=Xf(t,e,"SpatialEntity",nS.spatialEntity);return n.object&&(n.object=function TNe(t,e){return Xf(t,e,"SpatialObjectReference",nS.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,vi.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,oi.spatialEntity,e,null),n}function RNe(t,e){const n=Xf(t,e,"SpatialPlacement",nS.spatialPlacement);return n.source&&(n.source=Kf(t,n.source)),n.target&&(n.target=Kf(t,n.target)),n}function IY(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),o=[n.x_rotation,n.y_rotation,n.z_rotation].map(zU),s=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(o).scale(s)}class DY{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new Ike.DirectedGraph;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},TY.type,vi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},TY.type,vi.SpatialEntity,null);const n={};for(const i of Er(e,null,vi.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of Er(e,null,vi.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new $n($n.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new $n($n.IDENTITY),o=Dke(this.graph,e,n);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&IY(r,RNe(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,$i.get)(e,"placement[0]",(0,$i.get)(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,n),o&&(o=IY(o,r))):i&&(o=this.getTransformationMatrix(i,n)),o){const s=(new $r).fromRotationMatrix(o,$r.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(wre),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${SNe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class RY{constructor(e){this.db=e}getSpatialEntity(e){return Kf(this.db.store,e)}getExtractionSets(e){return function MNe(t,e){return(0,$i.sortBy)(t.getSubjects(vi.spatialEntity.extraction_set_for,e,null).map(n=>MY(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return MY(this.db.store,e)}getAnatomicalStructures(e){return function INe(t,e){return(0,$i.sortBy)(t.getSubjects(vi.spatialEntity.reference_organ,e,null).map(n=>Kf(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function DNe(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(Kf(t,n.subject.id))},null,vi.spatialEntity.reference_organ,null,null),(0,$i.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=vi.spatial.Male.id;break;case"Female":n=vi.spatial.Female.id;break;default:n=vi.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,n,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(vi.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(vi.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(vi.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(vi.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(vi.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===n?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(s){if(r)s=new $n($n.IDENTITY).rotateX(zU(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const kNe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function iS(t,e=kNe){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const rS="https://entity.api.hubmapconsortium.org/entities/",OY=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),PNe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Fg={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},eN="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class LNe{constructor(e,n="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(Ce=>"Donor"===Ce.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,Fg[e.group_uuid]||(Fg[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=Fg[e.group_uuid]||e.group_name,p=e.created_by_user_displayname;this["@id"]=rS+e.uuid,this.label=`Registered ${d}, ${p}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const m={},b=[];this.sections=b;const T=[];this.datasets=T;for(const Ce of a.filter(je=>"Sample"===je.entity_type)){const je=this.getSection(Ce,e,i);m[Ce.submission_id]=je,b.push(je),je.section_number=je.section_number??b.length}for(const Ce of a)if("Dataset"===Ce.entity_type){const je=this.getDataset(Ce,n,i,r),qe=(0,$i.get)(Ce,["ingest_metadata","metadata","tissue_id"]);m[qe]?m[qe].datasets?.push(je):T.push(je)}const D=l??{},U=`${D.x_dimension} x ${D.y_dimension} x ${D.z_dimension} ${D.dimension_units}`;this.section_count=D.slice_count||b.length;const Y=parseFloat((D.slice_thickness||(D.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=Y;const ye=D.dimension_units||"millimeter";this.section_units=ye,this.description=`${U}, ${Y} ${ye}, ${this.section_count} Sections`,b.forEach((Ce,je)=>{Ce.description=`${D.x_dimension} x ${D.y_dimension} x ${Y} ${ye}, ${Y} ${ye}, ${Ce.description}`,Ce.section_number=je+1})}getSection(e,n,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":rS+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${Fg[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n="",i="",r){const o=new Date(e.last_modified_timestamp).toLocaleDateString(),s=Fg[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,(0,$i.get)(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,n,r)??h,{"@id":rS+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${a}, ${s}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,n,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${n}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=(0,$i.get)(e,"metadata.files",[]).filter(o=>/\.(ome\.tif|ome\.tiff)$/.test(o.rel_path)).filter(o=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(o.rel_path)).filter(o=>OY.has(o.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(o=>`${n}/${e.uuid}/${o.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const o=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(OY.has(o))return`assets/thumbnails/TMC-Vanderbilt/DR1/${o}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=PNe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,n){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const o=i.match(/age ([0-9]+)/);let s,a;o&&(s=(0,$i.toNumber)(o[1]));for(const p of(0,$i.get)(e,"metadata.organ_donor_data",(0,$i.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?s=(0,$i.toNumber)(p.data_value):"Body mass index"===p.preferred_term&&(a=(0,$i.toNumber)(p.data_value));let c="";r&&s&&(c+=`${r}, Age ${s}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=Fg[e.group_uuid]||e.group_name;return{"@id":rS+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${n}browse/donor/${e.uuid}`,age:s,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=(0,$i.get)(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,$i.set)(i,["placement","target"],o.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&(0,$i.set)(i,["placement","target"],"Male"===n.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,$i.omit)({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const BNe=1e4,jNe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],UNe={exists:{field:"rui_location"}};function kY(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??UNe,_source:{includes:jNe}})}function tN(t,e){return nN.apply(this,arguments)}function nN(){return nN=jt(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),nN.apply(this,arguments)}function iN(){return iN=jt(function*(t,e,n){const i=BNe,r=function VNe(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),o=kY(0,i,n),s=yield tN(t,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(tN(t,{method:"POST",headers:r,body:kY(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),iN.apply(this,arguments)}function rN(){return rN=jt(function*(t,e,n,i,r="",o=""){let s;if("static"===e?s=yield tN(t):"search-api"===e&&(s=yield function zNe(t,e,n){return iN.apply(this,arguments)}(t,i,n)),s)return function NNe(t,e="",n="",i,r=!1){const s={},a=(0,$i.get)(t,"hits.hits",[]).map(l=>(0,$i.get)(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new LNe(l,e,n,i).toJsonLd());for(const l of a){const d=l["@id"];s[d]?s[d].samples.push(l.samples[0]):s[d]=l}const c=Object.values(s);return r&&(function FNe(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,n++)}i.samples=r.filter(o=>!0!==o.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":eN,...l})))),iS(JSON.stringify({"@context":eN,"@graph":c}),eN)}(s,r,o,i);console.warn(`Unable to load ${t} as HuBMAP Data`)}),rN.apply(this,arguments)}function av(t,e,n){const i=new Set;for(const r of e)for(const o of Er(t,r,n,null,null))i.add(o.object.id);return i}const $Ne={[vi.spatialEntity.x_dimension.id]:"x",[vi.spatialEntity.y_dimension.id]:"y",[vi.spatialEntity.z_dimension.id]:"z"};function XNe(t,e,n,i){const r=e.getTransformationMatrix(n,i);let o;if(r){const s=r.getTranslation(),a=function YNe(t,e){const n=Xf(t,e,"Dimensions",$Ne);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new $r).fromRotationMatrix(r,$r.XYZ).toQuaternion().normalize().calculateW();o=(new GP).fromCenterHalfSizeQuaternion(s,a,c)}return o}function KNe(t,e,n,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of n){const p=XNe(t,e,h,c);p&&p.distanceSquaredTo([r,o,s].map(b=>b/1e3))<=d&&l.add(h)}return l}function oS(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Er(t,a,oi.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function sN(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Er(t,a,oi.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function cv(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function NY(t,e,n){const i=new Set;for(const r of n){const o=Ni.namedNode(r);t.forSubjects(cv(e,i),vi.spatialEntity.ccf_annotations,o,null)}return i}function FY(t,e){const n=function aFe(t,e){const n=new Map;for(const i of t)for(const r of Er(e,i,oi.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id).add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const o=n.get(r);for(const s of Er(e,r,vi.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function dFe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[vi.ontologyNode.label.id]:"label",[n]:"parent",[vi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of ZP(t,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=t.getSubjects(n,e,null).map(o=>o.id),i}function LY(t,e,n,i){const r={root:e,nodes:{}},o=new Set;for(const a of Er(t,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=dFe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const s=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,BY(r),r}function BY(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)BY(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const jY=(0,$i.memoize)(function uFe(t){const e=LY(t,kd.body.id,"body",vi.asctb.part_of.id);return e.nodes[kd.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>""),sS={[oi.label.id]:"label",[oi.description.id]:"description",[oi.link.id]:"link"},fFe={...sS,[oi.providerName.id]:"providerName"},pFe={...sS,[oi.technology.id]:"technology",[oi.thumbnail.id]:"thumbnail"},mFe={...sS,[oi.sampleType.id]:"sampleType",[oi.sectionNumber.id]:"sectionNumber",[oi.datasets.id]:"datasets"},gFe={...sS,[oi.sampleType.id]:"sampleType",[oi.sectionCount.id]:"sectionCount",[oi.sectionSize.id]:"sectionSize",[oi.sectionUnits.id]:"sectionUnits",[oi.donor.id]:"donor",[oi.spatialEntity.id]:"spatialEntityId",[oi.sections.id]:"sections",[oi.datasets.id]:"datasets"};function _Fe(t,e){return Xf(t,e,"Donor",fFe)}function UY(t,e){return Xf(t,e,"Dataset",pFe)}function bFe(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of ZP(t,e,mFe))if("datasets"===i){const o=UY(t,r);n[i].push(o)}else n[i]=r;return n}class vFe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const n=Date.now();return this.database.connect().then(function(){var i=jt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-n})}}const wFe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class EFe{constructor(e=wFe){this.options=e,this.store=new IP(void 0,{factory:Ni}),this.graph=new DY(this),this.scene=new RY(this)}connect(e,n=!1){var i=this;return jt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return jt(function*(){const n=(new Date).getTime(),i=Mke(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield AY(r).catch(()=>{});let a;s&&n-new Date(+s).getTime()>36e5?yield function yNe(t,e=kc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),ea(n.transaction)))}([o,r]).catch(()=>{}):a=yield AY(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),function bNe(t,e=kc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),ea(n.transaction)))}([[o,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return jt(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=NP(r,Ni);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=NP(o,Ni))}else r?.length>0&&i.push(r);e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function PY(t,e,n,i){return rN.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(o=>{if(o)return e.addDataSources([o])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return jt(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var o=jt(function*(s){"string"==typeof s?(s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")?(s=iS(s=yield fetch(s).then(a=>a.text())),yield RP(s,r)):s.endsWith("n3")?yield function Qke(t,e){return PP.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function Zke(t,e){return kP.apply(this,arguments)}(s,r):(s=iS(s),yield RP(s,r)):(s=iS(JSON.stringify(s)),yield RP(s,r))});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return jt(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function xFe(t){const e=jY(t),n=new Map;for(const{subject:i,object:r}of Er(t,null,vi.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;n.set(i.id,[...o].map(a=>Ni.namedNode(a)))}for(const{object:i}of Er(t,null,oi.spatialEntity,null,null))for(const{subject:r}of Er(t,null,vi.spatialPlacement.source,i,null))for(const{object:o}of Er(t,r,vi.spatialPlacement.target,null,null))for(const s of n.get(o.id)??[])t.addQuad(Ni.namedNode(i.id),vi.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function ePe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return jt(function*(){n.store=NP(e,Ni),n.graph=new DY(n),n.scene=new RY(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function JNe(t,e,n){let i=function ZNe(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),oi.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function oFe(t,e,n=!0){const i=new Set;if(t.forSubjects(cv(e,i),oi.spatialEntity,null,null),!n){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=oS(t,i,o=>function QNe(t,e,n){const i=new Set;return t.forSubjects(cv(e,i),oi.sex,oi[n],null),i}(t,o,r))}if(i.size>0&&n.tmc?.length>0&&(i=oS(t,i,r=>function eFe(t,e,n){const i=new Set;for(const r of n){const o=Ni.literal(r);t.forSubjects(cv(e,i),oi.providerName,o,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function qNe(t,e,n){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of Er(t,c,oi.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of Er(t,c,oi.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=n(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function tFe(t,e,n){const i=new Set;for(const r of n){const o=Ni.literal(r);t.forSubjects(cv(e,i),oi.technology,o,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=sN(t,i,r=>function sFe(t,e,n,i){const r=new Set;for(const o of i)KNe(t,e,n,o).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(kd.body.id)&&(i=sN(t,i,o=>NY(t,o,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(kd.cell.id)&&(i=sN(t,i,o=>function nFe(t,e,n){const i=new Set;for(const r of n)t.forObjects(o=>{i.add(o.id)},r,vi.asctb.located_in,null),r===kd.cell.id&&i.add(kd.body.id);return NY(t,e,[...i])}(t,o,r)))}if(i.size>0&&2===n.ageRange?.length&&(0,$i.isFinite)(n.ageRange[0])&&(0,$i.isFinite)(n.ageRange[1])){const r=Math.max(...n.ageRange),o=Math.min(...n.ageRange);1===o&&110===r||(i=oS(t,i,s=>function iFe(t,e,n,i){const r=new Set;for(const o of e)for(const s of Er(t,o,oi.age,null,null)){const a=(0,Jy.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}if(i.size>0&&2===n.bmiRange?.length&&(0,$i.isFinite)(n.bmiRange[0])&&(0,$i.isFinite)(n.bmiRange[1])){const r=Math.max(...n.bmiRange),o=Math.min(...n.bmiRange);13===o&&83===r||(i=oS(t,i,s=>function rFe(t,e,n,i){const r=new Set;for(const o of e)for(const s of Er(t,o,oi.bmi,null,null)){const a=(0,Jy.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Ni.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function ONe(t,e){const n=t.getObjects(Ni.namedNode(e),oi.spatialEntity,null);if(n.length>0)return Kf(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return jt(function*(){return e.status||(e.status=new vFe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return jt(function*(){return function GNe(t){const e=new Set;for(const n of Er(t,null,oi.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return jt(function*(){return function WNe(t){const e=new Set;for(const n of Er(t,null,oi.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return jt(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function yFe(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of ZP(t,e,gFe))if("sections"===i){const o=bFe(t,r);n[i].push(o)}else if("datasets"===i){const o=UY(t,r);n[i].push(o)}else n[i]="donor"===i?_Fe(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return jt(function*(){return function HNe(t,e){const n=av(e,t,oi.donor.id),i=av(e,n,oi.providerUUID.id),r=new Set;for(const c of t)for(const l of Er(e,c,oi.spatialEntity,null,null))r.add(l.subject.id);const o=av(e,r,oi.sections.id),s=new Set([...av(e,r,oi.datasets.id),...av(e,o,oi.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return jt(function*(){return function cFe(t,e){const n={};return FY(t,e).forEach((r,o)=>{n[o]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return jt(function*(){return function lFe(t,e){const n=FY(t,e),i=new Map;for(const o of n.keys()){const s=n.get(o);for(const a of Er(e,null,vi.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[kd.cell.id]=n.get(kd.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return jt(function*(){return jY(e.store)})()}getCellTypeTreeModel(){var e=this;return jt(function*(){return function hFe(t){return LY(t,kd.cell.id,"cell",vi.asctb.ct_is_a.id)}(e.store)})()}getReferenceOrgans(){var e=this;return jt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return jt(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return jt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return jt(function*(){return i.graph.getSpatialPlacement(e,n)})()}}function TFe(t,e){return t===e}let MFe=(()=>{var t;class e{constructor(i,r){this.locator=i,this.globalConfig=r,this.subscriptions=new V,this.dataSource=r.getOption("data").pipe(Q(o=>({...EY,dataSources:o})),yi(o=>Object.keys(o).length>0),Q(o=>o),tt(TFe),Fe(o=>function CFe(t,e){return new le(n=>{const i=t(),r=e(i);return(r?ki(r):Le).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),s=>this.connectDataSource(s.source,o))),Ms(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(i){return this.dataSource.pipe(Fe(r=>r.getTissueBlockResults(i)),_i(1))}getAggregateResults(i){return this.dataSource.pipe(Fe(r=>r.getAggregateResults(i)),_i(1))}getOntologyTermOccurences(i){return this.dataSource.pipe(Fe(r=>r.getOntologyTermOccurences(i)),_i(1))}getCellTypeTermOccurences(i){return this.dataSource.pipe(Fe(r=>r.getCellTypeTermOccurences(i)),_i(1))}getOntologyTreeModel(){return this.dataSource.pipe(Fe(i=>i.getOntologyTreeModel()),_i(1))}getCellTypeTreeModel(){return this.dataSource.pipe(Fe(i=>i.getCellTypeTreeModel()),_i(1))}getReferenceOrgans(){return this.dataSource.pipe(Fe(i=>i.getReferenceOrgans()),_i(1))}getScene(i){return this.dataSource.pipe(Fe(r=>r.getScene(i)),_i(1))}getOrganScene(i,r){return this.dataSource.pipe(Fe(o=>o.getReferenceOrganScene(i,r)),_i(1))}createDataSource(){return{source:new EFe,unsubscribe:()=>{}}}connectDataSource(i,r){return jt(function*(){(new Date).getTime();return yield i.connect(r,!1),i})()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Zb),nt(qy))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),IFe=(()=>{var t;class e{constructor(i,r){this.configState=i,this.source=r,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(Q(o=>`http://purl.org/ccf/1.5/entity/${o}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(Q(o=>`http://purl.org/ccf/1.5/entity/${o}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=ns([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(Fe(([o,s,a])=>this.chooseScene(o,s))),this.organs$=this.configState.getOption("data").pipe(Q(o=>this.selectOrgans(o)),Ms(1)),this.filteredOrgans$=ns([this.organs$,this.referenceOrgans$]).pipe(Q(([o,s])=>this.getNeededReferenceOrgans(s,o)),Ms(1)),this.filteredScene$=ns([this.scene$,this.organs$,this.referenceOrgans$]).pipe(Q(([o,s,a])=>this.filterSceneNodes(o,s,a)),function Ske(t,e){const n=t.pipe(Ea(""));return i=>ns([i,n]).pipe(Q(([r,o])=>r.map(s=>function Ake(t,e,n){return t.entityId!==e?t:{...t,color:n}}(s,o,e))))}(this.highlightID$,Eke),function Tke(t){const e=t.pipe(Ea(""));return n=>ns([n,e]).pipe(Q(([i,r])=>i.map(o=>function Cke(t,e){return t.entityId!==e?t:{...t,zoomToOnLoad:!0}}(o,r))))}(this.zoomToID$),Ms(1))}chooseScene(i,r){const o=i?.map(a=>a[q$]?.placement.target)??[];if(new Set(o).size>1)return this.source.getScene();if(r){const a=r.find(c=>c["@id"]===o[0]);if(a)return this.source.getOrganScene(a.representation_of,{ontologyTerms:[a.reference_organ],sex:a.sex})}return qt([])}selectOrgans(i){const o=(i??[]).map(s=>s[q$].placement.target);return new Set(o)}filterSceneNodes(i,r,o){const s=this.getNeededReferenceOrgans(o,r),a=this.getNeededSkins(s),c=new Set([...r,...a]);return i.filter(d=>!d.reference_organ||c.has(d.reference_organ))}getNeededReferenceOrgans(i,r){return i.filter(o=>r.has(o.reference_organ??""))}getNeededSkins(i){if(1===i.length)return[];const r=new Set;return i.forEach(o=>{"Female"===o.sex?r.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===o.sex&&r.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...r]}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(qy),nt(MFe))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const DFe=["bodyUI"];let RFe=(()=>{var t;class e{constructor(i,r,o){this.configState=i,this.sceneSource=r,this.cdr=o,this.onMouseEnter=new tn,this.onMouseLeave=new tn,this.onClick=new tn,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(pr(s=>this.reset()))}reset(){var i=this;return jt(function*(){const{bodyUI:r}=i;yield new Promise(a=>setTimeout(a,200));const o=yield function Sz(t,e){const n="object"==typeof e;return new Promise((i,r)=>{let s,o=!1;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):n?i(e.defaultValue):r(new iy)}})})}(i.organs$.pipe(_i(1))),s=!!r.scene?.find(a=>a.zoomToOnLoad);if(r.rotation=0,r.rotationX=0,!s)if(o&&1===o.length){const{x_dimension:a,y_dimension:c,z_dimension:l}=o[0];r.bounds={x:1.25*a/1e3,y:1.25*c/1e3,z:1.25*l/1e3},r.target=[a/1e3/2,c/1e3/2,l/1e3/2]}else r.bounds={x:2.2,y:2,z:.4},r.target=[0,0,0];i.cdr.detectChanges()})()}}return(t=e).\u0275fac=function(i){return new(i||t)(He(qy),He(IFe),He(to))},t.\u0275cmp=Fn({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&Xi(DFe,7),2&i){let o;Hn(o=Gn())&&(r.bodyUI=o.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:4,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(i,r){1&i&&(Bt(0,"ccf-body-ui",0,1),Dn("nodeClick",function(s){return r.onClick.emit(s)})("nodeHoverStart",function(s){return r.onMouseEnter.emit(s)})("nodeHoverStop",function(s){return r.onMouseLeave.emit(s)}),ma(2,"async"),Ut()),2&i&&Vt("scene",al(2,2,r.scene$))("interactive",!0)},dependencies:[VOe,n0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),e})();function OFe(t,e){if(1&t){const n=function nd(){return Dt()}();Bt(0,"ccf-root",1),Dn("onMouseEnter",function(r){return br(n),Tr(Rn().onMouseEnter.emit(r))})("onMouseLeave",function(r){return br(n),Tr(Rn().onMouseLeave.emit(r))})("onClick",function(r){return br(n),Tr(Rn().onClick.emit(r))}),Ut()}}function kFe(t){return t.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let PFe=(()=>{var t;class e extends Cne{constructor(i,r){super(i,r,{initialDelay:10,initialConfig:{...a0_dbOptions,...globalThis.dbOptions},parse:{data:kFe}}),this.onMouseEnter=new tn,this.onMouseLeave=new tn,this.onClick=new tn}}return(t=e).\u0275fac=function(i){return new(i||t)(He(qy),He(to))},t.\u0275cmp=Fn({type:t,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[bn],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&yn(0,OFe,1,0,"ccf-root",0),2&i&&Vt("ngIf",r.initialized)},dependencies:[ll,RFe],encapsulation:2,changeDetection:0}),e})();const dS=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class LFe{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=Mf(this.action),i=function FFe(t){return dS(t.getHours(),2)+":"+dS(t.getMinutes(),2)+":"+dS(t.getSeconds(),2)+"."+dS(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class BFe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const VY=new bt("NGXS_LOGGER_PLUGIN_OPTIONS");let jFe=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new BFe(this._options),this._store=this._store||this._injector.get(Sl);const o=new LFe(i,this._store,this._logWriter);return o.dispatched(n),r(n,i).pipe(pr(s=>{o.completed(s)}),tc(s=>{throw o.errored(s),s}))}}return t.\u0275fac=function(n){return new(n||t)(nt(VY),nt(xr))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();const zY=new bt("LOGGER_USER_OPTIONS");function UFe(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let VFe=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:Bz,useClass:jFe,multi:!0},{provide:zY,useValue:n},{provide:VY,useFactory:UFe,deps:[zY]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=on({type:t}),t.\u0275inj=cn({}),t})();const zFe=[qy];let HFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=on({type:t}),t.\u0275inj=cn({imports:[JIe.forRoot(),Qz.forRoot(zFe,{developmentMode:!1}),VFe.forRoot({disabled:true})]}),e})(),GFe=(()=>{var t;class e{constructor(i){this.injector=i}ngDoBootstrap(){const i=function Ene(t,e){const i=function gne(t,e){return e.get(It).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new vne(t,e.injector),o=function mne(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function dne(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(i);class s extends wne{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=r.create(this.injector||e.injector);i.forEach(({propName:l,transform:d})=>{if(!this.hasOwnProperty(l))return;const h=this[l];delete this[l],c.setInputValue(l,h,d)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,d,h){const[p,m]=o[c];this.ngElementStrategy.setInputValue(p,d,m)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(o),i.forEach(({propName:a,transform:c})=>{Object.defineProperty(s.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),s}(PFe,{injector:this.injector});customElements.define("ccf-body-ui-wc",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(xr))},t.\u0275mod=on({type:t}),t.\u0275inj=cn({imports:[ine,HFe,zOe]}),e})();tne().bootstrapModule(GFe).catch(t=>console.error(t))},2323:Ue=>{Ue.exports=function(C,J){var A=J.length;if(0!==A){var te=C.length;C.length+=A;for(var B=0;B<A;B++)C[te+B]=J[B]}}},3982:Ue=>{"use strict";const{AbortController:ge,AbortSignal:C}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ue.exports=ge,Ue.exports.AbortSignal=C,Ue.exports.default=ge},9919:(Ue,ge)=>{"use strict";ge.byteLength=function w(I){var V=g(I),K=V[1];return 3*(V[0]+K)/4-K},ge.toByteArray=function G(I){var V,_,ae=g(I),K=ae[0],oe=ae[1],ne=new A(function N(I,V,ae){return 3*(V+ae)/4-ae}(0,K,oe)),X=0,L=oe>0?K-4:K;for(_=0;_<L;_+=4)V=J[I.charCodeAt(_)]<<18|J[I.charCodeAt(_+1)]<<12|J[I.charCodeAt(_+2)]<<6|J[I.charCodeAt(_+3)],ne[X++]=V>>16&255,ne[X++]=V>>8&255,ne[X++]=255&V;return 2===oe&&(V=J[I.charCodeAt(_)]<<2|J[I.charCodeAt(_+1)]>>4,ne[X++]=255&V),1===oe&&(V=J[I.charCodeAt(_)]<<10|J[I.charCodeAt(_+1)]<<4|J[I.charCodeAt(_+2)]>>2,ne[X++]=V>>8&255,ne[X++]=255&V),ne},ge.fromByteArray=function de(I){for(var V,ae=I.length,K=ae%3,oe=[],X=0,L=ae-K;X<L;X+=16383)oe.push(W(I,X,X+16383>L?L:X+16383));return 1===K?oe.push(C[(V=I[ae-1])>>2]+C[V<<4&63]+"=="):2===K&&oe.push(C[(V=(I[ae-2]<<8)+I[ae-1])>>10]+C[V>>4&63]+C[V<<2&63]+"="),oe.join("")};for(var C=[],J=[],A=typeof Uint8Array<"u"?Uint8Array:Array,te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0;B<64;++B)C[B]=te[B],J[te.charCodeAt(B)]=B;function g(I){var V=I.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=I.indexOf("=");return-1===ae&&(ae=V),[ae,ae===V?0:4-ae%4]}function R(I){return C[I>>18&63]+C[I>>12&63]+C[I>>6&63]+C[63&I]}function W(I,V,ae){for(var oe=[],ne=V;ne<ae;ne+=3)oe.push(R((I[ne]<<16&16711680)+(I[ne+1]<<8&65280)+(255&I[ne+2])));return oe.join("")}J["-".charCodeAt(0)]=62,J["_".charCodeAt(0)]=63},1979:(Ue,ge)=>{"use strict";var J=function(te){return te.typeOfFunction="function",te.boolTrue=!0,te}(J||{});ge.ak=function A(te,B,ee){if(!ee||typeof ee.value!==J.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+B+"> is not a method!");return{configurable:J.boolTrue,get:function(){var g=ee.value.bind(this);return Object.defineProperty(this,B,{value:g,configurable:J.boolTrue,writable:J.boolTrue}),g}}}},9007:(Ue,ge,C)=>{"use strict";var J=C(9919),A=C(2601);ge.Buffer=g,ge.SlowBuffer=function K(F){return+F!=F&&(F=0),g.alloc(+F)},ge.INSPECT_MAX_BYTES=50;var te=2147483647;function ee(F){if(F>te)throw new RangeError('The value "'+F+'" is invalid for option "size"');var x=new Uint8Array(F);return x.__proto__=g.prototype,x}function g(F,x,M){if("number"==typeof F){if("string"==typeof x)throw new TypeError('The "string" argument must be of type string. Received type number');return R(F)}return w(F,x,M)}function w(F,x,M){if("string"==typeof F)return function W(F,x){if(("string"!=typeof x||""===x)&&(x="utf8"),!g.isEncoding(x))throw new TypeError("Unknown encoding: "+x);var M=0|oe(F,x),Q=ee(M),he=Q.write(F,x);return he!==M&&(Q=Q.slice(0,he)),Q}(F,x);if(ArrayBuffer.isView(F))return de(F);if(null==F)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(ce(F,ArrayBuffer)||F&&ce(F.buffer,ArrayBuffer))return function I(F,x,M){if(x<0||F.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<x+(M||0))throw new RangeError('"length" is outside of buffer bounds');var Q;return(Q=void 0===x&&void 0===M?new Uint8Array(F):void 0===M?new Uint8Array(F,x):new Uint8Array(F,x,M)).__proto__=g.prototype,Q}(F,x,M);if("number"==typeof F)throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=F.valueOf&&F.valueOf();if(null!=Q&&Q!==F)return g.from(Q,x,M);var he=function V(F){if(g.isBuffer(F)){var x=0|ae(F.length),M=ee(x);return 0===M.length||F.copy(M,0,0,x),M}return void 0!==F.length?"number"!=typeof F.length||Z(F.length)?ee(0):de(F):"Buffer"===F.type&&Array.isArray(F.data)?de(F.data):void 0}(F);if(he)return he;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof F[Symbol.toPrimitive])return g.from(F[Symbol.toPrimitive]("string"),x,M);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}function N(F){if("number"!=typeof F)throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function R(F){return N(F),ee(F<0?0:0|ae(F))}function de(F){for(var x=F.length<0?0:0|ae(F.length),M=ee(x),Q=0;Q<x;Q+=1)M[Q]=255&F[Q];return M}function ae(F){if(F>=te)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+te.toString(16)+" bytes");return 0|F}function oe(F,x){if(g.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||ce(F,ArrayBuffer))return F.byteLength;if("string"!=typeof F)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);var M=F.length,Q=arguments.length>2&&!0===arguments[2];if(!Q&&0===M)return 0;for(var he=!1;;)switch(x){case"ascii":case"latin1":case"binary":return M;case"utf8":case"utf-8":return E(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*M;case"hex":return M>>>1;case"base64":return Ae(F).length;default:if(he)return Q?-1:E(F).length;x=(""+x).toLowerCase(),he=!0}}function ne(F,x,M){var Q=!1;if((void 0===x||x<0)&&(x=0),x>this.length||((void 0===M||M>this.length)&&(M=this.length),M<=0)||(M>>>=0)<=(x>>>=0))return"";for(F||(F="utf8");;)switch(F){case"hex":return Ne(this,x,M);case"utf8":case"utf-8":return Re(this,x,M);case"ascii":return Xe(this,x,M);case"latin1":case"binary":return we(this,x,M);case"base64":return Se(this,x,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,x,M);default:if(Q)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),Q=!0}}function X(F,x,M){var Q=F[x];F[x]=F[M],F[M]=Q}function L(F,x,M,Q,he){if(0===F.length)return-1;if("string"==typeof M?(Q=M,M=0):M>2147483647?M=2147483647:M<-2147483648&&(M=-2147483648),Z(M=+M)&&(M=he?0:F.length-1),M<0&&(M=F.length+M),M>=F.length){if(he)return-1;M=F.length-1}else if(M<0){if(!he)return-1;M=0}if("string"==typeof x&&(x=g.from(x,Q)),g.isBuffer(x))return 0===x.length?-1:_(F,x,M,Q,he);if("number"==typeof x)return x&=255,"function"==typeof Uint8Array.prototype.indexOf?he?Uint8Array.prototype.indexOf.call(F,x,M):Uint8Array.prototype.lastIndexOf.call(F,x,M):_(F,[x],M,Q,he);throw new TypeError("val must be string, number or Buffer")}function _(F,x,M,Q,he){var mt,ze=1,Ye=F.length,dt=x.length;if(void 0!==Q&&("ucs2"===(Q=String(Q).toLowerCase())||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(F.length<2||x.length<2)return-1;ze=2,Ye/=2,dt/=2,M/=2}function vt(H,v){return 1===ze?H[v]:H.readUInt16BE(v*ze)}if(he){var zt=-1;for(mt=M;mt<Ye;mt++)if(vt(F,mt)===vt(x,-1===zt?0:mt-zt)){if(-1===zt&&(zt=mt),mt-zt+1===dt)return zt*ze}else-1!==zt&&(mt-=mt-zt),zt=-1}else for(M+dt>Ye&&(M=Ye-dt),mt=M;mt>=0;mt--){for(var rn=!0,Ie=0;Ie<dt;Ie++)if(vt(F,mt+Ie)!==vt(x,Ie)){rn=!1;break}if(rn)return mt}return-1}function O(F,x,M,Q){M=Number(M)||0;var he=F.length-M;Q?(Q=Number(Q))>he&&(Q=he):Q=he;var ze=x.length;Q>ze/2&&(Q=ze/2);for(var Ye=0;Ye<Q;++Ye){var dt=parseInt(x.substr(2*Ye,2),16);if(Z(dt))return Ye;F[M+Ye]=dt}return Ye}function S(F,x,M,Q){return et(E(x,F.length-M),F,M,Q)}function ue(F,x,M,Q){return et(function ie(F){for(var x=[],M=0;M<F.length;++M)x.push(255&F.charCodeAt(M));return x}(x),F,M,Q)}function j(F,x,M,Q){return ue(F,x,M,Q)}function Te(F,x,M,Q){return et(Ae(x),F,M,Q)}function se(F,x,M,Q){return et(function z(F,x){for(var M,Q,ze=[],Ye=0;Ye<F.length&&!((x-=2)<0);++Ye)Q=(M=F.charCodeAt(Ye))>>8,ze.push(M%256),ze.push(Q);return ze}(x,F.length-M),F,M,Q)}function Se(F,x,M){return J.fromByteArray(0===x&&M===F.length?F:F.slice(x,M))}function Re(F,x,M){M=Math.min(F.length,M);for(var Q=[],he=x;he<M;){var vt,mt,zt,rn,ze=F[he],Ye=null,dt=ze>239?4:ze>223?3:ze>191?2:1;if(he+dt<=M)switch(dt){case 1:ze<128&&(Ye=ze);break;case 2:128==(192&(vt=F[he+1]))&&(rn=(31&ze)<<6|63&vt)>127&&(Ye=rn);break;case 3:mt=F[he+2],128==(192&(vt=F[he+1]))&&128==(192&mt)&&(rn=(15&ze)<<12|(63&vt)<<6|63&mt)>2047&&(rn<55296||rn>57343)&&(Ye=rn);break;case 4:mt=F[he+2],zt=F[he+3],128==(192&(vt=F[he+1]))&&128==(192&mt)&&128==(192&zt)&&(rn=(15&ze)<<18|(63&vt)<<12|(63&mt)<<6|63&zt)>65535&&rn<1114112&&(Ye=rn)}null===Ye?(Ye=65533,dt=1):Ye>65535&&(Q.push((Ye-=65536)>>>10&1023|55296),Ye=56320|1023&Ye),Q.push(Ye),he+=dt}return function Qe(F){var x=F.length;if(x<=Oe)return String.fromCharCode.apply(String,F);for(var M="",Q=0;Q<x;)M+=String.fromCharCode.apply(String,F.slice(Q,Q+=Oe));return M}(Q)}ge.kMaxLength=te,!(g.TYPED_ARRAY_SUPPORT=function B(){try{var F=new Uint8Array(1);return F.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===F.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),g.poolSize=8192,g.from=function(F,x,M){return w(F,x,M)},g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,g.alloc=function(F,x,M){return function G(F,x,M){return N(F),F<=0?ee(F):void 0!==x?"string"==typeof M?ee(F).fill(x,M):ee(F).fill(x):ee(F)}(F,x,M)},g.allocUnsafe=function(F){return R(F)},g.allocUnsafeSlow=function(F){return R(F)},g.isBuffer=function(x){return null!=x&&!0===x._isBuffer&&x!==g.prototype},g.compare=function(x,M){if(ce(x,Uint8Array)&&(x=g.from(x,x.offset,x.byteLength)),ce(M,Uint8Array)&&(M=g.from(M,M.offset,M.byteLength)),!g.isBuffer(x)||!g.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===M)return 0;for(var Q=x.length,he=M.length,ze=0,Ye=Math.min(Q,he);ze<Ye;++ze)if(x[ze]!==M[ze]){Q=x[ze],he=M[ze];break}return Q<he?-1:he<Q?1:0},g.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(x,M){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(0===x.length)return g.alloc(0);var Q;if(void 0===M)for(M=0,Q=0;Q<x.length;++Q)M+=x[Q].length;var he=g.allocUnsafe(M),ze=0;for(Q=0;Q<x.length;++Q){var Ye=x[Q];if(ce(Ye,Uint8Array)&&(Ye=g.from(Ye)),!g.isBuffer(Ye))throw new TypeError('"list" argument must be an Array of Buffers');Ye.copy(he,ze),ze+=Ye.length}return he},g.byteLength=oe,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var x=this.length;if(x%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<x;M+=2)X(this,M,M+1);return this},g.prototype.swap32=function(){var x=this.length;if(x%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<x;M+=4)X(this,M,M+3),X(this,M+1,M+2);return this},g.prototype.swap64=function(){var x=this.length;if(x%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<x;M+=8)X(this,M,M+7),X(this,M+1,M+6),X(this,M+2,M+5),X(this,M+3,M+4);return this},g.prototype.toLocaleString=g.prototype.toString=function(){var x=this.length;return 0===x?"":0===arguments.length?Re(this,0,x):ne.apply(this,arguments)},g.prototype.equals=function(x){if(!g.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x||0===g.compare(this,x)},g.prototype.inspect=function(){var x="",M=ge.INSPECT_MAX_BYTES;return x=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(x+=" ... "),"<Buffer "+x+">"},g.prototype.compare=function(x,M,Q,he,ze){if(ce(x,Uint8Array)&&(x=g.from(x,x.offset,x.byteLength)),!g.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(void 0===M&&(M=0),void 0===Q&&(Q=x?x.length:0),void 0===he&&(he=0),void 0===ze&&(ze=this.length),M<0||Q>x.length||he<0||ze>this.length)throw new RangeError("out of range index");if(he>=ze&&M>=Q)return 0;if(he>=ze)return-1;if(M>=Q)return 1;if(this===x)return 0;for(var Ye=(ze>>>=0)-(he>>>=0),dt=(Q>>>=0)-(M>>>=0),vt=Math.min(Ye,dt),mt=this.slice(he,ze),zt=x.slice(M,Q),rn=0;rn<vt;++rn)if(mt[rn]!==zt[rn]){Ye=mt[rn],dt=zt[rn];break}return Ye<dt?-1:dt<Ye?1:0},g.prototype.includes=function(x,M,Q){return-1!==this.indexOf(x,M,Q)},g.prototype.indexOf=function(x,M,Q){return L(this,x,M,Q,!0)},g.prototype.lastIndexOf=function(x,M,Q){return L(this,x,M,Q,!1)},g.prototype.write=function(x,M,Q,he){if(void 0===M)he="utf8",Q=this.length,M=0;else if(void 0===Q&&"string"==typeof M)he=M,Q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(Q)?(Q>>>=0,void 0===he&&(he="utf8")):(he=Q,Q=void 0)}var ze=this.length-M;if((void 0===Q||Q>ze)&&(Q=ze),x.length>0&&(Q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var Ye=!1;;)switch(he){case"hex":return O(this,x,M,Q);case"utf8":case"utf-8":return S(this,x,M,Q);case"ascii":return ue(this,x,M,Q);case"latin1":case"binary":return j(this,x,M,Q);case"base64":return Te(this,x,M,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,x,M,Q);default:if(Ye)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),Ye=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Oe=4096;function Xe(F,x,M){var Q="";M=Math.min(F.length,M);for(var he=x;he<M;++he)Q+=String.fromCharCode(127&F[he]);return Q}function we(F,x,M){var Q="";M=Math.min(F.length,M);for(var he=x;he<M;++he)Q+=String.fromCharCode(F[he]);return Q}function Ne(F,x,M){var Q=F.length;(!x||x<0)&&(x=0),(!M||M<0||M>Q)&&(M=Q);for(var he="",ze=x;ze<M;++ze)he+=P(F[ze]);return he}function Pe(F,x,M){for(var Q=F.slice(x,M),he="",ze=0;ze<Q.length;ze+=2)he+=String.fromCharCode(Q[ze]+256*Q[ze+1]);return he}function Ve(F,x,M){if(F%1!=0||F<0)throw new RangeError("offset is not uint");if(F+x>M)throw new RangeError("Trying to access beyond buffer length")}function fe(F,x,M,Q,he,ze){if(!g.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>he||x<ze)throw new RangeError('"value" argument is out of bounds');if(M+Q>F.length)throw new RangeError("Index out of range")}function Ee(F,x,M,Q,he,ze){if(M+Q>F.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("Index out of range")}function $e(F,x,M,Q,he){return x=+x,M>>>=0,he||Ee(F,0,M,4),A.write(F,x,M,Q,23,4),M+4}function ot(F,x,M,Q,he){return x=+x,M>>>=0,he||Ee(F,0,M,8),A.write(F,x,M,Q,52,8),M+8}g.prototype.slice=function(x,M){var Q=this.length;(x=~~x)<0?(x+=Q)<0&&(x=0):x>Q&&(x=Q),(M=void 0===M?Q:~~M)<0?(M+=Q)<0&&(M=0):M>Q&&(M=Q),M<x&&(M=x);var he=this.subarray(x,M);return he.__proto__=g.prototype,he},g.prototype.readUIntLE=function(x,M,Q){x>>>=0,M>>>=0,Q||Ve(x,M,this.length);for(var he=this[x],ze=1,Ye=0;++Ye<M&&(ze*=256);)he+=this[x+Ye]*ze;return he},g.prototype.readUIntBE=function(x,M,Q){x>>>=0,M>>>=0,Q||Ve(x,M,this.length);for(var he=this[x+--M],ze=1;M>0&&(ze*=256);)he+=this[x+--M]*ze;return he},g.prototype.readUInt8=function(x,M){return x>>>=0,M||Ve(x,1,this.length),this[x]},g.prototype.readUInt16LE=function(x,M){return x>>>=0,M||Ve(x,2,this.length),this[x]|this[x+1]<<8},g.prototype.readUInt16BE=function(x,M){return x>>>=0,M||Ve(x,2,this.length),this[x]<<8|this[x+1]},g.prototype.readUInt32LE=function(x,M){return x>>>=0,M||Ve(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+16777216*this[x+3]},g.prototype.readUInt32BE=function(x,M){return x>>>=0,M||Ve(x,4,this.length),16777216*this[x]+(this[x+1]<<16|this[x+2]<<8|this[x+3])},g.prototype.readIntLE=function(x,M,Q){x>>>=0,M>>>=0,Q||Ve(x,M,this.length);for(var he=this[x],ze=1,Ye=0;++Ye<M&&(ze*=256);)he+=this[x+Ye]*ze;return he>=(ze*=128)&&(he-=Math.pow(2,8*M)),he},g.prototype.readIntBE=function(x,M,Q){x>>>=0,M>>>=0,Q||Ve(x,M,this.length);for(var he=M,ze=1,Ye=this[x+--he];he>0&&(ze*=256);)Ye+=this[x+--he]*ze;return Ye>=(ze*=128)&&(Ye-=Math.pow(2,8*M)),Ye},g.prototype.readInt8=function(x,M){return x>>>=0,M||Ve(x,1,this.length),128&this[x]?-1*(255-this[x]+1):this[x]},g.prototype.readInt16LE=function(x,M){x>>>=0,M||Ve(x,2,this.length);var Q=this[x]|this[x+1]<<8;return 32768&Q?4294901760|Q:Q},g.prototype.readInt16BE=function(x,M){x>>>=0,M||Ve(x,2,this.length);var Q=this[x+1]|this[x]<<8;return 32768&Q?4294901760|Q:Q},g.prototype.readInt32LE=function(x,M){return x>>>=0,M||Ve(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},g.prototype.readInt32BE=function(x,M){return x>>>=0,M||Ve(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},g.prototype.readFloatLE=function(x,M){return x>>>=0,M||Ve(x,4,this.length),A.read(this,x,!0,23,4)},g.prototype.readFloatBE=function(x,M){return x>>>=0,M||Ve(x,4,this.length),A.read(this,x,!1,23,4)},g.prototype.readDoubleLE=function(x,M){return x>>>=0,M||Ve(x,8,this.length),A.read(this,x,!0,52,8)},g.prototype.readDoubleBE=function(x,M){return x>>>=0,M||Ve(x,8,this.length),A.read(this,x,!1,52,8)},g.prototype.writeUIntLE=function(x,M,Q,he){x=+x,M>>>=0,Q>>>=0,he||fe(this,x,M,Q,Math.pow(2,8*Q)-1,0);var Ye=1,dt=0;for(this[M]=255&x;++dt<Q&&(Ye*=256);)this[M+dt]=x/Ye&255;return M+Q},g.prototype.writeUIntBE=function(x,M,Q,he){x=+x,M>>>=0,Q>>>=0,he||fe(this,x,M,Q,Math.pow(2,8*Q)-1,0);var Ye=Q-1,dt=1;for(this[M+Ye]=255&x;--Ye>=0&&(dt*=256);)this[M+Ye]=x/dt&255;return M+Q},g.prototype.writeUInt8=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,1,255,0),this[M]=255&x,M+1},g.prototype.writeUInt16LE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,2,65535,0),this[M]=255&x,this[M+1]=x>>>8,M+2},g.prototype.writeUInt16BE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,2,65535,0),this[M]=x>>>8,this[M+1]=255&x,M+2},g.prototype.writeUInt32LE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,4,4294967295,0),this[M+3]=x>>>24,this[M+2]=x>>>16,this[M+1]=x>>>8,this[M]=255&x,M+4},g.prototype.writeUInt32BE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,4,4294967295,0),this[M]=x>>>24,this[M+1]=x>>>16,this[M+2]=x>>>8,this[M+3]=255&x,M+4},g.prototype.writeIntLE=function(x,M,Q,he){if(x=+x,M>>>=0,!he){var ze=Math.pow(2,8*Q-1);fe(this,x,M,Q,ze-1,-ze)}var Ye=0,dt=1,vt=0;for(this[M]=255&x;++Ye<Q&&(dt*=256);)x<0&&0===vt&&0!==this[M+Ye-1]&&(vt=1),this[M+Ye]=(x/dt>>0)-vt&255;return M+Q},g.prototype.writeIntBE=function(x,M,Q,he){if(x=+x,M>>>=0,!he){var ze=Math.pow(2,8*Q-1);fe(this,x,M,Q,ze-1,-ze)}var Ye=Q-1,dt=1,vt=0;for(this[M+Ye]=255&x;--Ye>=0&&(dt*=256);)x<0&&0===vt&&0!==this[M+Ye+1]&&(vt=1),this[M+Ye]=(x/dt>>0)-vt&255;return M+Q},g.prototype.writeInt8=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,1,127,-128),x<0&&(x=255+x+1),this[M]=255&x,M+1},g.prototype.writeInt16LE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,2,32767,-32768),this[M]=255&x,this[M+1]=x>>>8,M+2},g.prototype.writeInt16BE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,2,32767,-32768),this[M]=x>>>8,this[M+1]=255&x,M+2},g.prototype.writeInt32LE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,4,2147483647,-2147483648),this[M]=255&x,this[M+1]=x>>>8,this[M+2]=x>>>16,this[M+3]=x>>>24,M+4},g.prototype.writeInt32BE=function(x,M,Q){return x=+x,M>>>=0,Q||fe(this,x,M,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[M]=x>>>24,this[M+1]=x>>>16,this[M+2]=x>>>8,this[M+3]=255&x,M+4},g.prototype.writeFloatLE=function(x,M,Q){return $e(this,x,M,!0,Q)},g.prototype.writeFloatBE=function(x,M,Q){return $e(this,x,M,!1,Q)},g.prototype.writeDoubleLE=function(x,M,Q){return ot(this,x,M,!0,Q)},g.prototype.writeDoubleBE=function(x,M,Q){return ot(this,x,M,!1,Q)},g.prototype.copy=function(x,M,Q,he){if(!g.isBuffer(x))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!he&&0!==he&&(he=this.length),M>=x.length&&(M=x.length),M||(M=0),he>0&&he<Q&&(he=Q),he===Q||0===x.length||0===this.length)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),x.length-M<he-Q&&(he=x.length-M+Q);var ze=he-Q;if(this===x&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(M,Q,he);else if(this===x&&Q<M&&M<he)for(var Ye=ze-1;Ye>=0;--Ye)x[Ye+M]=this[Ye+Q];else Uint8Array.prototype.set.call(x,this.subarray(Q,he),M);return ze},g.prototype.fill=function(x,M,Q,he){if("string"==typeof x){if("string"==typeof M?(he=M,M=0,Q=this.length):"string"==typeof Q&&(he=Q,Q=this.length),void 0!==he&&"string"!=typeof he)throw new TypeError("encoding must be a string");if("string"==typeof he&&!g.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(1===x.length){var ze=x.charCodeAt(0);("utf8"===he&&ze<128||"latin1"===he)&&(x=ze)}}else"number"==typeof x&&(x&=255);if(M<0||this.length<M||this.length<Q)throw new RangeError("Out of range index");if(Q<=M)return this;var Ye;if(M>>>=0,Q=void 0===Q?this.length:Q>>>0,x||(x=0),"number"==typeof x)for(Ye=M;Ye<Q;++Ye)this[Ye]=x;else{var dt=g.isBuffer(x)?x:g.from(x,he),vt=dt.length;if(0===vt)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(Ye=0;Ye<Q-M;++Ye)this[Ye+M]=dt[Ye%vt]}return this};var Je=/[^+/0-9A-Za-z-_]/g;function P(F){return F<16?"0"+F.toString(16):F.toString(16)}function E(F,x){x=x||1/0;for(var M,Q=F.length,he=null,ze=[],Ye=0;Ye<Q;++Ye){if((M=F.charCodeAt(Ye))>55295&&M<57344){if(!he){if(M>56319){(x-=3)>-1&&ze.push(239,191,189);continue}if(Ye+1===Q){(x-=3)>-1&&ze.push(239,191,189);continue}he=M;continue}if(M<56320){(x-=3)>-1&&ze.push(239,191,189),he=M;continue}M=65536+(he-55296<<10|M-56320)}else he&&(x-=3)>-1&&ze.push(239,191,189);if(he=null,M<128){if((x-=1)<0)break;ze.push(M)}else if(M<2048){if((x-=2)<0)break;ze.push(M>>6|192,63&M|128)}else if(M<65536){if((x-=3)<0)break;ze.push(M>>12|224,M>>6&63|128,63&M|128)}else{if(!(M<1114112))throw new Error("Invalid code point");if((x-=4)<0)break;ze.push(M>>18|240,M>>12&63|128,M>>6&63|128,63&M|128)}}return ze}function Ae(F){return J.toByteArray(function le(F){if((F=(F=F.split("=")[0]).trim().replace(Je,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(F))}function et(F,x,M,Q){for(var he=0;he<Q&&!(he+M>=x.length||he>=F.length);++he)x[he+M]=F[he];return he}function ce(F,x){return F instanceof x||null!=F&&null!=F.constructor&&null!=F.constructor.name&&F.constructor.name===x.name}function Z(F){return F!=F}},1563:(Ue,ge,C)=>{Ue.exports={ResizeSensor:C(884),ElementQueries:C(8381)}},8381:function(Ue,ge,C){"use strict";var J,A,te;typeof window<"u"&&window,A=[C(884)],void 0!==(te="function"==typeof(J=function(B){var ee=function(){var w,N={},G=[];function R(j){j||(j=document.documentElement);var Te=window.getComputedStyle(j,null).fontSize;return parseFloat(Te)||16}function de(j,Te){var se=Te.split(/\d/),Se=se[se.length-1];switch(Te=parseFloat(Te),Se){case"px":default:return Te;case"em":return Te*R(j);case"rem":return Te*R();case"vw":return Te*document.documentElement.clientWidth/100;case"vh":return Te*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Re=document.documentElement.clientWidth/100,Oe=document.documentElement.clientHeight/100;return Te*(0,Math["vmin"===Se?"min":"max"])(Re,Oe)}}function I(j,Te){this.element=j;var se,Se,Re,Oe,Qe,Xe,we,Ne,Pe=["min-width","min-height","max-width","max-height"];this.call=function(){for(se in Re=function W(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var Te=j.getBoundingClientRect();return{width:Math.round(Te.width),height:Math.round(Te.height)}}(this.element),Xe={},N[Te])N[Te].hasOwnProperty(se)&&(Oe=de(this.element,(Se=N[Te][se]).value),Qe="width"===Se.property?Re.width:Re.height,we="","min"===Se.mode&&Qe>=Oe&&(we+=Se.value),"max"===Se.mode&&Qe<=Oe&&(we+=Se.value),Xe[Ne=Se.mode+"-"+Se.property]||(Xe[Ne]=""),we&&-1===(" "+Xe[Ne]+" ").indexOf(" "+we+" ")&&(Xe[Ne]+=" "+we));for(var Ve in Pe)Pe.hasOwnProperty(Ve)&&(Xe[Pe[Ve]]?this.element.setAttribute(Pe[Ve],Xe[Pe[Ve]].substr(1)):this.element.removeAttribute(Pe[Ve]))}}function V(j,Te){j.elementQueriesSetupInformation||(j.elementQueriesSetupInformation=new I(j,Te)),j.elementQueriesSensor||(j.elementQueriesSensor=new B(j,function(){j.elementQueriesSetupInformation.call()}))}function ae(j,Te,se,Se){if(typeof N[j]>"u"){N[j]=[];var Re=G.length;w.innerHTML+="\n"+j+" {animation: 0.1s element-queries;}",w.innerHTML+="\n"+j+" > .resize-sensor {min-width: "+Re+"px;}",G.push(j)}N[j].push({mode:Te,property:se,value:Se})}function K(j){var Te;if(document.querySelectorAll&&(Te=j?j.querySelectorAll.bind(j):document.querySelectorAll.bind(document)),!Te&&typeof $$<"u"&&(Te=$$),!Te&&typeof jQuery<"u"&&(Te=jQuery),!Te)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Te}function ne(j){var Te=[],se=[],Se=[],Re=0,Oe=-1,Qe=[];for(var Xe in j.children)if(j.children.hasOwnProperty(Xe)&&j.children[Xe].tagName&&"img"===j.children[Xe].tagName.toLowerCase()){Te.push(j.children[Xe]);var we=j.children[Xe].getAttribute("min-width")||j.children[Xe].getAttribute("data-min-width"),Ne=j.children[Xe].getAttribute("data-src")||j.children[Xe].getAttribute("url");Se.push(Ne),se.push({minWidth:we}),we?j.children[Xe].style.display="none":(Re=Te.length-1,j.children[Xe].style.display="block")}function Ve(){var Ee,fe=!1;for(Ee in Te)Te.hasOwnProperty(Ee)&&se[Ee].minWidth&&j.offsetWidth>se[Ee].minWidth&&(fe=Ee);if(fe||(fe=Re),Oe!==fe)if(Qe[fe])Te[Oe].style.display="none",Te[fe].style.display="block",Oe=fe;else{var $e=new Image;$e.onload=function(){Te[fe].src=Se[fe],Te[Oe].style.display="none",Te[fe].style.display="block",Qe[fe]=!0,Oe=fe},$e.src=Se[fe]}else Te[fe].src=Se[fe]}Oe=Re,j.resizeSensorInstance=new B(j,Ve),Ve()}var L=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,_=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function O(j){var Te,se,Se,Re;for(j=j.replace(/'/g,'"');null!==(Te=L.exec(j));)for(se=Te[1]+Te[3],Se=Te[2];null!==(Re=_.exec(Se));)ae(se,Re[1],Re[2],Re[3])}function S(j){var Te="";if(j)if("string"==typeof j)(-1!==(j=j.toLowerCase()).indexOf("min-width")||-1!==j.indexOf("max-width"))&&O(j);else for(var se=0,Se=j.length;se<Se;se++)1===j[se].type?(-1!==(Te=j[se].selectorText||j[se].cssText).indexOf("min-height")||-1!==Te.indexOf("max-height")||-1!==Te.indexOf("min-width")||-1!==Te.indexOf("max-width"))&&O(Te):4===j[se].type?S(j[se].cssRules||j[se].rules):3===j[se].type&&j[se].styleSheet.hasOwnProperty("cssRules")&&S(j[se].styleSheet.cssRules)}var ue=!1;this.init=function(){var j="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?j="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?j="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(j="oanimationstart"),document.body.addEventListener(j,function(Se){var Re=Se.target,Oe=Re&&window.getComputedStyle(Re,null),Qe=Oe&&Oe.getPropertyValue("animation-name");if(Qe&&-1!==Qe.indexOf("element-queries")){Re.elementQueriesSensor=new B(Re,function(){Re.elementQueriesSetupInformation&&Re.elementQueriesSetupInformation.call()});var Ne=window.getComputedStyle(Re.resizeSensor,null).getPropertyValue("min-width");Ne=parseInt(Ne.replace("px","")),V(Se.target,G[Ne])}}),ue||((w=document.createElement("style")).type="text/css",w.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",w.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(w),ue=!0);for(var Te=0,se=document.styleSheets.length;Te<se;Te++)try{document.styleSheets[Te].href&&0===document.styleSheets[Te].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Te].href),S(document.styleSheets[Te].cssRules||document.styleSheets[Te].rules||document.styleSheets[Te].cssText)}catch{}!function X(){for(var Te=K()("[data-responsive-image],[responsive-image]"),se=0,Se=Te.length;se<Se;se++)ne(Te[se])}()},this.findElementQueriesElements=function(j){!function oe(j){var Te=K(j);for(var se in N)if(N.hasOwnProperty(se))for(var Se=Te(se,j),Re=0,Oe=Se.length;Re<Oe;Re++)V(Se[Re],se)}(j)},this.update=function(){this.init()}};ee.update=function(){ee.instance.update()},ee.detach=function(w){w.elementQueriesSetupInformation?(w.elementQueriesSensor.detach(),delete w.elementQueriesSetupInformation,delete w.elementQueriesSensor):w.resizeSensorInstance&&(w.resizeSensorInstance.detach(),delete w.resizeSensorInstance)},ee.init=function(){ee.instance||(ee.instance=new ee),ee.instance.init()};return ee.findElementQueriesElements=function(w){ee.instance.findElementQueriesElements(w)},ee.listen=function(){!function(w){if(document.addEventListener)document.addEventListener("DOMContentLoaded",w,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var N=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(w(),clearInterval(N))},10);else window.onload=w}(ee.init)},ee})?J.apply(ge,A):J)&&(Ue.exports=te)},884:function(Ue,ge,C){"use strict";var J,A;typeof window<"u"&&window,void 0!==(A="function"==typeof(J=function(){if(typeof window>"u")return null;var te=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),B=te.requestAnimationFrame||te.mozRequestAnimationFrame||te.webkitRequestAnimationFrame||function(W){return te.setTimeout(W,20)},ee=te.cancelAnimationFrame||te.mozCancelAnimationFrame||te.webkitCancelAnimationFrame||function(W){te.clearTimeout(W)};function g(W,de){var I=Object.prototype.toString.call(W),V="[object Array]"===I||"[object NodeList]"===I||"[object HTMLCollection]"===I||"[object Object]"===I||typeof jQuery<"u"&&W instanceof jQuery||typeof Elements<"u"&&W instanceof Elements,ae=0,K=W.length;if(V)for(;ae<K;ae++)de(W[ae]);else de(W)}function w(W){if(!W.getBoundingClientRect)return{width:W.offsetWidth,height:W.offsetHeight};var de=W.getBoundingClientRect();return{width:Math.round(de.width),height:Math.round(de.height)}}function N(W,de){Object.keys(de).forEach(function(I){W.style[I]=de[I]})}var G=function(W,de){var I=0;function V(){var oe,ne,K=[];this.add=function(X){K.push(X)},this.call=function(X){for(oe=0,ne=K.length;oe<ne;oe++)K[oe].call(this,X)},this.remove=function(X){var L=[];for(oe=0,ne=K.length;oe<ne;oe++)K[oe]!==X&&L.push(K[oe]);K=L},this.length=function(){return K.length}}function ae(K,oe){if(K){if(K.resizedAttached)return void K.resizedAttached.add(oe);K.resizedAttached=new V,K.resizedAttached.add(oe),K.resizeSensor=document.createElement("div"),K.resizeSensor.dir="ltr",K.resizeSensor.className="resize-sensor";var ne={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},X={position:"absolute",left:"0px",top:"0px",transition:"0s"};N(K.resizeSensor,ne);var L=document.createElement("div");L.className="resize-sensor-expand",N(L,ne);var _=document.createElement("div");N(_,X),L.appendChild(_);var O=document.createElement("div");O.className="resize-sensor-shrink",N(O,ne);var S=document.createElement("div");N(S,X),N(S,{width:"200%",height:"200%"}),O.appendChild(S),K.resizeSensor.appendChild(L),K.resizeSensor.appendChild(O),K.appendChild(K.resizeSensor);var ue=window.getComputedStyle(K),j=ue?ue.getPropertyValue("position"):null;"absolute"!==j&&"relative"!==j&&"fixed"!==j&&"sticky"!==j&&(K.style.position="relative");var Te=!1,se=0,Se=w(K),Re=0,Oe=0,Qe=!0;I=0;var we=function(){if(Qe){if(0===K.offsetWidth&&0===K.offsetHeight)return void(I||(I=B(function(){I=0,we()})));Qe=!1}var fe,Ee;Ee=K.offsetHeight,_.style.width=(fe=K.offsetWidth)+10+"px",_.style.height=Ee+10+"px",L.scrollLeft=fe+10,L.scrollTop=Ee+10,O.scrollLeft=fe+10,O.scrollTop=Ee+10};K.resizeSensor.resetSensor=we;var Ne=function(){se=0,Te&&(Re=Se.width,Oe=Se.height,K.resizedAttached&&K.resizedAttached.call(Se))},Pe=function(){Se=w(K),(Te=Se.width!==Re||Se.height!==Oe)&&!se&&(se=B(Ne)),we()},Ve=function(fe,Ee,$e){fe.attachEvent?fe.attachEvent("on"+Ee,$e):fe.addEventListener(Ee,$e)};Ve(L,"scroll",Pe),Ve(O,"scroll",Pe),I=B(function(){I=0,we()})}}g(W,function(K){ae(K,de)}),this.detach=function(K){I||(ee(I),I=0),G.detach(W,K)},this.reset=function(){W.resizeSensor.resetSensor()}};if(G.reset=function(W){g(W,function(de){de.resizeSensor.resetSensor()})},G.detach=function(W,de){g(W,function(I){I&&(I.resizedAttached&&"function"==typeof de&&(I.resizedAttached.remove(de),I.resizedAttached.length())||I.resizeSensor&&(I.contains(I.resizeSensor)&&I.removeChild(I.resizeSensor),delete I.resizeSensor,delete I.resizedAttached))})},typeof MutationObserver<"u"){var R=new MutationObserver(function(W){for(var de in W)if(W.hasOwnProperty(de))for(var I=W[de].addedNodes,V=0;V<I.length;V++)I[V].resizeSensor&&G.reset(I[V])});document.addEventListener("DOMContentLoaded",function(W){R.observe(document.body,{childList:!0,subtree:!0})})}return G})?J.call(ge,C,ge,Ue):J)&&(Ue.exports=A)},2016:Ue=>{"use strict";var J,ge="object"==typeof Reflect?Reflect:null,C=ge&&"function"==typeof ge.apply?ge.apply:function(L,_,O){return Function.prototype.apply.call(L,_,O)};J=ge&&"function"==typeof ge.ownKeys?ge.ownKeys:Object.getOwnPropertySymbols?function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:function(L){return Object.getOwnPropertyNames(L)};var te=Number.isNaN||function(L){return L!=L};function B(){B.init.call(this)}Ue.exports=B,Ue.exports.once=function K(X,L){return new Promise(function(_,O){function S(j){X.removeListener(L,ue),O(j)}function ue(){"function"==typeof X.removeListener&&X.removeListener("error",S),_([].slice.call(arguments))}ne(X,L,ue,{once:!0}),"error"!==L&&function oe(X,L,_){"function"==typeof X.on&&ne(X,"error",L,_)}(X,S,{once:!0})})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var ee=10;function g(X){if("function"!=typeof X)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}function w(X){return void 0===X._maxListeners?B.defaultMaxListeners:X._maxListeners}function N(X,L,_,O){var S,ue,j;if(g(_),void 0===(ue=X._events)?(ue=X._events=Object.create(null),X._eventsCount=0):(void 0!==ue.newListener&&(X.emit("newListener",L,_.listener?_.listener:_),ue=X._events),j=ue[L]),void 0===j)j=ue[L]=_,++X._eventsCount;else if("function"==typeof j?j=ue[L]=O?[_,j]:[j,_]:O?j.unshift(_):j.push(_),(S=w(X))>0&&j.length>S&&!j.warned){j.warned=!0;var Te=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");Te.name="MaxListenersExceededWarning",Te.emitter=X,Te.type=L,Te.count=j.length,function A(X){console&&console.warn&&console.warn(X)}(Te)}return X}function G(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R(X,L,_){var O={fired:!1,wrapFn:void 0,target:X,type:L,listener:_},S=G.bind(O);return S.listener=_,O.wrapFn=S,S}function W(X,L,_){var O=X._events;if(void 0===O)return[];var S=O[L];return void 0===S?[]:"function"==typeof S?_?[S.listener||S]:[S]:_?function ae(X){for(var L=new Array(X.length),_=0;_<L.length;++_)L[_]=X[_].listener||X[_];return L}(S):I(S,S.length)}function de(X){var L=this._events;if(void 0!==L){var _=L[X];if("function"==typeof _)return 1;if(void 0!==_)return _.length}return 0}function I(X,L){for(var _=new Array(L),O=0;O<L;++O)_[O]=X[O];return _}function ne(X,L,_,O){if("function"==typeof X.on)O.once?X.once(L,_):X.on(L,_);else{if("function"!=typeof X.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X);X.addEventListener(L,function S(ue){O.once&&X.removeEventListener(L,S),_(ue)})}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return ee},set:function(X){if("number"!=typeof X||X<0||te(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");ee=X}}),B.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(L){if("number"!=typeof L||L<0||te(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this},B.prototype.getMaxListeners=function(){return w(this)},B.prototype.emit=function(L){for(var _=[],O=1;O<arguments.length;O++)_.push(arguments[O]);var S="error"===L,ue=this._events;if(void 0!==ue)S=S&&void 0===ue.error;else if(!S)return!1;if(S){var j;if(_.length>0&&(j=_[0]),j instanceof Error)throw j;var Te=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw Te.context=j,Te}var se=ue[L];if(void 0===se)return!1;if("function"==typeof se)C(se,this,_);else{var Se=se.length,Re=I(se,Se);for(O=0;O<Se;++O)C(Re[O],this,_)}return!0},B.prototype.on=B.prototype.addListener=function(L,_){return N(this,L,_,!1)},B.prototype.prependListener=function(L,_){return N(this,L,_,!0)},B.prototype.once=function(L,_){return g(_),this.on(L,R(this,L,_)),this},B.prototype.prependOnceListener=function(L,_){return g(_),this.prependListener(L,R(this,L,_)),this},B.prototype.off=B.prototype.removeListener=function(L,_){var O,S,ue,j,Te;if(g(_),void 0===(S=this._events))return this;if(void 0===(O=S[L]))return this;if(O===_||O.listener===_)0==--this._eventsCount?this._events=Object.create(null):(delete S[L],S.removeListener&&this.emit("removeListener",L,O.listener||_));else if("function"!=typeof O){for(ue=-1,j=O.length-1;j>=0;j--)if(O[j]===_||O[j].listener===_){Te=O[j].listener,ue=j;break}if(ue<0)return this;0===ue?O.shift():function V(X,L){for(;L+1<X.length;L++)X[L]=X[L+1];X.pop()}(O,ue),1===O.length&&(S[L]=O[0]),void 0!==S.removeListener&&this.emit("removeListener",L,Te||_)}return this},B.prototype.removeAllListeners=function(L){var _,O,S;if(void 0===(O=this._events))return this;if(void 0===O.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==O[L]&&(0==--this._eventsCount?this._events=Object.create(null):delete O[L]),this;if(0===arguments.length){var j,ue=Object.keys(O);for(S=0;S<ue.length;++S)"removeListener"!==(j=ue[S])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(_=O[L]))this.removeListener(L,_);else if(void 0!==_)for(S=_.length-1;S>=0;S--)this.removeListener(L,_[S]);return this},B.prototype.listeners=function(L){return W(this,L,!0)},B.prototype.rawListeners=function(L){return W(this,L,!1)},B.listenerCount=function(X,L){return"function"==typeof X.listenerCount?X.listenerCount(L):de.call(X,L)},B.prototype.listenerCount=de,B.prototype.eventNames=function(){return this._eventsCount>0?J(this._events):[]}},7991:(Ue,ge,C)=>{var J=C(6943),A=C(9151),te=C(2323);function B(W,de,I){if(!J(W))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!W.hasNode(de))throw new Error('graphology-shortest-path: the "'+de+'" source node does not exist in the given graph.');if(!W.hasNode(I))throw new Error('graphology-shortest-path: the "'+I+'" target node does not exist in the given graph.');if((de=""+de)==(I=""+I))return[de];var V=W.inboundNeighbors.bind(W),ae=W.outboundNeighbors.bind(W),K={},oe={};K[de]=null,oe[I]=null;var L,_,O,S,ue,j,Te,se,ne=[de],X=[I],Se=!1;e:for(;ne.length&&X.length;)if(ne.length<=X.length){for(L=ne,ne=[],ue=0,Te=L.length;ue<Te;ue++)for(j=0,se=(O=ae(_=L[ue])).length;j<se;j++)if((S=O[j])in K||(ne.push(S),K[S]=_),S in oe){Se=!0;break e}}else for(L=X,X=[],ue=0,Te=L.length;ue<Te;ue++)for(_=L[ue],O=V(_),j=0,se=O.length;j<se;j++)if(S=O[j],S in oe||(X.push(S),oe[S]=_),S in K){Se=!0;break e}if(!Se)return null;for(var Re=[];S;)Re.unshift(S),S=K[S];for(S=oe[Re[Re.length-1]];S;)Re.push(S),S=oe[S];return Re.length?Re:null}function ee(W,de){if(!J(W))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!W.hasNode(de))throw new Error('graphology-shortest-path: the "'+de+'" source node does not exist in the given graph.');var ae,K,oe,ne,X,L,I={},V={};for(I[de=""+de]=!0,V[de]=[de];Object.keys(I).length;)for(oe in ae=I,I={},ae)for(X=0,L=(K=W.outboundNeighbors(oe)).length;X<L;X++)V[ne=K[X]]||(V[ne]=V[oe].concat(ne),I[ne]=!0);return V}function g(W,de,I){if(!J(de))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!de.hasNode(I))throw new Error('graphology-shortest-path: the "'+I+'" source node does not exist in the given graph.');I=""+I;var V=new Set,ae={},K=0;ae[I]=0;for(var ne,X,L,oe=[I];0!==oe.length;){var _=[];for(ne=0,X=oe.length;ne<X;ne++)!V.has(L=oe[ne])&&(V.add(L),te(_,de[W](L)),ae[L]=K);K++,oe=_}return ae}var w=g.bind(null,"outboundNeighbors"),N=g.bind(null,"neighbors");function G(W,de,I){return arguments.length<3?ee(W,de):B(W,de,I)}G.bidirectional=B,G.singleSource=ee,G.singleSourceLength=w,G.undirectedSingleSourceLength=N,G.brandes=function R(W,de){de=""+de;var oe,ne,X,L,_,O,S,ue,j,I=[],V={},ae={},K=W.nodes();for(O=0,ue=K.length;O<ue;O++)V[L=K[O]]=[],ae[L]=0;var Te={};ae[de]=1,Te[de]=0;for(var se=A.of(de);se.size;)for(L=se.dequeue(),I.push(L),oe=Te[L],ne=ae[L],S=0,j=(X=W.outboundNeighbors(L)).length;S<j;S++)(_=X[S])in Te||(se.enqueue(_),Te[_]=oe+1),Te[_]===oe+1&&(ae[_]+=ne,V[_].push(L));return[I,V,ae]},Ue.exports=G},6943:Ue=>{Ue.exports=function(C){return null!==C&&"object"==typeof C&&"function"==typeof C.addUndirectedEdgeWithKey&&"function"==typeof C.dropNode&&"boolean"==typeof C.multi}},4938:function(Ue){Ue.exports=function(){"use strict";function ge(me){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(me)}function C(me,Me){me.prototype=Object.create(Me.prototype),me.prototype.constructor=me,A(me,Me)}function J(me){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(me)}function A(me,Me){return(A=Object.setPrototypeOf||function(be,k){return be.__proto__=k,be})(me,Me)}function B(me,Me,be){return(B=function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(k,$,pe){var Le=[null];Le.push.apply(Le,$);var We=new(Function.bind.apply(k,Le));return pe&&A(We,pe.prototype),We}).apply(null,arguments)}function ee(me){var Me="function"==typeof Map?new Map:void 0;return(ee=function(be){if(null===be||-1===Function.toString.call(be).indexOf("[native code]"))return be;if("function"!=typeof be)throw new TypeError("Super expression must either be null or a function");if(void 0!==Me){if(Me.has(be))return Me.get(be);Me.set(be,$)}function $(){return B(be,arguments,J(this).constructor)}return $.prototype=Object.create(be.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),A($,be)})(me)}function g(me){if(void 0===me)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}var w=function(){for(var me=arguments[0],Me=1,be=arguments.length;Me<be;Me++)if(arguments[Me])for(var k in arguments[Me])me[k]=arguments[Me][k];return me};function N(me,Me,be,k){var $=me._nodes.get(Me),pe=null;return $?pe="mixed"===k?$.out&&$.out[be]||$.undirected&&$.undirected[be]:"directed"===k?$.out&&$.out[be]:$.undirected&&$.undirected[be]:pe}function R(me){return"object"===ge(me)&&null!==me&&me.constructor===Object}function W(me){var Me;for(Me in me)return!1;return!0}function de(me,Me,be){Object.defineProperty(me,Me,{enumerable:!1,configurable:!1,writable:!0,value:be})}function I(me,Me,be){var k={enumerable:!0,configurable:!0};"function"==typeof be?k.get=be:(k.value=be,k.writable=!1),Object.defineProperty(me,Me,k)}function V(me){return!(!R(me)||me.attributes&&!Array.isArray(me.attributes))}"function"==typeof Object.assign&&(w=Object.assign);var ae,K={exports:{}},oe="object"==typeof Reflect?Reflect:null,ne=oe&&"function"==typeof oe.apply?oe.apply:function(me,Me,be){return Function.prototype.apply.call(me,Me,be)};ae=oe&&"function"==typeof oe.ownKeys?oe.ownKeys:Object.getOwnPropertySymbols?function(me){return Object.getOwnPropertyNames(me).concat(Object.getOwnPropertySymbols(me))}:function(me){return Object.getOwnPropertyNames(me)};var X=Number.isNaN||function(me){return me!=me};function L(){L.init.call(this)}K.exports=L,K.exports.once=function(me,Me){return new Promise(function(be,k){function $(Le){me.removeListener(Me,pe),k(Le)}function pe(){"function"==typeof me.removeListener&&me.removeListener("error",$),be([].slice.call(arguments))}var Le;Oe(me,Me,pe,{once:!0}),"error"!==Me&&("function"==typeof(Le=me).on&&Oe(Le,"error",$,{once:!0}))})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var _=10;function O(me){if("function"!=typeof me)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof me)}function S(me){return void 0===me._maxListeners?L.defaultMaxListeners:me._maxListeners}function ue(me,Me,be,k){var $,pe,Le;if(O(be),void 0===(pe=me._events)?(pe=me._events=Object.create(null),me._eventsCount=0):(void 0!==pe.newListener&&(me.emit("newListener",Me,be.listener?be.listener:be),pe=me._events),Le=pe[Me]),void 0===Le)Le=pe[Me]=be,++me._eventsCount;else if("function"==typeof Le?Le=pe[Me]=k?[be,Le]:[Le,be]:k?Le.unshift(be):Le.push(be),($=S(me))>0&&Le.length>$&&!Le.warned){Le.warned=!0;var rt=new Error("Possible EventEmitter memory leak detected. "+Le.length+" "+String(Me)+" listeners added. Use emitter.setMaxListeners() to increase limit");rt.name="MaxListenersExceededWarning",rt.emitter=me,rt.type=Me,rt.count=Le.length,console&&console.warn&&console.warn(rt)}return me}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Te(me,Me,be){var k={fired:!1,wrapFn:void 0,target:me,type:Me,listener:be},$=j.bind(k);return $.listener=be,k.wrapFn=$,$}function se(me,Me,be){var k=me._events;if(void 0===k)return[];var $=k[Me];return void 0===$?[]:"function"==typeof $?be?[$.listener||$]:[$]:be?function(pe){for(var Le=new Array(pe.length),We=0;We<Le.length;++We)Le[We]=pe[We].listener||pe[We];return Le}($):Re($,$.length)}function Se(me){var Me=this._events;if(void 0!==Me){var be=Me[me];if("function"==typeof be)return 1;if(void 0!==be)return be.length}return 0}function Re(me,Me){for(var be=new Array(Me),k=0;k<Me;++k)be[k]=me[k];return be}function Oe(me,Me,be,k){if("function"==typeof me.on)k.once?me.once(Me,be):me.on(Me,be);else{if("function"!=typeof me.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof me);me.addEventListener(Me,function $(pe){k.once&&me.removeEventListener(Me,$),be(pe)})}}function Qe(me){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:me}),this.done=!1}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(me){if("number"!=typeof me||me<0||X(me))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+me+".");_=me}}),L.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(me){if("number"!=typeof me||me<0||X(me))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+me+".");return this._maxListeners=me,this},L.prototype.getMaxListeners=function(){return S(this)},L.prototype.emit=function(me){for(var Me=[],be=1;be<arguments.length;be++)Me.push(arguments[be]);var k="error"===me,$=this._events;if(void 0!==$)k=k&&void 0===$.error;else if(!k)return!1;if(k){var pe;if(Me.length>0&&(pe=Me[0]),pe instanceof Error)throw pe;var Le=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Le.context=pe,Le}var We=$[me];if(void 0===We)return!1;if("function"==typeof We)ne(We,this,Me);else{var rt=We.length,Et=Re(We,rt);for(be=0;be<rt;++be)ne(Et[be],this,Me)}return!0},L.prototype.addListener=function(me,Me){return ue(this,me,Me,!1)},L.prototype.on=L.prototype.addListener,L.prototype.prependListener=function(me,Me){return ue(this,me,Me,!0)},L.prototype.once=function(me,Me){return O(Me),this.on(me,Te(this,me,Me)),this},L.prototype.prependOnceListener=function(me,Me){return O(Me),this.prependListener(me,Te(this,me,Me)),this},L.prototype.removeListener=function(me,Me){var be,k,$,pe,Le;if(O(Me),void 0===(k=this._events))return this;if(void 0===(be=k[me]))return this;if(be===Me||be.listener===Me)0==--this._eventsCount?this._events=Object.create(null):(delete k[me],k.removeListener&&this.emit("removeListener",me,be.listener||Me));else if("function"!=typeof be){for($=-1,pe=be.length-1;pe>=0;pe--)if(be[pe]===Me||be[pe].listener===Me){Le=be[pe].listener,$=pe;break}if($<0)return this;0===$?be.shift():function(We,rt){for(;rt+1<We.length;rt++)We[rt]=We[rt+1];We.pop()}(be,$),1===be.length&&(k[me]=be[0]),void 0!==k.removeListener&&this.emit("removeListener",me,Le||Me)}return this},L.prototype.off=L.prototype.removeListener,L.prototype.removeAllListeners=function(me){var Me,be,k;if(void 0===(be=this._events))return this;if(void 0===be.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==be[me]&&(0==--this._eventsCount?this._events=Object.create(null):delete be[me]),this;if(0===arguments.length){var $,pe=Object.keys(be);for(k=0;k<pe.length;++k)"removeListener"!==($=pe[k])&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Me=be[me]))this.removeListener(me,Me);else if(void 0!==Me)for(k=Me.length-1;k>=0;k--)this.removeListener(me,Me[k]);return this},L.prototype.listeners=function(me){return se(this,me,!0)},L.prototype.rawListeners=function(me){return se(this,me,!1)},L.listenerCount=function(me,Me){return"function"==typeof me.listenerCount?me.listenerCount(Me):Se.call(me,Me)},L.prototype.listenerCount=Se,L.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},Qe.prototype.next=function(){if(this.done)return{done:!0};var me=this._next();return me.done&&(this.done=!0),me},typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this}),Qe.of=function(){var me=arguments,Me=me.length,be=0;return new Qe(function(){return be>=Me?{done:!0}:{done:!1,value:me[be++]}})},Qe.empty=function(){var me=new Qe(null);return me.done=!0,me},Qe.is=function(me){return me instanceof Qe||"object"==typeof me&&null!==me&&"function"==typeof me.next};var Xe=Qe,we=function(me,Me){for(var be,k=arguments.length>1?Me:1/0,$=k!==1/0?new Array(k):[],pe=0;;){if(pe===k)return $;if((be=me.next()).done)return pe!==Me?$.slice(0,pe):$;$[pe++]=be.value}},Ne=function(me){function Me(be,k){var $;return($=me.call(this)||this).name="GraphError",$.message=be||"",$.data=k||{},$}return C(Me,me),Me}(ee(Error)),Pe=function(me){function Me(be,k){var $;return($=me.call(this,be,k)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(g($),Me.prototype.constructor),$}return C(Me,me),Me}(Ne),Ve=function(me){function Me(be,k){var $;return($=me.call(this,be,k)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(g($),Me.prototype.constructor),$}return C(Me,me),Me}(Ne),fe=function(me){function Me(be,k){var $;return($=me.call(this,be,k)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(g($),Me.prototype.constructor),$}return C(Me,me),Me}(Ne);function Ee(me,Me){this.key=me,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function $e(me,Me){this.key=me,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function ot(me,Me){this.key=me,this.attributes=Me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Je(me,Me,be,k,$,pe){this.key=Me,this.attributes=pe,this.undirected=me,this.source=k,this.target=$,this.generatedKey=be}function le(me,Me,be,k,$,pe,Le){var We,rt,Et="out",Mt="in";if(Me&&(Et=Mt="undirected"),me.multi){if(void 0===(rt=(We=pe[Et])[$])&&(We[$]=rt=new Set),rt.add(be),k===$&&Me)return;void 0===(We=Le[Mt])[k]&&(We[k]=rt)}else{if(pe[Et][$]=be,k===$&&Me)return;Le[Mt][k]=be}}$e.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},ot.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var E=[{name:function(me){return"get".concat(me,"Attribute")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$){var pe;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+k,We=""+$;if($=arguments[2],!(pe=N(this,Le,We,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat(We,'").'))}else if(!(pe=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if("mixed"!==be&&pe.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return pe.attributes[$]}}},{name:function(me){return"get".concat(me,"Attributes")},attacher:function(me,Me,be){me.prototype[Me]=function(k){var $;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var pe=""+k,Le=""+arguments[1];if(!($=N(this,pe,Le,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(pe,'" - "').concat(Le,'").'))}else if(!($=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if("mixed"!==be&&$.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return $.attributes}}},{name:function(me){return"has".concat(me,"Attribute")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$){var pe;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+k,We=""+$;if($=arguments[2],!(pe=N(this,Le,We,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat(We,'").'))}else if(!(pe=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if("mixed"!==be&&pe.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return pe.attributes.hasOwnProperty($)}}},{name:function(me){return"set".concat(me,"Attribute")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$,pe){var Le;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var We=""+k,rt=""+$;if($=arguments[2],pe=arguments[3],!(Le=N(this,We,rt,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(We,'" - "').concat(rt,'").'))}else if(!(Le=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if("mixed"!==be&&Le.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return Le.attributes[$]=pe,this.emit("edgeAttributesUpdated",{key:Le.key,type:"set",attributes:Le.attributes,name:$}),this}}},{name:function(me){return"update".concat(me,"Attribute")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$,pe){var Le;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var We=""+k,rt=""+$;if($=arguments[2],pe=arguments[3],!(Le=N(this,We,rt,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(We,'" - "').concat(rt,'").'))}else if(!(Le=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if("function"!=typeof pe)throw new Pe("Graph.".concat(Me,": updater should be a function."));if("mixed"!==be&&Le.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return Le.attributes[$]=pe(Le.attributes[$]),this.emit("edgeAttributesUpdated",{key:Le.key,type:"set",attributes:Le.attributes,name:$}),this}}},{name:function(me){return"remove".concat(me,"Attribute")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$){var pe;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+k,We=""+$;if($=arguments[2],!(pe=N(this,Le,We,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat(We,'").'))}else if(!(pe=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if("mixed"!==be&&pe.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return delete pe.attributes[$],this.emit("edgeAttributesUpdated",{key:pe.key,type:"remove",attributes:pe.attributes,name:$}),this}}},{name:function(me){return"replace".concat(me,"Attributes")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$){var pe;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+k,We=""+$;if($=arguments[2],!(pe=N(this,Le,We,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat(We,'").'))}else if(!(pe=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if(!R($))throw new Pe("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==be&&pe.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return pe.attributes=$,this.emit("edgeAttributesUpdated",{key:pe.key,type:"replace",attributes:pe.attributes}),this}}},{name:function(me){return"merge".concat(me,"Attributes")},attacher:function(me,Me,be){me.prototype[Me]=function(k,$){var pe;if("mixed"!==this.type&&"mixed"!==be&&be!==this.type)throw new fe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+k,We=""+$;if($=arguments[2],!(pe=N(this,Le,We,be)))throw new Ve("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat(We,'").'))}else if(!(pe=this._edges.get(k=""+k)))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" edge in the graph.'));if(!R($))throw new Pe("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==be&&pe.undirected!==("undirected"===be))throw new Ve("Graph.".concat(Me,': could not find the "').concat(k,'" ').concat(be," edge in the graph."));return w(pe.attributes,$),this.emit("edgeAttributesUpdated",{key:pe.key,type:"merge",attributes:pe.attributes,data:$}),this}}}],ie=Xe,z=function(){var me,Me=arguments,be=-1;return new ie(function k(){if(!me){if(++be>=Me.length)return{done:!0};me=Me[be]}var $=me.next();return $.done?(me=null,k()):$})},Ae=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function et(me,Me){for(var be in Me)me.push(Me[be].key)}function ce(me,Me){for(var be in Me)Me[be].forEach(function(k){return me.push(k.key)})}function Z(me,Me,be){for(var k in me)if(k!==be){var $=me[k];Me($.key,$.attributes,$.source.key,$.target.key,$.source.attributes,$.target.attributes,$.undirected,$.generatedKey)}}function F(me,Me,be){for(var k in me)k!==be&&me[k].forEach(function($){return Me($.key,$.attributes,$.source.key,$.target.key,$.source.attributes,$.target.attributes,$.undirected,$.generatedKey)})}function x(me,Me,be){for(var k in me)if(k!==be){var $=me[k];if(Me($.key,$.attributes,$.source.key,$.target.key,$.source.attributes,$.target.attributes,$.undirected,$.generatedKey))return!0}return!1}function M(me,Me,be){var k,$,pe,Le,We;for(var rt in me)if(rt!==be)for(k=me[rt].values();!0!==($=k.next()).done;)if(Le=(pe=$.value).source,Me(pe.key,pe.attributes,Le.key,(We=pe.target).key,Le.attributes,We.attributes,pe.undirected,pe.generatedKey))return!0;return!1}function Q(me,Me){var be=Object.keys(me),k=be.length,$=null,pe=0;return new Xe(function Le(){var We;if($){var rt=$.next();if(rt.done)return $=null,pe++,Le();We=rt.value}else{if(pe>=k)return{done:!0};var Et=be[pe];if(Et===Me)return pe++,Le();if((We=me[Et])instanceof Set)return $=We.values(),Le();pe++}return{done:!1,value:[We.key,We.attributes,We.source.key,We.target.key,We.source.attributes,We.target.attributes]}})}function he(me,Me,be){var k=Me[be];k&&me.push(k.key)}function ze(me,Me,be){var k=Me[be];k&&k.forEach(function($){return me.push($.key)})}function Ye(me,Me,be){var k=me[Me];if(k){var $=k.source,pe=k.target;be(k.key,k.attributes,$.key,pe.key,$.attributes,pe.attributes,k.undirected,k.generatedKey)}}function dt(me,Me,be){var k=me[Me];k&&k.forEach(function($){return be($.key,$.attributes,$.source.key,$.target.key,$.source.attributes,$.target.attributes,$.undirected,$.generatedKey)})}function vt(me,Me,be){var k=me[Me];if(k){var $=k.source,pe=k.target;return be(k.key,k.attributes,$.key,pe.key,$.attributes,pe.attributes,k.undirected,k.generatedKey)}}function mt(me,Me,be){var k=me[Me];if(k){for(var $,pe,Le=k.values();!0!==($=Le.next()).done;)if(be((pe=$.value).key,pe.attributes,pe.source.key,pe.target.key,pe.source.attributes,pe.target.attributes,pe.undirected,pe.generatedKey))return!0;return!1}}function zt(me,Me){var be=me[Me];if(be instanceof Set){var k=be.values();return new Xe(function(){var $=k.next();if($.done)return $;var pe=$.value;return{done:!1,value:[pe.key,pe.attributes,pe.source.key,pe.target.key,pe.source.attributes,pe.target.attributes]}})}return Xe.of([be.key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes])}var In=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function gr(me,Me){if(void 0!==Me)for(var be in Me)me.add(be)}function Go(me,Me,be){for(var k in Me){var $=Me[k];$ instanceof Set&&($=$.values().next().value);var pe=$.source,We=pe===me?$.target:pe;be(We.key,We.attributes)}}function zi(me,Me,be,k){for(var $ in be){var pe=be[$];pe instanceof Set&&(pe=pe.values().next().value);var Le=pe.source,rt=Le===Me?pe.target:Le;me.has(rt.key)||(me.add(rt.key),k(rt.key,rt.attributes))}}function Yr(me,Me,be){for(var k in Me){var $=Me[k];$ instanceof Set&&($=$.values().next().value);var pe=$.source,We=pe===me?$.target:pe;if(be(We.key,We.attributes))return!0}return!1}function as(me,Me,be,k){for(var $ in be){var pe=be[$];pe instanceof Set&&(pe=pe.values().next().value);var Le=pe.source,rt=Le===Me?pe.target:Le;if(!me.has(rt.key)&&(me.add(rt.key),k(rt.key,rt.attributes)))return!0}return!1}function Os(me,Me){var be=Object.keys(Me),k=be.length,$=0;return new Xe(function(){if($>=k)return{done:!0};var pe=Me[be[$++]];pe instanceof Set&&(pe=pe.values().next().value);var Le=pe.source,rt=Le===me?pe.target:Le;return{done:!1,value:[rt.key,rt.attributes]}})}function Io(me,Me,be){var k=Object.keys(be),$=k.length,pe=0;return new Xe(function Le(){if(pe>=$)return{done:!0};var We=be[k[pe++]];We instanceof Set&&(We=We.values().next().value);var rt=We.source,Mt=rt===Me?We.target:rt;return me.has(Mt.key)?Le():(me.add(Mt.key),{done:!1,value:[Mt.key,Mt.attributes]})})}function Pc(me,Me,be){for(var k,$,pe,Le,We,rt,Et,Mt=Me._nodes.values(),Ft=Me.type;!0!==(k=Mt.next()).done;){if($=k.value,"undirected"!==Ft)for(pe in Le=$.out)if(rt=(We=Le[pe]).target,Et=be($.key,rt.key,$.attributes,rt.attributes,We.key,We.attributes,We.undirected,We.generatedKey),me&&Et)return;if("directed"!==Ft)for(pe in Le=$.undirected)if((rt=(We=Le[pe]).target).key!==pe&&(rt=We.source),Et=be($.key,rt.key,$.attributes,rt.attributes,We.key,We.attributes,We.undirected,We.generatedKey),me&&Et)return}}function ac(me,Me,be){for(var k,$,pe,Le,We,rt,Et,Mt,Ft,Jt=Me._nodes.values(),vn=Me.type;!0!==(k=Jt.next()).done;){if($=k.value,"undirected"!==vn)for(pe in rt=$.out)for(Le=rt[pe].values();!0!==(We=Le.next()).done;)if(Mt=(Et=We.value).target,Ft=be($.key,Mt.key,$.attributes,Mt.attributes,Et.key,Et.attributes,Et.undirected,Et.generatedKey),me&&Ft)return;if("directed"!==vn)for(pe in rt=$.undirected)for(Le=rt[pe].values();!0!==(We=Le.next()).done;)if((Mt=(Et=We.value).target).key!==pe&&(Mt=Et.source),Ft=be($.key,Mt.key,$.attributes,Mt.attributes,Et.key,Et.attributes,Et.undirected,Et.generatedKey),me&&Ft)return}}function Rl(me,Me){var be={key:me};return W(Me.attributes)||(be.attributes=w({},Me.attributes)),be}function Nc(me,Me){var be={source:Me.source.key,target:Me.target.key};return Me.generatedKey||(be.key=me),W(Me.attributes)||(be.attributes=w({},Me.attributes)),Me.undirected&&(be.undirected=!0),be}var jd=new Set(["directed","undirected","mixed"]),Lc=new Set(["domain","_events","_eventsCount","_maxListeners"]),eh={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Bc(me,Me,be){var k=new me.NodeDataClass(Me,be);return me._nodes.set(Me,k),me.emit("nodeAdded",{key:Me,attributes:be}),k}function kl(me,Me,be,k,$,pe,Le,We){if(!k&&"undirected"===me.type)throw new fe("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(k&&"directed"===me.type)throw new fe("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(We&&!R(We))throw new Pe("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat(We,'"'));if(pe=""+pe,Le=""+Le,We=We||{},!me.allowSelfLoops&&pe===Le)throw new fe("Graph.".concat(Me,': source & target are the same ("').concat(pe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var rt=me._nodes.get(pe),Et=me._nodes.get(Le);if(!rt)throw new Ve("Graph.".concat(Me,': source node "').concat(pe,'" not found.'));if(!Et)throw new Ve("Graph.".concat(Me,': target node "').concat(Le,'" not found.'));var Mt={key:null,undirected:k,source:pe,target:Le,attributes:We};if(be&&($=me._edgeKeyGenerator(Mt)),me._edges.has($=""+$))throw new fe("Graph.".concat(Me,': the "').concat($,'" edge already exists in the graph.'));if(!me.multi&&(k?void 0!==rt.undirected[Le]:void 0!==rt.out[Le]))throw new fe("Graph.".concat(Me,': an edge linking "').concat(pe,'" to "').concat(Le,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Ft=new Je(k,$,be,rt,Et,We);return me._edges.set($,Ft),pe===Le?k?(rt.undirectedSelfLoops++,me._undirectedSelfLoopCount++):(rt.directedSelfLoops++,me._directedSelfLoopCount++):k?(rt.undirectedDegree++,Et.undirectedDegree++):(rt.outDegree++,Et.inDegree++),le(me,k,Ft,pe,Le,rt,Et),k?me._undirectedSize++:me._directedSize++,Mt.key=$,me.emit("edgeAdded",Mt),$}function jc(me,Me,be,k,$,pe,Le,We,rt){if(!k&&"undirected"===me.type)throw new fe("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(k&&"directed"===me.type)throw new fe("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(We)if(rt){if("function"!=typeof We)throw new Pe("Graph.".concat(Me,': invalid updater function. Expecting a function but got "').concat(We,'"'))}else if(!R(We))throw new Pe("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat(We,'"'));var Et;if(pe=""+pe,Le=""+Le,rt&&(Et=We,We=void 0),!me.allowSelfLoops&&pe===Le)throw new fe("Graph.".concat(Me,': source & target are the same ("').concat(pe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Mt,Ft,Jt=me._nodes.get(pe),vn=me._nodes.get(Le);if(!be&&(Mt=me._edges.get($))){if(Mt.source.key!==pe||Mt.target.key!==Le||k&&(Mt.source.key!==Le||Mt.target.key!==pe))throw new fe("Graph.".concat(Me,': inconsistency detected when attempting to merge the "').concat($,'" edge with "').concat(pe,'" source & "').concat(Le,'" target vs. ("').concat(Mt.source.key,'", "').concat(Mt.target.key,'").'));Ft=Mt}if(Ft||me.multi||!Jt||(Ft=k?Jt.undirected[Le]:Jt.out[Le]),Ft)return(rt?Et:We)?(rt?(Ft.attributes=Et(Ft.attributes),me.emit("edgeAttributesUpdated",{type:"replace",key:Ft.key,attributes:Ft.attributes})):(w(Ft.attributes,We),me.emit("edgeAttributesUpdated",{type:"merge",key:Ft.key,attributes:Ft.attributes,data:We})),Ft.key):Ft.key;We=We||{},rt&&Et&&(We=Et(We));var Ar={key:null,undirected:k,source:pe,target:Le,attributes:We};if(be&&($=me._edgeKeyGenerator(Ar)),me._edges.has($=""+$))throw new fe("Graph.".concat(Me,': the "').concat($,'" edge already exists in the graph.'));return Jt||(Jt=Bc(me,pe,{}),pe===Le&&(vn=Jt)),vn||(vn=Bc(me,Le,{})),Mt=new Je(k,$,be,Jt,vn,We),me._edges.set($,Mt),pe===Le?k?(Jt.undirectedSelfLoops++,me._undirectedSelfLoopCount++):(Jt.directedSelfLoops++,me._directedSelfLoopCount++):k?(Jt.undirectedDegree++,vn.undirectedDegree++):(Jt.outDegree++,vn.inDegree++),le(me,k,Mt,pe,Le,Jt,vn),k?me._undirectedSize++:me._directedSize++,Ar.key=$,me.emit("edgeAdded",Ar),$}var me,xi=function(me){function Me(k){var $;if($=me.call(this)||this,(k=w({},eh,k)).edgeKeyGenerator&&"function"!=typeof k.edgeKeyGenerator)throw new Pe("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(k.edgeKeyGenerator,'".'));if("boolean"!=typeof k.multi)throw new Pe("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(k.multi,'".'));if(!jd.has(k.type))throw new Pe('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(k.type,'".'));if("boolean"!=typeof k.allowSelfLoops)throw new Pe("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(k.allowSelfLoops,'".'));var pe,Le="mixed"===k.type?Ee:"directed"===k.type?$e:ot;return de(g($),"NodeDataClass",Le),de(g($),"_attributes",{}),de(g($),"_nodes",new Map),de(g($),"_edges",new Map),de(g($),"_directedSize",0),de(g($),"_undirectedSize",0),de(g($),"_directedSelfLoopCount",0),de(g($),"_undirectedSelfLoopCount",0),de(g($),"_edgeKeyGenerator",k.edgeKeyGenerator||(pe=0,function(){return pe++})),de(g($),"_options",k),Lc.forEach(function(We){return de(g($),We,$[We])}),I(g($),"order",function(){return $._nodes.size}),I(g($),"size",function(){return $._edges.size}),I(g($),"directedSize",function(){return $._directedSize}),I(g($),"undirectedSize",function(){return $._undirectedSize}),I(g($),"selfLoopCount",function(){return $._directedSelfLoopCount+$._undirectedSelfLoopCount}),I(g($),"directedSelfLoopCount",function(){return $._directedSelfLoopCount}),I(g($),"undirectedSelfLoopCount",function(){return $._undirectedSelfLoopCount}),I(g($),"multi",$._options.multi),I(g($),"type",$._options.type),I(g($),"allowSelfLoops",$._options.allowSelfLoops),I(g($),"implementation",function(){return"graphology"}),$}C(Me,me);var be=Me.prototype;return be.hasNode=function(k){return this._nodes.has(""+k)},be.hasDirectedEdge=function(k,$){if("undirected"===this.type)return!1;if(1===arguments.length){var Le=this._edges.get(""+k);return!!Le&&!Le.undirected}if(2===arguments.length){$=""+$;var We=this._nodes.get(k=""+k);if(!We)return!1;var rt=We.out[$];return!(!rt||this.multi&&!rt.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},be.hasUndirectedEdge=function(k,$){if("directed"===this.type)return!1;if(1===arguments.length){var Le=this._edges.get(""+k);return!!Le&&Le.undirected}if(2===arguments.length){$=""+$;var We=this._nodes.get(k=""+k);if(!We)return!1;var rt=We.undirected[$];return!(!rt||this.multi&&!rt.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},be.hasEdge=function(k,$){if(1===arguments.length)return this._edges.has(""+k);if(2===arguments.length){$=""+$;var Le=this._nodes.get(k=""+k);if(!Le)return!1;var We=void 0!==Le.out&&Le.out[$];return We||(We=void 0!==Le.undirected&&Le.undirected[$]),!(!We||this.multi&&!We.size)}throw new Pe("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},be.directedEdge=function(k,$){if("undirected"!==this.type){if(k=""+k,$=""+$,this.multi)throw new fe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var pe=this._nodes.get(k);if(!pe)throw new Ve('Graph.directedEdge: could not find the "'.concat(k,'" source node in the graph.'));if(!this._nodes.has($))throw new Ve('Graph.directedEdge: could not find the "'.concat($,'" target node in the graph.'));var Le=pe.out&&pe.out[$]||void 0;return Le?Le.key:void 0}},be.undirectedEdge=function(k,$){if("directed"!==this.type){if(k=""+k,$=""+$,this.multi)throw new fe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var pe=this._nodes.get(k);if(!pe)throw new Ve('Graph.undirectedEdge: could not find the "'.concat(k,'" source node in the graph.'));if(!this._nodes.has($))throw new Ve('Graph.undirectedEdge: could not find the "'.concat($,'" target node in the graph.'));var Le=pe.undirected&&pe.undirected[$]||void 0;return Le?Le.key:void 0}},be.edge=function(k,$){if(this.multi)throw new fe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");$=""+$;var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.edge: could not find the "'.concat(k,'" source node in the graph.'));if(!this._nodes.has($))throw new Ve('Graph.edge: could not find the "'.concat($,'" target node in the graph.'));var Le=pe.out&&pe.out[$]||pe.undirected&&pe.undirected[$]||void 0;if(Le)return Le.key},be.inDegree=function(k){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof $)throw new Pe('Graph.inDegree: Expecting a boolean but got "'.concat($,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.inDegree: could not find the "'.concat(k,'" node in the graph.'));return"undirected"===this.type?0:pe.inDegree+($?pe.directedSelfLoops:0)},be.outDegree=function(k){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof $)throw new Pe('Graph.outDegree: Expecting a boolean but got "'.concat($,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.outDegree: could not find the "'.concat(k,'" node in the graph.'));return"undirected"===this.type?0:pe.outDegree+($?pe.directedSelfLoops:0)},be.directedDegree=function(k){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof $)throw new Pe('Graph.directedDegree: Expecting a boolean but got "'.concat($,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.directedDegree: could not find the "'.concat(k,'" node in the graph.'));if("undirected"===this.type)return 0;var Le=$?pe.directedSelfLoops:0;return pe.inDegree+Le+(pe.outDegree+Le)},be.undirectedDegree=function(k){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof $)throw new Pe('Graph.undirectedDegree: Expecting a boolean but got "'.concat($,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.undirectedDegree: could not find the "'.concat(k,'" node in the graph.'));return"directed"===this.type?0:pe.undirectedDegree+2*($?pe.undirectedSelfLoops:0)},be.degree=function(k){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof $)throw new Pe('Graph.degree: Expecting a boolean but got "'.concat($,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.degree: could not find the "'.concat(k,'" node in the graph.'));var Le=0,We=0;return"directed"!==this.type&&($&&(We=pe.undirectedSelfLoops),Le+=pe.undirectedDegree+2*We),"undirected"!==this.type&&($&&(We=pe.directedSelfLoops),Le+=pe.inDegree+pe.outDegree+2*We),Le},be.source=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.source: could not find the "'.concat(k,'" edge in the graph.'));return $.source.key},be.target=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.target: could not find the "'.concat(k,'" edge in the graph.'));return $.target.key},be.extremities=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.extremities: could not find the "'.concat(k,'" edge in the graph.'));return[$.source.key,$.target.key]},be.opposite=function(k,$){k=""+k;var pe=this._edges.get($=""+$);if(!pe)throw new Ve('Graph.opposite: could not find the "'.concat($,'" edge in the graph.'));var Le=pe.source.key,We=pe.target.key;if(k!==Le&&k!==We)throw new Ve('Graph.opposite: the "'.concat(k,'" node is not attached to the "').concat($,'" edge (').concat(Le,", ").concat(We,")."));return k===Le?We:Le},be.hasExtremity=function(k,$){$=""+$;var pe=this._edges.get(k=""+k);if(!pe)throw new Ve('Graph.hasExtremity: could not find the "'.concat(k,'" edge in the graph.'));return pe.source.key===$||pe.target.key===$},be.isUndirected=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.isUndirected: could not find the "'.concat(k,'" edge in the graph.'));return $.undirected},be.isDirected=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.isDirected: could not find the "'.concat(k,'" edge in the graph.'));return!$.undirected},be.isSelfLoop=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.isSelfLoop: could not find the "'.concat(k,'" edge in the graph.'));return $.source===$.target},be.hasGeneratedKey=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.hasGeneratedKey: could not find the "'.concat(k,'" edge in the graph.'));return $.generatedKey},be.addNode=function(k,$){return function(pe,Le,We){if(We&&!R(We))throw new Pe('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(We,'"'));if(We=We||{},pe._nodes.has(Le=""+Le))throw new fe('Graph.addNode: the "'.concat(Le,'" node already exist in the graph.'));var rt=new pe.NodeDataClass(Le,We);return pe._nodes.set(Le,rt),pe.emit("nodeAdded",{key:Le,attributes:We}),rt}(this,k,$).key},be.mergeNode=function(k,$){if($&&!R($))throw new Pe('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat($,'"'));$=$||{};var pe=this._nodes.get(k=""+k);return pe?($&&(w(pe.attributes,$),this.emit("nodeAttributesUpdated",{type:"merge",key:k,attributes:pe.attributes,data:$})),k):(pe=new this.NodeDataClass(k,$),this._nodes.set(k,pe),this.emit("nodeAdded",{key:k,attributes:$}),k)},be.updateNode=function(k,$){if($&&"function"!=typeof $)throw new Pe('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat($,'"'));var pe=this._nodes.get(k=""+k);if(pe)return $&&(pe.attributes=$(pe.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:k,attributes:pe.attributes})),k;var We=$?$({}):{};return pe=new this.NodeDataClass(k,We),this._nodes.set(k,pe),this.emit("nodeAdded",{key:k,attributes:We}),k},be.dropNode=function(k){var $=this,pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.dropNode: could not find the "'.concat(k,'" node in the graph.'));this.forEachEdge(k,function(Le){$.dropEdge(Le)}),this._nodes.delete(k),this.emit("nodeDropped",{key:k,attributes:pe.attributes})},be.dropEdge=function(k){var $;if(arguments.length>1){var pe=""+arguments[0],Le=""+arguments[1];if(!($=N(this,pe,Le,this.type)))throw new Ve('Graph.dropEdge: could not find the "'.concat(pe,'" -> "').concat(Le,'" edge in the graph.'))}else if(!($=this._edges.get(k=""+k)))throw new Ve('Graph.dropEdge: could not find the "'.concat(k,'" edge in the graph.'));this._edges.delete($.key);var rt=$.source,Et=$.target,Mt=$.attributes,Ft=$.undirected;return rt===Et?Ft?(rt.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(rt.directedSelfLoops--,this._directedSelfLoopCount--):Ft?(rt.undirectedDegree--,Et.undirectedDegree--):(rt.outDegree--,Et.inDegree--),function P(me,Me,be){var k=me.multi,$=be.source,pe=be.target,Le=$.key,We=pe.key,rt=$[Me?"undirected":"out"],Et=Me?"undirected":"in";if(We in rt)if(k){var Mt=rt[We];1===Mt.size?(delete rt[We],delete pe[Et][Le]):Mt.delete(be)}else delete rt[We];k||delete pe[Et][Le]}(this,Ft,$),Ft?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:k,attributes:Mt,source:rt.key,target:Et.key,undirected:Ft}),this},be.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},be.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},be.getAttribute=function(k){return this._attributes[k]},be.getAttributes=function(){return this._attributes},be.hasAttribute=function(k){return this._attributes.hasOwnProperty(k)},be.setAttribute=function(k,$){return this._attributes[k]=$,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:k}),this},be.updateAttribute=function(k,$){if("function"!=typeof $)throw new Pe("Graph.updateAttribute: updater should be a function.");return this._attributes[k]=$(this._attributes[k]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:k}),this},be.removeAttribute=function(k){return delete this._attributes[k],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:k}),this},be.replaceAttributes=function(k){if(!R(k))throw new Pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=k,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},be.mergeAttributes=function(k){if(!R(k))throw new Pe("Graph.mergeAttributes: provided attributes are not a plain object.");return w(this._attributes,k),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:k}),this},be.getNodeAttribute=function(k,$){var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.getNodeAttribute: could not find the "'.concat(k,'" node in the graph.'));return pe.attributes[$]},be.getNodeAttributes=function(k){var $=this._nodes.get(k=""+k);if(!$)throw new Ve('Graph.getNodeAttributes: could not find the "'.concat(k,'" node in the graph.'));return $.attributes},be.hasNodeAttribute=function(k,$){var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.hasNodeAttribute: could not find the "'.concat(k,'" node in the graph.'));return pe.attributes.hasOwnProperty($)},be.setNodeAttribute=function(k,$,pe){var Le=this._nodes.get(k=""+k);if(!Le)throw new Ve('Graph.setNodeAttribute: could not find the "'.concat(k,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Le.attributes[$]=pe,this.emit("nodeAttributesUpdated",{key:k,type:"set",attributes:Le.attributes,name:$}),this},be.updateNodeAttribute=function(k,$,pe){var Le=this._nodes.get(k=""+k);if(!Le)throw new Ve('Graph.updateNodeAttribute: could not find the "'.concat(k,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof pe)throw new Pe("Graph.updateAttribute: updater should be a function.");var We=Le.attributes,rt=pe(We[$]);return We[$]=rt,this.emit("nodeAttributesUpdated",{key:k,type:"set",attributes:Le.attributes,name:$}),this},be.removeNodeAttribute=function(k,$){var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.hasNodeAttribute: could not find the "'.concat(k,'" node in the graph.'));return delete pe.attributes[$],this.emit("nodeAttributesUpdated",{key:k,type:"remove",attributes:pe.attributes,name:$}),this},be.replaceNodeAttributes=function(k,$){var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.replaceNodeAttributes: could not find the "'.concat(k,'" node in the graph.'));if(!R($))throw new Pe("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return pe.attributes=$,this.emit("nodeAttributesUpdated",{key:k,type:"replace",attributes:pe.attributes}),this},be.mergeNodeAttributes=function(k,$){var pe=this._nodes.get(k=""+k);if(!pe)throw new Ve('Graph.mergeNodeAttributes: could not find the "'.concat(k,'" node in the graph.'));if(!R($))throw new Pe("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return w(pe.attributes,$),this.emit("nodeAttributesUpdated",{key:k,type:"merge",attributes:pe.attributes,data:$}),this},be.updateEachNodeAttributes=function(k,$){if("function"!=typeof k)throw new Pe("Graph.updateEachNodeAttributes: expecting an updater function.");if($&&!V($))throw new Pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var pe,Le,We=this._nodes.values();!0!==(pe=We.next()).done;)(Le=pe.value).attributes=k(Le.key,Le.attributes);this.emit("eachNodeAttributesUpdated",{hints:$||null})},be.updateEachEdgeAttributes=function(k,$){if("function"!=typeof k)throw new Pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if($&&!V($))throw new Pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var pe,Le,We=this._edges.values();!0!==(pe=We.next()).done;)(Le=pe.value).attributes=k(Le.key,Le.attributes);this.emit("eachEdgeAttributesUpdated",{hints:$||null})},be.forEach=function(k){if("function"!=typeof k)throw new Pe("Graph.forEach: expecting a callback.");this.multi?ac(!1,this,k):Pc(!1,this,k)},be.forEachUntil=function(k){if("function"!=typeof k)throw new Pe("Graph.forEach: expecting a callback.");this.multi?ac(!0,this,k):Pc(!0,this,k)},be.adjacency=function(){return this.multi?(rt=(k=this)._nodes.values(),Et=k.type,Mt="outer",Ft=null,new Xe(function Jt(){var vn;if("outer"===Mt)return!0===(vn=rt.next()).done?vn:($=vn.value,Mt="directed",Jt());if("directed"===Mt)return"undirected"===Et?(Mt="undirected",Jt()):(Le=$.out,pe=Object.keys($.out),We=0,Mt="inner-directed",Jt());if("undirected"===Mt){if("directed"===Et)return Mt="outer",Jt();Le=$.undirected,pe=Object.keys($.undirected),We=0,Mt="inner-undirected"}if(!Ft&&We>=pe.length)return Mt="inner-undirected"===Mt?"outer":"undirected",Jt();if(!Ft){var so=pe[We++];return Ft=Le[so].values(),Jt()}if((vn=Ft.next()).done)return Ft=null,Jt();var Ar=vn.value,Do=Ar.target;return"inner-undirected"===Mt&&Do.key===$.key&&(Do=Ar.source),{done:!1,value:[$.key,Do.key,$.attributes,Do.attributes,Ar.key,Ar.attributes]}})):(Uc=(Jt=this)._nodes.values(),na=Jt.type,jr="outer",new Xe(function _o(){var Vc;if("outer"===jr)return!0===(Vc=Uc.next()).done?Vc:(vn=Vc.value,jr="directed",_o());if("directed"===jr)return"undirected"===na?(jr="undirected",_o()):(Ar=vn.out,so=Object.keys(vn.out),Do=0,jr="inner-directed",_o());if("undirected"===jr){if("directed"===na)return jr="outer",_o();Ar=vn.undirected,so=Object.keys(vn.undirected),Do=0,jr="inner-undirected"}if(Do>=so.length)return jr="inner-undirected"===jr?"outer":"undirected",_o();var Pl=so[Do++],Ei=Ar[Pl],Sr=Ei.target;return"inner-undirected"===jr&&Sr.key===vn.key&&(Sr=Ei.source),{done:!1,value:[vn.key,Sr.key,vn.attributes,Sr.attributes,Ei.key,Ei.attributes]}}));var Jt,vn,so,Ar,Do,Uc,na,jr,k,$,pe,Le,We,rt,Et,Mt,Ft},be.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):we(this._nodes.keys(),this._nodes.size)},be.forEachNode=function(k){if("function"!=typeof k)throw new Pe("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function($,pe){k(pe,$.attributes)})},be.forEachNodeUntil=function(k){if("function"!=typeof k)throw new Pe("Graph.forEachNode: expecting a callback.");for(var $,pe,Le=this._nodes.values();!0!==($=Le.next())&&!k((pe=$.value).key,pe.attributes););},be.nodeEntries=function(){var k=this._nodes.values();return new Xe(function(){var $=k.next();if($.done)return $;var pe=$.value;return{value:[pe.key,pe.attributes],done:!1}})},be.exportNode=function(k){var $=this._nodes.get(k=""+k);if(!$)throw new Ve('Graph.exportNode: could not find the "'.concat(k,'" node in the graph.'));return Rl(k,$)},be.exportEdge=function(k){var $=this._edges.get(k=""+k);if(!$)throw new Ve('Graph.exportEdge: could not find the "'.concat(k,'" edge in the graph.'));return Nc(k,$)},be.export=function(){var k=new Array(this._nodes.size),$=0;this._nodes.forEach(function(Le,We){k[$++]=Rl(We,Le)});var pe=new Array(this._edges.size);return $=0,this._edges.forEach(function(Le,We){pe[$++]=Nc(We,Le)}),{attributes:this.getAttributes(),nodes:k,edges:pe,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},be.importNode=function(k){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=function Ol(me){return R(me)?"key"in me?!("attributes"in me)||R(me.attributes)&&null!==me.attributes?null:"invalid-attributes":"no-key":"not-object"}(k);if(pe){if("not-object"===pe)throw new Pe('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===pe)throw new Pe("Graph.importNode: no key provided.");if("invalid-attributes"===pe)throw new Pe("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Le=k.key,We=k.attributes,rt=void 0===We?{}:We;return $?this.mergeNode(Le,rt):this.addNode(Le,rt),this},be.importEdge=function(k){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=function Fc(me){return R(me)?"source"in me?"target"in me?!("attributes"in me)||R(me.attributes)&&null!==me.attributes?"undirected"in me&&"boolean"!=typeof me.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(k);if(pe){if("not-object"===pe)throw new Pe('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===pe)throw new Pe("Graph.importEdge: missing souce.");if("no-target"===pe)throw new Pe("Graph.importEdge: missing target.");if("invalid-attributes"===pe)throw new Pe("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===pe)throw new Pe("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Le=k.source,We=k.target,rt=k.attributes,Et=void 0===rt?{}:rt,Mt=k.undirected,Ft=void 0!==Mt&&Mt;return"key"in k?($?Ft?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ft?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,k.key,Le,We,Et):($?Ft?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ft?this.addUndirectedEdge:this.addDirectedEdge).call(this,Le,We,Et),this},be.import=function(k){var $,pe,Le,We=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function G(me){return null!==me&&"object"===ge(me)&&"function"==typeof me.addUndirectedEdgeWithKey&&"function"==typeof me.dropNode}(k))return this.import(k.export(),We),this;if(!R(k))throw new Pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(k.attributes){if(!R(k.attributes))throw new Pe("Graph.import: invalid attributes. Expecting a plain object.");We?this.mergeAttributes(k.attributes):this.replaceAttributes(k.attributes)}if(k.nodes){if(Le=k.nodes,!Array.isArray(Le))throw new Pe("Graph.import: invalid nodes. Expecting an array.");for($=0,pe=Le.length;$<pe;$++)this.importNode(Le[$],We)}if(k.edges){if(Le=k.edges,!Array.isArray(Le))throw new Pe("Graph.import: invalid edges. Expecting an array.");for($=0,pe=Le.length;$<pe;$++)this.importEdge(Le[$],We)}return this},be.nullCopy=function(k){return new Me(w({},this._options,k))},be.emptyCopy=function(k){var $=this.nullCopy(k);return this._nodes.forEach(function(pe,Le){var We=w({},pe.attributes);pe=new $.NodeDataClass(Le,We),$._nodes.set(Le,pe)}),$},be.copy=function(){var k=new Me(this._options);return k.import(this),k},be.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(k){return k.upgradeToMixed()}),this._options.type="mixed",I(this,"type",this._options.type),de(this,"NodeDataClass",Ee)),this},be.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,I(this,"multi",!0),(k=this)._nodes.forEach(function($,pe){if($.out)for(var Le in $.out){var We=new Set;We.add($.out[Le]),$.out[Le]=We,k._nodes.get(Le).in[pe]=We}if($.undirected)for(var rt in $.undirected)if(!(rt>pe)){var Et=new Set;Et.add($.undirected[rt]),$.undirected[rt]=Et,k._nodes.get(rt).undirected[pe]=Et}})),this;var k},be.clearIndex=function(){return this._nodes.forEach(function(k){void 0!==k.in&&(k.in={},k.out={}),void 0!==k.undirected&&(k.undirected={})}),this},be.toJSON=function(){return this.export()},be.toString=function(){return"[object Graph]"},be.inspect=function(){var k=this,$={};this._nodes.forEach(function(Et,Mt){$[Mt]=Et.attributes});var pe={},Le={};this._edges.forEach(function(Et,Mt){var Ft=Et.undirected?"--":"->",Jt="",vn="(".concat(Et.source.key,")").concat(Ft,"(").concat(Et.target.key,")");Et.generatedKey?k.multi&&(void 0===Le[vn]?Le[vn]=0:Le[vn]++,Jt+="".concat(Le[vn],". ")):Jt+="[".concat(Mt,"]: "),pe[Jt+=vn]=Et.attributes});var We={};for(var rt in this)this.hasOwnProperty(rt)&&!Lc.has(rt)&&"function"!=typeof this[rt]&&(We[rt]=this[rt]);return We.attributes=this._attributes,We.nodes=$,We.edges=pe,de(We,"constructor",this.constructor),We},Me}(K.exports.EventEmitter);typeof Symbol<"u"&&(xi.prototype[Symbol.for("nodejs.util.inspect.custom")]=xi.prototype.inspect),[{name:function(me){return"".concat(me,"Edge")},generateKey:!0},{name:function(me){return"".concat(me,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(me){return"".concat(me,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(me){return"".concat(me,"EdgeWithKey")}},{name:function(me){return"".concat(me,"DirectedEdgeWithKey")},type:"directed"},{name:function(me){return"".concat(me,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(me){["add","merge","update"].forEach(function(Me){var be=me.name(Me),k="add"===Me?kl:jc;xi.prototype[be]=me.generateKey?function($,pe,Le){return k(this,be,!0,"undirected"===(me.type||this.type),null,$,pe,Le,"update"===Me)}:function($,pe,Le,We){return k(this,be,!1,"undirected"===(me.type||this.type),$,pe,Le,We,"update"===Me)}})}),typeof Symbol<"u"&&(xi.prototype[Symbol.iterator]=xi.prototype.adjacency),me=xi,E.forEach(function(Me){var be=Me.name,k=Me.attacher;k(me,be("Edge"),"mixed"),k(me,be("DirectedEdge"),"directed"),k(me,be("UndirectedEdge"),"undirected")}),function(me){Ae.forEach(function(Me){var k,$,pe,Le;pe=(k=Me).type,Le=k.direction,me.prototype[$=k.name]=function(We,rt){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];if(!arguments.length)return function rn(me,Me){if(0===me.size)return[];if("mixed"===Me||Me===me.type)return"function"==typeof Array.from?Array.from(me._edges.keys()):we(me._edges.keys(),me._edges.size);for(var be,k,pe=new Array("undirected"===Me?me.undirectedSize:me.directedSize),Le="undirected"===Me,We=me._edges.values(),rt=0;!0!==(be=We.next()).done;)(k=be.value).undirected===Le&&(pe[rt++]=k.key);return pe}(this,pe);if(1===arguments.length){var Et=this._nodes.get(We=""+We);if(void 0===Et)throw new Ve("Graph.".concat($,': could not find the "').concat(We,'" node in the graph.'));return function re(me,Me,be,k){var $=[],pe=me?ce:et;return"undirected"!==Me&&("out"!==be&&pe($,k.in),"in"!==be&&pe($,k.out),!be&&k.directedSelfLoops>0&&$.splice($.lastIndexOf(k.key),1)),"directed"!==Me&&pe($,k.undirected),$}(this.multi,"mixed"===pe?this.type:pe,Le,Et)}if(2===arguments.length){rt=""+rt;var Mt=this._nodes.get(We=""+We);if(!Mt)throw new Ve("Graph.".concat($,':  could not find the "').concat(We,'" source node in the graph.'));if(!this._nodes.has(rt))throw new Ve("Graph.".concat($,':  could not find the "').concat(rt,'" target node in the graph.'));return function Wt(me,Me,be,k,$){var pe=Me?ze:he,Le=[];return"undirected"!==me&&(void 0!==k.in&&"out"!==be&&pe(Le,k.in,$),void 0!==k.out&&"in"!==be&&pe(Le,k.out,$),!be&&k.directedSelfLoops>0&&Le.splice(Le.lastIndexOf(k.key),1)),"directed"!==me&&void 0!==k.undirected&&pe(Le,k.undirected,$),Le}(pe,this.multi,Le,Mt,rt)}throw new Pe("Graph.".concat($,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(be,k){var $=k.name,pe=k.type,Le=k.direction,We="forEach"+$[0].toUpperCase()+$.slice(1,-1);be.prototype[We]=function(rt,Et,Mt){if("mixed"===pe||"mixed"===this.type||pe===this.type){if(1===arguments.length)return function Ie(me,Me,be){if(0!==me.size)for(var k,$,pe="mixed"!==Me&&Me!==me.type,Le="undirected"===Me,We=me._edges.values();!0!==(k=We.next()).done;)if($=k.value,!pe||$.undirected===Le){var Ft=$.source,Jt=$.target;be($.key,$.attributes,Ft.key,Jt.key,Ft.attributes,Jt.attributes,$.undirected,$.generatedKey)}}(this,pe,Mt=rt);if(2===arguments.length){Mt=Et;var Ft=this._nodes.get(rt=""+rt);if(void 0===Ft)throw new Ve("Graph.".concat(We,': could not find the "').concat(rt,'" node in the graph.'));return function Ge(me,Me,be,k,$){var pe=me?F:Z;"undirected"!==Me&&("out"!==be&&pe(k.in,$),"in"!==be&&pe(k.out,$,be?null:k.key)),"directed"!==Me&&pe(k.undirected,$)}(this.multi,"mixed"===pe?this.type:pe,Le,Ft,Mt)}if(3===arguments.length){Et=""+Et;var Jt=this._nodes.get(rt=""+rt);if(!Jt)throw new Ve("Graph.".concat(We,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(Et))throw new Ve("Graph.".concat(We,':  could not find the "').concat(Et,'" target node in the graph.'));return function an(me,Me,be,k,$,pe){var Le=Me?dt:Ye;"undirected"!==me&&(void 0!==k.in&&"out"!==be&&Le(k.in,$,pe),k.key!==$&&void 0!==k.out&&"in"!==be&&Le(k.out,$,pe)),"directed"!==me&&void 0!==k.undirected&&Le(k.undirected,$,pe)}(pe,this.multi,Le,Jt,Et,Mt)}throw new Pe("Graph.".concat(We,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(me,Me),function(be,k){var $=k.name,pe=k.type,Le=k.direction,We="forEach"+$[0].toUpperCase()+$.slice(1,-1)+"Until";be.prototype[We]=function(rt,Et,Mt){if("mixed"===pe||"mixed"===this.type||pe===this.type){if(1===arguments.length)return function H(me,Me,be){if(0!==me.size)for(var k,$,pe="mixed"!==Me&&Me!==me.type,Le="undirected"===Me,We=me._edges.values();!0!==(k=We.next()).done;)if($=k.value,!pe||$.undirected===Le){var Ft=$.source,Jt=$.target;if(be($.key,$.attributes,Ft.key,Jt.key,Ft.attributes,Jt.attributes,$.undirected,$.generatedKey))break}}(this,pe,Mt=rt);if(2===arguments.length){Mt=Et;var Ft=this._nodes.get(rt=""+rt);if(void 0===Ft)throw new Ve("Graph.".concat(We,': could not find the "').concat(rt,'" node in the graph.'));return function Ke(me,Me,be,k,$){var pe=me?M:x;"undirected"!==Me&&("out"!==be&&pe(k.in,$)||"in"!==be&&pe(k.out,$,be?null:k.key))||"directed"===Me||pe(k.undirected,$)}(this.multi,"mixed"===pe?this.type:pe,Le,Ft,Mt)}if(3===arguments.length){Et=""+Et;var Jt=this._nodes.get(rt=""+rt);if(!Jt)throw new Ve("Graph.".concat(We,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(Et))throw new Ve("Graph.".concat(We,':  could not find the "').concat(Et,'" target node in the graph.'));return function qn(me,Me,be,k,$,pe){var Le=Me?mt:vt;"undirected"!==me&&(void 0!==k.in&&"out"!==be&&Le(k.in,$,pe)||k.key!==$&&void 0!==k.out&&"in"!==be&&Le(k.out,$,pe,be?null:k.key))||"directed"===me||void 0===k.undirected||Le(k.undirected,$,pe)}(pe,this.multi,Le,Jt,Et,Mt)}throw new Pe("Graph.".concat(We,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(me,Me),function(be,k){var pe=k.type,Le=k.direction,We=k.name.slice(0,-1)+"Entries";be.prototype[We]=function(rt,Et){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return Xe.empty();if(!arguments.length)return function v(me,Me){if(0===me.size)return Xe.empty();var be="mixed"!==Me&&Me!==me.type,k="undirected"===Me,$=me._edges.values();return new Xe(function(){for(var pe,Le;;){if((pe=$.next()).done)return pe;if(Le=pe.value,!be||Le.undirected===k)break}return{value:[Le.key,Le.attributes,Le.source.key,Le.target.key,Le.source.attributes,Le.target.attributes],done:!1}})}(this,pe);if(1===arguments.length){var Mt=this._nodes.get(rt=""+rt);if(!Mt)throw new Ve("Graph.".concat(We,': could not find the "').concat(rt,'" node in the graph.'));return function st(me,Me,be){var k=Xe.empty();return"undirected"!==me&&("out"!==Me&&void 0!==be.in&&(k=z(k,Q(be.in))),"in"!==Me&&void 0!==be.out&&(k=z(k,Q(be.out,Me?null:be.key)))),"directed"!==me&&void 0!==be.undirected&&(k=z(k,Q(be.undirected))),k}(pe,Le,Mt)}if(2===arguments.length){Et=""+Et;var Ft=this._nodes.get(rt=""+rt);if(!Ft)throw new Ve("Graph.".concat(We,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has(Et))throw new Ve("Graph.".concat(We,':  could not find the "').concat(Et,'" target node in the graph.'));return function Yn(me,Me,be,k){var $=Xe.empty();return"undirected"!==me&&(void 0!==be.in&&"out"!==Me&&k in be.in&&($=z($,zt(be.in,k))),void 0!==be.out&&"in"!==Me&&k in be.out&&($=z($,zt(be.out,k)))),"directed"!==me&&void 0!==be.undirected&&k in be.undirected&&($=z($,zt(be.undirected,k))),$}(pe,Le,Ft,Et)}throw new Pe("Graph.".concat(We,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(me,Me)})}(xi),function(me){In.forEach(function(Me){var k,$,pe,Le;pe=(k=Me).type,Le=k.direction,me.prototype[$=k.name]=function(We){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];if(2===arguments.length){var rt=""+arguments[0],Et=""+arguments[1];if(!this._nodes.has(rt))throw new Ve("Graph.".concat($,': could not find the "').concat(rt,'" node in the graph.'));if(!this._nodes.has(Et))throw new Ve("Graph.".concat($,': could not find the "').concat(Et,'" node in the graph.'));return function mo(me,Me,be,k,$){var pe=me._nodes.get(k);if("undirected"!==Me){if("out"!==be&&void 0!==pe.in)for(var Le in pe.in)if(Le===$)return!0;if("in"!==be&&void 0!==pe.out)for(var We in pe.out)if(We===$)return!0}if("directed"!==Me&&void 0!==pe.undirected)for(var rt in pe.undirected)if(rt===$)return!0;return!1}(this,pe,Le,rt,Et)}if(1===arguments.length){var Mt=this._nodes.get(We=""+We);if(void 0===Mt)throw new Ve("Graph.".concat($,': could not find the "').concat(We,'" node in the graph.'));return function ss(me,Me,be){if("mixed"!==me){if("undirected"===me)return Object.keys(be.undirected);if("string"==typeof Me)return Object.keys(be[Me])}var k=new Set;return"undirected"!==me&&("out"!==Me&&gr(k,be.in),"in"!==Me&&gr(k,be.out)),"directed"!==me&&gr(k,be.undirected),we(k.values(),k.size)}("mixed"===pe?this.type:pe,Le,Mt)}throw new Pe("Graph.".concat($,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Bd(me,Me){var be=Me.name,k=Me.type,$=Me.direction,pe="forEach"+be[0].toUpperCase()+be.slice(1,-1);me.prototype[pe]=function(Le,We){if("mixed"===k||"mixed"===this.type||k===this.type){var rt=this._nodes.get(Le=""+Le);if(void 0===rt)throw new Ve("Graph.".concat(pe,': could not find the "').concat(Le,'" node in the graph.'));!function(Et,Mt,Ft,Jt){if("mixed"!==Et){if("undirected"===Et)return Go(Ft,Ft.undirected,Jt);if("string"==typeof Mt)return Go(Ft,Ft[Mt],Jt)}var vn=new Set;"undirected"!==Et&&("out"!==Mt&&zi(vn,Ft,Ft.in,Jt),"in"!==Mt&&zi(vn,Ft,Ft.out,Jt)),"directed"!==Et&&zi(vn,Ft,Ft.undirected,Jt)}("mixed"===k?this.type:k,$,rt,We)}}}(me,Me),function Zu(me,Me){var be=Me.name,k=Me.type,$=Me.direction,pe="forEach"+be[0].toUpperCase()+be.slice(1,-1)+"Until";me.prototype[pe]=function(Le,We){if("mixed"===k||"mixed"===this.type||k===this.type){var rt=this._nodes.get(Le=""+Le);if(void 0===rt)throw new Ve("Graph.".concat(pe,': could not find the "').concat(Le,'" node in the graph.'));!function(Et,Mt,Ft,Jt){if("mixed"!==Et){if("undirected"===Et)return Yr(Ft,Ft.undirected,Jt);if("string"==typeof Mt)return Yr(Ft,Ft[Mt],Jt)}var vn=new Set;"undirected"!==Et&&("out"!==Mt&&as(vn,Ft,Ft.in,Jt)||"in"!==Mt&&as(vn,Ft,Ft.out,Jt))||"directed"===Et||as(vn,Ft,Ft.undirected,Jt)}("mixed"===k?this.type:k,$,rt,We)}}}(me,Me),function Qu(me,Me){var k=Me.type,$=Me.direction,pe=Me.name.slice(0,-1)+"Entries";me.prototype[pe]=function(Le){if("mixed"!==k&&"mixed"!==this.type&&k!==this.type)return Xe.empty();var We=this._nodes.get(Le=""+Le);if(void 0===We)throw new Ve("Graph.".concat(pe,': could not find the "').concat(Le,'" node in the graph.'));return function(rt,Et,Mt){if("mixed"!==rt){if("undirected"===rt)return Os(Mt,Mt.undirected);if("string"==typeof Et)return Os(Mt,Mt[Et])}var Ft=Xe.empty(),Jt=new Set;return"undirected"!==rt&&("out"!==Et&&(Ft=z(Ft,Io(Jt,Mt,Mt.in))),"in"!==Et&&(Ft=z(Ft,Io(Jt,Mt,Mt.out)))),"directed"!==rt&&(Ft=z(Ft,Io(Jt,Mt,Mt.undirected))),Ft}("mixed"===k?this.type:k,$,We)}}(me,Me)})}(xi);var ki=function(me){function Me(be){var k=w({type:"directed"},be);if("multi"in k&&!1!==k.multi)throw new Pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==k.type)throw new Pe('DirectedGraph.from: inconsistent "'+k.type+'" type in given options!');return me.call(this,k)||this}return C(Me,me),Me}(xi),ks=function(me){function Me(be){var k=w({type:"undirected"},be);if("multi"in k&&!1!==k.multi)throw new Pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==k.type)throw new Pe('UndirectedGraph.from: inconsistent "'+k.type+'" type in given options!');return me.call(this,k)||this}return C(Me,me),Me}(xi),Ca=function(me){function Me(be){var k=w({multi:!0},be);if("multi"in k&&!0!==k.multi)throw new Pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return me.call(this,k)||this}return C(Me,me),Me}(xi),Ta=function(me){function Me(be){var k=w({type:"directed",multi:!0},be);if("multi"in k&&!0!==k.multi)throw new Pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==k.type)throw new Pe('MultiDirectedGraph.from: inconsistent "'+k.type+'" type in given options!');return me.call(this,k)||this}return C(Me,me),Me}(xi),cc=function(me){function Me(be){var k=w({type:"undirected",multi:!0},be);if("multi"in k&&!0!==k.multi)throw new Pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==k.type)throw new Pe('MultiUndirectedGraph.from: inconsistent "'+k.type+'" type in given options!');return me.call(this,k)||this}return C(Me,me),Me}(xi);function go(me){me.from=function(Me,be){var k=w({},Me.options,be),$=new me(k);return $.import(Me),$}}return go(xi),go(ki),go(ks),go(Ca),go(Ta),go(cc),xi.Graph=xi,xi.DirectedGraph=ki,xi.UndirectedGraph=ks,xi.MultiGraph=Ca,xi.MultiDirectedGraph=Ta,xi.MultiUndirectedGraph=cc,xi.InvalidArgumentsGraphError=Pe,xi.NotFoundGraphError=Ve,xi.UsageGraphError=fe,xi}()},7271:(Ue,ge,C)=>{var J;!function(A,te,B,ee){"use strict";var K,g=["","webkit","Moz","MS","ms","o"],w=te.createElement("div"),N="function",G=Math.round,R=Math.abs,W=Date.now;function de(ke,Fe,tt){return setTimeout(L(ke,tt),Fe)}function I(ke,Fe,tt){return!!Array.isArray(ke)&&(V(ke,tt[Fe],tt),!0)}function V(ke,Fe,tt){var ft;if(ke)if(ke.forEach)ke.forEach(Fe,tt);else if(ke.length!==ee)for(ft=0;ft<ke.length;)Fe.call(tt,ke[ft],ft,ke),ft++;else for(ft in ke)ke.hasOwnProperty(ft)&&Fe.call(tt,ke[ft],ft,ke)}function ae(ke,Fe,tt){var ft="DEPRECATED METHOD: "+Fe+"\n"+tt+" AT \n";return function(){var wt=new Error("get-stack-trace"),Xt=wt&&wt.stack?wt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",mn=A.console&&(A.console.warn||A.console.log);return mn&&mn.call(A.console,ft,Xt),ke.apply(this,arguments)}}K="function"!=typeof Object.assign?function(Fe){if(Fe===ee||null===Fe)throw new TypeError("Cannot convert undefined or null to object");for(var tt=Object(Fe),ft=1;ft<arguments.length;ft++){var wt=arguments[ft];if(wt!==ee&&null!==wt)for(var Xt in wt)wt.hasOwnProperty(Xt)&&(tt[Xt]=wt[Xt])}return tt}:Object.assign;var oe=ae(function(Fe,tt,ft){for(var wt=Object.keys(tt),Xt=0;Xt<wt.length;)(!ft||ft&&Fe[wt[Xt]]===ee)&&(Fe[wt[Xt]]=tt[wt[Xt]]),Xt++;return Fe},"extend","Use `assign`."),ne=ae(function(Fe,tt){return oe(Fe,tt,!0)},"merge","Use `assign`.");function X(ke,Fe,tt){var wt,ft=Fe.prototype;(wt=ke.prototype=Object.create(ft)).constructor=ke,wt._super=ft,tt&&K(wt,tt)}function L(ke,Fe){return function(){return ke.apply(Fe,arguments)}}function _(ke,Fe){return typeof ke==N?ke.apply(Fe&&Fe[0]||ee,Fe):ke}function O(ke,Fe){return ke===ee?Fe:ke}function S(ke,Fe,tt){V(se(Fe),function(ft){ke.addEventListener(ft,tt,!1)})}function ue(ke,Fe,tt){V(se(Fe),function(ft){ke.removeEventListener(ft,tt,!1)})}function j(ke,Fe){for(;ke;){if(ke==Fe)return!0;ke=ke.parentNode}return!1}function Te(ke,Fe){return ke.indexOf(Fe)>-1}function se(ke){return ke.trim().split(/\s+/g)}function Se(ke,Fe,tt){if(ke.indexOf&&!tt)return ke.indexOf(Fe);for(var ft=0;ft<ke.length;){if(tt&&ke[ft][tt]==Fe||!tt&&ke[ft]===Fe)return ft;ft++}return-1}function Re(ke){return Array.prototype.slice.call(ke,0)}function Oe(ke,Fe,tt){for(var ft=[],wt=[],Xt=0;Xt<ke.length;){var mn=Fe?ke[Xt][Fe]:ke[Xt];Se(wt,mn)<0&&ft.push(ke[Xt]),wt[Xt]=mn,Xt++}return tt&&(ft=Fe?ft.sort(function(Dr,On){return Dr[Fe]>On[Fe]}):ft.sort()),ft}function Qe(ke,Fe){for(var tt,ft,wt=Fe[0].toUpperCase()+Fe.slice(1),Xt=0;Xt<g.length;){if((ft=(tt=g[Xt])?tt+wt:Fe)in ke)return ft;Xt++}return ee}var Xe=1;function Ne(ke){var Fe=ke.ownerDocument||ke;return Fe.defaultView||Fe.parentWindow||A}var Ve="ontouchstart"in A,fe=Qe(A,"PointerEvent")!==ee,Ee=Ve&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),$e="touch",Je="mouse",P=25,E=1,z=4,Ae=8,et=1,ce=2,Z=4,F=8,x=16,M=ce|Z,Q=F|x,he=M|Q,ze=["x","y"],Ye=["clientX","clientY"];function dt(ke,Fe){var tt=this;this.manager=ke,this.callback=Fe,this.element=ke.element,this.target=ke.options.inputTarget,this.domHandler=function(ft){_(ke.options.enable,[ke])&&tt.handler(ft)},this.init()}function mt(ke,Fe,tt){var ft=tt.pointers.length,wt=tt.changedPointers.length,Xt=Fe&E&&ft-wt==0,mn=Fe&(z|Ae)&&ft-wt==0;tt.isFirst=!!Xt,tt.isFinal=!!mn,Xt&&(ke.session={}),tt.eventType=Fe,function zt(ke,Fe){var tt=ke.session,ft=Fe.pointers,wt=ft.length;tt.firstInput||(tt.firstInput=H(Fe)),wt>1&&!tt.firstMultiple?tt.firstMultiple=H(Fe):1===wt&&(tt.firstMultiple=!1);var Xt=tt.firstInput,mn=tt.firstMultiple,ar=mn?mn.center:Xt.center,Dr=Fe.center=v(ft);Fe.timeStamp=W(),Fe.deltaTime=Fe.timeStamp-Xt.timeStamp,Fe.angle=st(ar,Dr),Fe.distance=Ke(ar,Dr),function rn(ke,Fe){var tt=Fe.center,ft=ke.offsetDelta||{},wt=ke.prevDelta||{},Xt=ke.prevInput||{};(Fe.eventType===E||Xt.eventType===z)&&(wt=ke.prevDelta={x:Xt.deltaX||0,y:Xt.deltaY||0},ft=ke.offsetDelta={x:tt.x,y:tt.y}),Fe.deltaX=wt.x+(tt.x-ft.x),Fe.deltaY=wt.y+(tt.y-ft.y)}(tt,Fe),Fe.offsetDirection=Ge(Fe.deltaX,Fe.deltaY);var On=re(Fe.deltaTime,Fe.deltaX,Fe.deltaY);Fe.overallVelocityX=On.x,Fe.overallVelocityY=On.y,Fe.overallVelocity=R(On.x)>R(On.y)?On.x:On.y,Fe.scale=mn?function an(ke,Fe){return Ke(Fe[0],Fe[1],Ye)/Ke(ke[0],ke[1],Ye)}(mn.pointers,ft):1,Fe.rotation=mn?function Wt(ke,Fe){return st(Fe[1],Fe[0],Ye)+st(ke[1],ke[0],Ye)}(mn.pointers,ft):0,Fe.maxPointers=tt.prevInput?Fe.pointers.length>tt.prevInput.maxPointers?Fe.pointers.length:tt.prevInput.maxPointers:Fe.pointers.length,function Ie(ke,Fe){var wt,Xt,mn,ar,tt=ke.lastInterval||Fe,ft=Fe.timeStamp-tt.timeStamp;if(Fe.eventType!=Ae&&(ft>P||tt.velocity===ee)){var Dr=Fe.deltaX-tt.deltaX,On=Fe.deltaY-tt.deltaY,gn=re(ft,Dr,On);Xt=gn.x,mn=gn.y,wt=R(gn.x)>R(gn.y)?gn.x:gn.y,ar=Ge(Dr,On),ke.lastInterval=Fe}else wt=tt.velocity,Xt=tt.velocityX,mn=tt.velocityY,ar=tt.direction;Fe.velocity=wt,Fe.velocityX=Xt,Fe.velocityY=mn,Fe.direction=ar}(tt,Fe);var gn=ke.element;j(Fe.srcEvent.target,gn)&&(gn=Fe.srcEvent.target),Fe.target=gn}(ke,tt),ke.emit("hammer.input",tt),ke.recognize(tt),ke.session.prevInput=tt}function H(ke){for(var Fe=[],tt=0;tt<ke.pointers.length;)Fe[tt]={clientX:G(ke.pointers[tt].clientX),clientY:G(ke.pointers[tt].clientY)},tt++;return{timeStamp:W(),pointers:Fe,center:v(Fe),deltaX:ke.deltaX,deltaY:ke.deltaY}}function v(ke){var Fe=ke.length;if(1===Fe)return{x:G(ke[0].clientX),y:G(ke[0].clientY)};for(var tt=0,ft=0,wt=0;wt<Fe;)tt+=ke[wt].clientX,ft+=ke[wt].clientY,wt++;return{x:G(tt/Fe),y:G(ft/Fe)}}function re(ke,Fe,tt){return{x:Fe/ke||0,y:tt/ke||0}}function Ge(ke,Fe){return ke===Fe?et:R(ke)>=R(Fe)?ke<0?ce:Z:Fe<0?F:x}function Ke(ke,Fe,tt){tt||(tt=ze);var ft=Fe[tt[0]]-ke[tt[0]],wt=Fe[tt[1]]-ke[tt[1]];return Math.sqrt(ft*ft+wt*wt)}function st(ke,Fe,tt){return tt||(tt=ze),180*Math.atan2(Fe[tt[1]]-ke[tt[1]],Fe[tt[0]]-ke[tt[0]])/Math.PI}dt.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ue(this.element,this.evEl,this.domHandler),this.evTarget&&ue(this.target,this.evTarget,this.domHandler),this.evWin&&ue(Ne(this.element),this.evWin,this.domHandler)}};var qn={mousedown:E,mousemove:2,mouseup:z},Yn="mousedown",In="mousemove mouseup";function gr(){this.evEl=Yn,this.evWin=In,this.pressed=!1,dt.apply(this,arguments)}X(gr,dt,{handler:function(Fe){var tt=qn[Fe.type];tt&E&&0===Fe.button&&(this.pressed=!0),2&tt&&1!==Fe.which&&(tt=z),this.pressed&&(tt&z&&(this.pressed=!1),this.callback(this.manager,tt,{pointers:[Fe],changedPointers:[Fe],pointerType:Je,srcEvent:Fe}))}});var ss={pointerdown:E,pointermove:2,pointerup:z,pointercancel:Ae,pointerout:Ae},Go={2:$e,3:"pen",4:Je,5:"kinect"},zi="pointerdown",Yr="pointermove pointerup pointercancel";function as(){this.evEl=zi,this.evWin=Yr,dt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}A.MSPointerEvent&&!A.PointerEvent&&(zi="MSPointerDown",Yr="MSPointerMove MSPointerUp MSPointerCancel"),X(as,dt,{handler:function(Fe){var tt=this.store,ft=!1,wt=Fe.type.toLowerCase().replace("ms",""),Xt=ss[wt],mn=Go[Fe.pointerType]||Fe.pointerType,ar=mn==$e,Dr=Se(tt,Fe.pointerId,"pointerId");Xt&E&&(0===Fe.button||ar)?Dr<0&&(tt.push(Fe),Dr=tt.length-1):Xt&(z|Ae)&&(ft=!0),!(Dr<0)&&(tt[Dr]=Fe,this.callback(this.manager,Xt,{pointers:tt,changedPointers:[Fe],pointerType:mn,srcEvent:Fe}),ft&&tt.splice(Dr,1))}});var Os={touchstart:E,touchmove:2,touchend:z,touchcancel:Ae};function Bd(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,dt.apply(this,arguments)}function Zu(ke,Fe){var tt=Re(ke.touches),ft=Re(ke.changedTouches);return Fe&(z|Ae)&&(tt=Oe(tt.concat(ft),"identifier",!0)),[tt,ft]}X(Bd,dt,{handler:function(Fe){var tt=Os[Fe.type];if(tt===E&&(this.started=!0),this.started){var ft=Zu.call(this,Fe,tt);tt&(z|Ae)&&ft[0].length-ft[1].length==0&&(this.started=!1),this.callback(this.manager,tt,{pointers:ft[0],changedPointers:ft[1],pointerType:$e,srcEvent:Fe})}}});var Qu={touchstart:E,touchmove:2,touchend:z,touchcancel:Ae},Pc="touchstart touchmove touchend touchcancel";function ac(){this.evTarget=Pc,this.targetIds={},dt.apply(this,arguments)}function Rl(ke,Fe){var tt=Re(ke.touches),ft=this.targetIds;if(Fe&(2|E)&&1===tt.length)return ft[tt[0].identifier]=!0,[tt,tt];var wt,Xt,mn=Re(ke.changedTouches),ar=[],Dr=this.target;if(Xt=tt.filter(function(On){return j(On.target,Dr)}),Fe===E)for(wt=0;wt<Xt.length;)ft[Xt[wt].identifier]=!0,wt++;for(wt=0;wt<mn.length;)ft[mn[wt].identifier]&&ar.push(mn[wt]),Fe&(z|Ae)&&delete ft[mn[wt].identifier],wt++;return ar.length?[Oe(Xt.concat(ar),"identifier",!0),ar]:void 0}X(ac,dt,{handler:function(Fe){var tt=Qu[Fe.type],ft=Rl.call(this,Fe,tt);ft&&this.callback(this.manager,tt,{pointers:ft[0],changedPointers:ft[1],pointerType:$e,srcEvent:Fe})}});var Nc=2500;function Fc(){dt.apply(this,arguments);var ke=L(this.handler,this);this.touch=new ac(this.manager,ke),this.mouse=new gr(this.manager,ke),this.primaryTouch=null,this.lastTouches=[]}function jd(ke,Fe){ke&E?(this.primaryTouch=Fe.changedPointers[0].identifier,Lc.call(this,Fe)):ke&(z|Ae)&&Lc.call(this,Fe)}function Lc(ke){var Fe=ke.changedPointers[0];if(Fe.identifier===this.primaryTouch){var tt={x:Fe.clientX,y:Fe.clientY};this.lastTouches.push(tt);var ft=this.lastTouches;setTimeout(function(){var Xt=ft.indexOf(tt);Xt>-1&&ft.splice(Xt,1)},Nc)}}function eh(ke){for(var Fe=ke.srcEvent.clientX,tt=ke.srcEvent.clientY,ft=0;ft<this.lastTouches.length;ft++){var wt=this.lastTouches[ft],Xt=Math.abs(Fe-wt.x),mn=Math.abs(tt-wt.y);if(Xt<=25&&mn<=25)return!0}return!1}X(Fc,dt,{handler:function(Fe,tt,ft){var Xt=ft.pointerType==Je;if(!(Xt&&ft.sourceCapabilities&&ft.sourceCapabilities.firesTouchEvents)){if(ft.pointerType==$e)jd.call(this,tt,ft);else if(Xt&&eh.call(this,ft))return;this.callback(Fe,tt,ft)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Bc=Qe(w.style,"touchAction"),kl=Bc!==ee,jc="compute",ki="manipulation",ks="none",Ca="pan-x",Ta="pan-y",cc=function Me(){if(!kl)return!1;var ke={},Fe=A.CSS&&A.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(tt){ke[tt]=!Fe||A.CSS.supports("touch-action",tt)}),ke}();function go(ke,Fe){this.manager=ke,this.set(Fe)}go.prototype={set:function(ke){ke==jc&&(ke=this.compute()),kl&&this.manager.element.style&&cc[ke]&&(this.manager.element.style[Bc]=ke),this.actions=ke.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ke=[];return V(this.manager.recognizers,function(Fe){_(Fe.options.enable,[Fe])&&(ke=ke.concat(Fe.getTouchAction()))}),function me(ke){if(Te(ke,ks))return ks;var Fe=Te(ke,Ca),tt=Te(ke,Ta);return Fe&&tt?ks:Fe||tt?Fe?Ca:Ta:Te(ke,ki)?ki:"auto"}(ke.join(" "))},preventDefaults:function(ke){var Fe=ke.srcEvent,tt=ke.offsetDirection;if(!this.manager.session.prevented){var ft=this.actions,wt=Te(ft,ks)&&!cc[ks],Xt=Te(ft,Ta)&&!cc[Ta],mn=Te(ft,Ca)&&!cc[Ca];if(wt&&1===ke.pointers.length&&ke.distance<2&&ke.deltaTime<250)return;return mn&&Xt||!(wt||Xt&&tt&M||mn&&tt&Q)?void 0:this.preventSrc(Fe)}Fe.preventDefault()},preventSrc:function(ke){this.manager.session.prevented=!0,ke.preventDefault()}};var be=1;function Et(ke){this.options=K({},this.defaults,ke||{}),this.id=function we(){return Xe++}(),this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=be,this.simultaneous={},this.requireFail=[]}function Mt(ke){return 16&ke?"cancel":8&ke?"end":4&ke?"move":2&ke?"start":""}function Ft(ke){return ke==x?"down":ke==F?"up":ke==ce?"left":ke==Z?"right":""}function Jt(ke,Fe){var tt=Fe.manager;return tt?tt.get(ke):ke}function vn(){Et.apply(this,arguments)}function so(){vn.apply(this,arguments),this.pX=null,this.pY=null}function Ar(){vn.apply(this,arguments)}function Do(){Et.apply(this,arguments),this._timer=null,this._input=null}function Uc(){vn.apply(this,arguments)}function na(){vn.apply(this,arguments)}function jr(){Et.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function _o(ke,Fe){return(Fe=Fe||{}).recognizers=O(Fe.recognizers,_o.defaults.preset),new Ei(ke,Fe)}function Ei(ke,Fe){this.options=K({},_o.defaults,Fe||{}),this.options.inputTarget=this.options.inputTarget||ke,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ke,this.input=function vt(ke){return new(ke.options.inputClass||(fe?as:Ee?ac:Ve?Fc:gr))(ke,mt)}(this),this.touchAction=new go(this,this.options.touchAction),Sr(this,!0),V(this.options.recognizers,function(tt){var ft=this.add(new tt[0](tt[1]));tt[2]&&ft.recognizeWith(tt[2]),tt[3]&&ft.requireFailure(tt[3])},this)}function Sr(ke,Fe){var ft,tt=ke.element;tt.style&&(V(ke.options.cssProps,function(wt,Xt){ft=Qe(tt.style,Xt),Fe?(ke.oldCssProps[ft]=tt.style[ft],tt.style[ft]=wt):tt.style[ft]=ke.oldCssProps[ft]||""}),Fe||(ke.oldCssProps={}))}Et.prototype={defaults:{},set:function(ke){return K(this.options,ke),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ke){if(I(ke,"recognizeWith",this))return this;var Fe=this.simultaneous;return Fe[(ke=Jt(ke,this)).id]||(Fe[ke.id]=ke,ke.recognizeWith(this)),this},dropRecognizeWith:function(ke){return I(ke,"dropRecognizeWith",this)||(ke=Jt(ke,this),delete this.simultaneous[ke.id]),this},requireFailure:function(ke){if(I(ke,"requireFailure",this))return this;var Fe=this.requireFail;return-1===Se(Fe,ke=Jt(ke,this))&&(Fe.push(ke),ke.requireFailure(this)),this},dropRequireFailure:function(ke){if(I(ke,"dropRequireFailure",this))return this;ke=Jt(ke,this);var Fe=Se(this.requireFail,ke);return Fe>-1&&this.requireFail.splice(Fe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ke){return!!this.simultaneous[ke.id]},emit:function(ke){var Fe=this,tt=this.state;function ft(wt){Fe.manager.emit(wt,ke)}tt<8&&ft(Fe.options.event+Mt(tt)),ft(Fe.options.event),ke.additionalEvent&&ft(ke.additionalEvent),tt>=8&&ft(Fe.options.event+Mt(tt))},tryEmit:function(ke){if(this.canEmit())return this.emit(ke);this.state=32},canEmit:function(){for(var ke=0;ke<this.requireFail.length;){if(!(this.requireFail[ke].state&(32|be)))return!1;ke++}return!0},recognize:function(ke){var Fe=K({},ke);if(!_(this.options.enable,[this,Fe]))return this.reset(),void(this.state=32);56&this.state&&(this.state=be),this.state=this.process(Fe),30&this.state&&this.tryEmit(Fe)},process:function(ke){},getTouchAction:function(){},reset:function(){}},X(vn,Et,{defaults:{pointers:1},attrTest:function(ke){var Fe=this.options.pointers;return 0===Fe||ke.pointers.length===Fe},process:function(ke){var Fe=this.state,tt=ke.eventType,ft=6&Fe,wt=this.attrTest(ke);return ft&&(tt&Ae||!wt)?16|Fe:ft||wt?tt&z?8|Fe:2&Fe?4|Fe:2:32}}),X(so,vn,{defaults:{event:"pan",threshold:10,pointers:1,direction:he},getTouchAction:function(){var ke=this.options.direction,Fe=[];return ke&M&&Fe.push(Ta),ke&Q&&Fe.push(Ca),Fe},directionTest:function(ke){var Fe=this.options,tt=!0,ft=ke.distance,wt=ke.direction,Xt=ke.deltaX,mn=ke.deltaY;return wt&Fe.direction||(Fe.direction&M?(wt=0===Xt?et:Xt<0?ce:Z,tt=Xt!=this.pX,ft=Math.abs(ke.deltaX)):(wt=0===mn?et:mn<0?F:x,tt=mn!=this.pY,ft=Math.abs(ke.deltaY))),ke.direction=wt,tt&&ft>Fe.threshold&&wt&Fe.direction},attrTest:function(ke){return vn.prototype.attrTest.call(this,ke)&&(2&this.state||!(2&this.state)&&this.directionTest(ke))},emit:function(ke){this.pX=ke.deltaX,this.pY=ke.deltaY;var Fe=Ft(ke.direction);Fe&&(ke.additionalEvent=this.options.event+Fe),this._super.emit.call(this,ke)}}),X(Ar,vn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ks]},attrTest:function(ke){return this._super.attrTest.call(this,ke)&&(Math.abs(ke.scale-1)>this.options.threshold||2&this.state)},emit:function(ke){1!==ke.scale&&(ke.additionalEvent=this.options.event+(ke.scale<1?"in":"out")),this._super.emit.call(this,ke)}}),X(Do,Et,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(ke){var Fe=this.options,tt=ke.pointers.length===Fe.pointers,ft=ke.distance<Fe.threshold,wt=ke.deltaTime>Fe.time;if(this._input=ke,!ft||!tt||ke.eventType&(z|Ae)&&!wt)this.reset();else if(ke.eventType&E)this.reset(),this._timer=de(function(){this.state=8,this.tryEmit()},Fe.time,this);else if(ke.eventType&z)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(ke){8===this.state&&(ke&&ke.eventType&z?this.manager.emit(this.options.event+"up",ke):(this._input.timeStamp=W(),this.manager.emit(this.options.event,this._input)))}}),X(Uc,vn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ks]},attrTest:function(ke){return this._super.attrTest.call(this,ke)&&(Math.abs(ke.rotation)>this.options.threshold||2&this.state)}}),X(na,vn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:M|Q,pointers:1},getTouchAction:function(){return so.prototype.getTouchAction.call(this)},attrTest:function(ke){var tt,Fe=this.options.direction;return Fe&(M|Q)?tt=ke.overallVelocity:Fe&M?tt=ke.overallVelocityX:Fe&Q&&(tt=ke.overallVelocityY),this._super.attrTest.call(this,ke)&&Fe&ke.offsetDirection&&ke.distance>this.options.threshold&&ke.maxPointers==this.options.pointers&&R(tt)>this.options.velocity&&ke.eventType&z},emit:function(ke){var Fe=Ft(ke.offsetDirection);Fe&&this.manager.emit(this.options.event+Fe,ke),this.manager.emit(this.options.event,ke)}}),X(jr,Et,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ki]},process:function(ke){var Fe=this.options,tt=ke.pointers.length===Fe.pointers,ft=ke.distance<Fe.threshold,wt=ke.deltaTime<Fe.time;if(this.reset(),ke.eventType&E&&0===this.count)return this.failTimeout();if(ft&&wt&&tt){if(ke.eventType!=z)return this.failTimeout();var Xt=!this.pTime||ke.timeStamp-this.pTime<Fe.interval,mn=!this.pCenter||Ke(this.pCenter,ke.center)<Fe.posThreshold;if(this.pTime=ke.timeStamp,this.pCenter=ke.center,mn&&Xt?this.count+=1:this.count=1,this._input=ke,0==this.count%Fe.taps)return this.hasRequireFailures()?(this._timer=de(function(){this.state=8,this.tryEmit()},Fe.interval,this),2):8}return 32},failTimeout:function(){return this._timer=de(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),_o.VERSION="2.0.7",_o.defaults={domEvents:!1,touchAction:jc,enable:!0,inputTarget:null,inputClass:null,preset:[[Uc,{enable:!1}],[Ar,{enable:!1},["rotate"]],[na,{direction:M}],[so,{direction:M},["swipe"]],[jr],[jr,{event:"doubletap",taps:2},["tap"]],[Do]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ei.prototype={set:function(ke){return K(this.options,ke),ke.touchAction&&this.touchAction.update(),ke.inputTarget&&(this.input.destroy(),this.input.target=ke.inputTarget,this.input.init()),this},stop:function(ke){this.session.stopped=ke?2:1},recognize:function(ke){var Fe=this.session;if(!Fe.stopped){this.touchAction.preventDefaults(ke);var tt,ft=this.recognizers,wt=Fe.curRecognizer;(!wt||wt&&8&wt.state)&&(wt=Fe.curRecognizer=null);for(var Xt=0;Xt<ft.length;)tt=ft[Xt],2===Fe.stopped||wt&&tt!=wt&&!tt.canRecognizeWith(wt)?tt.reset():tt.recognize(ke),!wt&&14&tt.state&&(wt=Fe.curRecognizer=tt),Xt++}},get:function(ke){if(ke instanceof Et)return ke;for(var Fe=this.recognizers,tt=0;tt<Fe.length;tt++)if(Fe[tt].options.event==ke)return Fe[tt];return null},add:function(ke){if(I(ke,"add",this))return this;var Fe=this.get(ke.options.event);return Fe&&this.remove(Fe),this.recognizers.push(ke),ke.manager=this,this.touchAction.update(),ke},remove:function(ke){if(I(ke,"remove",this))return this;if(ke=this.get(ke)){var Fe=this.recognizers,tt=Se(Fe,ke);-1!==tt&&(Fe.splice(tt,1),this.touchAction.update())}return this},on:function(ke,Fe){if(ke!==ee&&Fe!==ee){var tt=this.handlers;return V(se(ke),function(ft){tt[ft]=tt[ft]||[],tt[ft].push(Fe)}),this}},off:function(ke,Fe){if(ke!==ee){var tt=this.handlers;return V(se(ke),function(ft){Fe?tt[ft]&&tt[ft].splice(Se(tt[ft],Fe),1):delete tt[ft]}),this}},emit:function(ke,Fe){this.options.domEvents&&function qt(ke,Fe){var tt=te.createEvent("Event");tt.initEvent(ke,!0,!0),tt.gesture=Fe,Fe.target.dispatchEvent(tt)}(ke,Fe);var tt=this.handlers[ke]&&this.handlers[ke].slice();if(tt&&tt.length){Fe.type=ke,Fe.preventDefault=function(){Fe.srcEvent.preventDefault()};for(var ft=0;ft<tt.length;)tt[ft](Fe),ft++}},destroy:function(){this.element&&Sr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},K(_o,{INPUT_START:E,INPUT_MOVE:2,INPUT_END:z,INPUT_CANCEL:Ae,STATE_POSSIBLE:be,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:et,DIRECTION_LEFT:ce,DIRECTION_RIGHT:Z,DIRECTION_UP:F,DIRECTION_DOWN:x,DIRECTION_HORIZONTAL:M,DIRECTION_VERTICAL:Q,DIRECTION_ALL:he,Manager:Ei,Input:dt,TouchAction:go,TouchInput:ac,MouseInput:gr,PointerEventInput:as,TouchMouseInput:Fc,SingleTouchInput:Bd,Recognizer:Et,AttrRecognizer:vn,Tap:jr,Pan:so,Swipe:na,Pinch:Ar,Rotate:Uc,Press:Do,on:S,off:ue,each:V,merge:ne,extend:oe,assign:K,inherit:X,bindFn:L,prefixed:Qe}),(typeof A<"u"?A:typeof self<"u"?self:{}).Hammer=_o,(J=function(){return _o}.call(ge,C,ge,Ue))!==ee&&(Ue.exports=J)}(window,document)},2601:(Ue,ge)=>{ge.read=function(C,J,A,te,B){var ee,g,w=8*B-te-1,N=(1<<w)-1,G=N>>1,R=-7,W=A?B-1:0,de=A?-1:1,I=C[J+W];for(W+=de,ee=I&(1<<-R)-1,I>>=-R,R+=w;R>0;ee=256*ee+C[J+W],W+=de,R-=8);for(g=ee&(1<<-R)-1,ee>>=-R,R+=te;R>0;g=256*g+C[J+W],W+=de,R-=8);if(0===ee)ee=1-G;else{if(ee===N)return g?NaN:1/0*(I?-1:1);g+=Math.pow(2,te),ee-=G}return(I?-1:1)*g*Math.pow(2,ee-te)},ge.write=function(C,J,A,te,B,ee){var g,w,N,G=8*ee-B-1,R=(1<<G)-1,W=R>>1,de=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,I=te?0:ee-1,V=te?1:-1,ae=J<0||0===J&&1/J<0?1:0;for(J=Math.abs(J),isNaN(J)||J===1/0?(w=isNaN(J)?1:0,g=R):(g=Math.floor(Math.log(J)/Math.LN2),J*(N=Math.pow(2,-g))<1&&(g--,N*=2),(J+=g+W>=1?de/N:de*Math.pow(2,1-W))*N>=2&&(g++,N/=2),g+W>=R?(w=0,g=R):g+W>=1?(w=(J*N-1)*Math.pow(2,B),g+=W):(w=J*Math.pow(2,W-1)*Math.pow(2,B),g=0));B>=8;C[A+I]=255&w,I+=V,w/=256,B-=8);for(g=g<<B|w,G+=B;G>0;C[A+I]=255&g,I+=V,g/=256,G-=8);C[A+I-V]|=128*ae}},6698:Ue=>{Ue.exports="function"==typeof Object.create?function(C,J){J&&(C.super_=J,C.prototype=Object.create(J.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}))}:function(C,J){if(J){C.super_=J;var A=function(){};A.prototype=J.prototype,C.prototype=new A,C.prototype.constructor=C}}},4198:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const{isArray:A,isObject:te,isString:B}=C(8254),{asArray:ee}=C(3521),{prependBase:g}=C(2651),w=C(1874),N=C(1252);function R(de){throw new w("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:de})}function W({context:de,base:I}){if(!de)return;const V=de["@context"];if(B(V))de["@context"]=g(I,V);else if(A(V))for(let ae=0;ae<V.length;++ae){const K=V[ae];B(K)?V[ae]=g(I,K):te(K)&&W({context:{"@context":K},base:I})}else if(te(V))for(const ae in V)W({context:V[ae],base:I})}Ue.exports=class{constructor({sharedCache:I}){this.perOpCache=new Map,this.sharedCache=I}resolve({activeCtx:I,context:V,documentLoader:ae,base:K,cycles:oe=new Set}){var ne=this;return J(function*(){V&&te(V)&&V["@context"]&&(V=V["@context"]),V=ee(V);const X=[];for(const L of V){if(B(L)){let S=ne._get(L);S||(S=yield ne._resolveRemoteContext({activeCtx:I,url:L,documentLoader:ae,base:K,cycles:oe})),A(S)?X.push(...S):X.push(S);continue}if(null===L){X.push(new N({document:null}));continue}te(L)||R(V);const _=JSON.stringify(L);let O=ne._get(_);O||(O=new N({document:L}),ne._cacheResolvedContext({key:_,resolved:O,tag:"static"})),X.push(O)}return X})()}_get(I){let V=this.perOpCache.get(I);if(!V){const ae=this.sharedCache.get(I);ae&&(V=ae.get("static"),V&&this.perOpCache.set(I,V))}return V}_cacheResolvedContext({key:I,resolved:V,tag:ae}){if(this.perOpCache.set(I,V),void 0!==ae){let K=this.sharedCache.get(I);K||(K=new Map,this.sharedCache.set(I,K)),K.set(ae,V)}return V}_resolveRemoteContext({activeCtx:I,url:V,documentLoader:ae,base:K,cycles:oe}){var ne=this;return J(function*(){V=g(K,V);const{context:X,remoteDoc:L}=yield ne._fetchContext({activeCtx:I,url:V,documentLoader:ae,cycles:oe});W({context:X,base:K=L.documentUrl||V});const _=yield ne.resolve({activeCtx:I,context:X,documentLoader:ae,base:K,cycles:oe});return ne._cacheResolvedContext({key:V,resolved:_,tag:L.tag}),_})()}_fetchContext({activeCtx:I,url:V,documentLoader:ae,cycles:K}){return J(function*(){if(K.size>10)throw new w("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===I.processingMode?"loading remote context failed":"context overflow",max:10});if(K.has(V))throw new w("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===I.processingMode?"recursive context inclusion":"context overflow",url:V});let oe,ne;K.add(V);try{ne=yield ae(V),oe=ne.document||null,B(oe)&&(oe=JSON.parse(oe))}catch(X){throw new w("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:V,cause:X})}if(!te(oe))throw new w("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:V});return oe="@context"in oe?{"@context":oe["@context"]}:{"@context":{}},ne.contextUrl&&(A(oe["@context"])||(oe["@context"]=[oe["@context"]]),oe["@context"].push(ne.contextUrl)),{context:oe,remoteDoc:ne}})()}}},1874:Ue=>{"use strict";Ue.exports=class extends Error{constructor(C="An unspecified JSON-LD error occurred.",J="jsonld.Error",A={}){super(C),this.name=J,this.message=C,this.details=A}}},1828:Ue=>{"use strict";Ue.exports=ge=>{class C{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(C,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(C.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:C}),C.compact=function(J,A){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):ge.compact(J,A)},C.expand=function(J){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):ge.expand(J)},C.flatten=function(J){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):ge.flatten(J)},C}},7260:(Ue,ge,C)=>{"use strict";Ue.exports=C(1986).NQuads},4044:(Ue,ge,C)=>{"use strict";var J=C(7156).default;Ue.exports=class{constructor(){this._requests={}}wrapLoader(te){const B=this;return B._loader=te,function(){return B.add.apply(B,arguments)}}add(te){var B=this;return J(function*(){let ee=B._requests[te];if(ee)return Promise.resolve(ee);ee=B._requests[te]=B._loader(te);try{return yield ee}finally{delete B._requests[te]}})()}}},1252:(Ue,ge,C)=>{"use strict";const J=C(1072);Ue.exports=class{constructor({document:B}){this.document=B,this.cache=new J({max:10})}getProcessed(B){return this.cache.get(B)}setProcessed(B,ee){this.cache.set(B,ee)}}},8809:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(1874),{isArray:te,isObject:B,isString:ee,isUndefined:g}=C(8254),{isList:w,isValue:N,isGraph:G,isSimpleGraph:R,isSubjectReference:W}=C(543),{expandIri:de,getContextValue:I,isKeyword:V,process:ae,processingMode:K}=C(9611),{removeBase:oe,prependBase:ne}=C(2651),{REGEX_KEYWORD:X,addValue:L,asArray:_,compareShortestLeast:O}=C(3521),S={};function j(Te,se,Se){if("@nest"!==de(Te,se,{vocab:!0},Se))throw new A("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ue.exports=S,S.compact=function(){var Te=J(function*({activeCtx:se,activeProperty:Se=null,element:Re,options:Oe={}}){if(te(Re)){let Xe=[];for(let we=0;we<Re.length;++we){const Ne=yield S.compact({activeCtx:se,activeProperty:Se,element:Re[we],options:Oe});null!==Ne&&Xe.push(Ne)}return Oe.compactArrays&&1===Xe.length&&0===(I(se,Se,"@container")||[]).length&&(Xe=Xe[0]),Xe}const Qe=I(se,Se,"@context");if(g(Qe)||(se=yield ae({activeCtx:se,localCtx:Qe,propagate:!0,overrideProtected:!0,options:Oe})),B(Re)){if(Oe.link&&"@id"in Re&&Oe.link.hasOwnProperty(Re["@id"])){const $e=Oe.link[Re["@id"]];for(let ot=0;ot<$e.length;++ot)if($e[ot].expanded===Re)return $e[ot].compacted}if(N(Re)||W(Re)){const $e=S.compactValue({activeCtx:se,activeProperty:Se,value:Re,options:Oe});return Oe.link&&W(Re)&&(Oe.link.hasOwnProperty(Re["@id"])||(Oe.link[Re["@id"]]=[]),Oe.link[Re["@id"]].push({expanded:Re,compacted:$e})),$e}if(w(Re)&&(I(se,Se,"@container")||[]).includes("@list"))return S.compact({activeCtx:se,activeProperty:Se,element:Re["@list"],options:Oe});const Xe="@reverse"===Se,we={},Ne=se;!N(Re)&&!W(Re)&&(se=se.revertToPreviousContext());const Pe=I(Ne,Se,"@context");g(Pe)||(se=yield ae({activeCtx:se,localCtx:Pe,propagate:!0,overrideProtected:!0,options:Oe})),Oe.link&&"@id"in Re&&(Oe.link.hasOwnProperty(Re["@id"])||(Oe.link[Re["@id"]]=[]),Oe.link[Re["@id"]].push({expanded:Re,compacted:we}));let Ve=Re["@type"]||[];Ve.length>1&&(Ve=Array.from(Ve).sort());const fe=se;for(const $e of Ve){const ot=S.compactIri({activeCtx:fe,iri:$e,relativeTo:{vocab:!0}}),Je=I(Ne,ot,"@context");g(Je)||(se=yield ae({activeCtx:se,localCtx:Je,options:Oe,propagate:!1}))}const Ee=Object.keys(Re).sort();for(const $e of Ee){const ot=Re[$e];if("@id"!==$e)if("@type"!==$e)if("@reverse"!==$e)if("@preserve"!==$e)if("@index"!==$e)if("@graph"!==$e&&"@list"!==$e&&"@included"!==$e&&V($e)){const Je=S.compactIri({activeCtx:se,iri:$e,relativeTo:{vocab:!0}});L(we,Je,ot)}else{if(!te(ot))throw new A("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ot.length){const Je=S.compactIri({activeCtx:se,iri:$e,value:ot,relativeTo:{vocab:!0},reverse:Xe}),le=se.mappings.has(Je)?se.mappings.get(Je)["@nest"]:null;let P=we;le&&(j(se,le,Oe),B(we[le])||(we[le]={}),P=we[le]),L(P,Je,ot,{propertyIsArray:!0})}for(const Je of ot){const le=S.compactIri({activeCtx:se,iri:$e,value:Je,relativeTo:{vocab:!0},reverse:Xe}),P=se.mappings.has(le)?se.mappings.get(le)["@nest"]:null;let E=we;P&&(j(se,P,Oe),B(we[P])||(we[P]={}),E=we[P]);const ie=I(se,le,"@container")||[],z=G(Je),Ae=w(Je);let et;Ae?et=Je["@list"]:z&&(et=Je["@graph"]);let ce=yield S.compact({activeCtx:se,activeProperty:le,element:Ae||z?et:Je,options:Oe});if(Ae){if(te(ce)||(ce=[ce]),ie.includes("@list")){L(E,le,ce,{valueIsArray:!0,allowDuplicate:!0});continue}ce={[S.compactIri({activeCtx:se,iri:"@list",relativeTo:{vocab:!0}})]:ce},"@index"in Je&&(ce[S.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Je["@index"])}if(z)if(ie.includes("@graph")&&(ie.includes("@id")||ie.includes("@index")&&R(Je))){let Z;E.hasOwnProperty(le)?Z=E[le]:E[le]=Z={};const F=(ie.includes("@id")?Je["@id"]:Je["@index"])||S.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}});L(Z,F,ce,{propertyIsArray:!Oe.compactArrays||ie.includes("@set")})}else ie.includes("@graph")&&R(Je)?(te(ce)&&ce.length>1&&(ce={"@included":ce}),L(E,le,ce,{propertyIsArray:!Oe.compactArrays||ie.includes("@set")})):(te(ce)&&1===ce.length&&Oe.compactArrays&&(ce=ce[0]),ce={[S.compactIri({activeCtx:se,iri:"@graph",relativeTo:{vocab:!0}})]:ce},"@id"in Je&&(ce[S.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Je["@id"]),"@index"in Je&&(ce[S.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Je["@index"]),L(E,le,ce,{propertyIsArray:!Oe.compactArrays||ie.includes("@set")}));else if(ie.includes("@language")||ie.includes("@index")||ie.includes("@id")||ie.includes("@type")){let Z,F;if(E.hasOwnProperty(le)?Z=E[le]:E[le]=Z={},ie.includes("@language"))N(ce)&&(ce=ce["@value"]),F=Je["@language"];else if(ie.includes("@index")){const x=I(se,le,"@index")||"@index",M=S.compactIri({activeCtx:se,iri:x,relativeTo:{vocab:!0}});if("@index"===x)F=Je["@index"],delete ce[M];else{let Q;if([F,...Q]=_(ce[x]||[]),ee(F))switch(Q.length){case 0:delete ce[x];break;case 1:ce[x]=Q[0];break;default:ce[x]=Q}else F=null}}else if(ie.includes("@id")){const x=S.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}});F=ce[x],delete ce[x]}else if(ie.includes("@type")){const x=S.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}});let M;switch([F,...M]=_(ce[x]||[]),M.length){case 0:delete ce[x];break;case 1:ce[x]=M[0];break;default:ce[x]=M}1===Object.keys(ce).length&&"@id"in Je&&(ce=yield S.compact({activeCtx:se,activeProperty:le,element:{"@id":Je["@id"]},options:Oe}))}F||(F=S.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}})),L(Z,F,ce,{propertyIsArray:ie.includes("@set")})}else{const Z=!Oe.compactArrays||ie.includes("@set")||ie.includes("@list")||te(ce)&&0===ce.length||"@list"===$e||"@graph"===$e;L(E,le,ce,{propertyIsArray:Z})}}}else{if((I(se,Se,"@container")||[]).includes("@index"))continue;const le=S.compactIri({activeCtx:se,iri:$e,relativeTo:{vocab:!0}});L(we,le,ot)}else{const Je=yield S.compact({activeCtx:se,activeProperty:Se,element:ot,options:Oe});te(Je)&&0===Je.length||L(we,$e,Je)}else{const Je=yield S.compact({activeCtx:se,activeProperty:"@reverse",element:ot,options:Oe});for(const le in Je)if(se.mappings.has(le)&&se.mappings.get(le).reverse){const P=Je[le],ie=(I(se,le,"@container")||[]).includes("@set")||!Oe.compactArrays;L(we,le,P,{propertyIsArray:ie}),delete Je[le]}if(Object.keys(Je).length>0){const le=S.compactIri({activeCtx:se,iri:$e,relativeTo:{vocab:!0}});L(we,le,Je)}}else{let Je=_(ot).map(z=>S.compactIri({activeCtx:Ne,iri:z,relativeTo:{vocab:!0}}));1===Je.length&&(Je=Je[0]);const le=S.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}}),ie=(I(se,le,"@container")||[]).includes("@set")&&K(se,1.1)||te(Je)&&0===ot.length;L(we,le,Je,{propertyIsArray:ie})}else{let Je=_(ot).map(P=>S.compactIri({activeCtx:se,iri:P,relativeTo:{vocab:!1},base:Oe.base}));1===Je.length&&(Je=Je[0]),we[S.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Je}}return we}return Re});return function(se){return Te.apply(this,arguments)}}(),S.compactIri=({activeCtx:Te,iri:se,value:Se=null,relativeTo:Re={vocab:!1},reverse:Oe=!1,base:Qe=null})=>{if(null===se)return se;Te.isPropertyTermScoped&&Te.previousContext&&(Te=Te.previousContext);const Xe=Te.getInverse();if(V(se)&&se in Xe&&"@none"in Xe[se]&&"@type"in Xe[se]["@none"]&&"@none"in Xe[se]["@none"]["@type"])return Xe[se]["@none"]["@type"]["@none"];if(Re.vocab&&se in Xe){const fe=Te["@language"]||"@none",Ee=[];B(Se)&&"@index"in Se&&!("@graph"in Se)&&Ee.push("@index","@index@set"),B(Se)&&"@preserve"in Se&&(Se=Se["@preserve"][0]),G(Se)?("@index"in Se&&Ee.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Se&&Ee.push("@graph@id","@graph@id@set"),Ee.push("@graph","@graph@set","@set"),"@index"in Se||Ee.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Se||Ee.push("@graph@id","@graph@id@set")):B(Se)&&!N(Se)&&Ee.push("@id","@id@set","@type","@set@type");let $e="@language",ot="@null";if(Oe)$e="@type",ot="@reverse",Ee.push("@set");else if(w(Se)){"@index"in Se||Ee.push("@list");const le=Se["@list"];if(0===le.length)$e="@any",ot="@none";else{let P=0===le.length?fe:null,E=null;for(let ie=0;ie<le.length;++ie){const z=le[ie];let Ae="@none",et="@none";if(N(z)?"@direction"in z?Ae=`${(z["@language"]||"").toLowerCase()}_${z["@direction"]}`:"@language"in z?Ae=z["@language"].toLowerCase():"@type"in z?et=z["@type"]:Ae="@null":et="@id",null===P?P=Ae:Ae!==P&&N(z)&&(P="@none"),null===E?E=et:et!==E&&(E="@none"),"@none"===P&&"@none"===E)break}P=P||"@none",E=E||"@none","@none"!==E?($e="@type",ot=E):ot=P}}else{if(N(Se))if("@language"in Se&&!("@index"in Se)){Ee.push("@language","@language@set"),ot=Se["@language"];const le=Se["@direction"];le&&(ot=`${ot}_${le}`)}else"@direction"in Se&&!("@index"in Se)?ot=`_${Se["@direction"]}`:"@type"in Se&&($e="@type",ot=Se["@type"]);else $e="@type",ot="@id";Ee.push("@set")}Ee.push("@none"),B(Se)&&!("@index"in Se)&&Ee.push("@index","@index@set"),N(Se)&&1===Object.keys(Se).length&&Ee.push("@language","@language@set");const Je=function ue(Te,se,Se,Re,Oe,Qe){null===Qe&&(Qe="@null");const Xe=[];if(("@id"===Qe||"@reverse"===Qe)&&B(Se)&&"@id"in Se){"@reverse"===Qe&&Xe.push("@reverse");const Ne=S.compactIri({activeCtx:Te,iri:Se["@id"],relativeTo:{vocab:!0}});Te.mappings.has(Ne)&&Te.mappings.get(Ne)&&Te.mappings.get(Ne)["@id"]===Se["@id"]?Xe.push.apply(Xe,["@vocab","@id"]):Xe.push.apply(Xe,["@id","@vocab"])}else{Xe.push(Qe);const Ne=Xe.find(Pe=>Pe.includes("_"));Ne&&Xe.push(Ne.replace(/^[^_]+_/,"_"))}Xe.push("@none");const we=Te.inverse[se];for(const Ne of Re){if(!(Ne in we))continue;const Pe=we[Ne][Oe];for(const Ve of Xe)if(Ve in Pe)return Pe[Ve]}return null}(Te,se,Se,Ee,$e,ot);if(null!==Je)return Je}if(Re.vocab&&"@vocab"in Te){const fe=Te["@vocab"];if(0===se.indexOf(fe)&&se!==fe){const Ee=se.substr(fe.length);if(!Te.mappings.has(Ee))return Ee}}let we=null;const Ne=[];let Pe=Te.fastCurieMap;const Ve=se.length-1;for(let fe=0;fe<Ve&&se[fe]in Pe;++fe)Pe=Pe[se[fe]],""in Pe&&Ne.push(Pe[""][0]);for(let fe=Ne.length-1;fe>=0;--fe){const Ee=Ne[fe],$e=Ee.terms;for(const ot of $e){const Je=ot+":"+se.substr(Ee.iri.length);Te.mappings.get(ot)._prefix&&(!Te.mappings.has(Je)||null===Se&&Te.mappings.get(Je)["@id"]===se)&&(null===we||O(Je,we)<0)&&(we=Je)}}if(null!==we)return we;for(const[fe,Ee]of Te.mappings)if(Ee&&Ee._prefix&&se.startsWith(fe+":"))throw new A(`Absolute IRI "${se}" confused with prefix "${fe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Te});if(!Re.vocab){if("@base"in Te){if(Te["@base"]){const fe=oe(ne(Qe,Te["@base"]),se);return X.test(fe)?`./${fe}`:fe}return se}return oe(Qe,se)}return se},S.compactValue=({activeCtx:Te,activeProperty:se,value:Se,options:Re})=>{if(N(Se)){const we=I(Te,se,"@type"),Ne=I(Te,se,"@language"),Pe=I(Te,se,"@direction"),Ve=I(Te,se,"@container")||[],fe="@index"in Se&&!Ve.includes("@index");if(!fe&&"@none"!==we&&(Se["@type"]===we||"@language"in Se&&Se["@language"]===Ne&&"@direction"in Se&&Se["@direction"]===Pe||"@language"in Se&&Se["@language"]===Ne||"@direction"in Se&&Se["@direction"]===Pe))return Se["@value"];const Ee=Object.keys(Se).length,$e=1===Ee||2===Ee&&"@index"in Se&&!fe,ot="@language"in Te,Je=ee(Se["@value"]),le=Te.mappings.has(se)&&null===Te.mappings.get(se)["@language"];if($e&&"@none"!==we&&(!ot||!Je||le))return Se["@value"];const P={};return fe&&(P[S.compactIri({activeCtx:Te,iri:"@index",relativeTo:{vocab:!0}})]=Se["@index"]),"@type"in Se?P[S.compactIri({activeCtx:Te,iri:"@type",relativeTo:{vocab:!0}})]=S.compactIri({activeCtx:Te,iri:Se["@type"],relativeTo:{vocab:!0}}):"@language"in Se&&(P[S.compactIri({activeCtx:Te,iri:"@language",relativeTo:{vocab:!0}})]=Se["@language"]),"@direction"in Se&&(P[S.compactIri({activeCtx:Te,iri:"@direction",relativeTo:{vocab:!0}})]=Se["@direction"]),P[S.compactIri({activeCtx:Te,iri:"@value",relativeTo:{vocab:!0}})]=Se["@value"],P}const Oe=de(Te,se,{vocab:!0},Re),Qe=I(Te,se,"@type"),Xe=S.compactIri({activeCtx:Te,iri:Se["@id"],relativeTo:{vocab:"@vocab"===Qe},base:Re.base});return"@id"===Qe||"@vocab"===Qe||"@graph"===Oe?Xe:{[S.compactIri({activeCtx:Te,iri:"@id",relativeTo:{vocab:!0}})]:Xe}}},6982:Ue=>{"use strict";const ge="http://www.w3.org/1999/02/22-rdf-syntax-ns#",C="http://www.w3.org/2001/XMLSchema#";Ue.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:ge,RDF_LIST:ge+"List",RDF_FIRST:ge+"first",RDF_REST:ge+"rest",RDF_NIL:ge+"nil",RDF_TYPE:ge+"type",RDF_PLAIN_LITERAL:ge+"PlainLiteral",RDF_XML_LITERAL:ge+"XMLLiteral",RDF_JSON_LITERAL:ge+"JSON",RDF_OBJECT:ge+"object",RDF_LANGSTRING:ge+"langString",XSD:C,XSD_BOOLEAN:C+"boolean",XSD_DOUBLE:C+"double",XSD_INTEGER:C+"integer",XSD_STRING:C+"string"}},9611:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(3521),te=C(1874),{isArray:B,isObject:ee,isString:g,isUndefined:w}=C(8254),{isAbsolute:N,isRelative:G,prependBase:R}=C(2651),{handleEvent:W}=C(3855),{REGEX_BCP47:de,REGEX_KEYWORD:I,asArray:V,compareShortestLeast:ae}=C(3521),K=new Map,ne={};function X(_,O,S,ue,j,Te){if(null===O||!g(O)||ne.isKeyword(O))return O;if(O.match(I))return null;if(ue&&ue.hasOwnProperty(O)&&!0!==j.get(O)&&ne.createTermDefinition({activeCtx:_,localCtx:ue,term:O,defined:j,options:Te}),(S=S||{}).vocab){const Se=_.mappings.get(O);if(null===Se)return null;if(ee(Se)&&"@id"in Se)return Se["@id"]}const se=O.indexOf(":");if(se>0){const Se=O.substr(0,se),Re=O.substr(se+1);if("_"===Se||0===Re.indexOf("//"))return O;ue&&ue.hasOwnProperty(Se)&&ne.createTermDefinition({activeCtx:_,localCtx:ue,term:Se,defined:j,options:Te});const Oe=_.mappings.get(Se);if(Oe&&Oe._prefix)return Oe["@id"]+Re;if(N(O))return O}if(S.vocab&&"@vocab"in _)O=_["@vocab"]+O;else if(S.base){let Se,Re;"@base"in _?_["@base"]?(Re=R(Te.base,_["@base"]),Se=R(Re,O)):(Re=_["@base"],Se=O):(Re=Te.base,Se=R(Te.base,O)),O=Se}return O}function L(_,O){if(!_||"object"!=typeof _||!O||"object"!=typeof O)return _===O;const S=Array.isArray(_);if(S!==Array.isArray(O))return!1;if(S){if(_.length!==O.length)return!1;for(let Te=0;Te<_.length;++Te)if(!L(_[Te],O[Te]))return!1;return!0}const ue=Object.keys(_),j=Object.keys(O);if(ue.length!==j.length)return!1;for(const Te in _){let se=_[Te],Se=O[Te];if("@container"===Te&&Array.isArray(se)&&Array.isArray(Se)&&(se=se.slice().sort(),Se=Se.slice().sort()),!L(se,Se))return!1}return!0}Ue.exports=ne,ne.process=function(){var _=J(function*({activeCtx:O,localCtx:S,options:ue,propagate:j=!0,overrideProtected:Te=!1,cycles:se=new Set}){if(ee(S)&&"@context"in S&&B(S["@context"])&&(S=S["@context"]),0===V(S).length)return O;const Re=[],Oe=[({event:Ne,next:Pe})=>{Re.push(Ne),Pe()}];ue.eventHandler&&Oe.push(ue.eventHandler);const Qe=ue;ue={...ue,eventHandler:Oe};const Xe=yield ue.contextResolver.resolve({activeCtx:O,context:S,documentLoader:ue.documentLoader,base:ue.base});ee(Xe[0].document)&&"boolean"==typeof Xe[0].document["@propagate"]&&(j=Xe[0].document["@propagate"]);let we=O;!j&&!we.previousContext&&(we=we.clone(),we.previousContext=O);for(const Ne of Xe){let{document:Pe}=Ne;if(O=we,null===Pe){if(!Te&&0!==Object.keys(O.protected).length)throw new te("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});we=O=ne.getInitialContext(ue).clone();continue}const Ve=Ne.getProcessed(O);if(Ve){if(Qe.eventHandler)for(const Ee of Ve.events)W({event:Ee,options:Qe});we=O=Ve.context;continue}if(ee(Pe)&&"@context"in Pe&&(Pe=Pe["@context"]),!ee(Pe))throw new te("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Pe});we=we.clone();const fe=new Map;if("@version"in Pe){if(1.1!==Pe["@version"])throw new te("Unsupported JSON-LD version: "+Pe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Pe});if(O.processingMode&&"json-ld-1.0"===O.processingMode)throw new te("@version: "+Pe["@version"]+" not compatible with "+O.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Pe});we.processingMode="json-ld-1.1",we["@version"]=Pe["@version"],fe.set("@version",!0)}if(we.processingMode=we.processingMode||O.processingMode,"@base"in Pe){let Ee=Pe["@base"];if(null!==Ee&&!N(Ee)){if(!G(Ee))throw new te('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Pe});Ee=R(we["@base"],Ee)}we["@base"]=Ee,fe.set("@base",!0)}if("@vocab"in Pe){const Ee=Pe["@vocab"];if(null===Ee)delete we["@vocab"];else{if(!g(Ee))throw new te('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});if(!N(Ee)&&ne.processingMode(we,1))throw new te('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});{const $e=X(we,Ee,{vocab:!0,base:!0},void 0,void 0,ue);N($e)||ue.eventHandler&&W({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:$e}},options:ue}),we["@vocab"]=$e}}fe.set("@vocab",!0)}if("@language"in Pe){const Ee=Pe["@language"];if(null===Ee)delete we["@language"];else{if(!g(Ee))throw new te('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Pe});Ee.match(de)||ue.eventHandler&&W({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ee}},options:ue}),we["@language"]=Ee.toLowerCase()}fe.set("@language",!0)}if("@direction"in Pe){const Ee=Pe["@direction"];if("json-ld-1.0"===O.processingMode)throw new te("Invalid JSON-LD syntax; @direction not compatible with "+O.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Pe});if(null===Ee)delete we["@direction"];else{if("ltr"!==Ee&&"rtl"!==Ee)throw new te('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Pe});we["@direction"]=Ee}fe.set("@direction",!0)}if("@propagate"in Pe){const Ee=Pe["@propagate"];if("json-ld-1.0"===O.processingMode)throw new te("Invalid JSON-LD syntax; @propagate not compatible with "+O.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if("boolean"!=typeof Ee)throw new te("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:S});fe.set("@propagate",!0)}if("@import"in Pe){const Ee=Pe["@import"];if("json-ld-1.0"===O.processingMode)throw new te("Invalid JSON-LD syntax; @import not compatible with "+O.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if(!g(Ee))throw new te("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:S});const $e=yield ue.contextResolver.resolve({activeCtx:O,context:Ee,documentLoader:ue.documentLoader,base:ue.base});if(1!==$e.length)throw new te("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:S});const ot=$e[0].getProcessed(O);if(ot)Pe=ot;else{const Je=$e[0].document;if("@import"in Je)throw new te("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:S});for(const le in Je)Pe.hasOwnProperty(le)||(Pe[le]=Je[le]);$e[0].setProcessed(O,Pe)}fe.set("@import",!0)}fe.set("@protected",Pe["@protected"]||!1);for(const Ee in Pe)if(ne.createTermDefinition({activeCtx:we,localCtx:Pe,term:Ee,defined:fe,options:ue,overrideProtected:Te}),ee(Pe[Ee])&&"@context"in Pe[Ee]){const $e=Pe[Ee]["@context"];let ot=!0;if(g($e)){const Je=R(ue.base,$e);se.has(Je)?ot=!1:se.add(Je)}if(ot)try{yield ne.process({activeCtx:we.clone(),localCtx:Pe[Ee]["@context"],overrideProtected:!0,options:ue,cycles:se})}catch{throw new te("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Pe[Ee]["@context"],term:Ee})}}Ne.setProcessed(O,{context:we,events:Re})}return we});return function(O){return _.apply(this,arguments)}}(),ne.createTermDefinition=({activeCtx:_,localCtx:O,term:S,defined:ue,options:j,overrideProtected:Te=!1})=>{if(ue.has(S)){if(ue.get(S))return;throw new te("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:O,term:S})}let se;if(ue.set(S,!1),O.hasOwnProperty(S)&&(se=O[S]),"@type"===S&&ee(se)&&"@set"===(se["@container"]||"@set")&&ne.processingMode(_,1.1)){const Ne=["@container","@id","@protected"],Pe=Object.keys(se);if(0===Pe.length||Pe.some(Ve=>!Ne.includes(Ve)))throw new te("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:O,term:S})}else{if(ne.isKeyword(S))throw new te("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:O,term:S});if(S.match(I))return void(j.eventHandler&&W({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:S}},options:j}));if(""===S)throw new te("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:O})}const Se=_.mappings.get(S);_.mappings.has(S)&&_.mappings.delete(S);let Re=!1;if((g(se)||null===se)&&(Re=!0,se={"@id":se}),!ee(se))throw new te("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:O});const Oe={};_.mappings.set(S,Oe),Oe.reverse=!1;const Qe=["@container","@id","@language","@reverse","@type"];ne.processingMode(_,1.1)&&Qe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ne in se)if(!Qe.includes(Ne))throw new te("Invalid JSON-LD syntax; a term definition must not contain "+Ne,"jsonld.SyntaxError",{code:"invalid term definition",context:O});const Xe=S.indexOf(":");if(Oe._termHasColon=Xe>0,"@reverse"in se){if("@id"in se)throw new te("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:O});if("@nest"in se)throw new te("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:O});const Ne=se["@reverse"];if(!g(Ne))throw new te("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});if(Ne.match(I))return j.eventHandler&&W({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ne}},options:j}),void(Se?_.mappings.set(S,Se):_.mappings.delete(S));const Pe=X(_,Ne,{vocab:!0,base:!1},O,ue,j);if(!N(Pe))throw new te("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});Oe["@id"]=Pe,Oe.reverse=!0}else if("@id"in se){let Ne=se["@id"];if(Ne&&!g(Ne))throw new te("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});if(null===Ne)Oe["@id"]=null;else{if(!ne.isKeyword(Ne)&&Ne.match(I))return j.eventHandler&&W({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ne}},options:j}),void(Se?_.mappings.set(S,Se):_.mappings.delete(S));if(Ne!==S){if(Ne=X(_,Ne,{vocab:!0,base:!1},O,ue,j),!N(Ne)&&!ne.isKeyword(Ne))throw new te("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});if(S.match(/(?::[^:])|\//)&&X(_,S,{vocab:!0,base:!1},O,new Map(ue).set(S,!0),j)!==Ne)throw new te("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});Oe["@id"]=Ne,Oe._prefix=Re&&!Oe._termHasColon&&Ne.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Oe))if(Oe._termHasColon){const Ne=S.substr(0,Xe);if(O.hasOwnProperty(Ne)&&ne.createTermDefinition({activeCtx:_,localCtx:O,term:Ne,defined:ue,options:j}),_.mappings.has(Ne)){const Pe=S.substr(Xe+1);Oe["@id"]=_.mappings.get(Ne)["@id"]+Pe}else Oe["@id"]=S}else if("@type"===S)Oe["@id"]=S;else{if(!("@vocab"in _))throw new te("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O,term:S});Oe["@id"]=_["@vocab"]+S}if((!0===se["@protected"]||!0===ue.get("@protected")&&!1!==se["@protected"])&&(_.protected[S]=!0,Oe.protected=!0),ue.set(S,!0),"@type"in se){let Ne=se["@type"];if(!g(Ne))throw new te("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:O});if("@json"===Ne||"@none"===Ne){if(ne.processingMode(_,1))throw new te(`Invalid JSON-LD syntax; an @context @type value must not be "${Ne}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:O})}else if("@id"!==Ne&&"@vocab"!==Ne){if(Ne=X(_,Ne,{vocab:!0,base:!1},O,ue,j),!N(Ne))throw new te("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:O});if(0===Ne.indexOf("_:"))throw new te("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:O})}Oe["@type"]=Ne}if("@container"in se){const Ne=g(se["@container"])?[se["@container"]]:se["@container"]||[],Pe=["@list","@set","@index","@language"];let Ve=!0;const fe=Ne.includes("@set");if(ne.processingMode(_,1.1)){if(Pe.push("@graph","@id","@type"),Ne.includes("@list")){if(1!==Ne.length)throw new te("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:O})}else if(Ne.includes("@graph")){if(Ne.some(Ee=>"@graph"!==Ee&&"@id"!==Ee&&"@index"!==Ee&&"@set"!==Ee))throw new te("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:O})}else Ve&=Ne.length<=(fe?2:1);if(Ne.includes("@type")&&(Oe["@type"]=Oe["@type"]||"@id",!["@id","@vocab"].includes(Oe["@type"])))throw new te("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:O})}else Ve&=!B(se["@container"]),Ve&=Ne.length<=1;if(Ve&=Ne.every(Ee=>Pe.includes(Ee)),Ve&=!(fe&&Ne.includes("@list")),!Ve)throw new te("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Pe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:O});if(Oe.reverse&&!Ne.every(Ee=>["@index","@set"].includes(Ee)))throw new te("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:O});Oe["@container"]=Ne}if("@index"in se){if(!("@container"in se)||!Oe["@container"].includes("@index"))throw new te(`Invalid JSON-LD syntax; @index without @index in @container: "${se["@index"]}" on term "${S}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:O});if(!g(se["@index"])||0===se["@index"].indexOf("@"))throw new te(`Invalid JSON-LD syntax; @index must expand to an IRI: "${se["@index"]}" on term "${S}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:O});Oe["@index"]=se["@index"]}if("@context"in se&&(Oe["@context"]=se["@context"]),"@language"in se&&!("@type"in se)){let Ne=se["@language"];if(null!==Ne&&!g(Ne))throw new te("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:O});null!==Ne&&(Ne=Ne.toLowerCase()),Oe["@language"]=Ne}if("@prefix"in se){if(S.match(/:|\//))throw new te("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:O});if(ne.isKeyword(Oe["@id"]))throw new te("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:O});if("boolean"!=typeof se["@prefix"])throw new te("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:O});Oe._prefix=!0===se["@prefix"]}if("@direction"in se){const Ne=se["@direction"];if(null!==Ne&&"ltr"!==Ne&&"rtl"!==Ne)throw new te('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:O});Oe["@direction"]=Ne}if("@nest"in se){const Ne=se["@nest"];if(!g(Ne)||"@nest"!==Ne&&0===Ne.indexOf("@"))throw new te("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:O});Oe["@nest"]=Ne}const we=Oe["@id"];if("@context"===we||"@preserve"===we)throw new te("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:O});if(Se&&Se.protected&&!Te&&(_.protected[S]=!0,Oe.protected=!0,!L(Se,Oe)))throw new te("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:O,term:S})},ne.expandIri=(_,O,S,ue)=>X(_,O,S,void 0,void 0,ue),ne.getInitialContext=_=>{const O=JSON.stringify({processingMode:_.processingMode}),S=K.get(O);if(S)return S;const ue={processingMode:_.processingMode,mappings:new Map,inverse:null,getInverse:function j(){const Oe=this;if(Oe.inverse)return Oe.inverse;const Qe=Oe.inverse={},Xe=Oe.fastCurieMap={},we={},Ne=(Oe["@language"]||"@none").toLowerCase(),Pe=Oe["@direction"],Ve=Oe.mappings,fe=[...Ve.keys()].sort(ae);for(const Ee of fe){const $e=Ve.get(Ee);if(null===$e)continue;let ot=$e["@container"]||"@none";if(ot=[].concat(ot).sort().join(""),null===$e["@id"])continue;const Je=V($e["@id"]);for(const le of Je){let P=Qe[le];const E=ne.isKeyword(le);if(P)!E&&!$e._termHasColon&&we[le].push(Ee);else if(Qe[le]=P={},!E&&!$e._termHasColon){we[le]=[Ee];const ie={iri:le,terms:we[le]};le[0]in Xe?Xe[le[0]].push(ie):Xe[le[0]]=[ie]}if(P[ot]||(P[ot]={"@language":{},"@type":{},"@any":{}}),P=P[ot],se(Ee,P["@any"],"@none"),$e.reverse)se(Ee,P["@type"],"@reverse");else if("@none"===$e["@type"])se(Ee,P["@any"],"@none"),se(Ee,P["@language"],"@none"),se(Ee,P["@type"],"@none");else if("@type"in $e)se(Ee,P["@type"],$e["@type"]);else if("@language"in $e&&"@direction"in $e){const ie=$e["@language"],z=$e["@direction"];se(Ee,P["@language"],ie&&z?`${ie}_${z}`.toLowerCase():ie?ie.toLowerCase():z?`_${z}`:"@null")}else"@language"in $e?se(Ee,P["@language"],($e["@language"]||"@null").toLowerCase()):"@direction"in $e?se(Ee,P["@language"],$e["@direction"]?`_${$e["@direction"]}`:"@none"):Pe?(se(Ee,P["@language"],`_${Pe}`),se(Ee,P["@language"],"@none"),se(Ee,P["@type"],"@none")):(se(Ee,P["@language"],Ne),se(Ee,P["@language"],"@none"),se(Ee,P["@type"],"@none"))}}for(const Ee in Xe)Te(Xe,Ee,1);return Qe},clone:function Se(){const Oe={};return Oe.mappings=A.clone(this.mappings),Oe.clone=this.clone,Oe.inverse=null,Oe.getInverse=this.getInverse,Oe.protected=A.clone(this.protected),this.previousContext&&(Oe.previousContext=this.previousContext.clone()),Oe.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Oe["@base"]=this["@base"]),"@language"in this&&(Oe["@language"]=this["@language"]),"@vocab"in this&&(Oe["@vocab"]=this["@vocab"]),Oe},revertToPreviousContext:function Re(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===K.size&&K.clear(),K.set(O,ue),ue;function Te(Oe,Qe,Xe){const we=Oe[Qe],Ne=Oe[Qe]={};let Pe,Ve;for(const fe of we)Pe=fe.iri,Ve=Xe>=Pe.length?"":Pe[Xe],Ve in Ne?Ne[Ve].push(fe):Ne[Ve]=[fe];for(const fe in Ne)""!==fe&&Te(Ne,fe,Xe+1)}function se(Oe,Qe,Xe){Qe.hasOwnProperty(Xe)||(Qe[Xe]=Oe)}},ne.getContextValue=(_,O,S)=>{if(null===O)return"@context"===S?void 0:null;if(_.mappings.has(O)){const ue=_.mappings.get(O);if(w(S))return ue;if(ue.hasOwnProperty(S))return ue[S]}return"@language"===S&&S in _||"@direction"===S&&S in _?_[S]:"@context"!==S?null:void 0},ne.processingMode=(_,O)=>O.toString()>="1.1"?!_.processingMode||_.processingMode>="json-ld-"+O.toString():"json-ld-1.0"===_.processingMode,ne.isKeyword=_=>{if(!g(_)||"@"!==_[0])return!1;switch(_){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const{parseLinkHeader:A,buildHeaders:te}=C(3521),{LINK_HEADER_CONTEXT:B}=C(6982),ee=C(1874),g=C(4044),{prependBase:w}=C(2651),N=/(^|(\r\n))link:/i;Ue.exports=({secure:R,headers:W={},xhr:de}={headers:{}})=>{return W=te(W),(new g).wrapLoader(V);function V(K){return ae.apply(this,arguments)}function ae(){return ae=J(function*(K){if(0!==K.indexOf("http:")&&0!==K.indexOf("https:"))throw new ee('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:K});if(R&&0!==K.indexOf("https"))throw new ee('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:K});let oe;try{oe=yield function G(R,W,de){const I=new(R=R||XMLHttpRequest);return new Promise((V,ae)=>{I.onload=()=>V(I),I.onerror=K=>ae(K),I.open("GET",W,!0);for(const K in de)I.setRequestHeader(K,de[K]);I.send()})}(de,K,W)}catch(O){throw new ee("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:K,cause:O})}if(oe.status>=400)throw new ee("URL could not be dereferenced: "+oe.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:K,httpStatusCode:oe.status});let ne={contextUrl:null,documentUrl:K,document:oe.response},X=null;const L=oe.getResponseHeader("Content-Type");let _;if(N.test(oe.getAllResponseHeaders())&&(_=oe.getResponseHeader("Link")),_&&"application/ld+json"!==L){const O=A(_),S=O[B];if(Array.isArray(S))throw new ee("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:K});S&&(ne.contextUrl=S.target),X=O.alternate,X&&"application/ld+json"==X.type&&!(L||"").match(/^application\/(\w*\+)?json$/)&&(ne=yield V(w(K,X.target)))}return ne}),ae.apply(this,arguments)}}},3855:(Ue,ge,C)=>{"use strict";const J=C(1874),{isArray:A}=C(8254),{asArray:te}=C(3521),B={};function ee({event:w,handlers:N}){let G=!0;for(let R=0;G&&R<N.length;++R){G=!1;const W=N[R];if(A(W))G=ee({event:w,handlers:W});else if("function"==typeof W)W({event:w,next:()=>{G=!0}});else{if("object"!=typeof W)throw new J("Invalid event handler.","jsonld.InvalidEventHandler",{event:w});w.code in W?W[w.code]({event:w,next:()=>{G=!0}}):G=!0}}return G}Ue.exports=B,B.defaultEventHandler=null,B.setupEventHandler=({options:w={}})=>{const N=[].concat(w.safe?B.safeEventHandler:[],w.eventHandler?te(w.eventHandler):[],B.defaultEventHandler?B.defaultEventHandler:[]);return 0===N.length?null:N},B.handleEvent=({event:w,options:N})=>{ee({event:w,handlers:N.eventHandler})};const g=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);B.safeEventHandler=function({event:N,next:G}){if("warning"===N.level&&g.has(N.code))throw new J("Safe mode validation error.","jsonld.ValidationError",{event:N});G()},B.logEventHandler=function({event:N,next:G}){console.log(`EVENT: ${N.message}`,{event:N}),G()},B.logWarningEventHandler=function({event:N,next:G}){"warning"===N.level&&console.warn(`WARNING: ${N.message}`,{event:N}),G()},B.unhandledEventHandler=function({event:N}){throw new J("No handler for event.","jsonld.UnhandledEvent",{event:N})},B.setDefaultEventHandler=function({eventHandler:w}={}){B.defaultEventHandler=w?te(w):null}},3860:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(1874),{isArray:te,isObject:B,isEmptyObject:ee,isString:g,isUndefined:w}=C(8254),{isList:N,isValue:G,isGraph:R,isSubject:W}=C(543),{expandIri:de,getContextValue:I,isKeyword:V,process:ae,processingMode:K}=C(9611),{isAbsolute:oe}=C(2651),{REGEX_BCP47:ne,REGEX_KEYWORD:X,addValue:L,asArray:_,getValues:O,validateTypeValue:S}=C(3521),{handleEvent:ue}=C(3855),j={};function Te({value:we,count:Ne,options:Pe}){if(0===Ne||"@value"in we||"@list"in we||1===Ne&&"@id"in we){if(Pe.eventHandler){let Ve,fe;0===Ne?(Ve="empty object",fe="Dropping empty object."):"@value"in we?(Ve="object with only @value",fe="Dropping object with only @value."):"@list"in we?(Ve="object with only @list",fe="Dropping object with only @list."):1===Ne&&"@id"in we&&(Ve="object with only @id",fe="Dropping object with only @id."),ue({event:{type:["JsonLdEvent"],code:Ve,level:"warning",message:fe,details:{value:we}},options:Pe})}return null}return we}function se(we){return Se.apply(this,arguments)}function Se(){return(Se=J(function*({activeCtx:we,activeProperty:Ne,expandedActiveProperty:Pe,element:Ve,expandedParent:fe,options:Ee={},insideList:$e,typeKey:ot,typeScopedContext:Je}){const le=Object.keys(Ve).sort(),P=[];let E;const ie=Ve[ot]&&"@json"===de(we,te(Ve[ot])?Ve[ot][0]:Ve[ot],{vocab:!0},{...Ee,typeExpansion:!0});for(const z of le){let et,Ae=Ve[z];if("@context"===z)continue;const ce=de(we,z,{vocab:!0},Ee);if(null===ce||!oe(ce)&&!V(ce)){Ee.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:z,expandedProperty:ce}},options:Ee});continue}if(V(ce)){if("@reverse"===Pe)throw new A("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ae});if(ce in fe&&"@included"!==ce&&"@type"!==ce)throw new A("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ce})}if("@id"===ce){if(!g(Ae)){if(!Ee.isFrame)throw new A('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ae});if(B(Ae)){if(!ee(Ae))throw new A('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ae})}else{if(!te(Ae))throw new A('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ae});if(!Ae.every(M=>g(M)))throw new A('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ae})}}L(fe,"@id",_(Ae).map(M=>{if(g(M)){const Q=de(we,M,{base:!0},Ee);return Ee.eventHandler&&(null===Q?ue(null===M?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:M}},options:Ee}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:M}},options:Ee}):oe(Q)||ue({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:M,expandedId:Q}},options:Ee})),Q}return M}),{propertyIsArray:Ee.isFrame});continue}if("@type"===ce){B(Ae)&&(Ae=Object.fromEntries(Object.entries(Ae).map(([M,Q])=>[de(Je,M,{vocab:!0}),_(Q).map(he=>de(Je,he,{base:!0,vocab:!0},{...Ee,typeExpansion:!0}))]))),S(Ae,Ee.isFrame),L(fe,"@type",_(Ae).map(M=>{if(g(M)){const Q=de(Je,M,{base:!0,vocab:!0},{...Ee,typeExpansion:!0});return"@json"!==Q&&!oe(Q)&&Ee.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:M}},options:Ee}),Q}return M}),{propertyIsArray:!!Ee.isFrame});continue}if("@included"===ce&&K(we,1.1)){const M=_(yield j.expand({activeCtx:we,activeProperty:Ne,element:Ae,options:Ee}));if(!M.every(Q=>W(Q)))throw new A("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Ae});L(fe,"@included",M,{propertyIsArray:!0});continue}if("@graph"===ce&&!B(Ae)&&!te(Ae))throw new A('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ae});if("@value"===ce){E=Ae,ie&&K(we,1.1)?fe["@value"]=Ae:L(fe,"@value",Ae,{propertyIsArray:Ee.isFrame});continue}if("@language"===ce){if(null===Ae)continue;if(!g(Ae)&&!Ee.isFrame)throw new A('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ae});Ae=_(Ae).map(M=>g(M)?M.toLowerCase():M);for(const M of Ae)g(M)&&!M.match(ne)&&Ee.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:M}},options:Ee});L(fe,"@language",Ae,{propertyIsArray:Ee.isFrame});continue}if("@direction"===ce){if(!g(Ae)&&!Ee.isFrame)throw new A('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Ae});Ae=_(Ae);for(const M of Ae)if(g(M)&&"ltr"!==M&&"rtl"!==M)throw new A('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Ae});L(fe,"@direction",Ae,{propertyIsArray:Ee.isFrame});continue}if("@index"===ce){if(!g(Ae))throw new A('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ae});L(fe,"@index",Ae);continue}if("@reverse"===ce){if(!B(Ae))throw new A('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ae});if(et=yield j.expand({activeCtx:we,activeProperty:"@reverse",element:Ae,options:Ee}),"@reverse"in et)for(const Q in et["@reverse"])L(fe,Q,et["@reverse"][Q],{propertyIsArray:!0});let M=fe["@reverse"]||null;for(const Q in et){if("@reverse"===Q)continue;null===M&&(M=fe["@reverse"]={}),L(M,Q,[],{propertyIsArray:!0});const he=et[Q];for(let ze=0;ze<he.length;++ze){const Ye=he[ze];if(G(Ye)||N(Ye))throw new A('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:et});L(M,Q,Ye,{propertyIsArray:!0})}}continue}if("@nest"===ce){P.push(z);continue}let Z=we;const F=I(we,z,"@context");w(F)||(Z=yield ae({activeCtx:we,localCtx:F,propagate:!0,overrideProtected:!0,options:Ee}));const x=I(Z,z,"@container")||[];if(x.includes("@language")&&B(Ae))et=Oe(Z,Ae,I(Z,z,"@direction"),Ee);else if(x.includes("@index")&&B(Ae)){const M=x.includes("@graph"),Q=I(Z,z,"@index")||"@index",he="@index"!==Q&&de(we,Q,{vocab:!0},Ee);et=yield Qe({activeCtx:Z,options:Ee,activeProperty:z,value:Ae,asGraph:M,indexKey:Q,propertyIndex:he})}else if(x.includes("@id")&&B(Ae)){const M=x.includes("@graph");et=yield Qe({activeCtx:Z,options:Ee,activeProperty:z,value:Ae,asGraph:M,indexKey:"@id"})}else if(x.includes("@type")&&B(Ae))et=yield Qe({activeCtx:Z.revertToPreviousContext(),options:Ee,activeProperty:z,value:Ae,asGraph:!1,indexKey:"@type"});else{const M="@list"===ce;if(M||"@set"===ce){let Q=Ne;M&&"@graph"===Pe&&(Q=null),et=yield j.expand({activeCtx:Z,activeProperty:Q,element:Ae,options:Ee,insideList:M})}else et="@json"===I(we,z,"@type")?{"@type":"@json","@value":Ae}:yield j.expand({activeCtx:Z,activeProperty:z,element:Ae,options:Ee,insideList:!1})}if(null!==et||"@value"===ce){if("@list"!==ce&&!N(et)&&x.includes("@list")&&(et={"@list":_(et)}),x.includes("@graph")&&!x.some(M=>"@id"===M||"@index"===M)){et=_(et);const M=Object.keys(et[0]).length;if(!Ee.isFrame&&null===Te({value:et[0],count:M,options:Ee}))continue;et=et.map(Q=>({"@graph":_(Q)}))}if(Z.mappings.has(z)&&Z.mappings.get(z).reverse){const M=fe["@reverse"]=fe["@reverse"]||{};et=_(et);for(let Q=0;Q<et.length;++Q){const he=et[Q];if(G(he)||N(he))throw new A('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:et});L(M,ce,he,{propertyIsArray:!0})}continue}L(fe,ce,et,{propertyIsArray:!0})}}if("@value"in fe&&("@json"!==fe["@type"]||!K(we,1.1))&&(B(E)||te(E))&&!Ee.isFrame)throw new A('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:E});for(const z of P){const Ae=te(Ve[z])?Ve[z]:[Ve[z]];for(const et of Ae){if(!B(et)||Object.keys(et).some(ce=>"@value"===de(we,ce,{vocab:!0},Ee)))throw new A("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:et});yield se({activeCtx:we,activeProperty:Ne,expandedActiveProperty:Pe,element:et,expandedParent:fe,options:Ee,insideList:$e,typeScopedContext:Je,typeKey:ot})}}})).apply(this,arguments)}function Re({activeCtx:we,activeProperty:Ne,value:Pe,options:Ve}){if(null==Pe)return null;const fe=de(we,Ne,{vocab:!0},Ve);if("@id"===fe)return de(we,Pe,{base:!0},Ve);if("@type"===fe)return de(we,Pe,{vocab:!0,base:!0},{...Ve,typeExpansion:!0});const Ee=I(we,Ne,"@type");if(("@id"===Ee||"@graph"===fe)&&g(Pe)){const ot=de(we,Pe,{base:!0},Ve);return null===ot&&Pe.match(X)&&Ve.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ne}},options:Ve}),{"@id":ot}}if("@vocab"===Ee&&g(Pe))return{"@id":de(we,Pe,{vocab:!0,base:!0},Ve)};if(V(fe))return Pe;const $e={};if(Ee&&!["@id","@vocab","@none"].includes(Ee))$e["@type"]=Ee;else if(g(Pe)){const ot=I(we,Ne,"@language");null!==ot&&($e["@language"]=ot);const Je=I(we,Ne,"@direction");null!==Je&&($e["@direction"]=Je)}return["boolean","number","string"].includes(typeof Pe)||(Pe=Pe.toString()),$e["@value"]=Pe,$e}function Oe(we,Ne,Pe,Ve){const fe=[],Ee=Object.keys(Ne).sort();for(const $e of Ee){const ot=de(we,$e,{vocab:!0},Ve);let Je=Ne[$e];te(Je)||(Je=[Je]);for(const le of Je){if(null===le)continue;if(!g(le))throw new A("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});const P={"@value":le};"@none"!==ot&&($e.match(ne)||Ve.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:$e}},options:Ve}),P["@language"]=$e.toLowerCase()),Pe&&(P["@direction"]=Pe),fe.push(P)}}return fe}function Qe(we){return Xe.apply(this,arguments)}function Xe(){return(Xe=J(function*({activeCtx:we,options:Ne,activeProperty:Pe,value:Ve,asGraph:fe,indexKey:Ee,propertyIndex:$e}){const ot=[],Je=Object.keys(Ve).sort(),le="@type"===Ee;for(let P of Je){if(le){const z=I(we,P,"@context");w(z)||(we=yield ae({activeCtx:we,localCtx:z,propagate:!1,options:Ne}))}let ie,E=Ve[P];te(E)||(E=[E]),E=yield j.expand({activeCtx:we,activeProperty:Pe,element:E,options:Ne,insideList:!1,insideIndex:!0}),ie=$e?"@none"===P?"@none":Re({activeCtx:we,activeProperty:Ee,value:P,options:Ne}):de(we,P,{vocab:!0},Ne),"@id"===Ee?P=de(we,P,{base:!0},Ne):le&&(P=ie);for(let z of E){if(fe&&!R(z)&&(z={"@graph":[z]}),"@type"===Ee)"@none"===ie||(z["@type"]=z["@type"]?[P].concat(z["@type"]):[P]);else{if(G(z)&&!["@language","@type","@index"].includes(Ee))throw new A(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ee}".`,"jsonld.SyntaxError",{code:"invalid value object",value:z});$e?"@none"!==ie&&L(z,$e,ie,{propertyIsArray:!0,prependValue:!0}):"@none"!==ie&&!(Ee in z)&&(z[Ee]=P)}ot.push(z)}}return ot})).apply(this,arguments)}Ue.exports=j,j.expand=function(){var we=J(function*({activeCtx:Ne,activeProperty:Pe=null,element:Ve,options:fe={},insideList:Ee=!1,insideIndex:$e=!1,typeScopedContext:ot=null}){if(null==Ve)return null;if("@default"===Pe&&(fe=Object.assign({},fe,{isFrame:!1})),!te(Ve)&&!B(Ve))return Ee||null!==Pe&&"@graph"!==de(Ne,Pe,{vocab:!0},fe)?Re({activeCtx:Ne,activeProperty:Pe,value:Ve,options:fe}):(fe.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Ve}},options:fe}),null);if(te(Ve)){let et=[];const ce=I(Ne,Pe,"@container")||[];Ee=Ee||ce.includes("@list");for(let Z=0;Z<Ve.length;++Z){let F=yield j.expand({activeCtx:Ne,activeProperty:Pe,element:Ve[Z],options:fe,insideIndex:$e,typeScopedContext:ot});Ee&&te(F)&&(F={"@list":F}),null!==F&&(te(F)?et=et.concat(F):et.push(F))}return et}const Je=de(Ne,Pe,{vocab:!0},fe),le=I(Ne,Pe,"@context");ot=ot||(Ne.previousContext?Ne:null);let P=Object.keys(Ve).sort(),E=!$e;if(E&&ot&&P.length<=2&&!P.includes("@context"))for(const et of P){const ce=de(ot,et,{vocab:!0},fe);if("@value"===ce){E=!1,Ne=ot;break}if("@id"===ce&&1===P.length){E=!1;break}}E&&(Ne=Ne.revertToPreviousContext()),w(le)||(Ne=yield ae({activeCtx:Ne,localCtx:le,propagate:!0,overrideProtected:!0,options:fe})),"@context"in Ve&&(Ne=yield ae({activeCtx:Ne,localCtx:Ve["@context"],options:fe})),ot=Ne;let ie=null;for(const et of P)if("@type"===de(Ne,et,{vocab:!0},fe)){ie=ie||et;const Z=Ve[et],F=Array.isArray(Z)?Z.length>1?Z.slice().sort():Z:[Z];for(const x of F){const M=I(ot,x,"@context");w(M)||(Ne=yield ae({activeCtx:Ne,localCtx:M,options:fe,propagate:!1}))}}let z={};yield se({activeCtx:Ne,activeProperty:Pe,expandedActiveProperty:Je,element:Ve,expandedParent:z,options:fe,insideList:Ee,typeKey:ie,typeScopedContext:ot}),P=Object.keys(z);let Ae=P.length;if("@value"in z){if("@type"in z&&("@language"in z||"@direction"in z))throw new A('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:z});let et=Ae-1;if("@type"in z&&(et-=1),"@index"in z&&(et-=1),"@language"in z&&(et-=1),"@direction"in z&&(et-=1),0!==et)throw new A('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:z});const ce=null===z["@value"]?[]:_(z["@value"]),Z=O(z,"@type");if(!K(Ne,1.1)||!Z.includes("@json")||1!==Z.length)if(0===ce.length)fe.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:z}},options:fe}),z=null;else{if(!ce.every(F=>g(F)||ee(F))&&"@language"in z)throw new A("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:z});if(!Z.every(F=>oe(F)&&!(g(F)&&0===F.indexOf("_:"))||ee(F)))throw new A('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:z})}}else if("@type"in z&&!te(z["@type"]))z["@type"]=[z["@type"]];else if("@set"in z||"@list"in z){if(Ae>1&&(2!==Ae||!("@index"in z)))throw new A('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:z});"@set"in z&&(z=z["@set"],P=Object.keys(z),Ae=P.length)}else 1===Ae&&"@language"in z&&(fe.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:z}},options:fe}),z=null);return B(z)&&!fe.keepFreeFloatingNodes&&!Ee&&(null===Pe||"@graph"===Je||(I(Ne,Pe,"@container")||[]).includes("@graph"))&&(z=Te({value:z,count:Ae,options:fe})),z});return function(Ne){return we.apply(this,arguments)}}()},8295:(Ue,ge,C)=>{"use strict";const{isSubjectReference:J}=C(543),{createMergedNodeMap:A}=C(9783),te={};Ue.exports=te,te.flatten=B=>{const ee=A(B),g=[],w=Object.keys(ee).sort();for(let N=0;N<w.length;++N){const G=ee[w[N]];J(G)||g.push(G)}return g}},9193:(Ue,ge,C)=>{"use strict";const{isKeyword:J}=C(9611),A=C(543),te=C(8254),B=C(3521),ee=C(2651),g=C(1874),{createNodeMap:w,mergeNodeMapGraphs:N}=C(9783),G={};function R(_){const O={};for(const S in _)void 0!==_[S]&&(O["@"+S]=[_[S]]);return[O]}function W(_,O,S){for(let ue=S.length-1;ue>=0;--ue){const j=S[ue];if(j.graph===O&&j.subject["@id"]===_["@id"])return!0}return!1}function de(_,O,S){const ue="@"+S;let j=ue in _?_[ue][0]:O[S];if("embed"===S)if(!0===j)j="@once";else if(!1===j)j="@never";else if("@always"!==j&&"@never"!==j&&"@link"!==j&&"@first"!==j&&"@last"!==j&&"@once"!==j)throw new g("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:_});return j}function I(_){if(!te.isArray(_)||1!==_.length||!te.isObject(_[0]))throw new g("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:_});if("@id"in _[0])for(const O of B.asArray(_[0]["@id"]))if(!te.isObject(O)&&!ee.isAbsolute(O)||te.isString(O)&&0===O.indexOf("_:"))throw new g("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:_});if("@type"in _[0])for(const O of B.asArray(_[0]["@type"]))if(!te.isObject(O)&&!ee.isAbsolute(O)&&"@json"!==O||te.isString(O)&&0===O.indexOf("_:"))throw new g("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:_})}function ae(_,O,S,ue){let j=!0,Te=!1;for(const se in S){let Se=!1;const Re=B.getValues(O,se),Oe=0===B.getValues(S,se).length;if("@id"===se){if(te.isEmptyObject(S["@id"][0]||{})?Se=!0:S["@id"].length>=0&&(Se=S["@id"].includes(Re[0])),!ue.requireAll)return Se}else if("@type"===se){if(j=!1,Oe){if(Re.length>0)return!1;Se=!0}else if(1===S["@type"].length&&te.isEmptyObject(S["@type"][0]))Se=Re.length>0;else for(const Qe of S["@type"])Se=!(!te.isObject(Qe)||!("@default"in Qe))||Se||Re.some(Xe=>Xe===Qe);if(!ue.requireAll)return Se}else{if(J(se))continue;{const Qe=B.getValues(S,se)[0];let Xe=!1;if(Qe&&(I([Qe]),Xe="@default"in Qe),j=!1,0===Re.length&&Xe)continue;if(Re.length>0&&Oe)return!1;if(void 0===Qe){if(Re.length>0)return!1;Se=!0}else if(A.isList(Qe)){const we=Qe["@list"][0];if(A.isList(Re[0])){const Ne=Re[0]["@list"];A.isValue(we)?Se=Ne.some(Pe=>L(we,Pe)):(A.isSubject(we)||A.isSubjectReference(we))&&(Se=Ne.some(Pe=>X(_,we,Pe,ue)))}}else Se=A.isValue(Qe)?Re.some(we=>L(Qe,we)):A.isSubjectReference(Qe)?Re.some(we=>X(_,Qe,we,ue)):!!te.isObject(Qe)&&Re.length>0}}if(!Se&&ue.requireAll)return!1;Te=Te||Se}return j||Te}function K(_,O){const S=_.uniqueEmbeds[_.graph],ue=S[O],j=ue.parent,Te=ue.property,se={"@id":O};if(te.isArray(j)){for(let Re=0;Re<j.length;++Re)if(B.compareValues(j[Re],se)){j[Re]=se;break}}else{const Re=te.isArray(j[Te]);B.removeValue(j,Te,se,{propertyIsArray:Re}),B.addValue(j,Te,se,{propertyIsArray:Re})}const Se=Re=>{const Oe=Object.keys(S);for(const Qe of Oe)Qe in S&&te.isObject(S[Qe].parent)&&S[Qe].parent["@id"]===Re&&(delete S[Qe],Se(Qe))};Se(O)}function oe(_,O){if(te.isArray(_))return _.map(S=>oe(S,O));if(te.isObject(_)){if("@preserve"in _)return _["@preserve"][0];if(A.isValue(_))return _;if(A.isList(_))return _["@list"]=oe(_["@list"],O),_;if("@id"in _){const S=_["@id"];if(O.link.hasOwnProperty(S)){const ue=O.link[S].indexOf(_);if(-1!==ue)return O.link[S][ue];O.link[S].push(_)}else O.link[S]=[_]}for(const S in _)"@id"===S&&O.bnodesToClear.includes(_[S])?delete _["@id"]:_[S]=oe(_[S],O)}return _}function ne(_,O,S){te.isObject(_)?B.addValue(_,O,S,{propertyIsArray:!0}):_.push(S)}function X(_,O,S,ue){if(!("@id"in S))return!1;const j=_.subjects[S["@id"]];return j&&ae(_,j,O,ue)}function L(_,O){const S=O["@value"],ue=O["@type"],j=O["@language"],Te=_["@value"]?te.isArray(_["@value"])?_["@value"]:[_["@value"]]:[],se=_["@type"]?te.isArray(_["@type"])?_["@type"]:[_["@type"]]:[],Se=_["@language"]?te.isArray(_["@language"])?_["@language"]:[_["@language"]]:[];return 0===Te.length&&0===se.length&&0===Se.length||!(!Te.includes(S)&&!te.isEmptyObject(Te[0])||!(!ue&&0===se.length||se.includes(ue)||ue&&te.isEmptyObject(se[0]))||!(!j&&0===Se.length||Se.includes(j)||j&&te.isEmptyObject(Se[0])))}Ue.exports=G,G.frameMergedOrDefault=(_,O,S)=>{const ue={options:S,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},j=new B.IdentifierIssuer("_:b");w(_,ue.graphMap,"@default",j),S.merged&&(ue.graphMap["@merged"]=N(ue.graphMap),ue.graph="@merged"),ue.subjects=ue.graphMap[ue.graph];const Te=[];return G.frame(ue,Object.keys(ue.subjects).sort(),O,Te),S.pruneBlankNodeIdentifiers&&(S.bnodesToClear=Object.keys(ue.bnodeMap).filter(se=>1===ue.bnodeMap[se].length)),S.link={},oe(Te,S)},G.frame=(_,O,S,ue,j=null)=>{I(S);const Te=_.options,se={embed:de(S=S[0],Te,"embed"),explicit:de(S,Te,"explicit"),requireAll:de(S,Te,"requireAll")};_.link.hasOwnProperty(_.graph)||(_.link[_.graph]={});const Se=_.link[_.graph],Re=function V(_,O,S,ue){const j={};for(const Te of O){const se=_.graphMap[_.graph][Te];ae(_,se,S,ue)&&(j[Te]=se)}return j}(_,O,S,se),Oe=Object.keys(Re).sort();for(const Qe of Oe){const Xe=Re[Qe];if(null===j?_.uniqueEmbeds={[_.graph]:{}}:_.uniqueEmbeds[_.graph]=_.uniqueEmbeds[_.graph]||{},"@link"===se.embed&&Qe in Se){ne(ue,j,Se[Qe]);continue}const we={"@id":Qe};if(0===Qe.indexOf("_:")&&B.addValue(_.bnodeMap,Qe,we,{propertyIsArray:!0}),Se[Qe]=we,("@first"===se.embed||"@last"===se.embed)&&_.is11)throw new g("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:S});if(_.embedded||!_.uniqueEmbeds[_.graph].hasOwnProperty(Qe)){if(_.embedded&&("@never"===se.embed||W(Xe,_.graph,_.subjectStack))){ne(ue,j,we);continue}if(_.embedded&&("@first"==se.embed||"@once"==se.embed)&&_.uniqueEmbeds[_.graph].hasOwnProperty(Qe)){ne(ue,j,we);continue}if("@last"===se.embed&&Qe in _.uniqueEmbeds[_.graph]&&K(_,Qe),_.uniqueEmbeds[_.graph][Qe]={parent:ue,property:j},_.subjectStack.push({subject:Xe,graph:_.graph}),Qe in _.graphMap){let Ne=!1,Pe=null;"@graph"in S?(Pe=S["@graph"][0],Ne=!("@merged"===Qe||"@default"===Qe),te.isObject(Pe)||(Pe={})):(Ne="@merged"!==_.graph,Pe={}),Ne&&G.frame({..._,graph:Qe,embedded:!1},Object.keys(_.graphMap[Qe]).sort(),[Pe],we,"@graph")}"@included"in S&&G.frame({..._,embedded:!1},O,S["@included"],we,"@included");for(const Ne of Object.keys(Xe).sort())if(J(Ne)){if(we[Ne]=B.clone(Xe[Ne]),"@type"===Ne)for(const Pe of Xe["@type"])0===Pe.indexOf("_:")&&B.addValue(_.bnodeMap,Pe,we,{propertyIsArray:!0})}else if(!se.explicit||Ne in S)for(const Pe of Xe[Ne]){const Ve=Ne in S?S[Ne]:R(se);if(A.isList(Pe)){const fe=S[Ne]&&S[Ne][0]&&S[Ne][0]["@list"]?S[Ne][0]["@list"]:R(se),Ee={"@list":[]};ne(we,Ne,Ee);const $e=Pe["@list"];for(const ot of $e)A.isSubjectReference(ot)?G.frame({..._,embedded:!0},[ot["@id"]],fe,Ee,"@list"):ne(Ee,"@list",B.clone(ot))}else A.isSubjectReference(Pe)?G.frame({..._,embedded:!0},[Pe["@id"]],Ve,we,Ne):L(Ve[0],Pe)&&ne(we,Ne,B.clone(Pe))}for(const Ne of Object.keys(S).sort()){if("@type"===Ne){if(!te.isObject(S[Ne][0])||!("@default"in S[Ne][0]))continue}else if(J(Ne))continue;const Pe=S[Ne][0]||{};if(!de(Pe,Te,"omitDefault")&&!(Ne in we)){let fe="@null";"@default"in Pe&&(fe=B.clone(Pe["@default"])),te.isArray(fe)||(fe=[fe]),we[Ne]=[{"@preserve":fe}]}}for(const Ne of Object.keys(S["@reverse"]||{}).sort()){const Pe=S["@reverse"][Ne];for(const Ve of Object.keys(_.subjects))B.getValues(_.subjects[Ve],Ne).some(Ee=>Ee["@id"]===Qe)&&(we["@reverse"]=we["@reverse"]||{},B.addValue(we["@reverse"],Ne,[],{propertyIsArray:!0}),G.frame({..._,embedded:!0},[Ve],Pe,we["@reverse"][Ne],j))}ne(ue,j,we),_.subjectStack.pop()}}},G.cleanupNull=(_,O)=>{if(te.isArray(_))return _.map(ue=>G.cleanupNull(ue,O)).filter(ue=>ue);if("@null"===_)return null;if(te.isObject(_)){if("@id"in _){const S=_["@id"];if(O.link.hasOwnProperty(S)){const ue=O.link[S].indexOf(_);if(-1!==ue)return O.link[S][ue];O.link[S].push(_)}else O.link[S]=[_]}for(const S in _)_[S]=G.cleanupNull(_[S],O)}return _}},9767:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(1874),te=C(543),B=C(8254),{REGEX_BCP47:ee,addValue:g}=C(3521),{handleEvent:w}=C(3855),{RDF_LIST:N,RDF_FIRST:G,RDF_REST:R,RDF_NIL:W,RDF_TYPE:de,RDF_JSON_LITERAL:I,XSD_BOOLEAN:V,XSD_DOUBLE:ae,XSD_INTEGER:K,XSD_STRING:oe}=C(6982),ne={};function X(L,_,O,S){if(L.termType.endsWith("Node"))return{"@id":L.value};const ue={"@value":L.value};if(L.language)L.language.match(ee)||S.eventHandler&&w({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:L.language}},options:S}),ue["@language"]=L.language;else{let j=L.datatype.value;if(j||(j=oe),j===I){j="@json";try{ue["@value"]=JSON.parse(ue["@value"])}catch(Te){throw new A("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:ue["@value"],cause:Te})}}if(_){if(j===V)"true"===ue["@value"]?ue["@value"]=!0:"false"===ue["@value"]&&(ue["@value"]=!1);else if(B.isNumeric(ue["@value"]))if(j===K){const Te=parseInt(ue["@value"],10);Te.toFixed(0)===ue["@value"]&&(ue["@value"]=Te)}else j===ae&&(ue["@value"]=parseFloat(ue["@value"]));[V,K,ae,oe].includes(j)||(ue["@type"]=j)}else if("i18n-datatype"===O&&j.startsWith("https://www.w3.org/ns/i18n#")){const[,Te,se]=j.split(/[#_]/);Te.length>0&&(ue["@language"]=Te,Te.match(ee)||S.eventHandler&&w({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Te}},options:S})),ue["@direction"]=se}else j!==oe&&(ue["@type"]=j)}return ue}Ue.exports=ne,ne.fromRDF=function(){var L=J(function*(_,O){const S={},ue={"@default":S},j={},{useRdfType:Te=!1,useNativeTypes:se=!1,rdfDirection:Se=null}=O;for(const Qe of _){const Xe="DefaultGraph"===Qe.graph.termType?"@default":Qe.graph.value;Xe in ue||(ue[Xe]={}),"@default"!==Xe&&!(Xe in S)&&(S[Xe]={"@id":Xe});const we=ue[Xe],Ne=Qe.subject.value,Pe=Qe.predicate.value,Ve=Qe.object;Ne in we||(we[Ne]={"@id":Ne});const fe=we[Ne],Ee=Ve.termType.endsWith("Node");if(Ee&&!(Ve.value in we)&&(we[Ve.value]={"@id":Ve.value}),Pe===de&&!Te&&Ee){g(fe,"@type",Ve.value,{propertyIsArray:!0});continue}const $e=X(Ve,se,Se,O);if(g(fe,Pe,$e,{propertyIsArray:!0}),Ee)if(Ve.value===W){const ot=we[Ve.value];"usages"in ot||(ot.usages=[]),ot.usages.push({node:fe,property:Pe,value:$e})}else j[Ve.value]=!(Ve.value in j)&&{node:fe,property:Pe,value:$e}}for(const Qe in ue){const Xe=ue[Qe];if(!(W in Xe))continue;const we=Xe[W];if(we.usages){for(let Ne of we.usages){let Pe=Ne.node,Ve=Ne.property,fe=Ne.value;const Ee=[],$e=[];let ot=Object.keys(Pe).length;for(;Ve===R&&B.isObject(j[Pe["@id"]])&&B.isArray(Pe[G])&&1===Pe[G].length&&B.isArray(Pe[R])&&1===Pe[R].length&&(3===ot||4===ot&&B.isArray(Pe["@type"])&&1===Pe["@type"].length&&Pe["@type"][0]===N)&&(Ee.push(Pe[G][0]),$e.push(Pe["@id"]),Ne=j[Pe["@id"]],Pe=Ne.node,Ve=Ne.property,fe=Ne.value,ot=Object.keys(Pe).length,te.isBlankNode(Pe)););delete fe["@id"],fe["@list"]=Ee.reverse();for(const Je of $e)delete Xe[Je]}delete we.usages}}const Re=[],Oe=Object.keys(S).sort();for(const Qe of Oe){const Xe=S[Qe];if(Qe in ue){const we=Xe["@graph"]=[],Ne=ue[Qe],Pe=Object.keys(Ne).sort();for(const Ve of Pe){const fe=Ne[Ve];te.isSubjectReference(fe)||we.push(fe)}}te.isSubjectReference(Xe)||Re.push(Xe)}return Re});return function(_,O){return L.apply(this,arguments)}}()},543:(Ue,ge,C)=>{"use strict";const J=C(8254),A={};Ue.exports=A,A.isSubject=te=>!(!J.isObject(te)||"@value"in te||"@set"in te||"@list"in te)&&(Object.keys(te).length>1||!("@id"in te)),A.isSubjectReference=te=>J.isObject(te)&&1===Object.keys(te).length&&"@id"in te,A.isValue=te=>J.isObject(te)&&"@value"in te,A.isList=te=>J.isObject(te)&&"@list"in te,A.isGraph=te=>J.isObject(te)&&"@graph"in te&&1===Object.keys(te).filter(B=>"@id"!==B&&"@index"!==B).length,A.isSimpleGraph=te=>A.isGraph(te)&&!("@id"in te),A.isBlankNode=te=>{if(J.isObject(te)){if("@id"in te){const B=te["@id"];return!J.isString(B)||0===B.indexOf("_:")}return 0===Object.keys(te).length||!("@value"in te||"@set"in te||"@list"in te)}return!1}},7661:(Ue,ge,C)=>{var J=C(7156).default;const A=C(1986),te=C(8924),B=C(3521),ee=C(4198),g=B.IdentifierIssuer,w=C(1874),N=C(1072),G=C(7260),{expand:R}=C(3860),{flatten:W}=C(8295),{fromRDF:de}=C(9767),{toRDF:I}=C(240),{frameMergedOrDefault:V,cleanupNull:ae}=C(9193),{isArray:K,isObject:oe,isString:ne}=C(8254),{isSubjectReference:X}=C(543),{expandIri:L,getInitialContext:_,process:O,processingMode:S}=C(9611),{compact:ue,compactIri:j}=C(8809),{createNodeMap:Te,createMergedNodeMap:se,mergeNodeMaps:Se}=C(9783),{logEventHandler:Re,logWarningEventHandler:Oe,safeEventHandler:Qe,setDefaultEventHandler:Xe,setupEventHandler:we,strictEventHandler:Ne,unhandledEventHandler:Pe}=C(3855),Ve=function(Ee){const $e={},Je=new N({max:100});function le(P,{documentLoader:E=Ee.documentLoader,...ie}){if(P&&"compactionMap"in P)throw new w('"compactionMap" not supported.',"jsonld.OptionsError");if(P&&"expansionMap"in P)throw new w('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:E},ie,P,{eventHandler:we({options:P})})}return Ee.compact=function(){var P=J(function*(E,ie,z){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ie)throw new w("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===E)return null;let Ae;(z=le(z,{base:ne(E)?E:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new g("_:b"),contextResolver:new ee({sharedCache:Je})})).link&&(z.skipExpansion=!0),z.compactToRelative||delete z.base,Ae=z.skipExpansion?E:yield Ee.expand(E,z);const et=yield Ee.processContext(_(z),ie,z);let ce=yield ue({activeCtx:et,element:Ae,options:z});z.compactArrays&&!z.graph&&K(ce)?1===ce.length?ce=ce[0]:0===ce.length&&(ce={}):z.graph&&oe(ce)&&(ce=[ce]),oe(ie)&&"@context"in ie&&(ie=ie["@context"]),ie=B.clone(ie),K(ie)||(ie=[ie]);const Z=ie;ie=[];for(let x=0;x<Z.length;++x)(!oe(Z[x])||Object.keys(Z[x]).length>0)&&ie.push(Z[x]);const F=ie.length>0;if(1===ie.length&&(ie=ie[0]),K(ce)){const x=j({activeCtx:et,iri:"@graph",relativeTo:{vocab:!0}}),M=ce;ce={},F&&(ce["@context"]=ie),ce[x]=M}else if(oe(ce)&&F){const x=ce;ce={"@context":ie};for(const M in x)ce[M]=x[M]}return ce});return function(E,ie,z){return P.apply(this,arguments)}}(),Ee.expand=function(){var P=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const z={},Ae=[];if("expandContext"in(ie=le(ie,{keepFreeFloatingNodes:!1,contextResolver:new ee({sharedCache:Je})}))){const F=B.clone(ie.expandContext);z.expandContext=oe(F)&&"@context"in F?F:{"@context":F},Ae.push(z.expandContext)}let et;if(ne(E)){const F=yield Ee.get(E,ie);et=F.documentUrl,z.input=F.document,F.contextUrl&&(z.remoteContext={"@context":F.contextUrl},Ae.push(z.remoteContext))}else z.input=B.clone(E);"base"in ie||(ie.base=et||"");let ce=_(ie);for(const F of Ae)ce=yield O({activeCtx:ce,localCtx:F,options:ie});let Z=yield R({activeCtx:ce,element:z.input,options:ie});return oe(Z)&&"@graph"in Z&&1===Object.keys(Z).length?Z=Z["@graph"]:null===Z&&(Z=[]),K(Z)||(Z=[Z]),Z});return function(E,ie){return P.apply(this,arguments)}}(),Ee.flatten=function(){var P=J(function*(E,ie,z){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ie="function"==typeof ie?null:ie||null,z=le(z,{base:ne(E)?E:"",contextResolver:new ee({sharedCache:Je})});const Ae=yield Ee.expand(E,z),et=W(Ae);return null===ie?et:(z.graph=!0,z.skipExpansion=!0,yield Ee.compact(et,ie,z))});return function(E,ie,z){return P.apply(this,arguments)}}(),Ee.frame=function(){var P=J(function*(E,ie,z){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(z=le(z,{base:ne(E)?E:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ee({sharedCache:Je})}),ne(ie)){const he=yield Ee.get(ie,z);if(ie=he.document,he.contextUrl){let ze=ie["@context"];ze?K(ze)?ze.push(he.contextUrl):ze=[ze,he.contextUrl]:ze=he.contextUrl,ie["@context"]=ze}}const Ae=ie&&ie["@context"]||{},et=yield Ee.processContext(_(z),Ae,z);z.hasOwnProperty("omitGraph")||(z.omitGraph=S(et,1.1)),z.hasOwnProperty("pruneBlankNodeIdentifiers")||(z.pruneBlankNodeIdentifiers=S(et,1.1));const ce=yield Ee.expand(E,z),Z={...z};Z.isFrame=!0,Z.keepFreeFloatingNodes=!0;const F=yield Ee.expand(ie,Z),x=Object.keys(ie).map(he=>L(et,he,{vocab:!0}));Z.merged=!x.includes("@graph"),Z.is11=S(et,1.1);const M=V(ce,F,Z);Z.graph=!z.omitGraph,Z.skipExpansion=!0,Z.link={},Z.framing=!0;let Q=yield Ee.compact(M,Ae,Z);return Z.link={},Q=ae(Q,Z),Q});return function(E,ie,z){return P.apply(this,arguments)}}(),Ee.link=function(){var P=J(function*(E,ie,z){const Ae={};return ie&&(Ae["@context"]=ie),Ae["@embed"]="@link",Ee.frame(E,Ae,z)});return function(E,ie,z){return P.apply(this,arguments)}}(),Ee.normalize=Ee.canonize=function(){var P=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ie=le(ie,{base:ne(E)?E:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new ee({sharedCache:Je})}))){if("application/n-quads"!==ie.inputFormat&&"application/nquads"!==ie.inputFormat)throw new w("Unknown canonicalization input format.","jsonld.CanonizeError");const et=G.parse(E);return A.canonize(et,ie)}const z={...ie};delete z.format,z.produceGeneralizedRdf=!1;const Ae=yield Ee.toRDF(E,z);return A.canonize(Ae,ie)});return function(E,ie){return P.apply(this,arguments)}}(),Ee.fromRDF=function(){var P=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ie=le(ie,{format:ne(E)?"application/n-quads":void 0});const{format:z}=ie;let{rdfParser:Ae}=ie;if(z){if(Ae=Ae||$e[z],!Ae)throw new w("Unknown input format.","jsonld.UnknownFormat",{format:z})}else Ae=()=>E;const et=yield Ae(E);return de(et,ie)});return function(E,ie){return P.apply(this,arguments)}}(),Ee.toRDF=function(){var P=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let z;z=(ie=le(ie,{base:ne(E)?E:"",skipExpansion:!1,contextResolver:new ee({sharedCache:Je})})).skipExpansion?E:yield Ee.expand(E,ie);const Ae=I(z,ie);if(ie.format){if("application/n-quads"===ie.format||"application/nquads"===ie.format)return G.serialize(Ae);throw new w("Unknown output format.","jsonld.UnknownFormat",{format:ie.format})}return Ae});return function(E,ie){return P.apply(this,arguments)}}(),Ee.createNodeMap=function(){var P=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ie=le(ie,{base:ne(E)?E:"",contextResolver:new ee({sharedCache:Je})});const z=yield Ee.expand(E,ie);return se(z,ie)});return function(E,ie){return P.apply(this,arguments)}}(),Ee.merge=function(){var P=J(function*(E,ie,z){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!K(E))throw new TypeError('Could not merge, "docs" must be an array.');ie="function"==typeof ie?null:ie||null,z=le(z,{contextResolver:new ee({sharedCache:Je})});const Ae=yield Promise.all(E.map(he=>{const ze={...z};return Ee.expand(he,ze)}));let et=!0;"mergeNodes"in z&&(et=z.mergeNodes);const ce=z.issuer||new g("_:b"),Z={"@default":{}};for(let he=0;he<Ae.length;++he){const ze=B.relabelBlankNodes(Ae[he],{issuer:new g("_:b"+he+"-")}),Ye=et||0===he?Z:{"@default":{}};if(Te(ze,Ye,"@default",ce),Ye!==Z)for(const dt in Ye){const vt=Ye[dt];if(!(dt in Z)){Z[dt]=vt;continue}const mt=Z[dt];for(const zt in vt)zt in mt||(mt[zt]=vt[zt])}}const F=Se(Z),x=[],M=Object.keys(F).sort();for(let he=0;he<M.length;++he){const ze=F[M[he]];X(ze)||x.push(ze)}return null===ie?x:(z.graph=!0,z.skipExpansion=!0,yield Ee.compact(x,ie,z))});return function(E,ie,z){return P.apply(this,arguments)}}(),Object.defineProperty(Ee,"documentLoader",{get:()=>Ee._documentLoader,set:P=>Ee._documentLoader=P}),Ee.documentLoader=function(){var P=J(function*(E){throw new w("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:E})});return function(E){return P.apply(this,arguments)}}(),Ee.get=function(){var P=J(function*(E,ie){let z;z="function"==typeof ie.documentLoader?ie.documentLoader:Ee.documentLoader;const Ae=yield z(E);try{if(!Ae.document)throw new w("No remote document found at the given URL.","jsonld.NullRemoteDocument");ne(Ae.document)&&(Ae.document=JSON.parse(Ae.document))}catch(et){throw new w("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:et,remoteDoc:Ae})}return Ae});return function(E,ie){return P.apply(this,arguments)}}(),Ee.processContext=function(){var P=J(function*(E,ie,z){return z=le(z,{base:"",contextResolver:new ee({sharedCache:Je})}),null===ie?_(z):(ie=B.clone(ie),oe(ie)&&"@context"in ie||(ie={"@context":ie}),O({activeCtx:E,localCtx:ie,options:z}))});return function(E,ie,z){return P.apply(this,arguments)}}(),Ee.getContextValue=C(9611).getContextValue,Ee.documentLoaders={},Ee.useDocumentLoader=function(P){if(!(P in Ee.documentLoaders))throw new w('Unknown document loader type: "'+P+'"',"jsonld.UnknownDocumentLoader",{type:P});Ee.documentLoader=Ee.documentLoaders[P].apply(Ee,Array.prototype.slice.call(arguments,1))},Ee.registerRDFParser=function(P,E){$e[P]=E},Ee.unregisterRDFParser=function(P){delete $e[P]},Ee.registerRDFParser("application/n-quads",G.parse),Ee.registerRDFParser("application/nquads",G.parse),Ee.url=C(2651),Ee.logEventHandler=Re,Ee.logWarningEventHandler=Oe,Ee.safeEventHandler=Qe,Ee.setDefaultEventHandler=Xe,Ee.strictEventHandler=Ne,Ee.unhandledEventHandler=Pe,Ee.util=B,Object.assign(Ee,B),Ee.promises=Ee,Ee.RequestQueue=C(4044),Ee.JsonLdProcessor=C(1828)(Ee),te.setupGlobals(Ee),te.setupDocumentLoaders(Ee),Ee},fe=function(){return Ve(function(){return fe()})};Ve(fe),Ue.exports=fe},9783:(Ue,ge,C)=>{"use strict";const{isKeyword:J}=C(9611),A=C(543),te=C(8254),B=C(3521),ee=C(1874),g={};Ue.exports=g,g.createMergedNodeMap=(w,N)=>{const G=(N=N||{}).issuer||new B.IdentifierIssuer("_:b"),R={"@default":{}};return g.createNodeMap(w,R,"@default",G),g.mergeNodeMaps(R)},g.createNodeMap=(w,N,G,R,W,de)=>{if(te.isArray(w)){for(const K of w)g.createNodeMap(K,N,G,R,void 0,de);return}if(!te.isObject(w))return void(de&&de.push(w));if(A.isValue(w)){if("@type"in w){let K=w["@type"];0===K.indexOf("_:")&&(w["@type"]=K=R.getId(K))}return void(de&&de.push(w))}if(de&&A.isList(w)){const K=[];return g.createNodeMap(w["@list"],N,G,R,W,K),void de.push({"@list":K})}if("@type"in w){const K=w["@type"];for(const oe of K)0===oe.indexOf("_:")&&R.getId(oe)}te.isUndefined(W)&&(W=A.isBlankNode(w)?R.getId(w["@id"]):w["@id"]),de&&de.push({"@id":W});const I=N[G],V=I[W]=I[W]||{};V["@id"]=W;const ae=Object.keys(w).sort();for(let K of ae){if("@id"===K)continue;if("@reverse"===K){const ne={"@id":W},X=w["@reverse"];for(const L in X){const _=X[L];for(const O of _){let S=O["@id"];A.isBlankNode(O)&&(S=R.getId(S)),g.createNodeMap(O,N,G,R,S),B.addValue(I[S],L,ne,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===K){W in N||(N[W]={}),g.createNodeMap(w[K],N,W,R);continue}if("@included"===K){g.createNodeMap(w[K],N,G,R);continue}if("@type"!==K&&J(K)){if("@index"===K&&K in V&&(w[K]!==V[K]||w[K]["@id"]!==V[K]["@id"]))throw new ee("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:V});V[K]=w[K];continue}const oe=w[K];if(0===K.indexOf("_:")&&(K=R.getId(K)),0!==oe.length)for(let ne of oe)if("@type"===K&&(ne=0===ne.indexOf("_:")?R.getId(ne):ne),A.isSubject(ne)||A.isSubjectReference(ne)){if("@id"in ne&&!ne["@id"])continue;const X=A.isBlankNode(ne)?R.getId(ne["@id"]):ne["@id"];B.addValue(V,K,{"@id":X},{propertyIsArray:!0,allowDuplicate:!1}),g.createNodeMap(ne,N,G,R,X)}else if(A.isValue(ne))B.addValue(V,K,ne,{propertyIsArray:!0,allowDuplicate:!1});else if(A.isList(ne)){const X=[];g.createNodeMap(ne["@list"],N,G,R,W,X),ne={"@list":X},B.addValue(V,K,ne,{propertyIsArray:!0,allowDuplicate:!1})}else g.createNodeMap(ne,N,G,R,W),B.addValue(V,K,ne,{propertyIsArray:!0,allowDuplicate:!1});else B.addValue(V,K,[],{propertyIsArray:!0})}},g.mergeNodeMapGraphs=w=>{const N={};for(const G of Object.keys(w).sort())for(const R of Object.keys(w[G]).sort()){const W=w[G][R];R in N||(N[R]={"@id":R});const de=N[R];for(const I of Object.keys(W).sort())if(J(I)&&"@type"!==I)de[I]=B.clone(W[I]);else for(const V of W[I])B.addValue(de,I,B.clone(V),{propertyIsArray:!0,allowDuplicate:!1})}return N},g.mergeNodeMaps=w=>{const N=w["@default"],G=Object.keys(w).sort();for(const R of G){if("@default"===R)continue;const W=w[R];let de=N[R];de?"@graph"in de||(de["@graph"]=[]):N[R]=de={"@id":R,"@graph":[]};const I=de["@graph"];for(const V of Object.keys(W).sort()){const ae=W[V];A.isSubjectReference(ae)||I.push(ae)}}return N}},8924:(Ue,ge,C)=>{"use strict";const J=C(627),A={};Ue.exports=A,A.setupDocumentLoaders=function(te){typeof XMLHttpRequest<"u"&&(te.documentLoaders.xhr=J,te.useDocumentLoader("xhr"))},A.setupGlobals=function(te){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:te.JsonLdProcessor})}},240:(Ue,ge,C)=>{"use strict";const{createNodeMap:J}=C(9783),{isKeyword:A}=C(9611),te=C(543),B=C(5041),ee=C(8254),g=C(3521),{handleEvent:w}=C(3855),{RDF_FIRST:N,RDF_REST:G,RDF_NIL:R,RDF_TYPE:W,RDF_JSON_LITERAL:de,RDF_LANGSTRING:I,XSD_BOOLEAN:V,XSD_DOUBLE:ae,XSD_INTEGER:K,XSD_STRING:oe}=C(6982),{isAbsolute:ne}=C(2651),X={};function L(S,ue,j,Te,se){const Se=Object.keys(ue).sort();for(const Re of Se){const Oe=ue[Re],Qe=Object.keys(Oe).sort();for(let Xe of Qe){const we=Oe[Xe];if("@type"===Xe)Xe=W;else if(A(Xe))continue;for(const Ne of we){const Pe={termType:Re.startsWith("_:")?"BlankNode":"NamedNode",value:Re};if(!ne(Re)){se.eventHandler&&w({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Re}},options:se});continue}const Ve={termType:Xe.startsWith("_:")?"BlankNode":"NamedNode",value:Xe};if(!ne(Xe)){se.eventHandler&&w({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Xe}},options:se});continue}if("BlankNode"===Ve.termType&&!se.produceGeneralizedRdf){se.eventHandler&&w({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Te.getOldIds().find(Ee=>Te.getId(Ee)===Xe)}},options:se});continue}const fe=O(Ne,Te,S,j,se.rdfDirection,se);fe&&S.push({subject:Pe,predicate:Ve,object:fe,graph:j})}}}}function O(S,ue,j,Te,se,Se){const Re={};if(te.isValue(S)){Re.termType="Literal",Re.value=void 0,Re.datatype={termType:"NamedNode"};let Oe=S["@value"];const Qe=S["@type"]||null;"@json"===Qe?(Re.value=B(Oe),Re.datatype.value=de):ee.isBoolean(Oe)?(Re.value=Oe.toString(),Re.datatype.value=Qe||V):ee.isDouble(Oe)||Qe===ae?(ee.isDouble(Oe)||(Oe=parseFloat(Oe)),Re.value=Oe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Re.datatype.value=Qe||ae):ee.isNumber(Oe)?(Re.value=Oe.toFixed(0),Re.datatype.value=Qe||K):"i18n-datatype"===se&&"@direction"in S?(Re.datatype.value="https://www.w3.org/ns/i18n#"+(S["@language"]||"")+`_${S["@direction"]}`,Re.value=Oe):"@language"in S?(Re.value=Oe,Re.datatype.value=Qe||I,Re.language=S["@language"]):(Re.value=Oe,Re.datatype.value=Qe||oe)}else if(te.isList(S)){const Oe=function _(S,ue,j,Te,se,Se){const Re={termType:"NamedNode",value:N},Oe={termType:"NamedNode",value:G},Qe={termType:"NamedNode",value:R},Xe=S.pop(),we=Xe?{termType:"BlankNode",value:ue.getId()}:Qe;let Ne=we;for(const Pe of S){const Ve=O(Pe,ue,j,Te,se,Se),fe={termType:"BlankNode",value:ue.getId()};j.push({subject:Ne,predicate:Re,object:Ve,graph:Te}),j.push({subject:Ne,predicate:Oe,object:fe,graph:Te}),Ne=fe}if(Xe){const Pe=O(Xe,ue,j,Te,se,Se);j.push({subject:Ne,predicate:Re,object:Pe,graph:Te}),j.push({subject:Ne,predicate:Oe,object:Qe,graph:Te})}return we}(S["@list"],ue,j,Te,se,Se);Re.termType=Oe.termType,Re.value=Oe.value}else{const Oe=ee.isObject(S)?S["@id"]:S;Re.termType=Oe.startsWith("_:")?"BlankNode":"NamedNode",Re.value=Oe}return"NamedNode"!==Re.termType||ne(Re.value)?Re:(Se.eventHandler&&w({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Re.value}},options:Se}),null)}Ue.exports=X,X.toRDF=(S,ue)=>{const j=new g.IdentifierIssuer("_:b"),Te={"@default":{}};J(S,Te,"@default",j);const se=[],Se=Object.keys(Te).sort();for(const Re of Se){let Oe;if("@default"===Re)Oe={termType:"DefaultGraph",value:""};else{if(!ne(Re)){ue.eventHandler&&w({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Re}},options:ue});continue}Oe=Re.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Oe.value=Re}L(se,Te[Re],Oe,j,ue)}return se}},8254:Ue=>{"use strict";const ge={};Ue.exports=ge,ge.isArray=Array.isArray,ge.isBoolean=C=>"boolean"==typeof C||"[object Boolean]"===Object.prototype.toString.call(C),ge.isDouble=C=>ge.isNumber(C)&&(-1!==String(C).indexOf(".")||Math.abs(C)>=1e21),ge.isEmptyObject=C=>ge.isObject(C)&&0===Object.keys(C).length,ge.isNumber=C=>"number"==typeof C||"[object Number]"===Object.prototype.toString.call(C),ge.isNumeric=C=>!isNaN(parseFloat(C))&&isFinite(C),ge.isObject=C=>"[object Object]"===Object.prototype.toString.call(C),ge.isString=C=>"string"==typeof C||"[object String]"===Object.prototype.toString.call(C),ge.isUndefined=C=>typeof C>"u"},2651:(Ue,ge,C)=>{"use strict";const J=C(8254),A={};Ue.exports=A,A.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},A.parse=(B,ee)=>{const g={},w=A.parsers[ee||"full"],N=w.regex.exec(B);let G=w.keys.length;for(;G--;)g[w.keys[G]]=void 0===N[G]?null:N[G];return("https"===g.scheme&&"443"===g.port||"http"===g.scheme&&"80"===g.port)&&(g.href=g.href.replace(":"+g.port,""),g.authority=g.authority.replace(":"+g.port,""),g.port=null),g.normalizedPath=A.removeDotSegments(g.path),g},A.prependBase=(B,ee)=>{if(null===B||A.isAbsolute(ee))return ee;(!B||J.isString(B))&&(B=A.parse(B||""));const g=A.parse(ee),w={protocol:B.protocol||""};if(null!==g.authority)w.authority=g.authority,w.path=g.path,w.query=g.query;else if(w.authority=B.authority,""===g.path)w.path=B.path,w.query=null!==g.query?g.query:B.query;else{if(0===g.path.indexOf("/"))w.path=g.path;else{let G=B.path;G=G.substr(0,G.lastIndexOf("/")+1),(G.length>0||B.authority)&&"/"!==G.substr(-1)&&(G+="/"),G+=g.path,w.path=G}w.query=g.query}""!==g.path&&(w.path=A.removeDotSegments(w.path));let N=w.protocol;return null!==w.authority&&(N+="//"+w.authority),N+=w.path,null!==w.query&&(N+="?"+w.query),null!==g.fragment&&(N+="#"+g.fragment),""===N&&(N="./"),N},A.removeBase=(B,ee)=>{if(null===B)return ee;(!B||J.isString(B))&&(B=A.parse(B||""));let g="";if(""!==B.href?g+=(B.protocol||"")+"//"+(B.authority||""):ee.indexOf("//")&&(g+="//"),0!==ee.indexOf(g))return ee;const w=A.parse(ee.substr(g.length)),N=B.normalizedPath.split("/"),G=w.normalizedPath.split("/"),R=w.fragment||w.query?0:1;for(;N.length>0&&G.length>R&&N[0]===G[0];)N.shift(),G.shift();let W="";if(N.length>0){N.pop();for(let de=0;de<N.length;++de)W+="../"}return W+=G.join("/"),null!==w.query&&(W+="?"+w.query),null!==w.fragment&&(W+="#"+w.fragment),""===W&&(W="./"),W},A.removeDotSegments=B=>{if(0===B.length)return"";const ee=B.split("/"),g=[];for(;ee.length>0;){const w=ee.shift(),N=0===ee.length;"."!==w?".."!==w?g.push(w):(g.pop(),N&&g.push("")):N&&g.push("")}return"/"===B[0]&&g.length>0&&""!==g[0]&&g.unshift(""),1===g.length&&""===g[0]?"/":g.join("/")};const te=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;A.isAbsolute=B=>J.isString(B)&&te.test(B),A.isRelative=B=>J.isString(B)},3521:(Ue,ge,C)=>{"use strict";const J=C(543),A=C(8254),te=C(1986).IdentifierIssuer,B=C(1874),g=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,w=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,N=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,R_headers_accept="application/ld+json, application/json",W={};function de(I,V){if(A.isArray(V))for(let ae=0;ae<V.length;++ae)V[ae]=de(I,V[ae]);else if(J.isList(V))V["@list"]=de(I,V["@list"]);else if(A.isObject(V)){J.isBlankNode(V)&&(V["@id"]=I.getId(V["@id"]));const ae=Object.keys(V).sort();for(let K=0;K<ae.length;++K){const oe=ae[K];"@id"!==oe&&(V[oe]=de(I,V[oe]))}}return V}Ue.exports=W,W.IdentifierIssuer=te,W.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,W.REGEX_KEYWORD=/^@[a-zA-Z]+$/,W.clone=function(I){if(I&&"object"==typeof I){let V;if(A.isArray(I)){V=[];for(let ae=0;ae<I.length;++ae)V[ae]=W.clone(I[ae])}else if(I instanceof Map){V=new Map;for(const[ae,K]of I)V.set(ae,W.clone(K))}else if(I instanceof Set){V=new Set;for(const ae of I)V.add(W.clone(ae))}else if(A.isObject(I)){V={};for(const ae in I)V[ae]=W.clone(I[ae])}else V=I.toString();return V}return I},W.asArray=function(I){return Array.isArray(I)?I:[I]},W.buildHeaders=(I={})=>{if(Object.keys(I).some(ae=>"accept"===ae.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+R_headers_accept+'" is supported.');return Object.assign({Accept:R_headers_accept},I)},W.parseLinkHeader=I=>{const V={},ae=I.match(g);for(let K=0;K<ae.length;++K){let oe=ae[K].match(w);if(!oe)continue;const ne={target:oe[1]},X=oe[2];for(;oe=N.exec(X);)ne[oe[1]]=void 0===oe[2]?oe[3]:oe[2];const L=ne.rel||"";Array.isArray(V[L])?V[L].push(ne):V[L]=V.hasOwnProperty(L)?[V[L],ne]:ne}return V},W.validateTypeValue=(I,V)=>{if(!(A.isString(I)||A.isArray(I)&&I.every(ae=>A.isString(ae)))){if(V&&A.isObject(I))switch(Object.keys(I).length){case 0:return;case 1:if("@default"in I&&W.asArray(I["@default"]).every(ae=>A.isString(ae)))return}throw new B('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:I})}},W.hasProperty=(I,V)=>{if(I.hasOwnProperty(V)){const ae=I[V];return!A.isArray(ae)||ae.length>0}return!1},W.hasValue=(I,V,ae)=>{if(W.hasProperty(I,V)){let K=I[V];const oe=J.isList(K);if(A.isArray(K)||oe){oe&&(K=K["@list"]);for(let ne=0;ne<K.length;++ne)if(W.compareValues(ae,K[ne]))return!0}else if(!A.isArray(ae))return W.compareValues(ae,K)}return!1},W.addValue=(I,V,ae,K)=>{if("propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1),"valueIsArray"in K||(K.valueIsArray=!1),"allowDuplicate"in K||(K.allowDuplicate=!0),"prependValue"in K||(K.prependValue=!1),K.valueIsArray)I[V]=ae;else if(A.isArray(ae)){0===ae.length&&K.propertyIsArray&&!I.hasOwnProperty(V)&&(I[V]=[]),K.prependValue&&(ae=ae.concat(I[V]),I[V]=[]);for(let oe=0;oe<ae.length;++oe)W.addValue(I,V,ae[oe],K)}else if(I.hasOwnProperty(V)){const oe=!K.allowDuplicate&&W.hasValue(I,V,ae);!A.isArray(I[V])&&(!oe||K.propertyIsArray)&&(I[V]=[I[V]]),oe||(K.prependValue?I[V].unshift(ae):I[V].push(ae))}else I[V]=K.propertyIsArray?[ae]:ae},W.getValues=(I,V)=>[].concat(I[V]||[]),W.removeProperty=(I,V)=>{delete I[V]},W.removeValue=(I,V,ae,K)=>{"propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1);const oe=W.getValues(I,V).filter(ne=>!W.compareValues(ne,ae));0===oe.length?W.removeProperty(I,V):I[V]=1!==oe.length||K.propertyIsArray?oe:oe[0]},W.relabelBlankNodes=(I,V)=>de((V=V||{}).issuer||new te("_:b"),I),W.compareValues=(I,V)=>!!(I===V||J.isValue(I)&&J.isValue(V)&&I["@value"]===V["@value"]&&I["@type"]===V["@type"]&&I["@language"]===V["@language"]&&I["@index"]===V["@index"])||!!(A.isObject(I)&&"@id"in I&&A.isObject(V)&&"@id"in V)&&I["@id"]===V["@id"],W.compareShortestLeast=(I,V)=>I.length<V.length?-1:V.length<I.length?1:I===V?0:I<V?-1:1},5041:Ue=>{"use strict";Ue.exports=function ge(C){return null===C||"object"!=typeof C||null!=C.toJSON?JSON.stringify(C):Array.isArray(C)?"["+C.reduce((J,A,te)=>J+(0===te?"":",")+ge(void 0===A||"symbol"==typeof A?null:A),"")+"]":"{"+Object.keys(C).sort().reduce((J,A,te)=>void 0===C[A]||"symbol"==typeof C[A]?J:J+(0===J.length?"":",")+ge(A)+":"+ge(C[A]),"")+"}"}},1072:(Ue,ge,C)=>{"use strict";const J=C(4439),A=Symbol("max"),te=Symbol("length"),B=Symbol("lengthCalculator"),ee=Symbol("allowStale"),g=Symbol("maxAge"),w=Symbol("dispose"),N=Symbol("noDisposeOnSet"),G=Symbol("lruList"),R=Symbol("cache"),W=Symbol("updateAgeOnGet"),de=()=>1,V=(L,_,O)=>{const S=L[R].get(_);if(S){const ue=S.value;if(ae(L,ue)){if(oe(L,S),!L[ee])return}else O&&(L[W]&&(S.value.now=Date.now()),L[G].unshiftNode(S));return ue.value}},ae=(L,_)=>{if(!_||!_.maxAge&&!L[g])return!1;const O=Date.now()-_.now;return _.maxAge?O>_.maxAge:L[g]&&O>L[g]},K=L=>{if(L[te]>L[A])for(let _=L[G].tail;L[te]>L[A]&&null!==_;){const O=_.prev;oe(L,_),_=O}},oe=(L,_)=>{if(_){const O=_.value;L[w]&&L[w](O.key,O.value),L[te]-=O.length,L[R].delete(O.key),L[G].removeNode(_)}};class ne{constructor(_,O,S,ue,j){this.key=_,this.value=O,this.length=S,this.now=ue,this.maxAge=j||0}}const X=(L,_,O,S)=>{let ue=O.value;ae(L,ue)&&(oe(L,O),L[ee]||(ue=void 0)),ue&&_.call(S,ue.value,ue.key,L)};Ue.exports=class I{constructor(_){if("number"==typeof _&&(_={max:_}),_||(_={}),_.max&&("number"!=typeof _.max||_.max<0))throw new TypeError("max must be a non-negative number");this[A]=_.max||1/0;const S=_.length||de;if(this[B]="function"!=typeof S?de:S,this[ee]=_.stale||!1,_.maxAge&&"number"!=typeof _.maxAge)throw new TypeError("maxAge must be a number");this[g]=_.maxAge||0,this[w]=_.dispose,this[N]=_.noDisposeOnSet||!1,this[W]=_.updateAgeOnGet||!1,this.reset()}set max(_){if("number"!=typeof _||_<0)throw new TypeError("max must be a non-negative number");this[A]=_||1/0,K(this)}get max(){return this[A]}set allowStale(_){this[ee]=!!_}get allowStale(){return this[ee]}set maxAge(_){if("number"!=typeof _)throw new TypeError("maxAge must be a non-negative number");this[g]=_,K(this)}get maxAge(){return this[g]}set lengthCalculator(_){"function"!=typeof _&&(_=de),_!==this[B]&&(this[B]=_,this[te]=0,this[G].forEach(O=>{O.length=this[B](O.value,O.key),this[te]+=O.length})),K(this)}get lengthCalculator(){return this[B]}get length(){return this[te]}get itemCount(){return this[G].length}rforEach(_,O){O=O||this;for(let S=this[G].tail;null!==S;){const ue=S.prev;X(this,_,S,O),S=ue}}forEach(_,O){O=O||this;for(let S=this[G].head;null!==S;){const ue=S.next;X(this,_,S,O),S=ue}}keys(){return this[G].toArray().map(_=>_.key)}values(){return this[G].toArray().map(_=>_.value)}reset(){this[w]&&this[G]&&this[G].length&&this[G].forEach(_=>this[w](_.key,_.value)),this[R]=new Map,this[G]=new J,this[te]=0}dump(){return this[G].map(_=>!ae(this,_)&&{k:_.key,v:_.value,e:_.now+(_.maxAge||0)}).toArray().filter(_=>_)}dumpLru(){return this[G]}set(_,O,S){if((S=S||this[g])&&"number"!=typeof S)throw new TypeError("maxAge must be a number");const ue=S?Date.now():0,j=this[B](O,_);if(this[R].has(_)){if(j>this[A])return oe(this,this[R].get(_)),!1;const Se=this[R].get(_).value;return this[w]&&(this[N]||this[w](_,Se.value)),Se.now=ue,Se.maxAge=S,Se.value=O,this[te]+=j-Se.length,Se.length=j,this.get(_),K(this),!0}const Te=new ne(_,O,j,ue,S);return Te.length>this[A]?(this[w]&&this[w](_,O),!1):(this[te]+=Te.length,this[G].unshift(Te),this[R].set(_,this[G].head),K(this),!0)}has(_){if(!this[R].has(_))return!1;const O=this[R].get(_).value;return!ae(this,O)}get(_){return V(this,_,!0)}peek(_){return V(this,_,!1)}pop(){const _=this[G].tail;return _?(oe(this,_),_.value):null}del(_){oe(this,this[R].get(_))}load(_){this.reset();const O=Date.now();for(let S=_.length-1;S>=0;S--){const ue=_[S],j=ue.e||0;if(0===j)this.set(ue.k,ue.v);else{const Te=j-O;Te>0&&this.set(ue.k,ue.v,Te)}}}prune(){this[R].forEach((_,O)=>V(this,O,!1))}}},6990:function(Ue,ge,C){var J;Ue=C.nmd(Ue),function(){var A,g="Expected a function",N="__lodash_hash_undefined__",R="__lodash_placeholder__",_=32,S=128,we=1/0,Ne=9007199254740991,fe=4294967295,ot=[["ary",S],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",_],["partialRight",64],["rearg",256]],Je="[object Arguments]",le="[object Array]",E="[object Boolean]",ie="[object Date]",Ae="[object Error]",et="[object Function]",ce="[object GeneratorFunction]",Z="[object Map]",F="[object Number]",M="[object Object]",Q="[object Promise]",ze="[object RegExp]",Ye="[object Set]",dt="[object String]",vt="[object Symbol]",zt="[object WeakMap]",Ie="[object ArrayBuffer]",H="[object DataView]",v="[object Float32Array]",re="[object Float64Array]",Ge="[object Int8Array]",Ke="[object Int16Array]",st="[object Int32Array]",Wt="[object Uint8Array]",an="[object Uint8ClampedArray]",qn="[object Uint16Array]",Yn="[object Uint32Array]",In=/\b__p \+= '';/g,gr=/\b(__p \+=) '' \+/g,ss=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Go=/&(?:amp|lt|gt|quot|#39);/g,zi=/[&<>"']/g,Yr=RegExp(Go.source),as=RegExp(zi.source),Os=/<%-([\s\S]+?)%>/g,Io=/<%([\s\S]+?)%>/g,mo=/<%=([\s\S]+?)%>/g,Bd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zu=/^\w*$/,Qu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pc=/[\\^$.*+?()[\]{}|]/g,ac=RegExp(Pc.source),Rl=/^\s+/,Nc=/\s/,Ol=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fc=/\{\n\/\* \[wrapped with (.+)\] \*/,jd=/,? & /,Lc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eh=/[()=,{}\[\]\/\s]/,Bc=/\\(\\)?/g,kl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jc=/\w*$/,xi=/^[-+]0x[0-9a-f]+$/i,ki=/^0b[01]+$/i,ks=/^\[object .+?Constructor\]$/,Ca=/^0o[0-7]+$/i,Ta=/^(?:0|[1-9]\d*)$/,cc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,go=/($^)/,me=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",pe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Le="\\u2700-\\u27bf",We="a-z\\xdf-\\xf6\\xf8-\\xff",Jt="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",so="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Do="["+Me+"]",Uc="["+so+"]",na="["+pe+"]",jr="\\d+",_o="["+Le+"]",Vc="["+We+"]",Pl="[^"+Me+so+jr+Le+We+Jt+"]",Ei="\\ud83c[\\udffb-\\udfff]",qt="[^"+Me+"]",Ro="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+Jt+"]",ft="(?:"+Vc+"|"+Pl+")",wt="(?:"+Fe+"|"+Pl+")",Xt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",mn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ar="(?:"+na+"|"+Ei+")?",Dr="["+vn+"]?",qf=Dr+ar+"(?:\\u200d(?:"+[qt,Ro,ke].join("|")+")"+Dr+ar+")*",aN="(?:"+[_o,Ro,ke].join("|")+")"+qf,lv="(?:"+[qt+na+"?",na,Ro,ke,Do].join("|")+")",Rt=RegExp("['\u2019]","g"),Jf=RegExp(na,"g"),kn=RegExp(Ei+"(?="+Ei+")|"+lv+qf,"g"),Ci=RegExp([Fe+"?"+Vc+"+"+Xt+"(?="+[Uc,Fe,"$"].join("|")+")",wt+"+"+mn+"(?="+[Uc,Fe+ft,"$"].join("|")+")",Fe+"?"+ft+"+"+Xt,Fe+"+"+mn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jr,aN].join("|"),"g"),hS=RegExp("[\\u200d"+Me+pe+vn+"]"),cN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gg=-1,ci={};ci[v]=ci[re]=ci[Ge]=ci[Ke]=ci[st]=ci[Wt]=ci[an]=ci[qn]=ci[Yn]=!0,ci[Je]=ci[le]=ci[Ie]=ci[E]=ci[H]=ci[ie]=ci[Ae]=ci[et]=ci[Z]=ci[F]=ci[M]=ci[ze]=ci[Ye]=ci[dt]=ci[zt]=!1;var Yi={};Yi[Je]=Yi[le]=Yi[Ie]=Yi[H]=Yi[E]=Yi[ie]=Yi[v]=Yi[re]=Yi[Ge]=Yi[Ke]=Yi[st]=Yi[Z]=Yi[F]=Yi[M]=Yi[ze]=Yi[Ye]=Yi[dt]=Yi[vt]=Yi[Wt]=Yi[an]=Yi[qn]=Yi[Yn]=!0,Yi[Ae]=Yi[et]=Yi[zt]=!1;var dN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uN=parseFloat,hN=parseInt,mS="object"==typeof global&&global&&global.Object===Object&&global,gS="object"==typeof self&&self&&self.Object===Object&&self,bo=mS||gS||Function("return this")(),dv=ge&&!ge.nodeType&&ge,Zf=dv&&Ue&&!Ue.nodeType&&Ue,cs=Zf&&Zf.exports===dv,Sn=cs&&mS.process,ia=function(){try{return Zf&&Zf.require&&Zf.require("util").types||Sn&&Sn.binding&&Sn.binding("util")}catch{}}(),_S=ia&&ia.isArrayBuffer,bS=ia&&ia.isDate,St=ia&&ia.isMap,yS=ia&&ia.isRegExp,cn=ia&&ia.isSet,th=ia&&ia.isTypedArray;function ls(ct,At,gt){switch(gt.length){case 0:return ct.call(At);case 1:return ct.call(At,gt[0]);case 2:return ct.call(At,gt[0],gt[1]);case 3:return ct.call(At,gt[0],gt[1],gt[2])}return ct.apply(At,gt)}function uv(ct,At,gt,en){for(var Bn=-1,fi=null==ct?0:ct.length;++Bn<fi;){var Or=ct[Bn];At(en,Or,gt(Or),ct)}return en}function Ps(ct,At){for(var gt=-1,en=null==ct?0:ct.length;++gt<en&&!1!==At(ct[gt],gt,ct););return ct}function Qf(ct,At){for(var gt=null==ct?0:ct.length;gt--&&!1!==At(ct[gt],gt,ct););return ct}function nh(ct,At){for(var gt=-1,en=null==ct?0:ct.length;++gt<en;)if(!At(ct[gt],gt,ct))return!1;return!0}function Ma(ct,At){for(var gt=-1,en=null==ct?0:ct.length,Bn=0,fi=[];++gt<en;){var Or=ct[gt];At(Or,gt,ct)&&(fi[Bn++]=Or)}return fi}function ih(ct,At){return!(null==ct||!ct.length)&&zc(ct,At,0)>-1}function Wg(ct,At,gt){for(var en=-1,Bn=null==ct?0:ct.length;++en<Bn;)if(gt(At,ct[en]))return!0;return!1}function pn(ct,At){for(var gt=-1,en=null==ct?0:ct.length,Bn=Array(en);++gt<en;)Bn[gt]=At(ct[gt],gt,ct);return Bn}function Ia(ct,At){for(var gt=-1,en=At.length,Bn=ct.length;++gt<en;)ct[Bn+gt]=At[gt];return ct}function ep(ct,At,gt,en){var Bn=-1,fi=null==ct?0:ct.length;for(en&&fi&&(gt=ct[++Bn]);++Bn<fi;)gt=At(gt,ct[Bn],Bn,ct);return gt}function Wo(ct,At,gt,en){var Bn=null==ct?0:ct.length;for(en&&Bn&&(gt=ct[--Bn]);Bn--;)gt=At(gt,ct[Bn],Bn,ct);return gt}function tp(ct,At){for(var gt=-1,en=null==ct?0:ct.length;++gt<en;)if(At(ct[gt],gt,ct))return!0;return!1}var fN=rh("length");function vS(ct,At,gt){var en;return gt(ct,function(Bn,fi,Or){if(At(Bn,fi,Or))return en=fi,!1}),en}function Ud(ct,At,gt,en){for(var Bn=ct.length,fi=gt+(en?1:-1);en?fi--:++fi<Bn;)if(At(ct[fi],fi,ct))return fi;return-1}function zc(ct,At,gt){return At==At?function lc(ct,At,gt){for(var en=gt-1,Bn=ct.length;++en<Bn;)if(ct[en]===At)return en;return-1}(ct,At,gt):Ud(ct,np,gt)}function hv(ct,At,gt,en){for(var Bn=gt-1,fi=ct.length;++Bn<fi;)if(en(ct[Bn],At))return Bn;return-1}function np(ct){return ct!=ct}function fv(ct,At){var gt=null==ct?0:ct.length;return gt?mv(ct,At)/gt:NaN}function rh(ct){return function(At){return null==At?A:At[ct]}}function pv(ct){return function(At){return null==ct?A:ct[At]}}function xS(ct,At,gt,en,Bn){return Bn(ct,function(fi,Or,Pi){gt=en?(en=!1,fi):At(gt,fi,Or,Pi)}),gt}function mv(ct,At){for(var gt,en=-1,Bn=ct.length;++en<Bn;){var fi=At(ct[en]);fi!==A&&(gt=gt===A?fi:gt+fi)}return gt}function gv(ct,At){for(var gt=-1,en=Array(ct);++gt<ct;)en[gt]=At(gt);return en}function ip(ct){return ct&&ct.slice(0,bi(ct)+1).replace(Rl,"")}function yo(ct){return function(At){return ct(At)}}function $g(ct,At){return pn(At,function(gt){return ct[gt]})}function sh(ct,At){return ct.has(At)}function _v(ct,At){for(var gt=-1,en=ct.length;++gt<en&&zc(At,ct[gt],0)>-1;);return gt}function Yg(ct,At){for(var gt=ct.length;gt--&&zc(At,ct[gt],0)>-1;);return gt}var wS=pv({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Hc=pv({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ES(ct){return"\\"+dN[ct]}function Fl(ct){return hS.test(ct)}function ah(ct){var At=-1,gt=Array(ct.size);return ct.forEach(function(en,Bn){gt[++At]=[Bn,en]}),gt}function zd(ct,At){return function(gt){return ct(At(gt))}}function Gc(ct,At){for(var gt=-1,en=ct.length,Bn=0,fi=[];++gt<en;){var Or=ct[gt];(Or===At||Or===R)&&(ct[gt]=R,fi[Bn++]=gt)}return fi}function op(ct){var At=-1,gt=Array(ct.size);return ct.forEach(function(en){gt[++At]=en}),gt}function vo(ct){return Fl(ct)?function Xg(ct){for(var At=kn.lastIndex=0;kn.test(ct);)++At;return At}(ct):fN(ct)}function Rr(ct){return Fl(ct)?function Kg(ct){return ct.match(kn)||[]}(ct):function Ai(ct){return ct.split("")}(ct)}function bi(ct){for(var At=ct.length;At--&&Nc.test(ct.charAt(At)););return At}var ap=pv({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Wc=function ct(At){var u,gt=(At=null==At?bo:Wc.defaults(bo.Object(),At,Wc.pick(bo,fS))).Array,en=At.Date,Bn=At.Error,fi=At.Function,Or=At.Math,Pi=At.Object,qg=At.RegExp,yv=At.String,Ns=At.TypeError,cp=gt.prototype,Hd=Pi.prototype,ch=At["__core-js_shared__"],lp=fi.prototype.toString,Mi=Hd.hasOwnProperty,SS=0,vv=(u=/[^.]+$/.exec(ch&&ch.keys&&ch.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",lh=Hd.toString,CS=lp.call(Pi),TS=bo._,MS=qg("^"+lp.call(Mi).replace(Pc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fn=cs?At.Buffer:A,$c=At.Symbol,dp=At.Uint8Array,xv=Fn?Fn.allocUnsafe:A,on=zd(Pi.getPrototypeOf,Pi),wv=Pi.create,Jg=Hd.propertyIsEnumerable,Lt=cp.splice,ao=$c?$c.isConcatSpreadable:A,si=$c?$c.iterator:A,cr=$c?$c.toStringTag:A,Xr=function(){try{var u=Jc(Pi,"defineProperty");return u({},"",{}),u}catch{}}(),Gd=At.clearTimeout!==bo.clearTimeout&&At.clearTimeout,ds=en&&en.now!==bo.Date.now&&en.now,Ev=At.setTimeout!==bo.setTimeout&&At.setTimeout,dh=Or.ceil,Ll=Or.floor,Zg=Pi.getOwnPropertySymbols,IS=Fn?Fn.isBuffer:A,_r=At.isFinite,Kt=cp.join,zn=zd(Pi.keys,Pi),Jn=Or.max,Hi=Or.min,uh=en.now,xo=At.parseInt,Bl=Or.random,Cr=cp.reverse,Da=Jc(At,"DataView"),Ra=Jc(At,"Map"),Pn=Jc(At,"Promise"),Oa=Jc(At,"Set"),Wd=Jc(At,"WeakMap"),ka=Jc(Pi,"create"),Zi=Wd&&new Wd,Pa={},$d=du(Da),Na=du(Ra),hh=du(Pn),Av=du(Oa),Yc=du(Wd),Fs=$c?$c.prototype:A,Xc=Fs?Fs.valueOf:A,fh=Fs?Fs.toString:A;function De(u){if(tr(u)&&!Un(u)&&!(u instanceof jn)){if(u instanceof us)return u;if(Mi.call(u,"__wrapped__"))return eC(u)}return new us(u)}var ph=function(){function u(){}return function(f){if(!er(f))return{};if(wv)return wv(f);u.prototype=f;var y=new u;return u.prototype=A,y}}();function Yd(){}function us(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=A}function jn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function lr(u){var f=-1,y=null==u?0:u.length;for(this.clear();++f<y;){var q=u[f];this.set(q[0],q[1])}}function Ls(u){var f=-1,y=null==u?0:u.length;for(this.clear();++f<y;){var q=u[f];this.set(q[0],q[1])}}function uc(u){var f=-1,y=null==u?0:u.length;for(this.clear();++f<y;){var q=u[f];this.set(q[0],q[1])}}function Kd(u){var f=-1,y=null==u?0:u.length;for(this.__data__=new uc;++f<y;)this.add(u[f])}function Fa(u){var f=this.__data__=new Ls(u);this.size=f.size}function t_(u,f){var y=Un(u),q=!y&&ql(u),xe=!y&&!q&&tl(u),Be=!y&&!q&&!xe&&yu(u),Ze=y||q||xe||Be,it=Ze?gv(u.length,yv):[],lt=it.length;for(var Ct in u)(f||Mi.call(u,Ct))&&(!Ze||!("length"==Ct||xe&&("offset"==Ct||"parent"==Ct)||Be&&("buffer"==Ct||"byteLength"==Ct||"byteOffset"==Ct)||Ua(Ct,lt)))&&it.push(Ct);return it}function kS(u){var f=u.length;return f?u[Lv(0,f-1)]:A}function MN(u,f){return F_(ko(u),Jd(f,0,u.length))}function IN(u){return F_(ko(u))}function hc(u,f,y){(y!==A&&!ms(u[f],y)||y===A&&!(f in u))&&fc(u,f,y)}function qd(u,f,y){var q=u[f];(!Mi.call(u,f)||!ms(q,y)||y===A&&!(f in u))&&fc(u,f,y)}function n_(u,f){for(var y=u.length;y--;)if(ms(u[y][0],f))return y;return-1}function i_(u,f,y,q){return Ul(u,function(xe,Be,Ze){f(q,xe,y(xe),Ze)}),q}function r_(u,f){return u&&ca(f,zr(f),u)}function fc(u,f,y){"__proto__"==f&&Xr?Xr(u,f,{configurable:!0,enumerable:!0,value:y,writable:!0}):u[f]=y}function o_(u,f){for(var y=-1,q=f.length,xe=gt(q),Be=null==u;++y<q;)xe[y]=Be?A:sb(u,f[y]);return xe}function Jd(u,f,y){return u==u&&(y!==A&&(u=u<=y?u:y),f!==A&&(u=u>=f?u:f)),u}function Bs(u,f,y,q,xe,Be){var Ze,it=1&f,lt=2&f,Ct=4&f;if(y&&(Ze=xe?y(u,q,xe,Be):y(u)),Ze!==A)return Ze;if(!er(u))return u;var Tt=Un(u);if(Tt){if(Ze=function Ep(u){var f=u.length,y=new u.constructor(f);return f&&"string"==typeof u[0]&&Mi.call(u,"index")&&(y.index=u.index,y.input=u.input),y}(u),!it)return ko(u,Ze)}else{var It=So(u),$t=It==et||It==ce;if(tl(u))return y_(u,it);if(It==M||It==Je||$t&&!xe){if(Ze=lt||$t?{}:Ap(u),!it)return lt?function Gv(u,f){return ca(u,da(u),f)}(u,function PS(u,f){return u&&ca(f,bs(f),u)}(Ze,u)):function Hv(u,f){return ca(u,D_(u),f)}(u,r_(Ze,u))}else{if(!Yi[It])return xe?u:{};Ze=function JS(u,f,y){var q=u.constructor;switch(f){case Ie:return v_(u);case E:case ie:return new q(+u);case H:return function GS(u,f){var y=f?v_(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.byteLength)}(u,y);case v:case re:case Ge:case Ke:case st:case Wt:case an:case qn:case Yn:return E_(u,y);case Z:return new q;case F:case dt:return new q(u);case ze:return function x_(u){var f=new u.constructor(u.source,jc.exec(u));return f.lastIndex=u.lastIndex,f}(u);case Ye:return new q;case vt:return function w_(u){return Xc?Pi(Xc.call(u)):{}}(u)}}(u,It,it)}}Be||(Be=new Fa);var sn=Be.get(u);if(sn)return sn;Be.set(u,Ze),Ph(u)?u.forEach(function(An){Ze.add(Bs(An,f,y,An,u,Be))}):Rh(u)&&u.forEach(function(An,Vn){Ze.set(Vn,Bs(An,f,y,Vn,u,Be))});var Qn=Tt?A:(Ct?lt?Ah:Xv:lt?bs:zr)(u);return Ps(Qn||u,function(An,Vn){Qn&&(An=u[Vn=An]),qd(Ze,Vn,Bs(An,f,y,Vn,u,Be))}),Ze}function gh(u,f,y){var q=y.length;if(null==u)return!q;for(u=Pi(u);q--;){var xe=y[q],Ze=u[xe];if(Ze===A&&!(xe in u)||!(0,f[xe])(Ze))return!1}return!0}function Ur(u,f,y){if("function"!=typeof u)throw new Ns(g);return Va(function(){u.apply(A,y)},f)}function Zd(u,f,y,q){var xe=-1,Be=ih,Ze=!0,it=u.length,lt=[],Ct=f.length;if(!it)return lt;y&&(f=pn(f,yo(y))),q?(Be=Wg,Ze=!1):f.length>=200&&(Be=sh,Ze=!1,f=new Kd(f));e:for(;++xe<it;){var Tt=u[xe],It=null==y?Tt:y(Tt);if(Tt=q||0!==Tt?Tt:0,Ze&&It==It){for(var $t=Ct;$t--;)if(f[$t]===It)continue e;lt.push(Tt)}else Be(f,It,q)||lt.push(Tt)}return lt}De.templateSettings={escape:Os,evaluate:Io,interpolate:mo,variable:"",imports:{_:De}},(De.prototype=Yd.prototype).constructor=De,(us.prototype=ph(Yd.prototype)).constructor=us,(jn.prototype=ph(Yd.prototype)).constructor=jn,lr.prototype.clear=function gN(){this.__data__=ka?ka(null):{},this.size=0},lr.prototype.delete=function $o(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},lr.prototype.get=function Yo(u){var f=this.__data__;if(ka){var y=f[u];return y===N?A:y}return Mi.call(f,u)?f[u]:A},lr.prototype.has=function Qg(u){var f=this.__data__;return ka?f[u]!==A:Mi.call(f,u)},lr.prototype.set=function jl(u,f){var y=this.__data__;return this.size+=this.has(u)?0:1,y[u]=ka&&f===A?N:f,this},Ls.prototype.clear=function oa(){this.__data__=[],this.size=0},Ls.prototype.delete=function e_(u){var f=this.__data__,y=n_(f,u);return!(y<0||(y==f.length-1?f.pop():Lt.call(f,y,1),--this.size,0))},Ls.prototype.get=function DS(u){var f=this.__data__,y=n_(f,u);return y<0?A:f[y][1]},Ls.prototype.has=function RS(u){return n_(this.__data__,u)>-1},Ls.prototype.set=function _N(u,f){var y=this.__data__,q=n_(y,u);return q<0?(++this.size,y.push([u,f])):y[q][1]=f,this},uc.prototype.clear=function OS(){this.size=0,this.__data__={hash:new lr,map:new(Ra||Ls),string:new lr}},uc.prototype.delete=function bN(u){var f=$l(this,u).delete(u);return this.size-=f?1:0,f},uc.prototype.get=function yN(u){return $l(this,u).get(u)},uc.prototype.has=function vN(u){return $l(this,u).has(u)},uc.prototype.set=function xN(u,f){var y=$l(this,u),q=y.size;return y.set(u,f),this.size+=y.size==q?0:1,this},Kd.prototype.add=Kd.prototype.push=function wN(u){return this.__data__.set(u,N),this},Kd.prototype.has=function EN(u){return this.__data__.has(u)},Fa.prototype.clear=function AN(){this.__data__=new Ls,this.size=0},Fa.prototype.delete=function SN(u){var f=this.__data__,y=f.delete(u);return this.size=f.size,y},Fa.prototype.get=function CN(u){return this.__data__.get(u)},Fa.prototype.has=function TN(u){return this.__data__.has(u)},Fa.prototype.set=function Sv(u,f){var y=this.__data__;if(y instanceof Ls){var q=y.__data__;if(!Ra||q.length<199)return q.push([u,f]),this.size=++y.size,this;y=this.__data__=new uc(q)}return y.set(u,f),this.size=y.size,this};var Ul=Wv(hs),hp=Wv(a_,!0);function s_(u,f){var y=!0;return Ul(u,function(q,xe,Be){return y=!!f(q,xe,Be)}),y}function Vl(u,f,y){for(var q=-1,xe=u.length;++q<xe;){var Be=u[q],Ze=f(Be);if(null!=Ze&&(it===A?Ze==Ze&&!Jr(Ze):y(Ze,it)))var it=Ze,lt=Be}return lt}function FS(u,f){var y=[];return Ul(u,function(q,xe,Be){f(q,xe,Be)&&y.push(q)}),y}function Kr(u,f,y,q,xe){var Be=-1,Ze=u.length;for(y||(y=Zv),xe||(xe=[]);++Be<Ze;){var it=u[Be];f>0&&y(it)?f>1?Kr(it,f-1,y,q,xe):Ia(xe,it):q||(xe[xe.length]=it)}return xe}var _h=Ao(),Cv=Ao(!0);function hs(u,f){return u&&_h(u,f,zr)}function a_(u,f){return u&&Cv(u,f,zr)}function c_(u,f){return Ma(f,function(y){return za(u[y])})}function Qd(u,f){for(var y=0,q=(f=pc(f,u)).length;null!=u&&y<q;)u=u[gc(f[y++])];return y&&y==q?u:A}function l_(u,f,y){var q=f(u);return Un(u)?q:Ia(q,y(u))}function wo(u){return null==u?u===A?"[object Undefined]":"[object Null]":cr&&cr in Pi(u)?function qv(u){var f=Mi.call(u,cr),y=u[cr];try{u[cr]=A;var q=!0}catch{}var xe=lh.call(u);return q&&(f?u[cr]=y:delete u[cr]),xe}(u):function P_(u){return lh.call(u)}(u)}function d_(u,f){return u>f}function Tv(u,f){return null!=u&&Mi.call(u,f)}function kr(u,f){return null!=u&&f in Pi(u)}function u_(u,f,y){for(var q=y?Wg:ih,xe=u[0].length,Be=u.length,Ze=Be,it=gt(Be),lt=1/0,Ct=[];Ze--;){var Tt=u[Ze];Ze&&f&&(Tt=pn(Tt,yo(f))),lt=Hi(Tt.length,lt),it[Ze]=!y&&(f||xe>=120&&Tt.length>=120)?new Kd(Ze&&Tt):A}Tt=u[0];var It=-1,$t=it[0];e:for(;++It<xe&&Ct.length<lt;){var sn=Tt[It],Nt=f?f(sn):sn;if(sn=y||0!==sn?sn:0,!($t?sh($t,Nt):q(Ct,Nt,y))){for(Ze=Be;--Ze;){var Qn=it[Ze];if(!(Qn?sh(Qn,Nt):q(u[Ze],Nt,y)))continue e}$t&&$t.push(Nt),Ct.push(sn)}}return Ct}function eu(u,f,y){var q=null==(u=N_(u,f=pc(f,u)))?u:u[gc(Hs(f))];return null==q?A:ls(q,u,y)}function h_(u){return tr(u)&&wo(u)==Je}function bh(u,f,y,q,xe){return u===f||(null==u||null==f||!tr(u)&&!tr(f)?u!=u&&f!=f:function Ba(u,f,y,q,xe,Be){var Ze=Un(u),it=Un(f),lt=Ze?le:So(u),Ct=it?le:So(f),Tt=(lt=lt==Je?M:lt)==M,It=(Ct=Ct==Je?M:Ct)==M,$t=lt==Ct;if($t&&tl(u)){if(!tl(f))return!1;Ze=!0,Tt=!1}if($t&&!Tt)return Be||(Be=new Fa),Ze||yu(u)?XS(u,f,y,q,xe,Be):function KS(u,f,y,q,xe,Be,Ze){switch(y){case H:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Ie:return!(u.byteLength!=f.byteLength||!Be(new dp(u),new dp(f)));case E:case ie:case F:return ms(+u,+f);case Ae:return u.name==f.name&&u.message==f.message;case ze:case dt:return u==f+"";case Z:var it=ah;case Ye:if(it||(it=op),u.size!=f.size&&!(1&q))return!1;var Ct=Ze.get(u);if(Ct)return Ct==f;q|=2,Ze.set(u,f);var Tt=XS(it(u),it(f),q,xe,Be,Ze);return Ze.delete(u),Tt;case vt:if(Xc)return Xc.call(u)==Xc.call(f)}return!1}(u,f,lt,y,q,xe,Be);if(!(1&y)){var sn=Tt&&Mi.call(u,"__wrapped__"),Nt=It&&Mi.call(f,"__wrapped__");if(sn||Nt){var Qn=sn?u.value():u,An=Nt?f.value():f;return Be||(Be=new Fa),xe(Qn,An,y,q,Be)}}return!!$t&&(Be||(Be=new Fa),function qS(u,f,y,q,xe,Be){var Ze=1&y,it=Xv(u),lt=it.length;if(lt!=Xv(f).length&&!Ze)return!1;for(var It=lt;It--;){var $t=it[It];if(!(Ze?$t in f:Mi.call(f,$t)))return!1}var sn=Be.get(u),Nt=Be.get(f);if(sn&&Nt)return sn==f&&Nt==u;var Qn=!0;Be.set(u,f),Be.set(f,u);for(var An=Ze;++It<lt;){var Vn=u[$t=it[It]],pi=f[$t];if(q)var xs=Ze?q(pi,Vn,$t,f,u,Be):q(Vn,pi,$t,u,f,Be);if(!(xs===A?Vn===pi||xe(Vn,pi,y,q,Be):xs)){Qn=!1;break}An||(An="constructor"==$t)}if(Qn&&!An){var vr=u.constructor,ws=f.constructor;vr!=ws&&"constructor"in u&&"constructor"in f&&!("function"==typeof vr&&vr instanceof vr&&"function"==typeof ws&&ws instanceof ws)&&(Qn=!1)}return Be.delete(u),Be.delete(f),Qn}(u,f,y,q,xe,Be))}(u,f,y,q,bh,xe))}function fp(u,f,y,q){var xe=y.length,Be=xe,Ze=!q;if(null==u)return!Be;for(u=Pi(u);xe--;){var it=y[xe];if(Ze&&it[2]?it[1]!==u[it[0]]:!(it[0]in u))return!1}for(;++xe<Be;){var lt=(it=y[xe])[0],Ct=u[lt],Tt=it[1];if(Ze&&it[2]){if(Ct===A&&!(lt in u))return!1}else{var It=new Fa;if(q)var $t=q(Ct,Tt,lt,u,f,It);if(!($t===A?bh(Tt,Ct,3,q,It):$t))return!1}}return!0}function Fi(u){return!(!er(u)||function ZS(u){return!!vv&&vv in u}(u))&&(za(u)?MS:ks).test(du(u))}function Dv(u){return"function"==typeof u?u:null==u?Jo:"object"==typeof u?Un(u)?kv(u[0],u[1]):Ov(u):zh(u)}function mp(u){if(!cu(u))return zn(u);var f=[];for(var y in Pi(u))Mi.call(u,y)&&"constructor"!=y&&f.push(y);return f}function Oo(u,f){return u<f}function Rv(u,f){var y=-1,q=Pr(u)?gt(u.length):[];return Ul(u,function(xe,Be,Ze){q[++y]=f(xe,Be,Ze)}),q}function Ov(u){var f=Kv(u);return 1==f.length&&f[0][2]?ex(f[0][0],f[0][1]):function(y){return y===u||fp(y,u,f)}}function kv(u,f){return k_(u)&&lu(f)?ex(gc(u),f):function(y){var q=sb(y,u);return q===A&&q===f?ua(y,u):bh(f,q,3)}}function sa(u,f,y,q,xe){u!==f&&_h(f,function(Be,Ze){if(xe||(xe=new Fa),er(Be))!function Pv(u,f,y,q,xe,Be,Ze){var it=Qc(u,y),lt=Qc(f,y),Ct=Ze.get(lt);if(Ct)hc(u,y,Ct);else{var Tt=Be?Be(it,lt,y+"",u,f,Ze):A,It=Tt===A;if(It){var $t=Un(lt),sn=!$t&&tl(lt),Nt=!$t&&!sn&&yu(lt);Tt=lt,$t||sn||Nt?Un(it)?Tt=it:yr(it)?Tt=ko(it):sn?(It=!1,Tt=y_(lt,!0)):Nt?(It=!1,Tt=E_(lt,!0)):Tt=[]:kh(lt)||ql(lt)?(Tt=it,ql(it)?Tt=ob(it):(!er(it)||za(it))&&(Tt=Ap(lt))):It=!1}It&&(Ze.set(lt,Tt),xe(Tt,lt,q,Be,Ze),Ze.delete(lt)),hc(u,y,Tt)}}(u,f,Ze,y,sa,q,xe);else{var it=q?q(Qc(u,Ze),Be,Ze+"",u,f,xe):A;it===A&&(it=Be),hc(u,Ze,it)}},bs)}function Nv(u,f){var y=u.length;if(y)return Ua(f+=f<0?y:0,y)?u[f]:A}function p_(u,f,y){f=f.length?pn(f,function(Be){return Un(Be)?function(Ze){return Qd(Ze,1===Be.length?Be[0]:Be)}:Be}):[Jo];var q=-1;return f=pn(f,yo(wn())),function mN(ct,At){var gt=ct.length;for(ct.sort(At);gt--;)ct[gt]=ct[gt].value;return ct}(Rv(u,function(Be,Ze,it){return{criteria:pn(f,function(Ct){return Ct(Be)}),index:++q,value:Be}}),function(Be,Ze){return function WS(u,f,y){for(var q=-1,xe=u.criteria,Be=f.criteria,Ze=xe.length,it=y.length;++q<Ze;){var lt=_p(xe[q],Be[q]);if(lt)return q>=it?lt:lt*("desc"==y[q]?-1:1)}return u.index-f.index}(Be,Ze,y)})}function m_(u,f,y){for(var q=-1,xe=f.length,Be={};++q<xe;){var Ze=f[q],it=Qd(u,Ze);y(it,Ze)&&yh(Be,pc(Ze,u),it)}return Be}function Cn(u,f,y,q){var xe=q?hv:zc,Be=-1,Ze=f.length,it=u;for(u===f&&(f=ko(f)),y&&(it=pn(u,yo(y)));++Be<Ze;)for(var lt=0,Ct=f[Be],Tt=y?y(Ct):Ct;(lt=xe(it,Tt,lt,q))>-1;)it!==u&&Lt.call(it,lt,1),Lt.call(u,lt,1);return u}function g_(u,f){for(var y=u?f.length:0,q=y-1;y--;){var xe=f[y];if(y==q||xe!==Be){var Be=xe;Ua(xe)?Lt.call(u,xe,1):Vs(u,xe)}}return u}function Lv(u,f){return u+Ll(Bl()*(f-u+1))}function __(u,f){var y="";if(!u||f<1||f>Ne)return y;do{f%2&&(y+=u),(f=Ll(f/2))&&(u+=u)}while(f);return y}function ri(u,f){return Cp(tx(u,f,Jo),u+"")}function Bv(u){return kS(vu(u))}function nu(u,f){var y=vu(u);return F_(y,Jd(f,0,y.length))}function yh(u,f,y,q){if(!er(u))return u;for(var xe=-1,Be=(f=pc(f,u)).length,Ze=Be-1,it=u;null!=it&&++xe<Be;){var lt=gc(f[xe]),Ct=y;if("__proto__"===lt||"constructor"===lt||"prototype"===lt)return u;if(xe!=Ze){var Tt=it[lt];(Ct=q?q(Tt,lt,it):A)===A&&(Ct=er(Tt)?Tt:Ua(f[xe+1])?[]:{})}qd(it,lt,Ct),it=it[lt]}return u}var jv=Zi?function(u,f){return Zi.set(u,f),u}:Jo,zS=Xr?function(u,f){return Xr(u,"toString",{configurable:!0,enumerable:!1,value:_b(f),writable:!0})}:Jo;function HS(u){return F_(vu(u))}function js(u,f,y){var q=-1,xe=u.length;f<0&&(f=-f>xe?0:xe+f),(y=y>xe?xe:y)<0&&(y+=xe),xe=f>y?0:y-f>>>0,f>>>=0;for(var Be=gt(xe);++q<xe;)Be[q]=u[q+f];return Be}function Dt(u,f){var y;return Ul(u,function(q,xe,Be){return!(y=f(q,xe,Be))}),!!y}function li(u,f,y){var q=0,xe=null==u?q:u.length;if("number"==typeof f&&f==f&&xe<=2147483647){for(;q<xe;){var Be=q+xe>>>1,Ze=u[Be];null!==Ze&&!Jr(Ze)&&(y?Ze<=f:Ze<f)?q=Be+1:xe=Be}return xe}return br(u,f,Jo,y)}function br(u,f,y,q){var xe=0,Be=null==u?0:u.length;if(0===Be)return 0;for(var Ze=(f=y(f))!=f,it=null===f,lt=Jr(f),Ct=f===A;xe<Be;){var Tt=Ll((xe+Be)/2),It=y(u[Tt]),$t=It!==A,sn=null===It,Nt=It==It,Qn=Jr(It);if(Ze)var An=q||Nt;else An=Ct?Nt&&(q||$t):it?Nt&&$t&&(q||!sn):lt?Nt&&$t&&!sn&&(q||!Qn):!sn&&!Qn&&(q?It<=f:It<f);An?xe=Tt+1:Be=Tt}return Hi(Be,4294967294)}function Tr(u,f){for(var y=-1,q=u.length,xe=0,Be=[];++y<q;){var Ze=u[y],it=f?f(Ze):Ze;if(!y||!ms(it,lt)){var lt=it;Be[xe++]=0===Ze?0:Ze}}return Be}function qr(u){return"number"==typeof u?u:Jr(u)?NaN:+u}function Ko(u){if("string"==typeof u)return u;if(Un(u))return pn(u,Ko)+"";if(Jr(u))return fh?fh.call(u):"";var f=u+"";return"0"==f&&1/u==-we?"-0":f}function Us(u,f,y){var q=-1,xe=ih,Be=u.length,Ze=!0,it=[],lt=it;if(y)Ze=!1,xe=Wg;else if(Be>=200){var Ct=f?null:$S(u);if(Ct)return op(Ct);Ze=!1,xe=sh,lt=new Kd}else lt=f?[]:it;e:for(;++q<Be;){var Tt=u[q],It=f?f(Tt):Tt;if(Tt=y||0!==Tt?Tt:0,Ze&&It==It){for(var $t=lt.length;$t--;)if(lt[$t]===It)continue e;f&&lt.push(It),it.push(Tt)}else xe(lt,It,y)||(lt!==it&&lt.push(It),it.push(Tt))}return it}function Vs(u,f){return null==(u=N_(u,f=pc(f,u)))||delete u[gc(Hs(f))]}function gp(u,f,y,q){return yh(u,f,y(Qd(u,f)),q)}function iu(u,f,y,q){for(var xe=u.length,Be=q?xe:-1;(q?Be--:++Be<xe)&&f(u[Be],Be,u););return y?js(u,q?0:Be,q?Be+1:xe):js(u,q?Be+1:0,q?xe:Be)}function Uv(u,f){var y=u;return y instanceof jn&&(y=y.value()),ep(f,function(q,xe){return xe.func.apply(xe.thisArg,Ia([q],xe.args))},y)}function Vv(u,f,y){var q=u.length;if(q<2)return q?Us(u[0]):[];for(var xe=-1,Be=gt(q);++xe<q;)for(var Ze=u[xe],it=-1;++it<q;)it!=xe&&(Be[xe]=Zd(Be[xe]||Ze,u[it],f,y));return Us(Kr(Be,1),f,y)}function b_(u,f,y){for(var q=-1,xe=u.length,Be=f.length,Ze={};++q<xe;)y(Ze,u[q],q<Be?f[q]:A);return Ze}function co(u){return yr(u)?u:[]}function aa(u){return"function"==typeof u?u:Jo}function pc(u,f){return Un(u)?u:k_(u,f)?[u]:nx(Ti(u))}var ru=ri;function Eo(u,f,y){var q=u.length;return y=y===A?q:y,!f&&y>=q?u:js(u,f,y)}var zv=Gd||function(u){return bo.clearTimeout(u)};function y_(u,f){if(f)return u.slice();var y=u.length,q=xv?xv(y):new u.constructor(y);return u.copy(q),q}function v_(u){var f=new u.constructor(u.byteLength);return new dp(f).set(new dp(u)),f}function E_(u,f){var y=f?v_(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.length)}function _p(u,f){if(u!==f){var y=u!==A,q=null===u,xe=u==u,Be=Jr(u),Ze=f!==A,it=null===f,lt=f==f,Ct=Jr(f);if(!it&&!Ct&&!Be&&u>f||Be&&Ze&&lt&&!it&&!Ct||q&&Ze&&lt||!y&&lt||!xe)return 1;if(!q&&!Be&&!Ct&&u<f||Ct&&y&&xe&&!q&&!Be||it&&y&&xe||!Ze&&xe||!lt)return-1}return 0}function A_(u,f,y,q){for(var xe=-1,Be=u.length,Ze=y.length,it=-1,lt=f.length,Ct=Jn(Be-Ze,0),Tt=gt(lt+Ct),It=!q;++it<lt;)Tt[it]=f[it];for(;++xe<Ze;)(It||xe<Be)&&(Tt[y[xe]]=u[xe]);for(;Ct--;)Tt[it++]=u[xe++];return Tt}function bp(u,f,y,q){for(var xe=-1,Be=u.length,Ze=-1,it=y.length,lt=-1,Ct=f.length,Tt=Jn(Be-it,0),It=gt(Tt+Ct),$t=!q;++xe<Tt;)It[xe]=u[xe];for(var sn=xe;++lt<Ct;)It[sn+lt]=f[lt];for(;++Ze<it;)($t||xe<Be)&&(It[sn+y[Ze]]=u[xe++]);return It}function ko(u,f){var y=-1,q=u.length;for(f||(f=gt(q));++y<q;)f[y]=u[y];return f}function ca(u,f,y,q){var xe=!y;y||(y={});for(var Be=-1,Ze=f.length;++Be<Ze;){var it=f[Be],lt=q?q(y[it],u[it],it,y,u):A;lt===A&&(lt=u[it]),xe?fc(y,it,lt):qd(y,it,lt)}return y}function ou(u,f){return function(y,q){var xe=Un(y)?uv:i_,Be=f?f():{};return xe(y,u,wn(q,2),Be)}}function su(u){return ri(function(f,y){var q=-1,xe=y.length,Be=xe>1?y[xe-1]:A,Ze=xe>2?y[2]:A;for(Be=u.length>3&&"function"==typeof Be?(xe--,Be):A,Ze&&Co(y[0],y[1],Ze)&&(Be=xe<3?A:Be,xe=1),f=Pi(f);++q<xe;){var it=y[q];it&&u(f,it,q,Be)}return f})}function Wv(u,f){return function(y,q){if(null==y)return y;if(!Pr(y))return u(y,q);for(var xe=y.length,Be=f?xe:-1,Ze=Pi(y);(f?Be--:++Be<xe)&&!1!==q(Ze[Be],Be,Ze););return y}}function Ao(u){return function(f,y,q){for(var xe=-1,Be=Pi(f),Ze=q(f),it=Ze.length;it--;){var lt=Ze[u?it:++xe];if(!1===y(Be[lt],lt,Be))break}return f}}function Qi(u){return function(f){var y=Fl(f=Ti(f))?Rr(f):A,q=y?y[0]:f.charAt(0),xe=y?Eo(y,1).join(""):f.slice(1);return q[u]()+xe}}function Kc(u){return function(f){return ep(Uh(Yx(f).replace(Rt,"")),u,"")}}function vh(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var y=ph(u.prototype),q=u.apply(y,f);return er(q)?q:y}}function $v(u){return function(f,y,q){var xe=Pi(f);if(!Pr(f)){var Be=wn(y,3);f=zr(f),y=function(it){return Be(xe[it],it,xe)}}var Ze=u(f,y,q);return Ze>-1?xe[Be?f[Ze]:Ze]:A}}function C_(u){return qc(function(f){var y=f.length,q=y,xe=us.prototype.thru;for(u&&f.reverse();q--;){var Be=f[q];if("function"!=typeof Be)throw new Ns(g);if(xe&&!Ze&&"wrapper"==xp(Be))var Ze=new us([],!0)}for(q=Ze?q:y;++q<y;){var it=xp(Be=f[q]),lt="wrapper"==it?Wl(Be):A;Ze=lt&&mc(lt[0])&&424==lt[1]&&!lt[4].length&&1==lt[9]?Ze[xp(lt[0])].apply(Ze,lt[3]):1==Be.length&&mc(Be)?Ze[it]():Ze.thru(Be)}return function(){var Ct=arguments,Tt=Ct[0];if(Ze&&1==Ct.length&&Un(Tt))return Ze.plant(Tt).value();for(var It=0,$t=y?f[It].apply(this,Ct):Tt;++It<y;)$t=f[It].call(this,$t);return $t}})}function xh(u,f,y,q,xe,Be,Ze,it,lt,Ct){var Tt=f&S,It=1&f,$t=2&f,sn=24&f,Nt=512&f,Qn=$t?A:vh(u);return function An(){for(var Vn=arguments.length,pi=gt(Vn),xs=Vn;xs--;)pi[xs]=arguments[xs];if(sn)var vr=ja(An),ws=function Vd(ct,At){for(var gt=ct.length,en=0;gt--;)ct[gt]===At&&++en;return en}(pi,vr);if(q&&(pi=A_(pi,q,xe,sn)),Be&&(pi=bp(pi,Be,Ze,sn)),Vn-=ws,sn&&Vn<Ct){var dr=Gc(pi,vr);return M_(u,f,xh,An.placeholder,y,pi,dr,it,lt,Ct-Vn)}var Ga=It?y:this,ha=$t?Ga[u]:u;return Vn=pi.length,it?pi=function Zc(u,f){for(var y=u.length,q=Hi(f.length,y),xe=ko(u);q--;){var Be=f[q];u[q]=Ua(Be,y)?xe[Be]:A}return u}(pi,it):Nt&&Vn>1&&pi.reverse(),Tt&&lt<Vn&&(pi.length=lt),this&&this!==bo&&this instanceof An&&(ha=Qn||vh(ha)),ha.apply(Ga,pi)}}function wh(u,f){return function(y,q){return function LS(u,f,y,q){return hs(u,function(xe,Be,Ze){f(q,y(xe),Be,Ze)}),q}(y,u,f(q),{})}}function la(u,f){return function(y,q){var xe;if(y===A&&q===A)return f;if(y!==A&&(xe=y),q!==A){if(xe===A)return q;"string"==typeof y||"string"==typeof q?(y=Ko(y),q=Ko(q)):(y=qr(y),q=qr(q)),xe=u(y,q)}return xe}}function T_(u){return qc(function(f){return f=pn(f,yo(wn())),ri(function(y){var q=this;return u(f,function(xe){return ls(xe,q,y)})})})}function Hl(u,f){var y=(f=f===A?" ":Ko(f)).length;if(y<2)return y?__(f,u):f;var q=__(f,dh(u/vo(f)));return Fl(f)?Eo(Rr(q),0,u).join(""):q.slice(0,u)}function Eh(u){return function(f,y,q){return q&&"number"!=typeof q&&Co(f,y,q)&&(y=q=A),f=Gs(f),y===A?(y=f,f=0):y=Gs(y),function VS(u,f,y,q){for(var xe=-1,Be=Jn(dh((f-u)/(y||1)),0),Ze=gt(Be);Be--;)Ze[q?Be:++xe]=u,u+=y;return Ze}(f,y,q=q===A?f<y?1:-1:Gs(q),u)}}function au(u){return function(f,y){return"string"==typeof f&&"string"==typeof y||(f=gs(f),y=gs(y)),u(f,y)}}function M_(u,f,y,q,xe,Be,Ze,it,lt,Ct){var Tt=8&f;f|=Tt?_:64,4&(f&=~(Tt?64:_))||(f&=-4);var Qn=[u,f,xe,Tt?Be:A,Tt?Ze:A,Tt?A:Be,Tt?A:Ze,it,lt,Ct],An=y.apply(A,Qn);return mc(u)&&Yl(An,Qn),An.placeholder=q,Tp(An,u,f)}function vp(u){var f=Or[u];return function(y,q){if(y=gs(y),(q=null==q?0:Hi(Xn(q),292))&&_r(y)){var xe=(Ti(y)+"e").split("e");return+((xe=(Ti(f(xe[0]+"e"+(+xe[1]+q)))+"e").split("e"))[0]+"e"+(+xe[1]-q))}return f(y)}}var $S=Oa&&1/op(new Oa([,-0]))[1]==we?function(u){return new Oa(u)}:Nr;function Gl(u){return function(f){var y=So(f);return y==Z?ah(f):y==Ye?function AS(ct){var At=-1,gt=Array(ct.size);return ct.forEach(function(en){gt[++At]=[en,en]}),gt}(f):function oh(ct,At){return pn(At,function(gt){return[gt,ct[gt]]})}(f,u(f))}}function fs(u,f,y,q,xe,Be,Ze,it){var lt=2&f;if(!lt&&"function"!=typeof u)throw new Ns(g);var Ct=q?q.length:0;if(Ct||(f&=-97,q=xe=A),Ze=Ze===A?Ze:Jn(Xn(Ze),0),it=it===A?it:Xn(it),Ct-=xe?xe.length:0,64&f){var Tt=q,It=xe;q=xe=A}var $t=lt?A:Wl(u),sn=[u,f,y,q,xe,Tt,It,Be,Ze,it];if($t&&function QS(u,f){var y=u[1],q=f[1],xe=y|q;if(!(xe<131)&&!(q==S&&8==y||q==S&&256==y&&u[7].length<=f[8]||384==q&&f[7].length<=f[8]&&8==y))return u;1&q&&(u[2]=f[2],xe|=1&y?0:4);var it=f[3];if(it){var lt=u[3];u[3]=lt?A_(lt,it,f[4]):it,u[4]=lt?Gc(u[3],R):f[4]}(it=f[5])&&(u[5]=(lt=u[5])?bp(lt,it,f[6]):it,u[6]=lt?Gc(u[5],R):f[6]),(it=f[7])&&(u[7]=it),q&S&&(u[8]=null==u[8]?f[8]:Hi(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=xe}(sn,$t),u=sn[0],f=sn[1],y=sn[2],q=sn[3],xe=sn[4],!(it=sn[9]=sn[9]===A?lt?0:u.length:Jn(sn[9]-Ct,0))&&24&f&&(f&=-25),f&&1!=f)Nt=8==f||16==f?function S_(u,f,y){var q=vh(u);return function xe(){for(var Be=arguments.length,Ze=gt(Be),it=Be,lt=ja(xe);it--;)Ze[it]=arguments[it];var Ct=Be<3&&Ze[0]!==lt&&Ze[Be-1]!==lt?[]:Gc(Ze,lt);return(Be-=Ct.length)<y?M_(u,f,xh,xe.placeholder,A,Ze,Ct,A,A,y-Be):ls(this&&this!==bo&&this instanceof xe?q:u,this,Ze)}}(u,f,it):f!=_&&33!=f||xe.length?xh.apply(A,sn):function yp(u,f,y,q){var xe=1&f,Be=vh(u);return function Ze(){for(var it=-1,lt=arguments.length,Ct=-1,Tt=q.length,It=gt(Tt+lt),$t=this&&this!==bo&&this instanceof Ze?Be:u;++Ct<Tt;)It[Ct]=q[Ct];for(;lt--;)It[Ct++]=arguments[++it];return ls($t,xe?y:this,It)}}(u,f,y,q);else var Nt=function zl(u,f,y){var q=1&f,xe=vh(u);return function Be(){return(this&&this!==bo&&this instanceof Be?xe:u).apply(q?y:this,arguments)}}(u,f,y);return Tp(($t?jv:Yl)(Nt,sn),u,f)}function Yv(u,f,y,q){return u===A||ms(u,Hd[y])&&!Mi.call(q,y)?f:u}function YS(u,f,y,q,xe,Be){return er(u)&&er(f)&&(Be.set(f,u),sa(u,f,A,YS,Be),Be.delete(f)),u}function I_(u){return kh(u)?A:u}function XS(u,f,y,q,xe,Be){var Ze=1&y,it=u.length,lt=f.length;if(it!=lt&&!(Ze&&lt>it))return!1;var Ct=Be.get(u),Tt=Be.get(f);if(Ct&&Tt)return Ct==f&&Tt==u;var It=-1,$t=!0,sn=2&y?new Kd:A;for(Be.set(u,f),Be.set(f,u);++It<it;){var Nt=u[It],Qn=f[It];if(q)var An=Ze?q(Qn,Nt,It,f,u,Be):q(Nt,Qn,It,u,f,Be);if(An!==A){if(An)continue;$t=!1;break}if(sn){if(!tp(f,function(Vn,pi){if(!sh(sn,pi)&&(Nt===Vn||xe(Nt,Vn,y,q,Be)))return sn.push(pi)})){$t=!1;break}}else if(Nt!==Qn&&!xe(Nt,Qn,y,q,Be)){$t=!1;break}}return Be.delete(u),Be.delete(f),$t}function qc(u){return Cp(tx(u,A,fu),u+"")}function Xv(u){return l_(u,zr,D_)}function Ah(u){return l_(u,bs,da)}var Wl=Zi?function(u){return Zi.get(u)}:Nr;function xp(u){for(var f=u.name+"",y=Pa[f],q=Mi.call(Pa,f)?y.length:0;q--;){var xe=y[q],Be=xe.func;if(null==Be||Be==u)return xe.name}return f}function ja(u){return(Mi.call(De,"placeholder")?De:u).placeholder}function wn(){var u=De.iteratee||bb;return u=u===bb?Dv:u,arguments.length?u(arguments[0],arguments[1]):u}function $l(u,f){var y=u.__data__;return function Sp(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?y["string"==typeof f?"string":"hash"]:y.map}function Kv(u){for(var f=zr(u),y=f.length;y--;){var q=f[y],xe=u[q];f[y]=[q,xe,lu(xe)]}return f}function Jc(u,f){var y=function nt(ct,At){return null==ct?A:ct[At]}(u,f);return Fi(y)?y:A}var D_=Zg?function(u){return null==u?[]:(u=Pi(u),Ma(Zg(u),function(f){return Jg.call(u,f)}))}:il,da=Zg?function(u){for(var f=[];u;)Ia(f,D_(u)),u=on(u);return f}:il,So=wo;function O_(u,f,y){for(var q=-1,xe=(f=pc(f,u)).length,Be=!1;++q<xe;){var Ze=gc(f[q]);if(!(Be=null!=u&&y(u,Ze)))break;u=u[Ze]}return Be||++q!=xe?Be:!!(xe=null==u?0:u.length)&&nl(xe)&&Ua(Ze,xe)&&(Un(u)||ql(u))}function Ap(u){return"function"!=typeof u.constructor||cu(u)?{}:ph(on(u))}function Zv(u){return Un(u)||ql(u)||!!(ao&&u&&u[ao])}function Ua(u,f){var y=typeof u;return!!(f=f??Ne)&&("number"==y||"symbol"!=y&&Ta.test(u))&&u>-1&&u%1==0&&u<f}function Co(u,f,y){if(!er(y))return!1;var q=typeof f;return!!("number"==q?Pr(y)&&Ua(f,y.length):"string"==q&&f in y)&&ms(y[f],u)}function k_(u,f){if(Un(u))return!1;var y=typeof u;return!("number"!=y&&"symbol"!=y&&"boolean"!=y&&null!=u&&!Jr(u))||Zu.test(u)||!Bd.test(u)||null!=f&&u in Pi(f)}function mc(u){var f=xp(u),y=De[f];if("function"!=typeof y||!(f in jn.prototype))return!1;if(u===y)return!0;var q=Wl(y);return!!q&&u===q[0]}(Da&&So(new Da(new ArrayBuffer(1)))!=H||Ra&&So(new Ra)!=Z||Pn&&So(Pn.resolve())!=Q||Oa&&So(new Oa)!=Ye||Wd&&So(new Wd)!=zt)&&(So=function(u){var f=wo(u),y=f==M?u.constructor:A,q=y?du(y):"";if(q)switch(q){case $d:return H;case Na:return Z;case hh:return Q;case Av:return Ye;case Yc:return zt}return f});var Qv=ch?za:Hh;function cu(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||Hd)}function lu(u){return u==u&&!er(u)}function ex(u,f){return function(y){return null!=y&&y[u]===f&&(f!==A||u in Pi(y))}}function tx(u,f,y){return f=Jn(f===A?u.length-1:f,0),function(){for(var q=arguments,xe=-1,Be=Jn(q.length-f,0),Ze=gt(Be);++xe<Be;)Ze[xe]=q[f+xe];xe=-1;for(var it=gt(f+1);++xe<f;)it[xe]=q[xe];return it[f]=y(Ze),ls(u,this,it)}}function N_(u,f){return f.length<2?u:Qd(u,js(f,0,-1))}function Qc(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var Yl=Xl(jv),Va=Ev||function(u,f){return bo.setTimeout(u,f)},Cp=Xl(zS);function Tp(u,f,y){var q=f+"";return Cp(u,function Jv(u,f){var y=f.length;if(!y)return u;var q=y-1;return f[q]=(y>1?"& ":"")+f[q],f=f.join(y>2?", ":" "),u.replace(Ol,"{\n/* [wrapped with "+f+"] */\n")}(q,function DN(u,f){return Ps(ot,function(y){var q="_."+y[0];f&y[1]&&!ih(u,q)&&u.push(q)}),u.sort()}(function R_(u){var f=u.match(Fc);return f?f[1].split(jd):[]}(q),y)))}function Xl(u){var f=0,y=0;return function(){var q=uh(),xe=16-(q-y);if(y=q,xe>0){if(++f>=800)return arguments[0]}else f=0;return u.apply(A,arguments)}}function F_(u,f){var y=-1,q=u.length,xe=q-1;for(f=f===A?q:f;++y<f;){var Be=Lv(y,xe),Ze=u[Be];u[Be]=u[y],u[y]=Ze}return u.length=f,u}var nx=function Po(u){var f=Up(u,function(q){return 500===y.size&&y.clear(),q}),y=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(Qu,function(y,q,xe,Be){f.push(xe?Be.replace(Bc,"$1"):q||y)}),f});function gc(u){if("string"==typeof u||Jr(u))return u;var f=u+"";return"0"==f&&1/u==-we?"-0":f}function du(u){if(null!=u){try{return lp.call(u)}catch{}try{return u+""}catch{}}return""}function eC(u){if(u instanceof jn)return u.clone();var f=new us(u.__wrapped__,u.__chain__);return f.__actions__=ko(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var tC=ri(function(u,f){return yr(u)?Zd(u,Kr(f,1,yr,!0)):[]}),nC=ri(function(u,f){var y=Hs(f);return yr(y)&&(y=A),yr(u)?Zd(u,Kr(f,1,yr,!0),wn(y,2)):[]}),Vr=ri(function(u,f){var y=Hs(f);return yr(y)&&(y=A),yr(u)?Zd(u,Kr(f,1,yr,!0),A,y):[]});function L_(u,f,y){var q=null==u?0:u.length;if(!q)return-1;var xe=null==y?0:Xn(y);return xe<0&&(xe=Jn(q+xe,0)),Ud(u,wn(f,3),xe)}function Ch(u,f,y){var q=null==u?0:u.length;if(!q)return-1;var xe=q-1;return y!==A&&(xe=Xn(y),xe=y<0?Jn(q+xe,0):Hi(xe,q-1)),Ud(u,wn(f,3),xe,!0)}function fu(u){return null!=u&&u.length?Kr(u,1):[]}function aC(u){return u&&u.length?u[0]:A}var pu=ri(function(u){var f=pn(u,co);return f.length&&f[0]===u[0]?u_(f):[]}),PN=ri(function(u){var f=Hs(u),y=pn(u,co);return f===Hs(y)?f=A:y.pop(),y.length&&y[0]===u[0]?u_(y,wn(f,2)):[]}),ix=ri(function(u){var f=Hs(u),y=pn(u,co);return(f="function"==typeof f?f:A)&&y.pop(),y.length&&y[0]===u[0]?u_(y,A,f):[]});function Hs(u){var f=null==u?0:u.length;return f?u[f-1]:A}var uC=ri(rx);function rx(u,f){return u&&u.length&&f&&f.length?Cn(u,f):u}var hC=qc(function(u,f){var y=null==u?0:u.length,q=o_(u,f);return g_(u,pn(f,function(xe){return Ua(xe,y)?+xe:xe}).sort(_p)),q});function U_(u){return null==u?u:Cr.call(u)}var FN=ri(function(u){return Us(Kr(u,1,yr,!0))}),bC=ri(function(u){var f=Hs(u);return yr(f)&&(f=A),Us(Kr(u,1,yr,!0),wn(f,2))}),yC=ri(function(u){var f=Hs(u);return f="function"==typeof f?f:A,Us(Kr(u,1,yr,!0),A,f)});function z_(u){if(!u||!u.length)return[];var f=0;return u=Ma(u,function(y){if(yr(y))return f=Jn(y.length,f),!0}),gv(f,function(y){return pn(u,rh(y))})}function H_(u,f){if(!u||!u.length)return[];var y=z_(u);return null==f?y:pn(y,function(q){return ls(f,A,q)})}var LN=ri(function(u,f){return yr(u)?Zd(u,f):[]}),lx=ri(function(u){return Vv(Ma(u,yr))}),BN=ri(function(u){var f=Hs(u);return yr(f)&&(f=A),Vv(Ma(u,yr),wn(f,2))}),xC=ri(function(u){var f=Hs(u);return f="function"==typeof f?f:A,Vv(Ma(u,yr),A,f)}),wC=ri(z_),UN=ri(function(u){var f=u.length,y=f>1?u[f-1]:A;return y="function"==typeof y?(u.pop(),y):A,H_(u,y)});function Op(u){var f=De(u);return f.__chain__=!0,f}function W_(u,f){return f(u)}var zN=qc(function(u){var f=u.length,y=f?u[0]:0,q=this.__wrapped__,xe=function(Be){return o_(Be,u)};return!(f>1||this.__actions__.length)&&q instanceof jn&&Ua(y)?((q=q.slice(y,+y+(f?1:0))).__actions__.push({func:W_,args:[xe],thisArg:A}),new us(q,this.__chain__).thru(function(Be){return f&&!Be.length&&Be.push(A),Be})):this.thru(xe)}),hx=ou(function(u,f,y){Mi.call(u,y)?++u[y]:fc(u,y,1)}),px=$v(L_),Np=$v(Ch);function mx(u,f){return(Un(u)?Ps:Ul)(u,wn(f,3))}function gx(u,f){return(Un(u)?Qf:hp)(u,wn(f,3))}var _x=ou(function(u,f,y){Mi.call(u,y)?u[y].push(f):fc(u,y,[f])}),SC=ri(function(u,f,y){var q=-1,xe="function"==typeof f,Be=Pr(u)?gt(u.length):[];return Ul(u,function(Ze){Be[++q]=xe?ls(f,Ze,y):eu(Ze,f,y)}),Be}),CC=ou(function(u,f,y){fc(u,y,f)});function Lp(u,f){return(Un(u)?pn:Rv)(u,wn(f,3))}var TC=ou(function(u,f,y){u[y?0:1].push(f)},function(){return[[],[]]}),xx=ri(function(u,f){if(null==u)return[];var y=f.length;return y>1&&Co(u,f[0],f[1])?f=[]:y>2&&Co(f[0],f[1],f[2])&&(f=[f[0]]),p_(u,Kr(f,1),[])}),Bp=ds||function(){return bo.Date.now()};function Ex(u,f,y){return f=y?A:f,fs(u,S,A,A,A,A,f=u&&null==f?u.length:f)}function K_(u,f){var y;if("function"!=typeof f)throw new Ns(g);return u=Xn(u),function(){return--u>0&&(y=f.apply(this,arguments)),u<=1&&(f=A),y}}var q_=ri(function(u,f,y){var q=1;if(y.length){var xe=Gc(y,ja(q_));q|=_}return fs(u,q,f,y,xe)}),J_=ri(function(u,f,y){var q=3;if(y.length){var xe=Gc(y,ja(J_));q|=_}return fs(f,q,u,y,xe)});function jp(u,f,y){var q,xe,Be,Ze,it,lt,Ct=0,Tt=!1,It=!1,$t=!0;if("function"!=typeof u)throw new Ns(g);function sn(dr){var Ga=q,ha=xe;return q=xe=A,Ct=dr,Ze=u.apply(ha,Ga)}function An(dr){var Ga=dr-lt;return lt===A||Ga>=f||Ga<0||It&&dr-Ct>=Be}function Vn(){var dr=Bp();if(An(dr))return pi(dr);it=Va(Vn,function Qn(dr){var Tb=f-(dr-lt);return It?Hi(Tb,Be-(dr-Ct)):Tb}(dr))}function pi(dr){return it=A,$t&&q?sn(dr):(q=xe=A,Ze)}function ws(){var dr=Bp(),Ga=An(dr);if(q=arguments,xe=this,lt=dr,Ga){if(it===A)return function Nt(dr){return Ct=dr,it=Va(Vn,f),Tt?sn(dr):Ze}(lt);if(It)return zv(it),it=Va(Vn,f),sn(lt)}return it===A&&(it=Va(Vn,f)),Ze}return f=gs(f)||0,er(y)&&(Tt=!!y.leading,Be=(It="maxWait"in y)?Jn(gs(y.maxWait)||0,f):Be,$t="trailing"in y?!!y.trailing:$t),ws.cancel=function xs(){it!==A&&zv(it),Ct=0,q=lt=xe=it=A},ws.flush=function vr(){return it===A?Ze:pi(Bp())},ws}var Z_=ri(function(u,f){return Ur(u,1,f)}),IC=ri(function(u,f,y){return Ur(u,gs(f)||0,y)});function Up(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new Ns(g);var y=function(){var q=arguments,xe=f?f.apply(this,q):q[0],Be=y.cache;if(Be.has(xe))return Be.get(xe);var Ze=u.apply(this,q);return y.cache=Be.set(xe,Ze)||Be,Ze};return y.cache=new(Up.Cache||uc),y}function Vp(u){if("function"!=typeof u)throw new Ns(g);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}Up.Cache=uc;var Tx=ru(function(u,f){var y=(f=1==f.length&&Un(f[0])?pn(f[0],yo(wn())):pn(Kr(f,1),yo(wn()))).length;return ri(function(q){for(var xe=-1,Be=Hi(q.length,y);++xe<Be;)q[xe]=f[xe].call(this,q[xe]);return ls(u,this,q)})}),zp=ri(function(u,f){var y=Gc(f,ja(zp));return fs(u,_,A,f,y)}),Kl=ri(function(u,f){var y=Gc(f,ja(Kl));return fs(u,64,A,f,y)}),Hp=qc(function(u,f){return fs(u,256,A,A,A,f)});function ms(u,f){return u===f||u!=u&&f!=f}var eb=au(d_),FC=au(function(u,f){return u>=f}),ql=h_(function(){return arguments}())?h_:function(u){return tr(u)&&Mi.call(u,"callee")&&!Jg.call(u,"callee")},Un=gt.isArray,Dx=_S?yo(_S):function BS(u){return tr(u)&&wo(u)==Ie};function Pr(u){return null!=u&&nl(u.length)&&!za(u)}function yr(u){return tr(u)&&Pr(u)}var tl=IS||Hh,WN=bS?yo(bS):function f_(u){return tr(u)&&wo(u)==ie};function Yp(u){if(!tr(u))return!1;var f=wo(u);return f==Ae||"[object DOMException]"==f||"string"==typeof u.message&&"string"==typeof u.name&&!kh(u)}function za(u){if(!er(u))return!1;var f=wo(u);return f==et||f==ce||"[object AsyncFunction]"==f||"[object Proxy]"==f}function Dh(u){return"number"==typeof u&&u==Xn(u)}function nl(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Ne}function er(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function tr(u){return null!=u&&"object"==typeof u}var Rh=St?yo(St):function Iv(u){return tr(u)&&So(u)==Z};function Fx(u){return"number"==typeof u||tr(u)&&wo(u)==F}function kh(u){if(!tr(u)||wo(u)!=M)return!1;var f=on(u);if(null===f)return!0;var y=Mi.call(f,"constructor")&&f.constructor;return"function"==typeof y&&y instanceof y&&lp.call(y)==CS}var Xp=yS?yo(yS):function jS(u){return tr(u)&&wo(u)==ze},Ph=cn?yo(cn):function pp(u){return tr(u)&&So(u)==Ye};function bu(u){return"string"==typeof u||!Un(u)&&tr(u)&&wo(u)==dt}function Jr(u){return"symbol"==typeof u||tr(u)&&wo(u)==vt}var yu=th?yo(th):function Xo(u){return tr(u)&&nl(u.length)&&!!ci[wo(u)]},ib=au(Oo),zC=au(function(u,f){return u<=f});function Jl(u){if(!u)return[];if(Pr(u))return bu(u)?Rr(u):ko(u);if(si&&u[si])return function rp(ct){for(var At,gt=[];!(At=ct.next()).done;)gt.push(At.value);return gt}(u[si]());var f=So(u);return(f==Z?ah:f==Ye?op:vu)(u)}function Gs(u){return u?(u=gs(u))===we||u===-we?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Xn(u){var f=Gs(u),y=f%1;return f==f?y?f-y:f:0}function rb(u){return u?Jd(Xn(u),0,fe):0}function gs(u){if("number"==typeof u)return u;if(Jr(u))return NaN;if(er(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=er(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=ip(u);var y=ki.test(u);return y||Ca.test(u)?hN(u.slice(2),y?2:8):xi.test(u)?NaN:+u}function ob(u){return ca(u,bs(u))}function Ti(u){return null==u?"":Ko(u)}var HC=su(function(u,f){if(cu(f)||Pr(f))ca(f,zr(f),u);else for(var y in f)Mi.call(f,y)&&qd(u,y,f[y])}),Bx=su(function(u,f){ca(f,bs(f),u)}),Kp=su(function(u,f,y,q){ca(f,bs(f),u,q)}),GC=su(function(u,f,y,q){ca(f,zr(f),u,q)}),_s=qc(o_),WC=ri(function(u,f){u=Pi(u);var y=-1,q=f.length,xe=q>2?f[2]:A;for(xe&&Co(f[0],f[1],xe)&&(q=1);++y<q;)for(var Be=f[y],Ze=bs(Be),it=-1,lt=Ze.length;++it<lt;){var Ct=Ze[it],Tt=u[Ct];(Tt===A||ms(Tt,Hd[Ct])&&!Mi.call(u,Ct))&&(u[Ct]=Be[Ct])}return u}),$C=ri(function(u){return u.push(A,YS),ls(Jp,A,u)});function sb(u,f,y){var q=null==u?A:Qd(u,f);return q===A?y:q}function ua(u,f){return null!=u&&O_(u,f,kr)}var Nh=wh(function(u,f,y){null!=f&&"function"!=typeof f.toString&&(f=lh.call(f)),u[f]=y},_b(Jo)),Ux=wh(function(u,f,y){null!=f&&"function"!=typeof f.toString&&(f=lh.call(f)),Mi.call(u,f)?u[f].push(y):u[f]=[y]},wn),Vx=ri(eu);function zr(u){return Pr(u)?t_(u):mp(u)}function bs(u){return Pr(u)?t_(u,!0):function tu(u){if(!er(u))return function Li(u){var f=[];if(null!=u)for(var y in Pi(u))f.push(y);return f}(u);var f=cu(u),y=[];for(var q in u)"constructor"==q&&(f||!Mi.call(u,q))||y.push(q);return y}(u)}var ab=su(function(u,f,y){sa(u,f,y)}),Jp=su(function(u,f,y,q){sa(u,f,y,q)}),KN=qc(function(u,f){var y={};if(null==u)return y;var q=!1;f=pn(f,function(Be){return Be=pc(Be,u),q||(q=Be.length>1),Be}),ca(u,Ah(u),y),q&&(y=Bs(y,7,I_));for(var xe=f.length;xe--;)Vs(y,f[xe]);return y}),zx=qc(function(u,f){return null==u?{}:function Fv(u,f){return m_(u,f,function(y,q){return ua(u,q)})}(u,f)});function Hx(u,f){if(null==u)return{};var y=pn(Ah(u),function(q){return[q]});return f=wn(f),m_(u,y,function(q,xe){return f(q,xe[0])})}var cb=Gl(zr),Fh=Gl(bs);function vu(u){return null==u?[]:$g(u,zr(u))}var sT=Kc(function(u,f,y){return f=f.toLowerCase(),u+(y?$x(f):f)});function $x(u){return jh(Ti(u).toLowerCase())}function Yx(u){return(u=Ti(u))&&u.replace(cc,wS).replace(Jf,"")}var Lh=Kc(function(u,f,y){return u+(y?"-":"")+f.toLowerCase()}),bt=Kc(function(u,f,y){return u+(y?" ":"")+f.toLowerCase()}),Bh=Qi("toLowerCase"),Jx=Kc(function(u,f,y){return u+(y?"_":"")+f.toLowerCase()}),QN=Kc(function(u,f,y){return u+(y?" ":"")+jh(f)}),dT=Kc(function(u,f,y){return u+(y?" ":"")+f.toUpperCase()}),jh=Qi("toUpperCase");function Uh(u,f,y){return u=Ti(u),(f=y?A:f)===A?function Ht(ct){return cN.test(ct)}(u)?function bv(ct){return ct.match(Ci)||[]}(u):function pN(ct){return ct.match(Lc)||[]}(u):u.match(f)||[]}var ys=ri(function(u,f){try{return ls(u,A,f)}catch(y){return Yp(y)?y:new Bn(y)}}),tm=qc(function(u,f){return Ps(f,function(y){y=gc(y),fc(u,y,q_(u[y],u))}),u});function _b(u){return function(){return u}}var xu=C_(),hT=C_(!0);function Jo(u){return u}function bb(u){return Dv("function"==typeof u?u:Bs(u,1))}var fT=ri(function(u,f){return function(y){return eu(y,u,f)}}),tw=ri(function(u,f){return function(y){return eu(u,y,f)}});function vs(u,f,y){var q=zr(f),xe=c_(f,q);null==y&&(!er(f)||!xe.length&&q.length)&&(y=f,f=u,u=this,xe=c_(f,zr(f)));var Be=!(er(y)&&"chain"in y&&!y.chain),Ze=za(u);return Ps(xe,function(it){var lt=f[it];u[it]=lt,Ze&&(u.prototype[it]=function(){var Ct=this.__chain__;if(Be||Ct){var Tt=u(this.__wrapped__);return(Tt.__actions__=ko(this.__actions__)).push({func:lt,args:arguments,thisArg:u}),Tt.__chain__=Ct,Tt}return lt.apply(u,Ia([this.value()],arguments))})}),u}function Nr(){}var pT=T_(pn),tF=T_(nh),nF=T_(tp);function zh(u){return k_(u)?rh(gc(u)):function US(u){return function(f){return Qd(f,u)}}(u)}var xb=Eh(),wb=Eh(!0);function il(){return[]}function Hh(){return!1}var im=la(function(u,f){return u+f},0),iF=vp("ceil"),Sb=la(function(u,f){return u/f},1),$h=vp("floor"),yT=la(function(u,f){return u*f},1),vT=vp("round"),rF=la(function(u,f){return u-f},0);return De.after=function wx(u,f){if("function"!=typeof f)throw new Ns(g);return u=Xn(u),function(){if(--u<1)return f.apply(this,arguments)}},De.ary=Ex,De.assign=HC,De.assignIn=Bx,De.assignInWith=Kp,De.assignWith=GC,De.at=_s,De.before=K_,De.bind=q_,De.bindAll=tm,De.bindKey=J_,De.castArray=function OC(){if(!arguments.length)return[];var u=arguments[0];return Un(u)?u:[u]},De.chain=Op,De.chunk=function RN(u,f,y){f=(y?Co(u,f,y):f===A)?1:Jn(Xn(f),0);var q=null==u?0:u.length;if(!q||f<1)return[];for(var xe=0,Be=0,Ze=gt(dh(q/f));xe<q;)Ze[Be++]=js(u,xe,xe+=f);return Ze},De.compact=function ON(u){for(var f=-1,y=null==u?0:u.length,q=0,xe=[];++f<y;){var Be=u[f];Be&&(xe[q++]=Be)}return xe},De.concat=function uu(){var u=arguments.length;if(!u)return[];for(var f=gt(u-1),y=arguments[0],q=u;q--;)f[q-1]=arguments[q];return Ia(Un(y)?ko(y):[y],Kr(f,1))},De.cond=function gb(u){var f=null==u?0:u.length,y=wn();return u=f?pn(u,function(q){if("function"!=typeof q[1])throw new Ns(g);return[y(q[0]),q[1]]}):[],ri(function(q){for(var xe=-1;++xe<f;){var Be=u[xe];if(ls(Be[0],this,q))return ls(Be[1],this,q)}})},De.conforms=function uT(u){return function La(u){var f=zr(u);return function(y){return gh(y,u,f)}}(Bs(u,1))},De.constant=_b,De.countBy=hx,De.create=function Ha(u,f){var y=ph(u);return null==f?y:r_(y,f)},De.curry=function Ax(u,f,y){var q=fs(u,8,A,A,A,A,A,f=y?A:f);return q.placeholder=Ax.placeholder,q},De.curryRight=function Sx(u,f,y){var q=fs(u,16,A,A,A,A,A,f=y?A:f);return q.placeholder=Sx.placeholder,q},De.debounce=jp,De.defaults=WC,De.defaultsDeep=$C,De.defer=Z_,De.delay=IC,De.difference=tC,De.differenceBy=nC,De.differenceWith=Vr,De.drop=function iC(u,f,y){var q=null==u?0:u.length;return q?js(u,(f=y||f===A?1:Xn(f))<0?0:f,q):[]},De.dropRight=function Sh(u,f,y){var q=null==u?0:u.length;return q?js(u,0,(f=q-(f=y||f===A?1:Xn(f)))<0?0:f):[]},De.dropRightWhile=function rC(u,f){return u&&u.length?iu(u,wn(f,3),!0,!0):[]},De.dropWhile=function zs(u,f){return u&&u.length?iu(u,wn(f,3),!0):[]},De.fill=function hu(u,f,y,q){var xe=null==u?0:u.length;return xe?(y&&"number"!=typeof y&&Co(u,f,y)&&(y=0,q=xe),function NS(u,f,y,q){var xe=u.length;for((y=Xn(y))<0&&(y=-y>xe?0:xe+y),(q=q===A||q>xe?xe:Xn(q))<0&&(q+=xe),q=y>q?0:rb(q);y<q;)u[y++]=f;return u}(u,f,y,q)):[]},De.filter=function fx(u,f){return(Un(u)?Ma:FS)(u,wn(f,3))},De.flatMap=function Fp(u,f){return Kr(Lp(u,f),1)},De.flatMapDeep=function el(u,f){return Kr(Lp(u,f),we)},De.flatMapDepth=function AC(u,f,y){return y=y===A?1:Xn(y),Kr(Lp(u,f),y)},De.flatten=fu,De.flattenDeep=function oC(u){return null!=u&&u.length?Kr(u,we):[]},De.flattenDepth=function kN(u,f){return null!=u&&u.length?Kr(u,f=f===A?1:Xn(f)):[]},De.flip=function Ih(u){return fs(u,512)},De.flow=xu,De.flowRight=hT,De.fromPairs=function sC(u){for(var f=-1,y=null==u?0:u.length,q={};++f<y;){var xe=u[f];q[xe[0]]=xe[1]}return q},De.functions=function ZC(u){return null==u?[]:c_(u,zr(u))},De.functionsIn=function QC(u){return null==u?[]:c_(u,bs(u))},De.groupBy=_x,De.initial=function B_(u){return null!=u&&u.length?js(u,0,-1):[]},De.intersection=pu,De.intersectionBy=PN,De.intersectionWith=ix,De.invert=Nh,De.invertBy=Ux,De.invokeMap=SC,De.iteratee=bb,De.keyBy=CC,De.keys=zr,De.keysIn=bs,De.map=Lp,De.mapKeys=function YN(u,f){var y={};return f=wn(f,3),hs(u,function(q,xe,Be){fc(y,f(q,xe,Be),q)}),y},De.mapValues=function XN(u,f){var y={};return f=wn(f,3),hs(u,function(q,xe,Be){fc(y,xe,f(q,xe,Be))}),y},De.matches=function yb(u){return Ov(Bs(u,1))},De.matchesProperty=function Vh(u,f){return kv(u,Bs(f,1))},De.memoize=Up,De.merge=ab,De.mergeWith=Jp,De.method=fT,De.methodOf=tw,De.mixin=vs,De.negate=Vp,De.nthArg=function vb(u){return u=Xn(u),ri(function(f){return Nv(f,u)})},De.omit=KN,De.omitBy=function qN(u,f){return Hx(u,Vp(wn(f)))},De.once=function Cx(u){return K_(2,u)},De.orderBy=function bx(u,f,y,q){return null==u?[]:(Un(f)||(f=null==f?[]:[f]),Un(y=q?A:y)||(y=null==y?[]:[y]),p_(u,f,y))},De.over=pT,De.overArgs=Tx,De.overEvery=tF,De.overSome=nF,De.partial=zp,De.partialRight=Kl,De.partition=TC,De.pick=zx,De.pickBy=Hx,De.property=zh,De.propertyOf=function mT(u){return function(f){return null==u?A:Qd(u,f)}},De.pull=uC,De.pullAll=rx,De.pullAllBy=function j_(u,f,y){return u&&u.length&&f&&f.length?Cn(u,f,wn(y,2)):u},De.pullAllWith=function Mp(u,f,y){return u&&u.length&&f&&f.length?Cn(u,f,A,y):u},De.pullAt=hC,De.range=xb,De.rangeRight=wb,De.rearg=Hp,De.reject=function Y_(u,f){return(Un(u)?Ma:FS)(u,Vp(wn(f,3)))},De.remove=function mu(u,f){var y=[];if(!u||!u.length)return y;var q=-1,xe=[],Be=u.length;for(f=wn(f,3);++q<Be;){var Ze=u[q];f(Ze,q,u)&&(y.push(Ze),xe.push(q))}return g_(u,xe),y},De.rest=function Mx(u,f){if("function"!=typeof u)throw new Ns(g);return ri(u,f=f===A?f:Xn(f))},De.reverse=U_,De.sampleSize=function X_(u,f,y){return f=(y?Co(u,f,y):f===A)?1:Xn(f),(Un(u)?MN:nu)(u,f)},De.set=function tT(u,f,y){return null==u?u:yh(u,f,y)},De.setWith=function nT(u,f,y,q){return q="function"==typeof q?q:A,null==u?u:yh(u,f,y,q)},De.shuffle=function To(u){return(Un(u)?IN:HS)(u)},De.slice=function Ip(u,f,y){var q=null==u?0:u.length;return q?(y&&"number"!=typeof y&&Co(u,f,y)?(f=0,y=q):(f=null==f?0:Xn(f),y=y===A?q:Xn(y)),js(u,f,y)):[]},De.sortBy=xx,De.sortedUniq=function mC(u){return u&&u.length?Tr(u):[]},De.sortedUniqBy=function gu(u,f){return u&&u.length?Tr(u,wn(f,2)):[]},De.split=function Qp(u,f,y){return y&&"number"!=typeof y&&Co(u,f,y)&&(f=y=A),(y=y===A?fe:y>>>0)?(u=Ti(u))&&("string"==typeof f||null!=f&&!Xp(f))&&!(f=Ko(f))&&Fl(u)?Eo(Rr(u),0,y):u.split(f,y):[]},De.spread=function Q_(u,f){if("function"!=typeof u)throw new Ns(g);return f=null==f?0:Jn(Xn(f),0),ri(function(y){var q=y[f],xe=Eo(y,0,f);return q&&Ia(xe,q),ls(u,this,xe)})},De.tail=function Th(u){var f=null==u?0:u.length;return f?js(u,1,f):[]},De.take=function gC(u,f,y){return u&&u.length?js(u,0,(f=y||f===A?1:Xn(f))<0?0:f):[]},De.takeRight=function NN(u,f,y){var q=null==u?0:u.length;return q?js(u,(f=q-(f=y||f===A?1:Xn(f)))<0?0:f,q):[]},De.takeRightWhile=function ax(u,f){return u&&u.length?iu(u,wn(f,3),!1,!0):[]},De.takeWhile=function _C(u,f){return u&&u.length?iu(u,wn(f,3)):[]},De.tap=function VN(u,f){return f(u),u},De.throttle=function Gp(u,f,y){var q=!0,xe=!0;if("function"!=typeof u)throw new Ns(g);return er(y)&&(q="leading"in y?!!y.leading:q,xe="trailing"in y?!!y.trailing:xe),jp(u,f,{leading:q,maxWait:f,trailing:xe})},De.thru=W_,De.toArray=Jl,De.toPairs=cb,De.toPairsIn=Fh,De.toPath=function nw(u){return Un(u)?pn(u,gc):Jr(u)?[u]:ko(nx(Ti(u)))},De.toPlainObject=ob,De.transform=function Gx(u,f,y){var q=Un(u),xe=q||tl(u)||yu(u);if(f=wn(f,4),null==y){var Be=u&&u.constructor;y=xe?q?new Be:[]:er(u)&&za(Be)?ph(on(u)):{}}return(xe?Ps:hs)(u,function(Ze,it,lt){return f(y,Ze,it,lt)}),y},De.unary=function DC(u){return Ex(u,1)},De.union=FN,De.unionBy=bC,De.unionWith=yC,De.uniq=function vC(u){return u&&u.length?Us(u):[]},De.uniqBy=function Rp(u,f){return u&&u.length?Us(u,wn(f,2)):[]},De.uniqWith=function cx(u,f){return f="function"==typeof f?f:A,u&&u.length?Us(u,A,f):[]},De.unset=function lb(u,f){return null==u||Vs(u,f)},De.unzip=z_,De.unzipWith=H_,De.update=function iT(u,f,y){return null==u?u:gp(u,f,aa(y))},De.updateWith=function Zr(u,f,y,q){return q="function"==typeof q?q:A,null==u?u:gp(u,f,aa(y),q)},De.values=vu,De.valuesIn=function rT(u){return null==u?[]:$g(u,bs(u))},De.without=LN,De.words=Uh,De.wrap=function RC(u,f){return zp(aa(f),u)},De.xor=lx,De.xorBy=BN,De.xorWith=xC,De.zip=wC,De.zipObject=function G_(u,f){return b_(u||[],f||[],qd)},De.zipObjectDeep=function jN(u,f){return b_(u||[],f||[],yh)},De.zipWith=UN,De.entries=cb,De.entriesIn=Fh,De.extend=Bx,De.extendWith=Kp,vs(De,De),De.add=im,De.attempt=ys,De.camelCase=sT,De.capitalize=$x,De.ceil=iF,De.clamp=function db(u,f,y){return y===A&&(y=f,f=A),y!==A&&(y=(y=gs(y))==y?y:0),f!==A&&(f=(f=gs(f))==f?f:0),Jd(gs(u),f,y)},De.clone=function kC(u){return Bs(u,4)},De.cloneDeep=function NC(u){return Bs(u,5)},De.cloneDeepWith=function Ix(u,f){return Bs(u,5,f="function"==typeof f?f:A)},De.cloneWith=function PC(u,f){return Bs(u,4,f="function"==typeof f?f:A)},De.conformsTo=function Wp(u,f){return null==f||gh(u,f,zr(f))},De.deburr=Yx,De.defaultTo=function ew(u,f){return null==u||u!=u?f:u},De.divide=Sb,De.endsWith=function Xx(u,f,y){u=Ti(u),f=Ko(f);var q=u.length,xe=y=y===A?q:Jd(Xn(y),0,q);return(y-=f.length)>=0&&u.slice(y,xe)==f},De.eq=ms,De.escape=function JN(u){return(u=Ti(u))&&as.test(u)?u.replace(zi,Hc):u},De.escapeRegExp=function ZN(u){return(u=Ti(u))&&ac.test(u)?u.replace(Pc,"\\$&"):u},De.every=function _u(u,f,y){var q=Un(u)?nh:s_;return y&&Co(u,f,y)&&(f=A),q(u,wn(f,3))},De.find=px,De.findIndex=L_,De.findKey=function YC(u,f){return vS(u,wn(f,3),hs)},De.findLast=Np,De.findLastIndex=Ch,De.findLastKey=function XC(u,f){return vS(u,wn(f,3),a_)},De.floor=$h,De.forEach=mx,De.forEachRight=gx,De.forIn=function KC(u,f){return null==u?u:_h(u,wn(f,3),bs)},De.forInRight=function qC(u,f){return null==u?u:Cv(u,wn(f,3),bs)},De.forOwn=function jx(u,f){return u&&hs(u,wn(f,3))},De.forOwnRight=function JC(u,f){return u&&a_(u,wn(f,3))},De.get=sb,De.gt=eb,De.gte=FC,De.has=function qp(u,f){return null!=u&&O_(u,f,Tv)},De.hasIn=ua,De.head=aC,De.identity=Jo,De.includes=function $_(u,f,y,q){u=Pr(u)?u:vu(u),y=y&&!q?Xn(y):0;var xe=u.length;return y<0&&(y=Jn(xe+y,0)),bu(u)?y<=xe&&u.indexOf(f,y)>-1:!!xe&&zc(u,f,y)>-1},De.indexOf=function ps(u,f,y){var q=null==u?0:u.length;if(!q)return-1;var xe=null==y?0:Xn(y);return xe<0&&(xe=Jn(q+xe,0)),zc(u,f,xe)},De.inRange=function Wx(u,f,y){return f=Gs(f),y===A?(y=f,f=0):y=Gs(y),function Mv(u,f,y){return u>=Hi(f,y)&&u<Jn(f,y)}(u=gs(u),f,y)},De.invoke=Vx,De.isArguments=ql,De.isArray=Un,De.isArrayBuffer=Dx,De.isArrayLike=Pr,De.isArrayLikeObject=yr,De.isBoolean=function Rx(u){return!0===u||!1===u||tr(u)&&wo(u)==E},De.isBuffer=tl,De.isDate=WN,De.isElement=function $p(u){return tr(u)&&1===u.nodeType&&!kh(u)},De.isEmpty=function LC(u){if(null==u)return!0;if(Pr(u)&&(Un(u)||"string"==typeof u||"function"==typeof u.splice||tl(u)||yu(u)||ql(u)))return!u.length;var f=So(u);if(f==Z||f==Ye)return!u.size;if(cu(u))return!mp(u).length;for(var y in u)if(Mi.call(u,y))return!1;return!0},De.isEqual=function Ox(u,f){return bh(u,f)},De.isEqualWith=function kx(u,f,y){var q=(y="function"==typeof y?y:A)?y(u,f):A;return q===A?bh(u,f,A,y):!!q},De.isError=Yp,De.isFinite=function tb(u){return"number"==typeof u&&_r(u)},De.isFunction=za,De.isInteger=Dh,De.isLength=nl,De.isMap=Rh,De.isMatch=function Px(u,f){return u===f||fp(u,f,Kv(f))},De.isMatchWith=function nb(u,f,y){return y="function"==typeof y?y:A,fp(u,f,Kv(f),y)},De.isNaN=function Oh(u){return Fx(u)&&u!=+u},De.isNative=function BC(u){if(Qv(u))throw new Bn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fi(u)},De.isNil=function jC(u){return null==u},De.isNull=function Nx(u){return null===u},De.isNumber=Fx,De.isObject=er,De.isObjectLike=tr,De.isPlainObject=kh,De.isRegExp=Xp,De.isSafeInteger=function Lx(u){return Dh(u)&&u>=-Ne&&u<=Ne},De.isSet=Ph,De.isString=bu,De.isSymbol=Jr,De.isTypedArray=yu,De.isUndefined=function UC(u){return u===A},De.isWeakMap=function $N(u){return tr(u)&&So(u)==zt},De.isWeakSet=function VC(u){return tr(u)&&"[object WeakSet]"==wo(u)},De.join=function cC(u,f){return null==u?"":Kt.call(u,f)},De.kebabCase=Lh,De.last=Hs,De.lastIndexOf=function lC(u,f,y){var q=null==u?0:u.length;if(!q)return-1;var xe=q;return y!==A&&(xe=(xe=Xn(y))<0?Jn(q+xe,0):Hi(xe,q-1)),f==f?function sp(ct,At,gt){for(var en=gt+1;en--;)if(ct[en]===At)return en;return en}(u,f,xe):Ud(u,np,xe,!0)},De.lowerCase=bt,De.lowerFirst=Bh,De.lt=ib,De.lte=zC,De.max=function gT(u){return u&&u.length?Vl(u,Jo,d_):A},De.maxBy=function iw(u,f){return u&&u.length?Vl(u,wn(f,2),d_):A},De.mean=function _T(u){return fv(u,Jo)},De.meanBy=function bT(u,f){return fv(u,wn(f,2))},De.min=function Cb(u){return u&&u.length?Vl(u,Jo,Oo):A},De.minBy=function rw(u,f){return u&&u.length?Vl(u,wn(f,2),Oo):A},De.stubArray=il,De.stubFalse=Hh,De.stubObject=function Eb(){return{}},De.stubString=function Gh(){return""},De.stubTrue=function nm(){return!0},De.multiply=yT,De.nth=function dC(u,f){return u&&u.length?Nv(u,Xn(f)):A},De.noConflict=function eF(){return bo._===this&&(bo._=TS),this},De.noop=Nr,De.now=Bp,De.pad=function Zp(u,f,y){u=Ti(u);var q=(f=Xn(f))?vo(u):0;if(!f||q>=f)return u;var xe=(f-q)/2;return Hl(Ll(xe),y)+u+Hl(dh(xe),y)},De.padEnd=function Kx(u,f,y){u=Ti(u);var q=(f=Xn(f))?vo(u):0;return f&&q<f?u+Hl(f-q,y):u},De.padStart=function ub(u,f,y){u=Ti(u);var q=(f=Xn(f))?vo(u):0;return f&&q<f?Hl(f-q,y)+u:u},De.parseInt=function hb(u,f,y){return y||null==f?f=0:f&&(f=+f),xo(Ti(u).replace(Rl,""),f||0)},De.random=function oT(u,f,y){if(y&&"boolean"!=typeof y&&Co(u,f,y)&&(f=y=A),y===A&&("boolean"==typeof f?(y=f,f=A):"boolean"==typeof u&&(y=u,u=A)),u===A&&f===A?(u=0,f=1):(u=Gs(u),f===A?(f=u,u=0):f=Gs(f)),u>f){var q=u;u=f,f=q}if(y||u%1||f%1){var xe=Bl();return Hi(u+xe*(f-u+uN("1e-"+((xe+"").length-1))),f)}return Lv(u,f)},De.reduce=function MC(u,f,y){var q=Un(u)?ep:xS,xe=arguments.length<3;return q(u,wn(f,4),y,xe,Ul)},De.reduceRight=function qo(u,f,y){var q=Un(u)?Wo:xS,xe=arguments.length<3;return q(u,wn(f,4),y,xe,hp)},De.repeat=function aT(u,f,y){return f=(y?Co(u,f,y):f===A)?1:Xn(f),__(Ti(u),f)},De.replace=function qx(){var u=arguments,f=Ti(u[0]);return u.length<3?f:f.replace(u[1],u[2])},De.result=function eT(u,f,y){var q=-1,xe=(f=pc(f,u)).length;for(xe||(xe=1,u=A);++q<xe;){var Be=null==u?A:u[gc(f[q])];Be===A&&(q=xe,Be=y),u=za(Be)?Be.call(u):Be}return u},De.round=vT,De.runInContext=ct,De.sample=function yx(u){return(Un(u)?kS:Bv)(u)},De.size=function Mh(u){if(null==u)return 0;if(Pr(u))return bu(u)?vo(u):u.length;var f=So(u);return f==Z||f==Ye?u.size:mp(u).length},De.snakeCase=Jx,De.some=function vx(u,f,y){var q=Un(u)?tp:Dt;return y&&Co(u,f,y)&&(f=A),q(u,wn(f,3))},De.sortedIndex=function fC(u,f){return li(u,f)},De.sortedIndexBy=function ox(u,f,y){return br(u,f,wn(y,2))},De.sortedIndexOf=function V_(u,f){var y=null==u?0:u.length;if(y){var q=li(u,f);if(q<y&&ms(u[q],f))return q}return-1},De.sortedLastIndex=function Dp(u,f){return li(u,f,!0)},De.sortedLastIndexBy=function sx(u,f,y){return br(u,f,wn(y,2),!0)},De.sortedLastIndexOf=function pC(u,f){if(null!=u&&u.length){var q=li(u,f,!0)-1;if(ms(u[q],f))return q}return-1},De.startCase=QN,De.startsWith=function fb(u,f,y){return u=Ti(u),y=null==y?0:Jd(Xn(y),0,u.length),f=Ko(f),u.slice(y,y+f.length)==f},De.subtract=rF,De.sum=function xT(u){return u&&u.length?mv(u,Jo):0},De.sumBy=function rm(u,f){return u&&u.length?mv(u,wn(f,2)):0},De.template=function cT(u,f,y){var q=De.templateSettings;y&&Co(u,f,y)&&(f=A),u=Ti(u),f=Kp({},f,q,Yv);var it,lt,xe=Kp({},f.imports,q.imports,Yv),Be=zr(xe),Ze=$g(xe,Be),Ct=0,Tt=f.interpolate||go,It="__p += '",$t=qg((f.escape||go).source+"|"+Tt.source+"|"+(Tt===mo?kl:go).source+"|"+(f.evaluate||go).source+"|$","g"),sn="//# sourceURL="+(Mi.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gg+"]")+"\n";u.replace($t,function(An,Vn,pi,xs,vr,ws){return pi||(pi=xs),It+=u.slice(Ct,ws).replace(me,ES),Vn&&(it=!0,It+="' +\n__e("+Vn+") +\n'"),vr&&(lt=!0,It+="';\n"+vr+";\n__p += '"),pi&&(It+="' +\n((__t = ("+pi+")) == null ? '' : __t) +\n'"),Ct=ws+An.length,An}),It+="';\n";var Nt=Mi.call(f,"variable")&&f.variable;if(Nt){if(eh.test(Nt))throw new Bn("Invalid `variable` option passed into `_.template`")}else It="with (obj) {\n"+It+"\n}\n";It=(lt?It.replace(In,""):It).replace(gr,"$1").replace(ss,"$1;"),It="function("+(Nt||"obj")+") {\n"+(Nt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(it?", __e = _.escape":"")+(lt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+It+"return __p\n}";var Qn=ys(function(){return fi(Be,sn+"return "+It).apply(A,Ze)});if(Qn.source=It,Yp(Qn))throw Qn;return Qn},De.times=function Wh(u,f){if((u=Xn(u))<1||u>Ne)return[];var y=fe,q=Hi(u,fe);f=wn(f),u-=fe;for(var xe=gv(q,f);++y<u;)f(y);return xe},De.toFinite=Gs,De.toInteger=Xn,De.toLength=rb,De.toLower=function pb(u){return Ti(u).toLowerCase()},De.toNumber=gs,De.toSafeInteger=function Zl(u){return u?Jd(Xn(u),-Ne,Ne):0===u?u:0},De.toString=Ti,De.toUpper=function Zx(u){return Ti(u).toUpperCase()},De.trim=function Qx(u,f,y){if((u=Ti(u))&&(y||f===A))return ip(u);if(!u||!(f=Ko(f)))return u;var q=Rr(u),xe=Rr(f);return Eo(q,_v(q,xe),Yg(q,xe)+1).join("")},De.trimEnd=function Ql(u,f,y){if((u=Ti(u))&&(y||f===A))return u.slice(0,bi(u)+1);if(!u||!(f=Ko(f)))return u;var q=Rr(u);return Eo(q,0,Yg(q,Rr(f))+1).join("")},De.trimStart=function lT(u,f,y){if((u=Ti(u))&&(y||f===A))return u.replace(Rl,"");if(!u||!(f=Ko(f)))return u;var q=Rr(u);return Eo(q,_v(q,Rr(f))).join("")},De.truncate=function mb(u,f){var y=30,q="...";if(er(f)){var xe="separator"in f?f.separator:xe;y="length"in f?Xn(f.length):y,q="omission"in f?Ko(f.omission):q}var Be=(u=Ti(u)).length;if(Fl(u)){var Ze=Rr(u);Be=Ze.length}if(y>=Be)return u;var it=y-vo(q);if(it<1)return q;var lt=Ze?Eo(Ze,0,it).join(""):u.slice(0,it);if(xe===A)return lt+q;if(Ze&&(it+=lt.length-it),Xp(xe)){if(u.slice(it).search(xe)){var Ct,Tt=lt;for(xe.global||(xe=qg(xe.source,Ti(jc.exec(xe))+"g")),xe.lastIndex=0;Ct=xe.exec(Tt);)var It=Ct.index;lt=lt.slice(0,It===A?it:It)}}else if(u.indexOf(Ko(xe),it)!=it){var $t=lt.lastIndexOf(xe);$t>-1&&(lt=lt.slice(0,$t))}return lt+q},De.unescape=function em(u){return(u=Ti(u))&&Yr.test(u)?u.replace(Go,ap):u},De.uniqueId=function Ab(u){var f=++SS;return Ti(u)+f},De.upperCase=dT,De.upperFirst=jh,De.each=mx,De.eachRight=gx,De.first=aC,vs(De,function(){var u={};return hs(De,function(f,y){Mi.call(De.prototype,y)||(u[y]=f)}),u}(),{chain:!1}),De.VERSION="4.17.21",Ps(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){De[u].placeholder=De}),Ps(["drop","take"],function(u,f){jn.prototype[u]=function(y){y=y===A?1:Jn(Xn(y),0);var q=this.__filtered__&&!f?new jn(this):this.clone();return q.__filtered__?q.__takeCount__=Hi(y,q.__takeCount__):q.__views__.push({size:Hi(y,fe),type:u+(q.__dir__<0?"Right":"")}),q},jn.prototype[u+"Right"]=function(y){return this.reverse()[u](y).reverse()}}),Ps(["filter","map","takeWhile"],function(u,f){var y=f+1,q=1==y||3==y;jn.prototype[u]=function(xe){var Be=this.clone();return Be.__iteratees__.push({iteratee:wn(xe,3),type:y}),Be.__filtered__=Be.__filtered__||q,Be}}),Ps(["head","last"],function(u,f){var y="take"+(f?"Right":"");jn.prototype[u]=function(){return this[y](1).value()[0]}}),Ps(["initial","tail"],function(u,f){var y="drop"+(f?"":"Right");jn.prototype[u]=function(){return this.__filtered__?new jn(this):this[y](1)}}),jn.prototype.compact=function(){return this.filter(Jo)},jn.prototype.find=function(u){return this.filter(u).head()},jn.prototype.findLast=function(u){return this.reverse().find(u)},jn.prototype.invokeMap=ri(function(u,f){return"function"==typeof u?new jn(this):this.map(function(y){return eu(y,u,f)})}),jn.prototype.reject=function(u){return this.filter(Vp(wn(u)))},jn.prototype.slice=function(u,f){u=Xn(u);var y=this;return y.__filtered__&&(u>0||f<0)?new jn(y):(u<0?y=y.takeRight(-u):u&&(y=y.drop(u)),f!==A&&(y=(f=Xn(f))<0?y.dropRight(-f):y.take(f-u)),y)},jn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},jn.prototype.toArray=function(){return this.take(fe)},hs(jn.prototype,function(u,f){var y=/^(?:filter|find|map|reject)|While$/.test(f),q=/^(?:head|last)$/.test(f),xe=De[q?"take"+("last"==f?"Right":""):f],Be=q||/^find/.test(f);xe&&(De.prototype[f]=function(){var Ze=this.__wrapped__,it=q?[1]:arguments,lt=Ze instanceof jn,Ct=it[0],Tt=lt||Un(Ze),It=function(Vn){var pi=xe.apply(De,Ia([Vn],it));return q&&$t?pi[0]:pi};Tt&&y&&"function"==typeof Ct&&1!=Ct.length&&(lt=Tt=!1);var $t=this.__chain__,Nt=Be&&!$t,Qn=lt&&!this.__actions__.length;if(!Be&&Tt){Ze=Qn?Ze:new jn(this);var An=u.apply(Ze,it);return An.__actions__.push({func:W_,args:[It],thisArg:A}),new us(An,$t)}return Nt&&Qn?u.apply(this,it):(An=this.thru(It),Nt?q?An.value()[0]:An.value():An)})}),Ps(["pop","push","shift","sort","splice","unshift"],function(u){var f=cp[u],y=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",q=/^(?:pop|shift)$/.test(u);De.prototype[u]=function(){var xe=arguments;if(q&&!this.__chain__){var Be=this.value();return f.apply(Un(Be)?Be:[],xe)}return this[y](function(Ze){return f.apply(Un(Ze)?Ze:[],xe)})}}),hs(jn.prototype,function(u,f){var y=De[f];if(y){var q=y.name+"";Mi.call(Pa,q)||(Pa[q]=[]),Pa[q].push({name:f,func:y})}}),Pa[xh(A,2).name]=[{name:"wrapper",func:A}],jn.prototype.clone=function up(){var u=new jn(this.__wrapped__);return u.__actions__=ko(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ko(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ko(this.__views__),u},jn.prototype.reverse=function Xd(){if(this.__filtered__){var u=new jn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},jn.prototype.value=function mh(){var u=this.__wrapped__.value(),f=this.__dir__,y=Un(u),q=f<0,xe=y?u.length:0,Be=function wp(u,f,y){for(var q=-1,xe=y.length;++q<xe;){var Be=y[q],Ze=Be.size;switch(Be.type){case"drop":u+=Ze;break;case"dropRight":f-=Ze;break;case"take":f=Hi(f,u+Ze);break;case"takeRight":u=Jn(u,f-Ze)}}return{start:u,end:f}}(0,xe,this.__views__),Ze=Be.start,it=Be.end,lt=it-Ze,Ct=q?it:Ze-1,Tt=this.__iteratees__,It=Tt.length,$t=0,sn=Hi(lt,this.__takeCount__);if(!y||!q&&xe==lt&&sn==lt)return Uv(u,this.__actions__);var Nt=[];e:for(;lt--&&$t<sn;){for(var Qn=-1,An=u[Ct+=f];++Qn<It;){var Vn=Tt[Qn],xs=Vn.type,vr=(0,Vn.iteratee)(An);if(2==xs)An=vr;else if(!vr){if(1==xs)continue e;break e}}Nt[$t++]=An}return Nt},De.prototype.at=zN,De.prototype.chain=function HN(){return Op(this)},De.prototype.commit=function GN(){return new us(this.value(),this.__chain__)},De.prototype.next=function EC(){this.__values__===A&&(this.__values__=Jl(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?A:this.__values__[this.__index__++]}},De.prototype.plant=function Pp(u){for(var f,y=this;y instanceof Yd;){var q=eC(y);q.__index__=0,q.__values__=A,f?xe.__wrapped__=q:f=q;var xe=q;y=y.__wrapped__}return xe.__wrapped__=u,f},De.prototype.reverse=function dx(){var u=this.__wrapped__;if(u instanceof jn){var f=u;return this.__actions__.length&&(f=new jn(this)),(f=f.reverse()).__actions__.push({func:W_,args:[U_],thisArg:A}),new us(f,this.__chain__)}return this.thru(U_)},De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=function ux(){return Uv(this.__wrapped__,this.__actions__)},De.prototype.first=De.prototype.head,si&&(De.prototype[si]=function kp(){return this}),De}();bo._=Wc,(J=function(){return Wc}.call(ge,C,ge,Ue))!==A&&(Ue.exports=J)}.call(this)},5249:(Ue,ge,C)=>{var J=C(549),A=J.ARRAY_BUFFER_SUPPORT,te=J.SYMBOL_SUPPORT;Ue.exports=function(ee,g){var w,N,G,R,W;if(!ee)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof g)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(ee)||A&&ArrayBuffer.isView(ee)||"string"==typeof ee||"[object Arguments]"===ee.toString())for(G=0,R=ee.length;G<R;G++)g(ee[G],G);else if("function"!=typeof ee.forEach)if(te&&Symbol.iterator in ee&&"function"!=typeof ee.next&&(ee=ee[Symbol.iterator]()),"function"!=typeof ee.next)for(N in ee)ee.hasOwnProperty(N)&&g(ee[N],N);else for(w=ee,G=0;!0!==(W=w.next()).done;)g(W.value,G),G++;else ee.forEach(g)}},2508:Ue=>{function ge(C){if("function"!=typeof C)throw new Error("obliterator/iterator: expecting a function!");this.next=C}typeof Symbol<"u"&&(ge.prototype[Symbol.iterator]=function(){return this}),ge.of=function(){var C=arguments,J=C.length,A=0;return new ge(function(){return A>=J?{done:!0}:{done:!1,value:C[A++]}})},ge.empty=function(){return new ge(function(){return{done:!0}})},ge.fromSequence=function(C){var J=0,A=C.length;return new ge(function(){return J>=A?{done:!0}:{done:!1,value:C[J++]}})},ge.is=function(C){return C instanceof ge||"object"==typeof C&&null!==C&&"function"==typeof C.next},Ue.exports=ge},549:(Ue,ge)=>{ge.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",ge.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(Ue,ge,C)=>{var J=C(2508),A=C(5249);function te(){this.clear()}te.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},te.prototype.enqueue=function(B){return this.items.push(B),++this.size},te.prototype.dequeue=function(){if(this.size){var B=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,B}},te.prototype.peek=function(){if(this.size)return this.items[this.offset]},te.prototype.forEach=function(B,ee){ee=arguments.length>1?ee:this;for(var g=this.offset,w=0,N=this.items.length;g<N;g++,w++)B.call(ee,this.items[g],w,this)},te.prototype.toArray=function(){return this.items.slice(this.offset)},te.prototype.values=function(){var B=this.items,ee=this.offset;return new J(function(){if(ee>=B.length)return{done:!0};var g=B[ee];return ee++,{value:g,done:!1}})},te.prototype.entries=function(){var B=this.items,ee=this.offset,g=0;return new J(function(){if(ee>=B.length)return{done:!0};var w=B[ee];return ee++,{value:[g++,w],done:!1}})},typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=te.prototype.values),te.prototype.toString=function(){return this.toArray().join(",")},te.prototype.toJSON=function(){return this.toArray()},te.prototype.inspect=function(){var B=this.toArray();return Object.defineProperty(B,"constructor",{value:te,enumerable:!1}),B},typeof Symbol<"u"&&(te.prototype[Symbol.for("nodejs.util.inspect.custom")]=te.prototype.inspect),te.from=function(B){var ee=new te;return A(B,function(g){ee.enqueue(g)}),ee},te.of=function(){return te.from(arguments)},Ue.exports=te},5020:Ue=>{Ue.exports=function ge(C,J,A){function te(g,w){if(!J[g]){if(!C[g]){if(B)return B(g,!0);throw new Error("Cannot find module '"+g+"'")}w=J[g]={exports:{}},C[g][0].call(w.exports,function(G){return te(C[g][1][G]||G)},w,w.exports,ge,C,J,A)}return J[g].exports}for(var B=void 0,ee=0;ee<A.length;ee++)te(A[ee]);return te}({1:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){"use strict";var W=ge("crypto");function de(X,L){var _;return void 0===(_="passthrough"!==(L=ae(X,L)).algorithm?W.createHash(L.algorithm):new ne).write&&(_.write=_.update,_.end=_.update),oe(L,_).dispatch(X),_.update||_.end(""),_.digest?_.digest("buffer"===L.encoding?void 0:L.encoding):(X=_.read(),"buffer"!==L.encoding?X.toString(L.encoding):X)}(J=C.exports=de).sha1=function(X){return de(X)},J.keys=function(X){return de(X,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},J.MD5=function(X){return de(X,{algorithm:"md5",encoding:"hex"})},J.keysMD5=function(X){return de(X,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var I=W.getHashes?W.getHashes().slice():["sha1","md5"],V=(I.push("passthrough"),["buffer","hex","binary","base64"]);function ae(X,L){var _={};if(_.algorithm=(L=L||{}).algorithm||"sha1",_.encoding=L.encoding||"hex",_.excludeValues=!!L.excludeValues,_.algorithm=_.algorithm.toLowerCase(),_.encoding=_.encoding.toLowerCase(),_.ignoreUnknown=!0===L.ignoreUnknown,_.respectType=!1!==L.respectType,_.respectFunctionNames=!1!==L.respectFunctionNames,_.respectFunctionProperties=!1!==L.respectFunctionProperties,_.unorderedArrays=!0===L.unorderedArrays,_.unorderedSets=!1!==L.unorderedSets,_.unorderedObjects=!1!==L.unorderedObjects,_.replacer=L.replacer||void 0,_.excludeKeys=L.excludeKeys||void 0,void 0===X)throw new Error("Object argument required.");for(var O=0;O<I.length;++O)I[O].toLowerCase()===_.algorithm.toLowerCase()&&(_.algorithm=I[O]);if(-1===I.indexOf(_.algorithm))throw new Error('Algorithm "'+_.algorithm+'"  not supported. supported values: '+I.join(", "));if(-1===V.indexOf(_.encoding)&&"passthrough"!==_.algorithm)throw new Error('Encoding "'+_.encoding+'"  not supported. supported values: '+V.join(", "));return _}function K(X){if("function"==typeof X)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(X))}function oe(X,L,_){function O(S){return L.update?L.update(S,"utf8"):L.write(S,"utf8")}return _=_||[],{dispatch:function(S){return this["_"+(null===(S=X.replacer?X.replacer(S):S)?"null":typeof S)](S)},_object:function(S){var ue,j=Object.prototype.toString.call(S),Te=/\[object (.*)\]/i.exec(j);if(Te=(Te=Te?Te[1]:"unknown:["+j+"]").toLowerCase(),0<=(j=_.indexOf(S)))return this.dispatch("[CIRCULAR:"+j+"]");if(_.push(S),void 0!==B&&B.isBuffer&&B.isBuffer(S))return O("buffer:"),O(S);if("object"===Te||"function"===Te||"asyncfunction"===Te)return j=Object.keys(S),X.unorderedObjects&&(j=j.sort()),!1===X.respectType||K(S)||j.splice(0,0,"prototype","__proto__","constructor"),X.excludeKeys&&(j=j.filter(function(se){return!X.excludeKeys(se)})),O("object:"+j.length+":"),ue=this,j.forEach(function(se){ue.dispatch(se),O(":"),X.excludeValues||ue.dispatch(S[se]),O(",")});if(!this["_"+Te]){if(X.ignoreUnknown)return O("["+Te+"]");throw new Error('Unknown object type "'+Te+'"')}this["_"+Te](S)},_array:function(S,se){se=void 0!==se?se:!1!==X.unorderedArrays;var j=this;if(O("array:"+S.length+":"),!se||S.length<=1)return S.forEach(function(Se){return j.dispatch(Se)});var Te=[];return se=S.map(function(Se){var Re=new ne,Oe=_.slice();return oe(X,Re,Oe).dispatch(Se),Te=Te.concat(Oe.slice(_.length)),Re.read().toString()}),_=_.concat(Te),se.sort(),this._array(se,!1)},_date:function(S){return O("date:"+S.toJSON())},_symbol:function(S){return O("symbol:"+S.toString())},_error:function(S){return O("error:"+S.toString())},_boolean:function(S){return O("bool:"+S.toString())},_string:function(S){O("string:"+S.length+":"),O(S.toString())},_function:function(S){O("fn:"),K(S)?this.dispatch("[native]"):this.dispatch(S.toString()),!1!==X.respectFunctionNames&&this.dispatch("function-name:"+String(S.name)),X.respectFunctionProperties&&this._object(S)},_number:function(S){return O("number:"+S.toString())},_xml:function(S){return O("xml:"+S.toString())},_null:function(){return O("Null")},_undefined:function(){return O("Undefined")},_regexp:function(S){return O("regex:"+S.toString())},_uint8array:function(S){return O("uint8array:"),this.dispatch(Array.prototype.slice.call(S))},_uint8clampedarray:function(S){return O("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(S))},_int8array:function(S){return O("int8array:"),this.dispatch(Array.prototype.slice.call(S))},_uint16array:function(S){return O("uint16array:"),this.dispatch(Array.prototype.slice.call(S))},_int16array:function(S){return O("int16array:"),this.dispatch(Array.prototype.slice.call(S))},_uint32array:function(S){return O("uint32array:"),this.dispatch(Array.prototype.slice.call(S))},_int32array:function(S){return O("int32array:"),this.dispatch(Array.prototype.slice.call(S))},_float32array:function(S){return O("float32array:"),this.dispatch(Array.prototype.slice.call(S))},_float64array:function(S){return O("float64array:"),this.dispatch(Array.prototype.slice.call(S))},_arraybuffer:function(S){return O("arraybuffer:"),this.dispatch(new Uint8Array(S))},_url:function(S){return O("url:"+S.toString())},_map:function(S){return O("map:"),S=Array.from(S),this._array(S,!1!==X.unorderedSets)},_set:function(S){return O("set:"),S=Array.from(S),this._array(S,!1!==X.unorderedSets)},_file:function(S){return O("file:"),this.dispatch([S.name,S.size,S.type,S.lastModfied])},_blob:function(){if(X.ignoreUnknown)return O("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return O("domwindow")},_bigint:function(S){return O("bigint:"+S.toString())},_process:function(){return O("process")},_timer:function(){return O("timer")},_pipe:function(){return O("pipe")},_tcp:function(){return O("tcp")},_udp:function(){return O("udp")},_tty:function(){return O("tty")},_statwatcher:function(){return O("statwatcher")},_securecontext:function(){return O("securecontext")},_connection:function(){return O("connection")},_zlib:function(){return O("zlib")},_context:function(){return O("context")},_nodescript:function(){return O("nodescript")},_httpparser:function(){return O("httpparser")},_dataview:function(){return O("dataview")},_signal:function(){return O("signal")},_fsevent:function(){return O("fsevent")},_tlswrap:function(){return O("tlswrap")}}}function ne(){return{buf:"",write:function(X){this.buf+=X},end:function(X){this.buf+=X},read:function(){return this.buf}}}J.writeToStream=function(X,L,_){return void 0===_&&(_=L,L={}),oe(L=ae(X,L),_).dispatch(X)}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){!function(W){"use strict";var de=typeof Uint8Array<"u"?Uint8Array:Array,I="+".charCodeAt(0),V="/".charCodeAt(0),ae="0".charCodeAt(0),K="a".charCodeAt(0),oe="A".charCodeAt(0),ne="-".charCodeAt(0),X="_".charCodeAt(0);function L(_){return(_=_.charCodeAt(0))===I||_===ne?62:_===V||_===X?63:_<ae?-1:_<ae+10?_-ae+26+26:_<oe+26?_-oe:_<K+26?_-K+26:void 0}W.toByteArray=function(_){var O,S;if(0<_.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ue="="===_.charAt((ue=_.length)-2)?2:"="===_.charAt(ue-1)?1:0,j=new de(3*_.length/4-ue),Te=0<ue?_.length-4:_.length,se=0;function Se(Re){j[se++]=Re}for(O=0;O<Te;O+=4,0)Se((16711680&(S=L(_.charAt(O))<<18|L(_.charAt(O+1))<<12|L(_.charAt(O+2))<<6|L(_.charAt(O+3))))>>16),Se((65280&S)>>8),Se(255&S);return 2==ue?Se(255&(S=L(_.charAt(O))<<2|L(_.charAt(O+1))>>4)):1==ue&&(Se((S=L(_.charAt(O))<<10|L(_.charAt(O+1))<<4|L(_.charAt(O+2))>>2)>>8&255),Se(255&S)),j},W.fromByteArray=function(_){var O,S,ue,j,Te=_.length%3,se="";function Se(Re){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Re)}for(O=0,ue=_.length-Te;O<ue;O+=3)se+=Se((j=S=(_[O]<<16)+(_[O+1]<<8)+_[O+2])>>18&63)+Se(j>>12&63)+Se(j>>6&63)+Se(63&j);switch(Te){case 1:se=(se+=Se((S=_[_.length-1])>>2))+Se(S<<4&63)+"==";break;case 2:se=(se=(se+=Se((S=(_[_.length-2]<<8)+_[_.length-1])>>10))+Se(S>>4&63))+Se(S<<2&63)+"="}return se}}(void 0===J?this.base64js={}:J)}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(ge,C,J){(function(A,te,I,ee,g,w,N,G,R){var W=ge("base64-js"),de=ge("ieee754");function I(le,P,E){if(!(this instanceof I))return new I(le,P,E);var ie,z,Ae,et,ce=typeof le;if("base64"===P&&"string"==ce)for(le=(et=le).trim?et.trim():et.replace(/^\s+|\s+$/g,"");le.length%4!=0;)le+="=";if("number"==ce)ie=Qe(le);else if("string"==ce)ie=I.byteLength(le,P);else{if("object"!=ce)throw new Error("First argument needs to be a number, array or string.");ie=Qe(le.length)}if(I._useTypedArrays?z=I._augment(new Uint8Array(ie)):((z=this).length=ie,z._isBuffer=!0),I._useTypedArrays&&"number"==typeof le.byteLength)z._set(le);else if(Xe(et=le)||I.isBuffer(et)||et&&"object"==typeof et&&"number"==typeof et.length)for(Ae=0;Ae<ie;Ae++)z[Ae]=I.isBuffer(le)?le.readUInt8(Ae):le[Ae];else if("string"==ce)z.write(le,0,P);else if("number"==ce&&!I._useTypedArrays&&!E)for(Ae=0;Ae<ie;Ae++)z[Ae]=0;return z}function oe(le,P,E,Ae){var z;if(Ae||(Je("boolean"==typeof E,"missing or invalid endian"),Je(null!=P,"missing offset"),Je(P+1<le.length,"Trying to read beyond buffer length")),!((Ae=le.length)<=P))return E?(z=le[P],P+1<Ae&&(z|=le[P+1]<<8)):(z=le[P]<<8,P+1<Ae&&(z|=le[P+1])),z}function ne(le,P,E,Ae){var z;if(Ae||(Je("boolean"==typeof E,"missing or invalid endian"),Je(null!=P,"missing offset"),Je(P+3<le.length,"Trying to read beyond buffer length")),!((Ae=le.length)<=P))return E?(P+2<Ae&&(z=le[P+2]<<16),P+1<Ae&&(z|=le[P+1]<<8),z|=le[P],P+3<Ae&&(z+=le[P+3]<<24>>>0)):(P+1<Ae&&(z=le[P+1]<<16),P+2<Ae&&(z|=le[P+2]<<8),P+3<Ae&&(z|=le[P+3]),z+=le[P]<<24>>>0),z}function X(le,P,E,ie){if(ie||(Je("boolean"==typeof E,"missing or invalid endian"),Je(null!=P,"missing offset"),Je(P+1<le.length,"Trying to read beyond buffer length")),!(le.length<=P))return 32768&(ie=oe(le,P,E,!0))?-1*(65535-ie+1):ie}function L(le,P,E,ie){if(ie||(Je("boolean"==typeof E,"missing or invalid endian"),Je(null!=P,"missing offset"),Je(P+3<le.length,"Trying to read beyond buffer length")),!(le.length<=P))return 2147483648&(ie=ne(le,P,E,!0))?-1*(4294967295-ie+1):ie}function _(le,P,E,ie){return ie||(Je("boolean"==typeof E,"missing or invalid endian"),Je(P+3<le.length,"Trying to read beyond buffer length")),de.read(le,P,E,23,4)}function O(le,P,E,ie){return ie||(Je("boolean"==typeof E,"missing or invalid endian"),Je(P+7<le.length,"Trying to read beyond buffer length")),de.read(le,P,E,52,8)}function S(le,P,E,ie,z){if(z||(Je(null!=P,"missing value"),Je("boolean"==typeof ie,"missing or invalid endian"),Je(null!=E,"missing offset"),Je(E+1<le.length,"trying to write beyond buffer length"),Ee(P,65535)),!((z=le.length)<=E))for(var Ae=0,et=Math.min(z-E,2);Ae<et;Ae++)le[E+Ae]=(P&255<<8*(ie?Ae:1-Ae))>>>8*(ie?Ae:1-Ae)}function ue(le,P,E,ie,z){if(z||(Je(null!=P,"missing value"),Je("boolean"==typeof ie,"missing or invalid endian"),Je(null!=E,"missing offset"),Je(E+3<le.length,"trying to write beyond buffer length"),Ee(P,4294967295)),!((z=le.length)<=E))for(var Ae=0,et=Math.min(z-E,4);Ae<et;Ae++)le[E+Ae]=P>>>8*(ie?Ae:3-Ae)&255}function j(le,P,E,ie,z){z||(Je(null!=P,"missing value"),Je("boolean"==typeof ie,"missing or invalid endian"),Je(null!=E,"missing offset"),Je(E+1<le.length,"Trying to write beyond buffer length"),$e(P,32767,-32768)),le.length<=E||S(le,0<=P?P:65535+P+1,E,ie,z)}function Te(le,P,E,ie,z){z||(Je(null!=P,"missing value"),Je("boolean"==typeof ie,"missing or invalid endian"),Je(null!=E,"missing offset"),Je(E+3<le.length,"Trying to write beyond buffer length"),$e(P,2147483647,-2147483648)),le.length<=E||ue(le,0<=P?P:4294967295+P+1,E,ie,z)}function se(le,P,E,ie,z){z||(Je(null!=P,"missing value"),Je("boolean"==typeof ie,"missing or invalid endian"),Je(null!=E,"missing offset"),Je(E+3<le.length,"Trying to write beyond buffer length"),ot(P,34028234663852886e22,-34028234663852886e22)),le.length<=E||de.write(le,P,E,ie,23,4)}function Se(le,P,E,ie,z){z||(Je(null!=P,"missing value"),Je("boolean"==typeof ie,"missing or invalid endian"),Je(null!=E,"missing offset"),Je(E+7<le.length,"Trying to write beyond buffer length"),ot(P,17976931348623157e292,-17976931348623157e292)),le.length<=E||de.write(le,P,E,ie,52,8)}J.Buffer=I,J.SlowBuffer=I,J.INSPECT_MAX_BYTES=50,I.poolSize=8192,I._useTypedArrays=function(){try{var le=new ArrayBuffer(0),P=new Uint8Array(le);return P.foo=function(){return 42},42===P.foo()&&"function"==typeof P.subarray}catch{return!1}}(),I.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},I.isBuffer=function(le){return!(null==le||!le._isBuffer)},I.byteLength=function(le,P){var E;switch(le+="",P||"utf8"){case"hex":E=le.length/2;break;case"utf8":case"utf-8":E=Ne(le).length;break;case"ascii":case"binary":case"raw":E=le.length;break;case"base64":E=Pe(le).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":E=2*le.length;break;default:throw new Error("Unknown encoding")}return E},I.concat=function(le,P){if(Je(Xe(le),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===le.length)return new I(0);if(1===le.length)return le[0];if("number"!=typeof P)for(z=P=0;z<le.length;z++)P+=le[z].length;for(var E=new I(P),ie=0,z=0;z<le.length;z++){var Ae=le[z];Ae.copy(E,ie),ie+=Ae.length}return E},I.prototype.write=function(le,P,E,ie){isFinite(P)?isFinite(E)||(ie=E,E=void 0):(Z=ie,ie=P,P=E,E=Z),P=Number(P)||0;var z,Ae,et,ce,Z=this.length-P;switch((!E||Z<(E=Number(E)))&&(E=Z),ie=String(ie||"utf8").toLowerCase()){case"hex":z=function(F,x,M,Q){M=Number(M)||0;var he=F.length-M;(!Q||he<(Q=Number(Q)))&&(Q=he),Je((he=x.length)%2==0,"Invalid hex string"),he/2<Q&&(Q=he/2);for(var ze=0;ze<Q;ze++){var Ye=parseInt(x.substr(2*ze,2),16);Je(!isNaN(Ye),"Invalid hex string"),F[M+ze]=Ye}return I._charsWritten=2*ze,ze}(this,le,P,E);break;case"utf8":case"utf-8":Ae=this,et=P,ce=E,z=I._charsWritten=Ve(Ne(le),Ae,et,ce);break;case"ascii":case"binary":z=function V(le,P,E,ie){return I._charsWritten=Ve(function(z){for(var Ae=[],et=0;et<z.length;et++)Ae.push(255&z.charCodeAt(et));return Ae}(P),le,E,ie)}(this,le,P,E);break;case"base64":Ae=this,et=P,ce=E,z=I._charsWritten=Ve(Pe(le),Ae,et,ce);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":z=function ae(le,P,E,ie){return I._charsWritten=Ve(function(z){for(var Ae,et,ce=[],Z=0;Z<z.length;Z++)Ae=(et=z.charCodeAt(Z))>>8,ce.push(et%=256),ce.push(Ae);return ce}(P),le,E,ie)}(this,le,P,E);break;default:throw new Error("Unknown encoding")}return z},I.prototype.toString=function(le,P,E){var ie,z,Ae,et,ce=this;if(le=String(le||"utf8").toLowerCase(),P=Number(P)||0,(E=void 0!==E?Number(E):ce.length)===P)return"";switch(le){case"hex":ie=function(Z,F,x){var M=Z.length;(!F||F<0)&&(F=0),(!x||x<0||M<x)&&(x=M);for(var Q="",he=F;he<x;he++)Q+=we(Z[he]);return Q}(ce,P,E);break;case"utf8":case"utf-8":ie=function(Z,F,x){var M="",Q="";x=Math.min(Z.length,x);for(var he=F;he<x;he++)Z[he]<=127?(M+=fe(Q)+String.fromCharCode(Z[he]),Q=""):Q+="%"+Z[he].toString(16);return M+fe(Q)}(ce,P,E);break;case"ascii":case"binary":ie=function K(le,P,E){var ie="";E=Math.min(le.length,E);for(var z=P;z<E;z++)ie+=String.fromCharCode(le[z]);return ie}(ce,P,E);break;case"base64":z=ce,et=E,ie=0===(Ae=P)&&et===z.length?W.fromByteArray(z):W.fromByteArray(z.slice(Ae,et));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function(Z,F,x){for(var M=Z.slice(F,x),Q="",he=0;he<M.length;he+=2)Q+=String.fromCharCode(M[he]+256*M[he+1]);return Q}(ce,P,E);break;default:throw new Error("Unknown encoding")}return ie},I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},I.prototype.copy=function(le,P,E,ie){if(P=P||0,(ie=ie||0===ie?ie:this.length)!==(E=E||0)&&0!==le.length&&0!==this.length){Je(E<=ie,"sourceEnd < sourceStart"),Je(0<=P&&P<le.length,"targetStart out of bounds"),Je(0<=E&&E<this.length,"sourceStart out of bounds"),Je(0<=ie&&ie<=this.length,"sourceEnd out of bounds"),ie>this.length&&(ie=this.length);var z=(ie=le.length-P<ie-E?le.length-P+E:ie)-E;if(z<100||!I._useTypedArrays)for(var Ae=0;Ae<z;Ae++)le[Ae+P]=this[Ae+E];else le._set(this.subarray(E,E+z),P)}},I.prototype.slice=function(le,P){var E=this.length;if(le=Oe(le,E,0),P=Oe(P,E,E),I._useTypedArrays)return I._augment(this.subarray(le,P));for(var ie=P-le,z=new I(ie,void 0,!0),Ae=0;Ae<ie;Ae++)z[Ae]=this[Ae+le];return z},I.prototype.get=function(le){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(le)},I.prototype.set=function(le,P){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(le,P)},I.prototype.readUInt8=function(le,P){if(P||(Je(null!=le,"missing offset"),Je(le<this.length,"Trying to read beyond buffer length")),!(le>=this.length))return this[le]},I.prototype.readUInt16LE=function(le,P){return oe(this,le,!0,P)},I.prototype.readUInt16BE=function(le,P){return oe(this,le,!1,P)},I.prototype.readUInt32LE=function(le,P){return ne(this,le,!0,P)},I.prototype.readUInt32BE=function(le,P){return ne(this,le,!1,P)},I.prototype.readInt8=function(le,P){if(P||(Je(null!=le,"missing offset"),Je(le<this.length,"Trying to read beyond buffer length")),!(le>=this.length))return 128&this[le]?-1*(255-this[le]+1):this[le]},I.prototype.readInt16LE=function(le,P){return X(this,le,!0,P)},I.prototype.readInt16BE=function(le,P){return X(this,le,!1,P)},I.prototype.readInt32LE=function(le,P){return L(this,le,!0,P)},I.prototype.readInt32BE=function(le,P){return L(this,le,!1,P)},I.prototype.readFloatLE=function(le,P){return _(this,le,!0,P)},I.prototype.readFloatBE=function(le,P){return _(this,le,!1,P)},I.prototype.readDoubleLE=function(le,P){return O(this,le,!0,P)},I.prototype.readDoubleBE=function(le,P){return O(this,le,!1,P)},I.prototype.writeUInt8=function(le,P,E){E||(Je(null!=le,"missing value"),Je(null!=P,"missing offset"),Je(P<this.length,"trying to write beyond buffer length"),Ee(le,255)),P>=this.length||(this[P]=le)},I.prototype.writeUInt16LE=function(le,P,E){S(this,le,P,!0,E)},I.prototype.writeUInt16BE=function(le,P,E){S(this,le,P,!1,E)},I.prototype.writeUInt32LE=function(le,P,E){ue(this,le,P,!0,E)},I.prototype.writeUInt32BE=function(le,P,E){ue(this,le,P,!1,E)},I.prototype.writeInt8=function(le,P,E){E||(Je(null!=le,"missing value"),Je(null!=P,"missing offset"),Je(P<this.length,"Trying to write beyond buffer length"),$e(le,127,-128)),P>=this.length||this.writeUInt8(0<=le?le:255+le+1,P,E)},I.prototype.writeInt16LE=function(le,P,E){j(this,le,P,!0,E)},I.prototype.writeInt16BE=function(le,P,E){j(this,le,P,!1,E)},I.prototype.writeInt32LE=function(le,P,E){Te(this,le,P,!0,E)},I.prototype.writeInt32BE=function(le,P,E){Te(this,le,P,!1,E)},I.prototype.writeFloatLE=function(le,P,E){se(this,le,P,!0,E)},I.prototype.writeFloatBE=function(le,P,E){se(this,le,P,!1,E)},I.prototype.writeDoubleLE=function(le,P,E){Se(this,le,P,!0,E)},I.prototype.writeDoubleBE=function(le,P,E){Se(this,le,P,!1,E)},I.prototype.fill=function(le,P,E){if(P=P||0,E=E||this.length,Je("number"==typeof(le="string"==typeof(le=le||0)?le.charCodeAt(0):le)&&!isNaN(le),"value is not a number"),Je(P<=E,"end < start"),E!==P&&0!==this.length){Je(0<=P&&P<this.length,"start out of bounds"),Je(0<=E&&E<=this.length,"end out of bounds");for(var ie=P;ie<E;ie++)this[ie]=le}},I.prototype.inspect=function(){for(var le=[],P=this.length,E=0;E<P;E++)if(le[E]=we(this[E]),E===J.INSPECT_MAX_BYTES){le[E+1]="...";break}return"<Buffer "+le.join(" ")+">"},I.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(I._useTypedArrays)return new I(this).buffer;for(var le=new Uint8Array(this.length),P=0,E=le.length;P<E;P+=1)le[P]=this[P];return le.buffer};var Re=I.prototype;function Oe(le,P,E){return"number"!=typeof le?E:P<=(le=~~le)?P:0<=le||0<=(le+=P)?le:0}function Qe(le){return(le=~~Math.ceil(+le))<0?0:le}function Xe(le){return(Array.isArray||function(P){return"[object Array]"===Object.prototype.toString.call(P)})(le)}function we(le){return le<16?"0"+le.toString(16):le.toString(16)}function Ne(le){for(var P=[],E=0;E<le.length;E++){var ie=le.charCodeAt(E);if(ie<=127)P.push(le.charCodeAt(E));else for(var z=E,Ae=(55296<=ie&&ie<=57343&&E++,encodeURIComponent(le.slice(z,E+1)).substr(1).split("%")),et=0;et<Ae.length;et++)P.push(parseInt(Ae[et],16))}return P}function Pe(le){return W.toByteArray(le)}function Ve(le,P,E,ie){for(var z=0;z<ie&&!(z+E>=P.length||z>=le.length);z++)P[z+E]=le[z];return z}function fe(le){try{return decodeURIComponent(le)}catch{return String.fromCharCode(65533)}}function Ee(le,P){Je("number"==typeof le,"cannot write a non-number as a number"),Je(0<=le,"specified a negative value for writing an unsigned value"),Je(le<=P,"value is larger than maximum value for type"),Je(Math.floor(le)===le,"value has a fractional component")}function $e(le,P,E){Je("number"==typeof le,"cannot write a non-number as a number"),Je(le<=P,"value larger than maximum allowed value"),Je(E<=le,"value smaller than minimum allowed value"),Je(Math.floor(le)===le,"value has a fractional component")}function ot(le,P,E){Je("number"==typeof le,"cannot write a non-number as a number"),Je(le<=P,"value larger than maximum allowed value"),Je(E<=le,"value smaller than minimum allowed value")}function Je(le,P){if(!le)throw new Error(P||"Failed assertion")}I._augment=function(le){return le._isBuffer=!0,le._get=le.get,le._set=le.set,le.get=Re.get,le.set=Re.set,le.write=Re.write,le.toString=Re.toString,le.toLocaleString=Re.toString,le.toJSON=Re.toJSON,le.copy=Re.copy,le.slice=Re.slice,le.readUInt8=Re.readUInt8,le.readUInt16LE=Re.readUInt16LE,le.readUInt16BE=Re.readUInt16BE,le.readUInt32LE=Re.readUInt32LE,le.readUInt32BE=Re.readUInt32BE,le.readInt8=Re.readInt8,le.readInt16LE=Re.readInt16LE,le.readInt16BE=Re.readInt16BE,le.readInt32LE=Re.readInt32LE,le.readInt32BE=Re.readInt32BE,le.readFloatLE=Re.readFloatLE,le.readFloatBE=Re.readFloatBE,le.readDoubleLE=Re.readDoubleLE,le.readDoubleBE=Re.readDoubleBE,le.writeUInt8=Re.writeUInt8,le.writeUInt16LE=Re.writeUInt16LE,le.writeUInt16BE=Re.writeUInt16BE,le.writeUInt32LE=Re.writeUInt32LE,le.writeUInt32BE=Re.writeUInt32BE,le.writeInt8=Re.writeInt8,le.writeInt16LE=Re.writeInt16LE,le.writeInt16BE=Re.writeInt16BE,le.writeInt32LE=Re.writeInt32LE,le.writeInt32BE=Re.writeInt32BE,le.writeFloatLE=Re.writeFloatLE,le.writeFloatBE=Re.writeFloatBE,le.writeDoubleLE=Re.writeDoubleLE,le.writeDoubleBE=Re.writeDoubleBE,le.fill=Re.fill,le.inspect=Re.inspect,le.toArrayBuffer=Re.toArrayBuffer,le}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(ge,C,J){(function(A,te,W,ee,g,w,N,G,R){W=ge("buffer").Buffer;var I=new W(4);I.fill(0),C.exports={hash:function(V,ae,K,oe){for(var ne=ae(function(S,ue){S.length%4!=0&&(S=W.concat([S,I],S.length+(4-S.length%4)));for(var Te=[],se=ue?S.readInt32BE:S.readInt32LE,Se=0;Se<S.length;Se+=4)Te.push(se.call(S,Se));return Te}(V=W.isBuffer(V)?V:new W(V),oe),8*V.length),X=(ae=oe,new W(K)),L=ae?X.writeInt32BE:X.writeInt32LE,_=0;_<ne.length;_++)L.call(X,ne[_],4*_,!0);return X}}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(ge,C,J){(function(A,te,W,ee,g,w,N,G,R){W=ge("buffer").Buffer;var de=ge("./sha"),I=ge("./sha256"),V=ge("./rng"),ae={sha1:de,sha256:I,md5:ge("./md5")},K=64,oe=new W(K);function ne(S,ue){var j=ae[S=S||"sha1"],Te=[];return j||X("algorithm:",S,"is not yet supported"),{update:function(se){return W.isBuffer(se)||(se=new W(se)),Te.push(se),this},digest:function(se){var Se=W.concat(Te);return Se=ue?function(Re,Oe,Qe){W.isBuffer(Oe)||(Oe=new W(Oe)),W.isBuffer(Qe)||(Qe=new W(Qe)),Oe.length>K?Oe=Re(Oe):Oe.length<K&&(Oe=W.concat([Oe,oe],K));for(var Xe=new W(K),we=new W(K),Ne=0;Ne<K;Ne++)Xe[Ne]=54^Oe[Ne],we[Ne]=92^Oe[Ne];return Qe=Re(W.concat([Xe,Qe])),Re(W.concat([we,Qe]))}(j,ue,Se):j(Se),Te=null,se?Se.toString(se):Se}}}function X(){var S=[].slice.call(arguments).join(" ");throw new Error([S,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}oe.fill(0),J.createHash=function(S){return ne(S)},J.createHmac=ne,J.randomBytes=function(S,ue){if(!ue||!ue.call)return new W(V(S));try{ue.call(this,void 0,new W(V(S)))}catch(j){ue(j)}};var L,_=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],O=function(S){J[S]=function(){X("sorry,",S,"is not implemented yet")}};for(L in _)O(_[L])}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){var W=ge("./helpers");function de(X,L){X[L>>5]|=128<<L%32,X[14+(L+64>>>9<<4)]=L;for(var _=1732584193,O=-271733879,S=-1732584194,ue=271733878,j=0;j<X.length;j+=16){var Te=_,se=O,Se=S,Re=ue;_=V(_,O,S,ue,X[j+0],7,-680876936),ue=V(ue,_,O,S,X[j+1],12,-389564586),S=V(S,ue,_,O,X[j+2],17,606105819),O=V(O,S,ue,_,X[j+3],22,-1044525330),_=V(_,O,S,ue,X[j+4],7,-176418897),ue=V(ue,_,O,S,X[j+5],12,1200080426),S=V(S,ue,_,O,X[j+6],17,-1473231341),O=V(O,S,ue,_,X[j+7],22,-45705983),_=V(_,O,S,ue,X[j+8],7,1770035416),ue=V(ue,_,O,S,X[j+9],12,-1958414417),S=V(S,ue,_,O,X[j+10],17,-42063),O=V(O,S,ue,_,X[j+11],22,-1990404162),_=V(_,O,S,ue,X[j+12],7,1804603682),ue=V(ue,_,O,S,X[j+13],12,-40341101),S=V(S,ue,_,O,X[j+14],17,-1502002290),_=ae(_,O=V(O,S,ue,_,X[j+15],22,1236535329),S,ue,X[j+1],5,-165796510),ue=ae(ue,_,O,S,X[j+6],9,-1069501632),S=ae(S,ue,_,O,X[j+11],14,643717713),O=ae(O,S,ue,_,X[j+0],20,-373897302),_=ae(_,O,S,ue,X[j+5],5,-701558691),ue=ae(ue,_,O,S,X[j+10],9,38016083),S=ae(S,ue,_,O,X[j+15],14,-660478335),O=ae(O,S,ue,_,X[j+4],20,-405537848),_=ae(_,O,S,ue,X[j+9],5,568446438),ue=ae(ue,_,O,S,X[j+14],9,-1019803690),S=ae(S,ue,_,O,X[j+3],14,-187363961),O=ae(O,S,ue,_,X[j+8],20,1163531501),_=ae(_,O,S,ue,X[j+13],5,-1444681467),ue=ae(ue,_,O,S,X[j+2],9,-51403784),S=ae(S,ue,_,O,X[j+7],14,1735328473),_=K(_,O=ae(O,S,ue,_,X[j+12],20,-1926607734),S,ue,X[j+5],4,-378558),ue=K(ue,_,O,S,X[j+8],11,-2022574463),S=K(S,ue,_,O,X[j+11],16,1839030562),O=K(O,S,ue,_,X[j+14],23,-35309556),_=K(_,O,S,ue,X[j+1],4,-1530992060),ue=K(ue,_,O,S,X[j+4],11,1272893353),S=K(S,ue,_,O,X[j+7],16,-155497632),O=K(O,S,ue,_,X[j+10],23,-1094730640),_=K(_,O,S,ue,X[j+13],4,681279174),ue=K(ue,_,O,S,X[j+0],11,-358537222),S=K(S,ue,_,O,X[j+3],16,-722521979),O=K(O,S,ue,_,X[j+6],23,76029189),_=K(_,O,S,ue,X[j+9],4,-640364487),ue=K(ue,_,O,S,X[j+12],11,-421815835),S=K(S,ue,_,O,X[j+15],16,530742520),_=oe(_,O=K(O,S,ue,_,X[j+2],23,-995338651),S,ue,X[j+0],6,-198630844),ue=oe(ue,_,O,S,X[j+7],10,1126891415),S=oe(S,ue,_,O,X[j+14],15,-1416354905),O=oe(O,S,ue,_,X[j+5],21,-57434055),_=oe(_,O,S,ue,X[j+12],6,1700485571),ue=oe(ue,_,O,S,X[j+3],10,-1894986606),S=oe(S,ue,_,O,X[j+10],15,-1051523),O=oe(O,S,ue,_,X[j+1],21,-2054922799),_=oe(_,O,S,ue,X[j+8],6,1873313359),ue=oe(ue,_,O,S,X[j+15],10,-30611744),S=oe(S,ue,_,O,X[j+6],15,-1560198380),O=oe(O,S,ue,_,X[j+13],21,1309151649),_=oe(_,O,S,ue,X[j+4],6,-145523070),ue=oe(ue,_,O,S,X[j+11],10,-1120210379),S=oe(S,ue,_,O,X[j+2],15,718787259),O=oe(O,S,ue,_,X[j+9],21,-343485551),_=ne(_,Te),O=ne(O,se),S=ne(S,Se),ue=ne(ue,Re)}return Array(_,O,S,ue)}function I(X,L,_,O,S,ue){return ne((L=ne(ne(L,X),ne(O,ue)))<<S|L>>>32-S,_)}function V(X,L,_,O,S,ue,j){return I(L&_|~L&O,X,L,S,ue,j)}function ae(X,L,_,O,S,ue,j){return I(L&O|_&~O,X,L,S,ue,j)}function K(X,L,_,O,S,ue,j){return I(L^_^O,X,L,S,ue,j)}function oe(X,L,_,O,S,ue,j){return I(_^(L|~O),X,L,S,ue,j)}function ne(X,L){var _=(65535&X)+(65535&L);return(X>>16)+(L>>16)+(_>>16)<<16|65535&_}C.exports=function(X){return W.hash(X,de,16)}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){C.exports=function(de){for(var I,V=new Array(de),ae=0;ae<de;ae++)!(3&ae)&&(I=4294967296*Math.random()),V[ae]=I>>>((3&ae)<<3)&255;return V}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){var W=ge("./helpers");function de(ae,K){ae[K>>5]|=128<<24-K%32,ae[15+(K+64>>9<<4)]=K;for(var oe,ne,X,L=Array(80),_=1732584193,O=-271733879,S=-1732584194,ue=271733878,j=-1009589776,Te=0;Te<ae.length;Te+=16){for(var se=_,Se=O,Re=S,Oe=ue,Qe=j,Xe=0;Xe<80;Xe++){L[Xe]=Xe<16?ae[Te+Xe]:V(L[Xe-3]^L[Xe-8]^L[Xe-14]^L[Xe-16],1);var we=I(I(V(_,5),(we=O,ne=S,X=ue,(oe=Xe)<20?we&ne|~we&X:!(oe<40)&&oe<60?we&ne|we&X|ne&X:we^ne^X)),I(I(j,L[Xe]),(oe=Xe)<20?1518500249:oe<40?1859775393:oe<60?-1894007588:-899497514));j=ue,ue=S,S=V(O,30),O=_,_=we}_=I(_,se),O=I(O,Se),S=I(S,Re),ue=I(ue,Oe),j=I(j,Qe)}return Array(_,O,S,ue,j)}function I(ae,K){var oe=(65535&ae)+(65535&K);return(ae>>16)+(K>>16)+(oe>>16)<<16|65535&oe}function V(ae,K){return ae<<K|ae>>>32-K}C.exports=function(ae){return W.hash(ae,de,20,!0)}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){function W(K,oe){var ne=(65535&K)+(65535&oe);return(K>>16)+(oe>>16)+(ne>>16)<<16|65535&ne}function de(K,oe){var ne,X=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),L=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);K[oe>>5]|=128<<24-oe%32,K[15+(oe+64>>9<<4)]=oe;for(var O,S,ue=0;ue<K.length;ue+=16){for(var j=L[0],Te=L[1],se=L[2],Se=L[3],Re=L[4],Oe=L[5],Qe=L[6],Xe=L[7],we=0;we<64;we++)_[we]=we<16?K[we+ue]:W(W(W(V(S=_[we-2],17)^V(S,19)^ae(S,10),_[we-7]),V(S=_[we-15],7)^V(S,18)^ae(S,3)),_[we-16]),ne=W(W(W(W(Xe,V(S=Re,6)^V(S,11)^V(S,25)),Re&Oe^~Re&Qe),X[we]),_[we]),O=W(V(O=j,2)^V(O,13)^V(O,22),j&Te^j&se^Te&se),Xe=Qe,Qe=Oe,Oe=Re,Re=W(Se,ne),Se=se,se=Te,Te=j,j=W(ne,O);L[0]=W(j,L[0]),L[1]=W(Te,L[1]),L[2]=W(se,L[2]),L[3]=W(Se,L[3]),L[4]=W(Re,L[4]),L[5]=W(Oe,L[5]),L[6]=W(Qe,L[6]),L[7]=W(Xe,L[7])}return L}var I=ge("./helpers"),V=function(K,oe){return K>>>oe|K<<32-oe},ae=function(K,oe){return K>>>oe};C.exports=function(K){return I.hash(K,de,32,!0)}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){J.read=function(W,de,I,V,ue){var K,oe,ne=8*ue-V-1,X=(1<<ne)-1,L=X>>1,_=-7,O=I?ue-1:0,S=I?-1:1;for(ue=W[de+O],O+=S,K=ue&(1<<-_)-1,ue>>=-_,_+=ne;0<_;K=256*K+W[de+O],O+=S,_-=8);for(oe=K&(1<<-_)-1,K>>=-_,_+=V;0<_;oe=256*oe+W[de+O],O+=S,_-=8);if(0===K)K=1-L;else{if(K===X)return oe?NaN:1/0*(ue?-1:1);oe+=Math.pow(2,V),K-=L}return(ue?-1:1)*oe*Math.pow(2,K-V)},J.write=function(W,de,I,V,ae,j){var oe,ne,X=8*j-ae-1,L=(1<<X)-1,_=L>>1,O=23===ae?Math.pow(2,-24)-Math.pow(2,-77):0,S=V?0:j-1,ue=V?1:-1;for(j=de<0||0===de&&1/de<0?1:0,de=Math.abs(de),isNaN(de)||de===1/0?(ne=isNaN(de)?1:0,oe=L):(oe=Math.floor(Math.log(de)/Math.LN2),de*(V=Math.pow(2,-oe))<1&&(oe--,V*=2),2<=(de+=1<=oe+_?O/V:O*Math.pow(2,1-_))*V&&(oe++,V/=2),L<=oe+_?(ne=0,oe=L):1<=oe+_?(ne=(de*V-1)*Math.pow(2,ae),oe+=_):(ne=de*Math.pow(2,_-1)*Math.pow(2,ae),oe=0));8<=ae;W[I+S]=255&ne,S+=ue,ne/=256,ae-=8);for(oe=oe<<ae|ne,X+=ae;0<X;W[I+S]=255&oe,S+=ue,oe/=256,X-=8);W[I+S-ue]|=128*j}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(ge,C,J){(function(A,te,B,ee,g,w,N,G,R){var W,de,I;function V(){}(A=C.exports={}).nextTick=(de=typeof window<"u"&&window.setImmediate,I=typeof window<"u"&&window.postMessage&&window.addEventListener,de?function(ae){return window.setImmediate(ae)}:I?(W=[],window.addEventListener("message",function(ae){var K=ae.source;K!==window&&null!==K||"process-tick"!==ae.data||(ae.stopPropagation(),0<W.length&&W.shift()())},!0),function(ae){W.push(ae),window.postMessage("process-tick","*")}):function(ae){setTimeout(ae,0)}),A.title="browser",A.browser=!0,A.env={},A.argv=[],A.on=V,A.addListener=V,A.once=V,A.off=V,A.removeListener=V,A.removeAllListeners=V,A.emit=V,A.binding=function(ae){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(ae){throw new Error("process.chdir is not supported")}}).call(this,ge("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ge("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:Ue=>{var C,J,ge=Ue.exports={};function A(){throw new Error("setTimeout has not been defined")}function te(){throw new Error("clearTimeout has not been defined")}function B(V){if(C===setTimeout)return setTimeout(V,0);if((C===A||!C)&&setTimeout)return C=setTimeout,setTimeout(V,0);try{return C(V,0)}catch{try{return C.call(null,V,0)}catch{return C.call(this,V,0)}}}!function(){try{C="function"==typeof setTimeout?setTimeout:A}catch{C=A}try{J="function"==typeof clearTimeout?clearTimeout:te}catch{J=te}}();var N,g=[],w=!1,G=-1;function R(){!w||!N||(w=!1,N.length?g=N.concat(g):G=-1,g.length&&W())}function W(){if(!w){var V=B(R);w=!0;for(var ae=g.length;ae;){for(N=g,g=[];++G<ae;)N&&N[G].run();G=-1,ae=g.length}N=null,w=!1,function ee(V){if(J===clearTimeout)return clearTimeout(V);if((J===te||!J)&&clearTimeout)return J=clearTimeout,clearTimeout(V);try{return J(V)}catch{try{return J.call(null,V)}catch{return J.call(this,V)}}}(V)}}function de(V,ae){this.fun=V,this.array=ae}function I(){}ge.nextTick=function(V){var ae=new Array(arguments.length-1);if(arguments.length>1)for(var K=1;K<arguments.length;K++)ae[K-1]=arguments[K];g.push(new de(V,ae)),1===g.length&&!w&&B(W)},de.prototype.run=function(){this.fun.apply(null,this.array)},ge.title="browser",ge.browser=!0,ge.env={},ge.argv=[],ge.version="",ge.versions={},ge.on=I,ge.addListener=I,ge.once=I,ge.off=I,ge.removeListener=I,ge.removeAllListeners=I,ge.emit=I,ge.prependListener=I,ge.prependOnceListener=I,ge.listeners=function(V){return[]},ge.binding=function(V){throw new Error("process.binding is not supported")},ge.cwd=function(){return"/"},ge.chdir=function(V){throw new Error("process.chdir is not supported")},ge.umask=function(){return 0}},3410:Ue=>{let ge;Ue.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):C=>(ge||(ge=Promise.resolve())).then(C).catch(J=>setTimeout(()=>{throw J},0))},1986:(Ue,ge,C)=>{Ue.exports=C(7842)},5327:Ue=>{"use strict";Ue.exports=class GY{constructor(C,J=new Map,A=0){this.prefix=C,this._existing=J,this.counter=A}clone(){const{prefix:C,_existing:J,counter:A}=this;return new GY(C,new Map(J),A)}getId(C){const J=C&&this._existing.get(C);if(J)return J;const A=this.prefix+this.counter;return this.counter++,C&&this._existing.set(C,A),A}hasId(C){return this._existing.has(C)}getOldIds(){return[...this._existing.keys()]}}},7475:(Ue,ge,C)=>{"use strict";var J=C(7156).default;C(8280);const A=self.crypto||self.msCrypto;Ue.exports=class{constructor(B){if(!A||!A.subtle)throw new Error("crypto.subtle not found.");if("sha256"===B)this.algorithm={name:"SHA-256"};else{if("sha1"!==B)throw new Error(`Unsupported algorithm "${B}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(B){this._content+=B}digest(){var B=this;return J(function*(){const ee=(new TextEncoder).encode(B._content),g=new Uint8Array(yield A.subtle.digest(B.algorithm,ee));let w="";for(let N=0;N<g.length;++N)w+=g[N].toString(16).padStart(2,"0");return w})()}}},8003:Ue=>{"use strict";const J="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",A="http://www.w3.org/2001/XMLSchema#string",te="NamedNode",B="BlankNode",ee="Literal",g="DefaultGraph",w={};function N(I,V){return I.subject.termType===V.subject.termType&&I.object.termType===V.object.termType&&I.subject.value===V.subject.value&&I.predicate.value===V.predicate.value&&I.object.value===V.object.value&&(I.object.termType!==ee||I.object.datatype.termType===V.object.datatype.termType&&I.object.language===V.object.language&&I.object.datatype.value===V.object.datatype.value)}(()=>{const I="(?:<([^:]+:[^>]*)>)",ae="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",K=ae+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ne="(_:(?:["+ae+"0-9])(?:(?:["+K+".])*(?:["+K+"]))?)",S="[ \\t]+",ue="[ \\t]*",j="(?:"+I+"|"+ne+")"+S,Te=I+S,se="(?:"+I+"|"+ne+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+I+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+ue,Se="(?:\\.|(?:(?:"+I+"|"+ne+")"+ue+"\\.))";w.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,w.empty=new RegExp("^[ \\t]*$"),w.quad=new RegExp("^"+ue+j+Te+se+Se+ue+"$")})(),Ue.exports=class uS{static parse(V){const ae=[],K={},oe=V.split(w.eoln);let ne=0;for(const X of oe){if(ne++,w.empty.test(X))continue;const L=X.match(w.quad);if(null===L)throw new Error("N-Quads parse error on line "+ne+".");const _={subject:null,predicate:null,object:null,graph:null};if(_.subject=void 0!==L[1]?{termType:te,value:L[1]}:{termType:B,value:L[2]},_.predicate={termType:te,value:L[3]},void 0!==L[4]?_.object={termType:te,value:L[4]}:void 0!==L[5]?_.object={termType:B,value:L[5]}:(_.object={termType:ee,value:void 0,datatype:{termType:te}},void 0!==L[7]?_.object.datatype.value=L[7]:void 0!==L[8]?(_.object.datatype.value=J,_.object.language=L[8]):_.object.datatype.value=A,_.object.value=L[6].replace(W,function(V,ae,K,oe){if(ae)switch(ae){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(K)return String.fromCharCode(parseInt(K,16));if(oe)throw new Error("Unsupported U escape")})),_.graph=void 0!==L[9]?{termType:te,value:L[9]}:void 0!==L[10]?{termType:B,value:L[10]}:{termType:g,value:""},_.graph.value in K){let O=!0;const S=K[_.graph.value];for(const ue of S)if(N(ue,_)){O=!1;break}O&&(S.push(_),ae.push(_))}else K[_.graph.value]=[_],ae.push(_)}return ae}static serialize(V){Array.isArray(V)||(V=uS.legacyDatasetToQuads(V));const ae=[];for(const K of V)ae.push(uS.serializeQuad(K));return ae.sort().join("")}static serializeQuadComponents(V,ae,K,oe){let ne="";return ne+=V.termType===te?`<${V.value}>`:`${V.value}`,ne+=` <${ae.value}> `,K.termType===te?ne+=`<${K.value}>`:K.termType===B?ne+=K.value:(ne+=`"${function R(I){return I.replace(G,function(V){switch(V){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(K.value)}"`,K.datatype.value===J?K.language&&(ne+=`@${K.language}`):K.datatype.value!==A&&(ne+=`^^<${K.datatype.value}>`)),oe.termType===te?ne+=` <${oe.value}>`:oe.termType===B&&(ne+=` ${oe.value}`),ne+=" .\n",ne}static serializeQuad(V){return uS.serializeQuadComponents(V.subject,V.predicate,V.object,V.graph)}static legacyDatasetToQuads(V){const ae=[],K={"blank node":B,IRI:te,literal:ee};for(const oe in V)V[oe].forEach(X=>{const L={};for(const _ in X){const O=X[_],S={termType:K[O.type],value:O.value};S.termType===ee&&(S.datatype={termType:te},"datatype"in O&&(S.datatype.value=O.datatype),"language"in O?("datatype"in O||(S.datatype.value=J),S.language=O.language):"datatype"in O||(S.datatype.value=A)),L[_]=S}L.graph="@default"===oe?{termType:g,value:""}:{termType:oe.startsWith("_:")?B:te,value:oe},ae.push(L)});return ae}};const G=/["\\\n\r]/g,W=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:Ue=>{"use strict";Ue.exports=class{constructor(C){this.current=C.sort(),this.done=!1,this.dir=new Map;for(let J=0;J<C.length;++J)this.dir.set(C[J],!0)}hasNext(){return!this.done}next(){const{current:C,dir:J}=this,A=C.slice();let te=null,B=0;const ee=C.length;for(let g=0;g<ee;++g){const w=C[g],N=J.get(w);(null===te||w>te)&&(N&&g>0&&w>C[g-1]||!N&&g<ee-1&&w>C[g+1])&&(te=w,B=g)}if(null===te)this.done=!0;else{const g=J.get(te)?B-1:B+1;C[B]=C[g],C[g]=te;for(const w of C)w>te&&J.set(w,!J.get(w))}return A}}},7218:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(5327),te=C(7475),B=C(7790),ee=C(8003);function g(w,N){return w.hash<N.hash?-1:w.hash>N.hash?1:0}Ue.exports=class{constructor({createMessageDigest:N=(()=>new te("sha256")),canonicalIdMap:G=new Map,maxDeepIterations:R=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new A("_:c14n",G),this.createMessageDigest=N,this.maxDeepIterations=R,this.quads=null,this.deepIterations=null}main(N){var G=this;return J(function*(){G.deepIterations=new Map,G.quads=N;for(const K of N)G._addBlankNodeQuadInfo({quad:K,component:K.subject}),G._addBlankNodeQuadInfo({quad:K,component:K.object}),G._addBlankNodeQuadInfo({quad:K,component:K.graph});const R=new Map,W=[...G.blankNodeInfo.keys()];let de=0;for(const K of W)++de%100==0&&(yield G._yield()),yield G._hashAndTrackBlankNode({id:K,hashToBlankNodes:R});const I=[...R.keys()].sort(),V=[];for(const K of I){const oe=R.get(K);oe.length>1?V.push(oe):G.canonicalIssuer.getId(oe[0])}for(const K of V){const oe=[];for(const ne of K){if(G.canonicalIssuer.hasId(ne))continue;const X=new A("_:b");X.getId(ne);const L=yield G.hashNDegreeQuads(ne,X);oe.push(L)}oe.sort(g);for(const ne of oe){const X=ne.issuer.getOldIds();for(const L of X)G.canonicalIssuer.getId(L)}}const ae=[];for(const K of G.quads){const oe=ee.serializeQuadComponents(G._componentWithCanonicalId(K.subject),K.predicate,G._componentWithCanonicalId(K.object),G._componentWithCanonicalId(K.graph));ae.push(oe)}return ae.sort(),ae.join("")})()}hashFirstDegreeQuads(N){var G=this;return J(function*(){const R=[],W=G.blankNodeInfo.get(N),de=W.quads;for(const V of de){const ae={subject:null,predicate:V.predicate,object:null,graph:null};ae.subject=G.modifyFirstDegreeComponent(N,V.subject,"subject"),ae.object=G.modifyFirstDegreeComponent(N,V.object,"object"),ae.graph=G.modifyFirstDegreeComponent(N,V.graph,"graph"),R.push(ee.serializeQuad(ae))}R.sort();const I=G.createMessageDigest();for(const V of R)I.update(V);return W.hash=yield I.digest(),W.hash})()}hashRelatedBlankNode(N,G,R,W){var de=this;return J(function*(){let I;I=de.canonicalIssuer.hasId(N)?de.canonicalIssuer.getId(N):R.hasId(N)?R.getId(N):de.blankNodeInfo.get(N).hash;const V=de.createMessageDigest();return V.update(W),"g"!==W&&V.update(de.getRelatedPredicate(G)),V.update(I),V.digest()})()}hashNDegreeQuads(N,G){var R=this;return J(function*(){const W=R.deepIterations.get(N)||0;if(W>R.maxDeepIterations)throw new Error(`Maximum deep iterations (${R.maxDeepIterations}) exceeded.`);R.deepIterations.set(N,W+1);const de=R.createMessageDigest(),I=yield R.createHashToRelated(N,G),V=[...I.keys()].sort();for(const ae of V){de.update(ae);let oe,K="";const ne=new B(I.get(ae));let X=0;for(;ne.hasNext();){const L=ne.next();++X%3==0&&(yield R._yield());let _=G.clone(),O="";const S=[];let ue=!1;for(const j of L)if(R.canonicalIssuer.hasId(j)?O+=R.canonicalIssuer.getId(j):(_.hasId(j)||S.push(j),O+=_.getId(j)),0!==K.length&&O>K){ue=!0;break}if(!ue){for(const j of S){const Te=yield R.hashNDegreeQuads(j,_);if(O+=_.getId(j),O+=`<${Te.hash}>`,_=Te.issuer,0!==K.length&&O>K){ue=!0;break}}ue||(0===K.length||O<K)&&(K=O,oe=_)}}de.update(K),G=oe}return{hash:yield de.digest(),issuer:G}})()}modifyFirstDegreeComponent(N,G){return"BlankNode"!==G.termType?G:{termType:"BlankNode",value:G.value===N?"_:a":"_:z"}}getRelatedPredicate(N){return`<${N.predicate.value}>`}createHashToRelated(N,G){var R=this;return J(function*(){const W=new Map,de=R.blankNodeInfo.get(N).quads;let I=0;for(const V of de)++I%100==0&&(yield R._yield()),yield Promise.all([R._addRelatedBlankNodeHash({quad:V,component:V.subject,position:"s",id:N,issuer:G,hashToRelated:W}),R._addRelatedBlankNodeHash({quad:V,component:V.object,position:"o",id:N,issuer:G,hashToRelated:W}),R._addRelatedBlankNodeHash({quad:V,component:V.graph,position:"g",id:N,issuer:G,hashToRelated:W})]);return W})()}_hashAndTrackBlankNode({id:N,hashToBlankNodes:G}){var R=this;return J(function*(){const W=yield R.hashFirstDegreeQuads(N),de=G.get(W);de?de.push(N):G.set(W,[N])})()}_addBlankNodeQuadInfo({quad:N,component:G}){if("BlankNode"!==G.termType)return;const R=G.value,W=this.blankNodeInfo.get(R);W?W.quads.add(N):this.blankNodeInfo.set(R,{quads:new Set([N]),hash:null})}_addRelatedBlankNodeHash({quad:N,component:G,position:R,id:W,issuer:de,hashToRelated:I}){var V=this;return J(function*(){if("BlankNode"!==G.termType||G.value===W)return;const ae=G.value,K=yield V.hashRelatedBlankNode(ae,N,de,R),oe=I.get(K);oe?oe.push(ae):I.set(K,[ae])})()}_componentWithCanonicalId(N){return"BlankNode"!==N.termType||N.value.startsWith(this.canonicalIssuer.prefix)?N:{termType:"BlankNode",value:this.canonicalIssuer.getId(N.value)}}_yield(){return J(function*(){return new Promise(N=>setImmediate(N))})()}}},9123:(Ue,ge,C)=>{"use strict";const J=C(5327),A=C(7475),te=C(7790),B=C(8003);function ee(g,w){return g.hash<w.hash?-1:g.hash>w.hash?1:0}Ue.exports=class{constructor({createMessageDigest:w=(()=>new A("sha256")),canonicalIdMap:N=new Map,maxDeepIterations:G=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new J("_:c14n",N),this.createMessageDigest=w,this.maxDeepIterations=G,this.quads=null,this.deepIterations=null}main(w){this.deepIterations=new Map,this.quads=w;for(const I of w)this._addBlankNodeQuadInfo({quad:I,component:I.subject}),this._addBlankNodeQuadInfo({quad:I,component:I.object}),this._addBlankNodeQuadInfo({quad:I,component:I.graph});const N=new Map,G=[...this.blankNodeInfo.keys()];for(const I of G)this._hashAndTrackBlankNode({id:I,hashToBlankNodes:N});const R=[...N.keys()].sort(),W=[];for(const I of R){const V=N.get(I);V.length>1?W.push(V):this.canonicalIssuer.getId(V[0])}for(const I of W){const V=[];for(const ae of I){if(this.canonicalIssuer.hasId(ae))continue;const K=new J("_:b");K.getId(ae);const oe=this.hashNDegreeQuads(ae,K);V.push(oe)}V.sort(ee);for(const ae of V){const K=ae.issuer.getOldIds();for(const oe of K)this.canonicalIssuer.getId(oe)}}const de=[];for(const I of this.quads){const V=B.serializeQuadComponents(this._componentWithCanonicalId({component:I.subject}),I.predicate,this._componentWithCanonicalId({component:I.object}),this._componentWithCanonicalId({component:I.graph}));de.push(V)}return de.sort(),de.join("")}hashFirstDegreeQuads(w){const N=[],G=this.blankNodeInfo.get(w),R=G.quads;for(const de of R){const I={subject:null,predicate:de.predicate,object:null,graph:null};I.subject=this.modifyFirstDegreeComponent(w,de.subject,"subject"),I.object=this.modifyFirstDegreeComponent(w,de.object,"object"),I.graph=this.modifyFirstDegreeComponent(w,de.graph,"graph"),N.push(B.serializeQuad(I))}N.sort();const W=this.createMessageDigest();for(const de of N)W.update(de);return G.hash=W.digest(),G.hash}hashRelatedBlankNode(w,N,G,R){let W;W=this.canonicalIssuer.hasId(w)?this.canonicalIssuer.getId(w):G.hasId(w)?G.getId(w):this.blankNodeInfo.get(w).hash;const de=this.createMessageDigest();return de.update(R),"g"!==R&&de.update(this.getRelatedPredicate(N)),de.update(W),de.digest()}hashNDegreeQuads(w,N){const G=this.deepIterations.get(w)||0;if(G>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(w,G+1);const R=this.createMessageDigest(),W=this.createHashToRelated(w,N),de=[...W.keys()].sort();for(const I of de){R.update(I);let ae,V="";const K=new te(W.get(I));for(;K.hasNext();){const oe=K.next();let ne=N.clone(),X="";const L=[];let _=!1;for(const O of oe)if(this.canonicalIssuer.hasId(O)?X+=this.canonicalIssuer.getId(O):(ne.hasId(O)||L.push(O),X+=ne.getId(O)),0!==V.length&&X>V){_=!0;break}if(!_){for(const O of L){const S=this.hashNDegreeQuads(O,ne);if(X+=ne.getId(O),X+=`<${S.hash}>`,ne=S.issuer,0!==V.length&&X>V){_=!0;break}}_||(0===V.length||X<V)&&(V=X,ae=ne)}}R.update(V),N=ae}return{hash:R.digest(),issuer:N}}modifyFirstDegreeComponent(w,N){return"BlankNode"!==N.termType?N:{termType:"BlankNode",value:N.value===w?"_:a":"_:z"}}getRelatedPredicate(w){return`<${w.predicate.value}>`}createHashToRelated(w,N){const G=new Map,R=this.blankNodeInfo.get(w).quads;for(const W of R)this._addRelatedBlankNodeHash({quad:W,component:W.subject,position:"s",id:w,issuer:N,hashToRelated:G}),this._addRelatedBlankNodeHash({quad:W,component:W.object,position:"o",id:w,issuer:N,hashToRelated:G}),this._addRelatedBlankNodeHash({quad:W,component:W.graph,position:"g",id:w,issuer:N,hashToRelated:G});return G}_hashAndTrackBlankNode({id:w,hashToBlankNodes:N}){const G=this.hashFirstDegreeQuads(w),R=N.get(G);R?R.push(w):N.set(G,[w])}_addBlankNodeQuadInfo({quad:w,component:N}){if("BlankNode"!==N.termType)return;const G=N.value,R=this.blankNodeInfo.get(G);R?R.quads.add(w):this.blankNodeInfo.set(G,{quads:new Set([w]),hash:null})}_addRelatedBlankNodeHash({quad:w,component:N,position:G,id:R,issuer:W,hashToRelated:de}){if("BlankNode"!==N.termType||N.value===R)return;const I=N.value,V=this.hashRelatedBlankNode(I,w,W,G),ae=de.get(V);ae?ae.push(I):de.set(V,[I])}_componentWithCanonicalId({component:w}){return"BlankNode"!==w.termType||w.value.startsWith(this.canonicalIssuer.prefix)?w:{termType:"BlankNode",value:this.canonicalIssuer.getId(w.value)}}}},1326:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(7475),te=C(7218);Ue.exports=class extends te{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new A("sha1")}modifyFirstDegreeComponent(ee,g,w){return"BlankNode"!==g.termType?g:"graph"===w?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:g.value===ee?"_:a":"_:z"}}getRelatedPredicate(ee){return ee.predicate.value}createHashToRelated(ee,g){var w=this;return J(function*(){const N=new Map,G=w.blankNodeInfo.get(ee).quads;let R=0;for(const W of G){let de,I;if("BlankNode"===W.subject.termType&&W.subject.value!==ee)I=W.subject.value,de="p";else{if("BlankNode"!==W.object.termType||W.object.value===ee)continue;I=W.object.value,de="r"}++R%100==0&&(yield w._yield());const V=yield w.hashRelatedBlankNode(I,W,g,de),ae=N.get(V);ae?ae.push(I):N.set(V,[I])}return N})()}}},9869:(Ue,ge,C)=>{"use strict";const J=C(7475),A=C(9123);Ue.exports=class extends A{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new J("sha1")}modifyFirstDegreeComponent(B,ee,g){return"BlankNode"!==ee.termType?ee:"graph"===g?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:ee.value===B?"_:a":"_:z"}}getRelatedPredicate(B){return B.predicate.value}createHashToRelated(B,ee){const g=new Map,w=this.blankNodeInfo.get(B).quads;for(const N of w){let G,R;if("BlankNode"===N.subject.termType&&N.subject.value!==B)R=N.subject.value,G="p";else{if("BlankNode"!==N.object.termType||N.object.value===B)continue;R=N.object.value,G="r"}const W=this.hashRelatedBlankNode(R,N,ee,G),de=g.get(W);de?de.push(R):g.set(W,[R])}return g}}},7842:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(7218),te=C(1326),B=C(9123),ee=C(9869);let g;try{g=C(7670)}catch{}function w(N){return Array.isArray(N)?N:ge.NQuads.legacyDatasetToQuads(N)}ge.NQuads=C(8003),ge.IdentifierIssuer=C(5327),ge._rdfCanonizeNative=function(N){return N&&(g=N),g},ge.canonize=function(){var N=J(function*(G,R){const W=w(G);if(R.useNative){if(!g)throw new Error("rdf-canonize-native not available");if(R.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((de,I)=>g.canonize(W,R,(V,ae)=>V?I(V):de(ae)))}if("URDNA2015"===R.algorithm)return new A(R).main(W);if("URGNA2012"===R.algorithm){if(R.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new te(R).main(W)}throw"algorithm"in R?new Error("Invalid RDF Dataset Canonicalization algorithm: "+R.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(G,R){return N.apply(this,arguments)}}(),ge._canonizeSync=function(N,G){const R=w(N);if(G.useNative){if(!g)throw new Error("rdf-canonize-native not available");if(G.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return g.canonizeSync(R,G)}if("URDNA2015"===G.algorithm)return new B(G).main(R);if("URGNA2012"===G.algorithm){if(G.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new ee(G).main(R)}throw"algorithm"in G?new Error("Invalid RDF Dataset Canonicalization algorithm: "+G.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(Ue,ge,C){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,B,ee,g){void 0===g&&(g=ee),Object.defineProperty(te,g,{enumerable:!0,get:function(){return B[ee]}})}:function(te,B,ee,g){void 0===g&&(g=ee),te[g]=B[ee]}),A=this&&this.__exportStar||function(te,B){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(B,ee)&&J(B,te,ee)};Object.defineProperty(ge,"__esModule",{value:!0}),A(C(4740),ge),A(C(3613),ge),A(C(9379),ge),A(C(5565),ge),A(C(3283),ge),A(C(3905),ge),A(C(2234),ge)},4740:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.BlankNode=void 0,ge.BlankNode=class C{constructor(A){this.termType="BlankNode",this.value=A}equals(A){return!!A&&"BlankNode"===A.termType&&A.value===this.value}}},3613:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.DataFactory=void 0;const J=C(4740),A=C(9379),te=C(5565),B=C(3283),ee=C(3905),g=C(2234);let w=0;ge.DataFactory=class N{constructor(R){this.blankNodeCounter=0,this.blankNodePrefix=(R=R||{}).blankNodePrefix||`df_${w++}_`}namedNode(R){return new B.NamedNode(R)}blankNode(R){return new J.BlankNode(R||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(R,W){return new te.Literal(R,W)}variable(R){return new g.Variable(R)}defaultGraph(){return A.DefaultGraph.INSTANCE}quad(R,W,de,I){return new ee.Quad(R,W,de,I||this.defaultGraph())}fromTerm(R){switch(R.termType){case"NamedNode":return this.namedNode(R.value);case"BlankNode":return this.blankNode(R.value);case"Literal":return R.language?this.literal(R.value,R.language):R.datatype.equals(te.Literal.XSD_STRING)?this.literal(R.value):this.literal(R.value,this.fromTerm(R.datatype));case"Variable":return this.variable(R.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(R.subject),this.fromTerm(R.predicate),this.fromTerm(R.object),this.fromTerm(R.graph))}}fromQuad(R){return this.fromTerm(R)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.DefaultGraph=void 0;class C{constructor(){this.termType="DefaultGraph",this.value=""}equals(A){return!!A&&"DefaultGraph"===A.termType}}ge.DefaultGraph=C,C.INSTANCE=new C},5565:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.Literal=void 0;const J=C(3283);class A{constructor(B,ee){this.termType="Literal",this.value=B,"string"==typeof ee?(this.language=ee,this.datatype=A.RDF_LANGUAGE_STRING):ee?(this.language="",this.datatype=ee):(this.language="",this.datatype=A.XSD_STRING)}equals(B){return!!B&&"Literal"===B.termType&&B.value===this.value&&B.language===this.language&&this.datatype.equals(B.datatype)}}ge.Literal=A,A.RDF_LANGUAGE_STRING=new J.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),A.XSD_STRING=new J.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.NamedNode=void 0,ge.NamedNode=class C{constructor(A){this.termType="NamedNode",this.value=A}equals(A){return!!A&&"NamedNode"===A.termType&&A.value===this.value}}},3905:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.Quad=void 0,ge.Quad=class C{constructor(A,te,B,ee){this.termType="Quad",this.value="",this.subject=A,this.predicate=te,this.object=B,this.graph=ee}equals(A){return!!A&&("Quad"===A.termType||!A.termType)&&this.subject.equals(A.subject)&&this.predicate.equals(A.predicate)&&this.object.equals(A.object)&&this.graph.equals(A.graph)}}},2234:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.Variable=void 0,ge.Variable=class C{constructor(A){this.termType="Variable",this.value=A}equals(A){return!!A&&"Variable"===A.termType&&A.value===this.value}}},9689:function(Ue,ge,C){"use strict";var J=this&&this.__createBinding||(Object.create?function(I,V,ae,K){void 0===K&&(K=ae),Object.defineProperty(I,K,{enumerable:!0,get:function(){return V[ae]}})}:function(I,V,ae,K){void 0===K&&(K=ae),I[K]=V[ae]}),A=this&&this.__exportStar||function(I,V){for(var ae in I)"default"!==ae&&!Object.prototype.hasOwnProperty.call(V,ae)&&J(V,I,ae)};Object.defineProperty(ge,"__esModule",{value:!0}),ge.getSupportedJavaScriptPrimitives=ge.getSupportedRdfDatatypes=ge.getTermRaw=ge.toRdf=ge.fromRdf=void 0;const te=C(2633),B=C(2538),ee=C(6374);A(C(2538),ge),A(C(1815),ge),A(C(6374),ge);const g=new te.DataFactory,w=new ee.Translator;function N(I,V){return w.fromRdf(I,V)}w.registerHandler(new B.TypeHandlerString,B.TypeHandlerString.TYPES.map(I=>g.namedNode(I)),["string"]),w.registerHandler(new B.TypeHandlerBoolean,[B.TypeHandlerBoolean.TYPE].map(I=>g.namedNode(I)),["boolean"]),w.registerHandler(new B.TypeHandlerNumberDouble,B.TypeHandlerNumberDouble.TYPES.map(I=>g.namedNode(I)),["number"]),w.registerHandler(new B.TypeHandlerNumberInteger,B.TypeHandlerNumberInteger.TYPES.map(I=>g.namedNode(I)),["number"]),w.registerHandler(new B.TypeHandlerDate,B.TypeHandlerDate.TYPES.map(I=>g.namedNode(I)),["object"]),ge.fromRdf=N,ge.toRdf=function G(I,V){return V&&"namedNode"in V&&(V={dataFactory:V}),(V=V||{})&&!V.dataFactory&&(V.dataFactory=g),w.toRdf(I,V)},ge.getTermRaw=function R(I,V){return"Literal"===I.termType?N(I,V):I.value},ge.getSupportedRdfDatatypes=function W(){return w.getSupportedRdfDatatypes()},ge.getSupportedJavaScriptPrimitives=function de(){return w.getSupportedJavaScriptPrimitives()}},1815:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0})},6374:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.Translator=void 0,ge.Translator=class C{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(A){throw new Error(`Invalid RDF ${A.datatype.value} value: '${A.value}'`)}registerHandler(A,te,B){for(const ee of te)this.supportedRdfDatatypes.push(ee),this.fromRdfHandlers[ee.value]=A;for(const ee of B){let g=this.toRdfHandlers[ee];g||(this.toRdfHandlers[ee]=g=[]),g.push(A)}}fromRdf(A,te){const B=this.fromRdfHandlers[A.datatype.value];return B?B.fromRdf(A,te):A.value}toRdf(A,te){const B=this.toRdfHandlers[typeof A];if(B)for(const ee of B){const g=ee.toRdf(A,te);if(g)return g}throw new Error(`Invalid JavaScript value: '${A}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.TypeHandlerBoolean=void 0;const J=C(6374);class A{fromRdf(B,ee){switch(B.value){case"true":case"1":return!0;case"false":case"0":return!1}return ee&&J.Translator.incorrectRdfDataType(B),!1}toRdf(B,{datatype:ee,dataFactory:g}){return g.literal(B?"true":"false",ee||g.namedNode(A.TYPE))}}ge.TypeHandlerBoolean=A,A.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.TypeHandlerDate=void 0;const J=C(6374);class A{fromRdf(B,ee){switch(ee&&!B.value.match(A.VALIDATORS[B.datatype.value.substr(33,B.datatype.value.length)])&&J.Translator.incorrectRdfDataType(B),B.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(B.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const g=B.value.split("-");return new Date(0,parseInt(g[0],10)-1,parseInt(g[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(B.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(B.value+"-01");default:return new Date(B.value)}}toRdf(B,{datatype:ee,dataFactory:g}){if(ee=ee||g.namedNode(A.TYPES[0]),!(B instanceof Date))return null;const w=B;let N;switch(ee.value){case"http://www.w3.org/2001/XMLSchema#gDay":N=String(w.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":N=w.getUTCMonth()+1+"-"+w.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":N=String(w.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":N=w.getUTCFullYear()+"-"+(w.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":N=w.toISOString().replace(/T.*$/,"");break;default:N=w.toISOString()}return g.literal(N,ee)}}ge.TypeHandlerDate=A,A.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],A.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.TypeHandlerNumberDouble=void 0;const J=C(6374);class A{fromRdf(B,ee){const g=parseFloat(B.value);return ee&&isNaN(g)&&J.Translator.incorrectRdfDataType(B),g}toRdf(B,{datatype:ee,dataFactory:g}){return ee=ee||g.namedNode(A.TYPES[0]),isNaN(B)?g.literal("NaN",ee):isFinite(B)?B%1==0?null:g.literal(B.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),ee):g.literal(B>0?"INF":"-INF",ee)}}ge.TypeHandlerNumberDouble=A,A.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.TypeHandlerNumberInteger=void 0;const J=C(6374);class A{fromRdf(B,ee){const g=parseInt(B.value,10);return ee&&(isNaN(g)||B.value.indexOf(".")>=0)&&J.Translator.incorrectRdfDataType(B),g}toRdf(B,{datatype:ee,dataFactory:g}){return g.literal(String(B),ee||g.namedNode(B<=A.MAX_INT&&B>=A.MIN_INT?A.TYPES[0]:A.TYPES[1]))}}ge.TypeHandlerNumberInteger=A,A.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],A.MAX_INT=2147483647,A.MIN_INT=-2147483648},2210:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.TypeHandlerString=void 0;class C{fromRdf(A){return A.value}toRdf(A,{datatype:te,dataFactory:B}){return B.literal(A,te)}}ge.TypeHandlerString=C,C.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(Ue,ge,C){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,B,ee,g){void 0===g&&(g=ee),Object.defineProperty(te,g,{enumerable:!0,get:function(){return B[ee]}})}:function(te,B,ee,g){void 0===g&&(g=ee),te[g]=B[ee]}),A=this&&this.__exportStar||function(te,B){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(B,ee)&&J(B,te,ee)};Object.defineProperty(ge,"__esModule",{value:!0}),A(C(88),ge),A(C(1600),ge),A(C(1511),ge),A(C(9199),ge),A(C(2210),ge)},2821:function(Ue,ge,C){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,B,ee,g){void 0===g&&(g=ee),Object.defineProperty(te,g,{enumerable:!0,get:function(){return B[ee]}})}:function(te,B,ee,g){void 0===g&&(g=ee),te[g]=B[ee]}),A=this&&this.__exportStar||function(te,B){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(B,ee)&&J(B,te,ee)};Object.defineProperty(ge,"__esModule",{value:!0}),A(C(5664),ge)},758:(Ue,ge)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.ParseError=void 0;class C extends Error{constructor(A,te){const B=A.saxStream._parser;super(A.trackPosition?`Line ${B.line+1} column ${B.column+1}: ${te}`:te)}}ge.ParseError=C},5664:(Ue,ge,C)=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0}),ge.ParseType=ge.RdfXmlParser=void 0;const J=C(7054),A=C(9528),te=C(1793),B=C(758),ee=C(2633);class g extends te.Transform{constructor(G){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},G&&(Object.assign(this,G),this.options=G),this.dataFactory||(this.dataFactory=new ee.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=A.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(G,R){const W={};let de=!1;for(const V in G.attributes)V.startsWith("xmlns")&&(5===V.length?(de=!0,W[""]=G.attributes[V]):":"===V.charAt(5)&&(de=!0,W[V.substr(6)]=G.attributes[V]));const I=R&&R.ns?R.ns:[g.DEFAULT_NS];return de?I.concat([W]):I}static expandPrefixedTerm(G,R,W){const de=G.indexOf(":");let I,V;de>=0?(I=G.substr(0,de),V=G.substr(de+1)):(I="",V=G);let ae=null,K=null;for(let oe=R.length-1;oe>=0;oe--){const ne=R[oe][I];if(ne){ae=ne;break}K||(K=R[oe][""])}if(!ae){if(I&&"xmlns"!==I)throw new B.ParseError(W,`The prefix '${I}' in term '${G}' was not bound.`);ae=K||""}return{prefix:I,local:V,uri:ae}}static isValidIri(G){return g.IRI_REGEX.test(G)}import(G){const R=new te.PassThrough({readableObjectMode:!0});G.on("error",de=>W.emit("error",de)),G.on("data",de=>R.push(de)),G.on("end",()=>R.push(null));const W=R.pipe(new g(this.options));return W}_transform(G,R,W){try{this.saxStream.write(G,R)}catch(de){return W(de)}W()}newParseError(G){return new B.ParseError(this,G)}valueToUri(G,R){return this.uriToNamedNode(J.resolve(G,R.baseIRI))}uriToNamedNode(G){if(!g.isValidIri(G))throw this.newParseError(`Invalid URI: ${G}`);return this.dataFactory.namedNode(G)}validateNcname(G){if(!g.NCNAME_MATCHER.test(G))throw this.newParseError(`Not a valid NCName: ${G}`)}attachSaxListeners(){this.saxStream.on("error",G=>this.emit("error",G)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(G){const R=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let W=w.RESOURCE;if(R&&(R.hadChildren=!0,W=R.childrenParseType),R&&R.childrenStringTags){const I=G.name;let V="";for(const ne in G.attributes)V+=` ${ne}="${G.attributes[ne]}"`;R.childrenStringTags.push(`<${I}${V}>`);const oe={childrenStringTags:R.childrenStringTags};return oe.childrenStringEmitClosingTag=`</${I}>`,void this.activeTagStack.push(oe)}const de={};R?(de.language=R.language,de.baseIRI=R.baseIRI):de.baseIRI=this.baseIRI,this.activeTagStack.push(de),de.ns=g.parseNamespace(G,R),W===w.RESOURCE?this.onTagResource(G,de,R,!R):this.onTagProperty(G,de,R)}onTagResource(G,R,W,de){const I=g.expandPrefixedTerm(G.name,R.ns,this);R.childrenParseType=w.PROPERTY;let V=!0;if(I.uri===g.RDF){if(!de&&g.FORBIDDEN_NODE_ELEMENTS.indexOf(I.local)>=0)throw this.newParseError(`Illegal node element name: ${I.local}`);switch(I.local){case"RDF":R.childrenParseType=w.RESOURCE;case"Description":V=!1}}const ae=[],K=[];let oe=null,ne=!1,X=!1,L=null;for(const _ in G.attributes){const O=G.attributes[_],S=g.expandPrefixedTerm(_,R.ns,this);if(W&&S.uri===g.RDF)switch(S.local){case"about":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${O} and ${oe} where found.`);oe=O;continue;case"ID":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${O} and ${oe} where found.`);this.validateNcname(O),oe="#"+O,ne=!0;continue;case"nodeID":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${O} and ${oe} where found.`);this.validateNcname(O),oe=O,X=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":L=O;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(S.uri===g.XML){if("lang"===S.local){R.language=""===O?null:O.toLowerCase();continue}if("base"===S.local){R.baseIRI=J.resolve(O,R.baseIRI);continue}}"xml"!==S.prefix&&S.uri&&(ae.push(this.uriToNamedNode(S.uri+S.local)),K.push(O))}if(null!==oe&&(R.subject=X?this.dataFactory.blankNode(oe):this.valueToUri(oe,R),ne&&this.claimNodeId(R.subject)),R.subject||(R.subject=this.dataFactory.blankNode()),V){const _=this.uriToNamedNode(I.uri+I.local);this.emitTriple(R.subject,this.dataFactory.namedNode(g.RDF+"type"),_,W?W.reifiedStatementId:null)}if(W){if(W.predicate)if(W.childrenCollectionSubject){const _=this.dataFactory.blankNode();this.emitTriple(W.childrenCollectionSubject,W.childrenCollectionPredicate,_,W.reifiedStatementId),this.emitTriple(_,this.dataFactory.namedNode(g.RDF+"first"),R.subject,R.reifiedStatementId),W.childrenCollectionSubject=_,W.childrenCollectionPredicate=this.dataFactory.namedNode(g.RDF+"rest")}else{this.emitTriple(W.subject,W.predicate,R.subject,W.reifiedStatementId);for(let _=0;_<W.predicateSubPredicates.length;_++)this.emitTriple(R.subject,W.predicateSubPredicates[_],W.predicateSubObjects[_],null);W.predicateSubPredicates=[],W.predicateSubObjects=[],W.predicateEmitted=!0}for(let _=0;_<ae.length;_++){const O=this.dataFactory.literal(K[_],R.datatype||R.language);this.emitTriple(R.subject,ae[_],O,W.reifiedStatementId)}L&&this.emitTriple(R.subject,this.dataFactory.namedNode(g.RDF+"type"),this.uriToNamedNode(L),null)}}onTagProperty(G,R,W){const de=g.expandPrefixedTerm(G.name,R.ns,this);if(R.childrenParseType=w.RESOURCE,R.subject=W.subject,de.uri===g.RDF&&"li"===de.local?(W.listItemCounter||(W.listItemCounter=1),R.predicate=this.uriToNamedNode(de.uri+"_"+W.listItemCounter++)):R.predicate=this.uriToNamedNode(de.uri+de.local),de.uri===g.RDF&&g.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(de.local)>=0)throw this.newParseError(`Illegal property element name: ${de.local}`);R.predicateSubPredicates=[],R.predicateSubObjects=[];let I=!1,V=!1,ae=null,K=!0;const oe=[],ne=[];for(const X in G.attributes){const L=G.attributes[X],_=g.expandPrefixedTerm(X,R.ns,this);if(_.uri===g.RDF)switch(_.local){case"resource":if(ae)throw this.newParseError(`Found both rdf:resource (${L}) and rdf:nodeID (${ae}).`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${L})`);R.hadChildren=!0,ae=L,K=!1;continue;case"datatype":if(V)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${L}).`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${L})`);R.datatype=this.valueToUri(L,R);continue;case"nodeID":if(V)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${L}).`);if(R.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${L}).`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${L})`);this.validateNcname(L),R.hadChildren=!0,ae=L,K=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(V)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(R.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${R.datatype.value})`);if(ae)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ae})`);if("Resource"===L){I=!0,R.childrenParseType=w.PROPERTY;const O=this.dataFactory.blankNode();this.emitTriple(R.subject,R.predicate,O,R.reifiedStatementId),R.subject=O,R.predicate=null}else"Collection"===L?(I=!0,R.hadChildren=!0,R.childrenCollectionSubject=R.subject,R.childrenCollectionPredicate=R.predicate,K=!1):"Literal"===L&&(I=!0,R.childrenTagsToString=!0,R.childrenStringTags=[]);continue;case"ID":this.validateNcname(L),R.reifiedStatementId=this.valueToUri("#"+L,R),this.claimNodeId(R.reifiedStatementId);continue}else if(_.uri===g.XML&&"lang"===_.local){R.language=""===L?null:L.toLowerCase();continue}if("xml"!==_.prefix&&"xmlns"!==_.prefix&&_.uri){if(I||R.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${L}`);R.hadChildren=!0,V=!0,oe.push(this.uriToNamedNode(_.uri+_.local)),ne.push(this.dataFactory.literal(L,R.datatype||R.language))}}if(null!==ae){const X=R.subject;R.subject=K?this.dataFactory.blankNode(ae):this.valueToUri(ae,R),this.emitTriple(X,R.predicate,R.subject,R.reifiedStatementId);for(let L=0;L<oe.length;L++)this.emitTriple(R.subject,oe[L],ne[L],null);R.predicateEmitted=!0}else K&&(R.predicateSubPredicates=oe,R.predicateSubObjects=ne,R.predicateEmitted=!1)}emitTriple(G,R,W,de){this.push(this.dataFactory.quad(G,R,W,this.defaultGraph)),de&&(this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(g.RDF+"type"),this.dataFactory.namedNode(g.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(g.RDF+"subject"),G,this.defaultGraph)),this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(g.RDF+"predicate"),R,this.defaultGraph)),this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(g.RDF+"object"),W,this.defaultGraph)))}claimNodeId(G){if(!this.allowDuplicateRdfIds){if(this.nodeIds[G.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${G.value}'.`);this.nodeIds[G.value]=!0}}onText(G){const R=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;R&&(R.childrenStringTags?R.childrenStringTags.push(G):R.predicate&&(R.text=G))}onCloseTag(){const G=this.activeTagStack.pop();if(G.childrenStringEmitClosingTag&&G.childrenStringTags.push(G.childrenStringEmitClosingTag),G.childrenTagsToString&&(G.datatype=this.dataFactory.namedNode(g.RDF+"XMLLiteral"),G.text=G.childrenStringTags.join(""),G.hadChildren=!1),G.childrenCollectionSubject)this.emitTriple(G.childrenCollectionSubject,G.childrenCollectionPredicate,this.dataFactory.namedNode(g.RDF+"nil"),G.reifiedStatementId);else if(G.predicate)if(G.hadChildren||G.childrenParseType===w.PROPERTY){if(!G.predicateEmitted){const R=this.dataFactory.blankNode();this.emitTriple(G.subject,G.predicate,R,G.reifiedStatementId);for(let W=0;W<G.predicateSubPredicates.length;W++)this.emitTriple(R,G.predicateSubPredicates[W],G.predicateSubObjects[W],null)}}else this.emitTriple(G.subject,G.predicate,this.dataFactory.literal(G.text||"",G.datatype||G.language),G.reifiedStatementId)}onDoctype(G){G.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(R,W,de)=>(this.saxStream._parser.ENTITIES[W]=de,""))}}var w,N;ge.RdfXmlParser=g,g.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,g.MIME_TYPE="application/rdf+xml",g.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g.XML="http://www.w3.org/XML/1998/namespace",g.XMLNS="http://www.w3.org/2000/xmlns/",g.DEFAULT_NS={xml:g.XML},g.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],g.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],g.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(N=w=ge.ParseType||(ge.ParseType={}))[N.RESOURCE=0]="RESOURCE",N[N.PROPERTY=1]="PROPERTY"},9987:(Ue,ge,C)=>{"use strict";const{AbortError:J,codes:A}=C(4370),{isNodeStream:te,isWebStream:B,kControllerErrorFunction:ee}=C(5428),g=C(4618),{ERR_INVALID_ARG_TYPE:w}=A;Ue.exports.addAbortSignal=function(R,W){if(((G,R)=>{if("object"!=typeof G||!("aborted"in G))throw new w("signal","AbortSignal",G)})(R),!te(W)&&!B(W))throw new w("stream",["ReadableStream","WritableStream","Stream"],W);return Ue.exports.addAbortSignalNoValidate(R,W)},Ue.exports.addAbortSignalNoValidate=function(G,R){if("object"!=typeof G||!("aborted"in G))return R;const W=te(R)?()=>{R.destroy(new J(void 0,{cause:G.reason}))}:()=>{R[ee](new J(void 0,{cause:G.reason}))};return G.aborted?W():(G.addEventListener("abort",W),g(R,()=>G.removeEventListener("abort",W))),R}},2960:(Ue,ge,C)=>{"use strict";const{StringPrototypeSlice:J,SymbolIterator:A,TypedArrayPrototypeSet:te,Uint8Array:B}=C(6305),{Buffer:ee}=C(1657),{inspect:g}=C(2656);Ue.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(N){const G={data:N,next:null};this.length>0?this.tail.next=G:this.head=G,this.tail=G,++this.length}unshift(N){const G={data:N,next:this.head};0===this.length&&(this.tail=G),this.head=G,++this.length}shift(){if(0===this.length)return;const N=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,N}clear(){this.head=this.tail=null,this.length=0}join(N){if(0===this.length)return"";let G=this.head,R=""+G.data;for(;null!==(G=G.next);)R+=N+G.data;return R}concat(N){if(0===this.length)return ee.alloc(0);const G=ee.allocUnsafe(N>>>0);let R=this.head,W=0;for(;R;)te(G,R.data,W),W+=R.data.length,R=R.next;return G}consume(N,G){const R=this.head.data;if(N<R.length){const W=R.slice(0,N);return this.head.data=R.slice(N),W}return N===R.length?this.shift():G?this._getString(N):this._getBuffer(N)}first(){return this.head.data}*[A](){for(let N=this.head;N;N=N.next)yield N.data}_getString(N){let G="",R=this.head,W=0;do{const de=R.data;if(!(N>de.length)){N===de.length?(G+=de,++W,this.head=R.next?R.next:this.tail=null):(G+=J(de,0,N),this.head=R,R.data=J(de,N));break}G+=de,N-=de.length,++W}while(null!==(R=R.next));return this.length-=W,G}_getBuffer(N){const G=ee.allocUnsafe(N),R=N;let W=this.head,de=0;do{const I=W.data;if(!(N>I.length)){N===I.length?(te(G,I,R-N),++de,this.head=W.next?W.next:this.tail=null):(te(G,new B(I.buffer,I.byteOffset,N),R-N),this.head=W,W.data=I.slice(N));break}te(G,I,R-N),N-=I.length,++de}while(null!==(W=W.next));return this.length-=de,G}[Symbol.for("nodejs.util.inspect.custom")](N,G){return g(this,{...G,depth:0,customInspect:!1})}}},7721:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const{pipeline:A}=C(4514),te=C(5931),{destroyer:B}=C(5601),{isNodeStream:ee,isReadable:g,isWritable:w,isWebStream:N,isTransformStream:G,isWritableStream:R,isReadableStream:W}=C(5428),{AbortError:de,codes:{ERR_INVALID_ARG_VALUE:I,ERR_MISSING_ARGS:V}}=C(4370),ae=C(4618);Ue.exports=function(...oe){if(0===oe.length)throw new V("streams");if(1===oe.length)return te.from(oe[0]);const ne=[...oe];if("function"==typeof oe[0]&&(oe[0]=te.from(oe[0])),"function"==typeof oe[oe.length-1]){const Re=oe.length-1;oe[Re]=te.from(oe[Re])}for(let Re=0;Re<oe.length;++Re)if(ee(oe[Re])||N(oe[Re])){if(Re<oe.length-1&&!(g(oe[Re])||W(oe[Re])||G(oe[Re])))throw new I(`streams[${Re}]`,ne[Re],"must be readable");if(Re>0&&!(w(oe[Re])||R(oe[Re])||G(oe[Re])))throw new I(`streams[${Re}]`,ne[Re],"must be writable")}let X,L,_,O,S;const j=oe[0],Te=A(oe,function ue(Re){const Oe=O;O=null,Oe?Oe(Re):Re?S.destroy(Re):!Se&&!se&&S.destroy()}),se=!!(w(j)||R(j)||G(j)),Se=!!(g(Te)||W(Te)||G(Te));if(S=new te({writableObjectMode:!(null==j||!j.writableObjectMode),readableObjectMode:!(null==Te||!Te.writableObjectMode),writable:se,readable:Se}),se){if(ee(j))S._write=function(Oe,Qe,Xe){j.write(Oe,Qe)?Xe():X=Xe},S._final=function(Oe){j.end(),L=Oe},j.on("drain",function(){if(X){const Oe=X;X=null,Oe()}});else if(N(j)){const Qe=(G(j)?j.writable:j).getWriter();S._write=function(){var Xe=J(function*(we,Ne,Pe){try{yield Qe.ready,Qe.write(we).catch(()=>{}),Pe()}catch(Ve){Pe(Ve)}});return function(we,Ne,Pe){return Xe.apply(this,arguments)}}(),S._final=function(){var Xe=J(function*(we){try{yield Qe.ready,Qe.close().catch(()=>{}),L=we}catch(Ne){we(Ne)}});return function(we){return Xe.apply(this,arguments)}}()}const Re=G(Te)?Te.readable:Te;ae(Re,()=>{if(L){const Oe=L;L=null,Oe()}})}if(Se)if(ee(Te))Te.on("readable",function(){if(_){const Re=_;_=null,Re()}}),Te.on("end",function(){S.push(null)}),S._read=function(){for(;;){const Re=Te.read();if(null===Re)return void(_=S._read);if(!S.push(Re))return}};else if(N(Te)){const Oe=(G(Te)?Te.readable:Te).getReader();S._read=J(function*(){for(;;)try{const{value:Qe,done:Xe}=yield Oe.read();if(!S.push(Qe))return;if(Xe)return void S.push(null)}catch{return}})}return S._destroy=function(Re,Oe){!Re&&null!==O&&(Re=new de),_=null,X=null,L=null,null===O?Oe(Re):(O=Oe,ee(Te)&&B(Te,Re))},S}},5601:(Ue,ge,C)=>{"use strict";const J=C(42),{aggregateTwoErrors:A,codes:{ERR_MULTIPLE_CALLBACK:te},AbortError:B}=C(4370),{Symbol:ee}=C(6305),{kDestroyed:g,isDestroyed:w,isFinished:N,isServerRequest:G}=C(5428),R=ee("kDestroy"),W=ee("kConstruct");function de(se,Se,Re){se&&(Se&&!Se.errored&&(Se.errored=se),Re&&!Re.errored&&(Re.errored=se))}function V(se,Se,Re){let Oe=!1;function Qe(Xe){if(Oe)return;Oe=!0;const we=se._readableState,Ne=se._writableState;de(Xe,Ne,we),Ne&&(Ne.closed=!0),we&&(we.closed=!0),"function"==typeof Re&&Re(Xe),Xe?J.nextTick(ae,se,Xe):J.nextTick(K,se)}try{se._destroy(Se||null,Qe)}catch(Xe){Qe(Xe)}}function ae(se,Se){oe(se,Se),K(se)}function K(se){const Se=se._readableState,Re=se._writableState;Re&&(Re.closeEmitted=!0),Se&&(Se.closeEmitted=!0),(null!=Re&&Re.emitClose||null!=Se&&Se.emitClose)&&se.emit("close")}function oe(se,Se){const Re=se._readableState,Oe=se._writableState;null!=Oe&&Oe.errorEmitted||null!=Re&&Re.errorEmitted||(Oe&&(Oe.errorEmitted=!0),Re&&(Re.errorEmitted=!0),se.emit("error",Se))}function X(se,Se,Re){const Oe=se._readableState,Qe=se._writableState;if(null!=Qe&&Qe.destroyed||null!=Oe&&Oe.destroyed)return this;null!=Oe&&Oe.autoDestroy||null!=Qe&&Qe.autoDestroy?se.destroy(Se):Se&&(Qe&&!Qe.errored&&(Qe.errored=Se),Oe&&!Oe.errored&&(Oe.errored=Se),Re?J.nextTick(oe,se,Se):oe(se,Se))}function _(se){let Se=!1;function Re(Oe){if(Se)return void X(se,Oe??new te);Se=!0;const Qe=se._readableState,Xe=se._writableState,we=Xe||Qe;Qe&&(Qe.constructed=!0),Xe&&(Xe.constructed=!0),we.destroyed?se.emit(R,Oe):Oe?X(se,Oe,!0):J.nextTick(O,se)}try{se._construct(Oe=>{J.nextTick(Re,Oe)})}catch(Oe){J.nextTick(Re,Oe)}}function O(se){se.emit(W)}function S(se){return se?.setHeader&&"function"==typeof se.abort}function ue(se){se.emit("close")}function j(se,Se){se.emit("error",Se),J.nextTick(ue,se)}Ue.exports={construct:function L(se,Se){if("function"!=typeof se._construct)return;const Re=se._readableState,Oe=se._writableState;Re&&(Re.constructed=!1),Oe&&(Oe.constructed=!1),se.once(W,Se),!(se.listenerCount(W)>1)&&J.nextTick(_,se)},destroyer:function Te(se,Se){!se||w(se)||(!Se&&!N(se)&&(Se=new B),G(se)?(se.socket=null,se.destroy(Se)):S(se)?se.abort():S(se.req)?se.req.abort():"function"==typeof se.destroy?se.destroy(Se):"function"==typeof se.close?se.close():Se?J.nextTick(j,se,Se):J.nextTick(ue,se),se.destroyed||(se[g]=!0))},destroy:function I(se,Se){const Re=this._readableState,Oe=this._writableState,Qe=Oe||Re;return null!=Oe&&Oe.destroyed||null!=Re&&Re.destroyed?("function"==typeof Se&&Se(),this):(de(se,Oe,Re),Oe&&(Oe.destroyed=!0),Re&&(Re.destroyed=!0),Qe.constructed?V(this,se,Se):this.once(R,function(Xe){V(this,A(Xe,se),Se)}),this)},undestroy:function ne(){const se=this._readableState,Se=this._writableState;se&&(se.constructed=!0,se.closed=!1,se.closeEmitted=!1,se.destroyed=!1,se.errored=null,se.errorEmitted=!1,se.reading=!1,se.ended=!1===se.readable,se.endEmitted=!1===se.readable),Se&&(Se.constructed=!0,Se.destroyed=!1,Se.closed=!1,Se.closeEmitted=!1,Se.errored=null,Se.errorEmitted=!1,Se.finalCalled=!1,Se.prefinished=!1,Se.ended=!1===Se.writable,Se.ending=!1===Se.writable,Se.finished=!1===Se.writable)},errorOrDestroy:X}},5931:(Ue,ge,C)=>{"use strict";const{ObjectDefineProperties:J,ObjectGetOwnPropertyDescriptor:A,ObjectKeys:te,ObjectSetPrototypeOf:B}=C(6305);Ue.exports=w;const ee=C(8383),g=C(9764);B(w.prototype,ee.prototype),B(w,ee);{const W=te(g.prototype);for(let de=0;de<W.length;de++){const I=W[de];w.prototype[I]||(w.prototype[I]=g.prototype[I])}}function w(W){if(!(this instanceof w))return new w(W);ee.call(this,W),g.call(this,W),W?(this.allowHalfOpen=!1!==W.allowHalfOpen,!1===W.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===W.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let N,R;function G(){return void 0===N&&(N={}),N}J(w.prototype,{writable:{__proto__:null,...A(g.prototype,"writable")},writableHighWaterMark:{__proto__:null,...A(g.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...A(g.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...A(g.prototype,"writableBuffer")},writableLength:{__proto__:null,...A(g.prototype,"writableLength")},writableFinished:{__proto__:null,...A(g.prototype,"writableFinished")},writableCorked:{__proto__:null,...A(g.prototype,"writableCorked")},writableEnded:{__proto__:null,...A(g.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...A(g.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(W){this._readableState&&this._writableState&&(this._readableState.destroyed=W,this._writableState.destroyed=W)}}}),w.fromWeb=function(W,de){return G().newStreamDuplexFromReadableWritablePair(W,de)},w.toWeb=function(W){return G().newReadableWritablePairFromDuplex(W)},w.from=function(W){return R||(R=C(8078)),R(W,"body")}},8078:(Ue,ge,C)=>{var J=C(7156).default,A=C(6737).default,te=C(8186).default;const B=C(42),ee=C(1657),{isReadable:g,isWritable:w,isIterable:N,isNodeStream:G,isReadableNodeStream:R,isWritableNodeStream:W,isDuplexNodeStream:de}=C(5428),I=C(4618),{AbortError:V,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_INVALID_RETURN_VALUE:K}}=C(4370),{destroyer:oe}=C(5601),ne=C(5931),X=C(8383),{createDeferredPromise:L}=C(2656),_=C(55),O=globalThis.Blob||ee.Blob,S=typeof O<"u"?function(Oe){return Oe instanceof O}:function(Oe){return!1},ue=globalThis.AbortController||C(3982).AbortController,{FunctionPrototypeCall:j}=C(6305);class Te extends ne{constructor(Oe){super(Oe),!1===Oe?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Oe?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Se(Re){const Oe=Re.readable&&"function"!=typeof Re.readable.read?X.wrap(Re.readable):Re.readable,Qe=Re.writable;let Ne,Pe,Ve,fe,Ee,Xe=!!g(Oe),we=!!w(Qe);function $e(ot){const Je=fe;fe=null,Je?Je(ot):ot&&Ee.destroy(ot)}return Ee=new Te({readableObjectMode:!(null==Oe||!Oe.readableObjectMode),writableObjectMode:!(null==Qe||!Qe.writableObjectMode),readable:Xe,writable:we}),we&&(I(Qe,ot=>{we=!1,ot&&oe(Oe,ot),$e(ot)}),Ee._write=function(ot,Je,le){Qe.write(ot,Je)?le():Ne=le},Ee._final=function(ot){Qe.end(),Pe=ot},Qe.on("drain",function(){if(Ne){const ot=Ne;Ne=null,ot()}}),Qe.on("finish",function(){if(Pe){const ot=Pe;Pe=null,ot()}})),Xe&&(I(Oe,ot=>{Xe=!1,ot&&oe(Oe,ot),$e(ot)}),Oe.on("readable",function(){if(Ve){const ot=Ve;Ve=null,ot()}}),Oe.on("end",function(){Ee.push(null)}),Ee._read=function(){for(;;){const ot=Oe.read();if(null===ot)return void(Ve=Ee._read);if(!Ee.push(ot))return}}),Ee._destroy=function(ot,Je){!ot&&null!==fe&&(ot=new V),Ve=null,Ne=null,Pe=null,null===fe?Je(ot):(fe=Je,oe(Qe,ot),oe(Oe,ot))},Ee}Ue.exports=function Re(Oe,Qe){if(de(Oe))return Oe;if(R(Oe))return Se({readable:Oe});if(W(Oe))return Se({writable:Oe});if(G(Oe))return Se({writable:!1,readable:!1});if("function"==typeof Oe){const{value:we,write:Ne,final:Pe,destroy:Ve}=function se(Re){let{promise:Oe,resolve:Qe}=L();const Xe=new ue,we=Xe.signal;return{value:Re(te(function*(){for(;;){const Pe=Oe;Oe=null;const{chunk:Ve,done:fe,cb:Ee}=yield A(Pe);if(B.nextTick(Ee),fe)return;if(we.aborted)throw new V(void 0,{cause:we.reason});({promise:Oe,resolve:Qe}=L()),yield Ve}})(),{signal:we}),write(Pe,Ve,fe){const Ee=Qe;Qe=null,Ee({chunk:Pe,done:!1,cb:fe})},final(Pe){const Ve=Qe;Qe=null,Ve({done:!0,cb:Pe})},destroy(Pe,Ve){Xe.abort(),Ve(Pe)}}}(Oe);if(N(we))return _(Te,we,{objectMode:!0,write:Ne,final:Pe,destroy:Ve});const fe=we?.then;if("function"==typeof fe){let Ee;const $e=j(fe,we,ot=>{if(null!=ot)throw new K("nully","body",ot)},ot=>{oe(Ee,ot)});return Ee=new Te({objectMode:!0,readable:!1,write:Ne,final(ot){Pe(J(function*(){try{yield $e,B.nextTick(ot,null)}catch(Je){B.nextTick(ot,Je)}}))},destroy:Ve})}throw new K("Iterable, AsyncIterable or AsyncFunction",Qe,we)}if(S(Oe))return Re(Oe.arrayBuffer());if(N(Oe))return _(Te,Oe,{objectMode:!0,writable:!1});if("object"==typeof Oe?.writable||"object"==typeof Oe?.readable)return Se({readable:null!=Oe&&Oe.readable?R(Oe?.readable)?Oe?.readable:Re(Oe.readable):void 0,writable:null!=Oe&&Oe.writable?W(Oe?.writable)?Oe?.writable:Re(Oe.writable):void 0});const Xe=Oe?.then;if("function"==typeof Xe){let we;return j(Xe,Oe,Ne=>{null!=Ne&&we.push(Ne),we.push(null)},Ne=>{oe(we,Ne)}),we=new Te({objectMode:!0,writable:!1,read(){}})}throw new ae(Qe,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Oe)}},4618:(Ue,ge,C)=>{const J=C(42),{AbortError:A,codes:te}=C(4370),{ERR_INVALID_ARG_TYPE:B,ERR_STREAM_PREMATURE_CLOSE:ee}=te,{kEmptyObject:g,once:w}=C(2656),{validateAbortSignal:N,validateFunction:G,validateObject:R,validateBoolean:W}=C(2120),{Promise:de,PromisePrototypeThen:I}=C(6305),{isClosed:V,isReadable:ae,isReadableNodeStream:K,isReadableStream:oe,isReadableFinished:ne,isReadableErrored:X,isWritable:L,isWritableNodeStream:_,isWritableStream:O,isWritableFinished:S,isWritableErrored:ue,isNodeStream:j,willEmitClose:Te,kIsClosedPromise:se}=C(5428),Re=()=>{};function Oe(we,Ne,Pe){var Ve,fe;if(2===arguments.length?(Pe=Ne,Ne=g):null==Ne?Ne=g:R(Ne,"options"),G(Pe,"callback"),N(Ne.signal,"options.signal"),Pe=w(Pe),oe(we)||O(we))return function Qe(we,Ne,Pe){let Ve=!1,fe=Re;if(Ne.signal)if(fe=()=>{Ve=!0,Pe.call(we,new A(void 0,{cause:Ne.signal.reason}))},Ne.signal.aborted)J.nextTick(fe);else{const $e=Pe;Pe=w((...ot)=>{Ne.signal.removeEventListener("abort",fe),$e.apply(we,ot)}),Ne.signal.addEventListener("abort",fe)}const Ee=(...$e)=>{Ve||J.nextTick(()=>Pe.apply(we,$e))};return I(we[se].promise,Ee,Ee),Re}(we,Ne,Pe);if(!j(we))throw new B("stream",["ReadableStream","WritableStream","Stream"],we);const Ee=null!==(Ve=Ne.readable)&&void 0!==Ve?Ve:K(we),$e=null!==(fe=Ne.writable)&&void 0!==fe?fe:_(we),ot=we._writableState,Je=we._readableState,le=()=>{we.writable||ie()};let P=Te(we)&&K(we)===Ee&&_(we)===$e,E=S(we,!1);const ie=()=>{E=!0,we.destroyed&&(P=!1),(!P||we.readable&&!Ee)&&(!Ee||z)&&Pe.call(we)};let z=ne(we,!1);const Ae=()=>{z=!0,we.destroyed&&(P=!1),(!P||we.writable&&!$e)&&(!$e||E)&&Pe.call(we)},et=Q=>{Pe.call(we,Q)};let ce=V(we);const Z=()=>{ce=!0;const Q=ue(we)||X(we);return Q&&"boolean"!=typeof Q?Pe.call(we,Q):Ee&&!z&&K(we,!0)&&!ne(we,!1)?Pe.call(we,new ee):!$e||E||S(we,!1)?void Pe.call(we):Pe.call(we,new ee)},F=()=>{ce=!0;const Q=ue(we)||X(we);if(Q&&"boolean"!=typeof Q)return Pe.call(we,Q);Pe.call(we)},x=()=>{we.req.on("finish",ie)};!function Se(we){return we.setHeader&&"function"==typeof we.abort}(we)?$e&&!ot&&(we.on("end",le),we.on("close",le)):(we.on("complete",ie),P||we.on("abort",Z),we.req?x():we.on("request",x)),!P&&"boolean"==typeof we.aborted&&we.on("aborted",Z),we.on("end",Ae),we.on("finish",ie),!1!==Ne.error&&we.on("error",et),we.on("close",Z),ce?J.nextTick(Z):null!=ot&&ot.errorEmitted||null!=Je&&Je.errorEmitted?P||J.nextTick(F):(!Ee&&(!P||ae(we))&&(E||!1===L(we))||!$e&&(!P||L(we))&&(z||!1===ae(we))||Je&&we.req&&we.aborted)&&J.nextTick(F);const M=()=>{Pe=Re,we.removeListener("aborted",Z),we.removeListener("complete",ie),we.removeListener("abort",Z),we.removeListener("request",x),we.req&&we.req.removeListener("finish",ie),we.removeListener("end",le),we.removeListener("close",le),we.removeListener("finish",ie),we.removeListener("end",Ae),we.removeListener("error",et),we.removeListener("close",Z)};if(Ne.signal&&!ce){const Q=()=>{const he=Pe;M(),he.call(we,new A(void 0,{cause:Ne.signal.reason}))};if(Ne.signal.aborted)J.nextTick(Q);else{const he=Pe;Pe=w((...ze)=>{Ne.signal.removeEventListener("abort",Q),he.apply(we,ze)}),Ne.signal.addEventListener("abort",Q)}}return M}Ue.exports=Oe,Ue.exports.finished=function Xe(we,Ne){var Pe;let Ve=!1;return null===Ne&&(Ne=g),null!==(Pe=Ne)&&void 0!==Pe&&Pe.cleanup&&(W(Ne.cleanup,"cleanup"),Ve=Ne.cleanup),new de((fe,Ee)=>{const $e=Oe(we,Ne,ot=>{Ve&&$e(),ot?Ee(ot):fe()})})}},55:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(42),{PromisePrototypeThen:te,SymbolAsyncIterator:B,SymbolIterator:ee}=C(6305),{Buffer:g}=C(1657),{ERR_INVALID_ARG_TYPE:w,ERR_STREAM_NULL_VALUES:N}=C(4370).codes;Ue.exports=function G(R,W,de){let I,V;if("string"==typeof W||W instanceof g)return new R({objectMode:!0,...de,read(){this.push(W),this.push(null)}});if(W&&W[B])V=!0,I=W[B]();else{if(!W||!W[ee])throw new w("iterable",["Iterable"],W);V=!1,I=W[ee]()}const ae=new R({objectMode:!0,highWaterMark:1,...de});let K=!1;function ne(){return(ne=J(function*(_){if(null!=_&&"function"==typeof I.throw){const{value:ue,done:j}=yield I.throw(_);if(yield ue,j)return}if("function"==typeof I.return){const{value:ue}=yield I.return();yield ue}})).apply(this,arguments)}function L(){return(L=J(function*(){for(;;){try{const{value:_,done:O}=V?yield I.next():I.next();if(O)ae.push(null);else{const S=_&&"function"==typeof _.then?yield _:_;if(null===S)throw K=!1,new N;if(ae.push(S))continue;K=!1}}catch(_){ae.destroy(_)}break}})).apply(this,arguments)}return ae._read=function(){K||(K=!0,function X(){L.apply(this,arguments)}())},ae._destroy=function(_,O){te(function oe(_){return ne.apply(this,arguments)}(_),()=>A.nextTick(O,_),S=>A.nextTick(O,S||_))},ae}},900:(Ue,ge,C)=>{"use strict";const{ArrayIsArray:J,ObjectSetPrototypeOf:A}=C(6305),{EventEmitter:te}=C(2016);function B(g){te.call(this,g)}function ee(g,w,N){if("function"==typeof g.prependListener)return g.prependListener(w,N);g._events&&g._events[w]?J(g._events[w])?g._events[w].unshift(N):g._events[w]=[N,g._events[w]]:g.on(w,N)}A(B.prototype,te.prototype),A(B,te),B.prototype.pipe=function(g,w){const N=this;function G(K){g.writable&&!1===g.write(K)&&N.pause&&N.pause()}function R(){N.readable&&N.resume&&N.resume()}N.on("data",G),g.on("drain",R),!g._isStdio&&(!w||!1!==w.end)&&(N.on("end",de),N.on("close",I));let W=!1;function de(){W||(W=!0,g.end())}function I(){W||(W=!0,"function"==typeof g.destroy&&g.destroy())}function V(K){ae(),0===te.listenerCount(this,"error")&&this.emit("error",K)}function ae(){N.removeListener("data",G),g.removeListener("drain",R),N.removeListener("end",de),N.removeListener("close",I),N.removeListener("error",V),g.removeListener("error",V),N.removeListener("end",ae),N.removeListener("close",ae),g.removeListener("close",ae)}return ee(N,"error",V),ee(g,"error",V),N.on("end",ae),N.on("close",ae),g.on("close",ae),g.emit("pipe",N),g},Ue.exports={Stream:B,prependListener:ee}},7624:(Ue,ge,C)=>{"use strict";var J=C(7156).default,A=C(8131).default,te=C(8237).default,B=C(6737).default,ee=C(8186).default;const g=globalThis.AbortController||C(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:w,ERR_INVALID_ARG_TYPE:N,ERR_MISSING_ARGS:G,ERR_OUT_OF_RANGE:R},AbortError:W}=C(4370),{validateAbortSignal:de,validateInteger:I,validateObject:V}=C(2120),ae=C(6305).Symbol("kWeak"),{finished:K}=C(4618),oe=C(7721),{addAbortSignalNoValidate:ne}=C(9987),{isWritable:X,isNodeStream:L}=C(5428),{ArrayPrototypePush:_,MathFloor:O,Number:S,NumberIsNaN:ue,Promise:j,PromiseReject:Te,PromisePrototypeThen:se,Symbol:Se}=C(6305),Re=Se("kEmpty"),Oe=Se("kEof");function Xe(x,M){if("function"!=typeof x)throw new N("fn",["Function","AsyncFunction"],x);null!=M&&V(M,"options"),null!=M?.signal&&de(M.signal,"options.signal");let Q=1;return null!=M?.concurrency&&(Q=O(M.concurrency)),I(Q,"concurrency",1),function(){var he=ee(function*(){var Ye,dt;const vt=new g,mt=this,zt=[],rn=vt.signal,Ie={signal:rn},H=()=>vt.abort();null!=M&&null!==(Ye=M.signal)&&void 0!==Ye&&Ye.aborted&&H(),null==M||null===(dt=M.signal)||void 0===dt||dt.addEventListener("abort",H);let v,re,Ge=!1;function Ke(){Ge=!0}function Wt(){return(Wt=J(function*(){try{var Yn,an=!1,qn=!1;try{for(var gr,In=te(mt);an=!(gr=yield In.next()).done;an=!1){let zi=gr.value;var ss;if(Ge)return;if(rn.aborted)throw new W;try{zi=x(zi,Ie)}catch(Yr){zi=Te(Yr)}zi!==Re&&("function"==typeof(null===(ss=zi)||void 0===ss?void 0:ss.catch)&&zi.catch(Ke),zt.push(zi),v&&(v(),v=null),!Ge&&zt.length&&zt.length>=Q&&(yield new j(Yr=>{re=Yr})))}}catch(zi){qn=!0,Yn=zi}finally{try{an&&null!=In.return&&(yield In.return())}finally{if(qn)throw Yn}}zt.push(Oe)}catch(zi){const Yr=Te(zi);se(Yr,void 0,Ke),zt.push(Yr)}finally{var Go;Ge=!0,v&&(v(),v=null),null==M||null===(Go=M.signal)||void 0===Go||Go.removeEventListener("abort",H)}})).apply(this,arguments)}!function st(){Wt.apply(this,arguments)}();try{for(;;){for(;zt.length>0;){const an=yield B(zt[0]);if(an===Oe)return;if(rn.aborted)throw new W;an!==Re&&(yield an),zt.shift(),re&&(re(),re=null)}yield B(new j(an=>{v=an}))}}finally{vt.abort(),Ge=!0,re&&(re(),re=null)}});return function ze(){return he.apply(this,arguments)}}().call(this)}function Ne(x){return Pe.apply(this,arguments)}function Pe(){return(Pe=J(function*(x,M=void 0){var ze,Q=!1,he=!1;try{for(var Ye=te(le.call(this,x,M));Q=!(yield Ye.next()).done;Q=!1)return!0}catch(vt){he=!0,ze=vt}finally{try{Q&&null!=Ye.return&&(yield Ye.return())}finally{if(he)throw ze}}return!1})).apply(this,arguments)}function fe(){return(fe=J(function*(x,M=void 0){if("function"!=typeof x)throw new N("fn",["Function","AsyncFunction"],x);return!(yield Ne.call(this,J(function*(...Q){return!(yield x(...Q))}),M))})).apply(this,arguments)}function $e(){return($e=J(function*(x,M){var ze,Q=!1,he=!1;try{for(var dt,Ye=te(le.call(this,x,M));Q=!(dt=yield Ye.next()).done;Q=!1)return dt.value}catch(vt){he=!0,ze=vt}finally{try{Q&&null!=Ye.return&&(yield Ye.return())}finally{if(he)throw ze}}})).apply(this,arguments)}function Je(){return Je=J(function*(x,M){if("function"!=typeof x)throw new N("fn",["Function","AsyncFunction"],x);function he(){return(he=J(function*(zt,rn){return yield x(zt,rn),Re})).apply(this,arguments)}var dt,ze=!1,Ye=!1;try{for(var vt=te(Xe.call(this,function Q(zt,rn){return he.apply(this,arguments)},M));ze=!(yield vt.next()).done;ze=!1);}catch(zt){Ye=!0,dt=zt}finally{try{ze&&null!=vt.return&&(yield vt.return())}finally{if(Ye)throw dt}}}),Je.apply(this,arguments)}function le(x,M){if("function"!=typeof x)throw new N("fn",["Function","AsyncFunction"],x);function he(){return(he=J(function*(ze,Ye){return(yield x(ze,Ye))?ze:Re})).apply(this,arguments)}return Xe.call(this,function Q(ze,Ye){return he.apply(this,arguments)},M)}class P extends G{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ie(){return ie=J(function*(x,M,Q){var he;if("function"!=typeof x)throw new N("reducer",["Function","AsyncFunction"],x);null!=Q&&V(Q,"options"),null!=Q?.signal&&de(Q.signal,"options.signal");let ze=arguments.length>1;if(null!=Q&&null!==(he=Q.signal)&&void 0!==he&&he.aborted){const re=new W(void 0,{cause:Q.signal.reason});throw this.once("error",()=>{}),yield K(this.destroy(re)),re}const Ye=new g,dt=Ye.signal;null!=Q&&Q.signal&&Q.signal.addEventListener("abort",()=>Ye.abort(),{once:!0,[ae]:this});let vt=!1;try{var rn,mt=!1,zt=!1;try{for(var H,Ie=te(this);mt=!(H=yield Ie.next()).done;mt=!1){const re=H.value;var v;if(vt=!0,null!=Q&&null!==(v=Q.signal)&&void 0!==v&&v.aborted)throw new W;ze?M=yield x(M,re,{signal:dt}):(M=re,ze=!0)}}catch(re){zt=!0,rn=re}finally{try{mt&&null!=Ie.return&&(yield Ie.return())}finally{if(zt)throw rn}}if(!vt&&!ze)throw new P}finally{Ye.abort()}return M}),ie.apply(this,arguments)}function Ae(){return(Ae=J(function*(x){null!=x&&V(x,"options"),null!=x?.signal&&de(x.signal,"options.signal");const M=[];var ze,Q=!1,he=!1;try{for(var dt,Ye=te(this);Q=!(dt=yield Ye.next()).done;Q=!1){const mt=dt.value;var vt;if(null!=x&&null!==(vt=x.signal)&&void 0!==vt&&vt.aborted)throw new W(void 0,{cause:x.signal.reason});_(M,mt)}}catch(mt){he=!0,ze=mt}finally{try{Q&&null!=Ye.return&&(yield Ye.return())}finally{if(he)throw ze}}return M})).apply(this,arguments)}function ce(x){if(x=S(x),ue(x))return 0;if(x<0)throw new R("number",">= 0",x);return x}Ue.exports.streamReturningOperators={asIndexedPairs:function we(x=void 0){return null!=x&&V(x,"options"),null!=x?.signal&&de(x.signal,"options.signal"),function(){var M=ee(function*(){let he=0;var dt,ze=!1,Ye=!1;try{for(var mt,vt=te(this);ze=!(mt=yield B(vt.next())).done;ze=!1){const rn=mt.value;var zt;if(null!=x&&null!==(zt=x.signal)&&void 0!==zt&&zt.aborted)throw new W({cause:x.signal.reason});yield[he++,rn]}}catch(rn){Ye=!0,dt=rn}finally{try{ze&&null!=vt.return&&(yield B(vt.return()))}finally{if(Ye)throw dt}}});return function Q(){return M.apply(this,arguments)}}().call(this)},drop:function Z(x,M=void 0){return null!=M&&V(M,"options"),null!=M?.signal&&de(M.signal,"options.signal"),x=ce(x),function(){var Q=ee(function*(){var ze;if(null!=M&&null!==(ze=M.signal)&&void 0!==ze&&ze.aborted)throw new W;var vt,Ye=!1,dt=!1;try{for(var zt,mt=te(this);Ye=!(zt=yield B(mt.next())).done;Ye=!1){const Ie=zt.value;var rn;if(null!=M&&null!==(rn=M.signal)&&void 0!==rn&&rn.aborted)throw new W;x--<=0&&(yield Ie)}}catch(Ie){dt=!0,vt=Ie}finally{try{Ye&&null!=mt.return&&(yield B(mt.return()))}finally{if(dt)throw vt}}});return function he(){return Q.apply(this,arguments)}}().call(this)},filter:le,flatMap:function et(x,M){const Q=Xe.call(this,x,M);return function(){var he=ee(function*(){var vt,Ye=!1,dt=!1;try{for(var zt,mt=te(Q);Ye=!(zt=yield B(mt.next())).done;Ye=!1){const rn=zt.value;yield*A(te(rn),B)}}catch(rn){dt=!0,vt=rn}finally{try{Ye&&null!=mt.return&&(yield B(mt.return()))}finally{if(dt)throw vt}}});return function ze(){return he.apply(this,arguments)}}().call(this)},map:Xe,take:function F(x,M=void 0){return null!=M&&V(M,"options"),null!=M?.signal&&de(M.signal,"options.signal"),x=ce(x),function(){var Q=ee(function*(){var ze;if(null!=M&&null!==(ze=M.signal)&&void 0!==ze&&ze.aborted)throw new W;var vt,Ye=!1,dt=!1;try{for(var zt,mt=te(this);Ye=!(zt=yield B(mt.next())).done;Ye=!1){const Ie=zt.value;var rn;if(null!=M&&null!==(rn=M.signal)&&void 0!==rn&&rn.aborted)throw new W;if(!(x-- >0))return;yield Ie}}catch(Ie){dt=!0,vt=Ie}finally{try{Ye&&null!=mt.return&&(yield B(mt.return()))}finally{if(dt)throw vt}}});return function he(){return Q.apply(this,arguments)}}().call(this)},compose:function Qe(x,M){if(null!=M&&V(M,"options"),null!=M?.signal&&de(M.signal,"options.signal"),L(x)&&!X(x))throw new w("stream",x,"must be writable");const Q=oe(this,x);return null!=M&&M.signal&&ne(M.signal,Q),Q}},Ue.exports.promiseReturningOperators={every:function Ve(x){return fe.apply(this,arguments)},forEach:function ot(x,M){return Je.apply(this,arguments)},reduce:function E(x,M,Q){return ie.apply(this,arguments)},toArray:function z(x){return Ae.apply(this,arguments)},some:Ne,find:function Ee(x,M){return $e.apply(this,arguments)}}},6973:(Ue,ge,C)=>{"use strict";const{ObjectSetPrototypeOf:J}=C(6305);Ue.exports=te;const A=C(123);function te(B){if(!(this instanceof te))return new te(B);A.call(this,B)}J(te.prototype,A.prototype),J(te,A),te.prototype._transform=function(B,ee,g){g(null,B)}},4514:(Ue,ge,C)=>{var J=C(7156).default,A=C(8186).default,te=C(6737).default,B=C(8131).default,ee=C(8237).default;const g=C(42),{ArrayIsArray:w,Promise:N,SymbolAsyncIterator:G}=C(6305),R=C(4618),{once:W}=C(2656),de=C(5601),I=C(5931),{aggregateTwoErrors:V,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_INVALID_RETURN_VALUE:K,ERR_MISSING_ARGS:oe,ERR_STREAM_DESTROYED:ne,ERR_STREAM_PREMATURE_CLOSE:X},AbortError:L}=C(4370),{validateFunction:_,validateAbortSignal:O}=C(2120),{isIterable:S,isReadable:ue,isReadableNodeStream:j,isNodeStream:Te,isTransformStream:se,isWebStream:Se,isReadableStream:Re,isReadableEnded:Oe}=C(5428),Qe=globalThis.AbortController||C(3982).AbortController;let Xe,we;function Ne(z,Ae,et){let ce=!1;return z.on("close",()=>{ce=!0}),{destroy:F=>{ce||(ce=!0,de.destroyer(z,F||new ne("pipe")))},cleanup:R(z,{readable:Ae,writable:et},F=>{ce=!F})}}function Ve(z){if(S(z))return z;if(j(z))return function fe(z){return Ee.apply(this,arguments)}(z);throw new ae("val",["Readable","Iterable","AsyncIterable"],z)}function Ee(){return(Ee=A(function*(z){we||(we=C(8383)),yield*B(ee(we.prototype[G].call(z)),te)})).apply(this,arguments)}function $e(z,Ae,et,ce){return ot.apply(this,arguments)}function ot(){return(ot=J(function*(z,Ae,et,{end:ce}){let Z,F=null;const x=mt=>{if(mt&&(Z=mt),F){const zt=F;F=null,zt()}},M=()=>new N((mt,zt)=>{Z?zt(Z):F=()=>{Z?zt(Z):mt()}});Ae.on("drain",x);const Q=R(Ae,{readable:!1},x);try{Ae.writableNeedDrain&&(yield M());var Ye,he=!1,ze=!1;try{for(var vt,dt=ee(z);he=!(vt=yield dt.next()).done;he=!1)Ae.write(vt.value)||(yield M())}catch(mt){ze=!0,Ye=mt}finally{try{he&&null!=dt.return&&(yield dt.return())}finally{if(ze)throw Ye}}ce&&Ae.end(),yield M(),et()}catch(mt){et(Z!==mt?V(Z,mt):mt)}finally{Q(),Ae.off("drain",x)}})).apply(this,arguments)}function Je(z,Ae,et,ce){return le.apply(this,arguments)}function le(){return(le=J(function*(z,Ae,et,{end:ce}){se(Ae)&&(Ae=Ae.writable);const Z=Ae.getWriter();try{var M,F=!1,x=!1;try{for(var he,Q=ee(z);F=!(he=yield Q.next()).done;F=!1){const ze=he.value;yield Z.ready,Z.write(ze).catch(()=>{})}}catch(ze){x=!0,M=ze}finally{try{F&&null!=Q.return&&(yield Q.return())}finally{if(x)throw M}}yield Z.ready,ce&&(yield Z.close()),et()}catch(ze){try{yield Z.abort(ze),et(ze)}catch(Ye){et(Ye)}}})).apply(this,arguments)}function E(z,Ae,et){if(1===z.length&&w(z[0])&&(z=z[0]),z.length<2)throw new oe("streams");const ce=new Qe,Z=ce.signal,F=et?.signal,x=[];function M(){vt(new L)}let Q,he;O(F,"options.signal"),F?.addEventListener("abort",M);const ze=[];let mt,Ye=0;function dt(H){vt(H,0==--Ye)}function vt(H,v){if(H&&(!Q||"ERR_STREAM_PREMATURE_CLOSE"===Q.code)&&(Q=H),Q||v){for(;ze.length;)ze.shift()(Q);F?.removeEventListener("abort",M),ce.abort(),v&&(Q||x.forEach(re=>re()),g.nextTick(Ae,Q,he))}}for(let H=0;H<z.length;H++){const v=z[H],re=H<z.length-1,Ge=H>0,Ke=re||!1!==et?.end,st=H===z.length-1;if(Te(v)){let Wt=function(an){an&&"AbortError"!==an.name&&"ERR_STREAM_PREMATURE_CLOSE"!==an.code&&dt(an)};if(Ke){const{destroy:an,cleanup:qn}=Ne(v,re,Ge);ze.push(an),ue(v)&&st&&x.push(qn)}v.on("error",Wt),ue(v)&&st&&x.push(()=>{v.removeListener("error",Wt)})}if(0===H)if("function"==typeof v){if(mt=v({signal:Z}),!S(mt))throw new K("Iterable, AsyncIterable or Stream","source",mt)}else mt=S(v)||j(v)||se(v)?v:I.from(v);else if("function"==typeof v){var zt;if(mt=se(mt)?Ve(null===(zt=mt)||void 0===zt?void 0:zt.readable):Ve(mt),mt=v(mt,{signal:Z}),re){if(!S(mt,!0))throw new K("AsyncIterable",`transform[${H-1}]`,mt)}else{var rn;Xe||(Xe=C(6973));const Wt=new Xe({objectMode:!0}),an=null===(rn=mt)||void 0===rn?void 0:rn.then;if("function"==typeof an)Ye++,an.call(mt,In=>{he=In,null!=In&&Wt.write(In),Ke&&Wt.end(),g.nextTick(dt)},In=>{Wt.destroy(In),g.nextTick(dt,In)});else if(S(mt,!0))Ye++,$e(mt,Wt,dt,{end:Ke});else{if(!Re(mt)&&!se(mt))throw new K("AsyncIterable or Promise","destination",mt);Ye++,$e(mt.readable||mt,Wt,dt,{end:Ke})}mt=Wt;const{destroy:qn,cleanup:Yn}=Ne(mt,!1,!0);ze.push(qn),st&&x.push(Yn)}}else if(Te(v)){if(j(mt)){Ye+=2;const Wt=ie(mt,v,dt,{end:Ke});ue(v)&&st&&x.push(Wt)}else if(se(mt)||Re(mt))Ye++,$e(mt.readable||mt,v,dt,{end:Ke});else{if(!S(mt))throw new ae("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],mt);Ye++,$e(mt,v,dt,{end:Ke})}mt=v}else if(Se(v)){if(j(mt))Ye++,Je(Ve(mt),v,dt,{end:Ke});else if(Re(mt)||S(mt))Ye++,Je(mt,v,dt,{end:Ke});else{if(!se(mt))throw new ae("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],mt);Ye++,Je(mt.readable,v,dt,{end:Ke})}mt=v}else mt=I.from(v)}return(null!=Z&&Z.aborted||null!=F&&F.aborted)&&g.nextTick(M),mt}function ie(z,Ae,et,{end:ce}){let Z=!1;if(Ae.on("close",()=>{Z||et(new X)}),z.pipe(Ae,{end:!1}),ce){let x=function(){Z=!0,Ae.end()};Oe(z)?g.nextTick(x):z.once("end",x)}else et();return R(z,{readable:!0,writable:!1},x=>{const M=z._readableState;x&&"ERR_STREAM_PREMATURE_CLOSE"===x.code&&M&&M.ended&&!M.errored&&!M.errorEmitted?z.once("end",et).once("error",et):et(x)}),R(Ae,{readable:!1,writable:!0},et)}Ue.exports={pipelineImpl:E,pipeline:function P(...z){return E(z,W(function Pe(z){return _(z[z.length-1],"streams[stream.length - 1]"),z.pop()}(z)))}}},8383:(Ue,ge,C)=>{var J=C(6737).default,A=C(8186).default;const te=C(42),{ArrayPrototypeIndexOf:B,NumberIsInteger:ee,NumberIsNaN:g,NumberParseInt:w,ObjectDefineProperties:N,ObjectKeys:G,ObjectSetPrototypeOf:R,Promise:W,SafeSet:de,SymbolAsyncIterator:I,Symbol:V}=C(6305);Ue.exports=$e,$e.ReadableState=Ee;const{EventEmitter:ae}=C(2016),{Stream:K,prependListener:oe}=C(900),{Buffer:ne}=C(1657),{addAbortSignal:X}=C(9987),L=C(4618);let _=C(2656).debuglog("stream",v=>{_=v});const O=C(2960),S=C(5601),{getHighWaterMark:ue,getDefaultHighWaterMark:j}=C(8782),{aggregateTwoErrors:Te,codes:{ERR_INVALID_ARG_TYPE:se,ERR_METHOD_NOT_IMPLEMENTED:Se,ERR_OUT_OF_RANGE:Re,ERR_STREAM_PUSH_AFTER_EOF:Oe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Qe}}=C(4370),{validateObject:Xe}=C(2120),we=V("kPaused"),{StringDecoder:Ne}=C(2024),Pe=C(55);R($e.prototype,K.prototype),R($e,K);const Ve=()=>{},{errorOrDestroy:fe}=S;function Ee(v,re,Ge){"boolean"!=typeof Ge&&(Ge=re instanceof C(5931)),this.objectMode=!(!v||!v.objectMode),Ge&&(this.objectMode=this.objectMode||!(!v||!v.readableObjectMode)),this.highWaterMark=v?ue(this,v,"readableHighWaterMark",Ge):j(!1),this.buffer=new O,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[we]=null,this.errorEmitted=!1,this.emitClose=!v||!1!==v.emitClose,this.autoDestroy=!v||!1!==v.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=v&&v.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,v&&v.encoding&&(this.decoder=new Ne(v.encoding),this.encoding=v.encoding)}function $e(v){if(!(this instanceof $e))return new $e(v);const re=this instanceof C(5931);this._readableState=new Ee(v,this,re),v&&("function"==typeof v.read&&(this._read=v.read),"function"==typeof v.destroy&&(this._destroy=v.destroy),"function"==typeof v.construct&&(this._construct=v.construct),v.signal&&!re&&X(v.signal,this)),K.call(this,v),S.construct(this,()=>{this._readableState.needReadable&&et(this,this._readableState)})}function ot(v,re,Ge,Ke){_("readableAddChunk",re);const st=v._readableState;let Wt;if(st.objectMode||("string"==typeof re?st.encoding!==(Ge=Ge||st.defaultEncoding)&&(Ke&&st.encoding?re=ne.from(re,Ge).toString(st.encoding):(re=ne.from(re,Ge),Ge="")):re instanceof ne?Ge="":K._isUint8Array(re)?(re=K._uint8ArrayToBuffer(re),Ge=""):null!=re&&(Wt=new se("chunk",["string","Buffer","Uint8Array"],re))),Wt)fe(v,Wt);else if(null===re)st.reading=!1,function ie(v,re){if(_("onEofChunk"),!re.ended){if(re.decoder){const Ge=re.decoder.end();Ge&&Ge.length&&(re.buffer.push(Ge),re.length+=re.objectMode?1:Ge.length)}re.ended=!0,re.sync?z(v):(re.needReadable=!1,re.emittedReadable=!0,Ae(v))}}(v,st);else if(st.objectMode||re&&re.length>0)if(Ke)if(st.endEmitted)fe(v,new Qe);else{if(st.destroyed||st.errored)return!1;Je(v,st,re,!0)}else if(st.ended)fe(v,new Oe);else{if(st.destroyed||st.errored)return!1;st.reading=!1,st.decoder&&!Ge?(re=st.decoder.write(re),st.objectMode||0!==re.length?Je(v,st,re,!1):et(v,st)):Je(v,st,re,!1)}else Ke||(st.reading=!1,et(v,st));return!st.ended&&(st.length<st.highWaterMark||0===st.length)}function Je(v,re,Ge,Ke){re.flowing&&0===re.length&&!re.sync&&v.listenerCount("data")>0?(re.multiAwaitDrain?re.awaitDrainWriters.clear():re.awaitDrainWriters=null,re.dataEmitted=!0,v.emit("data",Ge)):(re.length+=re.objectMode?1:Ge.length,Ke?re.buffer.unshift(Ge):re.buffer.push(Ge),re.needReadable&&z(v)),et(v,re)}function E(v,re){return v<=0||0===re.length&&re.ended?0:re.objectMode?1:g(v)?re.flowing&&re.length?re.buffer.first().length:re.length:v<=re.length?v:re.ended?re.length:0}function z(v){const re=v._readableState;_("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(_("emitReadable",re.flowing),re.emittedReadable=!0,te.nextTick(Ae,v))}function Ae(v){const re=v._readableState;_("emitReadable_",re.destroyed,re.length,re.ended),!re.destroyed&&!re.errored&&(re.length||re.ended)&&(v.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,he(v)}function et(v,re){!re.readingMore&&re.constructed&&(re.readingMore=!0,te.nextTick(ce,v,re))}function ce(v,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&0===re.length);){const Ge=re.length;if(_("maybeReadMore read 0"),v.read(0),Ge===re.length)break}re.readingMore=!1}function F(v){const re=v._readableState;re.readableListening=v.listenerCount("readable")>0,re.resumeScheduled&&!1===re[we]?re.flowing=!0:v.listenerCount("data")>0?v.resume():re.readableListening||(re.flowing=null)}function x(v){_("readable nexttick read 0"),v.read(0)}function Q(v,re){_("resume",re.reading),re.reading||v.read(0),re.resumeScheduled=!1,v.emit("resume"),he(v),re.flowing&&!re.reading&&v.read(0)}function he(v){const re=v._readableState;for(_("flow",re.flowing);re.flowing&&null!==v.read(););}function ze(v,re){"function"!=typeof v.read&&(v=$e.wrap(v,{objectMode:!0}));const Ge=function Ye(v,re){return dt.apply(this,arguments)}(v,re);return Ge.stream=v,Ge}function dt(){return(dt=A(function*(v,re){let st,Ge=Ve;function Ke(an){this===v?(Ge(),Ge=Ve):Ge=an}v.on("readable",Ke);const Wt=L(v,{writable:!1},an=>{st=an?Te(st,an):null,Ge(),Ge=Ve});try{for(;;){const an=v.destroyed?null:v.read();if(null!==an)yield an;else{if(st)throw st;if(null===st)return;yield J(new W(Ke))}}}catch(an){throw st=Te(st,an),st}finally{!st&&!1===re?.destroyOnReturn||void 0!==st&&!v._readableState.autoDestroy?(v.off("readable",Ke),Wt()):S.destroyer(v,null)}})).apply(this,arguments)}function vt(v,re){if(0===re.length)return null;let Ge;return re.objectMode?Ge=re.buffer.shift():!v||v>=re.length?(Ge=re.decoder?re.buffer.join(""):1===re.buffer.length?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):Ge=re.buffer.consume(v,re.decoder),Ge}function mt(v){const re=v._readableState;_("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,te.nextTick(zt,re,v))}function zt(v,re){if(_("endReadableNT",v.endEmitted,v.length),!v.errored&&!v.closeEmitted&&!v.endEmitted&&0===v.length)if(v.endEmitted=!0,re.emit("end"),re.writable&&!1===re.allowHalfOpen)te.nextTick(rn,re);else if(v.autoDestroy){const Ge=re._writableState;(!Ge||Ge.autoDestroy&&(Ge.finished||!1===Ge.writable))&&re.destroy()}}function rn(v){v.writable&&!v.writableEnded&&!v.destroyed&&v.end()}let Ie;function H(){return void 0===Ie&&(Ie={}),Ie}$e.prototype.destroy=S.destroy,$e.prototype._undestroy=S.undestroy,$e.prototype._destroy=function(v,re){re(v)},$e.prototype[ae.captureRejectionSymbol]=function(v){this.destroy(v)},$e.prototype.push=function(v,re){return ot(this,v,re,!1)},$e.prototype.unshift=function(v,re){return ot(this,v,re,!0)},$e.prototype.isPaused=function(){const v=this._readableState;return!0===v[we]||!1===v.flowing},$e.prototype.setEncoding=function(v){const re=new Ne(v);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;const Ge=this._readableState.buffer;let Ke="";for(const st of Ge)Ke+=re.write(st);return Ge.clear(),""!==Ke&&Ge.push(Ke),this._readableState.length=Ke.length,this},$e.prototype.read=function(v){_("read",v),void 0===v?v=NaN:ee(v)||(v=w(v,10));const re=this._readableState,Ge=v;if(v>re.highWaterMark&&(re.highWaterMark=function P(v){if(v>1073741824)throw new Re("size","<= 1GiB",v);return v--,v|=v>>>1,v|=v>>>2,v|=v>>>4,v|=v>>>8,v|=v>>>16,++v}(v)),0!==v&&(re.emittedReadable=!1),0===v&&re.needReadable&&((0!==re.highWaterMark?re.length>=re.highWaterMark:re.length>0)||re.ended))return _("read: emitReadable",re.length,re.ended),0===re.length&&re.ended?mt(this):z(this),null;if(0===(v=E(v,re))&&re.ended)return 0===re.length&&mt(this),null;let st,Ke=re.needReadable;if(_("need readable",Ke),(0===re.length||re.length-v<re.highWaterMark)&&(Ke=!0,_("length less than watermark",Ke)),re.ended||re.reading||re.destroyed||re.errored||!re.constructed)Ke=!1,_("reading, ended or constructing",Ke);else if(Ke){_("do read"),re.reading=!0,re.sync=!0,0===re.length&&(re.needReadable=!0);try{this._read(re.highWaterMark)}catch(Wt){fe(this,Wt)}re.sync=!1,re.reading||(v=E(Ge,re))}return st=v>0?vt(v,re):null,null===st?(re.needReadable=re.length<=re.highWaterMark,v=0):(re.length-=v,re.multiAwaitDrain?re.awaitDrainWriters.clear():re.awaitDrainWriters=null),0===re.length&&(re.ended||(re.needReadable=!0),Ge!==v&&re.ended&&mt(this)),null!==st&&!re.errorEmitted&&!re.closeEmitted&&(re.dataEmitted=!0,this.emit("data",st)),st},$e.prototype._read=function(v){throw new Se("_read()")},$e.prototype.pipe=function(v,re){const Ge=this,Ke=this._readableState;1===Ke.pipes.length&&(Ke.multiAwaitDrain||(Ke.multiAwaitDrain=!0,Ke.awaitDrainWriters=new de(Ke.awaitDrainWriters?[Ke.awaitDrainWriters]:[]))),Ke.pipes.push(v),_("pipe count=%d opts=%j",Ke.pipes.length,re);const Wt=re&&!1===re.end||v===te.stdout||v===te.stderr?Os:qn;function qn(){_("onend"),v.end()}Ke.endEmitted?te.nextTick(Wt):Ge.once("end",Wt),v.on("unpipe",function an(Io,mo){_("onunpipe"),Io===Ge&&mo&&!1===mo.hasUnpiped&&(mo.hasUnpiped=!0,function gr(){_("cleanup"),v.removeListener("close",Yr),v.removeListener("finish",as),Yn&&v.removeListener("drain",Yn),v.removeListener("error",zi),v.removeListener("unpipe",an),Ge.removeListener("end",qn),Ge.removeListener("end",Os),Ge.removeListener("data",Go),In=!0,Yn&&Ke.awaitDrainWriters&&(!v._writableState||v._writableState.needDrain)&&Yn()}())});let Yn,In=!1;function ss(){In||(1===Ke.pipes.length&&Ke.pipes[0]===v?(_("false write response, pause",0),Ke.awaitDrainWriters=v,Ke.multiAwaitDrain=!1):Ke.pipes.length>1&&Ke.pipes.includes(v)&&(_("false write response, pause",Ke.awaitDrainWriters.size),Ke.awaitDrainWriters.add(v)),Ge.pause()),Yn||(Yn=function Z(v,re){return function(){const Ke=v._readableState;Ke.awaitDrainWriters===re?(_("pipeOnDrain",1),Ke.awaitDrainWriters=null):Ke.multiAwaitDrain&&(_("pipeOnDrain",Ke.awaitDrainWriters.size),Ke.awaitDrainWriters.delete(re)),(!Ke.awaitDrainWriters||0===Ke.awaitDrainWriters.size)&&v.listenerCount("data")&&v.resume()}}(Ge,v),v.on("drain",Yn))}function Go(Io){_("ondata");const mo=v.write(Io);_("dest.write",mo),!1===mo&&ss()}function zi(Io){if(_("onerror",Io),Os(),v.removeListener("error",zi),0===v.listenerCount("error")){const mo=v._writableState||v._readableState;mo&&!mo.errorEmitted?fe(v,Io):v.emit("error",Io)}}function Yr(){v.removeListener("finish",as),Os()}function as(){_("onfinish"),v.removeListener("close",Yr),Os()}function Os(){_("unpipe"),Ge.unpipe(v)}return Ge.on("data",Go),oe(v,"error",zi),v.once("close",Yr),v.once("finish",as),v.emit("pipe",Ge),!0===v.writableNeedDrain?Ke.flowing&&ss():Ke.flowing||(_("pipe resume"),Ge.resume()),v},$e.prototype.unpipe=function(v){const re=this._readableState;if(0===re.pipes.length)return this;if(!v){const st=re.pipes;re.pipes=[],this.pause();for(let Wt=0;Wt<st.length;Wt++)st[Wt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ke=B(re.pipes,v);return-1===Ke||(re.pipes.splice(Ke,1),0===re.pipes.length&&this.pause(),v.emit("unpipe",this,{hasUnpiped:!1})),this},$e.prototype.addListener=$e.prototype.on=function(v,re){const Ge=K.prototype.on.call(this,v,re),Ke=this._readableState;return"data"===v?(Ke.readableListening=this.listenerCount("readable")>0,!1!==Ke.flowing&&this.resume()):"readable"===v&&!Ke.endEmitted&&!Ke.readableListening&&(Ke.readableListening=Ke.needReadable=!0,Ke.flowing=!1,Ke.emittedReadable=!1,_("on readable",Ke.length,Ke.reading),Ke.length?z(this):Ke.reading||te.nextTick(x,this)),Ge},$e.prototype.off=$e.prototype.removeListener=function(v,re){const Ge=K.prototype.removeListener.call(this,v,re);return"readable"===v&&te.nextTick(F,this),Ge},$e.prototype.removeAllListeners=function(v){const re=K.prototype.removeAllListeners.apply(this,arguments);return("readable"===v||void 0===v)&&te.nextTick(F,this),re},$e.prototype.resume=function(){const v=this._readableState;return v.flowing||(_("resume"),v.flowing=!v.readableListening,function M(v,re){re.resumeScheduled||(re.resumeScheduled=!0,te.nextTick(Q,v,re))}(this,v)),v[we]=!1,this},$e.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[we]=!0,this},$e.prototype.wrap=function(v){let re=!1;v.on("data",Ke=>{!this.push(Ke)&&v.pause&&(re=!0,v.pause())}),v.on("end",()=>{this.push(null)}),v.on("error",Ke=>{fe(this,Ke)}),v.on("close",()=>{this.destroy()}),v.on("destroy",()=>{this.destroy()}),this._read=()=>{re&&v.resume&&(re=!1,v.resume())};const Ge=G(v);for(let Ke=1;Ke<Ge.length;Ke++){const st=Ge[Ke];void 0===this[st]&&"function"==typeof v[st]&&(this[st]=v[st].bind(v))}return this},$e.prototype[I]=function(){return ze(this)},$e.prototype.iterator=function(v){return void 0!==v&&Xe(v,"options"),ze(this,v)},N($e.prototype,{readable:{__proto__:null,get(){const v=this._readableState;return!(!v||!1===v.readable||v.destroyed||v.errorEmitted||v.endEmitted)},set(v){this._readableState&&(this._readableState.readable=!!v)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(v){this._readableState&&(this._readableState.flowing=v)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(v){this._readableState&&(this._readableState.destroyed=v)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),N(Ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[we]},set(v){this[we]=!!v}}}),$e._fromList=vt,$e.from=function(v,re){return Pe($e,v,re)},$e.fromWeb=function(v,re){return H().newStreamReadableFromReadableStream(v,re)},$e.toWeb=function(v,re){return H().newReadableStreamFromStreamReadable(v,re)},$e.wrap=function(v,re){var Ge,Ke;return new $e({objectMode:null===(Ge=null!==(Ke=v.readableObjectMode)&&void 0!==Ke?Ke:v.objectMode)||void 0===Ge||Ge,...re,destroy(st,Wt){S.destroyer(v,st),Wt(st)}}).wrap(v)}},8782:(Ue,ge,C)=>{"use strict";const{MathFloor:J,NumberIsInteger:A}=C(6305),{ERR_INVALID_ARG_VALUE:te}=C(4370).codes;function ee(w){return w?16:16384}Ue.exports={getHighWaterMark:function g(w,N,G,R){const W=function B(w,N,G){return null!=w.highWaterMark?w.highWaterMark:N?w[G]:null}(N,R,G);if(null!=W){if(!A(W)||W<0)throw new te(R?`options.${G}`:"options.highWaterMark",W);return J(W)}return ee(w.objectMode)},getDefaultHighWaterMark:ee}},123:(Ue,ge,C)=>{"use strict";const{ObjectSetPrototypeOf:J,Symbol:A}=C(6305);Ue.exports=w;const{ERR_METHOD_NOT_IMPLEMENTED:te}=C(4370).codes,B=C(5931),{getHighWaterMark:ee}=C(8782);J(w.prototype,B.prototype),J(w,B);const g=A("kCallback");function w(R){if(!(this instanceof w))return new w(R);const W=R?ee(this,R,"readableHighWaterMark",!0):null;0===W&&(R={...R,highWaterMark:null,readableHighWaterMark:W,writableHighWaterMark:R.writableHighWaterMark||0}),B.call(this,R),this._readableState.sync=!1,this[g]=null,R&&("function"==typeof R.transform&&(this._transform=R.transform),"function"==typeof R.flush&&(this._flush=R.flush)),this.on("prefinish",G)}function N(R){"function"!=typeof this._flush||this.destroyed?(this.push(null),R&&R()):this._flush((W,de)=>{W?R?R(W):this.destroy(W):(null!=de&&this.push(de),this.push(null),R&&R())})}function G(){this._final!==N&&N.call(this)}w.prototype._final=N,w.prototype._transform=function(R,W,de){throw new te("_transform()")},w.prototype._write=function(R,W,de){const I=this._readableState,V=this._writableState,ae=I.length;this._transform(R,W,(K,oe)=>{K?de(K):(null!=oe&&this.push(oe),V.ended||ae===I.length||I.length<I.highWaterMark?de():this[g]=de)})},w.prototype._read=function(){if(this[g]){const R=this[g];this[g]=null,R()}}},5428:(Ue,ge,C)=>{"use strict";const{Symbol:J,SymbolAsyncIterator:A,SymbolIterator:te,SymbolFor:B}=C(6305),ee=J("kDestroyed"),g=J("kIsErrored"),w=J("kIsReadable"),N=J("kIsDisturbed"),G=B("nodejs.webstream.isClosedPromise"),R=B("nodejs.webstream.controllerErrorFunction");function W(fe,Ee=!1){var $e;return!(!fe||"function"!=typeof fe.pipe||"function"!=typeof fe.on||Ee&&("function"!=typeof fe.pause||"function"!=typeof fe.resume)||fe._writableState&&!1===(null===($e=fe._readableState)||void 0===$e?void 0:$e.readable)||fe._writableState&&!fe._readableState)}function de(fe){var Ee;return!(!fe||"function"!=typeof fe.write||"function"!=typeof fe.on||fe._readableState&&!1===(null===(Ee=fe._writableState)||void 0===Ee?void 0:Ee.writable))}function V(fe){return fe&&(fe._readableState||fe._writableState||"function"==typeof fe.write&&"function"==typeof fe.on||"function"==typeof fe.pipe&&"function"==typeof fe.on)}function ae(fe){return!(!fe||V(fe)||"function"!=typeof fe.pipeThrough||"function"!=typeof fe.getReader||"function"!=typeof fe.cancel)}function K(fe){return!(!fe||V(fe)||"function"!=typeof fe.getWriter||"function"!=typeof fe.abort)}function oe(fe){return!(!fe||V(fe)||"object"!=typeof fe.readable||"object"!=typeof fe.writable)}function L(fe){if(!V(fe))return null;const ot=fe._writableState||fe._readableState;return!!(fe.destroyed||fe[ee]||null!=ot&&ot.destroyed)}function _(fe){if(!de(fe))return null;if(!0===fe.writableEnded)return!0;const Ee=fe._writableState;return(null==Ee||!Ee.errored)&&("boolean"!=typeof Ee?.ended?null:Ee.ended)}function ue(fe,Ee){if(!W(fe))return null;const $e=fe._readableState;return(null==$e||!$e.errored)&&("boolean"!=typeof $e?.endEmitted?null:!!($e.endEmitted||!1===Ee&&!0===$e.ended&&0===$e.length))}function j(fe){return fe&&null!=fe[w]?fe[w]:"boolean"!=typeof fe?.readable?null:!L(fe)&&W(fe)&&fe.readable&&!ue(fe)}function Te(fe){return"boolean"!=typeof fe?.writable?null:!L(fe)&&de(fe)&&fe.writable&&!_(fe)}function Qe(fe){return"boolean"==typeof fe._closed&&"boolean"==typeof fe._defaultKeepAlive&&"boolean"==typeof fe._removedConnection&&"boolean"==typeof fe._removedContLen}function Xe(fe){return"boolean"==typeof fe._sent100&&Qe(fe)}Ue.exports={kDestroyed:ee,isDisturbed:function Pe(fe){var Ee;return!(!fe||!(null!==(Ee=fe[N])&&void 0!==Ee?Ee:fe.readableDidRead||fe.readableAborted))},kIsDisturbed:N,isErrored:function Ve(fe){var Ee,$e,ot,Je,le,P,E,ie,z,Ae;return!(!fe||!(null!==(Ee=null!==($e=null!==(ot=null!==(Je=null!==(le=null!==(P=fe[g])&&void 0!==P?P:fe.readableErrored)&&void 0!==le?le:fe.writableErrored)&&void 0!==Je?Je:null===(E=fe._readableState)||void 0===E?void 0:E.errorEmitted)&&void 0!==ot?ot:null===(ie=fe._writableState)||void 0===ie?void 0:ie.errorEmitted)&&void 0!==$e?$e:null===(z=fe._readableState)||void 0===z?void 0:z.errored)&&void 0!==Ee?Ee:null!==(Ae=fe._writableState)&&void 0!==Ae&&Ae.errored))},kIsErrored:g,isReadable:j,kIsReadable:w,kIsClosedPromise:G,kControllerErrorFunction:R,isClosed:function Oe(fe){if(!V(fe))return null;if("boolean"==typeof fe.closed)return fe.closed;const Ee=fe._writableState,$e=fe._readableState;return"boolean"==typeof Ee?.closed||"boolean"==typeof $e?.closed?Ee?.closed||$e?.closed:"boolean"==typeof fe._closed&&Qe(fe)?fe._closed:null},isDestroyed:L,isDuplexNodeStream:function I(fe){return!(!fe||"function"!=typeof fe.pipe||!fe._readableState||"function"!=typeof fe.on||"function"!=typeof fe.write)},isFinished:function se(fe,Ee){return V(fe)?!!L(fe)||!(!1!==Ee?.readable&&j(fe)||!1!==Ee?.writable&&Te(fe)):null},isIterable:function X(fe,Ee){return null!=fe&&(!0===Ee?"function"==typeof fe[A]:!1===Ee?"function"==typeof fe[te]:"function"==typeof fe[A]||"function"==typeof fe[te])},isReadableNodeStream:W,isReadableStream:ae,isReadableEnded:function S(fe){if(!W(fe))return null;if(!0===fe.readableEnded)return!0;const Ee=fe._readableState;return!(!Ee||Ee.errored)&&("boolean"!=typeof Ee?.ended?null:Ee.ended)},isReadableFinished:ue,isReadableErrored:function Re(fe){var Ee,$e;return V(fe)?fe.readableErrored?fe.readableErrored:null!==(Ee=null===($e=fe._readableState)||void 0===$e?void 0:$e.errored)&&void 0!==Ee?Ee:null:null},isNodeStream:V,isWebStream:function ne(fe){return ae(fe)||K(fe)||oe(fe)},isWritable:Te,isWritableNodeStream:de,isWritableStream:K,isWritableEnded:_,isWritableFinished:function O(fe,Ee){if(!de(fe))return null;if(!0===fe.writableFinished)return!0;const $e=fe._writableState;return(null==$e||!$e.errored)&&("boolean"!=typeof $e?.finished?null:!!($e.finished||!1===Ee&&!0===$e.ended&&0===$e.length))},isWritableErrored:function Se(fe){var Ee,$e;return V(fe)?fe.writableErrored?fe.writableErrored:null!==(Ee=null===($e=fe._writableState)||void 0===$e?void 0:$e.errored)&&void 0!==Ee?Ee:null:null},isServerRequest:function we(fe){var Ee;return"boolean"==typeof fe._consuming&&"boolean"==typeof fe._dumped&&void 0===(null===(Ee=fe.req)||void 0===Ee?void 0:Ee.upgradeOrConnect)},isServerResponse:Xe,willEmitClose:function Ne(fe){if(!V(fe))return null;const ot=fe._writableState||fe._readableState;return!ot&&Xe(fe)||!!(ot&&ot.autoDestroy&&ot.emitClose&&!1===ot.closed)},isTransformStream:oe}},9764:(Ue,ge,C)=>{const J=C(42),{ArrayPrototypeSlice:A,Error:te,FunctionPrototypeSymbolHasInstance:B,ObjectDefineProperty:ee,ObjectDefineProperties:g,ObjectSetPrototypeOf:w,StringPrototypeToLowerCase:N,Symbol:G,SymbolHasInstance:R}=C(6305);Ue.exports=Xe,Xe.WritableState=Oe;const{EventEmitter:W}=C(2016),de=C(900).Stream,{Buffer:I}=C(1657),V=C(5601),{addAbortSignal:ae}=C(9987),{getHighWaterMark:K,getDefaultHighWaterMark:oe}=C(8782),{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:X,ERR_MULTIPLE_CALLBACK:L,ERR_STREAM_CANNOT_PIPE:_,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:ue,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:Te}=C(4370).codes,{errorOrDestroy:se}=V;function Se(){}w(Xe.prototype,de.prototype),w(Xe,de);const Re=G("kOnFinished");function Oe(Z,F,x){"boolean"!=typeof x&&(x=F instanceof C(5931)),this.objectMode=!(!Z||!Z.objectMode),x&&(this.objectMode=this.objectMode||!(!Z||!Z.writableObjectMode)),this.highWaterMark=Z?K(this,Z,"writableHighWaterMark",x):oe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Z&&!1===Z.decodeStrings),this.defaultEncoding=Z&&Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=fe.bind(void 0,F),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Qe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Z||!1!==Z.emitClose,this.autoDestroy=!Z||!1!==Z.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Re]=[]}function Qe(Z){Z.buffered=[],Z.bufferedIndex=0,Z.allBuffers=!0,Z.allNoop=!0}function Xe(Z){const F=this instanceof C(5931);if(!F&&!B(Xe,this))return new Xe(Z);this._writableState=new Oe(Z,this,F),Z&&("function"==typeof Z.write&&(this._write=Z.write),"function"==typeof Z.writev&&(this._writev=Z.writev),"function"==typeof Z.destroy&&(this._destroy=Z.destroy),"function"==typeof Z.final&&(this._final=Z.final),"function"==typeof Z.construct&&(this._construct=Z.construct),Z.signal&&ae(Z.signal,this)),de.call(this,Z),V.construct(this,()=>{const x=this._writableState;x.writing||Je(this,x),ie(this,x)})}function we(Z,F,x,M){const Q=Z._writableState;if("function"==typeof x)M=x,x=Q.defaultEncoding;else{if(x){if("buffer"!==x&&!I.isEncoding(x))throw new Te(x)}else x=Q.defaultEncoding;"function"!=typeof M&&(M=Se)}if(null===F)throw new ue;if(!Q.objectMode)if("string"==typeof F)!1!==Q.decodeStrings&&(F=I.from(F,x),x="buffer");else if(F instanceof I)x="buffer";else{if(!de._isUint8Array(F))throw new ne("chunk",["string","Buffer","Uint8Array"],F);F=de._uint8ArrayToBuffer(F),x="buffer"}let he;return Q.ending?he=new j:Q.destroyed&&(he=new O("write")),he?(J.nextTick(M,he),se(Z,he,!0),he):(Q.pendingcb++,function Ne(Z,F,x,M,Q){const he=F.objectMode?1:x.length;F.length+=he;const ze=F.length<F.highWaterMark;return ze||(F.needDrain=!0),F.writing||F.corked||F.errored||!F.constructed?(F.buffered.push({chunk:x,encoding:M,callback:Q}),F.allBuffers&&"buffer"!==M&&(F.allBuffers=!1),F.allNoop&&Q!==Se&&(F.allNoop=!1)):(F.writelen=he,F.writecb=Q,F.writing=!0,F.sync=!0,Z._write(x,M,F.onwrite),F.sync=!1),ze&&!F.errored&&!F.destroyed}(Z,Q,F,x,M))}function Pe(Z,F,x,M,Q,he,ze){F.writelen=M,F.writecb=ze,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new O("write")):x?Z._writev(Q,F.onwrite):Z._write(Q,he,F.onwrite),F.sync=!1}function Ve(Z,F,x,M){--F.pendingcb,M(x),ot(F),se(Z,x)}function fe(Z,F){const x=Z._writableState,M=x.sync,Q=x.writecb;"function"==typeof Q?(x.writing=!1,x.writecb=null,x.length-=x.writelen,x.writelen=0,F?(x.errored||(x.errored=F),Z._readableState&&!Z._readableState.errored&&(Z._readableState.errored=F),M?J.nextTick(Ve,Z,x,F,Q):Ve(Z,x,F,Q)):(x.buffered.length>x.bufferedIndex&&Je(Z,x),M?null!==x.afterWriteTickInfo&&x.afterWriteTickInfo.cb===Q?x.afterWriteTickInfo.count++:(x.afterWriteTickInfo={count:1,cb:Q,stream:Z,state:x},J.nextTick(Ee,x.afterWriteTickInfo)):$e(Z,x,1,Q))):se(Z,new L)}function Ee({stream:Z,state:F,count:x,cb:M}){return F.afterWriteTickInfo=null,$e(Z,F,x,M)}function $e(Z,F,x,M){for(!F.ending&&!Z.destroyed&&0===F.length&&F.needDrain&&(F.needDrain=!1,Z.emit("drain"));x-- >0;)F.pendingcb--,M();F.destroyed&&ot(F),ie(Z,F)}function ot(Z){if(Z.writing)return;for(let Q=Z.bufferedIndex;Q<Z.buffered.length;++Q){var F;const{chunk:he,callback:ze}=Z.buffered[Q];Z.length-=Z.objectMode?1:he.length,ze(null!==(F=Z.errored)&&void 0!==F?F:new O("write"))}const x=Z[Re].splice(0);for(let Q=0;Q<x.length;Q++){var M;x[Q](null!==(M=Z.errored)&&void 0!==M?M:new O("end"))}Qe(Z)}function Je(Z,F){if(F.corked||F.bufferProcessing||F.destroyed||!F.constructed)return;const{buffered:x,bufferedIndex:M,objectMode:Q}=F,he=x.length-M;if(!he)return;let ze=M;if(F.bufferProcessing=!0,he>1&&Z._writev){F.pendingcb-=he-1;const Ye=F.allNoop?Se:vt=>{for(let mt=ze;mt<x.length;++mt)x[mt].callback(vt)},dt=F.allNoop&&0===ze?x:A(x,ze);dt.allBuffers=F.allBuffers,Pe(Z,F,!0,F.length,dt,"",Ye),Qe(F)}else{do{const{chunk:Ye,encoding:dt,callback:vt}=x[ze];x[ze++]=null,Pe(Z,F,!1,Q?1:Ye.length,Ye,dt,vt)}while(ze<x.length&&!F.writing);ze===x.length?Qe(F):ze>256?(x.splice(0,ze),F.bufferedIndex=0):F.bufferedIndex=ze}F.bufferProcessing=!1}function le(Z){return Z.ending&&!Z.destroyed&&Z.constructed&&0===Z.length&&!Z.errored&&0===Z.buffered.length&&!Z.finished&&!Z.writing&&!Z.errorEmitted&&!Z.closeEmitted}function ie(Z,F,x){le(F)&&(function E(Z,F){!F.prefinished&&!F.finalCalled&&("function"!=typeof Z._final||F.destroyed?(F.prefinished=!0,Z.emit("prefinish")):(F.finalCalled=!0,function P(Z,F){let x=!1;function M(Q){if(x)se(Z,Q??L());else if(x=!0,F.pendingcb--,Q){const he=F[Re].splice(0);for(let ze=0;ze<he.length;ze++)he[ze](Q);se(Z,Q,F.sync)}else le(F)&&(F.prefinished=!0,Z.emit("prefinish"),F.pendingcb++,J.nextTick(z,Z,F))}F.sync=!0,F.pendingcb++;try{Z._final(M)}catch(Q){M(Q)}F.sync=!1}(Z,F)))}(Z,F),0===F.pendingcb&&(x?(F.pendingcb++,J.nextTick((M,Q)=>{le(Q)?z(M,Q):Q.pendingcb--},Z,F)):le(F)&&(F.pendingcb++,z(Z,F))))}function z(Z,F){F.pendingcb--,F.finished=!0;const x=F[Re].splice(0);for(let M=0;M<x.length;M++)x[M]();if(Z.emit("finish"),F.autoDestroy){const M=Z._readableState;(!M||M.autoDestroy&&(M.endEmitted||!1===M.readable))&&Z.destroy()}}Oe.prototype.getBuffer=function(){return A(this.buffered,this.bufferedIndex)},ee(Oe.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),ee(Xe,R,{__proto__:null,value:function(Z){return!!B(this,Z)||this===Xe&&Z&&Z._writableState instanceof Oe}}),Xe.prototype.pipe=function(){se(this,new _)},Xe.prototype.write=function(Z,F,x){return!0===we(this,Z,F,x)},Xe.prototype.cork=function(){this._writableState.corked++},Xe.prototype.uncork=function(){const Z=this._writableState;Z.corked&&(Z.corked--,Z.writing||Je(this,Z))},Xe.prototype.setDefaultEncoding=function(F){if("string"==typeof F&&(F=N(F)),!I.isEncoding(F))throw new Te(F);return this._writableState.defaultEncoding=F,this},Xe.prototype._write=function(Z,F,x){if(!this._writev)throw new X("_write()");this._writev([{chunk:Z,encoding:F}],x)},Xe.prototype._writev=null,Xe.prototype.end=function(Z,F,x){const M=this._writableState;let Q;if("function"==typeof Z?(x=Z,Z=null,F=null):"function"==typeof F&&(x=F,F=null),null!=Z){const he=we(this,Z,F);he instanceof te&&(Q=he)}return M.corked&&(M.corked=1,this.uncork()),Q||(M.errored||M.ending?M.finished?Q=new S("end"):M.destroyed&&(Q=new O("end")):(M.ending=!0,ie(this,M,!0),M.ended=!0)),"function"==typeof x&&(Q||M.finished?J.nextTick(x,Q):M[Re].push(x)),this},g(Xe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Z){this._writableState&&(this._writableState.destroyed=Z)}},writable:{__proto__:null,get(){const Z=this._writableState;return!(!Z||!1===Z.writable||Z.destroyed||Z.errored||Z.ending||Z.ended)},set(Z){this._writableState&&(this._writableState.writable=!!Z)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Z=this._writableState;return!!Z&&!Z.destroyed&&!Z.ending&&Z.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Ae=V.destroy;let et;function ce(){return void 0===et&&(et={}),et}Xe.prototype.destroy=function(Z,F){const x=this._writableState;return!x.destroyed&&(x.bufferedIndex<x.buffered.length||x[Re].length)&&J.nextTick(ot,x),Ae.call(this,Z,F),this},Xe.prototype._undestroy=V.undestroy,Xe.prototype._destroy=function(Z,F){F(Z)},Xe.prototype[W.captureRejectionSymbol]=function(Z){this.destroy(Z)},Xe.fromWeb=function(Z,F){return ce().newStreamWritableFromWritableStream(Z,F)},Xe.toWeb=function(Z){return ce().newWritableStreamFromStreamWritable(Z)}},2120:(Ue,ge,C)=>{"use strict";const{ArrayIsArray:J,ArrayPrototypeIncludes:A,ArrayPrototypeJoin:te,ArrayPrototypeMap:B,NumberIsInteger:ee,NumberIsNaN:g,NumberMAX_SAFE_INTEGER:w,NumberMIN_SAFE_INTEGER:N,NumberParseInt:G,ObjectPrototypeHasOwnProperty:R,RegExpPrototypeExec:W,String:de,StringPrototypeToUpperCase:I,StringPrototypeTrim:V}=C(6305),{hideStackFrames:ae,codes:{ERR_SOCKET_BAD_PORT:K,ERR_INVALID_ARG_TYPE:oe,ERR_INVALID_ARG_VALUE:ne,ERR_OUT_OF_RANGE:X,ERR_UNKNOWN_SIGNAL:L}}=C(4370),{normalizeEncoding:_}=C(2656),{isAsyncFunction:O,isArrayBufferView:S}=C(2656).types,ue={},se=/^[0-7]+$/,Oe=ae((he,ze,Ye=N,dt=w)=>{if("number"!=typeof he)throw new oe(ze,"number",he);if(!ee(he))throw new X(ze,"an integer",he);if(he<Ye||he>dt)throw new X(ze,`>= ${Ye} && <= ${dt}`,he)}),Qe=ae((he,ze,Ye=-2147483648,dt=2147483647)=>{if("number"!=typeof he)throw new oe(ze,"number",he);if(!ee(he))throw new X(ze,"an integer",he);if(he<Ye||he>dt)throw new X(ze,`>= ${Ye} && <= ${dt}`,he)}),Xe=ae((he,ze,Ye=!1)=>{if("number"!=typeof he)throw new oe(ze,"number",he);if(!ee(he))throw new X(ze,"an integer",he);const dt=Ye?1:0,vt=4294967295;if(he<dt||he>vt)throw new X(ze,`>= ${dt} && <= ${vt}`,he)});function we(he,ze){if("string"!=typeof he)throw new oe(ze,"string",he)}const Pe=ae((he,ze,Ye)=>{if(!A(Ye,he)){const vt="must be one of: "+te(B(Ye,mt=>"string"==typeof mt?`'${mt}'`:de(mt)),", ");throw new ne(ze,he,vt)}});function Ve(he,ze){if("boolean"!=typeof he)throw new oe(ze,"boolean",he)}function fe(he,ze,Ye){return null!=he&&R(he,ze)?he[ze]:Ye}const Ee=ae((he,ze,Ye=null)=>{const dt=fe(Ye,"allowArray",!1),vt=fe(Ye,"allowFunction",!1);if(!fe(Ye,"nullable",!1)&&null===he||!dt&&J(he)||"object"!=typeof he&&(!vt||"function"!=typeof he))throw new oe(ze,"Object",he)}),$e=ae((he,ze)=>{if(null!=he&&"object"!=typeof he&&"function"!=typeof he)throw new oe(ze,"a dictionary",he)}),ot=ae((he,ze,Ye=0)=>{if(!J(he))throw new oe(ze,"Array",he);if(he.length<Ye)throw new ne(ze,he,`must be longer than ${Ye}`)}),E=ae((he,ze="buffer")=>{if(!S(he))throw new oe(ze,["Buffer","TypedArray","DataView"],he)}),Ae=ae((he,ze)=>{if(void 0!==he&&(null===he||"object"!=typeof he||!("aborted"in he)))throw new oe(ze,"AbortSignal",he)}),et=ae((he,ze)=>{if("function"!=typeof he)throw new oe(ze,"Function",he)}),ce=ae((he,ze)=>{if("function"!=typeof he||O(he))throw new oe(ze,"Function",he)}),Z=ae((he,ze)=>{if(void 0!==he)throw new oe(ze,"undefined",he)}),x=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function M(he,ze){if(typeof he>"u"||!W(x,he))throw new ne(ze,he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ue.exports={isInt32:function j(he){return he===(0|he)},isUint32:function Te(he){return he===he>>>0},parseFileMode:function Re(he,ze,Ye){if(typeof he>"u"&&(he=Ye),"string"==typeof he){if(null===W(se,he))throw new ne(ze,he,"must be a 32-bit unsigned integer or an octal string");he=G(he,8)}return Xe(he,ze),he},validateArray:ot,validateStringArray:function Je(he,ze){ot(he,ze);for(let Ye=0;Ye<he.length;Ye++)we(he[Ye],`${ze}[${Ye}]`)},validateBooleanArray:function le(he,ze){ot(he,ze);for(let Ye=0;Ye<he.length;Ye++)Ve(he[Ye],`${ze}[${Ye}]`)},validateBoolean:Ve,validateBuffer:E,validateDictionary:$e,validateEncoding:function ie(he,ze){const Ye=_(ze),dt=he.length;if("hex"===Ye&&dt%2!=0)throw new ne("encoding",ze,`is invalid for data of length ${dt}`)},validateFunction:et,validateInt32:Qe,validateInteger:Oe,validateNumber:function Ne(he,ze,Ye=void 0,dt){if("number"!=typeof he)throw new oe(ze,"number",he);if(null!=Ye&&he<Ye||null!=dt&&he>dt||(null!=Ye||null!=dt)&&g(he))throw new X(ze,`${null!=Ye?`>= ${Ye}`:""}${null!=Ye&&null!=dt?" && ":""}${null!=dt?`<= ${dt}`:""}`,he)},validateObject:Ee,validateOneOf:Pe,validatePlainFunction:ce,validatePort:function z(he,ze="Port",Ye=!0){if("number"!=typeof he&&"string"!=typeof he||"string"==typeof he&&0===V(he).length||+he!=+he>>>0||he>65535||0===he&&!Ye)throw new K(ze,he,Ye);return 0|he},validateSignalName:function P(he,ze="signal"){if(we(he,ze),void 0===ue[he])throw void 0!==ue[I(he)]?new L(he+" (signals must use all capital letters)"):new L(he)},validateString:we,validateUint32:Xe,validateUndefined:Z,validateUnion:function F(he,ze,Ye){if(!A(Ye,he))throw new oe(ze,`('${te(Ye,"|")}')`,he)},validateAbortSignal:Ae,validateLinkHeaderValue:function Q(he){if("string"==typeof he)return M(he,"hints"),he;if(J(he)){const ze=he.length;let Ye="";if(0===ze)return Ye;for(let dt=0;dt<ze;dt++){const vt=he[dt];M(vt,"hints"),Ye+=vt,dt!==ze-1&&(Ye+=", ")}return Ye}throw new ne("hints",he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(Ue,ge,C)=>{"use strict";const J=C(8110),A=C(16),te=J.Readable.destroy;Ue.exports=J.Readable,Ue.exports._uint8ArrayToBuffer=J._uint8ArrayToBuffer,Ue.exports._isUint8Array=J._isUint8Array,Ue.exports.isDisturbed=J.isDisturbed,Ue.exports.isErrored=J.isErrored,Ue.exports.isReadable=J.isReadable,Ue.exports.Readable=J.Readable,Ue.exports.Writable=J.Writable,Ue.exports.Duplex=J.Duplex,Ue.exports.Transform=J.Transform,Ue.exports.PassThrough=J.PassThrough,Ue.exports.addAbortSignal=J.addAbortSignal,Ue.exports.finished=J.finished,Ue.exports.destroy=J.destroy,Ue.exports.destroy=te,Ue.exports.pipeline=J.pipeline,Ue.exports.compose=J.compose,Object.defineProperty(J,"promises",{configurable:!0,enumerable:!0,get:()=>A}),Ue.exports.Stream=J.Stream,Ue.exports.default=Ue.exports},4370:(Ue,ge,C)=>{"use strict";const{format:J,inspect:A,AggregateError:te}=C(2656),B=globalThis.AggregateError||te,ee=Symbol("kIsNodeError"),g=["string","function","number","object","Function","Object","boolean","bigint","symbol"],w=/^([A-Z][a-z0-9]*)+$/,G={};function R(oe,ne){if(!oe)throw new G.ERR_INTERNAL_ASSERTION(ne)}function W(oe){let ne="",X=oe.length;const L="-"===oe[0]?1:0;for(;X>=L+4;X-=3)ne=`_${oe.slice(X-3,X)}${ne}`;return`${oe.slice(0,X)}${ne}`}function I(oe,ne,X){X||(X=Error);class L extends X{constructor(...O){super(function de(oe,ne,X){if("function"==typeof ne)return R(ne.length<=X.length,`Code: ${oe}; The provided arguments length (${X.length}) does not match the required ones (${ne.length}).`),ne(...X);const L=(ne.match(/%[dfijoOs]/g)||[]).length;return R(L===X.length,`Code: ${oe}; The provided arguments length (${X.length}) does not match the required ones (${L}).`),0===X.length?ne:J(ne,...X)}(oe,ne,O))}toString(){return`${this.name} [${oe}]: ${this.message}`}}Object.defineProperties(L.prototype,{name:{value:X.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${oe}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),L.prototype.code=oe,L.prototype[ee]=!0,G[oe]=L}function V(oe){return Object.defineProperty(oe,"name",{value:"__node_internal_"+oe.name}),oe}class K extends Error{constructor(ne="The operation was aborted",X=void 0){if(void 0!==X&&"object"!=typeof X)throw new G.ERR_INVALID_ARG_TYPE("options","Object",X);super(ne,X),this.code="ABORT_ERR",this.name="AbortError"}}I("ERR_ASSERTION","%s",Error),I("ERR_INVALID_ARG_TYPE",(oe,ne,X)=>{R("string"==typeof oe,"'name' must be a string"),Array.isArray(ne)||(ne=[ne]);let L="The ";oe.endsWith(" argument")?L+=`${oe} `:L+=`"${oe}" ${oe.includes(".")?"property":"argument"} `,L+="must be ";const _=[],O=[],S=[];for(const j of ne)R("string"==typeof j,"All expected entries have to be of type string"),g.includes(j)?_.push(j.toLowerCase()):w.test(j)?O.push(j):(R("object"!==j,'The value "object" should be written as "Object"'),S.push(j));if(O.length>0){const j=_.indexOf("object");-1!==j&&(_.splice(_,j,1),O.push("Object"))}if(_.length>0){switch(_.length){case 1:L+=`of type ${_[0]}`;break;case 2:L+=`one of type ${_[0]} or ${_[1]}`;break;default:{const j=_.pop();L+=`one of type ${_.join(", ")}, or ${j}`}}(O.length>0||S.length>0)&&(L+=" or ")}if(O.length>0){switch(O.length){case 1:L+=`an instance of ${O[0]}`;break;case 2:L+=`an instance of ${O[0]} or ${O[1]}`;break;default:{const j=O.pop();L+=`an instance of ${O.join(", ")}, or ${j}`}}S.length>0&&(L+=" or ")}switch(S.length){case 0:break;case 1:S[0].toLowerCase()!==S[0]&&(L+="an "),L+=`${S[0]}`;break;case 2:L+=`one of ${S[0]} or ${S[1]}`;break;default:{const j=S.pop();L+=`one of ${S.join(", ")}, or ${j}`}}if(null==X)L+=`. Received ${X}`;else if("function"==typeof X&&X.name)L+=`. Received function ${X.name}`;else if("object"==typeof X){var ue;null!==(ue=X.constructor)&&void 0!==ue&&ue.name?L+=`. Received an instance of ${X.constructor.name}`:L+=`. Received ${A(X,{depth:-1})}`}else{let j=A(X,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),L+=`. Received type ${typeof X} (${j})`}return L},TypeError),I("ERR_INVALID_ARG_VALUE",(oe,ne,X="is invalid")=>{let L=A(ne);return L.length>128&&(L=L.slice(0,128)+"..."),`The ${oe.includes(".")?"property":"argument"} '${oe}' ${X}. Received ${L}`},TypeError),I("ERR_INVALID_RETURN_VALUE",(oe,ne,X)=>{var L;return`Expected ${oe} to be returned from the "${ne}" function but got ${null!=X&&null!==(L=X.constructor)&&void 0!==L&&L.name?`instance of ${X.constructor.name}`:"type "+typeof X}.`},TypeError),I("ERR_MISSING_ARGS",(...oe)=>{let ne;R(oe.length>0,"At least one arg needs to be specified");const X=oe.length;switch(oe=(Array.isArray(oe)?oe:[oe]).map(L=>`"${L}"`).join(" or "),X){case 1:ne+=`The ${oe[0]} argument`;break;case 2:ne+=`The ${oe[0]} and ${oe[1]} arguments`;break;default:{const L=oe.pop();ne+=`The ${oe.join(", ")}, and ${L} arguments`}}return`${ne} must be specified`},TypeError),I("ERR_OUT_OF_RANGE",(oe,ne,X)=>{let L;return R(ne,'Missing "range" argument'),Number.isInteger(X)&&Math.abs(X)>2**32?L=W(String(X)):"bigint"==typeof X?(L=String(X),(X>2n**32n||X<-(2n**32n))&&(L=W(L)),L+="n"):L=A(X),`The value of "${oe}" is out of range. It must be ${ne}. Received ${L}`},RangeError),I("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),I("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),I("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),I("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),I("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),I("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),I("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),I("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),I("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),I("ERR_STREAM_WRITE_AFTER_END","write after end",Error),I("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ue.exports={AbortError:K,aggregateTwoErrors:V(function ae(oe,ne){if(oe&&ne&&oe!==ne){if(Array.isArray(ne.errors))return ne.errors.push(oe),ne;const X=new B([ne,oe],ne.message);return X.code=ne.code,X}return oe||ne}),hideStackFrames:V,codes:G}},6305:Ue=>{"use strict";Ue.exports={ArrayIsArray:ge=>Array.isArray(ge),ArrayPrototypeIncludes:(ge,C)=>ge.includes(C),ArrayPrototypeIndexOf:(ge,C)=>ge.indexOf(C),ArrayPrototypeJoin:(ge,C)=>ge.join(C),ArrayPrototypeMap:(ge,C)=>ge.map(C),ArrayPrototypePop:(ge,C)=>ge.pop(C),ArrayPrototypePush:(ge,C)=>ge.push(C),ArrayPrototypeSlice:(ge,C,J)=>ge.slice(C,J),Error,FunctionPrototypeCall:(ge,C,...J)=>ge.call(C,...J),FunctionPrototypeSymbolHasInstance:(ge,C)=>Function.prototype[Symbol.hasInstance].call(ge,C),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(ge,C)=>Object.defineProperties(ge,C),ObjectDefineProperty:(ge,C,J)=>Object.defineProperty(ge,C,J),ObjectGetOwnPropertyDescriptor:(ge,C)=>Object.getOwnPropertyDescriptor(ge,C),ObjectKeys:ge=>Object.keys(ge),ObjectSetPrototypeOf:(ge,C)=>Object.setPrototypeOf(ge,C),Promise,PromisePrototypeCatch:(ge,C)=>ge.catch(C),PromisePrototypeThen:(ge,C,J)=>ge.then(C,J),PromiseReject:ge=>Promise.reject(ge),ReflectApply:Reflect.apply,RegExpPrototypeTest:(ge,C)=>ge.test(C),SafeSet:Set,String,StringPrototypeSlice:(ge,C,J)=>ge.slice(C,J),StringPrototypeToLowerCase:ge=>ge.toLowerCase(),StringPrototypeToUpperCase:ge=>ge.toUpperCase(),StringPrototypeTrim:ge=>ge.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(ge,C,J)=>ge.set(C,J),Uint8Array}},2656:(Ue,ge,C)=>{"use strict";var J=C(7156).default;const A=C(1657),te=Object.getPrototypeOf(J(function*(){})).constructor,B=globalThis.Blob||A.Blob,ee=typeof B<"u"?function(N){return N instanceof B}:function(N){return!1};class g extends Error{constructor(N){if(!Array.isArray(N))throw new TypeError("Expected input to be an Array, got "+typeof N);let G="";for(let R=0;R<N.length;R++)G+=`    ${N[R].stack}\n`;super(G),this.name="AggregateError",this.errors=N}}Ue.exports={AggregateError:g,kEmptyObject:Object.freeze({}),once(w){let N=!1;return function(...G){N||(N=!0,w.apply(this,G))}},createDeferredPromise:function(){let w,N;return{promise:new Promise((R,W)=>{w=R,N=W}),resolve:w,reject:N}},promisify:w=>new Promise((N,G)=>{w((R,...W)=>R?G(R):N(...W))}),debuglog:()=>function(){},format:(w,...N)=>w.replace(/%([sdifj])/g,function(...[G,R]){const W=N.shift();return"f"===R?W.toFixed(6):"j"===R?JSON.stringify(W):"s"===R&&"object"==typeof W?`${W.constructor!==Object?W.constructor.name:""} {}`.trim():W.toString()}),inspect(w){switch(typeof w){case"string":if(w.includes("'")){if(!w.includes('"'))return`"${w}"`;if(!w.includes("`")&&!w.includes("${"))return`\`${w}\``}return`'${w}'`;case"number":return isNaN(w)?"NaN":Object.is(w,-0)?String(w):w;case"bigint":return`${String(w)}n`;case"boolean":case"undefined":return String(w);case"object":return"{}"}},types:{isAsyncFunction:w=>w instanceof te,isArrayBufferView:w=>ArrayBuffer.isView(w)},isBlob:ee},Ue.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(Ue,ge,C)=>{const{Buffer:J}=C(1657),{ObjectDefineProperty:A,ObjectKeys:te,ReflectApply:B}=C(6305),{promisify:{custom:ee}}=C(2656),{streamReturningOperators:g,promiseReturningOperators:w}=C(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:N}}=C(4370),G=C(7721),{pipeline:R}=C(4514),{destroyer:W}=C(5601),de=C(4618),V=C(16),ae=C(5428),K=Ue.exports=C(900).Stream;K.isDisturbed=ae.isDisturbed,K.isErrored=ae.isErrored,K.isReadable=ae.isReadable,K.Readable=C(8383);for(const X of te(g)){let _=function(...O){if(new.target)throw N();return K.Readable.from(B(L,this,O))};const L=g[X];A(_,"name",{__proto__:null,value:L.name}),A(_,"length",{__proto__:null,value:L.length}),A(K.Readable.prototype,X,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(const X of te(w)){let _=function(...S){if(new.target)throw N();return B(L,this,S)};const L=w[X];A(_,"name",{__proto__:null,value:L.name}),A(_,"length",{__proto__:null,value:L.length}),A(K.Readable.prototype,X,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}K.Writable=C(9764),K.Duplex=C(5931),K.Transform=C(123),K.PassThrough=C(6973),K.pipeline=R;const{addAbortSignal:oe}=C(9987);K.addAbortSignal=oe,K.finished=de,K.destroy=W,K.compose=G,A(K,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>V}),A(R,ee,{__proto__:null,enumerable:!0,get:()=>V.pipeline}),A(de,ee,{__proto__:null,enumerable:!0,get:()=>V.finished}),K.Stream=K,K._isUint8Array=function(L){return L instanceof Uint8Array},K._uint8ArrayToBuffer=function(L){return J.from(L.buffer,L.byteOffset,L.byteLength)}},16:(Ue,ge,C)=>{"use strict";const{ArrayPrototypePop:J,Promise:A}=C(6305),{isIterable:te,isNodeStream:B,isWebStream:ee}=C(5428),{pipelineImpl:g}=C(4514),{finished:w}=C(4618);C(8110),Ue.exports={finished:w,pipeline:function N(...G){return new A((R,W)=>{let de,I;const V=G[G.length-1];if(V&&"object"==typeof V&&!B(V)&&!te(V)&&!ee(V)){const ae=J(G);de=ae.signal,I=ae.end}g(G,(ae,K)=>{ae?W(ae):R(K)},{signal:de,end:I})})}}},1657:(Ue,ge,C)=>{"use strict";const J=C(9919),A=C(2601),te="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ge.Buffer=w,ge.SlowBuffer=function ne(Ie){return+Ie!=Ie&&(Ie=0),w.alloc(+Ie)},ge.INSPECT_MAX_BYTES=50;const B=2147483647;function g(Ie){if(Ie>B)throw new RangeError('The value "'+Ie+'" is invalid for option "size"');const H=new Uint8Array(Ie);return Object.setPrototypeOf(H,w.prototype),H}function w(Ie,H,v){if("number"==typeof Ie){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return W(Ie)}return N(Ie,H,v)}function N(Ie,H,v){if("string"==typeof Ie)return function de(Ie,H){if(("string"!=typeof H||""===H)&&(H="utf8"),!w.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const v=0|X(Ie,H);let re=g(v);const Ge=re.write(Ie,H);return Ge!==v&&(re=re.slice(0,Ge)),re}(Ie,H);if(ArrayBuffer.isView(Ie))return function V(Ie){if(dt(Ie,Uint8Array)){const H=new Uint8Array(Ie);return ae(H.buffer,H.byteOffset,H.byteLength)}return I(Ie)}(Ie);if(null==Ie)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie);if(dt(Ie,ArrayBuffer)||Ie&&dt(Ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(dt(Ie,SharedArrayBuffer)||Ie&&dt(Ie.buffer,SharedArrayBuffer)))return ae(Ie,H,v);if("number"==typeof Ie)throw new TypeError('The "value" argument must not be of type number. Received type number');const re=Ie.valueOf&&Ie.valueOf();if(null!=re&&re!==Ie)return w.from(re,H,v);const Ge=function K(Ie){if(w.isBuffer(Ie)){const H=0|oe(Ie.length),v=g(H);return 0===v.length||Ie.copy(v,0,0,H),v}return void 0!==Ie.length?"number"!=typeof Ie.length||vt(Ie.length)?g(0):I(Ie):"Buffer"===Ie.type&&Array.isArray(Ie.data)?I(Ie.data):void 0}(Ie);if(Ge)return Ge;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Ie[Symbol.toPrimitive])return w.from(Ie[Symbol.toPrimitive]("string"),H,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie)}function G(Ie){if("number"!=typeof Ie)throw new TypeError('"size" argument must be of type number');if(Ie<0)throw new RangeError('The value "'+Ie+'" is invalid for option "size"')}function W(Ie){return G(Ie),g(Ie<0?0:0|oe(Ie))}function I(Ie){const H=Ie.length<0?0:0|oe(Ie.length),v=g(H);for(let re=0;re<H;re+=1)v[re]=255&Ie[re];return v}function ae(Ie,H,v){if(H<0||Ie.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(Ie.byteLength<H+(v||0))throw new RangeError('"length" is outside of buffer bounds');let re;return re=void 0===H&&void 0===v?new Uint8Array(Ie):void 0===v?new Uint8Array(Ie,H):new Uint8Array(Ie,H,v),Object.setPrototypeOf(re,w.prototype),re}function oe(Ie){if(Ie>=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");return 0|Ie}function X(Ie,H){if(w.isBuffer(Ie))return Ie.length;if(ArrayBuffer.isView(Ie)||dt(Ie,ArrayBuffer))return Ie.byteLength;if("string"!=typeof Ie)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ie);const v=Ie.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===v)return 0;let Ge=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return M(Ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return ze(Ie).length;default:if(Ge)return re?-1:M(Ie).length;H=(""+H).toLowerCase(),Ge=!0}}function L(Ie,H,v){let re=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===v||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(H>>>=0))return"";for(Ie||(Ie="utf8");;)switch(Ie){case"hex":return Pe(this,H,v);case"utf8":case"utf-8":return Oe(this,H,v);case"ascii":return we(this,H,v);case"latin1":case"binary":return Ne(this,H,v);case"base64":return Re(this,H,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,H,v);default:if(re)throw new TypeError("Unknown encoding: "+Ie);Ie=(Ie+"").toLowerCase(),re=!0}}function _(Ie,H,v){const re=Ie[H];Ie[H]=Ie[v],Ie[v]=re}function O(Ie,H,v,re,Ge){if(0===Ie.length)return-1;if("string"==typeof v?(re=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),vt(v=+v)&&(v=Ge?0:Ie.length-1),v<0&&(v=Ie.length+v),v>=Ie.length){if(Ge)return-1;v=Ie.length-1}else if(v<0){if(!Ge)return-1;v=0}if("string"==typeof H&&(H=w.from(H,re)),w.isBuffer(H))return 0===H.length?-1:S(Ie,H,v,re,Ge);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?Ge?Uint8Array.prototype.indexOf.call(Ie,H,v):Uint8Array.prototype.lastIndexOf.call(Ie,H,v):S(Ie,[H],v,re,Ge);throw new TypeError("val must be string, number or Buffer")}function S(Ie,H,v,re,Ge){let qn,Ke=1,st=Ie.length,Wt=H.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(Ie.length<2||H.length<2)return-1;Ke=2,st/=2,Wt/=2,v/=2}function an(Yn,In){return 1===Ke?Yn[In]:Yn.readUInt16BE(In*Ke)}if(Ge){let Yn=-1;for(qn=v;qn<st;qn++)if(an(Ie,qn)===an(H,-1===Yn?0:qn-Yn)){if(-1===Yn&&(Yn=qn),qn-Yn+1===Wt)return Yn*Ke}else-1!==Yn&&(qn-=qn-Yn),Yn=-1}else for(v+Wt>st&&(v=st-Wt),qn=v;qn>=0;qn--){let Yn=!0;for(let In=0;In<Wt;In++)if(an(Ie,qn+In)!==an(H,In)){Yn=!1;break}if(Yn)return qn}return-1}function ue(Ie,H,v,re){v=Number(v)||0;const Ge=Ie.length-v;re?(re=Number(re))>Ge&&(re=Ge):re=Ge;const Ke=H.length;let st;for(re>Ke/2&&(re=Ke/2),st=0;st<re;++st){const Wt=parseInt(H.substr(2*st,2),16);if(vt(Wt))return st;Ie[v+st]=Wt}return st}function j(Ie,H,v,re){return Ye(M(H,Ie.length-v),Ie,v,re)}function Te(Ie,H,v,re){return Ye(function Q(Ie){const H=[];for(let v=0;v<Ie.length;++v)H.push(255&Ie.charCodeAt(v));return H}(H),Ie,v,re)}function se(Ie,H,v,re){return Ye(ze(H),Ie,v,re)}function Se(Ie,H,v,re){return Ye(function he(Ie,H){let v,re,Ge;const Ke=[];for(let st=0;st<Ie.length&&!((H-=2)<0);++st)v=Ie.charCodeAt(st),re=v>>8,Ge=v%256,Ke.push(Ge),Ke.push(re);return Ke}(H,Ie.length-v),Ie,v,re)}function Re(Ie,H,v){return J.fromByteArray(0===H&&v===Ie.length?Ie:Ie.slice(H,v))}function Oe(Ie,H,v){v=Math.min(Ie.length,v);const re=[];let Ge=H;for(;Ge<v;){const Ke=Ie[Ge];let st=null,Wt=Ke>239?4:Ke>223?3:Ke>191?2:1;if(Ge+Wt<=v){let an,qn,Yn,In;switch(Wt){case 1:Ke<128&&(st=Ke);break;case 2:an=Ie[Ge+1],128==(192&an)&&(In=(31&Ke)<<6|63&an,In>127&&(st=In));break;case 3:an=Ie[Ge+1],qn=Ie[Ge+2],128==(192&an)&&128==(192&qn)&&(In=(15&Ke)<<12|(63&an)<<6|63&qn,In>2047&&(In<55296||In>57343)&&(st=In));break;case 4:an=Ie[Ge+1],qn=Ie[Ge+2],Yn=Ie[Ge+3],128==(192&an)&&128==(192&qn)&&128==(192&Yn)&&(In=(15&Ke)<<18|(63&an)<<12|(63&qn)<<6|63&Yn,In>65535&&In<1114112&&(st=In))}}null===st?(st=65533,Wt=1):st>65535&&(st-=65536,re.push(st>>>10&1023|55296),st=56320|1023&st),re.push(st),Ge+=Wt}return function Xe(Ie){const H=Ie.length;if(H<=Qe)return String.fromCharCode.apply(String,Ie);let v="",re=0;for(;re<H;)v+=String.fromCharCode.apply(String,Ie.slice(re,re+=Qe));return v}(re)}ge.kMaxLength=B,!(w.TYPED_ARRAY_SUPPORT=function ee(){try{const Ie=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(Ie,H),42===Ie.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}}),Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}}),w.poolSize=8192,w.from=function(Ie,H,v){return N(Ie,H,v)},Object.setPrototypeOf(w.prototype,Uint8Array.prototype),Object.setPrototypeOf(w,Uint8Array),w.alloc=function(Ie,H,v){return function R(Ie,H,v){return G(Ie),Ie<=0?g(Ie):void 0!==H?"string"==typeof v?g(Ie).fill(H,v):g(Ie).fill(H):g(Ie)}(Ie,H,v)},w.allocUnsafe=function(Ie){return W(Ie)},w.allocUnsafeSlow=function(Ie){return W(Ie)},w.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==w.prototype},w.compare=function(H,v){if(dt(H,Uint8Array)&&(H=w.from(H,H.offset,H.byteLength)),dt(v,Uint8Array)&&(v=w.from(v,v.offset,v.byteLength)),!w.isBuffer(H)||!w.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===v)return 0;let re=H.length,Ge=v.length;for(let Ke=0,st=Math.min(re,Ge);Ke<st;++Ke)if(H[Ke]!==v[Ke]){re=H[Ke],Ge=v[Ke];break}return re<Ge?-1:Ge<re?1:0},w.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(H,v){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return w.alloc(0);let re;if(void 0===v)for(v=0,re=0;re<H.length;++re)v+=H[re].length;const Ge=w.allocUnsafe(v);let Ke=0;for(re=0;re<H.length;++re){let st=H[re];if(dt(st,Uint8Array))Ke+st.length>Ge.length?(w.isBuffer(st)||(st=w.from(st)),st.copy(Ge,Ke)):Uint8Array.prototype.set.call(Ge,st,Ke);else{if(!w.isBuffer(st))throw new TypeError('"list" argument must be an Array of Buffers');st.copy(Ge,Ke)}Ke+=st.length}return Ge},w.byteLength=X,w.prototype._isBuffer=!0,w.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<H;v+=2)_(this,v,v+1);return this},w.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<H;v+=4)_(this,v,v+3),_(this,v+1,v+2);return this},w.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<H;v+=8)_(this,v,v+7),_(this,v+1,v+6),_(this,v+2,v+5),_(this,v+3,v+4);return this},w.prototype.toLocaleString=w.prototype.toString=function(){const H=this.length;return 0===H?"":0===arguments.length?Oe(this,0,H):L.apply(this,arguments)},w.prototype.equals=function(H){if(!w.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===w.compare(this,H)},w.prototype.inspect=function(){let H="";const v=ge.INSPECT_MAX_BYTES;return H=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(H+=" ... "),"<Buffer "+H+">"},te&&(w.prototype[te]=w.prototype.inspect),w.prototype.compare=function(H,v,re,Ge,Ke){if(dt(H,Uint8Array)&&(H=w.from(H,H.offset,H.byteLength)),!w.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===v&&(v=0),void 0===re&&(re=H?H.length:0),void 0===Ge&&(Ge=0),void 0===Ke&&(Ke=this.length),v<0||re>H.length||Ge<0||Ke>this.length)throw new RangeError("out of range index");if(Ge>=Ke&&v>=re)return 0;if(Ge>=Ke)return-1;if(v>=re)return 1;if(this===H)return 0;let st=(Ke>>>=0)-(Ge>>>=0),Wt=(re>>>=0)-(v>>>=0);const an=Math.min(st,Wt),qn=this.slice(Ge,Ke),Yn=H.slice(v,re);for(let In=0;In<an;++In)if(qn[In]!==Yn[In]){st=qn[In],Wt=Yn[In];break}return st<Wt?-1:Wt<st?1:0},w.prototype.includes=function(H,v,re){return-1!==this.indexOf(H,v,re)},w.prototype.indexOf=function(H,v,re){return O(this,H,v,re,!0)},w.prototype.lastIndexOf=function(H,v,re){return O(this,H,v,re,!1)},w.prototype.write=function(H,v,re,Ge){if(void 0===v)Ge="utf8",re=this.length,v=0;else if(void 0===re&&"string"==typeof v)Ge=v,re=this.length,v=0;else{if(!isFinite(v))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");v>>>=0,isFinite(re)?(re>>>=0,void 0===Ge&&(Ge="utf8")):(Ge=re,re=void 0)}const Ke=this.length-v;if((void 0===re||re>Ke)&&(re=Ke),H.length>0&&(re<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let st=!1;for(;;)switch(Ge){case"hex":return ue(this,H,v,re);case"utf8":case"utf-8":return j(this,H,v,re);case"ascii":case"latin1":case"binary":return Te(this,H,v,re);case"base64":return se(this,H,v,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,H,v,re);default:if(st)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),st=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Qe=4096;function we(Ie,H,v){let re="";v=Math.min(Ie.length,v);for(let Ge=H;Ge<v;++Ge)re+=String.fromCharCode(127&Ie[Ge]);return re}function Ne(Ie,H,v){let re="";v=Math.min(Ie.length,v);for(let Ge=H;Ge<v;++Ge)re+=String.fromCharCode(Ie[Ge]);return re}function Pe(Ie,H,v){const re=Ie.length;(!H||H<0)&&(H=0),(!v||v<0||v>re)&&(v=re);let Ge="";for(let Ke=H;Ke<v;++Ke)Ge+=mt[Ie[Ke]];return Ge}function Ve(Ie,H,v){const re=Ie.slice(H,v);let Ge="";for(let Ke=0;Ke<re.length-1;Ke+=2)Ge+=String.fromCharCode(re[Ke]+256*re[Ke+1]);return Ge}function fe(Ie,H,v){if(Ie%1!=0||Ie<0)throw new RangeError("offset is not uint");if(Ie+H>v)throw new RangeError("Trying to access beyond buffer length")}function Ee(Ie,H,v,re,Ge,Ke){if(!w.isBuffer(Ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Ge||H<Ke)throw new RangeError('"value" argument is out of bounds');if(v+re>Ie.length)throw new RangeError("Index out of range")}function $e(Ie,H,v,re,Ge){et(H,re,Ge,Ie,v,7);let Ke=Number(H&BigInt(4294967295));Ie[v++]=Ke,Ke>>=8,Ie[v++]=Ke,Ke>>=8,Ie[v++]=Ke,Ke>>=8,Ie[v++]=Ke;let st=Number(H>>BigInt(32)&BigInt(4294967295));return Ie[v++]=st,st>>=8,Ie[v++]=st,st>>=8,Ie[v++]=st,st>>=8,Ie[v++]=st,v}function ot(Ie,H,v,re,Ge){et(H,re,Ge,Ie,v,7);let Ke=Number(H&BigInt(4294967295));Ie[v+7]=Ke,Ke>>=8,Ie[v+6]=Ke,Ke>>=8,Ie[v+5]=Ke,Ke>>=8,Ie[v+4]=Ke;let st=Number(H>>BigInt(32)&BigInt(4294967295));return Ie[v+3]=st,st>>=8,Ie[v+2]=st,st>>=8,Ie[v+1]=st,st>>=8,Ie[v]=st,v+8}function Je(Ie,H,v,re,Ge,Ke){if(v+re>Ie.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function le(Ie,H,v,re,Ge){return H=+H,v>>>=0,Ge||Je(Ie,0,v,4),A.write(Ie,H,v,re,23,4),v+4}function P(Ie,H,v,re,Ge){return H=+H,v>>>=0,Ge||Je(Ie,0,v,8),A.write(Ie,H,v,re,52,8),v+8}w.prototype.slice=function(H,v){const re=this.length;(H=~~H)<0?(H+=re)<0&&(H=0):H>re&&(H=re),(v=void 0===v?re:~~v)<0?(v+=re)<0&&(v=0):v>re&&(v=re),v<H&&(v=H);const Ge=this.subarray(H,v);return Object.setPrototypeOf(Ge,w.prototype),Ge},w.prototype.readUintLE=w.prototype.readUIntLE=function(H,v,re){H>>>=0,v>>>=0,re||fe(H,v,this.length);let Ge=this[H],Ke=1,st=0;for(;++st<v&&(Ke*=256);)Ge+=this[H+st]*Ke;return Ge},w.prototype.readUintBE=w.prototype.readUIntBE=function(H,v,re){H>>>=0,v>>>=0,re||fe(H,v,this.length);let Ge=this[H+--v],Ke=1;for(;v>0&&(Ke*=256);)Ge+=this[H+--v]*Ke;return Ge},w.prototype.readUint8=w.prototype.readUInt8=function(H,v){return H>>>=0,v||fe(H,1,this.length),this[H]},w.prototype.readUint16LE=w.prototype.readUInt16LE=function(H,v){return H>>>=0,v||fe(H,2,this.length),this[H]|this[H+1]<<8},w.prototype.readUint16BE=w.prototype.readUInt16BE=function(H,v){return H>>>=0,v||fe(H,2,this.length),this[H]<<8|this[H+1]},w.prototype.readUint32LE=w.prototype.readUInt32LE=function(H,v){return H>>>=0,v||fe(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},w.prototype.readUint32BE=w.prototype.readUInt32BE=function(H,v){return H>>>=0,v||fe(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},w.prototype.readBigUInt64LE=zt(function(H){ce(H>>>=0,"offset");const v=this[H],re=this[H+7];(void 0===v||void 0===re)&&Z(H,this.length-8);const Ge=v+256*this[++H]+65536*this[++H]+this[++H]*2**24,Ke=this[++H]+256*this[++H]+65536*this[++H]+re*2**24;return BigInt(Ge)+(BigInt(Ke)<<BigInt(32))}),w.prototype.readBigUInt64BE=zt(function(H){ce(H>>>=0,"offset");const v=this[H],re=this[H+7];(void 0===v||void 0===re)&&Z(H,this.length-8);const Ge=v*2**24+65536*this[++H]+256*this[++H]+this[++H],Ke=this[++H]*2**24+65536*this[++H]+256*this[++H]+re;return(BigInt(Ge)<<BigInt(32))+BigInt(Ke)}),w.prototype.readIntLE=function(H,v,re){H>>>=0,v>>>=0,re||fe(H,v,this.length);let Ge=this[H],Ke=1,st=0;for(;++st<v&&(Ke*=256);)Ge+=this[H+st]*Ke;return Ke*=128,Ge>=Ke&&(Ge-=Math.pow(2,8*v)),Ge},w.prototype.readIntBE=function(H,v,re){H>>>=0,v>>>=0,re||fe(H,v,this.length);let Ge=v,Ke=1,st=this[H+--Ge];for(;Ge>0&&(Ke*=256);)st+=this[H+--Ge]*Ke;return Ke*=128,st>=Ke&&(st-=Math.pow(2,8*v)),st},w.prototype.readInt8=function(H,v){return H>>>=0,v||fe(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},w.prototype.readInt16LE=function(H,v){H>>>=0,v||fe(H,2,this.length);const re=this[H]|this[H+1]<<8;return 32768&re?4294901760|re:re},w.prototype.readInt16BE=function(H,v){H>>>=0,v||fe(H,2,this.length);const re=this[H+1]|this[H]<<8;return 32768&re?4294901760|re:re},w.prototype.readInt32LE=function(H,v){return H>>>=0,v||fe(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},w.prototype.readInt32BE=function(H,v){return H>>>=0,v||fe(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},w.prototype.readBigInt64LE=zt(function(H){ce(H>>>=0,"offset");const v=this[H],re=this[H+7];return(void 0===v||void 0===re)&&Z(H,this.length-8),(BigInt(this[H+4]+256*this[H+5]+65536*this[H+6]+(re<<24))<<BigInt(32))+BigInt(v+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),w.prototype.readBigInt64BE=zt(function(H){ce(H>>>=0,"offset");const v=this[H],re=this[H+7];(void 0===v||void 0===re)&&Z(H,this.length-8);const Ge=(v<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+re)}),w.prototype.readFloatLE=function(H,v){return H>>>=0,v||fe(H,4,this.length),A.read(this,H,!0,23,4)},w.prototype.readFloatBE=function(H,v){return H>>>=0,v||fe(H,4,this.length),A.read(this,H,!1,23,4)},w.prototype.readDoubleLE=function(H,v){return H>>>=0,v||fe(H,8,this.length),A.read(this,H,!0,52,8)},w.prototype.readDoubleBE=function(H,v){return H>>>=0,v||fe(H,8,this.length),A.read(this,H,!1,52,8)},w.prototype.writeUintLE=w.prototype.writeUIntLE=function(H,v,re,Ge){H=+H,v>>>=0,re>>>=0,Ge||Ee(this,H,v,re,Math.pow(2,8*re)-1,0);let Ke=1,st=0;for(this[v]=255&H;++st<re&&(Ke*=256);)this[v+st]=H/Ke&255;return v+re},w.prototype.writeUintBE=w.prototype.writeUIntBE=function(H,v,re,Ge){H=+H,v>>>=0,re>>>=0,Ge||Ee(this,H,v,re,Math.pow(2,8*re)-1,0);let Ke=re-1,st=1;for(this[v+Ke]=255&H;--Ke>=0&&(st*=256);)this[v+Ke]=H/st&255;return v+re},w.prototype.writeUint8=w.prototype.writeUInt8=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,1,255,0),this[v]=255&H,v+1},w.prototype.writeUint16LE=w.prototype.writeUInt16LE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,2,65535,0),this[v]=255&H,this[v+1]=H>>>8,v+2},w.prototype.writeUint16BE=w.prototype.writeUInt16BE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,2,65535,0),this[v]=H>>>8,this[v+1]=255&H,v+2},w.prototype.writeUint32LE=w.prototype.writeUInt32LE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,4,4294967295,0),this[v+3]=H>>>24,this[v+2]=H>>>16,this[v+1]=H>>>8,this[v]=255&H,v+4},w.prototype.writeUint32BE=w.prototype.writeUInt32BE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,4,4294967295,0),this[v]=H>>>24,this[v+1]=H>>>16,this[v+2]=H>>>8,this[v+3]=255&H,v+4},w.prototype.writeBigUInt64LE=zt(function(H,v=0){return $e(this,H,v,BigInt(0),BigInt("0xffffffffffffffff"))}),w.prototype.writeBigUInt64BE=zt(function(H,v=0){return ot(this,H,v,BigInt(0),BigInt("0xffffffffffffffff"))}),w.prototype.writeIntLE=function(H,v,re,Ge){if(H=+H,v>>>=0,!Ge){const an=Math.pow(2,8*re-1);Ee(this,H,v,re,an-1,-an)}let Ke=0,st=1,Wt=0;for(this[v]=255&H;++Ke<re&&(st*=256);)H<0&&0===Wt&&0!==this[v+Ke-1]&&(Wt=1),this[v+Ke]=(H/st>>0)-Wt&255;return v+re},w.prototype.writeIntBE=function(H,v,re,Ge){if(H=+H,v>>>=0,!Ge){const an=Math.pow(2,8*re-1);Ee(this,H,v,re,an-1,-an)}let Ke=re-1,st=1,Wt=0;for(this[v+Ke]=255&H;--Ke>=0&&(st*=256);)H<0&&0===Wt&&0!==this[v+Ke+1]&&(Wt=1),this[v+Ke]=(H/st>>0)-Wt&255;return v+re},w.prototype.writeInt8=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,1,127,-128),H<0&&(H=255+H+1),this[v]=255&H,v+1},w.prototype.writeInt16LE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,2,32767,-32768),this[v]=255&H,this[v+1]=H>>>8,v+2},w.prototype.writeInt16BE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,2,32767,-32768),this[v]=H>>>8,this[v+1]=255&H,v+2},w.prototype.writeInt32LE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,4,2147483647,-2147483648),this[v]=255&H,this[v+1]=H>>>8,this[v+2]=H>>>16,this[v+3]=H>>>24,v+4},w.prototype.writeInt32BE=function(H,v,re){return H=+H,v>>>=0,re||Ee(this,H,v,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[v]=H>>>24,this[v+1]=H>>>16,this[v+2]=H>>>8,this[v+3]=255&H,v+4},w.prototype.writeBigInt64LE=zt(function(H,v=0){return $e(this,H,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),w.prototype.writeBigInt64BE=zt(function(H,v=0){return ot(this,H,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),w.prototype.writeFloatLE=function(H,v,re){return le(this,H,v,!0,re)},w.prototype.writeFloatBE=function(H,v,re){return le(this,H,v,!1,re)},w.prototype.writeDoubleLE=function(H,v,re){return P(this,H,v,!0,re)},w.prototype.writeDoubleBE=function(H,v,re){return P(this,H,v,!1,re)},w.prototype.copy=function(H,v,re,Ge){if(!w.isBuffer(H))throw new TypeError("argument should be a Buffer");if(re||(re=0),!Ge&&0!==Ge&&(Ge=this.length),v>=H.length&&(v=H.length),v||(v=0),Ge>0&&Ge<re&&(Ge=re),Ge===re||0===H.length||0===this.length)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(re<0||re>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),H.length-v<Ge-re&&(Ge=H.length-v+re);const Ke=Ge-re;return this===H&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(v,re,Ge):Uint8Array.prototype.set.call(H,this.subarray(re,Ge),v),Ke},w.prototype.fill=function(H,v,re,Ge){if("string"==typeof H){if("string"==typeof v?(Ge=v,v=0,re=this.length):"string"==typeof re&&(Ge=re,re=this.length),void 0!==Ge&&"string"!=typeof Ge)throw new TypeError("encoding must be a string");if("string"==typeof Ge&&!w.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(1===H.length){const st=H.charCodeAt(0);("utf8"===Ge&&st<128||"latin1"===Ge)&&(H=st)}}else"number"==typeof H?H&=255:"boolean"==typeof H&&(H=Number(H));if(v<0||this.length<v||this.length<re)throw new RangeError("Out of range index");if(re<=v)return this;let Ke;if(v>>>=0,re=void 0===re?this.length:re>>>0,H||(H=0),"number"==typeof H)for(Ke=v;Ke<re;++Ke)this[Ke]=H;else{const st=w.isBuffer(H)?H:w.from(H,Ge),Wt=st.length;if(0===Wt)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Ke=0;Ke<re-v;++Ke)this[Ke+v]=st[Ke%Wt]}return this};const E={};function ie(Ie,H,v){E[Ie]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ie}]`,delete this.name}get code(){return Ie}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${Ie}]: ${this.message}`}}}function z(Ie){let H="",v=Ie.length;const re="-"===Ie[0]?1:0;for(;v>=re+4;v-=3)H=`_${Ie.slice(v-3,v)}${H}`;return`${Ie.slice(0,v)}${H}`}function et(Ie,H,v,re,Ge,Ke){if(Ie>v||Ie<H){const st="bigint"==typeof H?"n":"";let Wt;throw Wt=Ke>3?0===H||H===BigInt(0)?`>= 0${st} and < 2${st} ** ${8*(Ke+1)}${st}`:`>= -(2${st} ** ${8*(Ke+1)-1}${st}) and < 2 ** ${8*(Ke+1)-1}${st}`:`>= ${H}${st} and <= ${v}${st}`,new E.ERR_OUT_OF_RANGE("value",Wt,Ie)}!function Ae(Ie,H,v){ce(H,"offset"),(void 0===Ie[H]||void 0===Ie[H+v])&&Z(H,Ie.length-(v+1))}(re,Ge,Ke)}function ce(Ie,H){if("number"!=typeof Ie)throw new E.ERR_INVALID_ARG_TYPE(H,"number",Ie)}function Z(Ie,H,v){throw Math.floor(Ie)!==Ie?(ce(Ie,v),new E.ERR_OUT_OF_RANGE(v||"offset","an integer",Ie)):H<0?new E.ERR_BUFFER_OUT_OF_BOUNDS:new E.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${H}`,Ie)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(Ie){return Ie?`${Ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(Ie,H){return`The "${Ie}" argument must be of type number. Received type ${typeof H}`},TypeError),ie("ERR_OUT_OF_RANGE",function(Ie,H,v){let re=`The value of "${Ie}" is out of range.`,Ge=v;return Number.isInteger(v)&&Math.abs(v)>2**32?Ge=z(String(v)):"bigint"==typeof v&&(Ge=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Ge=z(Ge)),Ge+="n"),re+=` It must be ${H}. Received ${Ge}`,re},RangeError);const F=/[^+/0-9A-Za-z-_]/g;function M(Ie,H){let v;H=H||1/0;const re=Ie.length;let Ge=null;const Ke=[];for(let st=0;st<re;++st){if(v=Ie.charCodeAt(st),v>55295&&v<57344){if(!Ge){if(v>56319){(H-=3)>-1&&Ke.push(239,191,189);continue}if(st+1===re){(H-=3)>-1&&Ke.push(239,191,189);continue}Ge=v;continue}if(v<56320){(H-=3)>-1&&Ke.push(239,191,189),Ge=v;continue}v=65536+(Ge-55296<<10|v-56320)}else Ge&&(H-=3)>-1&&Ke.push(239,191,189);if(Ge=null,v<128){if((H-=1)<0)break;Ke.push(v)}else if(v<2048){if((H-=2)<0)break;Ke.push(v>>6|192,63&v|128)}else if(v<65536){if((H-=3)<0)break;Ke.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;Ke.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return Ke}function ze(Ie){return J.toByteArray(function x(Ie){if((Ie=(Ie=Ie.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;Ie.length%4!=0;)Ie+="=";return Ie}(Ie))}function Ye(Ie,H,v,re){let Ge;for(Ge=0;Ge<re&&!(Ge+v>=H.length||Ge>=Ie.length);++Ge)H[Ge+v]=Ie[Ge];return Ge}function dt(Ie,H){return Ie instanceof H||null!=Ie&&null!=Ie.constructor&&null!=Ie.constructor.name&&Ie.constructor.name===H.name}function vt(Ie){return Ie!=Ie}const mt=function(){const Ie="0123456789abcdef",H=new Array(256);for(let v=0;v<16;++v){const re=16*v;for(let Ge=0;Ge<16;++Ge)H[re+Ge]=Ie[v]+Ie[Ge]}return H}();function zt(Ie){return typeof BigInt>"u"?rn:Ie}function rn(){throw new Error("BigInt not supported")}},7054:function(Ue,ge,C){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,B,ee,g){void 0===g&&(g=ee),Object.defineProperty(te,g,{enumerable:!0,get:function(){return B[ee]}})}:function(te,B,ee,g){void 0===g&&(g=ee),te[g]=B[ee]}),A=this&&this.__exportStar||function(te,B){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(B,ee)&&J(B,te,ee)};Object.defineProperty(ge,"__esModule",{value:!0}),A(C(361),ge)},361:(Ue,ge)=>{"use strict";function J(B){const ee=[];let g=0;for(;g<B.length;)switch(B[g]){case"/":if("."===B[g+1])if("."===B[g+2]){if(!te(B[g+3])){ee.push([]),g++;break}ee.pop(),B[g+3]||ee.push([]),g+=3}else{if(!te(B[g+2])){ee.push([]),g++;break}B[g+2]||ee.push([]),g+=2}else ee.push([]),g++;break;case"#":case"?":ee.length||ee.push([]),ee[ee.length-1].push(B.substr(g)),g=B.length;break;default:ee.length||ee.push([]),ee[ee.length-1].push(B[g]),g++}return"/"+ee.map(w=>w.join("")).join("/")}function A(B,ee){let g=ee+1;ee>=0?"/"===B[ee+1]&&"/"===B[ee+2]&&(g=ee+3):"/"===B[0]&&"/"===B[1]&&(g=2);const w=B.indexOf("/",g);return w<0?B:B.substr(0,w)+J(B.substr(w))}function te(B){return!B||"#"===B||"?"===B||"/"===B}Object.defineProperty(ge,"__esModule",{value:!0}),ge.removeDotSegmentsOfPath=ge.removeDotSegments=ge.resolve=void 0,ge.resolve=function C(B,ee){const g=(ee=ee||"").indexOf("#");if(g>0&&(ee=ee.substr(0,g)),!B.length){if(ee.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${ee}' for value '${B}'`);return ee}if(B.startsWith("?")){const I=ee.indexOf("?");return I>0&&(ee=ee.substr(0,I)),ee+B}if(B.startsWith("#"))return ee+B;if(!ee.length){const I=B.indexOf(":");if(I<0)throw new Error(`Found invalid relative IRI '${B}' for a missing baseIRI`);return A(B,I)}const w=B.indexOf(":");if(w>=0)return A(B,w);const N=ee.indexOf(":");if(N<0)throw new Error(`Found invalid baseIRI '${ee}' for value '${B}'`);const G=ee.substr(0,N+1);if(0===B.indexOf("//"))return G+A(B,w);let R;if(ee.indexOf("//",N)===N+1){if(R=ee.indexOf("/",N+3),R<0)return ee.length>N+3?ee+"/"+A(B,w):G+A(B,w)}else if(R=ee.indexOf("/",N+1),R<0)return G+A(B,w);if(0===B.indexOf("/"))return ee.substr(0,R)+J(B);let W=ee.substr(R);const de=W.lastIndexOf("/");return de>=0&&de<W.length-1&&(W=W.substr(0,de+1),"."===B[0]&&"."!==B[1]&&"/"!==B[1]&&B[2]&&(B=B.substr(1))),B=J(B=W+B),ee.substr(0,R)+B},ge.removeDotSegments=J,ge.removeDotSegmentsOfPath=A},9528:(Ue,ge,C)=>{!function(J){J.parser=function(P,E){return new te(P,E)},J.SAXParser=te,J.SAXStream=R,J.createStream=function G(P,E){return new R(P,E)},J.MAX_BUFFER_LENGTH=65536;var w,A=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function te(P,E){if(!(this instanceof te))return new te(P,E);var ie=this;(function ee(P){for(var E=0,ie=A.length;E<ie;E++)P[A[E]]=""})(ie),ie.q=ie.c="",ie.bufferCheckPosition=J.MAX_BUFFER_LENGTH,ie.opt=E||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!P,ie.noscript=!(!P&&!ie.opt.noscript),ie.state=j.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=Object.create(ie.strictEntities?J.XML_ENTITIES:J.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(ae)),ie.trackPosition=!1!==ie.opt.position,ie.trackPosition&&(ie.position=ie.line=ie.column=0),se(ie,"onready")}J.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(P){function E(){}return E.prototype=P,new E}),Object.keys||(Object.keys=function(P){var E=[];for(var ie in P)P.hasOwnProperty(ie)&&E.push(ie);return E}),te.prototype={end:function(){Xe(this)},write:function le(P){var E=this;if(this.error)throw this.error;if(E.closed)return Qe(E,"Cannot write after close. Assign an onready handler.");if(null===P)return Xe(E);"object"==typeof P&&(P=P.toString());for(var ie=0,z="";z=Je(P,ie++),E.c=z,z;)switch(E.trackPosition&&(E.position++,"\n"===z?(E.line++,E.column=0):E.column++),E.state){case j.BEGIN:if(E.state=j.BEGIN_WHITESPACE,"\ufeff"===z)continue;ot(E,z);continue;case j.BEGIN_WHITESPACE:ot(E,z);continue;case j.TEXT:if(E.sawRoot&&!E.closedRoot){for(var Ae=ie-1;z&&"<"!==z&&"&"!==z;)(z=Je(P,ie++))&&E.trackPosition&&(E.position++,"\n"===z?(E.line++,E.column=0):E.column++);E.textNode+=P.substring(Ae,ie-1)}"<"!==z||E.sawRoot&&E.closedRoot&&!E.strict?(!L(z)&&(!E.sawRoot||E.closedRoot)&&we(E,"Text data outside of root node."),"&"===z?E.state=j.TEXT_ENTITY:E.textNode+=z):(E.state=j.OPEN_WAKA,E.startTagPosition=E.position);continue;case j.SCRIPT:"<"===z?E.state=j.SCRIPT_ENDING:E.script+=z;continue;case j.SCRIPT_ENDING:"/"===z?E.state=j.CLOSE_TAG:(E.script+="<"+z,E.state=j.SCRIPT);continue;case j.OPEN_WAKA:"!"===z?(E.state=j.SGML_DECL,E.sgmlDecl=""):L(z)||(S(K,z)?(E.state=j.OPEN_TAG,E.tagName=z):"/"===z?(E.state=j.CLOSE_TAG,E.tagName=""):"?"===z?(E.state=j.PROC_INST,E.procInstName=E.procInstBody=""):(we(E,"Unencoded <"),E.startTagPosition+1<E.position&&(z=new Array(E.position-E.startTagPosition).join(" ")+z),E.textNode+="<"+z,E.state=j.TEXT));continue;case j.SGML_DECL:(E.sgmlDecl+z).toUpperCase()===W?(Se(E,"onopencdata"),E.state=j.CDATA,E.sgmlDecl="",E.cdata=""):E.sgmlDecl+z==="--"?(E.state=j.COMMENT,E.comment="",E.sgmlDecl=""):(E.sgmlDecl+z).toUpperCase()===de?(E.state=j.DOCTYPE,(E.doctype||E.sawRoot)&&we(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):">"===z?(Se(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=j.TEXT):(_(z)&&(E.state=j.SGML_DECL_QUOTED),E.sgmlDecl+=z);continue;case j.SGML_DECL_QUOTED:z===E.q&&(E.state=j.SGML_DECL,E.q=""),E.sgmlDecl+=z;continue;case j.DOCTYPE:">"===z?(E.state=j.TEXT,Se(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=z,"["===z?E.state=j.DOCTYPE_DTD:_(z)&&(E.state=j.DOCTYPE_QUOTED,E.q=z));continue;case j.DOCTYPE_QUOTED:E.doctype+=z,z===E.q&&(E.q="",E.state=j.DOCTYPE);continue;case j.DOCTYPE_DTD:E.doctype+=z,"]"===z?E.state=j.DOCTYPE:_(z)&&(E.state=j.DOCTYPE_DTD_QUOTED,E.q=z);continue;case j.DOCTYPE_DTD_QUOTED:E.doctype+=z,z===E.q&&(E.state=j.DOCTYPE_DTD,E.q="");continue;case j.COMMENT:"-"===z?E.state=j.COMMENT_ENDING:E.comment+=z;continue;case j.COMMENT_ENDING:"-"===z?(E.state=j.COMMENT_ENDED,E.comment=Oe(E.opt,E.comment),E.comment&&Se(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+z,E.state=j.COMMENT);continue;case j.COMMENT_ENDED:">"!==z?(we(E,"Malformed comment"),E.comment+="--"+z,E.state=j.COMMENT):E.state=j.TEXT;continue;case j.CDATA:"]"===z?E.state=j.CDATA_ENDING:E.cdata+=z;continue;case j.CDATA_ENDING:"]"===z?E.state=j.CDATA_ENDING_2:(E.cdata+="]"+z,E.state=j.CDATA);continue;case j.CDATA_ENDING_2:">"===z?(E.cdata&&Se(E,"oncdata",E.cdata),Se(E,"onclosecdata"),E.cdata="",E.state=j.TEXT):"]"===z?E.cdata+="]":(E.cdata+="]]"+z,E.state=j.CDATA);continue;case j.PROC_INST:"?"===z?E.state=j.PROC_INST_ENDING:L(z)?E.state=j.PROC_INST_BODY:E.procInstName+=z;continue;case j.PROC_INST_BODY:if(!E.procInstBody&&L(z))continue;"?"===z?E.state=j.PROC_INST_ENDING:E.procInstBody+=z;continue;case j.PROC_INST_ENDING:">"===z?(Se(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=j.TEXT):(E.procInstBody+="?"+z,E.state=j.PROC_INST_BODY);continue;case j.OPEN_TAG:S(oe,z)?E.tagName+=z:(Ne(E),">"===z?fe(E):"/"===z?E.state=j.OPEN_TAG_SLASH:(L(z)||we(E,"Invalid character in tag name"),E.state=j.ATTRIB));continue;case j.OPEN_TAG_SLASH:">"===z?(fe(E,!0),Ee(E)):(we(E,"Forward-slash in opening tag not followed by >"),E.state=j.ATTRIB);continue;case j.ATTRIB:if(L(z))continue;">"===z?fe(E):"/"===z?E.state=j.OPEN_TAG_SLASH:S(K,z)?(E.attribName=z,E.attribValue="",E.state=j.ATTRIB_NAME):we(E,"Invalid attribute name");continue;case j.ATTRIB_NAME:"="===z?E.state=j.ATTRIB_VALUE:">"===z?(we(E,"Attribute without value"),E.attribValue=E.attribName,Ve(E),fe(E)):L(z)?E.state=j.ATTRIB_NAME_SAW_WHITE:S(oe,z)?E.attribName+=z:we(E,"Invalid attribute name");continue;case j.ATTRIB_NAME_SAW_WHITE:if("="===z)E.state=j.ATTRIB_VALUE;else{if(L(z))continue;we(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",Se(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",">"===z?fe(E):S(K,z)?(E.attribName=z,E.state=j.ATTRIB_NAME):(we(E,"Invalid attribute name"),E.state=j.ATTRIB)}continue;case j.ATTRIB_VALUE:if(L(z))continue;_(z)?(E.q=z,E.state=j.ATTRIB_VALUE_QUOTED):(we(E,"Unquoted attribute value"),E.state=j.ATTRIB_VALUE_UNQUOTED,E.attribValue=z);continue;case j.ATTRIB_VALUE_QUOTED:if(z!==E.q){"&"===z?E.state=j.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=z;continue}Ve(E),E.q="",E.state=j.ATTRIB_VALUE_CLOSED;continue;case j.ATTRIB_VALUE_CLOSED:L(z)?E.state=j.ATTRIB:">"===z?fe(E):"/"===z?E.state=j.OPEN_TAG_SLASH:S(K,z)?(we(E,"No whitespace between attributes"),E.attribName=z,E.attribValue="",E.state=j.ATTRIB_NAME):we(E,"Invalid attribute name");continue;case j.ATTRIB_VALUE_UNQUOTED:if(!O(z)){"&"===z?E.state=j.ATTRIB_VALUE_ENTITY_U:E.attribValue+=z;continue}Ve(E),">"===z?fe(E):E.state=j.ATTRIB;continue;case j.CLOSE_TAG:if(E.tagName)">"===z?Ee(E):S(oe,z)?E.tagName+=z:E.script?(E.script+="</"+E.tagName,E.tagName="",E.state=j.SCRIPT):(L(z)||we(E,"Invalid tagname in closing tag"),E.state=j.CLOSE_TAG_SAW_WHITE);else{if(L(z))continue;ue(K,z)?E.script?(E.script+="</"+z,E.state=j.SCRIPT):we(E,"Invalid tagname in closing tag."):E.tagName=z}continue;case j.CLOSE_TAG_SAW_WHITE:if(L(z))continue;">"===z?Ee(E):we(E,"Invalid characters in closing tag");continue;case j.TEXT_ENTITY:case j.ATTRIB_VALUE_ENTITY_Q:case j.ATTRIB_VALUE_ENTITY_U:var ce,Z;switch(E.state){case j.TEXT_ENTITY:ce=j.TEXT,Z="textNode";break;case j.ATTRIB_VALUE_ENTITY_Q:ce=j.ATTRIB_VALUE_QUOTED,Z="attribValue";break;case j.ATTRIB_VALUE_ENTITY_U:ce=j.ATTRIB_VALUE_UNQUOTED,Z="attribValue"}";"===z?(E[Z]+=$e(E),E.entity="",E.state=ce):S(E.entity.length?X:ne,z)?E.entity+=z:(we(E,"Invalid character in entity name"),E[Z]+="&"+E.entity+z,E.entity="",E.state=ce);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&function B(P){for(var E=Math.max(J.MAX_BUFFER_LENGTH,10),ie=0,z=0,Ae=A.length;z<Ae;z++){var et=P[A[z]].length;if(et>E)switch(A[z]){case"textNode":Re(P);break;case"cdata":Se(P,"oncdata",P.cdata),P.cdata="";break;case"script":Se(P,"onscript",P.script),P.script="";break;default:Qe(P,"Max buffer length exceeded: "+A[z])}ie=Math.max(ie,et)}P.bufferCheckPosition=J.MAX_BUFFER_LENGTH-ie+P.position}(E),E},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function g(P){Re(P),""!==P.cdata&&(Se(P,"oncdata",P.cdata),P.cdata=""),""!==P.script&&(Se(P,"onscript",P.script),P.script="")}(this)}};try{w=C(1793).Stream}catch{w=function(){}}var N=J.EVENTS.filter(function(P){return"error"!==P&&"end"!==P});function R(P,E){if(!(this instanceof R))return new R(P,E);w.apply(this),this._parser=new te(P,E),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(z){ie.emit("error",z),ie._parser.error=null},this._decoder=null,N.forEach(function(z){Object.defineProperty(ie,"on"+z,{get:function(){return ie._parser["on"+z]},set:function(Ae){if(!Ae)return ie.removeAllListeners(z),ie._parser["on"+z]=Ae,Ae;ie.on(z,Ae)},enumerable:!0,configurable:!1})})}(R.prototype=Object.create(w.prototype,{constructor:{value:R}})).write=function(P){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(P)){if(!this._decoder){var E=C(2024).StringDecoder;this._decoder=new E("utf8")}P=this._decoder.write(P)}return this._parser.write(P.toString()),this.emit("data",P),!0},R.prototype.end=function(P){return P&&P.length&&this.write(P),this._parser.end(),!0},R.prototype.on=function(P,E){var ie=this;return!ie._parser["on"+P]&&-1!==N.indexOf(P)&&(ie._parser["on"+P]=function(){var z=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);z.splice(0,0,P),ie.emit.apply(ie,z)}),w.prototype.on.call(ie,P,E)};var W="[CDATA[",de="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",V="http://www.w3.org/2000/xmlns/",ae={xml:I,xmlns:V},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,X=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function L(P){return" "===P||"\n"===P||"\r"===P||"\t"===P}function _(P){return'"'===P||"'"===P}function O(P){return">"===P||L(P)}function S(P,E){return P.test(E)}function ue(P,E){return!S(P,E)}var P,E,ie,j=0;for(var Te in J.STATE={BEGIN:j++,BEGIN_WHITESPACE:j++,TEXT:j++,TEXT_ENTITY:j++,OPEN_WAKA:j++,SGML_DECL:j++,SGML_DECL_QUOTED:j++,DOCTYPE:j++,DOCTYPE_QUOTED:j++,DOCTYPE_DTD:j++,DOCTYPE_DTD_QUOTED:j++,COMMENT_STARTING:j++,COMMENT:j++,COMMENT_ENDING:j++,COMMENT_ENDED:j++,CDATA:j++,CDATA_ENDING:j++,CDATA_ENDING_2:j++,PROC_INST:j++,PROC_INST_BODY:j++,PROC_INST_ENDING:j++,OPEN_TAG:j++,OPEN_TAG_SLASH:j++,ATTRIB:j++,ATTRIB_NAME:j++,ATTRIB_NAME_SAW_WHITE:j++,ATTRIB_VALUE:j++,ATTRIB_VALUE_QUOTED:j++,ATTRIB_VALUE_CLOSED:j++,ATTRIB_VALUE_UNQUOTED:j++,ATTRIB_VALUE_ENTITY_Q:j++,ATTRIB_VALUE_ENTITY_U:j++,CLOSE_TAG:j++,CLOSE_TAG_SAW_WHITE:j++,SCRIPT:j++,SCRIPT_ENDING:j++},J.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},J.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(J.ENTITIES).forEach(function(P){var E=J.ENTITIES[P],ie="number"==typeof E?String.fromCharCode(E):E;J.ENTITIES[P]=ie}),J.STATE)J.STATE[J.STATE[Te]]=Te;function se(P,E,ie){P[E]&&P[E](ie)}function Se(P,E,ie){P.textNode&&Re(P),se(P,E,ie)}function Re(P){P.textNode=Oe(P.opt,P.textNode),P.textNode&&se(P,"ontext",P.textNode),P.textNode=""}function Oe(P,E){return P.trim&&(E=E.trim()),P.normalize&&(E=E.replace(/\s+/g," ")),E}function Qe(P,E){return Re(P),P.trackPosition&&(E+="\nLine: "+P.line+"\nColumn: "+P.column+"\nChar: "+P.c),E=new Error(E),P.error=E,se(P,"onerror",E),P}function Xe(P){return P.sawRoot&&!P.closedRoot&&we(P,"Unclosed root tag"),P.state!==j.BEGIN&&P.state!==j.BEGIN_WHITESPACE&&P.state!==j.TEXT&&Qe(P,"Unexpected end"),Re(P),P.c="",P.closed=!0,se(P,"onend"),te.call(P,P.strict,P.opt),P}function we(P,E){if("object"!=typeof P||!(P instanceof te))throw new Error("bad call to strictFail");P.strict&&Qe(P,E)}function Ne(P){P.strict||(P.tagName=P.tagName[P.looseCase]());var E=P.tags[P.tags.length-1]||P,ie=P.tag={name:P.tagName,attributes:{}};P.opt.xmlns&&(ie.ns=E.ns),P.attribList.length=0,Se(P,"onopentagstart",ie)}function Pe(P,E){var z=P.indexOf(":")<0?["",P]:P.split(":"),Ae=z[0],et=z[1];return E&&"xmlns"===P&&(Ae="xmlns",et=""),{prefix:Ae,local:et}}function Ve(P){if(P.strict||(P.attribName=P.attribName[P.looseCase]()),-1!==P.attribList.indexOf(P.attribName)||P.tag.attributes.hasOwnProperty(P.attribName))P.attribName=P.attribValue="";else{if(P.opt.xmlns){var E=Pe(P.attribName,!0),z=E.local;if("xmlns"===E.prefix)if("xml"===z&&P.attribValue!==I)we(P,"xml: prefix must be bound to "+I+"\nActual: "+P.attribValue);else if("xmlns"===z&&P.attribValue!==V)we(P,"xmlns: prefix must be bound to "+V+"\nActual: "+P.attribValue);else{var Ae=P.tag,et=P.tags[P.tags.length-1]||P;Ae.ns===et.ns&&(Ae.ns=Object.create(et.ns)),Ae.ns[z]=P.attribValue}P.attribList.push([P.attribName,P.attribValue])}else P.tag.attributes[P.attribName]=P.attribValue,Se(P,"onattribute",{name:P.attribName,value:P.attribValue});P.attribName=P.attribValue=""}}function fe(P,E){if(P.opt.xmlns){var ie=P.tag,z=Pe(P.tagName);ie.prefix=z.prefix,ie.local=z.local,ie.uri=ie.ns[z.prefix]||"",ie.prefix&&!ie.uri&&(we(P,"Unbound namespace prefix: "+JSON.stringify(P.tagName)),ie.uri=z.prefix),ie.ns&&(P.tags[P.tags.length-1]||P).ns!==ie.ns&&Object.keys(ie.ns).forEach(function(dt){Se(P,"onopennamespace",{prefix:dt,uri:ie.ns[dt]})});for(var et=0,ce=P.attribList.length;et<ce;et++){var Z=P.attribList[et],F=Z[0],x=Z[1],M=Pe(F,!0),Q=M.prefix,ze=""===Q?"":ie.ns[Q]||"",Ye={name:F,value:x,prefix:Q,local:M.local,uri:ze};Q&&"xmlns"!==Q&&!ze&&(we(P,"Unbound namespace prefix: "+JSON.stringify(Q)),Ye.uri=Q),P.tag.attributes[F]=Ye,Se(P,"onattribute",Ye)}P.attribList.length=0}P.tag.isSelfClosing=!!E,P.sawRoot=!0,P.tags.push(P.tag),Se(P,"onopentag",P.tag),E||(P.state=P.noscript||"script"!==P.tagName.toLowerCase()?j.TEXT:j.SCRIPT,P.tag=null,P.tagName=""),P.attribName=P.attribValue="",P.attribList.length=0}function Ee(P){if(!P.tagName)return we(P,"Weird empty close tag."),P.textNode+="</>",void(P.state=j.TEXT);if(P.script){if("script"!==P.tagName)return P.script+="</"+P.tagName+">",P.tagName="",void(P.state=j.SCRIPT);Se(P,"onscript",P.script),P.script=""}var E=P.tags.length,ie=P.tagName;P.strict||(ie=ie[P.looseCase]());for(var z=ie;E--&&P.tags[E].name!==z;)we(P,"Unexpected close tag");if(E<0)return we(P,"Unmatched closing tag: "+P.tagName),P.textNode+="</"+P.tagName+">",void(P.state=j.TEXT);P.tagName=ie;for(var et=P.tags.length;et-- >E;){var ce=P.tag=P.tags.pop();P.tagName=P.tag.name,Se(P,"onclosetag",P.tagName);var Z={};for(var F in ce.ns)Z[F]=ce.ns[F];P.opt.xmlns&&ce.ns!==(P.tags[P.tags.length-1]||P).ns&&Object.keys(ce.ns).forEach(function(M){Se(P,"onclosenamespace",{prefix:M,uri:ce.ns[M]})})}0===E&&(P.closedRoot=!0),P.tagName=P.attribValue=P.attribName="",P.attribList.length=0,P.state=j.TEXT}function $e(P){var z,E=P.entity,ie=E.toLowerCase(),Ae="";return P.ENTITIES[E]?P.ENTITIES[E]:P.ENTITIES[ie]?P.ENTITIES[ie]:("#"===(E=ie).charAt(0)&&("x"===E.charAt(1)?(E=E.slice(2),Ae=(z=parseInt(E,16)).toString(16)):(E=E.slice(1),Ae=(z=parseInt(E,10)).toString(10))),E=E.replace(/^0+/,""),isNaN(z)||Ae.toLowerCase()!==E?(we(P,"Invalid character entity"),"&"+P.entity+";"):String.fromCodePoint(z))}function ot(P,E){"<"===E?(P.state=j.OPEN_WAKA,P.startTagPosition=P.position):L(E)||(we(P,"Non-whitespace before first tag."),P.textNode=E,P.state=j.TEXT)}function Je(P,E){var ie="";return E<P.length&&(ie=P.charAt(E)),ie}j=J.STATE,String.fromCodePoint||(P=String.fromCharCode,E=Math.floor,ie=function(){var Ae=[],Z=-1,F=arguments.length;if(!F)return"";for(var x="";++Z<F;){var M=Number(arguments[Z]);if(!isFinite(M)||M<0||M>1114111||E(M)!==M)throw RangeError("Invalid code point: "+M);M<=65535?Ae.push(M):Ae.push(55296+((M-=65536)>>10),M%1024+56320),(Z+1===F||Ae.length>16384)&&(x+=P.apply(null,Ae),Ae.length=0)}return x},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie)}(ge)},8280:function(){!function(Ue,ge){"use strict";if(!Ue.setImmediate){var B,C=1,J={},A=!1,te=Ue.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(Ue);ae=ae&&ae.setTimeout?ae:Ue,"[object process]"==={}.toString.call(Ue.process)?function G(){B=function(K){process.nextTick(function(){N(K)})}}():function R(){if(Ue.postMessage&&!Ue.importScripts){var K=!0,oe=Ue.onmessage;return Ue.onmessage=function(){K=!1},Ue.postMessage("","*"),Ue.onmessage=oe,K}}()?function W(){var K="setImmediate$"+Math.random()+"$",oe=function(ne){ne.source===Ue&&"string"==typeof ne.data&&0===ne.data.indexOf(K)&&N(+ne.data.slice(K.length))};Ue.addEventListener?Ue.addEventListener("message",oe,!1):Ue.attachEvent("onmessage",oe),B=function(ne){Ue.postMessage(K+ne,"*")}}():Ue.MessageChannel?function de(){var K=new MessageChannel;K.port1.onmessage=function(oe){N(oe.data)},B=function(oe){K.port2.postMessage(oe)}}():te&&"onreadystatechange"in te.createElement("script")?function I(){var K=te.documentElement;B=function(oe){var ne=te.createElement("script");ne.onreadystatechange=function(){N(oe),ne.onreadystatechange=null,K.removeChild(ne),ne=null},K.appendChild(ne)}}():function V(){B=function(K){setTimeout(N,0,K)}}(),ae.setImmediate=function ee(K){"function"!=typeof K&&(K=new Function(""+K));for(var oe=new Array(arguments.length-1),ne=0;ne<oe.length;ne++)oe[ne]=arguments[ne+1];return J[C]={callback:K,args:oe},B(C),C++},ae.clearImmediate=g}function g(K){delete J[K]}function N(K){if(A)setTimeout(N,0,K);else{var oe=J[K];if(oe){A=!0;try{!function w(K){var oe=K.callback,ne=K.args;switch(ne.length){case 0:oe();break;case 1:oe(ne[0]);break;case 2:oe(ne[0],ne[1]);break;case 3:oe(ne[0],ne[1],ne[2]);break;default:oe.apply(undefined,ne)}}(oe)}finally{g(K),A=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(Ue,ge,C)=>{Ue.exports=te;var J=C(2016).EventEmitter;function te(){J.call(this)}C(6698)(te,J),te.Readable=C(842),te.Writable=C(7597),te.Duplex=C(2232),te.Transform=C(555),te.PassThrough=C(8226),te.finished=C(1227),te.pipeline=C(2345),te.Stream=te,te.prototype.pipe=function(B,ee){var g=this;function w(V){B.writable&&!1===B.write(V)&&g.pause&&g.pause()}function N(){g.readable&&g.resume&&g.resume()}g.on("data",w),B.on("drain",N),!B._isStdio&&(!ee||!1!==ee.end)&&(g.on("end",R),g.on("close",W));var G=!1;function R(){G||(G=!0,B.end())}function W(){G||(G=!0,"function"==typeof B.destroy&&B.destroy())}function de(V){if(I(),0===J.listenerCount(this,"error"))throw V}function I(){g.removeListener("data",w),B.removeListener("drain",N),g.removeListener("end",R),g.removeListener("close",W),g.removeListener("error",de),B.removeListener("error",de),g.removeListener("end",I),g.removeListener("close",I),B.removeListener("close",I)}return g.on("error",de),B.on("error",de),g.on("end",I),g.on("close",I),B.on("close",I),B.emit("pipe",g),B}},9555:Ue=>{"use strict";var C={};function J(g,w,N){N||(N=Error);var R=function(W){function de(I,V,ae){return W.call(this,function G(W,de,I){return"string"==typeof w?w:w(W,de,I)}(I,V,ae))||this}return function ge(g,w){g.prototype=Object.create(w.prototype),g.prototype.constructor=g,g.__proto__=w}(de,W),de}(N);R.prototype.name=N.name,R.prototype.code=g,C[g]=R}function A(g,w){if(Array.isArray(g)){var N=g.length;return g=g.map(function(G){return String(G)}),N>2?"one of ".concat(w," ").concat(g.slice(0,N-1).join(", "),", or ")+g[N-1]:2===N?"one of ".concat(w," ").concat(g[0]," or ").concat(g[1]):"of ".concat(w," ").concat(g[0])}return"of ".concat(w," ").concat(String(g))}J("ERR_INVALID_OPT_VALUE",function(g,w){return'The value "'+w+'" is invalid for option "'+g+'"'},TypeError),J("ERR_INVALID_ARG_TYPE",function(g,w,N){var G,R;if("string"==typeof w&&function te(g,w,N){return g.substr(!N||N<0?0:+N,w.length)===w}(w,"not ")?(G="must not be",w=w.replace(/^not /,"")):G="must be",function B(g,w,N){return(void 0===N||N>g.length)&&(N=g.length),g.substring(N-w.length,N)===w}(g," argument"))R="The ".concat(g," ").concat(G," ").concat(A(w,"type"));else{var W=function ee(g,w,N){return"number"!=typeof N&&(N=0),!(N+w.length>g.length)&&-1!==g.indexOf(w,N)}(g,".")?"property":"argument";R='The "'.concat(g,'" ').concat(W," ").concat(G," ").concat(A(w,"type"))}return R+". Received type ".concat(typeof N)},TypeError),J("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),J("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),J("ERR_STREAM_PREMATURE_CLOSE","Premature close"),J("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),J("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),J("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),J("ERR_STREAM_WRITE_AFTER_END","write after end"),J("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),J("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),J("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ue.exports.q=C},2232:(Ue,ge,C)=>{"use strict";var J=Object.keys||function(R){var W=[];for(var de in R)W.push(de);return W};Ue.exports=w;var A=C(842),te=C(7597);C(6698)(w,A);for(var B=J(te.prototype),ee=0;ee<B.length;ee++){var g=B[ee];w.prototype[g]||(w.prototype[g]=te.prototype[g])}function w(R){if(!(this instanceof w))return new w(R);A.call(this,R),te.call(this,R),this.allowHalfOpen=!0,R&&(!1===R.readable&&(this.readable=!1),!1===R.writable&&(this.writable=!1),!1===R.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",N)))}function N(){this._writableState.ended||process.nextTick(G,this)}function G(R){R.end()}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(W){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=W,this._writableState.destroyed=W)}})},8226:(Ue,ge,C)=>{"use strict";Ue.exports=A;var J=C(555);function A(te){if(!(this instanceof A))return new A(te);J.call(this,te)}C(6698)(A,J),A.prototype._transform=function(te,B,ee){ee(null,te)}},842:(Ue,ge,C)=>{"use strict";var J;Ue.exports=se,se.ReadableState=Te,C(2016);var R,te=function(Z,F){return Z.listeners(F).length},B=C(3951),ee=C(9007).Buffer,g=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},G=C(964);R=G&&G.debuglog?G.debuglog("stream"):function(){};var L,_,O,W=C(2998),de=C(3992),V=C(4962).getHighWaterMark,ae=C(9555).q,K=ae.ERR_INVALID_ARG_TYPE,oe=ae.ERR_STREAM_PUSH_AFTER_EOF,ne=ae.ERR_METHOD_NOT_IMPLEMENTED,X=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;C(6698)(se,B);var S=de.errorOrDestroy,ue=["error","close","destroy","pause","resume"];function Te(ce,Z,F){J=J||C(2232),"boolean"!=typeof F&&(F=Z instanceof J),this.objectMode=!!(ce=ce||{}).objectMode,F&&(this.objectMode=this.objectMode||!!ce.readableObjectMode),this.highWaterMark=V(this,ce,"readableHighWaterMark",F),this.buffer=new W,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ce.emitClose,this.autoDestroy=!!ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(L||(L=C(2024).StringDecoder),this.decoder=new L(ce.encoding),this.encoding=ce.encoding)}function se(ce){if(J=J||C(2232),!(this instanceof se))return new se(ce);this._readableState=new Te(ce,this,this instanceof J),this.readable=!0,ce&&("function"==typeof ce.read&&(this._read=ce.read),"function"==typeof ce.destroy&&(this._destroy=ce.destroy)),B.call(this)}function Se(ce,Z,F,x,M){R("readableAddChunk",Z);var he,Q=ce._readableState;if(null===Z)Q.reading=!1,function Ne(ce,Z){if(R("onEofChunk"),!Z.ended){if(Z.decoder){var F=Z.decoder.end();F&&F.length&&(Z.buffer.push(F),Z.length+=Z.objectMode?1:F.length)}Z.ended=!0,Z.sync?Pe(ce):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,Ve(ce)))}}(ce,Q);else if(M||(he=function Oe(ce,Z){var F;return!function N(ce){return ee.isBuffer(ce)||ce instanceof g}(Z)&&"string"!=typeof Z&&void 0!==Z&&!ce.objectMode&&(F=new K("chunk",["string","Buffer","Uint8Array"],Z)),F}(Q,Z)),he)S(ce,he);else if(Q.objectMode||Z&&Z.length>0)if("string"!=typeof Z&&!Q.objectMode&&Object.getPrototypeOf(Z)!==ee.prototype&&(Z=function w(ce){return ee.from(ce)}(Z)),x)Q.endEmitted?S(ce,new X):Re(ce,Q,Z,!0);else if(Q.ended)S(ce,new oe);else{if(Q.destroyed)return!1;Q.reading=!1,Q.decoder&&!F?(Z=Q.decoder.write(Z),Q.objectMode||0!==Z.length?Re(ce,Q,Z,!1):fe(ce,Q)):Re(ce,Q,Z,!1)}else x||(Q.reading=!1,fe(ce,Q));return!Q.ended&&(Q.length<Q.highWaterMark||0===Q.length)}function Re(ce,Z,F,x){Z.flowing&&0===Z.length&&!Z.sync?(Z.awaitDrain=0,ce.emit("data",F)):(Z.length+=Z.objectMode?1:F.length,x?Z.buffer.unshift(F):Z.buffer.push(F),Z.needReadable&&Pe(ce)),fe(ce,Z)}Object.defineProperty(se.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Z){this._readableState&&(this._readableState.destroyed=Z)}}),se.prototype.destroy=de.destroy,se.prototype._undestroy=de.undestroy,se.prototype._destroy=function(ce,Z){Z(ce)},se.prototype.push=function(ce,Z){var x,F=this._readableState;return F.objectMode?x=!0:"string"==typeof ce&&((Z=Z||F.defaultEncoding)!==F.encoding&&(ce=ee.from(ce,Z),Z=""),x=!0),Se(this,ce,Z,!1,x)},se.prototype.unshift=function(ce){return Se(this,ce,null,!0,!1)},se.prototype.isPaused=function(){return!1===this._readableState.flowing},se.prototype.setEncoding=function(ce){L||(L=C(2024).StringDecoder);var Z=new L(ce);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,x="";null!==F;)x+=Z.write(F.data),F=F.next;return this._readableState.buffer.clear(),""!==x&&this._readableState.buffer.push(x),this._readableState.length=x.length,this};var Qe=1073741824;function we(ce,Z){return ce<=0||0===Z.length&&Z.ended?0:Z.objectMode?1:ce!=ce?Z.flowing&&Z.length?Z.buffer.head.data.length:Z.length:(ce>Z.highWaterMark&&(Z.highWaterMark=function Xe(ce){return ce>=Qe?ce=Qe:(ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++),ce}(ce)),ce<=Z.length?ce:Z.ended?Z.length:(Z.needReadable=!0,0))}function Pe(ce){var Z=ce._readableState;R("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(R("emitReadable",Z.flowing),Z.emittedReadable=!0,process.nextTick(Ve,ce))}function Ve(ce){var Z=ce._readableState;R("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&(Z.length||Z.ended)&&(ce.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,E(ce)}function fe(ce,Z){Z.readingMore||(Z.readingMore=!0,process.nextTick(Ee,ce,Z))}function Ee(ce,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&0===Z.length);){var F=Z.length;if(R("maybeReadMore read 0"),ce.read(0),F===Z.length)break}Z.readingMore=!1}function ot(ce){var Z=ce._readableState;Z.readableListening=ce.listenerCount("readable")>0,Z.resumeScheduled&&!Z.paused?Z.flowing=!0:ce.listenerCount("data")>0&&ce.resume()}function Je(ce){R("readable nexttick read 0"),ce.read(0)}function P(ce,Z){R("resume",Z.reading),Z.reading||ce.read(0),Z.resumeScheduled=!1,ce.emit("resume"),E(ce),Z.flowing&&!Z.reading&&ce.read(0)}function E(ce){var Z=ce._readableState;for(R("flow",Z.flowing);Z.flowing&&null!==ce.read(););}function ie(ce,Z){return 0===Z.length?null:(Z.objectMode?F=Z.buffer.shift():!ce||ce>=Z.length?(F=Z.decoder?Z.buffer.join(""):1===Z.buffer.length?Z.buffer.first():Z.buffer.concat(Z.length),Z.buffer.clear()):F=Z.buffer.consume(ce,Z.decoder),F);var F}function z(ce){var Z=ce._readableState;R("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,process.nextTick(Ae,Z,ce))}function Ae(ce,Z){if(R("endReadableNT",ce.endEmitted,ce.length),!ce.endEmitted&&0===ce.length&&(ce.endEmitted=!0,Z.readable=!1,Z.emit("end"),ce.autoDestroy)){var F=Z._writableState;(!F||F.autoDestroy&&F.finished)&&Z.destroy()}}function et(ce,Z){for(var F=0,x=ce.length;F<x;F++)if(ce[F]===Z)return F;return-1}se.prototype.read=function(ce){R("read",ce),ce=parseInt(ce,10);var Z=this._readableState,F=ce;if(0!==ce&&(Z.emittedReadable=!1),0===ce&&Z.needReadable&&((0!==Z.highWaterMark?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return R("read: emitReadable",Z.length,Z.ended),0===Z.length&&Z.ended?z(this):Pe(this),null;if(0===(ce=we(ce,Z))&&Z.ended)return 0===Z.length&&z(this),null;var M,x=Z.needReadable;return R("need readable",x),(0===Z.length||Z.length-ce<Z.highWaterMark)&&R("length less than watermark",x=!0),Z.ended||Z.reading?R("reading or ended",x=!1):x&&(R("do read"),Z.reading=!0,Z.sync=!0,0===Z.length&&(Z.needReadable=!0),this._read(Z.highWaterMark),Z.sync=!1,Z.reading||(ce=we(F,Z))),null===(M=ce>0?ie(ce,Z):null)?(Z.needReadable=Z.length<=Z.highWaterMark,ce=0):(Z.length-=ce,Z.awaitDrain=0),0===Z.length&&(Z.ended||(Z.needReadable=!0),F!==ce&&Z.ended&&z(this)),null!==M&&this.emit("data",M),M},se.prototype._read=function(ce){S(this,new ne("_read()"))},se.prototype.pipe=function(ce,Z){var F=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=ce;break;case 1:x.pipes=[x.pipes,ce];break;default:x.pipes.push(ce)}x.pipesCount+=1,R("pipe count=%d opts=%j",x.pipesCount,Z);var Q=Z&&!1===Z.end||ce===process.stdout||ce===process.stderr?H:ze;function ze(){R("onend"),ce.end()}x.endEmitted?process.nextTick(Q):F.once("end",Q),ce.on("unpipe",function he(v,re){R("onunpipe"),v===F&&re&&!1===re.hasUnpiped&&(re.hasUnpiped=!0,function vt(){R("cleanup"),ce.removeListener("close",rn),ce.removeListener("finish",Ie),ce.removeListener("drain",Ye),ce.removeListener("error",zt),ce.removeListener("unpipe",he),F.removeListener("end",ze),F.removeListener("end",H),F.removeListener("data",mt),dt=!0,x.awaitDrain&&(!ce._writableState||ce._writableState.needDrain)&&Ye()}())});var Ye=function $e(ce){return function(){var F=ce._readableState;R("pipeOnDrain",F.awaitDrain),F.awaitDrain&&F.awaitDrain--,0===F.awaitDrain&&te(ce,"data")&&(F.flowing=!0,E(ce))}}(F);ce.on("drain",Ye);var dt=!1;function mt(v){R("ondata");var re=ce.write(v);R("dest.write",re),!1===re&&((1===x.pipesCount&&x.pipes===ce||x.pipesCount>1&&-1!==et(x.pipes,ce))&&!dt&&(R("false write response, pause",x.awaitDrain),x.awaitDrain++),F.pause())}function zt(v){R("onerror",v),H(),ce.removeListener("error",zt),0===te(ce,"error")&&S(ce,v)}function rn(){ce.removeListener("finish",Ie),H()}function Ie(){R("onfinish"),ce.removeListener("close",rn),H()}function H(){R("unpipe"),F.unpipe(ce)}return F.on("data",mt),function j(ce,Z,F){if("function"==typeof ce.prependListener)return ce.prependListener(Z,F);ce._events&&ce._events[Z]?Array.isArray(ce._events[Z])?ce._events[Z].unshift(F):ce._events[Z]=[F,ce._events[Z]]:ce.on(Z,F)}(ce,"error",zt),ce.once("close",rn),ce.once("finish",Ie),ce.emit("pipe",F),x.flowing||(R("pipe resume"),F.resume()),ce},se.prototype.unpipe=function(ce){var Z=this._readableState,F={hasUnpiped:!1};if(0===Z.pipesCount)return this;if(1===Z.pipesCount)return ce&&ce!==Z.pipes||(ce||(ce=Z.pipes),Z.pipes=null,Z.pipesCount=0,Z.flowing=!1,ce&&ce.emit("unpipe",this,F)),this;if(!ce){var x=Z.pipes,M=Z.pipesCount;Z.pipes=null,Z.pipesCount=0,Z.flowing=!1;for(var Q=0;Q<M;Q++)x[Q].emit("unpipe",this,{hasUnpiped:!1});return this}var he=et(Z.pipes,ce);return-1===he||(Z.pipes.splice(he,1),Z.pipesCount-=1,1===Z.pipesCount&&(Z.pipes=Z.pipes[0]),ce.emit("unpipe",this,F)),this},se.prototype.addListener=se.prototype.on=function(ce,Z){var F=B.prototype.on.call(this,ce,Z),x=this._readableState;return"data"===ce?(x.readableListening=this.listenerCount("readable")>0,!1!==x.flowing&&this.resume()):"readable"===ce&&!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,R("on readable",x.length,x.reading),x.length?Pe(this):x.reading||process.nextTick(Je,this)),F},se.prototype.removeListener=function(ce,Z){var F=B.prototype.removeListener.call(this,ce,Z);return"readable"===ce&&process.nextTick(ot,this),F},se.prototype.removeAllListeners=function(ce){var Z=B.prototype.removeAllListeners.apply(this,arguments);return("readable"===ce||void 0===ce)&&process.nextTick(ot,this),Z},se.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(R("resume"),ce.flowing=!ce.readableListening,function le(ce,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,process.nextTick(P,ce,Z))}(this,ce)),ce.paused=!1,this},se.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},se.prototype.wrap=function(ce){var Z=this,F=this._readableState,x=!1;for(var M in ce.on("end",function(){if(R("wrapped end"),F.decoder&&!F.ended){var he=F.decoder.end();he&&he.length&&Z.push(he)}Z.push(null)}),ce.on("data",function(he){R("wrapped data"),F.decoder&&(he=F.decoder.write(he)),F.objectMode&&null==he||!(F.objectMode||he&&he.length)||Z.push(he)||(x=!0,ce.pause())}),ce)void 0===this[M]&&"function"==typeof ce[M]&&(this[M]=function(ze){return function(){return ce[ze].apply(ce,arguments)}}(M));for(var Q=0;Q<ue.length;Q++)ce.on(ue[Q],this.emit.bind(this,ue[Q]));return this._read=function(he){R("wrapped _read",he),x&&(x=!1,ce.resume())},this},"function"==typeof Symbol&&(se.prototype[Symbol.asyncIterator]=function(){return void 0===_&&(_=C(2590)),_(this)}),Object.defineProperty(se.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(se.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(se.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Z){this._readableState&&(this._readableState.flowing=Z)}}),se._fromList=ie,Object.defineProperty(se.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(se.from=function(ce,Z){return void 0===O&&(O=C(5374)),O(se,ce,Z)})},555:(Ue,ge,C)=>{"use strict";Ue.exports=N;var J=C(9555).q,A=J.ERR_METHOD_NOT_IMPLEMENTED,te=J.ERR_MULTIPLE_CALLBACK,B=J.ERR_TRANSFORM_ALREADY_TRANSFORMING,ee=J.ERR_TRANSFORM_WITH_LENGTH_0,g=C(2232);function w(W,de){var I=this._transformState;I.transforming=!1;var V=I.writecb;if(null===V)return this.emit("error",new te);I.writechunk=null,I.writecb=null,null!=de&&this.push(de),V(W);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function N(W){if(!(this instanceof N))return new N(W);g.call(this,W),this._transformState={afterTransform:w.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,W&&("function"==typeof W.transform&&(this._transform=W.transform),"function"==typeof W.flush&&(this._flush=W.flush)),this.on("prefinish",G)}function G(){var W=this;"function"!=typeof this._flush||this._readableState.destroyed?R(this,null,null):this._flush(function(de,I){R(W,de,I)})}function R(W,de,I){if(de)return W.emit("error",de);if(null!=I&&W.push(I),W._writableState.length)throw new ee;if(W._transformState.transforming)throw new B;return W.push(null)}C(6698)(N,g),N.prototype.push=function(W,de){return this._transformState.needTransform=!1,g.prototype.push.call(this,W,de)},N.prototype._transform=function(W,de,I){I(new A("_transform()"))},N.prototype._write=function(W,de,I){var V=this._transformState;if(V.writecb=I,V.writechunk=W,V.writeencoding=de,!V.transforming){var ae=this._readableState;(V.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},N.prototype._read=function(W){var de=this._transformState;null===de.writechunk||de.transforming?de.needTransform=!0:(de.transforming=!0,this._transform(de.writechunk,de.writeencoding,de.afterTransform))},N.prototype._destroy=function(W,de){g.prototype._destroy.call(this,W,function(I){de(I)})}},7597:(Ue,ge,C)=>{"use strict";function A(E){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function P(E,ie,z){var Ae=E.entry;for(E.entry=null;Ae;){var et=Ae.callback;ie.pendingcb--,et(z),Ae=Ae.next}ie.corkedRequestsFree.next=E}(ie,E)}}var te;Ue.exports=Te,Te.WritableState=ue;var j,B={deprecate:C(496)},ee=C(3951),g=C(9007).Buffer,w=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},R=C(3992),de=C(4962).getHighWaterMark,I=C(9555).q,V=I.ERR_INVALID_ARG_TYPE,ae=I.ERR_METHOD_NOT_IMPLEMENTED,K=I.ERR_MULTIPLE_CALLBACK,oe=I.ERR_STREAM_CANNOT_PIPE,ne=I.ERR_STREAM_DESTROYED,X=I.ERR_STREAM_NULL_VALUES,L=I.ERR_STREAM_WRITE_AFTER_END,_=I.ERR_UNKNOWN_ENCODING,O=R.errorOrDestroy;function S(){}function ue(E,ie,z){te=te||C(2232),"boolean"!=typeof z&&(z=ie instanceof te),this.objectMode=!!(E=E||{}).objectMode,z&&(this.objectMode=this.objectMode||!!E.writableObjectMode),this.highWaterMark=de(this,E,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===E.decodeStrings),this.defaultEncoding=E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(et){!function Ne(E,ie){var z=E._writableState,Ae=z.sync,et=z.writecb;if("function"!=typeof et)throw new K;if(function we(E){E.writing=!1,E.writecb=null,E.length-=E.writelen,E.writelen=0}(z),ie)!function Xe(E,ie,z,Ae,et){--ie.pendingcb,z?(process.nextTick(et,Ae),process.nextTick(Je,E,ie),E._writableState.errorEmitted=!0,O(E,Ae)):(et(Ae),E._writableState.errorEmitted=!0,O(E,Ae),Je(E,ie))}(E,z,Ae,ie,et);else{var ce=Ee(z)||E.destroyed;!ce&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&fe(E,z),Ae?process.nextTick(Pe,E,z,ce,et):Pe(E,z,ce,et)}}(ie,et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==E.emitClose,this.autoDestroy=!!E.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new A(this)}function Te(E){var ie=this instanceof(te=te||C(2232));if(!ie&&!j.call(Te,this))return new Te(E);this._writableState=new ue(E,this,ie),this.writable=!0,E&&("function"==typeof E.write&&(this._write=E.write),"function"==typeof E.writev&&(this._writev=E.writev),"function"==typeof E.destroy&&(this._destroy=E.destroy),"function"==typeof E.final&&(this._final=E.final)),ee.call(this)}function Qe(E,ie,z,Ae,et,ce,Z){ie.writelen=Ae,ie.writecb=Z,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new ne("write")):z?E._writev(et,ie.onwrite):E._write(et,ce,ie.onwrite),ie.sync=!1}function Pe(E,ie,z,Ae){z||function Ve(E,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,E.emit("drain"))}(E,ie),ie.pendingcb--,Ae(),Je(E,ie)}function fe(E,ie){ie.bufferProcessing=!0;var z=ie.bufferedRequest;if(E._writev&&z&&z.next){var et=new Array(ie.bufferedRequestCount),ce=ie.corkedRequestsFree;ce.entry=z;for(var Z=0,F=!0;z;)et[Z]=z,z.isBuf||(F=!1),z=z.next,Z+=1;et.allBuffers=F,Qe(E,ie,!0,ie.length,et,"",ce.finish),ie.pendingcb++,ie.lastBufferedRequest=null,ce.next?(ie.corkedRequestsFree=ce.next,ce.next=null):ie.corkedRequestsFree=new A(ie),ie.bufferedRequestCount=0}else{for(;z;){var x=z.chunk;if(Qe(E,ie,!1,ie.objectMode?1:x.length,x,z.encoding,z.callback),z=z.next,ie.bufferedRequestCount--,ie.writing)break}null===z&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=z,ie.bufferProcessing=!1}function Ee(E){return E.ending&&0===E.length&&null===E.bufferedRequest&&!E.finished&&!E.writing}function $e(E,ie){E._final(function(z){ie.pendingcb--,z&&O(E,z),ie.prefinished=!0,E.emit("prefinish"),Je(E,ie)})}function Je(E,ie){var z=Ee(ie);if(z&&(function ot(E,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof E._final||ie.destroyed?(ie.prefinished=!0,E.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick($e,E,ie)))}(E,ie),0===ie.pendingcb&&(ie.finished=!0,E.emit("finish"),ie.autoDestroy))){var Ae=E._readableState;(!Ae||Ae.autoDestroy&&Ae.endEmitted)&&E.destroy()}return z}C(6698)(Te,ee),ue.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,z=[];ie;)z.push(ie),ie=ie.next;return z},function(){try{Object.defineProperty(ue.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(Te,Symbol.hasInstance,{value:function(ie){return!!j.call(this,ie)||this===Te&&ie&&ie._writableState instanceof ue}})):j=function(ie){return ie instanceof this},Te.prototype.pipe=function(){O(this,new oe)},Te.prototype.write=function(E,ie,z){var Ae=this._writableState,et=!1,ce=!Ae.objectMode&&function G(E){return g.isBuffer(E)||E instanceof w}(E);return ce&&!g.isBuffer(E)&&(E=function N(E){return g.from(E)}(E)),"function"==typeof ie&&(z=ie,ie=null),ce?ie="buffer":ie||(ie=Ae.defaultEncoding),"function"!=typeof z&&(z=S),Ae.ending?function se(E,ie){var z=new L;O(E,z),process.nextTick(ie,z)}(this,z):(ce||function Se(E,ie,z,Ae){var et;return null===z?et=new X:"string"!=typeof z&&!ie.objectMode&&(et=new V("chunk",["string","Buffer"],z)),!et||(O(E,et),process.nextTick(Ae,et),!1)}(this,Ae,E,z))&&(Ae.pendingcb++,et=function Oe(E,ie,z,Ae,et,ce){if(!z){var Z=function Re(E,ie,z){return!E.objectMode&&!1!==E.decodeStrings&&"string"==typeof ie&&(ie=g.from(ie,z)),ie}(ie,Ae,et);Ae!==Z&&(z=!0,et="buffer",Ae=Z)}var F=ie.objectMode?1:Ae.length;ie.length+=F;var x=ie.length<ie.highWaterMark;if(x||(ie.needDrain=!0),ie.writing||ie.corked){var M=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:Ae,encoding:et,isBuf:z,callback:ce,next:null},M?M.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else Qe(E,ie,!1,F,Ae,et,ce);return x}(this,Ae,ce,E,ie,z)),et},Te.prototype.cork=function(){this._writableState.corked++},Te.prototype.uncork=function(){var E=this._writableState;E.corked&&(E.corked--,!E.writing&&!E.corked&&!E.bufferProcessing&&E.bufferedRequest&&fe(this,E))},Te.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new _(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(Te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Te.prototype._write=function(E,ie,z){z(new ae("_write()"))},Te.prototype._writev=null,Te.prototype.end=function(E,ie,z){var Ae=this._writableState;return"function"==typeof E?(z=E,E=null,ie=null):"function"==typeof ie&&(z=ie,ie=null),null!=E&&this.write(E,ie),Ae.corked&&(Ae.corked=1,this.uncork()),Ae.ending||function le(E,ie,z){ie.ending=!0,Je(E,ie),z&&(ie.finished?process.nextTick(z):E.once("finish",z)),ie.ended=!0,E.writable=!1}(this,Ae,z),this},Object.defineProperty(Te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Te.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),Te.prototype.destroy=R.destroy,Te.prototype._undestroy=R.undestroy,Te.prototype._destroy=function(E,ie){ie(E)}},2590:(Ue,ge,C)=>{"use strict";var J;function A(L,_,O){return _=function te(L){var _=function B(L,_){if("object"!=typeof L||null===L)return L;var O=L[Symbol.toPrimitive];if(void 0!==O){var S=O.call(L,_||"default");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(L)}(L,"string");return"symbol"==typeof _?_:String(_)}(_),_ in L?Object.defineProperty(L,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):L[_]=O,L}var ee=C(1227),g=Symbol("lastResolve"),w=Symbol("lastReject"),N=Symbol("error"),G=Symbol("ended"),R=Symbol("lastPromise"),W=Symbol("handlePromise"),de=Symbol("stream");function I(L,_){return{value:L,done:_}}function V(L){var _=L[g];if(null!==_){var O=L[de].read();null!==O&&(L[R]=null,L[g]=null,L[w]=null,_(I(O,!1)))}}function ae(L){process.nextTick(V,L)}var oe=Object.getPrototypeOf(function(){}),ne=Object.setPrototypeOf((A(J={get stream(){return this[de]},next:function(){var _=this,O=this[N];if(null!==O)return Promise.reject(O);if(this[G])return Promise.resolve(I(void 0,!0));if(this[de].destroyed)return new Promise(function(Te,se){process.nextTick(function(){_[N]?se(_[N]):Te(I(void 0,!0))})});var ue,S=this[R];if(S)ue=new Promise(function K(L,_){return function(O,S){L.then(function(){_[G]?O(I(void 0,!0)):_[W](O,S)},S)}}(S,this));else{var j=this[de].read();if(null!==j)return Promise.resolve(I(j,!1));ue=new Promise(this[W])}return this[R]=ue,ue}},Symbol.asyncIterator,function(){return this}),A(J,"return",function(){var _=this;return new Promise(function(O,S){_[de].destroy(null,function(ue){ue?S(ue):O(I(void 0,!0))})})}),J),oe);Ue.exports=function(_){var O,S=Object.create(ne,(A(O={},de,{value:_,writable:!0}),A(O,g,{value:null,writable:!0}),A(O,w,{value:null,writable:!0}),A(O,N,{value:null,writable:!0}),A(O,G,{value:_._readableState.endEmitted,writable:!0}),A(O,W,{value:function(j,Te){var se=S[de].read();se?(S[R]=null,S[g]=null,S[w]=null,j(I(se,!1))):(S[g]=j,S[w]=Te)},writable:!0}),O));return S[R]=null,ee(_,function(ue){if(ue&&"ERR_STREAM_PREMATURE_CLOSE"!==ue.code){var j=S[w];return null!==j&&(S[R]=null,S[g]=null,S[w]=null,j(ue)),void(S[N]=ue)}var Te=S[g];null!==Te&&(S[R]=null,S[g]=null,S[w]=null,Te(I(void 0,!0))),S[G]=!0}),_.on("readable",ae.bind(null,S)),S}},2998:(Ue,ge,C)=>{"use strict";function J(ae,K){var oe=Object.keys(ae);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(ae);K&&(ne=ne.filter(function(X){return Object.getOwnPropertyDescriptor(ae,X).enumerable})),oe.push.apply(oe,ne)}return oe}function A(ae){for(var K=1;K<arguments.length;K++){var oe=null!=arguments[K]?arguments[K]:{};K%2?J(Object(oe),!0).forEach(function(ne){te(ae,ne,oe[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(oe)):J(Object(oe)).forEach(function(ne){Object.defineProperty(ae,ne,Object.getOwnPropertyDescriptor(oe,ne))})}return ae}function te(ae,K,oe){return(K=w(K))in ae?Object.defineProperty(ae,K,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ae[K]=oe,ae}function ee(ae,K){for(var oe=0;oe<K.length;oe++){var ne=K[oe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ae,w(ne.key),ne)}}function w(ae){var K=function N(ae,K){if("object"!=typeof ae||null===ae)return ae;var oe=ae[Symbol.toPrimitive];if(void 0!==oe){var ne=oe.call(ae,K||"default");if("object"!=typeof ne)return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===K?String:Number)(ae)}(ae,"string");return"symbol"==typeof K?K:String(K)}var R=C(9007).Buffer,de=C(9862).inspect,I=de&&de.custom||"inspect";function V(ae,K,oe){R.prototype.copy.call(ae,K,oe)}Ue.exports=function(){function ae(){(function B(ae,K){if(!(ae instanceof K))throw new TypeError("Cannot call a class as a function")})(this,ae),this.head=null,this.tail=null,this.length=0}return function g(ae,K,oe){K&&ee(ae.prototype,K),oe&&ee(ae,oe),Object.defineProperty(ae,"prototype",{writable:!1})}(ae,[{key:"push",value:function(oe){var ne={data:oe,next:null};this.length>0?this.tail.next=ne:this.head=ne,this.tail=ne,++this.length}},{key:"unshift",value:function(oe){var ne={data:oe,next:this.head};0===this.length&&(this.tail=ne),this.head=ne,++this.length}},{key:"shift",value:function(){if(0!==this.length){var oe=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,oe}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(oe){if(0===this.length)return"";for(var ne=this.head,X=""+ne.data;ne=ne.next;)X+=oe+ne.data;return X}},{key:"concat",value:function(oe){if(0===this.length)return R.alloc(0);for(var ne=R.allocUnsafe(oe>>>0),X=this.head,L=0;X;)V(X.data,ne,L),L+=X.data.length,X=X.next;return ne}},{key:"consume",value:function(oe,ne){var X;return oe<this.head.data.length?(X=this.head.data.slice(0,oe),this.head.data=this.head.data.slice(oe)):X=oe===this.head.data.length?this.shift():ne?this._getString(oe):this._getBuffer(oe),X}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(oe){var ne=this.head,X=1,L=ne.data;for(oe-=L.length;ne=ne.next;){var _=ne.data,O=oe>_.length?_.length:oe;if(L+=O===_.length?_:_.slice(0,oe),0==(oe-=O)){O===_.length?(++X,this.head=ne.next?ne.next:this.tail=null):(this.head=ne,ne.data=_.slice(O));break}++X}return this.length-=X,L}},{key:"_getBuffer",value:function(oe){var ne=R.allocUnsafe(oe),X=this.head,L=1;for(X.data.copy(ne),oe-=X.data.length;X=X.next;){var _=X.data,O=oe>_.length?_.length:oe;if(_.copy(ne,ne.length-oe,0,O),0==(oe-=O)){O===_.length?(++L,this.head=X.next?X.next:this.tail=null):(this.head=X,X.data=_.slice(O));break}++L}return this.length-=L,ne}},{key:I,value:function(oe,ne){return de(this,A(A({},ne),{},{depth:0,customInspect:!1}))}}]),ae}()},3992:Ue=>{"use strict";function C(ee,g){te(ee,g),J(ee)}function J(ee){ee._writableState&&!ee._writableState.emitClose||ee._readableState&&!ee._readableState.emitClose||ee.emit("close")}function te(ee,g){ee.emit("error",g)}Ue.exports={destroy:function ge(ee,g){var w=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(g?g(ee):ee&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(te,this,ee)):process.nextTick(te,this,ee)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(ee||null,function(R){!g&&R?w._writableState?w._writableState.errorEmitted?process.nextTick(J,w):(w._writableState.errorEmitted=!0,process.nextTick(C,w,R)):process.nextTick(C,w,R):g?(process.nextTick(J,w),g(R)):process.nextTick(J,w)}),this)},undestroy:function A(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function B(ee,g){var w=ee._readableState,N=ee._writableState;w&&w.autoDestroy||N&&N.autoDestroy?ee.destroy(g):ee.emit("error",g)}}},1227:(Ue,ge,C)=>{"use strict";var J=C(9555).q.ERR_STREAM_PREMATURE_CLOSE;function te(){}Ue.exports=function ee(g,w,N){if("function"==typeof w)return ee(g,null,w);w||(w={}),N=function A(g){var w=!1;return function(){if(!w){w=!0;for(var N=arguments.length,G=new Array(N),R=0;R<N;R++)G[R]=arguments[R];g.apply(this,G)}}}(N||te);var G=w.readable||!1!==w.readable&&g.readable,R=w.writable||!1!==w.writable&&g.writable,W=function(){g.writable||I()},de=g._writableState&&g._writableState.finished,I=function(){R=!1,de=!0,G||N.call(g)},V=g._readableState&&g._readableState.endEmitted,ae=function(){G=!1,V=!0,R||N.call(g)},K=function(L){N.call(g,L)},oe=function(){var L;return G&&!V?((!g._readableState||!g._readableState.ended)&&(L=new J),N.call(g,L)):R&&!de?((!g._writableState||!g._writableState.ended)&&(L=new J),N.call(g,L)):void 0},ne=function(){g.req.on("finish",I)};return function B(g){return g.setHeader&&"function"==typeof g.abort}(g)?(g.on("complete",I),g.on("abort",oe),g.req?ne():g.on("request",ne)):R&&!g._writableState&&(g.on("end",W),g.on("close",W)),g.on("end",ae),g.on("finish",I),!1!==w.error&&g.on("error",K),g.on("close",oe),function(){g.removeListener("complete",I),g.removeListener("abort",oe),g.removeListener("request",ne),g.req&&g.req.removeListener("finish",I),g.removeListener("end",W),g.removeListener("close",W),g.removeListener("finish",I),g.removeListener("end",ae),g.removeListener("error",K),g.removeListener("close",oe)}}},5374:Ue=>{Ue.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(Ue,ge,C)=>{"use strict";var J,te=C(9555).q,B=te.ERR_MISSING_ARGS,ee=te.ERR_STREAM_DESTROYED;function g(I){if(I)throw I}function G(I){I()}function R(I,V){return I.pipe(V)}Ue.exports=function de(){for(var I=arguments.length,V=new Array(I),ae=0;ae<I;ae++)V[ae]=arguments[ae];var K=function W(I){return I.length&&"function"==typeof I[I.length-1]?I.pop():g}(V);if(Array.isArray(V[0])&&(V=V[0]),V.length<2)throw new B("streams");var oe,ne=V.map(function(X,L){var _=L<V.length-1;return function N(I,V,ae,K){K=function A(I){var V=!1;return function(){V||(V=!0,I.apply(void 0,arguments))}}(K);var oe=!1;I.on("close",function(){oe=!0}),void 0===J&&(J=C(1227)),J(I,{readable:V,writable:ae},function(X){if(X)return K(X);oe=!0,K()});var ne=!1;return function(X){if(!oe&&!ne){if(ne=!0,function w(I){return I.setHeader&&"function"==typeof I.abort}(I))return I.abort();if("function"==typeof I.destroy)return I.destroy();K(X||new ee("pipe"))}}}(X,_,L>0,function(S){oe||(oe=S),S&&ne.forEach(G),!_&&(ne.forEach(G),K(oe))})});return V.reduce(R)}},4962:(Ue,ge,C)=>{"use strict";var J=C(9555).q.ERR_INVALID_OPT_VALUE;Ue.exports={getHighWaterMark:function te(B,ee,g,w){var N=function A(B,ee,g){return null!=B.highWaterMark?B.highWaterMark:ee?B[g]:null}(ee,w,g);if(null!=N){if(!isFinite(N)||Math.floor(N)!==N||N<0)throw new J(w?g:"highWaterMark",N);return Math.floor(N)}return B.objectMode?16:16384}}},3951:(Ue,ge,C)=>{Ue.exports=C(2016).EventEmitter},2024:(Ue,ge,C)=>{"use strict";var J=C(4282).Buffer,A=J.isEncoding||function(ne){switch((ne=""+ne)&&ne.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ee(ne){var X;switch(this.encoding=function B(ne){var X=function te(ne){if(!ne)return"utf8";for(var X;;)switch(ne){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ne;default:if(X)return;ne=(""+ne).toLowerCase(),X=!0}}(ne);if("string"!=typeof X&&(J.isEncoding===A||!A(ne)))throw new Error("Unknown encoding: "+ne);return X||ne}(ne),this.encoding){case"utf16le":this.text=de,this.end=I,X=4;break;case"utf8":this.fillLast=G,X=4;break;case"base64":this.text=V,this.end=ae,X=3;break;default:return this.write=K,void(this.end=oe)}this.lastNeed=0,this.lastTotal=0,this.lastChar=J.allocUnsafe(X)}function g(ne){return ne<=127?0:ne>>5==6?2:ne>>4==14?3:ne>>3==30?4:ne>>6==2?-1:-2}function G(ne){var X=this.lastTotal-this.lastNeed,L=function N(ne,X,L){if(128!=(192&X[0]))return ne.lastNeed=0,"\ufffd";if(ne.lastNeed>1&&X.length>1){if(128!=(192&X[1]))return ne.lastNeed=1,"\ufffd";if(ne.lastNeed>2&&X.length>2&&128!=(192&X[2]))return ne.lastNeed=2,"\ufffd"}}(this,ne);return void 0!==L?L:this.lastNeed<=ne.length?(ne.copy(this.lastChar,X,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ne.copy(this.lastChar,X,0,ne.length),void(this.lastNeed-=ne.length))}function de(ne,X){if((ne.length-X)%2==0){var L=ne.toString("utf16le",X);if(L){var _=L.charCodeAt(L.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ne[ne.length-1],ne.toString("utf16le",X,ne.length-1)}function I(ne){var X=ne&&ne.length?this.write(ne):"";return this.lastNeed?X+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):X}function V(ne,X){var L=(ne.length-X)%3;return 0===L?ne.toString("base64",X):(this.lastNeed=3-L,this.lastTotal=3,1===L?this.lastChar[0]=ne[ne.length-1]:(this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1]),ne.toString("base64",X,ne.length-L))}function ae(ne){var X=ne&&ne.length?this.write(ne):"";return this.lastNeed?X+this.lastChar.toString("base64",0,3-this.lastNeed):X}function K(ne){return ne.toString(this.encoding)}function oe(ne){return ne&&ne.length?this.write(ne):""}ge.StringDecoder=ee,ee.prototype.write=function(ne){if(0===ne.length)return"";var X,L;if(this.lastNeed){if(void 0===(X=this.fillLast(ne)))return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<ne.length?X?X+this.text(ne,L):this.text(ne,L):X||""},ee.prototype.end=function W(ne){var X=ne&&ne.length?this.write(ne):"";return this.lastNeed?X+"\ufffd":X},ee.prototype.text=function R(ne,X){var L=function w(ne,X,L){var _=X.length-1;if(_<L)return 0;var O=g(X[_]);return O>=0?(O>0&&(ne.lastNeed=O-1),O):--_<L||-2===O?0:(O=g(X[_]))>=0?(O>0&&(ne.lastNeed=O-2),O):--_<L||-2===O?0:(O=g(X[_]))>=0?(O>0&&(2===O?O=0:ne.lastNeed=O-3),O):0}(this,ne,X);if(!this.lastNeed)return ne.toString("utf8",X);this.lastTotal=L;var _=ne.length-(L-this.lastNeed);return ne.copy(this.lastChar,0,_),ne.toString("utf8",X,_)},ee.prototype.fillLast=function(ne){if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ne.length),this.lastNeed-=ne.length}},4282:(Ue,ge,C)=>{var J=C(9007),A=J.Buffer;function te(ee,g){for(var w in ee)g[w]=ee[w]}function B(ee,g,w){return A(ee,g,w)}A.from&&A.alloc&&A.allocUnsafe&&A.allocUnsafeSlow?Ue.exports=J:(te(J,ge),ge.Buffer=B),B.prototype=Object.create(A.prototype),te(A,B),B.from=function(ee,g,w){if("number"==typeof ee)throw new TypeError("Argument must not be a number");return A(ee,g,w)},B.alloc=function(ee,g,w){if("number"!=typeof ee)throw new TypeError("Argument must be a number");var N=A(ee);return void 0!==g?"string"==typeof w?N.fill(g,w):N.fill(g):N.fill(0),N},B.allocUnsafe=function(ee){if("number"!=typeof ee)throw new TypeError("Argument must be a number");return A(ee)},B.allocUnsafeSlow=function(ee){if("number"!=typeof ee)throw new TypeError("Argument must be a number");return J.SlowBuffer(ee)}},496:Ue=>{function C(J){try{if(!global.localStorage)return!1}catch{return!1}var A=global.localStorage[J];return null!=A&&"true"===String(A).toLowerCase()}Ue.exports=function ge(J,A){if(C("noDeprecation"))return J;var te=!1;return function B(){if(!te){if(C("throwDeprecation"))throw new Error(A);C("traceDeprecation")?console.trace(A):console.warn(A),te=!0}return J.apply(this,arguments)}}},1171:Ue=>{"use strict";Ue.exports=function(ge){ge.prototype[Symbol.iterator]=function*(){for(let C=this.head;C;C=C.next)yield C.value}}},4439:(Ue,ge,C)=>{"use strict";function J(g){var w=this;if(w instanceof J||(w=new J),w.tail=null,w.head=null,w.length=0,g&&"function"==typeof g.forEach)g.forEach(function(R){w.push(R)});else if(arguments.length>0)for(var N=0,G=arguments.length;N<G;N++)w.push(arguments[N]);return w}function A(g,w,N){var G=w===g.head?new ee(N,null,w,g):new ee(N,w,w.next,g);return null===G.next&&(g.tail=G),null===G.prev&&(g.head=G),g.length++,G}function te(g,w){g.tail=new ee(w,g.tail,null,g),g.head||(g.head=g.tail),g.length++}function B(g,w){g.head=new ee(w,null,g.head,g),g.tail||(g.tail=g.head),g.length++}function ee(g,w,N,G){if(!(this instanceof ee))return new ee(g,w,N,G);this.list=G,this.value=g,w?(w.next=this,this.prev=w):this.prev=null,N?(N.prev=this,this.next=N):this.next=null}Ue.exports=J,J.Node=ee,J.create=J,J.prototype.removeNode=function(g){if(g.list!==this)throw new Error("removing node which does not belong to this list");var w=g.next,N=g.prev;return w&&(w.prev=N),N&&(N.next=w),g===this.head&&(this.head=w),g===this.tail&&(this.tail=N),g.list.length--,g.next=null,g.prev=null,g.list=null,w},J.prototype.unshiftNode=function(g){if(g!==this.head){g.list&&g.list.removeNode(g);var w=this.head;g.list=this,g.next=w,w&&(w.prev=g),this.head=g,this.tail||(this.tail=g),this.length++}},J.prototype.pushNode=function(g){if(g!==this.tail){g.list&&g.list.removeNode(g);var w=this.tail;g.list=this,g.prev=w,w&&(w.next=g),this.tail=g,this.head||(this.head=g),this.length++}},J.prototype.push=function(){for(var g=0,w=arguments.length;g<w;g++)te(this,arguments[g]);return this.length},J.prototype.unshift=function(){for(var g=0,w=arguments.length;g<w;g++)B(this,arguments[g]);return this.length},J.prototype.pop=function(){if(this.tail){var g=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,g}},J.prototype.shift=function(){if(this.head){var g=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,g}},J.prototype.forEach=function(g,w){w=w||this;for(var N=this.head,G=0;null!==N;G++)g.call(w,N.value,G,this),N=N.next},J.prototype.forEachReverse=function(g,w){w=w||this;for(var N=this.tail,G=this.length-1;null!==N;G--)g.call(w,N.value,G,this),N=N.prev},J.prototype.get=function(g){for(var w=0,N=this.head;null!==N&&w<g;w++)N=N.next;if(w===g&&null!==N)return N.value},J.prototype.getReverse=function(g){for(var w=0,N=this.tail;null!==N&&w<g;w++)N=N.prev;if(w===g&&null!==N)return N.value},J.prototype.map=function(g,w){w=w||this;for(var N=new J,G=this.head;null!==G;)N.push(g.call(w,G.value,this)),G=G.next;return N},J.prototype.mapReverse=function(g,w){w=w||this;for(var N=new J,G=this.tail;null!==G;)N.push(g.call(w,G.value,this)),G=G.prev;return N},J.prototype.reduce=function(g,w){var N,G=this.head;if(arguments.length>1)N=w;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");G=this.head.next,N=this.head.value}for(var R=0;null!==G;R++)N=g(N,G.value,R),G=G.next;return N},J.prototype.reduceReverse=function(g,w){var N,G=this.tail;if(arguments.length>1)N=w;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");G=this.tail.prev,N=this.tail.value}for(var R=this.length-1;null!==G;R--)N=g(N,G.value,R),G=G.prev;return N},J.prototype.toArray=function(){for(var g=new Array(this.length),w=0,N=this.head;null!==N;w++)g[w]=N.value,N=N.next;return g},J.prototype.toArrayReverse=function(){for(var g=new Array(this.length),w=0,N=this.tail;null!==N;w++)g[w]=N.value,N=N.prev;return g},J.prototype.slice=function(g,w){(w=w||this.length)<0&&(w+=this.length),(g=g||0)<0&&(g+=this.length);var N=new J;if(w<g||w<0)return N;g<0&&(g=0),w>this.length&&(w=this.length);for(var G=0,R=this.head;null!==R&&G<g;G++)R=R.next;for(;null!==R&&G<w;G++,R=R.next)N.push(R.value);return N},J.prototype.sliceReverse=function(g,w){(w=w||this.length)<0&&(w+=this.length),(g=g||0)<0&&(g+=this.length);var N=new J;if(w<g||w<0)return N;g<0&&(g=0),w>this.length&&(w=this.length);for(var G=this.length,R=this.tail;null!==R&&G>w;G--)R=R.prev;for(;null!==R&&G>g;G--,R=R.prev)N.push(R.value);return N},J.prototype.splice=function(g,w,...N){g>this.length&&(g=this.length-1),g<0&&(g=this.length+g);for(var G=0,R=this.head;null!==R&&G<g;G++)R=R.next;var W=[];for(G=0;R&&G<w;G++)W.push(R.value),R=this.removeNode(R);for(null===R&&(R=this.tail),R!==this.head&&R!==this.tail&&(R=R.prev),G=0;G<N.length;G++)R=A(this,R,N[G]);return W},J.prototype.reverse=function(){for(var g=this.head,w=this.tail,N=g;null!==N;N=N.prev){var G=N.prev;N.prev=N.next,N.next=G}return this.head=w,this.tail=g,this};try{C(1171)(J)}catch{}},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(Ue,ge,C)=>{var J=C(3801);function A(te){var B,ee;function g(N,G){try{var R=te[N](G),W=R.value,de=W instanceof J;Promise.resolve(de?W.v:W).then(function(I){if(de){var V="return"===N?"return":"next";if(!W.k||I.done)return g(V,I);I=te[V](I).value}w(R.done?"return":"normal",I)},function(I){g("throw",I)})}catch(I){w("throw",I)}}function w(N,G){switch(N){case"return":B.resolve({value:G,done:!0});break;case"throw":B.reject(G);break;default:B.resolve({value:G,done:!1})}(B=B.next)?g(B.key,B.arg):ee=null}this._invoke=function(N,G){return new Promise(function(R,W){var de={key:N,arg:G,resolve:R,reject:W,next:null};ee?ee=ee.next=de:(B=ee=de,g(N,G))})},"function"!=typeof te.return&&(this.return=void 0)}A.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},A.prototype.next=function(te){return this._invoke("next",te)},A.prototype.throw=function(te){return this._invoke("throw",te)},A.prototype.return=function(te){return this._invoke("return",te)},Ue.exports=A,Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},3801:Ue=>{Ue.exports=function ge(C,J){this.v=C,this.k=J},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8131:(Ue,ge,C)=>{var J=C(3801);Ue.exports=function A(te){var B={},ee=!1;function g(w,N){return ee=!0,N=new Promise(function(G){G(te[w](N))}),{done:!1,value:new J(N,1)}}return B[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},B.next=function(w){return ee?(ee=!1,w):g("next",w)},"function"==typeof te.throw&&(B.throw=function(w){if(ee)throw ee=!1,w;return g("throw",w)}),"function"==typeof te.return&&(B.return=function(w){return ee?(ee=!1,w):g("return",w)}),B},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8237:Ue=>{function C(J){function A(te){if(Object(te)!==te)return Promise.reject(new TypeError(te+" is not an object."));var B=te.done;return Promise.resolve(te.value).then(function(ee){return{value:ee,done:B}})}return(C=function(B){this.s=B,this.n=B.next}).prototype={s:null,n:null,next:function(){return A(this.n.apply(this.s,arguments))},return:function(B){var ee=this.s.return;return void 0===ee?Promise.resolve({value:B,done:!0}):A(ee.apply(this.s,arguments))},throw:function(B){var ee=this.s.return;return void 0===ee?Promise.reject(B):A(ee.apply(this.s,arguments))}},new C(J)}Ue.exports=function ge(J){var A,te,B,ee=2;for(typeof Symbol<"u"&&(te=Symbol.asyncIterator,B=Symbol.iterator);ee--;){if(te&&null!=(A=J[te]))return A.call(J);if(B&&null!=(A=J[B]))return new C(A.call(J));te="@@asyncIterator",B="@@iterator"}throw new TypeError("Object is not async iterable")},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},7156:Ue=>{function ge(J,A,te,B,ee,g,w){try{var N=J[g](w),G=N.value}catch(R){return void te(R)}N.done?A(G):Promise.resolve(G).then(B,ee)}Ue.exports=function C(J){return function(){var A=this,te=arguments;return new Promise(function(B,ee){var g=J.apply(A,te);function w(G){ge(g,B,ee,w,N,"next",G)}function N(G){ge(g,B,ee,w,N,"throw",G)}w(void 0)})}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},6737:(Ue,ge,C)=>{var J=C(3801);Ue.exports=function A(te){return new J(te,0)},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8186:(Ue,ge,C)=>{var J=C(4642);Ue.exports=function A(te){return function(){return new J(te.apply(this,arguments))}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports}},Ue=>{Ue(Ue.s=2943)}]);